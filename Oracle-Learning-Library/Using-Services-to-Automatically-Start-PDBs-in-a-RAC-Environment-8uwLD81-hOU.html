<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using Services to Automatically Start PDBs in a RAC Environment | Coder Coacher - Coaching Coders</title><meta content="Using Services to Automatically Start PDBs in a RAC Environment - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Using Services to Automatically Start PDBs in a RAC Environment</b></h2><h5 class="post__date">2013-12-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8uwLD81-hOU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to this demonstration
using services to automatically open PBS
in Iraq environment for this
demonstration we are using a three node
rack cluster host 01 host 02 and austell
3 the first thing we want to do is to
check the services available to the
listener running on each node so on
austell one you can clearly see that we
have access to an asn instance to
receive instance as well as the
automatically default PDB service
created for pdb one which is the only
pdb created inside that CD be so we can
check the same thing on the second node
and here you can see pretty much the
same thing except for ASM and the CDB
instance names which are different so
each node as its own instances and same
thing will be seen on the third node
with again different names for ASM and
CD be instances now let's check that no
manually created services has been
created for CD b1 and right now there is
none ok the next thing we want to do is
to connect to sequel + to verify the
open mode of your PD BS and for that
let's make sure we can connect to the
instance running on that node here so
the instance is called CD be one
underscore three connecting to sequel +
and looking at video RPGs to look at the
open mode as you can see there is only
one PT be running called PDB one and it
is opened in READ&amp;amp;WRITE mode let's check
the same thing on the second node which
is running CD be one underscore one the
second instance and as you can see
II pdb one is also accessible from the
second node as it is open in READ&amp;amp;WRITE
mode in that instance as well let's do
the same thing on the third node which
is running cdb one under scald to the
third instance and if we look at the
status of that pd BP v1 its again open
in READ&amp;amp;WRITE mode so this is the
current status of pdb one inside that
cluster so that's the characteristics of
pdb is running in rack is the
possibility to have a pdb open in
READ&amp;amp;WRITE mode either 12 or more
instances depending on what you want to
do now let's exit from all those
sessions and again here we verify the
manually created services for CD be one
right now none exists as we've seen
already now what we want to do is to see
the implication of starting and stopping
database in iraq environment and to see
what are the consequences on the open
mode of your PTDS so here we're going to
stop cdb one first of all and before
starting it up again we want to show you
this minus evil option of the SLV CTL
stop database command which tells you
basically on which node the the database
instances are going to be started so
here database cdb one will be started on
all three nodes now if we look at the
status of CD be one it is not running on
any of the node because we just stopped
it before now it's time to start up the
database so CD be one is started up and
now we can verify the status
to make sure that it is running on each
of the nodes which is the case again if
we connect to sequel plus on the first
node and look at the open mode you're
going to see the difference here so pdb
one is now in mounted mode while it used
to be in READ&amp;amp;WRITE mode before so let's
check the same on the second node and
you got to see the same result so pdb
one is in mounted mode let's check the
third one and same result so which
basically means that by default when you
start up a database or consolidated
database or CD be in Iraq environment
the PDP's are not automatically started
now let's exit from the first sequel
class session and what we're going to do
now is to create service that we call my
pdb one serves so we're going to create
it for that about CD b1 and especially
for that particular p DV that exists
which is called pdb one so we want an
automatic placement of the service
inside the server pool that is called CD
be one pool and the cardinality for this
service will be one so the service will
run on only one instance from the pool
that's what we are saying here so let's
create that service perfect and let's
verify for the sake of this
demonstration that the server pool cdb
one pull exists and it's comprised of
the free servers the free hosts that we
are using for this demo now before we
start the my pdb one serve that we just
created let's evo on which node it's
going to be started so it will
we started on those 22 so time to start
it up and look at the status of the
services manually created for CD be one
and as you can clearly see the my PB 1
serve is now running on the store too so
what is the consequence of having
started that manually created service on
your p DV that's what we are going to
check right now so again if we connect
to the first instance using sequel + and
look at the open mode of the pdb it's
still in mounted mode on the first node
now if we look at it on the second node
the open mode is now read write and
that's the exact consequence of having
started The Associated service for pdb
one so it automatically open in
READ&amp;amp;WRITE mode your pdb on the second
node in this case if we look at the
third node the status is still mounted
okay so let's exit from the first
session and now we just show you here
how you can use that manually created
service to connect to your pdb without
knowing on which instance it is open in
READ&amp;amp;WRITE mode so using the scan name
clusters around our scan and the service
name my pdb one serve here even if we
are connected from the first node is
going to connect you automatically to
the available instance that is running
your pdb one in READ&amp;amp;WRITE modes in
which case here it's going to be the
second node so we just verify that we
can connect and exit again
now let's have a look at the
implications of closing manually
directly from CL plus PDB one so we
close p DV 1 so which means that now its
status on the second node is also
mounted so what are the implication on
the service itself and as you would
expect my PB 1 serve is no longer
running because you closed your PDB and
it's closed on every node the service is
no longer active now let's start it
again so let's start my pdb one serve
again and look at the status of the
services running for cdb one so my PB
one serve is now running again on a
hostile to so what are the implication
if we look at the open mode of your pdb
on the second node because we closed it
manually before it was in mounted mode
but now because we start up the service
you can clearly see that the pdb was
open in READ&amp;amp;WRITE mode again while it's
still in mounted mode on the third node
and the first note as well now let's
stop the service and see what are the
implication on the pdb itself so if we
look at the status of the services none
are running right now and if we look at
the open mode on the second node it's
still in READ&amp;amp;WRITE mode so it's not
because you stop the service that is
going to close the pdb and obviously
still in mounted mode on the third and
first node
now let's start the service again to
make sure that it is started we verify
its status so it should be running on US
22 and that's exactly the case now let's
exit from the remaining sessions and
what we want to do now is to look at the
implication of stopping and starting the
database which is called CDV one again
in this case so first of all we stop the
database then we make sure that it's
down on all three nodes which is the
case now we look at the service and
because we stop the database the service
associated to that database is also
stopped and now what we want to do is to
start the database again but before
let's use again this evil command to see
where the database is going to be
started so here it tells you that it's
going to start the database on all three
nodes but it's also gonna start
automatically my pdb one serve on host
of three in this case so let's do the
start command and see the implications
so if we look at the status we are now
certain that the database is running on
all three nodes and that my pdb one
service is running on austell three
again we have the possibility from the
first node to use this manually created
service and thus can aim to connect
directly to the third instance
automatically so without
doing the placement of the service
itself so here we connect to the pdb one
database and if we look at the instance
to which we are now connected you see
that it's the third instance which name
is CD b1 underscore tube running on a
host of three so let's exit from this
session and now to finalize the demo
let's have a look at all the available
services to each and every listener
running on the cluster so on Oh stow one
you can see that we have again the ASM
the cdb and the automated created
default pdb service for pd b1 same is
going to be for the second host with
different names for the instances
however for the third node it's going to
be a little bit different because this
one will host the my pdb one serve
service that's basically the end of this
demonstration thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>