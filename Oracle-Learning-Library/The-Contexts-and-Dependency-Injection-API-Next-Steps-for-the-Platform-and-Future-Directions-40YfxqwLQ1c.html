<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Contexts and Dependency Injection API: Next Steps for the Platform and Future Directions | Coder Coacher - Coaching Coders</title><meta content="The Contexts and Dependency Injection API: Next Steps for the Platform and Future Directions - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Contexts and Dependency Injection API: Next Steps for the Platform and Future Directions</b></h2><h5 class="post__date">2013-01-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/40YfxqwLQ1c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay good afternoon everyone thank you
for coming to this talk I've got a
couple of people up here on stage with
me I've got Linda from Oracle and Marius
he's a colleague of mine from Red Hat my
name's Pete Mia I'm the CD i SPECT need
and today we're going to talk a little
bit about what's coming next in CD I but
before I start let Linda introduce
myself oh I know it's like I am Linda
didn't aquel I'm one of the select leads
for java ee 7 and then Marius is a yeah
I color your mind Red Hat and you can
increase in southeast so what we're
going to do donts never the microphone
don't like others of work otherwise how
many people here have used CD I ok how
many people are here today to learn
about CDI ok and how many people here
would say their CD I experts and they
you know they know everything there is
to know about CDI and they're going to
be correcting me as we go along ok
thanks guys ok so what what we're going
to try and do in try to satisfy everyone
it's Marius and I are going to take the
Turk first ten minutes and just show you
how you can use CDI on jboss just to
give you a flavor of how easy it is to
get started and then then just going to
take 10 minutes to outline some of the
improvements that are coming in the java
e7 platform around CDI i'll spend about
15 minutes talked about what's coming in
CDI 1.1 and then i'm going to spend
about 10 minutes giving you an idea as
some of the things we want to do going
going beyond CDI 1.1 some of our ideas
for the future and then hopefully we'll
have 10 or 15 minutes for questions at
the end so Marius is going to take over
the laptop hello and I get that
hopefully make this microphone icon up
here just sure ok so this demo that
we're going to do you can hear me right
I can speak louder otherwise this demo
we're going to do is basically we're
using eclipse we've got jealous
developer studio installed we've also
got a JBoss Forge which is our rapid
application development tool running
we're going to build a quick application
that you can use on your mobile and
we're going to deploy it up to open
shift I'm just to give you I really
don't want you to necessarily worry too
much about how we're doing it it's more
I want to give you a flavor of how easy
it is to get going and so you could go
away and do this at home merius can we
try and make the fonts of it big exas
it's a little bit on the small side I
think for everyone yeah okay so like I
mentioned this is all using a yeah we're
deploying to open shift which is our
past that's free for you to you so you
can go and sign up for that we're using
Forge which is our rapid application
development tool suitable for quickly
building applications we're going to use
html5 and rest to build the application
java ee is a brilliant server for
creating those sorts of applications has
got jax-rs which is a really great way
of building restful applications built
in of course html5 you can use on any on
any server we do it or anyone logic a
bit illogical yeah okay one point loader
and thank you yeah so so you know I
think Joffrey is a perfect for building
this kind of kind of mobile mobile
application Maris is really so what
we've done actually is we pre created
the application in open shift so that
I'm just not the not the code but just
the application so the DNS is set up and
everything that just saves a couple of
minutes as we get going so the first
thing that marries is going to do is
he's using forge in Eclipse down the
bottom there and he's going to type new
project to create a new a new Java EE
project he gives us a name or he's going
to call attack me and then we're going
to give it a project give it a patch
over package to put all the classes in
and he's just going to go through and
checked all the defaults so having
created the project the next thing I
want to do is add some capabilities so
Forge comes with built-in support for
all sorts of java ee technologies
servlet CDI of course about being
validation jpa etc so he just goes
through types a series of commands like
set up servlet set up being set up
validation in order to get all these
things running this will set up all your
deployment descriptors and gives you
give you a skeleton project so you don't
worry about what goes where and what
your default value should be what all
the schemas are for all your XML files
all this kind of stuff so it's just a
nice quick later yes it's going so we've
got
we got safe I think we've got servlet CD
I going to do JP a mouse we've got
running hibernate running on table stay
at seven so as you go along you'll see
that Forge has built-in built-in from
online completion for all of the things
that we have so you just press tab and
you get all the options that you might
want to use you'll also notice we've got
some fairly nice integration with
Eclipse so that as you do things in the
shell they pop up for you on the screen
and eclipse pretty easy to get started
so as we had bean validation another
great job reading technology which gives
us really easy the ability to really
easily validate our data as it comes
into the application and of course we're
going to need jax-rs installed because
that's how we're going to communicate
with our html5 you learn so I think
that's all of the things we need for the
application setup now so the next thing
we're going to need is a couple of
entities so rather than spending five
minutes creating entities now we're just
going to copy a couple of pre-canned
entities in I'm pretty sure everyone
here is used a PA or hibernate or
eclipse thinks they know what entities
look like know how that will work so
Marius has got a couple of pre-canned
classes over on the left-hand side there
he's going to copy them and just paste
them into the application which give you
a flavor of how nice the Java EE
programming model is to use we're going
to take these fairly bare bone and JPA
entities add a bit of being validation
to and to show you how you could use
bean validation really simply and really
quickly with them so he's got the bare
bones entities and he's got a few a few
more fields we're going to add to the
entity here with some bean validation
constraints on them so once they're
pasted in we can actually see them as
well ridiculously large we can I talk
you through what's going on with them
okay so we've now put in these these
fields with the bean validation
constraints on them so we've got and
we're building a member registration
database right so what's day on those
are in the wrong course or in the wrong
call aha okay so if we got we're
building a member registration database
and so we want to put
things like we want to do things like
build putting things like a description
for the person a name for the person in
the picture of the person so having done
that we need to put we put these bean
validation constraints on so we have
things like that the size of the
description must be between 20 and a
thousand characters the name of the
person can't be more than 50 characters
long etc so that means that all the data
that we now have going into our
application will be validated for us and
we've got some some constraints and
fields to add to the allows for the
event I think now we need one for the
for the member is going to be going to
the event so merit will open up the
member class that piss feel good right
mm-hmm ok so that's the that's our
entities added we've got be Melton so we
now got entities with with validation on
them and the next thing we're going to
need to do is generate some restful
endpoints for these entities now luckily
forged allows us to do that pretty
quickly so Marius is going to go back to
the forge console and he's going to
generate he's going to scaffold up a
couple of n points for the entity
Institute's so he does this again by
using the command line console using the
rest plug-in and this has an endpoint
from entity command that he can use to
just quickly generate some basic rest
endpoints from the entities so the other
thing we want to do of course is because
we're building an html5 app we want to
use JSON rather than XML so we pass in
that the content type of the what the
rest when points should reduce is JSON
ok so that means we've now got some
restful endpoints ok so Marius can now
deploy the application to the
application server so he just quickly
does that drop and drag drag and drop
that arm and start up the application
server start the application server and
the way that goes so that will very
quickly boot up and then we could use
for example the jax-rs endpoint
Laura in in jail to their studio to take
a look at the rest will end points have
been deployed so you can see that the
end points we've got there and we can
also so he's going to take a look i
think that the rest remember one look
which should have a runners and you can
do run on server just clicks finish and
this brings up a request there if he
presses the go button on the right hand
side we can see that it performs a query
against the server and we can quickly I
think you just want mr. a load general
endpoint is alone yes but there's no
data because as last time we forgot
import ah ok so this is a good point
this is there always what happens when
we develop code right we don't mistakes
so one of the things we're going to need
is some initial date of our application
so we can very quickly do that so Marius
will copy an import sequel and we put
some sample data in there so they've got
a little bit of dated and fill in the
entities that we created ok so we do
that of course we need to redeploy the
application to the server ok so then the
application deploys and we rerun the
query in the end point and we take a
look at the service pistol we can see
we've got some results back so the
application is up and running it's
working that's pretty good but of course
we also want to have this we want to
have a view layer for this the html5
view there what we're going to do is
just copy in the pre can index HTML but
Marius wrote for this application this
is based around jquery mobile so we need
to put this in the source main web app
directory like I say this is just a
plain html5 file with a bit of
JavaScript in it to give us a nice UI
but javascript uses it communicates with
restful end points which are running on
the application server again if we
restart the application we should have a
nice UI plus now so yeah okay we've
taken a few shortcuts to get this up and
running in 10 minutes but you know i
don't want to spend i just want to show
you that the development experience with
java ee 6 OECD I is really pretty easy
you can really get going very quickly
and I would encourage you guys to go and
try this out so Marius is running us
alarms or mobile phone simulator that we
have built in yep okay we've got our
little application up and running and we
can take a look at who's that drive one
what people we have drumming on me on
the application so through a little
application up and running there very
quickly so my point is to just show you
that that grea 6 is a great platform for
developers really productive with some
with some nice trailing you could use
we're using jalis develops to do here
because we're jville skies and so we
also use jus technology but Linden will
probably be using NetBeans to do this
there's lots of different options for
building applications like this um
marrying steel to try get this up and
running on the cloud quickly let's try
that yeah so we're going to use Oakley
shift which I said as I said it's the
Red Hat pass we can do that again very
easily from inside the tooling I've got
them account up there and I've already
set up eclipse with my credentials and
so on unluckily it's remembered my
credentials adapter type them in again
which is pretty good so this allows us
to create a new application on openshift
and we also want to wish we we've
squeezed in the previous screen marius
selected to run this on jboss enterprise
application platform and on this screen
he said he wants to import the project
we just created on to Oakland ships so
what this is now doing he's going away
to local shift telling ownership to
create a space on its servers telling it
to create the dns records propagate the
dns records and then finally set up a
git repository which we use to manage
the application sources the application
sources that we deploy up that the
project that we can deploy out that the
way openshift works is you can deploy
the sources for your application with
amazement pomp and open ship will
actually then just build the application
for you and deploy it on to the work
onto the internet internet and you can
use it so whilst that's all that's gone
through very quickly this plan so that's
pretty good so we now got our ok
creates a late shift so the final thing
we need to do is publish the application
we created locally on to that open ship
server so Marius goes to the service tab
and he selects the apron shift servant
and select publish and then that will
push all of the information up there so
this application we've created is using
a whole range of Java EE technologies
all of them worked really well with CDI
so they'll be CDI we woven through all
of the classes we generated using using
Forge and that's really you know another
thing I want to sort of tell you and
show you here is that this is a very
well integrated sac you know CDI is just
one part of this whole stack and the
whole thing really makes sense when you
consider the whole Java EE platform not
just CDI on so which is partly why Linda
is here to talk about how CDI CDI 1.1
fits into the java ee 7 saurian and the
improvements we're making in the
platform for a java ee 7 in fact when I
sat down the side think about how CDI
1.1 should look one of my real strong
thoughts was you know CDI is pretty good
and what we need to improve is the
integration within the platform as much
as you know the actual core
specification itself so that really has
been a big focus of what we've been
doing over the last year or two is how
can we better integrate CDI into the
Java EE platform and into all the other
component technologies so all this is
doing at the moment is pushing our
project up to open shift using that git
repository and then running the build on
openshift include buying the application
to the application server unfortunately
this takes just a few moments so
hopefully it will be done in depends on
the network ends it depends a lot on the
network obviously how quickly this will
go and how happy the ownership servers
are they how how well they're responding
but I've expect the story in just a
moment and while we're waiting for that
I think we could let Linda talk about
the java ee 7 stuff and then you were
and we well that's okay when we can come
back nicely when did this summer's on
the toes or that what that's right thank
you so thanks Pete um this Pete
mentioned from our Java EE perspective
CDI was one of the great simplifying
neighbors in Java EE 6 it was one of the
big additions in Java EE 6 for ease of
use what I'm going to talk about now is
how we're working on enhancing the
alignment of CDI with java ee 7 1 so
that they're better integrated and two
to simplify things even further for the
developer so just a generic disclaimer
this is still work in progress in the
java ee 7 expert group as well as in the
CDI expert group i'll be presenting some
areas where we still have open questions
that we'd like more feedback on you as
developers can help us with some of
these and if you come to our buff in a
couple of hours here one of the things
we'd like to solicit input on is how we
can improve further the alignment of CDI
and ja ve and some of these areas we
have some questions for you so I'd like
to talk about a number of aspects that
we've been looking at in enhancing the
alignment between managed beans we have
two notions of managed beans right now
and the platform they kind of merge but
they're not fully merged one is the at
managed bean managed beans that we
introduced in Java EE 6 with the idea
that managed beans captured a spectrum
of functionality that was common across
the various managed component types in
the Java EE platform and CDI managed
beans make use of our managed beans are
managed beans or one aspect of CDI
managed beans but the alignment is in a
hundred percent so we've been looking at
some of the issues where we have overlap
but not full consistency so let's go
through these in order transactional
interceptors were a great ease of use
capability for ej be a rather
transsexual they weren't called
interceptors in ejb but the container
interposed on invocations on ejb where
if the developer specified that the
transactions were being managed by the
container which is actually the default
that the container would interpose and
automatically initiate transactions if
they were not already in progress we
wanted to generalize this as an ease of
use capability that spanned other
managed bean types so we've run this
through the expert group the expert
group has been strongly supportive of
this this is currently being defined as
part of the maintenance releases under
way for the Java transaction API and the
way this works is that we've defined
using CDI interceptors transactional as
an interceptor binding tight where the
application can use this like any other
CDI interceptor to interpose on managed
bean method invocations to to initiate
transactions the transactional
annotation itself allows you to specify
transaction type and these transaction
types are modeled along the lines of
what has been already successful with
ejb in terms of semantics you can also
specify the exception behavior for
various classes of exceptions so you
don't specify anything in terms of
exception behavior you get was pretty
much in line with what we have today
which is that runtime exceptions will
cause transaction rollback by default
but application exceptions checked
exceptions will not in the example here
I've defined for checked exceptions for
the sequel exceptions that if we have a
sequel exception for our shopping cart
we do want to affect transaction
rollback that's probably more serious
but for the sub
s of sequel exception that's just a
sequel warning we don't want to affect
transaction rollback also in the area of
transactions is the introduction of a
transaction scope and we've been working
that on this in conjunction with the CDI
expert group we want to leverage this
transaction scope this is being
leveraged for JMS because it turns out
that this is a natural fit for use with
JMS context objects and JMS context
objects are used if you've been going to
the JMS talks are used to simplify the
invocation model for JMS so having to go
through many layers of invocation where
you grab a connection factory and then
you grab a session and then you grab a
producer and so on the JMS context
basically simplifies down this API but
it makes sense for JMS context objects
to run within the scope of these
container manage transactions so we've
introduced a scope tight for transaction
scope and obviously this is usable well
beyond the JMS use case so we've been
making heavy use of CDI interceptors to
do this work we have an alignment issue
however namely see both CDI interceptors
and Java EE interceptors are closer to
me so I can actually see my laptop jobby
interceptors and CDI interceptors are
supported for CDI managed beans for ejbs
for managed bean managed beans you can't
hear me I'm sorry ok let me see what I
can do here so I could actually see what
I'm talking to um no not okay CD so
these interceptors are usable for a
subset of what
your guard as managed beans and Java EE
so what we're discussing with the expert
group and this is still an open issue is
just how far we should broaden the use
of these interceptors for the Java EE
types for example is it reasonable seems
reasonable to us that these interceptors
be usable for other managed component
types of Java EE for example usable
within servlets and if we do broaden the
use of interceptors there other
extensions that we can imagine
interceptors being used for for example
ejb has a notion of container managed
security of inter positioning again on
method invocations with security
attributes this could be generalized
through the use of interceptors you can
imagine logging interceptors and so on
so we could build these capabilities in
in a much more general way so Pete
mentioned the work in bean validation
bean validation one of the topics that
bean validation has been investigating
in then that will see in being the bean
validation 11 release which is going to
be part of java ee 7 is method level
validation and bean validation method
level validation will also be done by a
CDI interceptors so in this simple
example i'm showing with an ejb how we
can extend the use of bean validation
interception with a simple simple use
case here so we have a stateless session
bean and the stateless session bean has
a method to ship orders on behalf of
customers we're using the standard being
validation annotations not null we
definitely want a product in our order
that can't be null we're going to
restrict the number of the number of
items that a customer can order in this
order to 10 or reason just to illustrate
we have a customer name and address is
presumably a user-defined annotation for
being validation that will validate that
the string that's passed
as a customer address is actually a
valid address another open issue in
front of the platform expert group is
that of expanding the automatic use of
CDI so right now CDI needs to be enabled
on a per archive basis on an ejb jar
basis or a war basis and so on with the
presence of a beam xml file so we've
proposed the platform expert group that
we actually consider that we enable CDI
by default in Java EE another area that
is currently under discussion is that of
the expanded use of CDI stereotypes so
the ability to in a general sense create
annotations as combinations of existing
annotations so here I've taken an ejb
annotation actually a Java EE annotation
for roles allowed and I'm defining a
stereotype called admin which again I'm
going to combine with wits I'm going to
apply as a stereotype to a 2 i'm going
to use stateless as another stereotype
and combine them in terms of a second
stereotype called admin beam and here i
have an admin ejb component it's going
to be a stateless session bean with
roles allowed restricted to two
administrator now to make this work we
need to take our platform annotations we
need to go through the annotations that
are defined by the Java EE platform and
evaluate which one's of those are
candidates for having a target type of
annotation type because right now most
of them are they're all restricted to
either class or method or field and so
on but they're not designed to be
applied to other annotations
that will be a fairly straightforward
exercise we're hoping but we think that
this is another very useful capability
the more general use of CDI stereotypes
and I should note that a number of
specifications already have
functionality that's along these lines
but they've been doing it in an ad hoc
away where you can apply annotations to
other annotations and their combined due
to the semantics of those particular
specifications so being validation
currently does this jax-rs currently
does this but there's no uniform spec
defining mechanism for how you can build
annotations layered on top of
annotations and then apply them down the
chain with consistent semantics so we
think we should address this and that
CDI stereotypes is is the right
mechanism to consider it um and then I
think this is the last topic of my list
implicit producers so right now if you
want to do injection of a Java EE
resource type or Java EE type that is
not a not a CDI manage being and CDI you
need to define either producer method or
a producer field for it as I've done in
the first example here so here we want
to inject a data source into into our
application using CDI I have to define I
have to define produces at resource and
so on which seems kind of clunky and not
a real consistent binding of the Java EE
functionality with a CDI functionality
so one of the suggestions and another
open issue in front of the platform
expert group is that we consider what
we're terming implicit producers so that
you can simply inject a data source so
there's only one data source in your
environment as the default data source
might be you should just simply be able
to inject it um so I'll leave you with a
couple of resources here a pointer to
the JTA project for which the work and
transactional into
receptors and transaction scopes being
led and then a couple of threads that
are that you can review that are part of
our part of our Java EE spec project the
java ee 7 jsr is being conducted very
publicly as a java.net project as the
Java EE spec project on java.net I've
shown here a couple of the threads and
the expert group mailing list which you
can all view on the discussions on
manage being alignment in general and
our positioning visa V CDI and some of
the proposals that we've made to the
platform expert group for how we can
enhance the binding between these two
technologies to further simplify the
platform and maybe if I can make this go
away you can contribute to this
discussion by joining the users list
there's a user's list on the Java EE
spec project it receives all of the
emails that go to the expert group so
you can track what's going on in the
expert group and you can use this this
list for discussion the expert group
members have been strongly encouraged to
sign up for the users lists that they
can engage in a back-and-forth with you
as we get feedback on our technology and
I'll insert a final plug for our Boff at
five thirty in this room where we'd
actually like to get a lot of input from
you on some of the open issues that I've
just described so back to you Pete thank
you please yes nope so this is always so
this is always the problem now on Kevin
Eric technology there we are and okay so
what we've had seen so far is you know
that CDI 10 java ee 6 is a really good
platform to develop on and len Linda's
outline some of the changes we won't see
in java ee 7 and i think you'll see
starting to see a picture here right we
actually think we've got a pretty good
platform now and what we need to do is
you know i make some minor improvements
fix and minor issues in it but there's
not as a wholesale set of changes to
come here and i think you're going to
see this can this team
continued to develop as I talk a little
bit about what we have in we have plans
for CDI 1.1 but before I do that let's
just see if this application loaded up
okay so I'm going to just go to this on
the cloud okay oh yes thank you yep so
that's now on the cloud so yeah I mean
that hopefully just validates that the
development experience with CDI and java
ee 6 is pretty good it's pretty easy to
get started okay so let me talk a little
bit about what we have in CDI coming up
in CDI 1.1 and they've got a bit of time
I try and talk about some of the things
we have hopefully coming up after that
so let me just bring out the slides it's
not the right slide this is the right
side pic yeah right okay so yeah we've
done our CDI 1.0 we talked about java ee
7 so okay first of my CD I 1.1 topics
which is probably I guess for lots of
people the one that's the most
interesting which is when is this
happening when are you going to get
round to actually doing some work on
this and release all of this so you can
use it well the answer is here we've
agreed a set of dates these align with
java ee 7 so this month we should get
the public review dr done and that for
that i'm really aiming to get all the
major features in CDI and all the major
issues resolved anything beyond that
should be minor minor changes will then
be submitting a proposed final draft in
February and that period between the two
is really a chance for us to get the
reference implementation the tck in
shape with a final release on March 15
so I think you know what's that it's
about six months away so this this these
improvements are pretty close now
they're coming coming pretty soon around
the corner so what do we have coming up
in CDI 1.1 those of you who've used CDI
1.0 i'm going to guess that your biggest
complaint you said to me I've got one
complaint one thing I really don't like
that CD I it would be that enabling
interceptors and enabling decorators and
enabling
alternatives is extremely hard work so
this is addressed hopefully in CDI 1.1
how we and the expert group went back
and forth quite a lot about the right
way to address this but in the end we
decided to take okay let me take a step
back and just explain to you why this is
a bit of a problem why this wasn't
addressed in CDI 10 if you want to have
an interceptor enabled it needs to be
given an order to execute in compared to
other interceptors and if you want to
enable interceptors globally or
decorators or alternatives globally
across an application you need to define
the order globally across the entire
application and if you imagine a complex
application an ear application with many
wars and many ejb jars you can see that
this starts to get a little bit complex
because you've got interceptors that are
only defined in one war or only defined
in one ejb jar I shouldn't execute in
other places and this waltz elite the
CDI 10 expert group decided not to
address this problem and just said you
have to enable intercepts and decorators
for every every jar that you enable as a
CDI jar so in order to solve the problem
of needing to globally enable intercepts
and decorators which is really what you
guys need we had to go and think about
how do we globally order them how do we
give them an order that works across the
entire application and we went back and
forth on this as I said and in the end
we decided to take an approach that
really is very reminiscent of system 5
in it or httpd or you know similar sized
pieces of software you just give an
interceptor a number and the higher the
priority the closer to the application
code it executes this is not a
particularly advanced solution it's not
even a particularly it's not a clever
solution but I think it is a proven
solution and it's a simple solution and
I think that in the end will want us out
for this approach over and above using
some more complex relative ordering
solution or something using annotations
and you know this is something I really
would appreciate feedback on whether you
like this approach to ordering
interceptors whether you hate it so come
and find me afterwards or come to the
buff and we can discuss
that okay so we have some more
injections to find you can inject into
enon fields this is just a useful little
feature that you might want to take
advantage of in your application very
straightforward there's nothing more I
can say about that besides you can
inject into an enum field so I won't
spend any more time on that okay this
top feature is a very nice but very
simple feature again in CDI every
classes have beam within some some
fairly minor constraints around what
constructor you have but pretty much
every beam with a no argument
constructor is a beam well this leads to
a problem right sometimes you define
some classes you don't want to beans
they're just utility classes they should
have actually be included in your CD I
deployment so we've introduced a vetoed
annotation which basically says to the
container please just ignore this class
don't do anything with it just hands off
you know don't don't touch it we've got
decorators for built-in beams so CD high
defines a number of built-in beans these
are used to integrate with CDI itself so
you can inject the beam manager which is
the SPI we use for controlling the CDI
container and you can also inject other
java ee e resources like user
transaction the CDI 1.0 speck said
didn't say you could decorate these
objects but we said in CDI 1.1 when you
can decorate these objects so you can
actually impose additional behavior on
these beams and make them do things so
here for example I would find that I'm
going to decorate every injection of a
user transaction and I could perhaps do
something in the beginning methods about
slog every time the begin method was
called something like that um so there's
lots of dual options when it comes to
comes to decorating built-in beans and I
think this just especially for extension
or thurs gives you a little bit more
power so obviously a big part of
dependency in context injection is
contexts and you'll notice that pretty
much everything I'm talking about in
terms improvements apart from this first
one is around dependency injection and
not contact and that's largely because
we've decided to leave addressing many
of the context issues that we
after CDI too because we want to address
them all in one big go rather than
trying address to address them piecemeal
but the one that we have addressed in
CDI 1.1 is giving you a call back so
that when a context starts so when the
session starts our wedding a request is
initialized you get a call back this is
very similar to you know servlet collect
but just using the familiar CDI event
API and of course it not only works for
servlet context but also when you're you
know working in a remote ejb call or
something like that you'll get the same
call back a couple more we've got on the
context we've got conversations for pure
servlets so we had conversations for jsf
in CDI 1.0 we've generalized that to
work on on any servlet request and we
made the request context available to
start up the next one's a big one
actually it seems to me that quite a lot
of the big ones are the ones that are
really small on the slide but the next
ones are really important one and so in
CDI 1.0 if you were wanting to inject
things you want me to operate on beans
it was really easy if you were already
inside your CD I application if CD i was
already executing really easy you just
do that inject and you get your objects
and you work with them but it's but it
wasn't very easy if you weren't in in
the CDI container if you were just in
some other class within your application
so we've added a static method CDI
current that allows you access into the
CDI system and a corresponding method
CDI destroy that allows you to clean up
that beam of course because you know
it's low a CDI works right as if you're
in a request and you have a request
scope being you get an instant you get
the same instance through the request
and the container will take care of
destroying that at the end of the
request if you're not in if you don't
have a request go theme if you just have
a dependence great beam it has an
undefined lifecycle the life cycle is
dependent on where you inject it
obviously injects into a request go
being that's great it will be cleaned up
at the end of the request but if you
just get it and hold a reference to it
in some other field and some other class
in the JVM there's no way for the
containers will automatically clean that
up so it's up to you the application
developer
to manually clean that up using
destroyed so that covers the case we've
got dependent objects but it is also
useful if you've got scoped objects so
if you've got session scoped of
different requests go to objects in CDI
1.0 we said that once you'd put an
object into a context once you've
created a session scope to be in
instance you couldn't get rid of it that
was it that was the one instance you had
and you had to destroy the entire
session in order to get rid of it so
this destroy method actually allows you
to remove instances add hot as you need
them and this is going to work for all
built in contexts automatically in CDI
1.14 context that have been built add
extensions to the spec they will need to
explicitly support this they need to
implement an additional interface in
order to support this we're saying to
all extensions please do support this
because it's very useful thing to be
able to do but that it might not work
for all custom extensions immediately
but it should its third impossible for
them to use it they just need to do a
little bit of upgrade we've got many
fixes to the specification this is a
selection of them if I thought all the
more interesting ones if I put all of
them up hit we would have liked pages
and pages and pages slides I think we
fixed around 250 issues in the step in
total we've got stuff ranging from this
is really stuff as well that was
different between containers so sick
world would do one thing open web beans
will do another glass fish would do one
thing jboss is with doing others we've
really tried to lock down those points
we've got things like clarifying that
methods of any visibility must be
considered as CDI manage methods we've
got we got to you know the avenjet
specification it defines the scope
single turn which as everything in the
avenjet specification does is
horrendously under defined and we were
sitting there in the expert group the
other day and talking about what at
singleton means and we said well what
does it say in the ass inject
specification and the ass inject
specification says this means there is
one instance / injector well what's an
injector what's the scope of injector
house and inject to relate to an
application what does this mean it
doesn't mean anything so we had
through and define how that should work
in CDI there's all sorts of those sorts
of issues in in the CD i spec we've got
a lot of SBI improvements which will be
great for enabling extension authors to
like better extensions write more
performance extensions perhaps the most
important one but that is that one down
the bottom at with annotations so the
idea here is that if you've written an
extension with exceeding I extensions
what you can do is you can basically
take a look at the metadata that builds
the classes before the class is deployed
into the system into the CDI container
as it being and you can fiddle with that
much data you can add metadata you can
remove metadata thus changing the
behavior of the cloth this is great but
wait work in CDI 1.0 you kind of had to
just like say i want to see all the
types that are being deployed into the
system and then you do a great big e
loop and you'd loop over every type
inside this event or you know if you
want to look at methods let's say you
just loop over every method on every
type and check to see if there was this
annotation that you were particularly
interested in there then anyone who's
ever done any looping on that side of
scale although that doesn't perform so
you've added out with annotations to
allow you to filter what events you see
and that should be a really big
performance performance jump I think for
CDI bootstrap there's lots more stuff
we've got we had some and not memory
leaks but the potential for people to
generate memory leaks if they didn't
fully understand some of the details of
the way CDI would work so we've added
the ability to much better control the
duration of some injections to stop them
leaking or stop them potentially leaking
much better control over what's being
scammed there's lots of minor
improvements like that in there and I
don't want to harp on about it too much
but just like the Java expect we're very
open and we're very open to your
feedback that's what really drives us
and you know guess it's out of bed in
the morning right it's knowing that you
guys are using this stuff and that
you're interested and want to contribute
ideas back with CDI 1.1 we have a very
open process the majority of our work is
in zeros in the issue tracker we also
have a maiden list which we do
Gus larger items on and then the main
way we're communicating at the moment
actually is using google hangout so
every Monday we have a weekly meeting on
google hangout where for about two hours
when all of us who can get together get
together and discuss issues so if anyone
here has got a pet p I would definitely
invite you to come to our meeting and
describe your problem and we'll try and
work through it and get that sorted out
okay so just to talk a little bit about
some of the ecosystem around CD i can
see do is not just about the
specification it's also about the
ecosystem that we can provide around
java ee and to that end a whole group of
us got together everyone whose interest
in CD i really got together and created
the apache and delta spike project it
includes oracle it includes Red Hat lots
of guys from my faces Cody which is the
Apache project we've got guys
independent consultants they're all
sorts of all sorts of people and we're
really there to just try and create a
good set of CDI extensions that you can
use in your application server on any
application server at any implementation
of CDI free form a common base for
building extensions as well socia like
Delta spike has a bunch of utilities
things like so it's not some stuff that
mirrors what's coming up in the CDI 1.1
specification and it's got some other
stuff as well some slightly different
ways of doing things a neat feature that
jsf has if the project stage so we reuse
that and of spike and allowed you to say
if your application is in development
use this Dean and if it's in production
use a different beam we've got a
configuration system using properties
really basic configuration system using
properties let's allow you to inject
properties in CDI beans there's a whole
set of this is when you're building
extensions and we've got a whole set of
annotated or builder objects which are
fluent api's make it really easy to
build those extensions there's some
complex stuff around annotations which I
won't go into in detail that stuff is a
can be pretty hairy but that's a way of
sin
basically generating annotation
instances on the flyer which makes it
pretty easy to build an extension again
we got here we've got yeah we've this is
this one is very much so I was talking
about the CDI doc current this is very
much an ocean of CDI doc current for CDI
whandall 0 they're moving a bit more
into some of the things you might be
using in your application and we've got
support for authorization in Delft spike
so you add an annotation to your method
down the bottom on the right hand side
and then you can write an authorizer
that has access to the context of that
method cool so we've got a thing object
on it and that thing object and can be
injected or like this is all touching my
next example in this one the thing that
we're operating on in that method can
actually be injected into the Commission
checker so you can do some pretty
complex authorizations because you have
access to not only the method invocation
for the context of the method
notification the instances of being used
in the method invocation this is a
surprise for Linda but we also actually
have a basic implementation of that
transaction on that transaction scope in
Delta spikes so that's available today
it's not a hundred center line through
what we have in java ee 7 mainly does
that's not 100 so finish but we're
trying to track that as place Lee as
possible so you know if you want to get
access to that today that's there for
java ee 6 already and i think that
pretty much concludes the amount of time
that we've got so at rest it has a
question already but let me just flip
onto some resources so yeah if you are
interested in getting involved in CDI
here's a list of resort this for you the
top two are the important ones which are
the top three are the important one
maining this issue tracker and the spec
which is up on github so if you're
interested in check out expected sup
learn and github just talk it use it
before I forget I've got a load of jboss
party any blacks up here which is
tonight at museum on Dartz if you're
going to do a party can apply me but the
military
hand up some invites that bill noise
questions rather whatever we support ok
the other is but we we wanted to do java
rescue supporters CGR oh I look more and
more expense I think I realized that
that we apart it was a bit premature we
had a lot of other issues to fix and
that we didn't quite have time to
address it in this release however I
think all of us feel that this is a
really really the most important thing
to be doing with CDI so we would like to
do a CDI to release pretty quickly after
CDI 1.1 which will be purely aimed at
giving java SE support to to suit to CDI
I mean this is still very much a
discussion item but when we get back
from Java while I want to sit down and
start writing up the more formal
proposal for doing this and we would aim
to do that with a very short time scale
so try to have a you know one year
turnaround on that speck or something
like that and just get it out there any
other questions well this is actually
bizarrely a very very contentious topic
there's a whole bunch of people who say
yes we need we need XML support today we
have to do this immediately and then
then I get a lot of people who say no no
no we should be adding HTML that support
that's so yesterday we don't want to do
that that's just just not worth it so I
think we need to find out what the happy
medium is I think people do agree we
to be able to set values on beams using
something like XML oh yeah mall or
whatever the configuration language of
choice is the what we had in the CDI 10
spec at some point there was also the
ability to just define beans using XML
so you could actually add the
annotations we have on the beans to the
classes using XML and that is the bit
that's very very controversial I think
that that probably will never see the
light of day in the spec it's just it's
a case of I haven't no I mean why would
you want to do that it's a you know you
can achieve all of that using the
portable extension API and do all of
that programmatically more powerfully
and with less and much less verbose lean
so I'm not sure there's a benefit to it
really configuring stuffs yes definitely
but actually altering the beam
definition I don't know and I think
there's just too many too much
opposition to it well you can still use
the portable extension API to add any
annotations you want to the types remove
any annotations you want to the type and
UT you just rather than manipulating the
beams using XML you manipulate them
programmatically the big disadvantage of
that is it's not particularly tooling
friendly right so at all can't inspect
your program code that when it makes
beef it can inspect XML so the other way
around it is rather than saying we use
xml stuff i means we could define some
kind of you know what if you write an
extension that enables additional beans
you could actually say to the tool you
have a list and say this is what i've
done to it to do it so that there are
put there are so many pros and cons of
this thing that it'sit's is not ready
for specification like this would be
premature specification everyone always
says you shouldn't innovate some
standards and if there's this level of
disagreement in the community about the
way we should
it we're way of standardizing it say I
need to be honest at the moment Reza
said we have this in scene but I we
can't even get agreement amuses into
Delta spike at the moment you know there
are so many people in the community that
don't like this idea that you know no
one can even agree that we should even
promote this going forward let alone
agree how we standardize this so okay
well thank you very much for coming and
enjoy the rest</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>