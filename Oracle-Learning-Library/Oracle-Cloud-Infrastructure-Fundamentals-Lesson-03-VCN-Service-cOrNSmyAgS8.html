<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Oracle Cloud Infrastructure Fundamentals - Lesson 03 - VCN Service | Coder Coacher - Coaching Coders</title><meta content="Oracle Cloud Infrastructure Fundamentals - Lesson 03 - VCN Service - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Oracle Cloud Infrastructure Fundamentals - Lesson 03 - VCN Service</b></h2><h5 class="post__date">2018-01-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cOrNSmyAgS8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone welcome to this lecture on
OCIE networking services now networking
is one of the core concepts are the
foundation concept you need to
understand when dealing with any cloud
services so it's very important for you
to understand the core concepts here now
for for our purposes we have broken down
the networking modules into a basic
foundational module the one which we are
going to cover right now and there is
also an advanced module later on so if
you want to understand all the concepts
I would highly recommend to watch this
video go over this presentation and also
go over and watch the other presentation
on OCIE
advanced networking concepts so for this
module we will describe the key concepts
in in the virtual cloud network service
the concepts such as route table
security list Internet gateways diameter
routing gateways we will evaluate the
different options you can connect to the
internet and then we talk about a a few
advanced features of vcn like matte and
peeling now again in in the advanced
module we cover these advanced concepts
in more details so the first thing is
what is the virtual cloud network a
virtual cloud network is a
software-defined version of a
traditional physical network
so whatever concepts or constructs you
use in the physical network they are all
present in a virtual cloud network but
everything is software-defined and you
would see when you when you actually
work with the services it's much more
agile and you can give down your your
networks and you can recreate them and
it's you know much more agile compared
to to do a traditional physical network
now a VC n is a regional service so we
see n resides within a single region but
they can but the division can cross
multiple availability domains a mission
covers a single contiguous ipv4 Sider
block and that's how you define a vc m
and oracle recommends using one of the
private IP address ranges in RFC 1918
so these
changes can be any one of these n dot o
dot o dot o / 8 172 dot 16/1 and 192 dot
168 / 16 so you can use one of these
ranges but you can also use a publicly
routable range we don't restrict that
now one thing which always comes up if
you're going through certification or
any kind of exam is what is the
allowable lesion size range so the
maximum the biggest we seen you can you
can you can you can create him in OCI is
slash 16 so that if you do the math it
is something like 65,000 IP addresses
some some number above 65,000 and the
smallest is slash 30 that that is
basically you know for IP addresses but
also keep in mind that OCI
reserves the first two IP addresses and
the last one in each subnets cider for
its own purposes so just keep that in
mind now so that's how we Sheehan right
see if you see this this picture this is
the Oracle cloud data center region and
so you define a region which is showed
by this shown by this orange line in
this case you know the address range is
10 dot o dot o dot o / 60 now you take a
big network like this which is 65,000 IP
addresses and it's useful but what you
want to do is you want to subdivide it
into smaller networks and that's some
division what you get by that
subdivision is called a subnet so each
we see a network is subdivided into
further smaller networks which are
called subnets now the important thing
to keep in mind is the subnets are
specific to an availability domain so
they cannot span an availability domain
so the subnet E is actually contained
within a d1 and the suddenly B is
contained within a d2 but both these
subnets a and B are part of this
particular we see in now you can have
more than one subnet in an ad that's
perfectly possible just remember that
they cannot span an ad and subnets can
either be a public or a private subnet
what that means is a public subnet has
access to the Internet a private subnet
doesn't have ax
to the Internet and when you launch your
instances you actually launch them
within within within the subnets so the
instances draw their internal IP address
and network configuration from from the
subnet now as you know we talked about
public and private subnet so let me and
let me talk about one more concept here
so there is this concept called Internet
gateway and think about Internet gateway
which as something which provides a path
for network traffic between your vcn and
the Internet so when you create an
Internet gateway you know the first
thing you do is if you want to you
create a public subnet you want a census
in that to be accessible to the to the
outside world you create an Internet
gateway and then what you do is you add
a route for the gateway in the vcn and
you'll be seeing shroud table which
takes which takes the packet from the
instances through the internet gateway
to the outside world so that's how you
know this is this whole thing work but
remember that just to keep things simple
remember that if you have a public
subnet and you want your instances to
talk to the internet you need something
called an Internet gateway this is
highly scalable highly redundant we
manage multiple copies so you don't have
to do anything think about this as a
router sitting on the edge which which
makes your connection to the earth about
the network now along with Internet
gateway there is also another virtual
router which is called a DRG dynamic
routing gateway now a dynamic routing
gateway provides a single point of entry
for remote network paths coming into
your vision so let's say you have a
private sublet and you want to establish
a connection with your on-premises
network by a if sec VPN or fast connect
you would use so call a DRG so once like
like Internet Gate where you create a
DRG you attach it to put you attach it
to to a we Shion and then you must add a
route for the DRG in the vc and surround
able to enable traffic flow from the vcn
back to your on-premises therefore since
keep in mind you having connectivity for
your Internet traffic and
brg dynamic routing gateway for
connecting to your on-premises network
either through IPSec it's like VPN or
through fast connect now another couple
of key concepts you need to understand
our security lists and ROM table so
security list is nothing but a common
set of firewall rules associated with a
subnet and apply to all the instances
launched inside the subnet so again keep
in mind that in OCI you define your
firewall rules and the subnet level you
you don't have the flexibility to define
it and the instance level so that's
important to keep in mind now security
there's a call security list now
security lists froid ingress incoming
and egress outgoing rules that specify
the type of traffic allowed in or out of
the instances now we have a little bit
more flexibility here you can define
whether a rule is stateful or stateless
and we'll look into into those details
around table is basically a table which
contains a set of route rules that
provide mapping for the traffic from the
subnets wire gateways either through
Internet gateways your local peering
gateways you or your you know your nat
gateways or your dynamic routing
gateways to destinations outside the
vision so think about you define your
route rules and you need you need to put
them in a table so that your routers can
pick up that that logic and that is that
is basically what round table is about
now before we go into some other
concepts let's look at stateful and and
stateless security lists
so think about stateful security lists
as something related to connection
tracking so what does that mean so let's
say in this example you know you have
host B and you have host a host we can
be can be anything so when an instance
receives a traffic matching the stateful
ingress rule incoming rule the response
is tracked and automatically allowed
regardless of any egress route so what
does that mean
so let's say host B is can be anything
right so how we specify that is we say
the source cider is aa dot or dot o dot
o / o
which means that it allows all the
traffic like every every IP address
possible in the world right so it can be
anything let's say we are using using a
TCP protocol and again we don't care
about the source port source IB can be
anything source port can be anything but
my destination port is 80 which is my
HTTP port right so if I say if I write a
rule like this ingress rule basically
what this rule says is allow traffic
from any IP using TCP protocol from any
port to this port 80 and if I allow
traffic on port 80 by default my put out
response from this port 80 is allowed if
there is no way for me to block this
traffic it is automatically allowed so
if you know my let's say web server gets
a request from from outside world it
will automatically allow the response
out now you know default security lists
so we have something called default
security list we'll talk about that
later on they are always stateful now
there is also something called a
stateless route in a stateless rule the
response traffic is not automatically
allowed if you go with the same example
as earlier the traffic comes in here to
put ad by default the traffic on port 80
is not allowed out right it's actually
log down so if you want to enable this
traffic you have to write an egress rule
which in this case now your destination
can be anything right because you don't
care where the traffic is going you have
protocol is TCP your source port is 80
now because this is from where the
traffic originates and your destination
port is all remember in the previous one
my source port was all and the station
port was ATC just reverse that right and
your source slider if you go back to the
previous slide your your your source
cider was was all because you know
that's where the traffic was coming from
and in this case your destination cider
is all right so it's it's it's a little
nuanced but you need to keep in mind
that in case of stateless there is no
nothing like a connection tracking and
to allow the response traffic you have
to write as
you know egress rule if you have written
an ingress rule and vice versa
now stateless rules are better for
scenarios where you have large number of
connections right and so there is a
limit to how many connections you can
track and if you have a web server or an
application which is very powerful which
is very popular you have a lot of
responses you can actually create a
stateless security list instead of a
stateful one now let's look at the last
two concepts which are important here
actually last three concept is your VPN
fast connect and DNS now we connect we
we cover all these in more details in
the advanced modules I would highly
recommend that if you want to dive
deeper you should look into the advanced
model but what is VPN OSI a VPN service
it's basically a service that securely
connects on premises network to OCI
virtual cloud network through an IPSec
IPSec VPN connection now what OCI does
it provisions redundant VPN tunnels
three tunnels located on physically
analogically isolated tunnel endpoints
currently we only support static routes
we don't support BGP and you know we
have different you know protocols and
different you know encryption mechanisms
so we support i1 v1 are using a shared
secret now the way the way VPN works as
I was telling earlier is you create a
DRG a dynamic routing gateway and that
becomes the VPN head end at the at the
OCI end of the IPSec VPN and the same
gateway is used for IPSec VPN or fast
connection circuit and keep in mind that
every vcn can only have a single DRG and
then there is along with this DRG there
is also something called a customer you
know CPE a customer premises equipment
which is an actual VPN router in your
own from Isis Network it can either be a
hardware appliance or it can be a
software between router but this sits on
your premises and this becomes the other
end of your VPN connection
but there is also something called a
fast connect which is generally which is
basically the general concept of a
connection between your existing network
and the vcn or a private physical
network instead of the Internet so
typically a VPN would be over over
Internet now in case of in case of and
you would secure it using encryption and
another related things but in case of in
case of a fast connect you get a private
physical network so think about you know
in your having your think about this as
having your high-occupancy vehicle Lane
so you have your HOV Lane in a in a in a
highway and so you know you have your
own private sort of a lane where you can
have faster connection faster speech
that's basically what first connect this
and again be dealing we we we talk about
fast connect in more details later on
but just remember that fast gain
provides private dedicated bandwidth why
I am pls and we have several Oracle
partners now who actually provide this
capability now one you to two things
which you need to keep in mind is when
you create a vision your vision
automatically comes with some default
components and these are default round
tables default security list and the
default set of B and C P options now you
cannot delete these default components
but however you can change their content
so you take a round table you can
actually add more you can add or delete
route rules but keep in mind that these
are given to you by default you can
either choose to use them or you can
create your own route tables you can
create your own security list the best
practices in many case is to create your
own specific route tables and security
lists particularly if you have a
combination of public subnets private
subnets and it's a more complex network
topology it's a good practice to just
leave the default vcn components and
create your own custom vision components
now you see I also comes up with a
a DNS service and remember this is not a
public DNS service this is internal DNS
which oshi I uses now the DNS enables
lookup using host names the default
choice so when you when you use when you
create your vision the default choice is
something called Internet and we see and
resolver which lets the instances use
host names to communicate so the way it
works is that you enable the internet
and VC and resolver across your entire
vision this means all instances in the
vision can communicate with each other
without knowing their IP addresses their
private IP addresses right so that's how
you would you use the DNS service when
you create your instance for example and
if suppose you have you have enabled our
DNS for your vision you would get a
fully qualified domain name along
something like this where you have a
host name which you can decide you have
a subnet DNS level you have a VC in DNS
level dot Oracle vcn comm right and you
can specify each of these levels
yourself or you can let OCI give you a
default value now so those are the basic
concepts we just went through right we
went through VC and we went through
subnets we went through Internet
gateways then with routing gateways we
live into security lists stateless and
stateful we looked into route tables we
looked into DNS we looked into VPN and
fast connect that's a lot of components
right since you can see the richness of
the virtual cloud network service now
there are some more advanced features
and again we'll look into all these
advanced features in more details in the
in the in the in the advanced modules
but but remember there is something
called on that instance and you know the
way we implement this in in OCI is
called private IP as Route target and
you will not go into a lot of details
here but think about you have a
front-end subnet and you have a back-end
subnet now you're back and subnet have
let's say database instances which are
completely logged down so they are not
accessible to the internet in many cases
they might not be accessible to your
aunt from Isis Network also right they
might not have a DRG or you know a facet
or in some cases they might have now
your back-end instances
let's say want to be patched let's see
are running databases right and they
have to be patched so there has to be a
mechanism where they need to go and
access the internet from from your
back-end instances so the way you would
do that is you would create an @
instance some cases you would create a
peer because they can become a single
point of failure and using the nack
instances your private instances your
back-end instances can communicate to
the network using those not instances so
the way we implement this is in OCI
again is is through this private IP as
out target and what this means is this
is the ability to use a private IP as
the target of a route rule in situations
where you want to route a subnets
traffic to another air to another
instance and that's basically what is
being being being shown here right so
this this DB instance goes to not
instance and the knight instance goes to
the Internet gateway and back to the
Internet and that's how you know if
you're running a database here you can
you can you can patch it now the other
use cases to write so you could you
could use this kind of topology to
implement nak you can also use something
like a virtual firewall virtual firewall
or intrusion detection system or you
could also use this to manage an overlay
network if you are doing some kind of
container orchestration both routes this
is something which is which is also you
know requirement for those kind of use
cases another another core advanced
feature for vcn is called peering now
the way the peering so what peering
means is it the process of connecting
multiple virtual cloud network so so
let's say in this in this example you
have a vc n lob we seen one you have a
lob vc n 2 and they want to both the
both of them want to peer but let's say
there is a there is a hub let's say
there is a management we see n or there
is a DMZ we see em you can actually
create peering connection so you can
basically connecting these virtual cloud
networks and you through that the
instances can communicate to each other
now today we see and peering is
currently only allowed between in the
same tenant and in the same region so
this is not cross region this is not
cross tenant and as I said using peering
instances in the two vcn can communicate
as if they are on the same a same
Network and there are some restrictions
on on what you know how you can use it
and how you might not use it now what is
the biggest use case the biggest use
case is when your business groups or
LME's they might use separate missions
but they have shared services that are
deployed into the central mission which
is appeared with multiple other visions
for them to use it right a good example
would be something like a web DMZ so you
have a you have a you have a mission
which is a DMZ here and it's open to the
to go to the world but your eloise have
missions which are not open right and
they can peer with this with this regime
for certain functionality similarly you
can have a management we see where you
have certain set of shared services
which all the instances use and they can
actually do peering so this is a pretty
handy feature for those kind of complex
scenarios now along with this we also
have some other features right and again
we discussed a lot of these in detail in
the advanced module so there is
something called multiple Phoenix and
what it means is you have a primary we
make when you create an instance but you
can also add a secondary viniq to an
instance after it is launched there are
some restrictions secondary beam it can
be in a subnet in the same vision as the
primary beginning or it can be a
different machine all together
yeah but the we mix have to all be all
in the same Hades and there are multiple
use cases for something like this you
can have you know bring your own
hypervisor uses multiple winix if you
are connecting instances to multiple
subnets
or multiple machines you might require a
multiple meanings keep in mind that in
OCI every single virtual machine and
bare metal instances have at least two
minutes so there's a primary benek and
there is a secondary mimic in some cases
there are more than more than two now
there is also something called secondary
IP addresses so what it means is you
have the ability to add secondary IP
addresses to an inn
after it is launched it can be either
added to the primary Winnick or the
secondary Vinick and of course you know
the secondary private IP must come from
the cider of the MINIX
subnet you can move a secondary private
IP from a we need to prop on one
instance to a remake on another instance
if both winnings belong to the same
subnet so the biggest use case as you
could guess is in case of instance
failover site where you can move a
secondary private VIP from one being to
to another another reading and then
finally we have our Fox network
virtualization as the name implies we
pulled all the virtualization out into
the network including storage and
network i/o virtualization generally
this enables the next layer up so we can
take any physical form factor and plug
back into our virtual network now this
is the basis that lets us do bare metal
and engineered systems like Exadata and
plug it into this environment without
making any changes
it's a massive enabler for us to deliver
the classes of services and meet our
goals around performance and security
so to summarize in this lesson we
describe the key concepts of lesions
including VC and service itself subnets
route table security list Internet
gateways can meet routing gateways VPN
fast connect DNS and then we also looked
into the advanced features of lesions so
things like that we see and peering
multiple v-necks secondary IP see
there's a lot of content and a lot of
content we actually actually talked
about in the advanced model so that's
all for this lecture thank you so much
for joining me in this module if you
have time please join me in the next
module where we talk about the compute
services thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>