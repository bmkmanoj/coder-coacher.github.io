<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Oracle JRockit Mission Control Is Dead: Long Live Java Mission Control! | Coder Coacher - Coaching Coders</title><meta content="Oracle JRockit Mission Control Is Dead: Long Live Java Mission Control! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Oracle JRockit Mission Control Is Dead: Long Live Java Mission Control!</b></h2><h5 class="post__date">2013-01-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ExGzoYQqgkA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">great so my name is Mark assert in a
previous life I was one of the founders
of Appeal the company that created the
cherub torture machine and currently I
am routinely for java Mission Control
and I'm really sorry to say but due to
some circumstances that I can't affect
I'm going to have to amend this talks
title a little bit so Derek Mission
Control is not quite Dead Yet long live
Chavez pro soon and that is the only
time you're going to see me do an
animation in powerpoint and that is how
frustrated i was anyways so this mission
this talk is going to be about Derek
Mission Control and how it will be
replaced by a Java Mission Control and
I'm going to talk about for control is
and why you should care and why it is
going to be replaced I am also going to
do demonstrations of both direct
material for that one and Java Mission
Control 502 and I'm also going to show
you some ways that you can use these
api's and people are probably not going
to be too happy about me showing this to
you but I'm going to do that anyway and
I'm also going to some demonstrations
about new tools in Mission Control okay
and since I am going to do okay brief
break hello is it broken
ok
yeah so since I will be doing some folk
looking statements I need to have this
disclaimer slide it's mandated by Oracle
and it basically says that anything I
say subject to change and you should be
making any purchasing decisions on that
information so I'm jerk Mission Control
is the was well is still the profiling
time profile it's the production time
profiling a tool suite for 440 a rocket
so the idea is that you should be able
to use these tools in production which
means that we are focusing very heavily
on having a very low-impact so the
overhead is very low and using these
tools and the way we can keep the
overhead quite low is that we have built
into built the tool into the JVM
basically we are piggybacking on the JVM
we're utilizing information that is
already being collected by the wrong
time and we have high performance of
limitations of the things that we can't
get straight off the runtime and in
general get we could dynamically enable
and disable this so you know you could
just hook up do whatever you wanted to
do with the tools and then disconnect
and everything went back to normal there
is a client available for Derek Mission
Control it's built upon eclipse RCP it
has a built in UV editor so you can
modify the tooling itself and you can
run it as a standalone tool or inside of
the clips and so in Derek Mission
Control there were three main tools it
was the management console which is
arguably one of the better Jay makes
consoles available and there was the
flight recorder which is a built-in
event recorder in the JVM you can think
of it as a data flight recorder and you
know like the black box of an aircraft
it records what is going on in the side
of the JVM and once something happens
you can go back in time lip butters was
actually going on and this was the main
jo ki Pro fine tune and then we had you
know to which wasn't very aptly named
called mem leak it doesn't leak memory
it finds memories and it it's really an
online heap analysis tool so you can do
much more than just hunt for memory
leaks with it
so I thought I'd do give a brief history
of this so you can see where we're
coming from so in 1998 appealed started
developing J rocket and we wanted to
become some Java licensees and at that
time and it decoded you know of course
giving a lot of money to son but also
you needed to state a a doof or your own
type you couldn't just say that hey we
want to make a run time you need to have
some added value and we set performance
so we're going to have better
performance than house but and that
didn't go over too well with a some camp
so they came back said that you know
performance is not that value and that
we needed to to come up with something
else and that's how you know the
precursor to Mission Control rates are
about we said that well we can do
monitoring of the runtime so that was
the first prototype reading then in two
thousand to be a acquired appeal and
there were some some some integration
paints there were a lot of good things
we got better tooling we became the
default eventually that evolved for
running wls and we delivered some
world-class performance benchmarks but
you know it was it was a difference in
culture we had all these the office was
plastered with these demotivator posters
are you seen those I mean it's they're
really quite funny yeah it you know
takes a concept and then writes some
some really sarcastic work more it's
about them and you know things like in
confidence when you earnestly believe
you can compensate for lack of skill by
doubling your efforts there is no end to
what you cannot do and we had things
like you know procrastination hard work
often pays off later but laziness always
faced off now and we had one guy that
actually did their own so we had a J
rocket right once to crash everywhere so
what's a lot of fun and but our new
American management was like oh no no
more we go down the drain so
you need to take these away instantly so
that was kind of fun anyways we became
more of a mainstream JDM and in 2008 I
think yeah Oracle acquired the systems
and there were some integration pains
again I mean the organization's needs to
merge and it's it really does take
longer than you think every time and but
you know everybody at least I started
thinking you know Oracle is so big so
now we can just focus on technology
right I mean nobody came by Oracle and
then the sun acquisition came so yet
another merger and you know there were
more integration pains again and there
was a decision to to merge or converge
the gyro get em and hotspot JVMs or in
the immortal words of deal birds point
to help us combine them just do the one
so we took to a rocket and hotspot and
we began building a best-of-breed JVM
and if you look at it we have already
started delivering so there are some
good things already in the seven year
for for instance data k we have the J
command which is a command line utility
and bin that you can use to send
diagnostic amounts to to running Jade
instances of JVM locally running one's
quite useful we have the flight recorder
in 74 most people don't know about it
because we haven't really delivered
Mission Control and I'm going to talk
about that later we are getting the
native memory tracking we're getting rid
of the perm gen and there are some other
nice things that are are you know coming
quite soon but if you look at it a lot
of these technologies are basically used
by or consumed by sorry by Mission
Control so if we had flight recorder in
74 why haven't we released Mission
Control yet and we have released
actually we have released the 500
release in April the five dot one
release in August but we only made them
available to weblogic server customers
and
well on my Oracle support is available
and you know you might think that is
unfair but the reason is really that we
don't have enough of the event
integration in the hotspot JVM jet 22 to
release it so if we released it now to
you guys you would go but there is
nothing there and just being very
unhappy about what Mission Control is so
we will release eventually but we will
release when the critical events are
there available in the hot spot a vm um
the reason we released it internally
still or an for Oracle is that there are
there is a third party producer that is
producing events and recording them in
our event recorder for weblogic server
so weblogic server users can still
benefit greatly from using Mission
Control already what's that what you
were gonna say yeah sure proprietary JVM
okay yeah in the hospital in the sun jdk
so oops so fried record 101 it is a high
performance event recorder and there are
a few different kinds of events that you
can record there's duration events they
have a starting stuff time there is
instant instant event which just has a
time when the event occurred and there's
a request of event which is basically
one that is poled on a regular basis and
the reason I'm saying this is I'm going
to show some code so you can start using
this yourselves even if supported it
they produce binary recordings so what
you get from the fighter going when you
drove over to your recording is binary
binary recording them the good thing or
the different thing about this binary
recording is that it is consist of
chunks and the chunks are self-contained
and self-describing so everything you
need to be able to resolve you know
constants or whatever inside with a
chunk
surveillance chunk and everything you
need all the metadata you need to make
sense of the data in this chunk is also
available in the chunk so you can sort
of think of it as a MPEG stream you know
you have a key frame and then you're
good to go so so that's different from
foremost logging logging frameworks ok
so the inner workings of vitac order the
focus is an extremely low overhead so we
are both using data already being
gathered by the wrong time so we don't
need to go probe the heat or something
else to two together data we just
piggyback on the mark face or something
similar to get the data we have a high
performance recording engine so there
are a lot of different things we do one
example might be we are using the time
stamp counters in the hail and later
processors to do the time standing
instead of doom current system time
nanos which takes a whole lot of time so
that's one difference and we can do this
for Ford you will circuit configurations
as well noticing what's so anyone tells
you that it can't be done you can
we have third-party events so web server
events are already available we also
have glassfish events on the way and you
can add your own events and this is not
supported this is probably not going to
be that beautiful then okay anyways what
you do when you want to start recording
things and you need to set up your own
producer and you do that by simply
giving it a name a description and URI
that just needs to be unique and then
you need to have class for your events
and you just use annotations to get the
metadata that you want in into there and
then you just create your event like you
know my tent you end and event begin do
your stuff event and an event commits to
commit it to like recording energy so if
you can't read this you could probably
pick up them the presentation from from
from the internet and see how it's done
it's very very simple and if you guys
are getting worried that we're actually
creating new event objects there there
is a version of the API where you're
actually reusing that event object but
you need to make sure that you do meet
Fred save can't even race
ok
so
so I thought I'd do some demos the first
demos you have seen me demo Mission
Control before you probably only
recognize there is a new demo very
smurfy demo that I did last night so
that one you will not have seen ever
okay so one thing you want to do when
you profile is of course to find out
where you're spending the most time
executing Java code and that is very
simply done in Mission Control so this
is what it looks like the GUI and you
know you can see here that we are using
the java chip package linked lists and
the hot one seems to be like discount
ain't so as you can see here we're doing
a lot of contains checks ending lists
and we're calling contains from
counselors in the class initiator and
I'm just going to jump there so this is
what we seem to be doing we have two of
these initiators and one of them goes
through all their end of elements and
checks if the other initiator also has
them okay and you know count how many of
them that are similar and these seem to
be unique unique integers right so just
by changing this to something else we
can make this go much faster so it's
order n if you do a linked list contains
check and there is something that can be
changed to that is constant leverage so
if we go to hash set things are going to
go much much faster right
so that's one example you it's very easy
to find the hot methods the next one is
the flip coin of this so we have a lot
of Layton sees we have a massively
multiplayer application here i'm going
to show you that it is later and we can
just you know it's struggling along at
forty percent of the cpu load so what
what we're expecting from this
application was that it would saturate
the cpu but it isn't so looking at
events we can see that okay so something
is definitely going on here if you look
here you can see that we're actually
doing things in a sequential fashion
really and all these salman events are
java blocked so we do have some sort of
synchronization issue here most likely
and the easy way to do this is to just
look at the contention and we can see
that there's a lot of contention with
slogger class and the load method so
what we probably want to do is to prove
also that it is the same instance of
this locker that very young n from my
blog page there is nice plugging that
you can download that you know gives you
a nice GUI for this but you can do that
here as well just go build a histogram
on the java blocked monitor address here
you go it's just one single instance
that is being blocked on all the time so
let's see what's going on here
I'm going to open that method
and we can see that I've seen okay so
this is obviously just an example we're
doing sleepier to simulate that the
login actually takes it take some time
but everybody seemed to be sharing this
logger and there are several different
ways we can fix this we could you know
there is a default constructor here so
we could just cheat and keep every
thread their own logger we could remove
the synchronous keyword if you weren't
protecting something inside we could we
could not log that is always an option
and you should be laughing about not
logging because actually a very big
customer got a lot more performance by
doing some sensible line so let's look
at what this looks like if we do change
this
so this we should do it before and after
that's always nice so before we were
struggling along at forty percent and
now we actually have full saturation
saturation of the CPU and if we look at
the men's let's look at that and grab
here let's get some more space this is
what it looked like before and this is
what it looks like now voila so no
synchronization going on whatsoever and
everybody's happily running around and
executing Java code like they should be
okay I so they're going to be a lot of
examples well a few examples now so if
you do have any questions just raise
your hand I'm gonna can I answer them so
another thing is garbage collection so
we have this application which seems to
be doing quite a lot of garbage
collections actually it's really what
it's doing it's doing garbage
collections so we are obviously creating
a lot of transient objects objects here
lots and lots and lots and we want to
know why so we can go to the location
tab and see that we are allocating
integers but we don't have that many
data samples because well in this
particular example I said that the
trigger for when to record this pretty
high so we might want to look at the GC
general tab as well just to see that the
GC reasons also come from the same same
spot and we can see that this value of
method in the integer class is closing
lot of allocation so hey why why and
it's been called from this alligator
girl method so let's go to the alligator
and here we can see that it's doing a
lot of contains checks so the contains
check and a on a map takes an object and
this data class that we have is using a
primitive int so every time we're
sharing trying to look up one of these
objects by by the primitive into we are
going to auto box atop to an integer and
I need will integer object would be
created so you know saving these eight
or 12 bytes depending on architecture
f-from from the object header here it's
not a very good idea because we're going
to be creating a lot of trans
the objects everywhere so what we can do
is of course change this to an integer
object instead instead and well you can
look at what the application will how it
will behave if we do exactly that just
change that field to an integer object
well sorry we need to change the return
type as well from that method that so to
to changes in what's going to happen
then well we want to see them GC graph
and there are no garbage collections
anymore so quite a bit of well there are
four but those are because of other
reasons so much much better behavior
and I told you about the weblogic server
integration right so here's a recording
from weblogic server okay so what I'm
showing you right now is on from it from
Jay rocket recordings because that's
where we have all the j2se events this
particular one you could actually do on
on the hot spot no sorry not yet but
we're getting close due to revenue
recognition issues oracle mandates that
I can't tell you when so this is a
recording from from web using
Diagnostics framework and as you can see
there are quite a lot of useful data I'm
since i'm not a j2ee guy I can't even
begin to tell you what these are you
probably know much better than me but
and I recognize this as being sequel
statements and I recognized them as
being listed by average duration they
actually took and that has to be
interesting right I can also see service
implications here which is probably also
quite interesting and the thing you can
do is you can always so there is a
boolean set operation that you can do
with events all over the fight record
glee so and there is something called
the enterprise context ID in in weblogic
which is part of every operation that is
going going on in public service so if I
for instance took this servlet and added
events that have the men have a matching
enterprise context ID I will get all the
events that are related within that same
transaction and then we can start
looking at them so here we have the
event
eventlog now we see all the events and
now we just see the operative set so we
can see that this service request was
actually done by you know serve iquique
strongly vocation really didn't some I
guess egb operations we started started
some database stuff here we'd start with
transaction blah blah blah blah blah
blah so we see what was going on in the
transaction also since we have a lot of
information from the operating system
and the runtime itself we can select to
see all events that person what we're
having happening concurrently so in the
same thread viewing the same time then
things are going to pop up like five
rights GC requests etc so you can drill
down from there right so I'm not gonna I
think have time to show you that much
more from from that part of flight
recorder but something that is not
commonly known is that the Smurfs have a
market it's called the SMX the smurfs
very exchange and the smoke free
exchange and well brainy Smurf decided
that he wanted to have his own custom
events for the Smurfs or exchange so I'm
going to show you how you can build your
own green from within Mission Control
for custom events and this is not
supported either and so the event
creation is not supported then one thing
should be said about those API so when
we ported and the the Java API is to
record stuff into flight recorder
reported it straight from jail right we
didn't change they PX but we duplicated
every single element okay so if you look
at in the unit spot we actually have
Davey ice there and you can use them and
there are other teams within
well that are using them so I don't
think they're going to just change
overnight either so you know if you want
to play with them I actually think you
should also the GUI builder from within
Mission Control is not supported either
but that's more because there are some
disability Kings that wanted to you know
iron out before we start supporting it
so and that should be pretty safe to use
as well work of line ok so I'm going to
be starting I'm going to be starting
Mission Control form within my own
development environment because I did
some some things with it last night and
here you go there is a secret handshake
with Mission Control you can press ctrl
one to get a command command line
interface to it and there is a command
called enable design view which will
give you access to the designer ok
so I'm going to open this recording
right and so we we're going to design a
new user interface inside a mission
control i'm going to create a new group
let's call it as a mex name Smurf very
exchange and I'm going to have a nice
iphone for that and I'm going to have a
nice small icon for that as well here we
go placement path yeah probably
somewhere low
ok so the smurfs pre exchange and we're
going to have a tab there as well i'm
just going to call that yeah whatever my
SMX tab I'm going to have a name SMX
price for instance and you should really
have descriptions and everything but I'm
going to skip that today here you go
loading the recording again and we have
a smart for exchange top group and I'm
going to stop that tab and I'm going to
add a chart to it I'm going to base the
data on the data series from the
recording transaction entry and I'm
going to go floating the price like this
so what we can see is that the smurfs
economy is doing quite well and it's
steadily increasing here over time but
we can also see when we start analyzing
the recording itself that letting lazy
Smurf do the logging framework was
probably a very bad idea because we have
the same problem here that we had in one
of the previous recording I was shown so
it seems the same logger is being used
and it has the same issue that we had
before so if we fix that in exactly the
same way we did before and open up a
recording where it is fixed
we are going to see that
the transactions are now you know
happily running around running along so
we're doing these transactions at a much
faster pace and the only thing that
prohibit us from going faster is now the
Java sleeps that first server simulating
the things we're taking a bit of time we
could get rid of that tail probably by
queuing up these these lodgings not
belonging on these strings ok so there's
just one problem with all of this and
that is that brainy Smurf decided to go
into algorithmic algorithmic trading and
you know they're smart economy is now
totally screwed so boo crash okay so
that's the example for how you actually
extend Mission Control and supporting
your own custom events
I
so i told you about online cheap
analysis tool so sometimes it's just not
very convenient or even possible to
analyze the heap through a heap dump hpf
dump you might have a very very large
sheet on a production service system and
you have your tiny macbook air from last
year which only comes with four gigs of
memory which i have in them no more so
it might be a problem at adjust and do
that analysis probably also there might
be sort of an interactive workflow that
you that sort of gets lost if you don't
have an interactive tool that you can
have hooked up online and do your
analysis whim so we have this online
heap analysis tool the problem is and we
are not porting this to in time for for
JDK 8 so unfortunately we will not have
this available until JDK nine at the
earliest so very sorry about that it is
one of my favorite tools personally for
for finding bugs in in you know
interactive applications it's very
powerful I don't think I'm going to have
time to show you memory clue so if
you're interested you can come come to
me afterwards and I'll show you right
then there are the experimental plugins
so we do have plugins that we shipped
but not part of the Mission Control
sweet but they're available from within
the tool itself you can just download
them into the tool and you saw the wls
planning but there is a decrease
plugging as well and so we have extended
the D script language with our own
I'm simplex for emitting events so that
we can emit events that are
self-describing so that can read them
into a coherent model and show them in a
GUI it's very similar to to the one
we're using for flight recorder and we
have a new tool which is called JJ
overflow which is a tool for analyzing
heat waste so there are various ways you
can waste your heat you can have
duplicate strings you could have well we
could have a little room well there are
more ways you'll see soon anyways so it
uses H proof dumps and it's our very
first stab at using Java fix inside
other plug-in for Java Mission Control
so I'm going to do some demos of of
these tools as well
so dtrace gonna have to start up
klipsch again
so we actually used X text for this and
if you haven't tried out the X
technician it's pretty cool so in our
case we have
syntax highlighting and then support for
this new language that we have so here
is how it looks with the metadata
definitions for four different templates
and we can jump to the different probe
sets so probe set is a certain group of
probes that you can enable and disabling
the GUI when you want to do with you
trace recording can jump like this oops
and if we can see that I our probe set
consists of two probes the read I oh and
right aisle and there's even well this
is you should recognize from from this
group right and you can see that we have
the extents keyword here so that can
inherit capabilities as well and when
you start analyzing the resulting
recordings you'll see that it's pretty
much the same so let's look at this one
so for instance here you go
our example with the logger but in D
trees and the same thing holds so if you
do want to extend this yourselves you
can do it in this exactly the same way
inside you with a smurf example so you
can just omit your own events read the
map into Mission Control create your own
GUI is very very easily and then have
them visualized and once you're done
creating your own grease you can export
them as plugins so you can just have
your colleagues drop them into the
plugins folder and voila they have exact
same either themselves so that is the
DTrace support and
I am going to do a J overflowed em as
well so if you are at mishas and Jones
talk on Monday you've already seen this
if you haven't well and you'll see a
little bit of it now so to do with a new
mission control to do a heap dump
analysis just select showy analysis
and it has a chief of town and brings up
the green which is in javafx CA so I'm
just maybe not that interesting to just
do a dump on Mission Control idols so
let's do a dump Amish control doing a
analysis
here you go and this is the kind of
overhead analysis that we do so we can
see that we have duplicate erase
selecting the duplicator AC OSIS that
mom you seem to be
two objects that are javafx related so
we probably can't do too much about
exactly that one so let's look at the
small collections well in the small
collections it seems like we do have a
bunch of them 28 thousand of them little
array array lists that we have created
in in our own code so we could probably
exchange those for a race and save
automatic memory and I'm going to open a
recording from from an old Eclipse
running an old version of Mission
Control
and have a little look at that one as
well
so
here we can see again that we have a
duplicate erase selecting to look at
those we can see that okay so this
pretty much looks like uninitialized
images so as we start drawing a little
bit those might be safe might not be a
problem so let's not look at those ones
we do have duplicate strings though and
we have the duplicate string user 2155
times so let's look at that one it seems
like the org clip score on time path
segments has quite a lot of them so
let's select that path segment let's
clear out the user's selection and see
that then we can see that there are a
whole lot of them that are duplicates
strings referenced from path segments in
Eclipse so if we started interning stuff
and they probably did in later version
kicks because we didn't see this problem
when we started looking at just
ourselves before we would probably say
local memory
so what what version keeps this was on I
think three dot six or seven
and we are running it on a build of
Mission Control based on three update
platform anyways we also have a lot of
small collections and you see that you
know in Mission Control we have a lot of
things going on in the settings class
where we are wasting quite a lot of
memory as well so selecting the settings
and properties we can see that we have
linked Kash maps lots of them 17,000
1659 that are considered well have a lot
of different problems they are
considered small they are spares there
are some that aren't used at all ever
and so there's probably a lot we can do
do there as well so I'm going to want to
have some time for questions afterwards
so I'm going to end the DTrace demo
there that's right the oj overflow down
whether if you want to know more about
GI overflow eking we can talk afterwards
so
yes please
oh yes yes and I can't wait myself
because I own a mac that i'm running
windows off so no really we have builds
for for mac and five dot one is
available for mac so so we are doing
builds for mac and the only reason that
I'm always demoing these things on
Windows is that j-rock still has the
edge when it comes in terms of two terms
events being available within the
runtime itself so J rocket still has the
more events that it's more interesting
to analyze flight recorder recordings
coming out with a rocket that is going
to change though yeah absolutely so
fried recorder so as I said in 74 we
have the flight recorder and so
everything well I probably won't would
want to use the 74 version of the mac
flight recorder but 706 and forward you
know you can start using these api so
you can start using Mission Control a
small absolutely
or has those windows
no unfortunately and that's the reason
exactly so so the recording engine is in
there but not all the hooks and all the
events so that is the reason why we
haven't released the GUI as part of the
JDK yet we will so when as soon as we
get to the critical mass of events so
that is useful for you for the java and
SE crowd that includes me to use this we
are going to release it to everybody but
we're not quite there yet and that's why
why we're holding off I guess curious
overlap
ways to keep analysis and also as usual
and I'm just wondering about me some of
those
but it's OBM also
platform
they
gee I know of any kind of virgin so that
we could just bring up visual vm
all these different I know I know I know
and I'm very sorry about that so no they
really aren't that so in Mission Control
we have started looking at NetBeans a
little bit but there are no concrete
plans for merging visualvm and Mission
Control which I personally think is a
little bit sad because I mean it's
better if everybody can can learn 11
instead of tooling in one paradigm for
for for looking at things but no else
but there is a big difference though an
important difference is that this will
be a Miss for free right and the mission
control tool suite is for free in
development but I won't get any salary
if I there are no licenses for it yeah I
know I know I know I know so so you know
I think there is going to be a
discussion and there might be a way
forward but for now we're just focusing
on making sure that we build a kick-ass
Mission Control for it not everybody can
start using them yep so how does this
work technically is the by the corner of
eyebrow image that
recording yeah so there is library and
they are hooks and the recording engine
is in the closed source so the five
recorded the recording it so the flight
record is the recording engine just well
we interchangeably talk about flight
record as being the tools that are you
know but but yeah technical view so and
the protoss what they aren't open yes
some of them yes but they call it the
piper call it is therefore yeah whether
it is available does it work like this
one yes
I'm not sure in the back there thank no
it's not documented it's not supported
but it's useful you don't so that was my
sort of gift for you if you wanted to
start playing with this there will
eventually we you improve them better
API that you can that is hopefully going
to be supported that you use to produce
events but this I did so that you could
start looking at it and you know it's
quite powerful useful when you want to
solve problems
yep
now so i think if i remember correctly
that the jvm diagnostics is using was at
least using some proprietary jmx api's
that we had in j rocket so no this is
not the same thing the Q&amp;amp;A can we just
hold on a little bit longer I just want
to get through the last couples life so
the J rocket is free now so if you want
to start trying out this technology it's
already there that you know it's staring
the J rocket form which is quite similar
to what we're going to get any in hot
spot so you can start trying it out
right away it's free for development and
you know take it for a spin and send me
feedback I really want to know what you
guys want this to be able to do and this
is my Twitter have Marcus hurt and we
blocked on her to de-seed dash blog and
yeah Sheamus book plug I wrote a book
together with a friend of mine named
Marcus which is really about enough to
be optimizing runtimes in general so
it's applicable to to hotspot and it
also talks in at length about the
different tooling in Mission Control
swarm so can be useful if you want to
look at this so now we can request this
yema mean where is it when you start the
vm enable the blanket aware that is
stored and so what's the size and space
of wine program ok so it stores it in
threadlocal bakries the vents and when
those get full we copied them to a
circular configuration of global buffers
and when those could fall depending on
how i configure this we either
continuously overwrite them or if you
have configured in amity to be emitted
today disk we omit them to disk so you
can choose that yourself yeah so what
sort of things for now yeah how large do
they get yeah yeah so the most common
you want to keep it running you don't
know exactly but that's why you
configured in a circular fashion right
so at least you have the last couple of
minutes worth of data but you don't keep
everything around there are some people
who really wants to keep everything
around but it's going to be quite a lot
of data so so exam so one
and it also depends on what events are
available and what some events are
turned on etc etc so this is really hard
to do in their assistance on and off
because there are some events that
usually might want to turn off that can
be a little bit more expensive than
others so for instance the events that
are calculating heat pigmentation
quizzes will cause a mark face at the
garbage collector so then you know if
you really want the lowest overhead
possible it might want to switch those
those are so let me put it this way the
set of templates that you get I really
don't know I'm just guessing wildly
maybe like 20 megs a minute I don't know
but if you turn everything out and if
you go where the thresholds for the
events to nothing then you're going to
have a very bad impact of a system for
sure so can you like given that that's
the case
like loading all the time and throwing
things out yeah some sort of trigger way
then absolutely and you can do that from
Mission Control if you're using the
management consequences it has rules so
you can say as a rule when this happens
triggered up and down what's available
in the continues you go recording so so
yeah you can do that and you can also
script this I mean the J command utility
that is available in from 74 can
actually do dumps right so rules on all
the events no no so the rules in the
digital console is actually 44 jmx so
and think that is exposed as jmx
attribute you can can do this poor but
we're currently not even if it's
possible I mean it's really a a sort of
it's as I said it's me pretty much like
a MPEG stream if you configure these
chunks to be small enough you could
really see yourself like continuously
transferring them to the client and
having like a any things like online two
or three ever the night
stop it yes and that's exactly that's
exactly that's exactly what an SS is
doing with the diagnostic sweet so when
they do a diagnostic image that's why
they call it they actually dumped what's
available in the flight recorders wall
so they have different probes I mean
it's really like four or five things
that you want to look at on a running
system and not more really you know you
see the live set going up if it goes too
high then you probably want to dump yeah
always yeah I said never know I very
much still the system is yeah yeah
absolutely that is much harder yeah but
inept those are rare so yeah yeah yeah
most of the memory leaks of memory
operation get on being hours and having
Danny button and was like yeah yep
that's much harder so maybe you would
submit so maybe it would so maybe would
you wouldn't want a script that is
continuously dumping what's in flight
recorder or just configured to keep the
data around I mean that is possible
definitely
yes what the difference with you by
phone situation
okay so most of the byte code is from
relations are you know they need to
extract the data from family friend data
sources right they might be doing things
like capturing the method entries exit
of every method or they might be assumed
that for certain set of methods but
there are a lot of things that you
really can't do unless you are privy to
the internals of the JVM so there are
some things that we can get it up very
very much cheaper anything but white
police rotation is is you know a pretty
good way to do things as well it all
depends on what we live we are thinking
maybe using MicroStrategy ourselves or
we are actually using by codys musician
beach patrol client we are actually
generating so for every event to not to
have to have the extra 12 bytes for for
the object header for the array we're
actually generating classes for the
event type soon just to maximize the
amount of memory that in key prevents
right so so you know by for this
mutation is quite willing to do a lot of
funny things with it definitely end we
have been thinking of using vc on i-4 it
is sort of way to deliver probe points
so you know for every method that has
this name
please put in the rapid with a flight
recorder event that looks like this so
Facebook knowledge yep I don't think it
was silly to ask you
some way
to pay them simple this is
Emily
yeah these can be humorous Jim am with
you and
right there anyway i saw the open
hey I'm shocked us
you have any way to
bitch absolutely dish you know
absolutely the Soviet are performed
everywhere yeah absolutely if you're
looking at the bottom tab Ruth which was
called events all these different tabs
in that tab group is all about doing
freeform analysis of the bands and you
have a few pretty purple powerful tools
available to you so the histogram that I
showed where we were actually building a
histogram on and on the thread the the
lock addresses right the mantra versus
you can do things like that and then use
the operative set to take everything
that matches whatever conditions you're
over you are looking for and put those
events in a big bag bring it to the next
filter and you know might be four
threads or whatever in figure out the
bold events that were smashing the first
plus just being in a part of these
threads and then go to the you know so
there are all these different different
very general views that you can use to
22 in a very generic fashion home in on
the set events that you want to do in
the last four
yeah absolutely that's my own management
too yeah like for my goodness of
vacation yeah kind of
vision yes so there are absolutely
they're in school attract the
information presented my kiddos there is
directly two different ones right so
there is one where you which is the
reference parser which is include I
think at the JDK as well which basically
horses everything and put spits out an
xml file right but it's gonna be you g
and and then there is the the parser
that is built into J rocket Mission
Control which is very specifically tuned
for the use case of Mission Control so
and I don't think we are public is
supporting using that parser but in many
many ways it's much better so so we
which one person oh the part sorry I
know it's not going to be part of the
JDK but I have been thinking of maybe
making it as a plug-in that anybody
could use yes so the binary format of
the recordings are compatible between
Jay rocket and hot spot they are even so
compatible that we we were sort of asked
by product management to not support
help build a rocket recordings in our
new tool even if it was perfectly
possible impossible so interning at
Oracle that we have an internal update
site which is automatically available if
you have you know dr. oracle com your
your your am hosting where you can
download a plug-in that lets you open
home j-roc recordings in the new tools
so yeah you know well product management
so what instead for 1774 is there
yeah hahaha there are some metadata dr.
events about the recording self so when
who started things like that and that
there are thread starts and thread stops
and that's it it's not very useful do
you think it's going to be so seven of
the
let us being debated and so the original
plan was for 7 update but there has been
some something else happening that we
need to take you know first so so it
might actually be a little bit bigger
than we hoped for but but but I'm really
really really hoping for for I mean next
year it should be there otherwise I'm
going to 0 and for every Oracle customer
that has access I think to to my own
Oracle support so you can download the
tool and you can play with api's you can
produce your own view recordings and and
use the tooling to tour development
production it's for production you need
license if you isn't open it's just you
know go ahead yes future kill it was for
good so that's and what that is true so
so we are anything
you showed what's coming to mas porno
that there are other things that you
need the general
is there anything left that will come
for Heroes
or impossible I mean there are other
okay so if you like that okay so there
are more pictures indefinitely my dick
yeah I hadley the top of tops oh yeah
ellipses vertical that
I'm very interested in your memory
oh the other way when I am redoing it
goddamn Emily yahoo and we have at seven
Burbank of ya which we have a bump up
one but five gig in order to stay in
aluminum and it was when
oh by the but was it continuously
leaking or autonomous the lights had
gone up or it's just the ink update 32
what happened was we had a session
timeout for 60 minutes and if you keep
that way it considers he goes up
the memory okay however we take it down
to 20 winners and nominees sized 1.5 k
then in constant and
you should plug that it's a wonderful
program but we're about that but anyway
so so yeah you can use switch control
for the poor poor for chronic memory
leaks actually when we were doing the j
/ prototype we were happy using the
money tool to you know limit some some
of them damaging effects of impending
Joe a big cities double team so it was
very very very useful what we love I
think you were first right
and I'm very much every our everything
is but but I a promise anything also
well are there any scoop specific
because as I said are you ready no sir I
by the way limits real my match all your
evaluations are you really so I'm in
shock okay i miss sharp okay yeah I
don't know if you have mixed frames or
my cpu stores and all that again i
desperately cooking
that's what I'm totally what you are
doing something socially what what what
we want you is to help you by having the
dtrace tool there right because you have
to eat recent mac so what you could do
is just to pick up the latest version of
Mission Control out there before that
one and you know it has a few issues
that will be fixed in 52 to which you
won't have a like a year or reserved but
but if you could probably live with that
and use that tool to define your own
probes and visualize them in Mission
Control just click around and with your
own quiz around them and in there you go
front of a cpu scheduler you can see
what your threads are actually scheduled
one CPUs etc it's very easy to build it
yourself so yeah what about
think so we actually have I
we didn't have native but don't we the
topic
sorry but but I right now we are
focusing on making sure that we solve
the Java level problems and we have a
good way of exposing those shoulder off
to 10 users and we're going to take the
most commonly once the routes that we
think will be the most commonly
occurring problems and hit those first
but if you have some some input to two
events that you think would help you a
lot we may be pleased because then we
want to make sure that we solve those
problems as well
did
and that's about it or column suggest
settled a four-pointed yahoo job so just
I look there 74 and it's going to be
so the Java API sorry lower to the
charges and again said you force one of
the best one to start with because we
so if I don't know
a lot of yourselves so they're different
points we we are separated
it's technically there are there are
different ones so he use the form of X
line control
and use the Vitamix
but if the fire is available if you
would
so the pipe of one
so
work there's left before the event
recorder part is like a after ad is into
a vm now or basically exploring that
some some biggest part because I said
adding a disability or adding specific
features to give me up so that record so
so we also want to support the use case
where Mission Control to be used by JM
developers and sports them adorable
right so we do want to expose
you know things that can be helpful for
chili certain garbage collect material
etc
that when you need them these things
that are already there metrics from the
garbage collector so
and in some cases
thing that hasn't been
of course
boyfriend
I'd say a lot of events are mostly just
and also taking there are some focus of
where we actually have native
implementation of running a rocket but
with Jay rock we didn't have mac support
so so that job is like yeah we take the
native a prepetition from from from JRP
from adsorption loop it may be and then
we have for windows linux and solaris
and that we need to do
right very
with what the difference between
oh what a night we could talk operator-
single creature because the amount of
the other door is opening but I team up
evening and all of them are acting
different yeah so they are the same yes
also the you know from a user
perspective I guess you could say that
the g1 is really geared towards really
large cheeks and that if you mean the
garbageman injured
the table from point 1
read them one that is actually not that
heavily geared towards having large
recently they have
visual person so it next to me what is
more closer Cabela's or not
really small 471 doesn t I think that
they're quiet exactly so
licensing
I think your help
so
looks like in Arkham
so some of that features are gonna be
free so some features like some of the j
makes it yawns but we actually don't
care go now you can do get allocated
advice for Fred yeah but there are some
things that work equally first because
we want to have to license
dollars
no you have a pigeon cage fellows and
Ellen had some Torico feelings
of home of the TV our little bit are
completely so yeah you can just picked a
commercial yesterday yeah yes if it
appear
sorry which is it's debatable available
yeah available in those JK so no the
recorder part isn't so the flight
recorder is not a bit part of it as well
Angelica it's part of our Oracle's
articles clothes to donate it to 20 feet
JK now currently not I know I mean it's
like a at Eclipse com I think two years
ago there was devilish and Mark Ryan
held had this big you know fun thing
going on on the stage during a keynote
when they were saying like yeah you know
IBM is going to keep competing with with
with Oracle regarding the JVM
implementations and that is going to be
good for everyone there are going to be
new features etc blah blah blah and that
is exactly what is happening now right
Jay rocket has always been a commercial
JVM it's always been licensed and
openjdk has always been free so we are
basically taking a part of Jay rocket
and putting it into the closed offering
the commercial offering and keeping we
have donated some of it to open 8k but
some of it is we're keeping to finance
the development of even more cool things
yeah I mean there are a lot of yeah so
so there it's usually not the case that
we just port things straight off
sometimes there is but but and sometimes
we just look very hard at what see the
jets or look like them then we take it
pretty much the same way to transport
but then sometimes we just take the idea
and the concepts of Jai rocket
re-implemented because hot spot is very
different to what Jay would look like
it's a very very different piece of
technology more crying out just once
said that you know every time we took a
left Cherokee to turn turn to the right
I mean it's you know very different so
sometimes like getting rid of the perm
gen that is something that we are doing
in the hot spot base we're not trying
Terry central so what the whole event
eventful
in in jail rockets ya know nah this is
something that we added on later so but
but but but the you know not having not
having a perm gen was a design decision
from from like day one so it has
affected everything like it's been a big
job to get rid of it in hot spot but
it's a very good thing that they do i
was at eclipse called this year and the
X takes getting did a demo and I love x
text but they had they had forgotten to
set the permanent generation high enough
spacious room crashing it and it's like
no you shouldn't have to care about
those things I mean it's not something
you should need to know beforehand how
much she cares you're gonna generate or
how much strings you can in turn or
whatever it's like wow how about so
Jenny garbage cleanse so I think that is
a that is one of the features that I'm
anxiously amazing are waiting for
hotspot yes
sorry so
yeah so that's going to remain the same
i think if you own with look server
you're going to have this available to
you you're crazy okay waterless the java
separately
and for all
oh yeah it's called Java it's a job or
something something sweet where where
you think so you can license this yes
okay so we went straight to questions
but thank you so much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>