<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaFX on Smart Embedded Devices | Coder Coacher - Coaching Coders</title><meta content="JavaFX on Smart Embedded Devices - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaFX on Smart Embedded Devices</b></h2><h5 class="post__date">2013-01-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dQni7d7Tcmo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm David Hill I'm with the JavaFX team
from Oracle I'm the person working with
a very small group to make JavaFX run on
embedded before we get started I need
some information from you guys okay how
many of you consider yourself some
betted developers let's see a hand okay
how many of you are familiar with JavaFX
raise your hand
ooh that's better than I had hoped how
many of you work from home oh sorry
that is lucky okay we have several
things to cover here today let's just
talk about JavaFX first since most of
you raised your hands this is for the
few who didn't JavaFX is a rich
graphical application framework with
built-in support for animations and
effects in the Java API the important
part of this - a lot of people is your
development tools support you can use
NetBeans you can use the recently
announced scene builder you can use all
of your standard Java debugging tools
because they just work another important
feature is is that we're targeting GPUs
not all of the embedded boards have them
and we have software rendering fallback
but we are definitely targeting GPUs
because that's where you get the real
cool visual effects currently FX is
integrated with Java SE 7 you download
se seven you've got FX and of course
this is the standard eye chart you have
to have one of these in every talk I
believe showing you just some of the
controls that are used in FX
FX is visually configurable which is
really kind of important especially for
branding which of course in an embedded
device is really quite important this is
the same rendering code just with
different CSS behind it and this by the
way is an example on the JavaFX tutorial
site so it's not something I whipped up
overnight thankfully all right
that's FX on the desktop since so many
of you raise your hands clearly we're
ready to move on let's talk about
embedded so where are my markets okay
where where do I think that's that this
FX embedded is headed towards there's a
lot of things out there particularly in
the industrial automation where a
display screen that the engineer can
push to release a flow control or
monitor the temperature or have it flash
please run to the bunker all of those
things make sense on a graphical display
and can be done with FX embedded okay
this is on your already existing FX as a
system that potentially maintains your
industrial automation home automation
most of you probably realize that in
your house you have somewhere between
two and a dozen computers a lot of those
don't have graphical displays now like
your wireless router but they could now
I would be challenged probably by
several of you and the audience to say
why in the heck would you need that but
that's not my job it's the person who's
selling this wireless router that needs
to come up with the justification I
don't know maybe it needs to have a
slideshow or maybe it needs to say
warning you're in Oklahoma there's a
tornado coming I don't know there's
those things like that you know I keep
reading that the refrigerator needs a
display device personally I'm not sure I
need one but hey if they put one on
there I'll be really impressed
especially if it's using my code medical
devices is another possibility there's a
lot of medical device
is out there that might monitor
something like your blood sugar or
something like that and you could
aggregate this information perhaps
taking it from your insulin pump taking
it to a central control station that
logs and monitors your response over
time that is something that it's very
visual very easy for people to
understand in a graph and very difficult
to understand in a chart of numbers or
in some devices that I've seen one line
with a number and maybe an abbreviation
okay so mostly what I'm saying is is
that I don't know what application this
is going to go in because that's really
up to you guys to come up with a really
neat application and hopefully sell it
for good bucks so what I'm not talking
about today is a general-purpose tablet
okay pretty much what I'm talking about
is things that are hooked up to a power
cord and there's a lot of reasons that
we just don't need to go into those
right now okay so what is FX embedded
the important line on the side slide is
that it's a proper subset of JavaFX
we've seen graphical UIs in the past
that when they took them down to the
embedded or the mobile space they had to
make some shall we say severe
compromises so that your development
pattern say was swing on the desktop and
was CDC controls on the mobile device
two very different domains you had to
retrain your people in the case of FX
embedded we are a proper subset we do
excludes a few things for example we
have no dependency on AWT in swing and
because of that we can't support some of
the wrappers that are designed to work
with a WT and swing or SWT and I
mentioned that by doing this this gives
you your common development tools with
means seen builder which if you haven't
seen seen builder you really should go
check it out it's available for download
now and of course all of the debugging
tools today nope so the real question is
is how do you get those pixels on the
screen and we're concentrating on
hardware accelerated but for a simpler
system with less cost to you the
embedded developer you can use a CPU
that does not have graphics acceleration
in the form of a GPU your trade-off of
course is that price for the real lack
of performance it's significantly slower
but we do support software fallback
we're working and very close to
supporting media platform decoders so if
your platform has gstreamer plug-ins for
h.264 we should be able to use those by
the certainly by the time we release
with se8 so how do you interact with
your users mouse and keyboard is so
passe but it's also the way most of us
are used to dealing with it now maybe
even not I got a cell phone I touch that
all the time but we do when it's
integrated properly into the Linux
platform work with touch screens and we
do provide a built-in virtual keyboard
we have also made sure that our user
controls are scalable down to Q VGA
sides which if you're using a smaller
screen is important also of a real
importance to most embedded developers
is what's the footprint of all of this
okay
SC AIT's got a rather large footprint
because it's got CORBA and several other
packages that I probably am NOT going to
use in my application development well
I see embedded we're looking at a Compaq
profile of a round ten Meg added on top
of that JavaFX core which I'll explain
it a little bit more about what that is
we're looking at hitting around six Meg
so for a 16 Meg
you'll have a very capable graphical
user interface by the way for more
information on how that sa Embedded
compact profile works later in the week
Thursday at 3:30 I believe it is Bob
vendette is talked more detail about
this particular subject and details the
compact 1/2 all the way up profiles so
there will be optional footprint in
addition to the core which is most of
the functionality you will pay extra
footprint for media charts is under
debate right at the moment and certainly
webview which is not currently planned
for our first se 8 release so here's
where I live the porting layer mostly
folks don't care but I'm going to tell
you why in a minute
you're glad about it we have a very
small porting layer we need to provide a
window manager where there is no window
window manager we need to handle input
from the input devices we have to talk
to the graphics drivers we have to talk
to the media decoders and in the future
we need to provide web node which is
based on WebKit so large additional
footprint the important part to most of
you is that last line most of the code
is in common with the desktop which
means not only is it good for me because
I don't have to work on that code most
of the time but it's good for you
because the behavior that you see on the
desktop
on that Windows Linux or Mac platform is
also likely to be the same behavior that
you'll see here on the embedded device
with a couple of constraints those
constraints being how well the the GPU
the hardware acceleration supports some
of those operations I've alluded to this
a couple of times these are features in
JavaFX that largely don't make sense
except maybe the webview in an embedded
environment for example the system menu
support this is support built into FX so
that you can have a system menu that
ties for example into the mat the Mac
toolbar the one that goes at the top
well since I'm in a full screen
application with our environment with no
window manager other than me I really
don't know what system menus mean yet so
at least right now that's out swing I
mentioned drag and drop is another one
where someone needs to convince me that
I really need need to spend a lot of
time there and webview and the
interesting thing about web view is is
that because it's based on WebKit behind
the curtains it's a lot of additional
work and a lot of additional footprint
so we're delaying that implementation at
least for now availability you can get
it as of last Sunday for download this
developer preview works on a be able
beagleboard-xm
which I'll talk about in a little little
bit later but moving forward we also
have alpha and beta programs for
interested partners and if you are one
of those interested partner one of these
come talk to me afterwards and I'll
direct you to the appropriate program
manager who can talk to you we also will
be integrated in the SE 8 embedded
release
which is happening next year okay let's
talk about platforms for a little bit in
general we're looking at a Linux kernel
we're looking at arm and depending on
the application as in your application
embedded application integrated egl
OpenGL sv2 support integrated touch
support and if you want to use media
you'll also need to make sure that you
have the integrated Hardware decoders
because they make a huge difference when
we first started this project we knew we
had limited resources and we wanted to
pick a platform and there's a lot of
vendors out there there's a lot of OS
versions and everyone has their favorite
board believe me we had this discussion
we picked hope and many egl drivers most
of the vendors out there for example TI
or freescale each have their own GPUs
and each of them have OpenGL drivers and
they vary in availability compatibility
support for media drivers and all the
rest after all of our decisions we
picked the beagle XM not because it was
the fastest we actually didn't want the
fastest not because it was a slowest
because it didn't want that either but
it had some of the sweet spot for us
okay it had available drivers it had the
ability for those graphical drivers to
write directly to the frame buffer which
isn't always available on some platforms
we are monitoring other platforms okay
by monitoring it means I get it I beat
it up a little bit but QA doesn't spend
a whole lot of time on it
okay so we have our stuff running
in-house on the PI on this Freescale IMX
53 the pandaboard which by the way if
you look saw the kiosks
around the year the the scene builder I
mean the schedule or kiosk are out there
those were running on a panda okay and I
even have it running on an atom okay
rendering paths
how do I get to the screen we're looking
at three rendering paths and I'll dig
down a little deep more deeply into what
these are okay and for most of you you
may not care because hopefully it'll
just work for you our favorite rendering
path is OpenGL it's es to using egl and
talking directly to the frame buffer the
nice thing about this is you don't have
the additional overhead of x11 and a
window manager so you don't not only
aren't paying for a flash footprint but
you're also not paying for memory in the
extra time commitment of packets going
back and forth between the different
processes
this requires native driver support the
Panda for example currently doesn't do
this it's coming it's coming we've been
told that for two months haven't seen it
yet the vehicle doesn't the Raspberry Pi
does it in this particular case since
all you really have is a frame buffer
which is just a lot of bits on the
screen we need as in me I need to
provide window management because an fx
application can have multiple stages
which translates into multiple windows
you also have pop-up menus file chooser
all I mean menus pop down menus but
popped to the side menus
all of those are a window well I have no
window managers so I have to be the
window manager I support to front to
back moving resizing you don't have to
be full screen if you want but you can
be all the rest of the stuff that you
would just expect to work really does
we read our input straight from dev
input now this is an intriguing thing to
do most of the time most developers
don't have to worry about this because X
does it for you
they've already done some of that work
we're still learning but we currently
read from mouse keyboard and at least a
certain class of touch device apparently
there isn't quite as standard for touch
yet and so we're still understanding all
of that but you can see that we've
gotten at least to a certain extent
because the schedule builders certainly
seemed to handle touch quite nicely so
we also have software fallback we're
using direct FB to access the frame
buffer and that provides us with a basic
level of window management and also our
input support this uses a non Java 2d a
non ADA WT rendering pack path so this
is our own path and by dropping a WT we
are able to save quite a bit of both
memory and a flash footprint it's much
slower compared to e GL in one test I
saw just this morning and Bob will show
you later in the week if you go to his
doc one particular test it was a factor
of 50 different between the two as in
like one frame a second on an abuse test
250 frames a second on the same abuse
test
so the last rendering path is a
reasonable rendering path but it's not
one we've been concentrating on up to
this point and that's using OpenGL ES
AGL and x11 again it requires an X 11
server and a Wynnum window manager with
the input managed by the X server x11
does add several overhead and
limitations to this operation not only
is that window sorry not only is it
memory not only is it flash footprint
but there's certain operations the X
Server wasn't designed to do like shaped
windows which is something that we
handle in our AGL case quite easily okay
and a lot of the FX UI controls assume
that that pop-up window has rounded
borders which is a shaped window so
there's extra overhead that x11 forces
on us because of that so as I said it's
not really a focus for us right now and
it's currently not planned to be in the
s8 embedded release media I think I
mentioned already we rely on GStreamer
and our intent is to use any
vendor-supplied GStreamer plugin
okay design considerations my desktop
app should just run right I get asked
that a lot
constantly and my response is yeah
probably as long as it avoids a WT swing
media and web node at least at the
moment but will that application be
usable
I've had several applications that
assume that they have an HD display and
when I bring it up on something sub HD
the application was written in such a
way that it didn't rescale to use the
available real-estate so all of sudden a
big chunk of my controls are off the
screen okay that's not terribly usable
so this is just the tip of what I'm
going to be talking about now embedded
platforms mostly you're dealing with a
slower CPU and GPU as you guys probably
know this beagle I have up here is
running at around 850 megahertz
Raspberry Pi somewhere around 2 gig no
no no it's it's less than that but still
we're talking about just the CPU if it
was truly a one-to-one with Intel you
know you're looking at a CPU from she's
10 years ago something like that of
course the advantage of these is is
you're also using a lot less energy
you're also going to have less memory on
these this beagle has 512 Meg I know
I've seen boards out there in the gig
range but you know they're not like my
Mac here which has got 4 gig and 2.2
gigahertz processor I think it is you're
also likely to have a smaller display
notice I say likely it's not always the
case the Raspberry Pi will output in
full HD so that's a pretty decent real
estate
it's also possible that you're going to
be dealing with touchscreens in
touchscreens is a very very different UI
art okay that button that you can click
on with a mouse you can't click on with
your finger things need to be bigger and
depending on your your a use case you
may want your all the rest of your
controls to be bigger as well
okay so again will it run could be but
not necessarily you do to a certain
extent have to target now will you be
able to take this off of the beagle and
run it on your desktop most certainly so
especially if your desktops got a
touchscreen on it other things to think
about
keep it simple if you can really complex
scene graphs will slow down rendering it
adds to your computational load and if
you're trying to get a high frame rate
and with all of the FX bindings and
stuff like that that are in there to
make life easier for you
it really can slow things down there is
a toggle that you can enable caching but
remember when you do that caching means
you're stealing the memory that possibly
you need for something else
okay freeing up unused resources this is
another big Bugaboo in the demo that I'm
going to show you here in a few minutes
that was the biggest concern our demo
crew went whole hog loading up large
resources and a lot of them and we're
surprised when we were ran out of memory
so after a couple of passes we managed
to come to a compromise that looked
visually quite impressive and you'll see
that in a moment but also would work on
this more limited device other design
consideration effects JavaFX has a lot
of effects say that 10 times fast all
right
the cost of those visual effects will
sometimes surprise you certain effects
appear to be virtually free others are
really really expensive and our team is
still working on seeing if there's
better ways we can do some of these
effects but in some of the cases I don't
think we will be able to okay
and this is largely because we're
dealing with a four pipe GPU instead of
a hundred pipe GPU that you might have
on your desktop it's just it's all about
bandwidth and the size and the
capability of the processors involved so
play with them find out which ones work
find out which ones don't work and and
you plan accordingly and here's just
something to consider I worked on a cell
phone operating system a while back and
I had a real interesting crash one of
the managers took his 10 megapixel cell
phone and went out and took a picture of
his cat I think it was stuffed it into
our cell phone and said make that my
icon and our software was a little young
at the time and so it took that 12
megapixel image and made it his icon and
then they came to me and said Dave why
is this contact page loading so slowly
and I was like oh Lord here we go again
okay FX has the ability to load a
thumbnail okay so you can subset an
image on the way in something that I
ended up having to write back in my cell
phone days okay so be aware of that
feature and here's it if you need to if
you're loading a texture I mean if
you're loading an image that is not one
of your own resources you definitely
should consider constraining it when
you're loading
other things to think about I know in my
case I bought a embedded device called a
cell phone here recently the first thing
I did is bump the font text up because
my eyes really appreciate that
okay and depending on your use case you
really might need lot larger text and as
I mentioned bigger overall controls are
often a something you see in embedded
usage alright let's get to the demo the
first demo I'm not even going to show
you here because I want you guys to go
play with it yourself
rather than me stand up here and show
you a canned set of routines I want you
to go try one of these kiosks out login
as guest and sit there and play with the
scrolling and remember this is a demo on
an early access at this point but it
still looks at least from my perspective
really sweet especially when you realize
you're scrolling basically HD real
estate and it's doing it very fast and
very smoothly so there's your first demo
that wasn't painful was it police not to
hurt me okay this is another one that
was cobbled together by our demo team
the idea behind this is is that we
wanted to come up with again a use case
for how you might use embedded so a lot
of you have walked by those large big
printers printer scanner multifunction
units that are ubiquitous in offices now
and you've probably used its control
panel and depending on your point of
view it was easy or not so easy to use
so this is going to be an imagination of
how we could be doing this with JavaFX
and again this is all written into FX
and it's running on this beagle that's
sitting up here okay and again the
beagle is running out of about 850
megahertz
we have 512 Meg of memory this is
gpu-accelerated alrighty and normally
that this should be touchscreen and if
you go to the demo grounds you can see
the touchscreen version of this alright
as a graphics guy that scroll in blows
me away I don't know about you guys but
it really makes me happy
and see we have controls here and again
I probably would have made that a little
bit bigger but I wasn't on the demo team
let go let go
yeah really let my mouse go oh there we
go okay so we've got a we're gonna scan
something we give you some choices about
how you could scan from the the platen
and you know we have a quality level for
example or you know black and white or
photo so we go to the next page and
you're at a moment kick on kick on oh
hang on that one I forgot I didn't
didn't boot the version that doesn't
know about the scanner that I don't have
here sorry alright same kind of thing we
have a color image we have noticed the
larger controls
and there we have it simulating actually
printing
alright let's go to storage so here we
have an animation that is prompting you
to install your SD card or your memory
stick and then we have various files or
images that we can store on the device
and as I said this is available in a
touchscreen version over in the demo
grounds please come visit us and we can
show you the full scanner path so that's
that demo at this point I'd like to show
the required legal oops
gotta hit the button so I can show you
the required legal disclaimer and then
we can move on to Q&amp;amp;A
any questions oh come on that is not the
3d that is all it's done with FX but not
with the FX 3d package which isn't part
of the FX 2.2 plus that we're currently
working with right now
yeah go ahead the class of touch device
is more in how it integrates into the
Linux kernel and I didn't do that work
directly myself but it comes down to
there's various high octal x' that you
can query to see what the features are
of the touchscreen and then how the data
appears in dev input and I'd have to go
back to my touch guy to ask him the gory
details of it but the gist of it was is
that we had two touch screens one of
which once we had it integrated the one
that we have over in the demo grounds
that worked really well and then when we
tried to do another one we found that
that one spoke a different flavor of
these iock notes and so that's our our
frustration we need to be able to detect
and dynamically handle those ok other
questions yeah
yes the yes right Raspberry Pi certainly
has enough resources so the question was
you know how much what's the minimum set
of resources the minimum set of
resources is Linux our JVM which right
now we have to use the soft float on
Raspberry Pi because that's what's
publicly available so the JVM in in
addition to the JVM I need the hardware
acceleration which the PI certainly has
quite well and we need access to dev
input which the Raspberry Pi works
there's a couple of questions in my mind
on Devon but but it looks like it's
works really well too so that's really
kind of our initial minimum and once we
add media on top of that then it the
question comes down to the GStreamer
plugins and as I recall it's not my area
of expertise as I recall the PI does
have that as well
right yes it does come down to the
availability of that so in our
particular business we're not going to
be providing you with your OS most of
what we're looking at is a vendor will
be bringing to us a board with all of
the stuff integrated on and as long as
it's properly integrated we should be
able to work very quickly with it the
only questions would be things like you
know the flavor of touch or something
like that which are usually easily
handled it's they're not that different
but they're different enough that it
causes me great headaches but the other
issue is again the graphics drivers a
vendor is going to bring this to us and
if they want that egl frame buffer you
know direct path they're going to bring
that to us it's not something that we're
going to do and in the case of the PI
and in the case of the Beagle that's
there already
in the case of something like the panda
that they get they claim they're working
on it so good question okay any
yes-yes-yes work word so let me clarify
we're writing to OpenGL es2 not 1.12 and
which is not an unreasonable limitation
in the current market of devices and the
reason I specify es of course is because
that's what you're going to find in an
embedded system and it has different
performance characteristics compared to
desktop GL and then different
capabilities too and so the FX team has
written to the ES spec for the most part
there's a couple of places where they
they take advantage of full GL that I
can't but yes we just rely on opening up
and driving bits through
yes so the question is is if you're not
doing a lot of animation and not a lot
of effects against the software fall
back work and I think the answer is yes
I think you're dealing with a relatively
simple use case but you know like if you
were thinking of advertising signage or
something like that without a lot of
media in it there's something that's
moderately static you certainly could
use FX for the rendering because we have
a lot of rich text capabilities in FX
and you could certainly do something
like that of course in this at same you
know industrial signage or advertising
signage you know with a little bit more
processor you also could add in media
and text spinning in and dirt you know
blurring text and Oh Fletcher and all
the rest of those those things okay more
questions yeah all right the Linux
embedded forearm that's available for
download is only v6 Bob
right okay so
yeah all right just to summarize it
sounds like the JRE will support arm v5
but right now we're not sporting head
full on it so but again all of this
comes down to you know partner deals the
the the public release is targeted more
for people to come check us out and see
how things work and hopefully for the
hobbyist once once everyone gets a
beagle or once we start supporting
headful on the PI but for a lot of those
cpu details the ten bubs talk on
Thursday afternoon more questions
hearing none I guess I'm done thank you
very very much for coming</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>