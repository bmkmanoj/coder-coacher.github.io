<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Oracle ZFS Storage Appliance Analytics Walkthrough | Coder Coacher - Coaching Coders</title><meta content="Oracle ZFS Storage Appliance Analytics Walkthrough - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Oracle ZFS Storage Appliance Analytics Walkthrough</b></h2><h5 class="post__date">2014-10-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nQV0iXyeVZ8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi this is Darius Ankeny I'm gonna spend
some time now going over a basic
overview of analytics or what's known as
DTrace analytics built into the
appliance so analytics themselves are
using DTrace and the backend operations
so they're very low overhead probes that
are available there's actually quite a
few that are built into the system you
can see these over here under analytics
and data sets these are typically you
know there's probably 30 or so that are
on by default you can oh there's some
element you have been turned on that
aren't normal but you can record more of
those or less of those you can change
this on the fly this screen just shows
you which ones are being recorded you
can see by the green dot it shows you
how long they've been recording as well
as how much space they take on disk and
how much in memory you can control how
much of this data you keep these
analytical data is actually kept on the
POS drives the boot drives of the system
and you can click on settings this will
give you the ability to create a
retention policy so you could say for
instance keep per second data you know
for one one month you can keep per
minute data for more and per hour data
for even more than that however you want
to do it but that's a possibility as
well so you don't fill up too much space
with this analytical days it's it's
fairly small but you can't control you
can also control it on individual ones
you can go to an individual analytic and
click this little trashcan
you can delete all of it you can delete
just a portion of it you know keep
everything anything older than so many
hours days weeks or months you can also
get pickle which ones you're going to
get rid of
as far as when you first come in all
this data you see here these graphs this
is actually D trace data so you can
actually get to the analytics tab just
by clicking one of these so for instance
you see here we see and if s three
there's operations going on we see
Network and disk I can click any of
these and they'll take me to that point
in time so this is a lie the current
minute the last 60 minutes last 24 hours
last seven days so for instance I can
just click on here show me the last 60
minutes of data happening for NFS three
operations on this controller I can also
from here switch around to different
views at times I can say go to the
current minute I can say show me the
last 24 hours of data I could say show
me the last week the last month yeah I
can switch back and forth I can pause it
I can go back I can zoom out on this
thing I can zoom in
whatever's need to do these buttons
right here let you find a low point for
a period on the graph the high point
this has changes the view of the graph
itself it's a a wine instead of a stack
this synchronization button if you have
multiple views opened up it can
different analytics it can synchronize
them all on this one so I really cared
about this point in time this 1532 our
3:30 to 13 points I could click the
synchronization but if I'd multiples
open and it'll sync I'm all up so I
could see what else was going on the
same point of time so for instance I
could see what was going on in CPU what
was going on in disk on the network on
other protocols all sorts of other
things I could do with that the drill
down I can that is probably one of the
more powerful things and we'll talk
about that in a second but just quickly
here on the title the bar of this one if
it hasn't been saved before it's a nine
so for instance if I click on it
tenderly drill town I can click on for
instance let's say my file name
well that's recorded so let's try by
Cher okay there you go so I'll it play
and what you'll see is it starts off
with a bunch of gray lines so what
happened is we opened up a new probity
trace probe in emphasis three operations
per second working on my share that
wasn't being recorded and it was not one
of the data sets that are being recorded
and so what the system does is turn the
probe on and it starts recording the
data live as long as I keep the screen
open if I want to keep the data going
forward forever or ever on my retention
policy is set I can click here and just
click the save and it'll save it if you
click one that's already been saved to
just give you a message hey it's already
saved you don't don't worry about it so
now this probe is now turned on and so
this is showing me what's project and
what share is going on right now is busy
so back to other things you can do with
it oh one other thing you can this also
gives you the ability to export the data
you see in this window so I can just
click that and all that does is create a
CSV file that I can view the data is for
the screen if I wanted to see multiples
I could do that as well I could pull
multiple things via a script so this is
a good time to show you the
synchronization so for instance you see
this one is moving the other guys are
not I can click you know a high point in
here or a low point and then I can click
the synchronization button and that will
line them all up at the same time and it
also got these other two moving so now I
can see I can click on any of them and
pause it it's going to pause all of them
and I can take a look at the data I can
see yeah for this instance what files
are open I can see we share they're on
the data is really it lets you gives you
the ability to drill down and ask
intelligent questions
a good example of this would be drilling
down and finding out this in this case
I'm running virtual machines and I can
ask all sorts of questions I could find
out by what client
so what virtual server hypervisor is run
in this so here you see I have 2
hypervisors these are doing some of the
workload I can see one is busier than
the other I can't click on right click
on him and I can ask a lot of questions
about him I can say oh well tell me what
files
I know these are virtual servers
hypervisors and I said drill down on
just this one server this one virtual
hypervisor server and tell me break it
down by filename so this will actually
show me individual file names or in this
case VMDK files so this is an actual
virtual machine so I can see exactly
what virtual machine is doing this
traffic
I can ask other questions such as what
type of work this virtual machine is
doing so tell me is he doing reads is he
doing writes what does his workload look
like and here I can see he's doing a
combination of both reads and writes
looks like he's doing mostly reads but
he's doing quite a bit of writes
clicking over here you might see a
better view if you don't click on a
point in time and to get rid of the
point times when you click on it you
just click on the time stamp itself and
get rid of it what you see over here is
the range average so this is the average
for this moving window so it may not
line up exactly because for instance
here I have a much larger window than I
do here so I can continue asking
questions such as well tell me more
about the read or the writes I can
right-click on say just the writes and I
can say well tell me about the size so
what size of data is this are these is
this file and I come in here and what
I'll see is that the majority of the
data is basically running about 4 K
blocks I can see that if I'm curious
about these rights I Melissa
right I can go in and tell me about the
right latency for these files and it's
gonna show me that and so here we'll see
so far it looks really good
don't really have too much more you know
the vast majority of a hundred
millisecond of the number of apps we're
doing so right latency looks good block
size looks consistent I could also look
at and you know what's interesting is
this is very granular so I'm looking at
NFS operations per second I broke it
down by which server it was on then
which virtual machine this was and then
tell me just about the rights and only
the rights that are this size and then
tell me the latency for the right side
of this size so it's incredibly granular
detail of what you want to see what you
can see we can go look at the other
server so we'll go here we'll drill down
on a 197 server and let's take a look at
his block size
now he has a mix but it looks like the
majority of the I ops are probably 64 K
range so what's interesting about this
is he's probably moving quite a bit more
data so far we're just looking to
operations you can also look at
individual bytes as well so we go to NFS
3 bytes and we can look at that as a raw
number just to start off to see how much
we're doing I could drill down here by
client I could drill down here my file
name we'll just go straight to the files
since we know the workloads were running
and here what we'll see is one of the
machines is doing quite a bit more which
we already know about that one this
teepee wind to machine is the same
machine we have up here TP went to that
we know is doing much larger blocks so
of course it's going to be doing more
data but it's nice to be able to
correlate those things together you
could also correlate this with the
network view so we can go in and say
show me network interface bytes we can
break it down by individual interfaces
and let's go over here click that and we
see by far the vast majority of the data
is going over this interface
we can also see disk analytics for the
same thing so we can go over here look
at disk we can look at disk IO break it
down by individual by size so we can see
if our disk IO size is matching what
we're doing right the most part and well
just see you'll see a whole range cuz
ZFS will correlate things together but
what we should see is quite a few of
them
our sixty-four kick that's we're doing
the majority of our written data is
there we could also break it down by
individual drives from this point
show me the drives that are doing that
so many other analytics available in
here highly useful highly capable of
giving you information to make
intelligent decisions one other feature
worth mentioning is once you get a sheet
of analytics that are valuable to you
you can save those by just clicking here
and untell worksheet giving it a name
and just simply clicking the Save button
and that will basically put it in here
save worksheets and you'll be able to
open this back up also if you have any
analytics that aren't recorded it'll
automatically save those and that way
you'll have all the data that way if you
come back in a week or a month or
whenever you'll have all the historical
data as well as the real-time data so
that's it for the analytical overview
thank you so much for your time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>