<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Utilize the Full Power of GlassFish Server and Java EE Security | Coder Coacher - Coaching Coders</title><meta content="Utilize the Full Power of GlassFish Server and Java EE Security - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Utilize the Full Power of GlassFish Server and Java EE Security</b></h2><h5 class="post__date">2013-02-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fXDwXqqTUr4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to this session which is going
to be evolved Joey security with some
connections to class which application
server which is the reference
implementation for Joey specification as
well as being a better received
open-source application server I think
it's time that we start because too and
and if more people work on we're going
to show up if you have already been here
my name is Massoud and I'm going to be
speaking about utilizing the pool full
power of Joe application Joey and glass
which application server in relation to
software security I'm a glassfish team
at Oracle though I recently joined
Oracle but I have been working on this
subject or for quite some time and have
a book on the same subject name hawaii
and plastics application server security
which was published like two years ago
so we have a little agenda for today's
session it's going to be a little
introduction to get into the mood of
speaking and you get in the mood of
listening probably and then i'll go over
Joey security API what you get out of
the box with most of the application
servers today after that we will have a
brief go over off just peek or JSL 196
we will see what case are 196 is and how
we can use that to benefit this plug
ability feature of Joey a spec and of
course an implementation of that Joe is
back then after what we are going to go
and talk a little bit about
authorization contract for containers
which is Jess are 115 and finally if
your time permits I am going to cover
something about OS or top 10 security
concern as categorized by us and if the
time doesn't permit we are going to have
a short QA after that jsr 115 so short
on the program agenda I'm
to go over what securities security as
you probably heard me refer to lots and
lots of things and from that lots and
lots of things there are few of them
that we are going to cover here but
those view that we are going to cover or
sort of that the cornerstone of any
software security system because when we
are talking about software security we
have some basics that any system that is
going to have some level of security
should follow should provide and should
implement so if you are looking to hear
lots of jergens that's not going to
happen we are going to talk about some
myself that it come on seems that
everyone would hopefully understand and
hopefully can follow and what you are
going to hear is everything is
implemented and available at Joey
specification 6 and of course at seven
and for any kind of implementation you
are going to be able to use glass which
application server for 1 i'll try to
bring some examples about gay bars and
Geronimo has the other application
servers I know wherever I can but
everything would focus on glassfish
application server in term of
implementing example or talking about an
interface or something of that sort so
before we dive deep into this subject
I'm going to talk about some some terms
that we are going to use and you're
probably going to hear a lot when you
are reading something about security
first of all is a subject a subject is
an identity that can be authenticated a
group is a set of subjects or user with
some common characteristics these common
cancer characteristics can be only
security related or the organization can
decide that ok we are going to put them
in this particular group for example in
your LDAP directory because they have a
set of common gastric command like
features or characteristics and then we
have security really a security realm is
something that connects an application
server to somewhere that has all of
these identities stored so you have a
place and identity a storage which
u.s. or your username your passport your
group relationship and everything and
then you have an application server
that's required to connect to this
identity a storage to do that we we have
something called a security realm in
jboss they are call it a security domain
in glassfish and your anymore they call
it a security realm so a security real
is something that knows how to interact
with that storage which has your
username and group relation management a
rule is something Hawaii specific you
heard of group a lot because you know
your LDAP sand everything but the rule
is something at java ee level because
Java he wants to be abstracted from from
the external sources that's going to
interact with so we have the role at Joe
a level and groups and individual users
at your user a storage and this role is
going to be mapped to one or more of
those groups and/or one or more of those
subject in that way Joey application is
going to be isolated from any change at
the lower level at the group's and we
have a principal principal is something
that is attached to a subject it can be
a group name a role name or anything of
that sort and the credential is
something that using that you can
establish that the identity of this
client is what the client claimed to be
so usually you know that for credential
you use the username and password but
sometime okay not some time nowaday lots
of companies are providing multi-factor
set of credentials you have the username
and the password and you have something
that you own or something that you are
something that you own can be like your
cell phone or a smart car or anything of
that sort and something that you are can
be a nice can of your palm or or I don't
know it's kind of your fingerprint of or
anything like that so combining
something that you know which is your
username and password is something that
you own or or you have it makes it adds
one level of more security on top of
what is like traditionally available for
for authentication I'm going to talk
about that that multi-factor a little
more as we go forward
so is it tuned for that one so before
before you actually start thinking about
security Antonito these application
server or this final framework doesn't
provide what I need if you think really
what are the sensitive data that you
want to protect because if you are
thinking about security you should know
what you are going to protect by that
security that you are thinking about and
what we usually protect is the data data
that is a source number data that like
reflect a process data that reflect an
entity or anything of that sort and then
you need to identify what are the roles
and how fine-grain the set of rules can
be to access this sensitive data so you
should know that ok I have this set of
sensitive data and I want no one to
access them ok then then you don't need
security because you're not going to
expose those data to anyone at all
because no one is going to access them
so if if you are thinking that you have
some sensitive data and you need to put
some protection around the sensitive
data you need to know who is going to be
allowed to access this sensitive data
and who is not going to be permitted to
do that so you need to identify the
rules that can manipulate or play with
the data and finally you need to
identify a set of resources that
represent those sensitive data you have
your data is stored in I don't know in a
flat file or you may have your data
stored in the database or anything but
that's not going to be exposed to the
user but the users that are going to
access it you are going to expose a set
of resources the resources can be your
web pages the resources can be your ejbs
that are going to be accessed through an
application client or it can be a rest
endpoint or anything of that sort so you
have a set of resources that represent a
set of sensitive data and those
resources are what you need to put a
protection around and to protect those
resources you need to know ok how should
I group these resources together to have
a proper security plan in place to
assign some rules on some of these
resource groups to just let them to just
allow
certain certain set of rule to have
access to that's the certain set of
resources and finally you really need to
document everything and you cannot just
say okay we are going to remember this
because you are not going to remember
that and as you go forward in
implementing your application you are
going to need to refer to this data that
you have collected more and more often
okay I said that we have some resources
you identify that you have some
resources that represent your sensitive
data and you need to protect those
resources to do that there are some
steps one is that as I mentioned during
the introduction is to authenticate
whoever wants to access your data that's
to establish an identity of the color of
the client and then you need to make
sure that this already established
identity is permitted to access that
particular resource that's requesting
and as I mentioned the resource can be
like a URL which is going to hit your
price full endpoint or it can be an ejb
method so authentication and
authorization the two like important
subject to basic subject that any
application with some security level
should provide india ye there is
something named container subject
propagation and trusted containers you
know that Joey has like at least three
containers we have the application
client container we have the web
container and we have the EJB container
we have some connector adapter that can
connect eis but that does something
separate so the one that is exposed to
the users is the web container and the
application client container and when
you establish an identity in any one of
these two containers that identity is
going to be propagated to the that
container that is sitting in the back
which in our case is EJB container so a
benefit that is provided by java
application server and joey aspect in
general is identity propagation
to establish the identity once and that
identity is going to be propagated
through any container that is connected
to your application server and thus you
need to take care of identifying the
client once we are going to get back to
this identity proposition again in a
little bit okay yeah and we have the e
is to connector and if if you have an e
is using the connector 1.6 a spec and
this e is is going to hit some message
endpoint the EIS can send a subject to
the container and the container because
the subject that is coming from the EIS
is not something that application server
may know so the applications of respect
specifies that okay the container should
have a way to let the admin map the
subjects that are coming from the EIS to
some subject known to the application
server if time permits we are going to
go into more detail on that okay
authentication or or establishing the
identity happens when someone tries to
access something that is protected so
when you try to access I know your gmail
address which is of course protected you
will be presented by a dialogue that ask
you to provide some credentials to
establish your identity and that's when
you you provide the data which is which
are the credentials and the server is
going to establish identity for java
application server we have those
resources which we protect and when you
try to access a protected resource you
are going to be prompted to provide the
credentials that are required required
to access that the authentication method
there that are supported like out of the
box fort with Joey a spec are four basic
ideas and client certification the form
is is what mostly people use because
that's give you more flexibility to
create your own page with your own
design and then send that a user name
and a password to the container and
container take care of authenticating
that against the rhythm that you have
configured for the application and
client cert is to establish a mutual
certificate like trust between the
client and server meaning that your
client should
have the certificate authorities
signature that has signed the server's
certificate in it see a root and vice
versa for the application for the
application server in regard to decline
so to specify the protected resource we
have something called security
constraint element in in web dot XML and
using that you can specify okay that you
are a pattern for the resources that I
want to protect is like this and the
role that can access that particular set
of resources is roll one roll to to roll
n that's how the sensitive data that you
have already is like research and and
and find out about are going to be used
to specify the constraint around that
the resources that represent them we
have something in the same security
constraint element you can specify ok
this data is sensitive so they need to
be protected during transport so you can
specify that ok might attend need to be
protected when it is on the wire either
fully confidential or at integral level
the confidential which is a sample here
it means that the data is going to be
encrypted using the algorithm that that
you have specified for that particular
listener the cipher suites or you can
say that ok I don't want in encryption
because encryption is like resource
sensitive but in a set I want the people
not to be able to tamper with this data
so you specify integral and that means
that the data is not is going to be
tamper proof no one is going to be
tampering with them but someone can
actually look at them if if they look at
the data being transmitted or the wire
ok I said that there are like four types
of authentication method that you can
specify and this authentication method
are going to be a specified in something
called a login configuration a login
configuration accept an authentication
method which is basically how you
collect the credentials from the user
and the four types that are supported by
Joey I suspect our basic internal form
and client set and digest so we have a
form here and the next one which is
probably more in
for time to discuss is the real name
rare name in in in the in the dent in
the web dot XML refers to the security
realm that you have configured at your
application server level to connect the
application server to the identity
storage at you have so when you have
jdbc real here it probably suggest that
my user information are stored in some
database tables somewhere and there is a
module sitting between my database and
my application server that can read this
information from the database and bring
them to the application server so the
applications that were used them to
authenticate these credentials that are
provided there is one more thing that
that is introduced in Joe a 6-1 like an
enhancement and that's that the
programmatic loggin programmatically
again gives you the option to to
authenticate the user provided
credential against the configured
security realm programmatically so you
are not going to be depending on the
container to take care of presenting the
user with the form collecting the data
and then performing the authentication
but rather you gather some some some
user input and based on those user input
you can create the credentials that you
are going to submit to be authenticated
against the rail so what does ok you may
say why should i use programmatic login
enjoy a 6 while I can have my own
several filter which is going to sit in
front of my verification and and
intercept a request and check the
headers and if if it doesn't have my own
header values I'm going to redirect them
to the login page and and collect your
data the main reason is that if you do
it your own way first of all you are
doing it your own way that means it is
not tested whatever is provided at Joey
level is perfectly well tested and
widely used so you can trust that
secondly and more importantly let's say
that that you have completely tested
everything and you know what exactly you
are doing is that you you won't have the
subject propagation from one container
to the other container the other thing
is that if your application server
provides some auditing
and some logging you are not going to
benefit from that because you are doing
it your own way so the auditing module
that audit all of this incident is not
going to record that okay five faith
login attempt happened like last night
or 100 faith login attempt happened a
day ago so you're not going to benefit
from that nor from logging that is
accessible that is available at like
every application server and it's this
programmatic login provide you with the
opportunity to do multi-factor
authentication so using programmatic
logging you can you can collect more
than just two Colonels which is the
username and password is something that
supported by other form of
authentication you can collect the
username and password and the SMS that
you have just sent the users cell phone
and then try to authenticate weather
that day SMS content that user put in
the in the four matches what we have
sent to the phone or not and after that
you can try to check the username and
password and login the user the security
rain that is configured with the
application and then a very simple a
very very simple and basic act
yes actually principles and rules are
always propagated from one container to
the next if the containers are trusting
each other if its application client
container is going to be propagated to
the hav container or any campaign if
it's a web it's going to perpetrate it
to e JV if you are actually accessing
some ejb through your web components so
yes that's going to happen and and what
you mentioned about about application
client if I understood correctly in the
application client you use the callback
handler to collect the user data and
then you authenticate that against the
realm that is configured for the
application so it's going to be exactly
the same for the web application for the
real application you authenticate the
user provided data against the realm
that is configured for the application
and that's why the it is trusted to have
this subject propagation between the
containers right yeah if you have your
own servlet filter I said that if you
have your own server filter and you are
adding something at the session yourself
with that is not going to happen if you
do that then the subject is not going to
be propagated between the containers but
if you use something that that container
provides then yes it is going to
property between different ones okay so
let's go yeah very very simple I'm going
to show you a more complicated example
of this when we get to jsr 1964 say that
you get the username and the password
and the internet SMS you check that the
SMS that that the user entered is valid
one and then you go and log in the
username password against the realm that
is configured for your for your
application and if if it doesn't like
compute it just invalidate the SMS if it
is valid and and let it happen again to
wrap it up about the web dot XML I'm
going to go a little faster now so you
have the verification on the
verification you have the security
constraint for security comes when you
have as many resource collection
you have as you want and you can have as
many you are a pattern as you want then
you have the rhythm then you have the
rules that are allowed to access that
particular set of resources and then you
have the data transport integrity or
data transport guarantee you have the
logging camp and security road something
that I haven't mentioned so far is that
ok you have the security role in in
containers a standard deployment
descriptor what happened how this rule
are getting mapped to what you have in
your identity storage you see for every
for every module in an application
enterprise application we have an ax
standard deployment descriptor and a
vendor specific deployment descriptor
the asunder deployment descriptors for
all of the containers for all of the
vendors are going to be the same so we
have web.xml in glassfish we have XML in
turn emo and the same goes for jboss but
for the vendor specific deployment
descriptor which ejb module has one web
has one application client container has
one and and and the whole enterprise
application has one is different between
different vendors because different
vendors have different set of
implementations underneath and they want
to do something their own way so the
role mapping to map a role that you
define in the web dot XML to something
that exists in your identity storage you
use the vendor specific deployment
descriptors to say okay if I am talking
about roll one this roll one actually
maps to group 1 group to user 1 and user
to in my identity a storage and and
murder there's something about this if
you have an enterprise application which
is which is a combination of couple of
modules you can do all of these role
mappings in one place and that window a
specific XML for the whole application
that can be overridden by modular
specific ones so you have something in
in that ear files vendor-specific
deployment descriptor you can overwrite
that in vendor specific for web module
or vendor specific for ejv module so
let's say give you the name you have
glassfish application
and you have you can specify the role
mapping in that file that is going to be
used for the whole application you can
overwrite what you have in that in
glassfish web dot XML if you need
something really specific for the web
module that's not going to be applied
for for the other things so that can be
overridden from from the bottom up not
bottom up from the ear you can override
what you have in the ear in the web or
in the jb or in the application client
that's that okay there are some some
methods in heb several requests that you
probably know and you can use for for
security purposes get remote user return
the authenticated user if there is one
and if it is non return some from null
value and you have easy user enroll
which is going to check whether the
current user has a nice Pacific role or
not that's going to check through there
through the security realm that PF can
be good and they're all mapping that we
have in the vendor specific descriptor
file you can get the principal for for
the user if the user is authenticated
and you need the principal to be used by
some other aps you get you can get the
principal you can get the authentication
type and you can do the programmatic
login and you can do the log out which
the logout is going to establish null as
the current authenticated user and you
can get this commotion that's much
important ok now that that you already
established the identity of your user
you know that a user that is connected
the user that is authenticated is really
user a you need to know whether this
user has access to resource be that he
has just requested or not that happens
through something called Adam access
control decision making or simply
authorization for java ee you can do you
can do the authorization using the basic
way just you can just put annotations on
different CD is CGI beams meaning that
several at jb's endpoints or anything or
you can just do it in the deployment
descriptor XML file or he can be both
way because whatever you do at
annotation level you can override at XML
level but what are these these
annotations
or xml description that you can use to
perform access check so you have you
have something called a declare rule
tickler rule actually says that yes
there is a rule named manager but it
doesn't say anything more about that you
can put up and there is a run as which
we are going to go deeper in the run as
you can use to to make all of the
outgoing calls from a component being
done under one specific rule and that's
the rule that you specify on us we have
several security you can put it on a
servlet and you can specify the HTTP
constraint for a servlet what methods
can can access that what methods cannot
cetera et cetera permit all you can put
it at class level and then and if you
permit all all roles to access that
particular class if it has class and it
can be overridden at the method level so
you can put permit all on the class and
then say this particular method is
restricted so permit all applies to
everything but the one that is has a
different allocation and other words
allow they specify what rules allowed to
access this particular component or this
particular method and then you have
denial which says that okay no one can
access this each one of these
annotations has any specific target kind
and target level the target kind is ejb
servlet or cell rate loan or for one of
them and the target level can be class
class or method or matata loan for the
denial one for all of this you can have
mapping xml descriptors so when when you
have done with your the development and
you want to establish the production the
description and mapping of the roles and
permissions you can go and do it in the
xml file rather than going back and do
it in lamentation removing the
annotation that you have with during
development time okay something to say
about Transport Security now that that
you have established the rule is
establish the identity you know how to
control who can access what if you know
that during transport someone may just
look at the wire and see what you are
transmitting and read that information
do whatever they want be done so we have
a Transport Security which you can
configure at your application level at
your application level you say okay do
this at confidential level or do this at
the integral level and then you go and
your application server level at
application server us specifies okay if
we are going to use the confidential you
should use this set of cipher suites for
my encryptions and the cipher suite
specify how a strong the encryption is
going to be is it going to be like 64
bits key or it's going to be a to k to k
bit key or or or something more than
that but if you know that using Morris
trends in the key is not always the best
because that's going to put some
processing overhead on your machine for
decrypting and encrypting and the other
thing that about the Transport Security
that you may like you may pay attention
to is that different countries got
different regulations about what kind of
encrypted data can leave their borders
or enter their border I don't know about
the current situation but eight nine
years ago 64 bit more lens was not
permitted to leave the United States
border so if you had a set of data
encrypted with 128-bit key then you
couldn't carry it abroad because that
was against the regulation so you may
you may like to check the regulations of
the countries that you are exporting and
importing the encrypted data before
applying the killings of 10k okay so is
that all that we can do or or learn more
at the beginning at the beginning I
mentioned that they're going to be three
parts here one is the Java security API
something that you get out of the box
you just fire up glassfish and you get
all of what i already mentioned out of
the box but sometimes give me something
more you need to extend something that
is already there or you need to add
something more to what you got out of
the box to do that Java provides like
extension point I think in in every
level in every service you can have your
own implementation of something and plug
that
the container and security is not an
exception we have two major concern for
security one is authentication the other
one is the access control and for both
of them you can have your own
implementation and plug that to the
container and there are standard
extension points I specified by diye
debt that you can implement those spi
and then plug that plug your
implementation into the application
server unexpected application server to
use your implementation in a sort of the
defaults to authenticate the user or to
make a decision about who can access
what and then so for this a throw to
major je sors JS r 196 and Jace are 115
is it's more likely that that we use jsr
196 on our own rather than 115 because
115 is a little like t care to implement
compared to 196 before i go to 2 196 and
explain this one I don't have a slide
for what I'm going to say but yeah we
have a jazz module that most of
application server supports something
called a jazz module you can implement
your jazz module which is mainly called
the login module and you can plug that
to the application server this login
module is going to act as a security
rhythm that I've already mentioned so
you can have your own security drill for
example if you have if your applications
that will provide you with the file
realm with the JDBC realm and ldap learn
but it doesn't have anything about
encrypted file realm you can go
implement a login module it has like
five methods and and have your
applications that were use your own
identity as storage so that's that for
for login module but but if you want
more flexibility if you want something
more at lower level which deal with more
raw data then you need to look at case
or 196 for authentication jsr 196
operates at message level so when a
message enters the application server
this is the days of 196 which by default
there are
implementation of this aspect in your
application server so if your
application server is operating it
actually has at least one provider plug
to the application server which is
taking care of inbound and outbound
message and I think performing that
different like set of operations on that
starting from encryption starting from
web service security and anything of
that sort so this is this is a J's or
which lets you implement your own module
that intercept the messages that are
inbound and outbound in your application
server and perform any kind of checking
and validating that you need on top of
those message what does it give us it
gives us the that the benefit of having
our own like custom security headers
included in the request and we will get
the chance to have our own module
plugged into applications that were
looking at the headers make a decision
about whether it is authenticated
whether it's not authenticated should it
go through or not and and and do that
all our own way rather than just going
the application server way the other
benefit of this like jsr is that you can
if you don't feel like developing at
your own you can go to the market and
see who is already developed some some
j's or 196 implementations for different
authentication mechanisms like you have
open source open I the implementation
that you can just plug the GlassFish and
start using that or you can get some
more advanced implementation for
biometric a scanning and stuff like that
out of the box from from the people that
are selling that and plug it to your
application server and use it so it is
not just for end-users to implement
something of your own but it's rather
for the third party component provider
to develop something and then provide it
to the people who cannot or do not want
to develop it but rather require the
functionality and want to buy that so I
said that it operates at message level
it just intercept the messages first at
client and at the server in client
before message leaves the client where
the server
in the server before message actually
reach the target service in the server
before message leave the server and go
to our the client and in the client
before message actually get consumed you
may ask ok why why do we need all of
this if our client is is that the
browser the browser doesn't know
anything about Java or anything about
these services then why do you need to
have it at client side the reason is
that the same jsr is being used to
secure the web services so at the web
services you have the client side
provided on the server side provider and
this provider intercept the outgoing and
incoming messages both at the client
site and the server side for example to
check for the signatures or to decrypt
something or to do anything of dazzle
person I I think we cannot I think it's
more likely to be a vendor specific
things whether vendor wanted you to have
access at the iop level messages or not
but mainly in the application server
that that I examine it just operate at
the web container level so the messages
that you can process are our soap
messages that you can process htp
several requests and this direct
response I don't think that the operator
iop but I can double-check that and then
send you an email of something ok so the
benefit I already mentioned the first
one you can get the cuts and then just
plug that and start using that you can
develop your own credential and use them
so instead of having the default
credentials which are the username and
password you can have your own and you
can benefit from all of the container
provided security you can have that the
subject proposition again you can have
you can use the access control as it is
in the container because you are just
plugging your own authentication and
you're not touching the authorization
the day error messages is unified of
course if your server provides some
auditing and logging then you will have
the benefit of auditing and lodging
because
because you are using it in a unified
manner so now we go to the to the spi
part actually what what you need to do
what you need to implement to have your
own authentication method plug to your
application server well when I say
application server i am not strictly
referring to full-blown java application
server you can do that tom cat because
tomcat implement several profile and
several profile support this so the
overall number of methods that unity
implements of five usually we do not
need to implement one of them and then
and the other three are really small so
actually you are going to be
implementing just one bulk meet him at
work so this method EU will implement
server authentication module interface
which of the first one that one had two
methods of its own and it has three more
methods which it inherits from its like
parent interface and the implementation
that you are doing can be plugged to any
application server so if you implement
it once and implemented wisely you can
plug it to glassfish jboss your enemy or
whatever application server we are going
to using in the future okay so I said
that there are two methods at add the
server authentication module interface
one of them is the initialize initialize
is called to initialize the particular
spi that you have for every
authentication so you need to wisely BB
if you see bb30 so the request policy
and response policy are sent down by the
runtime by the message runtime pure
module so your module know what are the
policies for for doing the
authentication we have the handler using
the handle that you can communicate some
principles back to the wrong time and
you have the options the option is
something that a map of stirring
stirring that for example when you are
configuring it at the applications
available you can specify some
parameters that can change the behavior
of your son module something is specific
for example it can be okay this is the
URL or this is the JDBC connection
a stream the database that you are going
to use for this particular case so you
can send the options that are not a
sundog non-us under for the interface
back to your module through this options
parameter which the map of string string
and then we have the supported mr. which
is an array of like all the classes that
that that we support their message type
in this particular module usually it is
like a sheep several requests and HUP
separate response on this we have io be
supporting this which we should have
like iop message or something like that
bitch which I don't know rap and then we
have a validate request validate request
is the main like bulk module bulk metal
that that you will need to implement and
this is where actually you can ascribe
your own credential and communicate the
credentials to the container and let the
container continue with the
authentication or you can perform the
whole authentication at this very date
request and then return a success and
container will know that okay the
authentication has already happened and
it will continue using the subject so so
you will have the option to do a on the
fly calculating or creating of the
subject here or you can just pick
something that is in that in the header
in the requested ER and use that to do
the authentication and if it succeed you
can return an authentication success or
if it is paid you can return on
ratification fail and be on your way the
next one is the secure response we we do
not do that much with the secure
response unless we have some trapping
unwrapping to take care of wrapping that
you have done at the request at validate
request and we want to unwrap it before
we send it back to the the client that
that is going to consume the message but
in the web services case in the web
services security case this method is
going to be bulky as well because if you
are going to have any kind of security
advert service level it's going to be
both for inbound and outbound messages
and so for a servlet fusion return okay
sense access and you're done then we
have the clean subject which is which is
the name already suggests that you can
remove any
any principle that you have attached the
subject to make sure that the subject is
unauthenticated and not usable anymore
and if it is if it is a multi multi step
like clean up you can put something in
the messaging for to make sure that the
next step is going to know what was the
previous one take care of that so can it
be seen or not okay this is how you can
register your new module at glassfish
let's say that you have implemented a
JSR 196 module and you want to integrate
it into your application server for
glassfish you simply put the put the jar
for in the modules directory you have
the provider ID which is john going to
talk about is it's what you are going to
refer your modules using that ID you
have the provider type which we have you
have the provider type which can be
client server or client server so you
will specify whether it is going to be
operating on both both sides or this is
going to be just operating for inbound
messages and then you have that you can
do it at sender level or at the content
level so I cannot read the title from
here so you can do it at the sender
level to authenticate the sender or you
can authenticate the content or you can
be for the content or after the content
and finally you have the map at the
bottom which you can communicate some
options to your some module to change
its behavior for this particular like
use case so you can send that ok this is
the JDBC URL that you are going to
connect you to take care of something
this is this is the y is that you should
connect to take care of something and so
on and so forth and ok now now that that
you have your your your module already
deployed you have two options you can
make that module default for the
application server this is for glass
which case I'm talking you can make that
module default for your application
server so any application that you
deploy at the application server is
going to use this particular module for
taking care of the authentication so or
you can make it no it is
of the default module but rather I'm
going to specify which applications are
going to be using this particular module
and that's when the provider ID is going
to be used to so for glassfish I think
at the pro at the at the window specific
deployment file we have a glassfish web
app at the top level and this class
which web app has an attribute name HTTP
servlet security provider in the HP
server security provider you say that
okay this application for this module is
going to be using this particular some
module that I have deployed so you put
the ID here and and that's all that you
need to do okay the next one that we are
going to talk about is Joe authorization
contract for containers this is less
likely that that that you do at an
implementation on your own because it's
more time consuming and resource
consuming compared to the the
authentication but anyway this is this
is another jsr that you can benefit from
if you have some really a specific use
cases for the security this the JS all
let you plug and new decision-making
into the application server so when the
application server required to make a
decision whether to permit this
invocation to go through or not it's
going to consult a container
authorization provider the default
container authorization provider for
glassfish uses policy files so when you
deploy your EJ the application or
verification or anything and it has some
annotations during the deployment these
annotations are going to be a scan by
the deployer and base under the
annotation it's going to create a policy
file the policy file follows that the
standard format of the policy files
which says that okay this permission is
this this particular role or this
particular a subject is permitted to
invoke this method on this class and
then and the permission file followed
and follow follows and Sandor like
notation so if you want to change that
you want to use something different than
then using that the simple policy file
you want to do it at database or you
want to do it the other way around you
go and implement your own
a authorization contract for the
container plug it to the application
server and expect it to be done so to
take care of this yeah youyou UK you can
add anything at the decision-making
level you can plug your role engine to
decision making so if you have a rule
engine already established and you want
to use the role in your rule engine to
make a decision about who can access
what then you can plug that to the
applications that were using using the
using Jace or 115 the point is using
this are 115 weblogic applications are
already like integrated back model into
the process so if you get weblogic and
and you are tired of using and normal
using the default decision-making you
can switch these akmal and use akmal
descriptions to take care of the
decision making so it is pretty flexible
and almost everything can be poured into
third or two there are two interfaces
that you need to implement to get your
custom decision-making pod into the
application server one is the policy
configuration factory this Factory is
going to say okay for this module you
should use this policy configuration so
you have like ejb module and web module
and for each one of those you have your
your you have a separate policy
configuration implementation this
Factory is the one that says that ok for
web module use this or Egypt module use
this one and so on and so forth if you
are if you want to do something that you
are not compelling with Java Sea policy
policy object policy class excuse me you
need to implement your own extension of
the policy and after doing that whatever
you are going to do in your own policy
implementation you can delegate the
normal policy decision making to the JDK
policy the policy and and your own can
be calculated in your implementation ok
ok to to plug this into the application
server actually the container the
application server is going to use just
one a decision making provider so you
cannot have it at application level at
least in glassfish mode you cannot have
that application level but
there you have it at the domain level
for domain a you can have this Jack
provider or that Jack provider you
cannot say okay i'm using this Jack
provider for application a and that one
per application be I think it is
possible in in weblogic of course you
can do any any kind of advanced
configuration at weblogic level but
that's that's not good the topic for
today so you can go under security and
Jack provider and select Jack provider
that that you want to you want to use
for this particular domain and restart
the domain and you're done with that ok
so far recovered some some something
about security and what whatow JS r 1 15
and 19 6 and everything of that sort two
on one day we had a session about owa SP
top 10 concerns does anyone know what
that what that is for was anyone ok this
is an organization who will look and
research on what are the top 10 security
concerns each year so for 4 last year it
says that ok ABC till I or the security
concern and for this year it says a
different list because people started
addressing the one that was for previous
year I picked some of the some of the
tips from that presentation that they
had the other day and put it here so if
if you're interested I can go through
them ok first of all which you have
heard a lot about is comparative data
like password you have already heard
that Oh lots of passport has been stolen
from company a or company b because they
have been kept in clear text or they
have been kept encrypted but the key was
not protected enough so that's why you
keep any kind of comparative data in
double salted hashed so you hash using a
salt and then you hash it again using a
salt so that's going to be like
unbreakable and the point in the
comparative data is that you never need
to know what's the data in clear text
because you are just going to compare
something that user or an
the machine is going to provide be
something that you have a store so you
know that you double hash this one and
you double hash that one and compare
them and if it matches good if it
doesn't match throw it away and say that
it's wrong very clear like example of
comparative data is password the other
one is the security questions answer if
if you are if you are not keeping a
security questions answered double hash
and you have a bridge then someone is
going to know that my security questions
answered is ABC and the security
question is what are your favorite
alphabet and they are going to use that
approach into my other accounts because
they know what is my security questions
answer so and the other one about the
encrypted data so if if you have your
data encrypted you really don't need to
keep a clear text of the encrypted data
somewhere because if that data is
important enough to be encrypted then
keeping a clear text of that that data
is going to violate the whole point of
these data is important and it should be
encrypted and the other one is the keys
if you are encrypting something using
whatever type of kimmy one you need to
keep that key really say if you don't
want to put that on a USB stick and put
the USB stick in your in your drawer the
other one is using the policy manager
using security manager and policy files
java runtime provides a really really
flexible like policy enforcement at the
vm level so at the first level you have
the vm itself for the vm you can specify
a policy file with a set of policies the
policies can say ok no one can invoke
system that exists or no one can invoke
system that exact because system that it
is going to crash and system that exact
is going to execute and a script that is
somber and is going to do something and
the level on top of that is the user
level so if you have a vm that is shared
between different users you can have a
user level policy file that is going to
apply more constraint on top of what is
applied globally and for glassfish you
can have a domain level policy part
which says that ok this particular
domain doesn't have any
that's required to open a socket on its
own so you go into that domains policy
file as specified that the jar files
that doesn't need to have access to
death to the network or doesn't need to
have access to the file system and say
okay these applications are limited they
are not going to access anything of that
sort by application I'm in the jaguars
and finally for glassfish you have that
something called egg granted dot policy
a granted that policy I mentioned a
little earlier it was about all the
policies that you have a specified in
your application using those annotations
or using XML descriptor they are going
to be translated into a standard policy
notation and those policy notations are
stored in a file name granted of policy
if you want to add something on top of
that for that particular application you
can just go and edit the policy file
yourself so four levels of enforcing
that the policy at jvm level is at your
disposal views the other subject which
of us like picked as one of the top 10
is the forward and redirect forwarding
is that forward and redirect by
themselves are not bad things there are
good things they go bad when when you
use user provided parameter to compute
what is the next resource that either
should be forwarded and you you trust
that all users are good you are not
going to try different values for
different parameters and see what will
happen but that's not the case some
users may not be that good as you
imagine and they will use different
values for different parameters you see
whether they can be forwarded to
something that they do not own so first
of all do not forward using user
provided values second if you are doing
that make sure that you triple check and
verify whether this provided value is
going to end up in a resource that is
use their own or not okay yeah paying
enough attention to roll mapping is
really important to have a fine-grained
role mapping you don't need to have with
a coarse grain if your web dot XML or
ejb dot XML ejv module example is going
to grow 50 kilos that that's fine it's
not going to impact your performance
just do it a spine
as you can choose the right security
rail of course this is some of them are
for Miss configuration concern at OS and
some of them from others watch for SQL
injection and that that's something that
despite oh what happened okay watch for
SQL injections because that that might
happen to the best of us and there are
some some libraries already developed
supported by OS and hosted at Google
code or whatever that you can just get
them and use them to make sure that SQL
injection is not going to happen you
sound like wine parameters and prepare
the statements rather than forming that
the whole SQLite statement on your own
the user may enter something as a
parameter that's going to do some damage
so don't be done understand what you are
storing in a session and how you are
doing that never ass or unencrypted
cookies with the important bits
transmitted cook it securely if if you
have a page which is not under arias and
it needs transmit the cookie make sure
that you have secure on the cookie so
the cookie transmitted securely while
the page is not secure okay one thing
that that you may pay attention to is is
to use if you have an operating system
that is going to host multiple services
for your application each one of those
services should really run in one
specific user and that a specific user
should be perfectly well limited in
accessing the file system that may
breach something on other services so in
addition to having that the vm level
security policies in force some
restriction you should have the
operating system level user to enforce
some more restriction especially at the
file system level is really important if
you are using any application server
make sure that you configure the
listeners properly most of the
application server start listening on 0
0 0 0 which means that all available
interfaces on your machine and if your
machine has multiple network interfaces
that listener is going to listen on both
land and
interface while you want it just to
listen on the land one the default
account is easy either concern yet
because people are still using the
default accounts meaning that they use
the default is the name of the default
password or they use the default
username with a separate passport but
both of them are not quite right you
should remove the default username
completely create your own user for the
administrator and use a complex post
password for that that is going to give
you the chance that's going to make it
harder for the people to guess okay
what's the admin username and then they
work on the password check OS top 10
talk and resources related to that so
any question I hope you have been doing
okay okay a four for the web container
it is not a filter really it's happening
at a lower level at message level so
when the message reaches the server it
get authenticated while the filter are
usually at the application level that
you deploy for for web services security
it's the same it's again at the message
level it's at the lowest level so it is
not your application that is going to
provide anything but rather it's a
container that's going to provide the
infrastructure that that the Interceptor
that are going to intercept that they
come oh okay okay yes yes yes yes yes
okay behind the scene for authorization
what is happening is it is using the
policy infrastructure of the day or e ad
that it is the case for glass fish that
I'm backyard i'm not talking about other
application server so for for policy
files we have the policy description and
the policy description says that this
method of this class is only allowed to
this particular principle and before
that invocation actually happens it is
going to consult with the with the
policy file and see that ok policy file
says don't do that and it's not going to
happen any policy file says that ok roll
a can access method be on Class C then
that's going to happen so it's it's it's
a policy file and the policy system of
the general reaction yes yes
yes yes yes exactly when when you are
implementing your own authorization
provider and you plug into the
application server you say that okay
whenever a decision is going to be made
go and consult this particular provider
rather than the default one because the
default one use the policy files while
my custom provider may go and consult a
rule engine or may go and consult
something that is a story in a database
and and it happens like this when the
when the application is deployed the
deployer is responsible actually that
that one is pluggable again the deployer
is responsible to take care of
extracting all of the information from
all of the components and putting them
on under on something that we call a
permission table and that permission
table is managed by the provider so the
default provider create the permission
table using the file while your provider
made you the permission table using a
database or or anything yes yes that's
the point the point is when you are when
you are deploying your application when
when you have the application server
deployed there are some some restriction
that you should put in place to make
sure that people are not going to simply
anyone who please opening a terminal to
your computer cannot curve and say oh
I'm going to edit the policy file and
give permission to all business methods
of all ejbs to everyone that doesn't
answer yeah
yes
ok
ok
yeah that's right out of the box no out
of the box it is not provided but but
the case is that it's really easy to
plug it and it's going to be really fun
because you know that an undertow fine
number of samples for that and I'm going
to upload my own sample to github like
in a couple of days as soon as I get
some free time to do that so you can
just take a look at that and do it
yourself it's going to be a fun ride and
it's not that hard it's not scary so
it's not out of the box provided but
it's easy to implement it through
configuration you have you can send as
many configuration parameter to the to
the login module but because the case
that we are talking about is a login
module yes you can send as many thing to
the login module as you want and and
your login module can have its own
persistent you need to create it using
the parameters that you provide so it
knows what to connect to and what are
the entities yeah sure okay out of the
box class which provides security realm
for ldap so you can just fire up
glassfish go to the server config go to
security go to realm and there you have
there you have you you you you can see
that there are several security reasons
available one of them is ldap real in
the elder prayer you can specify that
this is my ldap address this is the
filter for my organization this is the
query that I want to use to find the
users and then you have the option for
anonymous bind to make sure that whether
okay this user name password can bind or
not if it can bind then it's authentic a
table if it cannot bind them it is wrong
right because ldap doesn't have it in
clear text and you cannot compare
passports so you bind it and then you
say okay it's bindable so
it's good that's that's the ldap real
which are available out of the box I can
try to see if if I have a I can try and
see if i have the application server
money to show you so you go please fill
anything you go here and then i'll chop
chop okay i'm going to leave in a minute
okay you go here you go into the rhythms
and then you say new you create your own
realm of type l dufferin right for the
elder problem it gives you the option to
put any attribute that you have and and
and after putting the attribute you can
use this rail for your application you
can give the real name and then you will
use this name with the login config
element that that I showed a data
satisfied
thank you thank you for listening thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>