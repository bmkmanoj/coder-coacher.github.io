<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cover Your Web and Mobile Applications with Integration Tests from Scratch | Coder Coacher - Coaching Coders</title><meta content="Cover Your Web and Mobile Applications with Integration Tests from Scratch - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cover Your Web and Mobile Applications with Integration Tests from Scratch</b></h2><h5 class="post__date">2013-02-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZfWebSVMUE8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this talk is going to be about testing
on mobile devices you think both
browsers and mobile browsers to test
your application it's called cover your
web mobile applications with
integrations test for scratch so it
means that I will start with a simple
application I will go two steps what
needs to be done in order to make it
mega application testable my name is
Kara Pisco I work for red hat for jboss
doing QED focusing on the framework kit
effort doing our clan and are clam
drones our clan Android development in
my free time so what was the story about
today basically you have an application
and you want to be sure that if you make
a single chance change to the
application itself it's still though it
still works which is kind of difficult
because you know these bugs are hiding
everywhere and you need a good tool set
in order to discover them and destroy
them so that's behind the story however
we in our clan team don't want you to
learn a lot of new frameworks right you
are already a common with some of them
you use them you're on your everyday
effort so what we'd like to promote is
to provide you an integration layers
between various framework you are
already using so who's actually starting
in the story so the one of the most
popular testing framework each other I
guess j unit how many of you don't know
j unit pretty size up who doesn't know j
unit oh great so everybody knows j unit
I don't to explain it much it's
basically testing framework it will be
playing in this story on the other hand
you can use test Angie as well we have
support for it if you want it go for it
the other thing here is maven a lot of
java application these days are using
maven to as they are built to so if you
are already familiar with my event
is no reason why to stop using it and
you simply enhance the your metal belt
with specific dependencies so one of the
core technologies we should be shown at
this in this demo is selenium do how
many of you don't know solanum okay so
to give you an overview selenium is
basically a framework to control your
browser remotely it means that it is
able to open a browser and it is able to
navigate through the page using
different locators like IDs CSS jquery
expert whatever it means that you
basically create a script in a saturated
it will click to your web page it will
for instance filiform and it will send a
send it to the server and you will
validate the output so this is something
you can do with selenium and selenium of
course supports a lot of browsers out
there so it's not limited to testing
browsers on desktops like firefox or
internet explorer it works for iOS or
Android as well obviously there are more
more browsers which are not in this
slide like HTML unit which is very
useful for headless testing it supports
opera as well so chrome drive chromium
as well so a lot of supported writers
browsers here so the first character
from the story which is really from the
arc lamp stack is the flying saucer in
the middle of the screen we call this
stuff our clan drone and you can
basically think of it like of a
spaceship which basically brings your
test to the browser it is our integrate
integration layer between j unit
arquillian and on the one side and
browser itself on the other side so it
means that you don't have to specify
where your browser is running where how
how do you want to start it where's the
bay by now
ray prepared prepare it will basically
prepare everything like that for you the
other character from our clan team is
Ike it's actually our clan itself do you
guys know our clan from the previous
talk here on the on this session our
clan is a testing framework basically it
allows you to get rid of mocking you can
test on real environment it has a very
very large ecosystem at this moment we
support a lot of additional frameworks
like drone being one of them but we have
an extensions for instance testing
persistence layers easily you can you
can test some kind of frame works out of
the box like spring and so on so what
our client does it provides you an
extension over j unit in order to make
your test simpler and much more powerful
basically it makes able to write
integration tests in such way that they
look like unit tests and in the story we
have a few special guests so these
special guests are showing bread and
tests archive shrink breath is a
framework or tool coming from our clan
family basically it's a way how to
create a java web or enterprise or
whatever kind of archive directly in
memory so you don't have to dump it on
the disk before you need to deploy it it
provides you a fluent api in order to
build your application and i will show
you during the presentation how you
actually use it to prepare a web
application to be deployed and test on
the android device so that was a short
overview of characters playing in the
story this is outline of today's
presentation I'll start with a step
which is not really exactly related to
testing on mobiles however is quite
important to get your maven application
in a good shape before you start testing
the code because it will
simplify the usage of it and future
changes so that's the first step I'll be
I'll be talking about the next step I'll
be talking about will be about using car
Cleon so I will show you how to actually
include our clan in your maven based
project then I'll show you how to
package the application using shrink
wrap how to actually use a drone file
drone browsers like selenium and the
next step will be about moving your
application deployment in cloud so you
you will be able to test on a real
mobile devices without trying to figure
out how to configure network connection
between your test and mobile device so
to illustrate a bit of maven this is how
my than usually looks like this is a
dependency tree or dependency graph of
one of the project our clan is actually
not really that much different and the
problem is that if you need to specify a
dependency in your pom file it often
gets too much complicated and that's
basically the feeling you get when
working minus a lot of time so you
basically want to avoid it so how can
you avoid having this feeling when
working with maven well the first week
is about to use a property management it
means that you don't specify versions on
directly next to the dependence you are
using to below project but you basically
extract them to a specific section of a
maven pom file and you keep them on a
single place there's another way how to
reduce a number of versions that is you
find a bomb firebomb file is basically a
bill of materials which means a file
which contains a stack of dependencies
combined together so somebody else
already tested the versions together and
you don't have to include the
dependencies in the bone file you
include the bone file only and it will
manage the versions for you so that will
make your dependency management in maven
much simpler well one a significant note
if you are including bone files in your
project the order actually matters the
first comes first wins so did it has
some implications to to be a viral so
this is actually how the dependency
management in bone file works in your
dependency management section you
include a dependency with scope import
you reference version from the version
of properties section you specified
before and this will this will manage
diversions for you for free that's not
only the dollar step you can do in order
to reduce some event dependencies you
can use something which is called a
dependency chain which basically works
in order to reduce the dependencies
which are actually used in your project
so it means that instead of specifying a
list of single dependencies you specify
an entry point of the three and maven
will basically import whole tree inside
of your project dependency chains are
very useful however a difficult part is
to figure out if there is such
dependency chain so you can use
something which is managed externally
for you if not you can create your own
yeah this is how you actually use the
dependency chain so it's very similar to
using the bone file instead of its not
in dependency management section it's
directly in dependencies and the other
point here is so that the dependency
management in mentioned in bone file
works very well with dependency chains
that basically means that by including
dependency chain which is in this case
food up chain which is having a
transitive dependency on two artifacts
hue and foobie you basically get this
version managed from fubon file included
in this section so it might see
complicated let's jump to the to the
example I don't know how many of you had
chance to see my Twitter message
basically I've published a demo
application for today made it online so
what we will actually do is I'll go to
the application itself it's on github if
you want you can grab it directly from
this URL that's actually exactly the
thing i'm going to do at this moment so
let's create some directory for instance
demo and let's let's clone the
application in there
so in order to make everything easier
for you you can have a look that there's
there's a list of chromate sorry there's
a list of comments you can go to each
comment as a step that's actually what
I'd be doing in the presentation so
let's remind the git repository and
let's start with the initial application
so i will import the application into
eclipse with jboss tools so let's
imported it's a maven project so it's
quite simple to get it imported here it
is here it is so let's get let's have a
quick view how my application looked
originally so they said this is a
profile of my application and you can
have a look that every single dependency
has actually its version specified right
here this is nothing you like so I will
move the application a bit forward to
let you see what I'm actually doing so
as a next step I've moved the version
properties into a single section so now
here I'm able to reference them that's
helped that helps but it's not exactly
the final state I want it to be so as an
S next step as you can see I've reduced
the number of versions I have to care
about by introducing dependency
management bomb by the way that's who
that that's something what we are doing
here in jboss is so to make disabled for
you so this is something which we call a
JBoss developer frame
boom you have a little lifts a list of
the other bone flowers specified right
there so as you can see my pom file is
actually getting simpler I managed to
find out a different bone file which
i'll be using which is an hibernate bone
file so now i have only two versions i
have to care about all the dependencies
get their version management managed for
free so i simplify the maven application
a lot so what's actually the next step
in order to get your application
enriched with our clan based test this
is use the very same concept in order to
include the merculian dependencies so
surprisingly the very first step I'll be
doing in preparing my application to be
testable is I will create a specific
maven profile which doesn't test
anything at all which is really funny
because this it's about testing and now
I am saying that by default I don't want
to test anything it's because you are
you are creating an integration test
sometimes it might happen that you want
to build your application on an
environment which for instance doesn't
have access to browsers you don't have
access to android emulator and so on so
it's quite a good convenience to have a
profile like that and you use it so
let's start including our clan in the
very same way as I did for the
simplification on the bone file I figure
out the version of our carry-on I want
to use in this case is 102 final I
include a dependency bomb which
basically manage the our clan version
like all the components of our clan for
me and that's only thing I have too much
to my pom file well actually not not the
only thing next I have to select
what kind of testing framework I would
like to use so i'll be using j unit
abusing bindings for container and j
unit our clan allows you to test without
using actual container but if you want
to test the web application it makes
perfect sense to use container so that's
actually a list of dependencies you can
go to the demo and see the see them on
your own the other step is including the
flyer saucer inside of your application
so again the very same way aside it for
our client and the other bone files i'm
including d version into version
management i'm including the bomb file
into dependency management it gate gets
my maven poem file in much simpler shape
so let's let's move the application a
bit so let me follow the comet so I've
changed the pawn file let me update the
maven configuration hopefully we will
get rid of the box there are some
JavaScript Allah later running in there
okay should should not really matter so
this is this is my pawn file as you can
see at this moment I'm having for bone
files in here and I think looted not
didn't include it much this moment so
I've included it only actual dependency
which is about using drawing which is
right here so this way I'm able to test
my application so how actually draw a
box works basically it's abiding for a
selenium you have two versions of
selenium the first one is default
selenium which basically
works as a proxy between a detest and
the browser itself it's used javascript
in order to control the browser the
selenium to which is called webdriver as
well it's basically a newer version
which works like an extension included
inside of the browser itself so it
provides you much better control the as
well as it provides you a better API so
it's type-safe api for both versions we
do provide something which is called our
clan graphene which is an extension
project which allows you to work with
Ajax and so on it's much more convenient
way so we give you possibility to move
your or selenium protest if you have na
to the arc lamp framework if you want to
develop new tests just jump into the
driver and start with graphene or
playing old webdriver so this is this is
how I included is basically still the
same still dependency chain and let's
let's prepare the application for some
real testing so what I'm doing here I'm
preparing another profile which will be
used for test this is not the default
profile where the tests are skip so if
you want to test your application on a
container you need to have a place where
to deploy it our client supports plenty
of containers you can consider even for
instance well stand alone as a container
you have support for most common
application server and web servers out
there so this is this are for most
popular i guess application server out
there this moment there's a concept of
two different type of containers so in
our clan one is called managed which
basically means that our clan takes care
of the whole lifecycle of your test it
means that it will start the application
server for you it will deploy the
testing archive it will run the tests
and then it will do a teardown it will
do
I think like that for free without you
to manage this on your own so that's why
it's called manage the other way how the
other mode our clan is using for
containers it's called remote II it
differs because the container is already
running and our clan is connecting to a
remote container so thus any of you want
to answer the question well what's the
advantage of remotely container and on
the other end was the advantage of
managed container and these two are
compared to that together yeah exactly
there's a good point if you are using
remote II that's for basically debugging
and developing your application because
you don't have to start container every
time you want to test it on the other
hand if you are running on a CI
environment it is much more convenient
to use managed container because you
don't want some external process to
start application server for you so oh
yeah yeah basically it depends on your
configuration by default our clan is
starting the container in such
configuration as you configured it so it
mean so that you specify port or it use
a default port so if you are you using
strategy one container per node there's
no conflict obviously but our clamp can
start multiple containers and it depends
on the container itself how it managed
the port configuration so for instance
for a s7 we provide a single single
property which is able to do off sport
offset so you configure your second
instance to be on a different upset and
here we go there's no conflict between
two containers are Quran itself doesn't
care I mean
it's not a tool to manage I mean to
assign a random words to our container
so on it basically depends this power
depends on you yeah yeah if you are
using this on a single machine then yes
yeah um well it will figure out that
there's another container running or the
same board and it will refuse to start
up and the test will fail so you will
notice at that very soon it won't
conflict with already running tests but
it will make your currently running
tests fail so again I'm creative profile
for the container and okay you've seen
the image I'm I I said that the usage of
our clan should be much simpler we are
getting to the point that it might
happen that you need to configure our
clan as well so the question is if you
really need to the answer is in most
cases you don't you don't you don't
actually need to there are some sensible
defaults and we just point it out if you
are using a single machine with
different test runners there might be an
extra configuration the good point is
that all the configuration is done in a
single XML file with an x SD so it's
quite simple to change it on a single
place and if you need to override
something in the CI environment you can
do so simply by using the system
property oh how does it work with ID yes
it works basically the only thing you
have to do is to use a best practice
that is to configure your maven in such
way that it will filter the resources
for you before the idc's them this is
something you can do in every every idea
I'm aware of
so this is how our client configuration
looks like this is I'm using drone in
this very example you can see there's
there's an XML file this is this is
basically a browser properties
capability this is a place where i'm
selecting which bar browser i'll be
using and in the maven configuration of
another property which is called firefox
once i include the project into a ee the
browser capabilities property in a
configuration flow from the driver's
element will be replaced by the actual
value specified in the profile which is
Firefox and ID will know that it should
run against our folks again if you if I
want to include support for a different
browser it's not it's not really a
rocket science I only add a new maven
profile and I override the browser
capabilities property so once I select
this particular profile I'll get chrome
instead of firefox and the point is that
you can select these profiles in a
matrix on your CI environmental on your
developer machine you can developing
machine you can execute only a single
combination on your CI you can execute
all the combinations all together so
this is basically the place where we are
leaving mavin we will be moving rather
into Java code so what's actually
testing our cotton or in a point of view
of our clan is basically the set of
dependencies or the part of piece of
application you need in order to execute
the test itself so say that you are
testing some ejb implementation you
include only these classes which are
implemented at ejb and to test it inside
of a container if you are testing the
web application you basically want to
package whole application so
you can so you can deploy it on your
application server and it gets all the
resources like html5 JavaScript images
and so on so this is the API shrink rubs
provide provides for you as you can see
that's an attendant a little net auto
factory method which is called Shane web
create I've created a web archive I'm
adding various classes here like
basically my model don't mention a
services and so on i'm also including
resources like persistence configuration
and as I said JavaScript images bye-bye
dear last call where I'm doing that
recursively to make it easier it depends
what kind of application are you
actually building if you are working
with java ee 6 you basically do not have
to have a lot of dependencies not
provided or by the application server no
class part however you might be using
some external jars you need to package
in your application and now the question
is if you have looked at this call how
how you want to include this jar file
inside of this web archive the idea is
not to repeat yourself so you already
specified all these dependencies inside
of your palm file and what we yeah that
does the example like you have a
dependency on common slang file so you
already specified this and you don't
want to repeat yourself in the test
itself because once you change your
application the test will fail because
it contains something bit different so
there's another two tool to do that
which is coaching web maven resolver
which you include in your project using
the very same means and you will get the
dependencies of
from your bone file so you basically
select the bone file you say hey I want
a single single group ID artifact ID and
I want this as a file and on the last
line you include this as dependencies
that was almost that except that here I
I was so I had to include group ID and
artifact ID here's the way how actually
include all the dependencies which
should be included on the class part of
the application so you import all the
fine dependencies and you don't have to
care anymore about changes in your bone
file so let's move to something more
interesting and that would be about
using our client row so i will provide
the application a bit
so
well i refresh the project
so my project now contains only
modification I've explained and let's
move to a new case of drone usage so
this is this is how drone works
internally basically our test is running
on a dedicated JVM it communicates with
the browser which is separate process as
well and there is your test application
deployed on a test test container which
is a third process so there is kind of a
lot of communications involved and you
can obviously let the browser run on a
remotely machine as well as the
container itself so it's not really
required for lease for these three
processes to be running on a single
machine we will have an example of that
later in the demo okay finally we many
we managed to see some test code so this
is basically a unit test you can see it
has a special runner which is called our
clan it has a method which is picked up
automatically by our clan which has an
deployment annotation and it basically
contains devour application built
according to the previous slides so if
you run this J unit test either from the
CLI from or from IDE it will it will
deploy the application on the server you
configure depending on when your where
your server is actually running you will
get an a context part returned by
another annotation so if you change your
server and it's running on a different
port it's running on a different machine
you don't have to change your test at
all Archelon basically inject this kind
of information directly into your test
okay you want to use selenium
you inject this as well drawn will take
care of the setup starting the browser
stopping the browsers so let's let's run
the test so this is it this is a
drone-based test is doing everything I
just explained its injecting webdriver
instance then it's injecting an URL its
packaging the application and the test
itself actually goes to the page and it
clicks on few elements and fill some
information in there so let me show you
the application itself so I'll start the
application server
so i'll be using remote e mode in this
example I will bind it to an a specific
address so here is my application server
we're running and I will deploy the
application to deserve to the running
instance using the maven comment as you
can see here as I specify the default
profile it won't test anything so I got
deployment really quickly there and you
release the context part of my
application Oh HTML 6 doesn't even exist
I guess so what was the actual URL html5
demo app so we other way around so this
is my testing application for this
presentation it contains a single forum
where you can register a new member and
so it has few modifications in order to
look different i mean to adapt to a
mobile phones so let's register a new
member you can see that you can add a
new member here and we'll do the same in
your in our test so this is the test
itself I will include a breakpoint right
after the first element and I will
select the maven profiles according to
what I've did during the previous slide
so i'll be using a remotely container
here and i'll be using for instance
chromium driver and directly from ide i
will debug the test itself it might take
some some time for the first time before
the idea it's
of builds the project so let's wait a
moment what's actually going to happen
on the background is that our clan or
shrink wrap will package the application
to to a memory then it will use a a
protocol to deploy it to the existing
running a s7 instance on my machine it
will return back the address where the
application is actually deployed then
drone will start a chromium browser it
and my test will pass the other words
and that's it for some reason is not
working all right so I have some
JavaScript validation errors in there so
this is this is a browser this browser
was spawned by drone and you can see
that if I let the window be always on
top in this example here's the
breakpoint in the IDE so so far I felt
only the first element and I can easily
debug my test so here it is I specified
email and I can go on add a phone number
I can click on a register button here it
is so my tests actually passed my
application is working fine on a real
environment so that's quite nice but
what if i want you test in different
browsers different browser basically the
only thing i need to do here is I select
a different profile you know maven
rebuilt my application meanwhile I'll
try to figure out where's that
validation builder and I will disable it
so I should get a clean build this time
yeah TV days so now I can debug the very
same test and it will be using different
browsers different browser yeah this
time it was much quicker as you see the
work around this quite nice so now I'm
not having chromium I having Firefox and
the very same way I can debug my test so
this is nice this allows you to run your
tests inside of the IDE on your desktop
but it actually doesn't help you much if
you want to test on mobiles so how
actually drawn works internally drone
has to determine what browser you want
to test basically it will use some ever
sticks to figure out what you actually
want to want to inject so based on a
webdriver type based on the
configuration you can use qualify as
well and the point here is that you keep
a change on a single place however we
want to give you flexibility to for
instance run both selenium oh sorry both
firefox and chromium in a single test so
you can have multiple drones how this
actually works here's a very quick quiz
so you can you can assign the values
from the left to the right drone
annotation determines an injection point
and the field type determines the type
of the browser it's pretty easy if in
case you are using something completely
different to write an extension for
drone and it will inject your whatever
driver as well so if you are using
something completely different and
selenium you can inject it quite easily
and profit from the rest of our clan
infrastructure so this is how it works
by default is using HD htmlunit the old
version which is called default selenium
which is Solana move on
is using Firefox and obviously if you
want an android driver you will get
Android driver right I was speaking
about having multiple browsers in a
single test suite or test case for that
reason we provide something which is so
inspired by CDI work which is called
qualifiers of by qualifiers you can
include instant instance of a very same
type which has a different configuration
so here I have a the driver default
driver which will basically inject an
HTML driver the other drone of webdriver
annotated with at five Fox 14 will use
my configuration element from our
clinics ml and it will actually inject
Firefox 14 in my desk so this is a way
how you can easily combine multiple
browsers of the same field type into a
single test so we are moving slower
slowly towards the possibility of
testing on mobile devices like like this
one however there is one one trick you
have to be aware if you are testing on a
mobile device the problem usually is
that the mobile device and the machine
where that I start running are two
simple completely separate device and
you do not have a connection between
them I mean if you if you manage to
connect them into into same network they
might they might see each other right
but it's not usually the case so you
have a possibility to deploy or test on
cloud instance which means that you will
get a public API for free and then your
mobile can connect to the public ap a
public URL and your test will get
executed so
in order to do so we will up basically
in the next step at at new container
which will be open shift how many of you
do now open shift okay so that would be
nice open shift basically it's a
platform as a service provided for free
from a redhead it allows you to run not
only java based applications but you can
run a PHP perl python there as well a
ruby and rails of course and we will i
will show you that this container has
sexually support for our client out of
the box so it will be pretty easy to
deploy the application right there
instead of the local running container
so what was the trick about our clan and
cloud containers basically the cloud
itself does not really differ from the
container because it can start it can I
mean the application deployed there can
be started or the container running
there can be started can be stopped the
cloud allows you to deploy application
it allows you to get the information
about your diploma back to you and as a
platform as a service you can use it as
our clan container as well so that's
actually what we did with our clan
openshift container we provide a very
lightweight Java binding on top of the
open shift so let me show you how
openshift looks like
so this is an open shift instance
running on openshift com I will connect
to my account
and I will create a completely new
application or maybe i will remove the
currently existing application and
create a new space for testing so this
is basically a management console you
get from there I'll be removing the old
application because the rest of my test
is configured to work with this
particular namespace so it will be
easier but i will show you how to make
it run with any kind of application
namespace so what you want to do here is
an open shift you want to create an
application you have a selection of
various framework right here so as I set
apart from a s7 or PHP or Python and so
on we also provide a support for
enterprise application platform from Jay
balls and so you can obviously create a
create your own a cartridge so it means
that whatever is deployed here is
controlled by you so I will create a new
is 71 cartridge I will call my
application a test step and this is
basically the public URL I'm going to
get so let's create an application it
will will take few seconds oh maybe a
few seconds already over so bit more
than few seconds would you actually get
from openshift you will get a git
repository and whatever you push into
git repository would will be
automatically deployed so if you want
you can have a look on this URL you will
see there is already something running
in there it's basically a template from
my application of it's a template of a
s7 cartridge and it is a space where I
will deploy much a stink application how
I will do that oh here's a
get a repository a location so i will
basically reuse the information from
this this this web page in order to
connect to open shift container so let
me again rewind the application a bit
so I'll refresh the built-up dating
currently existing maven configuration
and so here I can select another maven
profile so instead of a remotely
container Arbor I will select open shift
container and in our clinics ml
configuration I will basically include
information about the cartridge inside
of the xml file so admit copy paste the
the ssh name the rest actually remains
the same so it will use and ssh ID
stored in my disk in order to connect to
a git repository out there the
application packaged by the deployment
method will be deployed right there and
the you are the contacts URL will be
returned back to to my test and the
grout was what's wrong here
so just give me a few seconds it seems
that I managed not to include all the
comments inside of the demo application
so i will rather reload the backup
version which is still right there on my
desk
so
let me select the maven profiles again
which will be open shift and the driver
for instance and let me debug the test
once again using ID so the bucket as a
unit test you can see in the control
output it is deploying my application to
open shift instant depending on the
internet connection and it will likely
take some time I am I didn't that's
correct thanks a lot but actually online
and we'll be done
so
because it does little fail yeah felt it
was the credential they are not right so
let's we executed test so not now
hopefully I have correct credentials and
in order to connect to my cartridge so
let's let's get it give it a few moment
meanwhile i can show you how it actually
works again i create a new maven profile
where I include the dependency on our
clan openshift container and that's the
actual configuration so the information
on the page is split into things like
namespace the application name and the
ssh username if you happen to use as a
such sorry ssh ID with the best price
you can include it directly on your
configuration or you can load it from
from the environment variable and
obviously there's still log into the
open chief instance itself so it's yeah
here it is so this is this is my
application and this time it is deployed
on a public public cloud instance this
is a URL it's quite difficult if you
want to connect the URL it will be quite
difficult because the context part is
randomly generated you can obviously
specify a name in your deployment method
and have a static location here so again
it doesn't really matter that my test is
running co only different jbm and
differently multi machine i can
basically step over and to fill in the
application fields right here
so again it's communicating with a
completely different machine at this
time so this is the kind of product
visit you have to do in order to test
test on mobile devices the final step
and most important I guess the one you
have come I came from for it so using
mobile droning mobiles so basically
selenium and drone supports mobiles the
only thing you have to do if you think
about it is to select an Android browser
however the problem is how do you get an
environment for using Android from and
that's actually something where drone
helps you it basically allows you to
configure in our clan external
configuration apart to the Android SDK
you get the possibility to configure the
serial ID in case you are using a real
device and you can run using emulators
the next thing you have to do obviously
create a new profile using the very same
concept for android driver as for the
other drivers you will include a
dependency to the dep chain itself and
the extensions will rather connect to a
real device or it will connect to
existing and running Android virtual
device or it will start an emulator with
the virtual device or if you happen to
specify an a VD name of a device which
doesn't exist yet it will create even
the device itself a nice trick is to use
a snapshot devices I don't know how
where you are for Android SDK but
Android the Android virtual device
allows you to store
a memory onto the disk so it means that
it starts much faster on us each
subsequent usage still you have like two
processes your test running your j j
unit runner and you have the android
emulator window running somewhere and
you need to these two to be aware of
themselves so the first thing you can
think of the is like you set and
remotely address so you will be using
selenium in a remote emote you will say
hey I want to connect to a remote
emachine that this is where my browser
is running yes this is exactly the thing
you are going to do however who will
start the browser on your vertical
device right well drone will do that for
you there's an extension it's called
archaea Android the only extension so
with an extensions on top of another
extension this basically is able to
install an APK which contains the
support for running selenium on Android
devices directly into your emulator or
real device it will also bootstrap
things like port forwarding so once you
include this particular extension into
your configuration and class pot it will
prepare the machine machine for your
test so what I will do right here is I
will run on emulator first so let me
select another maven profile which is by
sorry
so far which is the Android profile and
i'll be using remote ii instance because
i'll be using emulator at this time my
real device which is somewhere here it's
not yet connected so let's select
remotely dana profile and let's execute
the test again in a debug mode so it
will fetch some dependencies which were
included like that Android extension and
you can see that the test actually
executed the Android device emulator and
let me check if I'm whole I'm able to
show you both things at the same time
meanwhile the test is actually
installing it is running the driver of
support on the device it's it's getting
started the application was deployed and
a separate thread in the and the
application server running in a remote
emote on my machine I specified an IP
address when I run the machine so do s2
emulator and the application server are
running on a single machine they happen
to figure out each other so this doesn't
really differ from the test testing
corner desktop right you have an
emulator you can see that the page is a
bit more different than it used to be on
a desk the browser that's why you want
to test your application and again i can
go step by step and here are the test
itself will fill in the name and as well
as i can continue right now to include
email and phone etc so
again the very same way how I was using
the desktop i'm using mobiles so this is
quite nice it means that you don't have
to get out of ide in order to run the
android test in an emulator the other
thing is that the configuration itself
it's stored and it's in an our clan
excel file so that's something you can
easily transfer to your continuous
integration server so what i can do now
is that i'll be connecting this android
4 4.1 device and i actually don't have
to change much in my configuration
because i've specified the device ID
already in the test and if such device
exists it will be preferred so then lad
emulator won't be used however what I
need to do I need to switch the
application to run on openshift so these
two guys will find each other so let me
select an open shift profile here and i
will i will like a spawn and some camera
grabbing tool so you can see actually
anything because this is not like well
it's not a big screen enough so again
i'll be using my i'm using my test in a
debugging mode
run camera grubber so oh that's me okay
you can see so far there is nothing
really interesting on the device however
in the meanwhile the application is
deployed on the open shift instant now
if i unlock the screen you will see that
the webdriver is started but sorry the
very same way as it was on the emulator
itself again this will this will take
some time so maybe that's a good time to
answer any of your questions so far ah
in order to get the application
installed on the on the mobile phone
yeah yeah the application gets deployed
to the cloud the mobile will be using an
internet connection to reach that cloud
however the support for selenium will be
installed using USB connection on the
device itself so the screen now turn
white and you can see that the
application I hope you can see it that's
the application page running cuando real
device so I'll try to go to the debug
debug next debug point and you should
see that it will fail yet it was a
keyboard and actually the name of a new
member was filled in so again I can
continue doing the same for the
for the rest of the test case so once
the test is finished the application
will get on deployed and I will get a
green bar directly in the Indy ID what I
will do right now is that I will connect
and another Android device which is an
older Android it is two three four if i
recall correctly and so in my article an
xml file i will basically modify the
device ID so instead of using Galaxy
Nexus i'll be i'll be using motorola
defy+
yep
it's okay because I'm using an older
version I have to use an older version
of the application itself this is
something we are we want to simplify for
you so the drone Android extension will
basically a fetch the ipk application
for you because so it is too complicated
to manage these little differences by
yours yourself and that's no point to
doing doing it so many times so let me
execute the test on a different device
i'll be using open shift as well this
case and i will around the test in debug
mode
so we go to the log output it is right
now it is installing the APK support for
web driver on this particular device and
it will likely be started in a min in
few seconds doesn't happen so far
so y'all writing takes quite a long time
for some reason i did not sacrificed
anything to demo gods which was likely a
very huge mistake okay doesn't seem to
work at this moment I guess the there's
still previous debug bridge instance
running on the background which is
preventing me to connect to this device
so what I'm going to show you instead is
that you can basically reuse the very
same configuration on Jenkins
so jenkins instance is being started
meanwhile I'll start in their tool
device so start their toll device
machine here it will act as an executor
for my continuous integration server so
now we are actually waiting for two guys
to finish their work ok let me terminate
the test
sweet and yeah there was no okay it's
already terminated so let's for a moment
until Jenkins get started for some
reason it should be started at this
moment we're ready the idea here is that
I will have a matrix based project which
will be using maven profiles I've
defined in order to execute one boat on
desktop and mobile devices and however
until Jenkins get started there is no
much I can show you fortunately so
let me try to reconnect the device again
and hopefully we'll do something this
time so I'm connecting the alt Android
device and and debugging the test right
here
so let's go let's go back to the test
itself as I was forced to rewind the
application to the last step you can see
a few modifications I have done here
I've modified it as to avoid clicking on
the element I creative method which
basically encapsulate all the
information from selenium right here so
instead of trying to figure out what are
the particle elements on the test only
in the Indy test application I basically
encapsulate everything into a single
unit I can reuse in the other tests so
this is very a very good pattern here
and you can see here that my test
includes an if element which basically
tries to figure out if the test itself
is running on Android device and if so
it use a bit different workflow or test
flow and the example I I would like you
to show you is using the old device
because with the old device it should
fail and you will see that the test for
determining code switching from a
desktop environment to the mobile
environment it's actually broken so the
moderniser framework i'm using it's not
used correctly in this case the Jamiat
runner actually felt so I can't show you
that this moment and for some reason I
can't actually show you Jenkins as well
yes we have a lot of time left so i will
restart the Jenkins
in maybe it'll connect this time so this
is the conclusion of the presentation
which basically says what we've done
unfortunately some of the stuff I wanted
to show you is not working so far at
this moment so it's up to you to decide
if nothing really prevents you to run
your tests and continues into in
continuous integration environment as
you can see on this demo the continuous
integration environment itself prevents
me to do so so this is basically
something I haven't counted with the
idea the main idea here is that you can
encapsulate all the things you need to
specify into a maven profiles so then
you can select this maven profiles
either in your IDE or on a command-line
environment this makes you able to use
the same configuration in the IDE and
continuous integration server or as a
first advantage the other advantage is
actually that you can use an integration
server running in a matrix job mode to
run all the frame or all the profiles
separately so on continuous integration
machine you will get full test coverage
let's give Jenkins a trial we wait
Eunice okay awesome so this is basically
the configuration of my verification job
as you can see here it doesn't really do
much so it basically gets a repository
from the of a demo application it
selects a branch and here here it is so
the most important part
basically I have browser prophylaxis
here where I specify two values so I'd
selected the Firefox and Android driver
and as you can see the test execution
there is no such thing like running and
Android and Android jenkins plugin you
basically the only thing we have to do
is execute maven and obviously my
configure configuration on the machine
I'm using to show you the presentation
and you know start it in a kvm the first
a bit so here I will make it bigger here
I'm actually using a possibility to
override configuration of our clinics ml
using a few using a few system
properties so basically I'm just
overriding apart to Android SDK this is
something you can do on your
configuration your continuous
integration server once for all notes so
you don't have to mess with it in every
test you can also expose an android
android home proposed system environment
proper system environment variable on
Oreo Oreo notes by Jenkins and then then
you won't have to specify anything at
all and it anything like that at all I'm
rolling it out if I should try to
execute this as nothing is working
correctly this moment so this is this is
basically console output is likely the
same as it doesn't really make much
sense to go to it rather let me show you
the test results you can see here that
the test was executed this is actually
for the webdriver so it was executed on
Firefox and here is an Android device
and the very same test was executed on
Android here it makes more sense to
check alok and we can
search phone and android and you can see
analog output that the our clan actually
started and android sdk it was searching
for the serial ID but no such device was
connected because it's connected to the
other machine right here and so it used
emulator in order to execute a test I I
will give it a try so let me exactly the
test here I'm using because I have a
single executor on my machine I'm using
a sick fence mode so it will run the
android test first and then when
finished it will return back to the
desktop testing so you can see here on
an output that actually the managed
container which i'm using at this case
will start it now it is waiting for the
emulator to be started it is using an
abd name i specified in our clinic
smokin figuration i've already executed
this test before so the IBI VD already
exists so it should should be connected
quite quickly yeah you can see that the
android sdk support is just being
installed by there and hopefully we'll
get the will get the execution results
quite soon maybe you are wondering what
you can actually do apart from running
your tests based on selenium using this
article on Android extension selenium
allows you to make screenshot as well
well as I said it's not working selenium
allows you to
no take screenshot of your application
so you can get more information what's
actually going on even if running on
continuous integration server and the
other other possibility we have Hugh in
a drone ecosystem I can show you in the
extension code itself is that we make
you able to modify the existing instance
just by injecting its controller into
the test itself and then you can for
instance a setup for guarding port
forwarding or install an application Oh
No on your own so here we can see
another another kind of unit tests you
can see here that what I'm doing it's
just the smoke test basically i get i
injected a controller of an android
device directly into a jo net test and
i'm able to install package if I would
use another third-party tool like monkey
runner I can basically use the already
started instance and use monkeyrunner to
connect to it and bro so the native
application itself so let us for Android
I haven't brought on Apple machine here
which was maybe the reason why it was
not working now the idea is that we have
a very similar extension for Android oh
sorry for iPhones so basically if you
want to test your application on iOS the
only thing you need to do is to create a
new profile which basically says that
browser capabilities you want to get is
an iphone or ipad or whatever these guys
are doing this moment and you have to
include
and dependency to Android sorry to our
clay on iOS extension and that way you
can reuse your test even or Android L
sorry iOS so we got a bit more faster on
this slide we were able to move to
continuous integration environment just
for the sake of sanity if it felt on
Android you know you can see that it was
working fine on the desktop browser so
the reason being is that I did a few
rebase comets and i forgot to push the
original state of the application i
guess but there's basically the same
reason why it's not working correctly on
my other mobile phone so this was so
short presentation about using our clan
together with android if you are still
interested how it can be used you can
follow our clamp dot orc page where you
get a lot of tutorials i'll be trying to
revamp this presentation into tutorial
as well so apart from having possibility
to go to the test application Plus these
slides so there will be a kind of
document which makes you able to go to
the steps down here you can obviously
follow us on Twitter or Facebook or even
Google Plus and here's another space for
your questions any questions so far okay
thank you very much very much for being
there
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>