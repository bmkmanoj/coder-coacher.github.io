<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Harness the Power and Performance of GlassFish: Tuning for High Availability | Coder Coacher - Coaching Coders</title><meta content="Harness the Power and Performance of GlassFish: Tuning for High Availability - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Harness the Power and Performance of GlassFish: Tuning for High Availability</b></h2><h5 class="post__date">2013-01-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Sk-iqk8m2cY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you for coming to our presentation
on thursday afternoon of java 1 these
are the people who really care about
learning something to the to the end of
the show appreciate that today we're
going to have a presentation on
harnessing the power performance of
glassfish tuning and high availability
from Renee Renee Van Wyck access into
ice ICT and Tom lubinski of SL
corporation I'll just say a few a few
minutes to introduce the speakers and
then they'll start the presentation rene
van wyck has a very popular blog called
middle where magic is anyone red mill
where magic no I he blogs about
different technologies like glass fish
jboss weblogic he's really an expert in
application server so encourage you to
ask him questions he has a lot of
opinions about what each one is good for
he also is from the Netherlands and he
recently visited Yosemite so if anyone
wants to see any beautiful pictures of
Yosemite you can stay after the meeting
he'll be really excited to show you tomm
lubinski is CTO and founder of SL
corporation SL stands for Cheryl
lubinsky and thomas tom lipinski was
actually founded in nineteen
eighty-three to provide real-time
graphics visualizations for things like
process control applications if you
think back into the 1980s business
applications all had green screens but
if you wanted to monitor a power plant
you had to take a lot of telemetry in
and develop real-time pictures and
alarms for when things went wrong
operators didn't look at green screen so
we've translated that technology into
monitoring complex distributed systems
and particularly mill aware and
applications and our software is known
for having a high update periods being
able to potentially click metrics every
10 min every 10 seconds every 30 seconds
something like that last year we had an
exhibit booth at javaone did anyone see
it thank you but last year we were so we
have applications for monitoring things
like JMS messaging systems Apple
patient servers applications Oracle
coherence data grids and last year we
were approached by Aruna Gupta who said
if you develop a monitoring application
for glassfish i'll blog about it we
thought that was a that was a good
opportunity so we came up with a
glassfish monitor if you want to go on
our site we have a webinar with parlays
showing how they use it to monitor and
manage their site today we'll show you a
little bit about it but because our
internet connection here is painfully
slow we're worried that you're going to
think that the monitor is slow so so
come on our site with that that uh Renee
also Rene likes to draw on the board he
doesn't like to use slides but you can
see he's not allowed to draw on the
paint here so he has to use his slides
so with that already
I don't think hey me no books like this
again okay okay we got a sort of walk
through it's not really for glassfish
it's actually in general for every
application for what you have to do when
you go through various last person
turned it up now you can aim it through
the mic okay so what we gonna do are you
going to do is sort of first look at
where what are some best practices for
building in java application and there
we go through an operating system level
and not be a lava way up to the
application server so we go first look
at an OS then we will get a look at the
JVM and then we're going to gloss which
itself and what what we are need to do
in the various layers of those
environments to make it optimal I
usually what you see is Simone usually
and in a modern royalty ever also of
course your virtualization layer as well
usually VMware or something something
else that that is what I'm not I'm going
to talk about this day so usually a few
hypervisor layer as well that leads to
be tuned as well so now it was group at
some some notice front what what do you
want to do is just benchmark application
benchmark it make it simple and then put
some load through it that gives you some
idea of what is going on in your
environment the other thing is so I want
to build some sort of scalable
environment and see if or how much
transactions per second i can put
through my environment for example when
i put one cpu and it is usually what you
begin with you to benchmark just one cpu
in there just been smart one cpu put to
soup using them
I don't think yeah for me it sounds
really ok so you what to do a two types
of virtual for fruit two types of
scalability and scalable vertical within
more cpus to give work horizontal
putting more machines it's actually
simple as that you don't need any
mathematician for that to tell them most
importantly what you do is building some
safety margin I usually wear your system
is going on there a normal load and
certain service crashes you don't want
the whole system going down when one
server crashes in there yet so usually
what to do is build in safety margins
for example we have also a system
builder for the duck shrivel system
environment and usually when it's winter
there it's bad weather and everything
goes wrong but the systems actually for
information how to travel is going
cetera is still there what we do now is
for example the whole system is usually
am on a normal load is on forty percent
of its capacity so when everything goes
down it builds up to eighty percent you
never sort of targeted on opposite the
reason for that is just a safety margin
when one thing year clusters breaks down
the rest of your cluster has to still
operate in it those are just some tips I
went in for example build a ja ve system
when your oak / servlet whenever cluster
multiple servers don't put too many
objects HTTP session because that
increases your response time simple as
that usually are
sort of a direction you have to go to is
about seven kilobyte nothing more than
that when you go over seven kilobytes
you should think about maybe a datagrid
or something else and not your HTTP
session in the cluster replication like
that just put it in datagrid it's built
for that kind of object sizes and stuff
actually it is very difficult usually
what you do is you don't have video
controls just developers put it in put
it in put it in what you have to do is
profile your system and look how a
larger objects are getting in hopefully
you can just see it squeeze your objects
into smaller sizes what you also can do
what you normally have with HTTP
l'application you have to sort of that
your objects are serializable and they
have to be able to be transferred over a
network so what you'll only do is
implement your lies ability in Java but
you also can do is when you want to
compress your objects as usually what
you go for you can use for example
implement externalize ability for that
do we have to implement some extra
coating but in doing that you minimize
your object sizes that which are going
over the network you can minimize those
it will further for example in user data
grid like coherence and who else has um
c relation serialization algorithm
called portable objects and those sizes
of those objects are really small so
usually what you do when you have large
objects in your session don't use the
replication of your application server
but use the replication of a datagrid
you have to implement extra stuff for
that loss utilizar usability you have
implemented extra but yeah in the end to
get a better performance on okay they're
sort of the top layer the web interface
of also servlets now we go to the atp's
so there are genuinely some general
rules in there like for example when i
use states for session beings
the rule is there cast as many beans as
possible don't try to passivate beads
that means that when a client goes
through it and the clients for a while
doesn't go to the stage stateful session
being anymore usually what an
application server does is sort of page
it out to disk it means it is out of
your memory and in some file or maybe a
database or whatever when a client again
leads the environment again it has to
page in again and that's really
expensive so try to you sighs your
environment inside in terms of memory
that you can hold enough bees in cash
for the clients to ya use them and try
to not pay to me not try to not pay to
mouth also for the stateless and the
message different means try to pull as
many beams as possible this means when i
use for example and enterprise being
it's already there to be used it doesn't
need to be generated anymore for example
when I you as an enterprise being
usually there's something of jameson
there something of a data source or
whatever those resources are created
with the enterprise being when they are
in the pool so can use them when like
they are already oh yes here's the
downside of it I use a pool I use a cash
those sketches and pulls your memory and
what we're going to see when we talk a
little bit about jvms what you see is
when I use too much memory in my garbage
collection works all the time so bye-bye
throughput those are there has to be an
optimum I usually what you don't have to
look for is not going over sixty six
percent of live data in your JPM
environment the reason for that is when
you do the algorithms would do the
garbage collection yet just work
overtime so your poor signs go up better
said your latest go up the throughput is
gone and your old system is out of
control yes sir no worries you can ask
questions or make it interactive it's
66 to third yeah just some tips about
the way you use an operating system are
using a way of your cluster environment
that you don't want to lose any package
when you lose package between heartbeats
for example between the cluster servers
the other cluster server things oh it's
not there anymore two drops it out and
it is still yeah come back again and
that process costs time so usually what
you do it look at your packet loss
minimization that means make your buffer
to an operating system large enough
there's actually orders to it and also
very importantly is you make sure the
number of open file descriptor for
example where you HTTP server the front
of your application server all HTTP the
dress that come to your operating system
actually files on your operating system
level it means where I for example or
use a default what you see a RS 2024
devotes however the under the venue for
component requests in there and number
2025 comes in a tenable process has to
wait until the resources of the
operating system are given back to the
user and we under which you have your
installed your application server so you
see what you're doing in production
systems is yeah level it up to for
example 8,000 or 60,000 or something
like that another important thing is the
tcp abort of course I'm not going to go
deeper in there but you're swapping it
now usually what you do a Java it's a
new memory system and when you have
operating system for example I credit
limit rather Linux of sloppiness is
purdy for 60 it means it's very lazy in
gaining back those pages we're not used
usually what it does is when a page for
example in your memory system isn't used
for about a period of time it gets paid
out to disk and for example when the
calls come to that page ad
memory at such a page in the gap and
it's very expensive usually when you can
try putting your penis to zero then it's
very aggressively tries to put the pages
right I clean them up very fast and
reuse them again I have to say I have a
very long talk with a linux expert from
Revit on the open world and in actually
red x 63 it's very optimized the whole
paging system the old file access etc
etc so when you have the chance and for
example the ever linux 5 environment you
can upgrade to 60 creative 6 also the
environment in the linux what they do
now the attuning option for example you
can say well I want to left Lowell
agencies they the only thing you have to
say now in Linux x3 is tuned for latency
and that's it I'll choose related so
it's very easy now another thing where
where you can get an enormous amount of
performance is huge large pages means
get your open get to memory environment
in two very large pages the reason for
that is when I for example create
objects in Java and usually objects are
related if your object 3 when using
large pages it's easier for the JVM to
put it together so when the garbage
collection come all the objects are
actually in groups together and it can
collect very fast I'm not going through
all the slides on the JVM because we
also have some monitoring stuff as well
what I'm going to tell about JVM is
about two different optimization skills
which they use AF an optimization scheme
you can go for throughput or you can go
for pasta anyone in here knows why that
is there for example whenever the
garbage collection going I also have my
java threads going add those two
sometimes I just need to do some work
with Java and the garbage collection has
to do some work as well
so anyone why can I not have bugs than I
have optimizing for exactly so actually
when the garbage collection networks
concurrently with java objects it has to
run longer because the job Eve is
constantly changing its monitoring that
as well so when I the garbage collection
is running longer it's using more CPU
cycles and bye-bye throughput when I
actually go the throughput I say to the
god to actually to the java threat
they'll stop don't run anymore don't
change the heap so usually where the way
you go for throughput is just say to all
the javathread stop so introducing a
post time therefore you use it because
it's approaching anymore but the garbage
collector is running very very shortly
so you see hbu cycles are of course more
for the java threat to the set of them
instead of the GOP's collector itself
yeah both i was actually the time the
threat of stop so they cannot run
anymore then that's too bad i don't have
now when i have multiple threads running
here those of my java threat and a super
point of time is my EP a-- and y equal
becomes full usually what happens the
garbage collection runs as well they
have two times for example what i can
say well javathread don't run anymore
stop what this means and this is for
example and it grabs the coming from a
job with you just usually the phase or
whatever yeah I understand so for
example I've usually the face with a
table and I like to insert some new data
now that repressed go through the
application server that's a separate
thread a separate piece of work in
application server
and before some time for your time which
bones is generated yep now in between
those universities once time a garbage
collection is running that garbage
collection and some point of time has to
stop your java threat so the processing
of your work is going to take longer and
that time is the first i've introduced
yeah sort of so on this here are
some examples of how you can tune your
system for example we go for a
throughput you what you usually do is
put in a parallel collector I use it as
much java as much garbage collection
threat as possible what we do here i
also say i want to maximum force i'm
introduced for example no more than 200
milliseconds that means to the garbage
collector piece try and note the word
try to reach the point that you don't
introduce more porcine than 200
millisecond in order to do that i also i
want to have a throughput ratio and
forth a twenty percent is for you and
eighty percent is for my java traitor
those two together thank you the
interview spore style note that it's
only a directed for the job vertice when
you will have a heavy load it possibly
can be you go over the seconds of
whatever also know usually when you do a
garbage collection time and especially
your pores i'm introduced it's sort of a
function of your life data on the set
that's also why i said no more than
sixty six percent a on each side when
you look at the garbage collection
algorithm at the mark face algorithm for
example you can see when your life data
set is going to one hundred percent your
porcine is out of control they're also
when you have a large
and also with a la a small amount of
light data on it you can increase your
he be referred one of the nice thing is
of course the hot spot I was also
talking to the Azul guys here oh you
know that the disease jvm they claim i
believe them they claim they have a
small porcine about 200 milliseconds for
500 gigabyte he that's amazing they
don't of turbo of not terrible to them
and they've done a wonderful job in that
and probably I think why is that they
sort of yeah activity in multiple parts
now what you usually do with the rock
pop you say i have a john young
generation and have our generation and
the young generation is collecting
multiple times usually see you sort of a
jigsaw our environment and then it
crosses down your full collection what
they probably do is that the sort of
divide the EP multiple parts equal parts
and sort of look at where the most
garbage ish and collect all started
that's probably the optimization you can
get and that's I think also present in a
new hot spot in Java 7 when you look at
the garbage first collector that's sort
of the same process so maybe in the
future with hot spot you can go to 500
gigabyte I don't think so it's a lot
sorry sure
yep usually when you have a full
collection it just stops your
environment and your part time goes on
you sometimes it goes down control and
when you're actually your heap size is
not more than for example 2 gigabytes
still you can't go over a second so you
don't have to worry about that but when
you go over the 2 gigabytes environment
using the poor sensitive used can get
quite large the data man ISM is gone
usually it's completely statistical
violent no nothing it just happens this
is only a direction the JVM has to go
try to optimize usually what it does it
looks at your system it measures collect
statistics and based on that on the
right times it starts collecting so
usually you don't see those times in the
beginning but when it runs longer and
this is more of a server environment
than a development environment there's a
lotta settings you would use in the
development of you don't even yeah
another thing very important here is
they'll the JVM to use the large pages
for that you also need to configure your
operating system usually by default
operating system doesn't have any large
pages know what to do usually when you
operating system startup you tell the
operating system to create an
environment huge page environment and
then you can yeah based on sort of
create your largest yep actually the
large pages then get you an enormous
amount of performance gain that's really
so are there more questions about jav
amazon
and the reason for that is when I don't
do that the usually the hot spot is very
conservative in taking memory so usually
it goes to the MS initial value so for
example when I would put xms2 a 500
megabyte it will take 250 megabytes and
I would say you can grow to one gauge
when I really need tomorrow it will grow
and when it needs less it will shrink
that growing and shrinking it's time to
your garbage collector cycle so that's
usually what you were to do when just
put them together equally so we don't
have that over it anymore yep no more
questions
I'm going back
okay we go now to the application server
and for example we go to production
systems you don't want to have an outer
deployment environment in there because
there's a polling system the checks for
your file system to be files to be
present their heads over it another
thing is logging watch what you lock
don't look too much otherwise it's a
symbolic system that has to go to your
file system and usually when you log too
much any or for example what you see in
general also is that people lock in the
root system and your root system also
runs your application of Romania root
system blows up there's nothing to be
run anymore so usually please try to add
a separate petition for your login
environment just that can be sized to
multiple whatever you need don't use
your root system for your longing
otherwise your complete operating system
is gone just some things about for
example a red potato we also have talked
about HTTP session of violent any weapon
tane as a timeout set that time out for
example when the session is created the
session you create memory uses memory
when the memory is for forever there
yeah it's forever there and properly
user isn't there anymore so set a
session timeout so the session can be
clicked and can be garbage collected
another for example for the agb
container also find an optimum between
the cash eyes and the full size and what
can be used in memory and what the users
are using
truck tool is also very important and a
trap tool is there so that it can
instantly yeah process some work for you
so sighs the thread pool accordingly now
where for example now go to weblogic
lyric for example in weblogic weblogic
ads and sort of an ingenious system with
work managers the merc manage that you
can control how many threats you want to
run at the same time what your
capacities are etc etc and for example
losses you will have a general trample
you cannot say well I create a word
manager for that application agreat
another word manager for that or even in
weblogic you could say I'd create a work
manager for example for that egb and in
glassfish you have a general so that's
sort of makes it difficult more
difficult to chew it separately glass
reason for example in weblogic server
the same goes for jboss is wrong same
amount goes extra for the db's jdbc or
the Jameson violent try to set them up
as smartly as possible as also what
we're going into when we go to the club
swing out how can you cluster for
example say we have multiple resources
when we have to commit to for example a
database and dreamers or to the
databases so f2 for example use XA XA
uses some form of the logging
transaction log in and how to never go
further when it fails that means your
system can be much more complex when you
go for an X a solution for example
yeah say for example wave reporter and
in between this blocks are I fear my JMS
environment are for also fear my jdbc
and also those usually went on form of
the image I want to have persistent
messages and those participation is can
be thought of yeah safety for example of
filesystem hualien database when I
talking about how availability that has
to be high available as well so meaning
when you for example you the file system
it means I have self storage there
Chet's Flores has to be redundant it
means for example whenever the
redundancy at fort here it also means
something from operating system for
example and operating system regular
redhead likes to fence to put in our
words likes to make sure the operating
system is safe at all times so it uses
offenses make fencing mechanism meaning
that your cluster may use it has to be
consist for example of at least three
servers that means your your clustering
environment gets more and more complex
when you go for example I can type
transaction environment so they can
reduce those things you don't want to
use XA that's what amount of the first
things you decide about don't use XA
also think about well when I use
persistent messages and the server fails
it has to be there must there be in
order imitating or not and when the rest
doesn't have to be in order in the
messaging I can sort of more make more
simple mind my coughing environment
meaning i only have to for example on
the local operating system with my
persistent messages and at that case my
environment becomes more simple and also
more cost-effective
so actually when you go for a posturing
you are high availability of course but
also manageability and putting in more
complex things like JMS or jdbc and
stuff like that and multiple resources a
year transactions also means your
cluster becomes more and more complex
try as a developer to put yourself in
administrative in position that it has
to sort of administrate a system we have
redundant shared storage where for
example a high available database within
track also there we dataguard there and
your environment your form of
application service if forming of your
normal weblogic or glass is clustering
and anyway also your operating system
when you have shared storage in there
it's called flexible as well so your
environment can get from an
administrative point of you very complex
yeah just just some message to
developers try to keep the application
as simple as possible so an
administrating environment then gets
simple as possible as well so usually
simple process cost effective no disk
sharing requirements a data storage does
not require high availability for
example I can lose my data storage when
i use for example like a data grid
applications do not store or participate
in something like XA transactions or if
they do any use for example JMS in jdbc
one transaction you can sort of say to
the JDBC transaction use a sort of a
log-log last login resource environment
and also application too much use for
example file based ems or they again use
but that there is not no need for
auditing anything in it and we have
complex clusters yeah for shared storage
there hi available database XXL
usually I would also mean when you look
at a clock plus destructive look at what
for example box of your data structures
in there what makes your application
complex is actually how to handle your
data maybe you can for example you don't
need a relational database you can use
no extra SQL environment or you maybe
you can use the data grid or you maybe
you can even you set it for example into
a file system that affects veggies later
moment into for example a database way
do that you care for example treat
different kinds of parts of your
application in a different way one for
example that needs to be for example
continues available that can be used by
you for example a datagrid and other
parts there are for example highly
transactional uses for example
relational database but the relational
database doesn't need to be high
available those things when you look at
them think about them and that way you
can make them simple processor or
complex coaster but it need to love
planning him in front before you can do
that yeah and I prefer to Tom anything
to talk about yeah all right thanks
thanks Renee can you on Oh stand back a
little bit I guess you can hear me so as
you can see Renee is a wealth of
information about tuning your middleware
whether it's glassfish weblogic gbms
whatever and I would encourage you to
look up his website in his blog
middleware magic calm and he's got a lot
more information up there so we just
want to put a little context around why
we're here Renee's company axis is a
consulting company correct and they
provide services to lots of companies
are based in the netherlands and they've
developed a lot of expertise around
tuning various components that make up
applications now SL is a company that as
Marie mentioned we've been
in business for 20 years doing all sorts
of monitoring and real-time data
collection and process control systems
and there's something that really
strikes me when I when I wissen to some
of the things that Renee is having to
deal with here so he's spending all this
time talking about JVM tuning and if you
go back I won't go back to it now but on
his slide where he had all those JVM
parameters you know the maximum time and
all that I mean that's a lot of stuff to
keep in mind so as a company that
specializes in monitoring I mean I think
back when i was doing process control
systems a lot of these systems were
written in c or c++ and one of our early
customers was a company that made a
control system for this chemical
phosgene plant and we were trying to
sell them our software and the guy came
to me and said you know we have to be
sure really sure that your software is
reliable because what they do we're the
developers of this software they make us
after we install the software they make
us go in and turn the switch on so if
something goes wrong with the plant it
happens to us and he was serious and
when you think about some of those kinds
of monitoring some of those control
systems running a power plant a nuclear
power plant hydroelectric plant I mean
these things are big business and if
something goes wrong major problems so
we have a lot of experience with that
kind of mission control monitoring now
an interesting thing happened was at the
end of the 90s we made a transition like
everybody did from our C++ in fact we
returned our early system into a Java
implementation and our first floor way
into the market was where we had a Java
version of our process control system
now we were shocked to find out that a
lot of people didn't want to buy a Java
version of a process control system
because can you imagine you turn that
switch on on the phosgene plant and it
goes into a two-second garbage
collection pause and you're in trouble
so
it's a different world now everything's
a trade-off right Java is a very very
good language and believe me i love job
much better than C++ much more flexible
easy to work with and we've been doing
Java for the last 12 years but it's a
trade-off and so as a result there's a
different kind of monitoring that is
extremely important so you have to
monitor a lot of elements of the
operating system itself not just what's
happening in the application but you've
got to monitor the infrastructure itself
such as the garbage collection so as a
company SL has developed over the last
10 years a lot of different sorts of
monitoring tools and one of the things
that Renee was able to do that was
highly impressed with in just a matter
of days he took our glassfish monitoring
product he took our Oracle coherence
monitoring product he took our weblogic
monitoring product and right out of the
box was able to apply that and you know
get significant value in terms of
understanding how those systems were
performing and he did it just by
downloading and you know playing with
our software now we have a lot of
customers I don't have you know a lot of
information here but what I'll do is
I'll just give you a little perspective
on how we approach monitoring of
glassfish and in terms of the various
components that applications are built
on nowadays you know glassfish is
actually becoming more and more
important in many ways glassfish is the
next generation tomcat and what happens
is a lot of people use glassfish for
their deployment you can do clustering
you can put some pretty sophisticated
systems in production with glassfish no
Oracle of course is making a product
suite and weblogic is their higher end
version of an app server and they would
like you to migrate eventually to
weblogic and there's there's a continuum
of functionality there so within the RT
view product this is
example of a screenshot from one of the
products that SL provides called RT view
which stands for real-time views
basically we're getting a look in real
time at what's going on inside those
systems so we have a version that is
tailored specifically for glassfish we
also have a version that monitors
weblogic we have another version that
monitors oracle coherence and then we
have on top of all of that an enterprise
view where the data from each one of
those can be correlated together into
application centric fuse so applications
are often dependent on multiple
components there's other information as
well you've got your infrastructure
information your CPU your memory and
correlating all that together is
basically what we do and our enterprise
view of everything now here what we're
going to focus a bit on glassfish
because that was the title of the
presentation but a lot of what we do
here applies to many other types of
components as well so one of the things
we do is we use the concept of a heat
map and so this is a view now in this
case this is a set of four one
application this is eight clustered
glassfish server running on several
different toasts and the size of the box
represents the size of the heap in that
system and then the color in this case
is representing a measure of the memory
utilization so at a glance in a view
like this I'm able to get a look at how
big my heaps are I can see which ones
are running higher in terms of memory
utilization now none of these are
running very high you can see there's a
legend I think they're up here you can
see a legend and it goes from green to
red and so as it gets close to eighty
percent these boxes would turn red so in
this case that are only running in maybe
twenty percent memory utilization but we
have some systems that I've seen where
you've got hundreds of these boxes and
some of them are running
very high and at this point you'd be
able to drill in and investigate what
what's going on so when you do drill in
when you get as a view of what's going
on on each of those individual servers
and we have here it's hard to read on
here the various metrics but number of
requests per second the average
processing time of requests on those
servers and then back at this heat map
level you can select oops right here
you're able to select what metric would
be displayed in those you know in here
so right now we're showing memory but
you could also show CPU and whatever
here's here's a actually this is a
similar view this is a view of all the
jvms in this particular application this
was a customer of ours who has they had
eight aggressive fish servers and then
they had other supporting JVM in fact I
think one of these JVMs in here is some
of them were just custom apps that they
had and so you can see the memory
utilization on these particular apps and
then drill downs and see the detail now
one of the things that you typically
want to do in a system like this is to
define orders so within this glassfish
package we have a number of different
types of alerts so you're able to alert
on you know high processing time or high
number of connections or whatever and
then surface those alerts up to a higher
level where their aggregate it with
other alerts coming from other
components in your system so as I
mentioned there's there's a lot to
consider in setting up any kind of a
complex system the types of things that
Renee mentioned are some of the detailed
you know fine-tuning details about a
complex system what I had planned to do
here we see if this if this actually
works we have an extremely slow internet
connection
but i do have a version running of this
particular demo system in fact this what
I'm what I'm looking at here see how
fast it responds that's not too bad this
is an enterprise view is what we call
the enterprise monitor and I'm looking
at a number of different applications
and here as I drill down I have a couple
of applications that are running in fact
this glassfish load test right here is
renee's application in fact Renee
installed this on our servers for us and
this is an application right now it's
got no alerts and from this high level
view I'm able to drill down and I can
see that I've got two glassfish servers
and I've got two glassfish apps running
here this is a fair you know fairly
simple app but this gives you a sense of
drilling down from the high level and if
I click here they drill down and expand
that view and now i can see okay here's
my two glassfish servers local and local
to and I can see I've got no alerts
right now but if I double click that
drills down to the page that actually
shows me the detail I can see I have
right now no active sessions I've got
some requests per second yeah that the
historical data is taking a while to
here it comes yeah so I've got
historical data here and this is in fact
the load test that Renee is running on
those particular servers now on a
glassfish server like this I can also
look at the apps that are running on it
and here now in this case it's just got
his one app along with a default web
module running I could look at something
a little bit more interesting example I
could take a look at something like a
cluster of weblogic servers so here I
have a cluster of different lab logic
servers and those of you familiar with
weblogic will recognize this medical
records app
and on this particular server we have
the med rec app running and if I go down
here and look at the apps on that server
these are the apps that are running so
right here is med rec medical records is
a standard app that comes with weblogic
and if I drill down and take a look at
that med rec application I can see
here's a history of activity on that
application now if I go and go back to
say 24 hours I believe some people were
accessing this earlier here's some
accesses here's some spikes and activity
so I've drilled down on that weblogic
server to all the detail about that med
rec app in fact if I were to come up
here and I launch that app right here
that brings up the medical records
application on my desktop and if I log
in right here it should be coming up
this is running on a weblogic server
right so if I login as Fred and golf com
weblogic and I drill down to a little
activity on that server i investigate
the records look at my profile go back
log out and the exit I will see as I go
back to my view of that server go down
here here is my there's the weblogic
server that's running it and I drill
down and I should see it will spike in
activity there so then I go down to the
heat map of the view of that and there
we have it
I should see my there's the activity
that i just created on that particular
server so as I'm interacting with that
application I'm able to within this
within this view of these components see
exactly what is happening on those
servers those of you that are familiar
with the Oracle environment you've got
other kinds of technologies such as
Oracle coherence okay so i have an
oracle coherence cluster here i can see
the caches and various services and
activity on those caches and there's you
know basically what we're doing here is
we're peering into the performance of an
app in order to provide people like
Renee who are doing development of
sophisticated apps some kind of view
into the performance of those systems so
at this point maybe we just open it up
for some questions usually what you what
you do want with saw no monitoring like
this otherwise the ways i told you at
the beginning just create your benchmark
let you bring some up run with a load
test and just put all the fuse together
and what they told that it showed that
they also have a for example way of a
cluster V of multiple getm what you want
to look at is that the multiple je viens
are not collect garbage collecting at
the same time they have a nice pattern
also in our key view they can look at
for example all the multiple avias on a
horizontal line you can see for example
there is more green arrows garbage
collecting more deep there with white
it's not so you can see you're going up
and down up and down and where those
patterns are not into colliding or how
do you call it in English I don't know
whether or not equal you know it they
know not collecting at the same time
means that some DPM in the cluster is
still available so also the part of what
what Tomas will show is about response
times
it can also view here in an equally
environment what do you respond some of
your favorites on how fast your system
is so you do when you use monitoring
tool like this knows you know how to
expect the useful information from that
and also of course you have to know
something about your jaw ve environment
as well correlate those two together and
you can swim do some fine tuning now
we're going to skip a little bit of
course our review is not your own
environment you can use some more torque
also use for example we used a rocket
the admission control for example that's
also very strong in the form of what you
JVM is doing and also how how your CPU
is doing now what what they do in the
air is actually put the Java on top as
well and you get then get those
information out of you so usually you
need your monetary system in place
everywhere I go in multiple environments
for example in the Dutch rateable system
we have multiple monitoring systems not
only this one but also also for HP for
the environment for the hardware they're
also an extra correlating environment so
usually you're monitoring system is
complex as well and you need coke yeah a
complex environment to monitoring
complex data and something my party view
is something that does there for you
actually in a sort of her one fuel
environment was very easy to use my so
that was commercial part yeah
oh it's very very dealer this is a real
time it doesn't use daily builds it uses
agents as well yeah there are agents to
be installed to be honest the new patent
troll is a very powerful tool it's very
heavy this is quite light weighted can
run a tomcat server for example and
without patrol the memory utilization
you start with these eight gigs and
usually the amount of surface you
monitor the more memory unique you see
where you have big environment you have
a very big server bare metal please
don't use visualization if I can't walk
because it has to use a lot of these
disk access let's use a lot it's very
heavy but it's to be honest it's very
powerful we are testing it right now
with Justice Department in Netherlands
to monitor our whole country and to be
honest it looks fabulous okay what is
very heavy and sometimes it's terribly
slow but you have again we have now
another test environment which is not a
very powerful machine to give you an
idea it has 69 gigs in there so it's
quite ok and also 46 CPUs bomb what's so
much
you
any more questions
you know I wanted to
one
okay sorry so one of the things we do
here this one has very good this is so
up here we have a look at the heat this
the one you pick happens to have nothing
going on but one of the things that we
measure carefully if we do calculation
the garbage collection do you say that
is the calculation of the amount of time
that the CPU is actually spending and
that is something that we aware and that
turns out most important learning</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>