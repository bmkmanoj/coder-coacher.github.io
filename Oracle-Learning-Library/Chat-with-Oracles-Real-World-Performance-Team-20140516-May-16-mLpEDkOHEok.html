<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Chat with Oracle's Real World Performance Team 20140516 May 16 | Coder Coacher - Coaching Coders</title><meta content="Chat with Oracle's Real World Performance Team 20140516 May 16 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Chat with Oracle's Real World Performance Team 20140516 May 16</b></h2><h5 class="post__date">2014-05-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mLpEDkOHEok" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you
all right good morning everybody this is
that Andrew holdsworth player again and
for the action of the final last one of
these web conferences of web sessions
whatever to launch the videos that we've
been placing up over the last few weeks
and associated with real-world
performance and we're going to try and
make these events a monthly event and
what I have discovered is that a lot
more people of what listening to these
events after the event rather than live
and last I really appreciate that it
would be really great if we could
actually get some bigger live events and
get more questions coming in so what one
thing i'm going to do ask is this all
people are on at the moment and the
people who listen to it later if you
could let me know if there's a better
time I think end of the day on Friday is
probably not a very good day to Europe
or times over Europe it's probably not
very good for asia-pacific it's probably
okay for America but is there a better
time of day that we should organize
events and a different forum and all
feedback we're going to try and do a
monthly event socially we can just get
all the things that my team's been
hitting and also we did like to get some
feedback from everybody else have they
tried technique were they working a war
stories ero stories whatever as we go
along so you know basically this is the
last of this current series we want to
do more but I'd like to sort of tweak
the format so should we get more
participation and more communication
back and forwards so and let's get
started and what I think anybody who's
be coming to these sessions will know my
philosophy and what we're about and the
concept has CI I don't really relax them
on free time I'm always trying to push
the performance or something yeah
they're both or a bike or a car or
something
and actually yesterday actually had a
day off and I actually went through the
North sales manufacturing facility up in
minden Nevada and when they manufactured
from very high-tech racing sales and
even my boss's boss's boss's boss larry
has been and Berkeley sales from them
and it was an interesting analogy for
speaking to the designers in the
manufacture of themselves the challenges
that they face bracelet of challenges
that I faced in my role and we had a
good little chat about this but we can
painter this conclusion quite a lot the
movies conclusions quite together and
good performance is really an accident
and I reinforce this over and over again
you get good performance through hard
work planning and certain amount of
talent design and rigor you don't
suddenly just put a boat together and
it's flying high speed straight out of
off the dock they usually have been some
design work and some clever work done
and sometimes it just involved taking
all the parts and making sure that they
all work well together and the next one
is something that certainly that my
colleagues and my team will all agree
we've been grinning about this last
couple of weeks and especially with
regards to some systems have been more
having to look at where people really do
to get the performance they deserve and
we've seen a couple of excites where
they realize they're out of their bet
they've got help and they immediately
got better performance because they
started mixing things and they put
things on the chin we've also seen a
couple of sites that whenever we've made
a suggestion for them they've basically
argued and rejected it for non-potable
reasons and they're still experiencing
bad performance and it's kind of endemic
in the performance face that very often
between with non technical reasons why
they and excuses to get bad performance
so this is something I was taught by one
of my mentors earlier microwave people
you to get the performance they deserve
and one thing I always aspire for is
excellence never be satisfied with good
enough performance and always be trying
to get the max out of the hardware
you've got and that will be fantastic so
that's pretty fundamentals of real-world
performance and it could have guided me
the last 25 years anyway I thought we
wouldn't have a little bit of a giggle I
found this one place it up on facebook
this week and and I thought that's so
analogous again to what we do in our
real world life is that I hipster magic
being used could you do some magic to
our database and I don't know who would
like to get on an aeroplane being flown
by magic and we I was trying to actually
try and dream up a cartoon to a redraw
system design by magic and and actually
probably make a dig at some of our
product managers because that's what
some of the PowerPoint look like but
really the reality is there is no magic
it's all just hard work and good
engineering and good calculations and
attention to detail checking checking
air review getting all this sort of
stuff not something a disciplined
they've done much in the computer
software industry needed more but the
reality is there is no magic it is an
electronic computer it works it is
predictable can be made the
deterministic very often
non-deterministic because designs allow
race conditions but I just thought that
was quite amazing to wake everybody up
and again the big three problems that we
see in real world performances the tools
just don't get used very well and the
wrong algorithms to look at the
appropriate size of data set being
worked on and live is living with a
legacy of people always trying to fix
symptoms without understanding the
problems I think I seek to agree of
those every day and this is why this is
why work is fine because we see the same
stuff over a day and we try and coach
and mentor people into better ways to
solve the problem it's a daily basis
okay so let's talk about what the new
videos we put up now remember last week
I talked about platform tuning and
things like that we've been spending all
my time on but so I thought I'd
contradict myself immediately and two of
the topics well of the topics are going
to do out of order are related to
platform setup and tuning or
configuration which we built two videos
here and this other usually the two
things that get people hung up in terms
of how they configured their platform
and lead to the most by the shaky
performance or bad performance or
unreliable performance there's also been
quite a lot of debate going on actually
on the Oracle email list we'd like to
sort of internally get this put to bed
in terms of use of huge pages and we
have a video now up there this shows the
impact of adding users taking you the
workload coming on to a system and in
fact what we do is we do it with two
systems with identical workload being
introduced one on with you two pages and
one without and you can see for yourself
the impact on performance and as in when
memory gets exhausted you'll also see
the impact from the unpredictability of
performance and behavior and this was
kind of a nice demoed but together for
us because we went in with a very open
mind and we didn't actually know what
the right answers would be and however
what we have learned from and
escalations to our group whenever
somebody say is working on linux and
they say the word memory and we
immediately asked if they're using huge
pages or more often what they say no and
the next day they have huge paid is
enabled and then I don't hear from them
again because all the problems have gone
away and so this is a really big topic
if you're working with Linux or we
through building this demo absolutely
convinced that huge pages should be
enabled by the way and on any Linux
system it's a little difficult to
configure it's a little bit iterative
it's a little bit painful I'm not saying
is easy
and but through the research we did on
it particularly regards to
predictability of the system and we're
absolutely convinced that huge pages is
the way to go for any type of database
where memory can make him under stress
and I'll let you watch the video and
figure things out yourself and the thing
is you know memory management on these
systems are by ramming so as memory gets
allocated inside the little clermont
with dynamic and so it's fluctuating and
so the point where the system starts the
swap one page out is undone
deterministic by the inputs you have
around you and this is really what's
convinced us we do see a marginal
performance gain we're not under memory
stress that relieves the predictability
of this particularly important we've
also included the log file sync
demonstrations of the impact of what
happens when you get slow log rights to
the system how it can basically stall
out in by a database into something we
see particularly on Sam storage where
log files have been put on Sam storage
and maybe sharing the same devices as
other databases other applications all
sorts of things on a corporate Sam and a
periods of time those devices get
overloaded revoke the log file sync all
of our right times degrade which has
been a corollary because the log file
sync is a function of the prime waiting
for the right and we see a high low
pulsing as a center to wait event so
something to really study this is
probably the two biggest platform issue
we see generically and it can be
configured out and designed out and it
comes back to that point it you can
basically get good performance out of
the box and if you configure these from
the beginning rather than bonds but
reactively so good stuff hope you enjoy
them and then the last one which is one
at the top we hinted on two weeks ago
about CPU of the subscription or over
processing and this is basically mean
running more processes
there are cause on the machines and this
is a very common problem with oracle
databases particularly and systems that
have been historically i/o bound and
then suddenly there by the upgraded day
i/o subsystem or increase the buffer
cache size so everything's in memory and
suddenly a lot of processes become
runnable and the point where there's
more processing runnable cause on the
system we infer oversubscription time
slicing and the performance degradation
are very rapid at this point in time and
so let's just try and talk a little bit
about that because and some numbers
because having diagnosed it you're going
to have to get some numbers and then
coming diagnose it will do we do next
we've still got this life system that's
over subscribing and where do we start
managing the process to get it within
sensible bounds and where do we start
applying a knife or surgically scaling
back certain workloads to stop
oversubscription of the system and this
is a data-driven process and one of the
other things we also notice is that we
very quickly get into situation when we
pull people that over subscribe people
don't believe us and I totally
understand that because a lot of the
statistics that we use the deployment
see people I way from in that light and
this is something that we've really hit
on about the last three or four years
with the advent of thread base cpus
unfortunately majority operating system
monitoring utilities monitor thread
utilization not call utilization but
it's the cause that does the work and
why they decided to do this is one
classic product management oh let's try
and remarket operating syste system and
make the threads look like virtual team
from use and all these sort of things
and you can see I can get into the world
of virtualization where you have virtual
CPUs and we don't actually even then
spend the number of physical cause this
is going to get more and more
complicated as we go along so let's just
get up some basics cause do the work
Fred stone to the work and be ready you
may have a little bit shocked that would
probably hit this situation about once a
month where we have to break some news
to some poor client who's basically
think we're at about fifty percent
utilization or more hardware and in fact
they're fully redlined and so you know
be ready for potentially some bad news
on this side of things but you know it's
it's part of our growing part of our
industry is as we move into new CPU
architectures we need to sort of learn
how to monitor them and it it just
doesn't work like it did ten years ago
and its really the advent of threaded
architectures that's brought this one on
so what we wanted to do is we're
starting to correlate and this is what
all good engineers do is they start
correlating various statistics and
learning which ones to trust or learning
to which ones to basically em adapt and
and figure out you know what's the
picture we've got so at the database
level we actually have a lot of
statistics and from your awr report you
can actually see how much cpus happened
with burnt over your awr period but one
of the most useful metric we have and
you can see that down the bottom is the
amount of CPU seconds burn a second so
if you think s/s sounds like something
we did in math differential equations
and things it's basically telling us how
many cores are we using per second okay
now on this system of the heart will
have a weapon reports but you can see
here when using over 90 so we're well on
the way to oversubscription and we're
basically asking us to burn you know 92
CPU s/s and you know if that number was
for an accessible number of course that
would be an indication of quite literal
a lot of oversubscription and I'm very
often we would see the light green
stripe on enterprise manager indicating
that we were probably competing for
something new and we were
in fact I'm slicing so this is a very
good sort of sanity check to look for
oversubscription really quite cool but
at this point in time with it we're
thinking it and at this point in time
the operating system utilities and all
have been used with menacing thread
utilization and we're not reporting such
high utilization the core utilization
figures when they were monitored did
show that but again most people don't
want to call you ization until they
until it have to unfortunately so you
can see that the machine is pretty busy
now what we also was taking a little bit
further and because now having got to an
oversubscribed state you stabilize the
system we've got to start taking some
load off and system and where is the
most leverage to do that and something
that we would have discovered you know
as a technique over the last couple of
weeks is that we have the 12 11.2 and
the audit log where we're actually
monitoring sequel statement from the
mana cpu i'm not saying this is a
recommended technique but it's and
basically being an engineer this was
enabled on the database anyway so we
were able to basically unpick this lock
at this log file and see the cpu that
was burnt for sequel statement and then
start running some queries against it
and because we knew where various
applications and servers and things came
from from which different client on that
server machine we could start allocating
and which resources will chew up the
most cpu on the database machine so
we're going to add a little report there
and what we actually do is we divide
through by total amount of CPU seconds
available on the time window that we're
actually running the query so we can
actually do that as a percentage of all
you can use happens we're getting an
indication what's going on but what we
end up with is a report is you can see
that basically and the total number of
CPU second was very close the women were
reported on the awr report to that
really is
going to reinforce your number is quite
indicate interesting going up at the
North self-validation they have all
these amazing systems to create molds
and offsets and cut sales and put things
down very precisely but in the end
before they start things in motion
little bit of pavement right double
check everything and so this concept of
double checking your numbers is a
something that I think we've all been
doing for a long time but trying to
validate your numbers through two
separate sources is always a good idea
so here we've had with validating the
time I've seen you quite nicely and what
we're actually done on just basic this
time window with allocated the CPU that
we've added up by sequel statement added
up to seventy six percent of all the CPU
learnt over that time window and that
was just the data basically we knew that
there were other programs and other
processes running on this machine that
would have been eating the CPU so it was
pretty quick and by segmenting it out it
could see that basically the background
batch workload was suddenly
oversubscribed dominating machine and so
the first solution was to start backing
up on the back cher and touch that they
weren't oversubscribed on machine now
once we've backed off the batch the
system was going to run a little
smoother batch jobs are starting to back
up a little bit however the system
wasn't falling over at this point in
time it gets bit more interesting
because now we can start getting into
doing performance projects in terms of
isolating the batch jobs that are
envisioned tuning them tweaking them and
removing those CPU cycles and because a
classic sort of okay we're
oversubscribed but what do we do next
well the next thing we do is we the
first important thing to stage like the
system back to work load off well we
need data to figure out where to get
most leverage to back or put off so
buying the high load batch if it was the
most important thing and then once the
system is under control it's back to
good old fashioned real world
performance hard work fixing up
innovation programs
great and you know the level of
correlation was was fantastic and you
know just just an interesting piece of
world that was put together there were a
couple of days in the last two weeks the
last thing I'd like to cover up to cover
ISM we talked about the real world
performance challenge well as of the
page that you can download the videos to
watch them we now have Argan have a link
and I think it's going online today and
for you to enter your own performance
stories of how you use real-world
performance techniques to improve the
performance and we have a bicycle
metaphor this time and we have the rules
to submit your entry and we're looking
here really wanting to do basically do
either quarterly prizes and a series of
annual prizes with a view to presenting
those prizes the open world in 2015 and
perhaps even providing a platform foods
were actually described and the
performance work you've done and open
world and hopefully that's a big enough
motivation to be basically share the
stage of the robot performance group
showing how you've improved performance
so in some very simple forms for you to
basically fill in the details of which
real-world performance techniques and
type of system and which utilities and
which statistics you use to solve the
problem and what we on till you do is
just enter some simple data of the
problem the performance improvement and
then if it looks good we'll get back to
you and there's so many rules about
uploading information for oracle that
gets us into all sorts of security
problem so and we won't ask you to send
in files or any great available to the
point in time when we see a really good
example a real world performance will
come back and find you and if you have
something like the powerpoint will
report ready showing it and that you've
been emailed to us
and we'll start a dialogue and get wear
them on test so the challenge is out
there and you know things the sort of
things were looking for if people
organized their connections if they
don't know the scribe or machine OLTP
systems bulletproof and people who have
improved the execution plans by
understanding prognostically errors or
no execution plans by factors of a
thousand people who have rewritten row
by row program the set-based techniques
and improve performance by thousands any
of those techniques if you want to
document them show them and share them
and the benefiting brought to your
business and a greater chance to
basically promote yourself promote your
organization partner organization
consultancy practice and as being able
to move the needle in terms of
performance orders of magnitude so I
wish everyone all the best of luck and I
think we're going up to five minutes to
go so I'm pretty much complete here so I
see a few people out there are there any
questions otherwise of course if you're
listening to this because it's Friday
night and you want to go home or your
the middle of the night in Asia please
email questions infamy and we want to
start kicking up a catalog of events or
hopefully which is the best time of day
and you know subject matter requests
would be great and and just under hear
from everybody and hear people's stories
of how will apply these techniques and
local hip into the performance because
ultimately real world performance to be
a good real world performance engineer
is taking your analysis making changes
initiating changes and then getting into
production in getting the benefits and
when you've got them into production and
bottle benefits then you have a great
story to tell and that really the
credible a real credit to the engineer
that initiates those claims of them all
I wish everyone the best of luck
you
the question here in terms of which
specific classes quarter hour or
performance topics and we have the real
world performance class that is managed
by Hollywood mine John them and then
we'll probably lovely for mention his
name on the web because he'll probably
get email which we have a few classes
organized over the summer month around
the world and we're filling up with
purpose
and
and you know the important thing is to
get us up on a waitlist for that one
will try and like no one the parties
coming up we're doing them pretty much
very ad hoc when we can and by request
and the real challenge we have is that
look good intentions we're not education
organizers if you can take the
initiative and arrange locations and
electrical syllables and the facilities
to learn the craft we can put the class
on so it's if you have a company and you
know usually look for a minimum of 35
students and they want to learn and you
can organize the facilities that live by
students it's very easy for us to give
us give you the class so the challenge
you out with user groups or
organizations right like you can
organize the students we can run the
classes also early 2015 will be back in
Europe doing the real world performance
day like with Europe and we're trying to
Lee a twin there are not American and
asia-pacific user groups to do the real
world performance they that's one myself
Tom kite and Graham present for a day on
all these topics and have a little bit
of fun with it so other than that we
have the online videos and again we've
had some fantastic feedback on the below
and suggestions when we're just going to
keep on TWiki human modify tantly
appendix and stuff on the videos based
on people's feedback and requests but i
will have one caveat in terms of the
system that we use to demonstrate all
they perform things we can't give me the
code one I don't want to support it and
to that is it's it's quite a convoluted
bit of code that has been designed
deliberately to demonstrate performance
problems so that a lot of magic numbers
because we know which point the machines
break and that's the purpose behind the
demos is to show a machine yielding and
breaking in slow motion and those are
what the huge page demo will see that
happen right in front of you and three
questions thanks very much
you
you
you
any more questions
you
you
this point in time oh no more questions
I think that's kinda cool today and and
we'll speak later as I say what we will
do is work up in the agenda in terms of
more sessions moving forward and crammed
ism once a month and but your feedback
is great in terms of what time of day or
what time a week will be fantastic as I
say we just arrived at eight a.m.
pacific time or fridays for this session
that we're pretty open minded for other
times so your feedback is great we can
make with the bents and you know what
i'd like to do is make these sessions
and very conversational and very frank
aborts current okay thanks very much all
right everybody have a fantastic weekend
fun where it will go out hopefully
you're going to see the outside world
and not be having too much exciting time
fixing slow performance on systems and
all right thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>