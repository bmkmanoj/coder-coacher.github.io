<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CRUD with Redux #04. Form and Client-side Validation | Coder Coacher - Coaching Coders</title><meta content="CRUD with Redux #04. Form and Client-side Validation - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CRUD with Redux #04. Form and Client-side Validation</b></h2><h5 class="post__date">2016-11-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Z5BAolQCJDI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi my name is RAM and in this episode
we'll implement form and add client-side
relation to it so we need to work with
for Mac last we are going to use
controlled elements in our forms if you
want to learn more about controlled
versus uncontrolled elements I've got
short video about it for you just click
on a icon in the top right corner lately
I started to use semantic UI CSS
framework in my projects instead of
bootstrap and I'm loving it let's use it
in this small project as well
we'll use CSS version but semantic UI
also has excellent react components
library so let's open index dot HTML
file and add CDN link to semantic UI in
fgs let's create menu like this so first
when close everything in UI container
tag then we open menu with UI 3 item
menu class as you might guess that
creates menu with 3 items now we define
this 3 items link class name item it
points to homepage and we call it home
the same thing we do for games route and
for new game 1 to make menu element
active let's specify active class name
prop and set it to active but if we do
only that we'll have the following
situation when we click on games home
stays active and if we click on new game
everything is active and that happens
because we have nested routes and this
is not the behavior we want so let's add
active only one exact property to link
element so go to browser let's have a
look and yep that solves it nice so now
let's add new match for new game page so
we have match pattern games slash new
and we'll use component game form we'll
use form is connected to read X
component another way to do that is to
use another parent component to be
connected and the form component in that
case just receives actions to dispatch
via props that make sense when you have
something else on the page ok so now
let's create a new game form digest file
and create new game form component next
let's create simple markup we'll have
title field
URL and image that is displayed when
cover URL field is not empty so first we
define form and let's add header add new
game so now if you go to the browser
we'll see that when we go to the new
game route we get games list and new
game form there so why is that well if
we look into our match components we'll
see that in both of their patterns they
have games and that means that both of
them match and we'll rent the components
so first games page component is
rendered and after it game form
component if that's not what we want
then we need to prohibit this behavior
and we can do it by adding exactly
property to match component this way it
matches only exact pattern go into the
browser now and it is fixed so going
back to our form so next each form field
we wrap into div with class field next
specify label for title and define input
element with ID title so the label works
let's do the same thing for cover we
just copy and paste it and change title
to cover and label from title to cover
URL next field contains image for the
cover user paste it's in cover field so
let's add some semantic classes to it ui
small bullet image and last then is
button with UI primary button class so
let's go to browser navigate to games
slash new route and here is shiny now we
need to introduce state for this form
which is going to be changed when user
types data into the form so we define
state and set title and cover to be
empty strings by default now we need to
use the state in our components so let's
add value on change and name props to
our elements so first for the title we
add name to be title value to be these
dot state dot title and unchanged this
handle change let's repeat the same
thing for cover copy and paste it and
change title to cover also let's bind
image tag to cover by setting source to
equal this dot state cover last thing to
do is to create handle
change function so we define handle
change function and inside of it we set
state for field that we get from target
name to equal to target value and as
simple as that we transformed our
mundane HTML to awesome react control
components in the browser you can see
that when there is no valid image our
image tag renders a glance let's add
conditional for image tag to path we fix
it we check if this state cover not
empty and then we ran the image tag
otherwise nothing happens so let's have
a look in the browser nice we do not see
anything when field is empty and we see
nice picture when we paste cover URL so
that's good we create a form main
elements to be controlled by react next
step is to introduce client-side
validation in our case is going to be
very simple we just need to make sure
that both fields are required first we
need to add on submit handler we add on
submit to form tag and point it to this
dot handle submit next let's define
handle submit and run a dot prevent
default to prevent default form submit
behavior alternatively instead of
fighting on submit to form we could add
on click to button now we introduce
another field to our state errors object
which is empty by default will handle
validation right here in handle submit
so let's define local variable errors to
be empty object next we check if title
is empty string then we add errors the
title to be can be empty do the same
thing with cover we just change title to
cover next we set state errors so now we
need to react to this errors by changing
style on our form elements for that
we'll use class names library so let's
go to terminal
and let's npm install - there save class
names at two point two point five that's
the version that I'm using right now so
now back to our form first we need to
import class names from class names to
each validated field we need to add the
following inside of a class named prop
we use class names we specify
unconditional class field and
an object specify conditional class
error which appears only if this state
error is cover exists I use here double
negation to convert cover to bullying
and we need to add span element below
input which renders error itself now
let's do the same thing for cover we add
class names and add span element let's
have a look in the browser and it works
cool but there is a little problem when
I type something in the field it stays
red which I find to be naturally great
experience what I want to do is to reset
validation state for particular element
when user changes its content this is
one simple change going back to editor
let's go to handle change handler first
let's clone errors from state to local
variable we can do it with object dot
assign then we specify empty object and
then this state errors that we merge
with this empty object then we delete a
target name from errors and that means
that every time user changes field
previous validation message is gone and
then we set state and add these errors
as well we can add check and do that
only when there is something in errors
object for this field so like this if
this state errors a target name is it if
it exists then we do this otherwise we
just set state for this particular field
in the state and that will do it now
when we type something arrow state and
message is gone cool okay so we created
form and implemented client-side
validation for it next step is to make
request to server and pass data to it
and that's what we'll handle in the next
episode if you found this video useful
please support my work by liking it
subscribing to my channel and sharing it
with your friends and colleagues if you
have any questions leave a comment below
or preferably on my blog and follow me
on Twitter to get updates thank you very
much for the time and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>