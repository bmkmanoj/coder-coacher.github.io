<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CRUD with Redux #06. Server-side Validation and Record Creation (Part 2) | Coder Coacher - Coaching Coders</title><meta content="CRUD with Redux #06. Server-side Validation and Record Creation (Part 2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CRUD with Redux #06. Server-side Validation and Record Creation (Part 2)</b></h2><h5 class="post__date">2016-12-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/epBEQEjV-_0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi my name is RAM and in this episode
we'll finally finish create part from
crud will implement server validation
render server error on client and save
records and database server Vuitton's
okay before we begin just a quick note
if you want me to get back to you sooner
than later post your comments and
questions in comment section on
Associated blog post so now let's get
back to implement an actual server end
point and with server we need to handle
two scenarios as well validation and
successful record creation so back to
server the J's file and let's add new
endpoint post API games and as usual
callback function takes requests and
response objects we need to validate
data you must always validate data on
server do not ever trust client-side
application to give you good and proper
data so let's define validate function
it takes data argument and let's go to
form component and just copy validation
code from there and also as commented
out and change is valid to true this way
we disabled client-side validation so we
can test server side one so let's go
back to server file and paste this code
here now we need to change this that
state to data and then we return object
with errors and is valid fields in it
now in the route we can call validate
function and pass request that body to
it but before we do it let's cancel log
request body to see what's in there so
back in the browser we submit form and
now in terminal we see that there is
nothing there it's undefined
to make it work we need to install and
setup express middleware called body
parser so let's kill server here and run
npm install - they're safe body parser i
use version one point fifteen point two
after that
let's run npm start again so now back to
server file let's input it and use it we
input body parcel from body parser and
then below app initialization we use
body parser dot jason
so back to the browser we submit form
back to terminal and here we have our
data nice so let's remove our console
log statement and now let's call
validate and pass request body to it and
we deconstruct returned object into two
variables errors and is valid so next we
check if it's valid and if it's not we
respond with status 400 and JSON object
that contains these errors and that's it
let's go to the browser and try it out
submitting awesome we got errors from
server it works because all of the work
we did in previous episode so now that
it works let's roll back our client-side
validation so back to our forum code we
uncomment all these lines and change
true back to is valid and the last thing
is to save data in the database so let's
do it we back to surveyed our JS file so
we get DB collection games and insert
object with title and cover so for that
let's get them from request with can
style and cover equals to request body
now to Mongo DB callback function that
takes error and result of insertion in
case of database error we respond with
500 status and useful global error
message something went wrong in case of
success will respond with JSON object
with game info that we can get from
result dot ops and take first element
out of it and now we need to redirect
back to games list when everything's ok
so for that we'll use redirect component
from react router in this new route
approach we just need to render this
component and it will redirect pretty
cool so going back to our form component
let's populate the first function in our
then handler here we'll just set another
variable on state let's call it done so
we set state done to true and we need to
add it to state with default value of
false now let's import redirect
component from react router next let's
move this whole form into variable that
we call form so Const form equals to
this whole thing and then in render we
check if we are done so if state done is
true we redirect to games we just use
redirect components specify to props and
point it to games route otherwise we run
the form so let's try it out in a
browser feel formed with data submit and
voila we redirect it to games page let's
go to terminal and check it out we run
Mongo we use crud with Redux database
and we find all games with DB games that
find and specify the object and here we
go our newly created game in there and
that's it for today if you found this
episode useful please support my work by
liking it subscribing to this channel
and sharing it with your friends and
colleagues if you have any questions
leave a comment below or preferably on
my blog and follow me on Twitter to get
updates thank you very much for your
time and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>