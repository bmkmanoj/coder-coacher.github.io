<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CRUD with Redux #03. AJAX Request and ExpressJS Server | Coder Coacher - Coaching Coders</title><meta content="CRUD with Redux #03. AJAX Request and ExpressJS Server - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CRUD with Redux #03. AJAX Request and ExpressJS Server</b></h2><h5 class="post__date">2016-11-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kZAlQDxDDas" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi my name is RAM and in this episode
we'll implement a jaques request back
and server to fetch cams collection and
for those we'll create the back end
server itself with Express and MongoDB
also will react to the result of this
request by updating application store
so first let's make ajax request for
that we need to dispatch thank action
from games page components life hook to
dispatch action we need first to have
such an action and second pass it
somehow to games page component so we
want to pass action wrapped into
dispatch call to the component so we can
just call it as a regular function
inside of the component deep mount
components live hook function something
like this these props fetch games for
that we need to pass an object of
actions we want a second argument to
connect function so let's go down to
connect function and add fetch games
there as second argument now let's
import this action from actions file
will store all actions in one file in
this series but in a big application you
might want to split it into separate
files depending on business domains so
we input fetch games from actions file
as we introduced another prop to this
component let's add it to prop types as
fetch games react prop types function is
required now let's create actions GS
file and here let's create thank action
for that we export function fetch games
and in it we return another function
that takes dispatch function as an
argument here we want to make request
and return promise I personally love
access library but in this series we're
going to be with the cool kids and use
fetch which is supported by most modern
browsers accepts I think ie and Safari
so of course in real world you'll use
polyfill to support all browsers so we
fetch API games and it returns promise
if we go to browser right now and go to
games page we see that request is made
cool now we need to create server to
handle it so we'll create our server
right here now climb
side-project this is mostly mock server
but it can be improved later to be the
actual server with a little work let's
create backhand folder and their server
JS file will define the whole server
right in this file just to keep it
simple I can go with this just because
back-end is not the focus of this series
okay so three simple steps first we
import Express from Express second we
initialize application constant
application equals Express so we
initialize Express and third we run
server on port 8080 with a place in 8080
and then as a callback function we
cancel that log run in server and
localhost 8080 also we need to connect a
monkey to be where we are going to store
our data for that input monkey to be
from MongoDB library and let's define
the B connection string to be constant
DB URL monkey to be localhost crowd with
redux this crowd with redux is the
database name essentially and then we
connect to database with manga client
connect we provide URL and callback
function and also let's move our service
starting into this callback so we
connect to database and after that run
the server almost done here last thing
is to define route we define get route
to API games then define route callback
that takes requests and response objects
as usual inside of it we want to career
database fetch games and return it to
the client with MongoDB we do it like
this we get collection games and then we
find all records and then we convert it
to array result of this conversion is
passed to callback function as usual
with no J's first argument is error and
second the result of the conversion in
our case games collection and then we
just respond with jason containing this
games collection nice that should do it
now we need to make it work let's open
you tab in terminal and run NPM in each
- why to create package that JSON file
just for our server next we need to
install packages we use NPM install Save
Express and MongoDB as we use es6
we need to transpile it so let's NPM
install save def Nordmann
to automatically restart server and file
changes Babel CLI and Babel press it
es2015 to transpile es6 good now back to
editor in back and folder let's create
that babel RC file and configure press
it so we define press its to be es2015
so last step let's go to package the
json file for our react application and
add proxy line to it
proxy points to HTTP localhost 8080 this
way all Ajax requests will be redirected
from localhost 3000 to localhost 8080
where we host our server now let's open
package JSON file in backhand folder and
change in p.m. start to node man exact
label node and the server file server
des and that's it
let's run NPM start and it seems to work
now let's go to browser and reload the
game's page in network tab we see that
we make successful request to games and
in response we have games that is now
empty array excellent now just for fun
let's add games to games collection in
database and then rend it on games page
we'll do it quick and dirty just to make
sure it works and finds units later as
we use pure monkey to be we don't need
to create schema models so we can change
our mind anytime which is a good thing
while learning things let's open new
terminal tab and run manga command we
use crud with redux database and then we
want to insert a new record into the
games collection so we run the big games
insert and a simple object just with
title Agricola and that's it we have
game in database so let's go to browser
reload the page and now we see that we
have game in response but nothing
happens on client app yet and that's ok
because we just made request and haven't
done anything with it so we need to go
back to our client code we're finished
with server-side for now for that we
need to get server response data and
dispatch another action this time pure
redux action that sets our application
state so let's go to action da J's file
he
now phage games thunk action lights
process server responds the way we do it
with fetch is in the first van callback
we convert response to JSON and pass it
further optionally we could do status
check here but for now we just return
JSON in the second then we dispatch set
games action and pass games collection
to it now let's define this action Redux
action is a pure function that returns
object with one required field called
type so we define function set games it
takes games collection and then we
return object with type set games and
games collection itself this set games
constant is just a simple string so
let's define it also right here export
constant set games to equal set games
now if you go to browser and reload the
page or follow games link in redux tab
we see that set games action is
dispatched and it consists of type and
games field
cool last step is to make reducer to
react to this action and act accordingly
so back to editor let's open our games
reduce them in reducer we just add case
for set games action and return new
state in our case we want to rewrite
games collection that we have now empty
one so we just returned games from
action itself only thing left is to
input this set games constant from
actions and that's it if you go to
browse and we immediately see that
message on the game's page has been
changed and in read X tab in state tab
we see that now we have Agricole game in
there nice we'll stop here for now and
we'll come back to this index page later
when we finish add a new item to
collection see part of our crud
adventure if you found this episode
useful please support my work by liking
it subscribing to this channel or
sharing it with your friends and
colleagues if you have any questions
leave a comment below or preferably on
my blog and follow me on Twitter to get
updates thank you very much for your
time and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>