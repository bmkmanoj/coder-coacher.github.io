<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React &amp; Redux #06. User Sign Up: Make ajax request via redux thunk action | Coder Coacher - Coaching Coders</title><meta content="React &amp; Redux #06. User Sign Up: Make ajax request via redux thunk action - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React &amp; Redux #06. User Sign Up: Make ajax request via redux thunk action</b></h2><h5 class="post__date">2016-06-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SX5HkOP-LWs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome the goal of this episode
is to send data from forum we created in
previous episodes to the server so let's
open sign up form component that we
created earlier and here on submit
instead of this console Deathlok we're
going to use access library to make post
request to API slash users with data
user as this state okay so when we
submit in the form we make it a post
request
so let's input access from access here
save it and of course we need to install
it so we'll do NPM install save access
okay let's run seven open up browser
reload the page and let's try to sign up
ok we make it post request as you can
see here with all relevant data nice
we've done that was the shortest episode
so far but we'll use readouts for store
management as well as for firing up
actions basically Redux gives us actions
so every time something happens in
application action is dispatched this
way all changes are governed by them
which is very convenient and our
components just call functions and pass
data to them without knowing what's
going on
so at last we need to install and setup
redux we don't need to store anything in
global redux tool for this feature we
only need to use actions for now but to
install it we still need to define store
so we need to make two things first we
need to wrap our application in provider
component so let's open client index
file and we need to wrap this router
with provider and the second thing we
need to setup Global redux tour which is
going to be empty for now ok so let's do
it
so first
let's wrap this router component and to
provide a component and this provider
component takes store which we're going
to define in a moment okay and here I'm
going to close it so the provided
component is given to us by react to
read X so let's import provider from
react read X ok the next step we need to
define this store so we define constant
store equals and for that we're going to
use creates to a function from redux and
it takes several parameters so the first
one is the route reducer and reduces
just a function which takes state and
action and returns new state so in our
case this function takes state which by
default is going to be empty object and
it returns to this empty object State
very simple next parameter could be
initial state but we do not need and we
do not have one yet so instead we go
right to the third parameter where we
can apply middleware and this apply
module function is provided by redux and
we need to apply one middleware that
we're going to use right now that's the
func middleware and thank middleware
allows us to dispatch a synchronous
actions and we'll see how to do that in
a moment
so now let's import all this stuff so
we're going to input thunk from redux
thunk and we're going to import create
store from redux ok let's save it now we
need to install all these packages so we
npm install Seyfried ax react reacts and
redux
thunk ok let's run our serve a game
let's go to browser reload the page and
see what's going on about fly middleware
I forgot about this so we imported it
from redux as well
- browser reload the page okay no errors
excellent we're good to go now read acts
is installed setup and we can use its
features so back to sign-up form here
instead of making actual requests what
we're going to do we go into call
function which will store on props so
we'll make this props and function is
going to be user signup request and we
pass this state data to this function so
we do not need to have access here
anymore as we expect this component to
have this function pass to it let's
define prop types so right here the
bottom and we'll define sign-up form
prop types equals an object and inside
of the subject we define user signup
request to be react prop types function
is required okay so now if you go to
browser below the page you'll see that
we have a warning which tells us that we
need to pass this function and we need
to check the render method in signup
page so we go up to the signup page so
let's open it up right here we have a
signup form we need to pass user signup
requested user signup request so now we
can see that we actually need to have
this function as well in this component
it's signup page component we'll take it
from props here user signup request
equals this props and we expect that
this component will have it so let's go
back here and let's copy this prop types
and paste it right here change in form
to page okay so this component also
expects this function to be passed but
from where this page component gets this
function it takes is from redux itself
and we'll use connect hi all the
component to provide this thunk function
component so let's add connect here like
this and connect function takes two
parameters first one is map state 2
props which provides some piece of data
from redux stone it takes state and
returns object so let's just create an
empty one so it take state and it's
going to return empty object for now we
do not need any state from redux for
this particular component and for this
feature but we need to specify second
parameter which is map dispatch to props
where we specify action creators wrapped
in dispatch we'll use shortcut version
of defining it simply by providing
object with action name and action name
is going to be user signup request so
now we need to import connect from react
redux and we need to import our action
from actions we're going to create this
folder signup actions like this so let's
create the signup actions file setup
here I'm going to client folder here I
define actions signup actions digest so
we export function user signup request
which takes user data and then to use
thunk window where instead of object we
return function in which we can make
anything we need and this function takes
dispatch receives dispatch which we can
use inside of this function to dispatch
and other actions but right now we just
return promise of access making post
request so we do the same thing that we
did in a component previously we'll do
API users and we pass user data and of
course we need to import access so let's
try it out I'm going back to browser
reload the page no errors so far that's
a good sign let's sign up we make in
post request
X
it works with all relevant data and we
use redox thunk actions for it
excellent that's exactly what we wanted
to do and last one final touch in sign
up page here where we define connect and
we making this map dispatch instead of
it we simply can't pass now okay so it
still works let's commit so sends data
to server via redox thunk action and
that's it for this episode thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>