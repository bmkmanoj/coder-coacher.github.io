<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build Real App with React #11: Internationalisation with React-Intl | Coder Coacher - Coaching Coders</title><meta content="Build Real App with React #11: Internationalisation with React-Intl - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build Real App with React #11: Internationalisation with React-Intl</b></h2><h5 class="post__date">2017-12-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/RbsH7V437tE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome back to the series will
rebuild real web application with
reactor edicts and no genes so we're
gonna continue where we left off so we
finished with as you can see here we
finished with the initial loading stuff
so now let's get down to authorization
and we're gonna use react Intel and I
opened here the reactant to
documentation the the actual github
repository so what are we gonna do what
do we want to achieve the bare minimum
stuff so we want to translate messages
translate any kind of labels on our
website and we want to change like
health so from English to Russian and
back so let's do just that
okay so let's start with the app
component so here we're gonna wrap the
whole application into the Intel
provider so for that of course we need
first to install with yarn add react
into okay and after we've done it let's
input let's input Intel provider from
react gentle so now we can use this into
a provider and we can wrap everything
into it so we'll do inter provider
provider and I'm gonna just cut this
closing tag and paste it here so this
until provider can take what help and
let's set it to row okay and another
thing that you can take it can take is
the messages object so let's add it
right away so messages and that's going
to be just an object and this object
will have the key is the idea of the
formatted message which we have and the
value is the actual translation so for
Russian we'll have for example nav
dashboard so the dashboard stream that
we have the navigation bar and that's
gonna be an L
properly Nia okay
so but that's not it so we we set up
locale but we need to you know we need
to load look how this particular locale
so we do it with the add locale data
function so let's do it in index because
we initialize everything in index and
also we'll check in local storage for
the saved language so let's add here
let's first let's import it so we're
gonna import add locale data from react
into and we need to input the lock house
themselves so we put in from reacting to
locale data slash in and the same thing
we do with Russian language and after
that we'll just do add locale data in
and rule okay so let's go to the browser
let's have a look it's it still works no
errors that's nice this rare occurrence
that we have no errors so next we can
use the formatted message component that
is provided by this library so we can go
to the top navigation for example and
let's import formatted message component
from reactant tool and now instead of
this dashboard we're gonna use formatted
message and it takes two arguments that
are required for this work properly the
first one is the ID that's the one that
we specified in our messages let's
bye-bye this train it will be searched
this object of translations so let's uh
nap dashboard for us and the second one
is default message default message and
that equals to dashboard so if we go
back here you can see now that we have
Russian Poland Romania Pineda pravinia
instead of dashboard that's good that's
good
of course we need a way to switch
between languages so right now if if we
go back here you can see that in app you
can see that we hard-code this locale
and messages right here in the component
that's not good what we want to do we
want to take it from the state from the
Redux store and we also want to store it
in local storage so if user if user once
changed language we want to store it and
you know use this language okay so I
start with the Redux stuff so first of
all we need to have it here so where do
we expect it in this state we can have
the separate object locale in the state
but here all we need to have is language
for example state what he'll want and so
now we expect in here to have line and
that's gonna be a string I need to add
comma here and I'm going to get it from
here as well so that's gonna be lined
and I'm gonna use this link instead of
hard-coded good so now we need to define
this so let's go first of all let's go
to a root a reducer and here we're going
to define locale let's duplicate this
stuff hell good and now let's create in
reducers let's create a little reducer
yes reducer and here by default that's
gonna be lying equal to English let's go
back a lot of page we still have in
Russian let's go to redux do we have
yeah
we have out land in so that doesn't
work so let's go back to app so we hey
we haven't here the land oh yeah that
doesn't work because we always specify
that nav dashboard equals to this stuff
so we need to change our messages as
well so instead of this we're gonna have
messages and why
in put it messages messages line okay
and we gonna and we going to import
messages from let's say messages right
from here okay so now we need to create
one
so in current flow in current file
folder we're gonna create messages that
GS and we're gonna export default object
inside of it will have English and
Russian and here we'll have nav dot
dashboard that's gonna be dashboard and
instead of Russian will have the nav
data dashboard equals to thumbnail probe
Linea okay so now we go back now we have
dashboard that's cool that's because in
the state in our redox state we have the
English by default so now we need a way
to change it so that's easy right but
the most difficult thing here is
actually to find a place where to add
this links so right now I'm just going
to do it right here in the in the top
navigation bar now we'll think about it
later how maybe to style it and maybe
used some flags something like that so
for now let's go to top navigation and
here before this uncontrolled drop down
well that's that a couple of just links
a role button and we'll have the link
English and the same thing goes for
Russian
okay and we'll let this separate here I
have no idea what I'm doing it will not
work here it will not work it's just
ugly yeah I need to have this formatted
but it's good it's good
we'll start it later right now I just
want to switch language and see the
magic of you know like the whole
application just translates itself of
course for that to work we need to
actually go through all the messages in
our application and from now on as well
use formatted message instead of just
simple Spanish with thieves so here what
I want to do I want to inspection out
action set in the language so there's
going to be a thunk action because we we
want up also to store this in the local
storage as well so I'm gonna just input
settle account and can I import settle a
cow from actions locale now I'm
expecting it here as well so we'll have
set locale probe types function and now
when user clicks on these buttons so on
click we'll have the base props no not
this props it's a functional component
right no this is a class component okay
these dead props that set locale and we
just passed down the value so for
English we have in for Russian we have
rule so now we need to define the set
locale for that we need to go to the we
need to create we need to go to actions
let's create a cow a J's file and here
we'll define sunt action there's gonna
be set what L it takes language will
need to have a dispatch and here
actually will we will not make any kind
of a synchronous requests but we'll use
the local storage so we'll have
and we'll set what how for this
application we'll set an L hub language
equals one so we just store it in the
local storage this way and after that we
want to dispatch what Cal Cal set and we
pass down language here so now we need
to define exports constant
look how set so it has language and it
have the type icon set and language now
we need to import local set from types
and now we need to go to types and types
and let's add here the local set okay so
now we need to go to reducer hotel which
is a lot home and here we need to import
what all set from types and here case
like Al Sadd so very standard stuff
we're gonna return the land equals to
action land okay so basically switching
between the hotels and storing the
language in the local storage so let's
go back to to the browser let's switch
to Russian and here we go English
Russian Russian English Russian it works
nice but now I'm in Russian language but
if I reload the page each will go back
to English because we store it in the
local storage but we never use this data
from it so we need to go back here let's
go to next a J's file and instead of
here we'll check so if we have local
storage
I'll hop one
set to something then we want to store
what he'll set and reset it to the value
that is there so we set it to local
storage that I'll have one so we need o
dispatch dispatch like this and now we
need to input it so we input log count
said from actions and now as you can see
when I reload it we have Russian
language because it is stored in the
local storage now if I go back to
English it's English and if I reload the
page it's still English how cool is that
so now our purpose is not to forget to
use formatted message component
everywhere which we use translatable
messages and later we'll we can just use
one of the scripts to get all this data
from the formatted messages components
and have the whole thing that we need to
translate and just translate it and
we'll have the bilingual or trilingual
application as easy as that so and it's
pretty cool so it's fast no page
reloading nice okay so let's go back to
our cart here so we set it up guest
changes language okay we set it to the
user so that's good but we do not have
the guest change this language yeah
that's that's a bummer because when we
actually log out we don't have any kind
of stuff here but that's okay I'm just
gonna delete it and just like that we've
done because for the guest users for
public pages we will do other stuff and
we'll just reuse the same links that we
have for the users okay
so that works
this feature is completed
so let's commit changes simple I
eighteen and done okay so let's take a
break right here because we finished one
simple feature and if you liked this
video please hit the like button
subscribe to this channel if you still
not and share it with your friends and
family if you want to support me you can
become my patron or just give me one
time donation by paypal and the best way
is just to buy my course on gs full
starter calm thank you very much for
time and see you in the moment</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>