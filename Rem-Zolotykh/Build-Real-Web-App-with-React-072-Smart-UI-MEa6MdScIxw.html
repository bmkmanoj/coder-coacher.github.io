<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build Real Web App with React #07.2 - Smart UI | Coder Coacher - Coaching Coders</title><meta content="Build Real Web App with React #07.2 - Smart UI - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build Real Web App with React #07.2 - Smart UI</b></h2><h5 class="post__date">2017-09-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MEa6MdScIxw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so here we'll have the segment and
inside of this segment we'll have our
own content so there's always have each
one like add new book to your collection
and after that we'll have search book
form for now we're not going to pass
anything we'll build in iteratively so
let's import a search from a forms
search book form now let's go to forms
and create search book form the GS
there's going to be a class component
it's not our usual form that's why I'm
not using the my snippet for the form so
what this form will have the first of
all it's gonna have query by default is
an empty string and that's the only feel
that this form will have other thing is
loading by default is false and the the
component itself is going to be the drop
down the drop down element and this drop
down element actually can have loading
state which is pretty cool and it will
have options now let's have a look
so options is just the array of objects
so the object will have key each will
have value and it will have some text
like first book okay and let's create
another one just so we can test it out
so these how options looks like another
thing that we'll have in our state here
is books hash so what we gonna do we're
gonna when user types we will send
requests to our server our server will
pin the Goodreads API and get back data
from it it will parse this data and feed
it to us and we get this data and will
populate options and books
so this way when user chooses the book
we do not need to make another request
to the server we already have this book
here in this collection so we'll take it
from here and we pass it down to the
form so you will see how it works in a
moment ok so now this is the state that
we have so we all need to have here the
form and inside of this form will have
drop down field so this is gonna be the
search field search it's gonna be fluid
flu just mean that it will stretch to
the whole parents segment that we have
let's add placeholder to be search for a
book by title and then we'll have
separate things so the first one is a
value of course so this state query is
the value and then two unchanged stuff
so we'll have on search change and the
simple change and unsearched change
means that when user types something
into the fields and unchanged is when
the user selects something from the
options so here we'll have this on
search change let's implement this on
search change equals it takes event and
data so what do we want to do here
basically what I like to do I like when
user types and when user stops typing we
making the request so we have some kind
of for example one second after user
stop typing we make the request so to do
that we'll have something like this
we'll have the timer like this time and
in this time I will store the timeout
JavaScript timeout data and we're gonna
clear this every time user types so
we'll have clear timer timeout from this
time
after this we're gonna set state so
first of all Loudoun is not logging I'm
sorry so we're gonna set state query to
be to equal data but ya to equal data so
there's gonna be the the theme that user
typed so we save it in the into the
state and query field and after that
we'll do this timer equals set timeout
the first argument is the method that
you want to run after this timeout span
so it's going to be these fetch options
because that's what we want to do after
we stopped app and we want to fetch
options for our drop-down drop down and
we're gonna wait for one second so now
we need to add this fetch options okay
so here where we going to make the
request for now let's just make this sad
state first of all if this if not if not
this state query so if it's an empty
string we do not do anything so we do
not want to send request to the server
when for example user clears to the
field but after that we'll do the
request but first that when before we do
that we actually said the Loudoun to
true and then we'll make the
asynchronous request to the server in a
moment okay so we need to import form
and drop down from semantic UI react and
segment in you book page I forgot to
import segment from semantic you are
react ok so now we have had new book to
a collection here is our drop-down and
as you can see right now no results
found so but when we type we stopped and
again nothing happens so let's have a
look
going on no errors whatsoever hmm
okay so let's have a look what's going
on out of course options I need to add
these options to the Dropbox options
drop-down these state options so now
it's reloading and when we selected we
have first book here good so any one we
type something and we look while I'm
typing nothing happens but when I stop 1
seconds pass and again nothing happens
okay where I screwed up this time set
timeout this fetch options second fetch
options give this state data yeah so
again I need to add Loudoun state here
Loudoun equals this state Loudoun let's
reload and try it again one more time
there's how apps are developed through
trial and error so while I'm typing
nothing happens I stop one second and
you can see that we have Loudoun States
so we can make here we can we should do
the request ok so we now we know how it
works so we do not need this option here
and we need to make the request and here
we could again dispatch thunk action or
we could be very lazy and make requests
right from the component itself and
we'll do this I don't care I'm just
gonna do this I'm gonna input access
from access and I'm going to make the
request right here after I set state
load and true I just do access get
request to the API books search and I
will change it to this interpolated
strain of s6 and I'm gonna add query to
be equal to this state query so
that I expect the response and I'm gonna
response data there's gonna be books and
after that I will parse a little bit
this books response but first before we
do that we'll go to the server and
implement this mock API so now here if I
type something and if I go to the
console here in network we making the
request to the search as you can see
here search with the jibbers that I
entered here good so let's go to back
and fold this is my back-end code let's
go to index GS and here let's introduce
another route books and we mount it into
the books API so now let's create box
route GS we define route and inside of
it we define get search and here we're
not going to do anything in this session
today so in the next one we need to
implement authentication for this round
firstly and then we will implement the
actual request to the Goodreads API but
right now we will just market and I have
here in my Evernote if I can access it
okay so here in Evernote I have the data
that I want to have so it looks like
response Jason there's gonna be books
and I'm gonna paste it here so that's
what I want to have so I will make the
request to the Goodreads API will parse
it and in the end I will have something
like this
so each book will have this data it will
have good roots ID just for the
reference it will have title it will
have authors we'll see what we're gonna
do with authors but for now there's
gonna be just a string to keep things
simple but for covers I will have the
array of urls two covers two different
towers and
we'll have the number of pages good so
right now we have two books that will be
returned to us so when it happens we're
going back to our react application so
we're happy when it happens we have
these books here so now we can parse it
so we'll have another than it takes
books and here what we gonna do first of
all we need to have options and that's
gonna be array and second we'll have
books hash and that's gonna be an object
and now we're gonna each write books for
each will have book and what we gonna do
so first of all we need to to add this
book to our hash so we'll have books
hash and here we'll have book Goodreads
ID Goodreads ID that's the ID because we
do not have this book in our database we
so it doesn't have any kind of ID in our
database we're gonna use Goodreads ID
for this purposes and that's gonna be
book just book so this will form books
hash and another thing is options and
their options and we're gonna just push
another object with key of book
Goodreads ID with value book give to its
ID and with text to equal baggage title
and after we've done this we'll just set
state this sad state will say that
Loudoun is false we've done with Loudoun
options is options and books are books
hash so what's wrong with this thing
here never used okay just something
going on with my laptop right now
okay so now if I type anything and I
stop we'll make the request but we
happen and I think if I search T
something on the onion goodnight proxy
so let's go to here couldn't find proxy
to to to to to do here we have an error
oh that's an error in my yeah right here
of course no semicolons here
okay let's try it again let's reload the
page and let's type something it doesn't
matter what we type but basically we
have this two books ninety four and
three men in a boat that's so of course
in in a real application what we type
here matters right now matters only one
we type for this particular two things
two books that we have so we almost
there so now when user clicks here we
want to handle this event so now nothing
happens so it click nothing happens so
first of all we want to populate this
search the query and second of all we
want to take this book from the
collection that we already have and pass
it down to the form book form that we
will have here okay so for that we need
to define another thing as on book
select for example and we'll have book
and we'll do this set state book so this
way we pass it down here on book select
the days on book select now search book
form here now we need to define it so we
define a prop type on book select that's
going to be function so we need to have
products here and now we can use it so
here in drop down will use on change
equals this on change
guys so let's define it here and change
equals also event and data and first we
want to update our query so we'll do
this set state query equals data and
after that we want to take the not just
data but data value and after that we
want to sort it so this data value is
the value in option here and this is
going to be the book Goodreads ID of the
book so we want to this props on book
select and we want to provide the book
itself that we selected not just the ID
of the book but the book and we store
books in this hash so we just do this
state folks and we provide data value
like this so now in a new book page here
we'll check right here we'll check that
if I'm typing if so if we have this
state book then we'll have book form and
we passed this book form will pass
submit there's gonna be this let's say
add boob and another one is gonna be
book itself this state book
so now let's define add books for now
there's gonna be just so we have some
something here like but we just canceled
up log a I so that that's where we going
to dispatch new action and populate our
redox tour that's what we're gonna do
later for now we just have this dummy
method and of course we need to have the
book form so let's import book form from
forms forms book form so let's create
one forms book form yes
there's gonna be our forum so I'm gonna
use my snippet here so it's book form
safe pretty good so what do we have here
so first of all here we have submit and
book itself and book itself is is the
shape that we defined in our right here
right in our back end so I'm gonna just
copy this stuff from here going back
here and in a shape I will just paste it
and what I'm gonna do is I'm gonna set
that this is basically strings
most of them okay so I'm gonna delete
this stuff from here and this one is
prop types number so let's have a look
so good reads ID I think it's gonna be a
strain title strain all the strings but
covers array of strings so I'm gonna
have here string okay so now we defined
books the book that this form has so in
data we also have the same thing so I'm
gonna just copy it as well from here and
pass it into data but instead of this
information will have this props book
and then we'll just have Goodreads title
authors covers and pages but we do not
want to have covers because this is the
data that we will post to our database
to our server and we will store with
these data this particular dating in our
database we do not need to store all
covers we need to only one cover for a
book so that means that we're gonna have
this here cover and we'll take the first
one and covers themselves will be will
be stored outside of the data structure
so we'll have covers these props covers
okay
so now we have data just like covers is
missing in props validation yeah covers
is gonna be an array of string vs BTE
string and here I will have just the
strain itself because there's not gonna
be a covers but a cover so I'll change
it to string and we're gonna remove it
like this so now it's valid okay so we
have the form to do that like ours I
know that's me that's not correct
this is this is correct book covers
already okay now it's good and we do not
actually have this covers that's my bad
both powers oh man I will not cut it out
I will not gather you will see my pain
here like how stupid I am okay so now we
have data for our form so now we just
need to define this form for validations
will do if not data title errors title
equals can't be blank and we'll do the
same thing for authors and the same
thing for pages and now we ready to
define these things so what are we going
to have we want to have the two columns
in one column will have this field and
another column will have the cover so
for that I'm gonna use another segment
around our form and inside of the form
will have grid so we'll have grid and
this grid will end here and this grid
will have columns too so just two
columns so now after that we'll have
grid row inside of this grid row will
have grid column the first one and after
that this button is well we're gonna be
in greed row like this and in grid
column will have basically two grid
columns so the first one will have these
three fields so let's do form field
first one is title so book title I'd
stacks placeholder title what do you
think unchanged without any changes so
this is the first field the second field
is going to be the author's so book or
authors text as well placeholder authors
unchanged and the third one is going to
be filled pages number of pages here but
there's going to be a number
no placeholder here and unchanged we're
gonna change this unchanged because
right now this and change handles on
only strings but we need to unchanged
number because we have numbers so I'm
gonna copy this thing here and I'm gonna
change it to change unchanged number and
I'm just gonna enclose it into parse int
and add 10 to it okay so this is the
first column and the second column great
column column we're gonna have the cover
image cover so we'll have image we'll
have the size small and the source is
going to be data cover okay so now we
need to have grid and image import its
to your so we'll have grid segment and
image tip doop doop good so what do we
have here so now I'm gonna again three
men in boat okay I have it I have the
the form but I do not have any kind of
data here for some reason no half so I
have it actually but we have very bad
design and that's also why I prefer to
do it this way so it's mobile-friendly
right of the box not on a huge screen
you know so yeah we we can see that this
design is not good at all so what we can
do with it so for that so let's add for
the greet I think we need to add fluid
if it has it I'm just improvising right
now and maybe maybe maybe yeah let's do
it like this and maybe stackable as well
let's see doop doop doop three-man boat
nope doesn't help stackable
Oh columns to okay that's embarrassing
right yes
nuts okay so we chose the book and we
populate it so we show the foreman we
populated it with data nice so if we
make it larger it will be like this
good so what we can do now now we have
another problem here so if we change it
to another book nothing happens and that
is because we initialize state right
here when we create this component but
when we change state here change the
book the we pass the props that props
are changed but there is nothing here to
change the state the state is the same
as it was maybe so for that we're gonna
use competent will receive props so this
method is called everytime that the
component receives props and we make the
next props for that so this is the props
that it receives and we still have the
ability to get these props and there's
going to be old props that we that will
be replaced so we can now you know
compare props to each other and have the
logic in here but we do not need to do
it for this particular case here we just
do this at state and we set in that data
is equals to the same thing as here with
one exception we do not need to have
this and covers as well actually
without this so it's better to extract
it to another method right here on the
object and and initialize state through
the method so let's have a look we have
this and now we change it and we have
another book good it works so the last
thing here that is left is to cycle
through the covers so we want to display
this a link or button only when we have
more than one cover and then we want to
cycle through the covers if we have more
than one basically so for that we need
to have index and we will just use this
index to cycle through the through the
collection so first of all here in our
form right below our image let's add the
condition so if this state covers length
I can use data right is more than one
then we'll have link so we'll have h H
ref this thing or we can use it like
roll button button and tabindex 0 and
here we'll have the on click and click
and there's going to be this change
cover
another cover something like this I
think so if we go here you know okay
did the courage to do to to cannot
report a landing good the of on define
data course
oh now of course it's not in data this
state covers okay let's light Union but
that's not an excuse not an excuse so
here is another cover so now when we
click on it we want to change the cover
so let's implement this method three
quickly it's gonna be very simple change
cover equals and what we want to do so
first of all we'll get index start index
and covers from state this state so we
do not have index right now so let's add
it to our state alongside covers here
index equals zero so this is the same
index that we use here now we need to
calculate new index so we'll have new
index equals so if index plus one is
more or equal to covers length then we
do we set it to 0 otherwise we set it to
index plus 1 and after this we set state
that state will have index we set it to
new index and data cover so we have data
and we have this state data and we
overwrite cover with covers new index
like this so let's have a look
test it out
looking for the book BAM
change cover yeah it works nice so let's
go to another book and we have era oh no
we do not have her he just loads good so
what we done so far so now in a
dashboard we have this call to action
when we go to a new book we have the
search when we start searching we have
the list of books we can choose any book
from the list when we choose it we also
populate it we can make some adjustments
for example pages maybe you have another
edition with other kind of pages another
number of pages so you have the e-book
and then we can change cover and then
that's it then we need to have this site
functionality but we'll stop for today
and we'll continue where the backend
stuff in the next episode ok thank you
very much
if you like this video please give it a
thumbs up subscribe to this channel
share it with your friends and if you
feel generous go to my patreon page and
support this channel financially and
also get for this access to the private
community where you can ask any kind of
questions and discuss any kind of topic
that you want thank you very much for
your time and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>