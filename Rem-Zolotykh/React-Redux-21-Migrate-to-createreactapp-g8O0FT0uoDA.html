<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React &amp; Redux #21. Migrate to create-react-app | Coder Coacher - Coaching Coders</title><meta content="React &amp; Redux #21. Migrate to create-react-app - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React &amp; Redux #21. Migrate to create-react-app</b></h2><h5 class="post__date">2016-09-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/g8O0FT0uoDA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome do you remember the time
when we spend first four episodes just
to set up everything we need that was
fun but now we have excellent models and
just pure awesome create react a package
from Facebook that gives us fast and no
need to know a thin way to create new
react applications so in this episode
we'll look how to use it and which is
more important will migrate our custom
setup to create react app way so first
of all we need to install it and we
install it globally create react app so
here is and now we need to do is just to
make create you guessed it react app and
then the name of the app and we call it
al client so what is this
al online stuff you wonder well I'm
gonna pivot this project to another one
which is similar and can be more useful
but I'll tell you all about it a little
bit later and inside of this folder al
online we create a al client because
before that we had the whole application
with server and with client in one
package so we had our Express
application and inside of this Express
application we had web pack middleware
that served client-side code so this
time we're going to go different way
we'll have react client application
independently and we'll have Express API
independently as well so here we just
create al client like this and that's it
just one command and we have direct
application so let's city into it and
let's run and PM start and that will do
all the job that we did before and a lot
of more useful stuff that we did so now
if we go to localhost here you can see
welcome to react and we have react
application up and running the best part
is you can inject from it so you can run
npm inject and that will implode and
just install all dependency directly and
all configuration files so you can look
through them read through them and learn
a lot of good stuff so i actually
recommend
to do just to read through the web pack
config code it has excellent comments
and neat tricks but for the most
purposes if you're not interested in it
you won't need to do that so now let's
use this setup and migrate our
application to use it this is our client
application so if we could just see into
it we have the source folder with a
little bit of files and we have
package.json and that's pretty much it
so let's remove everything from source
yes I'm pretty sure now it's empty and
let's copy all files from vlog red dice
client folder that we have here and
we're going to copy it into source like
this so now we have all our files here
let's just for fun let's try to run NPM
start and we have a lot of errors and
most of this errors are actually can't
resolve module because we use a lot of
modules in our application so let's
install them so we'll have in payments
though we're gonna save them and these
are react router react Redux Redux funk
Redux Geordi code we use on client
access short ID low - class names and
validator cool okay let's try to run it
again okay now we have another problem
with validation we have no module signup
so before that we reuse them in client
and on server but now we can't do that
so easy so we're gonna just copy
validate input function so let's do this
open editor and let's open signup form
and right here we require validate input
all right so let's remove it and let's
just read the Senate feature from Veeam
we're gonna read from blog read dice
server shared think yes validations and
we have signup validation here okay and
here we have validator
and is empty and here we have our
validate input function okay let's do
the same trick with login so let's open
login form and let's read login right
here okay
let's try to run it okay we have compile
error and of course because I just read
everything from file
we can't expert default we just define
this function let's do the same thing
with sign up form here so we just define
this function but we do not export it
and also in login form we need to remove
this validate input from here and let's
read again and then start okay that's
good it's working
we have several wind messages because we
define is load in an ID but we do not
use them so that's a good way to fix
them so in an event form and in flash
message so let's do it pretty quickly we
go into event form and here we have this
is loading right here we define it but
never used it so let's actually use it
in our button here so we'll have
disabled equals is loading okay and then
another one was flash message flash
message we have the same thing here
IIT let's remove it from here and now we
run it again
we should be good and we good nice but
now if we go back here and we roll page
nothing is there and that because we
actually need to do one small thing
let's open index dot HTML file and here
instead of this root here we're going to
use app because that's what create react
app expects and now if we try to run it
again no errors and we have our
application the only thing left is the
bootstrap so let's set it I'm gonna open
my blog read dice server index dot HTML
file
just gonna copy this bootstrap file
right here mr. flink so now the last
thing just started again and that should
work how cool is that
of course if you try to do any kind of
request so for example I'm trying to log
in and I'm making requests as you can
see here and it's not found of course
because we have no server so now we've
done with client for now and now we need
to create separate server so let's do
that another tab here let's create new
folder a el server and inside of this
folder let's create another one source
and we're gonna move copy from blog red
dice server everything from here to
source folder recursively of course okay
so now we have this source folder with
all our code also we need to copy
package that JSON file right here and
now we need to make some changes so
let's open editor and let's first of all
let's open package that JSON so the
first thing first we do not need a lot
of stuff here we do not need web pack we
do not need react so let's delete
everything that we do not need
we still need is 2015 because we use es6
with express we do not need loader here
and from dependencies class name dropped
code and everything with react like this
okay now here where we have our start we
have node man and we watched server now
we do not need to differentiate we just
serve everything inside of this folder
and we change server to source just to
have consistency between our
applications okay so now let's run and
p.m. and stop okay done now we need to
make some changes so let's open into the
GS file and actually I noticed that we
have index.html we do not need it so
let's just remove
source index dot HTML so first of all we
need to remove everything that is
related to web pack and react from here
we do not need and we do not use it
anymore all we need to have here is only
server-side stuff
so now compiler here we're not going to
redirect everything to index.html for
now maybe later also let's change port
from 3000 to 8080 because on the 3000 we
have our client application and we need
to change it here as well okay so our
index file is much cleaner and shorter
which is a good thing so now what about
migrations as you can see here in our
tree we do not have migrations because
they were outside of the server folder
it was in the root folder well it's
better to move them to source folder as
well because when we deploy application
we needed files also to be deployed to
server and we need migration to be run
on server so let's copy also recursively
blog read dies migrations and we're
going to copy them into source okay we
have migrations only one migration so
far and also we need to copy the
connects file and we place it as well in
source folder okay so now we have text
file and migrations so that means that
when we run connects command from root
folder we need to specify where our next
file is located because now right now we
try to run it I don't know let's try
connects migrate latest you will say
that we do not have any text file so we
need to specify it with the command
connects file and to save us some typing
in the future let's open package the
JSON and here in scripts let's add did
be migrate command and this command is
going to run connects migrate latest and
we specified next file to be in source
connects file okay and also we can
specify environment which is a good
thing but we'll talk about environments
later when we get to testing okay so now
we have our migration but let's first
let's open connects file itself and
let's change this red dice database to L
online series because I have actual
production application that I'm working
on right now
also the bookshelf file the bookshelf
configuration it depends on this config
file and before that we used connects
file up in the folder in the directory
tree so now we need to delete this dot
and to use it from the current directory
okay so now if we try to run that NPM
run to be migrated what happens is we
have an error because we do not have
database which is exactly what we want
so it works so let's create this
database with create DB L online series
and now let's run migration and here we
go we have our users migration
successfully run that's nice also we
need to have the babel RC file babel RC
because we use es6 with babel so we need
to define presses to be yes 2015 of
course we do not need to define a react
present so let's try to run it npm start
and we have an error babel note i think
yeah added because of a mess up let's
add source folder for watching and then
we execute people node let's try it this
way
so npm start and we run in a local host
excellent that's a good news so let's
try it out in browser so right now if
you reload the page and we try to submit
this form will still have the 404
because react right now makes request to
the local host
thousand but we serve in our API on the
port 8080 so we need some kind of a
proxy and that's very easy to do with
the latest create react application
package so all we need to do is to go to
our client-side application go to
package JSON file and here just add
proxy option and point it to HTTP
localhost 8080 and that's it how cool is
that
so now if we run how's our client-side
application and let's try to sign up and
voila
we have it let's try to log in so
everything works we totally migrator to
create react app way of doing things so
now we don't need to care about build
system all this stuff is handled by
create react app and it makes it easy to
deploy the production as well if you go
for example to Al online dot Roo you
will see this same application online
because I already pushed it to
production and it is hosted on
digitalocean
so it has the same functionality that we
have now but we'll talk about the point
and now the episode some day in the
future so thank you very much for time
and if you found this episode useful
please share it with your friends and
subscribe to this youtube channel or
follow me on Twitter to get updates
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>