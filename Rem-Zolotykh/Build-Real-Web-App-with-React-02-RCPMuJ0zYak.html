<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build Real Web App with React #02 | Coder Coacher - Coaching Coders</title><meta content="Build Real Web App with React #02 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build Real Web App with React #02</b></h2><h5 class="post__date">2017-09-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/RCPMuJ0zYak" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi my name is RAM and welcome to the
second episode of the series where we
develop real-world web application with
reacting OGS and the whole JavaScript
stack so in this in this session today
what I'm gonna do what I want to achieve
is to make a synchronous request to the
server and to set up server for that and
then respond with error message and
display this error message now log in
form and in the next session we're gonna
wrap up this login functionality by
implement in the JSON web token
authentication itself but before we
begin I have a small announcement some
of you asked me how you can support me
and my work and now I listened and I
created patreon page so as you can see
here it's a beautiful one and I have 0
patrons right now so you have a chance
to be the first one so if you want to
support me and you have the spare buck
please go to this page and make your
donation also I want to create a very
small but dedicated and focused
community of people who really motivated
to learn JavaScript to learn web
development to talk about it on the
forums so when you donate you get access
and invite to my own private community
where you can ask your questions
regarding my courses regarding my
screencasts articles propose your ideas
for future episodes etc this community
will be my priority when I communicate
and answer questions because I really
hate a youtube comment system it's just
very easy irritating so if you want to
support follow the link linked in the
description below and yeah now this out
of the way let's get down to the
development so now right here we have
the login page and what we want to do
when we login when we submit data we
want to make a synchronous request to
the server and to do that in redux we
use Redux thunk actions and for that we
need to set up all the Redux stuff so
let's go to terminal and let's earn add
Redux react reacts to connect react and
redux and redux thunk
for a synchronous and actions with side
effects so now in editor lets go to
index the GS file and I'm going to do it
right here in this file later maybe we
will extract it into separate one but
for now we are safe to do it right here
so first I'm gonna import create create
store function and apply middleware
function from redux so create store
creates Redux store and the stories that
the most important stuff right that's
why we actually use Redux and apply
middleware middle we're allows us to use
thunk maneuver also will need provider
higher-order component from react Redux
to connect Redux and react and we need
to have funk from redux funk like this
ok so let's create store so I defined
constant store this the result of the
function create store and this function
takes two arguments the first one is the
root user and the root user will be the
whole tree right the whole state object
that will be used via compiled users and
the second one is apply middleware and
we apply min or a thunk like this
another thing that I really want to
install is Redux dev tools and we're
gonna install and set them up in a
minute but first root reducer so let's
define let's input reducer from root
reducer and let's create our root
reducer digest file so here we will use
combined combined reducers from redux
does the helpers function that helps us
to combine different reducers so this
way we can
have multitude reducers and just combine
them into one
so we expert default result of this
combined reducers function that takes
the object and let's let's set the user
as as the first entity that we're gonna
have now real X store so user is just
the current user information we're gonna
store maybe email here and
authentication token JSON web token so
but for now we'll just create empty
dummy reduce and reduce it just the
functions the function that takes state
and returns new state so why this and we
have a function that returns an empty
object okay so now let's install redux
dev tools i opened here dev tools page
and scroll down to the third way to
install them so only need to do is
install this extension also you need to
install a Chrome extension on Firefox
extension for your browser yarn add def
I can't type today some reason and now
next what I need to do is to use compose
with dev tools wrapper around apply
middleware so I'm gonna just copy this
line and let's go to index and let's
import it and we're gonna wrap our apply
middleware into compose with dev tools
also what we what we want to do is to
use this provider so the provider itself
is high order component so that we
inside which we want to wrap our
application so like this provider and
provider takes store prop let's we just
defined store so now the store and Redux
itself
available to our react application relax
dev tools extension okay doesn't like
that I use it like in deep in dev oh
okay okay let's let's please it again
maybe I'll change this like rule later
let's move it to here
so now we have hopefully we have Redux
and stuff so let's go to browser and
here everything seems to work fine we go
to Redux tab here and go to state and
you can see that we have staged user MW
so we have no errors and we have Redux
store available to us nice
so let's commit this change we call it
Redux
setup okay so now we have redox so that
means that we can have actions and
dispatch them so let's start from the
endpoint so from the user UI so in login
page right here we have this submit
function with which now consuls log data
but what we want to do we want to take
this data and pass it and dispatch thunk
action with this data so here how can
look and so in this props will have
login thunk action will be pass data to
it and it will return promise and if
everything is okay then we want to
redirect to home page so on my marks is
to dashboard but for now let's redirect
to home page and to redirect what we
have done and to redirect we'll use the
history and history is passed to this
component by reactor out because this is
a page component right it is the
component the the route component so we
have this probe props history that push
main page like this okay so history is
provided by router and login will be
available to us when we connect this
component to redux so let's define this
prop types prop types define and we have
the history el let's start with yeah
history that's gonna be shape I forgot
to add shape snippet here do it manually
and inside of it will have push function
okay so we have history object and what
we not
to define the whole history object with
all things that in there we just need to
define and prop types what our component
needs what it expects and it expects
history object with push method on it
and the second one is logging which is
function and we need to import prop
types so now we need to connect this
component to redux and for that we use
connect function from - double n here
can I from react redux and at the bottom
here we connect our login page so the
first parameter is map map state props
that allows us to pass some data from
state from redox state into this
component we do not need anything in
this form so we just pass now and the
second one is map dispatch - props so
this is where we can just read our
functions in this page and that's why we
simply can just call them but we not
just call functions we call the dispatch
this action so for that we can use very
simple and nice shortcut just provide
object with the functions that we want
to wrap in dispatch call so we'll have
log in here and let's import login from
actions actions can type logging off
let's call health so we're gonna store
all our actions in in one folder all our
reducers in another folder so let's
create actions of the JS file and here
we define our function
sothank action is just a function that
returns another function so we'll define
let's export constant login and it
equals
function that takes credentials
credentials and it returns another
another function and instead of it will
make the API request and all our
requests will store in one API object
that will have all our requests this
application is not huge so we do not
need to actually split it down to
separate objects to create a lot of
files it's just gonna be one file with
one object and they're very basic the
request to our API is very simple so we
don't need something more elaborate okay
so here we'll have some kind of API
object user login that we're gonna
create a moment we pass credentials into
it it will return promise and we'll take
the promise and the data that was
returned from the server and we get
response data user from it so that's
what we actually expect and this is the
this is the template that we're gonna
use throughout this application
throughout almost all API requests so we
will have API requests that will return
promise and then we get the data from
this request and we pass it along to the
next action this pin here we can do it
here but I prefer to do it in API so
this way I do not need to do this but I
just have user data from the server
right away and after that I dispatch
dispatch regular pure action Redux
action so dispatch and I call it to use
a logged in and pass user into it okay
so this is the most thing that we're
gonna do with funky actions that's what
most of my thunk action looks like so I
make API requests then I get data and I
dispatch dispatch Redux action that you
will change via reducers the Redux store
also we can use normalizer later to
normalize this data but for now just to
keep it a little bit more simpler we'll
use it like this excuse me so here is my
convention that's just the naming
convention that I use I use the past
tense for my Redux actions so user
logged in another way to do that and
name in that is for example user login
success but that makes sense that when
you have user login failure if you store
your process this process of failure and
maybe load in sync in etc in Redux then
it makes sense but we're not gonna do
that we'll handle all this locally in
the components so now we need to define
this so we export constant user login it
takes user and it returns object with
type user logged in and we pass user
down to it so now we need to define this
constant we're going to input it from so
user login import from types and we need
to import API let's say from API so now
we need to create these two files so I
start from types so types that GS and we
import use input we expert Const user
logged in equals user logged in like
this and then also we need to create our
API so let's create API the GS experts
default object here we'll have user and
inside we have logging so this login
function
we'll take credentials and then we'll
use access to make post requesters so
we'll have access post API oath we pass
credentials to it and then when we have
the response and if ever since okay no
exceptions we'll have the response from
server and we get response data user
object from there okay so now we need to
import access and let's also yarn add
access to our project I actually do or
access it's an excellent library so you
can use fetch or any other kind of
library that makes it your life easier
but access is perfect give it a try okay
so now we have API so let's recap what's
going on right so in login page we have
this submit so when we click on submit
and now login form this function is
called and we dispatch login function
log in action with passed passing data
form so passing the credentials into it
so he ran out here is we make an API
request with these credentials right
here with access then we take the
response from the server and we get data
user objects from it we're gonna have
email and token in there and then we
dispatch normal Redux action with this
user data now we need to create reducer
that will handle this particular action
so when when this action is dispatched
we want to place this user data into our
state so let's do this let's go to route
reduce them and instead of this dummy
function we're gonna remove it I'm gonna
just import user from reducers user
let's create reducers user dot GS and I
create reducer so reduce is just a
function that takes States an action and
returns new state so here's the
boilerplate we have the state that is an
empty
action is an empty object and then we
switch by action type and by default we
just return the same state so but now we
want to handle this case with the user
logged in and what we want to do we want
to return new state for this particular
piece of state and this piece of state
is action user so let's import user
logged in from types okay so if you
familiar with redux it should be very
simple for you if you're not again
that's not the educational course it's
not a course so just bear with me try to
understand it and if you do not maybe
look for education material on redux all
my previous screencasts about it next so
let's test it out so let's commit no
errors so far let's login and here
network we have our three quests we
making out requests we cannot post
because we there's no server yet and we
pass in credentials excellent it works
so now we need to create our node
backend server application and we will
build it with Express framework and
we'll start with empty folder as well so
let's I'm gonna open a new tab here CD
back into it so here I have my react app
let's make there bookworm API and CD
entry this API so here let's yarn in it
and let's open it in sublime text you're
ready to rock so first of all let's in
source folder we create index dot J's
file so this is going to be our main
point main entry point for our server
and here I will
just create now Express app but I want
to use all the goodies of es6 and es7
like I do with my react app so but I can
do it right now with no js' so for
example what I want to write I want to
import Express from Express and then I
want to define constant application to
be invocation of Express then I want to
define route so for example it's gonna
be the route the catch-all route request
response and I want to respond with sent
file and I want to get the name index
dot HTML so I just want to render
index.html that is in this particular
folder so I need to import path from
path as well pathway is just the module
node module okay so that's what I want
to do and then I want to listen on port
8080 for example and console dot log
running on local host 8080 done so
that's what I want to have let's go to
the package the JSON file and here let's
add scripts start and we're on it with
node source index Dargis ice try it out
yun start them we can do that because
node doesn't know it can't handle
imports it uses they require GS or
something like that
common GS pattern but we want to do this
babel to the rescue or bubble
I don't know how to pronounce it really
like gphin give a I actually pronounce
gif and Babel so yeah so let's install
it for that we need to add in def babel
CLI babel say i will provide us with
babel node that will run instead
we'll run instead of a single note and
we need to have babel press it press it
and and this process and will allow us
to use any kind of es6 and a sound
goodies in our code so instead of using
separate presses you just make it
automatically which is awesome so here i
need to create babel our c file and make
sure that I have presses and inside of
it I haven't I use and press it and this
this press press it press it this press
it actually can we can configure it
further but it's good for now okay so
now if we go back to package that JSON
instead of Babel or is instead of node
we just use Babel note let's try it out
yarn start BAM and it actually works
because now you can see that we do not
have Express so it runs the code let's
yarn add Express and let's try it again
and we ran in a local host 8080 OS I do
not trust computers so let's check it
out 880 okay it runs but we do not have
index.html so let's go back to editor
and let's create in source will create
index dot HTML file html5 we call it
book warm API and that's just a dummy
page that we're not going to use it it
will be replaced by reacting index.html
page but for now just for API can work
separately we provide it but let's
provide some helpful message so this is
API not a website learn your witty
remark by the man who who thinks that he
knows how to make jokes right
okay so if you go to our browser it
works and that's right
another thing is if we make any changes
we need to restart our server out of
manually but that's there's a pain so
let's use yarn add dev node man an old
one just will restart so every time we
change files in our project so it's
installed we go to editor we go to
package and here instead of Babel node
simple Babel node we use node man and we
execute Babel node and then pass the
index file as the starting port point to
node 1
so now if we go back and run yarn start
we ran into it from the node 1 nice so
now we have server and we make a request
to off route so let's create right now
just an index days later we will split
it into separate files our out here will
define another route post request to API
earth is gonna be request response and
here we just responds with status let's
say 400 with Jason and error subject and
this error object will have the global
key and we have invalid credentials like
this so we created out route and it
always responds with error object and
the state is 400 so this status is not
okay
so that will raise an error throw an
error in our react code and this called
this error we want to catch and display
this particular error from the server to
the user so let's have a look in our
react application so if we submit the
form
now we have okay we have the same not
found error message why is that well
because it making reaction just now
makes the request to localhost 3000 but
our API is on another port 8080 so we
need to create a proxy and with create
react app it's very simple so let's go
to code
let's open package the JSON file here at
the bottom will define proxy and this
proxy will point to HTTP local host 8080
now in in terminal let's restart our
application okay
application is restarted so I'm gonna
just provide some password login and now
we have 400 so we making request to the
server and it responds with global error
invalid credentials so the next thing is
to display this error to the user so for
that we go to so where it happens
alright so in login page we handle the
happy part so if everything go well if
no rejection no errors are thrown then
we redirect to home page but if
something goes wrong then we catch this
error in logging form itself we can
catch it anywhere we can catch it
earlier but that's quite convenient so
here in our on submit right here we have
this submit it returns promise because
here we return the result of this login
and this is the promise so here we can
catch our so we have catch error and
here we just set state to 4 errors to
equal error response data errors okay
and that's it so now we when something
goes wrong errors validation errors from
server will be written to this state to
the reader to to this component state
and we can display them for example with
message let's import message from
semantic UI and here we'll have if
errors global exists so if there is
there a global errors will create
message message negative and inside of
this message will have message header is
something went wrong how cool this
message is right something went wrong
very useful and here we'll just display
this errors global message done so now
we try to login something went wrong
invalid credentials so this is the error
from server side so the same way we can
validate fields here check for
uniqueness or do and do all the
validations that we don't client we
should do on server we must do not
should we must do on server as well
because it doesn't matter what we do in
client server should be the most secure
part of our application so all of this
stuff we will do later and we will
validate it on server and so we can
respond with errors and they will be
rendered as they rendered for the
client-side validation errors nice so
another thing that I want to add is load
in State so right now we have loaded in
our state but we do not use it and
semantic UI has this loading state for
forms which is pretty cool so here here
we have Loudoun false so now when we on
submit when everything is okay we're
making this request but before we do
this request before we making this
invoke this submit function we can set
state logon to true
and then here in catch if we have error
we set it to false back to false or when
everything goes goes well we just
redirect so these components will
unknown so we do not need to do anything
else now we can use this loading and
write and form here I'll just it loading
equals to loading and I'm gonna fetch it
from state loading let's have a look so
now when I click I it's too fast but you
can see like it then it has this load
and spinner there on the form we can we
can make it slower for example I tend to
use the pause but you can experiment
with that and you will see that you
actually have the loading spinner which
is actually very good for example if I
just go to my here to my back-end code
and I just comment this out and I try to
submit I will just have this loading
state because it doesn't resolve we have
an error so as you can see it's very
nice good good so we achieved what I
planned for this session so let's let's
make the commits here I even I forgot to
create here even initialized in bit
repository that happens with me but
first before we created let's create get
ignore file and we can ignore node
modules and d/s store
yeah okay now we can get in it bookworm
API and let's have a look at the status
and Babel yeah um good looks good so
that's gonna be our initial commit with
dummy mouth route and let's go to a
react application here in status we had
a little bit more going on let's commit
everything in one commit and we call it
make a sync request to server and render
server validation errors sync done and I
will push it to the github a minute
later
also I will create a new github
repository for bookworm API and you can
find links below in the description okay
so that's it for this episode if you
liked this episode please hit the like
button subscribe to this channel share
it with your friends if you want to
support this channel just go to my
patreon page become the first patron and
yeah thank you very much for a time and
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>