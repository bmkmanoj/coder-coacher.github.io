<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ember in Action #05.  Create book | Coder Coacher - Coaching Coders</title><meta content="Ember in Action #05.  Create book - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ember in Action #05.  Create book</b></h2><h5 class="post__date">2015-07-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Y50JmkXJ1UA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome to ember and action
series episode 5 create books this week
we'll finish with basic crud
functionality we already have read part
of it and in this episode we'll
concentrate on create part so first
we'll create form component for new book
route then we see how to use actions to
make post request to our fake server and
then we'll see how to redirect your
newly created book so let's get started
first of all let's go to books dot HBS
file and here right above this book's
list will simply add another link to
four books that mu route and of course
we're going to provide class with button
button primary and button block add new
book now let's close this helper so now
we need to define this nested route so
let's go to router and right here we
define this route new that's all that we
need to do now if we go to browser will
see our button here but if we click on
this button we see nothin of course so
as usual let's go to templates in books
and instead of it let's create new HBS
file and this template only will use
book form component so now we need to
create this component so we go back to
templates components and instead of it
create book form component HBS file so
here let's define the simple form with
title and with button so first of all
we'll have this h2 with add new book and
then we'll have very simple form with
deep class foam group inside of it will
have label with tax title and then we'll
have input with class form control ok
that's good and then underneath it will
have button with class
button button primary call it add book
and of course we need to specify type as
submit okay so very simple form let's go
to browser and we see it in action
excellent so now we need to handle this
form submit event in our component and
for that we at last need to explicitly
define amber component object because
now this component has a behavior unlike
previous dumb component we made so let's
define it in app folder in component 1
we define book form the GS file so we
import amber from amber as usual we
expert default amber that component that
extend and here we're going to specify
actions object and inside of it we'll
have our action so let's go back to our
form right here instead of this section
here when I remove it and we add action
and we call this action submit so this
name here will be the same as name here
submit okay let's make console that log
submitted just to make sure that it
works so if you go back here we also
need to add on submit because by default
it catches click event but we need to
catch submit event so we do on submit
like this so now if we go to browser and
click on add book button we can see here
in console submit it excellent so we
caught this submit event and reprocessed
it in our component so now we need to
get data from the form check it for
valid pneus and we'll do it later and
pass valid data back to controller or
route action so component itself takes
data renders it can transform it and
then return it back to specific action
this way we can reuse components in
different parts of our application and
provide different logic for them and we
will do this with this particular
component so first let's pass empty book
object into this component
for that let's go back to you dad HBS
and here we define both equal book very
simple now we need to provide this book
object and we do it in a route so we
need to define route so we go to app
routes books and inside of it we define
ugs route we important but remember we
again extend route then we define model
and we return here an empty object with
title author and description just to be
explicit and then we set up controller
as a function which takes controller and
model and we set up this on this
controller we set book to be model so
this stuff we already done it a couple
of times so it's very easy for you now I
think so we save this file and now we
need to bind this object two components
form so we pass both model which is just
this simple hash and we need to bind it
to components form so let's go back to
book form HBS and to bind it instead of
this input here we'll use input amber
helper so here we can define class as
well from control and then specify value
and if we specify value like both that
title this value will be bound to this
book title variable but if we use quotes
then it will be just the hard coded text
value ok so now we can remove this one
let's go to book form the GS file and
counsel that vlog this time this that
book just to see how it looks like let's
go to browser let's type something at
book and you can see we have an object
and inside of this object we have title
which is 111 so it works so now let's
add
other fields so we'll have form group
label author and inside of it will have
another input field with another class
form control and value is book author
and the last one is form group liable
description and for that we want to have
text area so we'll use text area helper
with the same class from control and
value equal bug that description like
this so now we have the the whole form
but now we need to pass this data to
route section and we'll call this action
create book alright so if we go back to
our ugs route here we'll have action
subject and instead of it create action
action this action will take book and it
will do something with it for now we
just cancel that log this book like this
so now we need to instruct our component
to use this particular action so for
that we go to mu dot HBS and here we
provide action so the default action for
this component will be create book now
in component section let's go to
component book form that GS in component
action right here we use this send
action then we need to specify the name
of the action in our case the just
action which is the same as this one and
then we specify any data we want to pass
to this action in our case this book so
let's have a look in the browser now
right here let's define 11 12 to 23 33
at book and we have uncut action create
book let's go to New digest actions Oh
create action create book of course sir
for that
let's try it again so 11 12 to 23 3d add
book and here we go we have this object
excellent so now the last thing is to
define this section in the route so the
actual thing so in route we can use of
course this store that create record and
that create records in our store we want
to create record book with data book and
after that we want to save it to the
server let's save it and have a look so
now let's click on add book you can see
that we have an error of course but in
network you also can see that we are
making post request to book server and
in Harris here you can see that we
actually pass these parameters about the
book with tight one two three so it
works okay so now we need to fix our
fake server let's open mark books digest
file and here we have this post thing
for this to work we need to have a body
parser so for that let's go to server
index digest file and instead of here
we'll have VAR body parser equals
require body partial and then we just
use this body parser Jason like this but
of course we need to install by the
parser and for that we need to go to
terminal and run NPM install saved
f-body parser okay so now if we go back
to mug books so what we need to do here
in this post action is to push data to
the books array and of course assign new
ID to this book so now we can have this
new book variable and we can take the
data about this book from request body
book now we can just push it to books
but first let's define new ID equal to
box that length plus one
and then new book that ID equals new ID
and after that we just push it to books
books push new book now instead of
status simple sales here we send the
book itself let's save it go to browser
here 1 2 3 1 1 2 2 to do then and you
can see that everything works fine we
made post request books and it returned
back our new book with ad for and here
you can see 1 2 3 by 12 11 11 so and
even if you reload the page it still
persists so the last thing is to
redirect to the books page so for that
we go back to New GS right here and
amber data safe method returns promise
so we can do then function and we'll
have booked here and after this we're
going to have this transition to and we
specify route books that book and of
course the book itself and we need to
define this this equals this let's go
back to browser let's create another one
add book and we redirect it to this book
let's create another one click Add book
and here we go excellent so we can
create books now in the next episode we
implement edit functionality and we'll
see how this component can be reused if
you liked this episode please subscribe
to my youtube channel like the video and
share it with your friends or follow me
on twitter if you want to ask any
question or simply say hello go to my
blog rams altec net thank you very much
for your time and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>