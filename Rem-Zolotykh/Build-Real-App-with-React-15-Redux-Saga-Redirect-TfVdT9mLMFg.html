<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build Real App with React #15: Redux Saga - Redirect | Coder Coacher - Coaching Coders</title><meta content="Build Real App with React #15: Redux Saga - Redirect - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build Real App with React #15: Redux Saga - Redirect</b></h2><h5 class="post__date">2018-01-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TfVdT9mLMFg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay hi my name is RAM welcome back to
the series were rebuild real web
application with react Redux and no GS
and today in this session we going to
continue with redux saga let's go to
user actions so we'll have user actions
here you directions ah actions users
okay
so now this signup stuff we do not need
it anymore because we do not use it
anymore right it was a thunk action we
replaced it with saga so just delete it
and now the last thing here that is
actually the thunk action is this fetch
current user so let's get rid of this
too for that we will create two new
actions the first one will be fetch
current user request and another one for
each current user success we're not
going to deal with sec fetch current
user failure but you can do it as an
exercise like if you can't fetch data
about the current user
maybe you should display some kind of
global error message like a pop up or
something like that
the tells that hey something going wrong
we can't continue with that okay so
again just the pure actions so I'm just
going to copy this to just one would be
sufficient and that's gonna be the fetch
current user request and here the same
thing but fetch current user success and
here Phi H current user request and I do
not need to have any kind of data passed
into it so I'm gonna just remove it and
here for the success we'll have user and
we'll pass it down here and that's gonna
be the fetch current user success
so now at the top here I'm just going to
fetch current user requests and fetch
current user success now I need to go to
the types and I need to add these two
things so I'm going to just fetch fetch
car current user request and the same
thing goes with AA man success so they
just find our here pretty quickly and
we'll do these success okay so now we
have actions everything's good
we ready right so now here we use the
fetch current user we're gonna just
remove it all we do here is we just
fetched in the current user by API then
you'll get the data data the user data
and we dispatch user fetched action so
instead of this user fetched just to
make it a little bit more like in one
style name and we'll use not the user
fetched but instead we'll use the fetch
oh yeah that's user fetches actually
this one that we created the success one
right so here we do not need to have API
we do not need to have user fetched so
and in and
types we do not need to have user
fetched anymore
okay so that will break everything right
so there are two places that we where we
use it we use it in index - yes and we
used an app component so let's go to
index the GS file and here here's where
we dispatch in fetch current user and
here is where we dispatch in user
fetched so both of these actions are
changed so user fetched we just renamed
it to user fetch fetch current user
success and here we'll do the fetch
current user request okay
now of course nothing happens because we
just especially pure actions now we need
to go also let's go to app app component
Abdo GS and here in a component amount
we do eve props is authenticated then we
fetch current user instead of this fetch
current user will have fetch current
user request and here is well fetch
current user request and yeah at the
bottom here page current user request
and here is well fetch can't use a
request I should do yeah I should have
done the search in our place nice so now
we're ready to create the DES saga for
it so let's go to route saga and that's
not the one route saga and here let's
add another one and that will be the
fetch current user request and inside of
this we'll gonna fetch user saga hu
Sangha so let's input it side user saga
so now we need to go to the user side
and create one so we go to user sagas
and let's create another one expert
function that's to generate a function
fetch user saga and we
we're not going to try anything because
we are not handling the error but you
should usually of course so again we'll
have the user will have the yield we
call the API user fetch current user
that's it and after that when we have it
we we don't do anything else right as a
side effect so which is going to be put
user logged in user okay let's have a
look so fetch current user is not
defined in root saga make sense so let's
go to the root saga and the lights add
height current user request so now in
types doesn't contain named user fetched
anymore
so in reducers user so now we need to go
to the reducers I totally forget about
the reducers so we'll have the reducers
user and here we have the user fetch so
instead of this user fetched we changed
it to fetch current user success and
here as well
whoop nice and easy so now let's let's
have the test three count test 3 test
comm test 3 test sign-up we redirect
back so now if you're a lot of page
everything everything seems to work if
you go in here you can see that you use
a lot in so first of all we have the
fetch current user request and then we
have the user logged in successfully
dispatched that's nice that's what we
wanted to achieve
so as the home task as the way to
practice you can go to another action
that we have we have we have our actions
right yeah our actions and here we have
a lot of thunk actions that you can
transform into sagas and after you've
done that you can just remove thunk
middleware from your application but
that's a lot of work to do right I'm
gonna leave it like this and if you want
to practice you can do that and create a
pull request to the github repository
that we have and all this kind of stuff
and we can continue using redux sagas
from now on in this application so we
will work with them quite a lot and see
maybe more advanced features that it has
so the last thing that I want to tackle
is the redirection right now we redirect
because of the because of the routes
that or that we have but let's say that
we go to the app component and here we
have the guest route route yeah here we
have for example for the signup we have
the guest Rob that's why we redirect in
because only guests can access it so
let's just make it simple route without
any kind of guest route and so that
means that now I can go back to the
signup something like that and it yeah
it works nice so what I want to do after
the signup
I want to redirect so again if I now try
to do that test for task comm test for
test and I'm just signup
it created the user so because if I
click sign up again you will see the hey
it's already taken it created the user
but I haven't been redirected anywhere
so how to do that how to achieve that so
basically what we gonna do is we're
gonna use the history object and history
is the single time when we create
history it will be one object for the
whole application and then we can use it
both in our router and in our Suns but
for to do that we need to do a little
bit of legwork
so let's go back to our code and let's
go to index dot JS file so here we using
browser router and this browser router
includes in itself history object that
is created for the browser so what we
can do we can just find it all and
change it to router just a simple router
after that this router now if we use
only this the general router we need to
supply history object so that's what
we're gonna do history equals to history
so now we need to define this history
and we going to input history from
history file maybe you can come up with
some different names to differentiate
the history that like a package from the
history like of our own custom history
file so let's go with history dot GS and
all we need to do is we need to import
the create browser history from history
and after that we just expert default
result of this create browser history
method and that will create history
object and now we will use it in our
router so if we go back here let's roll
the page and you can see that our router
still works it still have the back
button so that nice no no errors so we
use in our own history object and that
means that we can import it anywhere in
our application and use it outside of
our routes
out of our components that means in our
sagas so let's go back and let's go to
user sagas and right here after we this
putted this after we put this user
logged in action we going to history dot
push dashboard and now just lets import
history from history and that should do
it
and because we're using the same
singleton object so let's let's log out
and let's create another test five test
calm test five test signup and we've
been redirected nice cool cool stuff so
that's that's how you can from now on
use the history object anywhere you want
to redirect and your application will
react to it and the back button still
works that's nice so the only thing that
I want to do is I want to back go back
and I actually want to go back to abduct
component of component and change it
back to guest Ralph because I really
want to protect it from from I needed
requests so that's it
that's it we we learnt about reading
sagas we transformed our signup process
we learn how to redirect like a side
effect now we learned a lot of stuff so
basically try it out by yourself and see
how it go and let me know what you think
about it in the comments below or just
shoot me an email so thank you very much
for your time if you like this episode
just hit the like button subscribe to
this channel if you want to support my
work become my patron or just making
one-time donation by paypal or even
better buy my course dedicated to react
and learn it from basics to advanced
topics thank you very much for your time
and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>