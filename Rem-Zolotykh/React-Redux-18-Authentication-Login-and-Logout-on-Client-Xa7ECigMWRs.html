<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React &amp; Redux #18. Authentication: Login and Logout on Client | Coder Coacher - Coaching Coders</title><meta content="React &amp; Redux #18. Authentication: Login and Logout on Client - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React &amp; Redux #18. Authentication: Login and Logout on Client</b></h2><h5 class="post__date">2016-08-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Xa7ECigMWRs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome in this episode we'll
finish with login logout functionality
on client now we have information about
current user in store and we can use it
to display proper links in navigation
bar so let's open our navigation bar
here and right now is a functional
component but we going to connect it to
redux toe so it has access to current
user information
so first let's convert it to class
component like this so I'll save it
let's check it out in the browser so I
haven't broke anything ok and it's good
so now let's connect it to redux so for
that as usual we input connect from
redux and then here at the bottom we
connect it like this so now we need to
specify map state to props function
because we need to get a slice off Redux
tour so let's define this function map
state to props this function takes state
and we return your object and fields of
this object is the props of this
component and we're going to have the
full mouth piece of state like this so
now we expect this out to be on the
component so let's add navigation bar
prop types and now it should be a prop
types object and it is required so now
we have access to either authenticated
property so let's use it so right here
in random lets get is authenticated from
this props off next let's extract link
so we're going to have two constants
here the first constant are we going to
call it user links these are links for
authenticated user and the next one is
going to be guest links and you guessed
it we going to render them conditionally
so for user links we'll get this
unordered list from here space it right
here oh but
yeah this these are guest Ling's we want
user to be able to login or signup and
then for the user links will have as
well a notes list but for now just with
one link and there's going to be logout
so let's delete this link from here
we'll add a href empty one and that's
going to be a logout like this
so now let's render them conditionally
right here we have is authenticated so
we'll use is authenticated then we have
user links otherwise we have guest links
right save it and let's have a look in
the browser let's reload the page Redux
Connect is not a function of course
because we need to have react Redux here
let's try it again and now you can see
just the logout link and if we go back
here in applications and we going to
delete this job talking from here and
reload the page then we'll have out sign
up and login excellent it works so our
navigation bar knows about current user
information that's exactly what we want
so now we want to have this logout link
functioning so let's do this so when
user logs out
we just need to delete token from local
storage and dispatch set current user
action with empty object easy-peasy
let's do this so we're going back to our
logout link here and inside of here
we're going to define on click event
this logout so now we need to define
constructor to bind this function but
let's do it right here bind this so we
do not need to define constructor and
bind function to this context this way
next let's define logout and inside of
this logout of course we prevent default
and then we just call props logout
action so now we expect in this
component to have logout actions always
define it at prop types so we have log
out to be prop types function and it is
required and of course we need to add it
here as a map dispatch to props shortcut
logout and we get it from logout from
actions of actions let's save it now of
course we need to define this logout
action in out action so let's go to out
actions and inside of here let's define
logout so we have expert function logout
it is of course the thunk action so we
have this patch and then we do three
things we remove from local storage we
remove item your token then we set off
the relation token and we pass false so
this way we're going to delete the
authorization header from future
requests and after that we dispatch set
current user action with empty object
and this way we'll have is authenticated
set to false and user set to empty
object let's save it and let's have a
look at in browser so now if we try to
log out BAM we've logged out and we do
not have any token here if we log in we
back in business
nice how cool is that
so let's commit log in and log out and
client so the last thing that we need to
implement is the middleware on our
server so we verify token and verify
user identity with each request that we
do and that's what we're going to do
next
thanks for your time and if you found
this episode useful please share it with
your friends and subscribe to this
YouTube channel or follow me on Twitter
to get updates thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>