<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React &amp; Redux #15. Authentication: Login Form | Coder Coacher - Coaching Coders</title><meta content="React &amp; Redux #15. Authentication: Login Form - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React &amp; Redux #15. Authentication: Login Form</b></h2><h5 class="post__date">2016-07-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tIajENrOJ0o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome we're finished with user
sign a featured last so now we can
continue with this new user
authentication feature are you excited
well don't be because this episode is
going to be very simple in essence this
episode is revision of how to create
forms later in series I'll skip this
kind of episodes and we'll just quickly
let you know what I added because this
kind of tasks are quite repetitive so in
this episode we're going to create a
login form so first thing that we need
to do is of course to go to clients
routes and add new route it points to
login and it's going to use component
login page
so let's import it lab from components
login login page so now we need to
create one so we go to components login
login page the GS and this component is
going to be very simple layout component
in essence so we create login page and
inside of here we add class name row and
here we will have just one column
centered in the middle with column d4
and call MD offset for and inside of it
we're going to use login form so we need
to import login form from login form
let's create one login form the GS so we
have login form components it's going to
be a form and usually the first thing
that we want to do is to display the
form itself and this form will have two
fields identifier so user can provide
username or email and password so we're
going to reuse text fields group
component that we created earlier from
common text field group
okay so let's add login header and then
we use text field group so the first
field is going to be identified
then we need to provide label it's going
to be username or email then we'll have
value identify errors errors identify
and on change event this on change and
not errors but error okay
so let's copy it duplicate it for
password and for password we also need
to add type password ok so each form has
this kind of stuff right field and for
each form we need to create state which
will contain these fields as well as
errors and some kind of is loading
indicator so let's do this so we'll
define constructor and here we define
state so we have identifier we have
password
we have errors as an empty object will
have is loading false and also each form
has unchanged and on submit and let's
add on submit our form this on submit
and let's bind these functions to this
now in render let's deconstruct
variables from state so we have errors
we have identifier we have password and
we have is loading now let's define
these functions so have on submit which
takes event and we prevent default and
we have one change also takes event and
it changes pretty universal so we
implement will implement it right away
like we did before so we set state with
a target name to equal eat argot value
so you can see the pattern here you can
optimize your workflow by using a lot of
snippets or you can try to extract this
into higher-order components or use
packages like redux form but we in doing
right now by
and just to get a grasp on it and to
practice a little bit more the last
thing in this forum is of course button
so let's add one we'll add a form group
and inside of it will have button with
button class button primary and button
large login and we need to add here
disabled to be is loading white ok so
this is our form right now it should be
rendered in browser so let's have a look
and here is excellent so now let's add
some validations usually I prefer to
implement validations first in server
and then on client but in this case it's
very simple let's do it on client first
so we go into server shared validations
and we create your login ggs and
validation file is also very template e
so you can create a snippet for it first
of all we need of course validator and
we need to have is empty from lodash is
empty and then we export default
function validate input which takes data
and it has errors in here as an empty
object and it returns errors and is
valid to be equal is empty with this
errors so as you can see you can easily
use some kind of snippets to make it a
little bit faster and then here we
define our validations in our case it's
very simple we just want all these
fields to be required so we add eval
data is now for data identifier then we
add two errors identify message this
field is required and then let's copy
and paste it here and let's reuse it for
password as well and this is our
validation very simple now we need to
add validation check into our component
here so let's go to on submit
and here we'll just have if this is
valid that's a function then we'll make
the request to server so we dispatch
some action so let's define this is
valid so we deconstruct errors and is
valid from validate input with this
state and then if not is valid then we
populate state with ours and in any case
we return is valid and the last thing of
course we have all eight inputs so we
need to input it validate input we input
from server shared validations login so
now let's try it in a browser and voila
it works nice so now that we have our
validation we need to connect this form
with redux so we can dispatch actions
and we're going to a very simple action
just send data to API out so let's do
this so first we import connect from
react Redux and then we also will input
login action from actions and code login
we do not have it right now but we are
going to create in a minute so next on
bottom here we're going to connect our
login form with Redux so we do not need
to have any piece of state in this
component so we pass the first parent is
now and the second is going to be
logging so we're going to have this log
in action or function that means that
it's better to define some props on
login form prop types and we'll have
login to be prop types function and it's
required ok now in submit we can
actually use it so first thing we're
going to set state to empty errors and
set is loading
to true and then we're going to dispatch
this function so we have props login and
we pass this state let's save it now we
need to create this login action so
let's go back to client actions login GS
here we're going to input access because
we're going to make request to server
and then we define function login which
takes data and it returns dispatch and
here we return promise from X's post and
we'll have API oath and repass data to
it next thing we need to handle response
in the component so let's go back to
component so we'll have then ok and here
the first is ok when everything is okay
when login is correct we're going to
redirect to the root path so we'll have
this context like we did before rather
push main route and if something goes
wrong we go into this set state errors
error data errors so some errors that
were returned from server and is loading
we set to fall so now we need to define
the context so here we define login form
context types and we define that we want
to have router as an object okay and the
last touch let's go to navigation bar
and let's add login link so we're gonna
copy here it's going to be login and
here we'll have logging and let's try it
in a browser so we go to login we submit
our login form and we have request
server with data as you can see here
everything works nice and that's pretty
much it of course we haven't done
anything on server yet so we'll get to
it in the next episode but to sum up for
form creation until we get to form that
is used both for creating new record
as well as edit existing one so the
first thing that we usually do we define
state for the formfields errors object
and is loading indicator if we use one
also we usually have a twist to event
handlers on submit and unchanged all
forms should have validations usually I
prefer to create server-side evaluation
first and then reuse them on the client
next if valid we need to dispatch thunk
action and then we handle good and bad
responses and that's pretty much it so
let's commit we got working for okay
thank you for your time if you like this
episode share it with the friends follow
me on Twitter or subscribe to this
channel to get updates and see you later</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>