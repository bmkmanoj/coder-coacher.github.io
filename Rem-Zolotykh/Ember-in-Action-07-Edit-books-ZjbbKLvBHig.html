<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ember in Action #07. Edit books | Coder Coacher - Coaching Coders</title><meta content="Ember in Action #07. Edit books - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ember in Action #07. Edit books</b></h2><h5 class="post__date">2015-07-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZjbbKLvBHig" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome to ember and action
series episode seven headed books in
this episode will implement editon books
functionality by reusing the component
that we created earlier but first let's
fix some issues that we have now after
update so let's go to terminal and run
amber server and here we see I have the
missing semicolon error so let's go to
New GS file and let's fix it like this
if you go back to terminal we good
another thing that we need to fix is
using find methods on an amber data and
the data now users find out who to veg
the collection and find record to fetch
the particular record so we have two
places first one is route book dodge is
where we find one specific book so
instead of this find we use find record
and the second one is route books where
we find all books so we need to use
final okay that should do it so here in
this book details then let's add edit
book button so for that let's open book
details HBS file and instead of here
let's define new deef with link to books
and we call it edit route and we provide
book object to it of course we need to
have class button button success and we
name it edit book and don't forget to
close link to so now we need to define
this edit route so we go to router and
inside of here we define this route edit
and we need to provide path which is
book ID / edit like this so we have our
button we have our route now we need to
have template so let's create one in
application templates books we create
template edit HBS and here we're going
to reuse the component that
created before will reuse our book form
and if you remember it takes two
parameters book itself and then action
and instead of create book action this
time we provide update book action okay
so now we need to create this edit route
so we go to app route books edit that
yes and here let's define our out so as
usual we define model hook with params
inside of it we return this that store
find record book with params book ID and
now here we set book to this model on
the controller after that let's define
actions and and we need to define this
update book action here so let's do this
update book is going to be a function
which as you can remember takes book
let's define bar this equals this and
let's call save method in this book and
the data object so let's go to browser
click on edit book and you can see that
the form is populated with the data of
this book and now when I click on add
book we have an error nothing handle the
action update book actions okay let's
try it again add book and now we have
another error we make in touch request
to the server that's good with all data
that we need in JSON API format with
attributes and all this stuff but of
course we do not have patch methods in
our mock server so let's go to mug books
file and instead of this put will use
patch and here as well we use as
previously data as JSON API first of all
type as books ID as
book ID and attributes as book adders so
let's define them the book headers equal
to rip request body data attributes and
book ID is actually request params / am
ID which is this one so now we need to
find the book with this ID in our array
and change attributes and we'll do it
quick and dirty style so we'll have
books for each function and we have item
here and then we check if item that ID
equals to parse int remember that we get
old data from the request in string type
so we parse it to int book ID so if they
are equal then we make item title equals
book errors title and the same thing we
do with description and otha so let's go
back to browser and let's try to change
this one floral Cuckoo's Nest to one can
so now if we reload the page it's still
one okay bye can excellent so it works
so now we need to redirect back to the
book page as we did previously we do it
in edit router right here as usual save
returns promise so when this promise
fulfills we want to use this transition
to books book for this specific book go
back and let's try it out again so edit
book click on add book and we redirected
back to this book excellent it works so
another thing that we might want to
change is when we click on this edit
book will have a spoken-- instead of
update book so it should be cool if we
can you know change this
label on this button so for that let's
open book form the GS file and inside of
here we define a property and we call it
button label and it will return update
book or add book depending on the book
that we have in this component so we
return this get book so if this get book
has an ID then we return update book
label otherwise we return add book so
now in book form HBS file we need to
replace this thin with button label so
now if you go back to browser we have an
error oh of course I said that we need
property so let's define it as a
property and let's try it again so now
as you can see when we edit in book we
have update book but when we go to add
new book will have add book if you liked
this episode please subscribe to my
youtube channel like this video and
share it with your friends or follow me
on twitter if you want to ask any
question or simply say hello go to my
blog Ramsey net thank you very much for
your time and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>