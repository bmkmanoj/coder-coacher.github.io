<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React &amp; Redux #11. User Sign Up: Flash Messages Reducer (Part 2) | Coder Coacher - Coaching Coders</title><meta content="React &amp; Redux #11. User Sign Up: Flash Messages Reducer (Part 2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Rem-Zolotykh/">Rem Zolotykh</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React &amp; Redux #11. User Sign Up: Flash Messages Reducer (Part 2)</b></h2><h5 class="post__date">2016-07-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6doY4uRGQCg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome in this episode we
continue where we left off we need to
ran the flash messages and also have an
ability to delete them so let's add
flash messages component into our Abdi's
component so right here right after
navigation bar we're going to add flash
messages and we're going to import it
from flash messages right now we are in
components so I'm going to create a new
folder for it as a flash and we call it
flash messages list okay so now we need
to create it
flash flash messages list we're going to
create two components one for the list
and one for the message itself so right
now in the list here and we're going to
create component flash message lists and
this is going to be a connected
component because we need to get the
data from store so I'm going to import
here the connect function from react
redux and we expect that this component
will take messages so let's do it right
now
flash messages list prop types be equal
messages react prop types array and it
is required okay so now we need to pass
these messages from the store to this
component and we do it in a connect so
we have here connect function and inside
of here we'll have maps States to props
function inside which map state props
will take the slice of our global state
and we're going to return just flash
messages so we'll have messages state
flash messages and these flash messages
are defined in our route reducer so
we're just taking only one very small
and relevant part of our state and now
the component itself will have just a
simple deve that's going to render
messages and we're going to compose this
messages as a simple constant so we'll
take
from props iterate through them with map
so we take message and inside of here
we're going to use new component the
code flash message component with a key
of message that ID and we pass message
to this component okay so now we need to
add this flash message so let's input it
flash message comes from flash message
so now let's define this flash message
component flash message that yes and
it's also going to be class component
first of all it's take one message and
let's define this API right here so we
have flash message and we define prop
types as one message to be react prop
types object is required
so now we can deconstruct this message
into separate our variables will have ID
type and text itself this props message
and next we're going to use just a
simple bootstrap alert boxes so for this
and for this of course we need to use
class names so let's import class names
from class names and here we're going to
have the class name equals class names
and one that we provide every time this
alert and then we'll have to for now
just to conditional alert success which
is going to be when we have type that it
equals to success and alert danger when
we have type which equals to error and
inside of this div we go in just to
render text so very simple almost
presentational component but we going to
add event handler to it as well so let's
try it out in a browser I'm going to
reload the page and sign up so here I go
sign up and we have our success
message display to us nice so the next
step is to add delete functionality so
user can get rid of this message of
course when we reload the page we get
rid of this a flash message as well
because we do not store them somewhere
in the server we just store them locally
in the Redux store but of course you
want to have ability to get rid of this
flash message so first of all here
before our text let's add button with
class name of clothes and that's the
bootstrap styling inside of it will have
span and inside of this span we'll have
times symbol let's save it and now you
can see that we have this icon here
excellent so now we need to add the
behavior so we add on click base on
click and as we add new function here we
need to define constructor so we can
bind this on click as this on click bind
this now let's define the unclick itself
and as usual our component will just
dispatch some action that it has on its
props so we'll have this props delete
flash message and we pass just the this
props message ID ok so now we have this
new function on the props so let's go
down here and add it here delete flash
message and instead of object will have
function okay so now we need to pass
this delete flash message into this
component so for the edge we of course
need to go back to our flash messages
list and instead of here we also add
delete flash comp message to be a
function and we pass it right here
delete flash message and now we need to
input it so
we import delete flash messages from
actions flash messages and the last
thing that we need to do in this
component is to pass it to the flash
message component so we'll have delete
which message equals delayed flash
message let's save it so now we need to
define this delete flash message in our
flesh messages action so we do flash
messages and here it's almost the same
we have function delete flash message
which takes ID and it returns type of
delete flash message and passes down ID
so we need to add here the delete flash
message so now we need to go back to
types here and define this new constant
which we're going to have add replace
with delete okay and the last step is to
teach reducer to handle it
so we go back to reduce flash messages
and we handle another case so in this
case we have delete flash message and
let's add it here as well and what we're
going to do we're going to find message
by its ID and if it's found then we
create a new state array by slicing it
and excluding this message from the
array so to find it I will use find
index from lodash find index now here I
will have this index constant which is
fine the index and I'm searching through
the state and I want to find ID with
action ID then if index is greater than
or equal 0 we want to return new state
so we return an array and we'll take all
array elements starting from the first
one to the index and then all elements
starting from the index plus 1 to the
end of the array and this way we exclude
the
found element otherwise we just can
return state so if nothing was found
because if nothing was found index will
be equal to minus one and that less than
zero and then we just return state okay
so we have everything in place let's
save it and let's have a look okay so
let's try it out we're going to sign up
I fill up the form I sign up I have this
flash message now when I click it
oops nothing happens well I met another
silly mistake so if you go back to flash
messages list or right here I just use
delete flash message but I I haven't
deconstructed it from props so it should
be this props delete flash message so
now it should work let's try it out
again so I submit we have flash message
and now when we click on it it
disappears next and that's it it works
so let's commit it trying to squash
messages and allows to delete them so
this was our first encounter with redux
actions creators and reducers and as a
side effect of this encounter now we
have flash messages system which we can
use from anywhere just by dispatching
this add flash message action and that's
it for this episode thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>