<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Caching UI data (Android Performance Patterns Season 4 ep16) | Coder Coacher - Coaching Coders</title><meta content="Caching UI data (Android Performance Patterns Season 4 ep16) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Caching UI data (Android Performance Patterns Season 4 ep16)</b></h2><h5 class="post__date">2016-01-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GBeN74Xuk2M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so you know what screams out this app is
slow a spinner especially one that sits
around mocking the user while the
activity behind it is trying to load
some UI data my name is Colt McAnlis and
this is one of the most annoying UI
patterns on Android and believe it or
not it's actually really easy to fix
see it's 2015 now and most modern
applications drive the entirety of their
UI based upon information they grab from
some server resource and that's pretty
straightforward paying the server for
updated data and once you get it update
your UI to reflect the changes pretty
simple right the problem here is in what
the user is seeing while they're waiting
for you to fetch the updated information
and sure if the user has been using the
app then chances are the screen is
already populated with data but when
you're responding to an arleigh context
change or loading the app for the first
time in a while there's no data to
pre-populate your views so you have to
default to a spinner on top of a blank
screen now the fix here is really
straightforward caching see at some
point in the past you've actually
grabbed a valid block of UI information
it except on your first load of course
but anyhow although the data is outdated
that your app can use that information
in these situations where the fresh data
hasn't been fetched yet I see it works
like this upon a successful fetch of
some UI data serialize it to a
persistent storage a long time some
timestamp so that you know how old the
information is when you find yourself in
a cold boot situation you can use the
existing UI data to start drawing the
screen while also kicking off your
server commands to grab the freshest
information sure you'll still need to
flag the user and say what new
information is being fetched but at
least they're looking at a legitimate
screen instead of a blank UI with some
crummy spinner on it right and that's
really pretty much it cache your UI data
so that you can use it later when you
need to wait for the server to give you
some updates pretty straightforward
actually oh by the way it's worth
pointing out that there's a right and a
wrong way to store this data to disk
firstly you should be using a binary
serialization format since they produce
smaller file sizes and
have faster performance than human
readable formats like JSON or XML
secondly take the time to figure out the
best way to cache this information
persistently just storing it to the
serialized blob is one way of doing this
however if your UI is dependent on a lot
of complicated queries across that data
you know unsee realizing that to load it
may not be the best idea
compared to storing it in a SQLite
database which could be a much faster
solution but really any of these options
is better than showing a blank screen
with some spinner on it even if you're
the fastest app on the planet this will
feel incredibly slow to your users and
user perception is what it's all about
which is why you should check out the
rest of the Android performance patterns
videos and don't forget to join our
Google+ community to ask other questions
as well so keep calm profile your code
and always remember perf matters
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>