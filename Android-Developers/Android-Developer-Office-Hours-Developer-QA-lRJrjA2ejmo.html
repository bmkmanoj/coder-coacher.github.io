<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Developer Office Hours: Developer Q&amp;A | Coder Coacher - Coaching Coders</title><meta content="Android Developer Office Hours: Developer Q&amp;A - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Developer Office Hours: Developer Q&amp;A</b></h2><h5 class="post__date">2012-08-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lRJrjA2ejmo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome once again to Android
developer office hours my name is Joe
melon with me is Alexander Lucas and
also Trevor John's is our engineer today
is Daniel Pham and without further ado
let's go to moderator and see what our
first question for the day is actually
we should mention one thing before he
got started last weekend we said that
this week we would have a lot less from
security joining us today but
unfortunately they have some other
things going on and unfortunately we had
to cancel that so this week we're just
be holding a general office hours it
will not be security focused so any
questions that you have whatsoever on
any topic concerning android of course
we'll be happy to answer them and
hopefully at some point in the in the
future will actually bill to get the
folks from security back on and we'll
reschedule that great Thank You Trevor
for now that announcement um now can we
ask the first question which is what is
the best technique to do location-aware
notifications I've tried to use location
manager add proximity alert but it keeps
the GPS always on at least on jelly bean
and seems not to respect the
documentation when the phone is with
screen off I'm not sure what that means
but um in any event we need some hints
here anybody want to answer sure I can
take that so whenever you're requesting
location notifications the phone does
have to keep you know keep pulling for
some sort of location data and in
general the enter here is to make sure
that that location data is not coming
from GPS because GPS is going to be your
your biggest power sink if you request
the course location provider that will
use the network
you know the network location services
so typically that's things like Wi-Fi
geolocation that sort of stuff and the
power consumption there is significantly
reduced compared to GPS so apps like
Google now use that trick though they
you know they actually do not turn on
gps except in very rare circumstances so
that way again power consumption is
minus minus 10 you keep your users happy
so that's the answer make sure using the
course location or make sure you set
course as your requested resolution when
you're quiet when your sched when you're
asking for location updates great Thank
You Trevor any other comments nope all
right we'll move on let's say I want to
add a feature to my app like SMS
integration rather than scaring people
off with that permission should I make a
second shell app that has the permission
and same shared user ID that they can
optionally install or should I do
something else okay I can take this one
so first I i should say it's really it's
good that you're the you have a you're
approaching this with the attitude of
not wanting to scare people off of
extraneous permissions that said the if
you think about this from the
perspective of a user if they download
an app that does not have SMS
permissions and you know less scary but
that app then says hey download my buddy
app that has that's you know slightly
easier like you're going to come off as
a Trojan horse and it's going to be it's
going to look even sketchier than if you
had included SMS integration in the
first place what you want to do it the
the correct solution a lot of it depends
on the details of like what you're
integrating SMS for if it is if you're
just trying to send messages to people
you might want to abandon or you might
want to avoid having SMS built in your
own app and you might just want to
intent when you're sending SMS messages
out if you're reading incoming SMS
messages then the best solution there is
just add the permission to your app and
within the description of the app
explain what you're using the permission
for that said you should only really
have to explain it if it
if it makes it isn't immediately
apparent from the description of your
app like if your app is something that
turns the phone on or off or plays music
based on an incoming SMS message like
you don't need to explain the permission
people understand I interact with SMS
therefore I need the SMS permission if
you're a flashlight app you shouldn't
have an SMS permission in the first
place so the what your solution is going
to depend on what your app is but the
whole second app installation thing is
definitely the wrong way to go right
many adjust it to elaborate a bit on
what Alex said there if the core purpose
of your app is not sending sms you
should avoid bundling SMS functionality
into your app and instead use intense to
delegate to another application whose
job is to send SMS and besides the
obvious that you know the the issue of
permissions there's a second reason you
want to do that and that's because of
the user experience a lot of times
google voice is a prime example here
users will install some other app that
are responsible for sending text
messages most of the time those are apps
that do go and use the normal SMS
infrastructure and they send it through
their cell carrier but again in the case
of google voice those messages are
actually righted over the Internet and
don't use the normal telephony stack on
the phone and if you don't use the SMS
intent the SMS messages will not be sent
through the users desired SMS handler
and that might not be something they
want so you could be something that the
SMS messages from the wrong phone number
in that case so please please please use
an intent whenever possible and you will
make your life easier and you will make
your users so much happier
great Thank You Trevor next question is
there a way to measure the power
consumption of the location manager
caused by my app as a location-based to
do at it has to occur you the location
regularly but it doesn't appear in the
battery stats how can I measure power
optimizations for it hmm to answer the
first sub question of the the overall
set of questions measuring I don't
believe it's currently possible to
measure the power consumption in
location manager that's caused by your
app specifically also measure your app
but the butter but if the consumption is
going through the location manager yeah
location manager is not going to be
bundled together with your apps right
yeah you know you're not going to get
the stats you want there I can explain
how we do it on the Android ench team
and it's a little bit cumbersome but we
actually we have a box that actually
measures current draw from the phone and
so we'll plug a phone into that instead
of to a battery you know it goes where
the battery contacts normally would be
and then we'll measure the actual power
consumption coming out of the device and
so this is a hardware solution and it is
a bit specialized but destiny gets you
the most accurate numbers hopefully for
some future release of Android will go
and improve the reporting we're always
trying to go and give developers more
metrics especially for something as
critical as battery life but
unfortunately the feature you're looking
for just isn't part of Android so sorry
about that hopefully it'll get to it for
you I don't know how helpful the magic
box is going to be for a location based
application like this oh it would give
you the numbers you know I mean yes it's
going to be a weird test rig it's not
something you want to leave plugged in
all the time but it is an engineering
tool and if that's the only option then
for Chi that's the only option
okay any other comments no the next
question is need to connect to a legacy
soap web service over https service
doesn't support OAuth tokens etc so I
need to have username password once
entered is there any way to store the
users login credentials securely to
prevent having to enter them again and
there were some comments put into um
right the comments from Germany was that
you should use a custom account and then
take a look inside of Android training
there's a well first off there's a
custom off section Android training
there's also sample sync adapter and
then there's a second part we'll get to
that in a moment and that's partially
correct a custom account would get you a
secure location to store credentials
that being said is not strictly required
and the reason for that it custom
accounts are more for when you're
providing an account to other services
on the system or you have some
background sync job so for example you
know if you have you picasa and
Picasso's in the background going in
uploading your photos right that
anything you just sync adapters things
like that excellent choice for accounts
any time you're exporting account data
via account manager so you want to
provide your own you know Oh auth
handler let users get off two tokens
another excellent used for a catch
manager but it's a bit overkill if
you're just trying to go in secure
passwords securely store store password
security someone and so in that case my
usual recommendation is just to go and
create a a preferences file saman the
device make sure it's sort of an
internal storage and that you've set it
set the mode to private every
application on android is given its own
unique user ID you're just typical
and/or typical unix you ID
and if you said to the file permissions
to private that means no other
application on the system will be able
to read that file except for your app
and so that's currently I recommended
best practice for secure password
storage assuming again you're not
falling into these advanced use cases
where account manager makes sense and
that you'll find that's a lot simpler so
as far as the second part of the
question was the Authenticator stores
the password blank but you can encrypt
it using md5 or sha-1 and then decrypt
it later and I hate to tell you but
that's actually not going to work md5
and sha-1 are what's referred to as
cryptographic hash functions and
cryptographic cryptographic hash
functions are designed to be one way and
there's a bunch of other fun properties
to them too but beat what that means is
you can take some source text feed it
through again md5 or sha-1 you'll get
your hash out and there's no way to go
back from that hash and get your
original text back for one they're fixed
length hashes so the ACT but is always
gonna be the same number of characters
you can imagine if you feed in a lot of
data if I feed it if I feed in a
megabyte of data and I get back 160
bites left you 860 bits in the case of
sha-1 I believe don't quote me on that
any case you're losing data it's just
simply not possible to go and recover
the original password if you use those
you could go and use something like a
EES and that would that's a a symmetric
cipher which will let you go and create
some secret key embedded inside of your
apk and then write that to disk and then
later unencrypted again using that same
secret key inside of your apk and that
would give you a little bit of extra
security I think in most cases using the
file Commission's built into android is
enough in the exceptional case where you
have a user that's rooted their device
and there's a malicious app on the
device is taking advantage of this to
break out of the sandbox and read from
other files this would protect you
against this as long as it's not a
targeted attack
but for general purpose that's going to
be more than enough security for most
users and at this point we're falling
into you know an edge case with an edge
case so yeah I think using something
like a yes to go and secure your
password cash on the device is not a bad
idea definitely do it and I think that's
the extent of Christians comments and I
think we've answered that quite well as
well yellow let's move on okay I
actually got a question from Chris who's
going to hang out I want to put him on
he doesn't have video but we're gonna go
rot his sound doing this again he's
gonna write you one second hey Chris
you're on anything here yeah I can hear
you can you hear me yep hey Chris all
right great basically i'm using a phone
content filter uri to do a search and
I'm passing it either a name or a number
just looking for matching either phone
numbers or names when doing a search
I've noticed that in certain cases
someone has a phone number like nine
nine five one and I search for the
letter Z X it ends up matching and I'm
and it that's not anywhere that's on
multiple devices that's really
interesting I said that you're just
looking for like the typical and your
telephone URI to go not to the the phone
number yes
hi I'm surprised that matches and just
to make sure it's not doing something
really smart like trying to match you
know where the number of Z and X would
normally be on a telephone keypad
correct right i mean i'm not trying to
basically all I'm trying it sorry I'm
trying to match either the name or the
number and there's no Z X in the contact
it could just be like a concealed phone
number and I've got I mean I got some
sample code i can paste them but I mean
it's pretty straightforward what I'm
searching for I just want to make sure
that I'm allowed to search for names it
matches the names like if i type in
Chris it does return all the chris
results so is the ZX being compared to
the phone number and returning yes and
if i remove the phone if i remove that
phone number at no longer matches okay
um I do or this is a speculation but I
have had some experience with sequel
light not being super typesafe in terms
of it'll compare like integers two
strings and the code would then like
take that string the same it's a bunch
of numbers and like break it down by
bytes so that might be what what's
happening okay it's that some of you
maybe reproduce and just send to like us
open android bug on that um I think it's
more a quote unquote feature not a bug
it's a it's a function of sequel white
which we don't actually right all right
I think the best thing to do there is
too let's see I would just say like it
within your abstraction code make sure
that your make sure that the phone
number that you're comparing or cry pax
I don't I don't know off the top of my
head out I deal with this one oh yeah
I'm not enough of an expert askew have
see polite searching works I mean I
think this is a perfectly reasonable
thing to bring up on the sequel light
bug tracker and see what the developers
they are say about how searching should
work that
it you're going to have to go and make
sure you explain it in the context of
sequel light not android and it's
entirely possible they might say it's a
feature not a bug but bug a sequel light
works the way sequel light does on all
platforms so we have our hands are sort
of tied is to modifying the
functionality there um I have a question
um you said that you're using to query
phone content filter URI yes okay so
phone is what's the parent class of
phone these common data kinds i think
okay i just wanted to check yes of water
there's so many other classes in that
package that you know um i have trouble
keeping them apart it is common data
kind stuff phone died content filter you
all right I'm hold on yeah I'd have to
look it up to see exactly what that
thing does but on on I think you should
be okay and i think the the database
thing that Alexander pointed out on is
probably worth pursuing okay I
appreciate it thank you originally you
have another question of the hang out of
that's ok you Chris shoot um Lucy I want
to put you on air give me one second
hello hello so I tried to to ask just
for coarse location my android manifest
but when i try to use the epics
proximity alert i get a security
exception because it asks for fine
location so i cannot use this a is api
you address me alert with coarse
location only final page which we know
there's a there's two different um well
i don't know exactly what you're doing
but there are two different permissions
there's an access key yeah okay oh okay
what i'm doing is is this on my manifest
a i requested for a curse location
permission mm-hmm on my app i'm i'm
getting the the location manager service
and calling and proximity alert on it
pasadena a location and our radios and
uh but with only with a curse location I
got a security exception because this
dysfunction needs fine location but if i
use final location it will always get
the GPS on Anna activate show it will
drain the under a tree really quick
right I understand on have you tried
acts odd tried requesting both
permissions yeah requesting both
permissions ship the GPS will always be
on Anna activated so so he's mainly also
realized inspiration right the only ones
caught god that's why what i was asking
because i have to do something yeah just
like google now this with a it's a
location-aware notifications where a
user comes close to some sun points and
i have to not fire them but if I I let i
leave the the define location my app
will drain the users battery and then
they will be very sad in on like it very
much so I was thinking and use the
passive location the password provider
passive provider yes to gathering all
this information and maybe worry about a
once in a while for the the curves
location but i don't know i would like
to do to know how the google now does
this well that's a good question but I
think we can tell you how Google now
does it on the air because you have to
go and look up the source code that I
needed permission to talk about how we
didn't talk about GPS probably around
here but in any case yeah I can't tell
you exactly how Google now does it right
off the top of my head we can certainly
research it a bit more for you and find
out what the correct way to do this is I
would definitely say using the passive
provider or alternatively using network
provider either one of those would both
be a good start
I'm soon you're going through the the
reference guide trying to see if i can
find what the correct flags are I
suspect there is probably a way to do it
but having not done it I don't know the
answer off the top of my head yeah I'd
say probably the best bet here would be
to go and open up a question on Stack
Overflow and then post your question to
there with as much detail as you can and
then post a link to your stack overflow
question in the comments for this show
and we can go ahead and research some
more information for you offline and get
you a proper thoroughly researched
answer that will find the solution for
you okay thanks yep yeah sorry you can't
answer uh just right now but we will get
you an answer okay thank you tank up all
right all right we're gonna put hangout
on again okay all right there you go
you're on go ahead o can you hear me
uh-huh hi yeah hi hey I was asked about
the writing ap ends using code because
it wasn't it ginger but it was using a
private api that stuff stopped working
for ICS and jelly bean and i won't ask
if there was any kind of replacement
that i can use for ice cream and jelly
bean because here where we are there's
local apps to install ap ends because we
started to have like six million mobile
carriers in the past six months so I
think the the inter there is ap ends
should typically come from the sim card
and we don't normally want users to be
adding those manually of course the
functionality is very deep in system
settings if it's something you really
need to do but most the time this is
something the cell providers should be
doing
and you know it's not a good user
experience have to go set all these
headings and there is a way to go in
bundle ap ends with a sim card so a cell
providers just need to make sure that
they're shipping sim cards that actually
contain correct data on them and I'm not
aware of a workaround they will let you
specify apns otherwise ok so i should i
need to contact my kid until they doing
something about it correct ok thank you
mm-hmm sure right that's it enhance for
now guys ok great ok thank you very much
everyone on we'll move back to moderator
the next question is how does Google
Music zoom through scrolling lists so
fast the images are empty until the
scrolling slows down then the images
begin to fade in it's fast and looks
great is this only possible in jellybean
how is this done ok I can take that so
the answer here is you want to make sure
that you're loading your images
asynchronously off the UI thread and you
can do this the simplest way is to do an
async task it's not the most intelligent
way but it'll get you ninety-five
percent of the way there the only thing
you have to be aware of when you're
acing tat when you're using an async
task is it's not going to be aware of
which things already scrolled off the
screen so it's not as efficient as you
could be if you wrote some more finely
tuned code you can actually there's a
lot of actually different ways you can
do this you can do it with the handler
you can
there's another way that you can do it
too which is escaping my memory one of
the developer advocacy or Dan Galpin is
actually working on a training course it
goes into extreme detail on all the
different ways you can do exactly what
you're describing right there but I'd
say first step would be start with an
async task just go and feed a handle to
your list item into the data for the
async task and have it load your image
asynchronously then as soon as it's
ready update your list view and if you
want you could put some placeholder
image in there or if you want to get
fancy you can go and tie in with the
animation framework and that will get
you that nice fade effect you want if
you need some code to get started since
dens training course isn't available yet
I actually did a code lab at Google i/o
on exactly this topic so if you go to I
just moved it actually if you go to the
google i/o website go to so that
everything that's code google com / io
possibly that sounds about right search
for google i/o go to code labs and
you'll see a code lab from me Trevor
Jones I believe it's called Android
developer tools boot camp I will add
that what you're trying to do was not
the focus over the code lab but the
sample code provided did tackle this
issue so go there once again android
developer tools boot camp on the code
lab section and on the right hand side
you'll see a link to download the slides
and inside of the slides you'll find a
link to the sample code check the
example code out and you'll see some
code that'll do exactly what you'd like
to do so
hopefully that helps yeah okay um did
you use thread pools and cashing in that
example I didn't those were the other
things I was that I was trying to
remember so yeah actually did I use
caching I did some in-memory caching so
yeah that does nothing you have to watch
out for if you're fetching images from
the network or you're resizing images
things like that caching is definitely
something you'll want to keep in mind to
keep CPU consumption low thread pools
are certainly a good way to go and
improve the performance of all this so
again lots of different ways you can do
it it's beat but the key thing you need
to know is you need to move your image
loading out of the UI thread absolutely
it is you can use to do that movie the
image loading out of the UI thread and
you'll get the nice buttery smooth
scrolling and that's just to simply
simply a matter of how do you want to go
and display this data when it comes in
you want to do a fade you want have a
spinner we have watched your placeholder
image be you know that's all decisions
that's up to you as an application
developer uh one other thing i noticed i
don't know if this is true but he
mentioned that it uh it Scrolls like
while it's scrolling quickly none of the
images were getting loaded and waits
until it slows down before loading
images i was just poking around on the
internet to figure out how this is done
and basically if you want to set that up
so that it doesn't bother loading images
until the scrolling slows down what you
want to do is override the on scroll
method in the or created on scroll
listener override the on scroll method
and that's going to pass you a first
visible item variable what we're going
to do is check for the last time the
method was called to seize like get
current time to figure out the Delta in
time between calls Don scroll and check
the first visible item so that you can
what this will give you is the number of
items that have scrolled bast passed in
in the past you know ten milliseconds
100 milliseconds or whatever as soon as
that crosses a threshold or you feel
like okay that's slow enough i'ma start
loading images then you can then
implement the things that Trevor was
suggesting with the off thread caching
because it it would make sense that if
you're shooting past the first half of
like
an item list then you don't want to be
loading a thousand thumbnails in the
background sounds like a good
opportunity for me to go right and open
source help her library for all of this
Yeah right I'm putting you in charge of
that by the way I go nuts any other
comments about this well that's some
good information there okay we'll move
on in moderator concerning privacy this
is an interesting one concerning privacy
at all to see changes in Android that
would forbid developers to retrieve any
unique identifier from the phone without
explicit permission my response is first
of all of course if you want that you
should submit a feature request and I'd
like the panel to comment on that I'm
pretty sure there's actually already
feature request open if you serve you
down in real time so with that actually
find the existing feature request and
star it as we've mentioned in the past
we use the number of stars as a writing
mechanism and the items that are start
the most other ones to get the most
visibility which isn't to say we don't
look at the others too but you know lets
us know how popular something is right
so we do have various controls in place
to make sure that the more sensitive
identifiers are not exposed so the imei
is inside the phone state property and
there are some rather scary worry I know
is it's on there and there is an
explicitly cold as an awkward place to
put that it is I do have some scary
warning text around it which is in my
mind completely appropriate because that
is a scary thing to access as well as
the other information you get to that
property it's also things you you should
be one of these are about there is
certainly an argument that we should
move this into a different permission
entirely and I think that's valid but
it's not something that's been
implemented yet so again an excellent
feature request there
I will add that the other non-security
identifiers on the phone which would
typically be the Android secure ID is
not a terribly sensitive permission in
that it is there is a way to reset it
it's a little awkward is reset every
time you do a factory reset but there is
at least a way to go so it's not as
immutable as a hardware ideas so there
is that now that's said I totally agree
with you that the correct way to do this
is to have each application generate
their own uuid and then make sure that
you know that way there's nothing you
can correlate between apps I absolutely
agree I am actually filed to feature
requests about this myself so maybe some
point in the future we might see this
but we can't talk about the road map so
I can't tell you what is or is not
coming but that said we do have a very
very lengthy the blog post that goes
into a lot of detail to try and
encourage developers to do the right
thing and you know in general as an app
developer try it you know for your own
users privacy try and limit the scope of
what type of identifiers you're
requesting right um I would agree with
that wholeheartedly in fact i found this
is an interesting question because
there's lots of developers that also
contact us saying what can i use as a
unique identifier for the device and in
general following along with Trevor's
comments we say don't do that for a
variety of reasons I think my experience
has been that developers are looking for
this as a way of securing the device
against securing the device for for
various reasons like making sure that
there's not software piracy and things
like that on the problem is is that you
that these things as is pointed out by
this question can become security issues
so on generating a unique you ID or some
other sort of unique thing that was
going to be unique for your app for that
device is a better way of
any other comments no all right we have
a Lucille on the Hangout again he's go
ahead alesio your back on pole Hey okay
i have an application that needs a lot
of external resources like images text
files videos and i have to download them
to access it offline but the client
doesn't want it to be accessible to
everyone on the SD card so like to know
about techniques to encrypt them and
decrypt on the fly or what could I use
something like a special content
provider or something sorry what type of
resources are using again it images text
videos okay babe english taxing video
alright so you want to you basically
you're downloading various content and
your strong into the SD card but you
want to keep it restricted to your app
sorry a sound uh i think i muted dan dan
you I'm input 1 or no oh alright um here
i can try and talk louder the city
better yeah okay i'm like shoving the
micro front of my face here alright so
yes so basically you have that you have
all this content which is potentially
large correct so kisses images and
you're storing them to the SD card and
you want to restrict them to your app
correct yes ok um so yeah first things
first just for those who are watching if
you again if you can store data to
internal storage you have the ability to
use a fire fire file permissions and
that's a way to go and keep data
you know private within your app
anything you write to the SD card though
is potentially viewable by any other
application and there's not an easy way
around this there are some techniques
you can use I know again something in
our team has been working on a mechanism
to generate a dynamic file system and
stored inside of an encrypted file we do
have some mechanisms like oh BB if you
search the system that supports some of
this but they're not well documented and
they're not very easily use so with that
in mind you could just always take your
data and you again run it through some
sort of symmetric cipher like AES and
write it out and then when you read it
back in you'll you can decrypt it the
same way the thing you have to keep in
mind though is just you're gonna have to
have as much space in memory you know
for the complete decrypted content now
she's not even then you could probably
stream it out decrypt as you straighten
yeah so is just not sure yes I just say
take a look at the decrypted libraries I
believe it's in kind of a worse located
java dot security or I think right don't
quote me on that but you know take a
look through the system you can find the
you know there are built-in ways to
perform AES encryption and just go and
run your data in and out of that as you
write it to disk and that'll make sure
it's encrypted one more thing I would
caution is make sure that you're
changing the file extensions don't use
the default jpg PNG etc extensions
because otherwise media scanner is going
to pick up on those and try and read
your content in even if it is encrypted
it's you know it's still gonna try and
read them and ask annette cause errors
so if it's not a readable file make sure
that there's nothing there
looks like a me a readable file right
yeah I was drinking can use a content
provider we shall pipe a pie plate I
forgot the name to Radian printed and
damped to the other side decrypted
stream so i will just want to know that
if that's possible yes I oh not
absolutely incredible that especially
the end on top of that there's some good
methods you can use to go and make sure
that content provider stays private so
you can first off i believe is it
android exported or there's a flag that
you can up it is like it's exported yeah
so you can set android exported equals
false to make sure that your content
provider is not visible outside of your
application and if you do want to make
it visible say to other applications
you've developed you can also add a
custom permission on to it that's
guarded by a signature so only
applications that use your signature
will be able to write access that
content provider and so that way your
content provider which is doing your
decryption will only be accessible to
you okay thanks yep okay thank you hmm
that's an interesting question yes um
anybody else on the Hangout okay let's
move forward in moderator when are you
going to handle APK file splitting for
over 50 megabyte files on the google
play server side instead of having
developers worry about this but me
personally um are you personally worried
about this i'm not really known okay
okay i guess it's google as a whole okay
to sort of split the question this
subpart first of all up loadings for
instance a hundred megabyte let's say
APK and having our and having our
servers magically chop it up into
smaller pieces are going to play nicely
together like I guess do the OBB
separation server side and then alter
the code just it that's not going to
work there's no way that we can inspect
an apk
a split it up into sub pieces predict
the way that the developer is intended
for the code to access the resources and
then and then just like turn it into an
overview that's going to work
client-side we do have certain
facilities in place I assume when you
mean when you refer to having the
developers worried about this you mean
the obv functionality we have a lot we
have been galpin one of our teammates
wrote some really great sample code and
a library a really great helper library
that's downloadable via the SDK that
makes implementing obb actually not very
hard at all does the virtual file system
stuff the zipping like just handles all
that stuff a little progress bars like
handles all that stuff for you we also
implemented server-side diffs diffing so
that when you release an update to your
application only the the difference from
the previous version gets downloaded
onto the onto the client device I think
I was turned on like very recently right
um yes mr. done for jellybeans
jellybeans okay taps on jellybean paid
apps on jellybean okay so not for all
devices and all versions but the I guess
this required a certain amount of
framework support to implement so it's
not quite back portable but going
forward diffs are available there
actually wait I take back the diff
server for all apps on jellybean yeah
call up so enjoyable all apps on jelly
bean i was i was thinking of the the
encryption the encryption right the
encryption is paid on any bud ifs our
tips are diff sir for all apps on jelly
bean and above all right okay yeah also
i'll let one more comment here and it
may be cast a little bit of light on why
things behave they way they the way they
do so when you download an APK there's a
dedicated partition in your phone called
d cache partition and that's where the
APK is stored before its installed
and on most phones the cache partition
historically has been limited to 50
megabytes and that's where that 50
megabyte limit comes from so if you try
and install an APK this larger than 50
megabytes it does not fit in the cache
partition and the download fails so this
is a technical limitation of Android
devices like Alex said we can't you
magically split your apks up into
smaller chunks and we similarly can't
accept a large EP Kane trying to push
that to devices because devices
physically cannot accept a larger APK so
that hopefully at least explains why
things are the way they are all right
let's move on to the next question all
right I am right there do you plan on
adding an FM tuner API it's the only
phone hardware that lacks proper android
support and as a result there are hardly
any apps for FM radio the issue is quite
popular and it cites code google com
issues detail so i'm assuming thats as a
feature request that that's been very
popular comments we can't talk about the
in ridgewood map so you know the feature
request is definitely in the system
we're aware of it but I can't tell you
what our plans are going forward
right we don't have we don't even have
the time machine sitting here right now
I think it's 11 of the back shelves but
it's either that's how broken it is you
know that it's working and its rivals
off someplace yeah or sometime really
sometime in some place okay so we can't
predict we can't comment about the
future and we'll have to move on to the
next question I'm trying to draw a
larger bitmap onto a canvas when I scale
I'm having a hard time scaling while
keeping the central point constant I'm
doing a canvass not save canvas scale
and I need a little help of the canvas
translate yes and inside of the comments
atom the the person who originally asked
the question posted a large block of
code yeah so yeah you did unfortunately
I don't think we're going to be able to
this is another one where we can't
answer it on the air because we're gonna
have to sit down at the whiteboard and
figure out what you're doing so I don't
know the answer off the top of my head I
think this is another excellent
candidate for opening up a question on
Stack Overflow and then we can address
this offline okay yes please post it the
stack overflow also please include a
link in the comments on the moderators
that we can then find it like
stackoverflow definitely on how do you
enable a one by one widget to go in a
folder like some of the stock widgets
like the stock contact widget is it
documented somewhere I couldn't find
anything about it in the API guide
overview or search this is an excellent
question and unfortunately I have to
admit everyone here in the studio it was
stumped as well we still are stumped
actually we spent you know quite a few
minutes before the show trying to figure
this out and we weren't able to solve it
by the time we went on the air so again
this is another one please post as a
stack overflow and we'll get back to you
with an answer I personally am really
curious in knowing how this works myself
so yeah look just hold the hole tight
we'll get you an answer but we can't get
you an answer on the air thank you and
we'll move on hi I'd like to sync data
using a content provider but the normal
sqlite database does not fulfill my
needs which are for static Collins how
can I properly implement a content
provider that is using a no SQL database
to manage the incoming data um it's old
difficult to answer because it's it's
quite a generic question there's nothing
about there's nothing about content
providers that are particularly
optimized or designed for sequel
databases specific those that are the
content provider model does have this
notion of columns and all right you do
have a fixed list of columns and if you
don't have that content provider you you
have this impedance mismatch that's
going to make it a little bit difficult
to use now I think one way you could do
this is actually just take your data and
rotate it and make it into key value
pairs so you know each key would be a
column and each value would be the
contents of that column you and they
basically you just have to two columns
right you'd have your key column you'd
have your value column and then you'd
iterate through that for each record so
you would then have to go you know two
levels deep right you'd have your first
record which would be a pointer to your
key value collection and then you would
have a second set a second collection of
Records which is each key value pair
from your table now i'll also give a
plug the 22 you know there's things like
CouchDB for android which i haven't used
personally but would be interesting to
see how they go and approach this North
enough they provide any functionality
for you out of the box but I think
that's probably gonna be the only way
you can actually solve this well
actually using a content provider is is
that is that solution going to be
generally workable across all no sequel
I mean are all no sequel database is
structured roughly the same way most of
them do
you have the appearance of so yes you
have a record which contains a number of
you know fields you know which is
equivalent to a column in a sequel
database but typically those fields are
mutable right you don't have a fixed
schema for each record and so that
that's where the problem comes from so
much them still do have something
similar to a column it's just that four
columns can change so that's that's
where the problems gonna come from most
of them do follow that general model
well but did the number of just off the
top of my head to the number of columns
in a record change yeah they do again
now you could go and just have you know
say I'm going to support up to 20
columns or up to 200 columns and just
name them your data one data to data
three and you need some sort of you
still need some way to go and map you
know those columns to the actual field
names right but well if it works for
your app that might be work around I was
going to say that um if that's the sort
of thing that you're talking about we
use that style of implementation for the
contacts provider which is where we
store contact information that the
People app and jelly bean uses that
content provider and it has the concept
in its data table of I'm not sure how I
would put it you have to look at table
that match it maps column names too it's
not really a lookup table what it is is
that data has records all have a fixed
number of columns but then the semantics
of the column changes depending on what
the mind type of the record is so that
if you read read a record and you know
that its mind type is a phone mind type
then the data one column maps to UM
something that's really a phone number
right there are these databases even
with the similar record type the fields
can change that be difficult right yeah
if you do have at least some stability
there that might be work around one
that just popped into my head and I have
no clue how all this would actually work
for you but you could just go in yo
define a number of anonymous columns
data one day to day 23 exam and place a
you know the name of the column as the
first part of the value so you know say
you're you're storing a person record
right data one the value could be first
name colon you know John data to would
be last name colon dough and then read
in all of those and then run each of
those through split to go and extract
what the the type of the field is yeah
that sounds like a I mean that sounds
workable it does sound like a bit of a
wedge getting a like no sequel database
into sequin light well that's what
you're doing I mean call me writer was
mulling around the idea this well
database no I mean you can you can back
end a a content provider with like let's
say a a file or shared preferences or
something like that it's it's an
abstraction right but it's still gonna
go in you know it still has to make this
been there for doing lookups you know
there was still a lot of stuff in there
well seems you have these columns and
the columns don't have to map to a
sequel database but you still do fix it
I would I would say that the idea of the
content provider is that it has
semantics for specifying queries and
modifications and also has semantics for
what the return that what what should be
returned and other than that it doesn't
specify anything about the
implementation this means that if you
have something which doesn't fit into
the normal structure of a sequel light
database then you're going to have to do
more work inside the content provider on
and it's really difficult for us to give
a definitive answer about what that work
would be if other than being able to
look in detail at your problem but what
we've covered is there's way to mimic no
SQL databases with sqlite databases by
you know using generic columns this is
what I would use there's ways of doing
it with storing the information about a
column you
the column and then there's ways of
doing it by just having a no SQL
database within the content provider and
then doing transformations and I'm going
to recommend one other possible or crowd
here and I feel guilty recommending this
because it's not the Android way but you
could actually create a service and add
a binder interface that'll let you you
know actually you know transfer the data
in whatever format you like and avoid
the content provider interface if you're
exporting your data to other
applications this is probably not the
right way to go but if this data is only
being consumed within your applications
then you know that suddenly becomes a
lot more workable or even if it is there
other applications you could even ship a
client library something like that but
again that's not really the Android way
I'd want to discourage you from doing
that but within the context of your own
application you have a bit more freedom
and binder might be a solution I would
also encourage you to put this question
on Stack Overflow and give as much
detail as possible to the extent that
you can the reason I say that is that
this doesn't give us very much
information about what you're trying to
do and the problem space very often
suggests solutions that we wouldn't so
just otherwise um first of all you might
get somebody else out there who solved a
similar problem and has it working on or
by knowing more about what you're
actually trying to do we can help you on
as well the emmons the rules are
generally put it into stack overflow and
then post a link into a moderator I like
this question though it was it opened up
a bit of debate here I don't have
different ways that we would have liked
it I would I think you got you would go
with turn into a sequel light database I
would go with skip sequel I'd entirely
and put all the work in the content
provider oh no I I was not saying turn
it into a sequel like database no I my
answer was about all this work into the
comforter fighter
it's just how are you right exposing the
data with a framework that content
provider exposes right what is your
output going to look like given the
content provider does enforce a set of
restrictions on how that can work okay
okay I think that um just the
generalized nature of content providers
does lead to debate I would for instance
debate the idea that that content
provider provide um makes restrictions
it has a certain set of semantics that
give you a lot of leeway on sometimes
they don't work so um but they're not
meant to be restrictive and having said
that I'm going to go on because I'm the
monitor ah um next question I'm creating
a gallery with pinch zoom as I see it
there are two options use the UI toolkit
or to extract parts of androids built-in
gallery app it's open source which
approach is recommended or is there
another approach that would be better
once I get crack at this one I just
throwing me to the fire here oh boy
there's no debate about this one trevor
is gonna answer it now right pit pinch
zoom is difficult to do I don't have any
really good recommendations off the top
of my head of and look at how the
existing code does it I'm not aware
there there's probably some client
libraries out there because it is a
common enough problem but I'm not
familiar with what they are off the top
of my head but you know the gallery is
open source you are welcome to go and
take parts of it and use it in your own
code and if I were doing this myself
that's probably where I'd start
I would certainly agree um we'll move on
since we're running low on time on is
there a way to provide a custom icon to
display when registering for the new
action assistant 10 instead of showing
the generic search icon if so what
rezzed of the assets need to be and what
are the restrictions ability to change
or icon at runtime etc so action assist
uses something called labeled intent
which unfortunately nobody on our team
has actually had the pleasure of working
with yet as of two hours ago my ass
number people and they'd actually never
could have labeled intent before so I
don't know the answer yet it's new I'm
really curious again to know what the
answer is here so please post a question
on Stack Overflow so you can research
this and get an answer to you I suspect
the answer it well the answer has to be
either you can't do it or there is a way
to do it I'm leaning a little bit more
towards the opinion that it might not be
possible but i'm not a half percent sure
yet so give us some more time post
something on stackoverflow and we'll get
you a definitive answer there from the
framework team okay thank you next
question can I can you point me to some
sample code that I can use to put images
i download within my app from my server
images taken in my app via camera into
an appt specific album similar to how
Facebook and many other apps do it so
I can't point you to sample code because
I'm not aware of any but I can tell you
what you want to do and what you want to
do is well there's two approaches you
can do actually the easy one is create a
folder with a nice descriptive name on
the extra external storage so the SD
card and place your images into there
and then media scanner periodically
scans through those and will
automatically add those as a source in
gallery so that's the easy way to go
about doing this now the correct way to
go about doing this is to use the media
provider and bit you programmatically
insert a record for each of your images
into media provider unfortunately the
docs on media provider are pretty sparse
it is listed in the API reference if you
search for android duck provider there
are some entries in there for media and
that's what you want to go about doing
inserting data into any provider is the
same so if you're using the you know
there's plenty of docs on content
provider for example that probably a
good start if you're not familiar with
how the provider system works and then
once you're familiar with that read up
on media provider and hopefully that'll
make make some sense to you yeah so
you'll basically make a record for each
image you want to display and then
there's some some fields in there to go
and add additional metadata and that'll
get you you know something a lot similar
to what the Casa and Facebook do because
that's what they do unfortunately again
not much in the way sample code or
documentation to specific to media
provider other than what's in the API
reference so hopefully that gets you at
least halfway there
Thank You him Trevor question with ICS
individual notification peaks were
disabled now user needs to open
notification drawer to get notification
detail whether there a specific reason
for that decision about not allowing
notification Pete view I apologize if
this is a duplicate does anybody know
what notification peakview actually is I
the only thing I can think of is that
he's talking about the expanded view of
notifications wrong we didn't have those
nice yet that's new to jellybean yeah um
I think I'm a like honeycomb when you
received a let's say you got an email
without noted without popping open
notification list there would be a
little it was almost like a toast they
would just sort of flash on you received
an email blah blah blah okay and it
would disappear again yeah which doesn't
work too well on phones right right uh
I'm curious if this is specific to the
phone or seven-inch tablet size or if it
goes all the way to the 10-inch yeah
it's possible it might just be disabled
on phone sighs devices which for the
large prodigy does include nexus 7 a lot
of the phone UI conventions are also
carried to the nexus 7 for example your
notification bar is on the top of the
screen as opposed to on the bottom so
I'm curious to see if you still see that
behavior on a proper tablet device
running jellybean and to my knowledge I
haven't heard anything about this
changing so my gut feeling is that will
probably still work I i would say that
there's there's no particular API to
either enable or disable this so it's
probably just a feature of how large the
screen real estate is right and that's
probably why it happened is that that
some sort of design decision was made
about how to most effectively show
notifications since we're running on
time I want to move forward here why
should I use the new small with resource
identifier that is layout SW 720 DP when
it's only available
for Android 32 plus I'm building an app
targeting Android 30 plus for normal to
extra large screen devices and so that's
not small wit that's smallest width well
and the answers to why you would want to
use it and it's not just you know safe
SW 33 20 its SW and any number mm-hmm
and the reason you'd want to use that is
because it's a lot more flexible it
turns out that there's this grey area
right around five to seven inches where
it's not really clear whether or not
something is a tablet or a phone it's
sort of this tweener device is what we
sort of informally call them a good
example of this we the dell streak and
depending on the app sometimes it makes
sense a treat is the phone sometimes it
makes sense to treat as a tablet and
sometimes it makes sense do an entirely
separate UI on top of that you know we
have the nexus 7 and then you know say a
large device like resume and again you
may want to do different you eyes for
those and it's not again basically the
entire large screen bucket is ambiguous
and then add to that that you now have
all the different tablet sizes as well
it's not it's not always clear you know
how you want to break up your UI so we
just give you a lot more flexibility
that's the reason why it's more flexible
we leave the decision up to you as a
developer where it makes sense to draw
the lines where you have a tablet UI a
phone UI do you have multiple tablet you
eyes do you have multiple phone you eyes
you know it is just using those screen
brackets it was too complicated they're
still there if we still support them
you're still welcome to use them if they
work for you keep using them but you
know keep in mind that the new options
are more flexible okay and I think we'll
take our last question now on input
method manager hide soft input from
input method and windows set soft input
mode window manager lale params often
puts take all these hidden hides the
keyboard but views added window manager
add view view params from service does
not have a window what to do
what to do about what yeah I'm not
really clear what the question is going
after um yeah there seems to be a clause
in your sentence missing right you know
i would suggest honestly that you um put
an expanded version of this question on
Stack Overflow and then linked into the
moderator so that we can help you out I
mean definitely it looks like there's
something going on here with input
methods that we could help you out with
but not from the information that we've
got here okay um and since we didn't
answer that one let's try this one last
one that doesn't have a link to stack
overflow and I've am an app that has a
child lock using a custom launcher
however when the app is closed and the
home button is pressed the dialogue that
asked for the de la default launcher is
shown is there a way to reset the
default launcher to the Android launcher
hmm
wait so I'm trying to understand exactly
what's happening here yeah so you have
this app that employs a custom launcher
you close the app by you know I imagine
move to a different app and you hit home
and then ask for the default launcher I
I am it was the problem that you pick to
your child lock application and said set
as default and now you're locked into
this if so the answer is yes there is
certainly a way to go and get around
this you need to get into system
preferences and and your settings we
need to get the settings you need to go
to apps find the app in question your
child lock app and click on that and
there'll be a clear defaults button when
you push clear defaults it will remove
any save settings for intense as far as
what the preferred app is to handle
intent and the next time you hit the
home button you'll get that chooser
dialogue again and then you can pick the
system launcher if for some reason you
cannot get into system settings android
does have a very rarely discussed but
occasionally useful safe mode and if my
memory serves me correctly to wait to
get into safe mode is to boot up the
phone well holding your finger down in
the middle of the screen and that will
prevent any services that launched it
start up from actually launching and
from there you should be able to get
into system settings okay I hope that
answered the question um if not we'll
expect to hear from you again and I'll
also add just a safe mode is not very
well discussed I don't use it very well
myself so it's entirely possible that i
forgot the correct way to get into it if
it doesn't work do a search and you'll
find the correct procedure okay
okay and I think we're over so that does
it for today thank you very much for
joining us thank you for all the
questions from the hangouts etc yeah yes
yeah i was gonna announce next week oh
you have something i do next week okay
yes so yeah so once again we are on the
air every wednesday 2 p.m. pacific time
be sure to join us next week which is
August twenty-ninth where we will have
Bruno Oliveira Adam Powell and Richard
Folker joining us to discuss multi
versioning UI and UI navigation so
hopefully we'll see many of you there
it's a possum awesome man until that
time same bat time same bat station</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>