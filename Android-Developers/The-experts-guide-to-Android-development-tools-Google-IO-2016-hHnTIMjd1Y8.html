<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The experts' guide to Android development tools - Google I/O 2016 | Coder Coacher - Coaching Coders</title><meta content="The experts' guide to Android development tools - Google I/O 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The experts' guide to Android development tools - Google I/O 2016</b></h2><h5 class="post__date">2016-05-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hHnTIMjd1Y8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone welcome to the experts
guide to Android development tools I'm
torn or be tech lead for Android studio
and with me on stage here I have a
number of key members from the Android
studio team so do you want to introduce
yourselves hello I'm Esteban
hi I'm Shiva I work on the debugger hi
i'm jerome network on the build system
so the way this is gonna work is that
we're gonna show you some of our
favorite features and some features that
we think you may not know but that
you'll find very useful once you do if
you're an expert studio user you might
know some of these things we we want to
make sure that everyone is heard some of
these secrets even if you already know
it you could be very proud if you do so
we hope that you'll learn something from
this and so first we'll have a editor
demo from Esteban and then Shiva is
going to be showing the debugger
Katherine native tools and Jerome at the
end with the build system so with that
I'm gonna turn it over to Esteban it's
gonna be showing the source editor hello
everyone we're gonna switch to the demo
machine now right can you guys see yeah
that's good
so in the next 10 minutes or so I'm
gonna show you ten of my favorite
features of the editor you know you know
how coding all day is right you one of
the things you try to avoid is touching
the mouse which is like ten miles away
from where you are right and learning
all the shortcuts so IntelliJ has
several compilations of shortcuts I will
have while I go through the demo all the
shortcuts written down there but there's
one tip if you are um if you're a
multi-platform there are there are two
different shortcut setups for mac one
that is Mac friendly and the other one
that is compatible with all platforms so
if you hear me speaking a shortcut out
loud I'm probably going to be using the
one that is common across all the
platforms so let's begin beef just
before we we do the editor part there
are two tips that I want to show you for
configuring the the general IDE the
first one is the command line launcher
so I know if you guys know but you can
go and say create command line launcher
and that will create this file that you
can call from anywhere
to start studio that's cool is handy you
know you're in a console and you want to
start so you just type studio that's a
pretty neat but it does more things that
that such as created an I need to put
the password and done I'm gonna go to a
console I think I see yeah
if I do studio does that help
that's the shortcut that I just created
but you can see that there are more
options that just studio there is this
and there is merge I'm gonna I have a
diff that I run before this actually
opens Studios diff what is it it's gone
this is one of the best dipping tools
that I've used and it's really cool to
be able to have it as a command-line
tool you can set it up to your get two
or whatever and then then you'll be
using this that you will be hopefully
familiar with and you can use this all
the time you can also do merge from the
command line to and it works so that's
one handy thing to have the next one I
want to show you is you know you have a
large project and effectively you run
out of memory in studio and things go
back right so if you want it to edit the
memory settings you need to go to a VM
options file right how many of you have
been to the VM options file and change
the memory okay that's a lot of people
the main thing is like where was that
file you know you got like settings
slash whatever
so there is an option here that was
recently added that you can say edit
custom VM options you guys know that you
should not edit the VM options inside
inside nice - installation right the
next time you updates gonna say Oh what
did you do so you do this one and it
asks do you want to create a custom one
and it opens it up for you and you can
go and set all the flags you want there
if you want to know where it is someone
was super excited about this
if you want to know where it is the you
can press alt f1 and is you can reveal
this file somewhere else for example you
can reveal it in finder which is
pressing 8 or going down there will open
the finder toward this file is and you
can do whatever you want
right that's what we mop ssin so I have
everything set up now our now we're
gonna go into the editing tips these are
my 10 favorite tips of editing in
Android studio power bi IntelliJ the
first one is control GCA right you guys
know there are shortcuts to join lines
well this one is smart one and if you're
joining strings it actually removes the
operations and give you the full string
that's me
when we go back to the demo machine try
pushing the button hey let's do it again
I was saying talking about I'm looking
on my screen here it looked beautiful
control cheese J is a smart join and it
removes the plus operations when joining
a string so that's pretty handy there is
also the option of and this is this is
quite powerful if you open the intent
menu on a string a string operation will
plus this is the option to copy the
concatenation text to the clipboard so
IntelliJ I figured out that all the
components here are statically knows the
values and the full string has been now
copied to the trip or I can paste it
here and is the full thing operations
have been done thank you
the next I want to show is the
difference between enter and tap when
you know when you want to change a
function in this case let's say we want
to compare two strings and I'm calling
the function contains but it should be
equals right so I type e this suggests
equals Mayan type enter this happens but
you guys know that if you type tab
instead of Enter there you go that's a
pretty handy one to know because he's
usually no backspace backspace like what
did it the next I wanted to show you is
the powerful of the context
understanding that the IntelliJ IDEA
eater has if you are inside this is a
common pattern right you have an object
you say this object instance of
something if you are inside this if
things happen right so if I do o dot the
suggestions I get there are not four
object are for context so the HR figured
that out and was able to give me all
those suggestions and as soon as I
choose one the casting is done for me
more than that if you are going to use
constant context many times or all many
times opening 10 menu and it's
suggesting to generate the declaration
for you done it actually put the name of
the rival right on everything pretty
handy right this these tips are for you
guys to speed up coding your if enter go
go go right so that's indents inside an
instance of one of my favorite features
is multi cursor support and I'm gonna
show you what what I do with
multi-culture multi cursors and what how
you can integrate other features of
intelligible you have multi cursors so I
have a list of names here then I'm gonna
copy and paste inside this function and
I wanna I want to log all of them I want
to just add a log D to all of them you
know there is a completion a template
for lock D right so you can you can
select one and start spawning cursors on
the next occurrence of the same word
if there is one that is repeated you can
use a shortcut to skip it and you keep
going and now I have all these
that I can do many things at the same
time Thanks one thing I can for example
say lagdi it suggests lagdi I can use
the template and it puts it in all the
cursors at the same time you can use
selection per word start removing things
like this for example I'm gonna copy
when I copy here it actually has one
clipboard per cursor so when I copy and
I go to the end for example and I want
to let's say this is an email that I
want to complete and I do the gmail.com
you can see all the clipboards were
different and in each line I pasted a
different thing so I'm like coding at
ten times what I would be coding if it
was one line another cool thing that you
can do with cursors is I'm gonna I'm
gonna go back to these words I'm gonna
select all the names and you can use
command shift a is a super powerful
shortcut if you if you want to take one
shortcut away from today take command
shift a that shows you you can choose
any action there and apply it where you
are so I'm gonna use a tall case done
all the selections have been changed and
I'm logging all the names pretty quickly
the next one is navigation pretty useful
command is 12 it shows you all the
functions in your in your file
one thing that intelligence and is super
powerful is on every menu even if you
don't see that there is a search box
there's probably is one to start typing
and things happen like this right so if
you want to go to a function
come on this 12 and type a few letters
of it boom you're gone this is a
shortcut to go back to to where you were
navigation shortcuts there's another
cool thing that our bookmarks I used
some of these very often you can
bookmark a line but this is not the
powerful thing in my in my opinion is
this one you can bookmark with contour
shift a number and you can give
functions in different files a number
and then by just pressing ctrl and the
number you navigate there super fast so
this is quite handy if you run out of
numbers and you want to use letters you
can I've never got that many but you
could use ctrl f11 on windows and it
opens this menu you can choose a for
example and there you go you bookmark
with a name and to find them there is
this menu that shows you all the ones
that you have added and you can press a
funny texture
so that's bookmarks and this one is
pretty cool you guys know that you can
extract a mess for IntelliJ right so I'm
gonna go this is for loop then I have
there that it would like to be in a
separate method so I go to the middle of
it and I use the expression selection
tool that it selects an expression going
up a nap right so here I have the line
now I have the block now I have the if
now I have the for loop you know you can
go up and down depending on the
configuration you have and I selected
the for loop and now I'm gonna extract
it to a method let's call method test
what happened so the phone there is too
small but it pretty much says hey stop
doing cut and paste and write the things
properly because IntelliJ just detected
another instance of what I had in a
different place so it's
you had the same method do you also want
to instruct it is not using the same
variables but he figures out that if the
arguments are the free variables is
you're going to extract it and both for
loops are gone and only one test method
that's the one I like the most and you
clapped on the tab birds to Center this
is Wiener postfix so you know you can do
if you have an array or something you
can iterate over you can do post
completion and say for example for and
this generates it for for you you can
also do for I and this generates the
very familiar for loop that you guys
know and you can also do for our and it
does the annoying reverse one for
YouTube there is there are so many of
this just play around with them for
example if you want an object to check
with an object's node you can you can
just post complete and N and you do it
for you and many others like this if you
want to know them just press command J
and no I didn't press one J and it
offers a list of all the completions
that you could use on an object and you
can write your own as well
number eight that is pretty useful is
when you have a condition that is
complicated you have a lot of boolean
and you want to simplify it just check
out what the intent menu has because it
will have things that will probably help
you so let's say you want to replace ORS
with ants and this is the result or I
wanna I don't know split split into two
ifs or revert the condition you know the
cool thing about this is that you're not
thinking which is you know which is
changes and you know for sure that it's
gonna be the same behavior that you have
before so there you go a different way
of writing the same function
control space versus control shift space
this is a smart completion so if you do
control space here you know that it
offers you all the expressions that you
could do they're not all but you know if
you chunk of them and it has it chooses
the one that are type correct at the top
but if you do control shift space it
gives you only the ones that have the
correct type and you can see that it's
not showing the before it was showing
the same function as itself but now it
figures out that if you do that you're
gonna probably recurse infinite
infinitely so it's not longer showing
you that more than that if I command
this function here that is the only
other expression that you could use and
I do control shift space there you go it
just shows the only one thing that you
could do and you put it there so pretty
happy and the last feature that I want
to show you this has saved me so many
times you know when you say I'm not
gonna commit now I'm sure this is fine
and then you screw up local history to
the rescue
c'mon shift a local history and you have
intellij has done a diff every time you
were editing you're fine and you have
the history across your day and you go
back to the point say oh this is this is
where I screwed up and you can see here
that it's showing a div of everything I
did during the demo two minutes ago I
was like this you can see the joints
this is super super useful so I hope you
guys enjoyed this my favorite ten tips
and she was gonna show you debugger cool
features thank you
Thank You Esteban that was a number of
cool features but if you're like me you
now have really clean looking code that
doesn't work so now you enter the
debugger so let's spend the next 10
minutes looking at some features in the
debugger that might help save the day
the first thing we want to talk about
actually three different things one is
how do you attach your debugger to a
process and then about how do you
actually set breakpoints in slightly
more interesting ways so that you can
narrow down the area that you want to
debug and finally once you're stopped
how do you examine the state of your
program first let's start with
connecting the debugger most the most
often used is you just launch the
debugger through shift f9 debug app what
this does is it does a bunch of steps
that you've specified in your run
configuration this has a number of cool
features you know you can specify what
apk to install and more importantly what
to launch so you would normally launch
the default activity but you can launch
a custom activity if you have activity
aliases or some other activity that you
would want to launch or you could also
launch it URL but what happens if you
don't want to launch something you don't
want to install you don't want to build
but you just want to connect or let's
say someone brings your device where
your program is stuck in a bad state so
in this particular case I have a program
and it's running over here and I just
want to directly connect to it the key
is just saying attach debugger to
Android process this is also present in
the toolbar when you select this it
shows you the processes that are running
on your connected device and as soon as
you say ok you select the process then
it immediately attaches the debugger to
that process so this allows you to
examine programs when they are in a
messed up state so this is good when
your program has been running for a
while what do you do if for instance you
want to debug either second process in
your multi process app or you want to
debug something that is
you know you wanted attach the debugger
as soon as the process starts so Android
has a nice API called debug dot wait for
debugger so what this does is that as
soon as your program starts if it's not
launched through the ID itself and when
it encounters this API it will just
pause your program at this location so
that you can then connect to it so in
this particular case I'm going to launch
this broadcast receiver it obviously
doesn't have to be this it can be
anything you go to the show and I launch
this and now you see that the active
whatever you launched is actually
waiting because it's waiting for the
debugger to connect at this point you
can again attach the debugger and now
you see the second process and this will
come and force right at that the next
statement so this is really cool when
you have something that you want to
debug really early in your code
so that is how you attach to cross these
now let's look at now let's look at a
few things about how do you set
breakpoints are in slightly more
interesting ways let's go back here and
let's run our app
so I have I have a break point set up
that's I mean the application you saw is
a pretty simple recycle of you and is
this break point is it in the bind
viewholder it's going to stop every
single time so you can keep continuing
but this gets super annoying really soon
so what you the first thing that you
probably want to learn is there is an
option called mute break points which
will disable break points throughout
your program all the all the great
points that you've set so this allows
your app to continue running without the
break points and then once you have you
program in a certain state where you
actually want the break points enable
you can enable it back again that is
like a hammer this it just disables all
the break points if you want to be a
little bit more if you want to have a
little more control then you start with
looking at conditional breakpoints what
I want you guys to think of is that
break points are not purely static
you you get some control over when they
are hit and what do you do when they are
head that that if you get that part then
you can just go through the list and
figure out all the different options
around break points the first one let's
say is I want to say - I want to say
that I want to I want to break on this
position on this location only on let's
say the let's say the tenth item I'm not
sure if that show properly what I
basically said position equals 10 as a
condition there and this means that this
break point will not be here until this
value this variable position has a value
of five and so of 10 so now go here and
I scroll and now it hits the break point
only when our position is actually 10
that's the conditional breakpoint now
there are actually a number of
conditions that you can set let's go
here and over here you see setting a
condition is one another option that is
really cool is instead of setting a
condition you can actually evaluate an
expression and if you turn off suspend
then this break point acts pretty much
like every time the breakpoint is hit we
will just log this expression over here
let's say I want to log an expression
that says
yes position as
do this so now I go to the console the
new feature in 2 or 3 already is that
logcat gets streamed directly into your
debug console so you see the lock at
over here and then we just added a
breakpoint at the end which basically
said every time it hits the breakpoint
it'll log an expression so when I scroll
over here you will see that it keeps
logging whenever it hits the breakpoint
it will keep logging or whatever
expression that you have given so this
is extremely useful because you don't
have to like if you just want to log
something then you don't have to do a
whole rebuild and deploy again the next
I just want to point out a few other
conditional options that are there in
breakpoints which is there is one cool
feature where you can say that I don't
want this breakpoint I don't want the
program to pause at this breakpoint
until a different breakpoint was hit so
if you specify this then the program
will pause at this breakpoint only after
the subsequent breakpoint was set and
you have even more controls you know
there are instance filters so you can
say you only want to stop if it's a
certain object set in class so now let's
go
so now let's look at another really cool
feature that the debugger provides so
have this
okay so this is the data which is
displayed by the recyclerview
and i have a whole bunch of objects what
happens if you want to track one
particular object throughout the
lifecycle of your program
so what I can do is let's say I want to
track what is going on with the eighth
object in my list I can attach a name to
it and this is what you do by marking
the object and so I say this is date and
what that immediately does is that it
this is equivalent of you creating a
variable in the debugger and seeing that
this variable points this to this
particular object and any time in your
program as long as that object is
visible you will see it annotated with
this particular name it's really cool
because many times you want to track a
one particular object I usually end up
used to end up writing it on a piece of
paper the object reference and your
tracker but instead you just have to
mark the object and then once it is done
let's say you go somewhere else in your
program and over here you can actually
see firstly you can see that it is the
same object so in the case that it is a
single turn for instance and you have
properly marked then you would not you
would always see it annotated with us
not only that you can actually use this
as a conditional over here so here I can
say forecast or equals RT a so this is
the variable name I gave and if you are
the IntelliJ convention is that you add
underscore debug label as a suffix and
that variable is just available to you
so now if you do this then we will stop
at this breakpoint only on the whenever
the forecast matches the day we mark so
this is really cool when you want to
track specific objects over the course
of your program
now I want to get into evaluating
expressions a little bit so let's go
over here and I have
so I have this expression and what this
is is that if the current time if it was
more than a day since the last sink only
then show notification but it so happens
that I actually want to debug so if I
continue from here if I step through
from here then I go into the if case and
I but what I really want to debug let's
say is the else case so now what do you
do let's go back to the breakpoint again
the easiest thing to do first is you
evaluate this expression so now you see
the current so the result is true so
you're going to take the if case but
what I really want to do is figure out
why this case was true so now I can see
the last thing time this is the
timestamp in milliseconds but it's
pretty hard to see what exactly that
means so what you can do is you can say
that I want to view this as a timestamp
now when you do that it actually renders
it as a timestamp and that's pretty cool
because now you see that the last thing
was at noon and so obviously the if
condition will always be true now comes
the next part you actually want to force
it so what you do is you set the value
to zero and you close and then you can
evaluate the expression again now the
result is false and that's because we
were basically just able to from the
debugger set the value of an object and
you can do this actually for any any
field that you want so now if you close
and step you can now get the LCS without
actually tweaking your program you just
change the value in the debugger the
last couple of things so actually let me
show one more thing here this smart step
so
normally when you when you have code
like this which is either methods which
are
so I have a method like this then
typically what and if I want to step
into one of these methods what I what
used to happen is that you would
actually have to step into each one and
then you get out of it and then you go
back into it so instead there is an
option called smart step which will tell
you exactly which particular method you
want to step into and this is really
useful whenever you have methods you
know functions being passed on so you
have multiple parameters which take
function values and then you can select
which particular method you want step
into now let's look at a little bit
about the view over here in this stack
frame view everything that is colored
yellow is actually coming from sources
that are not in your project one tip to
know is that earlier so if I select this
we would take you to the platform
sources but the platform sources always
correspond it to your target API level
not corresponding to the device that you
are actually running on in finally in to
or to in we have fixed it so that we now
show you the sources corresponding to
the corresponding to the device the only
thing you have to do is make sure that
that particular source is actually
installed we don't have a UI that comes
up and say it says that you know if you
install this it will properly show you
the source so just as long as you have
the source is installed it'll pick up
the correct sources
finally I want to say a couple of things
about instant run one really cool thing
about instant run is that if you are
debugging or an instant run is enabled
you can actually restart an activity
from here and that would immediately if
I had launched it in instant on mode it
would pretty much restart the activity
you don't have to go killer and you
don't have to go to the device and one
other tip when you are using instant run
is that you have to manually stop your
instance or use the stop button to
terminate the application before running
again if you want to launch to a
different device this is just a little
bit of because instant-on is new many
people get confused about that that's
what I had hope you found it useful next
step as Kathryn will talk about CC
processes
awesome Thank You Shiva it's so C and
C++ I'm gonna cover a little bit of edit
and a little bit of debug so on the Edit
front one if anyone's ever edited mini
J&amp;amp;I methods it's really really easy when
you author it in the C or C++ side to
get some name mismatch and then you get
some runtime error
we've actually got functionality in
studio though where you can completely
avoid this problem because when you
start creating a new method let's just
make a clone of our string to J&amp;amp;I here
you can auto complete it from the studio
side I know where's my button and it
creates the whole stub in C++ so you
don't have to worry at all about you
know whether you've actually got in the
right java class path here once you
start editing there's a c++ tool called
doxygen where it gives you Java style
auto dogs so let's say we want to create
some sample function you need to add the
method we're not yeah whatever
um so as I create this I can whatever I
went in there
and then you look up the whole list but
a couple good ones are
I think brief is the heading this is
what I do can say author um
and then when you go down and hit f1 I
should if I have spelled this correctly
sorry
smoothaise I was simple for oh gosh so
once I actually get my letters correct
you can see all my Doc's um we turn is
another super handy one your stuff right
yeah it's a good way to get Java style
keep track of things you don't just have
back and forth all the time now once
you're done editing we've added a bunch
of functionality to the debugger for C++
so I think in the earlier talked or
mentioned the Auto debugger and I'm just
going to start this if you ever start
the debugger hoping to catch C++ code
and you're like why is it not catching
any of my native breakpoints the first
thing you should always look at is under
your app configuration do you have the
sets of Java if it sets a Java you're
going to be pretty sad but when it's set
to auto native or hybrid well if it's
it's in native you're not gonna catch in
the Java breakpoints but I can step into
my java breakpoint and then I can
actually set a little-known feature
called a memory watch point so I can
right-click on this and say add watch
point and this actually adds hardware
support where whenever I touch this
memory address it's going to stop the
debugger so let's set this to any so I'm
gonna be reading from it and you can see
I don't have any breakpoints set down
here I just want at the very end I start
running and since we're actually
accessing the memory wife's at the
breakpoints the CPU is going to stop and
let us look at it with the debugger so
if you ever try to figure out what's
going on with some crazy chunk of memory
this is a really handy way to do it it's
officially supported on x86 and the
Nexus 9 the emulator though is a good
way to get an x86 debugger environment
so once we've done that let's take that
away and the other thing we've added the
debugger for C++ is STL support so you
can see up here I've created a vector
and I've added a bunch of pairs to it I
can actually start expanding it's fully
aware of this tail you can have some
crazy map in here and it should still
bender I mean you can interact with the
STL when you're evaluating your
functions I can say like vector size and
voila I'm similarly you should be able
to edit memory see the results so I
think that's the debugger stuff we've
added see if I can get us back on time
oh and then the other thing I should
have mentioned in reddit if you're used
to using C++ 11 you may have noticed
that the NDK an experimental Gradle do
not default to it so you're like you
know Auto variable error a handy way to
fix that is you can actually turn it on
so if you're using the experimental
Gradle plug-in and you want to use C++
11 just add this to your NDK stanza and
you will have access to all of the Handy
eleven language features and then a
final tip for C++ is if you ever have a
J&amp;amp;I error on debug build and studio on
an emulator you may notice that you get
this expanded stack trace so I have an
app here that is actually probably not
very social it's got this handy button
for crash J&amp;amp;I and if we hit this let's
just keep going
if we hit this it actually makes a
invalid a and I call so we can't call a
find class with something that's not a
class and we'll get this huge tax trace
I know some folks have come saying I'm
getting all these sick aborts from my
production build what's happening one
thing to consider is that these stack
traces actually only occur on debug
built in studio by default and on the
emulator if you're using a real device
with a production build
all you see is they abort and there's a
handy way to fix that which is you can
connect to a device with ADB and set
check j'ni to be one and this will
enable J&amp;amp;I checking evening if it's a
production build evening with a physical
device so you're seeing a crazy awards
coming out try running this and try
using it to see if you've got a J&amp;amp;I
problem causing your error and with that
I'd like to hand it over to Jerome for
some great tips thank you alright so as
you know we've worked a lot on
performance of build whether the build
should be incremental or full and some
of the effort that was led by this
performance work was the instant run a
technology now when installed on got
delivered a lot of people got confused
about a few things
and I would like to clarify some of them
today so first of all the way we do
instant run is by doing bytecode
instrumentation and do we do have a few
fields and a few methods so suddenly
some magic can happen and you can reload
a class in a living virtual machine
without having to restart the
application now this adding of fields
and methods have sometimes from people
over the limit of the 65k Dex file limit
and that a lot of people were confused
by that and not knowing how to fix it so
I thought I should I should explain how
it is so basically if you heat the 65k
limit which is just what happened here
should probably make this a little
bigger so you should get a message that
will tell you that you are over the 65
key limits so as you know the Dex file
format only support 65 key methods or
classes Here I am at 70 K so to fix the
problem I just need to to define
one more girdle thing to say I want
Monty Tex to be true okay so when that
happens and now we can try to build
gradall we'll start saying that we are
allowing to build the application in
separate different Dex files now there's
two types of multi decks in on the whate
platform there is what we call the
legacy multiplexing and there is the
modern or native multi taxing and
depending on which platform you're
you're targeting we will use one or the
other
basically the before 21 you will use the
legacy one and 21 and above you will use
the modern one the problem here is that
because we are targeting min SDK 19 by
default the the legacy multi decks would
be used okay so we still got to build
and it's 12 seconds which is going to be
our baseline for today's demo and we're
going to see this number going down as
I'm starting to improve by different
settings this this build environment but
first I would like to change a little
bit of code just one line and I'm going
to change this for instance so we also
get a baseline for the incremental built
so the incremental build will just have
one file in theory it should be modified
much faster but we're going to see that
because we are using legacy multi decks
it's not going to be much faster in fact
it might actually be more as exactly the
same time 11.5 okay so we are 12 for the
full build 11.5 for the incremental
build I cannot say that we are doing a
great job at the incremental building
here so first what we should do is to
try to switch to native multi decks
because with native multi dextra virtual
machine is capable of understanding
natively that tool application can be
packaged as several decks files and
therefore he is a lot less work for the
build system to be able to handle this
so to do that we're going to add a
flavor and this one is going to be set a
legacy one
and that's where we're going to continue
targeting 19 and then we have a new
flavor that we're going to be cooling
modern and this one will be targeting 21
and a both now if I go to the build
violence let's let's think first if I go
to the build variant I'm going to switch
my legacy debug to my mother and debug
so now they're going to rebuild do not
ask me this again please when I'm going
to rebuild I'm gonna down rebuild with
the modern Dex file and that's not going
to make a huge change for the full build
so let's let's wait until it's doing its
job eleven point six we were at twelve
so it's not great but slightly better
but where we're going to start saying a
big difference is when we switch when we
do the incremental build okay so when
when the incremental build we were also
at eleven point five seconds now we add
six so we already divided by to do Build
time that's good but I'm sure we can do
better keep your claps for now first
thing that you should always try to do
is to use the letters Gradle plugin
because we always try to announce stuff
yes sometimes we break stuff but we try
to fix it
but for most of the time we try to make
things better and using the latest
version will allow you to use the latest
enhancements so in this case I'm going
to switch to the latest version and I'm
going to continue building exactly the
same way but because I want to force a
complete rebuild let me clean it first
and run a full built so here I'm getting
another type of message and it's telling
me that starting with to the two we made
things better you can now run your decks
in process which is going to make things
faster but unfortunately in this
particular instance you don't have
enough memory and therefore we revert to
the old out of process stuff so let's
add more memory to the Gradle daemon and
I cannot stress how important this can
be when you will start using the Rado
2.2 you should really look into adding
more memory to the data Gmail so here
I'm adding for G and I'm going to do
exactly the same thing again I'm going
to clean the project so we get the new
baseline for the full build
so in this case the the message should
be gone and it is gone so now we are now
in process and we were about 12 seconds
earlier we are down to nine seconds for
the full build pretty ok let's continue
trying to see how much it would take to
make an incremental change now alright
2.3 seconds but it is getting better but
we can do more now we can do more next
thing
instant run has been disabled so far so
let's put it back on so when it's that
one is on we will try to redeliver the
smallest set of changes each time you do
a build so again let me clean it so
you're sure to have a clean environment
to surface so the instant run will not
only try to reload a classes in the
virtual machine without even restarting
the application but it will also
concentrate very much into delivering
the minimum set of changes required so
in this particular case excuse me
in this particular case when you change
a single Java file you will most likely
only redeliver
the Dex file that corresponds to this
single Java file so that was the full
build now let's change again this and
let's measure how much we are down to
0.6 now we are talking
I'm pretty sure
even better I can go to 0.4 okay so as
you can see we start at 12 seconds we
are now at 0.4 we related very little
changes very little work will be divided
by more than 20 times the build time but
let's do some other changes for instance
let's take the good source files here
and let's look into the main file this
is really small here actually I don't
have to do this I can go to the app so
as you can see here I've got a version
code which is one let me change it to
five and let's see how that influenced
the build three seconds what happened I
was at 0.4 now I have at three seconds
well what happened is that we changed
the main manifest and when that happens
the only way we can redeliver the
manifest file is by reliving the full
apk so you can see how some of the
changes that you make have a very strong
influence and knowing the tool knowing
what the tool does is very important
here if you for instance are smart and
try to change the version every single
time you build by using the current time
right now as your version you can see
that you will never ever leverage
instant run features okay so it's
important to remember that but again
understand the tools there's a lot of
documentation about instant run I'm
afraid we don't have time for QA we have
only 30 seconds but we will be available
outside for QA and then we have the
booth which is right outside on this
side for the annoyed studio where you're
more than welcome to come and ask for
further questions thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>