<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Direct Boot (Android Development Patterns S3 Ep 8) | Coder Coacher - Coaching Coders</title><meta content="Direct Boot (Android Development Patterns S3 Ep 8) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Direct Boot (Android Development Patterns S3 Ep 8)</b></h2><h5 class="post__date">2016-08-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fb2Zwmc3Sp4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you know how sometimes your phone
battery dies and you plug your device in
for the night but fall asleep before it
finishes booting then you wake up an
hour late because your alarm clock
didn't work what have I told you that
you can save your users from this
disaster by enabling your apps to run in
the new direct boot mode direct boot is
available on supported devices with API
24 and up and it lets applications run
in a limited environment right after the
device boots before the user has a
chance to unlock it for the first time
there are a couple of changes he will
have to make to your app to support
direct boot but before you start first
take a moment to decide whether your app
should run during this mode the best
candidates are apps that provide timely
and important notifications like alarm
clocks or messaging clients an order use
case would be applications that
implement accessibility services in any
case once you've made the decision to
support direct boot the next thing to do
is figure out which components of your
app will run before unlocking only
components that you explicitly mark with
direct boot aware equals true and the
manifest will be eligible to run during
direct boot you can listen for the new
action locked boot completed broadcast
to schedule any jobs or alarms that you
need as soon as the device boots note
that once the user unlocks the device
all apps will still receive the action
boot completed broadcast as usual if you
want to directly query the state of the
device you can call user Manager is user
unlocked or listen for the action user
unlocked broadcast from a running
component of your app and finally the
last step to maker app direct boot ready
is to move any private app data needed
by your direct boot aware components to
the new device protected storage area
now the default storage area for apps is
called the credential protected storage
this is the location that is accessed
when you use all the file API s on the
context object and can only be decrypted
once the user enters their credentials
to be able to store and read data during
direct boot you have to get a news a
device protected storage context so that
any file related API calls use the
device protected storage area if there
is any data that previous versions of
your app created or which was restored
from automatic
back up and you need to migrate it to
the device protected storage you can use
one of the helper functions for moving
shared preferences and databases
remember to think carefully about what
to store in the device protected storage
all sensitive user data like full
message history access tokens and
passwords should go in the credential
protected storage only use the device
protected storage area for any
information that is absolutely necessary
for your app to work while indirect boot
direct book mode will be enabled out of
the box by default on new devices that
come out with API 24 pre-installed you
can test direct boot now if you own a
nexus 5x Nexus 6p or a pixel see going
to developer tools and select convert to
file encryption a word of warning though
this will wipe all data on your device
remember users are counting on those
timely notifications so build better
apps
by implementing direct boot now and
check out our playlist for other new
features that we're introducing in
android
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>