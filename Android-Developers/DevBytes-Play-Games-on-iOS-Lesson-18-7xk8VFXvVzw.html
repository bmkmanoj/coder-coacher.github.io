<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>DevBytes: Play Games on iOS Lesson 1.8 | Coder Coacher - Coaching Coders</title><meta content="DevBytes: Play Games on iOS Lesson 1.8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>DevBytes: Play Games on iOS Lesson 1.8</b></h2><h5 class="post__date">2013-09-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7xk8VFXvVzw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now that we've written the code to
sign the user in let's go through the
process of adding a sign-in button and
maybe before we do that we should ask
ourselves why are we even adding a
sign-in button after all Game Center
kind of does what we did right it signs
the user in as soon as your application
is started so why does Google Play need
to be different and the answer is that
play games and game center are slightly
different animals with game center we
can have a number of different
applications that all use essentially
the same game center service and what
that means is when the first game the
user ever attempts to play on this
device signs indie game center the user
will see a approval dialogue and maybe
they'll have to go through a few setup
steps but then for every other
application when they attempt to sign
the user into a game center that request
will be approved or denied automatically
there's no additional dialogues that the
user needs to see at that point so it's
generally considered okay behavior to
try to sign the user in right away
generally speaking it's really only that
one first game where the user is going
to have to see any kind of dialogue on
the other hand with play games you
essentially have a separate service
associated with each application and
permission to access the service is on
an application by application basis that
means that the user may go through an
approval dialogue to say sign in to play
games on on one game but then they'll
still need to go through an approval
dialogue for every other game that wants
to use its own version of Play game
services and the user can accept or
reject each of these applications as he
or she sees fit and on top of that these
generally aren't in game approval
dialogues we have to switch to an
entirely different application usually
Google+ or mobile safari to show that Oh
auth to sign and dialogue so it can be a
jarring experience to start up that game
and immediately happen to switch to an
oauth screen without giving the user any
kind of context as to what's going on or
why they're switching to another
application and that's why we want to be
careful about signing the user into play
games as soon as they start up your game
we want to avoid this experience so how
do we present the sign-in button to the
player well
my recommendation is the assertive yet
friendly much like this puppy hi buddy
and what I mean by that is yes you don't
want to switch the user to an OS consent
screen as soon as they start up your
game but on the other hand neither do
you want to hide the signing mechanism
through some kind of hidden menu feature
I've seen applications that have social
login features but they're often hidden
behind a menu I've got to go into
options or features and preferences and
somewhere in there is my social login
and you might think at first that maybe
you want to put your Google+ sign in
there as well however we have to
remember that the sign-in process
enables a number of features that aren't
purely limited to say sharing something
on your social network play games can
also for instance store your scores on
leaderboards or save your game in the
cloud or record chipman progress and if
users in a situation where they think
they've submitted their score to a
leaderboard and then it turns out that
that leaderboard never got their score
submission in the first place because
they weren't signed in the user could be
genuinely unhappy you know same deal if
they thought they were earning a
difficult to earn achievement and then
they don't get credit for it because
they weren't signed in or even worse
they think they're saving their game to
the cloud and they're not because they
forgot to sign in on this device so I do
recommend being a little more aggressive
with your sign-in button than hiding it
away in a menu somewhere to patterns
that we've seen that have generally been
fairly successful are one put your
sign-in button somewhere fairly
prominent on say your title screen where
the user will first see it maybe even
include a little text that says hey sign
in here to save your scores to you know
social leader boards or something like
that a second pattern we started seeing
is games asking the user through an
in-game dialog box when they first start
up the game if they would like to sign
into Google to enable cloud save I
suppose this method is a little more
assertive than the previous method so
our puppy is slightly more assertive but
this is a pattern worth looking into
particularly if you're game uses cloud
save this is a case where if the user
isn't signed in and they think they're
saving their game of the cloud and
they're not they could be really unhappy
so in that case it might be worth being
a little more assertive about promoting
sign in
again stay polite but assertive so with
that in mind we can finally go back to
adding our sign in button to our game
now i'm going to switch to my nib here
and i'm going to add two things first
i'm going to add a label and let's put
it here and we'll stretch it out a bit
we'll have it display nice little
message that you know say sign in for
achievements and leaderboards will go up
here and make it right aligned change
the number lines 20 and maybe we can fix
the word wrapping there we go and then
we can resize this thing a bit so we can
drag it like this and sorry it's kind of
painful to watch but we'll move it over
and all right all right could spend the
rest of this video futzing with this
thing but that's good enough the next
thing we're going to do is add our sign
in button now I'm going to show you
something I'm going to use the official
Google+ sign-in button and here's how
I'm going to do it first I'm going to
drag this button on screen and then the
next thing I'm going to do is go back
into my downloads library and I'm going
to open up the Google+ iOS SDK and
remember how I told you not to add this
google plus bundle well for demo
purposes I'm going to add it you can
follow along if you want but we're going
to delete this all in a few seconds so
up to you but I'm going to add this
google plus bundle i'm not going to copy
it just added as a reference and then
this button i'm going to change its
class from a uibutton to a GPP sign-in
button this stands for Google+ platform
sign-in button and then the last thing
I'm going to do is go into my intro view
controller and I'm going to remove this
call here to authenticate with in you
did load right we don't want that to
happen automatically
want the user to click the Sign In
button and then I forgot one thing let's
go back to my xcode project my nib and
using my springs and struts let's change
this so that these all are anchored to
the bottom here that'll make sure that
when the screen gets shortened which it
will because it's within a navigation
controller you know these buttons and
labels will still be seen on screen and
the last thing we're going to do is
actually remove all the texts from my my
button so it looks like an empty button
with no text right but now watch what
happens when I run it that empty button
with no text magically has been turned
into a Google+ sign-in button isn't that
cool not only that but it follows all of
the proper branding guidelines it turns
out that making the sign in text
slightly offset from the center like
this is not easy and what's even cooler
is that if I were to view this in French
or German or one of a number of other
languages that we support this text
would be properly localized there's no
additional work I would need to do to to
localize this thing and now watch what
happens when I click the button after a
couple moments you can see that
authenticate was called forming again I
didn't have to add any code for this to
work this google plus button made all
the calls for me right it made a call to
GPP sign-in shared instance authenticate
for me I didn't have to do any other
code to hook it up which is pretty cool
and so in case you're asking you know
hey Todd if this Google+ sign-in button
is so great how come you're not actually
using it the reason is that these
tutorials are generally made for game
developers and so I know that for many
of you you prefer to render your buttons
inside your game engine yourself it can
be somewhat problematic I think to take
a uibutton or some class of a uibutton
and somehow display it on top of your
game engine you know a lot of game
engines just don't work that way and so
my point here really is just to show you
that this Google+ sign-in button isn't
magical but it does do three things for
you number one it properly displays the
Sign In button using all the proper
branding number two it local
the text for you and number three it
calls authenticate when you click it but
since I don't want you to have to rely
on the Google+ sign-in button we're
going to get rid of this official sign
in button and just do it ourselves with
the regular UI button so that you can
see the code that would get called in
case you want to render this button
inside your game object which I imagine
many of you will so let's do that first
thing I'm going to do is we're going to
let's say well delete this bundle
because we're not going to use it
goodbye and then we're going to say that
this button is in fact just a normal old
uibutton the next question you might be
asking then is ok great so how do i
display the Sign In button using all the
proper branding guidelines in the offset
text and all that and for me the answer
is usually let's just display these as
graphic buttons you don't get the
advantage of localizing your text but it
is a little easier so if you go to this
link that is going to magically appear
on your screen right now I have a link
to a zip file that you can download that
contains some of the artwork that you
would need to display your own Google+
sign-in button once you download the zip
file you'll have something that looks a
little like this we can unzip it and we
got a folder named artwork and let's
just drag this into our application and
yeah let's copy it and at this point I'm
just going to take this UI button and
I'm going to say it's type is custom and
let's start changing the images so
normal for when you're signed in
normally or we're displaying the button
normally change our state to highlighted
in that case I'm going to use the sign
impressed we'll use the same one for
selected and then when you're disabled
i'm going to use sign and disabled and
so now our UI button is still a uibutton
but it has a completely graphic look and
so it
kind of looks the like the official sign
in button the next thing we're going to
do is let's hide a few of these things
bring our helper editor and I'm going to
just start adding some outlets for my
button and my label I'm going to drag
this in here and it's an outlet and I
will call it sign-in button and I'm
going to do another one for the label
and will be referencing these later to
hide the button or change the text of
the label depending on whether the user
is signed in or not and then finally I'm
going to take my sign in button and I'm
going to drag drag it in here and create
an action we will call it sign in button
was pressed and all I actually need to
do here is called GPP sign-in shared
instance authenticate again this is
really all that the official Google+
sign-in button does when you click on it
so we needed to add in this one action
but otherwise we're going to get a
button that behaves pretty similarly so
now we can run this and I'm going to
click the Sign In button and there we go
we have our bearer token here in our
console log so it looks like cynon
worked by the way in case you're
wondering why we're not seeing that Oh
auth dialogue that we saw the first time
it's because our system is smart enough
to know that if you're logging in or
signing in to the same application as
before with the same account as before
and the application isn't asking for any
new scopes and you know you haven't done
anything to do is the application it
will assume that you're still cool with
signing in and so it won't show that
sign and dialogue every time you want to
sign in which would start to get pretty
tedious we can take advantage of this
situation
I automatically signing the user in on
subsequent visits so it kind of makes
sense to have this button on screen if
it's the first time the user has visited
the application or they haven't signed
in but if the users already signed in
and we know that we can sign them in
silently well then at that point it
makes sense to go ahead and do so and we
can do that by calling the try silent
authentication method and we're going to
do that by going into my interview
controller and I'm viewdidload after i
initialize GPP sign-in i'm going to call
my GPP sign-in shared instance try
silent authentication now what this
method does is it basically looks and
sees if I've signed it in the past with
this application if I have it'll just go
ahead and try and sign me in you know no
clicking on the sign-in button required
so let's see what happens now when I run
it so we start up the application I'm
not going to click on the Sign In button
but it looks like I've successfully off
anyway which is cool now there are
clearly some cleanup tasks we need to do
here we don't want this sign in button
sticking around if the user is already
signed in we probably want to hide it or
maybe change it to a sign out button we
probably want to change the label once
the user signed in and we'll be dealing
with all that in a future lesson but for
right now let's take a closer look at
this access token and see what magical
powers this has granted us now the user
is signed in and we'll be looking at
that in the next lesson
Wow
haha</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>