<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AdapterViews and Espresso - Android Testing Patterns #3 | Coder Coacher - Coaching Coders</title><meta content="AdapterViews and Espresso - Android Testing Patterns #3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AdapterViews and Espresso - Android Testing Patterns #3</b></h2><h5 class="post__date">2016-06-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zi7v47kYKrk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in the previous episode of Android
testing patterns you learned the basic
espresso test flow finding a view
performing an action and verifying the
result things get a little more
complicated when testing a screen that
contains a ListView which can be backed
by an adapter with tens or even hundreds
of rows most of the time the view that
you're interested in might not even be
on the screen as adapter views only show
a small number of children and recycled
child views as you scroll
fortunately espresso already comes with
the solution instead of using the on
view method start your search with on
data and provide a matter against the
data that is backing the view you'd like
to match espresso will do all the
legwork of finding the row in the
adapter and bringing it into the
viewport let's look at an example I'll
clone our testing samples repository
from github and open the espresso data
adapter sample here we have a simple
activity showing your ListView populated
with a hundred items
the listview is backed by a simple
adapter where each row is a collection
of key-value pairs stored as a map
I'll switch to the test class now you
can see on data and a helper method that
is used throughout the tests to locate a
row in the list view his entry is a
standard hamcrest matcher designed to
work with maps here we're using it to
search for rows whose text is equal to
the given argument
if I go ahead and run the tests in this
class you can see that espresso is
scrolling the list view to the desired
position before performing actions on
the rows if your adapter view items are
not map instances you can of course use
other matches in on data just make sure
you know what type of objects your
adapter is holding if you're using a
cursor adapter there are convenient
measures available in the cursor matches
class there is one more case I want to
cover and that's recycler view although
it works on a similar principle as
adapter views it does not actually
inherit from the adapter view class
there's a separate set of methods to
work with recycler views that let you
scroll and perform actions on it's child
views if you want to see more examples
of working with views backed by adapters
check out my article and medium linked
in the description happy testing
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>