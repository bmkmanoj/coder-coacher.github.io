<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ADL+ 2012-12-13 - Maps API V2 | Coder Coacher - Coaching Coders</title><meta content="ADL+ 2012-12-13 - Maps API V2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ADL+ 2012-12-13 - Maps API V2</b></h2><h5 class="post__date">2012-12-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/97HLa739rXU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome to another Android
developer lab plus for the 13th of
December 2012 it is actually our final
adl+ for the year so I hope you're
excited because we've we're talking
about a new API that we've recently
launched and let me first introduce our
special guest welcome to Paul saxman
Paul why don't you introduce yourself
sure my name is Paul saxman I'm a
vanilla / advocate on the Google Maps
team and so I work or we'll be working
more on the the Android API and some
other API that we recently announced
that I will talk about but we will be
talking about next couple weeks so uh
and yeah so we're really excited to be
here and to kind of talk about a little
more about what we're what what's going
on the Android map Google Google Maps
Android API v2 v2 so well it's really
good to have you so thank you for
joining us today and we have usual
regular attorney Tony Chen yeah how
everyone joining us from Hong Kong as
usual so today I'm actually I'm Ankur
Kotwal and I'm joining you from Mountain
View California this week and yeah we've
were just waiting to get started so
let's with that being said let's get
started with the presentation just
sharing my slides and here we are
so as usual first we'll start off with
what's what's been happening recently in
terms of news we launched an Android
developer survey very recently and
basically we're asking Android
developers to give us feedback on a
whole range of topics it takes probably
anywhere between 5 and 15 minutes
depending on how long you spend on it
but it's really valuable information to
us and we want to hear what your
experiences is like so please do let us
know the survey is closing fairly soon
and yeah it helps us prioritize the the
work that we do it helps us prioritize
go to the engineering team
and tell us that these are the important
things that that developers are asking
for and so more data points is always a
good thing
in other news we've recently launched
Google Play services version 2 so if you
remember back to about 2 months ago we
launched version 1 which had the OAuth 2
component as well as the Google+ API
well now we have version 2 and it
includes the Google Maps Android API
version 2 as well
which explains why Paul is here so
there's there's tons of great things
about it for starters we get vector
based map so we were able to retain
graphical fidelity regardless of what
zoom level you're at and we have
beautiful 3d cameras 3d camera control
now so not just your zoom and rotate but
tilt as well and you'll get 3d buildings
popping up in cities that support them
and include support for indoor maps and
of course everything that developers
have been asking for for a while which
is map fragments so you know we're not
going to well hopefully we're not going
to see any questions now saying when
when can we use maps on tablets because
they're finally here Google Play
services version 2 also included a
photosphere API so photosphere is a new
feature on Android 4.2 which basically
allows you to capture a 360 degree
panorama they're really beautiful
there's some great ones up there on
Google+ so go hunting for them there
they're worth looking at and so
obviously we have some API surround that
- and next up is in our billing so one
of the the things that developers have
been asking for with in-app billing is
being able to have a synchronous way of
doing it so in the past with in-app
billing version 1 &amp;amp; 2 what would happen
is you'd send off a purchase request and
it would get back to you at some point
later whereas now it won't return to you
until as soon as you ask for it you get
a response so you'll basically wait for
a response so this really simplifies
coding around the API it it makes it a
lot more reliable as well and you know
there's there's a
ton of new functionality there as well
including local caching and something
again developers have been asking for
which is being able to query for product
info so now with this API you can
actually query at runtime to say what
are the in-app purchases available what
are their prices and what are their
description so you no longer need to
hard-code those prices in your app which
is just great news both for developers
but also for users so the the thing
that's missing in in-app billing version
3 at the moment is subscription but
that's coming very soon and it's you
know we basically expect developers to
start using version 3 as soon as
possible because it really is great so
with that being said I'm now going to
hand it over to Tony to talk to us about
the Maps API
so Tony yeah so before we get into the
details let me give a brief introduction
on how to get started to incorporate the
new Maps API into your your Android apps
so the first thing you need to have is
of course like are you installing in the
Google Play services this is including
the part of the Android SDK manager so
if you go to eclipse and launch the SDK
manager you will see a new version of
Google Play services which is version 2
and and just install it that's the first
step next slide the next thing we need
to have is of course just like the first
version you need to have a Google Maps
API key so one thing which which is
really important is the existing key you
have from if you already have a Maps an
application using the map view version
one one thing important is the the key
for version 1 is not going to work with
the version 2 API so you do need to
generate a new Maps API key to use the
new version
another thing about the API key is it's
generated in Google API console so pay
attention that's not the Google Play
Developer console so I actually includes
wind shout out what Google API console
looks like you can you can go to this
console by going to code.google.com /
api's slash console so one thing you
will notice now under the all services
if you already have a Google project you
will see the Google Maps API version 2
services available now you can click
into that and to generate new new keys
next slide so about the Maps API key the
format is like you you have is the first
part of the if so you need two things to
generate the Maps API key the key itself
is a 40 character key but in order to
generate the key you need to have to two
things one is your apps certificates
sha-1 fingerprint print and the next
thing is the package name so so so how
to get the the the sha-1 fingerprint so
there is you can use the teak the key
tool command line I have included
command line here but one thing you
really need to pay attention is you need
to use the - - we both are attribute so
that it will show the char on
fingerprints so one thing is if you
don't include the - we parameter by
default the fingerprint shown on the on
the result is is going to be md5
fingerprint which is which looks almost
exactly like the Xiaolin fingerprint so
we have some developer try to run the
key tools and then they said it couldn't
generate the key because it is the wrong
fingerprint you in in
case we need the sha-1 fingerprint in
stuff nb5 one another best practice I
want to share with you is is it's a good
practice to to use a different
certificate to sign each application so
so in this case you you you will use
your application certificate to get
different the showering fingerprint and
then we append the package name after :
and and you get your generator the right
Maps API key next slide so another
another thing you need to make sure to
include in your project is especially if
you want to target anything earlier than
API 11 so in most case I think the
support library is really important so
the new Maps API also backport to the
support library and you so you need to
install the latest support library
instead of using the map fragment if you
use the support library use support map
fragment it's like so now let's talk
about how to add the after you generate
the Maps API key how to include that in
your in your application so at the end
of if you go to your Android manifest
XML you need to add on a metadata tag
with the name come to androi come google
android on maps v2 API key and then you
pace your nugent newly generated API T
to the value attribute you also need to
create a custom permission to include
that in your in your Android manifest
the permission name is your package name
that permission dot maps underscore we
Steve so the
already include all the details in this
slide so that's the custom custom
permission you need you also need some
other permission next slides so here are
a couple of permissions you most likely
will need the first one is the internet
connection so we need that to download
the Google the target the map tiles from
from the maps of Google map server your
don't you also need to include the right
external storage permission to take
advantage of the caching for maps
another regio services permission so
that's there's a permission we need to
access all the google web based services
there are couple optional but most
likely very useful for most of the maps
application is you only need access the
course location and fine location if you
plan to get access to the user current
location so this I just want to
emphasize the point here that the Tony
made the access course and fine location
are truly optional don't just blindly
include them just because you're using
the library because often you'll have a
map in your app and you're not actually
using the user's location I've written
many apps using this new API where I
didn't need these permissions so it's
it's really important that people don't
just blindly copy and paste and include
I mean we've had a previous presentation
on abusing permissions and so yeah don't
Doug the overzealous with them the next
things you need to include in the
manifest is is to include the feature
OpenGL ES version 2 as anchor mentioned
earlier the new maps are using vector
base maps and that's actually a
requirement to to have open
yes version two so I'm sure you guys
will enjoy to to try out a new API and
so one small favor we need to ask you
guys to include is is attribution
requirement in order to use the new Maps
API so you can you can you can add that
as a separate action item or as part of
your original or your own about action
item in your in your application we make
it even easier for you so there's API
call from Google Play services to get
open source software license info so you
just need to get that grab that text
from the from them method and just
include that in your in your about as
action item just also I'm going to add
here that as of the 1st of October
90% of Android devices support OpenGL 2
version 2 so anything remotely modern
will definitely do it but in terms of
all the devices that don't support
OpenGL version 2 we're talking about 9.2
percent so the majority of devices
definitely will support this it's not
such a bad it's not such a hard
requirement because you definitely get
better maps and the experience on device
this wouldn't be worthwhile anyway so
this isn't as stricter requirement as it
may seem so that's pretty much all I
have for getting started to have your
apps to incorporate in maps and our past
past positive 40 to you to tell you guys
more details about how to use all the
features in the in the maps in the new
and Maps API oh cool yeah thanks Tony
so so yeah so Tony took you through all
the steps to get and kind of prepped for
for including a map and now I'll kind of
start off with telling you actually how
to get the map in your application from
the code point of view so so first thing
is is you definitely want to set up a
layout you know to actually hold the map
and that layout actually is
the layout component is a fragment or
you can use a fragment for that so and
then the first sample here we're using
the support map fragment because we're
using the support library but but you
can if you're not using the support
library which you probably should be
using the support library but just leave
a support out of that the support map
fragment line there at the end so
basically if you're supporting devices
prior to honeycomb Android 3.0 you'll be
using the support library because we
didn't have fragments prior to that
now given that gingerbread which is 2.3
is still about roughly about 50% of the
user base you you almost definitely will
be using the support library so this is
an important point yeah yeah so what
kind of carry on with you know under the
assumption that you're using the support
map fragment but I mean the code
essentially looks exactly the same
or different namespaces exactly
different namespaces and slightly
different function calls but but yeah
and you can see so so when we're
actually creating our activity you you
using the support library you define it
as a fragment activity and maybe anchor
what is the the fragment activity why is
it why isn't it not just called fragment
or well so in Android 3.0 and upwards
activities could host fragments now
fragments are part of the lifecycle as
well now prior to Android 3.0 you just
had because there were no fragments
those activities don't support the
fragment lifecycle so in the support
library we introduced a fragment
activity which extends activity but it
adds the closing for the fragment life
cycles and they can host fragments so
that's why we're using this particular
that's why we're using the fragment
activity yeah very cool and yep so from
then on out it's just a matter of
getting the map in your in your activity
or your fragment so it's a it's called a
Google map as the class name and you can
see in the oncreate method is actually
where you're gonna get it up get it out
of your layout file I'm just using the
ID enter the ID that you specified in
your layout so and I should mention so
the activity main is the activity
main.xml file for the layout I defined
so that's pretty much it to get a map in
your activity so their activity or
fragment so so with this actually with
this code here I'd have a map that was
basically the entire the entire view but
that fragment obviously you can put
anywhere and you view hierarchy so you
can you could embed it you know below
some buttons or a modifiable pane and
now you can actually have more than one
oh yeah so for all those developers that
have been asking for a fragment from
that fragments we want to see these apps
that use more than one map at a time
yeah because I think it'll be
interesting to see how what kind of
experience you provide there keep in
mind that most of these typically Maps
allow you to pan as well so if you've
got swipe gestures and so on like if
using a view pager you know that that
introduces an an interesting dynamic
because the view pager itself can swipe
across pages but the if you're hosting a
map it's gonna consume those swipe
events yeah just just keep these sorts
of things in mind you can do tricks like
with the view pager because you could
just press on the tab at the top to go
to the next page you can kind of get
away with it but if you've got a bunch
of pages where you swiping left or right
to go through them and suddenly there's
a map in there it's kind of seem
inconsistent to users where they're
being able to swipe across pages
sometimes you just got a static map in
which case like it doesn't move so you
can just allow the swipes but if it's
consuming it just pay attention to the
user experience all right yeah and if
you really want to see multiple maps in
an app at the same time definitely check
out the the sample application the demo
app that's part of the the SDK tools so
that that actually will I think there's
one sample in there that has four maps
in a single view and they're all you
know all the events are being handled
independently pretty cool stuff so uh so
a couple of really important things on
I'm just gonna cover two kind of
high-level concepts or kind of important
map concepts and these are kind of the
basic use cases one is the camera so
that's actually you know kind of your
viewport into the map or
or what what part of the map that you're
actually looking at and the other is is
markers markers are very fundamental to
- generally for most mapping
applications so so camera and markers
are what we're gonna cover today there's
there's obviously a lot more features to
the API that we can cover in a later
show things like polylines and polygons
and polygons and ground overlays and
that type of thing so just have a
question for you pull for someone that
doesn't know what what would you define
as a market what does that mean so well
let's we'll cover that in just a second
I have an image of that so so marker
just fundamentally is just like if you
want to put a marker or a pin on the map
as to where you where somebody or
something is so the iconic marker that
we use for Google Maps is kind of
inverted teardrop who looks like the
inverted teardrop so it's sort of like
in a fixed location I'm getting that
sits on the map okay cool yeah well not
necessarily fixed I mean you can move
them around if you really want to and
it's actually relatively easy to move
around but yeah we'll cover a few of
these in a moment you know you'll see
see what they look like so so in terms
of the camera
the key concepts with camera is is the
obviously the camera location that's
that's actually where the camera
positioned over top the map and that can
actually take two forms it's a it's
lat/long so you can actually Center it
on a certain point to the map or the
view of the the map and then the other
one is bounds and that takes two
lat/long object so you can say I want
the map centered at this point or I want
a certain area of the map to be just
viewable in the display and you do that
via the bounds and so to cover those
bounds by zooming out to cover those
exactly so let's say if you want to
actually show a neighborhood and you
know the the top left and bottom right
coordinates for that neighborhood in
terms of geographic terms you just say I
want to have this this bounce or this
bounding box actually displayed on my
map and the map will actually reposition
it resuming position itself to actually
display the entire bounding area so very
useful if you wanted to display an area
supposed to display a particular point
discipling a particular point is just
you just need the lat/long zoom is
actually essentially how high the camera
is over the map so yeah I mean it's it's
fairly fundamental but it's it's kind of
kind of an al analogous to altitude
except that the its inverted so zero is
actually zoomed all the way out and as
you zoom in you don't necessarily like
if you're at zoom zero you won't
necessarily get the entire map zoom zero
just says that I'm going to go as far
out as the as the the viewport allows me
to so so if you have a very big screen I
haven't tried it done and let's say look
at Nexus 10 but presumably if you're
zoomed all the way out on Nexus 10
you'll actually see the entire map of
the world on a smaller device you'll
probably actually see a fraction of the
map I think it's like you'll see the
entire map if it's like 256 DP so so
bearing so so now that we have had
vector based maps and you can actually
rotate them which is a really cool
effect bearing is the is actually the
kind of the rotation of the map mm-hmm
so and so it actually rotates clockwise
so bearing zero is north is at the top
of your interface and as you as you
rotate rotate the bearing actually the
the map rotates clockwise and you go all
the way up to 360 and then you're back
to North so 90 degrees I think is north
on the right hand side of the the
interface tilt again this is a nice
feature of the the nice feature of the
vector based maps is actually can look
at it at an angle so you don't have to
look at the map exactly you know
straighten down top down you can
actually specify a tilt between 0 0 is
actually top down and somewhere between
like 45 and 90 degrees so you get
depends on your zoom level as to what
how much tool you can have right exactly
exactly so so 45 is actually if you're
looking at a map at 45 you can
only see that there's there's an angle
there if you actually bring it below 45
you start to see some kind of 3d effects
it'll be like kind of little bit of kind
of flogging at the at the further end
and that type of thing so really great
effect if you're like you know doing
like moving through the map to have some
kind of tilt on than that scrolling is
actually just moving you know
programmatically moving the the position
of the map and animation is a really
important topic too because you're when
you're actually repositioning the map
you can either do it instantaneously so
it let's say I want to move from from
New York to San Francisco I can you know
have the map just display you know one
moment display New York and then when I
send the command actually have a display
San Francisco also you can actually have
that that camera change animated so you
can actually fly over the United States
to go from New York to San Francisco
really nice effect for for a kind of
more advanced use cases generally use
case obviously just needed reposition
the map so I'll just add that these
capabilities of zoom rotational bearing
tilt and scrolling when you add the map
yourself when you add it add the map
fragment that the typical touch controls
come with it so by default they're
enabled so users can swipe to you know
chair to pan around for those of you
that don't know we have two finger
gestures for rotation where you hold one
finger steady and rotate your other
finger around that steady finger tilt is
two fingers up and down and while
scrolling and scrolling there's also a
trick for zoom obviously there's the
sort of bringing pinching in your
fingers and pinching out but we've
actually got a one-handed gesture as
well where you can double tap but on the
second tap you actually hold it down and
drag up and down and it zooms out so you
get this really nice when you've got
something like the phone in your hand
you can zoom on these maps without
having to put these gestures in the
reason it's important for developers to
know this is that it comes for free with
the map fragment you don't need to
implement it yourself you can override
them disable it if you want that yeah
yeah definitely
yeah these all these events are actually
when we get to mark
I'll cover a few of the events that you
receive on markers but yeah you you do
actually get a lot of these events you
can't override all of them but but a lot
of them are so but yeah that double tap
double tap and hold to zoom is
definitely a lifesaver a lot of times
you know using away you know no yeah but
it's really good like if you wanna
because these are vector maps you can
actually you can zoom to any level
I mean it's actually continuous zooming
scale so so unlike you know like tile
based or raster based mapping where you
tend to do it at discrete levels so so
having the ability to actually kind of
just slide and zoom this is really nice
from from a user's perspective and the
last thing that we'll talk about a
little bit positioning versus updating
of the camera positioning just lost
lights yeah there we go so positioning
is actually moving the camera and that's
actually you specify all of the or so
between locations oome bearing and tilt
whichever ones you want to you want to
specify of those four and you change the
camera position all the other ones are
actually defaulted so if I say you know
move to New York and I just passed the
lat/longs to New York it'll go to
default zoom level default bearing tilt
etc um and and that's actually really
great for you know positioning is kind
of the default way to actually you know
move the mood view around the map
updating on the other hand camera
updating is you're just changing a
particular particular attribute so for
example location so this is where
scrolling comes in is is if I want to
scroll the scroll the viewport left or
right or I want to actually zoom in like
one level or zoom out one level these
are just updates I'm not actually
changing the entire camera position so
position is for actually you know
starting from scratch and changing the
viewport or where the camera is
positioned over the map and updating is
actually just incrementally changing so
an updating also animates to the
destination you can or can't
so animation is something that you you
essentially turn on or off so show a
little bit I think
slide or we have a little bit of code
yeah so uh so yeah actually I left the
animate out of this one but I think you
have a later slide so in terms of
position camera position so bearing and
tilt are actually only available in in
in position so bearing and tilt aren't
available in updates I'm not exactly
sure why we didn't include them in
updates probably because of the the
primary use cases of positioning but but
you can see here we there's a in this
camera position builder this is more or
less like a factory object I can
actually specify thing the target zoom
bearing and tilt zoom bearing and tilt
are all optional so if you just want to
reposition you know like I said it's the
default zoom bearing until levels you
just specify the target and the map will
kind of start over again at that
location the zoom bearing until you can
optionally set to get a particular
effect I'm a bit of a fan of the fact
that these methods will return the same
object back so that you can change in
this nice way oh yeah without having a
ton of the bus code that you know states
the same object over and over again yeah
this is a really nice feature this
builder is that you just kind of build
these things up and fire them away so so
once you have this new camera position
so you you just pass it to the the
camera update factory get your camera
update object out and then you just do
mapped out move camera and the other one
isn't called I'm gonna go to the oh yeah
I just cheated right there so the other
one no but it's not like this is
recorded or no of course not nobody
noticed that 10 frames slide switch that
I just did so yeah so map that move
camera you just passed the the updated
camp or the camera update map animate oh
geez I forgot already animate camera
will actually animate the transition so
so once you have this camera update
object you can make decision about how
you want to do the transition so camera
update on the other hand is a little bit
different so we're going directly to
that
camera update class so we're not
actually using the camera position class
so so here we have a camera update
factory you know have to specify the
alright I can specify the lat/long like
I said before and that's for the the
center of the map I can also do like a
lat/long zoom here where I specify the a
new lat/long and zoom level and that can
also do the bounds here as well so if i
want to basically like zoom out to show
a neighborhood or zoom in to show like a
particular area of the city these are
these are very convenient functions for
doing that
so scrolling is actually part of the
camera update class as well so so
scrolling in zoom I mean that the the
primary use cases I see for these two as
opposed to using camera position is for
if you want to actually do your own map
control so let's say you want to provide
your own zoom buttons or you want to
actually provide your own panning
buttons these are really nice nice or a
nice class to use no the use cases let's
say you're you know you're you're
animating a sprite on the map so he's
walking across the map to you know to
show you know directions to the grocery
store I mean you can actually use this
scrolling object to or the scrolling
methods actually scroll the the change
so and again these are actually animated
or not animated so interesting thing
about zoom is you can actually do zoom
in zoom out zoom by a certain percentage
or zoom to one of the discrete levels
markers so we'll kind of kind of like
about these real quick so markers so you
know positioning markers is obviously
very important because markers actually
show a particular location geo location
on the map info windows these are this
information that's related to a position
or a marker that you can display
dragging dragging is actually can allow
users to move the marker around the map
if they want to this is a little bit of
a bad thing that was actually really
easy to do icons so there's obviously
default marker icon which I said before
is kind of an inverted teardrop but you
can actually customize it
you can actually well I actually have
this a little bit wrong so so
customizing is actually part of info
windows that we'll talk about later but
icons you can actually customize by
doing specifying unique colors
specifying your images or bitmaps
and specifying how the anchor and then
there's a been Sun on markers as well so
in terms of positioning info windows and
dragging really easy to do I mean this
is a huge updates from the last for the
map view 1.0 is that position you you
just basically you add a marker to your
map you specify your marker options and
then you you you said whatever
properties you want position is you
absolutely have to have a position if
you don't have a position for your
marketing you try to place it on the map
you're gonna get an exception title
won't snippet and draggable are all
optional so if you specify title and/or
snippet actually get an info window so
on the right hand side the the red
inverted teardrop is actually the marker
just to show where the where the
position is the lat/long coordinates are
and the you know the title and sniff is
show up in the info window so so by
default info windows are off you can
actually turn them on I think it's
actually marker dot show info window
that will actually programmatically
display the info window and and there's
also I believe a hide method as well so
if you want to programmatically hide it
so so by default they're off by default
if the user if if you specify title or
snippet and user touches the marker
you'll you'll see the info window
draggable is a neat thing is you have to
see it to understand exactly what it
does but if user long presses that the
default behavior is that if a user long
presses a marker and the marker is
draggable which is specified with this
draggable true the marker actually
becomes repositionable by the user so so
this is a really great use case if you
want the user to let's say you want to
actually get feedback from the user
about the the location of something so
so in terms of the icons or the images
so so all this is actually access to
this marker option
so the specified marker images are
colors images and anchoring via the the
marker options class so so as I said
before position is apps has to be in all
these all these actually show position
here but so the first thing is that you
can pretty easily change the color this
is using this bitmap descriptor Factory
and you actually just specify the the
hue you can specify use one of our
pre-canned hues get more exactly how
many of them there are but there's
there's a fair number of pretty
appealing colors and or you can actually
specify the hue using a float you can
specify your own image the easiest way
to get the image in there is is having
it in your apk and just specify the
resource to to load the bitmap you I
think there's a number of other ways you
can actually you know pass a bitmap
object if you want so you could actually
generate a marker image on the fly if
you really wanted to I think the other
options it's like a resource identifier
you can specify been that object you can
specify a file usually if you want to
actually load the file out of storage
yes I use typically for the file
situation you might want to download it
from from the web or something but yeah
as much as possible you want to use
resource IDs because you can check them
in those drawable directories and get
the right scaled image for whatever dpi
the device is running at that time yeah
really the the primary use case I see
were for using a file or a bitmap for
that matter is actually if you're you're
doing something like overlaying images
for example on your map so there you're
specifying like let's say this image is
associated with this position on the map
so you could you could actually just
load that up in a load that from you
know local storage or over the wire so
cool as opposed to out of your your
resources directory but but if you're if
you're just reusing the same icon over
and over again definitely drop it into
resources directory and so anchoring
because these you can specify so I'm
just gonna go back to the last slide
real quick so so the
anchor on the default marker is actually
the very bottom center of that that red
teardrop so that's actually where the
the coordinates are when I specify it
well in this case show zero zero with us
definitely not San Francisco that long
but so the the lat/long is actually
associated with the the bottom center of
that teardrop which is the the pinpoint
so you can actually change that however
so so what I had done before I will show
you show you but you can create your own
custom marker icon and you can do things
like put a drop shadow auditor or some
you can have it like offset it a little
bit to the right so you can the the pin
point off a little bit to the left or
right so you can I don't know just
customize it to make it look a little
more appealing for your application if
you do that you have to set a new anchor
point and that's the very last method
down in the the anchoring section so as
a percentage from top left what a good
use case for this be something like
where your marker is like a pin it's
kind of angled and so the center point
of the Mokka
isn't actually the you know the point
that touches the ground and so if you
set the position to be that marker you
would have put the center point rather
in the bottom right corner if it was a
pin for example exactly yeah like you I
think the classic the classic marker is
actually the pin and generally it's
positioned so the pin point is at the
bottom left of the right the bottom left
of the image yeah so in that case you'd
actually have to specify an anchor and
the anchor would be 0 1 because you're
your zero percentage along the x-axis
and 100% along the the y-axis because
the origin is the top left of the image
so so for the default marker it's going
to be point five one because it's the
bottom center or end I'm sorry the
center bottom and for the case where you
have the the push pin is going to be V
zero one corrector so just based in
percentage points and marker events so I
definitely should have covered map
events but maybe we can talk about those
marker events are actually really
important because it's the way that
users actually interact
you're with your pinpoints or your
markers on your map so so the so by
default there they're actually people
can click our users can can actually
touch the icons if you have an info
window the default behavior is the info
window is displayed and users can
actually touch the info window so this
would be these cases let's say you're
plotting you don't want to show all the
restaurants in a particular city you can
put markers on the map for all the
restaurants these you can press the the
marker to actually see the info window
which would be let's say the restaurant
name and if the user touches the info
window that can take them to a details
page so so that's kind of the the
rationale behind things like the the
marker the on marker click listener
because you know when the user clicked
the marker the on window click listener
because you know when the user actually
clicked the the info window and then
marker drag because like we showed
before users can actually move the mark
around the map there's also a marker
drag listener as well so the way that
you actually set yourself up to receive
these events is you you define the
listeners you know any one of those
three or all three if you want you
register your listeners once you've
actually created your map you can
actually specify who your listen
listeners are in this case I mean the
most easiest case is if you attach the
listeners to your activity and then when
you create the map just pass it a
reference to your activity and then once
once that's all set up you can just you
implement these methods in your activity
or fragment you can start receiving
these events and do fun and interesting
stuff with them so the so drag dragon
and Drake start or obviously struck
associated with the marker drag listener
info window click influence into win if
the window click listener and I'm marker
click as the out marker click listener
and for each of these you obviously as
you can see you get the the marker that
was touched click dragged or whatever
else so I think that's it yeah yeah
thanks for that so just so that you'll
know today was a part one in a series of
a do plus shows that we're going to have
about the Maps API the next episode
won't be this year
be early next year but we're gonna go
into some more of the what we consider
more advanced topics like polylines and
so on but we've got some really cool
stuff coming up around in and around the
the API so with that being said let us
move on to Q&amp;amp;A we got a couple questions
from Linden on in the chat window so
maybe we can take a look at them awesome
welcome Linden and Andrew was on there
for a while as well okay so I'm just
trying to this quite a lot of chatter
here so I'm just trying to see where the
first question to you guys so the first
question was any chance we can access
the frame buffer for Google Maps to grab
a bitmap well it was possible with map
view button1 and of course it booked a
feature I had just intamin with the old
API so there so that's the first
question I don't believe it's possible
right now to do it this this API does
not allow you to grab the frame buffer
but it's something that I can take back
to the the team just out of interest
Linden if you're still on just what are
you use cases it'll just help us explain
it better to the engineering team
I think Linden a bit shy today he's good
is sharing an image so it's an image
that you're actually taking of your app
like a screen shot close to it okay look
it's not there right now let me let me
talk it over with the team there may be
a reason that we didn't do that and
we'll get back to you I mean there there
is I mean one potential alternative is
if if you just want a snapshot of the
map is there there is the there is the
web label Maps static image API so so
that's also doesn't do it
so so yeah so if that the you should
essentially get the exact same
information back if you could you know
specify the bounding box birth or what
you want to get from the static image
API so yes static maps before work on
yeah so for now you'll have to do that
but obviously that wouldn't cater for if
you've got like custom markers exactly
like that so if you're doing Android
very Android centric things yeah and you
know there is so so generally direct
direct I'll access flow is what we call
it are actually extracting the the map
information out we generally shun that
it actually violates our Terms but which
is why we had things like the static map
API but well yeah I mean I think it's
definitely worth you know talking with
the engineering team let's see what kind
of use cases we we can support around
this because definitely it is nice to
you know share your rings yeah okay
next question penny you want to just
read them out for us yeah sure so the
next question it is it possible to
overlay another OpenGL view that is
transparent background on top of google
map is that what ingress is do it I
think ingress is doing something special
yeah so we can't talk about what ingress
is doing but I think ingress of doing
something special as to whether you can
do that with this library my gut feel is
no because I believe we render directly
to the surface and there will be some
complications around that so yeah I'm
pretty sure the answer is no linden
enlightened actually I'm not I'm on the
resistance side okay was there any other
questions from Linden in the meanwhile
whilst he whilst he asked those
questions I'll just bring up some
questions that Andrew asked before he
left
said I haven't had a chance I said this
is on the moderator page I haven't had a
chance to look at the new v2 maps and
I've been leaning to I'm just waiting
for a refresh the bad but does this mean
I don't have to use the users library
tag anymore does this also mean I don't
need to use the Google API checkbox in
the Eclipse plugin to support Google
Maps so using this library we no longer
need that yeah so so the process now is
that you use the library project so in
Android so and that's the the Google
Play services library project yeah and
the so for the checkbox however for the
Google API is in so when he says Eclipse
plug-in I think what he's talking about
is the AVD manager the Android virtual
device manager you definitely do need to
use the Google API it's image because
this is part of Google well the Maps API
is part of Google Play services which
does rely on the Google API access so
that hasn't changed
okay that's all the questions on
moderator if anyone has any more
questions now is the time to ask them
whilst whilst we wait for that to happen
as I said we'll be taking a couple of
weeks off for adl+ but we'll be coming
back with our first episode that we'll
be focusing around some more some more
of the capabilities of of this API and
then in the future episode we'll be
talking about some really cool sort of
recipes that you can do with the API and
we've got some sample apps to show off
yes coming soon so well I don't think
there's anything more so thank you very
much for joining us pleasure thanks for
having me yeah we'll definitely try to
have you on thanks Tony for for joining
as well and and Linden as well and an
Andrew
for your question and we will catch you
next time or next year I hope you all
have a great and safe holiday and a
happy new year happy holiday</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>