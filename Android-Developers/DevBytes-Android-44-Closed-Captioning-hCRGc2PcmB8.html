<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>DevBytes: Android 4.4 Closed Captioning | Coder Coacher - Coaching Coders</title><meta content="DevBytes: Android 4.4 Closed Captioning - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>DevBytes: Android 4.4 Closed Captioning</b></h2><h5 class="post__date">2013-10-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hCRGc2PcmB8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi I'm Alan Verret a software engineer
on the Android UI toolkit team in
today's dev bytes we're going to cover
how you can add closed captions to your
video using the new closed captioning ap
is in android 4.4 kitkat these api's
allow you to attach subtitles to your
video that are splayed according to the
user's preferences let's start with a
quick overview of what's new for
captions in android 4.4 first users can
now specify system-wide captioning
preferences ranging from whether to
caption whether captions should be shown
to what color they should be shown in
most developers though you won't need to
worry about reading these preferences or
rendering your own captions simply
adding a subtitle source to a video view
is enough to show captions according to
the user's preferences in this dev byte
we'll cover how you can quickly add
captions to your existing video views
and make it easy for users to toggle the
settings that control how these captions
are rendered first off you may want to
add a menu to your application that lets
users quickly modify caption display
preferences here's a sample
implementation for on option item
selected that opens the system caption
settings activity which you can also
reach by opening the Settings app and
navigating to accessibility and then
captions there you can toggle captions
on and off and change rendering
properties like font size background
color and text color here's what that
looks like on device it shows a preview
of what captions will look like in your
apps video view you can change things
like caption background color and select
a custom style that changes things like
font size language etc now let's take a
look at how to attach those captions to
a video view android natively supports
loading webvtt formatted captions you
can find more information online about
this format and how to convert between
various caption formats here's a basic
example of what webvtt time text data
looks like let's the framework know when
and where to render text over the video
to attach these subtitles to a video
view we just need to add a few lines of
code here we're opening an input stream
for locally stored captions in both
english and french however you could
just as easily attach an input stream
created from a network resource but
that's outside the scope of this def by
the user has enabled captions and
settings they'll see them when the video
plays here's what that looks like in a
very simple app the captions are
rendered in the users chosen style white
on black using the correct positions
from the time text file now we've
covered the most basic use case for
adding captions to a video view however
this might not cover all use cases if
video view doesn't fit your needs and
you find yourself implementing custom
caption rendering you can still respect
the users captioning preferences by
loading information from the caption
manager service you can read more about
this class including usage examples at
developer.android.com</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>