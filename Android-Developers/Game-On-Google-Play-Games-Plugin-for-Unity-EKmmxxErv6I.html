<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Game On! - Google Play Games Plugin for Unity | Coder Coacher - Coaching Coders</title><meta content="Game On! - Google Play Games Plugin for Unity - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Game On! - Google Play Games Plugin for Unity</b></h2><h5 class="post__date">2014-01-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EKmmxxErv6I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the to today's
episode of game on I'm Bruno Oliveira
and I work in the Android developer
relations team and I'm Dan Galpin and I
also work on the developer relations
team so today we're going to talk about
the play liam's plugin for unity so
unity as you know is one of the most
popular game engines out there and the
good news is that we now have an
official plugin that allows game
developers for writing a Unity game to
integrate that with Google Play game
services so what is it so if you're
writing your game in unity you probably
have your c-sharp code sitting there on
one side and you want to access the
Google Play games API however between
you and the API there is a gap notice
needed very advanced water factor very
nice in this cut there's some some
sharks like threading you have to deal
with ready because unity runs on a
separate thread and then go play games
API expects you to make calls on the UI
thread then there's a the whole thing
about J&amp;amp;I of course usually has some
pretty interesting a class today to deal
with it but we still have to be careful
with return values and so on and then
there's also some platform-specific code
that you would have to write to access
the play games API on Android and on iOS
and so on and so forth I think this is a
you know fairly harsh on sharks really
yes like yes exactly so the plug-in is a
way to bridge that gap sea bridge
written as AI to bridge that gap and get
your game safely across to use a go play
game services so this is why we develop
develop the plug-in so you can just
write your game the game code in C sharp
and then not have to worry about all of
these details so then one of the things
that I've seen a lot of plugins is that
they they end up forcing you to override
your unity player activity and they
force you to use a particular one that's
adapt to adapt it to the air plugin so
if you're already using a different
player activity because of some other
plugin then you're in trouble where you
have to have to do like horrible hacks
so so I'm glad you asked about this so
the Google Play games plug-in does not
require the override your base activity
so your game can use unity standard
player activity or whatever other
activity class you were already using so
that's that's that's very good news
because this is one less thing that you
have to do to get this integrate
so where can I get this plugin well you
can you can download it from our github
repository and that's URL so as you can
see you can either type the full thing
or this very easy to memorize the
shortened versions go GL / you can
memorize it like a bring your own no no
just just bookmark market but the real
question is can they get the source code
oh the source code so you can get the
source code in this completely different
URL yes it's open source so you can you
can look look to see how it works you
can break it if you want you can extend
or customize it however you want so it's
open source and be a make sure to check
the getting started guide
Thanks awesome that URL hey you might be
able to use as a reference for
developing your own implementation of
Play game services on something else
outside of unity exactly so what exactly
can you do with this plugin well right
now you can do sign-in of course
otherwise I can do anything else but you
can do the user you can get user to sign
in to Google Play game services then you
can unlock achievement revealed
achievements increment achievements you
have leaderboards and so you can post
the scores leaderboards you can do cloud
save which which which means loading
from the cloud saving the saving to the
cloud and you can also show the built in
achievement and leaderboard wise so
according to our Doc's to use the games
API you have to add a library project
set up your Android manifest and a few
other things right so how do I do that
with a plugin exactly so the good news
is that the plug-in actually does all of
that for you all you have to do is go
into the setup wizard if you will and
fill in your app ID there so as soon as
you fully filled in you know your app ID
in the case of Android it's going to
automatically import and everything that
you need for you and this includes
generating your Android manifest this
includes importing the Google Play
services library project and everything
else you need
so for iOS all you have to do is enter
your your client ID your app ID and your
bundle ID and it's going to do the same
thing so all the setup or that boring
setup of the making sure that you have
the library projects in the right place
this is all done by automatically by the
plugin so hopefully that's going to be
much easier than
having to do all this manually it's
possible we made it too easy too easy
too easy let's hope not
so unity already has a built-in social
API that is true unity already has a
built-in social VI called AI social
platform so it's actually an abstract
interface that defines a few classes and
methods for things like authentication
and locking achievements and posting
scores to that leaderboards so the group
that games plug in rather than invading
a whole new API what it does is it
implements to that interface so that
developers can actually use existing
code and just simply switch it to play
games by a bit by picking a different
implementation of that interface so it's
we hope that's going to be pretty
convenient so this is how you would
initialize a plugin so now that's not
android or iOS code that's actually
c-sharp but that's the beauty of it now
that you ask you don't have to know
whether or not this is android or iOS
because all the code works regardless of
the platform so the plug-in takes care
of translating the I social platform
calls into the corresponding play games
SDK in Java or Objective C into the
corresponding platform based SDKs as
appropriate so you don't have you as a
game developer don't have to worry about
whether or not the games running on iOS
or or Android after we've done the setup
where you have the setup wizard for
Android or iOS that's the last time we
have to worry about the platform
differences as far as Google Play games
is concerned so this is pretty
convenient
that's why classes that start with I are
cool that's true classes start with IRA
so this is what you have to do to get
people to authenticate so this is the
first step you have to get people to get
authenticated with the game with cool
Play game services so this is typically
what you would do when when somebody
will click the sign-in button right yeah
but you know you can also call that on
startup and this is really really cool
you know we find that when you actually
pop that dialogue on startup more people
are likely to sign in and that's better
for you it's better for users makes the
users happy and so definitely consider
doing that just make sure not to be too
annoying to the user so if the user
cancels a signing flow a few times
that's probably because they don't
really want to do it so you're probably
better off not trying to push it too
much yeah I have a sign-in button yeah
leave a leave a button there in all
cases exactly ok so just in case they
change their minds one day exactly they
might you know their friends might say
hey you should be continued you should
be competing with me and on the
leaderboards or something like
make it available yep so how do you
unlock an achievement using plugin all
you have to do is call a social talk
report progress again this is not a
method that we made up this is a method
as part of the I social platform
interface so all you have to do is call
report progress then you pass in the the
achievement ID so that's the same thing
you get from media developer developer
console and then you pass your callback
that's going to run to determine I mean
as a callback if their success or
failure next how do you increment an
achievement increment achievements you
can also do through report progress but
we we do have an extension method called
increment achievement which works more
like our platform so just passing the
the achievement ID the number of steps
you want to increment it by and then
again a callback that indicates success
or failure reporting score is equally
easy just call report score conveniently
enough and you pass in the the the ID of
the leaderboard are you going to report
it to and the spoilage run report again
successful failure is in the callback
and then we also have the built-in UI so
so that you don't have to to create the
UI yourself we have some built in you
guys I can show using just one line of
code so if you just want to show that
the standard achievements UI you can
just call show children CY then if you
want to show the year the standard
leaderboard ey same thing so leaderboard
UI this is what it looks like on Android
so this is the the standard achieve in
CY for for a game that we made called
nostalgic racer so notice I that I can
see the achievements that I've unlocked
and I also see the achievements that I
have not unlocked the corresponding
screen on iOS is like this so same
functionality except it looks more
compatible with fee with the platform
and we also have the corresponding one
for leaderboard so this is an example of
the leaderboard screen on Android so it
shows my friends and in the public
leaderboards and and what score's
people have and we also have cloud say
right so cloud save is one of my
favorite features in games and I think
too few games implemented nowadays I
wish all games
all games would implement that I mean
you know for us when basically won't
play games unless they have some sort of
cloud saving exactly because right now I
think more and more people live in the
cloud I mean you don't you're not
married to a specific device
people change devices all the time I
mean devices fall into the water and
then you look
I am so all sorts of things happen to
devices including uh plates so when when
that happens you don't want to lose your
game products just because of that so
cloud save is a pretty important feature
there so which is why we we want that we
wanted that to be in the plug-in as well
so the plugin the plugin of course
allows you to save state into the cloud
load state from the cloud and of course
you can also handle cloud save conflicts
very nice icon and all that so load
loading from the cloud so how do you go
ahead and load data from the cloud to do
that all you have to do is call load
state and then you pass in as you know
the cloud our cloud save service has
separate slots so we have currently have
four slots so you can have different
types of data in each of the slots in
this example we're just using slot 0 for
simplicity just call load state passing
the slot number and then you pass in a
listener that's going to be called
whenever that load operation completes
with asynchronous savings of the clouds
very similar just call update state
passing the slot number the data and D
the listener notice that the data is
just a byte array so to us is completely
opaque we have no idea what what's
inside that that byte array so it's your
your games responsibility to encode the
data into a byte array and then decode
it later and be careful about different
platforms and now all the usual caveats
about dealing with serialization of data
again this is the load on state loaded
listener that's going to be called
whenever the game set is saved so this
is what the own state loaded listener
looks like notice that there is one
additional method there that's called on
state conflict and on state conflict is
going to be called whenever there is a
conflict so and a conflict happens when
for instance one device try to save one
state and then a different device try to
save a different state so this is where
you want to sort of like merge the two
states and return the combined progress
of the user so that the user doesn't
lose any progress so if they unlocked
one level level a on one device and the
level be on different device the result
you want to have is that the user has
unlocked levels a and B and not one or
the other so what happens if you try to
save this you know cloud save and you
are not connected to the net so yeah so
one of the advantages of our cloud save
API is that it actually works offline so
you can have cloud save even though
there's no cloud because what happens is
that when you try to save to the cloud
you were offline it's going to get the
that state that you're saying is going
to get stored in a local cache then
that's going to get synchronous to the
cloud as soon as there's a the the
connectivity comes back so same thing
with loading from from the clouds so the
device is going to have a cache of the
last known state of the cloud which
means that even if the user doesn't have
an internet connection at the moment and
you ask the the device to load from from
the cloud it's going to return the last
known state that the device has cached
so this is a this is very convenient
because after all mobile users are not
always connected to the Internet in the
real world world there are things like
parking lots and tunnels and so on and
even foreign countries where roaming
charges are very expensive the real
world is overrated yes exactly so we
also have a example for you to play with
so if you download our source code from
the github repository you can also see
this cubic pilot samples it's it's a
very simple game that shows all of my
artistic skill in creating graphics
which essentially is it's just trading
cubes so as you can see essentially
every enemy and every everything the
game is just the cube or combinations
they're off but it's personally fun to
destroy geometry yes destroying geometry
is a very interesting pastime so if you
want to destroy some geometry I
definitely download that sample and you
can play it if you want to try the gup-a
game services on it all you have to do
it has placeholders where you can drop
in your leaderboard IDs and see entities
and so you can actually use it to try
like I'm walking achievements and
posting leaderboards and so on and so
forth and I guess that's that's pretty
much all there is to it
so again where can they get all of this
again in this website that we have not
mentioned before you know this
presentation at all so bring your own
zero notebook mark yes doc mark yes so
be sure to download it from there or
have source code we have samples we have
a pretty complete getting started guide
that explains everything we also have a
zip file with all the API dots so for
all the methods we a we have
documentation on what they do and so on
and so forth so everything we need you
need to get started if you have any
questions about this a great place to
post em is Stack Overflow be sure to tag
them with Google Play games
because we actually as a matter of our
daily routine we were checking that
daily so that's definitely the best
place to post questions and add me on
Google+ and feel free to to nag me to
answer your questions on Stack Overflow
or to fix stuff that's broken and
anything else all right so this was the
that's it for today is a game on episode
we hope you enjoyed it and definitely
please and download our play and give us
any feedback that you have so thank you
very much thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>