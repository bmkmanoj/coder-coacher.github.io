<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Background Optimizations (Android Development Patterns S3 Ep 14) | Coder Coacher - Coaching Coders</title><meta content="Background Optimizations (Android Development Patterns S3 Ep 14) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Background Optimizations (Android Development Patterns S3 Ep 14)</b></h2><h5 class="post__date">2016-10-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vBjTXKpaFj8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">modern Android devices have potentially
lots of apps with background services
and this is exactly as it should be but
it can be problematic when each of those
services just runs willy-nilly all over
the users processor what we see
happening on devices in a low memory
situation is that there's often a number
of background services running but there
isn't enough memory for all of them and
when this happens the operating system
must swap a lot of processes in and out
of RAM known as memory thrashing and
this reduces the overall system
performance which manifests as poor
performance for the app the users
actually trying to use not great so why
do so many background services trigger
at once often it is in response to an
implicit broadcast an implicit broadcast
is a trigger that declares an event
instead of calling a specific app
meaning that the reasonable use case of
passing some data along to another app
to do a task for you is lost instead we
have the madness of a single app
standing up and shouting that it just
did something cool who wants to come see
even worse though most apps have a
static receiver declared in their
manifest to listen for these which means
the app isn't even running when it gets
the broadcast for this event so it is
woken up solely for the opportunity to
respond and the worst case is an app
being woken up to look at the event and
then deciding it wasn't interested after
all and we just wasted several precious
RAM cycles the most common instance of
this is with connectivity change on some
devices we've seen more than 40 apps
woken up as a result of this broadcast
and when this broadcast is sent
frequently it could mean hundreds of
wake-ups in a few minutes
crippling device performance so what's
the solution well we're a moving
connectivity change as well as a few
other broadcasts we commonly see causing
this problem because any one app isn't a
bad actor but many apps doing the same
not-so-great thing often translates to
an overwhelming problem that the only
the platform can solve so let's talk
about these changes first connectivity
change will no longer wake apps that are
targeting in if you declared a static
receiver in the manifest if your app is
already running and you've registered
your receiver you can still receive this
broadcast but you will not wake up for
it now if you do have some work that
needs to be done based on the
connectivity change and regardless of
whether your app is running you'll want
to schedule a job with job scheduler or
if
nice job dispatcher for the network
conditions you truly care about instead
of passively listening and waking and
then checking to see if the connectivity
change was the right change for you and
when your app uses job scheduler and
everyone else's app starts using it the
system can batch all of those jobs
leading to a much more stable situation
overall another situation is with new
picture and new video this is a critical
user experience moment because slowing
down the camera by waking all these apps
can destroy the camera experience
causing users to miss the moment these
broadcasts aren't sent by the system but
by apps such as camera so we're removing
it entirely note that these two changes
are not specific for apps targeting
nougat all apps on a device that is
running nougat will no longer be able to
receive them regardless of which version
you're targeting both broadcasts have
been fully deprecated in API 24 the
alternative here is to again use job
scheduler which has been updated to
consider content provider changes as a
trigger we're trying our best to move to
a world that is dynamic without passive
receivers claiming processor time for
work that should be done in a better way
so check out the docs for code you can
copy and paste into your own app and
have some fun getting to know job
schedulers updated options but most
importantly just continue to build
better apps</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>