<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Profile GPU Rendering : M Update (Android Performance Patterns Season 5, Ep. 10) | Coder Coacher - Coaching Coders</title><meta content="Profile GPU Rendering : M Update (Android Performance Patterns Season 5, Ep. 10) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Profile GPU Rendering : M Update (Android Performance Patterns Season 5, Ep. 10)</b></h2><h5 class="post__date">2016-04-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/erGJw8WDV74" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so by now you know that there's a lot of
things that go into rendering a frame on
Android and when frame rate starts to
suffer top priorities figuring out which
thing has gone off the rails my name is
Colt McAnlis and in order to help you
track down where your frame problems are
coming from the em release of Android
has updated its GPU profiling tool now
if you recall back in season 1 of
Android performance patterns we talked
about the profile GPU tool along with
the three phases of rendering pipeline
that it measured uh recording a display
list submitting it to the GPU and
waiting for the GPU to finish it work
but let's face it things are a little
bit more complex than that which is why
in the end release of Android this tool
has been expanded to show you eight
different sections of your rendering
frame conveniently and uniquely colored
for easy identification now you're
already familiar with the first three
phases here as update executes and
process we talked about those before
they still report the same information
so we're pretty much good to go here
more interesting are some of the new
stages that haven't been reported before
firstly is sync and upload this value
generally measures the time it takes to
upload bitmap information to the GPU a
large graph segment here means that your
app is spending a lot of time doing that
like if you suddenly grabbed 50 new
thumbnails or uploading an 8 megapixel
image shrinking this bar usually means
things like reducing the number of
visible images or reducing and resizing
large images before uploading them to
the GPU of course then there's layout
and measure phase which report exactly
what you'd expect the amount of time
spent per frame executing on layout and
on measure callbacks in your view
hierarchy high values here indicate that
you have a super complex view hierarchy
and thus performing of lots of measure
and layout phases across a bunch of
views or you might be the victim of
things like double taxation in the wrong
spot in your view hierarchy and
shrinking this bar means doing stuff
we've already talked about like reducing
view hierarchy complexity and using view
objects that can reduce the chances of
double taxation next is the animation
phase which just shows how long it took
to evaluate all the animators that were
running that frame the most common of
which being things like object animator
view property animator
and transitions if this number is high
like above two milliseconds or so check
to see if your app uses any custom
animators or if some unintended work is
happening as a result of your properties
being updated I mean you'd hate to end
up in a situation where updating a
property causes a pause due to disk i/o
every frame or something like that and
then of course there's input handling
this basically measures how long the
applications spent handling input events
or perhaps more accurately how long the
applications spent executing your code
inside an input event callback if this
number is high this indicates that the
app is spending a long time processing
the users input meaning that you might
want to offload or optimize that work to
a different thread and finally there's
misc time and vsync delay if you've ever
seen the logs from choreographer about
like missed vsync by blah blah blah
skipping blah blah blah frames that's
that's this thing basically it's the
stuff that might be occurring on the UI
thread between two consecutive frames of
rendering if this value is high chances
are you've got some callbacks and tents
or other work happening that might be
ideal to push off to another thread but
with all these colors crammed together
on the screen it's a little tough to
make out which ones are causing a
problem that's why if a frame spikes
above the 16 millisecond threshold
you'll notice that it's bar is drawn
more opaque and it's wider than the bars
around it this will hopefully make it a
little easier on your eyes to pick out
see as the platform evolves and
developers get more skilled it's only
natural that the tools will evolve
alongside it which is why you should
check out the rest of the Android
performance patterns content so you can
stay up to date with the latest
performance tools and don't forget to
join the Google+ community to get advice
from other great engineers so keep calm
profile your code and always remember
perf matters</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>