<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tasks and the Back Stack (Android Development Patterns) | Coder Coacher - Coaching Coders</title><meta content="Tasks and the Back Stack (Android Development Patterns) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tasks and the Back Stack (Android Development Patterns)</b></h2><h5 class="post__date">2016-05-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MvIlVsXxXmY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you tap the launcher icon figure out
your app launches sounds easy right
what's happening behind the scenes is a
little more involved it turns out the
activities in your app don't live in a
vacuum but instead exists as part of one
or more tasks now a task in and of
itself isn't very complicated simply a
stack of activities as you call
startactivity that pushes a new activity
onto the tasks back stack the back
button reverses this calling finish on
the current activity popping it from the
stack and taking the user back to where
they were hence the name this symmetric
push pop model also applies to fragments
when specifying a fragment transaction
you can call add to back stack to add
the fragment transaction to the back
stack then when the user hits the back
button instead of your activity being
finished the fragment transaction is
reversed only when there are no more
fragment transactions will the back
button finish your activity now if
instead of hitting the back button you
were to at the home button the whole
task is put in the background if you
then tap the launcher icon the system
brings a task back to the foreground
right where you left it
same thing happens if you select the
apps task from the overview screen the
task is brought to foreground for many
apps this default behavior is all you
need no touchy
nice consistent symmetric operations but
there are two specific cases where you
might want to do something special first
if you're calling start activity with
the activity you're already on this
might be the case where you're on a
search results page and search again
instead of piling up activity after
activity and requiring multiple presses
of the back button you can add a launch
mode of single top to your activities
manifest entry or include flag activity
single top in your intent instead of a
new instance of your activity being
created every time you called start
activity get a callback on new intent
and users will be able to hit the back
button just once to return to the
previous activity the second case is
around notifications we talked about how
the back button pops the back stack a
natural corollary is that the back
button shouldn't cross into different
tasks a convention since the days of
Android 3.0 it's just a single stack
where you are to the launcher remember
there's that fancy overview screen for
switching tasks so for our notification
that points to an activity deep within
your app you really don't want that
first press of the back button to take
you immediately to launcher now when
every other time you're looking at that
same screen the back button does
something different like go back in your
app that's worked a stack builder comes
in it builds a synthetic ie fake back
stack by default based on the parent
activities you attached each activity
entry in your manifest although you can
customize it any way you want
adding extras whatever you need this
ensures that even if there's no task
when the user taps the notification
they're exactly where they expect to be
in your app as if they had navigated
their themselves you just save them some
time and if we're getting there so check
out the blog post linked in the
description for all the details on tasks
and the back stack plus some of the
other flags and launch modes you
probably shouldn't use well right up
until they're the perfect thing to use
to build better apps
thanks wait what was that the up button
yeah that's totally different let's
discuss in the blog post
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>