<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Removing unused resources (Android Performance Patterns Season 4 ep8) | Coder Coacher - Coaching Coders</title><meta content="Removing unused resources (Android Performance Patterns Season 4 ep8) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Removing unused resources (Android Performance Patterns Season 4 ep8)</b></h2><h5 class="post__date">2015-12-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HxeW6DHEDQU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so you're a studious person who's
watched every episode of Android
performance patterns okay
not everyone colt does a lot of videos
and usually just says things like don't
use up too much battery make efficient
HTTP requests enums are like gremlins
you know all that normal perf stuff so
by now you know that you don't want to
blow dat apk you don't just let unneeded
resources sit around in your build
but despite knowing this you may still
have a bloated apk so how's that even
possible
I'm David eise and just because you're
being frugal with your resources doesn't
mean that the libraries you've included
will do the same take this common
scenario you're using the Google Play
services library to build an app that
just uses a single API like maps but
your code is not using any login
functionality well the library still
includes all the assets and layouts that
allow someone to log in even though you
may like the way this button looks you
don't need the resource in your apk so
you can't mainly turn to this resource
it gets included in your final packaged
application and it's stuff like this
that leads to bloated apks well we have
the riddle tool chain and it's here to
help Gradle can statically analyze all
of your code to find the assets that
aren't being referenced and then
automatically pull them out of your
build and the party doesn't just stop
there good we'll also go through and
analyze strings in your code for cases
where you're doing things like
constructing a path name at runtime and
scrape through your assets folder
opening up text CSS and JavaScript files
to check there as well to get this
started just enable the shrink resources
flag in your Gradle config you'll also
need to set minify enabled this will
turn on ProGuard which just removes code
from linked libraries that your app
isn't using know though that this needs
to be done first otherwise Gradle gets
super confused because it still thinks
that there's paths referencing assets
once you've done this though our earlier
scenario is looking a lot better after
Google Play services linked in Gradle
sees that no path used for the login
resources and exclude it from your apk
which is exactly what we wanted a little
bit of a warning though there might be
some false positives or false negatives
you might find that some of your assets
are getting cut when you wanted them
kept and some of them are getting kept
when you wanted them cut we can fix this
though with the tools keep and the tools
discard attributes the set of the desire
behavior but before you get all the
resource cutting crazy it's important to
understand that Gradle has its
limitations
Gretl won't get your resolution folders
or multiple language folders these may
be needed at run time and the compiler
can't really know ahead of time what the
end user is going to need so managing
your resources requires some extra work
on your part but it's a big performance
game for the user and experiences for
the user is what performance is all
about found out but found out more by
watching the rest of Android performance
patterns content aka the cult show and
don't forget to join our Google+
community for other great content as
well so it's what the small stuff but
don't freak out and remember that perf
matters</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>