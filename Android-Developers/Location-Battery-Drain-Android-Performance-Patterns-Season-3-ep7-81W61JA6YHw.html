<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Location &amp; Battery Drain (Android Performance Patterns Season 3 ep7) | Coder Coacher - Coaching Coders</title><meta content="Location &amp; Battery Drain (Android Performance Patterns Season 3 ep7) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Location &amp; Battery Drain (Android Performance Patterns Season 3 ep7)</b></h2><h5 class="post__date">2015-09-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/81W61JA6YHw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">one of the unique features of mobile
applications is location awareness
mobile users take their devices with
them everywhere and adding location
awareness to your app offers users a
more engaging experience my name is Colt
McAnlis and while all this fancy
location data is making your app more
useful misusing it can cost you big with
respect to battery life now a standard
location request looks a little
something like this and in the name of
performance let's take a look at those
first two values namely the interval
api's set intervals sets the rate in
milliseconds at which your app prefers
to receive location updates the lower
the number and the more updates you get
and of course the more better you burn
up as a result which means finding the
right value to use for your interval is
an important balance to fast and you'll
be burning through lots of battery for
the GPS request to slow and your
application won't be updating fast
enough to be helpful to the user but
really you want to end up in a situation
where you can be a bit more dynamic with
how you interact with this hardware for
example if you notice that the position
has stayed the same for a while then
there's a good chance that the user may
be stationary for a long duration so try
backing off the sampling interval to
reduce the amount of battery churn that
comes with that process but it's also
worth pointing out that other apps also
affect the rate in which updates are
sent to your application in fact the
underlying system will send out updates
at the fastest rate that any application
has requested with the set interval API
across the whole system meaning that
your app can end up receiving location
events at a faster frequency than there
were one requested by your app perhaps
flooding you with location information
and doing a lot of other stuff you don't
actually need to do which is why the set
fastest interval API is views basically
this lets you throttle how often you get
updates that you might not be interested
in or ready for so your app isn't
wasting time updating and processing
location events when they're not
actually being needed now let's take a
look at the whole set priority thing you
have to remember that the dominant way
your device resolves its physical
location on earth is with the help of a
global positioning system Hardware
basically there is a cascade of
satellites hanging out just right
outside of Earth's atmosphere whose
whole job is to communicate positional
information to your device based upon
your
it's simply the GPS hardware in your
phone negotiates signals between the
satellites and tower data to pinpoint
your position in space and time which as
you might imagine is a very battery
intensive operation but this isn't the
only way you can get location data
besides the super expensive GPS there's
also the network provider which
determines location based upon
availability of cell tower and Wi-Fi
access points the result is that less
accurate results are given to you but
only a portion of the battery is used at
compared to the GPS version and of
course there is the passive provider
which is probably the most battery
efficient when some other application
makes location request the results then
get passed along to your app as well
that way your device isn't sending out
multiple location pings and can spend
more time saving battery now in order to
make all of this more accessible for
your location API needs you can control
what types of networking and battering
drain you're wanting by using the set
priority option of a location request
and if you're already using activity
recognition to determine what the device
or app is doing or when it's not being
used you can leverage this data to turn
off location request queries or throttle
them back when they're not needed but in
truce balancing and bouncing all of
those api's depending on the state is
really cumbersome process which is why
Android has made it a lot easier by
using the fused location provider API
you get a simplified interface to all of
this craziness and Android will handle
all the grungy details on at your behalf
saving you both battery as well as
sanity in your codebase now if you're
ever confused about how your application
is eating through battery always be sure
to take a hard look at the battery
historian tool it will happily remind
you of all the things you're doing wrong
and give you hints on how to get them
fixed so don't get lost in the world of
battery performance make sure you check
out the rest of the Android performance
patterns videos and join our Google+
community to ask questions from other
great performance experts so keep calm
profile your code and always remember
perf matters</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>