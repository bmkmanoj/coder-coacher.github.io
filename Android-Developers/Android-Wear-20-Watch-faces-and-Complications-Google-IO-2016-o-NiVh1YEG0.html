<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Wear 2.0: Watch faces and Complications - Google I/O 2016 | Coder Coacher - Coaching Coders</title><meta content="Android Wear 2.0: Watch faces and Complications - Google I/O 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Wear 2.0: Watch faces and Complications - Google I/O 2016</b></h2><h5 class="post__date">2016-05-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/o-NiVh1YEG0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody I'm a Leland an engineer
on the Android wear team and I'm Tony
Ferrara designer on Android wear it's
great to be here we're really excited to
tell you about the new stuff coming to
watch faces on Android wear the watch
face is at the heart of the Android wear
interface of course it tells the time
and with the thousands of watch faces on
Google Play it's a great way for users
to express their style we added
interactivity last year and the watch
face came to life like never before but
the watch face can do more as an
always-on screen there's just a glance
away it's a great place to get the
information you care about and that's
why we're introducing the complications
API for Android wear but first of all
what are complications
the term comes from traditional watch
making and it means well pretty much
anything that's not telling the time
complications on mechanical watches show
things like the date your alarm or phase
of them in so the small dials you see on
this watch there are complications on
smart watches there are new
possibilities like the weather stock
traces or events from your calendar many
watch faces on Android wear already
include complications like bits from us
to or legacy from zoo handin but as it
stands each watch face has to go and get
the data itself that could mean your
watch face has to find its own source of
weather data or finance data or anything
else you want to show and if the user
wants to see something you haven't
included they're out of luck or maybe
you're not a watch face developer but
your app has data there'd be great on
the watch face like Fitness stats or
finance info as it stands there's no way
to do this other than building your own
watch
or making deals with individual
watchface developers the complications
API for Android wear changes all of this
apps using the API will be data
providers or watch faces if you build a
watch face using the complications API
then you get access to a whole ecosystem
of data providers here are just some of
the partners are already working on
using the API and if you build a data
provider you can get your data on a
whole range of watch faces now on Google
Play there's a huge range of styles of
watch faces so there's no way that just
one style one visual style of
complication would fit on every watch
face because of that with the
complications API the watch face gets to
decide how to render the data it gets to
choose the visual style the colors the
fonts etc the data provider just
provides more fields like strings text
images and numbers before we get into
the details of the API though Tony's
going to go through some things to think
about when designing for complications
thanks Holly so some of you may have
already checked out the material design
spec for wearables and there you'll find
a ton of useful things to help
developers and designers design for
Android wear I'd like to highlight some
of the things some of those design
principles that you'll find in there and
how they apply to complications so the
first design principle is glanceable
making things clear clear and
understandable for complications small
easy to read snippets of information
work best it's very important that the
information on the watch face is
organized with a clear hierarchy large
enough to read easily and high enough in
contrast users shouldn't need to squint
to read the UI the second design
principle is time saving getting the
information you want quickly
without any roadblocks instead of
navigating to your favorite apps to find
the information you want with the
introduction of complications it's right
there in the watch face complications
are also capable so you can deep link to
your favorite contact or upcoming
calendar event and complications are
also persistent there whenever you need
them the third design principle is
consistent complications should have a
healthy relationship with the watch face
as Olli just said with complications or
not on Android wear the watch face
decides how the complications are
rendered so they feel part of the same
family
consider a line in the style of the
complications with the watch face all is
now going to talk you through the
complication tapes thanks Tony
so complications are all about data
supplied by provider apps and displayed
on watch faces this could include
numerical data like your battery level
text like the title of your next meeting
or images like an icon or a profile pic
not every type of data will fit on every
watch face there might only be space for
a small icon or a short bit of text or
you might want to use numerical data
without having to show text or images so
watch faces need to say what they can
display and data providers need to say
what they can supply to help with this
we've defined a number of complication
types complication types determine what
kinds of data are included there's
usually one field that's the key piece
of information and we've named the types
after that field so here you see
examples of the short text type these
are all short text complications but as
you can see there are optional elements
there may be an icon or a second string
but the most important value is
contained in the short text field if
you're a data provider you can choose
which of the optional fields to include
but a short text complication must
always include the short
next field if you're building a watch
face and you support short text you need
to consider all of these variations in
with some other examples you might not
need any text to convey the information
then maybe the icon type is enough or if
you have numerical data within bounds
like a percentage then the ranged value
type could be for you we also have a few
other types you'll notice that we have
both icon and small image the difference
is that images for the icon field should
be tinta Balai the watch face there
should be single color with a
transparent background this allows the
watch face to fit it better to its style
so if you're building a watch face where
full color images won't match the style
then you can support the icon type but
you might not want to support the small
image type where images may be full
color so when you're thinking about the
different complication types if you are
building a provider think about the
different forms your data can take and
if you're building complications into a
watch face think about how many of the
types you want to support now back to
Tony to talk about some more guidelines
for watch face developers okay so I want
to talk a little bit about the things
you should consider when designing
complications however bear in mind there
isn't a one-size-fits-all solution to
this we have a diverse collection of
watch faces on the platform and we think
it's important that complications are
flexible enough to measure of that
diversity so please use these guidelines
as a starting point but if you feel your
watch face would benefit from deviating
from these guidelines then by all means
please do so complications should never
conflict with the surrounding objects on
the watch face for more traditional
watch face layouts as shown here these
red areas in general shouldn't house
complications as it'll be a conflict
with other parts of the watch face gave
your complications a better space so
they have room to breathe as well
and if possible staying true to the
alignment of the watch face will also
help you achieve better balance so if
you have a Center aligned clock it might
make sense to center align the
complications as well complications can
be rendered however you wish though you
might want to give your data a little
more protection and host them in a
container so we found these form factors
work well with the various data types we
have circle square pill and rectangle
and bear in mind the size and form
factor the size and form of these
containers decide what data types can
and can't be rendered and containers are
optional sometimes they help sometimes
they don't but the important thing to
remember as a watch face developer is
you have the freedom to choose building
a strong relationship with the watch
face is also very important you don't
want your complications to seem like an
afterthought so here are some things to
consider use color to tint the data this
will help create bet better harmony with
the watch face decide whether your
complications need containers or not you
can see in this example in the middle
we've we've removed the containers just
to help the complications better
integrate into the watch face and play
around with scale this will help you
achieve better visual hierarchy but most
importantly on top of all that just have
fun with them and don't be scared to get
creative
you can have multiple complications on a
watch face this is awesome for those of
us those of us who want to surface lots
of data here you can see we've removed
the containers and to create more space
and we can easily fit eight
complications on a single watch face if
multiple complications is a direction
you wish to go down just try to make
sure that things don't get too cluttered
and the UI remains glanceable
the complications api can also be used
as a creative tool with the ranged value
data type you can abstract that data
whichever way you like so in the example
we've shown here we just redisplay your
step can go throughout the day as you
get closer to reaching your step can go
the graphic in the background also
updates presenting the data like this in
an unconventional an abstract way opens
the door for more fun and engage in
watch faces and just to finish here are
a few examples of implemented
complications designed by our creative
partners us two and the first example
here you can see they've kept things
simple and find a straightforward way of
adding complications to a pre-existing
watch face removing containers and
tinting the data the same the second
example is a little more bespoke they've
used their creative license and played
around with things like the layout and
the form factors this helps better align
the complications with the watch case
aesthetic and the last examples we've
had some fun with the arranged value
data tape creating a really cool
generative abstract design in this
example you can imagine your daily step
code or battery level being represented
I'll no hand revert to ollie who's going
to talk you through the details of the
API
thanks Tony ok so let's take a look at
how this all fits together
Android wear manages the flow of data
between data providers and watch faces
when data is needed for a complication
Android wear will send an update request
to the data provider asking for a
specific type of data the provider
builds a complication data object of
that type with the required fields and
sends it back to where Android wear then
forwards that onto the watch face which
can then include it when it renders
Android wear also provides the UI that
allows users to choose providers for
each complication and we'll talk about
that in a bit but now let's take a look
at what you need to do to add
complications to a watch face so first
of all you need to decide how many
complications to include and what types
to support in each one so for this
example let's say you want to include a
small round complication on the right
now in that space we could support short
text we could also support icon and
there's also enough space there to show
a ranged value now in that space we
could if we wanted support small image
as well but let's say for the for this
example that we don't want to now let's
say we also want to include a
complication at the bottom this one
could support the same types as the
first one but there's also enough space
to make this one wider so it could
support the long text type note that we
consider this to be the same
complication even though it's a
different shape depending on the type so
to summarise these are the types
supported by each of those complications
one more thing you need to give each
complication a numerical ID so that you
can refer to it with the system that's
chosen by the watch face we call it the
watch face complication ID and it can be
any
okay so next you need a way for the user
to choose providers for each
complication as I mentioned earlier
Android wear provides the UI to choose a
provider for a particular complication
but the rest of the UI is up to you
so what we're showing here on the slide
is a basic list that could be part of
the watch faces config activity as the
watch faces own settings so this screen
is not provided by the system so when
they use a tap on an item in this list
the watch face needs to launch that
system provider chooser let's look at
some code so in order to do that you use
this support library method to get hold
of an intent that's create provider
chooser intent you pass in the watch
face component name that's the package
and class name of your watch face that's
just how you refer to your watch faces
to the system and you also pass in the
watch face complication ID for the
complication that is being configured so
that's the number we chose earlier you
then pass in the types supported by that
complication in this list the order does
matter you list them in order of
preference with the most preferred
coming first in this example would put
ranged value at the top that's because
that type conveys the most information
to the user so that's often a good
choice and that's a good way to think
about this okay so then when you have
the intent you call
startactivityforresult to show the
system provider chooser so when the user
taps on an item in this list the system
provider chooser is shown now when the
user chooses a provider in this UI it
gets set up automatically you don't need
to do anything else okay so to show the
data what you need to do is tell the
system that your watch face is ready to
receive it so let's move into the watch
face service itself specifically the
engine so what you need to do is call
active complications and pass in the
watch face complication IDs for the
complications that are ready here we're
showing it done in oncreate of the
engine that's usually a good place to do
it but you can call this method from
elsewhere for example if the active
complications change once you've done
that you will start to receive data in
calls to the on complication data update
method the the data will come with the
watch face complication ID that it
relates to now you'll only receive data
when it changes so you'll have to hold
on to the complication data object and
any images such as icons should be
loaded asynchronously and be sure to
cache them
now once you've got the data it's up to
you how to incorporate it into your
watch face but before rendering it you
need to check if the data is still
active some complication data is only
valid until a certain time so for
example it might be for a next event
complication and then the piece of data
will only be relevant and up until the
end of that event you check it using
this method the is active method on the
complication data so you just pass in
the current time when you're drawing a
frame to see if you still need to draw
that data there's one other thing you
should do which is to check to see if
complications are tapped on you do this
using the interactive watch faces API so
that we announced last year so that is
by implementing on tap command if a
complication is tapped on then you need
to check the complication data to see if
it specifies a tap action pending intent
if there is one you need to fire that
intent when the computation is tapped on
this allows deep linking from the
complication straight into a relevant
activity
okay so that's how to add complications
to your watch face one important tip
that goes for watch face development in
general but particularly for
complications is minimize the work you
do in every draw call especially if
you're drawing more than once a second
avoid object creation in on draw
wherever possible as that can lead to a
lot of garbage collection and hence
support performance okay so now let's
take a look at how to build a
complication data provider a data
provider is a service and to create one
you need to extend complication provider
service from the support library this
class has one abstract method that you
must implement that is on complication
update this method is called
whenever the system wants data from you
so it will be called when a complication
using your provider is activated by
which I mean when the watch face calls
set active complications and will also
be called when your provider is chosen
for a complication that's already active
it can also be called with a certain
frequency such as every hour if that's
what you want and it's also possible to
trigger updates if you need a push style
for example if you have a messaging app
and you want to update a complication
when a message arrives you could do this
if you want more information on that and
then check out the provider update
request class in the preview support
library ok so let's take a look at how
you might an example of how you might
implement this method so you'll see that
one of the parameters is the type that's
the complication type that's required
and first thing we're going to do is
check that now in this example we're
only going to support short text in a
real world example you would probably
support more than one type
so first thing now as we start building
a complication data object of that type
type short text and now we're setting
the short text field which is the
required field for this type and we've
just setting it to a simple string hello
you'll notice that it's wrapped here in
a complication text object all of the
set methods for text in complication
data take one of these complication text
objects it can just be a wrapper for a
simple string or char sequence it can
also be used for other things and we'll
talk about that a bit later
okay so we're also going to specify an
icon that's an optional field for short
text all of the image set methods of
poor complication data use the icon
class from the android framework that
allows it to be either a wrapper for a
resource from your application a
drawable resource or it could also be a
bitmap however as I mentioned earlier
the icon field images should always be
tinterval
they so they should be single color with
a transparent background and we strongly
recommend you use of vector drawables
for this that's because the watch face
could draw the draw the icon at
different sizes and using a vector will
allow it to resize cleanly okay so that
completes the complication data object
for this example all you need to do next
is send that data to the system and you
do that using the complication manager
object which is passed in as a parameter
to on complication update okay there are
two other methods that you can
optionally implement they are on
complication activated and on
complication deactivated complications
are activated when the watch face calls
set active complications and they are
deactivated either by another call to
set active complications with different
IDs or when the user changes watch
now as a service your provider has to be
declared in the manifest and that's also
where you use metadata to declare things
like what types you can support and what
update period you would like if any here
with the supported types the order does
not matter and that's because as I
mentioned earlier the watch face gets to
decide the order of preference for any
particular complication now for the
update period be aware that the update
period is not guaranteed we do a PI a
minimum the system applies a minimum so
you should think in terms of minutes or
longer not seconds and particularly in
ambient mode or when the device isn't
being warned update requests might come
less frequently trying to make the
update period as long as is reasonably
possible getting updates too often could
impact battery life if your provider
doesn't need regular updates at all then
you can just set this to zero and then
you won't get any calls beyond the
initial one now one example where you
might think you want to update every
minute is where you're displaying
something related to the time on the
watch face so here you can see two
complications where the text changes
every minute we've got a world clock and
the time to my next event but it would
be wasteful to wake up the provider
every minute and there's no guarantee
that the update requests would come in
at the point where the minute changes
even the date complication here
shouldn't need to update even though it
would be only once a day there's no
guarantee the update will come at the
stroke of midnight so it would be
showing incorrect data at certain times
of day so instead the API allows you to
use time dependent text for text that
represents the current time we have time
format text and protect that represents
the time to or from a given time use
time difference text
let's take a look at an example so let's
say that we're building a complication
showing the time to my next meeting and
we're using the short text type so I'm
building a complication data of type
short text we saw earlier that set short
text takes a complication text object
and that so that here we can pass in a
different kind of complication text
object so we're going to use time
difference builder to create one so
passing into the Builder we need to set
the reference period that is the time
that the text relates to so in this case
it's the time of my next event let's say
that's from 4:00 p.m. until 5:00 p.m. in
that case start time here is 4 p.m. and
time here is 5 p.m. now we add a style
so this just determines how the text is
is formatted is displayed in this case
we're using short jewel unit that means
for example if the time difference was 5
hours and 15 minutes it would show 5h
15m that completes the time difference
text so we call build there's one more
thing as I mentioned earlier
complication data is not it can cease to
be valid after a certain time and that
is the case here and it's particularly
important here because the time
difference text is the time to the event
but it's also the time since the event
so if it were 10 minutes after my event
then the complication might show 10 M
which is not what we want so we have to
set an end time so that it shows nothing
after the event okay so that completes
the complication data so we just call
build and let's see what that would look
like on the watch face so the event is
at 4:00 p.m. one hour and 45 minutes
before we would see this at 3:45 p.m. we
would see this so although it's the
short jewel unit style when it's only
minutes
we only show the minutes we never show
seconds for in this style during the
event we would show this so the time
difference text actually shows the text
now and these strings all of these
strings are localized according to the
locale of the device after the event we
see nothing because we set the end time
so for more details of the types and
styles of time dependent text check out
the complication text class in the world
will support preview okay so that's the
complications API for both data
providers and for watch faces we're
really excited to see how you all make
use of it Thanks so if you like what
you've heard to you today and you'd like
to try out you can just go to G Co slash
weird preview you can find that you can
find that about how to get the preview
SDK device images and more information
about the api's we're launching the dev
preview also includes this watch face
it's called elements and it supports a
variety of complication types so you can
test any data providers you build the
preview does include a few providers
like battery level world clock and date
you can use these to test the
complications on your watch face here's
a list of the Android wear sessions that
were on today at i/o and don't worry if
you've missed any of them because
they'll all be on YouTube soon so if
you'd like to have a go at creating a
watch face with complications or
building a data provider do check out
the code labs you can do them here at
i/o or you can go to gqo slash code labs
/ io 16 slash where we'd also love to
hear any feedback you have on the API so
if you find any bugs or if you have any
suggestions or questions please go to 0
slash web preview bug and finally if
you'd like to discuss the complications
API or anything else about Android wear
with other developers
go onto our Android where developers G+
community at Chico's / Android wear dev
okay thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>