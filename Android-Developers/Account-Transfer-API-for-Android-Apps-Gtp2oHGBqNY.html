<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Account Transfer API for Android Apps | Coder Coacher - Coaching Coders</title><meta content="Account Transfer API for Android Apps - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Account Transfer API for Android Apps</b></h2><h5 class="post__date">2017-11-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Gtp2oHGBqNY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">
SEAN MCQUILLAN: Retaining
users on mobile presents
a unique challenge.
Users enter their password
once and then stay
logged in for years until
they get a new phone.
To help your users out when
they upgrade their phone,
the Account Transfer
API lets you
copy credentials, such as
access tokens or passwords,
from their old phone.
No need for an internet server.
The credentials move over an
encrypted bluetooth connection
or a phone-to-phone cable.
Accounts are transferred
between two phones
with different requirements.
The old phone must be running
a recent version of Google Play
services on &quot;Ice Cream
Sandwich&quot; or higher.
While the new one must be
running &quot;Oreo&quot; or higher.
The Account Transfer
API requires
your app provide
an authenticator
for account manager.
This will show your accounts
on the main Android settings
screen.
And it can help you securely
store account credentials.
So how do you support
Account Transfer?
The user starts an
Account Transfer when
they set up their new phone.
Your app will receive
three broadcasts.
And you should create
a foreground service
on both devices in response
to these broadcasts.
The old phone gets an expert
data available broadcast.
Then, from your
foreground service,
you send account
details via Send Data.
The API will send
any binary data.
Though, we suggest creating
a versioned protocol,
such as a &quot;version&quot; JSON
Dictionary or a protocol
buffer.
That way, older versions
will be able to communicate
with your latest version.
The new phone sees an import
data available broadcasts.
You retrieve the account
details via Retrieve Data
in your foreground service.
Once you've parsed
the account details,
call AccountManager.a
ddAccountExplicitly.
to save the account.
If your app does not ship
installed on their new phone,
don't worry, you can
still get the data.
It will be stored
on the new phone
until Google Play
re-installs your app.
On first launch, you can then
call Retrieve Data to fetch
the account credentials.
The API can show a
user challenge, though,
this is not recommended.
During an Account
Transfer, your user
is excited to use
their new device
and is not using your app.
Instead, if you require more
verification of the phone,
for example, two-factor auth,
we recommend prompting them
on the next app launch.
That's it.
After the transfer
completes, the user's account
will be ready.
For the entire API, follow
the links in the description
and look at the sample, which
has a working implementation
to try on your phone.
For other ways to
increase metrics
for both new and
existing accounts,
check out our earlier
video covering
Google sign-in and Smart
Lock to optimize your logins.
Thanks for watching.
See you again next time.
</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>