<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Effective Prefetching (Android Performance Patterns Season 4 ep3) | Coder Coacher - Coaching Coders</title><meta content="Effective Prefetching (Android Performance Patterns Season 4 ep3) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Effective Prefetching (Android Performance Patterns Season 4 ep3)</b></h2><h5 class="post__date">2015-10-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GajI0uKyAGE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">the single biggest improvement your app
can make for networking performance has
to do with reducing the sheer number of
requests made but rather than just a
voiding data syncing altogether how
exactly do you pull that off my name is
Colt McAnlis and if you're looking for
the optimal way to batch request to
reduce overall network traffic then
prefetching is for you I think of it
this way your app makes a request for a
specific piece of data and then sometime
in the future it makes a request for
another piece of data and so on and so
forth each individual request has
specific overhead associated with it and
may end up in a weird pattern of waking
up the radio each time to make the
request prefetching is about predicting
what data would be in those future
requests and grabbing all that data now
while there's an active radio connection
the benefit here is that each radio
request has some overhead in terms of
time that takes to wake up the radio and
battery drain that's taken as a result
of its keep awake time being able to
bundle future requests together and do
them now means being able to reduce that
overhead and save precious battery life
but prefetching is a tricky balancing
problem prefetch too little and you'll
end up not optimizing your bandwidth
effectively and prefetching too much
means the user is going to be waiting
even longer for the results so now we
come to our simple question how much
data is in a good prefetch well the
general rule of thumb is that on a 3G
connection a quality prefetch is about
one to five Meg's of data of course
that's what the understanding that the
data will be needed and used by the user
so you could look at this another way
and say prefetch as much data as the
user might need in the next one to two
minutes of their active session but in
honesty one of the biggest things your
prefetch needs to optimize for has to be
for the speed of the device connection
for example if the user is on a 4G
connection you may be able to connect
and fetch 12 new photos which takes the
same amount of time as prefetching three
photos on a 2g connection so modifying
your prefetching code to take into
account the quality of the users
connection is the best way to create
optimal fetch cases and it's worth
pointing out that the easiest way to
determine the health of the network is
simply the time how long it takes for
some known piece of content to return
from a request with a few
calculations and a handy lookup table
for common network speeds you can
quickly determine what type of network
the users connected to and adjust your
fetching and requests accordingly
it's also worth pointing out that the
real sweet spot here has to be executing
batch requests that you know were
delayed to be issues but have been on
the wait cycle and future requests aka
prefetching into a single activity radio
window that's when things start to get
really awesome and the good news is that
you can update your app to adopt these
patterns without having to write a
massive amount of code GCM network
manager is a Google Play services API
which helps to schedule Network oriented
tasks and handle batching for you this
greatly simplifies the implementation of
common patterns such as waiting for
network connectivity Network retries and
exponential back-off basically it's all
the stuff you need with a single helpful
API and when it comes to performance you
need all the helpful api's you can get
and helpful videos - which is why you
should check out the rest of the Android
performance patterns content and don't
forget to join our Google+ community as
well so keep calm profile your code and
always remember perf matters
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>