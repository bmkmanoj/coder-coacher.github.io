<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>VectorDrawable for smaller APKs (Android Performance Patterns Season 6 Ep. 6) | Coder Coacher - Coaching Coders</title><meta content="VectorDrawable for smaller APKs (Android Performance Patterns Season 6 Ep. 6) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>VectorDrawable for smaller APKs (Android Performance Patterns Season 6 Ep. 6)</b></h2><h5 class="post__date">2016-09-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ls3KzLRmrXg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">one of the interesting parts about
building an android application is all
the awesome configurations of screen
sizes and form factors and if you're a
developer who prides themselves and
being available on the most devices
possible then chances are you've got a
lot of your images and icons at each
specific resolution that you need to
support but be warned this might be
causing a large issue with the size of
your apks my name is Colt McAnlis and if
you're trying to squeeze the last bite
out of your apk file size then vector
drawables are a handy solution see one
of the big problems with images that you
include in your apk is that you end up
needing to have multiple versions at
this of the same image at various
resolutions and that's because file
types like PNG and JPEG are what we call
raster graphics they define a 2d grid of
pixel data that's pretty much copy paste
it to the screen when it's drawn so to
get different resolutions you have to
create an entirely new file at that
resolution and place it in your apk the
result is that the more images you have
to include the larger apk size is this
is where vector drawables come in rather
than having to store an image for each
resolution you support vector drawables
allow you to use one file and generate
whatever resolution you need on demand
it works like this a vector drawable
file creates a bunch of shapes and their
visual properties like type the position
the color the rotation etc etc when you
load a vector drawable file the system
draws each shape to the screen giving
you your final image and since it's just
drawing shapes you can do this at any
size you'd like meaning a single VD file
inside of your apk can let you generate
mdpi hdpi and xxxx xhdpi images greatly
reducing your apk bloat oh by the way
another cool thing you can define
animations on vector drawables which
means instead of keeping each frame of
your animation logged out at each
resolution you support you can simply
set up an XML file that transforms the
graphic in the same way giving a similar
visual result with much less resource
overhead now it's worth pointing out
while vector drawables can save you some
size there's a few caveats you need to
consider when using them firstly loading
vector drawables in your app at runtime
isn't the same as loading a J
while JPEGs have hardware decoders to
help unpack things vector drawables need
to be generated through successive draw
commands to the GPU see every shape in a
vdl has to be rendered to a texture
before the final image can be used on
screen this means that the bigger the
image that you have and you're
generating or the more complex the
drawable is the more time it's going to
take to load your image but just like
JPEGs or PNG s you only pay that cost at
run time rendering AVD later is just as
cheap as any other graphics resource
secondly in order for vector drawables
to represent complex images you have to
add a lot of complex shapes this impacts
both the size of the vector drawable
file and the amount of time it takes to
load the image at runtime as such it
makes sense that vector drawables are
best used for images with low amounts of
details that are trivially simple to
represent with shape elements while pngs
and JPEGs might be able to compress
those images quite well the more simple
the image the more savings that VDS will
give you finally make sure that you keep
an eye on the complexity of the paths in
the file I see most of time when you're
creating shape information from an
external tool it can go the extra mile
to insert lots of additional points or
path information which may not be
required in order to produce the desired
visual output by simplifying your path
data before adding the vector drawable
to your app you'll reduce the amount of
file size these item take up in your
final apk and that's kind of the trick
with performance right I mean catching
all the crazy stuff before it gets out
of hand which is why you should check
out the rest of the Android performance
patterns videos and don't forget to join
our Google+ community to ask questions
to the other experts so keep calm
profile your code and always remember
perf matters</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>