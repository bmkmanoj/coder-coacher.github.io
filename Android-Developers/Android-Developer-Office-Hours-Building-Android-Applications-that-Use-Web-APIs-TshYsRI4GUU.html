<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Developer Office Hours: Building Android Applications that Use Web APIs | Coder Coacher - Coaching Coders</title><meta content="Android Developer Office Hours: Building Android Applications that Use Web APIs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Developer Office Hours: Building Android Applications that Use Web APIs</b></h2><h5 class="post__date">2012-09-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TshYsRI4GUU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">birds I'm Jill Mallon your moderator
next to me is Trevor John's heading
beside him down at the end of the table
ignoring us is Alex Lucas our engineer
today is Robert Lee yeah the world is
shifting around our world is the the
world is moving around Alex it revolves
around him so with no further ado let's
go that moderator and take our first
question for today from zealots go in
Sofia Bulgaria what's the best approach
for an app with a lot of width excuse me
mmm Web API calls now I'm using a
service plus one async task for all API
calls and ugly interfaces to talk to the
UI should I use a separate async task
for every API call and how to
communicate to the UI properly Thanks
all right so it's a service and an async
API calls and they want to know if it's
okay to use separate async tests or
every API call I think that's probably
okay depending on the nature of your API
so the thing that I put with with async
task is if your application ends for
some reason so you rotate your screen
and every launches the system is going
to restart your app does async tasks are
never going to complete as far as your I
can turned in I think this will they
still run in the background I can't
remember it's iffy I wouldn't rely on
that behavior they made they may not it
so if you're just like fetching some
information that's fine if you're making
something you're something that's a a
destructive change right you're you're
editing something you're posting your
data that's when you need to be a little
bit more careful and make sure that your
async task actually can run to
completion or at the very least that if
nothing is so important that the world
will end if your app does restart so
yeah if you're making a blog post right
and the user posts that you need to make
sure wants to come actually appears if
you make it so that when your app
restarts no you check to see if that's
posted you're probably fine now that
said there are some
- using a service is a background
process and that is that you can
actually you have a lot more control
over things like fetching new data so
the advice we usually give people when
they're using Web Services inside of
their Android app is to make sure that
you're pulling your data in before the
user asks for it so when the user is
actually in your UI they get a nice fast
responsive experience on top of that
users don't always have an internet
connection or it might be a bit flaky so
if you're on a plane or commuting to
work you might be passing through this
if some tunnels or in you again a plane
- perfect example these are placed it
wants people to read their information
you know if let's say you're a feed
reader right the user still wants access
to the RSS feeds if you have a
background service you can go and make
sure all this is cached and available
inside of a content provider if you're
just doing an async task to get it live
all that's gonna fail so I think that's
really the big benefit to use a service
and so for that reason yeah you probably
can make it work with an async task but
our usual advice is not to Alex did you
have anything else you want to add on
with that sure um just really quickly to
like to address the part of the question
recess is one async task for all calls
okay or should I use you know what spin
up a new async task per call and I think
if you're in a situation where you have
a lot of calls happening like let's say
the app you're writing is like the front
end for a web service or if you're doing
some sort of batch thing like
downloading a thousand images from the
internet if you don't go to the service
route the better option is really to
just create a full-blown background
thread somebody some tasks are really
designed for they're really optimized
for very quick tasks like maybe pulling
weathering from
and off the network or you know writing
something to a file or writing something
to a database if you're doing something
that's going to take a significant
amount of time or if you have a whole
bunch of different tasks that you're
queuing up like that the best option is
really to have a background rather just
sort of sleeps in waits for new commands
and then you can just send those you
know send a request for a file or
something like that to the background
thread it the other part of the question
I noticed was about the quote unquote
ugly interfaces for the UI there's a
facility called a handler that lets you
sort of ship data back and forth and let
commands back and forth between the the
UI thread and background threads I would
look into using that I without more
information what you're doing currently
I can't really say whether those are the
right one of your current approaches the
right or wrong way but definitely
looking at handlers okay any other
comments great thank you very much tom
and we've got two questions ok let's
have the first one
I not getting sound no
are we in the mute I hit the button on
the computer Robert let's see if we get
some audio out here oh we don't belong
just a second yeah
let's go back to moderator I'm gonna go
to take over and debug this stuff on the
soundboard bear with us yeah come back
to me for a second public so that we
don't deafened people okay we're gonna
go back to the moderator for just a
second while we do some technical issues
here um and ask this question from
Aquila and Ashburn Virginia I'm a
beginner to Android application
development do you recommend reading the
API guide straight through that's what
I've been doing the Android training
doesn't really feel in-depth alright
yeah I guess since Trevor isn't in front
of the camera then I'll be taking this
one yeah reading the API guides is
actually a good way to become familiar
with Android development I should say
that they are the API guides and Android
training serve two separate purposes the
API guides are more designed for a
particular topic to give you an overview
of the API and all the little features
and Method calls and the important
elements of it the Android training
classes are more task oriented in terms
of you know I want to sync with a web
service or I want to efficiently load
bitmaps or like they're very like tasks
based in AI want to accomplish this and
then a step-by-step lessons like a
series of step-by-step lessons within a
particular topic of of how to go a
little bit the the steps that you go
through in order to accomplish that in
the relevant API calls we also provide
code snippets and sample code
yeah the API guides are really good
reading I would recommend instead of
just reading which doesn't do a lot for
retention of a topic especially
programming your best option is actually
sorry Alex please
your best option is actually
to have an idea like a small sample from
not a small sample project but a small
exercise like I feel learning how to do
networking phone learn how to pull an
image off the internet or something and
then write a small sample app that does
that Joe also we were discussing this
beforehand and he also bought the the
great point that it's good to have an
overarching project in mind when
learning a new language or a platform
and that will really that way you can
get a bunch of topics that sort of
learning simultaneously as you're
incorporating these features into your
project when I had anything Trevor um I
didn't catch the question because I was
he fix on you Android beginner to
Android application development do you
write them in reading the AP that API
guide straight through okay um you know
it's really I think it's mostly a
question of what how do you learn how do
you let your content delivered I know
some people like you know they do like
reading through the documentation in the
format we provide it's probably a bit
more fast-paced than what you'll find in
a a longer book that's more geared
towards beginners right we assume that
you have a background in the java
language we assume that you're familiar
with most of the concepts involved in
GUI programming and we do rush through
things have been because we assume that
the audience has a a a solid background
in this stuff and not most people I say
when they especially if they're getting
started whilst they're coming from a
different environment might not be
familiar with all of that and you know
the documentation is all out there but
you have to go and you have to take a
look at our site you might have to look
through the Java tutorials for some of
the language stuff in with those cases I
think you might find a book to be better
yeah we liked I'm a fan of ratos book
but there's a lot of good ones out there
and some people also like video
tutorials and there's a lot of those out
there as well too so it's really just a
matter of how do you let your your
information delivered I do think that
the well the API guide especially is
probably not the best way to go but
Android training and the tutorials and
and the developer guide all great places
to start
I think the
do cover everything you need to know but
you know again it's a different pace um
yeah I would
I'm a technical writer on Android and so
I feel like I understand something about
all the different stuff we had written
about I would say that the API guides
were not designed to be read straight
through in order or you know you don't
need to read all of them in order to
understand how to develop an Android I
can understand that you might feel that
Android training isn't an it doesn't
feel like it's in depth but it'll give
you an idea of some of the tools that
you can use to write Android
applications as in async tasks and other
things like that and also the types of
problems that you might write and run
into when you're writing an Android
application so if you just review them
even if you just skim through them you
can get started on a project and then if
you need more help on a particular topic
you can look at the API guide for that
topic right now I didn't you just to
give you an idea of how I got started
with Android I read through the first
you know the first what is it five pages
I think under the unidirectional
material at life cycle of an application
what does an activity look like how do
you do a UI all the really basic stuff
are clustered right there at the
beginning of the developers guide and
then from there you can go and read the
individual sections as you come across
problems you'd like to solve but yeah I
do agree with Jeff reading that
everything on there is a pretty daunting
task and it's not structured to really
be read that way I mean you certainly
could but that's gonna take you quite a
while right okay um since we have
somebody in the Hangout waiting to ask a
question let's go to him now
yeah you know and Robert did you unmute
the hang-up computer on the on the sound
board going act live there you go now
people on YouTube can hear yeah okay so
actually two questions the first one is
fairly simple at Google i/o one of my
co-workers asked about using Web API
succinct shared preferences and we were
told that if we just waited a few weeks
there would be a product release that
would allow us to do that is there any
update on what that is I'm not actually
sure what that would be okay yes
Joe do either of you know what that's
nothing to do no the the two gentleman
who gave the the talk at Google i/o I'm
Fred I don't remember their names but
they they specifically told us that
there was something coming up too
specifically to sync shared preferences
using web api's yes
building Android applications that use
web api's that would make sense yeah I
don't know what topic they're referring
to off the top of my head but I can we
can track down the guys who gave this
yeah it's okay yeah yeah I know him yeah
he actually is in charge of a lot of
stuff related to our overall API
strategy at Google so it doesn't
surprise me that we don't know about it
because he is not part of the Android
team he's part of the broader API team
again for all of Google so it doesn't
surprise me that there's something going
on we haven't heard about it yet we'll
get some more firmly long we're gonna go
and try and recap all the questions we
can't answer to being the show the
following week so if you can tune in
just as a star the show next week we'll
get that answer for you and if you can
post a actually probably this isn't the
best question for Stack Overflow so yeah
yeah so tune in next week will
and have some more info and you had
another question yeah the the second
question is involving fragment
transactions with compatibility library
I have basically a linear layout that
contains multiple fragments and what I
want to be able to do is replace one of
them with another fragment and because I
don't know at the time of replacement if
the number is identical or not so I just
completely erased the row and refill it
with fragments the removal process works
great the problem is so I remove all the
fragments I commit that change and then
I try and add new fragments and nothing
happens
do you commit the change of adding the
fragments yes
yeah it's in within one function i
iterate through all the fragments that
are stored in that layout calling remove
on each one I commit that and then on
all the fragments that I want to add to
that row I do an ADD and then commit
that after the for loop I'm very
confused because I I don't get any log
cat messages yeah literally nothing
other than that eh
I see the results of the removal but I
don't get the residuals of the add does
it doesn't work if you add we add them
in a separate way like if you do the
removals and the ends of the new
fragments in the same transaction I know
I tried that that didn't work so I
thought maybe I'm having some sort of an
issue with that so I put them to two
separate transactions that doesn't work
calling invalidate on the layout doesn't
work I have this question posted on
Stack Overflow but I think we probably
need to see a code for this so and post
it in the comment thread on Google+ for
this live stream right now we'll go
through after the show find your
question and take a look through your
code yeah because it sounds like what
you're doing should work it's probably
something really subtle and so if you
post some code we can try and sort that
out for you just make sure usually I ask
people to do this with the link
sometimes winds up in the wrong place so
again make sure you find the stream
right now on Google+ post a link to your
stack overflow question there and we'll
find that right this is the advantage
yes yeah okay
Charlie we couldn't be more help we have
somebody else on hangouts go ahead
nobody silence silence might have gotten
bored and left us but we encourage you
to come back if you still have a
question and we encourage everybody else
out there that if you want to ask a
question it's perfectly okay to write in
or join the hangout and ask a question I
think we've got a limit of like ten
people on the hangouts which is why we
don't encourage everybody to just jump
in but to the extent if you have a
question jump in if you have a question
don't just jump in and we'll answer it
okay next from moderator what are your
best practices on writing a web API that
will be interacting with Android are
there particular data structures in JSON
URI construction or API side behaviors
that will make the Android interactions
more seamless and that's from the scene
in the Colorado GDG Colorado all right I
can't say there's really anything that
makes working on Android any easier I
mean most web api is have been the
underlying method of writing them has
been designed to work in a way that
works on any language right so you have
I'd say most people tend to have
standardized on rest on the restful
design pattern so basically if you if
you're not familiar with that the idea
is you have a collection of nouns which
represent you know whatever objects
you're interacting with that person
record and you know an event record
whatever it is and then you use the
normal HTTP verbs get to post or get put
post delete patch things like that to go
and make modifications to the data when
you access those URLs its most people
either will use xml or json i think
either them is equally easy to work with
if you're using xml just to make sure
that you're using a sax style xml parser
or rather than something based on dom
because mobile
have limited memory if you use JSON
I'd say JSON tends to be one of the
better JSON parsers available but JSON
is pretty lightweight so feel free to
use whatever works for you in that case
though again keep an eye out for memory
constraints if you have a very large
tree of objects you're reading in it
might not make sense to load it onto
memory at the same time maybe it just
depends on what you're working with
other than that you know it's really
what works best for your application and
I don't think really really one pattern
over another is really gonna make more
of a difference on the Android side it's
really just a matter of what's easier to
program with okay
hey Matthew um blue hi hey two questions
actually one I'm trying to look into the
file system on Android and basically
trying to I got my tender on Google Play
I can download to my device using like
DDMS or something to take it off the
device it's in the mount a sec folder
and it will let me move the file is that
the new app encryption that Google plays
doing
that's quite specific encryption mm-hmm
yeah okay yeah say yeah if it's in a sec
that that's all an encrypted filesystem
and not something that okay there's only
work on certain devices cuz I'm like and
take it off my phone which is an old
gingerbread I've I can no problems
accessing that folder whatsoever I mean
if the encryption was enabled on I want
to say it was on jellybean okay and it's
only for paid applications mine's free
hmm yeah I'm not mistaken am i I heard a
rumor about it about it being on a salt
mine for my favorite a date they was
definitely added in jellybean so yes
like okay the other one is any ideas on
how to look into a Java lying verify
error when running the app on your on
the either an emulator or on a device
when you ask Java to verify the class
before it goes all the decks and
everything is perfectly fine is this
what what API level are you targeting
for this I've this is like two point I'm
just like to point to all right because
I had once I know prior to enjoyed to
you would get a verify error if you used
an API call that was not available on
that API level yet point two though it
shouldn't be an issue because I'm
running it on a on a jelly bean device
okay
and getting that error I tried two
different emulators and they all give me
the java.lang verifier but i take the
you know APK decompile take the Dex take
it back to the Dexter jar look at the
jar files and Java says and no problems
at all with the class files
so interesting okay I'll get us more
yeah the only thing I wonder is if
you're a reference to class that doesn't
exist possibly though I think even that
should still work too and like you said
you're on jelly bean so yeah it's
probably not an issue with the system
API is in that case possibly something
inherent to the way your application
structured okay I'll look into that it
Thanks okay thank you
anybody else No okay back to moderator
next question is from Julian Brust is it
possible to enhance Google now as an app
developer that is provide more data or
custom cards not at this time so you can
to give you a little more information
then girl now doesn't have an API so
there's no way to extend it but one
thing you can do I don't recommend
people do this but it is possible to go
and override the the Google now action
so when you hold down on the home button
and slide up from there you this little
Google logo that pulls up Google now you
can technically replace that with your
own with your own app if you want to
provide something that's a lot of
placement for Google now all of Google
now but again I don't really recommend
that because Google now is pretty cool
and as a user I don't think I'd want to
place it on my phone but you know that's
right right now that's the only option
available okay thank you
next question is from a Ramone in
Finland I'm planning to use a private
key to hash the payload sent to the Web
API
I guess it's impossible to keep it a
hundred percent secure since it's
possible to get the apk and decompile it
anyway what are the best practices to
keep the key in my Android app safe okay
that that's a little bit tougher because
yeah like you mentioned it's entirely
possible to decompile an APK and if you
have your private key stored in there
somebody looking at the byte code will
be able to find it and remove it so I'd
say given that your best option to be
they escape that key somehow so you know
just play the easiest way to some you go
and remove a key if they're gonna try
and do it would be to just one strings
on your cono on your app and see what
strings are contained in there so
probably good alternative would be to
create some sort of you know a seed for
your key and use some cryptographic
function to go and convert that into a
suitably sized you know key hey Robert
could you meet the speaker sorry
yeah so yeah basically you know it's the
same idea like with the passphrase when
you log into a Wi-Fi network or
something like that the past parade used
the passphrase provided is usually not
long enough to actually become a
suitable cryptographic key so there's
various algorithms actually go and
extend that into you know some this is
512 or however many bytes as long as you
need for your actual key material a good
example of this try to remember the name
of the algorithm
I don't think it'd be here remember it's
off the top date their heads do they
give us a better hint yeah it's not
rhythm that converts a passphrase into a
longer key no I think we probably have
to look it up jack but anyway if you
take a look out there there are our gums
that basically will extend a passphrase
into something larger and that would be
a good way to go and hide your key
alternatively if you I guess you could
even use them like md5 workshop or sha-1
just get generate a hash of your key and
then basically that that's where he
wants to be goes and looks at the
strings they're not seeing your verbatim
key stored in there now I do want to
caution there is there is some advice
out there that I want you not to follow
and that is don't use secure random to
generate your key fill material so what
I usually see people do in this case is
logo and create instance of secure
random generator feed their passphrase
essentially and is their random seed and
then generate however many bytes of
random data assuming that since they're
always using the same seed they'll
always get the same random data back out
and the the actual answer is that is not
guaranteed to happen and I have seen
some apps break pretty badly because of
this assumption so please please please
do not use secure random to generate
fill material anything else this
deterministic should be fine alternative
or other things you could do you could
go and concatenate multiple strings you
could basically provide or apply any
sort of transformation to your original
string so that that way that the
original key can't be read out and I'd
say that's the best practice in this
case
md5 sha-1 is probably together any uh
other comments no alright we'll move on
to the next question this is from mr.
hidden Android in Croatia is there a way
to enable full development access on
stock devices we can out we now can
allow installing debug apk files and
able USB debugging and developer options
but we can't use really helpful
hierarchy viewer when testing on stock
devices and a sad face alright sorry I
guess there's two parts of the question
here the first question is is it
possible to go and enable full
development access and to do that you
need a custom ROM so Android normally
has three ways of building the normal
user build which is what you'll find on
pretty much any retail phone you buy and
then there's also a user debug build in
an inch build which enable increasing
levels of access of the system at the
cost of performance and security we
don't recommend most people use those
builds again there are security there
are security implications if you do so
that you know if you are making a phone
that's just for development purposes you
can go to source.android.com
check out the source code there make
your own build assuming that drivers are
available for your device
not all devices have drivers there so
you're gonna want to check and see which
device you have and how well it's
supported but that said it sounds like
what you really want hierarchy viewer
and if that's the case there's an even
better solution and that is to download
something called view server view server
is the code that is responsible for
export that that's this that generates
the server that hierarchy viewer
connects to it's part of the system but
you can also place it into your app and
run that same application entirely in
userspace
so if you go to Romain V's github page
or just search on google for a few
server you'll find it as the first
result I'm sure and you can go ahead and
just drop those files right into your
application I think there's a few
changes you make your manifest as well
and what you'll find is when you try and
connect as long as that code is part of
your application view server will work
at your site hyper viewer or work just
fine no special OS build required and
that's our recommended way of getting
hierarchy viewer to work on a real phone
of course you can also run it on an
emulator and it will work just fine
there because emulators I believe are
they you sweet bug I think emulator zbo
user debug build so that's the other
alternative ok great answer thank you
very much next question is this week's
Android design in action showed two
spinner below a textview with
horizontally left align text any
recommendations on how to implement that
that's from Toby in Germany good grab
this one okay
so I'll only have then looked at the
lives of the videos that you like to and
I from my understanding it isn't
actually text view hovering over a
spinner it's just a spinner with one of
the rows selected as it's a default
that's the default value that it's
showing so that's why I think the
question
the Oscar Toby was under the impression
that it was sort of it's actually
hovering with it higher the order like
over the spinner that's not it it's like
there's just a spinner there as far as
how the text is left-aligned that's easy
that's a that's just mixin hell the
tribute this set Android gravity to left
and it'll left align the Ducks okay good
great answer thank you very much I'm a
question from molo in Portland Oregon
can i restrict a start dragged object so
that the dragged object only can only be
dragged into a certain area I have a
list view that I want to drag a row to
another position I'd like for the
dragged row image to only drag
vertically not horizontally any answers
from you guys because based on my sort
of hazy memory of how this works I don't
think there it is yeah I can't recall a
way to do this either I I don't think
there's a way even if there is just
speaking as easier I don't know that I
would like that experience where the
thing that I'm dragging is sort of
following my finger but sort of not I
think it's it's pretty intuitive if
you're dragging a ListView and around
that you can only drag it to other areas
in the list so I would I would leave
that as is I am I kind of understand the
question because there's a gesture in
like Mac or Windows where you say hold
down the shift key and move the cursor
or use a cursor arrow and that restrains
the movement to one axis rather than
moving it all over the screen but um I
don't think that's as necessary on an
Android device for drawing the wine or
something yes moving
right through location so I just don't
think that the current API supports that
okay next question
web UI I'm sorry from anon whoever that
is on web UI guests just after the end
of the talk he referred to a new
functionality which oh we had that
question it was that was a live question
yes that I said I think there's actually
one more thing we should probably
mention on this topic okay and that is
the backup API now the backup API is a
service that's provided as part of
Android where you can take you know
typically a shared preferences file and
ask to have it sent to typically a
server on the cloud and that will get
replicated across to other devices when
the user restores their data now it's
not the same as something that's
actually doing the full sync and merging
and changes across lots of different
devices that's still a topic we need to
follow up with you Nev and get some more
info for you but if you're just trying
to go and persist the users data
somewhere that will survive you know a
phone replacement or the user you know
basically just loading in all their
settings the backup API is a pretty good
option for that now it doesn't always
say to the cloud miss up to device
manufacturers decide where the state is
saved
I've seen some devices will go and save
data at the SD card rather than to the
cloud but I think most devices coming
out now do sync to the cloud and again
that's a good option for certain use
cases so just keep that in mind
great thank you go ahead
you mean in hangouts yes that's nice yes
here we go
shoot ya later on the list oh we utilize
some web api's in our app that can
contain some very large JSON responses
this and cause are apt to run out of
memory it might be due to memory
pressure from other things going on the
app but how do you see just handling
such large responses excellent question
so if you control the API you could go
and page your responses so that way you
only load up a few few pieces of data at
the time at a time it depends on the
nature of your application that might or
might not make sense the other error
within that you know this is sort of
what has mentioned earlier about DOM
versus sax in the context of XML Dom you
actually go and load the entire
representation of an XML tree into
memory whereas sax is a streaming parser
it'll go and read through everything and
generate events to come across certain
elements but at no point you have to go
and load the entire tree into memory and
so if you're finding that you are
encountering similar problems in JSON
and JSON really is a lot most JSON
parsers work a lot similarly to how a
Dom based XML parser works just go and
you know I I'm not familiar with these
streaming JSON parsers there's got to be
one somewhere out there I'm just not I'm
not - not sure what it's called but
feeling that you could just write your
own that literally just scans through
the XML or sorry through the JSON data
and emits events when it comes across
certain apps and you can use that to
extract the data you need so yeah we say
that each element within your your JSON
tree has a title a URL and another you
know few hundred K worth of data just
using extreme example you know you can
just go and extract the URL in the title
and then when the user clicks on it you
could go and make a call that you are
all to fetch the additional data
at request and that way you can ease up
some memory pressure there I do you have
any let's let's say that that's that's
not an option
are you aware of any any good streaming
jsonparser or any other way to to sort
of relieve some of that that hurt that's
gonna come by streaming all that all
that content into the app off to do some
research after the show and then I can
recommend something assuming something
exists I'm sure there is something out
there again not not familiar with the
name off the top of my head but we'll
try and find something for you far as a
good streaming json parser but as far as
saving memory pressure that's always a
really difficult issue in android apps
because you are sharing the device with
a lot of other apps and on top of that
it's on a mobile device so memory is
limited it's definitely different than
working on you know a desktop or server
and there's really not much you can do
about that other than to write your
application to use as little memory as
possible
now there are some plugs you can use
that will get you some additional deep
space but we really don't recommend
people use them it gives a bad user
experience because they'll start
advocating other apps from memory when
they shouldn't be and on top of that
that you know the amount of memory they
give you is actually not guaranteed so
it's entirely possible that using these
flags will get you know extra space at
all it's really just a hint to the OS
and then the OS decides how to handle it
so really I can't really give you any
better advice other than you're going to
need to be conservative in your memory
usage in general
if I can ask what roughly how big is the
JSON that you're downloading like how
much data are you trying to process at
one time it can be several Kay's I think
you should you should have enough plus
or like 10 kilobytes are less than no no
we're I'm sorry I I don't I don't know
if it's I don't have exact rough numbers
but I know it can be very large you know
paragraphs of text on that order of
things
okay paragraphs you should be fine I
mean I'd say as long as you're you know
a few hundred K or less no problem I'd
say even up to a megabyte I mean that's
the size of a large photo right I'll
actually a mega I could be a small photo
but anyway I mean I'd say up to that
size you're probably still safe so if
you're running out of memory with
paragraphs that's that sort of tells me
that there's something else wrong in
your app and you're just I'm really
curious well on what your app is using
up all available memory but I'd expect
you to be running into other problems
just besides your JSON at that point I
mean that that's not a lot most most
devices have you know gigabytes of
memory
I mean another one a gigabyte it may be
a gigabyte maybe half a gigabyte but you
know I mean at that scale you know
you're you're less than a mag that
that's a very small fraction of system
memory and keep in mind the system will
evict other apps as necessary to make
sure your app is the full grind app has
enough memory to run so by the time
you've run out of memory
you really have exhausted everything the
device has that can give you so I'm yeah
I think there's something else in your
app that's causing these problems it
doesn't sound normal to me have you
looked at any sort of memory monitor to
look at what what structures are being
generated by you out there taking up
memory
yeah it's there's a lot of of UI going
on there's there's we've got other
resources being downloaded and gray into
the system and this it's it's entirely
possible that this is just a large
enough hit into the system that it's
just it's just taking us over the top
but we don't experience this this out of
memory in any other area except when
we're loading up this Jason hmm yeah
this is that just an interesting problem
so if you do have if you if you are able
to find a streaming jsonparser
time for you I think that's probably the
best approach here given that any like
it's entirely possible to that I'm just
guessing maybe you occasion when I
crossed a really adapt normally large
block of JSON data I mean the problem
you're having is very similar to loading
bitmaps from the internet and Vick naps
are are fairly large the advice we
usually give is there's enough space to
load twice your screen size in the Java
heap and you know any reasonably sized
blockage a someday there's gonna be less
than that so yeah you're probably are
just too right at the edge there but
we'll see we can find that that can help
how about this we don't know we're using
Jackson to be the fastest that's right
Jackson okay all right okay any other
comments just make a note here okay are
we yeah so as far as advice I'm like I
said earlier we'll dedicate a few
minutes of the next show to go over any
questions you couldn't answer so we'll
have an answer for you then so it'd be
2:00 p.m. next Wednesday be sure to tune
in yeah alternatively you can also leave
a comment on on the event page and we'll
follow up on the event page that way too
so that way we can get you an answer
quicker thank you
yes another anybody else there okay so
we'll move on to the next question and
moderator which is from crystal da da in
tongue excuse me mmm Estonia I think
that Android is very close to being
feature complete but why does it seem
like not enough effort is put on html5
support which is still very laggy on
mobile even on quad core and where
there's still no user accounts
especially guest that's I'm not sure we
can actually really answer too much
about that because that's really going
into the roadmap as far no for Android
which is something we generally can't
talk about at least not publicly now as
far as html5 support I'd say a lot of
the effort lately has gone into Chrome
and as a result the built in web View
Client is a little bit lacking in
features that's sort of a complicated
issue because not all of chromosome and
source it is something the team is
working on but I can't tell you how
they're going to address that again
that's that's a forward-looking
statement that I yeah we can't talk
about on the air but I mean these are
all good points and we definitely listen
to the feedback from the community and
deciding how we spend our engineering
time so I'll just take this question is
a feature request and make sure that
that gets passed along
okay
you
okay so the question is on is there a
way is there a way of adjusting the
padding on the label for the spinner so
on the text within the spinner I guess
you wants to have left align that within
this better I see okay so the question
is how do I left the line text within
the spinner itself right okay I don't
know the answer to that off the top of
my head it's Rowan lurking in the
hanging up by any chance he always knows
the answer this to my own question no
Roman was hoping if we said his name a
couple times that sort of summoned him
we'll have to look into that at the
right hand to have an answer for you
next week also if you could link if you
want to ask the question on Stack
Overflow and then link to that stack of
a question within moderator we can get
an answer there and it's a handy place
for us to uh
the moderator section for this week
might be locked by the time they do that
so if you can't post a moderator again
go to our event page on Google+ and make
a comment there and we'll follow up with
you that way too
yeah okay great thanks
next question from moderator what would
you recommend if your Android app needs
to interact with a soap web service this
is from Bellingham er so fun use rest
what are you thinking soap no I know you
don't think that was said in jest it was
it was I'm just not a fan of soak myself
right but yeah I should I'm not familiar
if any really good soap libraries man
we're a diet does anybody else know one
I don't know one off the top my head I
think the the point of soap is sort of
you don't need a soap library so much as
well so much as you need something to
generate this code web service for you
right that's the point of soap is you
don't have to understand so which it's
kind of fun it's kind of a weird
approach we we all of us prefer rats but
if you can find a Java utility that will
not necessarily android-specific with
fungal in there bribery Java interface
files and then modifying those to use
the web clients available on the Android
I usually recommend against doing that
though because a lot of the web services
libraries that you'll find for for Java
in particular are designed for desktop
environments and they're really not
conservative when it comes to memory
usage can you run into problems with
them so I could go out of your way to
find one that's specifically designed
for Android with that in mind I I just
did a quick search here there's one here
at the top of my search results called K
soap to Android I don't have any
experience with it but it does say it's
a lightweight and efficient soap client
library for Android so that might be a
good place to start
I didn't know there actually was one for
Android that's cool yeah doesn't
surprise me I think there's there's
there's another yeah there's enough soap
web services out there that you know
like you said you can't control what web
service you're interacting with if you
didn't write it so it's good that these
client libraries are out there if you
are writing new API is please these rest
it makes me happy but other than that
you know I mean soap itself as an end
user is that there definitely are some
benefits of using it and yeah I just
just just so you know I did a search for
soap Android on Google there's also one
right under it called Android soap and a
blur again we don't have any experience
with either of these api's so feel free
to give them a try let us know what you
think actually so we can give feedback
to other people we're asking similar
questions but we can't endorse either of
them okay um we're getting towards the
end of the hour here so let's move
forward pretty quickly um here's another
question from Bellingham er after doing
some profiling it appears that most of
the time spent in some HTTP based web
service requests is downloading and
validating the server certificate is
there a way to cache the certificate for
subsequent requests I'm not sure you
want to that certificate validation is
needs to be done a pull request basis to
make sure that nobody has tampered with
with your with the response coming back
from the server I mean this is of course
assuming that you're using HTTPS if
you're using HTTP none of the supplies
but if you are using you know a secure
connection there's probably a reason
you're doing that and every request
needs to be validated to make sure that
you know say that somebody hasn't gone
and swapped out your certificate using a
man-in-the-middle attack these things
are rare but there are reasons the you
know there are reasons why SSL and TLS
exists there aren't attacks that do this
sort of thing and you you need to check
port then for true there's really not
work around there now some of the work
done on speedy is specifically trying to
go and speed up SSL and TLS and so you
could use a I imagine there's probably a
speedy library out there for Android
I think so anyway that yeah I actually
look on probable uses it I'm sure
there's a way to go and get that working
but most servers out there I don't think
supports speedy yet but that this is
precisely the sort of problem that
engineers are working on right now to go
and try and speed up SSL so it's a valid
question unfortunately it's not an easy
answer go ahead ask me about the arrest
question we missed the beginning there
yeah it's not a rest question yes
correctly obviously considering Westeros
is pretty cool so the question is is
there a better way to consume a rest
service besides only using raw apache
httpclient or the UL connection is there
any library you would recommend which
helps in you know mapping resources to
to URLs and this kind of stuff so I used
to work on the G native team and you
know like I said I worked with you Nev
back when I was on that team working on
a lot of the api's here at Google and we
spent a lot of time writing client
libraries that were very very tightly
focused on different api's and it did
make things a lot easier to work with by
other hand is a lot of effort to
maintain those and it actually in a lot
of cases I have a lot of complexity I
found and as a result I think pretty
much everyone on the API team actually
you should preferred just to use curl
whenever they were testing something
rather than going through all the half
of the asset effort of trying to set up
a client library okay now that that said
that's not to say that you couldn't
write a very nice clean client library
that's very targeted to a very specific
use case and get really nice results but
I think that the beauty of rest is is
designed to be very easy to use
without a client library so I think
there is there's a case in writing
client libraries in a service by service
basis so say you want to talk to just
pulling an example off the top of my
head say you want to talk to Google
Cloud messaging right it would make
sense to write a Google Cloud messaging
library that knows all the intricacies
of that service and then marshals your
HTTP requests for you and makes
everything very clean you never have to
know the the raw protocol I think that's
that's a valid effort but I think trying
to make a very generic rest client
library you wind up letting something
that looks exactly like an HTTP client
library but more like more more likely
than not adding a lot of complexity on
top of it so I'm not convinced there's a
lot of benefit there if you do have to
know any really good client libraries
for doing this let me know I'd love to
take a look at them because it is
something I've worked on in the past but
nothing I've never found anything I
really like to try to do it I actually
have had some experience with see rests
it's very small library and it mimics
the way jax-rs or Jersey works with
annotations and that was pretty cool but
it's very small and maintained by one
person it's not something to rely on the
approach was pretty cool because you had
only those annotations and everything
else to be nice and I think there is
definitely room for for a for such a
library but I just don't know any which
is suitable well you can get to work on
it
the Google attitude is if you see
something broken you fix it um but I
would google it too and see if there's
somebody out there doing this I mean if
if there is space for it uh maybe
somebody has done it but I tend to agree
with um Trevor that by the time you come
up with something that's general-purpose
enough to address all the different
sorts of things a big you're dealing
with a lot of complexity in trying to
map specific things into a
general-purpose climate right no are you
trying to communicate with your own web
service or someone some other
third-party web service that's asperity
or Dutch it doesn't any rest service
based guy okay the solution that I've
used in the past I wrote an app once
that communicated with like 10 or 11
different web services and the strategy
I have lamented was thing with bugs and
Aspen drawing a client and I would make
a case writers it was written in C sharp
actually well they made a case for the
whole like there's all these c-sharp you
know there's one of those awesome things
for you and but you know they can't
unless you just like you just give us a
client library we'll build awesome
things and make you money here and yeah
a lot of the times it would so I would
definitely don't be afraid just bug
people and say there'll be an android
client okay I'll try thanks for your
question it's a good question thanks
goodbye
anybody else out there okay as far as I
can tell we only have one question left
so um and I think we answered this
already but this is from Minsk oh and
Milford Ohio where do apps get installed
on Android I see a mount a sec on my
Nexus 7 is that where Google Play puts
the apps with device specific encryption
at which the answer was yes yes
yeah okay so I think we've covered that
anybody else out there
now's your chance to jump into the
Hangout and get your question answered
immediately
yes no yes sir ah shoot
hello yeah you know yeah yeah I talked
to you know I try to deliver the work
service was that our web server and I
wonder if we look at those works and
we've asked the Vivian sorry I didn't
get quite that something on a web server
once ever yes
so can you repeat the question please
yes I wonder if we look at those works
with person typically and know that I
try to do local work service and they
did you catch 25 yeah I'm still not
getting it is it possible that you could
type in the the question for us yeah
and bear with us for just a second
no he's typing okay good it's okay we
have we have a couple minutes left
yeah literally a couple minutes
this is where you some theme music you
know like write the jeopardy theme the
Jeopardy thing would be good at or I
think the Jeopardy things it's been done
yeah right Mariama see theme yeah that
would be epic unfortunately if we played
it over YouTube yeah that's the problem
with a lot of those piece yeah we have
to find something that's freeware
yeah I like the music we'll use that
they enjoyed the show yes yes or we can
just accept sponsors if a band wants to
create site playing music we're on a
school and something yeah okay cool I
try to develop a web service whose data
is on a web server and I wonder if local
host was HTTP client okay okay okay so
your so it's a you're basically trying
to develop a web a web app that's
running on the Android device and then
accessing a local server running on the
Android device is that that's correct
okay okay that makes sense so yeah I
think that's actually possible you do
have to request a permission to indicate
that you want to run a server I believe
and then you just go ahead and open up a
local port there's a lot of other cases
where that's actually useful for example
for the longest time that used to be a
recommendation people who are trying to
do something really complicated with
streaming video and you know DRM and
things like that is you know run your
own local server to go and buffer to
either be the video stream to the local
media playback system but I mean in your
case I think that's entirely possible
that being said it is a bit heavy weight
you know you have to go and run your web
server you have to run whatever back in
the language you're using and that's on
top of whatever is gonna be rendered in
the webview so I usually don't recommend
that people take that approach if you're
really gonna do this I'd recommend
writing everything in JavaScript if
possible that's going to be a lot
friendlier both in terms of CPU and
memory usage and you can do pretty much
since you're all interacting locally
anyway there's really no reason why you
couldn't do everything you're doing in
PHP inside of JavaScript and again like
I said a lot of these languages like PHP
or cosine be run on a server where you
have you know gigabytes and gigabytes
and gigabytes of memory available at
your disposal and on a mobile device you
really don't do you
you're you might have you a gig total to
the to everything on the system and as
an application developer you're limited
to you know hundreds of megabytes if not
tens of megabytes so PHP really the
problem there's need to be getting PHP
to fit into memory right that's a good
point it strikes me though that I'm sure
that somebody must have tried to tackle
this before so I'm wondering if looking
through Stack Overflow or even Google
itself would come up maybe with some
solutions for doing that sort of server
running on the device well I'm sure
you've tried but again the problem is
it's not it's not a it's not a good
architecture so I'm sorry you're wasting
CPU memory I'm not saying that that that
running lamp the lamp stack on Android
device but running something that is
tuned specifically for Android that
accomplishes the same net effect
somebody may have come out with us with
a lightweight solution because I agree
with you trying to run the lamp stack in
Android is gonna be a real challenge
yeah I really I think the lightest
weight solution though is just to go and
load the your HTML file from disk and
then yeah
and doing everything probably in
JavaScript is to be your easiest option
and Plus you know JavaScript sort of a
cool language you get a deal with
prototypes and all that fun stuff
definitely pretty different than PHP but
it's a fun language to learn yeah okay
all right I think we're out of time so
we've run over sorry about that but it
was a good question at the end it was a
very good question yeah I actually liked
it um thank you very much for joining us
and we will see you again next week
anything to add I believe next week's
topic is going to be on sensors don't
quote me on that I think it's still
tentative most likely we're going to
have somebody on here who can talk about
sensors but stay tuned to our Google+
page we'll make a formal announcement
let you know if the topic is for sure
as always we broadcast Wednesdays 2 p.m.
Pacific Time feel free to ask us
questions in moderator before the show
or join us live and ask us questions via
hangout all right great
thank you very much for joining us see
everyone</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>