<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Bringing live content to Android TV - Google I/O 2016 | Coder Coacher - Coaching Coders</title><meta content="Bringing live content to Android TV - Google I/O 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Bringing live content to Android TV - Google I/O 2016</b></h2><h5 class="post__date">2016-05-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TsRg0A93FgM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so just for people who queued up in a
line not knowing what session this is
and have never heard about live channels
or android TV at all so what is android
TV it's basically a glow it's a global
TV platform running on pure Android and
actually let me clarify that a little
bit it actually it is just Android we
extend the android framework to support
TV to be a first-class citizen this is
not a bolt-on on top of Android or some
hacky stuff to make it work on the big
screen the core android framework team
extended android to make TV first-class
citizen that's important because all the
android developer tools you know from
developing mobile apps developing tablet
apps may be developing where apps they
all apply to android TV as well it's the
same sdk it's the same development
environment it's all the same it is just
android and then if you if you build an
app on android TV you will have it on
Smart TVs you can see in our sandbox for
example there are so many smart TVs with
android TV built in and we announced on
wednesday a bunch of other partners
these apps are run on pay TV set-top
boxes we have a bunch of partners
internationally pay TV operators cable
satellite who provide this run their
setup box on android TV but also
streaming boxes gaming consoles for
example the Nvidia shield very popular
device you build your app once and it is
it will run on all of these devices and
what what does it actually mean why
should you even interact with that when
we launched Android TV one and a half
years ago we introduced something called
the TV input framework as part of the
Android SDK and the TV input framework
or short tiff brings traditional TV
functionality to end to the Android TV
platform so it allows you to interact
with things like HDMI input if your
device has them it allows you to deal
with stuff like over the air channels
channels in general building a program
guide out of metadata Rick
ordering all these things you know from
any traditional TV device or your DVR
are there in a framework that you can
use as an app developer and to show you
a little bit how that looks like because
it sounds very abstract we do a quick
demo Bernie speaking of storms that were
in Texas those are tracking East moving
through parts of Louisiana p and alabama
for today also florida we actually
running this is the standard retail and
more TV device is actually anivia shield
for those vicinity as well as strong
winds do you want to mention as well
there's high wind warnings can see here
this is HS california regular life tds
you would know it yes it's the program
guides with metadata posters this is
like a CAS with some strong winds
typical he becomes a lot of dust blowing
some bubbles winds but the content
actually in this patient sounds from
space weather so ads are actually
providing these life have emergencies
play movies as a trailer channel as you
you can watch the latest trailers in an
endless channel like or jump if you
think it's interesting severe jumps you
jump into the second reason how do you
rent on the winds and heavy they are
example to Bloomberg the weather channel
for their boring content in a nice
linear format or your device yeah me and
don't let overtime Saturday if it's a
smart TV it works every Saturday risk of
thumb but what is your gangster you
actually can't have these channels as a
girl starts to develop this thing with
all the wheels and just doing channel
optional down the traditional evil deed
I wrote for my guys city where all my
have any party for you to do that wallet
but i would like to reporting in this
weekend strokes while national that's up
to 71 and the ones i have 60 no it's
actually let's see what else you smell
for this time and so weak within the TV
application your saturday as we select
get more channels and you see a
selection of of apps that provide
channels in to your TV guide and so i
just select away I know haystack they
provide a bunch of interesting channel
so let's see let's see what what they
are what they are
providing here so I just very easily
like I would do with any application I
can select and the app and install it
thousand a shipwreck in the rescuing
stranded recipe I Olivia already
notified me hey this number three forty
thousand homes had nobody 11 a nearly
100,000 had no Leah see all the sources
and in this demo heavy just more
than 400,000 south or line of phones are
under a planetary visor in at an
advisory was still in effect for a
monthly or is very uh any number water
and s your education your best we have
just installed waiting to see who else
ten new channels either and number one
an estimated 11 trillion Gallagher water
drenched three all the trees all these
generals life showing up here and you
can tune to them and it's
the injured wats Cleveland Cavaliers was
not your honor crafters anyway ft 9 in
download instrumentals finals to take a
two-game lead in 09 you the Cavs real
doesn't defeat in this I off snaps but
in straight away as we get people coming
only the fourth team in NBA history to
start going back to the slides one thing
I want to clarify is we talked a lot
about live content or linear content
when we talk about a channel that does
not necessarily mean that this content
is actually live as you saw some of the
examples that I just showed it might
actually be if you have content as an
app developer as a content provider that
is on-demand content but you think it
might actually make sense to curate that
into a channel for example you have a
lot of music music videos and you want
to add you want to create the country
music channel or something like that for
whatever reason you would do that you
just you can curate that and provide
that as a channel from your app into
into the into the TV Guide and so live
content can be live but it can also be
curated content just put together into a
linear stream both of these concepts are
interesting for consumers so who can
benefit from that on the one hand i
already mentioned the TV input framework
and the concept of live challenge is
very very much designed for hardware
manufacturers so OMS can actually
integrate physical tuners like satellite
tuners cable tuners we have partners
will actually ship TV sets with a
satellite tuner building and so with the
TV input framework they can integrate
these these Hardware tuners with a
standard API and no matter what they
change underneath the application layer
always stays the same their TV app
always stays the same they don't have to
modify that they just change the
hardware layer under the tuner layer
underneath it but for consumers this is
really interesting because a lot of
consumers I know we hear especially at
i/o we love apps we love to download
apps and use a lot of them
lot of users really like just to sit
down on the sofa flip through the
program guide use channel up channel
down they don't want to jump through
five different apps to get to the one
content they want they actually really
like that the concept of navigation of
approaching content is exactly the same
with every channel no matter where the
channel comes from so we see we see lots
of good feedback on that and also then
Troy in the end for you for app
developers it provides an additional new
entry point to your content like I
mentioned with a play movie trailer
channel as an example this is a live
channel exposed by the Play Movies app
so it just shows trailers but with our
concept of a plinking they have an entry
point the user can click oh I now want
to jump into the app and and rent that
content so that gives you users who are
traditionally maybe not app users who
would not launch a lot of apps that are
just the majority of time sitting in the
program guide using channel up channel
down and that's how they approach
content so for these kind of users this
is a new way you can bring your app your
content to them and we actually we work
with a bunch of partners we had a was
just talking last week with the
developers from the Apple just showed
haystack who are they are exposing with
the last app update they exposed live
channels and they said that within the
first month of them adding the live
channel functionality there it's already
driving over ten percent of watch time
across all users that they have on
Android TV and sixteen percent for new
users so it is definitely a great new
entry point for consumers to consume
that content
also because I get asked a lot of times
Well live channels is good I google
really doing something about that or not
so we are continuously investing into
the TV input framework and the live
channels app we originally started with
Android lollipop when we introduced the
TV input framework in it's very basic
form with marshmallow we did a lot of we
got a lot of feedback from partners and
addressed addressed a lot of smaller
issues under the cover polish we
introduced time-shifting api is already
back in Android M and now with the
upcoming android end we're adding more
features to the TV input framework like
the recording function functionality
that we're application developers can
use TV input framework AP is to manage
their recordings and so also to come
back because a lot of people ask well
especially application developer come
from mobile is is live TV watching it's
like this program guide these channels
that's an old thing right like who does
that anymore so this is an this is from
the last Nielsen report the total
audience report they do once a year this
is from 2015 and it shows even in
households with with connected TVs or
connect or TVs that have devices
connected to the internet so they can
watch could ott content from the
internet the majority of watch time like
really a lot of the watch time is still
traditional live TV so this is a big
audience and we think us application
developer really should capture that
audience and that's why we provide the
TV input framework and also the examples
I showed earlier in the demo are from
the US and these are like single
channels and interest channels exported
by certain apps we also have some some
great examples for example in Europe we
have a partner there's a to who they
offer a whole cable channel lineup over
sotg channels and they have the app
around or more for a while they brought
to android TV and other TV platforms
and they integrated with the TV input
framework so basically you install that
and with your subscription you have all
your cable channels in on your Android
TV device in the live channels app and
as I mentioned before what's really
great is it gives you also the ability
to drive users from the live TV
experience from the live channels
experience into your app you see on the
on the lower side here this is a 2 icon
this is our appt linking functionality
in the live channels app where you can
where the user easily can jump into the
app and get more content for example on
demand archives that your app is
providing or additional functionality
that is not exposed by the lab channels
app but to talk a little bit more about
the actual real stuff the developer
stuff that happens underneath I'm
heading over to Jay hi I'm Jay so you
just heard a lot of good things about
the TV input framework now you might
wonder what exactly is the TV / framer
ok that's what I'm going to explain to
you first let me briefly talk about the
overall architecture of the TV no
framework to help you better understand
the rest of this talk let's start with
the data path when we say data in the TV
framework we're talking about channel
and program metadata that describe TV
channels in program such as channel
numbers cosines channel logos program
titles start and end times of each
program and so on on the top left of the
diagram is the cop is the app called
live channels which is an Android app
that people use every day for watching
live TV we sometimes call it a TV player
app just like media player because it
plays whatever TV content the usual
wants one thing to note here is that the
live channels AB is Google's reference
implementation of TV player and TV OEMs
have freedom to choose their own
implementation just like the dialer app
some phones so the live channels that
doesn't have any actual TV content where
do they come from
they come from the channel apps on the
top right then how is the data past how
does the legend is we know all the
channel and program information it's
easy channel apps put their own channel
and program data into the system
database and the live channels add
reason from there next let's talk about
the control path when the user choose to
channel through the lab she knows ab and
it happens to be one of the channels and
your channel it provides we call you and
say please play channel XYZ and we
expect you to start playback of the live
content of that channel technically we
give you an Ender surface object on
which you can render your video once you
tell us the video is ready we take the
surface and we draw some overlays if
necessary such as channel banner and we
show it to the user that's it simple you
can find the actual AP is included in
the light TV input framework under the
package name enter that media that TV
there are many classes a bunch of
methods callbacks constants and so on
but what should remember as a channel
app developer adjust to each other
classes TV contract and TV preserve TV
and for service TV contra gives the
class that defines channel and program
columns for the system database and the
TV / service is the class that you need
to implement in order to provide TV
channels on Android TV before we talk
about how you can start integrating your
ab with the TV input framework let me
clarify one thing when you look at the
TV and put for among AP is in more
detail you'll be surprised to see there
are just Java interfaces and the
business logic is not actually there oh
let me tell you we're launching the new
TV recording ap is in the TV / frame of
this year and the most questions we get
are like where is the actual
putting happening where do you schedule
recordings where do you handle resource
conflicts something like that the answer
to all of those questions is that it's
in either live channels or individual TV
/ services why is that why did it make
such a decision that's because when you
first designed the framework we really
want it to be flexible in terms of
updating our offering it's easy for app
developers to update things themselves
instead of relying on the system update
by unbundling the business logic from
the end of the platform and putting it
into live channels or delegating to TV
input services we are able to push any
new update at any given any time okay
let's talk about how you can start
integrating with the TV input framework
the first thing you should do is take a
look at the code samples of course we
highly recommend to use Android studio
when you run Android studio at the very
first screen you can import samples you
just type TV and you see two samples we
provide under android TV and the one
with the title sample TV channel lab
using TV input framework that's the one
you need import that sample and you're
ready to go and this is the optimal
development flow we think once you have
the code sample you can start changing
resources such as XML files streams and
images in addition to the package name
yes don't forget to change the package
name you can't be working for the
company named example once you're done
with the resources then you can build a
sample and claim it yours that's it of
course you need to provide detailed
descriptions of your channels programs
including the UI's for your live videos
but you're not even touching the code
it's that simple but maybe there might
be some other reasons that you must
modify the code for example if you just
can you
extra player in the sample for video
playback the you should replace it with
your in-house media playback entry or
maybe you just head out code and going
to rewrite it which is totally normal
then please go ahead and modify the code
lastly if you let it have your Android
TV app then you can simply add the tip
arms TV input service sample here to
your existing app by simply declaring
the service in your Android manifest
file and you're all set so we've just
skimmed through the very basics of the
TV put framework I'll hand over to
Abraham for more technical details and
advanced features thank you ah so far we
covered the background and history of
Android TV live TV live channels and TV
input framework such i gave the
motivations of building such
applications for from the user
developers and hardware developers
hardware i am the original equipment
manufacturers perspectives and Jay gave
in technical overview of the TV infant
framework so now it's time actually
looking at how we implement this live
channel it's really important that you
start with with the sample it's an
actual full application it actually
builds and you can install it on your
device and will start running the moment
you actually click on the live channels
application that happens because you you
define your in your in your in your
application you define in your manifest
you say that I i had this service and
it's going to be read by the live
channels application to show up this
this page here the first time you launch
the library locations paid application
you'll see the available sources in your
device they did by default most of the
the Nexus devices come up with a Google
play's movies and TV application live
channel source the second one is our
rich input which is our
sample once you click on one of them it
runs a special activity that setups are
the necessary metadata that's read by TV
input framework and then you rate your
channel is ready and you will start to
get up and running so this is the
manifest part that you need to add into
your application the important thing is
you you need to create a service that
extends from TV input service you need
to add an intent filter called Android
that media that TV that TV input service
the other information that you need to
provide is this metadata called Android
media that TV that input it's an XML
file and in it you have to tell us you
have to tell the input framework which
activity to run when the user tries to
set up a source if you look at this
sample application the sample activity
here this is really simple there's no UI
involved the only thing that you have is
basically just need to set up the
sources the thing that you need to know
here is TV input framework exposes all
its metadata channel data with a content
provider and as Jay mentioned before TV
contract is a basic database that
contains everything are like poster data
channel information the program
information that you fill in and
basically once you populate those
information you just need to put it into
into the content content provider so if
you look at this file what we did with
what we do is basically content create a
Content values object and and then at
the input ID the name of your channel
the display number then just get the
content resolver and then just push it
in another thing is you don't hate to
have separate applications if you have
multiple channels just like we saw in
the haystack example once you click and
create this activity when it runs you
can just repeat this this thing if you
is how many channels you have and then
all of them will be available to for
viewing for the users of course this
example does not contain any UI but if
you think that you're doing a lot of
processing in this file you can show a
nice logo screen that your use and then
let your users know that where you're
doing something while the channels are
being set up the next thing is the the
life cycle of the TV input service that
you're implementing everything starts
with the launch of live channels
application so the main activities
oncreate method is run and at some point
the onset surface method is called which
sets the surface that your media player
is going to use for showing the dis for
showing the video at some point if there
are already some sources set up it's
going to try to turn to one of those
channels those light blue boxes are the
things that you are responsible for the
first one is the on tune method the on
tune method is where you get the channel
URI that you need to tune to and then
you need to get the channel information
it's just a URI then you need to get
where the video is going to be played
for him if you have any captions what is
the title of the channel you're going to
get it from this database that you're
using can be content provider it can be
some other database or you can just get
it from from from the web then you need
to check if to your program is still
available by available I mean if it's
still available for viewing if the media
is available or it can become it can be
blocked so you you may have some age
restricted content so it is possible
that the media controls parental
controls are set up and it's not really
a suitable for for the user to view if
everything is good then you need to
create your media player object you set
it up with the video link the captions
and tell the media player that this is
the surface that you need to show the
video to and
anh Tuen method will be almost done the
next thing is since you're responsible
is over you need to tell the system what
to do next so we provide in TV input
framework some method that starts some
methods that start with notify so these
some examples are notified video
available for example this you need to
call this when when everything is good
so you have the program everything is
ringing you media players running and
you prepared everything the next thing
is just telling the team you input
framework ok I'm ready just show it to
the user other stuff like H restricted
content was another example you can't
show this to the user so you need to
tell the system that hey my content is
blocked I can't show it to the user
please handle it and you say notify
content blocked TV input framework takes
this command and shows a parental
controls dialogue the block so that the
user can either unlock the screen or
switch to another channel and this is
the life cycle of the live channels of
course there's one more thing the
unreleased method that's where you need
to be a good citizen and clear out any
any resources that you may be using so
this is a sample TV input service
implementation as I told you it's the on
tune method that you need to override
you get the channel you are I get your
source somehow from content provider
database and then the rest is basically
media player specific all right the
sample code that we provide comes with
exoplayer everything is already set up
you can just use this you may you may
choose to use other sources depending on
your content you mean you may actually
ship your own media player then you need
to change this place and set it up
appropriately and once everything is
done you need to call one of the notify
methods so that TV input framer takes
over
this isn't this is the basic things that
you need to get a channel up and running
we actually have more than that we have
advanced features such as the only view
and the app linking card and then now
playing card actually team miles per
hour at cruise animated em 7000 feet
with when something went terribly wrong
the Greek government says military
realmente the plane in a 90-degree turn
to the line will be in flight TV channel
coming down the axon Christ is is an
endless stream of trade island life you
can go go play movie which is Lamar's so
we have lots of others here this is the
so glass which number and this is also
the videos are available in other
servers like we're just we tried to
destroy what is so here is the
we are here that the language the
contents insurance rating of the movie
and the current i prevented from google
Simon you can
and that's that will to make the same
info but here is right post all your
users go watch the movie are they me
they may ask
or you
Markham 299 right with you do embed this
which in the video that's going to
create another car initiative in the
process this video change the fourth and
good together here what if i was using
kind of information on top of the video
knowing I'm hard one of our partners
actually really cleverly they do whether
providers they use this screen to show
the local weather information for user's
location to get the locals pass the
rulers of a main location information
from and rural schools make our and then
Latico put it last up put the next three
days loose with me the information no
matter what they're showing current
deals time the other thing is this
actually happens if I just click on the
center but unless you're tall talked
about this this is the app linking
carter choking it is is actually more
powerful thing because you can do to as
interact with you to your life channels
so it basically gives you as a chance to
run any android intent upon click and
you can also customize dispatch right
you can change the 30 change actually
which was more tenable over here so now
showing the letter
Oh beautiful icon change the water image
well it actually shows information this
is find information to buy this from
google play the whole clique is going to
just take you to the companion
application if i like this movie i said
okay i want to look at the more
information and i want to see what this
is about then i can just hear now buy or
rent and start watching right away so
it's a great place to add interactivity
to your live channels application and
finally we upon click with the at the
home button you can go to Home screen
sometimes you need to do something else
with your TV we by default life channels
come with now playing cards at us and
you can change the logo you can change
the title of this now playing card and
it click takes you back to the live cam
these gentlemen 14 years ago
now let's talk about the implementation
of these adding / navy is quite simple
the only thing that you need to do is
the person that you need to do is
basically in oncreate session you need
to tell Tim input framework that you
your your your session has it overlay
view with set overlay view enabled to
and then you need to all right the
oncreate overlay view you inflate a view
here and just return it if you keep a
handle to the view you can just use this
in the later stages in the throughout
the lifecycle of your service and
dynamically change the information
that's shown on the overlay the other
one is the app linking badge it's
completely in your control you can
change the color you can change the
poster the texts the card color and your
icon and this is really simple you just
need to fill in the app underscore link
columns when you're populating your when
you are setting up your channel and we
will automatically show this app badge
with these with this information and I
told you earlier now playing card is
completely automatic before i finish i
want to talk about how to reach your TV
audience there are two ways of achieving
this the first one is basically using
the google play store it's it's the it's
the default way of getting more channels
more applications for your android
devices and your android TV basically if
you have it application already have an
application just as Jay said just add
this service into your existing
application and update your apk and
that's going to be available in the in
the live channels application to be
downloaded or if you don't have one
create a new listing and upload your apk
and that's going to be available to for
your users to
oh the other way is we've seen this with
lots of our partners they were together
with oems hardware manufacturers like
TVs TV manufacturers of the player
player manufacturers setup box
manufacturers and they bundle their
application would there with their with
the device itself so it creates an out
of bugs experience for those for those
for those devices like you may be the
default weather provider for for this TV
set for example thank you for listening
to us the our talk is over please visit
our sandbox in zone a we want to talk to
you our PM PMS and our engineers want to
talk to you and get your opinion about
Android TV and want to learn about your
use cases we also have resources on web
we have the G+ community at Chico /
android TV dev where you can ask and
answer questions and join the community
we hit training in developer.android.com
/ training for building TV channels and
finally our sample applications also
that github</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>