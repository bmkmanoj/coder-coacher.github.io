<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Google I/O'17: Channel 2 | Coder Coacher - Coaching Coders</title><meta content="Google I/O'17: Channel 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Google I/O'17: Channel 2</b></h2><h5 class="post__date">2017-05-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wppe_zKsLlA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">. Test. This SA
 -- is a caption test. Please 
standby for realtime captions. 
testing a caption test.
 Test. Test is caption. Please 
standby for realtime captions.
 test. see connection going 
false
.
 connector two now. Test. This 
is
 now Good Test. Test.
 Okay. Now it's a.
 logged
 into my connect or
. 







   Â»

test
 is

. Test. a caption test. caption 
want to see if text shows up 
this time. That's. This I am 
still Keep This

test. Please standby for 
realtime captions..
 bit more here. Testing testing.
 This is a caption test. Okay. 
Just a little bit more. There we
 go. Let's see what magic 
happens here. Okay. There. How's
 it look to you? It looks fine 
to me. I don't see any text 
missing.














RAW FILE 
GOOGLE iO 2017
MOUNTAIN VIEW, CALIFORNIA 
Architechture Components - 
Solving the Lifecycle Problem
May 18, 2017
11:30 AM EDT
Stage 2 
Services provided by: 
Caption First, Inc.
          P.O. Box 3066
          Monument, CO 80132
          800-825-5234
          www.captionfirst.com  
***
This text is being provided in a
 realtime format.  Communication
 Access Realtime translation 
(CART) or captioning are 
provided in order to facilitate 
communication accessibility and 
may not be a totally verbatim 
record of the proceedings. 
***                  
 #346D


   Â» SERGEY VASILINETE: Good 
morning, everyone. Probably many
 of you attended yesterday's 
talk where Yigit introduced new
 architecture components. Today 
we will focus on
 architecture.
 We will have more details. If 
you attended yet, it will still 
be interesting.
 Let's see what we have today. 
Today we have a fragment.
 This line has results -- Google
 services ask us to start 
methods. Your own components 
need to know about the sect 
event. So you need to forward 
them in some kind of API. And 
correspondingly, onStop, you 
have to have varying stop 
methods, and it's easy to forget
 one.
 It will drain a user's battery.

different things. Let's see what
 I mean. We are completely 
associated in initialized state.
 And all creation phase is in 
there. On
 DSH create, it is on -- pause.

 -- pause. Last event is on_
destroy. It brings it to destroy
 state. I will be thrown away in
 garbage collector. So let's 
make our component lifecycle 
there.
 We add adaptation. And events 
that we are interested in. You 
can parse multiple LIPs if you 
want to. One step is to add 
ourselves as an observer. And we
 may have potential problem here
. What if activity is already 
started at this point? Does this
 mean that we are going to 
receive on_stop event and we 
didn't receive on_start and our 
program is not ready for this. 
We bring a server to the correct
 state. What does this mean? Let
's take this example and discuss
 it.
 Perspective on_start and on_
create already happened and 
after that we add an observer. 
But observer will still receive 
on_create and on_start events. 
So let's take, like one step 
further, on_resume. Resume state
, we bring to resume state, we 
have on_resume event. 
    On_pause. And in this, we 
are in a started state as well, 
as we learned. So we bring 
observer to the current state. 
We should start it in a similar 
station as we had a moment ago. 
Observer will receive on_create 
and on_start events and that's 
it. So we don't have a problem 
here. So how to get this magical
 lifecycle object? We have this 
interface is super simple, but 
this probably doesn't help much 
right now.
 This is unfortunately true only
 in bright future, and right now
 we 
have life cycle activity and 
fragment. At the point of 
release, we will merge our 
library to support library, so 
you don't have to use them later
. 
    Now Adam will speak about 
some key differences between 
fragment and lifecycle observers
. 
   Â» ADAM POWELL: So if you have
 been following along, you 
probably recognized some 
similarities. At this point 
we've got these two different 
components. Which one do you use
? As the slides are already 
spoiling for you, this is not an
 either/or question. One does 
not necessarily replace the 
other and here's why. Fragments,
 on the one hand, everybody 
knows and loves. They are state
fully managed and recreated 
after a process death, an 
activity recreation or creation 
of any activity that you host a 
fragment within. They are things
 that are firmly out of scope of
 what life cycle observers are 
meant to do. Instead they are 
meant to enable more granular 
factoring of your code. They are
 stateless. So that means they 
must be registered each time the
 owner is recreated.  We're not 
going to try to recreate these 
magically for you. These are 
meant to be very, very 
lightweight.
 And there's no navigation to 
the viewer or navigation 
management. It is much simpler 
to integrate libraries which are
 code, as long as they have 
provided lifecycle aware 
components.  You can break up 
the large fragment or activity 
classes to make it simpler to 
understand for our reader and 
provide much more granular 
guarantees around what 
operations are valid at any 
given point in time. If an 
operation happens, then you're 
guaranteed to be in a correct 
state when something is called. 
    So, lifecycle owner as 
already introduced is just an 
interface.  Anyone can implement
 this. You can improve 
testability by creating your own
. You can create your own 
fragment-like library 
implementations and KPOZ its as 
well. So you can answer 
questions like, Is my app 
visible? This is a common 
question that many of you might 
be interested in. It lets you do
 things like session management.
 It can track across some sort 
of a flow or logged in versus 
logged out events and may help 
you with analytics as well. 
    So we have the process lifel
ifecycleowner as a component 
that I think a lot of you will 
be interested in for this. It's 
all the activities in your app, 
so there's no configuration 
changes to handle because we 
won't be dealing with those from
 the process life cycle owner 
stays alive through the whole 
process. And you don't need 
state restoration after process 
death like mentioned earlier. 
You don't have to handle saving 
and restoring that state, but at
 the same time, you need to 
remember to reregister the base 
observers if that's something 
that you're working with. 
    So, many Android components 
provide a lot of deep plumbing 
layers for things that you can 
plug into and work with, but a 
lot of times we've kind of 
omitted the idea of higher level
 components that make use of 
that plumbing so that you can 
just plug, play, and go. So I 
mean do we have anything more 
high level? 
   Â» YIGIT BOYAR: We do. Let me 
show you. 
   Â» ADAM POWELL: Great. 
   Â» YIGIT BOYAR: Thanks, Adam. 
It's so nice that you can 
observe a lifecycle, it is 
verified as a first-class 
citizen, but you still need to 
deal with the states.  And we 
thought, okay, there is some 
common life cycle problems that 
we should be able to solve with 
this. So we look at the problems
 that people are having. This 
was probably the most major 
problem that we are seeing. The 
untimely UI updates.  When the 
activity receives a call back, 
but they have started to start a
 new activity and crashes or 
starts a fragment and crashes. 
If an activity or fragment is 
stopped, there is no reason to 
update that activity right? You 
don't want to do that. If the 
activity happens to become 
visible again, then you want to 
do it. We realize this is a 
really common problem, and we 
wanted to solve this with a 
higher level component which we 
call live data. If we look at it
 in detail, essentially it is an
 observer data holder. It holds 
on to some information that you 
can observe. The difference 
between live data and your 
observer or whatever is that 
live data is lifecycle aware. It
 knows about lifecycles, and 
when you want to observe, you 
can patch in this lifecycle so 
it can manage your substation. 
You observe and that's all you 
do with livedata. So you look at
 the user example, let's say we 
have an activity. We receive 
data from someone that doesn't 
really matter and we call 
observe. We are passing this, 
which is the life cycle owner. 
That's all you need to say. I 
want to observe this live data 
within this life cycle, which 
also means if this life cycle is
 gone, I don't want to observe 
it. Or if this life cycle is 
stopped, I don't want to get it 
elsewhere. 
    That's all you do. You don't
 need to write on_start on_
stop. 
    As soon as activity starts, 
it start receiving data changes.
 So whenever the live data 
changes, this goes back to the 
observer inside the activity. It
 can also be a fragment. Let's 
say user decides to rotate the 
activity to a small one, so you 
know the activity will be 
stopped. And what happens at the
 same time the livedata happens 
to be updated? If that happens, 
we are not going to tell the 
activity about this change, 
because there cannot be any 
reason for you to update the UI 
because it's already stopped.

 destroyed, we will automatly 
mod
      ically modify the 
subscription. We know that 
Android will re create the 
activity. We are observing the 
same LiveData back. So your UI 
is going to have the data before
 it gets a chance to draw it. So
 similarly, a user needs to 
unbutton, which means the 
activity will be stopped. If the
 LiveData changes while the 
activity is stopped, it will not
 receive any changes. If the 
data changes, we are not going 
to tell it. As soon as the user 
commits to the application, we 
will give it the last available 
data. LiveData is not just a 
stream of events, but if any 
observer comes, it receives the 
last available value. 
    And eventually the user 
backs out of that activity and 
we remove that subscription. You
 can also extend the live data 
class, because live data 
provides two really handy call 
backs. The first one is called 
on_active, which means you have 
an active observer. The other is
 called inactive. That means you
 don't have observers so don't 
change your router if it's 
something you care about. 
    You probably ask now, what 
is an active observer? Active 
observer whose lifecycle is 
started or resumed. Your 
fragment is currently visible to
 the user. If it's on the back 
stack, the user is not seeing it
. It's stopped, so it's not 
active. No reason to do any work
 on that fragment. We will see 
how we take advantage of these 
main call-backs.  We will create
 the location main live data 
class, which represents the 
location on the device. So we 
say this data holds an instance 
of a location.
 There's nothing fancy here. And
 we have a licenser. Whenever 
the system server sends us a new
 location, we just call send_v
alue on this. There is no life
cycle handling here. LiveData 
handles this. You can have any 
number of observers. It doesn't 
really matter. So the very first
 active observer comes and we 
want to start listening to the 
system service.  Similarly,
 when the last one goes away, we
 want to stop observing the 
system service. 
    Now if you look at that 
location of LiveData, let's look
 at the properties of that. 
First of all, it is lifecycle a
ware. It knows when to stop and 
start itself. You don't need to 
baby sit it anymore. It is self-
sufficient. Like you start it, 
you forget about it. It can be a
 signal to all of the 
subscriptions that are 
automatically managed for you.
 If you are using LiveData, it 
is yes yes, because we manage it
 for you. If you just need an 
instance of it but you already 
have the value, you can use this
 mutable live data plus which 
comes inside the library that 
has a public setter. Usually 
when using this class, 
internally you will have it, but
 the value will just return a 
live data because you don't want
 TOEX  -- to expose that fact. 
    When we were designing these
 life cycle components, the Live
Data, we spent a lot of time to 
get rid of one exception. This 
fragment exception -- 
[ Applause ] 

please, no more fragment 
exceptions. If you receive them,
 you can run a fragment trans
section. To see how we are 
making it part of the history, I
 will give it back to Adam to 
explain it to us. 
   Â» ADAM POWELL: All right. So 
anyone who has received one of 
these exceptions realizes that 
it doesn't just come from trying
 to do something when you are 
just completely stopped and you 
absolutely know it. They tend to
 happen when you get into very 
inTRI Kate nested lifecycles. So
 we wanted to be thoughtful 
about how the callbacks are 
invoked and when. 
    So in a case like this, what
 happens? You have defined 
handler for the stop event. So 
in the container, your activity 
on stop, you want to make sure 
you don't get an on_change after
 the on_stop has happened. But 
in order for that to happen, 
what needs to be true about when
 we actually invoke all of the 
on_stop listeners that are 
attached to the observers? So we
 have to define a really strict 
order for this. As we go through
 create and start and on_resume,
 we know that we need to invoke 
the lifecycle observers after 
the container event happens. So 
you know in your observer that 
everything about your lifecycle 
owner has been configured: If 
you check the state about it, 
you know that you're already 
completely in that state. But 
that means something really 
special for coming back down the
 other direction. It means when 
any activity starts to become 
paused, you want your lifecycle 
on receiverer -- observers to be
 able to shut down before the 
work happens to become paused. 
Similar for stop. This is where 
it becomes really important for 
the transaction ENGS ception. 
You want to make sure that 
you're recording that you're 
fully stop ed
. 
    So what that means is that 
the stop event of your lifecycle
 observer will always be invoked
 before the activity on_stop or 
before the full stop event for 
your container happens. So this 
seems really similar to some 
other libraries that some people
 may have seen in the past. Can 
you talk about that? 
   Â» SERGEY VASILINETE: Yes.  So
 when we create new observable 
pattern, nowadays this question 
is unavoidable. Is it another 
java?
 Especially when it comes to 
relationship between your UI and
 the state. They want you to 
react on the changes of the 
state.
 It's a life cycle away out of 
the box as Yigit mentioned, and 
it's much easier. As many of you
 may know, learning curve of Rx 
java is super steep. If you have
 an Android learning curve, and 
after we add RX Java learning 
curve on top of this, it becomes
 very hard for new people to 
start to develop on our platform
. So we just can't just say to 
them, like, oh, let's go. Just 
learn this. That's it. No. 
    But if you already learned R
x Java, we don't expect you to 
migrate from it to our solution,
 because you already passed this
 learning curve. You and your 
co-workers are comfortable with 
it, fine. We are totally fine 
with this. But one thing we ask 
you to do is to be sure that you
 manage lifecycle. Rx Java has 
common approaches to solve this.
 Everything will be fine. But 
when you start
 a new app, we think this is the
 best. The best is to start a 
project with a LiveData because 
it's simpler, faster, 
lightweight, well integrated 
into the framework. And if you 
feel like you are programming a 
lot, you want to bring it not 
only to relation between UI and 
the state, you want to bring it 
to business parts of your 
application. Then you may 
consider addition al Rx Java 
because it gives you more power.
 It will help you to do it. We 
have this extension to our 
library, which gives the ability
 to create LiveData from 
Publisher and create from Live
Data. The integration should be 
quite smooth. 
    But I want to highlight key 
differences between Rx Java and 
live data. As already said, live
 data is a holder, not a stream.
 We haven't referenced to the 
last value, and observers 
immediately receive the last 
value when they start to observe
 LAIFData. A big difference is 
our threading portal. It is 
extremely powerful, but most 
probably don't need it. And we 
have everything on the main 
thread. And the reason for this 
is we want to give you all of 
these guarantees about when we 
notify about state changes. And 
we can't do this on a background
 thread. We have just one 
exception. We have a post value,
 which is a method which 
developed from a background 
thread to the main thread and 
set it there. Super simple. 
    A quick summary. Lifecycle 
events, observable pattern which
 respects these events. LiveData
 is one thing that is not 
covered yet.  And this is how to
 handle configuration change. In
 2017, almost nine years after 
Android was first time released,
 we still discuss this question.
 It is a loaded question, and we
 hear it constantly from new 
Android developers.  Many of you
 probably know what's the deal 
with it. But let's look at this 
oversimplified example but still
 very vivid. 
    So you want to show this 
information about user 
activities, and you want to make
 some web service request. You 
will use life data to get this 
result. It's super simple. When 
request was started. Request 
response is received, and we put
 this into live data as a value.
 It will notify activity and it 
will do everything it needs. So 
what happens if activity is 
updated? We're going to make it 
compliant. And I hope that you 
don't call web service right 
into your activity, but you 
probably have some abstraction s
 that is something like that.
 Maybe goes to caching and 
persistent storages.  All of 
these are by nature. So -- you 
probably don't want to make 
these calls twice.
 And one of the ways today to do
 this? What are they? One of the
 proposed way is a fragment in 
that instance.
 People will go nuts.
 Another possible way to solve 
this is with loaders and we 
decided to tackle it one against
 and create ViewModel.
 It is associated with a 
fragment or activity but is 
retained across configuration 
changes. What does this mean? 
Let's see. You can predict the 
future. We know that activity is
 going to be created.
 During call create, we will 
request for the first time. We 
will create it. And after that, 
this uses this view model. 
Pretty simple. Predicted 
activity is going to be rotated.
 Let's see what is going to 
happen with our view model. It 
will receive events.
 On_pause, on_stop, on_destroy. 
It's created, and then stopped 
and destroyed, the new model 
survives it. This was created in
 place of the old one uses the 
same old objects so you can 
easily cache there LiveData or 
something else. 
    The last case, what is going
 to happen if you have a finish 
call? Once again, we will 
receive the distraction events, 
but this time, available here.
 If you have any currently 
running actions or any resources
, it's time to close.
 At the point your activity is 
destroyed, it's
 not going to be recreated again
, the model is gone as well. So 
let's quickly make our sample in
 the model.
 So we have initiation of a view
 model class.  We want to cache 
the user data. It says it's live
 data. And finally, it is 
extreme ly straightforward. If 
we already requested it, we use 
it. If it is no, reflected from 
the web service, it returns it. 
Fine. We have this. Now we need 
to get this to the view model. 
So get it, we need to get the 
view model somehow. Let's take a
 precise look on it.
 This is a object associated 
with a fragment or activity. It 
knows how to get existing view 
model from it or how to create a
 new one if there is no existing
 model. 
    After that, we request our 
my activity Model, and later, 
this is quite simple. We get 
user data, we observe it to up
date the UI. Fine. So what are 
the rules of ViewModel? So,
 it manages the data for the UI.
 It means that it speaks to the 
business parts of your 
application to retrieve the data
. It may be a pattern or DMI 
other use.
 It will speak about this a bit 
later. Prior to this, things 
that you must

          other use. It will 
speak about this a bit later. 
Prior to this, things that you 
must access views. And other UI 
related instances. The reason 
for that? If you try to use them
, you will have stale data. It's
 going to finish bad. And it
's fragment or activity's job to
 bind the data which you will 
get from a view model with 
actual UI text use buttons and I
 don't know what else.  
    One more thing, there are 
resources which sound more 
harmless like strings or 
drawable. And you may think I 
may cache it here? No. They 
depend on current integration 
state as well. So yes, right now
 you may have one resource for 
every configuration, but you add
 the same resource for different
 configuration and you will 
easily forget the updated view 
model. And you may not notice 
this. But your users will see 
embedded UI. This is just ugly. 
    Now Yigit will speak about 
interfragment communications. 
   Â» YIGIT BOYAR: I wanted to 
talk about one of my favorite 
features about ViewModel, which 
is communicating between 
multiple fragments of the same 
activity. It's the Gmail on the 
tablet where on the left side 
you pick an e-mail and on the 
right side it shows the contents
 of the G mail. Usually you 
implement this as a fragmental U
I which picks something from the
 list and another fragment on 
the right which shows how they 
show the contents of an e-mail 
so that if you're on the phone, 
you can reuse the same fragments
 but separate from each other. 
If you ever try to write a UI 
like this, have you ever tried 
to make these talk to each other
? It's a pain in the neck and 
very, very hard. Like you need 
to create an interface but what 
if one fragment gets created 
before the other one and the 
activity needs to talk to each 
other?

fragments want to talk about 
selected data. This is the 
information they want to share, 
so let's put it inside the view 
model and we will call this the 
shared view model. You have a 
call selection, and it provides 
two very simple APIs.
 Very simple. Once we have this,
 let's make the fragments and 
see how we can use this.

of the fragment. But the view 
model not from this fragment, 
but we want it from our activity
. So we have to get it from 
activity. Now it's going to 
return your view model in the 
activity.
 So get the selected e-mails, 
start observing on it. Similarly
, the selector fragment, the one
 on the left when a user picks 
an e-mail, we get the same view 
model, and when the user selects
 an e-mail from the list, we 
call the view models related 
matter to change the selected 
e-mail. These two fragments 
talking to each other without 
actually talking to each other, 
how does it happen?

are on the call,
 there is no room for error.
 These are things that work 
together. It shows how to use 
these things together to write 
better applications.
 Thank you. 
[ Applause ] 
   Â» YIGIT BOYAR: We have like 
four minutes for questions. If 
you have questions, there are 
two mics in the corridors.
 Please use the mics.

. 
   Â» ADAM POWELL: Generally the 
pat THAERN you want to follow is
 if you are accepting a context,
 what you want to do is is make 
sure you call get application 
context.

 that you want to follow is if 
you are accepting a context, 
what you want to do is is make 
sure you call get application 
context. 
   Â» PARTICIPANT: [ Off mic ]. 
   Â» ADAM POWELL: We covered a 
few best practices.  You want to
 make sure you keep the activity
 context away from your view 
models in particular. Anything 
to add to that? 
   Â» PARTICIPANT: Thanks.

. 
   Â» YIGIT BOYAR: With life
psyching, you just implement 
this interface, and we take care
 of what you ask for you. 
   Â» PARTICIPANT: Thanks.

                                                cycle,
 you just implement this 
interface, and we take care of 
what you ask for you. 
   Â» PARTICIPANT: Thanks. 
   Â» PARTICIPANT: [ Off mic ]
. 
   Â» SERGEY VASILINETE: [ 
INDISCERNIBLE ]
. 
    It is simplified models is 
way more simple to use this. 
   Â» PARTICIPANT: [ Off mic ]
. 
   Â» ADAM POWELL: We've got time
 for one more and then we'll be 
in the sandbox afterwards. 
   Â» PARTICIPANT: [ Off mic ]
. 
   Â» ADAM POWELL: That may be a 
very large dataset. 
   Â» YIGIT BOYAR: It depends on 
your use case. If you loaded it,
 just want to keep big memory 
anyways. If that is what you 
want. It truly depends. It has 
nothing to do with the lifedata 
itself.
 It...

something that looks like a 
cursor or window, we will use 
that. We'll be in the sandbox 
after this. Thank you very much 
for coming. 
   Â» YIGIT BOYAR: Thank you. 
[ Applause ] 
    [ Session concluded at 12:10
 p.m. EDT ]. 













GOOGLE iO 2017
MOUNTAIN VIEW, CALIFORNIA 
Best Practices to Slim Down Your
 App Size
May 18, 2017
9:30 am PDT
Stage 2  
Services provided by: 
Caption First, Inc.
P.O. Box 3066
Monument, CO 80132
800-825-5234
www.captionfirst.com 
***
This text is being provided in a
 realtime format.  Communication
 Access Realtime translation 
(CART) or captioning are 
provided in order to facilitate 
communication accessibility and 
may not be a totally verbatim 
record of the proceedings. 
***                   

, everyone.  If you're wondering
, I do work on Android text and 
fonts, and yes, fonts is my real
 last name. With that out of the
 way, let's begin. So today we 
want to cover a few things.  
First we want to convey how we 
think about APK stats and a -- A
PK size and metrics that we 
think you should think about. As
 well as show you a number of 
new tools and features that we 
are going to introduce this week
 that will also help you keep 
your APK size down. So let's get
 started. 
    One of the things you'll see
 today is we have a diverse 
group of people from Google. 
People from the Android people, 
from the tools team, from the 
play team, internal developers 
at Google. With really think 
that APK size is super important
 and something that we see as 
something you have to take care 
of from the design stage, the 
time you build your app, the 
time you publish, and the time 
the app gets delivered to a 
device. Let me tell you a little
 about the two dimensions that 
we think are important for APK 
size. First is the download size
. This is the size of the 
application when it's in the 
play store and it gets delivered
 to the device. This is highly 
compressed and we'll tell you 
how we do that. That allows us 
to save size on the wire and 
user's data. Download size is 
pretty small. There is another 
concept that is important, which
 is installed size. That is what
 happens when you actually 
download the app, unpack it, and
 compile it and optimize it. 
Which expands the application 
significantly, yielding a 
download size that is sometimes 
two to three times bigger than 
the download size, so it's 
something to think about. What 
is the footprint of your 
application once it's installed 
on the device.
 This is something really 
important because what happens 
is when a user goes and install 
an app, they will see the 
loading bar and see the actual 
size of the application.  The 
larger the app, the more user 
regret that happens. And a lot 
of people will go and actually 
back out of it and cancel. So 
what we see is up to 20% of 
downloads fail or get canceled 
rather, when applications are 
over 100mb. So you want to keep 
the download size small to en
sure you get as much 
distribution for your app as 
possible. 
    The other to think about is 
install size. That has a similar
 phenomenon, right?
 They're going to go hunting if 
they need to download something 
once it's full. The play store 
will suggest that they remove 
some applications and they give 
them a list of suggestions.
 So this is really going to hurt
 your reengagement if your app 
is more likely to get un
installed. So I hope I have 
given you a little motivation to
 think twice maybe three size 
about your APK size, go back and
 think about what you can do. 
What we want to show you today 
is a number of ways you can 
follow to reduce that APK size. 
 Some will be existing practices
 that have been out there for a 
while. We hope to summarize and 
make it compact for you. Others 
are new and we're going to show 
you those. Let's roll up our 
sleeves.  We will be working 
with the Topeka app.
 This is a good opportunity to 
tackle DEX code and make it 
smaller. In a typical production
 app, you will have shared 
objects but this doesn't happen 
with Topeka. At this point, I 
would like to hand it over to Sh
ai. Hopefully you will see that 
it's not too difficult and 
something you can do with your 
app.

Fonts.  Here we have our app 
built and running. I can press 
build APK to get an APK and 
press analyze APK to crack it 
open and see what it's made of. 
I already have it open here. It
's a glorified zip file. Here we
 can see all of these con P 
tents.  We can BRAUZ  -- browse 
through the resources folder to 
see all of the large drawables 
that really dominate the most 
bites in our app. We can look at
 class s.decks and see all the 
code for our app.
 We can look inside resources 
and see the translatable strings
 and styles and extensions and 
resources that end up in 
resources. We can look at the 
Android manifest and deKOID app.
 There are two columns with size
 information. First is raw. This
 is how every particular item 
contributes to size. The second 
is download size, which better 
represents how much bytes the 
user will actually have to 
download from Play in order to 
install your app for the first 
time. You'll see, for instance, 
that for resources, these 
numbers aren't very far apart 
because resources are dominated 
by large PNGs we have for 
drawables.  Those don't benefit 
from further compression. 
Whereas for some other items, en
tropy is typically lower so the 
gains from compression are 
higher. 
    We're going to show you a 
bunch of tricks you can use for 
this particular app, which we're
 going to use right now on stage
. And we're going to show you 
the impact on the app size. For 
your own app, your mileage may 
vary. Rather than memorizing 
these particular steps, if there
's one lesson that you should 
take home from this talk, it's 
that optimizing your app size 
begins with finding out what's 
in it and tailoring to that. All
 right? 
    First step is to use pro 
guard. It's a whole program java
 optimizer.
 It optimizes your code in ways 
that don't change functionality 
but do change things to make 
them more exact. It will 
optimize some spots in your code
. It will obfuscates names o6 
types, methods and fields where 
the original name doesn't matter
 so that long names are replaced
 with short strings like a and b
 for efficiency. I know we like 
to give java classes long names 
in our packages, but it 
shouldn't get in the way of 
efficiency. And the last is dead
 code elimination. Pay attention
. Think of this as a graph of 
classes of methods and fields 
and modes.
 If these classes are in your 
app manifest, then the platform 
can call into them, so the 
program marks them as live 
because this code can execute at
 run time, right? It then 
propagates via references so it
's a free exploration algorithm,
 and anything that is reachable 
is considered live. Then 
whatever quote remains a 
compliment to that is presumed 
dead and will be deleted unless 
you specify otherwise. This is 
important to be aware of. So let
's look at the in path to that. 
Here is what happens when you 
run Proguard on Topeka. Most of 
the code is now gone. If I look 
at the support library here, I 
see that it's considerably 
smaller than it was before. We 
can also get the results using 
the APK analyzer. We can compare
 one APK with another. Here we 
have numbers in raw APK size and
 over in the charts on the 
slides I have it as download 
size. I thought you'd appreciate
 that. If you look closely 
inside the Dex file, most of the
 source code is gone and most of
 the rest is obfuscated. Why is 
this happening? Proguard allows 
you to choose what libraries you
 want to use without having to 
worry about stuff in the 
libraries that you don't need 
and how it might affect your 
load size. We're using support 
library 4 and 7 and 
notifications and design and all
 kinds of assets. We're only 
using the subset of the support 
library so everything we're not 
using gets torn away at build 
time and eliminated. Some of you
 might be thinking this is nice.
 It's a nice benefit, but the 
optimizations make debugging 
more difficult. Hold that 
thought until the next demo. 
    What we've done for code we 
can do for resources as well. 
Resource shrinking extends dead 
code to resources. Drawables 
whose references are reachable 
from live code are kept in your 
APK and everything else is 
deleted. 
    Now our app is almost 4X 
small er. And this is no mistake
. All we've done is tweaked two 
lines of Gradle, but what we get
 is once again, things that go 
into the transtive closure of 
dependencies of our app but not 
actually useful to the app. This
 is due to features included in 
our dependencies that we don't 
need.  The support libraries in 
this case contain a lot of de
sign assets that we could use, 
but Topeka isn't, so we make the
 deadweight go away. But we can 
do even better. 
    So if you recall, we saw 
that in the resource folder when
 we were looking at the APK 
analyzer, we saw drawables for 
different screen densities. What
's going on? The Android eco-
system is diverse for different 
displays and different CPU types
 and other things.  By default, 
when you build an APK with all 
the material to service as many 
devices as possible, it's 
universal APK but it's larger 
than what you need on each 
particular device.  Each 
specific device will only use 
its particular code. Fortunately
, you can split your build a
cross these dimensions and then 
upload multiple APKs to Play, 
each one tailored to a 
particular device type. 
    Here we intentionally look 
at the APK build for XXHDPI for 
density screens which contains 
the largest PNGs because this is
 the largest APK that we were 
building for this app in this 
example. The difference is 
significant even when comparing 
the universal APK to the largest
 split that we have. And the 
difference is more pronounce ed 
for each one. 
    Speaking of PNGs and 
densities, we can do better with
 vector drawables.  Tell them, 
Gus. 
   Â» AGUSTIN FONTS: We just saw 
that there is a way to deliver a
 smaller app by chunking it up. 
That's a great benefit to APK 
size, but it does come at a cost
, and that might be something 
that you're not quite ready to 
get into. So there's an initial 
approach that you can follow to 
reduce the amount of size that 
you carry with your assets and 
that's use vector drawables. 
Vector drawables would basically
 start with a vector inside your
 application with a single asset
 that can serve up all of your 
densities. The vector drawable 
is smaller than the smallest 
density PNG, so it's quite nice.
 This is a medium complexity 
vector with somewhat complex 
paths but not necessarily grate 
YENTs and things like that. The 
thing that makes it useable and 
exciting today is in support 
library 23.2, we introduced 
support backwards compatible all
 the way back to 14. And also 
with introduced gradient support
, so hopefully that gives you a 
wider range of things you can do
 with vectors.  One thing to 
keep in mind with vectors is 
that they can increase your RAM 
and CPU load, especially when 
you first start up the 
application.  If you have an app
 that is a series of assets that
 are pretty complex, you want to
 do a performance test and Mick 
 -- make sure you're not 
sacrifice ing performance in ex
change for smaller app size. 
    Let's look at the savings. 
It's all flat images with 
relatively low complexity, we 
see that Vector Drawables is a 
little better than multiple APK,
 which makes sense.  Our advice 
would be that you consider what 
kind of image assets are in the 
applications.  If they're 
relatively simple and flat, you 
should consider it. And that 
also simplifies your build and Q
A process. 
    So let me hand it back to Sh
ai for one more best practice. 
   Â» SHAI BARAK: Awesome, thanks
. Finally we're going to see a 
specialized trick for resources.
arc. So Topeka's ARC file is 
small, but we will make it 2X 
smaller with one line, because 
we can.

 arsc file and view all the 
string translations and also 
live on stage. Now you'll notice
 that some strings only appear 
in English. For instance, there
's going to be sign in here and 
sign-out. But other strings have
 as many as 82 translations for 
them. Why is this happening? So 
the support library folks went 
out of their way to localize 
their strings and kudos to them 
because this is the right thing 
for a library to do. A lot of 
apps go to similar lengths to 
translate their own strings and 
you want the libraries to line 
up so that the app isn't half 
translated right? Not the case 
with Topeka. It didn't bother 
with anything but English.  
Translating your app is a good 
way to reach out to more users, 
and we absolutely encourage that
. Google translates all apps to 
as many languages as this. But a
 half translated app can make a 
poor user experience.  
    What's worse is these empty 
spaces use up bytes in our arsc 
file. So what are we going to do
? We're going to get rid of them
. We can fix all of this by 
simply stating that we only want
 to retain English strings and 
then all the half translations 
just disappear. So I know this 
is hard to see the difference, 
but if you look under your seats
, you will find a pair of 
binoculars each. Made you look. 
As promised, arsc is now 2X 
smaller, although in the big 
picture it doesn't do much since
 it was small to begin with. I 
have seen real apps that are 40%
 arsc. Once again your mileage 
may vary. Now
 Topeka is 5X smaller and it's 
not even 10 a.m. 
[ Applause ] 
   Â» CLARA BAYARRI: Hi. I'm the 
tech lead on the Android tool 
kit team and I work on fonts.
 Fonts are a source for apps. 
They're heavy and stuck into 
your app and you need them and 
you need them for your UX. That
's fine.  We figured out that 
most fonts that are bundling in 
your apps are not even optimized
 for mobile. Half of that is not
 even something we're going to 
use in Android. So that's a 
shame.
 And the top 25 apps that bundle
 fonts are
 500kb.
 There you go. Can we go back 
please? There you go. Fonts 
provider is a separate app that 
is not yours that is its own 
mission is to fetch fonts, cache
 them, and serve them when 
needed. The way this works is 
all apps can context the font 
provider. These are available in
 Android O and in support 
library 26
. We have one copy of the font 
that they are using at one time.
 We save memory because we're 
only loading font once and 
sharing that memory between apps
. They don't have to bundle the 
fonts and we have one copy. 
We're saving the space for the 
user because all of your apps 
are smaller and we're also 
saving network.
 This is available in support 
library today, and I'm proud to 
announce our font provider is 
available, great collaboration 
done with the Google fonts team.
 The Google fonts catalog is 800
 fonts, available for you to use
, free from APK size. There is a
 tiny caveat. It is currently in
 beta.
 Now I want to hand it over to W
ojtek. 
   Â» WOJTEK KALICINSKI: Hi, 
everyone. I'm a developer 
advocate
 I want to walk you through some
 of the new tools to help you 
keep your APK size down. The 
fonts are a great way to make 
your apps look pretty without 
adding the bloat to your APK. 
Let me show you how easy it is. 
Are we on demo? Yes. Here I
 have open one of the layout 
files from the Topeka app. If I 
click on the TEKTS view, I can 
actually go and change the fonts
 on the layout inspector. I 
scroll down and select more 
fonts, there is a new picker in 
Android studio 3.0 that we 
announce ed yesterday.  If I 
just choose one, here I can 
select the downloadable font. So
 if I press okay, I can see the 
font immediately change in the 
preview, which I would if the 
font were downloaded.
 Can we switch back to slides 
please? So that's one thing. 
When we're on the topic of 
resources, we are also making 
changes to APT, Android asset 
packaging tool.

different colors or different 
styles for the different 
versions of the platform. That 
also happens in the support 
library, which you normally 
bring into your apps. But as you
 develop your app and time 
passes, you normally start 
raising your SDK version and 
restricting versions that your 
Android apps run on. These 
resources still remain 
especialry if if they come from 
external dependencies. So they 
take up unnecessary space in 
your APK. With AAPT2, it can 
figure it out and get rid of the
 resources that are unneeded and
 can collapse the configurations
 in your app to reduce the size 
of the resources file even 
further. 
    Next up, we have resource
 deed implications. I'm showing 
you resources. Translations.  In
 some configurations, in French 
and French Canadian, mostly the 
translations will be the same. 
Most of the words are exactly 
the same except for just a few. 
It doesn't make sense to 
actually keep these duplicate 
resources in the resources file,
 so what this will do now is 
find the duplicate resources, 
get rid of them and let the 
system default to the default 
configuration. So this is 
version CLAPGSing and resource 
deduplication. It does a couple 
more internal things. It starts 
using UTF8.
 This is the part that reduces 
the size of images by optimizing
 them. If you find that your 
images are already preoptimized 
and the output would be bigger, 
then it just uses the smaller 
versions.

this one line I encourage you to
 try it and reduce the size of 
your ADK without doing anything.
 You don't have to change a 
single line of code. But 
sometimes that's not enough. 
Sometimes you actually want to 
go in and inspect and change 
things in your app and you need 
tools to help you make decisions
 of where to actually go and 
make the optimizations. Like Sha
i mentioned before, one of the 
biggest changes you can make to 
your app is enable proguard to 
shrink away code and resources. 
But when talking to developers 
at conferences like this, I 
often hear that it's difficult 
to debug build and runtime 
problems that can stem from code
 in your apps and developers 
were lacking tools. That's why 
we're making improvements to the
 analyzer in Android studio. Let
 me show you an example. Can we 
switch to the demo please? 
    So here we have Android 
studio 3 running on my machine. 
One of the first things -- sorry
. I'm going to walk you through 
a few things that we're adding 
to let you better debug problems
, but we've also added tweaks to
 the APK analyzer that hopefully
 will make working with it even 
easier. So the first thing you 
might notice is we now have 
multiDex support so we can 
select multiple files this is 
not the Topeka app. It created 
it
 just for the purpose of this 
demo.
 The fragment, I only use it for
 the layout XML file, which that
 will be important later. We 
will make tweaks to the Dex 
viewers.  We have filtering 
options. I can disable show ing 
the referenced from my file but 
not actually defined in it. 
    Moving on to Proguard.
 First problem is it crashes.  I
 don't know why. The second 
problem is if I actually go and 
try to debug the problem, like S
hai mentioned, all of the names,
 they were all changed to 
strings like A, B, C. It's very 
difficult to debug the problem 
here. So what I can do now with 
the new Android studio is I can 
load the program mappings that 
were created when my APK was 
built.
 So let me open that here. And 
now you can see the Dex viewer 
changed. First I can actually 
see all the names.  Everything 
is back like it was in my 
original source code.  Second, I
 can actually go here and see 
that my blank fragment is 
missing. Proguard was not able 
to automatically detect that it 
was being used in my code. I can
 press this button here
. 
    I right click on it and I 
can generate a program rule -- 
[ Applause ] 

Proguard configuration. I just 
want to keep the class and all 
its members. So I copy it here. 
I rebuild my app and I open the 
APK after actually building it. 
I have loaded the program 
mappings so that we can keep 
things brief. I open it, and I 
can see that the blank fragment 
is not only here, it's shown in 
bold, which means that it was 
explicitly kept by the program 
configuration. So that's the Pro
guard support in Android Studio 
and APK analyzer. For real power
 users, you can go and figure 
out how the classes that you use
 and the dependencies that you 
have pull even more code inside 
your app. For example, I know 
that in my source code, I'm 
using this class called optional
, but I have never used this one
 or this one. So why is it here?
 I can now right click on any 
class or method and actually 
find usages and get a nice tree 
of dependencies and see that 
actually this percent class is 
used by this method from the 
optional, which I'm using from 
my own create. What's more, I 
can actually verify that by 
opening my on_create method and 
looking at the exact bytecode of
 that method. I know not every 
one of you will need to use this
, but if you work with very 
complicated build systems, now 
you can actually analyze the 
bytecode that gets packaged in 
your APK. Okay? Can we switch 
back to slides please? This is 
available in Android Studio now.
 There are more things that 
we're working on and hopefully 
you'll get to play with them in 
the future, but now let me give 
you a sneak peak. 
    Previously we had only two 
colors showing defined and 
reference methods, which is 
useful if you're debugging 
problems with multiDex. We're 
adding a third column that will 
show you the actual byte size 
for package, class, or even 
method so you can see how the 
functionality that you add to 
your code or the libraries that 
you pull into your code base 
impact the detection and APK 
size of your app. 
    The last thing is Shai 
showed you how to compare two AP
Ks, but that was quite limited. 
We're expanding the compare APK 
action to give you the actual up
date size as delivered by the 
Play store from one version of 
the app to the other and we 
include the new file by file 
support that has been added to 
Play. If you're not familiar 
with file by file patches, let 
me invite James on the stage 
from the Play team to explain it
 better. 
[ Applause ] 
   Â» JAMES SMITH: Hello.
 In the last year, Play invested
 a lot in taking significant 
steps to reduce APK size for 
downloads and updates. I'm 
delighted to say we've had great
 success and I would like to 
tell you about two in particular
. The first was compression. 
We're always proud of our in
terns, but this will take some 
beating. Our intern Ana took Bro
tli, a really cool new 
compression format from the 
Google re search Europe team and
 applied it to the Play 
Store. That one change reduced 
our data usage by 1.5Petabyes.
  A day. We are definitely 
offered Ana a place to join
 us full-time. 
    Secondly, when Google play 
updates an app, we started out 
by serving the full new APK for 
each update. Later on we 
switched to using DIFing 
algorithms to generate deltas 
between the new APKs and old APK
s, which we would then deliver 
as patches.
 I changed one character here. 
Can you see it? Top left, second
 word. Let's go back and see it 
again. We only changed one 
character. Let's see that again.
 Pretty crazy. So a compressed 
version produces a massively 
different version of compressed 
text.  That means the patch 
between the two is very in
efficient. So we decided to get 
smarter about how we generate 
patches.  We've launched a new 
system called file by file 
patching and decided to un
compress the APKs and generate 
the deltas on uncompressed 
versions. Every file, file by 
file. This creates a far more 
efficient patch and we reverse 
the process when we apply the 
patch on the device. The result?
 We saved 6petabytes of user 
data per day. On average, 
patches are now 65% smaller than
 the original app size and some 
are even smaller. Netflix's 
original app is 60 megabytes but
 the patch was only one 1 
megabyte, a 92% saving. With 
these two changes, we dropped 
our data use -- usage by 7.5peta
bytes per day. That's 100 years 
of HDTV video every single day. 
If that doesn't give you an -- 
an idea of Android scale and 
play  ? 
[ Applause ] 
    So now we're introducing 
Google play app signing. Google 
play will manage your key on 
your behalf and sign your app 
before delivering it to users. 
Now once Google play signs your 
app, we can go one step further 
and we can provide app size 
optimizations.
 You heard earlier about multiAP
K and the stuff that's not 
required. If I have 32 bit 
architecture and HDPI screen, I 
only need what's in blue and the
 rest of the APK is completely 
unnecessary on my device. With 
app optimization, we deliver 
just the right content for each 
device.
 Sign up for app optimizizations
 and you never need to worry 
about it again. 
[ Applause ]  
you give us a universal APK, and
 we will automatically create an
 optimized APK for different 
devices on screen density and 
native architecture. 
    Now we're just getting 
started exploring this area. It
's really early. But we've tried
 this out with a few apps that 
were in our early access program
 for app signing and we expect 
the average savings to be about 
15%.  However some apps see even
 better results. Delivery was 33
% smaller after the 
optimizations and the 7-minute 
workout app was nearly a half 
smaller.  So we're really 
excited about this. We think it 
will be a huge benefit to users 
and developers.  
    So how can you get these 
benefits? App signing is 
available today. You can go out 
and get enrolled straight away. 
We are trialing app 
optimizizations with a few 
select patter in s at the moment
 and hope to widen the beta. 
Please enroll in app signing. If
 you would like to find out more
, please come to our talk at 2:
30 p.m. today on stage one next 
door. 
    So thank you very much for 
listening. Today we covered a 
lot of the best practices that 
you can do to slim down your APK
 size. It's really important to 
users, so I really hope that you
 take something away from this 
and go and invest in making this
 better.  If you'd like to find 
out more, talk to the Android 
and play teams in sandbox dorm C
. Thanks again. 
[ Applause ] 














RAW FILE 
GOOGLE iO 2017
MOUNTAIN VIEW, CALIFORNIA 
What's New in Support Library
May 18, 2017
10:30 am PDT
Stage 2  
Services provided by: 
Caption First, Inc.
P.O. Box 3066
Monument, CO 80132
800-825-5234
www.captionfirst.com 
***
This text is being provided in a
 realtime format.  Communication
 Access Realtime translation 
(CART) or captioning are 
provided in order to facilitate 
communication accessibility and 
may not be a totally verbatim 
record of the proceedings. 
***                   

   Â» ALAN VIVERETTE: Good 
morning. 
   Â» CORY O'CONNOR: Good morning
. 
   Â» ALAN VIVERETTE: And we're 
going to talk about what's new 
in support library through today
's release 26.0 beta one.
 Do you develop Android apps? 
Okay.  So everybody here is p
retty familiar with the support 
library. It's a collection of 
utilities and classes that make 
it easy to target older versions
 of the platform. It's a very 
essential part of Android app 
development. 
    So we're going to start by 
talking about what's old in the 
Android support library before 
we move on to what's new. Last 
year you may recall that we 
dropped support for SDKs lower 
than 9.
 We reduced our count by quite a
 bit. This is really helpful. So
 today, we have fewer than 1% of
 active Android devices 
according to Play Store check-
ins on APIs lower than
 14. So you may guess what I'm 
about to say. Is anybody still 
targeting ginger bred?
 -- bread. You probably have a 
singeing feeling right now. We 
are removing support for APIs 
lower than 14. 
[ Applause ]
.
 We've got some great benefits 
from this.
 If your main SDK is not already
 14, it will become 14. The 
three of you still targeting 
ginger bread, you can still use 
the existing versions of support
 library. So 25.3 is going to 
continue to work on gingerbread 
and honey comb. But if you want 
to use some of the new features,
 you'll need to maybe have a 
separate code branch where your 
main SDK is 14. 
    So some of the benefits that
 you will get from this? We've 
dropped over 1400 methods. So 
we're a little bit backing off 
from the Dex limit.
 We're deprecate ing over 400 
methods that are no longer 
necessary. So for example, if 
you do this, it will show up as 
depreKated and it will show up 
as the actual set pivot X method
 because that exists.  We have 
work-arounds for bugs in 
existing versions. It may be 
useful to be calling view compa
t. We will be removing the 
methods in a later version. 
    So we've made it easier to 
develop with the Android support
 library. We're also going to be
 improving the way you get to 
the Android support library. 
We've modernized our 
distribution method and added 
the Google Maven repository  . A


Every time we update, you don't 
have to download internal Maven 
repository  . 
[ Applause ] 
    So we're including support 
library as well as constraint 
layout. The application 
architecture components that you
 may have heard about yesterday 
through this Maven repository, 
we're including every historical
 version of support including 26
 beta one, which is only 
available through the Google Mav
en repo. You can make the 
transition even if you're not 
targeting 26 yet. It's as simple
 as adding the Google Maven 
repository to your Maven 
repositories in your build Gradl
e. You set up your compile 
dependencies and you're good to 
go. Just a moment while a bunch 
of people take photos. The 
slides will be available later 
so any links that we're showing,
 you can look at later.

attain and develop and we also 
want to make it easier to 
develop the support library 
itself.  So we're approving work
 flow with our issue tracker. We
 moved from Google code to our 
new issue tracker.Google.com. 
This is providing a much, much 
better tool for us to track bug 
s
 manage hot lists and follow up 
on what you're telling us about 
bugs. But it's also better for 
you. It's more stable and will 
provide a faster response time 
when you file bugs.
 When you file a bug, sometimes 
maybe we're slow to respond. We 
try hard, but there are a lot of
 bugs. So if you decide that you
 want to handle a bug yourself, 
we have support for developing 
support library for iOSP, an un
bundled support that is around 6
 gigs right now instead of the 
full 150 gig, you can open the 
framework support root in 
Android Studio. Everything works
.  You don't have a bunch of 
weird red arrow linings.
 We want to get patches from you
.
 If you send us a pull request, 
for bug fixes only. We're not 
taking API changes. We'll look 
at those. We'll give you feed
back and hopefully we'll be able
 to integrate those into our 
main repository. 
    Now over to Clara to talk 
about some of the actual new 
features. 
   Â» CLARA BAYARRI: Thank you. 
It's an exciting year for text.
 Let me start. First feature I 
want to present today, we're 
calling it fonts in XML.
 You might be familiar with a 
painful process that looks like 
this. Create your custom text 
view, load your type face on and
 use your custom type face 
everywhere in your XMLs. That's 
not fun. We've seen more clever 
ideas out there, but we decided 
to fix this in the framework. So
 starting now, fonts are a new 
resource type  . 
[ Applause ] 

these for you. We are adding 
support for font families, for 
when you have more than one file
 to define a font. You have a 
regular, bold, italic, and bold 
italic style and you want to 
treat them as a unit, we are 
supporting that as well. You can
 define XML with a font family 
tag and font tags for each font 
in the family. I defined a 
family with a regular and a bold
 font. Creating those, you tell 
us what the style and the weight
 is for each of the files, and 
then this, for example, would 
generate my font. This is a 
family and can be used as a unit
 and the framework would take 
care of selecting the font it 
wants from that group. You may 
be familiar with the Android 
font family. This has existed 
since way before. It takes 
strings, things like san
s sarif and others.  You can now
 say Android family at font my 
font. We have added support for 
textiles. It already existed. If
 it were a family and you tell 
us to use bold, we will 
automatically use the bold font 
within your family. If you're 
using spans within your text to 
define different styles, we will
 automatically select the font 
for you and take care of 
everything. As you can imagine, 
it works in styles. Set it on 
your text view, everything works
. We have added resources. Give 
us the ID and we'll give you a 
type face back. 
    This is all available to you
 today on API14 and above thanks
 to the support library. 
[ Applause ] 
 me move to another feature. We 
have downloadable fonts.  We 
noticed that lots of you bundle 
fonts into your APK and they are
 really large files.  You are 
probably bundling fonts that are
 not even optimized for mobile 
and Android doesn't need about 
50% of the file.
 We made a little analysis and 
we found that the top 25 are 
bundling on average about 500K 
in fonts that we have in the 
Google fonts catalog. Couldn't 
we do better with that? And you 
are bundling in several places 
and the user is downloading this
 over and over again. We have 
created the concept of a font 
provider and it is the separate 
entity that is not your app and 
its own mission is to fetch 
fonts, cache them, and serve 
them to you and every other app 
that wants fonts so hopefully 
you can get rid of your bundled 
fonts and rely on the font 
provider. All apps can do 
contract APIs. This means that 
you all have one entry point 
into the font provider. Can you 
go back one? Benefits? We have 
one copy of the font. We only 
have one on memory, saving 
memory for the user. One copy on
 the device so that you don't 
have to bundle it in the APK and
 only downloading it once from 
the network if you are also 
downloading it yourself. We're 
very proud to announce that our 
very first font provider 
available to you is a 
collaboration with the Google 
fonts team.
 That is more than 800 fonts out
 there for you. 
[ Applause ] 

request. The actual query of the
 font, so say you want comic 
sans, maybe. And the array of 
certificates that the provider 
is signed with. This is very 
important. Fonts are kind of a 
security loophole. They can load
 and execute code, so we want to
 make sure you have a trust 
relationship with your font p
rovider. You don't want to up
load fonts from anywhere. We can
 assure you that all the fonts 
available on Google play 
services, we know they are 
secure and mobile optimized. 
    Next you will create a call 
back and it has two main 
functions.
 Er  -- we want to make sure 
that you have control over where
 it is executed. Please don't 
give us a UI thread handler. It'
s all under your control. It is 
obvious that we tied those two 
together. You can have a 
specifier and download it in XML
. We added four attributes to 
the font family tag.
 Next I want to show you the 
studio team has done a great 
collaboration with us. If you 
open the properties, you will 
see there's a font family 
section. Usually it takes things
 like this. Now if you open it, 
there you go. And you scroll all
 the way to the bottom, there is
 a &quot;more fonts&quot; option. That 
opens the new font picker. It 
will show you fonts that are 
already in your project because 
you bundled them, fonts in the 
Android system, and downloadable
 fonts. Right now you know 
notice on the top right, we are 
ready to integrate with any 
other font provider that comes 
out. Right now it shows all in 
Google fonts so if you scroll, 
you will see that is the entire 
catalog. Right now I want to 
search for fonts.
 Android studio generates all of
 the XML for me and prerenders 
it to show me what it will look 
like. 
[ Applause ] 

    It generated everything we 
needed, all for free. 
    If you want to know more 
about the Android studio, check 
out what's new in Android 
development tools today at 11:30
 in the amphitheater. For more 
information, we do have a sample
 app that is published on GitHub
 since yesterday.  We have 
public documentation that you 
can access. The slides won't be 
available until later so don't 
worry about the links. We have 
documentation that will tell you
 about the Google fonts provider
. One caveat, because we have 
done an integration, that is not
 out to the public just yet, but
 you can join their beta through
 that link over there. And get V
11 so you can play around with 
it as a developer until it 
actually rolls out. Downloadable
 fonts available to everyone on 
APK14 and above. Thanks  .  Next
, let's talk about emoji. Have 
you ever seen one of these boxes
? We call this tofu and what we 
render when we can't render what
 you've asked for. Every year un
icode defines more emojis.
 We can't update it and give you
 the new emojis. Maybe you will 
send one to a friend with a kit 
kat device and they will never 
see the emoji, so that is bad 
and we decided to fix this. 
    So what we do is for each em
oji that you're trying to render
, we check to see if it can 
render. If so we leave it be. If
 it can't, we substitute an emoj
i span and we use available emoj
i font to render that for you. 
You can bundle the font into 
your app or let us use 
downloadable fonts to let us get
 the latest for you from Google 
play services and Google fonts. 
So when you want to use a 
downloaded configuration, you 
would use a supported dependency
, create a font request which 
we've just seen in downloadable 
fonts. You can get these to 
actually use their fonts. And 
then you initialize with a font 
request. And this tells it to go
 find the downloaded font. If 
you do this in the application 
on create, then you're set. If y
ou say oh, but I actually 
targeted non-Google play service
 devices, that's fine.  We have 
the bundled configuration for 
you. You use support emoji 
bundle dependency and that pulls
 the latest font that we have at
 that moment into your APK. That
 font is about 7 megabytes so be
 careful with this. And of 
course once you ship your app, 
it will not get updated, so it's
 up to you to ship a new update 
on your app to get the newer 
fonts. 
    It's extremely easy. Set it,
 initialize, and you're set. And
 then to actually use the emojis
 in your app, we provided widget
s for you.
 Some of you might say, Oh, but 
I have my custom class and I 
don't want to use or extend this
 one. Go read the documentation.
 We have very detailed stuff on 
how to integrate into your own 
custom class as well. 
    Hopefully you will stop 
seeing tofu, especially if queue
 ear
 -- you're a messaging app. We 
have a sample app. It's 
available on GitHub. We have 
public documentation on how to 
use this. And because if you use
 a downloaded configuration, it 
has the same caveat. Please sign
 up for the beta to play around 
with that. It it is available to
 everyone on APIs 19 and above. 
    Finally, I want to present 
our fourth and important feature
. We've made text view auto 
sizing. What this means is you 
might have run into this case 
where you have some text, care
fully measured your text view, 
know it fits and the trans
lations come out. You start 
seeing that your text doesn't 
fit into the bounds. That's 
where auto sizing can help you. 
It chooses the size of the text 
depending on the boundaries.  We
 will increase your text size as
 needed to fill in its 
container. Using this is really 
simple. You use this auto size 
text type attribute and set it 
to uniform. What this will do is
 it will scale the text on the X
 and Y axis uniformly. Some of 
you may want more control.
 You may give us an array of 
pre-set sizes, in which case we 
will take the best match, or you
 can give us a minimum, maximum,
 and a step. What we do 
is
 and we will snap only to the 
sizes. Now let me hand it back 
to Alex to talk about 
innovations. 
   Â» ALAN VIVERETTE: Now that 
we've made our apps beautiful by
 switching everything to comic 
sans and adding emojis, let's 
make other things more beautiful
 for graphics and animations. So
 this is going to be a library 
for direct interaction and 
animations in response to that. 
These are based on velocity 
instead of animation.
 So you want to fling something 
off the screen, and you want 
velocity to do the initial touch
 movement. You can figure out a 
curve that will roughly match 
what they were doing before the 
animation started. It can be a 
lot of work. Going to help you 
create natural looking 
animations in response to direct
 user interaction. We provided 
two animations right now, spring
 animation and fling animation. 
These are for behavior where you
 want to drag something down and
 it snaps back and eventually 
reaches an equilibrium point. 
Maybe you grab something and you
 fling it off the screen and you
 want it to slow down as though 
there's friction. What that 
looks like in practice is I have
 an Android view and I touch it.
 As I'm pulling it down, we 
start feeding touch events into 
a velocity tracker. This knows 
how fast the bug Droid is going 
to be moving when I let go of it
. As I'm moving it down, we're 
tracking the Y translation so 
that it follows my finger. When 
I remove my FINGSer, -- finger, 
we will start the spring 
animation from code, that looks 
like this. We're creating a new 
spring animation, and adding the
 translation Y that we've been 
using to track our user inter
action. When I let go of that, I
 want it to return to 
equilibrium state. It's going to
 overshoot and eventually settle
 on zero translation, Y is 
equilibrium. It is how quickly 
the spring is going to come to 
rest. Dampering ratio of zero 
would go inif I Nate  -- 
infinitely, and high would stop 
quickly. A high stiffness, when 
I pull the spring down it will 
snap back immediately. A low 
would bounce back and forth 
slowly like a car with low 
suspension. 
    Finally, I want to pull in 
the velocity that I've been 
tracking. This is the direct 
interaction portion. I'm pulling
 down quickly. When I lift my 
finger up, I want it to keep 
moving.
 FIRNLly we start our P -- 
finally we start our animation, 
and it snaps back, bounces and 
comes to rest at equilibrium. 
You can check out Android 
animations spring to life 
tomorrow at 2:30, stage two, 
right here. 
    We've also made improvements
 to drawing with vector 
drawables.  We have fill type, 
and if you've ever received an 
asset from UX that has hallow 
areas in the middle, here we 
have a lightbulb that has a 
single path defining the entire 
area and it has some empty areas
. This looks great in photoshop.
 It looks great in asset studio.
 But once you load it on to a 
device running API lower than 24
, you see there's some weird art
 facting at the edges. The 
reason for that is the format of
 svg that gets exported uses a 
fill rule, and this defines what
 the inside of our vector path 
is. So you'll notice we have a 
single path that defines our 
lightbulb. We have a rule that 
tells the renderer which is 
inside and which is outside fill
.
 You write one and it looks 
correct and nobody has to hand-
edit things so you can use a 
single fill rule. 
    All right. Speaking of 
vectors and parity, we're adding
 parity for the ability to morph
 between different paths and 
interpolate along a path.
 These are new features. You 
will be using the same XML and 
here for path data morphing, 
we're going to be able to take 
an initial path speck, so the 
long string of letters and 
numbers and commas that you may 
see if you dive down into your 
vector drawable pads. One caveat
 is the path formats must match.
 This is something that must be 
handled by tools.  We use the 
shape shifter tool for this demo
 that we're about to show.
 A very common case of morphing 
that I'm sure you'll all 
familiar with in your Android 
apps. So we have a vector 
drawable defining our starting 
image, a buffalo. And I've ex
tracted out the path data so the
 long string that defines the 
path, I pulled that into a 
string resource. And we're going
 to be reuse ing it in our 
animation and it makes things 
way more readable. We have the 
starting vector that we want to 
animate from and we have our 
object animator. The new thing 
here for API14 and above is the 
ability to specify path data. So
 we're going to animate the 
value from our buffalo path spec
 to our hippo. And this is going
 to transform the points and 
give us the morphing animation 
that we saw. We pull this all 
together into an animated vector
. The target, we're taking our 
buffalo path from the drawable 
and we're going to be morphing 
from a buffalo to a hippo. So 
we're going to take this a 
little further and take 
advantage of the feature in AAPT
 to use a bundled XML format. So
 you may not have used this 
before, but ITS cool. It's 
supported through AAPT, so it's 
backwards compatible. We're 
going to take this and we're 
going to take our drawable and 
expand that out into
 -- so now we're centralizing 
things in our animal morph 
bundle animal XML. If you're not
 reusing it and only need for 
this animation, it can simplify 
and clean up your resources 
directory. We will do the same 
thing with our animation and now
 everything is neatly contained 
within one file. The only thing 
we're going to reference from 
our layout or code is our animal
 morph bundle drawable. And we 
don't need to keep a separate 
animation XML in some other 
resources folder somewhere. If 
we're trying to send, we don't 
have to bundle everything into a
 ZIP and then tell everyone 
where it goes. Everything is one
 file. Very clean, supported all
 the way to API14 through AAPT. 
    We have back ported support 
for interpolation along a path. 
And this is going to allow you 
to set the interpolator on your 
object animators to be a path 
using a spec similar to what you
 would use for SVG and what we 
support in vector drawable path 
data. Here's an example of 
combined path morphing and 
interpolation. This one is 
pretty complicated so we're 
going to take a more simple 
example. 
    Let's say our UX designer 
was not feeling particularly 
creative, so they want us to 
shrink down a square. We're 
going to shrink down fast, 
bounce back a little, and slowly
 reduce it to a point. So our 
path interpolator that we use on
 API14 through current 26 is 
going to look like this. We de
fine a vector drawable path. If 
you render, it looks like this. 
Quickly reducing from 1.0, 
bouncing back a little bit and 
then slowly tapering off to 
zero.

in our object animator. 
Compatible. Same XML for 14 and 
26. Set our interpolate or to be
 our new path interpret lator. I
 will pull everything out into 
an XML bundle because it helps 
clean things up. And then we get
 this quick shrink and slow fade
 to zero. 
    All right. So far all the 
screen shots and video I've  
shown you are from phones but 
there are a number of things 
included for form factors such 
as watches and TVs.  We're 
integrating the wearable support
 library into the main line 
Android support library. You 
will see a number of 
improvements in core UI elements
. Things like improved circular 
scrolling. Better support for 
responsive layouts on round 
screens and square screens with 
box inset layout.  And 
consistent user interaction 
models. So you can learn more 
about developing for wear 
devices at the Android wear UI 
best practices talk on this 
stage on Friday at 3:30 p.m. 
tomorrow. 
    We've made improvements for 
developing TV interfaces.  So 
the leanback has added playback 
transport control glue. If 
you're writing in interface for 
lean back, this is problem 
something that was painful to do
 yourself, so we have a pre
packaged seek with preview. And 
we're also allowing you to embed
 a video view. If you're writing
 something for browsing media 
and you want to be able to play 
that media in line while showing
 people the description or 
ratings of it, that's now very 
simple to do with detailed 
fragment background controller. 
If you want to learn more about 
developing for TVs
, you already missed that talk 
but check out office hours at 6:
30 this evening in section 3. 
    So we have a number of other
 smaller behavior changes and 
new classes that I think it's 
important for everyone to know 
about. First of all, preference 
data store. For anyone who's 
storing preferences in the cloud
, you may have had to do 
something tricky if you had to 
do preference manager. So this 
allows you to customize the way 
that your put and get calls for 
preferences are handled. So the 
implementation of this let's say
 we want to store in the cloud. 
We'll extend preference data 
store, the new class, and over
ride just get and put boolean. 
Because we want to be able to 
retrieve a value without having 
to wait for cloud interaction, 
we're going to store this 
locally as well. An important 
thing to keep in mind with this 
class is that calls are going to
 happen on the main thread.  If 
you're doing some long trans
action, doing something in the 
cloud, persisting something to 
disk, you want to do it a
synchronously and want to handle
 quicks after that to get boo
lean, so something like local 
caching. To set this up, we're 
going to grab our preference 
manager and set an instance on 
our data store on that and all 
subsequent get and pull calls 
are going to go through our new 
preference data store. We also 
have changes in
 transaction calls can be 
dangerous to call if you're 
already in a transaction.  If 
you're already in a state change
. These can have unexpected 
behavior. So we want to make it 
a little bit easier to do the 
right thing, more difficult to 
do the wrong thing.  And these 
will now be strictly enforced 
and through exceptions if you're
 trying to do re-entrant trans
action calls. 
    And for developers 
interested in learning about 
their UI performance, we've 
added frame metrics aggregator. 
You can get information about 
rendering milestones during the 
lifecycle of a drawing frame. If
 you don't know what a rendering
 milestone is or you do know and
 want to know more about 
assessing the performance, you 
can check out the Android 
performance UI talk.  If you 
don't care but you saw Chet's 
talk and you love Chet talks,
 it has Chet. So check that out 
Friday.  
    And last but not least, this
 is actually from 25.3 API, but 
I thought it was really 
important. Action bar drawer 
toggle is a class used to 
animate or implement the 
hamburger button.  The button 
that you use to open the 
navigation drawer, the three 
lines.  You may have noticed in 
some apps when you start to pull
 your drawer out over the 
hamburger button, it animates. 
This is officially not the thing
 that you're supposed to do, but
 I see a lot of apps where you 
have done it and it has been 
fixed. It's wrong. We pull it 
and the hamburger turns just a 
little bit. Some lettuce is 
falling out. It wasn't quite 
right. Maybe you fixed it. Maybe
 the way that you fixed it took 
a couple hundred lines because 
it was really difficult to do? 
Don't do that. Stop that. And 
instead do this. We now have one
 line to disable the drawer 
slide animation and get the 
correct behavior. So use that.

talks.
 Here is a list of all of the 
ones we have coming up.
 So thanks, everybody. 
   Â» CLARA BAYARRI: Thank you. 
   Â» ALAN VIVERETTE: We'll be 
around for questions after  
wards. 
[ Applause ]  
[ session concluded ]
. 












 #3469D

 #1KW
 . 



morning. How's everybody doing? 
Welcome. Welcome. Okay. Hi. My 
name is Owen Campbell-Moore. I'm
 a product manager on the Chrome
 team, and I work to make sure 
that the web is the best 
platform that it can possibly be
 for both developers and users.
 Today I'm going to talk about 
creating user experiences that 
just feel right and doing that 
with progressive web apps.
 Before I jump in to talk about 
UX, I want to take a moment to 
talk about why I think the web 
is such an exciting and 
fascinating platform to build 
for as developers.
 You all heard yesterday in the 
keynote how Chrome has more than
 2 billion monthly active users,
 which is a huge number, and 
that's just Chrome alone.  When 
we look at the whole spectrum of
 the web, we see there are over 
5 billion devices running web 
browsers. This means if you're 
building for the web, there's 
this incredible, large potential
 addressable audience that you 
have, amazing potential reach. I
 think that's a really 
fascinating and unique property 
that the web has. And there's 
been a huge rate of development 
over the past pew years.  
Performance has gotten so much 
better. In the last year alone, 
JavaScript performance on Chrome
 for Android is now 35% faster. 
So I think that these 
improvements mean that it's 
possible to do a lot more than 
was previously possible. 
    Another thing that I love 
about the web is how it's 
fundamentally open. There's no 
one company that's in control 
and decides what happens on the 
web. It's thousands of 
developers across lots of 
different companies and web 
browsers and open standards 
organizations that are all 
working together to push the web
 forward. And it's really been 
designed over the past years why
 users should be able to click 
one link and immediately have 
that content streamed to them so
 they can access it instantly. 
No need to bundle up 10, 20 
megabytes of resources, upload 
them to a store and have users 
go through some kind of install 
process to download and get that
 on to their device. That's a 
really fascinating property for 
the platform in part because it 
means that your users can 
potentially tap a link and be in
 the experience immediately, 
which means you can reach a lot 
more users. And from a purely 
business perspective, it mean s 
acquisition costs are lower. So 
we have seen a huge shift to 
mobile. In particular, this has 
been interesting because native 
has really been great on mobile.
 It's takinged a VAJ -- taking 
advantage of the unique 
capabilities.  Before there was 
no way that the user was able to
 get push notifications and home
 screen icon and all of these 
aspects that allow users to come
 back over and over again. That
's been a big focus for us in 
the last few years. In addition.
 The shift to mobile has been a 
big shift in interaction. 
Previously on desktop, users had
 keyboard and a mouse.
 Now users are dragging and 
swiping and interacting with 
things on the screen. So the 
quality has to be that much 
higher, so when the user is 
physically manipulating 
something on the screen, it has 
to respond and do what they 
expect to create a good 
experience. So this is what I'm 
going to be talking about today.
 Specifically how do we design 
for the web, especially for 
mobile devices? So this will 
build upon principles of good 
mobile design and good design.

build user SPEERPS  experiences 
that just feel right on mobile 
devices. To dig into that, we 
have had experiences on the web 
where we open a page and we're 
scrolling and it's not really 
responding and we tap it and it 
feels slow and old fashioned. So
 this is a common emotion and 
feeling on lots of
 websites. Those are the 
symptoms and can we dig in and 
understand the symptoms and 
understand the causes for those 
such that we can work out how to
 go and address them? And so the
 first common symptom that we 
see is that sites often aren't 
reactive. So here you can see 
I'm tapping a link on developers
.Google.com and I'm waiting and 
waiting. And I'm on a mobile 
device and who knows what the 
network is like this is in 
contrast to when things were 
developed on desktop and 
probably this was developed on a
 desktop device where they were 
running a local server and they 
tapped the button and in half a 
second, it was there and it was 
fine. But in the real world, 
that's not the case. Often sites
 don't feel 
reactive. So here you can see 
we're looking at the Google iO. 
It's not responding -- it's not 
swiping away.
 They think a pull sign and a 
handle, and that's what all the 
others have, so that will be 
good. And that's something that 
we often see on the web.

content appears and loads in 
elsewhere on the page this is 
also a very common experience 
this we've seen. And it's a big 
problem. Another good example of
 whether a user is in control is
 if they are on a list of 
products on an E commerce site, 
they tap an item and realize 
they tapped the wrong one.
 Do I need to hit back again 
what's going on. This will turn 
a minor mistake where they leave
 the whole site. They hit back 
too many times so often users 
are not in control. These are 
some of the big issues that we 
see. So today I want to share a 
secret with all of you. Are you 
all ready? So the secret is that
 websites can feel amazing. So 
this is actually a pretty well 
kept secret, I think. So
 there's a huge amount, like the
 history of the web means there 
is a huge amount of legacy 
content.
 People think this is how the 
web is, this is how it feels, 
how it must be. If you take away
 one thing, it's that websites 
can feel amazing and can do more
. And here's a great example of 
a web app that I think does a 
lot more. So here we have 
Twitter.com. They recently 
launched this as a progressive 
web app a couple months ago so 
you can try it on your mobile 
device. And you can see it's 
capping the tabs, very 
responsive. I can tap compose, 
tap through all of the tweets, 
and this is simulated on a very 
slow 2 or 3G network and it all 
feels really good. And you can 
actually see that it's running 
and it's in an immersive mode. 
No distracting browser UI. That
's another feature of the 
progressive web app.
 It runs in a rich immersive 
mode, which creates a nice 
experience. This is a nice 
example of what's possible.

ive web app. At the core, they 
are just radically better web 
experiences, and they are 
fundamentally enabled by a new 
set of browser standardized 
capabilities and APIs
 that have been shipped over the
 past few years. For example, 
service worker is an amazing new
 API that allows websites to 
fundamentally take control of 
the networking on the page in 
order to make it per for
 -- performant even if the user 
is offline. You can keep a 
stored copy of the app on the 
user's device.  You're not 
downloading the whole app every 
time they browse to it. 
    And another thing that I 
think is important about 
progressive web apps besides the
 capabilities of the technical 
aspects is the idea of a label.
 We can say these are 
progressive web apps, these are 
great experiences.  We can reset
 expectations for ourselves and 
our companies and for our users 
that things can be great. So 
that's one of the reasons why I 
think PWA is so exciting. 
    We have had the great 
opportunity to work with some of
 the world's best developers in 
rebuilding their mobile sites as
 progressive web apps or coming 
to the web for the first time 
like Twitter launching Twitter l
ite to Lyft and their PWA as 
well. We have had a chance to 
look at the common problems and 
work out what works well, and we
 boiled down three key 
principals that we call the fee-
good principals that we think 
explain what makes a web 
experience feel good to users as
 they're using it. So the first 
principle is reactive. Sites 
should be reactive to users' in
put. Really the word responsive 
would have been better in there 
but responsive web design is 
already a thing.  So reactive is
 the word we're using today. 
    Secondly, a site should be 
predictable and should offer pre
DIKTable user experiences. And 
thirdly, users should always be 
in control of their experience. 
So let's dig into this first one
, reactive. Sites should be 
reactive to users' input. When 
we talk about reactivity, I 
think first it's important to 
think about perceived 
performance.
 This is a quote that I loved. A
 classic paper in the fields 
which says human perception of 
time is fluid and can be 
manipulated in purposeful and 
productive ways. This is a quote
 that comes from a great paper 
about designing loading bars and
 about how to create good 
experiences of loading bars that
 make users feel like the 
experience is really fast and a
void them feeling frustrated. 
And then research has 
demonstrated that user 
perception of time is fluid. So 
as we're thinking about building
 reactive websites, we should 
think about how users perceive
 loading.
 So the first example I want to 
show is kind of like what we saw
 before. A transition that's 
blocked on the network. You can 
see me tapping a listing and I'm
 waiting an indeterminate amount
 of time until the next page 
appears. So this can be 
frustrate ing here we can see 
what housing.com, the PWA here, 
has done. When a user taps on 
the listing, they're immediately
 taken to the next screen.  The 
information that was known 
before, the image and title is 
reused on the next screen, and 
the user is given an idea of the
 structure of the page so they 
can start understanding that, 
take a few seconds to process 
that WHILS the process is 
happening. So this is a 
improvement in user experience 
and a pa tern we have seen 
successfully used across lots of
 progressive web apps.

 finding that touch feed back is
 not responding to users' input.
 I'm tapping on the demo button.
 It is an implementation for the
 react framework. As I'm 
tapping, this should be a 
material button and there should
 be a ripple and if you look at 
the code, there is a ripple. But
 when you go on a low end phone 
and tap it, there's no. Why? To 
understand this, let's take a 
look at a simplification of the 
code for how this would look. 
Here we have the button and we 
add an event listener. When the 
user clicks on the button, we 
will add a class to the button. 
This class will trigger the 
animation, and then we call 
render_next. Now the problem 
here is when you actually set a 
class on something in JavaScript
, it doesn't actually happen 
immediately. And in this case 
the render_next screen code is 
blocking the main thread. It's 
doing so much busy work that the
 change to the class doesn't get
 time to be applied. So this is 
kind of a weird quirk that we 
have. But it's fairly simple to 
solve. The way to solve it is to
 use this trick TLA we call a 
double request animation frame. 
So here what we're doing is 
after we add that class, we say 
to the browser, Hey, wait until 
the next frame and then we say 
wait until the next frame again 
and then start rendering the 
next screen. It ensures that the
 CSS change has been aPLID
 plied. It's made it to the 
process.  When we call render 
next screen, it can block, but 
animation is already going and 
it won't be blocked by that work
. So this is a really good trick
 that I'd recommend you think 
about when you're implementing 
tabs or buttons or anything that
 the user should expect to get a
 response from. Think about 
using this to make sure that 
things don't get blocked. If 
you're testing your site always 
on the latest pixel or the 
latest iPhone or your desktop, 
you often don't notice the 
issues.  But when you try them 
on the low end devices that a 
lot of users are using, these 
issues can really become a 
problem. 
    So here we can see the page 
where the fix applied and 
tapping the demo button and 
there's a nice material ripple, 
as you would expect.

infinite lists. Sites like 
Twitter or Facebook or Tumblr 
often let you scroll infinitely 
through a list. Here I have a 
page with 1,000 of the rows and 
I try to scroll through it, and 
it's rendering
 blank for a lot of it, which is
 weird.  When I was writing code
 to keep adding limits to the 
page, it got really sluggish and
 slow and the memory got really 
large. If you go to a site that 
uses one of these and watch the 
memory information, you can see 
these sometimes take multiple 
gigabytes of memory, which 
grinds everything to a halt this
 is a problem that we need to be
 thoughtful about. There's a 
solution to this, which is to 
use virtualized lists.  When 
that component goes off the 
screen, it's actually removed 
from the DOM, removed from the 
page.  Really only the things 
within view and a few on either 
side are rendered. This is a 
page with 100,000 elements on 
it. This can really scale very 
well and was a key that Twitter 
found when they were building 
Twitter Lite that was key to 
make sure that their list 
scrolls really well and the user
 can sit there and use Twitter 
very a long time. So a 
virtualized list is a great tool
. 
    Next, one of the big 
questions that we get when we 
talk about building reactive 
websites is how do I do native U
I on the web? For Android 
developers, that means how do I 
do material on the web? I want 
to give a quick shout out to a 
few implementations. At the top 
we have the polymer elements. 
This is a set of elements built 
by Google, built by the Polymer 
team.
 If you're interested in
 react, you can check that out 
as well. If you want to be a bit
 more framework agnostic, then 
Google has published the 
material components for web, and
 these framework with vanilla CS
S and pull them into any project
 you're working on. 
    Now I can't really talk 
about building reactive websites
 without touching on load 
performance. Since the first 
time a user comes to a site, the
 first experience is part of it 
being reactive to what they're 
trying to do. And so here on the
 left we can see the improvement
 that the major company OLX saw 
in India when they launched 
their progressive web app and 
used some of the patterns. There
 are techniques that I recommend
 you look up. The first is the P
RPL pattern, a way of ensuring 
that you're loading and reusing 
resources effectively to make 
everything fast. Secondly is 
service worker caching. That is 
one of the new standardized APIs
 that has been added to the web 
that allows controlling of the 
network. This is good for when 
the user comes back to your side
 and you can have the resources 
available on the device.  And 
third, service side rendering. 
People are building a lot richer
 experiences on the web. They're
 very app-like, have a big frame
 work and lots of resources and 
sometimes this means to get that
 first render you have to 
download all of those resources,
 then it's going to be a slow 
first render. So there's a 
technique where you can render 
the first view on the server and
 send that down and hydrate it 
on the client once the other 
resources have been loaded and 
make it interactive.
 FF . 
    Given that we're talking 
about design, I think it's 
important to touch on fonts. 
Fonts are a valuable tool for 
create ing the great 
experiencings. But on the web, 
there's a common problem where 
fonts can be a megabyte, two 
megabytes in size.  If you want 
to rely on that font for the 
first load of your application, 
you can end up with something 
like you see here, everything is
 downloaded, all of the text is 
there, but the font is not yet 
downloaded so it's unstyled. It
's blank. This is a big problem.
 There are a couple of things I 
would recommend thinking about. 
Firstly, consider using device 
fonts.  These days devices ship 
with a large set of default 
fonts.  By choosing between them
, you can get a good artistic 
expression. If a custom font is 
really important for you for a 
header or a logo, consider using
 an img or svg. Off then these 
can be 10kilobyte instead of a 
megabyte. And then use custom 
fonts but use them on subsequent
 loads. Once available, use them
. Until they are available, make
 sure they're not.  If you're 
pulling from Google fonts, there
's an option that lets you do 
this. Keep your eye out for this
. Make sure you're trying your 
site and first load on slow net
works and checking how the fonts
 are working. I have given a 
bunch of tips. Now I want to 
share tools to make it easier to
 make sure you're hitting all of
 these. 
    The first is lighthouse. It 
doesn't do all of the things 
that we've talked about in terms
 of helping the skeleton screens
 and responsive touch input, but
 it does help a lot with many 
aspects and we're building on it
 rapidly. So lighthouse is a new
 Chrome extension BILD built by 
the Chrome team that you are a 
run on any page that gives you a
 personalized report that 
explains how all the differents 
a pecks are working and gives 
you pointers about areas you 
should look at, areas of 
opportunity. 
    There are another couple 
tools worth mentioning. This is 
another tool. And web page test 
is a great non-Google tool that 
helps you say, you know, what
's the experience like of 
loading my website on a Moto4G 
on Bangalore. It will give you 
video and help you see how that
's working.  So this is a really
 powerful tool for understanding
 real world how users would 
experience your site. 
    So that was a bit how to 
make sure your site is reactive 
to the users' input. Next I want
 to talk about how to make sure 
it's predictable and that your 
user experiences are 
understandable. So here we saw 
the example earlier of a 
hamburger menu that the user is 
trying to swipe away and it 
doesn't swipe. So this is a 
problem. And here instead we can
 see the progressive web app 
recently launched by wego. This 
was built using polymer. I'm 
able to drag and fling and it 
works just like you'd expect. So
 here's another example similar 
to the ham berger menu there are
 tabs on the side and I'm trying
 to swipe between the tabs, but 
it's not working. This is a 
confusing experience. So instead
 of that, here's the page for 
react swipable views, which is a
 perfomant way of having the 
swipable views in your 
application. Check this out if 
you're looking at doing swipable
 views for some reason. 
    But there's another tip that
 I like to think about when 
thinking about navigation, which
 is sometimes it's best just to 
keep it simple. With both the 
hamburger menu and with the tabs
, we have this implication of 
gesture navigation, which can be
 challenging to do a good job of
 especially if you're interested
 in serving users on low end 
devices. The hamburger menu has 
a number of usability problems 
around discoverability of the 
items in the menu. Sometimes it
's best to keep it simple. There
's a pattern called a button 
navigation which doesn't have 
the same implications of 
gestural. It's more 
discoveriable because they can 
see immediately what's available
. Think about keeping it simple 
with bottom navigation instead 
of going deep in the other areas
. 
    So the next aspect of pre
 -- predictability. So the blue 
flash? It's an excellent super 
hero name for one. I'm tapping 
to dismiss it and the screen is 
flashing blue in that area. So 
why is this happening? This 
turns out again to be due to the
 legacy content on the web we 
had this big problem in the 
early days oTF web where the 
user would tap and then they 
would be stuck waiting. So we 
made a decision to have links go
 blue for a brief amount of time
 so the user knows that their 
tap was recognized and they know
 they need to wait. But these 
days when we're building these 
rich experiences that are going 
to be responding to user input 
immediately, this blue flash is 
really just a DI  distraction 
and it takes away from the de
sign.  If you want a blue flash,
 great. You get one by default. 
If you don't, it's easy to fix. 
Just add this one line of code. 
So this makes the blue flash 
transparent. So this is just a 
small example of the polish that
 you can bring to your websites.
    Now thirdly, the user should
 always be in control when
 they're on your site. And so 
earlier we saw this example of 
loading an article and it 
jumping out from underneath us, 
which is a common experience 
that we've all had.  So the 
alternative to that is what we 
call the stable load. This is 
where images and dynamic 
components have their size pre
determined such that the browser
 knows how to lay out everything
 on the screen even before 
they're downloaded. So this is 
the solution just specify those 
sizes. And it really allows the 
user to ininterpret the page 
better and not tap on the wrong 
thing. 
    Another case where I 
personally find them taken out 
of context and diverted is 
sometimes with permissions on 
the web. This is a pattern that 
I'm seeing a lot at the moment 
where I will land on an 
e-commerce site or news site and
 the first thing I see is a bar 
at the bottom saying the website
 wants to send you 
notifications. 
    At this point the user 
doesn't have context to make the
 decision and they don't know 
what you're going to send 
notifications about. You 
probably have multiple calls to 
action on the page, so it's 
unclear what we're expecting 
users to do at this point. 
Instead, I really like what 
Twitter has done, which is where
 when you tap on their 
notifications tab, if you have 
not enabled them, they show a 
full screen overlay asking the 
user if they want to opt in. 
Incidentally, push notifications
 are one of the new standardized
 features brought by progressive
 web apps so you can build 
experiences that can send native
 notifications on Android and 
desktop that look and feel just 
as you would expect. 
    So these were the feel good 
principles. Reactive to user's 
input, predictable user 
experiences and not set up 
things that are going to trip up
 users, and users should always 
be in control fundamentally.
 What we've seen from companies 
shipping new progressive web 
apps that follow these 
principles is really good 
results.  We've published a 
whole bunch on if you Google 
progressive web app case study, 
you will find a whole bunch. 
This is just a few. 170% in
crease in page views from 
Twitter and 76% in higher 
conversions. So this is 
potentially a very major impact 
on business. Now I want to talk 
quickly about how better UX is 
now being built into browsers 
and how you can do things that 
you couldn't before thanks to 
the new capabilities being built
 in. So the first of these is 
smart lock. So smart lock is a 
capability that means if a user 
has ever logged into your 
service on any device native or 
on the web, then when they 
transition to another device, 
they can be automatically logged
 in without needing to remember 
their user name and password. We
 find that when users are 
presented with a log-in screen, 
actually the majority of them 
often leave the site at that 
point and they don't ever make 
it through that log-in screen.  
So this is a really key part of 
your screen that you can 
optimize with this new 
capability of smart lock, which 
is also called credential 
manager if you're looking it up.
    Next the payment request API
. The data shows that 
approximately 65% of users on 
mobile that get to a check-out 
screen don't end up completing 
that check-out. When we ask them
 why, most of them say it's 
because the form was too long or
 hard to fill in. So payment 
requests lets you tell the 
browser what the price is and 
what the product is and then the
 browser will render this native
 form that's already filled in 
with all of the user's 
information that we already 
have.  The user can just tap pay
 and you get all of that form 
information back. You get the 
credit card details, the address
, all of the things that you 
would expect, but the user 
didn't have to re-type them in. 
This can be really big with im
pact on e-commerce. 
    And service workers allow 
you to work on flakey networks 
even when fully offline. Here 
you can see a progressive web 
app in Africa. What they shipped
 their experience such if that 
if the user goes offline, they 
can look back at items they have
 looked at previously, take 
their phone home and show their 
partner when they were looking 
at, even without internet. They 
give you a phone number to call 
and you can call that phone 
number and convert on the item 
without internet at a later 
point. 
    So these are some of the 
things possible on the web. In 
the last year alone we shipped 
over 215 new APIs like web blue 
tooth and image capture that 
gives you full control over the 
camera and focus and aperture. 
If you ever thought I can't do 
that on the web, I have to do 
native for some reason, just go 
back and take a look and see if 
it's possible because a lot of 
things really are. The web has 
come a really long way. And 
finally, I'd like to share a 
debate that's currently going on
 on the web in this area. 
    So this is a common question
 that we get. Should I tweak my 
PWA to visually fit in with 
Android or iOS especially when 
running in the immersive mode? 
What do users expect? I think 
this is a really fascinating 
question. It's really 
philosophical. Some argue that 
the web should evolve its own de
sign pat earns -- patterns. And 
others would argue that you 
should fully adjust how it looks
 on iOS and Android.
 It should be about the form 
factor and the user's context, 
which I think is another great 
point. A really interesting 
example of one company's way of 
handling this, well, so this is 
the progressive web app from the
 city of Barcelona for their 
tourists. It works afterline. 
You -- offline. They have kept 
the same fundamental structure a
cross Android and iOS but they 
have tweaked the design. They 
have changed the colors and the 
typography. They have centered 
the header and really made it 
feel a little more native while 
keeping the fundamental under
lying structure the same. I 
think this is an area where a 
lot more exploration and 
discussion needs to happen.  If 
you have thoughts, I would love 
to see blog posts and see people
 trying different things. 
    And finally if you're 
interested in going out from 
here and building a progressive 
web app, there's a couple of 
ways I would recommend looking 
at getting started. The first is
 the poller in CLI. They 
recently released a new command 
line tool that makes it really 
easy to get up and running. It 
includes service work and 
caching and all of those aspects
.  And on react, there's a tool 
called create react app. You 
won't have to deal with babble 
or any of those things. And 
create react app just announced 
at Google
 iO that any built with that 
will be PWA by default straight 
out of the box. These are two 
really good places to get 
started. 
    And remember that when you 
go out and start building these 
things, use skeleton screens and
 those techniques to make sure 
that your site is reactive to 
the users' input. Consider 
keeping things simple and using 
a bottom navigation instead of 
the gesture input. Or if you do 
the gesture, be thoughtful so 
your site is predictable to 
users. And use techniques like 
stable loading to be sure that 
your site isn't jumping around 
under the fingers in order to 
keep the user in control. 
    I think we have a couple 
minutes now for Q&amp;amp;A if you'd 
like to stick around. Otherwise,
 I've been Owen. You've been a 
wonderful audience. I hope you 
enjoy the rest of iO. Thank you 
very much.

to invite one of my colleagues, 
Mustafa, from the design team. 
He will help with question s. 
Please use the microphones. Yeah
?
 [   [ Inaudible Question ] 
   Â» ALAN VIVERETTE: He 
mentioned including a tag that 
specifies a service worker to be
 installed so when a user taps a
 link, they're taken to the PWA 
already installed locally on the
 device. So I don't think there
's any proposal for a new 
standard around that, building 
that into the browsers. But that
 component, that web component 
that you can use, I think the 
idea of having that as a 
standard web component that can 
be used outside of it, for 
example, and using it to install
 service workers on other pages 
is valuable. And we're looking 
at this, for example, on the new
 tab page, when you get the new 
install of Chrome, there are 
different icons there. And we're
 looking at pre-installing the 
service worker. So it loads 
instantly. So we are thinking 
about those things. I think 
there's probably opportunity to 
do more there.

   Â» MUSTAFA: We've got the 
progressive directly. . 
   Â» ALAN VIVERETTE: Hold it 
closer
. 
   Â» MAUFL
 MUSTAFA: To get existing 
infrastructure to be like a PWA 
is quite hard so people are 
starting fresh with a PWA or a 
mobile app. I think what will 
happen is slowly but surely they
 will move backwards. There's 
also implications that desktop 
sites have a lot of adverts on 
it and it's quite hard to get 
ads working really, really well 
on PWA and mobile so there are 
choices and decisions that you 
have to make, which is why it's 
easier to go PWA.
 I would prefer that we don't 
lose responsive design.
 It's easier to start fresh and 
slowly they will move backwards.
  In the UK there was a big 
shopping site that they had like
 an accessible site that was 
aimed for people
 that had the main site.
 Some are actual websites and 
some are just apps. And really a
 long-winded answer, but it 
depends on the context. Does 
that help? 
   Â» ALAN VIVERETTE: Sometimes 
people ask about SEO when it 
comes to that question. If you 
Google SEO with progressive web 
apps and it's not different from
 normal single page development,
 but there is some to take a 
look at. One last question? 
    [ Inaudible Question ] 
   Â»  MUSTAFA: In the beginning,
 there were three different 
elements. And it was called for 
web developers to have a single 
source of truth. We took the 
best of all of them. And evolved
 it to material like components 
on the web so it can be the 
single source of truth.
 So SO that will be a single 
source.

be a bunch of us over in the 
mobile web tent. If you want to 
chat with us later in the week. 
Otherwise, thank you very much. 
    [ Session concluded ]
. 











   &amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt; Test test test test test 
test test test test test test 
test test test I pledge 
allegiance to the flag of States
 of and to the 
republic

to.
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
    John John test, 
Caramel, 
Jonathan 
Karmel,.





native 
Native

Android, dot

Dotloop, 
jet, ticket 
t 
Ticketmaster.  Instant app, 
instant 
App, smart Smart 
Lock.  Mix 
panel, locale littics, 
tics, 
alytics,

Fabric. 
Developer

Relations. 
   &amp;gt;&amp;gt; JONATHAN KARMEL:  Hi, can 
everyone me in the Awesome.

you.  Keep the applause going.
   (

manager apps have to a session 
for introduction duction to 
apps.  I'm  excited to highlight
 ners  have many in audience.  
dive in  let's talk about of 
Instant Apps which are Android 
Apps. 
   We love Android Apps.  
Android Apps are getting better 
and better.  They fast, 
seamless, beautiful and take 
advantage of device c 
apabilities.  Let's take a look 
at some of them on my homescreen
 t oday.  We have Ticketmaster 
who has a beautiful end-to-end 
experience.  So let's say I 
wanted to go LCD sound system, 
well, I would just go into 
Ticketmaster, I would search for
 LCD sound system and due NDK 
support I can find the exact 
seat I want, see what it looks 
like in the venue, and there.  
Next day I can actually get into
 the with 
we Citymapper saved me a lot 
because I'm staying in a 
Mountain hotel and riding my 
bike because I didn't want to 
hit the traffic you all hit.
   It's a 30 minute bike ride 
and I have no idea how to 
navigate the back roads of 
mountainview.  So I opened up 
Citymapper, it tells me the 
exact transit and due to map 
viewer support I can dive in and
 figure out the turn I just 
missed and go back a few miles. 
 Then you have red bull TV, aI 
lean back experience for 
immersive television.  All of 
these add up to great   Android 
Apps.  All of you in the crowd 
have done an amazing job 
developing apps.  In order to  
the get the experience you have 
to install.  And there is a 
friction point and you don't 
have as many users using your 
best experience.  What had the 
same experience but just with a 
click you dive into is 
   They are native Android Apps 
run without installation.  So me
 dive in a  example.  I have a 
Joyce, and she loves &quot;Buzz&quot; 
feed.  is on the &quot;Buzz&quot; feed app
  the time just  videos.  The 
other day she me that there are 
seven  to make chicken  you and 
I there are six ways to make 
chicken 
 I usually would the the play 
wait, up and search for the she 
is talking about, but now all I 
have to do, she sends me a I is 
click.  I dive into native app 
experience and I find out there 
are actually seven to make 
chicken wings.
   Now, I may not  to use &quot;Buzz&quot;
 I  want the experience  thin 
and don't want to it my phone 
and with Instant Apps don't talk
 about a few of our livetoday 
I'm excited to talk The first 
one dot which is a contract  
ciberring app.  I don't sign 
contracts every day but when I 
get the email that time have to 
sign this contract and I'm 
transit I don't wait get back to
 to sign.  has you covered next 
native experience thatguides you
 the flow you how many 
signatures you have to have on 
the contract, read, flip through
 the contract and then dive into
 the exact place you have to 
sign. 
   Now, early results have been 
phenomenal.  They are seeing 
more users startthat There is 
starting that experience because
 they are guiding you 
immediately and they double 
digit increasefor the number of 
c ontracts.  Hot another Instant
 App that's live a real estate 
browsing app.. Now, my wife and 
I are looking to move right now 
or at least I believe so because
 she keeps sending me links day 
about new properties.  So I 
don't have the
 hot pads on phone because she 
does because she is 
browsing properties into this 
high fidelity experience, get 
through photos, look at the 
comengses of the home, look rich
 information like what schools 
are nearby and then I can flip 
new in and when I'm ready, I can
  the and up times actually the 
And exactly what HotPadsis 
trying to optimize.  They want 
you to the and see the house.  
And HotPads told us they have 
optimizing app for 12 years and 
to the uplift significant. any 
new daily morning ritual which 
is New York word.  I wake up in 
the I a quick search to find the
 &quot;New York Times&quot;cross word.  it
 up in Google.com and shows a 
instant badge right next to it. 
 I dive  App and to the cross 
word immediately, day I send 
best time to my whole team.  
This the time to beat  the day.
   Now, early data shows that 
I'm not that this has become 
more habitual users in the 
Instant App.  They are coming 
back more and more and seeing 
significant increases in 
re-engagement from early 
data.  put this slide up.  Today
 we live.  want the that's have 
worked so hard to live today.  
So please give them a round of a
 pplause.
   (Applause). 
   We have 15 Instant Apps from 
14 countries, and you can see we
 cover bunch of different 
categories, and I will just 
through a few of t hem.  I'm 
sorry I'm some of you 
out.  But you can see e Commerce
 partners lick jet, wish and 
Ticketmaster, red bull, Vicki, 
tab pro and &quot;New York Times&quot; 
cross word.  Tap o is Po is 
great if want to learn You have 
travel apps like trip scanner 
and  Citymapper.  These have 
been extensions of our product 
team.  They are not only trying 
to optimize their app but they 
are giving tons of feedback on 
the platform and tooling we have
 in So a lot of the tooling you 
will check out today is due to 
all of the hours of feedback 
provided for us.  So I  want 
thank them again and today at 
4:30 p.will where developers
themselves.  let's take all of 
these apps and put them on our 
phone.  ace lot,  the today, is 
a apps to fit on your But these 
native apps now your can them 
any time anywhere it's not 
installed on your phone.
our phone.
   Anyone can build an Instant 
App so we are excited to open it
 to you and see more and more of
 you develop Instant Apps.  You 
can access the documentation, 
download SDK and the tooling.  
So  should you expect?  One one 
project and the tools you are 
already familiar You will 
develop an Android 3.0.  The 
first step you will do is begin 
to your app and start taking the
 features that you already have 
today and breaking it up 
different modules. 
   We have tooling you do that 
and you the way.  We stress the 
reuse of code the installable 
app.  So, again, you are working
 in one code base, one project. 
 When you done, you upload to 
the Play Console.  Now, you will
 not have to go and hire an 
Android Instant Apps Engineer.  
This isthe Android development 
you are familiar And when we 
have talked to and asked them 
how did it take them to develop 
an Instant App,all apps vary but
 on it's about  

your use case.  One thing I will
 stress throughout this 
presentation the  of focusing on
 action you are trying to get 
the users to do.  So I know many
 of you have focused on but 
really what you are trying to do
 you develop your Android App 
and App is get to article,a 
video, a contract, do a 
purchase, get highly app.  That 
is your goal. are the 
motivations that have seen and 
heard from our partners about 
they developed an Instant App.  
break them into three 
categories.  The first one is 
about focusing onyour base and 
opt newsing experience and what 
we call conversion.  one 
thinking about new users you can
now reach, the third is 
completely newuse 
 again, for conversionabout 
current users and when we say 
conversion, we mean metric are 
you trying to optimize.  For 
current users, of you have told 
me that your native app is one 
of your best properties and you 
want more users app. of current 
user opening up accessibility 
your current user base dive into
 the native app.  So we launched
 recently jet and they are 
seeing great numbers of the 
likelihood of a user now 
purchasing when they the Instant
 App has significantly by double
 digits.  Reach about top of the
 funnel, more users that haven't
 even your before.  This is true
 for lot of first developers.  
So you can for a of first 
developers they are thinking 
most of mythe play store.  I'm 
getting most users frominstalled
 and thequestion is can expand 
service Can reach new  users you
 haven't reached in the past?  
And t hinking now URLs is a way 
to on board into your 
experience, you basically that 
surface across the for new users
 to actually interface with your
 native app experience.
   The podcasts, forpodcasts 
oftentimes I listen to it 
actually every d ay, I listen to
 a and I love cast Cast Box I 
don't always want to my podcast 
people  not sure if listen to  
but now I share a I know that 
they going dive into that app 
experience I'm experiencing and 
I that's aexperience.  So my 
propensity to share has 
increased. 
   Finally, there are use that 
we are to see people in this 
start to think about and develop
 now that there is no install 
friction and there is not much 
friction between the physical 
and world.  imagine to a a and a
 map for day, you are not to 
install an Or if you go to a and
 have an option to order food 
your seat, but you are want 
install an app.  I will just go 
the concession 
   We a lot of the friction so 
there are opportunities to  we 
are thinking here things like QR
 codes, beak c ovens, new ways 
to user  experience.  We been 
these  apps and we are  to see 
what you guys all develop in 
this room.  you go to our 
Sandbox you actually see some of
 partners developing types 

developing App.  What should 
start thinking about alongside 
the development?  What are the  
guiding principles that you App?
  There are five  guiding 
principles, the first is the 
idea of app.  like to think of 
Instant Apps and installed apps 
as one app that run in two 
different 
modes.  often to Apps to the 
streaming version of music.  You
 are breaking up the and 
streaming each song.  It's 
similar to will do with Instant 
are on plane, you  music to your
 phone, so 
you offline  
   But when you are 
sitting at home, don't about 
what music do I have all of the 
music you to and you are 
thinking I have to download this
 or not.  So to one, the one app
 concept, want to think Apps as 
the same app only being used on 
From stand that's what it will 
feel like.  Again, one code 
base, one project, all of the 
features you use in installed 
app in your Instant Android 
3.Android 0, we insure that with
 high code reuse reaching your 
app and your Instant We will go 
in depth into the actual 
development of an Instant App at
 our technical later at 3:30 
p.which you to go to and they 
will develop an instant app in 
less minutes. 
   As you can see here, just 
this diagram, all of the 
features from your installed app
 now present in App and all that
 done is broken them up so now 
you can, now the user can access
 one module with not having to 
download and install feature two
 module.  From an installed app 
standpoint same app, same output
 and same experience installed 
app.  Nothing has 
changed.  From the standpoint 
you are sameUI, navigation 
flows.  A lot of developers ask 
me should I develop a trial app.
  is not the goal. back on the 
music analysis, ideally if the 
user doesn't know if they are in
 an Instant  or installed app 
because the content is the of 
those rich experiences and all 
ef of those great features you 
have in installed appyou want to
 pull over to the  Instant App. 
   It's because the ever go from
 instant the little relearning 
as There is no onboarding 
process.  The user knows what 
this app does and they 
understand your features.  Andwe
 have received a lot of positive
 data for Vimeo has a great   
They all of their f eatures into
 their Instant App and they are 
seeing of  their they longer 
they deeper engaged.  They  seen
 digit in en engagement. next 
three I will about what  once 
you are  an Instant App.  So 
let's enter
app.  Before you might have 
thought of having one flow 
because you are yourch loading a
 monolithic app and there is 
only one flow that the user can 
go through.  That's now changed 
Apps. 
   You have actually now think 
points into your Instant App.  
So you have to about that flow 
like.  someone just me a and I 
don't know exactly what the 
Instant App is going to be click
 it.  If I hit a sin I may be --
 sign may be I understand the 
value proposition is for that 
app.  So you want to think where
 across the Internet a user 
could  the app through media, 
ads, all these different that's 
a user can and what the context 
they that app and want to for 
that are thinking flow. 
   If someone  sends a want drop
 into the If someonesends a 
video.  I want to drop into the 
exact video.  Search integration
 is also present in Instant 
Apps.  So you want to think 
about what happens when a user 
into your page from search.  
Here actually a search of 
hometown in Franklin, Michigan 
and you zero come up three  
times an Instant App.  So what 
has d one, said you are 
searching for this area.  You 
probablyinterested in a 
property.  I will sure my 
Instant App into a report on 
Sunset drive and there three 
relevant properties for me.  I 
click into that, I click that 
link and I dive into app 
experience.side is important but
 also have think about home 
entry still.  This was shown at 
the developer keynote of 
actually getting use the, an 
Android O integration with 
launcher allows you Apps
 Here you can see I typed in NY,
 it recommendation of New York 
Times Instant App and I pull 
that onto my homescreen and now 
when I click it, it me into the 
homescreen of the cross puzzle. 
 It is t hinking about the 
context of the user and them 
driving into the homescreen of 
the

native app.  We think install 
friction.  are friction we are  
to solve across the native app 
experience.  We  remove friction
 we heard from 
developers.  So sign? Is one 
where sometimes you are asked to
 sign in when you have no idea 
what the app is about. 
   Other times with purchasing, 
you may not have a credit card 
around, and yet you still want 
to purchase.  How can we remove 
those friction  points from 
apps?  I mentioned before, sign 
in sometimes with installable 
apps because you already gone 
through friction point. You know
 the user flow the user is going
 through so decide to have them 
sign up When are coming through 
the side entry, you may not want
 a sign in to right we have a 
number our partners who in their
 installed had mandatory sign in
 front, had removed that and 
decided to in a point in the 
flow they felt that the user 
understood they would signing in
 and value of in.
   Instant also uses Smart Lock 
for Androidwhich allows you to 
continue tobe signed between 
AndroidChrome desktop, I'm 
sorry, Chromeand Chromebooks as 
as continued signed in App 
sessions.  purchasing, there is 
digital purchasing and physical 
purchasing.  Digital purchasing 
is very to what  where identical
 to experienced installed is in 
app bigyou will continueto use 
with Instant Apps.  For 
purchases we excited talk about 
Google payment API.  Some of you
 mayhave heard about it in the 
developer where assistant 
mentioned it, and there was also
 another session specifically 
talking about the Google payment
 API.  Weexcited to have part of
 Instant 
   So are hundreds of millions 
of cards that already on file, 
and when you are thinking  a 
entering into an Instant lot 
times they are a user.  They may
 not have a form of payment 
credit cardon file with you, but
 they have a form of payment on 
with Now, they can access 
payment, API and access that 
credit card.  you see  Jet is 
using the Google payment API,
just click pay and Google 
payment API or the Google Pay 
up, it my credit card and  and 
with just a few clicks I'm done 
with my purchase. 
   So  mentioned before that Jet
 seeing an increase propensity 
for  to purchase  they the 
Instant App and they s eeing
great numbers what I'm is how 
much of that is from the 
decreasing install friction and 
how much is decreasing payment 
friction?  And as we get more 
and more data I'm excited to 
parse that out and understand 
how much is coming from each,  
now, Jet has told us they are 
seeing increase purchases. to 
say, mention we don't want you 
adding additional friction 
points.  And with our early 
partners we did a lot of 
testing, we tried different 
stuff out and we realized that 
the thing we to do is get the 
user to the action theyto doas 
quickly as  early  partners 
tried splash screens a lot tried
 i nstallation prompts and we 
think getting rid of all of the 
friction points allows  smooth 

experience in your Instant App. 
 They have   it and now they 
want to install.  a number maybe
 24EZ to do offline usage.  We 
encourage  in that case.  So 
let's talk about that experience
 looks like when a 
install.  of we the of 
installing in the Instant App.  
There this in API, play install 
API allows you to install in 
line when you are in an Instant 
App.  I'm the red bull video.  I
 this video you and I want to 
have -- awesome.  It me to 
install without having to the 
Play you want to take into 
account copying the user 
information from the Instant App
 to the installed app so you 
know in this history was you can
 put them right back the video 
they watching when they hit open
 installed app.  Now, let's 
about the that you can actually 
prompt a user to install.  There
 two ways.  The first one is 
explicit installations.  This 
means that knows that they  
about  install  they hit button 
it install. 
   The second is implicit are 
when click  App and the feature 
might not be available  offline 
 so  prompt  user if you to use 
this feature, please install.  
talk about tools that we have 
driving installation.  The first
 one, as I mentioned is explicit
 installation.  You include the 
install, the install string and 
the install, theinstall iconhere
 and you can Amber did a great 
job with  embed it in their UI. 
 They want the user to get the 
information they came for, which
 is the weather.  They want to 
show all these great things they
 within their app but now if the
 user wants to install, the 
button  right there, feels 
really part of UI.  Wish a great
 job including is in their 
drawer.  and easy the they want 
to install to install right  
there.  Implicit installations 
as I when you click a button in 
the Instant App and that feature
 is not yet 
 Yumly has some personalized 
things that theydo that would 
only like in theinstalled app.  
That's great.  That's fine.  
here see 
that it prompts the user to 
install and it gives context to 
why the user has to install. 
 Early partners have tried both 
explicit implicit installations.
  We encourageyou not to it 
disruptive.  And if they choose 
to continuepotentially to that 
you them an option to 
do so to you built this amazing 
Instant You have thought about 
different pointsdifferent that 
are important for thought about 
decreasing from to i 
nstallation.  So now you are 
ready to track your success.  
What does that look
 like? 
   First you need to upload your
 Instant to the Play Console.  
This is going feel very to your 
app.  We have three different 
tracks.  There is development 
pre release and the prod track. 
 allows you do front and make 
sure you are production.  Also 
the latest update that you push 
will go directly to your user.  
We will serve directly to the 
userso if click theURL you the
App.
   We are also big proponents of
 experimentation so we created 
mobile hold back.  This allows 
you to hold back percentage of 
your traffic go to the mobile 
Web.  If put 2, 20% of yourwill 
go to the mobile Web and 80% 
will go to Instant Apps.  This 
enables you to do testingand 
experimentation.  We know have 
optimized for years and your 
native  you have optimized  
mobile website and have 
optimized your desktop and we 
want to make sure give you tools
 to optimize Instant Apps and 
try to make it the best property
 that you can. 
   So let's about now of metrics
 will now tracking in instant  
Instant might be different than 
how you thought  it with install
 apps.  I showed two flows, one 
is where you start an app at the
 play store.  Youinstall your 
you sign up and you then browse 
engage with content of
 the nativeapp, and then For 
Instant
 Apps a start flip around.  
First, you 
   You then can immediately 
engage without signing up, you 
actually can purchase 
without the eCommerce category. 
 you won't necessarily install. 
 So youhave to start thinking 
what different metrics that you 
track important in Instant Apps.
  First you would want to 
separate installed apps and 
Instant Apps when you are 
tracking to see different 
behavior.  Maybe for your 
installed app acts differently 
than for your Instant App.  
That's because you are creating 
different flows.  The be coming 
through a door so the user act 
differently.  You may think 
about signed users versus 
non-signed in users so some of 
our partners signed in and now 
that they have pulled that moved
 it to different point in App 
are to in users. 
   You also have think about URL
 traffic which you may not have 
considered in the past.  Now, 
Google for Firebase has covered.
  with Google for Firebase to 
make all of these metrics  to be
 for your Instant App.  They 
continuing to us to put tracking
 and thinkthrough additional
complex make sense in Instant 
Apps.  For our early partners a 
lot have their current SDK.  So 
now that we are opening 
documentation today we are 
excited to to more Analytics 
providers and start thinking 
about more metrics we need to 
start the SDK.
   So with of these partners 
have shared with me, I have 
noticed a When first started 
with Instant they to me about 
installation and there been a in
 our conversation where talk 
about engagement I showed in 
flow it used tobe that inorder 
to a successmetrics you have 
install first.  So installation 
became aproxy for success.  We 
have kind of that around,and now
 developers aresaying how 
optimize the tickets purchased? 
 How do I optimize the flights 
found?  How about watch our 
about time spent reading 
football articles.  So all of 
this has changed a bit and we 
are to how you guys start 
thinking about metrics in a 
different way. 
   Sop let's

that anyone can build an Instant
 App.  You can go to G.
CO/instant Apps.  I about the 
gig motivation for  is App.  
Thinking about c urrent, new and
 completely new use cases.  The 
thing I about is what should in 
mind as guiding principles as 
you in parallel do development. 
 We talked about one app, 
different entry points, 
decreasing friction identity to 
payments installation, as well 
as metrics.
   There are two talks I would 
encourage you to go today.  
first one is 
at 3:30.  it's really exciting 
and encourage you to learn how 
they are going to take an 
installed app and it into an 
Instant I done my best to 
channel developer voice from 
talking to all of our early 
partners, but it's much better 
to hear directly our So I 
encourage you to go to who is 
the lead Developer manager for 
Instant Apps and she have on the
 panel cast box, vimio, 
delivery,  and parascope and 
they will talk about their 
experience and will best 
practices. 
   Thank you  I'm you all I'm 
happy take questions you and 
visit us in Sandbox Dome C and I
 will there also to answer 
questions after the talk.  Thank
 you.
   (Applause).
   (Concluded at 5:00 CT).







.
Test test  test
   &amp;gt;
&amp;gt;
   &amp;gt;&amp;gt;
   RAW FILE
   GOOGLE I/O 2017
   SAN JOSE, CALIFORNIA
   MAY 18, 2017
   10:30 AM CT
   STAGE 6
   THE FUTURE OF WEB PAYMENTS
   T37A77

           Caption First, Inc.
           P.O. Box 3066
           Monument, CO 80132
           800-825-5234
           Www.captionfirst.com
   ***
   This text is being provided 
in a realtime format.  
Communication Access Realtime 
Translation (CART) or captioning
 are provided in order to
 facilitate communication 
accessibility and may not be a 
totally verbatim record of the 
proceedings.
   ***
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;






Store.






oogle Play Protect.
     Machine
 Learning
.  Verify apps 
Verify Apps 
API.  Cap chai.
cha.
     Sate net, safety

SafetyNet, verified 
Verified 
Boot.  Lollipop.  
Lollipop. 

R ansomware, SE

SELinux.  Project
 Project 
Treble. 

WebView,
 WebView, Kit Kat,

Kat, 
WebView,

FIDO.

API. 
   &amp;gt;&amp;gt; ADRIAN LUDWIG:  Welcome 
this afternoon to our talk on 
Android security, my name is 
Adrian.  Xiaowen Xin will be 
joining us in just a minute as 
well.  It will be a bit of a 
whirlwind tour.  If I talk to  
too fast I 
apologize.  There has been a lot
 going often in
 Android play.  So we will touch
 on that as we go through today 
and give you the information 
that you hopefully need and 
certainly seem to want.  We have
 a lot of people 
here today.  What we are going 
to cover is talk a little bit 
about security services and from
 there hand offtalk about the 
core operating system and app 
security.  Yesterday we heard 
mention of something new, 
excite, Google play protect.  
What is Google Play Protect.  
The core is an engine we have 
built to protect all of the 
devices 234 the Android 
ecosystem.  This slide has grown
 year after year and we talk 
about over 2 billion devices 
around the world protected by 
those services.  Scanning over a
 billion devices and c hecking 
over 50 bill ondevices and 
applications every day.  So 
incredible scale.  The reason we
 have that scale is because we 
need it to be able to see what's
 going on on the  ecosystem 
that's own a mass almost the 
majority of devices out there in
 the world. 
   To be able to actually look 
at that data requires 
computational resources.  It 
turns out Google has quite a few
 of those.  We use a tiny sliver
 to look at the data.  Over 
20,000 looking at application 
data, analyzing it, divetion 
deep into every single new 
application we find.  And trying
 to understand how they behave 
in our environment, how they 
behave out in the real world and
 what risks they might pose for 
users. 
   The reason we do that is to 
protect users, so one of the 
most important things that we do
 is try to keep an eye on what 
is the risk that users are being
 exposed to?  Clearly over the 
last few years is users of 
Google Play are in a much safer 
position.  They are about 95% 
safer if they are installing 
applications that come from 
Google Play.  The reason is we 
are able to use data gathered 
outside of Google Play and 
analyze that in the context of 
an environment that's much more 
controlled so applications at 
the time that they are uploaded,
 we are able to analyze them, 
understand what's in there and 
make good guidance and provide 
that guidance. 
   We also provide those 
protections outside of Google 
Play.  So that's what we wanted 
to show here is over the last 
few years we have been carefully
 tracking this, keeping an eye 
on what's going on and making 
sure users are protected.  From 
my perspective it's all about 
the g raphs.  But that's not 
really how most people think 
about security because most 
people aren't looking at the 
entire ecosystem at once.  What 
they want to know is am I safe? 
 So that's  really what the 
announcement was yesterday 
putting really in a brand 
understanding that these 
protections are there and making
 them more and more scriesable 
to users -- visible to users and
 that Google is standing behind 
the protection.  Google is going
 to protect you on your Android 
device and make sure we have the
 best protections in place 
throughout the devices. 
   So that's what we are 
focusing on.  How do we do that?
  We do that in a variety of 
ways.  We are investing 
increasing intelligence, the 
ability to analyze what is going
 on in these devices, expanding 
the scope and the types of 
protections we provide, and also
 quite simply switching from 
that graph mind set that I have 
latched onto in my life into the
 user mind set where what they 
want to know is am I being 
protected now?  Am I being 
protected, what it is that 
Google is going to look out for 
me.  So we have a lot we are 
doing in terms of increasing 
user visibility.  When I talk 
about the increased protection, 
one of the most important things
 we have learned is that we 
can't do it all as humans.  When
 you are talking 500,000 new 
applications that are discovered
 and analyzed every day, more 
and more we have to rely upon 
the intelligence of machines to 
be able to do that type of 
analysis.  One of the largest 
areas we have been investing in 
is what everybody refers to as 
Machine Learning or artificial 
intelligence at its most sort of
 simplistic.  What it is is it's
 us working with the machines to
 train them.  This is a picture 
of a clustering algorithm that 
has grouped different types of 
malware based on behaviors that 
those applications exhibit in 
the world.  So when we are 
looking at 500,000 new 
applications every day, a 
clustering of them gives us the 
ability to hone in on the ones 
we think are highest risk.  
Those may be applications that 
are brand new that no one has 
installed.  Those may be 
applications that have been out 
for a while that we are starting
 to see a change in their 
behavior.  The key is using 
these systems to understand and 
make those kinds of quick 
decisions so that a user doesn't
 have to make them, so that you 
as a developer don't have to 
make them either and you don't 
have to guess because you can 
rely on the investments we are 
making to analyze those data 
points and help make the 
decisions for you and inform you
 about what's going on on these 
devices. 
   The other thing we have begun
 to recognize is sometimes we 
just name things wrong.  There 
is a feature rereleased a couple
 of years ago called Android 
device manager.  How many have 
Android device manager 
installed.  For this audience 
it's 20%.  So you are an order 
of magnitude higher than the 
overall user base in terms of 
percentage of people that have 
Android device manager 
installed.  Not shocking and 
given who we are and how many 
are Googlers.  Find my device, a
 simple way to take an existing 
set of technology, expose it to 
users and make  it easier to 
understand. 
   Battery and Wi-Fi status, 
tracking the device in the 
background so that if it gets 
turned off, you know where it 
was before it was turned off, 
you don't have to do the queer 
in in real time.  A number of 
basic usability features to make
 Thursday that sh functionality 
can be increasingly valuable for
 users.  The most security risk 
that the average person is 
exposed to is this one.  It's 
losing their device whether it's
 accidental or whether it's 
someone taking the device out of
 their possession. 
   The other thing we wanted to 
do is let people know that this 
is h appening.  The number of 
times that I have read the 
statement Google doesn't look at
 the applications in Google Play
 just employees my   blows my 
mind.  Every application goes 
through a rigorous screening 
process both at the time the 
developer is enroll rolling to 
become a member of Google Play 
processing, and every single day
 after that we reanalyze those 
applications.  So there is 
absolutely a lot of intelligence
 going on in the background that
 simply wasn't exposed.  And so 
a lot of the work we are doing 
now is to figure out how to 
delicately indicate to the user,
 whether that be a consumer or 
an Enterprise, yes, this is 
happening, we are checking these
 things and we have got your 
back. 
   It's not just about 
consumers, right?  It's also 
about application developers and
 making sure that they have the 
ability to leverage services as 
well.  Right now Google Play 
services is rolling out a new 
version and one of the APIs that
 is exposed is what we refer to 
as verify apps API.  We have 
talked about verify apps which a
 mechanism used to evaluate on a
 device and to check for a user 
on a device whether something is
 potentially harmful or a piece 
of malware.  What we have done 
with the Verify Apps API is made
 that available to any 
application on the device.  If 
you are concerned about whether 
your application should be 
running you can check are there 
any other apps on this device I 
should be worried about.  What 
are those applications?  Let me 
know what they are.  And you can
 evaluate whether or not you 
think it's an appropriate 
environment as the application 
developer for your application 
to continue to execute.  That 
builds on other technologies 
that we have provided in the 
past.  Last year at Google I/O I
 referenced the safety net 
attestation  attestation API.  
We use to determine whether it 
is a certified secure Android  
device.  We provide that as a 
signed statement.  You invoke 
the attestation API it hits a 
round troop off a server.  We do
 an evaluation of the software 
integritiy on the device.  And 
make a statement back to you, 
yes, this looks good or no, it 
doesn't.  This is one of the 
critical pieces of technology 
that allows for delivery of, for
 example, Android pay where 
there is a requirement that this
 be a certified device and it be
 operating in that environment. 
 It's an API we have made 
available to any application 
that wants to take advantage of 
it.  We are going to continue 
adding these technologies.  
Captcha was a technology 
introduced 10 years ago to do 
quick evaluation of whether or 
not the entity interacting with 
your Web UI was actually a 
human.  That's now being 
provided as a safety net API as 
well, so in the context of your 
evaluation you can you a 
re-Captcha to see whether there 
is automation of.  This is low 
cost services that you want to 
continue to make available for 
free but you want to cut down on
 the amount of abuse that's 
coming through bot farms and 
other automation, very valuable 
for large scale Web properties. 
   One of the things that's come
 out of us being able to 
understand what's going on in 
the ecosystem is the ability to 
revisit some of the technologies
 that are actually baked into 
the core platform.  Unknown 
sources was a flag that was 
introduced when Android was 
launched almost eight years ago.
  That gave the individual the 
ability to change  where they 
want to do install applications 
from.  Over the last few years 
we have begun to understand what
 those install patterns look 
like.  We have been able to 
analyze what the risks are that 
users are exposed to.  We have 
come to appreciate that Google 
Play is a safer place to install
 applications from, but we have 
also come to appreciate that 
there many other safe places to 
install applications from as 
well.  So we want to simplify 
for the user the ability to 
install from other safe places 
without introducing the risk of 
installing from just your R 
anywhere that's out there.  One 
of the changes introduced with 
Android O is a modification to 
how unknown sources works.  Now 
it's on a per application  
basis.  You decide, yes, that 
app store, it can install, but 
that doesn't mean everybody can 
install and that's targeted at 
making sure that apps are 
installed from more trustworthy 
users where the user has 
designated that trust to the 
specific entity.  Those are the 
changes we are making at the 
platform level.  I have Xiaowen 
Xin here who will give insight 
into some of the other changes 
we are m aking. 
   &amp;gt;&amp;gt; XIAOWEN XIN:  Thank you, 
Adrian.  My name is Xiaowen Xin,
 I'm a product manager for 
Android platform security and 
today in this next section of 
the talk I with like to give you
 an overview of the changes we 
have made to the operating 
system to make it more secure  
as well as the hard net.  We 
have  collected a lot of data on
 the impact and adongs of these 
features.  I'm excited to share 
some of that with you.  So let's
 dig in.  We will start with the
basics.  And that begins with 
verified boot.  So verified boot
 is Android's secure beauty 
mechanism where we check the 
signature of every stage it 
boots before running it.  That 
has come a long way in the last 
few years with Android 
marshmallow we started requiring
 Verified Boot for all devices. 
 With Android knew gat that 
became, Verified Boot is now 
strictly enforced and now with 
Android O we are providing 
guidance to our AM ecosystem to 
add a couple more security 
enhancements to round out the 
features of verified boot 
starting with protection.  On 
compatible devices on an droitd 
O Verified Boots will no longer 
bite an operating system that's 
known to have been back to an 
older potentially more 
vulnerable version.  Also with 
Verified 
Boot, we have hardened the 
unlocking mechanism.  What that 
means is any bugs or any 
compromise in the Android 
operating system cannot unlock 
the boot loader by interacting 
with the boot loader itself. 
   So while Verified Boots 
protects your operating system, 
Android uses encryption to 
protect user
 data, and that has also come a 
long way in the last three 
years.  As of Android march 
mellow all compatible d evices 
are required to support 
encryption.  They are required 
to be enabled by default.  As of
 Android Nougat we added file 
based encryption where we ebb 
crypt different storage areas 
with different keys.  File based
  encryption made the user 
experience much better without 
sacrificing security.  As an app
 developer if you are interested
 in running your app before the 
user first signs in, before the 
user first unlocks their device,
 check out our FBE documentation
 on the developer website.  With
 Android O we have continued to 
improve on FBE and added in a 
few more features such as key 
ejection. 
   So how are we doing with 
encryption?  We have listened to
 the data and seen that over the
 last few years encryption on 
Android, we have seen a 
significant 
adoption.  Android devices 
encryption was very, very low, 
on march mellow, that jumped to 
25% and in Nougat we are  seeing
 around 80%.  We started 
requiring eniption cription on 
compatible devices as off 
Android marshmallow.  The reason
 the number didn't jump 
immediately to 100% is due to a 
couple of factors, one is a lot 
of marshmallow devices were 
upgrades from Lollipop so those 
devices were not required to be 
encrypted when they shipped and 
also because of the wide variety
 of dough vises supported by 
Android, we still see a lot of 
very local performance devices 
that are not yet capable of 
supporting encryption.  
Nevertheless, we could expect 
that number to continue to 
increase, and we see that 
encryption on Android is the 
norm and no longer the 
exception. 
   Another way in which we are 
protecting user data is to 
improve the secure lock screen 
experience.  Request Android 
marshmallow we introduced 
official support for finger 
print sensors and that had a 
significant impact on the 
adoption rate of secure lock 
screen.  Also we have been 
working with 
manufacturers to make the 
implementation of a secure lock 
screen much more secure.  From 
the very beginning, finger print
 implementation it went through 
preliminary eliminated and 
hardware.  Such as the TE.  With
 Android Nougat we started 
requiring pin pad verification 
take place in secure hardware 
and with Android O we are adding
 in support for tamper resistant
 hardware.  So similar to the 
chip that you see in credit 
cards today, Android now 
supports having that chip be 
embedded in the hardware and 
using that chip to do pin pat 
person password verification. 
   This significantly raises the
 bar, makes it much harder to 
perform a his cal attack against
 a device to bypass the lock 
screen.  So how are we doing 
with lock screen adoption.  We 
see that that has also increased
 quite a bit over the last few 
years.  On Lollipop devices 
adoption was only about half and
 half.  That increased to 70% on
 Android Nougat devices and a 
lot of that is driven by the 
fact that a lot of devices have 
finger print sensor.  And finger
 print devices are much more 
likely to have a secure lock 
screen then across the Android 
device system.  We do see apps 
such as Android Pay and 
Enterprise apps require enabling
 secure lock screen to function 
properly so that might is also 
have had an effect. 
   As developers, you might want
 to consider taking, really 
taking  advantage of the lock 
screen and incorporating that 
into your application.  We see a
 lot of apps incorporating 
finger print 
authentication.  So while 
encryption and lock screen 
protects user d ata.  Android 
has a robust permission model to
 give you control over app 
access to data.  That has also 
improved quite a bit over the 
last few years. 
   With Android marshmallow, we 
introduced one time permissions 
and we see great adoption there.
  With Android Nougat and 
Android O, we are continuing to 
update the permissions model to 
make it more usable by good apps
 and less abusable by bad apps. 
 Before we go into the details 
of that, let's check out how run
 time permissions are doing.  We
 looked into permission 
requests, and so for each 
request for, let's say the 
camera permissions, we see that 
about 65% of users, 65% of those
 requests are accepted by the 
users.  So that's towards one 
end of the spectrum.  Oardz the 
other end of the spectrum, we 
see that for the phone group of 
permissions, only about 44% of 
the permission requests are 
accepted by the user.  So users 
are actually very  judicious in 
controlling which apps have 
access to what data. 
   So I think there are a couple
 of take aways here for apps.  
The big thing is, of course, the
 follow up permissions best 
practices so you can take 
advantage of one time 
permissions and provide the best
 user experience.  As an 
example, you should always make 
sure that users know why you are
 asking for a particular 
permission and be able to fail 
gracefully if they decline that 
permission request.  In some 
cases you may not need to ask 
for per submission.  For 
example, you may be able to use 
a contacts picture instead of 
requesting a contact permission.

updating our permissions model 
is to make it less abusable by 
bad apps.  So take ransom were 
as an example.  We have seen 
instances of this type of 
malware that take over your 
device and then demand payment 
before they let you back in. 
   And they typically abuse two 
permissions.  First they use the
 system alert with no permission
 to display an overlay on top of
 your entire screen so that you 
can't interact properly with 
your device.  To address that on
 Android O we have changed the 
system alert window permission 
slightly so that overlays, app 
overlays can no longer cover up 
critical system Windows.  They 
can no longer cover up the lock 
screen the status bar and the 
IEM as examples.  Also when 
there is an overlay, an app 
overlay being shown there is 
also a notify indication users 
can click on to hide the overlay
 window. 
   Ransom were also  ware, they 
used it to prevent their own 
uninstall and change your pass  
code to lock you out of your 
device.  Over the last few years
 we have been descoping admin 
permission and replacing with a 
less abusable alternative.  An 
driewd Nougats bad apps can no 
longer use admin permission to 
prevent uninstall and they can't
 use it to change the pass code 
if you have run set. 
   So -- one set. 
   So learn more we have a talk,
 one of our co-workers gave at a
 different conference, so check 
that out.  Another way in which 
we have updated permissions 
model in order to protect users 
it to take a stronger stance on 
privacy.  Over the last few 
releases of Android, we have 
been steadily removing access to
  persistent device identifiers.
  For example, on Android O, the
 Android ID property is now 
scoped peruser and per app. 
   The net.host name property 
which contains the network host 
name of your device is now 
empty.  To learn more about the 
changes in Android O regarding 
persistent device identifiers, 
check out the blog post on the 
screen that will tell you all of
 the changes as well as best 
practices.  So everything I have
 talked about so far relates to 
installed apps.  So what about 
Instant Apps.  If you guys were 
here in the last session, 
actually in this tent, there is 
a session about Instant Apps.  
So Instant Apps for those who 
don't know, is a future coming 
to Android where you can click 
on a URL and open it immediately
 in an Android App even if you 
don't have the app installed. 
   So that has a potential to 
greatly improve user experience 
as well as increasing the app's 
user engagement and conversion 
numbers.  On the other hand, 
opening up arbitrary URLs and 
apps also comes with associated 
security and privacy risks.  So 
how do we want to address that? 
 We are addressing that by 
creating an updated provisions 
model that is really tailored to
 the capabilities and 
characteristics of an Android 
Instant App.  In particular, 
Instant Apps will have security 
and privacy best practices baked
 in.  For example, Instant Apps 
must use run time permissions.  
And Instant Apps will use HTTPS 
instead of HTTP by default.  
There are a lot of Android 
permissions that Instant Apps 
cannot access.  She cannot 
access any persistent device i 
dentifiers. 
   And a better example is she 
can't access the  contacts 
permission.  You must use  a 
contacts picker instead.  As app
 developers if you make a normal
 act deployable as an in
stability app.  It makes injure 
normal app much better too 
because you are automatically 
using security and  privacy best
 practices.  As userrers your 
device becomes safer too.  So we
 are excited about the Instant 
Apps model. 
   So while permissions is 
related to control app access to
 data, within the operating 
system itself, we use a Sandbox 
device on every process on every
 app to limit the ways in which 
a  compromise in one can affect 
the others.  For many years in 
Android we have been steadily 
improving the application 
Sandbox in force with SELinux.  
And we will see how that's doing
 in the next slide.  And Android
 Nougat we applied the same 
Sandboxing principles to the 
media server to significantly 
harden it.  And now in Android O
 with Project Treble.  We are 
taking isolation to the next 
level by  putting device 
specific components into their 
own Sandboxes. 
   So how are we doing there?  
We have data into the Android 
security bulletin data for the 
first mor months of the year.  
We looked at the kernel bugs and
 almost half of the kernel bugs,
 SELinux we do see  reduced very
 vairt of the kernel bugs.  By 
making parts of the kernel 
unreachable by untrusted apps we
 made it so that it's harder to 
exploit those parts of the 
kernel and that's what SELinux 
helps with.

took the same Sandboxing and 
isolation techniques and applied
 it to the media server.  In 
older versions of Android, the 
media server used to be this one
 giant monolithic complex 
process that had access to 
permissions and Android we broke
 that up into six different 
processes and put that into 
individual Sandboxes with much 
tighter permissions so that a 
compromise to any one of them 
only grants access to a small 
subset of the permissions and 
not the permissions of the 
entire media server.  
We also integrated integer force
 where we are able to detect 
memory corruption that results 
from integer overflows.  This 
helps us find a lot more bugs 
earlier in the development 
process and limited the severity
 of any bugs that occur at one 
time. 
   So how do we do there?  We 
looked into the bugs, the 
security bulletin bugs for the 
first four months of the year 
and we sue that although media 
stack bucks that affected 
marshmallow more than 20% are no
 longer security issues and a 
few more bugs on top of that 
downgraded in severity from 
marshmallow to end.

 in Android O, we took Sandbox 
in isolation to a whole new 
level with Project Treble.  With
 Project Treble.  We are putting
 Android, the Android OS 
framework and the vendor i 
mplementation, the device 
specific vendor implementation 
into different process that's 
communicate with aeach other 
using a standard vendor 
interface.  This vendor 
interface will be maintained 
from version to version, which 
means a newer an destroyed OS 
framework will run with  minimal
 changes on top of an older 
device.  That paves the way for 
us to release new Android OS 
versions with shiny new features
 and new security enhancements, 
and have it be adopted much more
 quickly by the ecosystem.  So 
that's very exciting for 
security. 
   Also the vendor interface 
allows us to enforce a boundary 
between the framework and the 
vendor implementation so that we
 can use it to limit the ways in
 which a bug in one can affect 
the other.

back to the media server.  As 
part of Project Treble, we have 
rearchitected the media server 
again in Android O, and taken 
the audio camera and DRM, 
hardware obstruction layers and 
put them into different 
Sandboxes.  What that lets us do
 is to say the firmware pieces 
actually now no longer need 
access to the kernel components,
 the kernel drivers that 
comproal media play back.  So we
 can put the PCs into tiny 
Sandboxes as well and they an 
exploit compromising the kernel 
it's harder for the compromise 
to exploit certain 
areas of the kernel.
   All right.  So speaking of 
the kernel, why is kernel, why 
is the kernel important?  In the
 last year, we have spent a lot 
of time hardening the kernel.  
And we did that for one major 
reason.  We see the kernel bytes
 are becoming a much larger 
proportion of Android security 
bugs where there as in 2014 
about 4% of Android security 
bugs were kernel bugs.  That 
number increased significantly 
to 44%.  And there are probably 
a couple of returns for  returns
 for this. 
   One is we made progress in 
hardening the user space so, for
 example, the application 
Sandbox enforced by SELinux 
that's gotten better over time 
and in order to break out of 
that application Sandbox, in 
order to break out of the 
SELinux Sandbox, you have to 
compromise the kernel.  Also the
 kernel is very powerful.  It 
has a large attack surface.  
It's kind of like the king piece
 in a game of chess.  You take 
the kernel and you win the game.
  So we decided to spend a lot 
more time thinking about how to 
harden the kernel.  So we looked
 into what causes kernel bugs.  
We looked into the data from 
2014 and 2016, and categorized 
different kernel bugs into 
different categories and we see 
that the largest category 
accounting for about 45% is this
 missing and incorrect bounce 
check when we are copying data 
from the user space to the k 
ernel.  We presented this exact 
same data to Linux upstream 
community and to the them last 
year and to their credit they 
were responsive.  Within a fume 
of months they gave us a 
featured called hardened user 
copy that addressed kernel bugs.
  We have since then back 
printed user copy to the Android
 kernels and we have invented a 
few more security features on  
on betop of that.  We have KSLR 
and many others so all of these 
kernel features taken together, 
we will expect that they will 
have a huge impact on the number
 and severity of kernel bugs in 
the future.

protecting the kernel is to 
reduce its attack surface.  We 
are using a technology called 
Seccomp to enforce a white list 
of system calls that apps can 
use to communicate with the 
kernel.  Any system calls not on
 the white list will be blocked 
by the Seccomp filter.  So 
everything that is on the white 
list, that includes the system 
calls made by all public 
libraries that is put in 
Android.  So if you have tested 
in of the top apps as well as 
Google apps so we expect that 
this won't actually impact 
almost any app, but if you do 
have an app that uses a lot of 
native code, we do encourage you
 to test that app on an Android 
O device to make sure that any 
system calls that you make are 
not affected by the new Seccomp 
filter. 
   Having this white list of 
kernel interfaces allows us to 
really focus and concentrate our
 quality assurance efforts on 
this well defined wit list and 
also be sure, be more confident 
that the rest of the kernel is 
protected and that it's much 
harder to exploit the rest of 
the 
kernel.  Seccomp is actually not
 new to an destroyed.  Chrome 
has been using it quite a while 
in fact.  To Chrome has their 
own app defined Seccomp filter 
around the renderer process.

to make a few guarantees they 
want to guarantee that the 
renderer process can read global
 states but it cannot modified 
global state and in fact this 
has been quite useful quite a 
few times.  Recently we have 
seen a few kernel bugs that were
 unreachable from renderer 
relevant Seccomp. 
   Okay.  So that was quick the 
 of the  relevant  Android now 
turn  app security.  particular 
we talk about a couple that 
improve the your 
apps.  First, go Web
 view.  So Webview has with 
Android since very  It shipped, 
until KitKat it with the 
operating system means that is 
not easy us to bugs and get them
   We addressed that with 
Lollipop when made Webview 
separate APK that updatable 
every six weeks by the Play 
Store.  And now with Android O 
we have added quite a bit more, 
a few more security features to 
Webview. 
   In particular, the Webview 
renderer process similar to how 
it runs on Chrome runs as an 
isolated process separate from 
the  rest of your app.  This 
means that crashes or 
compromises to renderer process 
no longer affects your app and 
any website that is able to 
exploit the progress can't use 
that to exploit the rest of your
 app.  The practice is put into 
a tight Sandbox using Seccomp 
and other technologies, it can't
 write to the network, talk to 
the network or write to disk on 
its own.  That protects the rest
 of the operating system for 
exploits in the rendering 
process.

browsing.  Safe browsing has 
been available on Chrome for 
quite a long time.  When 
visitors visit a website known 
to be malicious, safe browse 
will show a warning and prompt a
 user before continuing.  Safe 
browsing has been showing useful
 warnings to users more than 250
 million times per month, and 
now it's coming to W ebview on 
Android. 
   Safe  browsing is actually 
implemented within the Webview 
APK updated ifer six weeks about
 the store, you change your app 
protect your users almost
 immediately.  A very important 
aspect of app security is device
 and user authentication.  So 
why is device authentication 
important?  If you are using 
your phone to buy things or to 
unlock your home door, you want 
to make sure that no one can 
pretend to be your phone. 
   And so what you can do is you
 can use the Android Q store API
 to u niquely identify your 
device.  The benefit of using 
the key store keys are protected
 by secure hardware such as 
trusted execution environment so
 even in the event of kernel 
compromise no one can extract 
the keys and clone them to 
another device. 
   There is always one question 
remaining though, which is how 
do you actually know that those 
keys are properly protected.  
Let's say you are on the server 
side, how does your server 
verify that you are talking to a
 device using keys that are 
properly protected by secure 
hardware?  This is where key 
attestation comes in.  With 
Android O, we are adding in a 
attestation API for compatible 
device where's at a high level 
your server can talk directly to
 the secure hardware, the trusts
 execution environment on the 
device, and ask it to give you 
signed assertions about the 
properties of the keys that it 
protects as well as about the 
properties of the device. 
   So, for example, the key 
attestation API can tell you 
whether the is protected by the 
securehardware.  It can also 
tell you, for example, whether 
Verified Boot past on that 
particular deTheattestation 
certificate chain on compatible
devices is actually rooted ina 
Google certificate.  That's how 
knowthatdevice itself is Google 
and is compatible with Google 
standards.
   All right.  So was device 
authentication, what about user 
authentication.  Weare happy to 
let everyone that the next 
version of Google Play  adding  
This is a test. is a testAPIs to
 .prevent FIDO security keys.  
They are accepted by many major 
websites such as G oogle, 
Facebook and  GitHub.  And 
security keys are faster to 
authenticate and harder to 
phish.  we know  for a of users,
 one of the most important they 
can do to secure their user 
account is enable factor 
authentication so they are 
excited asecurity case report is
  to 
Android.  So to up, covered a 
lot material, we talked about 
all kinds of improvements in the
operating system, wetalked about
 app security.  you want to know
 more about making app more 
check developer R.  well best 
practices, we a couple of 
Codelabs here at I/O that you 
can try out at the kiosks or try
 out on line.  So thank you for 
your attention, and if you have 
questions or any comments, feel 
free to email at security@A 
ndroid.com and will be back 
stage.  Thank you.
   (Applause).
     (Concluded at 6:07CT)
  Testi
ng


&amp;gt;
&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt;
   &amp;gt;&amp;gt; Android Android
 Android

Studio. 
   &amp;gt;&amp;gt; JOHN HOFORD:  I'm John 
Hoford and this is Nicholas 
Roard, we both work on 
constraint layout and the 
Android Studio design surface.  
Nicholas will sort of give us a 
little
 introduction to the whole 
thing. 
   &amp;gt;&amp;gt; NICHOLAS ROARD:  So hi, 
everyone.  We are  going to talk
 a little
 bit about constraint layouts.  
So quick summary about what's 
here as far as Google 
developers.  What we want is 
really to make sure life much 
better.  And we want to listen 
to what you have to say any 
feedback, ideas, requests, you 
know, anything, we really are 
looking into that.  And we try 
to move fast, you know, since 
last year at I/O, we released 
the stable regression of 2.2, 
2.3 and we are now working on 3.
0, and I strongly encourage you 
to test 3.2.  There is a lot of 
improvements in the  layout. 
   And specifically for the 
layout of the visual
 designer our goals are 
relatively simple.  Basically we
 want you to be able to 
visualize l ayouts, we want you 
to be able to create the layouts
 easily, and all of that being 
efficient.  We don't want 
you to use your name for no 
reason. 
   &amp;gt;&amp;gt; JOHN HOFORD:  We want to 
just give you a brief overview, 
the lay of the 
land.  Designer to give you an 
idea how it all comes together. 
 One of the things you can do do
 in track cool La mode and we 
could go back to the other one. 
 Now, we have on the left-hand 
side the palette it's basically 
where you can drag and drop your
 Widgets onto your design 
surface.  Then the component 
tree, then comes the inspector 
and we will have much more about
 that later.  Then the Core 
design surface, and there is a 
Toolbar. 
   We also have a right click 
menu.  So people, a lot of 
people kind of forget that there
 is a right click menu.  If you 
select an object, you can click 
on it and right click and you 
will get useful actions 
associated with what you have 
selected.  So the other thing 
that you can switch to is 
blueprint mode.  You could also 
switch to two screens at once.  
The blueprint mode is kind of a 
blueprint, it's a rough outline,
 a sketch of your UI, the design
 surface is actually being 
rendered in layout, which is a 
sort of emulator of Android.

also can do is use, use the 
designer in the XML editor mode.
  So if you are in the XML 
editor and you press the 
preview, you get essentially a 
full design mode right there. 
   Notice if you select, it will
 actually navigate you to the 
right element in the XML.  You 
can switch to the design or 
blueprint, you can also expand 
it a little bit, pull out the 
palette and you can actually 
drag an element right there on 
the screen. 
   Notice it actually created 
the XML at the bottom, and in 
fact, if you edit the
 XML, it goes from the design 
surface instantly.  So you get a
 real time feedback in both 
directions simply like 
that.
   &amp;gt;&amp;gt; NICHOLAS ROARD:  That was 
a brief introduction to give you
 concepts some of the vocabulary
 we are going to use in the talk
 and hopefully you have been 
already familiar with this UI.  
If not, again, give it a try 
specifically with 3.0.  Let me 
cover constraint layout now.  So
 constraint layout is the 
library we announced last year 
at I/O in this very room, and 
the idea was to provide 
something that gives you all of 
the flexibility and the power to
 create any type of layout that 
you 
 with strong emphasis on flat 
layout.  You don't have a view 
in order to create the layout.  
There is a lot of advantages.  
One is performance.  Indeed we 
have nested layouts.  You could 
have cases where there is an 
explosion of computation 
necessary.  So if everything is 
flat, you tend to win in 
performance.  There is a reason 
which I think it actually more 
interesting is you got a lot 
more flexibility.  It's much 
better if you want to eliminate 
contents, if you want to modify 
contents, upgrade it, modify, et
 cetera. 
   There is a big thing with 
constraint layout, there is a 
big team that works on con 
strainlt layout.  So it's deeply
 integrated from the beginning 
which means that we have some 
features in constraint layout 
that create a great designer and
 we have some features in the 
studio that allows you to create
 much better and more efficient 
layouts with coven straint 
layout.  It had also in the 
library which means we can push 
innovation any time and in fact 
we just pushes innovation like 
five minutes ago, and it's 
compatible with basically every 
device. 
   So quick recap on the 1.0.  
Last year when we announced 11.0
 we did a lot of releases 
basically 17 releases since last
 year.  We are to move fast and 
that's what we do.  We did the 
final release of 1.2 in 
February.  Lots of performance 
increase, but if -- the lay 
outwas last year.  Definitely 
give it a go.  A bunch of new 
features as well that we cover. 
   So when you create a new 
screen by default we put c
onstraint layout where before we
 used to put reiterative layout 
as and studio is flexible if you
 want to change that, you can, 
but we believe that it's a great
 layout to start your screen 
with and that's what we want to 
encourage you to do..  And all 
of that really should not have 
been possible without the 
involvement of the community.  
There has been a flurry of 
articles, talks, videos on 
YouTube leading to widespread a
doption of the library.  There 
is also a new community-based 
constraint  layout website that 
is launching this week and you 
should check it out. 
   So 1.0, what did we have in 
terms of feature?  What did we 
show you last year, and what did
 we add in the meantime?  So we 
had the original idea of having 
relative positioning.  You can, 
you know, set up your layout so 
that one button is going to be 
positioned relative to another 
element.  Very similar to 
relative layouts with a couple 
of interesting tricks.  We also 
added a center positioning.  So 
if you create constraints in 
between two targets, your 
element will be centered and you
 can actually modify that.  It's
 not just center.  You can apply
 by us. 
   So think about it as being 
able to build much more flexible
 reactive UI that will position 
themself not simply in terms of 
an exact dimension.  We also 
added, introduced the  concept 
of helper's object like g 
uidelines.  The idea of 
guidelines is that it lets you 
create a UI in a much more 
natural way, particularly if you
 come from a design background 
where you are working with 
designers, they always think and
 create the layout in terms of 
they call it many names, 
guidelines, key lines, red 
lines, basically hosers antal 
lines to make sure everything is
 aligned greatly.  So guidelines
 in constraint layout is a first
 class concept you can use and 
create your layout with.  But on
 the device it just results in 
the right settings for the 
layout. 
   We also introduced chains and
 that's a relatively late 
edition in the 1.2 release 
cycle.  Think of it as being 
able to position a group of 
Widgets as a group.  So, for 
example, spread them apart.  The
 i nteresting thing compared to 
previous layout is that it only 
works in one axis.  So the  
other axis is not constrained by
 a chain.  Finally we introduced
 ratio.  I'm sure a lot of you 
had to reimplement a customer 
just to reimplement the ratio.  
We just does it in layout from 
the get go.  And last but not 
least we introduced constraint 
set.  The idea with constraint 
set is that now we have a layout
 that is flat.  There 
is no -- necessary to create 
your layout.  In the sense you 
end up with a bunch of Widgets 
at the same level, and we apply,
 you know, that to create the 
layout to get the result that 
you want we apply those 
constraints. 
   So constraint sets, the idea 
is simply that we gather all of 
those con  constraints and put 
that into that object.  So you 
can create the constraint set 
that embeds all of the 
constraints of your layout, you 
can create it from the layout 
file, under
 a live, and the fact that you 
can do that is actually really 
powerful because and just to 
give you a simple example, you 
can simply just toggle one set 
of constraints with another one.
  So it's very easy to tweak 
your UI at run time and even 
more you can specify and create 
your layouts in the comfort of 
the l ayout editor graphically 
and at run time in your program 
you can decide which layout you 
want. 
   So this is 
 we will come back to that.  
Today we just released 1.1 beta 
1.  It's maven so it should be 
easy for you to integrate in 
your work flow.  What did we add
 in 1.1?  We added first the 
concept of barriers.  And a 
barrier in this sense is a way 
to say just take on a set of 
widgets, takes the maximum or 
the minimum of an edge, and that
 allows you to create a lot of 
UI that previously with 1.2 
would have been tricky to do.  
We also added another class 
that's called a group which is 
relatively limited but we have 
ideas on how to improve it but 
the concept is basically you can
 have a set of Widgets that are,
 you know, stored into that 
group and you can set, for 
example, the visibility of the 
group. 
   So you don't have anymore to 
maintain yourself a list of 
Widgets just so that you can 
toggle the visibility in one go.
  You can specify that in XML 
and, you know, any visibility 
state on the group will 
basically be applied
 to the other in the group.  We 
also have another concept.  We 
will cover that in more details 
later, but I think you will like
 it.  And finally we did a 
couple of tweaks in the way we 
did with c onstraints -- deal 
with constraints on dimensions 
so if you ever want to create a 
view with 30% of the screen, you
 could do that, but it was a 
little complex with  guidelines 
because guidelines allow percent
 positioning but now you can 
just do it simply directly on 
the Widget. 
   And now we will cover a 
little bit of the new features 
in Android Studio
 itself. 
   &amp;gt;&amp;gt; JOHN HOFORD:  So 
essentially if you are kind of 
more detail inside Android 
Studios we have a set of tools. 
 Some of them we will talk a 
little bit more about later, but
 we have a series of them that 
are alignment type  tools and 
arrangement type tools and we 
have some stuff to add 
guidelines and we will see more 
on this. 
   Here is also the right click 
menu which is actually a lot of 
them are existing tools.  Now, 
here is a little example of what
 you can do with the tools.  So 
in this particular example, I 
create a chain, I center a line 
all of them and then I use the 
inference to automatically 
connect them.  So in three 
clicks I have essentially made a
 top
 layout.

that we have done a lot of work 
on is the inspector.  Those 
pluses you see I'm clicking on, 
they outically cast a ray and 
connect to the adjacent surface.
  So it's a quick handy way of 
just making the connections 
without actually having to drag 
out lines.  It can really speed 
up a lot of connections.  And 
then I'm playing with all of the
 other features of the 
inspector.  I can change the 
bias, I can then go and kill 
connections all over again. 
   And it doesn't, they both 
work together.  So I just move 
it back over and the loop starts
 all over again.  So I will just
 show one 
last.  N ow, the inference, you 
saw me do a little bit of the 
inference before.  It's 
essentially based on a probable 
  probabilistic model where we 
try to estimate what is the most
 likely thing it would want to 
connect to.  If they are lined 
above each other, it's more 
likely to align that way if it's
 directly on the center, the 
little icon is, it will want to 
connect to.  One of the cool 
things about it is that you will
 notice I could make connections
 and then use inference to 
finish it off, and essentially 
complete my UI.  So the ones 
that I care about a lot, I can 
do by hand, and inference does 
not currently create chains 
or some of the new Widgets that 
we talk about, they don't 
operate properly with some of 
the newer design features. 
   But as those features become 
stable, I will work on putting 
them into the inference engine. 
 So here is an example, it 
inferred, ands you can see, it 
detected that it was sent and 
attached there.  It changes some
 things from wrap content to 
zero DP, things like that.  It 
just tries to fix it.  Now, one 
of the other things to remember 
here is it's not a beautifier.  
It is not going to align things 
for you and arrange t hings. 
   It tries very hard to keep 
exactly where you put things.  
So I have seen a few cases where
 people just sloppy put things 
on a UI, and then hit inference 
and they get bad results because
 it's not organized.  So just 
remember to do that when you are
 thinking about 
it.  Now, one of the things that
 we like and we use is the 
inspector, you just saw me use 
it.  There is another mode that 
you can get if you hits the 
little arrow at the top which is
 this, which is all of the 
constraints.  That's kind of a 
pain to use, quite frankly. 
   So we have been working on 
something to try and make that 
easier and how you would use it 
and how you would interact with 
it, and we call it 
slice.  So image begin whenever 
you have a layout, you will 
actually have, associated with 
the layout, you will have 
dimensions, strings file, a few 
files, and the information you 
are trying to work with is 
mapped across all of these 
different files.  So it's, it 
becomes this sort of hopping 
around game where you are trying
 to figure out oh, I have got to
 go out and adjust the 
dimensions here, I got to go and
 set the string in this file, 
and I have got -- and I have no 
easy simple navigation. 
   So if we can take the 
selected object that's in the
 layout, the dimensions, that 
uses the strings it uses and all
 of the other things it's 
referring to, and we sort of 
combine them into one user 
interface, it appears on the 
right, and we give it a look 
that is kind of like an XML 
file. 
   So if you are used to the 
XML, you can understand what it 
does and how it works.  You can 
sort of see the files that are 
coming from all of the other 
parameters, for
 example, the draw is a picture 
of me, and the values is some 
number, and in fact you request 
go edit and even create new 
elements directly in that user 
interface. 
   So it's a quick fast way to 
work within the design and do 
all of the other things you 
would like to do

typically. 
   &amp;gt;&amp;gt; NICHOLAS ROARD:  I will 
talk a little bit about the 
tools attribute.  So the idea of
 showing you this is also that 
you could, of course, use all of
 this layout in XML.  I mean, 
they are normal Android layouts,
 you can use the old layouts, 
everything is perfectly useable 
in XML, but the idea and this 
what we strongly believe, is we 
as  with the designer we have 
great opportunity to make your 
life easier.  I think you could 
see with some of the tools we 
have presented, doing the same 
thing in XML line by line, I 
think will be much faster by 
using those tools.  So the tools
 attributes, it's something you 
may know already. 
   The general problem is that 
we have, we have something 
that's not executing your code 
directly, so sometimes what we 
show you in the l ayout editor 
is not going to be exactly the 
same as what you have on your 
device.  So because, for 
example, some of it is just 
determined by your program.  So 
we have this idea of having 
tools attributes where you can 
specify behavior that will be 
applied in the editor.  So those
 attributes are not going to be 
there when you publish your 
application, when you push it on
 a device.  They are just 
tricked out, but in the design 
it tells you quite a lot of 
flexibility in how you want to 
run things. 
   So we got like show instance 
is pretty useful, list item to 
set up things and things like 
that.  Says this generic 
problem, right, of how do we 
want to show layout when -- we 
don't really want to execute the
 code.  If you try to drag 
recycle view or this view in the
 layout, that's probably what 
you saw because we automatically
 generate the default adapter 
that is pretty limit  limited 
about and by default that's what
 you see.  This is probably not 
how your application looks like.
  So if you have some contents, 
let's say I created a row, you 
can specify it and you will be 
able to see that being remember 
  replicated better, but clearly
 not what your application is 
going to look like.  Of course, 
you are going to have different 
data.  So and that's where 
simple data comes i n. 
   You could specify new 
attributes and that's going to 
be available in 2.2, where we 
have attribute, for example, 
names or phone numbers and you 
will be able to reference that 
instead of, you know, other 
attributes and that will be 
replicated in the design.  So 
think about it as a way to 
quickly see how your layout is 
going to look like without 
having to program anything.  We 
actually do more than just t 
hat.  We have a new sample data 
folder in the project that you 
will be able to create.  You 
could specify things like colors
 and that's trivial, just create
 a text file with the colors on 
each line, and that's it.  Every
 time that you reference that 
element, we will pull the next 
color and we will just loop. 
   So you can very quickly get 
something like that.  And you 
have more sample data 
capabilities, you can, you 
know, display, dates in specific
 formats, colors, you can even 
specify JSON file if you want to
 use most of your data.  So we 
have baked in data 
types., the JSON files as I said
.  And you can reference it and 
pick them.  So if you want a 
collection of names for instance
 you put them into a folder and 
you reference the folder it will
 pick the next one.  And let's 
go on some more advanced 
examples on constraint layouts. 
   So you may have seen, you 
know, in your practice a problem
 like that.  I have some texts 
on the left of my button and I 
want that text to grow but no 
more than what the button 
allows, and I want everything to
 be centered left.  So the way 
you would do it in constraint 
layouts, and it's a little, you 
know, it can be a little tricky,
 but fundamentally we create a 
chain, make the text being 
resizable and it will 
automatically apply the 
constraint.  So it won't go 
further.  So that's just a quick
 example of how you can use 
chain.  It's not just oh, I want
 to spread Widgets apart.  You 
can do much more complex and for
 fuller combinations. 
   So there is another 
elimination as well about the 
gone behavior.  So by default 
when you set a Widget to gone, 
we reserve it as a point.  So in
 that case, my center button 
gets collapsed basically as a 
single point.  That  behavior 
looks fine to me.  That's 
probably what I want.  Sometimes
 it's not going to work the same
 way.  If I do that on the first
 element, everything collapses 
to zero again, the  margin 
included and then the rest of my
 buttons are moving.  So we have
 those attributes that you can 
specify when the object you 
collect to is gone and in that 
case we will use those values 
for the margin.  So the gone 
button originally the margin on 
the top of zero and now has a 
margin of 32.  Only if the first
 element is marked as gone. 
   And let's talk a little bit 
about placeholder which is a new
 addition in constraint layouts 
1.1.
   &amp;gt;&amp;gt; JOHN HOFORD:  So this is 
new 
to 1.1 and essentially what it 
is is you can create a virtual 
view and set its content to 
another view within the 
constraint layout.  So in this 
simple
 example, it's grabbing 
whichever one you clicked on, 
whichever view you clicked on 
and warping it up to the top of 
the screen.  If you look at the 
text, it maze look a little 
strange if you are not familiar 
with code 1.
  Check out code one child 
pornography.  That's the total 
length of the cold in the f ile.
  So the animation you see on 
the right is being generated by 
the code you see on the left, 
nothing else is being used in an
 XML file.  So as you can see, 
it's ran damly switching.  But 
the -- randomly switching but 
the fact that you can have a 
placeholder a place where you 
can move a Widget may seem like 
what else can you do with that. 
 Well, if I design a placeholder
 based UI with merged tag, 
essentially I have defined a 
constraint layout make sure to 
use the parent tag if you want 
to see the UI while you are 
doing it.  It essentially gives 
you a fixed layout which you can
 then use in another file. 
   So in this case, I have 
decided to have one placeholder 
that's going to be my top image,
 a big image, and then a second 
placeholder that will be my 
action 
button.  But I can actually make
 the second placeholder with now
 using full landscape mode, and 
this one I arranged it a little 
bit different.  I use a 
different set of constraints and
 now in the main layout, I just 
declared it to UI elements and 
include the place, the template.
   Essentially it produces a 
template that decides on how you
 do your l ayout.  And because 
they are in fact two of these 
templates, one in different 
ones, when I rotate the screen, 
it will would actually take the 
other template.  So now I can 
lay out my views and separate 
out the layout from it.  But I 
can actually do more than just 
that.  One of the things that 
you can do with this structure 
is what if instead of the image 
button, the second image but ton
 I could decide to put -- button
 I could decide to put  an 
entire include file with 
something else in it.  So in 
this particular case, 
I have have an entire include 
with a bunch of different layout
 elements, and it's actually 
been warped into that space.  So
 it's a constraint layout within
 a constraint layout.  So it's 
nested in that context. 
   But this is a very simple and
 almost stupid example, but you 
could imagine where you decide 
how you want the top and the 
bottom, the left and the right, 
and behaviors and lay them out 
and design them as templates.  
And then when you are ready to 
produce your main stuff, you 
just go and do it in a 
completely separate file.  You 
could have d esigners help you 
design templates, things like 
that.

wanted to do with constraint set
 and I will talk a little bit 
about how you use constraint 
sets, is you can separate the 
views completely from how you do
 the layouts.  So essentially 
you can -- another way of doing 
things is to encapsulate your 
entire layout as a separate 
constraint set and then you 
apply it to a layout. 
   So you might kind of wonder 
what would you want to do with 
that.  Well, you can switch 
between two constraint sets on 
the fly.  No views get reload.  
It's not like switching a 
layout.  You are actually just 
moving the layout, the Widgets 
around by applying different 
sets of constraints. 
   So in this example, I create 
two constraint 
sets.  I grab a constraint set 
from a layout file and I put 
another layout on the screen 
with set content view, and then 
I actually get that one and grab
 its constraint set and 
constraint set 2.  Now, to 
switch between the two 
constraint sets all I have to do
 is call the constraint set and 
apply to the constraint layout 
and that will allow me to 
switch. 
   So I can produce lots of 
clever animations that way.  So 
one simple example is if I have 
a dialogue and this is a normal 
constraint set with my picture 
on it.  And I could do another 
one and landscape.  Now, instead
 of creating two separate 
layouts and inflating them when 
you rotate, you can take over 
the rotation yourself and you 
can perform the constraint set 
switch yourself. 
   And that way you have a lot 
less going on during rotations. 
 If you have an app that likes 
to rotate a lot, you can do it 
that way and save some 
speed. 
   &amp;gt;&amp;gt; NICHOLAS ROARD:  The other
 things that important to keep 
in mind with the constraint set 
is the example of rotation is 
interesting.  Of course, you can
 use the normal system on 
Android and let the resource 
being loaded at run time.  The 
thing with constraint set is 
that you actually are in 
complete control of when you 
create the constraint set.  So 
often in mobile it's not so much
 about trying to not do the work
 that you need to do because you
 need to do it.  So sometimes if
 the work is costly, you still 
have to do it.  It's more a 
matter of trying to find the 
right time on when to do it, and
 to me, that's why constraint 
sets urge you to do.  You can 
basically pre bake all of the 
constraints and load them before
 and so you don't have to incur 
anything like that because 
suddenly you have to set out a 
set of resources.  So constraint
 set is also pretty useful when 
we want to use motion in 
general.  So one object of con 
strainlt layout it's focused on 
keeping a flat hierarchy is 
there are no issues.  You can 
think of it as a scene graph.  
You have all of the different 
objects you want to show on 
screen, your emojis, et cetera. 
 And you can see of constraint 
set in some ways as a key frame.
  The way you would do that if 
you remember that slide that we 
just saw, you only need to add 
one line, and that's all.  And 
that is simply using the Android
 transition framework that is, 
that also is available on 
industry and it will automate 
layout changes.  That also would
 apply even on the individual 
view, right.  So in that 
example, I have -- I'm sorry, 
the clicker is not happy. 
   In that example, we have a 
layout that's set with the 
normal constraint layout, but I 
can change the of an individual 
view.  The lay outwill 
automatically accordingly to the
 constraints thatI set and 
transition manager willanimate 
So you can do kind of complex 
behavior that very, easy. 
   And the code itself really 
trivial.  You could do a further
 than that, you that is an 
example.  You could create one 
state of your screen layout, 
change, you a second basically, 
and load set. that at run time, 
and the transition will  
framework will the What is cool 
is you do that graphically.  You
 don't have to try to figure out
 how much to what's the 
dimension, no.  You have the 
image result on screen without 
having do a round trip to your 
device.  And that was purely 
constraint layout can also be 
used by leveraging the existing,
 you know, firm work the 
existing Widgets in the 
framework. 
   So this is just a the one 
used in the layout.  I can 
simply reuse into a constraint 
layout.  So this is a   
(indiscernible) (indiscernible)
simple   Let's apply that.  
What's nice is, encourage you to
 think about link to the concept
 of placeholders,  that you 
could define set of generic  on 
your and becomes something  than
 simply I want to position, how 
they interact with each other, 
it can become  well, the UI 
around. 
   And, of course, you can apply
 that your Widget you,  -- 
Widget you that simple.  So 
another example of the 
constraint set/transition  
animation.  We define two states
 see are applied, it changes and
 all of that is graphically.  
The with this animation is that 
it's little stale.  It doesn't 
do anything special.  There is 
no movement, but we could do lot
 more with you coulddefine 
whatever youwant. So recently 
there a physics library being 
released, you  own transition, 
plug them into the system do you
 We will not encourage you to 
this particular UI.  is test 
example.   you know, just to 
give you like the type of 
flexibility this approach can   
   And on that note, I think we 
are done.  We have a few minutes
 Q and A.  please find out about
 future requests you can contact
us easily.  The documentation of
 constraint layout is available 
on line as well, and as I said, 
we just released 1.1.  it a 
   (Applause).
at 76:03).





RAW
 FILE
.
   GOOGLE I/O2017.
   SAN JOSE, CALIFORNIA.
   MAY 18, 2017.
   6:30 P.M. CENTRAL
 TIME.
   STAGE #2
.
   SESSION: WHAT'S NEW IN 
NOTIFICATIONS, LAUNCHER ICONS 
AND
 SHORTCUTS.
   SESSION: TA335B.
   Services provided by:
        Caption First, Inc.
        P.O. Box 3066
        Monument, CO  80132
        800-825-5234
        +001-719-481-9835
        www.captionfirst.com
   * * * text is being provided 
in a realtime format.  
Communication
   Access Realtime Translation 
(CART) or captioning are 
provided in
   order to facilitate 
communication accessibility and 
may not be a
   totally verbatim record of 
proceedings.
   * * *


CROWD.  THANK YOU SO MUCH FOR 
COMING.  HI, HI NAME IS DAN.  
I'M HERE WITH SUNNY AND 
HYUNYOUNG AND SELIM.  WE'RE 
GOING TO TALK ABOUT SOME GREAT 
STUFFER FOR USE    USERS, SOME 
STUFF YOU NEED DON 
    DON to know as developers.
  I'm Hyunyoung, take it away.  
Tell us about new stuff in icons
.
   HYUNYOUNG SONG:  Okay.  Thank
 you, Dan.  Hi, everybody.  My 
name is Hyunyoung Song.  I want 
to talk about some new changes 
in I/O platform.  So what's the 
problem we're trying to solve 
here?  One of the things that 
developers life about icons is 
that it's very flexible.  Aside 
from the constraints that Play 
console impose on you, the size 
limit, you can choose whatever 
shape or size or shadow that you
 like.  Of course, there's a 
guideline around how you should 
do them, but not all developers 
abides by them.  So this 
flexibility is actually a double
 edge ed       edge ed sword.  
If you look at a lot of the OEM 
launcher screens or homescreens,
 what you notice is your icon 
doesn't look the same as what 
you actually added to APK.  Like
 in this example of Chro     
Chrome and Play store icon they 
shrunk it down and put it on a 
background color that OEM 
decided.  In this example, the 
same Play store console is cut 
around the corners.  At least 
these icons preserved the 
original look.  Sometimes they 
use icons which completely 
changes how your brand identity 
looks like.  That's what we're 
trying to solve in adaptive icon
s.
   So let's bring up the slides 
that you may have seen Dan 
already presented during &quot;what's
 new in Android O.&quot;
   There's a simple formula.  
App developers provide 
foreground and background layer
s.  One of these layers has to
 be opaque.  These decide what 
kind of mask that will be used 
on these icons.  The user will 
see if the mask was circle, then
 the user will see circle-shaped
 icons all across the System UI 
surfaces.  This includes not 
only
 the launcher but setsing UI.  
Also, the title bar, and lastly 
the share sheet dialogue will 
also use this launcher icon.  So
 the shape will change 
throughout these surfaces.  If 
it was a round direct then the 
result will be a round direct 
icon.  So while we were changing
 the Android icon API, the first
 thing we also change is
 the usable size of the icon.  
Previously it used
 to be 48 DP.  Later there are 
wide er range of icon sizes that
 third-party launchers uses.  We
 decided the visible size should
 be 72 DP.
   But the foreground and 
background layer that we 
actually want you to upgrade to,
 we want you to provide 108 DP. 
 We want you to add 25% of the 
view port inset around four 
edges.  Either using the 
extension of your foreground 
layer or as a
 transparency.  There's a lot 
more, but unfortunately, on your
 today's developer preview you 
will not see any of these 
animations because we're still 
vetting how to best place these 
but will come up in future 
releases.
   So let's talk about safe 
zone.  When you're adding your 
main logo or the badge of your 
icon in the foreground layer you
 might be curious, how do I make
 sure that all of these show up 
on every single platform?  
That's what safe zone does for 
you.  When an OEM defines your 
mask shape, it cannot cut into 
the safe zone.  This is enforced
 by the system -- by the API. 
this means is that if you happen
 to have a badge on the right 
bottom corner of this risky zone
 that I labeled, then what I 
mean is that if, if it's rendere
d in a platform that is close to
 a rectangle, then -- but if 
it's on a device where it has 
circle mask shape, it will be 
clipped off or not shown at all.
   But I'm not saying that you 
should not add badges.  Just 
make sure that they're inside 
the safe zone, to be shown on 
every platform.
   Okay.  So let's talk about 
API.  The main class that we 
added to O platform is adaptive 
icon drawable class.  
Approximate it supports two 
foregrand and background inner 
tag.  Another child drawable -- 
basically, you can specific 
either drawable or a color.
   And where this class fits in 
the drawable family tree, its 
parent probably could be the 
layer drawable and its half 
sibling would be the ripple ing 
drawable.
   After you define this xml 
file, you doesn't actually 
specific this in Android 
manifest file.  The old Android 
icon at    at    attribute is 
still in effect.  In
 previous platform it -- you 
still have to keep this adaptive
 icon.  As of O,
 what you do is you create a 
same name xml file and then add 
it into -- this is IC foreground
 png you add it to the density 
specific mipmap directory.  At 
compile time, it -- it will move
 to -- only platform 26 and 
above will inflate it and use 
it.
   One thing to note is that 
some of you like Android citizen
 may already know about this 
round attribute that we added in
 MMR    MMR1, we recommend that 
you create the same name xml 
file as the legacy -- as the 
original adaptive icon file
 but the contents can be the 
same.
   Now, regarding why we decided
 to not
 depricate this, I strong       
strongly argue to read them on 
our websites.
   Now, some of you sitting in 
the audience may think, 108 DP, 
that is really huge.  Maybe to 
make the matter worse your APSI 
is very close to hitting that 
Play console max size limit.  In
 which case what you can do is 
in O we added
 a fraction pipe.  It's a 
perfection type.  The inset that
 I asked you to add was 18 DP.  
If you divide that by 8 that's 
16%.  If you specify 16%, as 
your inset, and then you use 
your legacy,
 appoint the to be the latest 
legacy icon, there will be no AP
K size increase and you will be 
able to upgrade to adaptive icon
s for free.
   And as of Android N, the 
vector drobos became so much 
more expensive that almost every
 element in SCG file can be -- 
as either your foreground or 
background element, then you're 
APK size will actually decrease.

Now I'm going to 
do a demo of how the icon wizard
 now support creating
 adaptive icon
 wizard.  Choose
 new wizard asset and you get 
this page and here you can 
configure your foreground and 
select different asset type.  
I'm going to choose image here. 
 What you're seeing on the right
 side is this is a preview of 
what your icon will look like 
that four different platforms 
with different masks and what 
you're adding into your APK is 
presented here in four oblique 
layers s.  You can see if your 
foreground element is fully 
within the safe zone so you can 
resize.  You make sure that 
everything is the foreground.  
In background player I'm going 
to change the color to something
 hopefully hip, not so hip.  
Okay.  Whatever.
   Then -- (laughing) -- that's 
what we're going to use.
   And the last tab is actually 
very important.  Because as I 
mentioned early ier if you just 
add adaptive icons, you're app 
will not have any icons in 
previous platforms.  So you can 
use this third tab to generate 
the legacy icon, the legacy 
round icon for circle-shaped 
mask, shaped devices, and this 
you can also even generate the 
five 12 by 512 image that you 
upload to your Play icon here.  
This is the same that I showed 
you early ier on.  You'll see 
finish and then since
 -- before all devices become 
available you can test this on 
the emulat  tor.  I'm installing
 the app.  This emulator has 
circle as the mask.  And -- oh. 
 Okay.
   Oh.  So what I'm showing you 
right now is this is an option 
that you can see on the main 
launcher of your emulator.  It 
let's you                It lets
 you first what it should have 
the main mask shape on this 
device is circle, but just for 
developer purpose you can change
 the icon shape.  So that you 
can check what it will look like
 on other devices.  Let's pick 
something fun like teardrop.  
Now you'll have teardrop shape 
icon without having to make any 
changes.

   Next slide, please.
   So -- oh.  Can we go back 
just one more slide?
   So -- next slide.
   Okay.  Well, that's all.  
Everything about adaptive icons.
  I'll pass it off to Sunny who 
will tell you more about 
shortcuts and widgets.
      SUNNY GOYAL:  Hello, 
everyone.  I'll tell you how to 
make your app icons look even 
better.  This helps a lot in 
improving the app's experience. 
 Another way to improve the app
's experience is by adding 
shortcuts.  Shuts         Shut
                  shortcuts 
shortcuts allow apps to list 
things on the homescreen
.
   An app -- using API last year
 -- (audio difficulties
) -- it can add shortcuts.
   These added shortcuts are 
shown as additional options for 
the app.  But the launcher can 
also allow that user to bring 
the shortcuts on the 
homescreen.
   To create the shortcuts, -- 
and hope that the launcher gets 
the broadcast and does the right
 thing.  There are many down 
sides to this flow.  For example
, the app loses control.
   Also, since there is
 --
 this will make the launcher -- 
so bring the shortcut on the 
home screen.  Once the shortcut 
is added, it works like any 
other shortcut and can be 
updated within the existing APIs
.
   Another way to use shortcuts 
-- continue ation -- on the 
homescreen.  The app would 
declare the continue ation 
activity in the manager.  You 
are --            
   Lack    (Loss of audio)
 -- now is the only way for a 
user to add widgets.  If an app 
wants to add an widget, it will 
have to explain to the user 
which may vary from device to 
device.
   This will show confirmation 
-- and allow the user to place 
the data on the homescreen.
   And can be used to update the
 budget        widget.
   To summarize the changes, a 
small channel shortcut will no 
longer work -- and apps should 
instead use the new API to add 
shortcuts and widget.
   Make sure to look for more 
information on these APIs.
      I'll hand it over to Selim 
for notifications.
   SELIM CINEK:  Thank you, 
Sunny.  Hello, everyone.  I'm 
Selim and I'm here today to talk
 about notifications.  
Notifications have been one of 
the key components of Android 
for many years.  In each of our 
previous releases we've 
continuously improved on them.  
We're further improving our 
system.  Let's first talk about 
the visual changes we're doing. 
 The first key areas of improvem
ents we're doing is to channel 
visual
 notification hierarchy.  A user
 compares to different things.  
In today's world, all 
notifications look very similar 
and the user has a really hard 
time parse ing notifications.  
So standarding with          
        standard               
Starting with Android O  O, 
we're going to be more opinioned
 about notifications.  We're 
dividing the session up into 
four different areas.  On the 
very top we have a
 new seconds         section 
called major ongoing.  Before 
this we have people to people 
notifications.  Followed slight
ly by general notifications that
 behave just the way they do 
today.  At the very bottom we 
have a new section called bye 
the way   notifications.
   Then we go into detail for 
all of these sections.
   So the very first section 
that appears on the very top is 
called major ongoing.  It is for
 high-priority ongoing tasks.  
Good examples here are music 
notifications, like an 
ongoing navigation notification,
 or basically only something 
that is really important to the 
user and the user must know it 
exists.
   There are basically two ways 
how a notification can end up in
 this area.  The first one 
doesn't require any developer 
into     intoaction at all     
              into      
interaction at all.  This is 
reserve ed for media 
notifications.  We're going to 
color the background of the 
notifications based on the media
 artwork.
   An example you can see on the
 slide.  As you can see we're 
extracting the foreground and 
background color and it creates 
a really nice structured image. 
 The second way how a 
notification can be colorized is
 by opting in by the developer 
so a developer actually has to 
do something if he wants to get 
there.  The way to do this is 
it's reserve ed      serve ed 
for foreground service 
notifications              
notifications.  They can use a 
new method called set colorized 
on the bill ler.  The background
 color will then be colorized by
 the app provided notification 
color.
   I want to really stress that 
please, please, please, don't 
abuse
 these tile      styles.  We're 
putting a lot of trust into our 
ecosystem and if we see it being
 abused too much we will have 
the change it in the future.  We
 don't want to create a shape of
 rainbow colors.  We want to do 
the opposite.  We want to put 
focus on the one notification 
that matters.
   All right.  So below these 
ongoing notifications we have 
people-to-people notifications. 
 Research has shown 
that users usually care about 
people notification the most.  
You should go to this talk 
tomorrow happening at 12:30 p.m.
  It's a design talk.  A if 
you're interested in about 
notifications and how developers
 today abuse notifications, you 
should really go there      
there.
   We're transforming people to 
people notifications by ranking 
them higher up to the user sees 
them more quickly and we're also
 expanding their size.  Even in 
a collapsed form the user can 
see up to three lines of text 
which makes it easy ier to parse
 information.  It also happens 
on a lock screen.  If you've 
been away from you're phone and 
come back you can immediately 
see what's relevant and come 
back to it.
   There's also internal 
notifications that behave just 
like before so I won't go into 
detail on this action.
   The last section on the 
notification place is called bye
 the way   notifications.  This 
is completely new.  You can see 
that we're transforming     
         transforming these mint
 priority notifications to show 
only a single line of text.  A 
user if he's interested in it 
can still make it visible by 
clicking on it.  Good examples 
of notifications that should 
appear there are like ongoing 
traffic notification, the 
weather, basically anything that
 is important or could be 
relevant but doesn't require 
immediate attention.
   All right.  So this completes
 the visual notification 
hierarchy.  And let's get to the
 next feature we're working on.
   So the other feature we're 
working on is called
 visible stability.  Let's 
consider a situation you maybe 
encounter everyday.  You're 
carefully crafting and you reply
 to maybe your friend, Selim, 
and just about when you were to 
hit &quot;send ,&quot; then obviously it's
 all going to reorder.  It sucks
 and probably you hit the wrong 
notification and magic stuff 
happened and you don't know what
 happened.  Of course, this is a
 really bad experience and we 
want to improve on it.  The goal
 is don't reorder notifications 
while we're looking at them.  It
 sounds simple.  In reality, 
it's slightly harder than it 
sounds but if you get a new 
message, you still want to know 
about that, right       right?  
Yeah.
   We like this feature so much 
it's even available in MRR2.  If
   Ifer have a phone with that, 
it's already there.
   If you know me personally, 
you know I'm all about 
notifications and all about 
animations with the 
notifications.  I care about the
 details.  Even the slightest 
          slightest little 
detail should be pixel perfect 
and animated.
   So my designers and coworkers
 left me off my leash a little 
bit and I went wild.  I created 
this basically where we expand
 the notification chain.  I 
think this slide explains it way
 better than I ever could.  The 
key goal essentially is to 
create a sense of
 object permanence.
   Obviously, there needs to be 
a nice transition between things
       things.
   As you can see, bye the way  
 notifications appear on the 
very bottom and they appear as 
overflow dots to indicate an 
overflow and to go away when you
 close the shade.
   Let me hand it over to Dan to
 talk about channels and other 
nice features.
      DAN SANDLER:  Thanks, Selim. 
 Hi, it's me again.  
Notification channels is 
probably the biggest piece of 
new API surface in the 
notification systems.  There's a
 lot of interesting design 
decisions there.  Let's talk 
about it.  Let's start with the 
base assumption that apps post a
 lot of notifications, like kind
 of a lot.
   But that's okay because users
 like notifications, also, kind 
of a lot.  This is actually a 
good state of affairs. tell you 
the full story of channels, I 
need to stop for a second and 
talk about my friend here.  It 
might be your friend.  This is 
my friend.  This is
 the neurotransmitter dopamine. 
 I'm not a neuroscientist.  You 
shouldn't trust what I say about
 brain chemistry, but let's just
 say this is dopamine.  It's 
complicated how it works in the 
brain and all kinds of stuff.  
But what we're going to talk 
about today is the things it's 
associating with that I show 
here.  Things like anticipation 
and reward.  Motivation, seeking
 rewards, your attention, 
salience, your sort of in-the-
moment and looking for something
, including the right word for 
that slide.
   It's basically the user 
engagement chemical in your 
brain.  So bringing this back, 
to what we're talking about here
, dopamine on its own doesn't 
make you happy.  There are lots 
of other great neurotransmitters
 and chemicals that make you 
feel happy.  That's not its 
purpose.  Dopamine gets you 
there.  Okay?  This works the 
same way.  They get your 
anticipation.  You become 
attuned to them.  You anticipate
 a reward so you tap on it.  
Maybe what's behind it is 
satisfying.  You hope it is.  
Maybe it's not.
   So with every app fighting 
for the users limited supply of 
dopamine and limited ability to 
care about distractions and 
stuff the device wants to tell 
you, and suddenly, you're not as
 nearly as excited about those 
notifications at all.  Everybody
 uses     
 loses.  All of you, I can tell,
 just by looking at you, have 
good notifications.  Your 
notifications are the ones use 
ers really want to see.  We get 
ourselves.  But some others 
ought there aren't working so 
well.  Or maybe you get really 
good notifications, but (
long beep noise).
   Okay.  Well, this is the long
est notification tone ever.
   [Laughter]
   Yep.  Dun, dun, dun.  Maybe 
need          

      So maybe you messed up one 
time and you made a notification
 that had a really loud beeping 
tone so the user banned your app
 forever.  Or maybe it didn't 
recommend the right thing so
 the user blocked our app or
 uninstalled it.
   Maybe some users love things 
but the rest could take it or 
leave it and you run the risk of
 making them unhappy.
   The Android way is to let you
 get control.  You can uninstall
 things.  In jelly bean we added
 the ability to block 
notifications and leave the rest
 just as it did.  But in Android
 O we're introducing channels.  
So this describes a category of 
notifications from your app, the
 channel is specific to your app
    app, doesn't match any other
 app's channels.  Everything on 
the channel shares the same 
behavior.  You can see behaviors
 like sound, vibration, whether 
they pop up on the screen or 
light the LED and so forth.
   The category is arranged so 
the user can understand these 
notifications and control them. 
 Category of notifications from 
an app with the same behavior so
 the user can understand and 
control them.
   All right.  I've got an 
example here from a fictitious 
airline, Crane Air.  Usually 
they post notifications like 
your flight is delayed but your 
really important, but one day 
they post something that says 
you earned 60 points today.  
Your only a few points away from
 being able to sit in the humane
 seats.  Many users might really
 love this.  I'll get to that 
status level.  Other users might
 find, wow, I'm going to 
uninstall this app.  I don't 
need that in my life. the 
channels world, Android O, you 
can use the short swipe gesture 
to get to the inside of this 
notification, the inspector 
where you can see the app that 
posted it.  We want that 
account        accountability.  
We introduced that in nugget.
   You want the name of the 
channel.
   You see there are other 
channels available to sort of 
give you context.  You see here 
it's called &quot;categories&quot; .&quot; Our 
user facing name is categories. 
 You and I know something we 
already had something called 
categories.  So internally it's 
called &quot;  &quot;channels.&quot;  But we 
call it categories in the UI 
strings.
   So you see this screen.  What
 do you do?  Touch that switch 
on the right-hand side and 
they're gone.  The executive 
program notifications only are 
gone.  Everything else from that
 app works as it did before. you
 didn't want to block them.  
Like that's useful information 
but it beeped or made the phone 
do something you didn't like.  
Maybe this would be more 
preferred to be &quot;by the way&quot; 
type.
   This takes you into setting 
dot APK on the ROM.  It shows 
you the app name and shows the 
master switch to block things.  
It lists the categories.
   --  From this space the user 
can quickly block or unblock 
that channel and even dig in 
deeper to control the very 
specific details of that 
behavior if you really want to, 
because, again, the point is 
we're giving the user control 
over everything the app can do. 
 Before I move on I want to 
point out there is a link at the
 bottom that goes to your app 
notification settings.  We'll 
talk about what goes here and 
what goes there.
   To show you an example, if 
you touch one of those channels,
 you'll see a screen like this 
where you can block just that 
channel.  That switch is the 
same on the previous slide on 
the row item.  You can change 
the importance, which is our new
 system which replaces the old 
priority APIs, if your familiar 
with those.  It affects what 
pops up or makes or doesn't make
 sense and           sound and 
so forth.
   You can change a whole bunch 
of stuff, if you're a super fan 
of notifications.  If you're not
, you might not get this far 
down into this.  We have another
 link here.  We'll put extra 
stuff in so you know what the 
user was trying to configure at 
that time.
   There's also a little 
description at the bottom.  You 
can set a description to explain
 what the channel is for.
   I have a little bit of code 
here.  Just a little bit.  
There's much more extensive code
 samples, obviously, on D  
D.Android.com.
   You create one to set up the 
notification channels.  The 
channel ID is important there.  
It's just a string, whatever you
 want it to be.  It becomes an 
ID for that channel when you 
post it later P you give       
    .  You give it a localized 
string.  You give it the 
importance you would look for it
 to have.  You give it the sound
 and vibration you would like 
for it to have and so on.  You 
set up all the program         
parameters of this channel.  
Then you ask, please, correct 
this.
   The notification manager 
persists all this information 
between reboots.  You can do 
this any time the service starts
 up and it's very cheap.  If it 
sees you already made this 
channel, it skips right over it.
  You can do this in any of your
 setup code.hen you go to post a
 notification, you just slow it 
into the builder constructor.  
And that's it
.
   [
Applause]
   Not that's it for the talk.  
We have more things to talk 
about.
   Remember I said there was 
question about what settings go 
where.  So there's app settings,
 inside your app and that I've 
shown you are now inside Android
.  Truthly           Truth     
   .  Truth be told you could 
always control certain things 
but we've made a clearer 
distinction in O about what goes
 where.  We're saying focus on 
the business rules, the what, 
when, why, of what notifications
 exist in your world and what 
that mean.  The system doesn't 
know what your social graph is 
and such.  Android doesn't care 
about that.  You define all 
those.  We're only moving to 
Android settings how it behaves 
once it gets onscreen or on 
vibrate or so forth.
   That's a thing a user can 
take editorial control of later.
   There are some questions when
 we described this of I don't 
know how to organize my 
questions or do I have just one?
  Here is our recommendation.  
Pick something that makes sense.
  Pick something that is going 
to make sense to your user such 
that if they say I kind of want 
this set of things to behave 
differently            
differently, that defines your 
channel.  Let's say your in some
 kind of business chat.  Maybe 
ever room is its own channel.  
Your app might already call them
 channels.  Or perhaps a 
different topic in a news app or
 a different sender or different
 chat group in a messaging app. 
 Anything that you want the user
 to tweak in isolation or you 
want to behave differently from 
other notifications, put it in 
its own channel.  Remember, 
everything in the channel 
behaves exactly the same way so 
that the user can understand and
 control it. give you one 
additional level of hierarchy 
just for presentation and make 
it easy ier to organize it.  The
 code is real easy.  You assign 
it to each channel as you create
 it.  You can segment channels. 
 It's really useful for multiple
 accounts.  This is the et    
              You can see I have
 one channel and another 
channel.  The user may never see
 this screen.  But if you long 
press it you can see it's calls 
specifically from my personal 
account.  Now, I can make 
changes to that.
   Many of you are already 
sitting there thinking, ob     
okay, I see some ways around 
this.  We've been thinking about
 this a little bit.  Let's walk 
through it.  First is apps have 
a million ways to be cruel to 
the user.  Stopping them is 
impossible.  What we want to do 
is deal with obviously things.  
Right?  An obvious abusive app 
results in uninstalls or bad 
ratings or bad reviews and you 
don't want that.
   Now we have to worry about 
sneaky things.  We want to 
prevent them if we can or move 
them into the obvious category, 
which we know how to deal with.
   Here is an example of 
something an app can do.  If the
 user changes the channel 
settings, like I want to put it 
in BTWP , well     well, what if
 I just change it back?  We 
don't let you.  The user has the
 final say in what that channel 
does, period.  Okay.  All right.
  If      If I can't change the 
channel settings, I'm just going
 to delete that channel that has
 properties I don't like and 
create a new one.
   Okay.  Fine.  In the settings
 app we actually show you how 
many channels the app has 
deleted.  We don't show you 
exactly what they are for 
privacy reasons but you can go 
into settings and say, &quot;I feel 
like I've blocked that five 
times before?&quot;           
before?&quot; Mm-hmm, five blocked 
channels.  Now the app
's malfeasance is obviously.
   Can I make one channel for 
everything and suspect out of 
               opt out of all of
 this?  You can do that.  If 
your app only chimes on the hour
, that probably makes sense.  
But if you want your critical 
notifications to be tied in fate
 to your recommendations or 
speculative notifications, than 
the user and you will have a bad
 time because all those will 
behave the same way and they'll 
get blocked together..  Wrapping
 up on channels, you set up your
 categories.  After that, the 
user is in control of how they 
behave.  The user happiness 
should be your goal.  You work 
to make your user happy      
happy.  The user will work to 
get the notifications they want 
and you want them to see and 
everybody gets their dopamine 
and Sarah       s  seratonin
 and norepinephrine.
   Once you started targets O, 
any notifications you post that 
doesn't have a channel gets drop
 odd the floor               
     dropped on the floor.  I 
shouldn't have done that with 
the clicker.  The notification 
gets dropped.  It never shows up
 with the user.  You have a 
limited amount of time to move 
everything over, take a look at 
your notifications and organize 
them into channels.  You'll be 
amazed at how many things you 
post.  What a great time to take
 stock.
   So you can organize them to 
situations where there's -- 
there's nothing on this slide.  
Go to the situation where the 
user sees them in the order they
 want to see and is very happy 
and blinky and so forth.
   Oh, one last thing.  We've 
got almost no time.  We did 
introduce badges on icons.  That
 slipped out on    on    on the 
keynote.  A late breaking thing.
  We wanted to do the Android 
thing and make them low anxiety,
 give the user control, make 
them look nice.
   You'll see notification dots.
  The dot just means there are 
notifications for this app.  You
 get to choose which of your app
    apps get dots.  The music 
channel wouldn't have a dot for 
play back controls but it would 
for its recommendations.  Users 
can turn those on or off as they
 will.  If you dismiss it, the 
user is in total control.
   Thank you so much.
      We've got folks from the team
 here.  So we'll answer 
questions outside.  Thanks, very
 much.
   (End of 
presentation)

RAW FILE.
   GOOGLE I/O
2017.
   SAN JOSE, CALIFORNIA.
   MAY 18, 2017.

7:30 P.M. CENTRAL TIME.
   STAT 
#2.
   SESSION: SPEEDING UP YOUR 
ANDROID GRADLE 
BUILDS.
   SESSION #: T
1
912D

   GOOGLE I/O2017.
   SAN JOSE, CALIFORNIA.AY 18, 
2017.
   7:30 P.M.

CENTRAL TIME.
   STAGE #2
.
   SESSION:
 SPEEDING UP YOUR ANDROID GRADLE
 BUILDS
.
   SESSION #: T
1912D.
.
   Services provided by:
        Caption First, Inc.
        P.O. Box 3066
        Monument, CO  80132
        800-825-5234
        +001-719-481-9835
        www.captionfirst.com
   * * *
   This text is being provided 
in a realtime format.  
Communication
   Access Realtime Translation 
(CART) or captioning are 
provided in
   order to facilitate 
communication accessibility and 
may not be a
   totally verbatim record of 
proceedings.
   * * *

 TEST    


.  Good afternoon. 
 We I am James and I work on 
Android Studio.
 I am here with Jerome, who is 
the tech lead for the build 
system. We are here today to 
talk about one of our favorite 
topics: how to improve Android 
build speed. Slow build speed is
 a huge productivity buster.
 Itâ€™s like driving on a road 
while constantly hitting speed 
bumps.
 We have heard you loud and 
clear about the importance of 
build speed.
that's why we've been focused on
 the past several quarters on 
building speed performance
. To give you some context of 
why we are giving this talk 
today: over the past year, our 
team has been running several 
build 
clinics. In these build clinics,
 we meet with developers one on 
one.
     one.They would come to you 
and tell us about your build 
performance issues.  Now, well 
play doctor in these clinics 
which was kind of fun. Now this 
is the really surprising part, 
even to us.
We would be able to speed up 
their development builds 3x, 10x
 sometimes, by applying a simple
 set of tips that we will share 
with you today.
 Our talk today is structured 
into three parts.
 For the first part, I will 
share with you some simple tips 
for speeding
 up your projectâ€™s development 
build.Second we're Jerome is 
going to talk to you about how 
you can make the most of of the 
Android Gradle plugin 3.0 which 
we just released yesterday.  
Finally we'll talk about tools 
and best practices on how to 
debug and build your best 
performance issues. So now, 
letâ€™s talk about some quick tips
 for speeding up your 
development builds. I am going 
to present these tips to you one
 at a time.
 I am also going to use the 
Santa Tracker project as
 an example, and show you how 
each of these tips impact its 
build speed.
 We will apply these tips one by
 one and letâ€™s see how fast we 
can get the build at the end. 
Okay?
 But first, I want to show you a
 bit about the Santa Tracker
 Because build performance is 
really dependent on the project
's characteristics.  The       
The Santa tracker is organized 
into different modules, 
including a wear module.  It's 
pretty resource heavy with 
thousands of files and 3500 
png's. Itâ€™s very resources 
heavy, with over 1700 XML files 
and over 3500 PNGs. It uses 
multi-dex, and no annotation 
processors. The debug APK is 
about 60MB, so itâ€™s pretty 
large. If you would like to 
explore more about this project,
 you can find it on Googleâ€™s 
GitHub account.
 For the benchmarking of this 
project, I am going to show you 
numbers for three build 
scenarios. The first one is a 
full build, which is just a 
clean, and then an assemble 
Debug.
 The second one is an 
incremental build after making a
 one-line method implementation 
Java
 change. The third one is an 
incremental build after adding a
 string 
resource.It's a simple add or 
remove sing resource.  We can 
measure time for
 each of these. Just remember 
that build performance is highly
 dependent on the project and 
your build environment, so you 
may get more or less improvement
 from these tips. All of that is
 to say: actual results may 
vary.
 The first tip is to make sure 
you use the latest Android 
Gradle plugin.
 With each release, we have a 
lot of bug fixes and performance
 improvements that you can take 
advantage of.You want to make 
sure you can legislative        
     leverage those.  There are 
a couple things to note here.  
First, starting with
 3.0,
 the first thing I did was to 
check the version of the Android
 Gradle plugin that it was 
using. Then I was both sad and 
happy that it was using an old 
version
 of the plugin.the plug in often
 requires specific build tools 
and specific versions of Gradle 
itself.  The easiest way to do 
this is to do the update in 
Android studio.  And third the
 3.0 plugin is a bit of an 
exception.  It might require 
more work on your part to update
.  We published a migration 
guide and you'll see the link at
 the end of the presentation.
 And this was the result I got.
You can see that Immediately, I 
shaved off 25%
 from the full build, close to
 40% from the incremental Java 
change build, and 16% from the 
resource change build.not bad 
for just updating to the latest 
plugin.  The second tip is to 
avoid legacy multidex.
 Now all of you know that if 
your app exceeds the 64K method 
reference limit, you need to use
 multi-dex.
 Now what you may not know is 
that if you are using multi-dex 
and if your minSdkVersion is 
less than 21, then you will be 
using legacy multi-dex,
 and the build will be much 
slower.Legacy multidex is a lot 
slower to build and you want to 
avoid that.  Newer versions of
 Android studio will 
automatically detect your emulat
  to image and switch to multide
x if applicable. Now if you 
usually start your build by 
clicking on the Run
 button in Android Studio, then 
you donâ€™t really need to worry 
about this anymore. Newer 
versions of Android Studio will 
automatically look at the 
connected device and emulator, 
and
 if
 itâ€™s newer than 21. Then it 
will use native multidex 
regardless of what you have the 
minSdkVersion set to.These are 
the results that I got.  We 
shaved another five seconds off 
the full build, a whooping eight
 seconds, that more than 50% of 
what we had before, and then 
incremental build for resource 
change is about the
 same, as you would expect.
  --
   MultiAPK -- the idea here is 
that you can tell it to generate
 a long dimensions like ABI or 
density so that it generates 
these APK's that are smaller in 
size.  Small APK's are great for
 release builds but they're not 
that important for your 
development builds.  So if you 
do it for development builds 
you'll be wasting time creating 
these APK's that you're not 
using.
 To disable multi-APK generation
 properly, you canâ€™t just d
isable it in the splits block 
because the splits block applies
 to all build variants. So one 
way to do this properly is to 
disable multi-APK generation 
whenever a devBuild project 
property is defined.I'm just 
going to pass that property to 
Gradle every time I do a 
development build.  If Gradle 
sees that property, it will set 
the split start API and density 
to false.  And the multiAPK 
generation will not happen.

 And then in Studio, you can 
pass the same flag under the 
Compiler under preferences 
command-line
 options.It will also pass the 
same flag to Gradle so multiAPK 
generation will not occur.
   And these are numbers I got 
after disables multiAPK.  Again 
some more improvements across 
the 
board. The next tip four is to 
include minimal resources in 
your development flavor.
 By default, the build system 
will include resources for all 
the languages and screen 
densities that your app or the 
libraries that your app uses 
define.
 So if your app supports many 
different languages or screen 
densities you're limiting the 
resources to just the set you 
need in your development build 
could get you substantial time 
savings in your build. To do 
this, use resConfigs keyword in 
your product flavor to specify 
only the language and screen 
density you want to support.
Then we can see here on the full
 build we shaved off another six
 seconds, 24% off the increment
al build in Java change, and 21%
 for the incremental change 
case.  I continue to make gains.
    Next up, is to disable PNG 
crunching in your development 
build. By default, AAPT will 
crunch your PNGs to reduce their
 sizes, yielding you a smaller
 APK.Again, that's a great thing
 for your release APK's but not 
that important for your 
development builds.
    To avoid PNG crunching, you 
can use the same property that 
we
 Defined and have the         
             define defined 
earlier for your development 
builds, and set cruncherEnabled 
to false if this property is 
defined.on Gradle whenever you 
do a property build you can pass
 that onto Gradle to avoid png 
crunching.
   The other option to avoid png
 crunches is to convert all your
 png's into P   WebP.  WebP is 
up to 25% smaller so you get a 
smaller APK to boot. Newer 
versions of Android Studio has 
built-in support for converting 
PNGs into WebP, so you can you 
do that easily right inside 
Studio.You can easy ily convert 
them into                      


 you need to be mindful of the 
platform support for WebP: O
paque webâ€™s are supported 
starting with API level 15but if
 you have alpha channels and 
support transparency in your web
 feed then you need level 18 or 
above.  That is something to be 
mindful of.
   So these are the numbers that
 I got after disabling
 crunching.
  The Santa tracker has a ton of
 pngs in them.  Previously, we 
were spending a lot of time 
doing that.  The other ones 
didn't change that much.
   Here is the kicker.  When I 
looked at the APK size with 
crunching and without crunching 
there was no difference.  Turns 
out Santa was doing png 
crunching for no reason. Tip 6 
is to use Instant 
Run.
 Instant Run was launched in 
Android Studio 2.0, and since
 then we have improved it  . We 
have been focused on fixing 
stability issues. The Instant 
Run in 3.0 is massively 
different from what was shipped 
in 2.0. We have removed a lot of
 hacks to work around the 
platform, and w
e believe itâ€™s much more 
reliable.Instant run will now 
only work on level 21 or above. 
 That doesn't mean that you 
can't have your version set to 
lower.  It just means the device
 your running instant app on has
 to be 21 or above.
    We have also tweaked the 
original Instant Run UI. The 
Instant Run button is now split 
into into a Run and Apply 
Changes button.When you hit the 
run button, we will try to do a 
cold swap and the app -- excuse 
me -- will always restart.  When
 you click the apply changes, we
 will try to do a hot or warm 
swap first.  That would push 
changes directly into the live 
process.  One thing to note, 
when you use instant run, it 
makes your lives a little bit 
easy ier because we 
automatically look at the target
 device, at its API level and 
the set of resources it needs 
and automatically builds minimal
 things that the target device 
requires.
   Even if we didn't define a 
separate product flavor, you 
would automatically get some of 
the optimizations.  These are 
numbers I got after.  Notice, we
 actually regressed by 7 seconds
 for the full build.  The reason
 for that is that in order for 
instant run to work we have to 
do extra work and to do byte 
code manipulation to prepare 
your app for future hot, warm, 
and cold swaps.  That's where 
the 7 seconds came from.  We're 
working to drive that number 
down.
  We shaved off three seconds 
for the incremental changes.
   Hopefully you would recoop 
the initial build show down 
after the incremental changes.
   Now tip seven is a fun one.  
It's that you should avoid 
inadvertent changes to your 
project.  The code shown here is
 an example of such.  At first 
glance it seems reasonable
. It is just trying to use the 
build datetime as the 
versionCode to uniquely identify
 the build.You want to have a 
unique ID so when you find a bug
 it can tell what build it was. 
But the reason why this is not a
 good idea is because this will 
force the AndroidManifest to 
change every time, causing your 
build to do more work than 
necessary.Even the ones you're 
not distributing to anybody.
    Santa Tracker didnâ€™t have 
this problem, but I simulated 
this 
mistake.I simulated this by 
forcing a manifest change every 
time     time.  If I       Here 
you can see the impact of 
changing your manifest. For an 
incremental Java change, you are
 paying a penalty of three 
seconds. And for an incremental 
resource change, you are paying 
a penalty of 3.6 seconds.That's 
huge and that's time spent for 
no good reason.  In this 
previous example, you can easy 
ily fix this by putting the 
unique version code based on the
 property, the de   dex build 
property we were using early 
ier.  In this case, if that 
property is defined, we set it 
to a static value.  If not, we 
will generate a unique value.  
Now, having bad code in your 
build script is not the only way
 to get into trouble.  I know a 
lot of you use crashlytics and 
it's a great product so it must 
be safe, right?
   Well, that depends.
   Turns out Crashlytics by 
default will always build a 
unique I  ID on every build but 
they provide a flag for you to 
turn this off so you need to be 
careful.  You should set this 
flag.  Always up date ID to 
false.  They also supply a 
flag to disable Crashly ytics 
altogether.
 Tip eight is to not use dynamic
 versions. Gradle gives you a 
way to easily use the latest 
version of the dependency 
through the â€˜+â€™ sign. This is 
bad for several 
reasons: 1. From a performance 
perspective, this will cause 
Gradle
 to check for newer versions of 
those dependencies from all the 
repos that you are using.It will
 check the library every 24 
hours causing your resolution 
dependency to increase.
   Even if you're okay with that
 hit, it's still bad because it 
makes your build 
nondeterministic.  You do a 
build today compared to two 
weeks from now, you might be 
building completely different 
things because the library has 
changed underneath of you.  So 
please avoid doing 
this. Tip nine is to watch the 
amount of memory you give to
 the Gradle. By default, Android
 Studio sets the max heap size 
to 1.5 GB. This may or may not 
be a good setting for your
 project.We don't really know 
because it really depends on the
 characteristics of your project
.  So you should tweak this 
setting to see what's optimal.
   Another thing I want to call 
ought       ought       out is 
we have dex options where we 
allow you to set the size for 
this dex process.  This made a 
lot of sense when dex was out of
 process but since the plug in 
2.1 -- you should not release 
that anymore.  So if you have it
, you can just delete it.
 Tip 10: Gradle has recently 
introduced a new caching 
mechanism that caches task 
outputs.You might have heard Xav
ier talk about this this 
morning. This is going to be 
useful when you switch branches 
locally, and it enables 
distributed caching. Note that 
this is different from the build
 cache that we introduced in 2.3
 which just caches pre-dex 
libraries.That
 only cache ed pre-dexed 
external library ies.  This 
cache using       uses the same 
mechanism but not just for the 
last build but for any build 
from the previous location.  It 
will speed up builds from 
previous branches and enable 
caches.
   We haven't fully taken 
advantage of it yet in Canary 
one but we're actively working 
on this in dot O.  It's so 
new.  So you should see 
progressively improved 
performance. these are the 
numbers that I got after turning
 on the build cache, even though
 we haven't fully taken 
advantage of it yet.  So you can
 see the full build actually 
dropped down by seven seconds 
and it negated the regression 
that was introduced by instant 
run.
  The increment    mental build 
actually got                  
              increment run got 
slightly slower.  That's 
something we're looking into.
   Here are the cumulative 
improvements after applying all 
these tips.  The full build is 
three times faster.  The 
incremental Java brimmed is 
three times faster and the 
resource change is also three 
times faster.
   [
Applause]
   JAMES LAU:  Thank you.
   Now here sa sum me           
is a summary of all the tips.  
I've also created a G  GitHub 
repo if you wanted to experiment
 with some of these tips 
yourself.  And that's it for me.
   JEROME DOCHEZ:  That's it for
 me                           
        hank you, James.
      JEROME DOCHEZ:  Now, I would 
like to talk more about some 
more radical changes you can do 
with your build to liberate some
 of the new features that comes 
with plugin
 Letâ€™s
 talk about Multi-Module project
 first.3.5 we used to have a lot
 of issues with it so it was 
discouraged because there was a 
lot of issues
 around scale ability with 
things getting slower and lower.
  We worked really hard with 
Gradle to fix this     this.  
Now we totally recommend you to 
go to the multimodule project.
  Any projects created from 
templates, it's an easy project 
to start with.  It has one.  
It's ready to be multimodule.
   We just need to include a few
 more subfolders in your main 
Gradle.  Then you can start 
moving code from, say, the app 
into the lib 1 or lib 2.  It 
sounds easy.  Multimode al is 
not easy.  I can guarantee.  
It's going to be painful if you 
want to do this.  Not painful, 
but it's going to be hard.  And 
it's not something you should do
 over the weekend.  It's going 
to take some time.  However, 
we're going to see it has a lot 
of improvements in it.
   We have three examples here.
  --
   Maybe like removing a public 
message.  Of course, we need to 
recompile whoever is using that 
particular lib 2 to make sure 
you're not using that method but
 it will trigger the recom      
 recompile          
recompilation of app.  That 
means that app which depends on 
lib 1 -- also depends on lib 2 
just because lib 1 itself was 
impart       imparting          
 impart       imparting lib 2.
   That's some of the things 
that's going to change in
 3.0.
   The first thing Gradle is 
gives us for free is compilation
 avoidance.  What they do is 
they came up with the notion of 
an A  ABI.  An ABI is the 
application binary interface.  
It means your public methods and
 fields, anything that can be 
invoked outside.  So you can 
have an ABI change or a non-ABI 
change depending on whether or 
not your changing a public API. 
 Okay?
   Now, an ABI change has no 
impact on consumers.  If you're 
changing the method, which is 
private, or even if it's public,
 if it's just implementation of 
a method, none of the consumers 
are going to be impacted by the 
change.  However, obviously, if 
you're removing a public method 
or changing a public method 
significant, this is an ABI 
change.  This will trigger 
consumers to be recompiled.
   Very simple.  I have a non-AB
I change.  Something which is 
private to lib 2 is being 
changed.  Nothing is recompiled.
   Now, I have an ABI change.  
We're coming back to the 
original case.  I'm changing 
something which is in lib 2.  
Lib 1 has to be recompiled.  An 
app is importing it
 also has to be recompiled    
       recompiled.  That's 
really very annoying.  From this
 diagram, it seems pretty 
obvious that app is not using 
lib 2.  But the fact is that 
because through this compiled 
configuration, Gradle does not 
know if app is using the ability
 to use the two interface.  The 
implementation of detail of lib 
1, which is the lib 2, to the 
consumers of itself.  That means
 that now app can see lib 1 and 
lib 2.  It's really something 
that needed to be changed.
   Let's look at how that really
 falls into when you have a big 
hair ball of modules.  Here we 
have 8 modules.  That's pretty 
simple.  You have 50 modules and
 you're making a non-ABI change.
  So that has to be recompiled. 
 That's pretty obviously.  
Right?
   Now, let's switch to the ABI 
code change.  Let's say now 
we're changing a public ABI of 
that really -- module.  Of 
course       course, we'll 
recompile it and to all the 
users but because they're transe
ntly depend on each over, you 
have to recompile.  If you have 
250 modules, you have to 
recompile 250 modules.  If you 
have a common type of library, 
this will happen quite a bit.
   Basically, compiling is all 
wrong.
 So basically, compile scope is 
wrong. It does not disambiguate 
between just consuming a module 
as an implementation detail 
versus consuming it and 
re-exporting its APIs.You should
 only be using a API of my 
library but I'm offering its API
 as a part of mine.  If you're 
using
 Guava, it didn't mean you     
you want your users to use Guava
 through you.  That's really 
nasty if you want to save time.
  You used in the past to 
provide Guava as a -- therefore,
 you can break your clients.  
People using Guava through your 
module and that's it.  So really
, this co    co dependency was 
all wrong.
 When you use a dependency as an
 implementation details of your 
module, and do not want to offer
 that dependency as part of your
 API, declare
 it with the â€œimplementationâ€  
configuration. Gradle came up 
with a new way of declaring 
dependency.  It's replaced by 
two new configurations.  Either 
API or implement          
implementation.
   Here I'm replacing what I 
used to declare X and Y as one 
implementation detail, that 
means that I'm consuming led X 
as an implementation detail but 
none of my users will have 
access to its implementation, to
 its API.
   However, I'm also using lib Y
 and offering its API as part
 of my API.  I'm composing over 
that particular one.  So there's
 a strict distinction between 
the two.  Now API is basically 
the equivalent of the old 
compiling.  It's an easy way to 
go.  It would just work but we 
totally not recommend doing this
 but you'll leak all your 
dependency ies, ask      and 
that's a bad idea. is to use 
implementation.  Then you clear
ly say I have an implementation 
of my library and I'm using this
 module and I'm not going to 
leak it to my users.  Seems 
pretty easy.
   In fact, you should probably 
do a search and replace of all 
your compile, replace it with 
complementation.  Your build 
might break because some users 
of your library somewhere was 
using actually a dependency you 
were leaking.  The only thing 
you would have to do is they 
would have to also declare their
 dependency on which ever module
 they were actually using.
   So it's a little bit of work 
but it shouldn't be too bad.
   If you do a non-ABI change, 
nothing happens.  No change 
here.
   But if we switch to the      
  to the ABI change, this is 
what we used to have.  Now it's 
not compiled any longer.  Only 
lib 1 would be recompiled 
because lib 2 is not visible to 
app.
   This may seem to be a small 
detail, but when you come back 
to the example given early ier 
where you have this ABI could 
change the leaf module.  
Remember?  I was compiling 
obviously the module that 
changes.  You're still going to 
compile all the modules that are
 impacted directly but it will 
stop right there.  It won't 
recompile anything else.
   Here, I'm sitting at about 
50% of recompilation.  Not too 
bad    bad.  But if you have 50 
or 100 or whatever number it is,
 this can be substantial saving.
  Okay?  It adds up.  You have 
compilation avoidance because 
this API configuration, you're 
going to get much faster builds.
   I want to talk about one last
 final note.  When you have 
multiple modules, Gradle -- 
we've had issues with one task 
has to work before another task 
and you wait for it.  When you 
do things in parallel, you don't
 have these issues anymore.  
This is great to use it when you
 have multiple modules.  Having 
multiple modules is a great work
 around for some
 incremental tasks.
   Java C is in theory 
incremental.  As soon as you 
start using annotation processer
s, though, we have to turn off 
the increment          
incrementalty.  Some of    of 
the annotation processers want 
to see the world.  You have to 
recompile everything so that the
 annotation processers 
can be fed and react properly
.  --
   In  As difficult and it's 
limited and you will never get 
as much parallelism as if you 
are using multimodule projects.
   Now, let's say you've been 
very good.  You followed all of 
James tips.  You tried to 
understand what's wrong.  It is 
still slow.  What is the next 
step for you to understand?  
What can you do to figure out 
why
 is it    my build slow?
   Realize slow builds are not 
normal.  Let me be very clear.  
A full build that takes ten 
minutes is not normal.  An      
An      An incremental
 build that takes almost as much
 time as a full build is even 
less normal.  If it seems to 
rerun a bunch of tasks but you 
don't know why, this is clearly 
not normal.
   There are scenarios like this
 that you should be looking into
 and figures out do I have to go
 through this?  Maybe there is 
something that could make things
 better for me.  Nobody likes to
 pay taxes.  So understanding 
the build is like paying taxes 
on taxes.  I understand that.  
But you must understand on some 
level that you need to spend 
some time into it, to invest 
into understanding where is my 
build being spend?  Which task 
is taking time?  So that you can
 eventually have a chance to 
improve it.
   But like we talked early ier,
 third-party plugins you have to
 be very careful about which 
ones you're using.  Some of them
 are well written; some not so 
well.
   It's particularly true, for 
instance, which coming from the 
eclipse a few years back where 
all the source files were in the
 source directory.  They were 
all in the same folder.  If you 
changed one, it would trigger 
all the tasks to 
rerun.  Some people like to 
customize their build system and
 sometimes it goes really, 
really wild.
   But you need to understand 
and spend some time in the build
 system.  I know this is not 
something you like to do.  But 
as your project is growing, you 
must spend some time.
   Now, tools to help you so 
that you spend a minimum amount 
of time.
   But before we get into that 
slide, one of the things we see 
repeatedly over and over again 
with people who complain about 
their slow build is the &quot;do last
.&quot; That's bad.  Gradle can not 
understand if your task is 
incremental or not.  Do last is 
bad because most of the time 
your checks will fail because 
you're probably writing 
something somewhere in the upper
 directory of the task or your 
changing something after the 
task is run.  So it will rerun 
your task every time.  Avoid 
these types of things       
things.
   One way you can do that is by
 writing your own plugin.  I 
know it sounds scary, but 
believe me, it's not that bad.  
You can write your own plugin 
and put it in the build source 
directory that would make it 
available to all your modules 
automatically.  Remember to 
profile it.  Instead of using 
&quot;do last&quot; try to write a custom 
task with property inputs and 
outputs so that Gradle can cache
 it and understand what would 
make the task up to date or not.
   Now, you still don't get it. 
 I mean, you know, it's still 
slow.  You've been spending time
 on this.  It's still slow.  
What can you do? .
   Next thing to do is run with 
a dry run.  This will tell you 
how much time you're spending in
 the configuration.  This should
 be a couple of seconds.  Ten 
seconds at best, at maximum, if 
you really have a huge project. 
 If you start spending way too 
much time there, there's 
something wrong.  Some plugin 
somewhere is doing something 
wrong and we need to understand 
what it is.
   Then you should do a dash 
dash in full.  Dash dash in full
 is very useful.  It will tell 
you what tasks are running and 
why.  Again, you change none of 
the source code.  You rerun a 
build.  Some tasks are running 
and you don't know why.  The 
dash dash info will tell you 
exactly why this process 
manifest task is running.  
That's because the manifest task
 changed.  Then you have to -- 
obviously, you didn't change it 
yourself, but at least it gives 
you a hyst      hint.
   Next one is the profile.  A 
slightly more comp      
complicated tool that will give 
you the ability to look at your 
tasks and see how much time you 
spent on each of them.  Maybe 
one task is dominating.  Most of
 time we've seen this.  One task
 takes 90% of the time of your 
build.  Find out what it is and 
what it's doing before you 
report.
   And then, for hard core, 
there's a tool provided by 
Gradle.  It's great.  It gives 
you the ability to profile and 
to benchmark.  The profile is 
the most interesting one.  You 
can actually generate a profile 
er information right from there 
which you can use to file bug 
against us.  So if you think 
you've done all your homework 
and your build is still slow and
 you don't get it, run the 
profile er.  File a bug against 
us.  Then we'll start looking 
into why is your build slow?  
Much better than just going onto
 the web and saying my build is 
slow; I don't know why    why.  
Not giving us any information.
   This is stuff we can act upon
.  With this, we can look into 
why your build is slow.
   Some resources, this is what 
we have today.  Look at the 
migration guide.  Optimize your 
build speed.  Look into the 
Gradle.  It's always like you 
know when you receive new 
things, or a new car, you should
 look into the new things in 
there.  There's a bunch of new 
utilities that you can use.
   Thank you very much.
      (End of presentation)
   (Applause)          

RAW
 FILE
   GOOGLE I/O2017.
   SAN JOSE, CALIFORNIA.
   MAY 18, 2017.
 8:30 P.M. CENTRAL TIME.
   STAGE #2
    #2    #2.
   SESSION:
 ANDROID FIRESIDE CHAT
.
   SESSION
 #: T0FF1E
.
   Services provided by:
        Caption First, Inc.
        P.O. Box 3066
        Monument, CO  80132
        800-825-5234
        +001-719-481-9835
        www.captionfirst.com
   This text is being provided 
in a realtime format.  
Communication
   Access Realtime Translation 
(CART) or captioning are 
provided in to facilitate 
communication accessibility and 
may not be a
   totally verbatim record of 
proceedings.
   * * *

   BLUSH TEST       



to the Android fireside chat, 
another edition of this thing.  
You will notice there are a lot 
of people on stage up here.  
This is probably the most they 
have for any session ever at I/O
.  In fact, there's so many 
we're in danger of violate ing 
the fire code.  We may need to 
ask the audience to leave.
   [Laughter]
   We're going to do an 
introduction of who these people
 are and what they do.  I'm 
approximate em see.  Brian, go.
   BRIAN CARLSTROM:  Introducing
 self.
   WALE OGUNWALE:  (Introducing 
self)
.
   (indiscernible).
   RACHEL GARB:  Rachel Gar
, user 
experience.
   XIAOWEN XIN:  , could Xin 
Xiaowen Xin, Android security.  
--
   SPEAKER:  I'm a guest here.  
I'm from Japan.  I'm a V     a 
CEO from Japan
.
   (Applause)
   ADAM POWELL:  Adam
 Powell, framework.
   SPEAKER:  Everybody got that?
  Excellent.  We have a few 
things to cover.  A lot of 
content before we get into the 
meat of it.  So, no, actually, 
let's just get into it.
   So here the the way it works.
  I'll ask a couple so you 
understand what this is.  You're
 going to ask questions and 
we're going to -- we may have 
the answers.  We don't know.  It
 depends what you ask.  The 
ground rule is we don't really 
talk about -- no.  We don't talk
 about futures.  If you say, 
&quot;Yeah, what is Google going to 
do a year from now on this thing
?&quot; Pen they would say, thank you
 for the question; would 
somebody else like to ask one?  
Just so you know, when we say 
that, there's a reason.  I will 
show you how this works for a 
couple of things.  We trolled 
Twitter and G+ to get some 
questions, sort of pre-roll some
 topics to find out what the 
community would like to know 
about, people who aren't 
necessarily here.  I will 
summarize the several comments 
in Twitter that essentially came
 down to,&quot; What about adopting C
olin as a language for Android 
       Android?&quot; 
   SPEAKER:  Check.
   SPEAKER:  Done.
   (Applause)
   SPEAKER:  All right.  Here is
 another one that came up.  A 
few different comments phrased 
in different ways but 
essentially boils down to a two-
part question.  How does fuchsia
 relate to Android.  Dave?
   DAVE BURKE:  Uh, how do you
 spell fuchsia?  We actually 
have lots of cool early projects
 at Google.  I think what's 
interesting is it's open to 
people can see it and comment on
 it.  It's probably going to 
pivot and morph.  There are 
people who worked on it who are 
great.  It's just kind of 
exciting to see what happens.  
It's definitely an independent 
project to Android        
Android.  Yeah.  That's 
basically it.
   SPEAKER:  Thank you.  So 
we're going to ask another 
question here, but we could -- 
multiprocesses thing, people 
should be lining up at the mics.
  If nobody wants to ask, that's
 fine.  The session will end 
very early.
   Second two-part question for 
micro,       Mike, how does Flut
ter relate to Android?
   SPEAKER:  Let's see.  What do
 you all think is the best 
framework for Android?  Is it 
Android?
   SPEAKER:  Usually.
   SPEAKER:  Yeah.  We kind of 
like our own stuff.  Android has
 always been pretty open.  
That's our core principle.  The 
better answer is use whatever 
works for you.  We try to make 
stuff that works for you.  We 
hope you like it.  If you find 
something you like better, then 
that gives us something to shoot
 for.
   SPEAKER:  All right.  We have
 people at the mics now.  Over 
on the left there.
   AUDIENCE:  My question is -- 
(away 
from microphone) (indiscernible)
.Laughter]
   SPEAKER:  Great question.  I 
think one of the things we made 
clear in the keynote and we try 
to say very clearly is we're 
embracing Colin.  Someone can 
hug max there, if you want.  
We're embracing Colin but we're 
doubling down simultaneously on 
your existing languages and 
we're very open about that.  The
 keynote with the investments 
with Java 8 language features.  
We also made extensive 
improvements in APIs.  Again, 
the Java .9 API is my favorite. 
 We made extensive improvements 
in C++.  You'll see investment 
in Colin and in your existing 
programs.  Dave has increased 
the teams in all of those areas.
  It's not an either/or for us. 
 It's truly an &quot;and.&quot; Java is a 
wonderful language.  I told 
people when I studied at Brown 
it's the first language I 
learned.  It's wonderful.  For 
those who have tried            
want to try Cotland, it is a 
beautiful language.  A lot of us
 have tried it and think it's 
quite wonderful.
   SPEAKER:  So if I could 
rephrase that, either one should
 work     work?  Is that -- did 
I catch the essence of that?
   SPEAKER:  You could try 
either one.  Yeah.    I'm sorry.
  You want to find more words 
for that?
   SPEAKER:  It's a good thing 
they cut me off at the keynote, 
huh?
   SPEAKER:  I think we got it. 
 Thank you.  Let's go over there

 there.
 inaudible
 question) what are alternatives
 to people who want those 
features and capabilities but 
want to maintain
...(indiscernible).
   SPEAKER:  You could turn it 
on on your friends' devices.
   [Laughter]
   Otherwise -- to be perfectly 
honest we're not on those teams.
  That's why we're looking at 
each over.  We do think privacy 
is something you should have.  
You're asking for those teams to
 support those services they're 
producing and then not require 
location and other things.  Part
 of what makes those features 
good are those services.  You 
should ask them.  But we're 
ensuring you always have the 
choice.  It might not always be 
the fine-grain choices within 
that you always want but you 
should have the visibility to 
know what's on and have the 
control in the IOS to turn it on
 or off.
   SPEAKER:  Thanks.  You, sir.
   AUDIENCE:  I have a question 
for you.
  -- (asking inaudible question 
away from                
    question).
   SPEAKER:  So I actually did 
have project travel as part of 
my keynote but we didn't have 
enough time, number one.  Number
 two is it's a very device 
manufacturer focused project.  
So we thought we might bore you 
a little bit.  But since you've 
asked, I can bore you now.  
Bring up the teleprompter.  No, 
I'm joking.
   So project travel, if you ask
 a lot of people around here who
 worked on it they'll tell you 
it was a huge amount of work and
 they're still angry at me.  
Rachad is nodding his head.  
He's so pissed off because the 
amount of work that went into it
 was huge     huge.  We created 
a vendor interface.  It's an   
 an         
   We've introduced a new vendor
 interface at the bottom.  It's 
silicon and hardware specific.
   Then we have VTS tests that 
test vendor interface.  The idea
 is when the P release comes 
along, if you're a device make 
er you take P and it will run on
 top of today's O device that 
you build      build, say.
   The whole reason for that is 
we want to make it easy ier and 
faster for device make ers to 
update devices.  Because if it's
 faster, they'll get updates out
 more quickly.  If it costs less
 they'll do more updates.  It's 
a huge huge change.  That's the 
whole premise of it.
   I can talk about it more but 
one of the things -- it's kind 
of analogous to C
otland.  Treble, you ask, we 
deliver.  Not really.
   For Treble it was actually 
the
     the silicon vendors and so 
forth we were asking how to 
reduce the cost.  Silicon     
      Every time we change the 
operating system they have to 
rework the code.  They asked how
 to make it better and we came 
up with TrebleP but it's a huge 
huge change.  Probably the 
biggest
 rearchitect of Android ever.  
Thank you to all my colleagues 
who hate me.
   SPEAKER:  I want to make sure
 you understand there's a lot of
 engineers who aren't here today
 at I/O.  They've been working 
incredible  ly hard.  They had 
to work through millions of 
lines of code they've never seen
 before.  One guy on my team I 
think almost lost it works on 
this.  It's a huge amount of 
work.  It's going to make 
Android better in the future.
Applause)
   SPEAKER:  If we tried to 
bring anymore engineers up on 
stage the produce ers would have
 kill led us.
   There was a follow-up 
question about Treble on 
Twitter.  So I was going to ask 
that one which was the docks say
 the -- on existing devices.  
Okay.  That wasn't a complete 
sentence.  But this is Twitter.
   (Applause)
   The question is will devices 
that get updated to O also get T
  Treble?
   SPEAKER:  Right.  One of the 
challenges of doing this huge 
rearchitecture is if we did it 
blindly we'd slow down adoption 
to O because we had a lot of 
work to do.  We didn't want to 
slow down the short-term to 
speed up the long term.  If you 
have an existing device on N and
 you want to update to O, the Tr
eble requirements aren't applied
 to you.  If you're a new device
 make     maker building a new 
device, then you have to comply 
to the O architecture.  That's 
sort of how it works.  What we 
did to prove it all out was to 
treat the N16 pixel as a new 
divide              a new device
 for O.  This is           We 
basically rebuilt the system on 
pixel.  We did that because we 
wanted to prove it end to end so
 that new devices on O will be 
able to sale and lead true.  
                      to sail 
and lead true.
   AUDIENCE:  My question is 
when you use your Android phone,
 what do you really hate?  And 
why haven't you fixed it yet?
   [Laughter]
   (Applause)
   SPEAKER:  I have one.  I 
really hate the colors.  But I'm
 fixing this in O.
   [Laughter]
   (Applause)
   speaker and I really hate 
notifications.  Some that come 
from nameless applications, from
 my own company.  That gentleman
 over there along with members 
of his company are fixes that 
this time with notifications 
channels. hate the locking 
tension and systems serve      
server.  We'll fix that for the 
next race.
   [Laughter]
   Seriously, I obsess about 
lock in tension and system serve
 er.  It bugs me.
   SPEAKER:  Anything else have 
a confession?
   SPEAKER:  I'll go with one.  
This group should know it.  
Battery life.  The reason we 
don't break it is all of you.  
We have to manage keeping you 
alive but keeping better battery
 life at the same time.
   SPEAKER:  That will do for 
    for a sample.  How about 
over here?
   AUDIENCE:  (Speaking
        asking inaudible 
question).
   SPEAKER:  That really depends
 on -- I don't regret the stuff 
we did.  You can always make 
improvements.  If you're looking
 for things I would change, 
probably the big things is stuff
 that we did that allowed 
applications to do too much.  
Like a big one for me is the 
settings provide er access to 
allow changes to system 
settings.  I wish we had never 
done that.  Just make sure we 
had clear API controlled ways 
for them to
 do things.  Now we've started 
to do things to get them back 
under control.  Those are things
 I wish we'd done better at.
   AUDIENCE:  My question lass 
to do with the                
     has to do with the blocking
 of -- (  (asking inaudible 
question).  So why won't you let
 users buy those          
 (indiscernible) those apps?
   SPEAKER:  The maps thing 
isn't about users.  It's about 
developers.  There's a lot of 
things we don't let developers 
do because it's better nor     
for the overall device behavior.
  Speaking of things we regret 
doing, I think if I could do it 
again, having things so easy 
that you could launch 
applications like that was clear
ly a big mistake we made.  We 
didn't realize at a time once 
it's there and you have 100 
applications on your phone all 
listening to this broadcast, the
 kind of hell that's going to 
break loose on the device when 
that happens.  I really think 
that's something we need to 
really put brakes on and get 
back control over the device and
 switch to more things like job 
scheduling.
   SPEAKER:  If I could add to 
that
 on the use er choice.  I hope 
we announced we have 2 billion 
use ers.  If not I just 
announced that.  That's a reason
able fraction of the world's 
population.  We think about 
literally everyone when 
designing it.  It's hard to put 
that in front of users and 
expect them to make scale able 
decisions.  Especially when 
applications say, &quot;Hey, please 
turn this on.  It will make it 
better.&quot; It's not that the 
applications are doing anything 
wrong, usually.  But if you say 
yes to the first and then you 
feel like you have to say yes to
 the next 30, then it makes the 
device unusable.  We have to 
balance out with making devices 
that literally anyone can 
administer and manage and still 
have a good experience.
   SPEAKER:  I can add to that. 
 You can say -- if you really 
want to, you can do a foreground
 service and the user knows that
 you're running all the time 
now.  I think part of this is 
actually having the choice being
 clear to the user.  It's like 
it's clear to the user that, oh,
 this application is running all
 the time, because I really care
 about it.  So it's okay with me
.  I'll let it do that.  Versus 
subtlety ies about, well, I have
 this choice to allow it to run 
sometimes in the background but 
I don't really know what that 
does and I don't realize that 
when I do this a lot with a lot 
of applications that actually 
there's a lot of stuff going on 
in the background that I'm not 
aware of.
   So we learned, like, with 
     with the foreground service
 is having the UI and having 
those clear lock things, if you 
decide to do this, there's a lot
 ofimplications, that the user 
understanding that's all 
together.  They can make those 
choices.
   But having subtle choices 
between this and that and they 
don't know what it means, really
 doesn't leave the user with 
much choice, because they don't 
understand.
   SPEAKER:  Finally, another 
principal that's coming to the 
forefront with recent versions 
of Android, we want to make sure
 that the user's choice, they 
can actually see the affects of 
that and they can audit that 
behavior as they use the device.
  The foreground service 
notification really provides 
that visibility when an app is 
running in the background.
   SPEAKER:  We'll take one from
 online from Rachel, I believe. 
 Is material design done?  Or do
 you see it growing and evolving
?
   RACHEL GARB:  The work is 
never done with design and I 
think that you probably have a 
lot of other things, other 
patterns, that you would like to
 see and have supported for your
 apps.  So the material team, 
they're growing, and they're 
investing heavy      heavily in 
this space.  This was an off-
shoot of Android.  The material 
team started out very small in 
Android and then it grew so big 
that it is a completely 
different department.  So yeah, 
I don't think they're sitting 
around twiddling their thumbs.  
They're definitely doing a lot 
to develop the language
.
   SPEAKER:  Designers design.
   SPEAKER:  And in particular 
they just launched a bunch of 
code.  They now have the 
capacity to bring on more 
prototypers and software 
engineers.  They have a bunch of
 new components s available for 
lots of different platforms to 
make its easy ier to integrate 
the stuff that's involved in 
material in the last number 
years.  So you can look at their
 work and see that material and 
design is alive and well and 
continuing to evolve.
   SPEAKER:  To see that you go 
to Material.IO.  Let's         
Lots of good stuff and materials
 and tools there.
   SPEAKER:  Thanks.  How about 
there (indicating).
   AUDIENCE:  (Asking inaudible 
question)
.
   SPEAKER:  You mean to write 
build files?
   AUDIENCE:  Yeah, the build 
files.
   SPEAKER:  As soon as it's 
finished on the Webb            
 on    on the website.
   SPEAKER:  Thanks.  Here 
(indicating).
   AUDIENCE:  Between       
(Asking inaudible question)
.
   SPEAKER:  No.  I don't think 
so.
  Max?
   SPEAKER:  There's about 600 
kilobytes.  That's the only 
thing      thing.
   SPEAKER:  Thanks.
   AUDIENCE:  (Asking inaudible 
question)
.age fight.
   SPEAKER:  So Sistrays gets 
all the data from the Le inxy

kernel.  -- will actually sample
 the runtime of your application
 and tell you, hey, you're 
spending 50 milliseconds in this
 function and 4 milliseconds in 
this function and things like 
that.  That means the CPO 
profile er has higher overhead 
which means it can curb the 
results of performance testing, 
but it gives you greater 
visibility into your application
.
   So my general recommendation 
would be use Sistrays to get a 
general idea of how your 
application runs because you'll 
probably spot a lot of problems 
there.  You can use CPU profile 
er to get a closer look inside 
your application.
   SPEAKER:  Great.  Thanks.  
Tor, did that cover it?
   TOR NORBYE:  That sounds 
good.  I mean the CPU profile er
 has a lower head mode until you
 start recording actual sampling
.  You can use it initially as 
well but it obviously does more 
whole system praising.
   SPEAKER:  Okay.  Thanks.
   AUDIENCE:  Hello.  I believe 
we have not heard much about 
data volume this week.  I wonder
 if that's a technology we 
should continue to adopt.
   SPEAKER:  Yes, actually.  We 
(indiscernible) so we're still 
working on that.  Tools         
Tool       .  Crews are still 
working on that, right, Tor?
   TOR NORBYE:  Yes.
  Data binding is one of our 
responsibilities.
   SPEAKER:  Thank you.
   AUDIENCE:  Hi.  I started 
writing Cotland last week and I 
thought it felt oddly familiar. 
 I spent the last year doing 
code reviews of our IOS develop
er in swift.  I was wondering if
 you could comment on the 
relationship between Cotland and
 Swift.
   [Laughter]
   SPEAKER:  We have independent
.
   [Laughter]
   (Applause)
   SPEAKER:  There are a lot of 
resentment because we're aiming 
for the same task, to make it 
productive developers.
   AUDIENCE:  Yeah.  I meant 
conceptually, thank you.
   SPEAKER:  Max is quite modest
.  He was one of the key folks 
who contributed the language.  
Another language designer is 
probably also here now.  I talk 
too much, don't I?  One fact 
Dave and I were talking about is
 Cotland does predate swift.  
The first announcement of Cot
land was in 2011 and the first 
release was 2012.  The language 
has evolved since then.  It's 
just an interesting fact.  Good 
to know.
   (Light laughter).
   SPEAKER:  Thanks.
   AUDIENCE:  Hello.  I 
personally think being open 
source is one of the most 
important powers of Android and 
one of the most important 
announcements for me this week 
was that -- being open source ed
 and unfortunately Android is 
not currently but will follow.  
So the question is about Google 
Play services.  Is there a plan?
  Because the Play services are 
so integrated.  Fire base can be
 open source now, but why not 
Play services?

   SPEAKER:  So the thing about 
Play services is there's lots of
 stuff in there.  Some of it is 
developer focused and some of it
 is just really extension of 
applications, like Google's own 
applications.  So sort of Google
 policy, their applications is 
they're just not open source ed.
  The challenge is there's no 
easy way to GMS quarters to say,
 hey, this sa    is a developer 
component and this is an 
extension of an app component.  
Also, we don't know anyone from 
the Play services team here.  So
 I can punt the question.
   SPEAKER:  We punt the 
questions to you.  If you're 
going to punt the questions, I 
don't know what to do with it.
   SPEAKER:  Uh, I'll go into an
 infinite loop.
   SPEAKER:  Moving on?
   SPEAKER:  Moving on.
   SPEAKER:  Let me go into a 
theoretical thing.  What's the 
one piece of advice you would 
want developers to never, ever 
follow when making Android apps?
  Anybody?
   SPEAKER:  Force garbage 
collection.  I don't know.
   SPEAKER:  (indiscernible).
   [Laughter]
   SPEAKER:  You need an 
application context for 
everything.
   SPEAKER:  Moving on.  You 
(indicating).
   AUDIENCE:  Hey.  We saw the 
introduction of I/O of a great 
of profile ing tools, for 
network and CPUP one thing 
that's still missing is a good 
battery profiling           
profile er for    .  Some are 
extremely difficult and 
interpret the results from.  I 
was wondering if that was 
something we might be able to 
look forward to?
   SPEAKER:  It's a very good 
question.  One of the things we 
talked about is the battery 
profiling has to be based on CPU
 and network.  We want to look 
at those two things as really 
important inputs.  We felt it 
was important to do CPU and 
network first into our profile 
ers.  We don't talk about 
futures but we get a lot of 
questions about battery 
profiling.  So you can read that
 however you want.
   [Laughter]
   SPEAKER:  That's code for 
staff and team are working on 
it.
   SPEAKER:  Rachad, do you know
 about that?
   SPEAKER:  We're going to 
start showing -- it's going to 
include everything from crashes 
to memory uses to -- is that all
 right, battery?
   SPEAKER:  We put out there 
locks that are a big battery 
strain on the number 
and yanky frames.  You'll get 
information about those issues 
and fix them.  The really short 
yank event and the really severe
 horrible yank effects who we 
named after our vice president 
behind us.  We called it a Davey
.  I'm glad we got to talk about
 it.  So thank you for that 
question.
   SPEAKER:  You're focus.  
      famous.
   AUDIENCE:  Hi.  I have a 
question about Treble and how 
it's going to be easy ier to 
update to new versions.  But 
open sourcing hardware drive ers
 is most exciting for it.  Are 
you going to be working more to 
start new projects with existing
 vendors and get their code open
 course ed or otherwise?
   SPEAKER:  We may just focus 
on the architecture.  I mean 
that's really up to the silicon 
vendors and the device make ers.
  We just wanted to make sure we
 had much nice er architecture. 
 We had not thought about that 
specific aspect of it.
   AUDIENCE:  Thank you.
   SPEAKER:  Thanks.
   AUDIENCE:  Hey, everyone.  
Last year there was a really 
excellent session on attention 
and notifications and treating 
people well.  Since we saw that 
manifest this year through 
notification channels and 
through attention-based 
notifications, are there any 
other issues like that on the 
platform that are near and dear 
to your heart that you wish 
developers spent more time 
thinking about?
   SPEAKER:  Why applications 
need permissions.  We get that a
 lot internally about -- not 
just the premise but what the 
entire application is doing with
 that data.  That's something I 
would love developers to take
      take a lot of care when 
asking it in context.  We found 
when it's in context, if the 
user understands why, and they 
understand the value, you should
 put a lot of time into that, 
because users appreciate it.
   SPEAKER:  I would broaden 
that more to settings in general
.  We know users get pretty 
overwhelmed by the number of 
settings and being able to find 
what they need when they need it
.  Apps should really think 
about every single setting that 
we want      want to introduce 
and is it really necessary?  We 
think about that, too, on the 
platform level and we have to 
keep thinking about that.  It 
gets more complicated over time.
   SPEAKER:  Every new thing and
 setting and feature we add to 
Android, there's other things we
 didn't add.  It's a huge part 
of how we design things and how 
we want to encourage apps to do 
things.  Honestly, every year we
 add new stuff, we probably 
already just launched the stuff 
the users are going to find 
terrible and we're going to come
 back and fix next year.  So we 
keep ourselves in business.
   SPEAKER:  Given our global 
foot print, a lot of our use ers
 can't afford to upgrade.  So we
 need to band together and 
improve those low-end devices.
   SPEAKER:  I'm going to put 
words in Tim's mouth and say I 
wants everyone to care more 
about performance, as well.  
Some of the sessions here as 
well as some of the tools we're 
talking about are coming in 
because we want it to be easy 
ier for develop        
developers to chase that 
information and fix it for users
.
   Am I allowed to provide an 
answer?  Would somebody else 
like to say that instead?  Is 
that good?
   Okay.  You (indicating).
   AUDIENCE:  Hi.  I get the 
sense that you guys really like 
Cot    Cotland a lot.  (Laughing
).
   I'm wondering if you have any
 future plans
 to implement platform framework
 components using Cotland.  If 
so, would you expose --
   SPEAKER:  Well, as has been 
said, we're also committed to 
Java.  The bazillion lines of 
code we already have is Java.  I
 think as much as we love it the
 reality is we're probably going
 to be continuing to use Java 
code for the immediate future.  
At the point we're starting
 to introduce new features in Co
tland, it will be compatible 
with Java, too.  It will take a 
while.  First, we'll make sure 
our language, the APIs, the 
legacy ones we already have and 
the new ones we create and 
incooperate work perfectly with 
Cotland.  That's going to be a 
goal for us going forward.
   SPEAKER:  I should clarify 
that bazillion lines of code is 
just an estimate.  It's actually
 far more.
echnically 1.36 bazillion.
   AUDIENCE:  Yesterday, I went 
to a talk about progressive web 
apps and these guys are really 
catching up.  Should I use myt
ime        my time using
 Java script or Co
tland?
   [Laughter]
   SPEAKER:  I think the way to 
think about PWA's purposes web 
apps, if your company is focused
 on building -- it's unrealistic
 to focus on app development 
entirely.  Everyone on stage is 
an Android die hard and focused 
on improving the operating 
system.  If you're really 
focused on building a native app
 experience and you believe 
that's where it converts better 
for the users we want to make it
 as easy as possible to get your
 users onto that platform from a
 development and reachability 
standpoint.
   AUDIENCE:  What are some 
great new things you think have 
been overlooked or left out of I
/O this year for some reason?
   SPEAKER:  What are things 
that we decided to not talk 
about that we would talk about 
now?
   [Laughter]
   AUDIENCE:  Well, I mean --
   SPEAKER:  The biggest one is 
probably Treble.  That's 
enormous.  What else?  Did we 
talk about downloadable fonts 
and emoji?  That's kind of cool.
  Did we talk
 about
 garbage collect        
collector?
   SPEAKER:  Tomorrow.
   SPEAKER:  Will I steal the 
thunder if I talk about how cool
 and fast it is?  It's super 
cool.  I'm steal ling Brian's 
thunder so I'll stop now.  Also,
 dex, code layout, did we talk 
about that?  Steal ling thunder?
  So I'm steal ling thunder.  
You should go to the talk 
tomorrow.  It's cool ler stuff.
   SPEAKER:  I have a hard time 
believing you guys fit 
everything into all your 
presentations.
   [Laughter]
   SPEAKER:  Yes (indicating).
   AUDIENCE:  So our app is 
localized in about 50 languages 
and we also have a lot of 
resources that are localized as 
well.  Is there any thought 
around being 
able to
 -- for the purposes of the 
smaller app, basically?
   SPEAKER:  Yeah, Google has 
that problem with their apps and
 it's something we're aware of. 
 I'm not going to talk about 
future stuff.  There's a 
platform that's not being used 
yet.  We are kind of setting up 
to address that problem but 
nothing right now.
   AUDIENCE:  Thanks.
   SPEAKER:  I have an answer 
for
 the previous question.  It's 
something my team did.  I have  
        I should have thought 
about it.  In O we have the 
ability to update the graphics 
driver from the Play store.
   (Applause)
   SPEAKER:  We have time for 
one more question.
   AUDIENCE:  Oh, okay.  Is 
volley still the recommended 
network        networking 
solution?
   SPEAKER:  If (indiscernible) 
is not here, can we say no?
  -- that's what we say.
   Also, we think glide is a 
very nice library.  But these 
are recommendations.  That's it.
   [Laughter]
   SPEAKER:  Thanks.  We did 
have one more important question
 online.  It is map crashes with
 no pointer exception when the 
user rotates the phone while a 
network exception is happening. 
 Do you have any planning to fix
?
   SPEAKER:  Yes.
   [Laughter]
   (Applause)</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>