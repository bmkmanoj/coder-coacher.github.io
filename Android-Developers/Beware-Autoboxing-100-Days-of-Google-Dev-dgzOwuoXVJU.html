<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Beware Autoboxing (100 Days of Google Dev) | Coder Coacher - Coaching Coders</title><meta content="Beware Autoboxing (100 Days of Google Dev) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Beware Autoboxing (100 Days of Google Dev)</b></h2><h5 class="post__date">2015-08-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dgzOwuoXVJU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">when it comes to performance sometimes
it's not the big glaring topics that
cause the most problems and it's the
little things that when added together
create huge headaches for your
application my name is Colt McAnlis and
one of the quintessential examples of
small things adding up to big problems
is a feature in the java programming
language known as auto boxing see it -
the java language of primitive types
like int bool and float are great for
matching their I Triple E and hardware
definitions but this also keeps them
from being used with generic collections
offered by the runtime instead the Java
language provides object versions of
these primitives like Java yang integer
which give you the same functionality as
a primitive int but can be used with
generic collections this is where auto
boxing comes in Auto boxing at its core
converts from primitives to their object
counterparts on your behalf so that you
don't have to worry about any of those
conversions in your code which is
generally pretty awesome take this
simple for loop for example we can
easily treat the integer object just
like it were permitted int without any
extra syntax but sadly the hands-free
nature of this functionality comes with
some performance penalties see for each
step of the integer object version of
the loop
the runtime has to create a new integer
object push the primitive value into it
before it can be able to be added back
to the other integer objects which means
that anytime you do an auto boxing
conversion a new object allocation comes
along with it compare this with the
version using primitives that doesn't
require any additional allocation
overhead this is really painful to watch
since these objects are larger in size
than their primitive counterparts 16
bytes for the integer object rather than
4 for the primitive and also require
more performance overhead in order to
access the underlying value basically
creating a double whammy of issues for
memory and runtime performance now you
need to be aware that this problem
doesn't just pop up with contrived
examples like our little for loop here
nope it's present anytime you pair a
generic collection with a primitive type
which is especially a problem for
containers like hashmap basically
anytime you insert edit or retrieve
values with this generic container while
a primitive is involved you end up
boxing and unboxing values which is the
exact reason that the android platform
provides custom containers for you to
use in these situations instead
hashmap the sparse map family of
containers are all designed specifically
to combat the auto boxing problem
eliminating both the runtime overhead
and reducing the memory footprint now if
you're not sure where in your code auto
boxing could be causing a problem the
Andros studio tools can help you track
it down if you're using allocation
tracker keep a lookout for any places
where you have a load of integer objects
all coming from a single call site and
in trace view watch out for a flood of
integer dot value of calls happening for
any given reason above these reports are
a clear sign that auto boxing is
occurring while the low-hanging fruit of
performance is the easiest to fix and
the most common to find these little
problems really start to add up if
and--'cause really big issues if left
unchecked which is why you need to check
out the rest of the Android performance
patterns content to see what else is
lurking in the shadows and of course
don't forget to join our Google+
community as well for other great tips
and advice so keep calm profile your
code and always remember perf matters
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>