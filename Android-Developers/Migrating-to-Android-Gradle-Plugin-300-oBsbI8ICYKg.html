<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Migrating to Android Gradle Plugin 3.0.0 | Coder Coacher - Coaching Coders</title><meta content="Migrating to Android Gradle Plugin 3.0.0 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Migrating to Android Gradle Plugin 3.0.0</b></h2><h5 class="post__date">2017-10-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oBsbI8ICYKg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Android studio 3d though is a major
release and with it we're also releasing
version 3 of the Android Gradle plugin
it is based on new Gradle api's supports
variant our dependency resolution and
can greatly speed up multi module builds
unfortunately you might have to make
some updates to your Gradle
configuration when switching to the new
plug-in version it's just a few steps
and it's well worth the effort you will
end up with a more maintainable build
file and a faster build when you first
open your existing project in Android
studio 3 you will be prompted to update
the android plug-in version we also
require at minimum Gradle 4.1 and this
will be automatically fixed for you to
if you want to make these changes
manually you need to check two places
first in the main build Gradle file
change a GP version to 3.0 next open the
Gradle wrapper properties file and edit
the URL to point to 4.1 by the way as an
optional step you can add the new google
maven repository to your main build file
we use it to distribute our build
artifacts such as the support library
and with the latest Gradle version you
can simply refer to it with a Google
keyboard if you try to compile your app
now with the new plug-in and you are
using flavors in your modules you will
most probably get this error previously
flavor dimensions were optional in order
to make resolving flavors and library
modules more robust you are now required
to specify a dimension for each flavor
the Android Gradle plug-in will
automatically use a matching favor from
consumed libraries if it can find one if
the library defines flavor dimensions
which are not present in your main build
file you have to make an explicit
selection using the new missing
dimensions strategy statement in the
module consuming the library listing the
flavors you'd like to match in order and
conversely if a library module does not
have a flavor that matches one defined
in your app you will have to specify a
fallback use that matching fallbacks
keyword in the apps flavor definition
followed by the possible flavor names
that will be selected from library
modules you can do the same for build
types whenever the app concludes a build
type that the library dependency does
not a nice side effect of these changes
is that you know
have to specify which variant you want
to consume when depending on the library
module you should remove these extra
lines from the dependencies section and
just include the library once you can
also remove publish non-default true
from library modules for external
dependencies it's still fine to use a
variant specifier if you only want it to
be added to certain builds by the way
there's one more detail here that
changed android plug-in 3 is adopting
new dependency configurations introduced
in Gradle as you can see in the table
here this is just a name change for most
dependency types compile becomes API and
provided becomes compiled only however
there is one new configuration called
implementation which when applied
correctly can result in significant
Build time improvements you should
prefer using the implementation
configuration whenever a module only
uses the dependency internally and
doesn't intend to leak its API to other
modules that way whenever the dependency
changes you limit the number of modules
that would otherwise have to be
recompiled these are the basic changes
that every Android project should make
when migrating to Android Gradle plug-in
three more migration scenarios are
covered in our documentation such as
when handling annotation processors or
using the variant API to access build
outputs so please take a look at the
link in the description and thanks for
watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>