<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>DevBytes: Sliding Fragments | Coder Coacher - Coaching Coders</title><meta content="DevBytes: Sliding Fragments - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>DevBytes: Sliding Fragments</b></h2><h5 class="post__date">2013-08-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xbl5cxfA1n4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi my name is Ellen shamsky I'm an
intern on the Android team at Google and
today I'll be talking about some of the
various methods you can use to animate
fragments so today I'm going to discuss
a few different things including how you
can switch how you can animate the
switch we can run from one another using
using fragment transaction I'll talk
about how you can create animations
using via code create using object
animators to animate those fragments as
well as a couple very useful callbacks
leak in fragments that you can use to
create very custom animations for your
fragment transitions so jumping straight
at the demo you can see here we have
just an image and this is a fragment
that only contains an image clicking
tapping on it it slides into the
background and pops up another fragment
so this here is just another framing
containing text about the Golden Gate
Bridge which is our original image
tapping once again slides that back out
so looking at it once again
tapping one slides it back in into the
background has this kind of dimming
effect where it darkens it brings out
the text fragment and tapping once again
slides out the text fragment dims out
that dark hole review and animated image
framing back out so jumping straight
into the code there's a few different
things to note here today firstly we set
up there's some boilerplate code we set
up a click listener to switch the
fragments every single time we click on
the screen and in switch fragments the
first thing you want to look at is here
so I create a listener at the end of
which we're going to do the actual
fragment transition so I start a new
transaction and I call this method
called set custom animations what set
custom animations does is taken for
reanimated resource files you can use to
animate one fragment in and omit it out
and as well as when you're popping this
type for the fragment transaction you
can you can also pass the resource files
for enemy now the other fragment in and
out we have to note here though is that
I am passing in resource files for the
text fragment sliding up and down but
I'm passing in zeros for the for the
image fragment that I'm animating
because that's a little more custom then
I add my text ring and onto my stack
I I said that - no and I commit my
animation so what this lets me do is
later simply pop my fragment manager
stack and then my my image frame will
come back up after the text fragment is
animated out so the all of this does all
of this is done at the end of a
animation listener and if you go here to
slide back that's where it's actually
gonna get executed so I set up a few
animations for the image fragment I'm
going to rotate it about the x-axis I'm
going to scale it so it actually it
rotates in the background and scales and
it comes a little smaller and what what
I'm actually going to do as well is this
M dark hard review which is just a view
with an opacity let with an opacity less
than 1 and a black background color it's
going to it's going to fade in over my
image fragment so one of the things you
can do with such custom animations is
add animations to other widgets or other
items that you have on the screen using
this method you can actually add
animations at the same time as the
fragment is animated except to things
that are that may be completely separate
from the fragment itself once I set up
all my animations I add a start delay
such that what is such a what's actually
gonna happen is after I animate the
image from into the background only then
will well that takes for many come back
up and then at the end of that animation
that's when the fragment popping end
transaction actually happens so if you
keep sliding back down there's a method
called slide forward and slide forward
actually gets called right here so what
happens is when you click when you click
on the when you click on the screen when
the text fragment is is in focus what
we're going to do is pop the stack in
order to bring the image ringing back in
focus and when the back stack has
changed we're going to call slide
forward in slide forward we're doing
almost the exact same thing as where we
didn't slide back we're rotating about
the x axis back out we're scaling we're
scaling our image sharing back up and
we're fading out the dark Harborview
instead of fading it in all of this is
all this is then put together using an
animator set and that's how the end
takes place so this this this is where
you can do if you want to have a custom
object animator and set custom
animations but the other important thing
that I really wanted to note was in tech
in any fragment there's a callback
method you can override called on create
animator and the thing about on create
animator is it's a method that gets
called when you want to get the
animation object for a fragment
transaction it has a few useful
parameters you can use but the key
behind this is that you can essentially
create any custom animation you want
here and never be limited just to do
things in an animated resource file so
and then if we actually just take a
quick look at the resource file that we
passed in to set custom animations there
right here we set up an object animator
with a from value a to value a property
name and a duration but one of the
things I did here is I created a custom
property called Y fraction and the
reason I did this is because unlike and
in view in older view and tween
animations property animations are
independent of what the container
actually is so if for example in twin
animations you could tell a view to
animate from zero to a hundred percent
of its parents with we can't do this
with proper animation and I found a
workaround for this by using Y fraction
so in text fragment there is a custom
property there's a in sort in fractional
in fractional linear layout which is
actually there's a custom property
called
Y fraction and so what happens when you
create an object animator that enemies
the property Y fraction it's going to
look for a setter called set Y fraction
and given the setter right here
satellite fraction what I'm doing is
animating a float value between zero and
one but since in runtime I can determine
what the width and height of my screen
is I can actually just do do some simple
arithmetic and animate it from zero to
some certain percentage of its parents
container so yeah so those are some
different ways of animating fragments as
well as a way to work around not having
percent
percent animations with object animators
unlike you did in older view animations
so I hope you enjoy the video and thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>