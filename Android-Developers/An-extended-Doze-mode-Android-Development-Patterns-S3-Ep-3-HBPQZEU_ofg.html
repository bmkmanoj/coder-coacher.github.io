<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>An ~extended~ Doze mode (Android Development Patterns S3 Ep 3) | Coder Coacher - Coaching Coders</title><meta content="An ~extended~ Doze mode (Android Development Patterns S3 Ep 3) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>An ~extended~ Doze mode (Android Development Patterns S3 Ep 3)</b></h2><h5 class="post__date">2016-07-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HBPQZEU_ofg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">users worry about battery constantly and
that means that we as developers should
constantly be vigilant about batteries
so we decided to build that vigilance
into the framework in marshmallow we
introduced doze because at some point
the user will probably place the device
on a coffee table or a nightstand this
means they've turned the screen off the
device isn't plugged in but it is
stationary so when they pick the device
up again off of that table
their battery should not have magically
dropped by 30% and that's why Android
will defer background jobs and sinks as
well as alarms and Wi-Fi scans until a
scheduled maintenance window so that all
background activity happens in one batch
by having these specific maintenance
windows we can extend the battery quite
significantly but now we have extended
doze for a more common use case leaving
your phone in your pocket when the
screen is off after a short while a
light version of DOS will trigger with a
smaller set of restrictions and we will
have regular maintenance windows during
this time but all of our advice still
applies here if you've done the work to
account for DOS and app standby in
marshmallow you won't need to do
anything extra now note that this does
not replace those as it was in
marshmallow
if the device becomes stationary for
some period of time the full set of
restrictions will apply again so it
helps to understand what the distinction
is the lighter doze mode has maintenance
windows that trigger on shorter
intervals that your app can be ready
when the user returns to using their
device and way clocks GPS Wi-Fi scans
and alarms all work normally in the
lighter mode here we are focusing on
background syncs and jobs and more
generally network access because these
are both large drains on the battery
while being the most flexible things to
defer and optimize when a user is out
and about as expected though a high
priority GCM message is still the best
way to deliver time critical information
to your app when you do your app gets a
brief reprieve to use the network and
see what's up this allows your server to
be confident that the important things
reach the user and of course any
foreground service will continue to work
where card lists of battery
optimizations so whether the device is
stationary or not if that screen has
been turned off for a while we intend to
honor the fact that the user isn't
engaged with the device and
that is an opportunity to conserve power
so test your app to be sure it works how
you expect it to and consider tweaking a
few behaviors so that you can continue
to build better apps
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>