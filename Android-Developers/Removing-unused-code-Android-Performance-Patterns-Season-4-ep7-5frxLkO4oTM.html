<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Removing unused code (Android Performance Patterns Season 4 ep7) | Coder Coacher - Coaching Coders</title><meta content="Removing unused code (Android Performance Patterns Season 4 ep7) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Removing unused code (Android Performance Patterns Season 4 ep7)</b></h2><h5 class="post__date">2015-11-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5frxLkO4oTM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">third-party libraries can be some
serious time savers they allow us to do
awesome things in our app without having
to write any of the functionality
ourselves and that's a pretty big
convenience with not convenient though
is the code bloat that they can come
with I'm David East and you can easily
get everything you need from a library
without all the code bloat but let's
take a step back if you're building a
performant usable mobile app with a
small team and likely a small budget
chances are that you're using a lot of
third-party Android libraries to help
you with the heavy lifting this is
totally fine in fact it's a good idea
many of these libraries are heavily
tested and have proven to handle the
stress of production the problem is
though is you may have to import the
entire library when you're just looking
to use a subset the results of this is
called code bloat these extra code paths
turn into overhead that gets shipped
with your apk and coppa load is no joke
at the simplest level will increase the
size of your compiled code this inflates
the apk the user has to download even
more worrisome is the dreaded 65k method
limits the Android runtime assigns a
numeric identifier to each method this
identifier is 16 bits wide so if you
have more than 2 to the 16 methods in
your app it's not going to compile the
only way around this is the new
multi-deck solution and trust me you do
not want to do that it's pretty much as
much fun as going to the dentist
fortunately there's a tool in the
Android tool chain that's great for
hunting down unused code and stripping
it from your built
pro-gard is a tool that shrinks
optimizes in a few escapes your code by
removing the unused parts
it also renames classes fields and
methods with semantically obscure names
to make it harder to reverse-engineer
your code but that's for another video
and ProGuard is a seriously sweet tool
take a look at the Google i/o 2015 app
it's a great app with a lot of
functionality that uses a lot of shared
libraries when doing a release build
without programs code shrinking you end
up with about eight point four megabytes
of code with ProGuard on just 4.1 and
this is especially awesome because of
how easy it is to set up this code
shrinking to turn on programs code
shrinking simply set minify enabled to
true and your Gradle settings then when
you build your app will remove all the
unused code for you pro-gard is not
perfect though while ProGuard is great
at identifying
most use cases it's not so great sorting
out other situations like code that uses
reflection this may end up giving you
some false positives where some code is
removed and some is not which means
you'll have to adjust ProGuard settings
based upon what libraries you're
including some of them may require
special rules to ensure things all work
right so do future you a favor and take
a look at the documentation in fact head
over to developer.android.com and read
the official ProGuard Docs seriously
just go read all of it I think it makes
for great bedtime reading and when
you're done reading through all the docs
or taking your nap come back and watch
the rest of the Android performance
patterns videos and don't forget to join
our Google+ community to share your
ProGuard tips with other developers so
let the small stuff but don't freak out
and always remember perf matters</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>