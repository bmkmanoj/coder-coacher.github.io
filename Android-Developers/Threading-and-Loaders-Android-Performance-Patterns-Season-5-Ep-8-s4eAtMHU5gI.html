<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Threading and Loaders. (Android Performance Patterns Season 5, Ep. 8) | Coder Coacher - Coaching Coders</title><meta content="Threading and Loaders. (Android Performance Patterns Season 5, Ep. 8) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Threading and Loaders. (Android Performance Patterns Season 5, Ep. 8)</b></h2><h5 class="post__date">2016-04-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/s4eAtMHU5gI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what do we do with threaded work when
the activity that kicked it off is no
longer alive
I'm Doug Stevenson and this is the exact
issue solved by loaders by now you've
seen that activities in your application
can be created and destroyed at any time
either in response to the user or
because Android needed the resources
this poses a problem for your threaded
work since the work may extend beyond
the lifetime of the activity say you
have a thread chugging away at some work
and that thread holds references to
views that will update upon completion
if the activity ends before the work is
complete a few things will happen first
because the strong references to the
views the activity object will be kept
in memory until the work finally
finishes this is a memory leak and we
don't have to tell you this is bad since
it can cause your app to run out of
memory and eventually crash second the
late updates these views are wasted
because they're no longer visible and
third you might have to repeat the work
for a whole new set of views to get your
threaded work to correctly cope with the
activity lifecycle and avoid these
problems you should use loaders loaders
are wise to the inner workings of the
activity life cycle so you can you can
ensure your work ends in the right place
every time a properly implemented loader
is resistant to activity leaks always
updates the correct views and is never
repeated unnecessarily let's take a look
at how this works
instead of kicking off your work in an
async task or some other thread you
control you ask the activity for an
instance of a loader manager send the
work to the loader manager and it will
make sure that your work may be handled
properly in the face of configuration
changes for the activity the loader
manager also caches the work result so
that it won't be repeated with future
changes now what if an activity with an
active loader is being popped off the
stack never to return what happens is
this in-flight work in this case the
loader manager makes a call back into
your code saying that its results will
never be used you can use this callback
to abort the work clean up and move on
without wasting any more resources now
it's worth noting that loaders are
specific to activities and as such give
you a solid framework for separating
your views from your worker threads and
minimize the amount of work you would
otherwise have to repeat with the
activity life cycle the downside of
loaders is that can be quite a bit of
extra code to get them correctly
integrated into your app
so to help you get started we've
provided some sample code illustrating
some common use cases and for more
information on improving your
application performance keep watching
the Android performance patterns videos
and don't forget to join the G+
community for advice from other great
engineers so keep calm profile your code
and always remember perf matters</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>