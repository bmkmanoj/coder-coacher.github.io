<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>DevBytes Backstage: Animations | Coder Coacher - Coaching Coders</title><meta content="DevBytes Backstage: Animations - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>DevBytes Backstage: Animations</b></h2><h5 class="post__date">2013-06-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xXpNUeUHfWE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good afternoon everyone my name is reto
Meier I am a member of the Android
developer relations team and welcome to
the first ever episode of dev bites back
stage i'm joined today by chet haase dev
bite author extraordinaire and we are
here today to answer your questions
about animations so if you have a
question that you would like to ask Chet
you can either join us live via hangout
you can find the link to if you go to
the Google+ event page or you can type
your question directly into the comment
stream on the event page or on YouTube
while we wait for you guys to answer
your question will ask us your questions
so we have a few prepared from people
who asked before we got started and I
think we'd like to find out a little bit
more about chat as well so you could
tell us a little bit about yourself and
what you do in the Android team I am an
engineer on the framework team which is
the team that brings you things like
application lifecycle the UI toolkit
graphics activities all that kind of
good stuff specifically I work on
graphics and animation stuff so I sort
of wear different hats at different
times I have done a fair amount of work
on animations I also help out with the
GPU acceleration and general you I
graphics goodies very nice excellent all
right so let's let's get started our
first question is from andrew hughes
from a san luis obispo in california he
asks that let's say you have a view
group that is added directly to the
benefit to the window manager such as a
pop up and a child views layout changes
size causing the entire pop up view to
change size how would you animate the
view groups size change is watch the dev
bites on layout transitions and he's
tried to set that layout transition
using the transition layout changing on
the view group that's added to the
window manager this causes the child
view whose size change to animate to the
new size but the parent viewgroup just
jumps to the new size without anime yeah
so the way that I think about layout
transition is it's really good at doing
very specific things and sometimes you
fall without outside of the bounds of
what those specific things are
and you Andrew have just done so the
problem is rotations that viewgroup does
not have a parent in your situation and
what you really need to do is set a
layout transition on the parent of the
children or of the view hierarchy that
you want to automatically animate so if
there was a way to have a parent there
then you would set the way a transition
on that instead if not you're it's up to
you you could use similar techniques to
animate the bounds of the view group
although you're actually resizing the
window so you're probably down to doing
expensive things like actually changing
I don't know window manager layout
params to actually resize the window
which is going to be kind of costly you
may instead do something different like
actually pop up a window that is of the
correct size but you're animating over a
transparent area and sort of faking out
what it looks like to the user there's a
another technique that we demonstrated
at i/o and they will be coming out as a
dev light soon wait a minute no it came
out two weeks ago they called activity
animations which is about launching
activities with transparent backgrounds
to sort of fake out the fact that the
activity is there but we're going to
animate into it maybe you could do
something like that in this situation to
basically not have it at the full size
when it begins but then sort of animate
the size you want I don't know
specifically about your situation but i
would say that layout transition is
probably not going to solve that problem
for that top-level view group that's in
the window so you're going to need to
figure out something else that will
thank you good answer so I'm going to
rely on Daniels let us know when someone
in the Hangout is ready to ask a
question so if you are joining us by a
hangout do be sure to type into the chat
bar within the Hangout that you are
ready for a question because we often
get people who just want to join
hangouts because it's more fun that way
so if you do actually have a question to
ask please do let Daniel know and he
will put you up on screen in the
meantime Moritz post from Germany wants
to know what would you use to do sort of
Gaussian blur effects within an
application is renderscript still
something that can be used for that yes
in fact there was a portion of
renderscript specifically around doing
actual display graphics that was
deprecated
that is no longer the way the render
script is going however render scripts
has another important component that is
having a lot of work done and a lot of
important performance related advantages
which is the ability to do image
processing so it can use GPU as well as
CPU resources multi-core processing gets
sort of all the advantages of all the
compute power that the that the device
has using render scripts and doing
inherently multi-threaded algorithms on
it so for instance you could do a
Gaussian blur using render scripts using
these primitives in the non deprecated
part of our render script to get
excellent performance for doing things
like this there are other ways to get
Gaussian blur but that's probably so I
would say what you want to do is
probably end up in the highest
performance area which means you're
basically going to be using renderscript
if you want to stay at that level or
OpenGL as well if you want to do things
a little bit more manually renderscript
might be a little bit easier it might
also allow you to stay within the SDK
level you're more comfortable with but I
don't know it's worth checking out it
isn't possibly at expensive computation
to perform at runtime so it does seem
worth checking our registry up to get
the best performance you can very nice
everyone loves gaussian blur effects
over things so you know took a question
let's a look Emila philander says that
you and her mom mentioned a custom view
with a code generated drop shadow in one
of your talks presumably alejo this year
yep so you'd love to know the best way
to achieve this both with performance in
mind and the fact that a drop shadow
will often want to be drawn outside of
the views clipping rectangle it would be
very annoying to take the drop shadow
into account when doing the layout also
how do you handle this drop shadow for
non square views so there's a couple of
different pieces of information there
first of all you might want to check out
the dead body came out again a couple
weeks ago called activity animations
because that had a simple layout in the
back of it that would allow the objects
and inside the container to cast their
own shadow so in that case we didn't
have a clipping problem because it was
the container itself it was actually
drawing the shadows behind the views so
it would basically iterate through the
children whenever it needed to draw
itself and say where are you now I'm
going to draw the shadow there and then
it also had a couple of properties that
allowed you to vary what we call the
shadow distance which created a offset
as well as a blur around that to get the
to simulate the action of the view being
closer or further from the actual
surface that it was projecting the
shadow onto there are different ways to
achieve this effect the one that we used
in that particular activity was to
render a rounded rectangle into a bitmap
and blur that operation in the bitmap
itself and then when we drew the bitmap
it was going to be naturally blurred
especially around the edges which is
what you care about for rounded shapes
or non-rectangular views we just drew a
flat out round rectangle because that
was the effect that we want if you have
a specific shape in mind that you want
to use I believe the technique that I
heard of that you could use instead is
to create a bitmap that's a I think it's
an alpha 8 bitmap and the details are
escaping me but you should be able to
get a similar blur effects there to get
the the effect that you need with the
shape that you actually want to draw
instead of the simple rounded rect that
we were using there but go ahead and
check out the dead bite as well as the
code that goes with it you can at least
see what we're doing for the IO example
which is maybe a starting place for you
very nice do we have anyone on the
Hangout who would like to ask a question
Daniel oh not at the moment not quite
asking the way but yes by all means take
this advantage I'm going to go through a
few more questions which we've
prescreened once we're out of questions
we're going to stop talking so if you do
have anything that you'd like to ask
chat about animations are now is
fantastic opportunity we may be forced
to sing a song if there are no questions
it's did not any when did we bring dan
galpin he's my song proxy whenever
there's a need to break out to song or
dance I I get Dan Galpin in the room but
does that clear the rumor is it a good
thing well I don't know I leave so I
have no idea what happens from that
point onwards in the meantime Andrew
Moore from Leeds has managed to avoid us
having to break into a musical number
quite yet he wants to know how you would
go about creating the animation effect
that's being used more and more in
Google's own apps such as the wine
currents in the list / grid view to
slide in the item at the bottom of the
list elegantly yeah so this question
actually confused me and then I realized
that we hadn't actually played the dev
bites before the question was asked and
now we've done that because we were
unable to have this Q&amp;amp;A periods last
week so I would suggest you go back and
actually watch the dead bites that we
posted last Friday which was called list
view and I'm removal animations I give
you deletion animations okay i recall
correctly so that one specifically did a
very simple swipe maneuver it was not
I'll get back to that in a second it
wasn't probably what you'd want to do in
relapse but it was good enough for the
demo app but and then after it was
swiped out it would animate the items
around it to close the gap the nuance
there is the swype animation used a very
simple heuristic that said you know move
it under your finger and then if it's
gone past a certain amount than simply
animated away very quickly what you
actually want to do in real applications
and what we do in the Google
applications like Gmail is to use
velocity tracker to figure out how fast
the finger was moving when they let go
and if it's moving under a certain speed
then we'll actually snap it back based
on that information otherwise we'll
animate it off the screen based on the
velocity that the the finger was moving
it that's a little bit more effective it
gives the user a little bit better
connected feeling to the application
because it's behaving in a much more
WYSIWYG manner than the simple demo that
we have you can only see the mechanics
of actually animating the item out or
back in and then
the gap closed which was the real intent
of that demo so that's interesting so
it's actually more intuitive for people
using an app to base it on velocity of
finger movement rather than on the
distance which you're transitioning the
object off the screen well it was very
easy for me to base it on distance yes
yeah I would think it's not that much
harder to use velocity instead
especially since we have velocity
tracker as a public class that you can
get ahold of it's going to be a little
bit more work which is why I didn't
bother to do it for the purposes of this
demo because not where I was smoking
focusing but it's not that big a deal
and more importantly it's the user
experience that you want in that sliding
application very nice ok let's have a
look so I don't know who asked this
question but in the new hangout app some
people really like the way that new
messages animate in isn't that on the
input to the chat history and even more
importantly how the previous messages
animate up to make room how would you go
about creating a sequence of animations
like that that is tricky from a couple
of different angles I'll cover them I
don't have a pat answer for you because
it depends on the situation one of the
reasons is imagine this imagine that
you're typing text into an edit text
with a certain font size and then you
want to place it as just a text view you
know a non editable text view in the
chat window as it Scrolls at the screen
well does that have the same font size
and what are what's the text going to
look like in that view and how does that
compare to how the text looks like in
the edit text so how do you actually
animate from one view that is completely
different into another view with the
same text but maybe different text
characteristics or at least different
text measurement because it's not
exactly like the edittext so there's
some tricky nuances there about even if
you have the same size text you want to
make sure that you're actually going to
animate it from into the correct
locations in these completely different
view and layout situations so assuming
that you can actually solve that problem
or that you're actually animating the
same kind of view or you can fake it out
well enough or you can cross fade
between them
the other element here is to have the
ability to basically do a flyover of
views what you want to do is move a view
from one container to another or at
least the facsimile of view one
important thing to note in graphics and
animation is it's not necessarily it's
not always necessary to do the right
thing as long as you do the thing that
looks good so in this case do you
actually need to fly a textview or is it
good enough to simply fly a graphical
representation of the text and you can
actually do either one if you want to
fly the just a bit map of the text you
can you know snapshot whatever it is
that you want to represent the text and
then you can basically have a custom
container that draws that on top of
everything else that's happening at the
same time you could also take a view
basically create a view on the fly or
remove that view that you had from the
parent that it was in and then place it
in an overlay container and then animate
that and the way that works is if if you
picture layers of containers let's say
you have you have a frame layout and it
has a list view in it which represents
the the chat content so far and then at
the bottom of it has a edit text well
you can actually take a view out from
the bottom or create a new view on the
fly and place that directly into the
frame layout so you could set let's see
yeah right you're taking it out of its
out of its container at the bottom and
then you're putting it into the overall
container that also contains the list
view and then as that container draws it
can then draw that other child there
right so you're adding it as a child
basically on the top layer of some
layout that's at the back you know maybe
your main content view or whatever and
then you can do whatever you want you
can animate the bounds of that thing you
can animate the translation position or
whatever you can scale it on the fly
then you could do CrossFit tricks like
once once it's in that that layout that
allows it to lie on top of everything
else that's in there you can do whatever
you want with it and then place it in
the correct place the real trick there
though is as I said at the beginning of
this incredibly long paragraph figuring
out a view that's going to correctly
represent that view from the starting
position and location and size and the
same thing at the end
so that to the user it actually looks
like the same object even though it
probably is not the same object sounds
like a lot of sneakiness there is a lot
of sneakiness and animations in general
again as long as it looks good it's good
enough excellent that's that's our
slogan isn't it there are four dev bites
as long as it looks good it's good
enough a follow-up question which you
may have answered in that very long
paragraph so let's say you've got a chat
client and when the chat loads you see
the see the top of the list to begin
with so the least recent messages for a
moment and it jumps down to the bottom
is there a way to avoid that when you
sort of you know displaying that chat
list to begin with so if you sort of you
open up the window and it's got the the
list and then you want to scroll to the
bottom straightaway when the activity is
loaded yes so one of the tricks that's
if you go back and watch the i/o talk
called a moving experience where we did
a lot of animation demos a particular
trick or if I were to be more proper i
would say technique that you saw in
almost every one of the demos that we
showed was using pre draw listeners and
you can use this when an activity to
launch is basically to let when an
activity launches we're going to do
everything we need to including layout
and figure out where things are loading
the resources and getting everything
ready and then we're going to draw the
activity right and when we draw that
activity by definition everything will
be correctly positioned the way there
needs to be in your case the way that it
needs to be might be you know with
content actually moved up you know
animated up or whatever and so what you
can do is set a pre draw listener so
that right before we actually draw the
frame you can go in and change some
values so that what we draw is going to
be different than what was automatically
determined by the default situation
maybe there's a better more correct way
to do this with you know layouts to
actually do this correctly but but
there's an underlying question here
which is when is the first time that I
can actually get my hands on the bits
that are going to display on the screen
and it's that pre draw listener right so
you basically get the view tree observer
for any view in the hierarchy
a add a non pre-drawn listener put your
code in there that's going to do
whatever it is start in animation move
stuff around do what you need to do in
there and then remember to return true
from that so that the draw actually
happens little nuance have used an ID
and an auto generates the boilerplate
code I know what clips does this anyway
it automatically says return false so in
your pre dry listener you are cancelling
the draw don't do that helpful so what
do you actually get back from the
pre-drilled listener so at that point do
you have access to the inflated layout
view or do you have access to the canvas
okay what level are we looking at you
have access to everything that's in the
view hierarchy right right so if you
have loaded you know before you you
create your view tree you're on pre dry
listener if you've gotten references to
you know things from the layout that you
said is your content view then those
references will be valid and you can
query the bounds of those and figure out
where things are actually shift them
around so a lot of the animations that
we showed in that talk at i/o consisted
of figuring out where things needed to
be and then setting initial values for
those and then animating them into place
if you want views to you know slide in
or fade in or whatever because at the
time when you get that first call back
everything has its correct bounds in
position and orientation and you can do
whatever you want with that information
at that time all right so it's a way
sort of preset thing so if you know this
is what you've got there is the right
place for them and you can say actually
I want it all like my activity launches
I want everything to slide into place or
pop your row fate or whatever else so
you pre candid in the reverse direction
right now there's I mean there's there's
a related question that I don't really
know how to answer which is well maybe
the correct thing for you to do actually
lay things out differently and
reposition them that catching the on pre
draw and sort of setting things up for
animations is slightly different happier
solution where you're not actually
setting the correct position of these
things which would require actually
setting layout params and doing a
request layout and we've already done
the first layout right so it's a little
bit late for you to then come in and say
ok now at this time I'd like to do this
other thing for that logic you'd
actually want to do that a little bit
earlier maybe in
on activity created on created on create
on and on we have a lot of on methods
sure we do and at that point you can
sort of set up the layout for what you
need to be and that will generate a
request layout and that'll put things in
the correct layout position and maybe
then you don't even need the on pre draw
listener but the the on pre draw is a
nice trick when you actually need to
figure out let the system do the real
thing and then tell me what's going on
before you put it on the screen so it
sounds like it's almost a case of
figuring out what the most common
scenario is so if you do it every time
then hacking into the reader or listener
is probably overkill you should probably
just do it in the layout somehow whereas
if it's a sort of a one-off or something
unusual than it might maybe a better
approach I would say more that if you're
going to start hacking things and faking
out layout that you may end up causing
artifacts like if you say no no that's
not where I wanted it to be and then you
go ahead and you set the left right top
bottom position regardless of what lay
out where layout wanted to place those
items then if another layout happens to
run in the next frame your positions
will get clobbered by the real way up so
if you actually want to lay out these
things at the right place then figure
out the right layout solution as opposed
to the more you know animated sliding
things in situations right so avoid go
to signora and you'll lay up hacks go to
is considered harmful it turns out again
you learn something every day somewhere
ok so this next question the it's about
as long a paragraph is your earlier why
so bear with me well I uh I find the
time see if I can distill this slightly
as I read it through so we've got
someone who's working on an app so this
is sorry this is a farms dorfman he's
working on an app which is a great start
really important for us it's going to
animate a box so some kind let's say to
a custom action bus or box along the top
of your activity in and out while you're
scrolling so like the google chrome app
does with the URL box so as you scroll
is going to make this box appear and
disappear but the scroll animation
contains some kind of sub animations so
his action bar should change its height
on scrolling and also do some dish
animations with the child views like
icons and text views so the first
question is how does he implements a
change animation is that a scale
animation it doesn't seem to be
something like that yeah changing the
bounds of views can be tricky because
the height the bounds of objects as well
as the real positions of them are
determined by the layout and to get the
real to get or to set the real position
and dimensions of a view you really need
to let layout run because only the
layout especially the nested layout in
which that view lives is going to be
able to determine the real information
about that view so I would say in an
ideal world if you want to set the size
of an object or animate the size of
object what you do is change the layout
params and then let the layout system
figure it out in the real world in which
we live I have constrained devices that
might just fall over if you force them
to do layout on every frame in a really
complex view higher again and in fact
that easy follow up is he was like kind
of how to do this going to change the
layout parameters is was a following
this was the follow up it turns out that
this has some performance ability does
her performance fact I know this i am
even even back in the days where we
didn't have such resource constrained
devices i used to write code for windows
big powerful machines almost as big cpu
power as these phones do now and i had
this really smooth progress bar so it
was a progress bar battles in
determinants and i have a passionate
hatred for progress bars which go to the
end and then start again from the
beginning so I'd be like I built my own
and a pulsed went in and out and and it
and it changed colors and everything
because you could do that in the.net
canvas and so I was changing the the
layout of this object which was changing
colors turns out it uh well no it was
beautiful for because I just took over
the UI thread for that is you want to
make it nice and smooth it turns out it
decreased the performance of the
underlying activity by a factor of 10 so
nations are that important well and I
for me that was good enough that cuz it
looks good it's good enough that's right
so yes that was his follow-up so do you
have any general ideas feedback then
yeah I again most my answers are well
depends on your situation in this
particular case there's a couple of
things that could work you've also
determine that maybe scale is not the
answer and in general it's not scale is
really nice for sort of a transient
effect where you're popping something
out of the screen or you're animating it
in or you're just giving a little bounce
in fact or whatever but as soon as you
start scaling things especially the
contain text they tend to look really
awful so it's really better as a
temporary effect then to actually change
this size with a scale especially you
know you're going to make this thing
taller so you're going to scale and why
well that's just going to stretch out
everything vertically it's going to
really look horrible it's a graphics
term horror horrible so what you really
want to do is change the real bounds of
the object but then you have this this
problem to solve where well if you
animate the layout brims that's really
expensive it's the correct solution but
it's really expensive what I have done
in some situations including the layout
transition class that we talked about
earlier is you can actually animate the
bounds of an object and you can do that
by calling centers where you can set up
an object animator to basically animate
left right top bottom just as you can
animate the translation properties or
the scale or the rotation or anything
like that and you can combine that with
the ability to use the on pre draw
listener which we talked about earlier
to basically run layout set the layout
params to what you want them to be and
that will cause a request layout and on
the next drawing frame we will run
layout before drawing occurs so if you
add a view tree observer on pre draw
Wisner then you're going to get a call
after that next layout has run but
before we've displayed it on the screen
and at that point you can start an
animation this is exactly how layout
transition works you can start an
animation that animates the left right
top bottom bounds right and you can do
so in a way that is is changing the
correct thing is not changing the scale
but instead it's actually changing the
size of the view now there's a couple of
very important nuances to this one is
this the position
the position of items inside of that
view or inside of that layout whose
bounds here changing might be in the
wrong place because you just told layout
to run which means they may be set by
that layout to then pop to their end
state you may need to do something with
those such as animating their relative
position inside the layout at the same
time you can also do things like fade
text out resize the thing fade text in
that can be compelling or effective
another problem that you're going to run
into is that if a real layout runs in
the middle of your animation then you're
going to have a bad day because the real
layout positions are the ones that you
told it you wanted at the end of the
animation so if you said okay I want
this thing to be this big we're going to
call request layout layouts going to run
you're going to have your pre draw
lesson you're going to say okay now
animate from this smaller size up to
this larger size if you're in the middle
of that animation and a real layout runs
it will snap very momentarily over one
frame to that real end sighs and then
your animation will continue running so
you're going to see this flickr artifact
as it hops over the real values and then
continues with the animated values that
you have the workaround for this again
which layout transition uses in which
you can use in your own application is
to have a custom layout and make sure to
stub out layouts calls or on layout
calls during the middle of an animation
just so this artifact doesn't happen
it's a bit of a hack but it's really
basically a workaround for the
performance situation where you know
what you're supposed to do but you don't
have the performance to do that across
all devices in all situations nice I was
offer another very long pair that was
pretty good I mean it was a long
paragraph question so you know you have
to you have to match it that's right
yeah word fun of your contract right
however how many words are in the
questions raised to at least be that
many in the answer we've got a few more
questions from the G+ stream people are
shy that I want to join us on the
Hangout fair enough by all means keep
silly questions in either yeah he hates
being on camera it's awkward sunshine
hansa dorfman asks he's wondering how
the Google Play Music app have
implemented the parallax scroll view is
it is that a translate y animation I
mean you can use the on scroll listener
to detect scrolling and and then simply
set the translate y of the view to do
step-by-step animation is that kind of
the right way is it ok if I say I
haven't a clue I don't even show you how
to talk about the parallax parallax
scrolling in in google play music so I
think what that would be I'm not sure
myself you can see you don't have a clue
I don't have a clue sorry I without
picturing it I can't even give you a
pointer to it so no I'll have two should
do yeah we should we should get someone
to to show you I think producer Daniel
may have a phone which you can show us
on we'll see how we go all right awesome
in the meantime we'll have a look at a
question from our Palin who says how do
you consistently animate sprites on
devices with vastly different processing
power I know the back in my day there
was a button on the front of the
computer that said turbo laughter so you
could slow down but I don't know if we
have that on anything you know we
started removing buttons from devices i
wonder if we got rid of the turbo we
must have done because i don't see like
switching between eight and 12 gigahertz
maybe it's inside the back you could
take the back cover off unfolded one of
the processes so one thing that we're
really good at doing especially when we
went to hardware acceleration we're
moving bits around on the screen is is
much faster is copying bitmaps around if
they're really big bitmaps and
especially if they're like blended on
the screen and you're doing a lot of
overdraw then things tend to get
expensive but if you just simply copying
you know small sprites around unless you
have thousands of them to copy on every
single frame you're going to get pretty
good performance and this is you know at
the STK level you're just doing a draw a
bitmap from here there if you're not
scaling on the fly actually scaling on
the fly is even cheap in the GPU if the
bitmap is not really huge if you're not
applying filters to it which caused
extra processing power and may reduce
some of the hardware acceleration
effects that we can get you're going to
get pretty good performance anyway I
have seen performance suffer when
someone
trying to you know they had a bunch of
small sprites or animating and buy a
bunch I mean three thousand when you get
up to that level and you're sort of
iterating through this tiny little loop
to copy a lot of stuff around well the
overhead of sending all those commands
down can bog down eventually but if it's
just copying sprites around in the
screen GPU is pretty good about that
there's also tools to help figure out
whether that's really your bottle neck
or whether there's something going on so
you should certainly look into using
trace view which is an excellent
profiling tool a note about it though
that it does tend to skew or distort the
timings of things that are actually
happening at the SDK versus the native
level the the overhead of the tool
itself tends to make the lar the numbers
seem larger for simple things like
method calls but it can at least give
you sort of a relative impression of
what's going on for performance another
one is to look at the GPU performance
which you can enable in the developer
options and that will spit out some
numbers when you do a dump sis GFX info
and you can put those into a spreadsheet
and sort of see where your frame rates
going at what times and see what exactly
is contributing to those frame rate
problems and you can also use the
overdraw tool which will show you it'll
use colors on the screen to sort of show
you what's being overdrawn which means
yeah maybe copying that sprite was
really cheap but you are also copying a
window background and then on top of
that you're copying an opaque background
for the application and then you've got
list items overlaying that and by the
time you actually got to you know
drawing the sprite it was like the 5th
or 6th level T and we simply ran out of
bandwidth in the GPU to draw that many
pixels on the screen great ok so here is
the the parallax view that is referring
to you'll see there the the album art at
the top is scrolling at a different
speed to yeah so the list underneath it
ok so here's I guess the question is is
this an animation or is this just a
simple case of you know we're tracking
the movement of this particular list and
modifying the position of each i believe
so that's not an animation they're just
saying ok how far the finger move and
how far do we want to scroll this list
you can scroll a list either directly
with the finger or
grammatically I would assume that
they're just doing it programmatically
based on a scaled-down Delta value for
the scroll position that makes sense it
is a nice effect though yeah turns out
not everything that looks nice has to be
an animation what it's news to me I
think we've got a last question here
from maxim Gul Evek in unless where he
have any more coming up in the next few
minutes and we've in fact gone after
over a half hour a lot maneuvers today
there will be no singing good news for
everyone I get the impression Maxim may
have been talking to you before because
he says he would like to pick at Chet's
mind once again on viewgroup animations
he'd like to know if you could speak
more about techniques that could be used
to expand viewgroup height revealing
child elements he's put that in quotes
feels like either he's asked you that
before you've done a dev bite on or did
he ask the earlier one of our view group
animations that's quite possible let's
have a look I don't recognize the name I
do try and hideously mangle everyone's
name so if so was uncredited but in any
case can you speak more about the
techniques that could be used to quote
expand viewgroup height revealing child
elements expand your consciousness uh I
maybe I'll add a little bit to what I
was saying before about actually
animating the real bounds you can
imagine situation where you wanted to
expand a view group to include another
view that was down here you could
animate the bat you could force layout
to occur at the on pretrial listener I'm
getting really tired of saying that we
need smaller method names in Android
that's really what we need that's what
we talked about them more quickly that's
what though the learning from today's
episode really is a smaller smaller map
I mean nothing beats that there's one is
its class name color matrix color filter
I think if I can just work in color one
more time and the world will explode
okay so you have you group that's this
big it has been a bunch of use in there
and then maybe you get another one that
you want to add there when the view
group gets larger you could set the
layout params you could add that view
down there or you know this will expose
of you or whatever is happening in the
app and then animate the real bounds and
then as i said before ones once you run
layout and that view actually is down
there that will be its real position and
that's where the layout wants to draw it
so as you animate the
then it will simply expose the thing
that's already sitting there waiting I
don't know that's probably too
simplistic for your situation but I
don't really know how to answer it other
than one detail now I think that's a
good answer all right brilliant that
looks like the last of our questions
we're just over 30 minutes so it's kind
of perfect for today's episode thank you
very much jet for joining us doing our
first for devs bites backstage what do
you think of the name by the way dev
boats fantastic yeah working for you I
like Chet bites because you seem to be
the only one doing it that's a
nonetheless we're going to try and bring
in some other people for similar dev
bites backstage even if they haven't
done a great number of devbytes for us
to talk about in fact tomorrow Roman and
Nick from Android design in action will
be doing a dev bites backstage talking
about some design elements and in
particular practical you I
implementation for android based on
their Google i/o talk from this year so
please if you have other backstages
based on teams that actually aren't
doing dive boats you can call them null
boats no but online all boats yeah I
like that I like that a lot so we'll
stay tuned for more dev bites backstage
and null bites and no bites backstage in
the meantime do send us through your
questions for Nick and Roman for
tomorrow's episode and do join us
particularly if you aren't feeling shy
and like to join us via hangout you can
ask them in person there are a lot less
scary and intimidating than Chet so
hopefully we'll get a few people to join
us that way in the meantime thank you
very much for joining us and we'll see
you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>