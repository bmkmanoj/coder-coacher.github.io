<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>DevBytes: Bitmap Scaling | Coder Coacher - Coaching Coders</title><meta content="DevBytes: Bitmap Scaling - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>DevBytes: Bitmap Scaling</b></h2><h5 class="post__date">2013-01-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/12cB7gnL6po" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi I'm Chet Haase an engineer on the
Android team at Google today I wanted to
talk a little bit about bitmaps in
particular I want to talk about bitmap
scaling one of the big problems that
people run into when running
applications on constrained devices is
that they want to load in let's say huge
images from the camera on the phone from
the web wherever and when they're
loading in a lot of these things a
they're going to take a long time to
come in be they're going to create
garbage along the way and performance
problems and see maybe they're going to
run out of memory if they try to load
too many at the same time there are
various ways of dealing this with a
situation the overarching idea is that
you should load and create and use the
images of the size you need so for
example don't load in an image that's
this big if you're always going to
display it as a thumbnail instead
loading whatever you need to get it at
the size you need it and then have that
be the image that you retain so today's
example is around loading in a scaled
version of it in particular we're going
to use a parameter in bitmap factory
options which is called in sample size
so first let's take a look at the demo
which is called bitmap scaling and
there's nothing to interact with here I
just wanted to show a visual
representation of what's going on with
these images because there's something a
little unobvious about in sample size
the first time you use it
so the original image you can see up at
the top under the words that say
original image and then you can see
these scaled versions down below where
it says scaled images so we see two of
the same size and then for the same size
and then two of the same size under
there so what's going on let's take a
look at the code so we have this class
called bitmap scaling we have this image
view where we're going to find the
original image we're going to decode the
jelly bean statue image in there and
then we're going to add scaled image
views and this is going to be using the
in-sample size thing so we're basically
going to iterate from values from two to
ten and use that as our in sample size
value and see what effect we get so we
create one of these bitmap options
objects and we set the in sample size to
the
emphasize it was passed in which is at
integer value from two to ten and then
we create a scaled bitmap which does a
decode on that original image but it
uses the options it uses this in sample
size and what in sample size tells it is
how many pixels to read for each of the
original pixels in the image the
advantage of doing it this way is that
it reads less data it's going to be
faster to do this because it's basically
skipping a lot of data along the way
potentially based on on the value of in
sample size the disadvantage of doing it
is that it's basically going to wind up
with powers of two scales of your
original image so you can pass in a
value of two which means it's going to
skip every other pixel and you're going
to wind up with an image that's half the
size of the original if you ask for
three it's happy to do that except it
doesn't really make sense it's actually
going to round down to the next lowest
power or two and it's going to be
equivalent to two which is why we see
for the first two scaled images they're
exactly the same size because passing in
three was equivalent to passing in two
when we go up to four that's the next
power or two ok it's happy to to do that
when we go up to five rounds down to
four so basically in sample size is a
very coarse-grained way of getting a
scaled image it works great in the cases
where you want powers of two scales of
your original image maybe it works for
you two to read in at that slower size
and you get a faster reading time
because you're reading less data but
then once you have that data
maybe you then want to scale to the
exact size that you want and you can
always get a bitmap of the exact size
that you want through various mechanisms
creating it exactly at the width height
that you want or create a scaled bitmap
there's an API to create a scaled bitmap
from another one so there's lots of
different ways to do that today was
about using in sample size in particular
higher performance because it reads less
data with a constraint that it will end
up with powers of two images at the end
so in sample size use it thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>