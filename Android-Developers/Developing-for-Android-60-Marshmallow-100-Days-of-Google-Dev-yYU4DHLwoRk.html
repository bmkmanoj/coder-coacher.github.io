<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Developing for Android 6.0 Marshmallow (100 Days of Google Dev) | Coder Coacher - Coaching Coders</title><meta content="Developing for Android 6.0 Marshmallow (100 Days of Google Dev) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Developing for Android 6.0 Marshmallow (100 Days of Google Dev)</b></h2><h5 class="post__date">2015-08-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yYU4DHLwoRk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">android marshmallow is coming to devices
soon and just like every new Android
release it's important to make sure that
your app is up to date and ready to be
installed as soon as the upgrade rolls
out my name is rich Hyndman and i'm here
with a quick update to using the
Developer Preview to get ready for
launch let's jump right in the Android M
Developer Preview 3 consists as the
final Android 6 SDK it's got
documentation sample code and near final
emulator and device images we've
incremented the API level 2 23 now so
you can upload your marshmallow targeted
apps to the Play Store and make use of
the alpha and beta channels if you've
been following along through dead
previews 1 and 2 then this update is
pretty incremental we've enhanced the
permissions user interface and behavior
and also updated the fingerprint API to
give a better enrollment experience
enumeration support and improved error
reporting you can check the API
differences doc for full details if
you've not already flashed the device to
the Developer Preview then it's worth
pointing out that you should grab the
latest SDK first open up Android studio
there's no need for preview or canary
channels this time as we're on the final
SDK so head straight into your SDK
manager you have access to the final
Android 6ap eyes and the latest build
tools so you can target API 23 whilst
you're there you should update to the
new Android support library as well it
contains a number of new support
libraries including custom tabs
percentage based measurements
recommendation and preferences and
you're all ready to go if you're
starting a new project you can choose
target SDK API 23 and ignore the fact it
says android 5.0 for the actual release
if you're updating an existing Developer
Preview project you now switch in your
build from using Android MNC as your SDK
version 2 23 you can also head to the
AVD manager if you want to set up an
emulator select a device of your choice
and use the API 23 x86 images for best
performance ok back to the device images
so ensure your data is backed up and
follow the steps in the preview guide if
your boot loaders locked then you'll
have to unlock it first so ensure if
you're on a nexus 6 or a nexus 9 that
OEM unlocking is enabled in the
developer options then ADB to reboot
into bootloader run fast boot
unlock which is also going to wipe your
data then you're going to go to the
system images and execute the flash or
script it's going to update your
device's bootloader baseband firmware
and os then to be secure it's
recommended to lock your bootloader
again with fastboot OEM lock it should
be smooth sailing and if you do hit a
missing system image error then you're
probably not using the latest SDK tools
now you have an Android M device for
testing and a preview emulator as always
with new releases we have some changes
in behavior that you'll need to test out
you can find them all on the behavior
changes page on the preview site first
up a deprecated API that's been removed
if your app or any of the libraries you
use rely on the apache HTTP client
you're going to need to make a small
update to include it in your build and
declare it as a compile time dependency
in your build.gradle file if your app
targets Android 2.3 or higher I would
highly recommend switching to the more
efficient httpurlconnection class
instead next up we have doze if a user
leaves a device unplugged and stationary
for a short period of time with the
screen off the device is going to enter
doze mode it's going to try and stay
asleep until the device is disturbed
restrictions will apply to your app in
this mode wait clocks are ignored sync
adapters can't sync schedule alarms are
deferred and network access is disabled
you can enable some of these so check
the documentation on power saving
optimizations for more details to test
doze mode we have adb commands here
there's also app standby mode which can
detect and affect inactive apps so check
that out as well excitingly runtime
permissions are here they provide less
friction on install and automatic app
updates but you can no longer assume
that just because your app is installed
all its stated permissions have been
granted permission to granted at runtime
and users can revoke permissions on a
per-app basis at any time even for
legacy apps that aren't targeting
Android L for testing we have more all
new adb commands for parameters for
granting permissions revoking
permissions installing apps with all the
permissions granted check out the
permissions guide on the preview site
for details always check that you have a
permission before trying to use it
and request it if you don't if there's a
set of permissions that your app needs
light camera access for a camera app it
can be worth requesting them in a warm
welcome up front next Android auto
backup it's a new service designed to
simplify building a robust data backup
service for developers and improve the
lives of users up to 25 megabytes of
data is backed up per app watch Matthews
video for full details if your project
targets em back up will be automatically
enabled and there are a couple of things
you should be aware of if you have any
data you don't want backed up like
device specific or encrypted data then
the easiest thing to do is move it into
the get no backup files directory you
can also specify an inclusive or
exclusive backup scheme or opt out
altogether for testing there are new adb
shell backup manager commands and as I
say in the M preview build auto backup
is enabled for all apps for the M
release we will only do it for apps that
are targeted M or higher it's also worth
mentioning and for testing we have new
fingerprint AP ice and the new ADB
finger touch command to go along for
simulating fingerprint input check the
preview site and mayor's video for full
details so we're on preview 3 we're on
the home straight to the final release
so please ensure your apps are ready
check out the preview for other features
like app standby adoptable storage data
binding text selection and the very
powerful app linking test now well you
have time and you can give us feedback
in the Android M developer community on
Google+ so that's Android marshmallow
something harmless and lovable that
could never possibly run amok in New
York and destroy us</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>