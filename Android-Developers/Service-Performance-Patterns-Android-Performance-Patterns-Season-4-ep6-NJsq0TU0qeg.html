<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Service Performance Patterns (Android Performance Patterns Season 4 ep6) | Coder Coacher - Coaching Coders</title><meta content="Service Performance Patterns (Android Performance Patterns Season 4 ep6) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Service Performance Patterns (Android Performance Patterns Season 4 ep6)</b></h2><h5 class="post__date">2015-11-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NJsq0TU0qeg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">services are an integral component for
almost every Android application but the
functionality they provide comes with a
drain on battery and system resources
and if you're not paying attention
they can get a little greedy with that -
my name is Colt McAnlis and using
services in the most efficient way
possible means killing them off the
right way and sometimes not even using
them
remember services are how an application
indicates to the operating system that
it needs to perform a longer running
operation outside of normal activity UI
flow basically you can do work and don't
have to wait for input events to do it
which is all great but there's a few
things you need to be aware of firstly
that from a system level services aren't
free creating scheduling running and
even destroying services cost time and
memory secondly services run on the UI
thread of your application which is
trying to update the screen every 16
milliseconds or so this means if you're
doing a bunch of work and a service you
can easily miss that 16 millisecond
window and end up dropping a frame now
let me be very clear about this in 90%
of the cases the best way to avoid these
issues is to not use a service in fact
there's a lot of situation where
services are being used when they don't
need to be for example using a service
to listen and respond to events is way
overkill api's like broadcastreceiver
can still respond fine to events even
the app is running in the background
this goes double for spinning up a
service just to pull a server for data
again bad idea you should be leveraging
Google Cloud messaging instead to allow
the server to push updates to you which
you can still receive in your app
directly without needing a service
running and if you know that your work
is going to be happening in the
background then it doesn't make sense to
bother the framework to be scheduling
services for you instead try using an
actual threading setup like intense
services or handler threads or async
task loader
all of which will get you the same
result but with less scheduling overhead
on the system and actually get your
things off the UI thread which is a
bonus as well basically there's lots of
options provided by the framework to do
various types of asynchronous work
without needing to resort to the
overhead that services demand so if you
can try to leverage one of those
solutions first but if you've exhausted
all of those options and you
still find that a service is the only
way to solve the problem then you need
to adhere to the one primary rule of
services do not let services live longer
than they are needed you've got to
remember there's two distinct types of
services with two distinct ways to
terminate them see started services stay
alive until they are explicitly stopped
with a stop self or stop service call or
your app ends until then the service
just sits around waiting to process
things and eating up resources now a
bound service on the other hand stays
around and consumed system resources
until all of its clients unbind from it
by calling unbind service or your app
ends now mixing these two services is
useful but it's a common source of
errors for example calling start service
to create your service and then calling
bind service on it for IPC communication
the problem here is that even when the
client calls unbind service it won't
terminate yet because it's waiting
around for a stop service to be called
the gist is this you must get your
pairing of start/stop bind and unbind
right before this service will actually
terminate and basically that's the trick
with services avoid them if you can and
if you are using them make sure that
you're not letting them ramble off into
the weeds for longer than they should be
and if you have a suspicion that your
services might be doing that systrace is
a great visual tool to help you see
where your system time is going and what
apps are responsible for it and that's
what Android performance patterns are
all about making sure you're doing the
right things at the right times so that
you don't waste resources or perf cycles
which is why you should check out the
rest of the Android performance patterns
content and don't forget to join our
Google+ community for tips from other
great developers so keep calm profile
your code and always remember perf
matters
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>