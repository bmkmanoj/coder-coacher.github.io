<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What's New in Android (Big Android BBQ 2015) | Coder Coacher - Coaching Coders</title><meta content="What's New in Android (Big Android BBQ 2015) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What's New in Android (Big Android BBQ 2015)</b></h2><h5 class="post__date">2015-10-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mNkSxMrKC0k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we're going to talk about what's new
in Android if you recognize the title of
this talk it may be because we gave a
talk eerily similar to this before if
you saw that talk at Google i/o you may
find some in the material today eerily
similar to what we said back in May
that's because we gave out a preview
release that thankfully was pretty
representative of the final release of M
which finally came out very recently we
have added we when I say we it's the
Royal we cuz there's only one of me up
here we've added a bit of information to
talk about stuff that has happened since
that preview really so I'll go over that
in the meantime I would like to
introduce my co-speaker unfortunately he
decided that he couldn't join me he
actually got really sick the night
before he was going to come out here and
bailed yesterday so originally Dan
Sandler was going to join me for a
reprise of our talk that we did and then
Dan bailed on me for some pathetic
excuse like work and then Roman was
gonna join me instead as a stand-in and
he was gonna fake a Boston accent that
didn't work either
so now it's just me pretending that I
don't have a problem and that everybody
actually wants to be here but just
couldn't so I let this this post on the
barbecue site where apparently I I now
have like a Catholic four name name it's
Chet Haase la magie and that's the
person then won't be joining me so on
with the show first of all one of the
things that's new since IO obviously is
some of the new hardware that we have so
the Nexus devices just came out the 5x
and the 6p actually so is anybody
actually seen held bought these things
yet okay I'm gonna claim a majority
although I think I saw seven hands
actually the availability was a very
recent rate you could do a pre-order I
don't know if they're actually
delivering yet 5x oh cool okay I see I'm
on the inside I don't know the details
on the outside so I was gonna go over
quickly some of the some of the specs
here some of the more interesting stuff
quality camera will see some pictures
later I was I am NOT a good photographer
but I was surprised I took a picture of
a sunrise I thought there was sort of
some interesting Reds and it actually
came out with a really crisp detail and
fairly dark point in the morning so that
that was sort of my first alert that
like the sensors a lot bigger you can
get a lot more light in there and do a
lot more with it we'll talk a little bit
about fingerprint stuff that's enabled
on these devices USB type-c will mention
some of the specs here so I actually
prefer the 5x just because I like the
smaller form factor it's a little bit
taller than the Nexus 5 but in the
meantime it's got faster hardware so
it's got the wonder they call with the
hexa core hexa being some language for
six so we have four little cores and
then two mega cores so fairly good
performance on the CPU side upgraded GPU
from the Nexus 5 fairly substantial
battery in there on the 6p side much
larger display a little bit smaller than
the Nexus 6 which was too big for me
this is a little bit a little bit
smaller easier to handle with one hand
again upgraded GPU and CPU from what we
saw before including the octa-core so
we've got four little cores and then
four big cores when we need to run
something really substantial on there so
on the camera Watson numbers not all of
which makes sense to me
so 4k video slow motion capture I played
with that the other day interesting
double-click on I don't know if anybody
has seen this feature yet in the camera
app if you double-click when the screen
is off it'll automatically launch into
the camera or even if you're logged into
the phone if you double click it'll go
to the camera immediately it's sort of a
quick way to get into kind of a common
use case that people had so you don't
have to you know turn the phone on and
then do the thing that you want
meanwhile fairly large resolution
pictures that come out of it fairly
large pixel size and a large sensor area
so we get a lot more light coming into
the camera so here are some sample
pictures taken by a much better
photographer I asked well Maggie I
always find when I want to put pictures
in a presentation of mine it's much
easier to just steal them from Roma who
knows how to take pictures so these are
some that he took around the office and
home the other day sort of demonstrate
various things including I wanted to end
on an American flag because Texas
let's see so Nexus imprint this is
actually my favorite feature about these
devices the really cool thing is the way
I store my phone in my pocket is usually
facedown upside down and as I take it
out of my pocket I put my finger in The
Fairly cleverly placed location and then
by the time I'm looking at the phone
it's actually unlocked and on so it's
just kind of a nice sort of quick
power-on thing it can also be used to
authenticate your applications that you
write and we'll go over a little bit of
that later I haven't used those
applications yet I'm not a pay user
right now but it's it's kind of huge for
me just having the unlock feature USB I
find this kind of cool I don't know if
anybody else goes through this with the
normal sort of USB what the be the micro
USB adapter I always have to go through
three efforts to plug it in right so you
try it and that didn't fit so it must be
upside-down and then you turn it over
you try it again and in fact that was
wrong and you were right the first time
so then you turn it over and then insert
it correctly the third time so USB see
saving two efforts on every plug in
thank you very much okay let's talk
about Android six marshmallow here's a
picture of the little guy outside
freezing it I don't know five thirty in
the morning when I got there that day
first of all runtime permissions so
who's actually enabled their app for
runtime permissions so far a few of you
goods um more would be better so this is
something that that users as well as
developers have asked for for a long
time I think the trick is that it does
mean some growing pains right because
now well a you need to do a little bit
more work to actually opt into this
thing but also you need to handle
conditions that couldn't come up before
because users may actually deny that
permission to your application or they
may not want that permission granted and
you actually need it so there may be a
little bit more interaction this require
the user to explain why this thing is
needed so that they understand on the
other hands we now no longer have this
set of blanket permissions that the user
is faced with when they install your
application why is it that your chat
application needs my camera why is it
that your game needs to know where I am
some of these things don't make sense
and shouldn't have been there in the
first place frankly some of these things
make perfect sense in the context of the
application but it's hard to gauge that
when you're just faced with this huge
list of permissions when you want to
download and install the application so
it's much more granular and explanatory
now so this is the traditional model and
this is still the model that people will
see on pre M releases so I need the
following things and then you have no
choice you're like well either I'm going
to give you all these permissions or I'm
not going to install your application
and if you want the application you kind
of got to do it in the new world instead
you ask for permission when you need it
when a particular permission needs to be
granted in order to you for you to
perform some some function like you know
actually using the camera or using the
location then you ask the user for that
once they've granted the permission you
have it you do not have to ask for it
again on the other hand the user can
deny things at any point you can go into
settings and look at all the permissions
that are used by all the applications
and disable these selectively
which means that your application
especially if you wrote it priam and you
haven't touched the code since may be
denied a permission that you thought was
there because when it was installed that
permission was there so we have a
mechanism internally to you know throw
an exception or an error when you don't
get that exception and hopefully your
code is robust enough to handle that but
if you're reattaching this with the M
runtime permissions then you want to be
able to handle that intelligently and
you want to also be able to give the
user a little bit more information when
it's necessary I'm not sure if I show
the flow there let's see no let me go
back so one of the things that helps is
there's there's sort of a to ask policy
so we'll ask the user and if you think
well this permission will be granted
there's no reason why they wouldn't let
let me have access to the camera because
obviously it's a photobooth application
right so you pop up the permission and
the user says no I don't want this okay
well we allow you to ask again as the
application but that second time we ask
we're gonna also include a checkbox that
says never ask me again because
otherwise it's like you're spamming the
user every time you
for this thing but maybe before you pop
up that permission again you can say
okay we need access to the following
thing because we have this feature
called
a camera and this is an application
called a photobooth so maybe you
actually want to enable this permission
and once you think the user actually
understands why you're asking for the
permission then go ahead and tell us to
expose that dialog again we'll pop it up
hopefully they do the right thing and
you can go on about your business
so these permissions everything you're
asked for but to the user the app
actually has to deal with it I went over
a lot of that stuff we'll keep going
there is a compat API now so you can
access this in the support library
there's a couple of resources for more
information first of all there was
permissions in EM session at Google i/o
it followed the the what's new in
Android talk that we gave back in May
that's on YouTube so go ahead and search
for it by that title and Ben poisons a
lot more of the details of how and why
this thing works and also we had been on
the podcast actually I'm curious how
many people know about the Android
developers backstage podcast because
this is like one of those secrets you
sort of do this thing and you ship it
out to the world and you have no idea
how many people are who actually knows
this thing exists so it's a podcast that
I do with tour Norby from the tools team
where we interview mostly Google people
not exclusively it just happens to be
easier to walk down the hall than it is
to email somebody externally and
organize that so we talked to a lot of
Android developers basically about how
stuff works either internally or
externally so we had been on to talk
more in depth about permissions so you
can check out that episode if you want
to know more of the internals and how to
actually interact with permissions voice
interactions so we had the capability
already to have an intent launched with
a voice action now there's interactions
so you can actually interact with the
user after they launch your intent so
you specify this intent and you say I am
going to be launched on voice actions
and you could already say well if it's a
voice interaction do the following thing
but now you can actually go back to the
user and get some clarifying information
so you can say okay given the following
string go ahead and do a text-to-speech
thing and
say this to the user to get some more
information and then when you've got
that information launch my confirm
implementation and once I've got that
and I have the the following clarifying
information so basically they said
something that launch your app you
respond asking some clarifying question
they respond to that then you get that
additional information you can go on
about your business
fingerprints again my personal favorite
feature of the new devices with that
capability you have the ability to pop
up your own user interface for
fingerprint authentication so there's a
api's where you can get the information
from the sensor and say okay have they
authenticated that they are the correct
user with the fingerprints that are
stored on the device and you can have
your own UI - to help the user
understand what they're doing and and
what the result of that was or you can
use the standard UI by calling create
confirmed device potential intent that's
a that's a mouthful right there that's a
lot of characters I think you're gonna
wrap the line just with a method name
there so you can have us pop up the
normal lockscreen UI to ask the user to
authenticate that way as well there's a
couple of samples that are good to check
out there on the D Android comm site the
fingerprint dialog as well as a
confirmed credential and there's an i/o
by the fingerprint and payments api's
this was a sandbox talk at i/o and then
they recorded it as an i/o byte so you
can search for that title name and
you'll find Maya talking about this
we also secret for the people in the
room that nobody outside this room knows
until the video is posted in an hour is
that we've we've had a conversation with
some of the fingerprint people on the
podcast as well so hopefully that'll
come out sometime soon we'll see Android
back up so you could always back up
everything
sorry not everything you could back up a
bunch of stuff we would back up things
about your accounts so that when you
restore it onto a different device or
installed your account or a different
device we would pick up some of those
sort of common account settings you know
the Wi-Fi routers you could connect to
or whatever but now we actually backup
basically everything except temp and
cache directory information so when you
target the EM SDK we will back up all
your stuff automatically
we're free and store it in the cloud and
then you can opt out of that if you want
so there's a simple way of opting out
using include and exclude tags in an XML
file so in your resource directory and
XML directory you would create this
backup scheme dot XML file that you
refer to in your manifest and then you
give us include or X goods by default
everything's included if you'd give us
an include or a set of includes then
only those things will be included or if
you give us excludes then only those
things will be executed from the full
set and then additionally you can just
tell us to not backup anything if that's
just not something you want to do that's
fine Google Play services we recently
released 8.1 I believe so back at i/o we
talked about the thing that I think is
still pretty critical for people to key
into which is GCM network manager this
is kind of the the Google Play services
equivalent of job scheduler and in fact
when you're running on a release that
has job scheduler as part of the
framework it'll use that internally but
it's the same idea and API is for
basically saying I want to do things
when it's appropriate so I want to do
this when the device is plugged in or
when I have high bandwidth data or when
when I have Wi-Fi all of these things so
that you're not you know constantly
sinking or sinking at times that are
totally inappropriate for the user
experience or the device capabilities or
the data plan or whatever there's a
bunch of other stuff that's been added
also in in Google Play services 7.5 as
well as the releases since then nearby
came out over the summer again we had a
chat with those folks on the podcast if
you want some of the inner details of
that sort of close proximity
communication between devices to set up
things like you know passing tokens back
and forth to get everybody on the game
dashboard or whatever mobile vision the
ability to do face detection as well as
barcode scanning the new permissions
model there's some marshmallow
permissions API is in the more recent
Google Play services stuff Maps can come
up now in ambient mode I don't know if
people have noticed the ambient mode on
the new devices sort of comes up with
this this simple and cheaper sort of
black and white screen to give you the
basic information then you can go launch
into the full color screen if you want
player stats app invites more
information on the blog's that were
posted about Google Play services so
check those out so battery turns out
that battery is continues to be an issue
and probably will continue to be an
issue after this as well because
basically apps are doing more and more
the more capabilities that a device has
the more apps want to take advantage of
that you know they want their data all
the time then we have a problem on the
device because if all the applications
are doing lots of stuff all the time
then pretty soon you're gonna drain the
battery so we work really hard at the
platform level and we encourage apps to
work hard at the application level as
well to reduce the amount of drain
overall so there were a couple of major
things that we did in the release and
people with M devices will notice this
especially if you have your device not
being used for a while then it's going
to drain the battery far less than you
expected it to because we've got this
thing called doze mode so if it detects
if it's basically sitting on a counter
somewhere not moving we're using the
sensors to detect whether the device is
actually being used and if it's not then
why are we doing anything so we'll go
into a deep sleep mode where we're not
sinking anything we will still wake up
for the important things if you have an
alarm scheduled or whatever but we're
not really you know where the background
apps aren't going out and getting a
bunch of data which is frankly not going
to be used if the user is not actually
using their device at the time so we've
got doze mode we've also got app standby
mode which is more at the application
level where we will notice that an
application has not been used for some
amount of time several days or whatever
then why is that app continuing to sync
right if I haven't actually used my
reader app in four weeks why is it going
out and retrieving you know sync points
and the books that I'm reading on a
different device there's no reason for
that so we'll notice that and then we'll
restrict the data usage of that
particular app so that it's not
constantly running and syncing in the
background draining your battery for
absolutely no reason whatsoever we have
a system support this is the now on tap
stuff that you may have seen at Google
i/o there's the ability for your
application to provide more information
more contextual information so there's
some API
that you can opt-in to here override on
provide assisted on provide assist
content and provide more information
back to the system so that we can give
the user even more context for how to
use your application given the
information that was on the screen at
the time data binding so this is a big
thing that we did in the UI area it's
basically a way to save the developer
from writing a lot of boilerplate code
so it's not doing anything fundamentally
new it's just doing it in a way where we
do the work instead of you so if you
imagine in a UI there's usually a lot of
listeners in the system you're setting
up your you're creating these setters
and getters and listeners and sending
messages all around and a lot of that is
done because basically the user did an
action over here which needs to
propagate to another item over there
you're dragging a progress bar and you
want to update a textview somewhere a
label with the value of that progress
bar or the data itself changed and you
want that information to be displayed in
the UI somehow well now you can actually
connect those dots through data binding
and will automatically propagate that
for you so let's take a look at a tiny
little example so you may have a simple
app you have some image views and text
views that are based on information from
some data that you're getting you know
over the network or off disk or whatever
so we have a new kind of layout tag
called layout and inside the layouts tag
goes all the information you used to put
for your view hierarchy so the old you
know the layout XML file or that goes in
the layout resource directory that stuff
still goes in there and you can see this
in the slide and the frame layout tag
normal view hierarchy stuff but in
addition to that we also have a data
area of the layout where you declare the
variables that are going to be used by
data binding in the rest of the file so
we say well we've got a variable named
item and here is the class that it
refers to and then we have the items
below that refer to it and say well we
want the source to be we want the source
of the image to be the value of this
image field in this item
and it'll go in and creates or use the
the getters and setters as necessary in
their and then for the textview what we
want the information in there to come
from the item itself but notice it's not
just simply grabbing a field we also
have some basic syntax in there that you
can use to make an expression in there
so here we're actually formatting it and
saying make a string out of the
following values and then display that
and the textview instead so then we get
the dollar sign in dollars and cents in
there so again fairly straightforward in
what it's doing but there's a lot of
stuff going on under the hood in
particular a lot of systems like this
could be written using reflection okay
well they told us to go look for this
thing so then at runtime you're going in
in the class and you're looking for a
field with this name or a getter and
setter with this name but instead we do
pre-processing so we take this layout
file and we create the the glue code all
the classes that are going to be doing
the monitoring for the the changes in
data and you know the getters and
setters that are necessary and the
listeners we create that for you so that
at runtime we actually just send the
information through the normal mechanism
that you would do if you wrote optimal
code to do this so it's it's very
straightforward there's no reflection
used in the system it's all done at
Build time most of the functionality is
actually in the tool in Android studio
and then there's a little bit of support
in the support library with the classes
that you need to implement to observe
some of the information going on there
was a sandbox talk at i/o which was not
recorded but there was recently another
talk at a meet-up
on data binding and I think we're gonna
have a talk in an upcoming conference as
well so there should be some recording
talks by the folks who worked on that
also we had him again I don't want to
keep plugging the podcast I'm just
trying to think of the resources that we
have for this stuff we had geet and
George on on a recent version the
podcast I'm talking about that as well
so some of the UI features that we had
in addition to data binding we had a
whole bunch of stuff around what we call
the design library design library was
basically us saying well there was there
was a whole lot of stuff in the material
spec that we asked developers to
implement so that they could have you
know applications that look consistent
on the platform and we thought they were
good UI practice
and good UI experiences for people to
have and in the meantime you're on your
own so we took a step back and said okay
what are some of the common patterns
that we're telling developers to
implement which we could help them out
with so we created a bunch of smaller
classes and UI widgets that developers
can now just use to get a consistent
look and feel with everybody else using
those same widgets at the top of that
hierarchy is coordinated or layout which
is you wouldn't use directly but it's
basically the Chrome that everybody
plugs into for these other pieces it's
it's sort of the thing sitting at the
top if you want to have your the snack
bar you need to sort of plug it in at
the top of a hierarchy not just have it
hanging out in space or if you want the
fab to sort of live somewhere standard
all the stuff is plugging into the
coordinator layout kind of the architect
of the rest of these things we have the
snack bar we have tab layouts we've got
the navigation view just standards UI
patterns that we've been talking about
for a while but we encapsulated them
into these standard widgets in the
support library so that everybody can
use these and because it's in the sport
library you can use those on releases
prior to em as well text input layout so
it gives you more information about the
text that's being expected in that field
and then the fab and we always thought
the question came up while we were in
development in the L release about well
should we release a fab widget and we
decided not to because a it's it's it's
not straightforward it's not it's not
like you're gonna have a fab widget and
it's gonna do everything you want well
where do you want that fab widget to
live like what is what is the container
that it actually lives in since it's
sort of overriding several of them so
that was a little more complicated now
solved by the coordinator layout thing
but also it was like well it's it's a
circle it's a circle with a drop shadow
you know how hard is this thing turns
out it was trickier for some people and
in particular it was also inconsistent
people would pick different elevations
or different ways of displaying the
shadows or they would have circles that
were of different sizes so we thought
maybe it's better if we actually just
come out with the standard widget so
that everybody has the same notion of of
what a fab is so there it is the fab
sorry I should say you know you work
with UX and they use a lot of acronyms
and buzzwords which if you're not in the
design group you have no idea what
they're talking about so I worked with
them like for several months and I kept
hearing them say fab fab fab fab fab and
then finally I just started saying fab
floating action button all right
everybody clear on that all right
floating action button stop talking like
a designer all right other UI changes
recyclerview swipe to dismiss there's a
nice interaction point there if anybody
has tried to make this work in ListView
not straightforward same thing with drag
and drop I know because we did videos
explaining how to do this and ListView
one of the whole goals with recyclerview
was to give developers and users
something out of the box that just kind
of did what you wanted as opposed to
giving you the framework and the
plumbing and then you're on your own
with this fairly complex widget which
resulted in people doing it in different
ways or simply not doing it because it
was a complicated problem to solve
so recyclerview came along it's much
more pluggable and flexible with a lot
of built-in behaviors like animations
for the the simple straightforward
operations and then we've been adding
things to it since so drag and drop and
swipe to dismiss or two of those and
then more recently in the 23.1 release
which came out last week we took another
run at item animations in particular we
got the request from some people that's
it was difficult to do a richer
animation when the content was changing
there was a built-in animation where you
could say okay the following item
changed and then we would replace the
old view with a new one and we would do
a crossfade between them that's
reasonable but if your views are very
rich and expensive you didn't
necessarily want to create a new view
for that thing additionally you might
want a richer animation to animate you
know the text into its new location or a
color change or whatever so with the new
content animations you have the ability
to override and do something custom all
on your own and in addition to that you
can actually use the same view so we're
not necessarily going to replace the
holder if you don't want us to we we can
have you reuse that holder and you
animate the the stuff around however you
want in webview they have the ability to
now render off-screen which is helpful
in the particular situation of you want
to animate something on screen and you
don't want it to be drawing at the same
time as it's doing that so you can pre
draw it using more memory to do that
off-screen and then animate it in
notifications so there was a new class
added called icon which is basically a
holder for several different kinds of
information it can be a resource ID or a
bitmap or a byte array this is basically
about having a more optimal way to hold
the information so that we're not
constantly you know recreating it along
the fly if you're if you're passing
around in notifications if you're
passing around a resource ID and then it
needs to get inflated by this part of
the system and then passed over to this
other process it then inflates that
resource ID like everybody's going
through the same work over and over
again so instead we just we have this
holder structure that holds whatever
representations are most optimal so you
can create it with a resource that's one
of the ways that you can use this thing
but you can also create it with a bitmap
so this could be handy if you have
resources that indicates information
that can be variable over time so Dan's
example when we talked about this at a
Oh was a weather application may have
different icons for different
temperatures well since we only allowed
you to create notifications from
resources before then you would actually
have to have assets representing all the
different possible combinations of
temperatures which could be a lot if you
don't live in California or Hawaii and
so instead you can actually create those
dynamically now and then you can create
this icon class with the bitmap instead
of the resource ID so you don't need to
have any of these available at Build
time instead they can be generated at
runtime whenever you need them we had
some changes in text mostly in the UI
area so the way that you select text is
much more natural and powerful now so
you've got the text handles as before
but now you as you drag them out they
expands by word instead of you know
always by character and then as you
contract it contracts by characters so
you can still select the same amount the
same granularity as you could before but
common selection
operations should be much easier and
more fluid to the user in addition to
that you'll notice the floating palette
there prior to this change when you
selected text we would indicate what you
could do the actions that you could do
with that text up in the action bar
which on a phone is not a big deal on a
tablet is a much bigger deal right
because you may be selecting text way
down here and the actions pop up in a
place that's not even necessarily in
your view so now we have this floating
action palette instead that pops up next
to the area that you've just indicated
you want to work with we also have the
ability to process that text so you can
have an intent launched when the user
indicates that they want to do something
with that text so you could have say a
translation service that can take the
text that was selected and that'll be
passed into your intent and you can
change that to whatever you want to and
pass that back to the user so check out
that API for more information there and
we also have higher text higher quality
text formatting is sort of an ongoing
concern how can we make our text higher
quality in general one of those ways is
by providing better braking so this
means you know figuring out how long all
the words are and then braking
appropriately so we don't have you know
this really staggered thing on the right
that looks rather awkward and a big part
of that was enabling hyphenation which
after having had many conversations with
the text people in my group it's a lot
harder problem than you think it would
be there's like standard data where
people expose how to break different
words and if you think about well you
know I kind of know how syllables work
in English I don't know how they work in
other languages especially languages
that are maybe left-to-right or have a
completely different representation of
characters and ligatures and you know
characters that get built up you know
together into single characters it's
it's very very complicated so we're on
our way to solving that there's still
some other internationalization support
that we're working on but in the
meantime we may have much higher quality
text breaking and hyphenation
as part of that we also have the ability
in static layout to set indents so you
can set it to a shaped path so you can
see here we've got the nice round text
this turns out to be also a hard problem
to solve but we've basically just got a
really simple way for you to say this is
the end
that I want in this particular area that
I have a blinking it's possible for you
now when the user selects a link to
launch your application and this happens
through a combination of your
application that's installed on the
device as well as your website your
domain out there because it's going to
be a handshake between the two of them
so you have this JSON file that has the
information about the thing that should
be logged and certificate information so
that we know you know all the right
information is being shared between the
right parties here so we have this asset
links JSON with the information about
the app that should be launched and then
we've got something in the manifest on
the device side that says okay here's
the URL that it refers to and we have
auto verify equals true so sort of this
this handshake between the two your
domain out there your device over here
and then we know at install time we'll
go and look for that file look for the
information and know okay when the user
goes to that website here's the
application that I'm going to launch
instead and then the user can change
this in settings if they want direct
share this is the ability for an
application to share deeper links within
an application instead of just the
application itself
so if you are interacting with a
particular user in a chat application
maybe it would make sense to to share
information about a chat with that
particular user instead of just a chat
application overall so you say well
here's here's a chooser service that I'm
going to implement so when it needs to
it'll launch that chooser service that
you implemented and it'll ask you are
there other targets that I should choose
for you when they want to to go into you
know some let's say the the chat target
and then you can expose different
information there so you can say not
just launch the hangouts application for
example but launch it to one of these
particular users that they chat with
frequently we have stylus support we
always had stylus support to some extent
but it was particular styles devices it
was something that was plugged in there
now we have Bluetooth stylus support and
we have some new events that go along
with
in particular we have the button stylus
primary and button stylus secondary
button stylus primary equates to the
button buttons secondary in earlier
releases so if you want to track the
same event prior to M you can certainly
do that but if you want to track the
stylus event directly in M then use the
stylus primary this is because the the
button press we still want to track you
know when you when the user clicks
presses on the screen we want to know
that that's actually a touch event as
opposed to a stylus event so that's the
primary event is button press primary
and then button press secondary is an
alias to the button stylus primary and
then you can have things like the click
drag gestures so they can select that
thing and drag it on the screen with the
stylus let's see graphics let's talk
about graphics we have something in the
camera so it used to be that if you want
to turn on the flashlight you would grab
the camera just to enable the flashlight
which seems like a lot of work to go
through just to light up the closet when
you're in there at night so instead we
no longer require that you can actually
turn on the flashlight without grabbing
the mutex of the camera and wasting a
lot of battery in the meantime and then
there's a simple API that you can use
there alpha optimization so this is this
gets into some of the perfmatters stuff
the cult likes to talk about when you
are fading out of view or setting alpha
on a view if that view is complicated it
it's usually optimal for you to create a
layer for that view so that we draw it
once to that layer and then we simply
fade that layer so for instance if
you're running a fading animation if
you're fading in a view or fading it out
it would be typical to use the animate
API see it's a beaut animate dot with
layer and that tells us to build a layer
and then you animate alpha to fade it in
and then you the layer gets torn down
when we're done we basically do that for
you automatically now so when we notice
that you're setting alpha on a layer we
will create our alpha on a view we'll
create a layer for you and this saves us
from if you imagine what the the Alpha
operation is
the way alpha has to work is that we
have to draw that view the way we
normally do so opaquely
to an external buffer and then when
we're done with that thing we copy it in
translucently it's not good enough for
us to draw all of the individual
operations translucently it's a little
hard to explain
I could I could use a whiteboard and
show you but we can't do that which
means that's the cheap way to do it and
we can't use it instead we create a
buffer draw everything copy it in
destroy the buffer huge wasted effort on
every single frame it's much better to
create the buffer once use it for all
the frames that you want it and then
teardown the buffer so that's what we do
when we set alpha we automatically
create a layer for you and then we use
that from then on it's still better for
you to do it because you know more about
how that view is being used how your
animation is being run and the timing
that you want when we first notice that
alpha is non opaque that's when we
create the layer which means that you
may take a hit on that first frame as
we're going to the effort of creating
the buffer so you may rather take that
hit at a different time when the users
not going to notice so still use the set
layer type or the width layer in view
property animator but if you don't we'll
try to do the right thing in the
platform in the audio area the big
change was MIDI so you could already do
MIDI if you wanted but you were kind of
on your own right you could receive all
the information through USB and you
could do whatever you wanted with it but
now we have classes and capabilities
that we built for you to make this a lot
easier and we also made it to
directional so not only do they have the
ability for someone to play a device
into the Android device and send Ian the
note information and you know philosophy
and which channel they're playing and
then you could play it from your
application if you have you know some
samples some sounds database then you
could actually play those samples based
on the note information that was coming
into the Android device but now you also
have the ability to send the information
now so you could have a keyboard on the
Android device sending the note
information out playing those samples
from the external sample device so both
sides of that so check out MIDI device
manager and MIDI device service to know
how to interact with those in Tools
there's been a bunch
stuff coming up to IO but also since
then so the 1.4 release came out
recently and we have the ability to
actually do stuff with vector drawables
so you can visualize vector drawables in
the tool now and you can also take a
look at a lot of standard SVG files and
import those or export those as vector
drawables and I think save those as
image files as well so a lot more
flexibility in how you can deal with
vector art in your application and also
design library templates so there's a
lot more templates in there that you can
use for standard design patterns that
use some of the design library
components that I was talking about
earlier there's a theme editor right now
it currently only handles colors but it
allows you to see the color palette
that's being used and interact with that
and change that GPU and network monitors
these are these are cool there's a lot
of a lot of new functionality that's
being integrated into the tool that
allows you to get the kinds of
information that Cole likes to talk
about in this videos in particular this
gives you the information if you if you
look up at the top one that is eerily
similar to what you can already get on
the device if you enable GPU profiling
you get these colored bars on the screen
that give you information about how long
it took us to process the drawing
commands how long it took us to send the
information to OpenGL how long it took
us to get the buffer back from OpenGL
that information is now propagated back
to the host and you can see it in real
time and the GPU monitor and in the
network monitor you can see how much
information is going in and out of the
device from your application there we
got firebase integration for people that
are really into databases yes yes not me
either
1.5 I'm sorry it's terribly important
it's just I'm just not a data person 1.5
this is cool heap dump analysis there's
been a couple of cool things about this
recently it used to be if you wanted to
find leaks important things like
activity leaks which I may or may not
admit to having introduced at some
points in my past asked me some time
about leak hashmap so
what you would do is you would take a
heap dump so there's something in
Android monitor or DD a mass where you
could say take a heap dump you typically
like GC GC and then take a heap dump and
then you would convert that heap dump
and then you would run a tool like mat
which is a Clips standalone or plug in
thing that you can run and then you
would get ton of information that you
would then try to sort of wade through
it's like systrace for memory right yeah
you would wade through this information
to figure out like what existed that I
did not expect like seven instances of
my activity and then you trace it back
to the root set and say okay why did it
exist who is referring to this thing
that I thought went away turns out the
answer is a static hash map so instead
there's a couple of new tools that are
worth mentioning one is an external tool
called leak canary if people heard of
this thing again we we talked to the the
guy at square py or PLA Eve he goes by
py because apparently Americans can't
pronounce his name who wrote leak canary
and it's it's code that you inject in
your application please don't ship with
it use it for your debug version I've
seen application ship with it and it's
ugly and it tells you it basically
monitors the things that go away and if
they don't it warns you it pops up I
think a toast on the system and says oh
by the way you just lead to your
activity that's a great tool I would
encourage you to use that we also have
the ability now in Android studio to do
some leak analysis at a deeper level and
it has information specifically about
Android like activity leaking so go
ahead and run this so this is sort of
it's more similar to Matt sort of the
full on you know here's all the
information about references in your
system but it has information that's
specific to Android so it's it's more
focused and domain-specific than then
Matt is data binding there's integration
of fairly straightforward stuff like
syntax highlighting so it knows what the
the language is the data binding is
using and Newlyn checks because there's
always no end checks assist race we saw
a little bit of this in Colts keynote
earlier very simple UI
one of my favorites it's obvious what's
going on from this trace the new thing
here said there's a couple of new things
there's events up at the top there's a
bunch of little circles under the green
information like the second row up there
and also the the I wish there was a
laser pointer in here I'm gonna point
with this anyway so the circle is right
in the middle of the screen where there
is like a bunch of red ones and then a
bunch of greens or is it basically tips
so you can click on those now if you
ever looked at systrace and said I don't
know what to do with this nor do I know
the people that wrote Android so I can't
do anything with this information now
you can click on these tips and they're
going to give you a little bit deeper
information about what we actually saw
that was problematic when your
application was running so I clicked on
that tip there and it said ListView item
recycling involved inflating views
ensure your adapter adapter getview
recycles the incoming view instead of
constructing a new one I believe this
was a trace from the i/o scheduling
application last year and they took the
frame rate down up from horrible to good
I think just buy this and you'll find
actually if you use systrace and click
on the tips a lot of the tips are the
same because you probably have the same
problem occurring over and over again
moreover once you fix some of these
fundamental problems you'll find a lot
of the overall performance goes up
because usually there's just a couple of
outlier things like running inflation on
the UI thread wall and animation is
going or something like this where you
actually weren't you reusing the view
when you should have so there's some
simple stuff that we're now checking for
internally so I would encourage you to
go back to systrace if you gave up
because it was just too hairy go back to
it now and see whether it can help you
understand what's going on with the
performance and then there's also a
summary panel over on the right that
sort of details all the different kinds
of problems there were and again there
are not usually an infinite number of
problems instead there are probably an
infinite number of symptoms caused by a
very few number of problems so you can
sort of see the the tally of what's
going on from what we could tell from
our analysis there were improvements in
art basic optimization this is what the
art team does they keep making a run at
it making things faster if you go to
the talk that I'm giving tomorrow
morning I believe Android for Java
developers I'm gonna talk specifically
about memory concerns there and we go
into a fair amount of detail about how
the garbage collector works both in
dalvik and art so there's more
information about some of that side
which I find kind of interesting there's
a new API and in art you can get some of
the runtime stats there's a lot of
documentation in the debug class where
you can look up information about all
the information that you can get there
there's some other grab-bag stuff that
we wanted to mention and couldn't really
categorize you can adopt external
storage now so you should avoid
hard-coded paths because if the user can
adopt a different location for the data
you better not depend on it being where
you thought it was we give you all the
the tools for this already to be able to
query dynamic pass at runtime and that's
what you should use instead also if you
don't have a permanent storage in your
device to actually test this out with
your application we would encourage you
to test it anyway so you can plug in a
USB Drive and then use the following a
DB command to force us to adopt this
rather non adoptable temporary storage
just for the purposes of testing here
also it's important to point out that a
patchy HTTP went away we deprecated
api's but we generally don't remove
things because it's a bit of a growing
pain for developers and we don't want to
crash apps out there and and let's be
clear we still didn't actually remove it
from the runtime so if you're an old app
still using apache HTTP it will still
run it's just that the api is hidden you
could not build against it now but we I
think we said back in 2011 that people
should stop using this and then we
finally hit the API this year so it
takes a while but but gall-darn it we
mean it so you should use HTTP URL
connection instead boring SSL replaces
open SSL who in this room knows what I'm
talking about when I say that one two
three four okay all right
I shouldn't have raised my hand actually
I don't really use these api's and
finally I would encourage you to check
out a series of articles that we
published on me
I'm calm this actually came from an
internal effort that we had we talked to
internal app developers who said you
know we keep talking to you know the
framework team and finding out that
we're doing things wrong like or you
know we'll ask a question about how to
do something an answer will be no don't
do it that way or obviously you should
have used a layer there or you know
don't do that on the UI thread or why
are you turning garbage so we have all
these things in our minds and the apps
teams didn't and it turns out one of the
problems was because a lot of the
internal app developers at Google and
probably like the rest of the world came
from a world of developing Java that was
quite different it is the same
programming language but it is not
necessarily the same environment if you
write Java programs for a server and
then you try to use those same patterns
and approaches to write a mobile
application you will suffer for it right
because we do not have the same kind of
constraints on mobile devices we don't
have the same resources we don't have
the same memory it's not the same
runtime there's a lot of things that are
very very different apart from the
programming language itself so we wrote
this extremely long article that we
posted internally and said okay here's
all the information from the platform
team about all this stuff that we build
up over the years you know the things
that you should avoid the patterns that
you should use on Android and then we
went to publish it externally and it
wouldn't fit anywhere cuz it was just
too long so we split it into ten
different articles that are posted on
medium each one of those ten articles
are not in themselves short the
introduction is because it doesn't have
any information in it everything else
fairly long please check it out go to
medium.com there's a Google developers
publication there or it's published
under my writing name there it's all
information that I think all Android
developers should understand it's a
little bit hard to write rules for
Android like it is you know patterns for
software development like always do this
for example just to pick a particular
painful one out there there's a rule in
there saying avoid enums okay that tends
to be a trigger for some people but that
like all of the rules in the document
are depending on your situation what you
need to do is understand why they can be
bad
if you're writing a library and you have
enews quatre within them that may be bad
for all the users that are using their
library because they're all going to
take the memory hit of that approach if
there's a cheaper way to do what you
want us to do if you use an enum in your
application I personally don't care I
don't think it's affecting anything but
you should understand when it can have
impact and you should understand the
other things in those articles as well
they don't not all of the rules apply to
all developers but it's kind of good to
get a sense for what the problems are as
well as why and then also come to the
talk tomorrow if you can there may be
other interesting talks on at the same
time so Android for Java developers is
basically going over some of those rules
specifically in memory I only have an
hour so it's about a three hour talk
where I did do everything so we'll just
spend an hour talking about some of the
memory concerns tomorrow morning so I
would say go check out information about
marshmallow here's a couple of URLs to
look at and here's us or me and that's
it thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>