<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Developing Applications For Android Wear (Big Android BBQ 2015) | Coder Coacher - Coaching Coders</title><meta content="Developing Applications For Android Wear (Big Android BBQ 2015) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Developing Applications For Android Wear (Big Android BBQ 2015)</b></h2><h5 class="post__date">2015-10-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_PAkKEszCQU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so my name is Wayne Piekarski and I'm a
developer advocate at Google and so
today we're going to be talking about
sort of developing applications for
Android wear so we're gonna do a bit of
an introduction to how wear works and
then we're gonna get into some of the
real nuts and bolts of the wearable
support library some of the things that
make developing for wear unique so as I
said I'm a developer advocate at Google
hmm and I work mainly in the areas of
Android and ubiquitous computing so we
work on a lot of the new form factors
that Google is working on such as
wearables and auto and brillo and weave
and so forth so we're doing a lot of
those things like that so that's kind of
what I work on and another thing I'm
really excited about is I'm at this
Android BBQ so I was like well you know
what I should share my breakfast sausage
recipe with everyone as well so here's
my little recipe for it and if you go to
my Google+ page which is Google com food
slash plus my Piekarski you can see my
recipe know this is like my favoritest
breakfast sausage I've ever worked out
how to make so you can use it for
chicken-fried steaks biscuits and gravy
and it's really simple you take your own
ground pork and you mix it up and then
you fry it up in a pan you know make
sure you use a non nonstick pan you
gotta use one of those old-school pans
like a cast-iron skillet or something
like that and then you put some flour in
there and you make a roux and then when
you're done you can pour it over
biscuits and gravy or you could put on
top of a chicken-fried steak or all
those kind of things so yeah anyway so
that's my talk so I guess we're done now
so yeah so I figured the begin droid
barbecue I probably should share that
with you alright let's get back on track
here so we are talking to Android wear
today so look at this picture here we've
got a bunch of people standing around
and they're all looking at their phones
and they all appeared adjusting they're
kind of disengaged from each other and
we see this a lot nowadays like people
go out with their friends and no one's
actually talking to anyone they're busy
on their phones doing stuff and so we've
been looking at this kind of usage and
we're like what can we do to make things
better so we know that phones and
tablets are useful but it seems like
we're disconnected from the people
around us so Android wear aims to sort
of complete that picture and you can see
here in this photo everyone's happy
having a great time this is what happens
when you use Android wear yeah
getting what it does is it helps you
stay in the moment with the people that
are around you so it keeps you in the
moment when it's appropriate but it
gives you the information you need when
you need it and it tries to avoid the
distraction of pulling your phone out of
your pocket and constantly being
distracted so let's look at this in a
different way this is how it looks like
when you use your phone on a day-to-day
basis you're doing real life then
something happens you pull your phone
out you unlock it you read some
notification okay and there are as a
news article I'll start reading that and
the next thing you know five minutes of
your life has disappeared and there's
this huge time and attention cost that
it's imposed on you to be able to use
this kind of thing so you might want to
be distracted in your device but you
also might be very busy amongst your
friends and this isn't really what you
want to be doing so with Android where
we're attempting to change that
so there's your day chugging along
something happens you quickly look at
your watch you go oh cool I better take
that or it's not that important I'll
skip so it allows you to have a quick
look quick glance at your watch it has
an always-on display that's always
showing something and it helps you to
reduce the overhead of being notified
about things that are going on the real
world and so it allows you to be more
present in the real world but yet more
connected to the virtual world with the
things that are important to you so what
does this mean for your development of
apps so to start with it's a very
different interaction model so with
Android wear you can see we have a range
of different devices there around of us
there around displays there are square
displays the screens really small and if
you want to get a really good user
experience on wearable devices you
really need to rethink the way that you
program for it and the way you use it
and everything else so one thing people
like to do is they like to say well I'm
just going to take my phone app and sort
of jam it on to the wearable screen and
make it really tiny but that's not
really what you want to be doing so the
way you should think about designing
apps for wearables is to say to yourself
what what couldn't we do on the phone
that a wearable device now makes
possible and that's the kind of app you
should be building and I think the
for wearables in general is coming and
it's gonna be made by one of you people
here a developer who's like you know
what I have this really amazing idea and
it's going to change the world when you
know Android and iPhones came out many
years ago everyone thought they're just
going to be browsing the web and
checking their email and now we've got
all these exciting apps that people use
that they couldn't live without those
are the killer apps that define the
platform and so the killer app for wear
can be created just by you because it's
an open platform and the next thing is
is that when you build a wearable app
you have to actually try it so you can't
just run it on an emulator on a massive
desktop screen with a mouse you have to
actually put it on your wrist and go for
a run and while you're jogging you
should try to use your app by touching
the screen that's when you'll discover
if your little buttons are too small or
if there's some kind of problem with how
you're doing things so you got to get
yourself in the situation and try it
just like a user would do and so that's
these are things that make we're
different so this here is the Android
wear interface and so you can see that
we have there's no grid of icons to
launch it's simple it's glanceable and
it's built around micro interactions
these very quick little gestures you can
look at your watch in the corner you
don't have to use it like you do with a
phone and the interface is divided up
into two primary behaviors so we have
the ability to talk to the wearable use
your voice you say okay Google send me a
send a message so you talk to the phone
but sorry you talk to the watch to make
it do things and so we call these
actions and then the next thing is that
once you say okay Google it then shows
you a list of commands that are possible
so you can do things like take a note
call me a ride things like that and
these are the things that are available
to you now the wearable can send
information back to you as well so we
have these notification cards that pop
up so we call this the context Stream
and so there's a variety of different
things that the wearable can send to you
to show you on the screen are you ready
for the trip you have a flight to JFK
coming up your hotel information things
like that this is stuff that you're
walking around and you're you're
watching vibrate and you're like ah I've
got to get to the airport
it's telling you things that are
important right now in the right place
we don't want to tell someone about
something that's happening eight hours
from now you want to tell them about
something that's right now and it's
important so this is the framework that
helps you to set you up for success on
Android wear so if you want to make a
really good application you have to
carry this philosophy into your apps as
well so for example you have to build
wearable apps that are aware of the
user's context their time their location
their physical activity that card there
is aware of the fact that it's going to
take you 15 minutes to get home right
now because you've put something in your
calendar that tells you that you need to
be home by then a watch is also designed
to tell time in a split second so when a
user uses traditional watch they just
look at it know what the time is and
they're done and during this talk I'm
going to glance at my watch multiple
times to find out how I'm going for time
and so it's very quick you're not seeing
me pulling my phone out and unlocking it
checking the time and so if you can
check the time in a split second you
should also be able to check whatever's
going on in a split second so here it's
like turn right onto Washington Street
this is a direction right now this is
something you have to do and it's very
quick and easy and there's an arrow
pointing to where you need to go you can
think of Android wear is kind of like a
personal assistant you ask it to do
things and it does the right thing for
you and it just gets it right
so here it's got you know send a note to
Jeff I'm on my way so these are very
simple actions you want and it would be
the kind of thing that if you had a
friend next to you hey can you send a
message to Jeff tell me be there in five
minutes that's something your friend
could do for you it's a personal
assistant that's designed to help you
and finally you've got to focus on very
simple interactions you've got to only
require input when it's necessary you
should try to do the right thing
automatically and most inputs are going
to be done with touches or swipes and
because the screen is very small you
have to make sure that you've got very
small very large touch targets things
that are easy to click while a person is
running like we talked about before so
you want to avoid fine-grained finger
movements you don't want to have tiny
little keyboards and things like that so
when you design your Android wear
experience you've got to keep these kind
of things in mind so with that now we're
going to talk about the nuts and bolts
of how we go about building up
but I really wanted to sort of set the
stage for how this works because it
helps to understand that with Android
wear the UI is probably the most
important thing how it interacts with
the user is everything it you can't
write good code for this until you've
seen how it works all right so let's go
through three topics now we're going to
talk about how to do notifications how
to make your own watch faces and then
how to design your own full-blown apps
that run on web so the first is
notifications now the cool thing about
notifications is that if you have a
notification on your phone they're
automatically sent over to the wearable
by the wearable companion app so any
standard Android notification works for
free on Android wear you don't really
need to do anything now you can extend
them to add features but you don't need
to so to get this done there's no work
required they're just automatic also if
you've implemented the meteor api's or
remote control client the actual
controls for those are automatically
sent to the wearable as well so any
standard music playing app when you're
playing music on your phone you'll see a
notification on your wearable that you
can use to change tracks pick a
different song and things like that and
to get this done
once again no work required now if you
want to implement slightly more
complicated notifications we have some
extensions that we've added to
notifications so we have stacks pages
and replies which allow you to make
slightly more complicated notifications
that'll appear in a special way on the
wearable but they'll still be regular
notifications on a phone and you can add
these features and it won't break your
app even if your app is needed to run on
a gingerbread phone or something like
that so these extensions allow you to
add a little bit more to your
notifications to make them slightly more
useful the really cool part is you don't
need to do anything to your app except
adding a couple extra lines of code in
your notifications section and your app
is already sort of on the way there for
Android wear support so that's really
nice thing about notifications later on
we're going to talk about how to write
full apps which are a very complete
Android wear experience this is a great
way to get started so if you're already
an existing Android wear developer you
can easily add some quick Android wear
support have a think about it try it out
and then you
go the whole way if you decide that's
important for you so watch faces are
probably one of the most exciting things
that people love to talk about so you
can see we've got to watch the watch
face is the screen that is running on
the watch all the time so when it's not
do it when the user is not using the
screen it is showing the watch face and
you can load many different watch faces
onto a device you download them by the
Play Store and it's probably the most
important part of a user's Android wear
experience and you as an app developer
have the ability to make your own watch
faces of any kind analog digital
whatever you want and so this is
something that people are really
particular about people like a watch
face that's designed for them I like a
digital watch face that I like a digital
watch face in orange a lot of people
don't they like analog watch faces so
everyone's got a different taste here so
there's a lot of opportunity to make
some really cool watch faces that really
changed the way we tell time so I'm
going to talk to you a little bit more
about the api's that are used to do this
so with a watch face of course the most
important thing is that it has to
actually tell the time so make sure you
always have that it would be kind of
silly to make a watch face that I don't
know shows a cloud it's saying it's
raining outside but doesn't actually
tell the time so people probably not
going to like that so you've got to make
sure you put that in so you can use
analogue hands like in this case or you
could put a digital representation on
top of it or you could use some other
kind of representation like you could
print it in binary or hex or whatever it
is that you think your developers want
so you can do that too now there is a
status bar area so you can see with a
little alarm bell with a stroke through
it that's telling you that notifications
and alarms have been suppressed so these
are going to be put on the screen by the
system and you need a place on your
screen for those to appear so you can't
you you can own the whole watch face and
draw what you want but the system also
needs to put a few icons here and there
that you need to make room for and also
notification cards are going to pop up
in the stream on top of the watch face
you need to be prepared to deal with
them so what you can do in some cases is
you can resize your watch face to not be
under the card in other cases you can
also control how much the card pops up
and things like that so you get control
over all these things
as part of the API for it and you can
also add other things such as the time
of day the current weather a lot of the
Android wear watch faces that are out
show things like showing details from
your calendar showing the weather the
tides the moon whatever you want so you
can have different watch faces for
different kinds of people depending on
what they want to do so here are a few
guidelines to make sure you get this
right so the first thing is that Android
wear comes in multiple form factors so
if you're designing a watch face you
really want it to run on both round and
square watches so it would be kind of a
bad idea to build a watch face that only
runs on Square and if round people
install it it doesn't work people are
gonna be upset they're gonna write bad
reviews about your app so you really
want to make sure you cover both
platforms and in some cases like an
analog watch face if it's just got some
hands on it that'll work both on a round
in a square device in other cases you
might have to redesign the watch face
completely because Square is very
different the corners are present
whereas on a round watch they're chopped
off so you might need to deal with that
next Android wear displays have two
modes that they run in there is an
interactive mode and an ambient mode so
interactive mode is when you're touching
the screen and you're interacting with
the device you can actually detect
touches as well and this is the mode
that's used when the user is giving
their attention to the watch now the
screen is fully active you can have all
the colors and everything like that but
after a short period of idle time the
watch goes into what's called ambient or
always-on mode in this mode the screen
goes into a low-power State it reduces
the amount of colors that are available
and you should also reduce the number of
pixels that are drawn on the screen to
save power and to avoid burn and we'll
talk about that a bit more in a sec but
um you'll see in this case here we have
a watch face on the Left which is full
color and then in ambient mode it's just
a black screen with hands on it so you
need to design your watch face to run in
both of these modes and you cannot
render a full colored image constantly
in ambient mode when it's sleeping the
watch won't allow that and secondly the
watch face refreshes continuously when
you're in active mode but when you're in
ambient mode the watch goes to sleep and
it only refreshes the screen once every
minute
so you should remove the second hand and
you should only draw hours and minutes
because we're trying to save power so
when the screen is in ambient mode the
watch is not running it's actually
asleep and the only thing that's awake
is the display driver just keeping that
screen going so it's a great way to save
power and it means that you don't have
to flick your watch up to look at the
time the watch is always showing the
time as you can see from as I'm walking
around this watch never shuts down and
that's one of the really cool features
of Android wear is the screen is running
all the time now when we talk about
ambient mode we also need to deal with
how it's implemented so for example
certain screens on Android wear are
called low bit screens when they go into
ambient mode they actually don't allow
full 24-bit color they only allow
primary red green and blue colors like
only certain colors are allowed you
can't render shades and all that kind of
thing it's a feature of the display
driver that allows it to save power
other displays go into a black and white
mode and some displays such as OLED
displays actually require you to only
illuminate 5% of the pixels in low-power
mode if you try to keep all the pixels
on the screen on all the time what will
happen is that over time the screen will
burn in and you'll actually permanently
you'll see the pixels penalty burnt into
the screen and the other trick that some
of the displays do is they'll actually
take your watch face and every minute
they will jiggle it in a direction so
they'll jiggle it 10 pixels in either
direction and they use that to help the
watch face avoid burning your screen in
as well so you should never have large
patches of solid color because they will
eventually burn into the screen and the
jiggling can't get around that either so
definitely you want to try to make sure
that you're careful about when you
design your ambient mode because you
need to keep a lot of the pixels off to
save power and to save the screen so
when you're writing a watch face there
is a class called canvas watch face
service and service engine that you're
going to be sort of implementing here
and inside of that there are three
methods so there's oncreate which is
where you're going to take care of
initialization steps so one thing you
want to make sure you do here is you can
have an image as the background of your
watch face but you've got to make sure
that you scale the image and do anything
like that in advance you don't want to
be scaling the image on every redraw
because that's very expensive you'll
generate a lot of
and so forth so in oncreate you want to
do all of the initialization steps the
next thing is there's a method called on
surface changed and on surface changed
is cold when it announces the size of
the screen to you so this is where you
would deal with things like resizing an
image or anything I guess it's possible
in the future that a watch could rotate
and if it rotates it would give you an
update on surface change so on surface
change is where you're notified as to
changes in the screen and then finally
all the drawing itself is done in the
ondraw method so this is the method
that's called by the frame by the
Android wear system that says draw the
watch right now and so you should be
doing no calendar queries you don't want
to be doing anything expensive
everything has to be fast here and
that's where you draw everything and if
you want you can have an animated watch
face with smooth ticking second hands so
no ticking it'll just smoothly move by
just repeatedly calling on draw over and
over again and then you call an
invalidate method which then makes it
call on draw repeatedly but you don't
want to be doing that kind of work when
you're in ambient mode because you want
the display to sleep and you don't want
to be constantly hammering away trying
to refresh the screen so when you're in
ambient mode your app needs to stop
doing things you don't want to be doing
too many any you don't wanna be doing
any work you want to be sleeping while
the watch is in ambient mode so that's
watch faces now let's talk about how we
go about actually building apps and
making them work on Android wear so
Android wear devices are actually
complete Android implementations they
have everything they have OpenGL they
have all of the activities and
frameworks and everything that you've
come to be used to writing regular
Android apps probably the only two
things that are missing is that there's
no video codecs and you don't have
direct access to the Internet so you
can't make HTTP requests to a web server
and you're not able to play video back
on the screen the codecs have been
removed to save power and battery and
space on the device and you also
probably shouldn't be playing videos on
Android wear device as well if you're
looking at something for 30 seconds on
the screen like watching a video you
probably should be pulling your phone
out of your pocket and looking at
a regular screen so certain things you
really don't want to be doing and
Android wear devices are very powerful
and they're capable of doing pretty much
anything you can throw at them the only
difference is the way they're packaged
and so the way it works is that you
build a wearable apk that's going to be
installed to the Android wear device but
the wearable apk is not sent directly to
the wearable what you do is you take the
wearable apk that you've built and you
put it inside the phone apk you put it
in the reservoir or directory basically
when it's in the reservoir directory you
declare an XML file and then you put it
inside the main phone apk and you push
that phone apk to the Play Store when
the user downloads that phone apk it
arrives on their phone and then the
wearable companion app goes others a
wearable app in here it takes that and
installs it onto your wearable and then
it installs and it's ready to go
so the nice thing about Android wear is
that over time as different companies
add wear support to their apps your
customers just kind of get it for free
they don't need to go out of their way
to download a new app or to go and check
any boxes or do anything it just happens
automatically so that's the great thing
about wear is it's very easy for
customers to deal with so one final
thing is that when you update your app
to the Play Store you bump the version
codes you push it on to the Play Store
and then it downloads to the phone and
the phone goes up there's a new version
of the app I'll push it to the wearable
as well so as a little tip very
important that you get the version codes
on the wearable and phone sights to be
the same they have to have the same
package name otherwise they won't be
able to talk to each other so in Gradle
in Android studio we have a wear app so
you'll see this in the build Gradle for
the application it'll say wear art
project brackets wear and what that says
is take the wearable project compile it
and then bring that apk and put it
inside the phone app so it actually
takes care of all this for you so when
you're building in release mode their
wearable apk is embedded into the phone
apk just takes care of it for you and a
lot of our samples implement this as
well so you can see how it's done so
let's talk now about things that are
wearable specifics so while they are
complete Android devices and they
implement everything that you've seen on
Android before so you can reuse your
same skills and knowledge
there's a few things that Android wear
that are different that you need to be
aware of so the rest of the talk is
going to be talking about those things
so we're going to talk about sharing
data between the wearable and the phone
we're gonna talk about building custom
user interfaces and I'm gonna finish up
by talking quickly about how we
implement voice interactions so as I
said before Android wear devices don't
have direct network access you'll
sometimes season that Android wear
devices support Wi-Fi and Bluetooth and
if the Android wear device is connected
in a certain way by Wi-Fi
sometimes there's access but you can't
rely on that behavior the only way to
get proper connectivity between the
phone and the wearable is to use what we
call the data API and message API and so
forth and what they do is they allow the
wearable on the phone to talk each other
and then the phone can go and do the
network access for you so if your
wearable app needs to go and find out
what the weather is the wearable app
will send a message to the phone app
saying hey tell me the current weather
the phone will then make an HTTP request
to a weather website it'll download the
weather information it will then go our
the temperature today is 56 it'll then
take that number send it over as a
message to the wearable and the wearable
can then draw it you don't want the
wearable doing lots of heavy work if the
wearable is able to make an HTTP request
you don't want it sitting there making
the query pausing all the HTML and
cleaning it all up you don't want the
wearable doing these kind of things so
that's important and this communication
mechanism is implemented by Google Play
services so Play services provides the
framework that allows these devices to
talk to each other and they're done via
synchronous calls so we're going to go
through now how to go about doing this
so there are three kinds of data
exchange that are possible the first one
is the node API and what this does is it
tells you when two devices are connected
so if a wearable on a phone appear close
to each other the known API will say
yeah a device has just become connected
and if the wearable goes off for a walk
or the phone goes for a walk then you'll
get a disconnect message so that you
know that they're no longer paired to
each other we have the message API which
allows you to exchange low latency
messages so these are messages where the
phone might say hey wearable make a
noise or do something right now
and the web will do it however if the
wearable is disconnected that message
will be lost so you only use messages in
cases when something has to happen right
now but if the message is lost it's no
big deal
so they're kind of like EDP packets when
you're doing tcp/ip and then we also
have the data API the data API allows
you to create and like a key value
object that has something like
temperature 56 current weather raining
you can put that in an object and then
you can send it to all the wearable
devices on the network and it'll
automatically synchronize it for you and
you don't need to worry about
retransmitting if the wearable is not
connected when you bring it back later
on the messages will be so the data
items will be synchronized up it takes
care of all those things for you so it's
really nice and actually we have another
API called the channel API which allows
you to make connections to a wearable
and send data over so you could stream
some audio or something like that so
there's a variety of different API so
that we provide two way to communicate
back and forth from a phone to a
wearable so to quickly walk through it
this is the node API so you can see here
where there's a get connected nodes
method you call that it returns you a
list of all the wearables that are
connected important tip here is that
it's possible for users to have many
Android wear devices connected to a
phone so when you get an array back from
that top call you should not just read
the first element you should read all of
them because some people like me have
eight Android wear devices at their desk
and I want all of them to work all the
time so make sure you code that up for
me otherwise my functionality won't work
so yeah people can have many Android
wear devices that's a very key sort of
mistake that some people make is they
don't do that right and then you simply
declare a node listener and you get
these methods that are called when peers
are connected or disconnected for the
message API we have a method called send
message you simply pass in the ID of the
device you want to send a message to you
can pass in a string I'm sorry you pass
in a byte array it sends it to the
device and then you can register a
method to be called on message received
if a message arrives at your device and
finally for the data API
you've got put data items and get data
items those allow you to put data items
into the store their sync
back and forth and then you can retrieve
them back if messages are sent to you
and then there's on data changed which
is called whenever an item has arrived
off the network so it's a very simple
API and it helps deal with all the
complexities of sending data back and
forth between wearables and phones and
finally there is a base class called
wearable listener service that you
implement which is what you put all
those other methods into and you have to
declare it in your Android map in your
Android manifest XML file and that tells
Google Play services that it is allowed
to send these messages and data items to
your app to allow them to communicate
with the wearable so that's basically it
for sending data back and forth so it's
a very powerful API and it's how
communications have done and as I said
before make sure the package names and
the version codes and all that match
between the wearable and the phone
application otherwise they won't be able
to talk to each other and it's not
possible to send data items or messages
to a different app on the system that
doesn't match your package name you'll
have to come up with some other
mechanism to do that so we've talked
about sending data now let's talk about
how to build custom user interfaces on
Android wear
because while Android wear is based on
Android if you actually look at the user
interface on the screen it doesn't look
a lot like Android it looks very
different the interface has been
designed to look great on wearables in
you know outdoor and you know
environments when you're walking around
so to do this we provide a library
called the wearable support library to
help out with this so in your Gradle
file it's called Chrome Google Android
dot support column wearable and this is
what we call the wearable support
library so this wearable support library
provides functionality that's specific
to Android wear devices but that doesn't
belong in the android framework itself
so when we designed Android wear we
wanted to have a common experience
across the platform so that apps look
the same so we wanted system apps and
apps written by developers like you have
a consistent look and feel and so this
library contains reusable UI elements
that you can use in your code to make
your life easier so you don't have to
reinvent the wheel
so we use this library for our apps as
well and so if you've actually got any
years for things that are like you know
I really wish I had a widget to do blah
you know please come and tell me or one
of the other developer advocates because
we'd like to hear more feedback about
the kind of things people want so what
is the wearable support library and how
does it work it's different than the
Android support library so you might be
familiar with the Android support
library that is used to sort of backport
new Android features to old releases the
wearable support library is different
it's designed as a general support
library that these are things that might
never make it into the framework but
they're useful for designing wearable
apps the next thing is that it's
compiled statically into your app so if
you do use the wearable support library
the code is going to be in your apk it's
not part of the system itself so your
apk is going to get a little larger when
you use it now you can strip out the
parts you don't need with resource
minification and ProGuard but just be
aware that that has to be done so it it
doesn't have a huge impact on you okay
the actual library itself is quite small
so it won't cause too much blood in your
apk but it's something to be aware of if
you're working with it it's also
released at different cycles that are
independent of the android framework so
the android framework is like
marshmallow lollipop KitKat things like
that the wearable support library is
independent of that it typically is
released whenever a new Android wear
release comes out so it's not changes to
the frame changes to the wearable
support library are not dependent on you
API is coming out so that's nice so we
can add new features and we can fix bugs
very quickly and this library though
because it is a new library that
statically linked in the API actually
could change a little bit between
versions so there's a possibility that
if you bump to a different version you
might have to tweak your code a little
bit but you can always use the old
version if that's what you want so you
need to be aware of the fact that the
API could change and it might break
backwards compatibility so it's not like
the android framework in that we
guarantee that it's going to work till
forever the wearable support library
will evolve over time so how do we go
about using it so when you're building
what sort when you're writing your
build.gradle file on the wearable side
you've got the dependency section so if
you look at the bottom you can see it's
got Play services wearable so some of
you may have used Google Play services
before that's a pretty standard kind of
line that you include that says give me
services - wearable place Services has
actually been broken up into pieces so
that you can select which parts of place
service you want to import because place
service is a very large library and you
don't want to import all of that into
your app by just adding Play services
wearable you're saying I just want the
data API and I just want the message API
and things like that the wearable
support library is the top line so we've
said okay condor google android support
column wearable include that library and
then we have a plus at the end now some
people would say you should never use
plus because what it does is it grabs
the latest version of the wearable
support library so you could be in the
middle of a release and then that day
google releases a new version of the
wearable support library and you're like
why is my bill broken and it's because
you said grab the latest version so if
you want stability with your builds you
should hide code in the version number
so if you look on the play services at
the bottom I've got : 8.1 point oh and
that says use version 8.1 point oh and I
don't care what the newest version is
you must use that version so right now
wearable support is 1.3 but you can hard
code that depending on what you want to
do I have some test samples that I used
to have a plus in them because I want to
always test with the latest version to
see what's going on but um you can
control what happens here but it's very
important that you understand the
implications of plus versus a version
number and this is a common thing you
need to understand when you're writing
any kind of Android app and finally the
middle line that says provided that is
needed for when you're implementing the
always-on mode we have a special library
that helps out you'll need to include
that line I won't go into too much
detail on that but that's also important
as well so when we introduced Android
wear one of the big differences was that
it had a round screen so up until then
every computer and everything we've ever
had has been square or rectangular
displays so the introduction of a round
display is really beautiful as you can
see from these watches here but it
imposes challenges for developers
because people haven't thought about
round screens before so widgets were
using like textview and things like that
they don't understand round screens so
we need to help developers understand
how to do with round screens and then
what we can do about it so if you look
on the left you've got the moto 360 that
actually has an insert at the bottom or
people call a chin or a flat tire which
is 30 pixels in size you've then got the
next watch which is a square screen even
though it looks rounded the next one is
a round screen with no inset and then
finally the last one is a rectangular
screen as well so we need to write
software that works on all of these
screens so if we were to create a
textview and put a large amount of text
on the screen what would happen on the
far right you can see we've got a
regular rectangular screen the text fits
nicely however on the round screen you
can see the top bottom right left
everything is all chopped off so you
can't read all of the text so it would
be a really bad idea to throw a pile of
text on the screen and not do anything
about it because all of your round
customers are gonna have a bad time and
there are a lot of Android wear round
devices out there so if you only design
Foursquare you're not going to do well
like people are not gonna like your app
so what can we do about this so wearable
support library provides three different
classes that you can use to help out
here I've got box and set layout
wearable frame layout and watch for you
stub we're going to go through each of
them to show how to use it so the first
one boxing set layout what it does is it
adds padding around the edges of your
text view to prevent the text from
touching the edges of the screen so you
can see on the left the box inset layout
has added padding all around it so that
the text never touches the round edge of
the display so we can read the text it
looks nice and that's quite cool so how
do we go about implementing this and
finally actually before we do that if
you look on the square screen it's
exactly the same as before so we're
using all of the space on the square
screen but on the round screen we're
making it fit so how do we go about
doing this what we do is in our layout
XML file we have at the very top
and there it is anyway if you look at
the top there is box inset layout can
people see that buco sir no matter if
you look at the top there we've got at
the top level of layout hierarchy we
have a box inset layout the box inset
layout contains the text view and then
inside the text view we've defined an
attribute app layout underscore box
equals all now what that says is we're
living inside a box and settle out and I
want to be boxed on all four sides to do
the implementation and if you actually
forget to put that in it won't be boxed
so it's very important that you actually
remember to put it inside a box and set
layout and also to set the attribute app
layout box equals all now you can also
you don't have to box around everything
you can actually box just the left and
right so for example here you can see
the text is boxed only on left and right
and it's allowed to flow completely to
the top and bottom parts of the screen
and the implementation for this is we
simply replace the word all with left
and right and you can also do top and
bottom as well same here you can see the
effect on the round screen typically you
don't want to always do a complete all
boxing what you might want to do is have
it box just on the left in the right and
then have it scrollable because the
middle part of the screen is still quite
usable but you don't want to box it all
completely otherwise you waste a lot of
screen real estate so you don't want to
squeeze it too much otherwise you won't
better read much text at all and so
here's how we do the top and bottom now
finally one thing you'll notice here is
that when you put a text view inside a
box and set layout the green background
extends all the way to the edges now you
might want it so the way the way it
works is that the margins of the text
view are adjusted but not the entire
view itself so if you actually want to
force the view to fit completely and
have a black background or whatever the
default is you can actually put the
whole lot inside of a frame layout
container and then put the framework
container inside the box inset layout
and so that's one of the things you can
do with it if you
the black water instead you might wanna
have other things appearing in those
corners and this will allow you to do
that so while boxing set layout is easy
to use you simply just add it to your
layout hierarchy and it boxes everything
for you pretty much automatically it's
not very efficient as we pointed out
earlier so there must be better ways of
dealing with this so in one of the
recent wearable support libraries we
added something called wearable frame
layout and what this does is it allows
you to specify padding and attributes
for things like centering or alignment
but you can specify different attributes
depending on if it's a round or a square
device so you can see here I've got on
the round display I've got the green box
is centered I wanted 25 DP margins and
then on square I want it to be left
aligned with 5 DP margins and you can
see that they look very different on the
two on the round versus square but the
implementation is quite easy so if you
look here in the wearable frame layout
you can see we have loud underscore
gravity round is centered but layout
underscore gravity the default version
is going to be the left align whatever
the default is and you can see every
time we've thrown around keyword into
the attribute wearable frame layout
looks at round or not round to work out
what it's going to do for your
particular device so everything we just
showed in that previous example is
encoded here so the nice thing is that
you can have one single XML file that
does layouts for round and square you
can maintain them together and it helps
sort of to simplify the process of one
problem that people commonly do is they
define around in a square out and they
change the scale out and they forget to
update the round layout and they've got
bugs and on round so it's this helps you
to avoid that problem so finally we have
what's called watch view stub which is a
class that allows you to inflate to
separate layouts that depend on with the
on round and square so you can see in
this case here the layouts are
completely different one of them has a
gradient the other one has a circle
they're totally nothing to do with each
other
and the watch viewstub inflates the
correct layout depending on which one
you want so if you look here the
implementation is what you stub to
layout definitions and those layouts are
defined in separate files so the nice
thing here is that you get full control
over everything there's no need to worry
about
to express both layouts in one file but
the con of it all is that you have to
have two files and you must remember to
update both of them and test on both
round and square whenever you make it
change because if you get that wrong
then you'll have a problem so those are
sort of the pros and cons of the three
different ways you can use depending on
what your app looks like and which one
you choose will very much depend on the
app that you're writing so that's a
quick little rundown of what's available
to support round versus square so what
else is in the wearable support library
so here's a list of all of the different
classes that are available in there as
of now and I'm quickly a walk through
them to show you a few things that are
available in case you weren't aware of
it so the first thing we have is that a
lot of Android wear apps have the
ability to show cards on the screen and
they also use this swiping kind of
interface where you can swipe sideways
to see different actions you can scroll
up and down so there's actually
something called grid view pager which
implements this ability to create a
bunch of fragments and then you can
scroll up and down through them and it
implements the smooth scrolling effect
that you see on this example here and
this image actually is taken from one of
our samples called XYZ tourist
attractions the next thing is there's
dots page indicator which if you look at
the very bottom there are five little
dots that as we swipe sideways you can
see those dots changing that's the dots
page indicator that shows you which page
you're on so we've written code that
provides this for you so you don't need
to worry about writing this kind of
thing yourself next we have action page
which you saw in the previous example
where we were picking actions action
page is the fullscreen button with
circular text that you see there so most
Android wear notifications and apps use
this kind of button with a little PNG in
the middle to express things and people
are used to seeing these kind of things
so if you use this it does all the work
for you of handling the button press and
laying it out and it also gives you a
ripple feedback when you press it and it
has an action label that adjusts in size
depending on your screen so that it
always fits so it's kind of nice and it
gives you the functionality that you've
seen in other apps without having to
write it yourself next we have dismiss
overlay view it's a common paradigm in
Android wear apps that you want to exit
something
you actually press and hold on the app
and a red X will pop up you then press
the X to exit the app so we've provided
the functionality that allows you to do
this so it gives you this pop up that
offers to let you quit out so here it is
in operation and then here's the code to
do it now you actually when you use this
dismiss overlay view you need to
suppress the ability to swipe the app
way so on Android wear you typically
have the ability to grab the app and
flick it to the right which will exit
the app if you're using the dismiss
overlay view to exit out you don't need
that swipe of a gesture anymore you
might want to be making for example a
map app where you need to use the finger
to scroll around a map you don't want
the user to swipe to the right to kill
your app you want to use it to swipe the
map to the right so in this code here
you can see how we're creating a new
custom theme which actually disables
Windows swipe to dismiss it sets it to
false and then in your manifest file you
pick the theme that you just created
that suppresses swipe to the right next
we have wearable ListView you may have
seen on Android wear the ability to
select from options like the settings
area uses it the app launcher uses it
it's a pretty common concept so we've
provided this functionality so that you
can provide some colors and some images
some text then you can swipe up and down
through it so it's a very common usage
pattern you write an adapter for it and
that's available as well yeah let's just
wait till we get to the end we're almost
done and we can go through it we have
delayed confirmation view so when you
send a text message on Android where you
say send a message I made a reservation
at 7:30 it then brings up this dialog
that shows a ticking down timer that
shows that it's about to do it so the
nice thing about this is if the user
does nothing the message is sent but if
the user realizes the message is
incorrect they can cancel it so it's
actually a nice way of saying instead of
saying are you sure you want to send
this it's I'm gonna send this unless you
tell me not to so just delayed
confirmation view helps with our making
that easier so it uses the so called
image view for the implementation of the
circle and that provides the set
progress and the timer countdown as well
and to use we have another thing called
a confirmation
which is after the message has been sent
you can actually pop up a green check
box to say it was done so the green
check box is actually an animated vector
drawable that appears and you can use
this code here where you start an
activity which brings this confirmation
activity up on the screen so you've seen
all of these different things appear in
Android wear apps this is how it's done
also we have a so called image view and
a circular button these are two
different sort of more little clickable
widgets that you can use if you want to
implement pop-up boxes that show various
things so these are all useful for
different kinds of apps that people
might want to make and remember also to
use very large touch targets you see
those things are very large compared to
the size of the emulator window I use
there you can only fit about four of
those on the screen you want to make
sure they're really big you don't want
to have 40 of these buttons on there
because no one's gonna be able to press
their finger and accurately to be able
to press it finally we have what's
called a remote input intent where you
can actually start an activity that
brings up this remote input intent and
it allows you to take advantage of the
speech recognition engine of Android
wear so you can see there it says speak
now you can speak whatever you want
it'll transcribe the text for it and it
will then return a string back to your
app alternatively you can press draw
emoji and you can draw an emoji and
it'll send you back the emoji as a
string as well so you can actually use
emojis and speech in your app without
having to implement all that stuff
yourself in Android wear has a really
cool emoji recognizer that you can use
and you don't have to write any of it
yourself so that's really nice so that
was a quick rundown of sort of the key
features of Android wear that are very
important to writing apps so let's just
finish up by talking about voice actions
which are a key part of the platform so
as we mentioned earlier we have this
concept in Android wear of ok Google
taken note book me a ride send a message
things like that those are system
provided actions that are task based
they're built into the Android wear
platform and they're specified with an
intent filter and you can actually hook
into those if you want so if you have an
app that implements take a note you can
write an app that takes notes
however if you've written an app that
doesn't fit into any of the existing
tasks that are built in Android wear you
can also the user can say ok Google
Start app name where app name is the
name of your app as its declared as the
launcher icon in the androidmanifest.xml
so you can see here you've got fit keep
and carry the last one whatsapp or
something you can say ok Google start
keep and it'll bring the app up so this
is the way that your app can always be
launched easily the user can use their
finger to launch your app but they can
also speak it as well and then finally
we have the speech recognizer that we
showed earlier and that was the remote
input intent you can use that as well so
those are sort of the main ways you
interact with an Android wear device
it's not just about touching on the
screen it's about speech recognition and
not thinking about your apps in terms of
apps for thinking about them in terms of
tasks that they solve users want to take
notes they don't want to launch a
note-taking app and there's a difference
in how you understand that these are
actually a list of the actions that are
currently in Android West because
there's a whole bunch of different
things that you can do here and those
can change over time so there you have
it so this is a summary of the ways that
the different things you can use to go
about creating Android wear apps and the
different things you can do so we
actually have a code lab that's starting
at 12:45 I believe where the code lab is
all about creating your own watch face
for Android wear so you can show up we
have a starting sample you can drag your
own image in and you can create a watch
face for the custom picture of your dog
or a cat or whatever and it's a really
cool way of just sort of seeing how
quickly you can get start with Android
wear on an emulator and if you don't
have one you definitely need to go out
and get one they're really cool devices
and lots of apps on the Play Store now
support them and there's a lot of
functionality that is sort of
interesting for developers and it's a
great way of differentiating your app
because there's a lot of apps out there
but if you have a really great answer or
implementation that might be the thing
that makes your out popular amongst
people and helps you to get a bit of a
foothold with more customers so if you
want to learn more and a whole bunch of
documentation on developer.android.com
forward slash where we have design
guidelines on
developer.android.com/design slash wear
where we sort of talk about more of the
design methodology and how to
really beautiful apps you know Google
really cares about design right now and
so it's really important that you make
nice apps that look really good don't
just take old apps and sort of squeeze
them onto the wearable display you
really think about the user and do a
really nice job about it so I post a
whole bunch of stuff on G+ constantly so
I'm one of the main developer advocates
for Android wear so every week or so I
put out tips and so forth about how to
best take advantage of the platform
things I've discovered new releases so
please follow me on Google+ if you're
interested in learning more about the
things that I do and I said I talked
about Android wear a lot but we also
talked about Android auto and ubiquitous
computing and also I will put my
biscuits and gravy recipe up on G+ as
well so go check that out so thanks very
much for coming and thanks a lot and I'm
happy to talk to you all later thank you
and I guess we've got a few minutes for
questions if anyone wants to ask
anything you had a question yeah anyway
thank you so I have question is when
when we do Action Button on day where
yep like we swive and then you push
button on a grid view with a send the
data the signal to the wearable alone or
or it will send the data will to the
mobile or it will be able to do both and
how so the question was is that when you
press like an action label or a button
or something like that will the press
which is will the press get sent to the
phone as well as the wearable and the
answer is no so if the wearable created
these buttons and widgets the the call
backs are whatever only sent to the
wearable itself if you want the wearable
to send something to the phone you need
to send a message or a data item or
something like that now in the case of
notifications if you create a
notification on the phone the
notification appears on the wearable if
you click one of the actions that will
get sent back to the phone so that's
only done in the case of a notification
and it's only done in the case of if the
notification is created on the phone
it's actually possible to create No
vacations on the wearable those are not
sent back to the phone so yeah typically
the wearable never sends anything back
except for a notification credit on the
phone and each their anyway we make it
to send back or it's just like you have
to write that mechanism yourself so if
you want to send something back you do a
data item or a message or a channel and
then you can send it back that way
next question one question when we use
the message API or the data API for
devices that support Wi-Fi they connect
through the cloud right is there any way
to prevent that behavior like if we only
want to send messages or data items only
if they are connected through bluetooth
to avoid sending data to the cloud like
I mean for a big company it's important
to have your data like secure right and
we don't want to send data to so I mean
there's a in the node API there is a
cope there's something you can there's a
method I come over the name of it but it
basically is is local or something it's
like given so you can ask for a list of
devices and then you can for each device
you can say is it local or not and that
then would tell you if it's connected
via a local pairing or if it's still
available but it's connected via the
cloud somehow so that could be a way
that you could avoid sending it through
the cloud like that but I mean I guess
there's a possibility that it could
switch from Bluetooth to Wi-Fi mode and
you could send the message just as
making the transition so there's no way
to mark a message as do not ever send
this to the cloud the same time though
messages in the cloud are not stored
they're just sent virus somewhere about
the date API because they'd be I
normally you push thing into the network
yeah yeah and then it gets sync across
all the clients yeah but because the
cloud node is part of that network there
is no way to prevent that data to
actually go to the cloud but you see the
one that syncing behavior but only if
they are connected yeah the case of data
items the thing is when you credit out
items synchronized all devices
automatically I don't think there's a
way to prevent that from happening so
yeah
if it was really important to you I
guess you could encrypt it I know you'd
have to do something about that yourself
there's no nothing to support that yeah
any other questions yeah
Jonah grab the mic yeah so I had an LG
urbane watch so that has a website so I
have an LG urbane wash so that has like
a standalone why find that watch so
whenever I make a network request when
it's not connected to my phone where
Bluetooth it works fine but when it is
connected to my phone via bluetooth so
Wi-Fi is automatic disabled so basically
I cannot make a network call if it's
connected to bluetooth while Wi-Fi in
the world mean you cannot make a call
well like network call the network whole
like why are Wi-Fi
oh yeah okay so the thing is why find
like that or like what for you yeah so
the Wi-Fi feature is it uses more power
than Bluetooth so we want to keep Wi-Fi
off when possible so if everything is
working over Bluetooth we will send
things over Bluetooth now I think what
you're asking is is you've got an app
that's running on your watch that's
trying to make HTTP requests
yeah so you're not supposed to do that
so if you're if you're if you want to do
Network requests from the watch mm-hmm
you're relying on behavior that's not
really supposed to be used so what are
you kind of what are you trying to
request I was trying to demo from
feature actually I mean I was just
trying to verify yeah it kind of works
the problem is you can't keep the Wi-Fi
feature on you don't get to control that
so if Bluetooth is available it'll
switch to bluetooth okay so the correct
way to deal with what you're trying to
do is if you really wanted to make an
arbitrary HTTP request so if you want to
check the weather mm-hmm you send a
message to the phone the phone gets the
weather okay and then you parse all the
HTML you extract out the temperature
information so all the network operation
should be done within the phone app yeah
and the data should be passed to either
the data API or message yeah another
work now if you really wanted to get
dirty so that the dirty solution is you
send a data item to the phone that says
HTTP colon slash slash weather.com blah
blah blah and then the reply is the
entire HTTP response as a string and
then the wearable could do all of it so
you could write yourself a really cheap
e little proxy over data
items that go back and forth we could
use the channel API but you're really
not supposed to be doing that it's gonna
you're gonna be doing it wrong and
you're gonna be wasting a lot of power
right that's the solution if you really
wanted to be lazy about it but the best
solution is get the phone to do the work
mm-hmm and strip the data down into its
simplest form and then send it back to
the wearable okay okay I think around a
time so we do have a code lab remember
at 12:45 and actually my colleague
Michael Quan he is giving a talk at 12 I
think now he's giving a talk he's
actually one of the engineers on Android
wear who did a lot of work on power
optimization and looking for bugs and
he's a fantastic engineer so you
definitely interested in Android wear
you definitely want to hear Michael's
talk as well otherwise I'll be around at
12:45 at the code lab room talking about
Android wear watch faces feel free to
come and talk to us then or during the
barbecue afterwards and thanks a lot and
I'll see you later
Thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>