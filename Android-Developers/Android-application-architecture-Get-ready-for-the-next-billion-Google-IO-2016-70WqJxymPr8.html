<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android application architecture: Get ready for the next billion! - Google I/O 2016 | Coder Coacher - Coaching Coders</title><meta content="Android application architecture: Get ready for the next billion! - Google I/O 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android application architecture: Get ready for the next billion! - Google I/O 2016</b></h2><h5 class="post__date">2016-05-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/70WqJxymPr8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and good morning everybody my name
is Igor I'm a member of the UI toolkit
team in Android but today we'll talk
about Android architecture and mostly
about next billion users that's what
mbu's stands for Calicut so what happens
when you develop an application is
usually you live in United States or
like your learning is like dwop parts of
the world and this is your main user
base like Internet is good or reliable
everything like all the new stuff comes
up there and then you're like oh and did
my job very well my application works
very well I'm a good developer but it's
not actually through most of the world
cannot use your application or they
don't have a good experience and why I
say most of the world is 78% of the
world population it's like this huge 4
out of 5 people cannot have a good
experience with your application
why because what you leave that the
circumstances you test your application
is so different than what I actually
observe so today we will try to talk
about like how do we close give this gap
like how can what are the things that we
should pay attention to make this a lot
better so this is from the International
Telecommunication Union numbers in year
2000 like most of the world was in the
world in the developed country like 75%
of Internet users from the web countries
there was only 25% from these developing
countries and they were not buying in
our purchases or whatever you would
mostly ignore that well that was I guess
no in-app purchase year 2000 but you get
the point but the year 2015 there are
3.2 billion Internet users and most of
them are in these developing countries
so if you ignore these people you're
actually ignoring the like a chunk of
user base you're ignoring your future
likes your you know if you want to be
successful your application needs to
work very well for these users it's very
important it's the feature and I think
like this is another number is how many
people have brought by subscription in
the world countries this 90% like almost
all of us have internet connection on
our phones if you are living in one of
these countries but if you go into
developing countries is 40% of people
like half of the people don't tell
mobile blog by subscription and even if
they do most of these people like keep
it off if you've been to like India and
like other parts of the world people are
very very careful about their data and
only 40 percent has it anyways but you
might think about hey like the mobile
internet is fast right like when when
they have and they want to use my
application it will still work very well
now let's look at some other numbers to
prove this so oral in the world the 3G
coverage by population is 69% this is a
very good number like 70% of the world
population has 3G coverage in their area
this will make like really good internet
by minimis but if you look at the rural
population is 30%
so if you're not living in a city this
is a 30% chance that you're a has 3g 2g
coverage
I was below 3G we're talking about like
age I know so if you look at urban
population so if you live in a city this
90% is a very good number ninety percent
of people have 3G at a given time so I
was giving like talking about these
numbers before in a conference I asked
people when was the last time you have
seen age on your phone right like you
don't do that you never get it and as
someone replied me on Twitter you asked
me last time I had H is here in droidcon
San Francisco so even if you're in San
Francisco this sometimes what you get
like it happens because it's very hard
to have a good coverage for populated
areas and then it doesn't end up working
well so how do we fix this case right
like everybody does this so you use
whatever networking library it catches
your data you catch your images you are
good right no so look at an example
about that they say I have this
application is showing the news from no
sharks well bury it team so I I click on
the news I read the news there so
looking fine voila and then I see this
how
this happened because I did go somewhere
else I used my phone I'm out of network
I come back to that page there tt was
killed restarted you never face that
page because you only face the list of
news but you never face that particular
news page because you do not cash it
properly you shove a loading bar to the
user although you have the data like you
have a HTTP cache that has that news
item but you cannot show it to the user
that's very sad that should not happen
so learn is request caching is not
enough if you're caching you should be
cashing your data so let me say okay
hopefully we little bit agree on we
should embrace the next billion users
and how do we do that this is always the
question that comes our let's put this
slide which architecture I choose every
other day there's a new architecture
article on the internet it's crazy like
everybody implies something new I
dislike sector that I picture I have no
idea which one to choose
but the axial thing is it doesn't matter
who cares which architects you use like
your user does a kit is good for you you
should it's good for you to scale their
application you don't have it stable
test it well but your users have no idea
what you are using all the you care
about is their user experience so this
what should be on your mind every time
you write some code so what do them
there's two main things you need to do
first your application should work
offline think about you're writing an
app for a desktop 10 years 15 years ago
where there was like usual no network
team when you're writing it up plan
everything that way so your application
should always work offline should never
require Network and your optimized for
the bed network because even if you have
network is not necessarily a good
network I know on your desk in your
office is usually a good network but
that's not what your users have so you
need to you need to think about them ok
so let's start with offline application
so what I mean by offline apps the first
major thing you need to be careful about
is removing network from your user
experience so I use this in
directing with your application
hopefully I should never ever be a
network request in that flow well if you
are doing a login page yes but there's
only like a few times it's mandatory
usually it's optional so it's okay if
there's a dating app so there's a guy
and then you click on the like button
because you want like that and you're
seeing a modal dialog liking job I told
you to like join oh yes you'll do that
why do you have to block me for that
like don't do that this is so
unnecessary user doesn't need to know
about that okay
so we say remove that like don't don't
blow the user about this and if you're
very briefly like we're off psych level
if you look at the application what
happens there is you click on the button
it goes you're like presenter view
control or whatever you choose to use
and then it calls the network when the
network decides to come back you get it
off the modal dialog but like who cares
user doesn't even understand like my mom
doesn't really understand that there's a
network request song like she doesn't
know what network is get it off it so
instead do something a model like model
your data locally so that when user
clicks is the click button you just
update the model your market is like
they say you know 100 milliseconds 200
milliseconds it comes back you update
the real now your model tells it to the
network a like there's a change I here
locally can you apply it to the server
and the server comes back you refresh
your view again because now you know you
really change it so if he implemented it
this way it will look like this you tap
on the button there's some sort of
indication that usually take like user
receives the feedback instantly and then
when you finally synchronize it it turns
red so it's important that you give a
feedback to the user so they understand
something has changed and then you find
also let the neither users learn this
and this is what we call the response to
user experience so look at the same
application again I tap on it as yellow
nice I know something is happening it
received my tap so I go back there's
other people you tap someone else again
and you go here nice it's still doing
something like AI is consistent this is
good then I go to okay I did that again
another use case and I go to this pace a
guy just reading news right I I stay
there way doing something else and then
Droid decides to kill the application
because we needed memory and like time
passes I come back to the application
and Bank I don't see he tell you wash
that was yellow I put some information
like this is so named for the user you
put some comment you come back it's not
there anymore now you have no idea what
happened there like did it post didn't
know post what happened is a buggy app
so you don't want to do this and I how
do we fix this
so in the previous one why we said we
have control calls the model model calls
Network Baba
okay let's improve this a little bit
interview something call it application
logic and make the model persistent it's
very important like you should use you
should definitely use use SQLite use
rearm use whatever you want we don't
care but use persistent data storage so
when the application logic does any
network requests it always updates the
persistent model and then this speech is
in event or you might be using or it's
Java observables again we don't care
this race event and the wheel shows the
state on the model the important there
two important parts here the model
should be persistent and the wheels
should always reflect what is in the
model so you don't you just go and
change the button to like selected state
while you try to make your web request
don't do that update the model let the
view refresh itself because when you do
this it's a user clicks click you tell
the application logic I want to send a
like that updates the model model says I
have changed or duplication logic says I
have changed and your real nose if user
is there I like all right I should
refresh myself because the data I'm
displaying has changed so you go there
it refreshes the you are this is man it
is yellow because you know data is
pending is nothing yet
and now when the application was you
finally sinks in maybe three days later
who cares it updates the model again and
if you're really still there is going to
refresh yourself the ideas you write
these views they try to represent us in
the model and nothing else of course
some like transient temporary UI states
so we look at the application again we
go there there was a profile you see you
go back you got another profile you go
back using the application for a wire
and now what happens is you go back to
this list again and there's a loading
it's like I was on the application two
minutes ago I saw that list like there
is no way you are loading that list
because I know the list is there so what
went wrong here so it's what's happening
every time you go into UI you fetch the
list of users right you facial you know
the date ID if the user like this so
this you're like background thread pool
you keep consuming these things you have
multiple workers
so after is refreshing user data from
network the otherwise the again like
doing stuff sends the user stats and
like you went back to that UI you want
to read the list of users from the disk
so you've not the right way you are
trying to load it from the disk but the
problem is your background turns are
busy trying to make a network request
like this is so bad because you know
this case that you know you will be able
to access it but the network you don't
know and you're making the user wait for
no reason
and the solution for this is very simple
you just save different queues for
different type of months have different
queues well you cannot just create a
queue for every type of run but usually
at least you shouldn't want for your
network related stuff and one for your
local access you know for local access
you'll probably just use a load on async
tasks that were fast enough because
those things are like under 200
milliseconds 300 milliseconds very fast
so once we do this as we add these tests
because we want to get data they get
consumed in different queues so even if
the network is slow locally everything
is working this is what we call like a
application should work offline like
everything just works and then you're
trying to sync it later on of course
it's not always everything whether so we
look at the other section how do you
optimize for the next billion and the
next villain looks like this so this is
101 you need to translate your
application if you want people to use it
in other areas of the world you want it
to be translated so you translate the
application you translate your assets
because you may have text there and you
also translate your in-app purchases so
that they can spend money but actually
this is not completely true translating
is not enough that's not the right word
the right thing you should do is
localize so localize your application
won't just translate it because let's
say you have an application about a
family like communicating with their
kids where they were on the Play Store
page if you have an American family in
United States put an Indonesian family
in Indonesia and if you're in China put
the Chinese family like you should
localize your assets also within the
application because this what will make
sense to that user every culture has
their differences and if you want to
make best of localization this is what
you should be doing and the other thing
is text free layers no way you can do
this is really useful for example if you
have a messaging app if you just want to
say scent plus a scent put the check
marks what sub does is very well or if
it is read to double check box this
helps you first you don't need to
translate it it's fairly global your
users learn it and even if you know if
your application is not messaging
something as the literature lay rate may
not be very good in that area
this will help more users be able to use
your application and at the example if
you don't have Wi-Fi don't say no Wi-Fi
just put this they learn people learn
these things and multiple applications
use the same icons and if you use like
the material team and stuff by user lens
in your application they actually know
it like they get a head start is very
important the other thing is about
adaptive content fetching
so they say this is an application that
shows photos and this is the same UI
pretty much looks the same of course the
one on the right is kind of low quality
but the one on the left is is 100% JPEG
and the right is 10% JPEG is almost 1/10
of it in terms of size and it looks okay
now of course you don't want to show a
lower cult image to your users but you
need to think about they either see the
lower quality image or they say blank
screen there's a big difference between
seeing a black screen and a low quality
image and bonus points you can refresh
the content so you realize it network is
not very good your fresh lower quality
image and once you figure out somewhere
else the network recovers you refresh
those images especially if it is free
you should do that and luckily now to
connect to the manager API actually
tells you if the network is metered or
not so I think you some examples what we
do at Google about this is for example
if you're using Google+ in the settings
minute there is a way to say okay
commerce data usage now like if you're
even living in United States you
probably won't really check because you
have unlimited data but the rest of the
people pay premiums for their data so
they're very very conscious about it so
you put the settings like that and
Google Plus
these are what we actually do if the
network is fastly we fetch a high
quality JPEG as the network go slower we
go lower on web B versions so we show a
version and this like instead of seeing
a blank screen user C sub data we help
them save their data this is a win win
and they get a better user experience
and we also educate the users is also
important as like what does it mean the
Commerce data why don't you always do it
right like why I wasting my data and if
you use this color corner v okay we
explain them this is what it means to
say data and red part is adaptive
behavior now is very common in
applications to hairlike auto-playing
gifs or at the playing videos what you
should do is okay at this point my user
is showing my feet
is the network fast if the network is
fast it's cool just go Auto play the
video but if the network is slow don't
do that just put the play button don't
waste their network just because they
may want to watch that video that's a
bad thing for your users and I have good
network here so I will play this video
yes good girl right ' da okay so for
example this is what we do YouTube right
in youtube if you go to call to settings
there is an option that says Auto sexy
what it does by checking the network
quality we adjust your bitrate and I'm
sure you are so used to this behavior
you maybe don't even notice it takes
time to implement but the good news is
the exoplayer library from google
already supports - and smooth streaming
all you have to do is use this library
and let it handle this you know
different network protocols of course
also your server side needs to support
it
what's that hard is easy it's important
okay come on alright so this is the use
case we will get Uncle Bob so this guy
goes to work every morning takes the bus
maybe Google bus reads his nibs on the
bus does the same thing on the way back
happens all the time but what also
happens all the time is this
he's seeing a loading dialog when he
tries to read his network read his news
because there's like another 60 people
in the same bus trying to reuse the same
internet connection and there's a lot of
other cars there is really like the
network gets congested and he cannot get
like no one gets a good experience how
can we fix this now good news is that
this guy goes to work almost the same
time every morning so he wakes up at
6:30 no brainer set an alarm right we
can set an alarm to prepare the content
for him and also maybe he leaves the
like work at like 5:30 every night let
me set an alarm for that and prepare the
content so that they get some content
when they open the application and the
way we can do this is we have the alarm
manager
us they will help you wake up your
application every morning 6:30 so you
can prefetch your content so let's say
we implemented it we are going to try it
so all these users have a good
experience every morning 6:30 they get
the latest news and they are happy but
let me get more users and more users
make the secret six 6:30 and then this
is what happens your cloud goes down and
you know what comes up on your clothes
goes down your system Adly dead guy
slept at like 4:30 a.m. in the morning
you woke with a 6:30 with a pager
why because you just made that because X
6:30 from every single Clyde and
actually it's a real story we wants to
see it and bug recur bug occurs from a
provider they said there's a bug with
Android phones every morning at this
time we are getting so many requests
turns out it was an application like
this so we don't do that how do we fix
this super simple so instead of just
waking up at 6:30 you randomize it wake
up between 6:00 and 7:00 and then you
wake up each application in that random
time and then your show Redmond is happy
but then we are unhappy using alarm
measure seriously 2016 come on how do we
do this we do this with job scheduler or
you can use this on network manager for
the older API versions so we wanted to
do this with job scheduler you create a
job you say ok this is my service you
say we want the unmetered Network there
is no reason to cache the data if user
is going to pay for it and then we say
ok start the earliest around 6:30 and
then make it only if the device is idle
and you say if it's only charging like
these are all optional things say all
right deadlines these are all optional
things that you cannot depending on your
use case so what is this all right
deadlines me so the idea here is that
let's say we have this thing and user
forgot to charge their phone so we will
never wake up in the
morning but what will happen is the job
will be just waiting there sitting
either maybe also will go to work and
then they will plug their phone and I
will fetch the content it's already
passed like we missed the deadline why
would you do this so we stole the job
scheduler hey if you cannot do this on
to 7:30 wake me up so what we can do is
when the job is started you can simply
check ok did I get the deadline did the
deadline expires if the deadline expires
that's why I was walking up this so
custom magic well you say ok is the
connection unlimited if it is not just
don't force I don't want to run this job
anymore
or if you can say something like if the
battery is charging or is like at least
75% otherwise I will not run this job so
this completely depends on your use case
but you get the idea like think a bit
try to be total about these things I
think we provide enough many api's on
the framework site to be able to
implement these things it's not hard and
they tend your user receives a really
really good user experience is important
so for example in YouTube you can go
ahead and download the video for offline
so that like you know you do it at home
you watch the TV sees you download it
and one on the bus you can watch it or
in maps like recently I was on vacation
outside the country and I just don't
unload the area on Google Maps and even
if even though I didn't have data there
I could use my phone to navigate it was
so nice so these are like little things
that makes a huge user experience
difference for example another example
of prefetching this is slightly
different but this is what we do in
Google Pass so we have whenever we
detect that there a new post
we shall wave like little touch button
that you can tap the Refresh so in there
what happens behind the scenes is we
detect our new post we let the user know
and if the user taps we are going to go
ahead and finish the content and then
refresh the eye now we change this
little bit this is what we did when we
did a clip post now we actually go ahead
a face
because users in the application we
detected near poss-eye they want to see
it right we are like fairly comfortable
that they want that contact so we fetch
it for them and then we let the user
know that there's new content but we
don't just refresh it because they might
be doing something else and it'll be
really bad user experience instead we
just notify the user there is new
content and if they tap will refresh the
data now the difference between these
two user experience Falls is the first
one takes around three seconds the
second one takes point three seconds
this is like almost 10x then there's a
9x difference just change you know the
order of two operations a huge user
experience improvement with very very
little effort is important but if you're
doing prefetching it's a very dangerous
thing is really good for users but it
might be also real bad so you need to be
careful first thing you should be doing
is balance for the available storage
that just don't fill out their phone
especially the rest of the world like
the phones have similar like lower
memory so you shouldn't be filling it
out video prefetch content or if you are
going to face some data that's expensive
let the user know I know I want to do
this update providing my settings for
these things you know like these people
are really really like they care about
their data they're really really into it
so you should give them options and they
will use them the other part is so I
always get this thing like oh now the
Android devices have to 3G go buy some
memory we don't need to care about it
wrong it's not like that because first
the squeeze got a lot bigger so we need
to use a lot more graphic memory your SS
get a lot more higher quality those
things are wasting a lot more memory
than they used to them before plus we
try to run a lot more many applications
because it's the best for the user so
always measure your memory and like in
the latest versions of Android so this
is so easy just tap on the button I
remember before you will need to use
like get the memory down from DDMS and
then h proof converted and i open it the
eclipse mat there was a mess now in
android studio just click on your button
takes the IFFT up for you
it opened this in this nice UI and you
know you know there's like usual
suspects there so you just click on that
we will show you all these of it you can
check okay why am i retaining this
object and the coolest thing I love this
thing you can just right-click on the
selected item we beat that like how cool
is that you know what you have leaked
this is so much faster than what you
were able to do before so we're only
spending time on making these tools
better and shall take advantage of them
so also in end so you guys can see like
in marshmallow in and we are spending a
lot of time in battery life like this is
very important for us overall system out
and we cannot do this without your help
so in end we also introduced this new
feature called data saver where user can
say you know what I want to like limit
the application data for the background
apps they don't get any data unless
network is limited but if you're a good
application user might whitelist you so
if you've implemented properly they will
like this you so you will get the data
while your competitor doesn't and it
only works in meter networks so we only
broke you if we have a reason to do
solve so how you use it so the
connectivity manager now has this name
API we can say a is the active network
meter if it is metered there's you can
get the background status like you know
if it is enabled or if you are white
listed or you are disabled so the idea
is that even if the user if you should
put data saver on but your white listing
you should still be cautious about okay
I don't want to spend too much data here
I have like users translate it it's just
forcefully you could send it later you
don't need to send it now
okay so go into somewhere or find use
cases and then I want you to like
starting over okay how can I make my
application more offline so this one use
case the first time we gave it to this
for a year ago people say okay like a
far away commercial app right there's a
place where people buy products I cannot
make it offline we
is through you cannot make it offline
because the price changes there's only
your talent hey you built this for five
hundred dollars and then one day later
you charge them seven hundred dollars
you cannot do that every route but there
is still things you can do in your
application like product information
right when you buy something when I'm
going to buy something most like like
tonic I go to the same page again and
again and again this will happens this
is like user behavior so optimize for
that keep the user data let them search
I will probably search for the same
products later on the in local search
remember when we talk about having your
proper persistent model it helps you
here because you can let them search
locally but still let them know that
like now I'm showing blockers are
something if they go to the product page
show some sort of animation saying that
you know you cannot buy this right now
I'm facing the price your designer will
give you a better asset and I meant the
price games you show it to that so you
don't block to users but for important
data now you just don't show it or show
it great
I know but think about this another
example is a messaging gap so I say
Jenny Jenny and Michael so the couple of
Jean says okay let's go to a movie why
Chris s shoes let's watch the big short
this is fine pick me up at salad and
then okay we'll meet at 7:00 but around
6:30 Michael realized that hey like his
dog is sick he doesn't want to leave the
dock home so he says hey Jenny
like my dog kissy coha why'd you come
over we hang out at home they so cool
unless mouth when optimises couldn't be
said for whatever reason fail tap to try
again so as a developer you know I let
the user know I'm done you're actually
not done because Michael you know he
wants to call his red to get something
like tips and stuff so he already left
the application so Michael did not know
that you could not send the message that
Michael could not know that you didn't
send a message
Jenny never saw the message and this is
Jenny's heart is broken because of you
you sure oh okay all right we have a
solution
what could you you could do something
better is important you don't need like
if you like the dating profile and you
couldn't send it to the user now it's
fine like it's not that important
there's a messaging application is the
instant messaging application you have
some responsibilities so if you couldn't
send a message and you know user didn't
see it let them know show a notification
because you already know that user is
not in your activity you already know
that they did not see the message so
instead you show a notification Michael
calls his girlfriend and they're a happy
couple thanks to you and another thing
to you that you could like further
improve the user experiences you can
always let them know like if you're in
this screen their messaging if you know
there's no internet connection now just
put it by the way if you are listening
for internet connection in AD or all or
like you only receive that broadcast if
you are the front application I don't
register for that broadcast your
manifest it's like you stop working so
now you can try it's not going to work
but your application you could still use
the connectivity measure and register
that broadcast programmatically so the
other example if you are like TV
schedule application of course they
cannot watch TV offline but you can do
some stuff you can let them like click
on a button as scheduled Anala right
this is like there's still things they
can do because you can implant all of
this within the device without trying in
network communication so the idea is
that if you start thinking about what
can I do fine what can I do fine you
will find really really good use cases
is going to differentiate your
application so even though we talk about
this talk we say like it's next billion
users of i6y helps your users everywhere
around the world it's not only for them
ok so I want to quickly go through this
is I okay I'll say you synchronize the
data right like you update the purchase
model and I'm using cross data how do we
do this so luckily scientists has been
working on this problem we don't have to
solve it this optical operational
transformer like things like Google
users or there's conflict for your
application there's a bunch of things I
don't know the result of articles but
you don't need them what we apply is the
Pareto principle you'll do the 20% of
the work or get to 80% of the benefits
and we run away for example if you have
a post or user but something you can
like and when user likes it your market
is like you update the model but what
happens is next time like that was
another request running and it fetches
the little post again it just over eyes
what you have put there that's a bad
problem how do you solve this very easy
you add another field that you only
modify locally so it's yours
I call this like local here so when you
want to check if user liked the post all
you do this hey you update that field
when your feet
fetch the feet it doesn't all right
because that field doesn't exist on the
server side and if you want to get like
when you are putting the UI if you want
to check the user like this well it's
very simple you check if there's a local
value show it otherwise use the value
that you lost to see from the server and
select very very simple thing super easy
to implement and gives you most of the
benefit excuse me so another example
let's say you were fetching Paul sample
say being deleted on the server tell
your server guys little send you the
list of deleted posts it's so easy for
them to do and this way you can locally
cache everything all the show everything
locally and if something has been
deleted on the server you'll eventually
get notified about it and you will
update your local later this is very
easy for them to them so if we get
another example you could be sending
this over here I have the post between 8
and 31 when you make a call to get the
new posts your is size AC state or
whatever right and now the server can
against and you which items from that
trench has been deleted I know is
sometimes hard to like convince your
back end people like there's a clash
everybody wants to other people to do
the
is this thing okay I have a perfect REST
API so you make 25 requests just to fit
your feet don't let them do that
don't let them do that like fight for it
is important then they provide you the
right api's for your application so it's
another case here like I'm trying to
update the profile page I have two
different clients one of them change is
the favorite color the other one change
the name I get a conflict how do you
solve this kind of conflicts a diversion
now your data is versioned so when you
make a request crisis okay change the
favorite color to this one on top of
version 10 and then the curse a server
can say okay since this version I can
apply this stiff and do it or decide
whatever you want to do maybe you don't
want them to do that the thing is it
will happen very very rarely and you
only handle in that case so this won't
override each other and if you start
versioning your objects your value
objects you get this nice thing where
like hey you made it like fetch you made
a request to fetch post some of the were
updated server already knows you told
the server I have these items with these
versions the stuff that has been changed
they can tell the hey these are the
posts that have been updated and here's
their new data you want request you get
all of the live
yeah I'm not telling you to do things
this way this is just a way of doing
things it's very simple and it's
effective okay so if you want to read
more about this topic go learn about
like multi-version concurrency control
is widely using databases like maybe
some really really important like learn
about operational transform which is
really really important for you to like
multiple clients changing the same data
so these are soul problems and you just
need to go ahead check them so this a
hot okay I will go to some quickly tips
and tricks it's like little bite-sized
information as I said before about let
me talk about network design your API
for your client like don't so again back
to that thing like I have a perfect REST
API know that it doesn't matter what the
perfect API is the one that my user
experience fits the best like this is
what you want so do it tell them to do
it for you I don't know but your API
should be for your application and like
whatever you can do on the server do it
on the server like if they can pass
metadata anything that will help you do
it there because it is much easier to
scale than the tiny device you have on
your pocket and one more thing to do is
bait your case now again and again we
say that battery life is very important
data is very important if you bet you
request the battery life will improve a
lot job scheduler does it for you so you
know just use job scheduler or GCM
network manager you'll be good some
people love you like these good things
so for example this is the example like
a bad API this is a terrible API it
gives me a user is a name and a photo
URL I have no idea what that photo URL
represents you put in a staggered grid
in recycle view when you finish the
photo grid starts moving because you
know you don't know how big the images
it just put something random there and
in which turned out to be a real weird
one so your UID had to reschedule it's
terrible for the user it's very very
easy to fix like tell your server to
send you to read and hide off the image
so you can put a placeholder like
anything in recycling real loves this
like when they call mine they want to
have the final size if your server sends
it to you you have the final size you
know you can even send a palette like is
also easy to calculate on the server
side instead of doing it on the device
they send you the palette of the picture
so while you are fetching the picture
instead of just showing a gray box you
show another box that is the same
background color so you can like easily
transform to deliver this improves user
experience is very important so to sum
up everything the main goal here is you
architecture your application for the
user experience they can be the United
States they can be Indonesia China
doesn't matter the important thing is
their user experience as your
responsibility I have a real local model
you know just don't keep things in
hashmaps put them all to the eggs SQLite
Newsround whatever you prefer
we don't care but put it on disk and
when you write your application don't
okay now I get this data from the server
and I update this UI user click on this
I make this other Lucas don't do that
think about I have the data on the disk
let's what I show to the user by user
reacts I have some logic to update the
data on the disk and I show it all the
time and you have some other application
logic that tries to synchronize the data
with the server it makes it a lot easier
and the couple like this is like you
know you should be coupled these things
the part that's related to the UI and
the disk they know each other you have
an application logic that toaster
network when you decouple things it
makes it a lot easier to test but don't
overdo it like when I see like there's
more popular architectures you know
stuff and like people hey I create an
interface and the interface from the
factories and the interface of the
factory factories it's like don't do
that this is still at fault like me if
you look at the framework code we still
write it as we write job is your I see
you don't have to write it like that you
know you xenops whatever do it use it if
it makes your application better but
like don't over architec it's still a
mobile phone we are trying to run many
many many many applications on the same
device and even if the device I'm you
know for course at eight cores most of
the time only one or two of those cores
are actually really capable of doing
anything
plus we try to keep them low mode or not
random at all to say battery and act
early like this is important in a
previous job I work I paid this stepped
if you have this kind of technical depth
is really really hard to pay so the
sooner you start the better it is and
well as laws something to remember from
this talk know your enemies network is
unreliable you don't want to be doing in
network requests every time you make any
trick good case you should feel like
uncomfortable oh what's going on and
that know your friends like disk is your
friend versus everything is very
reliable if the disk is broken the phone
is already broken so you don't need to
worry about it so is your friend is
actually your best friend thank you
ah</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>