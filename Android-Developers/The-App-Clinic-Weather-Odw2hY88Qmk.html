<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The App Clinic: Weather | Coder Coacher - Coaching Coders</title><meta content="The App Clinic: Weather - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The App Clinic: Weather</b></h2><h5 class="post__date">2013-04-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Odw2hY88Qmk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">today we found out how it feels to be
the eye in the sky we learned to stop
worrying and love the weather bomb and
we find out why this week neither one of
us are wearing pants on the next half
hour on yeah the other kick today we're
looking at weather apps with a bomb I in
the sky and should I wear pants and then
we're gonna dig a little deeper into how
weather bomb renders its awesome map so
let's have a look at weather apps in
general how what are the things that it
really needs in order to be a good app
well obviously it needs to tell me
today's weather right it seems like a
pretty good stock right because
obviously I don't want to get out of bed
or open the window precisely that would
work too much to ask right now just be
able to know these stuff before you get
out of bed would also be nice to know
tomorrow's weather yeah you know the
seven-day forecast I would go for that
exactly all the things which mean that
you no longer are slave to the eleven
o'clock news absolutely you also want to
have results that a localized write
something which knows where you are to
give you the way to forecast for you
know the city that you're in rather than
the general that's true but I don't
necessarily want it to local because
really what I want to know is how cold
or windy is it gonna be at the beach
this time that's true which means you
really want to be able to have multiple
locations you tell we're in Northern
California because I didn't say how hot
and sunny isn't gonna mean that yeah
that's the thing where we are here in in
sunny sometimes Northern California it's
an area of extreme microclimate so it's
the localization of the weather is
really important and the ability to know
which direction you need to drive for it
to get less foggy it's kind of a killer
feature exactly if we're gonna take
things up a little further what we
really like to see is a lot of the stuff
that you used to sing at the eleven
o'clock and use things like rich maps
with sort of more meteorological
information like topography charts
satellites those sorts of things yeah
and also I want to see maps when I'm
choosing my location absolutely yeah
that way you don't have to know what
kind of what city the beach is in you
just point at the beach jump done
oh yeah anytime I can get away from
putting in text to my mobile phone
excellent but I don't just want that
because I
super lazy I also want widgets I want to
be able to see the weather immediately
when i unlock my phone in fact I want to
go a step further and say maybe there's
a Casey for some rich notifications
something we should you know has a
little Sun or cloud or whatever else
it's a really good example of where you
might want to use a low priority
notification so it doesn't pop up it
doesn't ping me but when I pull down the
slide I've got that extra information
handy although I didn't mind knowing
what the temperature is at all times
this is my notification bar I thought
that was kind of a cool feature but of
course none of this is gonna be any good
if your battery runs down all the time
and so we're gonna go ahead and beat
this dead horse one more time I all of
these things depend on efficient
background updates that are done in a
way that won't drain your battery this
is actually another really good tip here
is that if you do want to do your
updates say that you know that the new
weather forecast comes in once a day so
you want to wake up the phone at 2 a.m.
every morning to get that new fresh
weather forecast each day make sure that
you're not doing that at an exact time
because what you'll find is if everyone
else is doing the right thing and saying
look we're not going to start anything
unless someone turns on the phone to do
this update you know you have to do it
then suddenly you turn on not just one
user's device but everyone who has your
app installed at the same time and then
floods the bandwidth with everyone
else's updates as well so you want to
make sure that you're making that as
fuzzy as possible 2 a.m. ish plus or
minus an hour so that you give your
service a chance to not get flooded as
well as the mobile phone operators
bandwidth if only there were an API that
would do that for me indeed something
like a inexact repeating alarm perhaps
really I'll have to keep that in mind
so let's go ahead and take a look at our
apps indeed so you can see the icons on
the bottom we're gonna start with
weather bomb bomb did it bomb get bombed
be done okay sorry so you can see the
other feature page here it is a riot of
color which is aptly depicted in their
app icon which is in fact for color logo
of raindrops I suppose slightly
concerning the the content
that there being four coloured raindrops
but nonetheless it is consistent with
their overall UI or branding I suppose
which I guess is multicolor like and I
guess that's kind of that killer feature
is the fact that they've got these
multiple overlays over the top of them
map views which show all of these rich
colors yeah absolutely that said you
know the actual feature graphic itself
again is falling into that trap of
looking a little bit amateurish this is
not an amateur app this has been you
know really well put together but it
look here and it just feels a little bit
like the bits of pull together and yeah
it hasn't gotten within a few miles of a
professional graphic artist I think at
least not the layout each little bit
looks really nice exactly so it's the
composition here should I think could
use a lot of work you want to avoid
things like italicized serif' fonts
within the feature graphic is again as
things get smaller and smaller they're
going to be harder to read in fact even
from just a few feet away I'm getting
the impression that I need may need to
either clean my glasses or update my
prescription because this is a ly read
insightful weather that this is
something that a lot of people get wrong
don't even realize until you see it on a
small device if you're not if your logo
if the app name and your logo is not at
least twice as big this is what have wet
weather bomb has you're not going to be
visible on a lot of devices you're not
gonna sell exactly and you want to avoid
duplicating things it is always a
question of whether you put the apps
title and catch line in the feature
graphic there is certainly an argument
for that but in this case it's not
really adding anything to the aesthetic
similarly you don't want to put the app
icon into the into the feature graphic
you've already got the multicolored
raindrops which is that branding effect
but you want to avoid actually just
duplicating content because as you can
see here you're just sort of seeing the
same thing repeated over and over again
it just feels like things are cut and
pasted left also I wouldn't mind a
slightly different treatment on on the
icon it's sewn always it's a little
familiar
not just the rounded corners but that a
little swash of color like a reflection
across the top that's it's um I've seen
that before and it wasn't on Android
yeah it's an interesting opportunity
here because again what we're looking
for is is a unique silhouette something
which really
stands out and looks great so there's
some sort of treatment here that just
removes the box as a first step and just
has the four the four raindrops will be
an interesting place to start
absolutely so let's uh let's move on
let's so let's have a look at the app
itself so we're gonna bring it up the
giant phone phone guide phone there we
go all right let's let's pull the app up
now there's a there's a EULA at the
beginning which is unsurprising and then
there is a page of text which I took me
quite some time to get past it and to
understand not just well not just to
read it but to actually figure out how
to discuss it it's like you're looking
here and it's like okay so this is a the
wizard where's the okay button how do I
so we're gonna do a huge favor for all
of our viewers and show you how to get
to the second page of this weather bomb
app and that is to hit the refresh
button which shouldn't be there anyway
yeah and that's it's an interesting
implementation he actually had a
countdown built into the refresh button
which is interesting but really we're
trying to get to a point now with app
design where we can sort of banish the
refresh button a lot of users are still
gonna want to quit for things like
weather or email where they're like
seriously I want to have up to the
second but that's a good thing to put in
something like an overflow menu so that
it is there for people who want it but
ideally no one does everything just
refreshes and does everything for you in
an app like this there is that you are
at the beginning which is gonna take
some time for someone to at least look
at and dismiss if not read through
that's a great time to do that
pre-caching it only took a few seconds
to bring that first page of information
when someone downloads and opens your
app for the first time if they hit the
the icon by pastor EULA and this is the
first thing that they see this is pretty
compelling it really is a great page
full of text with you know big bright
red on black text right at the start you
know it's it's something you want to get
to the awesomeness of your app as
quickly as possible and this looks
awesome the previous page looked again a
little amateurish yeah I don't know if
the author of this app is running
analytics but it'd be fascinating to
see just how much abandonment there is
so what is the drill first page I know I
probably wouldn't have gone through with
it if it wasn't my job to do so yeah
which is not a ringing endorsement the
app itself did reward my patience richly
yeah now this looks this looks really
nice we were talking about the nice to
have I mean they've got a map here at
the at the start and it seems if I drag
left or right it's going to go through
the time and show the show this
real-time map of satellite I guess it's
rainfall coverage you can actually rain
we've got wind which is always nice to
know in this area unsurprising nope yeah
no the only thing that bugged me about
this map actually was that I had to
pinch to zoom on a reasonably small area
in this case where I know exactly where
I want to zoom to I really prefer the
double tap to zoom and it doesn't
support that and wasn't sure why so this
looks like I wonder if this is a the
Android map library that they've used
here if they've got something customer
they actually will see later that it is
not the Android we've done some
investigation excellent alright well
we'll look into that but certainly the
functionality here is is fantastic it is
a very busy screen which is worth noting
and in fact the killer feature here is
really this map which is front and
center but once you have the the notes
on the bottom and the the various stuff
on top you know we've got a lot of
content yes miss the note but yeah I
agree completely that you've got some
real problems crowding the screen and
some of these things you know are sort
of nice to have like maybe you really do
want us to have the graph but the graph
is redundant the graph up here is really
redundant
we have you've got that the with the
time map so it seems like you could have
one or the other exactly at least just
give you an option to view exactly some
way to swipe to dismiss or to collapse
or something like that so that you can
really enjoy you know this you know
really engaging you know interactive
interaction model yeah
I was also I was happy that it's very
easy to drop down and picks locations
hmm but it's relatively difficult to add
new locations I was really hoping that I
could just do something with this map
add a location instead there's a little
harder go to this other page then I've
got to hit plus and then I'm gonna do a
lot long now I think if I know I I don't
know how to get to a map I don't think
you can I think you can search for
places but you can't pick off a map and
that would be a really interesting you
know view to just allow you to just go
straight off the map yes it's time you
have a lot long you should be able to do
a map it's kind of like having a date
you want to also have a calendar paper
than anything now so this is interesting
as well you'll note that every time now
that we've added a new location we get
that same start up screen again so again
really here we don't we don't need the
extra instruction you should really be
initiating that sync as soon as I add
the new place on the expectation that
I'm going to switch to it at some point
otherwise you know it's really nicely
polished out again you may be under
playing some of the data it's really a
question here of what do you want to
emphasize what is the main thing you
want users to take away from here
because we have the temperature but it's
in light gray and it's absolutely tiny
at the top left here which is arguably
one of the more important things that
you're going to want to to share with
users so again just take that into
consideration what are people going to
want what are they going to want to do
and make it as easy as possible
now of course whether bombs still in
beta yeah the author has mentioned that
he's got a lot of plans to add
outstanding things so I think that why
don't we just ignore some of the basic
layout issues and focus on the fact that
the map is a really cool feature
definitely going to talk about it a
little bit later hmm
I cover it in more detail for now why
don't we go ahead and move on to eye in
the sky okay let's do that so yeah
nicely nicely done great to hear that
it's in beta
definitely a promising app so yeah let's
have a look at eye in the sky so this is
the eye in sky feature page now this is
actually quiet this is actually quite
good not bad it's it's got a distinctive
logo it's it's kind of an eye type look
would be kind of creepy was a real
iPhone
I think I like the fact that it's
stylized and it's in the sky nice almost
want a question whether you want to call
it AI in sky or I in this guy I've been
calling it AI in the sky all day as have
i which scene and I've been seeing the
same arsons projects on which nobody but
me remembers because you hold there the
danger in having a name which is similar
to something which people are familiar
with but actually not the same is that
people are going to search for it using
the name that they think it is so you
know a lot of people are gonna be like
oh I in the sky great search for it and
that may not be the top result it may be
confused with something else so we want
to tell you two very very popular then
your results will bubble up and all the
sudden people searching for I in the sky
will get to your app instead but that
that actually takes quite a long time
and a lot of popularity so wouldn't
count on it
yeah so you want to make sure that
people are going to get what they're
looking for and I can see that you've
actually changed the name to AI in sky
weather which again is going to be
helpful for people searching for whether
you want to be careful with over
optimizing your titles and those sorts
of things but the very least you want to
make sure that you can take advantage of
that word of mouth type you know they
discover it by the way real quick point
on the search algorithm a lot of people
complain during the first three or four
days that their app is available that
typing in the apps exact name won't
actually bring that out into the first
search results sometimes not even in the
top ten and this is exactly why it's
because we do try to alter the user's
search phrase or search on phrases that
have resulted in successful searches in
the past right yeah so there's there's a
really really fancy algorithm going on
based on what we think is going to
please the user the most and it takes a
little while to adjust so that's a yeah
I think the last comment we want to make
here again you'll see a lot of these
sort of themes recurring as we go
through a lot of these apps but again
we've kind of got this squared off
square icon which all it does is bound
this really distinctive and interesting
silhouette so again I think you can get
a lot further in terms of creating that
really great app icon by just removing
that background so let's uh switch to
the giant phone and and have a look at I
in this key I've even written I mean in
this guy guy I apologize for miss
labeling your on earth well again we've
got the release notes now this is a kind
of a pet peeve of mine I don't want to
have to dismiss things particularly
because it's release notes here strongly
suggested if I get an update at some
point after I've got this installed this
is going to come up again and again for
most users you can display this
information on Google Play otherwise
users don't care they assume that you're
going to fix bugs and those sorts of
things if they're really interested to
see if a specific bug has been fixed
they can do that on the Google Play
listing within the app itself you want
to make sure they can get from hitting
the button to using the app with as few
steps as possible so I'm not with you on
that right so I actually have a
different opinion one of my favorite
apps gee reader Pro updates maybe once a
month and I really enjoy having their
release notes pop up I have my Google
Play set to auto update so I never
realized when something's getting
updated of course I don't want to be
bothered for minor bug fixes but a lot
of times they'll put in a really cool
new feature and I wouldn't know whether
to try that feature I wouldn't know how
to try that major that's the purpose the
keys that compromise of making sure that
you only displayed if there are
significant fixes which people all
significant new features that people may
want to take advantage exactly and
certainly it displaying of it the first
time you launch the app seems a little
odd hmm I mean you had ladies or maybe
yeah you've had to install it at some
point from somewhere so you likely it is
you know what the app currently does app
itself looks really nice I really quite
like the minimalist approach here
they've got a nice view pager
implementation for being able to switch
between the current temperature 48-hour
detailed view and long-range forecast
which is which is nice again you can
have multiple locations again here
there's no obvious way to add locations
I'm looking for a plus button here yeah
really easy you know what I would also
accept is a magnifying glass here
because such that tells me you know
whatever is in the area up here at the
top of the screen is probably what that
search is gonna do I think this place's
icon will actually take the same thing
and it takes us to basically we were
expecting so the ability to add manually
or and I'm guessing this is gonna take
you to your map now we don't have the
correct version of Google Play services
installed here because it's a specially
specially flash device but nonetheless
that will take you to the map and give
you exactly what you're hoping for yeah
so a few more button presses that I
would have hoped and also a little bit
more tricky than I would have hoped I
saw that plus button and instinctively
pressed it and then was disappointed
that there was no map but I then I saw
the map button oh that's how you do it
exactly could be a little more intuitive
otherwise it's really nice and simple
and I think that's you know the main
takeaway here it's it's immediately
obvious all the key information is right
there on the page when you first start
up the app and everything else is just a
swipe away
there's no refresh on the main screen
but it is hidden away here in the
overflow menu if you desperately want to
know whether the weather has changed
significantly in the last 30 seconds now
one of the things that this app really
wins out is widgets they have several
different widgets nice and I really
enjoyed their widget setup prices I have
a couple beats with it but in general I
think that they've provided the widgets
that I want and let's just scroll over
to that so that's a yeah oh yes
and when I place it I get this widget
configuration which shows me the widget
against my wallpaper so exactly how it's
going to appear and that's great because
you know on my personal phone I've got a
photo of my family and of course it can
be really difficult to to get a
wallpaper that looks good and we just
look good with that now one thing I love
about this is that I can set the
transparency no nice on the widget and
then see a preview of it that's very
tiny my only quibble is I would love for
that to not be a dialog so that I could
see the preview at the same time that
I'm picking the transparency instead of
right after yeah minor point it would
make a big difference
it's definitely make a big difference
that's a really nice feature and all
right one more except I don't know how
to get back to their winning figuration
it's generally not an easy thing to do I
think you have to add a new yes well per
widget I will simply mention that they
also have I think nine or ten different
skins that you can put on the widget
going from this or a minimalist look
here all the way up to photorealistic
clouds and sunshine in fact not just
sunshine but an actual from space photo
of the Sun which looks a little bit
frightening it's kind of nice and
they've even got the rich notifications
here as well which do in fact show you
the time sorry the current temperature
up on the on the status bars will be
small you can it is you can adjust what
it shows but I love having the
temperature there because it makes me
feel like I'm in my luxury automobile so
we should move on we've spent a lot of
time on the first step already so we're
running out of time but we'll just make
a quick note of the fact that they have
this ability to upgrade to pro to remove
ads and support development on the
bottom it's actually quite a nice
treatment it follows with the general
design aesthetic ear so it doesn't feel
too aggressive and if we follow that
through it goes to Google Play to allow
you to buy a key so they've used a key
approach here one alternative which
might be a little bit less intrusive for
users is to use in-app billing to do an
upgrade that would really prefer that
and I'll tell you why because the in-app
billing will follow the users account
you don't have to have two apps the one
thing that's nice about having a pro
version and a free version is that the
free version can ask for the permissions
necessary for ad networks and you don't
have to add that to the pro version but
I feel like the key policy here is is
the worst of both worlds the original
app has to ask for all of the
permissions that the free version needs
and yet it isn't as easy to purchase as
an in-app purchase what
exactly so it may be something worth
looking at we have in a billing version
three now available which makes it a lot
simpler than previous versions so it's
definitely something you want to
investigate and help your monetization
efforts well a step we want to look at
we want to give Ian a chance to to give
us some more deep dive information on
that map view but before we do possibly
one of my favorite apps from today
should I wear pants today see and I
looked at this and I thought wow this
has to be a British app and then I
remembered that no in Britain pants made
something yeah so what about us very
different app but you know you've all
football soccer and soccer football now
we use the American you saw hands yeah
and you said it's a pants and soccer at
the same and especially as they are it
exactly it's like in in both countries
it's yeah well in all countries it's
inappropriate to play soccer in just
your pants but nonetheless we have a
look at the at the feature graphic it's
actually pretty nice I'm not sure that
it quite works as an icon it gets a
little bit too crowded yeah you want to
take that same idea and perhaps stylize
it a little so that you've got a pair of
pants or trousers I'd like to say in the
UK with a question mark but actually
having that photorealistic image of the
cutoff car goes doesn't work quite so
well when you go to really it doesn't
really work on exactly what looks great
on the feature graphic but maybe want to
reconsider on you know what adobe
illustrator can vectorize that for you
and heartbeat swimming very nice so I do
like the fact that they haven't stuck it
on a square rounded back a trouser thank
you for that switch to the giant phone
and and we'll fire up the app and again
if they've actually got to it's a really
nice really straightforward UI which
just looks up what the current
temperature is and suggests what you
should wear but it looks like today
Rachel you will be wearing a blouse and
a pair of hot pants that's right so uh
Friday yep you're able to scroll through
here and see what you want to wear today
tomorrow now we are in Northern
California so it is basically going to
be the exact same thing yeah between now
and I'm gonna say April of next year I'm
pretty hard to say but it's actually
really nice he still does give you the
temperature
current location at the bottom so that
you can confirm whether or not this is
stuff that you want and it does have the
the very important flip-flop report
yes.can you wear flip-flops today this
is where the rain last night this is
what people are asking now most of the
magic actually happens within the
preferences now the good news here is
that it does default the things which
are reasonably sensible so you start up
the app straightaway and you get what it
does you either find it amusing and kind
of cool or you're like yeah maybe not
but here you get to go through and
really add all this customization so you
can basically set at what temperature
your cutoff is to be able to wear
cut-offs so on and so forth you can just
like your gender you can select your
temperature units you can choose to add
a little bit of swagger to your look
sunglasses at night if that's your thing
and all of this sort of stuff then just
goes through to the modeling IDs pops on
day today it kind of yeah we're showing
our rage but nonetheless so we really
like this I think this is really clever
this is one of those apps which i think
of as being a little bit magic in that
it it does something which brings a
smile to your face it has that looses
that response where you like okay that's
kind of cool and really my only quibble
is that the the overall skin is so dark
that I thought it was disabled and then
I realize it's not disabled is this
apparently was drawn by the same guy
that does this series of unfortunate
events folks so yeah you may want to
bump up the contrast just a little add a
little bit more color just so you can
see what's going on but I mean these are
real knit picks this is a really clever
little app that's really imaginative so
uh nicely done
it could be a widget it could be a
widget that's true yeah we've actually
been really good with it yeah I like
that so with that in mind we've got a
few minutes left
ian has some tips for drawing things in
GL yeah well I was intrigued by a
weather bombs map and I thought well you
know not only is it pretty but it's also
kind of fast and so I decided to look
into it a little more with GL traceview
and I found some interesting things that
we don't have a ton of time but I'm just
gonna look a little bit over what what
weather bomb does of course
this is ratos a time to you know move
just be there okay there we go all right
we try and we try it okay now when you
open up GL trace view on this app the
first thing you're gonna see is this
frame over here that's actually
everything but the map and the reason is
that the frame is being drawn in in a GL
surface view and the way this works is
there is a windowing system in Android
just like there isn't any other you know
modern operating system you don't really
use it very often because everything's
done with activities but in this case
what we have is a view here that's going
to actually I get a hole punched in it
in other words part it's gonna be
transparent there's gonna be a window
underneath it which is actually showing
the map now this area here is being
drawn in a second context so it's
important to set your context right up
here ah there we go a little button
there and so that's context one and
let's see how they draw the map so the
first draw call just draws the map and
you can see it's about six triangles I
don't even know why it's six could be
two next thing that's gonna get drawn is
the actual map now this is what or I'm
sorry the actual overlay this is what
made me intrigued because if you look at
some of these you can see that there's
some interesting artifacts that are
basically coming out of the process of
coloring this and if you've worked much
with GL you probably know exactly what's
going on already what's going on is the
author is overlaid a fine mesh over the
top of this texture that contains the
map and then used vertex coloring on
each piece of that mesh I eat vertex is
actually using a lookup to find now
vertex coloring I actually is slightly
wrong we're doing a per vertex a text
cord into this essentially
one dimensional texture that takes us
all the way from the deep purple up to
the the bright red and that's our color
code for whatever it is we're looking at
in this case rainfall so that's going to
be the next step is drawing that overlay
now immediately this sort of set off
alarm bells in my head because I thought
well you're you've just overwritten a
huge number of pixels is all of this
area and this is especially important
when you're looking at some of the other
rainfalls you know in areas of the world
where it rains more so all of these
areas are actually not being blended at
all they're simply replacing pixels that
were there but yeah that's not a huge
deal and in fact it's not anywhere close
to being the most expensive thing that
this that this view does but if you want
to save a few cycles on your GPU you may
want to remember draw front to back now
you'll have one objection if if you're
the author of this program probably tell
me that I can't draw front to back
because I'm blending and that is true
that does introduce some some issues but
you could actually eliminate a lot of
overdraw by perhaps stenciling out the
areas that have rainfall or have data on
them but as I said a really minor point
and the only reason I really bring it up
is because there's a lot of apps that
have significantly more overdraw than
this and still draw everything back to
front and that's a real problem you want
to draw front to back so that you can
take care take advantage of Z rejection
now here's step three a little hard to
see what they've done here but step
three is actually drawing the tiny
little dot that tells me where I am and
step four puts a little white square
inside that don't know if you can see
that or not
so anyway not a big deal where is the
performance loss coming from oh I'm
sorry did I say performance loss I also
said that this map draw is really fast
yes it does but how long does it take to
draw 17 milliseconds
that's good enough to mostly keep us at
60fps on a very fast device which is
what I tested this on it was in Nexus 7
on a slower device or one that doesn't
have as much memory bandwidth or you
know one that just has a different
performance characteristics you're gonna
run a lot slower it's 17 milliseconds is
really on the edge it's it's actually
just a little less than 60 FPS but
that's the the highest frame time that I
saw so what is eating up all the time
well it's not actually the GPU now you
don't see it in this view because you
have to run systrace to see it but the
GPU overhead on this it's just three to
four milliseconds which isn't bad for
something that's drawing this many
pixels now what's really eating up all
the time
is this over here
one draw call 17 milliseconds okay
that's just one call and it's not even
the one that touches the most pixels
this is the call to draw the overlay so
what is it doing wrong
well the real problem is that it's not
just zooming it's not just drawing these
vertices it's also mem copying them and
that's really where it come where things
get heavy so there's actually two arrays
here that are being set up all right and
then they're being drawn using this GL
draw elements call one of them is
apparently if you look at the contents
probably the weather information itself
the bunch of integers they kind of
cluster in odd ways so that's probably
our weather information that's gonna
vary per frame maybe not enough to
justify redoing it every frame but yeah
but the next one which is even larger is
a bunch of floats that are probably
never gonna vary because these are all
the vertices that go into this mesh and
there's no real reason to change those
ever
even if you're zooming the map in and
out you can just change the projection
on those so why are we sending them
every frame
there's no reason those should go in a
vertex buffer object so I think we'll go
ahead and sum up now the there's nothing
wrong with this app but it's skirting
the edge of going from buttery to janky
and with just a few very very slight
changes it could be far into buttery
territory all right let's go ahead and
take a closer look at next today's apps
talk about our next steps Android and to
do that we're going to pass them through
each of these checklists so we can
already see that there's a little bit of
work needs to be done on a few of these
apps we haven't had a chance yet to look
at them on tablet so I'm hoping there's
a great tablet experience particularly
for weather bomb which looks like it
could be a really great immersive sort
of weather exploration tool oh yeah so
we're going to go through and have a
look at how each of those things go and
then I'm gonna use my mind to change the
slide uh-huh until then you can find our
pure Android collection at bitly slash
pure Android and you can nominate your
apps for consideration by adding it to
our Trello page you can find that by
searching for app clinic Trello
we're gonna be next back next week
looking at kid mote apps which i think
is a topic of particular interest for
yourself indeed I will be showing lots
of cute pictures of my baby daughter but
it's tuned in anyway because we'll also
be covering apps and some interesting
things that you need to keep in mind
when you're developing apps for children
especially kid mode lock screens
absolutely so I tuned in for that and
also tune in next Tuesday for Android
design in action and until next week we
are the eye in the sky looking at you
and we can read your mind see you all
next week</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>