<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Notifications with Direct Reply (Android Development Patterns S3 Ep 4) | Coder Coacher - Coaching Coders</title><meta content="Notifications with Direct Reply (Android Development Patterns S3 Ep 4) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Notifications with Direct Reply (Android Development Patterns S3 Ep 4)</b></h2><h5 class="post__date">2016-07-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Zg4v9G-lku8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">how many steps should be between
receiving a notification and acting on
it but notification actions were
introduced in jellybean this number
dropped to one just tap an action right
there direct reply seeks to make it just
as easy to receive text input from the
user right inline in the notification
this involves super power and one or
more of the actions you add to your
notification with a remote input this is
how the system knows to ask for input
from the user and then forward it on to
your app this is actually the exact same
API used to add voice input to your
notifications on Android wear but is now
available on phones and tablets so we'll
have a notification with an action with
a remote input the remote input is what
stores information like the hint text
the text that appears before the user
types anything in and the key a unique
string used to later retrieve what the
user typed in the action here is pretty
standard of course we'll want to use add
remote input to add our remote input
object
there's also a set aloud generated
replies method if you want to enable
smart reply on Android wear 2.0 watches
well we are trying to make things easy
for users right totally worth enabling
there is one other thing we need to be
aware of the pending intent we're
passing in here
turns out what kind of pending intent
you pass in matters a lot for direct
reply the system is doing the UI portion
for us it's using a service or broadcast
receiver is exactly what we need this
also allows it to work even when the
device is locked awesome but on devices
that don't support direct reply you need
to start your own UI namely an activity
avoid trying to start an activity from a
service or broadcast receiver pending
intent the notification shade won't
automatically dismiss and users will
need to manually unlock the lock device
leaving users unsure if anything
actually happened so we'll want to use
an activity on marshmallow and lower
devices and the service or broadcast
receiver for our new direct reply
supported
Isis now onto the notification itself
the best part direct reply doesn't care
about your notification at all as long
as you add the action you're good to go
of course we did build a fancy messaging
style so if you're a messaging app these
two go perfectly together magical so
let's say we're ready to receive our
reply and chosen a broadcast receiver
appropriate if we're okay with only
using the main thread we can then use
codes such as this to extract the text
from the intent passed in you'll note we
use remote input get results from intent
to get a bundle and then use that key we
pass into the remote input here to
retrieve the text of course if you stop
here you'll notice your remote input
just keeps on spinning forever so
there's one last step updating your
notification updating the notification
is how you tell the user the texts been
saved or the message has been sent
for example if you're using messaging
style you just append your message to
the style and rebuild your notifications
for other styles you can and should use
set remote input history which will
append the message or messages to the
bottom of the notification now keep in
mind I said update mouthed cancel you
want to tell the user it succeeded
rather than leaving them hanging so add
a remote input to your notifications
actions to enable direct reply check out
all the links in the description for
more information on how it all works as
you continue to build better apps</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>