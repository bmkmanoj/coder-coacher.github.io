<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Keyframe Animations with ConstraintLayout and ConstraintSet | Coder Coacher - Coaching Coders</title><meta content="Keyframe Animations with ConstraintLayout and ConstraintSet - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Keyframe Animations with ConstraintLayout and ConstraintSet</b></h2><h5 class="post__date">2017-12-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/OHcfs6rStRo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">SEAN MCQUILLAN: Who doesn't love
building beautiful animations?
They make our apps polished,
improve engagement,
and more importantly,
they're fun to build.
With ConstraintSets
and ConstraintLayout,
building fluid animations is
easier than ever on Android.
By specifying layouts
for the start and end
of an animation
as keyframes, you
can create complex animations
with four lines of code.
For this animation,
our first layout file
pushes the text views
offscreen and expands the image
to cover the entire screen.
All views are styled
in the first layout,
with text sizes,
fonts, and colors
set to their final values.
A second XML file holds the
final element positions.
The title, credits,
and description
are onscreen in this keyframe.
After loading it, the
constraints in this layout
apply to the view hierarchy.
Next, Transition Manager
calculates the paths
between the old keyframe
and the new one,
building a fluid animation.
All that in four lines of
code, and no custom map?
How does it work?
First, create a
ConstraintSet and load it
from our second
layout, which will
serve as the second keyframe.
A constraint set contains the
constraints, sizes, and margins
from the layout
and is much cheaper
to build than inflating
a full layout.
Since only the position
information is loaded,
you don't need to keep
all of the other styling
in sync between the layouts.
The colors and text sizes from
the first layout will be used.
Next, apply the ConstraintSet
to the displayed view.
ConstraintLayout immediately
calculates the new position
for every child element.
To make it animate,
let Transition Manager
start a delayed transition.
And that's it.
You're ready to apply
ConstraintSet animations
to your code.
Of course, to use
ConstraintSets,
you'll need to use
ConstraintLayout.
Check out our earlier
DevByte on ConstraintLayout
and the code lab which
covers new features
in ConstraintLayout 1.1.
ConstraintLayout and
ConstraintSet support API 9,
so they'll work on all
your supported devices.
Transition Manager is
available at API 14
in the support library.
If you support older devices,
your UI isn't affected.
Users just won't
get the animations.
Now, you don't need to
duplicate the layout file.
And for simple animations, you
may want to build them in code.
If you just want to change
the bounds of a single view,
ConstraintLayout will
adjust the other views
according to the constraints.
In this example, we're changing
the height of the title,
and the credits position
animates smoothly
as the title grows and shrinks.
This shows another feature of
ConstraintLayout animations.
You get reverse
animations without having
to do reverse math.
By default, Transition
Manager will
move and resize along a straight
path with linear acceleration.
To make your animations
pop even more,
specify custom transitions.
Here's an example using
a different interpolator
to add a bold effect
to the animation.
You customize the animation
by passing a custom transition
to Transition Manager.
It's very easy to
build fluid animations
using ConstraintLayout
and ConstraintSets.
I can't wait to
see what you build.
Send me a GIF of your
animations on Twitter.
Thanks, for watching.
See you next time.
[MUSIC PLAYING]
</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>