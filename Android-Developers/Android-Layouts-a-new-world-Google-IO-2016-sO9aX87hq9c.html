<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Layouts: a new world - Google I/O 2016 | Coder Coacher - Coaching Coders</title><meta content="Android Layouts: a new world - Google I/O 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Layouts: a new world - Google I/O 2016</b></h2><h5 class="post__date">2016-05-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sO9aX87hq9c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Nicola and this is John and
we are going to talk to you today about
constantly out a new layout for great
what's layout all about basically you
need to position with just on the screen
based on something that a UI designer
might have given you for example so you
have to lay them out in some particular
fashion on a screen but what happens if
you have another screen that you have to
layout if they're fixed position on the
new screen it's not going to look right
things are too far away from the edges
things like that
now how many screens would you actually
have to do if you had to do every screen
out there 5400 is a rough number that's
90 common screen sizes 30 languages
landscape portrait many many devices and
will take you a really long time that's
why from the very beginning Android had
layouts they're able to adjust sizes and
position things dynamically for you
there are a bunch of different layouts
you can talk about you can divide them
up into two basic categories simple
layouts and complex layouts the classic
simple layout is linear layout
essentially put your widgets inside of
it and you have a row or column of
buttons or widgets now you can build
very complex layouts with just using
linear layout by doing deep nesting but
deep nesting it has its performance
problems
on the other hand if you use a complex
layout like relative layout or grid
layout it'll create shallow hierarchies
but without a good green builder to use
them it's actually very difficult to
keep them stable we need something new
to help us with that stuff but that's
why and so that's why we are up we are
no presenting you construct layouts so
it's available on the new Android studio
2.2 preview in the canary build and
basically it's a small and vendor
library it's actually backward
compatible back to Gingerbread to a PLN
9 that means nearly everything out there
and it's this design to reduce dpr keys
and it's designed from the very
beginning to walk within studio and now
if you if you have started to look a
little bit at constantly at already it
might look a little bit like relative
layout right to set relations between
different widgets and you know that
seems pretty similar to what constant
Clio does well sure but actually
constantly does what you got wet
relative layer does but more and as it
is more expressive you should be able to
reduce nesting and as John said nesting
in general will not be a great thing for
your performances it's also packaged as
an unbundled library which means that
not only can you use it from day one but
we will also be able to regularly
iterate on it and push new versions and
that new features and you'll be able to
get them very instantly it's also
extensible in its design which you don't
get too much about apart that from us
that allows us to easily add new
features and finally it comes with great
UI builder as I said that was really
created as the other same team actually
the same team worked on both the
constraint layout and the UI builder
and I really try to make a great builder
that is flexible and easy to use and
really try to help you so when we
started to think about creating a new
layout system because we're not super
happy with the current design we we just
started with something very generic okay
we need an equation solver and on top of
that we are the questions but the
problem with that is with the equation
and look at a stop there right could
have said you have a question that's
great just a try question put your
layout and that's it but the issue with
that is it's actually very easy we found
out to create a system that are not only
complex may not perform very well and
also can even be unpredicted in
unpredictable in the way they react so
that's why we built on top of the
equation system but very simple but
pretty expressive system of constraints
and that allows us to control all the
the type of constraints and the type of
equation that runs and you know unsure
better performances on top of that we
then build the UI builder plus inference
tools to create the constraint for you
and a bunch of other tools that we will
demo later so very quick overview of the
constraint model if you want to create a
connection you just drag from an anchor
to a target and the other thing you can
do is if you simply drag that with yet
you can actually specify a mountain and
that's all a connection is it's you know
saying take one side move it to a target
and possibly keep a specific gap and you
can apply those connections across top
bottom left right or start and end for a
right-to-left languages we also support
base line and you know at first note
that that's it the other thing that is
different and particularly called
relative to relative layout is what
happen if you actually set the
connection on both and both on the left
and on the right and if you have a
widget that actually is fixed size that
sounds impossible right I mean the left
sides
cannot be you know matching its
constraint at the same time as the
right-side master constraint if the
widget does not recite so what we do in
that case is that we just Center it and
because it's centered and we can tweak
the results we let you decide how much
bias you want toward one side or the
other and you can also do that directly
into the UI builder just drag the
element or use the inspector another
option that you provide is well if what
if you want to resize widget and in that
case you know it's think about it like
match parent and actually we do not
support match parent but what we do
support it's something that's more like
much constraint and what that will do is
resize the widget so that the constraint
that you define define the size of the
region and also important aspect that
that is often you know that often comes
when you try to do complex subjects you
are in your UI is what happen when you
want the widget to become I mean the
first case is okay widget is invisible
you know if you do that nothing changes
that's easy just not drawn on screen but
for gun what we do is we collapse the
widget that you mapped as gun as a
single point and we discard it merchants
so it completely disappear but the
actual yaki of constraint still applies
and so that allows you to have a lot
more reactive user user interface
behavior all right some of you might you
know have you know wondered about what
are the attributes and yes we did build
a great UI builder and we do think that
that UI builder will really help you
create those UIs and really you know
make your life easy but if you do want
to use you know the XML or the
programming or do we do the UI
programmatically you can still do it
it's a normal to do group you see the
backs s to everything so if you look at
those attributes
it sounds like wow there is a lot but
actually not so much if if you look at
those those ones are the usual ones you
know just defining the wave the size the
text size and stuff like that nothing to
do reverse ready then you get a bunch of
attributes and so we can discuss then we
got a bunch of attributes that actually
as the prefix indicates for the tool
it's just for Andres to do if you do
things programmatically you don't care
about that at all and in fact when you
push to a device those attributes get
stripped out
so really the one we care about are
those four in the middle and really on
those four in the middle the matching
start on top you probably know them
already so we only have two more
tributes to just say you have a
constraint on the left and a constraint
on the top so it's actually pretty
tractable that said we really think that
the UI builder is great and in fact if
you have issues with the UI builder if
it does not work for your workflow tell
us we really want to hear from you
because we really want to make your life
easy all right let's talk about the
layout editor itself so it's to editing
right we can edit XML and see the
results directly live or visvasa you can
you know it did the UI and that will
directly translate to the XML you can
have both views at the same time or you
can stay in the design mode it's your
integrated into studio and we really try
to make it so that there is an immediate
feedback and so it's really easy to use
things get predictable and you're not
surprised like you might have been in
the past for relativelayout
with whatever the layout decide wherever
wherever I decide to put the widgets and
it's an active development we just
released it into point to preview it's
in alpha we definitely welcome the
report all right you want to talk about
okay what is nice things that the new
layout editor has is the inspector this
gives you a codified view of a single
widget that is you've selected the
arrows on the left and right it lines on
the left and right and up and down show
you which which sides have been
constrained the numbers show you the
margins that have been set and you can
actually just move your mouse over them
and edit the margins directly this slide
has allow you to adjust by us if if
you're connected on both sides so you
have a bias the little arrows inside
show whether your
app content or spread or fixed-width
okay let's go to the demo now and on the
laptop alright so you can see the that's
to do right and if you have played with
it already that should be familiar and
you can see here just it just shows the
constraint layout and I can switch the
design mode you know and we have those
two mode we have the design mode where
it shows what things look like on the
device you know and you have the
blueprint mud and you can also have both
of them at the same time if you prefer
so why did we do the blueprint man well
simply because sometimes what you show
in terms of layout doesn't actually
appear in the design surface like for
example if you look at a button the
button shows smaller than what its
actual bounds are so the blueprint mud
think about it as it's an x-ray of your
current layout and only show you the
information that pertains to the layout
so with concert layout you can just go
and drag wherever you want and you do
have some guidelines to help you
position it amounts you know we follow
the material design guideline for
instance and it's very easy to use you
can without doing any constraints so far
you can still move it wherever you want
it's really good when you are simply
playing around or trying to design your
UI testing to see all things really fit
so if you create the connection we just
animate directly and you can see that if
I don't create the connection we still
show you what will happen if you release
and create the connection and that
actually works with the entire system so
if I drag a button and I touch this
button here you know and you know I kill
this connection everything moves
together so and you can see here it's
only only constrained or isn't Ellie so
vertically nothing changes and I can
create a connection manually like that
you can destroy all the connection by
clicking this and just align your things
and you know create those connection
there are two different modes to create
connections one is this manual one and
it
I think it's very important because we
want you to be able to easily tweak the
resulting UI but there is another one
that's a little bit more easy to use in
some cases which is the auto alignment
and if we go on auto a timeout app we go
back on that
so auto alignment works with this icon
here this little u-shaped magnet and
what happens now if that is on is that
if I put my widget on a guide line it
will create those connection and you can
see that it is dismal animation as long
as the animation is not finished I can
still move things around but if I let it
go then the widget will actually be
constrained so if I actually resize ups
there's burg if I resize that and yeah
repaint back but you can see that the
constraint I applied and I think we
talked about the tools now well one more
piece of art to alignment that you might
have forgotten one of the nice things
about art alignment is that when you put
an object like this the fact that you
see the guidelines allows allows you to
connect so as long as you can see the
guidelines you'll be able to let it go
and it'll connect for you so it could be
a quick way especially for very simple
UI is to be built the the next thing I
wanted to show you is what we call our
tools so because we are so much a rich
UI layout type environment we wanted to
add tools that were a lot like the stuff
that you would see in PowerPoint or any
of the Visio any other graphical tools
so at the top you'll see a collection of
of widgets and they work in in sort of
standard ways where me and
the where where they align left right
middle that kind of thing there's a
special mood if you have the the magnet
turned on when you when you issue those
it'll actually create constraints for
you so if you care about having the
constraints very specifically left
aligned you can use this to tell sort of
tell you how would that happen and in
fact it's it's kind of for we we want
the tool to be used we want it to be
using a very flexible way some people
might just ask the goal and just create
the constraints or some people might
just prefer to lay out do we jet look oh
yeah down in a nice place and then build
the constraints it's really up to you so
it helps work in a lot of situations
like this way you just aligning figs
putting things together like this
setting up again you can see fairly
quickly I can come up with a reasonable
amount of alignment and packing of
things and ways that we would like to
use it okay for the next piece I want to
let's go to the next one for the next
piece I wanted to talk to you about
inference now inferences it's a fairly
complicated system once ago okay you're
scaring me there what we're doing it's
just one button the the little lightbulb
button don't press it yet what we do
when you press that button we calculate
the probability of all possible
connections and then we walk through a
series of heuristic lis deveined
algorithms which will make connections
for you by the end of it all things will
be properly constrained there are a
couple of things it's a bit magical but
they're a couple of things to remember
about it three things to remember
you it will never really move a widget
on you it'll apply constraints wherever
you've left your app your widgets
beforehand so it's not going to suddenly
push a widget off off the screen or
something like that it's it will now it
will do some small changes whenever
there is an a trying to do an alignment
of things but that's ok by the end of
the past all of these things are
guaranteed to be constrained if you have
a constraint beforehand it will honor
those constraints so it will never
destroy an existing constraint that
you've created so you can create
constraints and then let it finish it
finish the job for you and in fact in
the demos you saw a lot of them were
some manually created constraints
sometimes it will do auto constraint go
ahead Nicholas press the button let's
see what happens so there's it it made a
bunch of constraints it's aligned
everything now resize the widget resizes
the screen so that was done just by
drawing out the widgets in the right
space and it can align them if you
didn't like a particular constraint it
made you could change it yourself or you
can add a new constraint add one yeah so
for example I can still go and just
destroy those connections and say
actually I really wanted that one to be
connected on the top and actually here
you can see that we have a couple of
mods to create those connection so by
default it creates with the imagine you
indicate in the toolbar on top but if I
press ctrl it actually will create an R
Gean with the current distance and
sometimes that's kind of nice because if
you just want to create them out the
constraint that you actually happy with
the current way the widget opposition
that's a time-saver
so another thing you can do is if you've
already laid out and you added a bunch
of constraints and stuff but you needed
one more piece of you
I on the system I add some new piece of
UI in there nah
yeah that's okay now you can just press
the button again yeah and as you saw
when I dragged it because the
auto-connect was on ER
it automatically tried to create those
connections but you can also do it with
auto infer and you see it added that all
the constraints need to fill in that
other widget and you can see that the
constraint that it created was not
exactly the same as giotto connection
one and that's actually because auto
connect only look at the elements that
are close to you so that's why it shows
you those guidelines and those
guidelines if you drop the widget at
this moment will create the constraints
where the guidelines originate from the
auto insurance on the other hand look at
the big picture yeah so it might pick
things from based on alignments the
probabilities are fairly complicated and
then in the future we try to do like
more advanced algorithms the in there
okay but you know and I want to repeat
what John said earlier and it's very
important the auto interference is not
going to move things around it will
actually very hard try to keep the
widget where you put them so that means
that if you are not happy with the
result you can still go back and edit it
and you know it also tries to make the
connection that makes sense that might
not be the connection you had in mind
but that's the connection that makes
sense
when you look at the entire system we it
doesn't go crazy that's what I'm trying
to say and that's why also it's
important to have those manual
capabilities to edit the constraints
because we want we see it mother you
know kind of a symbiotic relation
between you and the tool you know the
tool will help you might get you there
at 90% of the way save you a ton of time
and you can just focus on what's left
and even if it doesn't work out you can
always undo yeah so all right so let's
let's simply build some things you know
come on like a
so if I want to create a role like that
I can start with I can use the tools as
well you know I can if I just want to
Center I can just do that and you know
if I if I look at the recycle view now
in the you know it appears here but of
course it's taking you know all the
space so if I'm at now the constraint
play out to be wrap content you know you
can see up there is a refresh right and
you can see how it's it's just integrate
like that into recycled view and you can
just continue and add more stuff you
know and that's it you know you got you
can easily build your rows so it doesn't
automatically have to work with the
entire UI you know you can use it of
course for your menu I but you can use
it for something as simple as a row like
that it is just a normal do group and
you can see the result and let me just
create just show you quickly when you
create a new layout file so you can
Institute your preview to point to let's
see demo
you just go here and type constraint
layout and what that will do it will
create the file it actually will
automatically add if that was not the
case on the dependency to the support
library that that contains constraint
layout and you can then build something
and you can still use the design mode if
you if you actually prefer the design
mode you know that still works fine we
just in that case show the different
constraint as an overlay on top of the
system or you can just you know switch
to blueprint I tend to prefer blue pin
because it just makes things easier for
me when I'm working on layout but the
design mount is really useful to show
you how things look you know so if you
want to just build like a typical dialog
like that you know you could have
something up just like that and let's
say a couple of let's actually use email
you know
and just plain text here up and then you
can see that up the connection was here
up like that and that's it and we were
doing anything else I've got my dialogue
and you can see it's resize up if the
rate want to repaint now it doesn't want
to repaint up sorry
it might want to in there so and you can
still go back kill all the constraints
do the inference and you can see that
the inference does a pretty good job as
well and you can not hear that we
constraint on the baseline for instance
and I think that's about it for the demo
so we can go back to the slides alright
so just to summarize a little bit what
we showed you so there is a new
constraint there is a new layout called
constant layout it's a small unbundled
library it's about hundred kilobytes
because it's unbundle we we think we'll
be able to move fast and that new
features it's really built on top of a
flexible base and what what's good for
us is that we can control all fast we
can we can move on the development and
to make sure that the performances will
sustain it's compatible with mostly
hurting out there and it's in active
development I want to you know invest at
this point we just redid it this week
it's coming you know just as an alpha
preview we definitely encourage you to
check it out check the UI builder and
you know there's certainly some bugs
will fix them but the reason we actually
announced it at i/o was because we think
it's it's you know really enough to
gather some feedback and actually
something we are keen on we want to hear
from you our job is to make your life
easier and undo UI builder as you saw
the UI builder is you know kind of life
try to automatically react to your
actions to help you
to give you like some guidance and you
know you can use the inference to create
connections to reset view time when you
still have the manual Edition you can
still go back and just you know idiot
things and same as the constraint layout
itself it's in active development it's
the same thing that works on both which
is why they are really well integrated
together so you know all that I said for
the constant layout also applies
definitely for the UI builder and by the
way on Android studio 2.2 preview there
is this new UI builder for constraint
layouts but there's also a new UI
builder for the ozone layer that you
already use in your applications and if
you use the the UI builder that was
there in previous version of studio that
new UI builder is definitely a step up
and again for for it as well it will you
know get better or over time all right
let me talk briefly about what we have
in mind for the next versions so if you
remember the slide from earlier about
the solver and the equation and the
constraints clearly we are going to
focus on probably in the short end as
mostly what should be working on
improving the performance we have a ton
of optimization that we haven't obvious
ones that we haven't yet done so we
really want to focus on that for the
equation themselves that we generate
from the constraint we have some
interesting ideas on how to
automatically take them and simplify
them and optimize them but a follow
constraint there is there is couple of
things that we can do and actually we
could have demoed it but but in addition
to those basic constraints that we
demonstrated we have the concept of
helpers and one of the helper that we
have in the preview actually is the
guideline object so you can create a
guideline you know think of Photoshop
guideline something like that something
that your designer probably walk with
and you can just set a guideline make it
relative to one side or the other or
percentage of the dimension of the the
container and simply constraint your
widget to that guideline
the interesting thing though is that
this guideline is not a new layout this
is just an object that we use to
generate the right equations and we have
a ton of ideas of all the type of
virtual object like that that will help
you create more advanced layouts
another thing we that did not make the
cut for i/o but that we we know is
important is that all we've talked so
find that with that we demo'd lets you
create constraints position constraints
from one to one you know of course it
can be from one widget to many widgets
for the two axes but it's going to be
from one widget to to something else and
some of ten you want to actually
consider position in terms of grouping
you know you want to say yeah sure but I
want this group of stuff to be
vertically positioned and we have a
concept of virtual containers and
similarly to the guidelines those things
don't have to end up in the view
hierarchy so once we create them they
will actually appear in the XML as
normal tags so you'll see them but when
we inflate the XML we can then drop them
on the floor and simply use them to
generate the right equations so you
still have the power of using groups
without the implication in terms of the
fury are key you can think of this wall
system as a way of decoupling the layout
from the view hierarchy and the shadow
world view are key the better in terms
of performances but also other things
one particular thing that I'm really
keen on exploring is if you have a very
shadow of your ERP that should make your
life a ton easier dealing with
animations I think if you try to do
animation with very deep nested
hierarchies it can be very annoying
because something that is read deep down
in the Yaqui you wanted to maybe move
somewhere else and it's very difficult
to do right now but if you actually do
not have an actual view larkey and if
everything is kind of flat it's much
nicer and of course for the interference
and tooling we have some interesting
ideas on ought to let you import a
setting into Android studio
and the concept is simply we want you to
you want to give you a step up you know
don't start from scratch if your
designer gives you something maybe there
is something in what you gives you or
she gives you that we can use and
finally and John lineups some things
about that L so the inference and tools
are a combination that we see a lot of
future of making your life very easy so
one of the things we want to do is is
back the probability by in by a machine
learning so look at what layouts are out
there what are all the Google layouts
that they've created and see how they
are working and trying to learn from
them tools to help you more easily
beautify and organize and arrange your
your widgets on the screen more dynamics
associated with when I put things on the
screen it'll automatically infer
containers at virtual containers and
guidelines and things like that as well
so there's a lot of room to grow in that
area as well all right thank you for you
at enhance check out the code lab
there's a great code lab that lets you
walk you through the first steps in
using constraint layout don't note the
preview beyond the constraint that the
new you're a builder there's a ton of
things that you saw in the previous
session suppose to do file bugs you can
use the tool studio at Agra and we can
take some Q&amp;amp;A now and there are some
mics that you can name up to if you want
okay thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>