<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Developer Office Hours: The Sensitive Side of Android | Coder Coacher - Coaching Coders</title><meta content="Android Developer Office Hours: The Sensitive Side of Android - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Android Developer Office Hours: The Sensitive Side of Android</b></h2><h5 class="post__date">2012-09-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MT2U-39lYNs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so again to Android developer office
hours my name is Joe Malin I'll be a
moderator today next to me is Trevor
John's and also with me is Alex Lucas we
have Tim Bray also here and Daniel Pham
is our engineer there's Tim so without
further ado let's get started with
questions from Google moderator we have
several questions on the order of
sensors are fragmentation I'll read them
and then let Tim and others answer can
some sense are testing the introduced on
devices that Google approves by allowing
the Play Store on the device this would
ensure more standardized behavior more
many LG and Samsung accelerometers
return the same invalid value and screen
is off and there's other questions on to
that regard as well somebody want to
answer yep yep okay fair enough so to
start with it's even worse than you
think it is because if you look
carefully at the and compatible device
definition it doesn't make sure they
require that an Android device any
sensors at all and one of the reasons
for that is that or anything like that
so it's you're not were Xcode that
depends on sensors you're gonna have to
do some programming and testing to see
if the sensor is there you may even want
to get a little bit more subtle because
people who've done this kind of stuff
have noticed that you're doing motion
related stuff it makes a big difference
whether the phone has an excel because a
gyroscope or not
and that's they better quality data if
there's a gyroscope or some cases you
might even get by engineer on this note
I respond for example now having said
all that what the person who's asking
here yeah yeah something like that
none are you one of the people can see
so no doesn't look like it
not anymore as I can tell nope okay
somebody else just doing anyhow so what
yan was really driving it was you know
should we try and crack down on apparent
incompatibility between model next and
current dependability test suite does
have some tests but I've tried on a few
devices and they're actually pretty good
for accelerometer and gyroscope in
particular when I use them I noticed
some little quirks that in certain
particular hardware but but not that
many there's also some basic types of
the API do to check so let me say a few
things in general first of all
empirically I see that there's quite a
few decent apps out there that make
excellent use of the other sensors in
particularly accelerometer and the
gyroscope so so whereas there are some
compatibility issues here we see that
people have successfully worked around
them for the pitman sauce so so you know
maybe a little harder than we don't like
it to be but you can actually do it
another thing I actually point out is
that the compatibility test suite is one
of the most open sir see parts of
Android the whole setting is open source
it's developed in an openness to
persuade and anybody who observes
something they think is really wonky in
an android device it would be a really
good idea to pull together a sweet eye
test and submit it to the project you
know I suspect you know quite open to
looking at it
the final point somebody made was that
the observed issues where that sense if
we're giving wonky value this when the
screen was tough which means probably
the device is just lying there not doing
anything I hadn't actually noticed that
I looked around I also didn't see
actually any live bugs file on them
perhaps the reason there is that all the
work that I did on exam children was you
know it's coming from the Hangout there
I just want to mute everyone else down
this is a reminder for those of you who
are joining us live on for a second Tim
yeah I just reminder for those of you
who are joining us live please meet your
microphone when you're not speaking
there's a little button in the upper
right hand corner of Google+ go ahead
and hit that otherwise it gets a little
bit hard to hear what people are saying
in here I'm still hearing something yeah
we can go somebody laughing hello here
in the red shirt there all right don't
worry I'm on I'm on it guys do you think
about devices complaints when the thing
is to sleep I saw I can't speak to the
now and I haven't observed that one
there may in fact be bugs there and I'll
tell you I do not look as there are
tests in the CTS so ok I would look at I
would add that if if you are using
sensors and you run into something which
you think is a bug or it is not working
the way you think it should be working
you should file a bug ok
you know not everything that's out there
that you encounter is deliberate so when
in doubt you should file a bug and it's
it's either a bug or it's some aspect of
expected behavior and if it is about we
can get you know to fixing it or
addressing it any other comments
no I think I think that's good all right
let me move to the next question on
moderator unless we have somebody in the
Hangout that wants to ask a question
hmm no we do have a pretty full hangouts
also yeah just a reminder for those of
you who are joining us live you are
welcome to join us via hangout to ask
questions we're here to answer them if
you are joining in via the Hangout we
assume that you are going to ask a
question we only have ten slots at the
time and it looks like it's getting
pretty full so we're gonna ask those ten
of you to actually start asking
questions here in short order otherwise
we'll have to start kicking some of you
off to make room for people who do have
questions that being said the live feed
is available via YouTube as well so that
way everybody who is watching and
doesn't have a question can view us that
way in summary if you want to watch and
um be ready to ask a question if you've
got one go to YouTube we're gonna hang
out if they have a question well hold on
if if you don't have a question right
now go to youtube and you can watch live
then if you've got a question jump into
the Hangout if you're waiting to ask a
question stay in the Hangout right okay
um do we have any questions waiting we
have a chair gonna put them on
momentarily okay all right Jared you're
on go ahead go ahead okay so I'm they
might have I'm working with a whole
bunch of background threads and I'm
starting to really have some issues with
race conditions and trying to figure out
which thread is doing what and that sort
of thing I just started looking at
traceview a couple days ago and it is
incredibly difficult to try and make any
sense of what actually gives me is there
a recommended practice or a different
tool perhaps that might a little more
sense well so traceview is more for
performance optimizations it gives you
an idea of you know when your app is you
know drawing to the screen when it is
actually using CPU things like that it's
not so good at seeing interactions
between three
and really there's not too much this
really to do good job of visualizing
that for you your best tool really there
is the debugger built into your IDE
whether it's eclipse or IntelliJ or
something for using the the Java
debugger on the command line race
conditions are always notoriously
difficult to debug they're always a
little bit painful unfortunately and
that's just the nature of concurrent
programming so I really don't have too
much that's good to say that's gonna
make that really easy for you other than
you know just use a standard debugger
and try and throw things out that way
I assume this is just an ordinary race
condition within your code there's
nothing having to do what's happening is
I have a class that takes messages for
data to post to the database you know in
batches and under certain conditions it
actually slows down the UI resuming
because I'm synchronizing data function
calls and stuff like that okay so well
if it's slowing down the UI your UI
should be on a self-contained UI thread
you shouldn't be doing any data
operations there which it is but I think
that's what happened what's happening is
when it goes to actually write the data
to the database it synchronizes on on
the class and I think that the you I
have had been able to get data from it
got jammed up trying to verify that I
did a ton of research on concurrency a
couple of years ago and a few remarks so
the the the Java model of the currency
which although john andretti carrots is
sort of pessimal it allows for shared
mutable state which makes you know
multi-threaded things really really hard
to think of futz and understand now and
if you start to have like a lot of
different mutexes and so on you're very
likely would end up in a situation where
it's going to become nearly impossible
to understand what's going on so one
thing I would strongly recommend would
be to go go and read a couple of
good short essays on functional
programming which is sort of the
technique we know about to avoid having
to think about the stuff to the extent
that you can make your code typically
functional you dodge all this kind of
stuff I would also go type the name Doug
Lee deep Doug le a into Google and read
a couple of the things that he wrote he
is you know maybe our leading thinker on
how to do this stuff with them sticking
your head up your ass which I'll be down
a few times and probably there's some
really helpful stuff in there one
particular thing I will say is that if
you can go through one of the built-in
things like async task or intentservice
or something like that they are really
really fully debugged on this stuff and
they're less likely to - the - - to
power on your dread pools and then write
you write yourself um I have a question
about this Jared right yeah um which is
you're trying to run multiple threads to
write to the database well specifically
the model is I have a thread that
manages all the access to the database
it's my single connection with the
database uh-huh and it basically in its
run loop it started it checks to see if
there's any pending data - right if
there is a writes it then it sleeps for
a certain amount of time and you know
meanwhile other things can post data end
but there's when it goes to write the
data I had to synchronize on itself
which may actually be where the problem
is hmm but my idea was I I didn't want
it to because there's a lot of data it
suppose it is weather data I don't want
it to start writing and then get an
update halfway through and write stuff
that doesn't correspond to the same
timestamp so I'm trying to figure out it
maybe there's a way that I
read data without synchronizing on it
but write data without that's what I can
grab oh and also I looked and I noticed
that the Android SDK includes that a
Java dot util DUP concurrent class I
think you might be well served by going
and diving into that one and looking
Sydenham it gives you things like spread
pools synchronization and accused that
you know he's also part of the queue and
it's all well well people up to code use
the net that might go on are jarred are
you doing this work right now on any
sync task no the problem I have with
these thing task is because that's all
basically a thread pool
I have other parts that function on the
UI that use async tasks that and it was
interfering with that like if I couldn't
do the database right and maintain at
least I couldn't think of a way of
maintaining the one connection to the
database through an async task and
making sure that all the writing
happened in the background
ah okay probably yeah it's it's a
difficult one to answer because without
knowing more about what exactly you're
trying to do we would write I'm trying
to I mean I could use a content provider
I'm sure that would simplify a lot of
things but I don't actually have me of a
content provider aside from I also make
you feel any better what you're trying
to do is well-known to be a hard thing
yeah well I know I I know that I mean I
originally had programmed in C++ so I
mean it's even worse yeah I was hoping
there might be some sort of tool that
specifically for monitoring threads no
and I don't think a content provider
would help you all that much because um
that's just a lightweight in a lot of
respects it's just a lightweight shell
around the database anyway you'd still
run into the problems on the
basically I tried to implement my own
thread pull around the database and I
probably just didn't do a very good job
of it okay um any other comments or
ideas that we can provide
I think that's covered quite a bit yeah
I'll take a look at the concurrent
classes that sounds like it might be a
good place to start okay yeah thank you
very much for your patience yeah thank
you hmm all right so we have another
user in the Hangout please do I'm
working this party oh I want to bench
date the sensor so little more since
that's basically the topic today so we
were talking about the accelerometer in
particular you're not working in the
background of some devices right so
there's I mean there is a ton of devices
and reports to the surrounding net but
there's also a fairly easy solution of
course on some devices basically restart
accelerometer when you receive a screen
of broadcasts the problem there is or
the question would be is so in some
devices human does not work so if you
hold the partial weight lock on the
device should that let me restart the
accelerometer or not that's a good
question and I don't think the behavior
there is actually specified as part of
the API I suspect what you've probably
found out something that works by chance
but not by design so it's difficult to
say exactly just to be clear when you
say in the background do you mean your
app is no longer in the foreground or do
you mean you've actually shut the phone
completely off so I mean it doesn't even
matter the Epson in the for rather
background right it's basically there's
a service so shouldn't shouldn't make
any difference
you've just because what you notice is
then some phones when you press the
power button right and you turn the
screen off then automatically shuts down
its
as well so what you do in Tbilisi listen
for the screen are broadcast you you
actually need to wait for a couple of
seconds and then restart the
accelerometer right so the expected
behavior or the documented thing would
be even for the wakelock right the
partial way clock should keep the at
least the processor running and I would
expect that by default it will enable
you to do other stuff as well right that
would have been my my expectation as
well yes I'm just it feels like it's not
enabled or it's not like it works by
chance
it feels like it's disabled by design
some of the devices you know the city
doesn't say anything about right now
some system builder deciding to just
turn it off when when the power goes off
because sort of self defense against do
the right thing right yes so what I want
to say it works by chance I'm not saying
that you're running into some scenario
that hasn't been conceived of somewhere
by some engineer it's just not part of
the standard Android design so you know
we specify what things need to look like
at the surface level whether what the
API developers looks like but as far as
how things like device drivers are
implementation are implemented that's a
lot of that is left up to device
manufacturers out of necessity and it's
possible somebody just thought oh well
it's you know leaving the accelerometer
running when the screen is off consumes
a lot of battery power so let's just go
in and terminate in the accelerometer
listeners that are that are waiting and
they probably just you know maybe they
didn't think through the implications of
that or maybe they really don't want you
to do that who knows but any case it's
not that the behavior here isn't
something that we specify in the API I
do agree though that the right thing
probably is to leave the accelerometer
running as long as you hold away clock
so generally speaking when you run into
bugs like this we want to get something
into is into the sea Dee Dee and the CTS
to go and make sure that the behavior is
really well specified and basically that
means filing a bug so if you go to beat
on intercom you know that that's usually
our recommendation open them up a bug
there and if you're really ambitious you
can actually go
so far as to submit a patch since you
bought this up here I'll make sure that
doesn't get fouled for you now which
device in particular were you working
about I have an Excel spreadsheet so I
can send it to you because just
generally do most of them turn off would
be most of them stay upon I would say
it's kind of 50/50 situation yeah
so it works it works I have problems
actually on on a Google device I think
the galaxy asked a little Nexus a
Spartan was problematic in that regard
um what what's the use case I mean I'm
assuming that you want to be able to
control when the accelerator or at least
detect when the accelerators gonna turn
off by saying okay if I have a wakelock
than it shouldn't turn off so what are
you trying to accomplish by this so
here's the the use case right huh I want
a monitor let's say let's pretend I want
to monitor activity during the day right
so I have a service that's in the
background and every time you turn on
screen the accelerometer goes off what
we do here in our case is we acquire a
new way clock and you partial a clock is
it really the pillars that you need to
acquire a new one because the old don't
want to be expires that happens in the
cero devices so you listen for the
screen ah broadcast you acquire a new
way clock the same second you wait for I
think we were waiting for 3 seconds was
the sweet spot and then we go to the
accelerometer and say hey start now and
then it's on in 99.5% of the cases it
actually works with some device yeah
it's I mean I can I can understand why
we would turn off the accelerometer in
viña what I don't understand is this the
next 0.5% of devices which ignored the
way clock the chilli that should allow
you to to wake the the damn
ironically okay so it seems like the if
we were to admit it's a bug it would be
a welcome well characterized but it's
the case square you're trying to turn it
on when them which is yes it sounds like
I mean is it's it's a bug in the sense
that its behavior that's not well
specified so so again this is a really
good candidate for something that we
should include as part of the
compatibility test suite right so if you
since you already have that spreadsheet
there's actually really good data to
pass along to our engineer so we can do
some testing on our end probably the
best thing to do if you if you go to
beat on Android comm just paste in
whatever data you already have there and
then give us the ticket number or the
issue number as a comment in I guess in
Google+ is probably the best place to
put it
more just message me directly Trevor
John's I think my name might be linked
to somewhere um in any case I just like
one of us know what the issue number is
with any information you already have
and we can go ahead and take that and
and pass it along either way I'll make
sure that somebody'd on the sensors team
or actually the CTS team also is looking
into this right yeah sure for this no
problem okay great thank you you're
welcome
totally thank you anybody else in the
Hangout we're putting dirt bag on he's
got another question okay go ahead jerk
this is actually a quick one is law cat
guaranteed to be sequential as far as
the timing like it if the order of logs
in law cat is that guaranteed to be the
order that they were posted in the VM if
they're on different threads I don't
think if they're on different threads
okay explain a lot of what's been
driving them crazy
I think law cat has a the log has a
flush mechanism I
remember exactly but I'm seeing logcat
messages that the order really doesn't
make sense it's possible that they are
getting written you know in a different
order than you're posting them because
they're coming from different threads if
you want to get around that maybe a good
idea would be to go and include the
system time when the log messages
generated as part of your log message I
would say said like on a modern four
four core processor it would be really
really hard to do look at in the ways
that you know I mean you know something
might happen but then you get swapped
over right so he doesn't like swapping
yep right you know I see the system time
is a good way of doing it okay perfectly
just does log have a flush method do you
guys know uh no I don't think so
okay it's what's happening behind the
scenes where you can control them yeah
yeah thanks Jerry
anyone else I have you know that the
reason I do this is I have to ask the
engineer if there's anybody else and I
hang out because I can only see one
other person at the time I'm gonna put
Martin back on okay go ahead Martin
okay just another quick one it's not a
related to sensors but should be fairly
easy to answer if you know anything
about it so I've been having a ton of
problems with the calendar timezone
thingy and I'm wondering if there's I've
been able to find one bug report on the
older phones but it's I feel like it
still haven't been hadn't been fixed so
you have to make this on the calendar
right which you can set the zone the
time zone you have the the field zone
offset right and you have the time zone
parameter timezone step time zone method
that actually takes the time zone object
I'm just wondering if both of those
methods should work the same or not
hmm yeah not familiar enough with the
API to know what the difference between
those two is that's a really good
question I think we're gonna have to do
some research there and get back to you
I've written it down I'll go over
questions from last week at the beating
of the next Joe actually no I suppose
forgot to do that I have answers to
questions from last week too like it's
important we can do we have agreed to
let Tim yeah listen to do it Tim let's
keep Tim on the line here as long as we
can and then we'll go over a question
from last week a little bit later right
yeah we're gonna get to you we're about
to come back to you alright so yes I
said yeah just to follow up on the live
question yeah we'll do some research
we'll get back to you beginning of the
show next week we should have some more
info for you all right thank you have a
question we want to use as much time of
Tim's as we can get so we're gonna move
on to the moderator to get some more
sensor questions yes thank you sensor
questions recommend best practices to
get input from sensors for a
long-running application with the
display off that does not drain the
battery here for the reason one of the
reasons why sensors drain batteries is
not so much that the sensor itself
consumes power is that it's calling you
back like 100 times a second or I think
the slowest possible rate they can do
it's like 20 or 30 times a second and so
you know that's waking up your process
looking into it and unfortunately if you
look at typical sensor callbacks they're
full of trigonometry and math libraries
and floating-point and you know we're
not cheap they so so I would really
totally not recommend leaving the sensor
run so if I were gonna do this kind of
thing what I would do is I would put
myself into its service and you know
schedule myself to wake up you know
every so often
you know turn the sensors on for 10
seconds gather a bunch of data then go
back to sleep
no ideally I would not do much data
processing unless there's actually
ignition you're looking for it wake up
gather the data stuff it in the database
go back to sleep you know the ratio
between the amount of time you're awake
in the amount of time you're asleep you
don't work it up you know but if you're
only awake you know four can you know
five percent of the time you're really
not gonna hurt the batteries that much
now the one thing you asked about was
GPS and that's a different thing so one
thing to watch out for is while you're
asleep
somebody else might have got up and
opened up the map stirred up something
like that that resulted in GPS so what
you should totally do is go and look at
some of the stuff that radar has been
publishing about how to do location
efficiently and in particular there's
this thing called the passive mission
provider right
no just sort of parenthetically you know
remembers any locations that have come
into other apps and then when you wake
up if you use that you might just get a
you know a really high quality location
data right there for you without ever
having to turn the GPS on so I'm not
going to iterate all the excellent
advice to the radar game because it goes
on for an hour - it's a big subject but
that's so for the regular sensors just
you know wake up up or so often for the
for the location and go and look and do
a radio set right there I will add one
more thing on GPS there - a lot of times
what you need when you're trying to turn
GPS on doesn't actually require GPS you
can use the course location provider
which will still get you actually a
fairly accurate location fix but without
the power overhead of turning the GPS
radio on and waiting for a satellite
lock and all this other stuff which
takes time and CPU so if you can note it
all get away with it use the course
location provider first in addition to
you know all the other stuff like using
the passive location provider and
definitely look the rate of rate is post
but yeah keep in mind GPS isn't your
only option for location
okay I'm looking for sensor related
stuff yeah there's that one sorry the
next one down Joe is actually different
from the rest of his actually the next
one the next one down for you mean yon
yes okay can you a question yeah sensors
for fragmentation could you enforce on
manufacturers somewhat more standards
many sensors returning values will kneel
in the cage hold on for a second
I think that's further up and you gotta
be that's it yeah
here we are many sensors return values
only when they change could this become
part of the spec and draw a line between
sensors that do just that and those
capable of returning the current value
as well right so up until four point one
no as of now yeah no I didn't actually
know that I've never used such a
sensitive a die in preparation for this
I was going and reading this TDD and
things like that and I gather than 4.1
we did introduce a new type of sensor
that is what's called a streaming sensor
but then you just read live values out
of it having said that I've never used
one and I didn't have time to go and
drill down on it so they actually had to
do quite a bit of architectural work the
core sensor code because all the stuff
that had existed assumed it was all
callback based so so the answer to Yanis
question is yes this couldn't become
part of spec and it has become part of
spec but no I don't actually have any
specific concrete advice but clearly
other people will share your desire for
that kind instance okay I'm trying to
see if there's any other questions
here's one that's not from anybody that
has asked a question before are there
any use cases for sensors and apps which
you feel have been underutilized by
developers
it's right in here are there any use
cases for sensors and apps which you
feel have been underutilized by
developers oh absolutely and it's what I
would call what people would call
gestures but that already has been taken
by another piece of Android so we can't
call it gestures so I've been calling in
kinetics and this is the classic case of
you know shake to undo or there's a
bunch of short short simple gestures you
can do imagine such a chop left
chop forward chop back slap the front
flap the backs off the side kind of
thing and I actually in the background
been working on a an app that has no no
screen controls at all it is entirely
controlled by those kind of kinetics and
and actually my notice you know
I discovered that once I got over the
hump they're not that hard direct and
there's not that many of them up in the
market so I totally recommend people
doing that because not only is it really
cool when it works it might well
differentiate you from the other 500,000
or however many it is episode and work
that haven't been clever enough to do
that I saw a while back where you take
your phone and flip it over and so if
it's face down on your desk oh it's
silence hmm yeah okay we thought we did
a talk at Google i/o and Tony Shannon
anchor wrote a blackjack gap was dealer
apps and player apps and you know you
would fold your cards by by turning him
over returning your phone over and you
would say hit me by moving your hand
over the rhythm over the phone things
like that and it felt really great to
walk to work oh and when the dealer was
an attorney's cards over so you can
start counting you would just flip the
phone up right and they would flip over
it's really really nice and I don't know
about you but I get tired of apps with
buttons all over the screens you know
and trying to you know well I would
agree with you and I would also point
out that there's a lot of circumstances
in which you want to protect the device
whatever type of device it is from the
environment which means that you can't
directly use the touch screen but you
can still use the accelerometer so any
other comments about this question nope
in that case where do we stand or do we
have anybody in the Hangout waiting for
a question all right let's go back here
and see where we are
look okay let's say Alex Alex yeah you
want to go on to the air oh yeah okay
hello Alex hey so talking about two
gifts or techniques as you told my
question is about the better way or do
chemo well yeah okay so the main
question is how do you prefer to
recognize this kissters I mean basically
have parameter data you can use a few
aberthol sensors like linear
acceleration you know and they actually
provide to use the acceleration hotel
and if you want to direct the movement
itself would go for example some symbol
you should double integrate it and that
integration as maybe you all know is
they're really not accurate as I know
the pin device it not to use integration
and just to try to use raw sensor data
however maybe is there some way of some
filters for example which will help to
make better accuracy 4:32 movement so we
gave a talk on more or less exactly that
Google i/o this year so if you go to
Google i/o and look for a sensitive side
of Android there's both the video and
slides with lots of links so so to
address what you said I actually did a
lot of this coding myself and there's
also an app I published to the to the
play store called sentence floor there's
a link to it in the talks and what it
does is it allows you to take the phone
around and it captures a bunch of sensor
data and puts it in a CSV file and
emails it to you so you can you know
make graphs of Valley News are now an
answer to your question I gesture
detection there are some calculations
you can do if you say if the which one
is it's one of the sensors the linear
acceleration sensor one I'd have to go
local Jimmer it's a cow you can you can
save the data and then you can call a
routine on it that will detect change in
angle along the three axes Delta angle
around the x y&amp;amp;z axis and I actually
found that one was the motive useful in
detecting simple hand gestures like
shaking and twisting you have to watch
out for a bunch of things the data is
messy as it comes off the sensor so you
have to do some filtering from that
friend step now the last thing you
talked about is is actually a pretty car
so I'd like to be able to draw letters
of fire in the air or something like
that and that's that's really hard the
quality of the data coming out I'm not
sure that can actually be done I tried
to do that for like a month or two and I
couldn't do it and if you look at
something like the Nintendo Wii or the
Kinect the way they work is they have a
fixed point like a camera or the IRS has
their standing still and then watching
you move around and then that's over
it's actually you know much much easier
so I've never actually seen a mobile app
on any platform that really allows you
to do good you know three-dimensional
motion traffic of the device so I if
somebody could figure out how to do that
and make it work I think that would be a
great service
now this reminds me of another question
that actually saw earlier in moderator
and that was the the kid number who lost
it but the question was are there any
good libraries out there to go and do
gesture detection since right now you we
just provide the low level like
libraries to go and read sensor data and
now I'm not actually familiar of any
libraries out there that provide
prepackaged gestures so Tim are you or
of anything well I'm aware the neck bit
of sense and that I looked really hard
for them and didn't find anything very
much to speak of there are 27 different
libraries that will detect a shake all
by doing you know the x squared plus y
squared plus esprit square root
detecting an absolute values and
acceleration but no I think that it's
actually a fairly weak area okay so
that's actually probably actually going
back to last question to on open areas
for development and so if somebody wants
to do some open source work that really
benefit the community I think this is
it's an open area for development
Yeah right like a library that does
gesture recognition right there's um
gestures right there was a question here
from Pablo about standard sensor based
gesture recognizers as part of the API
yeah that that was the one yeah right
and my I don't know for sure but I think
we agree that the likelihood of that
happening anytime soon is not high but
it's certainly a place where other
people could make a contribution to
Android for sure I think as people
pointed out not much has been done here
yet and I don't think very much has been
done anywhere in the space for any types
of devices yet you just haven't gotten
used to the idea that these sensors are
available and can
be used to communicate with devices
charge code you might want to check out
in that sense flora it's it's it's open
source timecode google.com okay got a
flip recognizer to recognize flipping up
and flipping back the shared library or
anything like that was just a bunch of
Java code but it C just work pretty well
it's okay I actually have a comment to
this cuz it it kind of goes to what Tim
was talking about where he worked on it
for a long time and you know struggle
with it basically what you're talking
about doing is an inertial guidance
system exactly and missiles aircraft
rockets they all do it they do it
incredibly well but they're talking
about something where they're measuring
you know they want to be a couple of
feet accurate over several miles and
you're talking about you know
millimeters accuracy you know and a foot
a meter it could be done but those same
devices that are actually doing it they
were purpose-built for that task so
there are sensors for much more accurate
there are analog to digital conversions
much more accurate they're able to do a
lot more processing because they have
DSP chips to do all this math and much
more you know real-time so I think in
theory it's capable I just doubt that
the Android phone possesses the hardware
required to do it yeah that's a very
good point thank you yep thank you Dad
okay um anybody else in the Hangout no
okay let's move on then um there's
another question here from Jana in
Prague could you enforce on
manufacturers a somewhat more
standardized behavior of sensors that is
even Galaxy Nexus has issues with
proximity sensors returning nonsense
when covered with saint's paper well
there's one thing specifically about
proximity sensors the proximity sensor
is well known by people who've done
these things to be a very blunt-edged
instrument you know in general you can't
count on much more than in detecting
there's something
there's not something in front now I
plans to read up in centimeters or
something like that but you know in fact
it's just it's just not not after that I
think we addressed this question
initially in that you know there the CD
doesn't really promise very much and to
the extent that there are obvious ledges
that really should be better you know
the CTS tests could certainly be beefed
up and that's all been one thing on top
of that too having done some robotics
work before sensors are very noisy and
that's the nature of the physical world
and it's just the reality of working
with sensor data we can go and give you
tools like virtual sensors to go and
help clean them up but at some level
there's always going to be some
inaccuracy here and there's always going
to be a little bit of extra work
required converting data from sensors
into something very clean that your
application can make sense of and that's
that's just the nature of the field yeah
and I would also say that there's
various ways there's various types of
sensors that you can use to do the same
type of measurement and then in robotics
at least the question becomes which is
the best one to use for your particular
application just because you've got like
a color sensor doesn't mean that that's
necessarily the best way of sensing the
particular quality of some material that
you have in front of you there might be
another sensor that you could choose
that is better for that particular
application and those are the sort of
trade-offs that you make in robotics all
the time let me make two points on the
Android device it it seems to be the
conventional wisdom the highest quality
sensor is the gyroscope the data that
comes out of the gyroscope but generally
considered to be you know relative to
all the others cleaner and nicer and
easier to work with the second thing is
that for every category of sensor data I
tracked pretty well I ended up having to
write somewhere in the publication's a
little circular buffer where instead of
working with the roja since their genome
I would end up working was the average
of the last end so that you know every
time you got new what you put it in the
buffer averaged the latest
and give that value instead and by the
way I found like n equals pi was a
really good value for a long existence
well that's really good piece of advice
really good information to have on and
we have one more question I'd like to
get out of you
Tim someone posted a question that says
were there any sensor related
behind-the-scenes changes in 4.1 you
mentioned one already are there any
others that you can think of there was a
ton of refactoring went into that Trevor
remembers hello was working her hissed
like okay I'm working on that and they
did a ton of work and at some point in
the flow somewhere between ICS and jelly
bean the quality of the data was really
qualitatively improved right yeah that's
not stuff that you're gonna see so much
in the API it really is implementation
changes okay yeah okay let me go since
we've been hopping all over the place
today I have to sort of get my bearings
here again I think what we want to do is
if we don't have anybody else waiting
for a sense of related question than the
Hangout nope then we'll move on to some
questions that don't necessarily involve
sensors let's go see here the best set
of test devices this is from Napster in
India what is the best set of test
devices that an independent developer
can own for example Nexus 7 Galaxy Nexus
Nexus as Motorola Droid on the screen
densities and API versions are my
criterion Thanks okay actually Alex do
you want to start off this one yeah sure
first thing you note is that there isn't
a specific set there isn't a set of very
specific devices that you want inside of
your
family what you really want to be
looking for is like like you mentioned a
set of devices that max that matches the
spectrum of each of them as criteria so
you want a range of API versions you
want a range of screen sizes more
important like also important is you
want a range of GPUs of graphics chips
and there's sort of these these like
families that you want to fall into so
probably you want like a at least one
tablet one large phone one small phone
depending on how how universal you want
to be probably a Google TV try to I
would say go as far back as Froyo get
got a blend all the way from Froyo to
jelly bean and and new devices or
devices with new API versions as they
come out and I'm sure I'm missing a
couple of criteria here Trevor sorry you
mentioned both thing with GPU API
version screen size Oh and screen
density right yeah I'd say those are the
big ones I mean the GPU is one that I
think a lot of will often miss because
it's not something it's something inside
the phone you think about but there's
four major GPU vendors try and have a
device from each of those just because
so much is hardware accelerated right
now you even when you don't think you're
using OpenGL you probably are and then
otherwise just get a good mix of phones
that you know represent the different
density about cup screen size buckets
and API levels the Nexus devices in
general are usually pretty good ones if
you're just getting if you use them they
get star with that's what you a lot of
our internal development is done on for
obvious reasons it doesn't cover
everything but a level it does cover a
pretty wide spectrum out there and on
top of that just devices that are
popular right if there's a lot of users
using a phone it might make sense for
you to have one of those too now that
being said you don't necessarily need to
have a ton of phone factor you
definitely need to have a ton of phones
if you want to interact we try we try
very hard to go and make sure that
everything behaves
consistently across devices but you know
there are cases you know it's
especially with things like textures and
OpenGL where you tend to see a bit more
differences because of the nature you
know the nature of GPUs so just watch
out for that one thing if you do want to
get access to a lot of different devices
and you don't have a big budget of
course there is the emulator if you're
just doing basic API level testing
screen test testing the emulator will
get you access to all of that you don't
need physical devices in many cases but
if you do find that you do there are a
number of third-party vendors that
provide access to remote access to the
devices
so off the top of my head I think device
anywhere and bit bar are two really
popular ones they have very different
products but you paid them a small fee
and and upload your apk to them and
they'll go and either let you run it on
individual devices one at a time or run
automated tests across the entire suite
of devices and you can get some really
good data that way - I would say one of
the things also don't discount the fact
that you can you can build as many
different emulators on your own local
development writing as you want it slow
and the emulator has gotten a lot better
- right so you can build a gingerbread
device of any size you can build a jelly
bean device of any size any density you
want it we it's not at a point where you
can you know emulate any GPU chip you
want so you can't have you know an
Nvidia next to a Qualcomm next or
whatever now of it but you can't have a
you can you know automate a thing where
you spin up a tablet emulator and it's -
a phone emulator take a couple of
screenshots and then compare afterwards
or run a test suite yeah you if you
haven't used the emulator in quite
awhile or haven't been following the
comments there we've added hardware
acceleration as well as virtualization
support and basically that means the
emulator has actually gotten to the
point where it's not painful to use it
actually feels as fast as a normal phone
in a lot of cases so it really is a
useful useful development tool and if
you don't find yourself using an
emulator now might be a good time to
give it another try right okay great
thank you very much hey guys
people in anger or I'm just asking for
recap from last week and yes okay yes
going excellent let's do that now all
right so well not so much a recap but a
list of questions we couldn't answer so
there were two of those from last week
the first one was a question about a
mashie for those who worked with this
last week the topic was web development
on Android and one of the questions was
about a library that was announced at
Google i/o for syncing preferences
across different devices and in
particular they wanna know if there were
any updates on that so I spoke to you
Nev who is was the engineer who gave the
talk where that was announced he told me
that the team is still working on it
they don't have anything that they can
announce at this time but it still is
under active development so hopefully
sometime in the near future you hear
something just stay tuned and we'll let
you know as soon as there's something
new that we can share there
the other question was about parsing
JSON data on devices with limited memory
and so in particular are there any
streaming stacks file parsers for JSON
and we have two recommendations for you
the first one is actually already built
into Android so as of honeycomb API
level 11 we have Android util dot JSON
Reader which is a streaming JSON parser
built into the system that should do
exactly what you want now if you're on a
device that's pre honeycomb we would
recommend using a library called JSON so
jeez and you know just Google right said
and it turns out that JSON Reader is
actually derived from JSON so the two
have very similar interfaces so if
you're looking for something that's
backwards compatible and easy to either
swap out at runtime or upgrade to later
G songs definitely a good choice and we
picked it for the framework so can't go
to wrong and that were the two
unanswered question from last week okay
now we have also talked about the some
audio problems that we had at the
beginning of last week yes people be
able to look at the YouTube
they will once the YouTube video goes up
I believe there's a Daniel can correct
me if I'm wrong but I believe so there's
some processing errors and it's still or
some processing delays rather and it's
still waiting in the queue waiting to
get uploaded so we do have a recording
of it and as soon as the yeah or if for
some reason YouTube isn't able to go and
post the video we can just supposed to
the recorded version yeah yeah as far as
I know I'm actually I'm another question
from the Hangout before we close for
today I'm gonna put a keel on I think
that's how you pronounce it correct me
if I'm wrong please do there is honey
hello lo hello can you hear me yeah um
okay this is a follow-up question to
last week's question I'm gonna beginner
to Android development and I've been
using the API God's not straight through
them um but do you have any suggestions
on some good parts of it that I should
make sure I have covered like I have
done the fundamentals and at the
activity section except for Alec loaders
and user interface stuff but I'm having
trouble differentiy differentiating what
is something to read for reference later
or what are the fundamentals right
mm-hmm
I remember this question from last week
yeah question last trip is actually well
you know there are two questions
recently one was what would be good
things to reuse those would you
recommend reading through all I'd be all
the right order yeah so yeah fundamental
is definitely a good place to start you
know that's why it's called fundamentals
right loaders definitely you'll
definitely want to read up on loaders
and UI when you get a chance both of
which are extremely important for modern
Android development
I guess you I've always been important
as far as other things worth noting no
sequel Lite is that I can't or if that's
part of the fundamental section or not
but you'll definitely need to be
familiar with that
other things work knowing binder is it
probably nothing you need to know to
begin with but something you'll probably
run into eventually so it's that that's
the the RPC mechanism for Android see
what are some other really good sections
worth knowing
noting shared preferences definitely a
good section to read up on see what else
it's it I would say that it's difficult
to and you know sort of give you
detailed advice without knowing what
sort of things you're trying to do if
you're just trying to learn everything
there is to know about Android my
approach to it as always to suggest that
people pick a project that they want to
do and then go off and and try to do it
and in addition read the API guides as
you go along trying to do that project
to learn about activities and how
activities interact with each other if I
was going to name it I would say
activities intents services yep and also
shared preferences and fragments
probably fragments fragments might be
very useful as well I think you can you
can wait on those until after you've
gotten through some simple exercises and
you know keep in mind that we have a
whole set of Android training that you
can do in conjunction with any of the
API guides of your bead right I would
say you get a solid foundation the
Android training is sort of split into a
basic training section in an advanced
topic section basic training is this
stuff that everyone should try to learn
all of yeah because it's the stuff that
comes up in almost every Android
application past a certain size like
that you're going to write the advanced
topic stuff is also very useful to know
but it it only matters to your
application some of the time so I would
say definitely cover the getting started
section of Android
and it'll it'll cover a really good
solid foundation for you yeah and then
the training section is probably a
little bit close to what you're trying
to do - that's that's the section that
really is meant to be read sequentially
whereas the API guide and especially the
reference are more it's more reference
material right you you jump to the
sections you need us you need them yeah
I'm writing a course organizing app from
like students and stuff like that's what
I'm like I'm moving up the project to
work on wrong you so like I just I was
just wondering like what should I like
basically covered and then what the next
thing to do but like thanks for like
shedding some light on that that real
tanks great thank you do we have anybody
else out there okay um do we have time
for one last question I think we can
spare another minute or so we're a
little over time that's okay you want to
try and tackle this last question here
sitting here um then we can go ahead and
do it I mean okay there's not much I can
say on that but let's at least let's at
least read it it took three weeks for
developer to support to respond and
reinstate the reddit sync application
after trademark misunderstanding what
are you doing to enhance developer
relations and fix these unacceptable
response times from support okay so like
I said I can't say too much on this
particular issue AK reviews are private
issues between us and the developer in
question we have been in contact with
that developer and we have been since
the beginning so there is it there is
definitely a dialog going in there I'm
going on there I just can't really
publicly say what's going on there I'm
like I said it it's between us in the
developer in general though I mean first
off we are aware that there was some
concern in the community about this
particular app and we're looking what
week at what we can do there to improve
the process in the future and on a more
general note I just want to emphasize it
if you are a developer on Google Play
make sure you read through the terms of
services
and make sure that you don't have
anything in your app which either
violates those are our contact or our
content guidelines because then you the
review team can get involved and it's so
it's sort of a messy situation for
everyone involved is something that's
best to avoid if possible but you know
again we are aware of this particular
case and we'll we're looking into ways
to improve it for the future they
improve the process for the future I
think that pretty much covers everything
we can say on that okay
leave their comments for today alright
with that we will say goodbye to you and
see you again this time next week please
send in your questions to moderator and
if you want to ask us questions on there
please feel free until then all right
see everyone</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>