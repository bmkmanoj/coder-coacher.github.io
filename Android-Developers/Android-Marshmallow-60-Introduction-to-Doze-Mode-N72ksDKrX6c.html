<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Marshmallow 6.0: Introduction to Doze Mode | Coder Coacher - Coaching Coders</title><meta content="Android Marshmallow 6.0: Introduction to Doze Mode - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Marshmallow 6.0: Introduction to Doze Mode</b></h2><h5 class="post__date">2015-09-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/N72ksDKrX6c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it's pretty annoying to set your phone
down for a bit only to pick it up later
and see that 30 percent battery because
apps have been busy bees syncing data
while you were out I'm joining us with
and I am here to help you understand
what it means to be idle it's common for
modern mobile apps to be in a paused
state when they aren't active and they
have no pending notifications or
foreground services but what may be new
to your ears is doze mode which lets the
entire device take a breather
doze mode works on the assumption that
when the screen is off and the device is
neither moving nor charging the user
probably isn't using it so the device
decides to focus more on preserving the
battery than syncing for new information
to achieve this doze mode delays things
like syncadapters job scheduler and
alarm managers so they don't burn
through battery when the user isn't even
on the device but to be clear doze does
not disable these services they just get
deferred to a later time these jobs and
background services are paused and cute
until Android exits doze mode for
example when the user picks up the
device again however if doze mode is
active for a prolonged period of time
delayed jobs are batched up and executed
periodically but for some apps timing is
critical and so the android framework
offers two ways to get important work
done even when the device is dozing
Google Cloud messaging can bypass doze
behavior with messages that are marked
as high priority in a social app for
example the notification of a new
follower or a comet probably isn't vital
whereas a chat message could be critical
so if it's worth having user get up
across the room and pick up the device
then you can consider it high priority
and other apps have time critical
operations that they need to do such as
prompting notification at exactly 6:00
p.m. in cases like these you want to
know that your alarm manager has your
back now set exact will not trigger on
the moment if the device is dozing but
only when it exits doze mode instead use
and allow while idle which will trigger
even through doze mode but aside from
these two scenarios there isn't much
that needs to be done about doze mode
because your app is not being ignored or
skipped merely delayed until the device
itself is in use so the core of the work
that you want to do is actually testing
your app to be certain that your apps
recovery from doze mode is as graceful
as expected
so to help you with this we've created
new adb commands that enable developers
to step through the stages of doze mode
programmatically so check the
documentation for details and that's
really all there is to dozing nothing
too scary and not too much work for the
developer so if you're targeting
marshmallow you may need to add a few
and allow while idles and upgrade the
priority on certain messages but mainly
just check your app for surprises and
continue to build better apps</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>