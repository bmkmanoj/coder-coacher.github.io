<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Developer Office Hours: Q&amp;A | Coder Coacher - Coaching Coders</title><meta content="Android Developer Office Hours: Q&amp;A - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Developer Office Hours: Q&amp;A</b></h2><h5 class="post__date">2012-10-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/de2HIjLxJUs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yeah hello welcome to Android developer
office hours for October 17th 2012 I'm
pretty sure have that date right yeah
good
sorry for the delay start for those of
you who are watching live we've had a
few technical difficulties that in our
studio this morning but we're ready to
go so for those of you who are joining
us for the first time this week we're
going to spend the next 30 minutes or
hour or however long it takes to go and
answer your questions on Android
development topics we have a moderator
queue where people have been submitting
questions before the show we'll be going
through those questions but if you are
watching live feel free to jump on to
our Google+ hangout where you can go
ahead and ask us questions live and
we'll go ahead and and interleave live
questions in between the pre-recorded
questions about the Google moderator so
what that might let's go ahead and get
started on the first question on
moderator today so this question is from
Australia and I think the name there is
Jade Dix and you have to forgive me
hungry that name wrong it seems
impossible to query my in-app purchase
prices from the store using the API
ideally I want to display localized
prices for my in-app purchases to my
users how can I do this without creating
a lot of mess and bundling prices for
each each locale locale thank you all
right
so Alex do you have any thoughts in this
one unfortunately from what I remember
it's not possible to query localized
prices part of the reason for that is
that the is the currency exchange rates
are sort of constantly fluctuating and
we don't want to we don't want to create
a situation where you where you display
one price in your application and then
when they go to the Google when we go
through the purchase flow through Google
Play the currency exchange shift happens
and they get charged at a higher price
well I think actually you you can record
per country prices so if you if you are
recording her like I think the old
mother would do live currency conversion
while the new one you set all your
prices for every product simultaneously
right I think what they wanted least
from what I'm reading from the question
they want to set they want to set it
once
one locale and sort of pull in live data
on the price for each locale but like
like Trevor said I think what what you
can do is set the price individually for
each locale which is what I think you'd
have to do in this case if you want to
create a situation where you are
updating the price over time saying it
out like in-app gold or potions or
something cost a buck and you want to
drop to 50 cents or however you want to
do that what you would have to do then
is set the pricing up on your own server
and then on applications start just have
it ping the server check for new prices
display with an app or use something
like a cloud or our Google Cloud
messaging to to ping the application
whenever there's a price change and that
it can pull that data down off the
server right we do have a batch upload
API for prices so if you take all of
your prices and put them into a CSV file
you can send those to the Google Play
Developer console and then you can serve
that same CSV to your app and then they
both you working off the same pricing
data yeah all right so let's move on to
the next question
all right this one is from Radio Myer
our own Rader Mayer here in Mountain
View California
you're gonna go and try and do a video
question for this but I don't think it's
gonna work too well so we're just gonna
go ahead and unless you want unless
Louis nobody wants to go and try and
pull it up life all right the reason to
go ahead and read this is not this week
so the question is a dice player which
was a app that was featured last week
actually on the one of the AK review
shows displays a pop-up window in a
plays video even when the app is running
or when that's running in the background
so and you can sort of drag it around
it's actually a really interesting
effect if you want to go ahead and
download that phone your honor take a
look at it but the question is how does
that work and it's something that's
going to break in future releases so I
believe Alex you found a library that
actually lets you do that yeah so
there's a library available it's an open
source library called standout that
basically crits it's a third-party
library that lets you create little
floating windows that can drag around on
your homescreen and it's even got this
like it's a pretty nifty looking always
on top functionality where you can even
open other apps and the standout window
will sort of float on top of it so this
actually works so dice players using
this library stand out and stand out
actually works by using a system alert
dialog in terms of Willis break in
future releases this we can't say for
sure but the system alert dialog wasn't
designed with video in mind so it's it's
sort of an odd use of the system dialog
and I wouldn't expect that to work
without without some updates per version
like from developer of the library
especially difficult would be the the
context of actually using it to play
video the way the dice player does I
expect that to I expect that the break
in all sorts of corner cases unless the
developer has been really careful about
that kind of thing
for instance playing simultaneously or
playing a floating video window on top
of a application that's playing other
video other there's serious resource
allocation considerations there yeah I
think that pretty much covers it from a
from a UI perspective is it's definitely
interesting effect but yeah it's not
it's not really the Android way of doing
things right it's having a window that
you can drag around sort of breaks the
only in one application at a time UI
paradigm that we go for with Android it
is a neat effect and it's impressive
that I mean the standout library is
impressive in terms of what they've
accomplished but I would say it should
be used with terror right let's move on
to our first question so another
question from the Jay Dixon in Australia
and so the question is with in-app
purchases on Google Play is there an
easy way to offer discounts for a play
across account across all of our in-app
purchases or would I have to write and
manage this so we don't really have a
way to go and actually we've really on
how much avoid offer discounts period I
could go and upload a different set of
prices if you are saying if you are say
applying discounts to every product in
your in-app product in your catalogue
right just I've made all the prices that
you take effect live but if you only
want to target one specific user we
really don't have any way to do that on
our end you'd have to add some code into
your application which is responsible
for selecting a different in-app product
based on that user now that said I'm
going to give you a big caution here and
that is part of the reason why we have
the the concept of an in-app product and
why you have to upload all your prices
to the servers to make sure there's so
many tampers with your apk they can't go
and purchase one product at a different
price right it's a imagine though we put
the prices into your application is code
you just something do the whole play it
be trivial to go and find that strain in
our place it with a different price and
then get all your content content for
$0.99 regardless of what you want to buy
it for so in this case I mean it's a
little different in that you're still
using a in-app product and but if
somebody discovers you're doing this
they could just go and modify the apk to
go and select that different Product ID
regardless of which user is actually
logged into the phone and so from a
security perspective
this is a bit sketchy ah so that's the
one thing I really do want to warn you
about here if you decide to do this yeah
well one alternative Mike I don't know
if this would work but just uh like
playing through the scenario in my head
one thing that might work is to not
store the the item ID for the discounted
version of the item on the device just
have it on your server and have these or
authenticate to the server server sends
down the discount item item
I mean it's still there's still a risk
if somebody I find that Product ID
there's nothing stopping somebody from
going and plugging it in there but
actually discover it exists right you
have to discover it exists and you have
to maybe mimic the user packets know for
something to get the item IDs that apply
but it is a you know if it's just a
small discount you might not really care
that much so and you know that being
said the user is still gonna have to pay
something so yeah yeah I don't think
it's gonna be a big difference right so
let's see here is there any way to do
route between two points with the
Android map API
so and this is coming from Brazil so
this is essentially driving directions I
believe in which case the answer is if
you're using map V you know but if you
are using an intent to fire to load Maps
I believe it's possible by just using a
map URL I think so yeah you could just
start it intent with the domination of
feature of Maps essentially but if you
have a you know a URL from driving
directions like you'd get from the
desktop version of maps there's a query
parameter for a source of address and a
query parameter for a destination
address and if you fire off the intent
that looks just like the URL built on
the desktop the Maps application will
offer to intercept that and we'll go and
calculate driving directions locally so
yeah again not possible if not for you
but possible is an intent
so this question is coming from Andrew
in Romania
the question is with Android awesome
player which is part of the the video
framework they media playback framework
they're getting an unexpected of work
prepare notify listener of error which
is preventing them from playing in mp4
they're getting this error on Android
234 and it sounded like goes across
several different devices looking at
their stack overflow question and the
file also the interestingly enough it
works fine when they're playing off of
the SD card so that's really interesting
normally when you see these types of
errors it's because you've encoded your
video to use the wrong format and I
think in this case what's most likely
happening if you look very carefully at
their source they're actually achieving
that they file from an HTTP server okay
I mean I can't say this for sure without
actually having the real URL which is
not present in your question so if you
do have that feel free to ping us we can
take a closer look at it but my guess is
it's probably an SSL error like the
certificates not trusted but why would
that happen on the SD card and not know
if it's on the SD card there's no SSL oh
okay no other way around it happens it
works except on the SD card right no
other way around it works an SD card it
does not work when they stream from
their server ok so then so it's an SLS
SLR and they bypass SSL because it's
going to the SD card right ok well I
mean yeah now that said there's nothing
in the logs actually indicates this is
necessary this is just my best guess
based on the limited logs we have
available if you again if you can
actually give us the actual URL to the
file we can do a little bit more
Diagnostics but just based on the
limited information available that's our
best guess right
all right next question comes from Ryan
in Utah I'm developing a resource app
but I have partners that only want to
have the customers use a specific
version until they've qaid that
application is thoroughly to restrict
what version is downloaded from google
play a little confused by what they mean
by resource app yeah that was a little
unclear to me too I guess is essentially
a apk that provides services to other
apks oh yes okay here's the example like
opentable right it has a intent that you
can fire off to go and actually to go
and get make a reservation or keep up
quite possibly something like a theme
right it could be an apk that just
contains resources which actually would
make sense and then they're going and
looking inside that deliver so to
receive their app okay interesting it's
okay so - the real question is there a
way to restrict what version is
downloadable for a given user on not
really I mean you can't say Baba
gmail.com only gets to see version 3 and
not version 4 or generally it's not even
pop you can't restrict the version
period when you download an app from
Google Play you always get the latest
version sort of I mean you see you you
do have the option of using multiple apk
and what that would let you do is
restrict per user based on based on the
like let's say the platform version or
the size of the screen so what you would
then do is break your apk up into like
three different versions let's for
instance let's call them like 9 10 and
11 and say version version 10 only works
with phone devices and version 11 is
compatible with x-large devices which
would which would include tablets then
when the user went to market they would
see version 11 if they were on the
tablet and they would see where's intent
if they were on a phone multiply BK's
are not they don't work for every
situation they will only let you
restrict based on the platform SDK on
let's see platform SDK screen size and
GL texture so it won't you can't do a
thing like like I said before like say
Bob the gmail com gets to see version 11
and everyone else gets to see version 10
so it depends on what
what criteria you would want to restrict
on I'm guessing from the content of the
question that you would want to restrict
on the version of the other applet so
you know the version of application a
that's installed on the user's system
would define what version of application
B was visible and that's not really
currently possible Google Play wasn't
really designed to work like that you
would probably have to either implement
some sort of like very well-defined
interface between the two applications
and just test the living crap out of it
until you're reasonably confident that
you can upgrade one of those about
breaking the other one or you'd have to
release them in tandem or have maybe
have a side loading thing where it
actually no I take that back it is
against the Google Play toc to have an
application that downloads other
applications so you wouldn't be able to
do anything like that
it would really have to be very well
defined and thoroughly tested interface
between the two applications so just one
last reminder here we are getting to the
end of our pre-recorded questions for
this week so if you do have any
questions that you want to ask us live
feel free to hop onto Google+ even if
you don't have a webcam we can accept
questions via chat but you have about
probably two minutes before we're out of
questions we'll be signing off for the
day so this question comes from in DC in
Perth Australia who says I have a
requirement to convert PCM files to AAC
MPA or mpeg-4 files
can we have some demo code for mode
codec encoding please all right so
that's a pretty a pretty big question
they're like you want to convert from
one file format to another I hope you
know I I don't think we have any
published sample code the demonstrates
how to do that's uh that's generally
when we write sample code it's pretty
and we publish a like official Android
sample code it's for general purpose
stuff that's specific to the android
framework that there's a reasonable
assumption that allow a lot of Android
developers are going to want and I added
something specific to Android this is
pretty independent of the fact that it
would be running on Android generally
what you would want to do is find a good
transcoding Java library they looked at
ffmpeg which is actually a pretty good
choice it is a good choice yeah it's
actually LGPL license too
so okay um actually we just do a
licensed LGPL and GPL there were some a
licensing concerns from the developer
I'm afraid we can't actually speak to
those since we're not legal experts but
but you GL GPL is pretty permissive of
you know it's designed to be used as a
library so you can usually include it in
other code I think there were some cases
depending which codec you used it could
the licensing status change yeah I've
what I remember with LGPL the rule was
you could include it with your code well
it wouldn't force you to GPL your code
if you didn't make changes to the LGPL
library but I think that there are some
specific cases here where it's only GPL
licensed okay so yes if you do use
ffmpeg be a bit careful with the license
there the ffmpeg developers do have a
page dedicated to discussing the license
so that they explain it in great detail
but you know outside of that another
option you could do would be to go in
set up a web service that's responsible
for transcoding us that way you just
have a copy of FM
ffmpeg or whatever service you need
little do the transcoding on your server
and then give back the resulting file
which you know it is actually an
interesting question there because
you're trading off you know on device
CPU to do it versus your network
bandwidth right but are you
it doesn't make more sense to use the
devices limited CPU to do the
transcoding or to you upload never do
both now you're doing transcoding on the
device will waste battery but a lot of
users also have limited but but also
depending on the size of the file you
could also burn through the battery I
mean you'd the issue with the with
uploading and then downloading is that
you would be paying the price in
bandwidth twice yeah you'd only
transcode once but you deftly jump on
the device probably does make the most
sense here probably I think I would
probably with this kind of question I
would say just like run some tests and
well like what it part of it depends on
the common use case like are you
transcoding you know a three second
video of a you know kitten playing with
a ball of yarn or like a full-length
movie because the different cases are
going to have different like ideal ways
to handle them yeah all right
and we still don't have anybody on our
live hangouts so with that that's the
end of our questions for today thank you
to everyone who wrote in we're here
every Wednesday 2:00 p.m. Pacific time
answering your questions please if you
do have a question submit it - moderator
ahead of time we can go and get you the
best answers a few the questions don't
come in an hour before the show also as
we're trying to do something new we try
to do with radios video this week we'll
be doing it next week as well - next
nuchal actually will show the video but
we want to go and have as many the
questions in moderator have videos
attached to them as possible so when you
do submit your questions there's now a
new field in moderator that says attack
YouTube video and you just paste a URL
to a pre-recorded video from YouTube
there it's not required
you're still welcome to submit questions
the old fashioned way with text but if
you do have a webcam and want to take 30
seconds to go and record your question
we'd love to see your face on the air so
please give it a try and there's always
let us know how it works you can reach
us via our Google+ Play
which is Android developers or
developers or internet calm slash plus
is the shortcut URL to get there and
with that I think that's it for this
week yep alright so thanks everyone for
joining us and again we'll be back next
Wednesday won't be good</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>