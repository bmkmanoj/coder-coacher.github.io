<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Developer Office Hours | Coder Coacher - Coaching Coders</title><meta content="Android Developer Office Hours - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Developer Office Hours</b></h2><h5 class="post__date">2013-03-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SwAK87hKtDE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi guys welcome to this week's office
hours with me Chris Bane's I am Nick
butcher rich Hyndman with frozen there
we go I'm retirement and second ends now
all from London as usual be talking
about the lights and greatest and ruin
past week as well as it well and
answering questions from the moderator
and in the Hangout and i should say lies
the guys mango I vibha hi good evening
good evening good evening are you who
else we got Ali and Winky warm hello i'm
just happy hey there guys thank you for
joining us today I Giuseppe as usual we
won't be answering those questions that
are asking about product releases
roadmaps future facing but we will be
talking about android developer topics I
just opening up moderator here on my
Nexus 10 years wicked offers modern
let's just our messaging back covers
this time nick's the only one is
outstanding if someone asked me onto a
CD verdad what the car is worth oh yeah
cuz he can't buy them in the UK right
and if you can't really yeah i apologize
for missing last week's office hours we
were all traveling but we are back now
we'll try and keep a regular schedule
all right is your question honda all
right oh yeah let's start with the first
question how to beat crash on a device
rotation when Ella dialogue is opened on
the screen with spinner in it open as
well as from Mike in Sydney okay um was
the question Hattie yes I forgot to
answer there early yeah you have uh yes
it makes a confirmation change and the
ello ello dialogue is open on the screen
and a spinner is opening because was
obscene he gets a crash this was spit
means progress dollar yes so let's I'll
shake his yeah code snippet we have a
code snippet yeah he posted across my
but I guess
oh so general right stop if you have a
dialogue um you should think about maybe
using a dialogue fragment and not using
the l a-- dialogue this would maybe
solve some of your issues and if you use
a the dialogue I'm just wondering um are
using the method on the Android life
cycle I'm to create a dialogue and let
the system manage it for you or do you
managing do you manage the dialogue on
your own so I don't yeah I mean it
doesn't sell in Russia's so it could be
many many things best way to do me is
probably to handle it yourself in
unsaved instance ref is cool but in the
Silvan save and restore slight methods
called on your activity progress handle
it there yourself so yeah I'm regarded
after the crash could be many things
that without more information it's hard
to say what the actual causes yeah
removal so Lucas in Brazil has asked why
it has cursillo did not have a pram of
limit and is it best to put it on as an
append query parameter in your eye Matt
look at the source for cookers low
earlier and the reason is that content
resolve that query doesn't have any sort
of limit pram itself and cursor loader
is basically a wrapper around content
resolve the doc query with frozen and so
that's the reason really if you want to
have a limit parameter you have to do it
yourself as a curry string on euro and
the answer question next we welcome to
other people who've just joined us in
the Hangout today look for some
rendering of each receiver hey oh that
locus see question or just turn n yeah
ah where do we have any questions from
the Hangout yes Ella can you hear me
absolutely cool so I just ask that in
public I'm Google+ but i wonder if you
have a specific tip so as you probably
heard I'm working on this custom
adaptive you 280 and I'm now adding
accessibility support to it and so it
works in the same fashion than lest view
in gridview so in each layout pass what
it does is it has to detach all the
existing views in order to do all the
new recycling stuff ListView that's the
same thing but so in order to handle
focus when we really when we do the
relay out for input focus there there
are like public API that makes this very
simple to implement you have get focused
child save that recycle everything and
then you restore the focus wherever it
was if it makes sense to do so but for
accessibility focus which is something
more recent um in the platform as far as
i know i mean i couldn't find any public
API to do things like to query the
system or on things like where's the
accessibility focus now and things like
do I have the accessibility for missing
of my children has it and if I do have
then I want to know the accessibility
node info on it or the host view for the
accessibility focus so do you guys know
of any public API to handle these things
because it seems that list view and
great for you they are only using
private AP is that makes it very
convenient to do designs
good I know the support library has a
lot of accessibility resent a lot it has
a couple of classes in there which have
support versions of it sips of being
able to query accessibility service or
not to be able to send accessibility
events might have liked it much myself
so I can't really say it different I
thought it's going to help you or not
blah yeah me neither have a look at the
docks it's you I / accessibility Slayer
services that HTML in this basically
summarizes the API there but I haven't
worked with it either so I use some of
the attributes but um and it's about it
yeah I'm kind of assuming that the
reason it's not public yet it's just
that you want it to mature a bit before
exposing it to everyone because there
are things that look very like very good
candidates for public API in the private
api I mean there are things like request
accessibility focus on the view class
right so this thing would be very
convenient Oh like if you're dealing
with things like view recycling and
stuff like that but and also things like
you can guess you can query the hosts
view holding the accessibility focus at
any point but by using very private
stuff there I like public methods with
the hidden annotation yeah okay so this
is why I'm assuming it's just like
cooking like a bit more before exposing
I don't think you're ready we have to be
very careful what your daughter but yeah
I can understand that it's just yeah
it's just that like for now pretty much
so that the reason I'm asking is also
because it seems that the whole adaptive
view framework it's not really meant to
be extended at all like I have to like
replicate a lot of stuff that is in the
parent classes a lot of times and it's
really inconvenient
it's a nice evening out a support
library as chris says it's got the some
accessibility delegate methods in that
and i'm sending and receiving of
accessibility events as well adeline to
myself so what happens at the moment if
you put the device into accessibility
mode does your list swipe when you've
got um when you use two fingers so yeah
so I i implemented the whole action
accessibility action bits which is fine
so this this is all done this is all
working fine what it what the problem
like this specific problem are talking
about this when you scroll in your
recycle views you're going to lose the
accessibility focus a focus on the
children had it so it will pretty much
reset the accessibility focus to know
where every time you scroll pretty much
yeah be good if you put that on a stack
overflow and pingas link as well listen
I tour details on it okay okay yeah I
linked the post on Google+ to what I
think is softer guys working on civility
on Android so hopefully they will like
heavily I'll look for the post I can
refer to them internally I know they're
always interested in actually
implementations of accessibility so yeah
yeah I've got off so nice just because
its recent API so it's to like trying
things out a bit in private first so
yeah I can understand that cool your
question thank you very much
we got next I'm gonna make some notes ok
the next question is on how to achieve
drop shadow for views without using a
nine patch ask from David in Vienna and
yeah I think you should really think
about the reason why you need this
because the nine pitch is probably the
best you can do also I think also in
terms of performance right um and yeah
Chris suggested to disable the hardware
acceleration on the view and he was a
shadow layer um yeah meanie it was
intimidated and so you mentioned that it
is much harder isolation and that does
originally I was done you can set the
layer type up to software so software
layer so you just disable harder
acceleration and it should work again
and but nine patch is probably the way
I'd go with a transparent middle so
you're not getting you have drill and so
yeah is that if you really do need the
drop shadow then those the two sort of
main options you've got really cheesy
progression that's what question know
that the one moderator machine Andrew
Kelly pointed out that the video stream
may not work in the don't fire right now
there we go we can ask him as soon as he
joins in maybe you put in the chat
window if you've not got a microphone
and redid you get the YouTube when
they're working shut up come through you
get us another question actually you've
got a question for him in the earth in
the moderating it's too
he's asked any force of our home screen
shortcut would remove when you're after
graded and install location is set to
internal only yeah there's a good blood
place on the book all their things that
cannot change it sounds like you've
changed one of them so basically what
normally happens if you have to change
your package structure you know if
you've moved your home activity to like
their subfolder Ottoman like that then
you know these things can't change
because that's a component identifier
bitching session let stop short cut both
the linked specific intent and filter
and so if you change that then the
shuttle stop working what you can do is
create an activity alias at the old
location which basically affords you
want some new location so and that's
good practice if you are going to do
this kind of refactoring so that you
don't break any one time switch your
beds but yeah if you look on the Android
developers bloggers Android dash
developers at blogspot com and there's a
post cool things that were much that
cannot change by darn hat would have
whatever that answer can I ask a
question hey thanks well um I use an XML
collector different booked on state and
so C major ok ohx not selector selector
like chanel okay okay when when from the
activity I used the sect image resource
haha and then I call the XML selector
okay the system image resource taking
care about the memory the download in
part from memory etc or I have to take
care of myself about the big boss
now the system take care you're talking
about all the different image states
that you can have on the button no I
sorry I'm you explain again I have an
XML with the selectors inside okay with
the room Bichette press set focus said
okay each HSN actually have a different
image yeah yeah this is a little the
same image view I change the XML
selector using set image resource at
runtime okay okay okay on some specific
device I am experiencing out of memory
so I don't know if the sect image
resource is a taking care about
restoring over the whole the image or
not I'm not a hundred percent sure I'm
pretty sure when you've lied the
drawable it will load all these child
robles at the same time so you'll have a
bitmap rich runner you had trouble which
will have X number of bitmap space and
stereo so there is no real way of AB not
yet has any provided way of you to
recycle those images have you done some
tracing on where the memories going yes
and if ye like it's like when I change
the results the image that was a loading
go before didn't the unload keeping the
are you changing the resource a lot um
yes yes said because this is connected
with a book button that is pressured
many many times on the screen and every
time you are the other totally there are
four image for image in the maximum heat
up in the unique in XML and another for
image into another xml so using with us
actively resource I
which it is to befriend xml files and
you can see when you switch you can see
memory going up and up and up yeah up
above that well as a worker I'm so clean
away might be too instead of switching
the resource yourself why don't you to
find your own custom States then you can
have different drawables in your
stateless trouble reacting to your own
custom states as well as the android
states or you can have two buckets what
platform is this on so what what version
what version no I display the 140 for
about 40 4 and 2 pcs that's interesting
because our end and all the devices that
send the out of memory report I hope
that they are anytime sign it like
others others device you know winding
the panel you have others device there
are no specific name like I don't know
Nexus or is it just this interesting is
I would've thought that the drawables
are loaded with in Persia belen in input
shareable so that if they aren't been
used I'll get purged away and by the
system and but that was added in froyo
and about 2.8 if i'm free and so
honestly I don't really know is it
sounds like a bit of a rule rich book to
have yeah I mean I say nothing stated
about you having to clean it up and I
don't think we provide any methods for
you to clean it up yourself you can go
for the drawables I can the last that in
the lasted documentation the sec
she's up you come
she's happy now we've lost him he's come
frozen interesting Oh is set in major
drivable or second major bitmap but
don't work because I need the different
state for the same image view so what
are you saying so using set image
resource instead yes grab yourself you
could create a drug yes and so you can
co-create a stateless drawable and you
set a struggle or you could define
custom states just use a single button
so i think it might be do this setup
italy which is your problem do you mean
to create a custom stated so dick trees
on each change over them yeah so if
you're doing like a play/pause button
you could have a state say playing and
that could be a billion and select
select or false and so that when you do
your stateless traub or the different
states you react to one of those could
be playing as well as the you know
android and score focused and sore
pressed and stuff of that so you can
provide your own States as well as using
some steaks in fact Lucas I think one of
your colleagues on firefox did a good
blog post about a disease right you
happen to know the book I can't member
that I can I can link that on a check
don't kill some viene about how to find
your steaks I saw that the other day but
yeah it sounds like an issue okay just I
can she be going as long as wrong hello
uh-huh sure I'm I was there a couple of
wicked weeks ago I'm the one with the
web white webview problems hi so you
suggested disabling the hardware
acceleration and I did that and they
changed life
you can say with application sorry you
disabled it to the whole application I
can't understand yeah i'm sorry i'm not
a native speaker okay did you disable
hardware acceleration for your whole
application in a manifest yes I did so
not only for the webview not only for
the webview for the whole application
okay and what are you saying can you
restate the issue because idea what's I
remember okay see in the moderator yes
it's one of the questions is the one
with the stack overflow linker okay yeah
so I put an answer inside it sounds like
HTML issue so mean have you tried
running that web page in the normal
chromophore the browser app yeah well I
tested it with the water word
consultoria invalidation and its varied
HTML I don't have chrome on my mobile
phone because it's toward but actually I
didn't try with the the browser the fact
is that usually it works he starts being
white after a while if i reboot my phone
it starts working again so I suspected
something else not the HTML which is
correct it's a simple table nothing your
fancy okay and this happens in the
android browser and you have not you're
not able to test on chrome and i'm not
able to toss on chrome and it's
happening in a webview i didn't really
take on the browser it's strange but I
are you running some JavaScript or is it
just Marvin I'm running some JavaScript
which I didn't write it to render
methanol and
strange thing is that i only get
problems on android for on android too
no problem never no one ever reported
any problem 104 I get this problem yeah
I remember that's why we thought it
might be harder acceleration related
yeah are using CSS rotation serve not
directly my JavaScript code can because
I didn't write the JavaScript code to
render math I just copied it from
somewhere on the internet I had a phone
windows I live this ticket but no it's
not a problem with CSS rotations because
the my guide first page has no CSS
locations so now we might have to skip
that one I don't have an answer for you
it would require a bit of debugging and
playing with the HTML in the code then I
haven't heard of this problem before
with the web views going blank we use
them in a lot of applications all the
time and we see them in a lot of
applications and I've not seen them ever
disappearing blanket on oh and the links
are working just a really strange thing
I if I click on the link it takes me to
another white page but I have to click
to push the back button once more so the
link is actually working the at first
and no
no I don't know why either sorry unless
you're making use of a feature the Nu my
passion for we might sure to try out I
get a phone which runs chrome because
then you can have the remote debugging
and so you can I mean you you said you
did not write a java script but you
could still use remote debugging to go
through step by step through JavaScript
and you might find the point where it's
where the problem starts and but I think
we have no answer for you right now ok
now playing with the I look I look into
this JavaScript code because actually I
didn't write a story to my to me problem
ok let's shift thanks for the question
again sorry we can help you thank you
hands quite specific to your your
application yeah thank you very much
y'all got any favorite questions to
follow up with so there's a question
here from andrew kelly about setting the
window background and to null in his
fing to reduce overdraw hmm and yeah you
ask not Mexicans I advised to do and you
can do it but you have to be extremely
careful basically if you're setting the
window background to milk you have to
ensure that every you know everything
you draw on screen has a background on
it you know if there is any component
you know like and we'll talk minutes
earlier like action bar tabs and so on
which have a null background of
transplant background then you're going
to get unexpected behavior so while you
can set the window background to know if
you know you're doing I'd advise you to
actually use the window background
there's a base color and you know remove
backgrounds from things on top of it
what if you can another thing to be
aware of is that when you're launching
your activity for the first time and in
order to get a very snappy performance
to have the app launch and Android is an
optimization where it will actually take
the background color of your window and
your action bar and and animate those
opening and then draw your app on top of
that to give this faster response time
and it's kind of a optimization or trick
and so if you're setting a null
background in your theme then we won't
be able to do that so you will get this
much slightly worse behavior
so for that reason I advise you to set
set a background color in your window if
you can and reduce the overdraw on top
of the background wake up so you know by
removing backgrounds on the views within
the am that's my advice yeah it is
there's another question from Andrew
Kelly regarding window soft input mode
um he basically has the problem that
there's some problem on HTC devices and
you're asking for advice on what's best
way to handle those issues with
manufacturer or having problems on
different devices um I think they're
there's no easy way or no best practice
to do it what I did in the past what I
was using a factory I had this one
object and I was clearing it and it
would return me an object i'm going to
add methods on that object in your case
it will be set window soft input mode or
something and so you you could only
create a factory and use this one object
and just call one method on object so if
you have different vendors this is
pretty handy but it still only work
around so there's really no solution for
these kinds of problems and they're hard
to find an heart attack so but i would
use a factory to do it one thing about
Silas is try not to add checks for
vendor or models or hear that try and do
it generically so so for this example
they divided the keyboard being open so
i think i'll give the example where you
can try and open source set the flag tab
stay visible on the ime options and then
in your on resume or maybe a bit later
check if the cables is open if it's not
then for see open as you would on htc
now let's try and keep it generic and
not add any sort of string checks or
anything like that and because there's
more portable air never do it only do it
if there's no other way around it all
right okay do we have a question in the
Hangout yeah i actually got a question
uh yeah first of all I stay from your
t-shirt walks yeah I know I got a
question about a spinner yesterday for
the first time I found myself having to
use a spinner and finding out if I
selected something that has already been
selected what I figured out is that the
own items selected of the own item one
item selected listener doesn't get
triggered if you re select an already
selected item um I did solve it by
making my own spinner and overriding the
set selection method but I'm just
wondering if that's the way to go if you
have some other advice on how to achieve
this why do you need this because they
were spent at the selected item at the
top anyway do you agree what was your
use case do you want to refresh or well
in our situation I have some columns and
I want to sort those columns that are
defined in the spinner and if I select
this the same item again I want I wanted
to sort ascending or descending whatever
it was before I think it it works the
way it should work because i was in your
case yeah I don't even think that it's I
think it's it's a it's a UI problem you
should maybe think about adding a
different button or a different spinner
to do the order or rethink your your
interaction because I think janet's it's
a bad thing I also would say it it's not
behavior you would expect to change the
order by clicking again on the items so
that's just my my subtle things you one
way you could do this is users on the
spinner but in your spinner listener so
when you're on our team selected listen
after then you fuck up you've done your
salt in or whether you then call spinner
dot set items slept selected item also
that's low
scientists 0 or minus 1 just so your
item isn't selected again so you reset
the selection yeah or you could in is
this going to be an action bar item for
sorting at this point in time it's just
a plain spinner okay I was gonna say you
can look at using well it's still work
actually you look at using the pop-up
menu up in the spirit spinner then you
have full control over all that's a
pretty common way of presenting these
options is using the like the overflow
menu in the action bar that the pop-up
menu I'll pop down from there alright
thanks guys welcome all right cheers
guys with that we are out of time again
for this week's office hours yes it's
tuesday has to come here instead but
thanks all for joining us and I'm I'll
look for that post on G+ ah Lucas it's
have you here today alegria else who'd
run this in the Hangout thanks very much
all right cheering all the way that my
right</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>