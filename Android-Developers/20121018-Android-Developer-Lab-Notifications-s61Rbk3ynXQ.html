<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>2012-10-18 Android Developer Lab+ - Notifications | Coder Coacher - Coaching Coders</title><meta content="2012-10-18 Android Developer Lab+ - Notifications - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>2012-10-18 Android Developer Lab+ - Notifications</b></h2><h5 class="post__date">2012-10-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/s61Rbk3ynXQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone welcome to android developer
lab Plus this week we're going to be
talking about notifications and this is
actually our second run time through
because we seem to have some technical
difficulties so hopefully we get it
right this time and with that being said
let's move on to news before we talk
about notifications so news for this
week is that we've launched a new
developer console and so if you've ever
published an Android app before or if
you've even registered as an Android
developer you can go to the your
developer console you'll publish a
console now and you can enable the new
console it's something that we we've
been working very hard towards we
announced its beta in at Google i/o
three months ago in June actually it was
bit over three months ago it was at the
end of June so three and a half months
ago and you know we're thrilled that we
can finally launch it to the world we've
had some very positive feedback but we
want to hear you continue to hear your
feedback so if there's something that
you feel is a could be better we
definitely want you to send us that
feedback the other thing we want to
announce is that we now support a couple
new bio currencies in India and in
Russia so you can actually now when you
publish your apps you can specify the
local price that users will pay in those
countries this is not seller support so
don't don't get that part mixed up yet
we're still working hard towards that
but you know this is a good first step
in stone for for Indian users and
Russian users so next slide please last
week we announced something that we call
a do plus experiments and a deal plus
experiments is basically a way for
Android developers to get involved in
some of the the AP is that we present
here on a deal plus and so we're hoping
that this is the first of many
experiments and basically what it is
that last week we presented on the
connectivity api's orani represented so
we're asking you to build something cool
with those
activity api's and showcase it to the
developer the Android developer
community you know so submit away we
what you need to do is add plus ADL plus
experiments on google+ and there's a
shortened URL them but you can just do a
search for it on on plus two and
basically add that page build your app
your apk share it with that Plus page
and let us know how how we should use
your app what makes it cool so we've set
up a cutoff date of the 30th of October
so it gives you several weeks to build
it and it doesn't have to be totally
polished it's really about the creative
concepts that we're looking at and you
know the the ones the apps that we find
to be much creative will try and bring
those developers on a deal plus in a
future episode we're trying to showcase
your app and yeah we we really want to
be just surprised and impressed by the
creativity the creativity of this
community so with that being said I'm
going to now hand it over the attorney
who's going to talk about notifications
Thank You longer ah so today our
presentation is about our notifications
and so before we dive deeper deeper
ticular the details of so let's do an
overview of like what notification is
for um so notification is really our
feature to allow developer to display
messages to to user outside of on your
application user interface um in it also
keep the user informed about some
important events that requires an
immediate attention um another use case
of identification is you can you can use
it as a kind of as a lock-in in a droid
that clinical events while the user is
not by using the form of paying
attention so when to use a display
notification so the primary use case is
really on like times as
events and also are usually these
fatality fans also in from other people
to the theatre owner some other use
cases could be using identification for
asynchronous or and directed information
but but in in these cases we recommend
developer to allow user to up in or out
to that that kind of notification so so
when not to display identification so
they are they're actually quite a field
like scenarios you probably don't want
to use on the dictation one example is
if if the user is already in your
application and the you the information
you you want to resend in the
notification is already currently on the
screen don't don't don't create
notification so also are low level
technical operations shouldn't be
included in the notification as well and
and sometimes like when you have errors
that think that that your application
can we cover those those are the stuff
that probably not a good candidate for
notification and finally if you if you
create if you just think about like
presenting on the diff occasion just
merely to advertise on your your
application or just wait for in the
rebus on those are not good candidates
for notification again and in those
cases you probably want to consider
building a widget to in order to keep
your user engage with your application
so so what's new in jellybean in terms
of notification features on so 11 main
thing we introduced in jellybean is we
we add which notification support and
and I will talk in detail about that
later
um so and another important thing
developers should be aware of is now in
jelly bean or later a user can now
disable a notification per application
so so that that's really actually give
developers I'm incentive to to to do
notification properly because now we use
our tenth completely dislike disable
your your your notification another nice
things we add in in notification is in
jelly bean is we added priority so in
the past developer has t probably choose
to use ongoing education in order to
keep the vacations sticky on on the
screen but now we have a better
mechanism to to handle different angle
on the defecation dick tip and priority
so notification up we dunno if you like
that your parking permit and with we're
really mean definitely it ok so I think
ok so for our before we talk about with
notification let's talk about the
standard the basic layout for
notification so this is what are we we
have big priority jelly bean so it's
really um the feel like components in in
a notification the content title there's
a lot I con on the left arm come and
also you can put some text under the
title and also sometimes content
information in the lower right corner
you can add a small icon and also the
time of your notification so good next
talk about which notification so this is
again introducing jelly bean and and now
one thing kind of special is in the past
we you need to create a
we will be able to to create my actions
but now actions are reading first class
citizen in the independent notification
framework it also a lot more flexible in
terms of science size and layout it can
grow up to 256 DP in height which is
what we call for unit of notifications
so in in the past is 64 d period of / /
/ notification so you can have four
times up to four times the size of a
notification you can you can use we we
had a priority so five different type of
priority and again use those priority on
response of the link so this is a the
big view I I was mentioning in for which
notification so pretty much like we
still have other or the old components
existing component but we we added a new
component on bullying called detailed
areas for for for the for the big view
yeah I just uh I just want to sorry Tony
I just want to emphasize their that
notifications are you know originally
they were just being used as a as a way
to do showcase instantaneous information
like hey you have an instant message but
you can see with all of this capability
that we're adding into rich
notifications it's a lot more than just
conveying you know instant information
you can see here in this screenshot we
can see the the list of gmail
conversations Tony talked about the fact
that we can have actions on there and
what that really means is that users are
able to interact with your app without
actually switching into your app so it's
a really great way to keep them engaged
without having them go in and out of
apps all the time yeah so you really
want to for some of the simple tasks
that are
user can quickly handle within the
notifications and then those are
actually what but those the action
buttons are for um and for the complex a
task is still recommended to do how to
be direct on user to your to your
application to do this way are ambiguous
like complex tasks and for simple stuff
you can really enhance the user
experience if you give you if you create
actions like within the notification so
so let's talk about how to create a
simple notification so one thing are we
add later in in our API in so we have we
now have a builder or two to build
notification so and also we we also
introduced something called notification
compat in the support library so that
that makes your notification
implementation like backward compatible
um so in it it doesn't uh it's not in
the sense like all the autumn in which
notification feature will be available
in in the in the older in device that
have a holder enjoy our questions but it
helps to make sure your co will not
break in in 0 in 0 android OS so that
couple of required content in for
notification so a small icon a title and
in the end the detail tax so this is a
code snippet on how to use builder or to
build a simple or notification so that
so so the next one next things i want to
go through is how to create a big view
so that ability of which notification
you I so it turns out we have a feel a
new style we make it really easy for
developer do to create a slight
big field so we have a field 10 plates
so so one of them is called in box style
so you can use the compatibility library
class in box style are create instant of
death and then you can have the content
title for both the picket view which is
a replacement of the small regular
content title and then you can add like
new lines with the details and then set
the inbox style as the style you use for
public content view so there are the
styles as i mentioned available so one
is called the big picture style so if
you are building some a social network
style like application or photos or
photo application that has a lot of
pictures you can consider using the
picture style our big test again of
course is if you have more tests you
want to display that's for what you want
to use and if yours if your application
actually involve like multi people like
messages or information so we can use
the inbox style so here is now by a
breakdown of like things like how how
the each different style what is
available in each style so title is
really 4444 notification in the normal
view we use a second end title and for
all the big deals we are using say big
content title is really a replacement of
the set content title content are small
icon will is available through
throughout the order Tom olympic view
are one carrier win Otis's like in order
to have that small icon to show up on
the screen you really need to set the
summary text um so large icons will
available across all different style
again and and for content tasks so
normal style you use site content hats
and but for big taxes actually not
available for big text we have a special
method copic tax then you can allows
your developer to add part the vision of
taxing in the big view ah big picture is
also again only available in the big
picture style and finally the summary
taxes available in all the big views so
so this is kind of a a nice summary of
bite what's available in different style
oh yeah I totally agree Tony this is a
this is actually a really really useful
summary that you can spend some time
trying to find this sort of information
so it's it's really useful one other
things i'll just add with the inbox
style is that you can actually add
multiple lines of text there's a method
called add line and it's quite
interesting in the way that it works
with whereas with big big text it will
actually automatically wrap the line and
try and put as much of the text in that
view as possible with inbox what it will
do is for each line if that line is too
long it won't wrap the line it will
ellipse eyes it so basically what that
means is it will truncate the text and
put a dot dot dot at the end of each
line so just a subtle difference there
that's also worth noting yeah there's no
time um so one thing uh probably you
want to pay attention is when when when
you when you when the user actually
click on the notification are you you
really want to preserve than the best
act in the navigation and um so so
here's how it works like you you have
you create an intent you want to create
pending intent that's actually what you
what do you do when you when you launch
something from from the
vacation but but there's one additional
step we need to do is to create a tete a
task that builder to to add the previous
like activity before on in this in the
back steps so that when the user hit the
back button it won't just go back to the
home screen but means that going to the
to your application just normally what
the user would would experience when
when he is he or she is using your
application so that that one thing is
you need to pay attention um this one to
talk a little bit about like like
removing notifications so there are a
couple ways you can do removing
application so of course like the user
can do this manually but if you if you
set your when your bill your
notification if you set auto cancel are
so this will automatically dismiss your
notification when the user at your touch
the notification of course again the
user can swipe left or right or two to
clear notification or or they simply
click on it it clear all button also
programmatically in your live in your in
your application you can use two methods
potential method provided by with with a
parameter of the notification ID or you
can cancel all the notification you
create so this is particularly useful
when when when you want to handle your
notification intelligently we talked
about that by in some of our talks
before to create intelligent
notifications like one example is if if
there are any if there are some events
that's that is already in the past like
calendar like could be a calendar
application you may want to actually
remove some of the irrelevant
notification because it's already past
that the events so also need method will
be useful for taking care of one of our
expired notification so just to
summarize again um so one thing is using
notification judiciously primarily you
want to only use notification but I'm
time sensitive information or things
that involve like people and keep in
mind to make notification optional
because as now in jelly bean or later
user can completely disable it so your
app should not have really features that
only other available through our actions
in the in the notifications so that's
very important and finally use
notification compat in the support
library to to take care of backward
compatibility so I just want to just
want to add to the the comment that Tony
said about using them judiciously an
example of where you would call it a bad
use of notifications as if you have an
app that preloads or refreshes every so
often it's not a good idea to use a
notification to say hey I'm doing this
in the background I am you know fetching
your your new your next set of emails or
your newsfeed that sort of information
is fairly superfluous it's the kind of
information that you could choose if you
wanted to show it within your app but
the notification is certainly not the
place where you would do that there are
exceptions where somewhere it's
something like a download because a
download is something that a user has
explicitly initiated so in a web browser
for example there it kind of makes a
little bit more sense because they might
be waiting for that file to come through
but certainly you shouldn't be doing it
just for periodic updates or anything
like that it's those two points about
being time-sensitive and and involving
sort of either the user or or people
that the user is familiar with it's a
it's quite an important
point right so so two things that can
help you too if you're really worried
about the user experience so two things
you can that can help you to do is to do
the address that is but one have a
settings in your application to make
notification or hot some of the
notifications like up a no optional so
the user had choice to do it the other
thing is if you think some of the
notification may be too low level or not
not exactly relevant consider using a
low priority notification LED lettuce
system at the framework handle handle
those ping-pong police for you yeah
actually uh one of the the games we
recently featured I think it was last
week or maybe the week before called
kingdoms of camelot I was trying this
game out and it's it's sort of like a
farmville type clones set up in a
fantasy world so you're building farms
and your your training Army's and
researching better swords and so on they
had an interesting use of notifications
where because the game is very much
based on real time so it will say
something like you can only build one
building at once and it's going to take
two hours to build it they use a
notification to let the user know that
hey the building is done so you kind of
remind you to get back in the game it's
a little bit more engaging now that was
kind of a nice way to do it for that
game and it's you know in those
situations you definitely want to have
that setting like Tony said to have an
option to turn that sort of stuff off
but that was a clever way of doing it
because it were the getting the user
engaged more with that title you don't
want to do it in just a you know a
periodic daily hey have you come and
launched my app recently or anything
like that but you know think about
really we always at Google we always
talk about putting the user first but
think about what is it that will add
value to the user from your app yeah so
I think for for the application another
thing that may also come to them and
what they are doing is they can holy
qurían which it as well so that that
may be also
a good options user engage with their
games all right so that's pretty much
what I have this week for the
presentation and less book one to kill
na i think uncorrupted do you have the
moderator well actually the first
moderator question was was by andrew
andrew kelly whose live with us today so
Android you want to just ask life Rachel
dollars and it was related to in-app
billing and I've got an app that has
in-app purchases for managed items and I
was just trying to work out if they sort
of uninstall the device are the the app
from the device and then reinstall it I
can call a method to get back their
purchases from the google play store to
see if you know what items they've
actually purchased but that doesn't seem
to your way of getting the details of
the individual items that they've you
know paid for and stuff so just going to
work out how i would do that without
having to store each one in a database
on my server yeah so typically the i
mean you when you do restore
transactions you are getting the
transactions back right like the
purchases you're getting that
information aren't you i don't think so
i mean the the callback message that
gets called just seems to return a
response object that says yes or no i'm
trying to work out which part of the API
actually provide elicited so what it's
supposed to tell you is hey does that
purchase mean purchased or not right is
that is that correct I guess what what
information are you trying to glean out
of it in your in your app because the
way the way managed item the way restore
transactions for managed items works is
that it basically tells you hey these
are the list of items that have been
purchased and just for the audience
managed items are typically one off
purchases they're not the consumable
type of purchases so once you know that
you've purchased a particular item you
know that it should be unlocked in your
app or available in your app throughout
so it won't give you necessarily all the
same level of detail that you get when
you purchase the item for the first time
but it should at least tell you the API
should be telling you hey that this
particular item ID has been purchased
and pretty much on a restore workflow
that that should be enough to get you
through you if you want to store the
extra information that we do on the
initial purchase and you do need to
store it on a server but I guess I'm
trying to understand is there is is
there something critical that's missing
on that restore transaction that that
you're not getting you're just going to
work out which bit has that list of
information because if i call the
restore transaction the callback method
is called on restore transactions
response and the only two parameters
that get passed back there is the
request and the response code and the
response got only seemed to say ok or
not OK doesn't seem to have a list of
the actual items as part of that
response I see um good question I'm just
looking that up but if Tony or any other
whilst i'm looking it up if you guys
know off the top of your head it's a
losing the flag at the moment the sort
of yes or no flag that comes back to
kind of hide my adverts because it seems
to make an in-app purchase i can have
removed my advertising but the managed
items in the game former progression so
you can only buy sort of level 10 after
you bought level 1 so I shop changes
based on which items you register
previously so I power need to know those
items so I can change my UI yeah to find
the way may visit a call back and I've
done yeah missing or something done let
me I I don't know it off the top of my
head but what I'll do is let me follow
up with you after this I'll look it up
and out and I'll get back in touch with
you lowers and we can we can take it
from there and we'll share the the
answer on next week's ideal plus
as well it's one of those things that
are it's hard to know all of this stuff
off the top of your head in it yeah this
this is one that we don't know off the
top of our heads okay next question it's
from NBC in Perth Australia are there
any code examples of using media codec
to encode audio I epcm to AAC I'm having
a hard time finding any information
about this class I never though attorney
do you guys want to chime in here oh
right I I just collected a sample from
CPS compatibly that's cheap which has a
decoder tested it and paste it on just
let me pull the link up so when we're
going to face this on the handout chat
so that you'll be able to see this all
right so I pulled up the decoder test
and below that decoder test class which
explains media codec and how do you each
lies that how do you create the output
buffers to decode and below that I have
tasted some snippets of four and they're
kind of follow a similar pattern at
least this is the encoder these are the
encoder API calls so you can probably
look at this and see a doll or something
let us know how that works free all
right cool yeah Andrew I just wanted to
follow up on that on your question and
if this isn't sufficient we will take it
will take it offline but basically what
should be happening is that you should
be when you do a restore transactions at
some point you should be getting an
intent saying purchase state changed I
would actually the same intent that you
received when you first made the
purchase no worries I've got that method
over it and so yeah maybe actually see a
bit more testing yeah yeah it sorry that
that part of the workflow should be the
same whether it's the initial purchase
or the restore if you do have any issues
with that reach out to me and i'll be
happy
to help out yeah no worries billion
thank you no problems just a couple of
questions from last week's ADL plus
there was a question about developer
having some map activity issues and that
we we had some discussions offline and
we resolved it basically if you saw the
the question last week it was basically
along the lines of hey my map activity
I've got a nap with that uses map
activities and on certain devices I'm
noticing that it crashes on startup it
turns out that those devices that you
that they were running on we're not your
standard Android devices that ship with
the Google services and so basically the
app was crashing because the Google Maps
didn't exist on that device the only
type of the only situation where you can
get those kind of devices are devices
that are not your google google play
certified devices so anything that ships
with Google Play which is where you know
this developer was distributing their
app should have google maps on it there
is actually some I pointed that
developer also towards some code that
they could add in their app where at
startup they could check statically
check whether the map activity classes
available and if it's not then degrade
the experience so that their app doesn't
crash but it doesn't provide the the map
capability that that might be there so
we were able to resolve that the the
other question that we had last week
that was unresolved what had to was also
to do with referrals so if you've got an
installation referral and you pass in
referral ids about that not being passed
around so that they weren't able to
track when actually coming were
installed as a result of other apps
referring them basically the the
resolution there was that they needed to
use a URL as opposed to an intent the
information that's passed in an intent
is is not necessarily used and what they
should be doing is passing in a play URL
with the extra parameters at the end
and then the referral ID will should get
passed through correctly so that's all
the questions that are up this week is
there anything else i need or Tony you
guys wanted to add no all right well
thanks everyone for tuning in we will
see you again next week at the same time
till then see you later go and don't
forget to as continue looking at the ad
0 plus experiments we're keeping an eye
out for those submissions all right
thank you see you light up by Andrew sit</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>