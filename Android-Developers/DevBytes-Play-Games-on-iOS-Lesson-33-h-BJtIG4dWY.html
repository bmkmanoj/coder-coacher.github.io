<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>DevBytes: Play Games on iOS Lesson 3.3 | Coder Coacher - Coaching Coders</title><meta content="DevBytes: Play Games on iOS Lesson 3.3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>DevBytes: Play Games on iOS Lesson 3.3</b></h2><h5 class="post__date">2014-02-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/h-BJtIG4dWY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome back so as you recall
in our last lesson we went ahead and
created these awesome leaderboards but
it turns out that they're pretty boring
because nobody has submitted any scores
to any of them and that's because we
haven't hooked up the logic to do that
yet so gosh we should fix that let's do
that in this lesson so I'm going to stop
our application here or I guess it is
stopped all right go and so like in the
last chapter we created a a Jeevan
manager class that basically dealt with
achievements I'm going to go ahead and
create our own leaderboard manager class
it's going to be a subclass of Venice
object and here we go now I'm actually
going to do kind of the hacky thing that
we did in the last lesson where we're
going to start off by submitting a
hard-coded string representing our
leaderboard I'm doing that mostly just
because I think it's easier to
understand the creation of our score
object this way and then we'll go ahead
and clean it up in the next lesson so
this is going to have one public method
at least for now and that will be submit
score and there's our in that represents
our score two liter board and this is
our NS string that's going to represent
our leaderboard ID now to implement this
there it is now as you recall in our
achievement manager the way we dealt
with achievements was by creating a gpg
achievement object that we created using
the class method achievement with ID and
we passed in our unique string
associated with our achievement
basically going to do the same thing
with our leaderboard manager although we
don't actually create a leaderboard
object we create a score object and this
score is associated with a specific
leaderboard that is going that the score
is going to be submitted to so let me
show you what I mean so we're going to
call gpg score scored to submit equals
gpg score score with leaderboard ID at
this point we can say scored to submit
value equals the score that we've passed
in and then we tell our score to submit
itself to the leaderboard so we would
say score to submit submit score with
completion handler we get back in our
completion handler two things we get an
error object and a gpg score report the
air object is what you would expect it
would display an error if something
shows up the gpg score report is fairly
interesting let's take a look at this so
first we'll do if error I don't know NS
log this is terrible and we'll have our
error localized message there we go look
lies description otherwise
that's just display this is your score
report but if you'll kind of notice here
we could actually look at the report
itself it's got a bunch of interesting
properties you can see here see it's got
a few bullion's for is this the high
score for the local player for all time
is this this players high score for this
week is it you know the high score for
this player for today and if it isn't if
it isn't any of those things if the
player had submitted a higher score
earlier we can then ask you know what
was that high score that the player
submitted earlier and so if we wanted to
for instance bring up our own
notification that said hey
congratulations you beat your old score
we could do that here we could do that
by basically analyzing the score report
and doing something interesting with it
in this case i'm not going to i'm just
going to put out to the log but that's
still pretty interesting i suppose and
then i'm going to jump it to our game
model here and i suppose after we've
gone ahead and incremented and unlocked
our achievements this would be a good
time to submit our score when you know
at this point in the game when we won so
whoops looks like i probably have to go
up here and import our leaderboard
manager here we go and then let's create
our own little property for our
leaderboard manager leaderboard manager
there we go and like our achievement
manager we can add some lazy
instantiation
there you go fantastic stuff and now we
can go down here and say hey is
self-doubt leaderboard manager let's
submit our score and this will be our
number of guesses to our leaderboard and
since I am going to be replacing all
this with an enum very shortly I'm just
going to go and hard code in the
leaderboard ID for our easy difficulty
level so let's go find our developer
console here and go back into our leader
boards and here's our ID for easy so I'm
going to copy this and we'll just create
it right here so there we go so now that
we're all set up here let's run this and
see what happens going to get into my
game I can see that hey look my
leaderboards they're still empty and
that's fantastic and let's go in and
play an easy game due to higher than 25
good Hey look at that four guesses
actually it's uh that's pretty good I
don't know if I'm going to be able to
beat that but we can look at the log
here and we can see that we've got our
score report back and our boolean is
reporting yes this is the high score for
this player for today and similar for
this is the high score for the player
this week and for all time and we look
at the high score for local player today
these values are all null I don't
believe this is an indicative of the
fact that this is the first time I've
submitted a score I believe these values
are always set to know if what you've
submitted is a new high score so you'll
either get the bullion's you know equal
to yes or you will get hey this is the
current high score is for the player
that you did not beat now if we were to
go back and play this again let me just
show you something here let me play
really fast due to now you'll notice
that my score report came back as know
the entire thing is null this is a
little quirk with the system I've talked
with the team I think we're going
to change this behavior but what's
happening right now is the system is
smart enough to know one this is a
leaderboard where the lower score is
better and that i have just attempted to
submit a score that's higher than what i
submitted just just before in this case
this isms as well i'm not going to
bother submitting the score of five
guesses because i know that it's not any
better than the score of four that i
submitted you know just a minute ago the
unfortunate side effect of that is that
i do not get a score report when the
library decides that is not going to
submit it for me i'd like to see us
generate a kind of a fake score report
anyway and hopefully that will happen
but i guess that may be the main lesson
to take away here is don't count on a
score report always existing you know
you might need to check and see if it's
nil and if it is you know take the
appropriate actions so so there you go
if i were to stop this by the way and
run it again let's try it again oops by
the way i can see myself here on the ec
leaderboard both in my circles and in
the public leaderboard i happen to be
first that's fantastic so let's play an
easy game here to do 20 all right now I
do get back a full score report and you
can see that my hey is this a new high
score for this player for today this
week all time are all set to 0 and the
high score for the local player today is
now a GP g score object that has things
such as the leaderboard ID value and the
format its core and so on and so forth
so you can kind of take a look at that
if you'd like again you can kind of
raise some interesting alerts in your
game based on that but at least for now
until we change the behavior the library
you can't count on that score report
always existing all the time so anyway
there we go we've now submitted scores
to our leaderboard this is fantastic and
if I had other friends playing I'd start
seeing them in leader boards as well
let's look at the next step here in our
application and that's going to be
removing this hard-coded string
replacing it with an enum sort of like
what we did in the last chat
derp but i guess with one minor
difference and you'll find about that in
the next lesson see you soon
haha
haha</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>