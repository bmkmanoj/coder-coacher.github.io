<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android 4.4: Step Sensors | Coder Coacher - Coaching Coders</title><meta content="Android 4.4: Step Sensors - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android 4.4: Step Sensors</b></h2><h5 class="post__date">2014-04-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yv9jskPvLUc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi my name is Lisa Raye and I'm a
developer advocate with the Google
developer relations team if you're
interested in fitness and you want to
give yourself or your users more
information with just the device you
already have in your pocket you're in
the right place today I'm going to talk
about the step sensors available
starting with Android KitKat these step
sensors are Hardware sensors based on
the accelerometer they're designed to be
low-power and won't burn through your
battery the step sensors count steps
during walking running and climbing
stairs and they're smart enough not to
count activities like biking driving
cars or riding in trains Android has two
sensors for step counting the first is
the step detector it fires an event when
a step is detected one event per step
the only value in return is one so if
you want to count steps you have to do
that yourself there are two ways to
receive events from the step sector
continuously or in batches if you
register your listener with a maximum
delay of zero then you'll get continuous
events posted as faster the sensor can
produce them the step detector has a
pretty low latency so the times at which
you receive step events should
correspond closely with the user's
actual steps on the other hand if you
don't need real-time reporting you can
allow events to be bashed by providing a
higher maximum delay you'll still get
one event per step but in this example
the events could come up as much as five
seconds afterward this allows for
optimization of the sensor level so be a
good Android citizen and only ask for
months as quickly as you actually need
them the step counter is similar to the
step detector and that it also sends one
event per step however the value it
sends is a cumulative number of steps
the step counter also takes a little
longer to process the event but it
produces fewer false positives so an
accuracy is paramount use the step
counter you can also request these
events as continuous or batched so how
do we use these sensors first check the
advice runs at least Android 4.4 and
that it has the sensors we want you can
require the sensors and minimum API
level in the manifest or if your app can
work without the step sensors you can
check programmatically for them using
the package manager
the simplest way to use the step sensors
is to listen for steps only while the
app is running unregistering and re
registering your listeners with the app
lifecycle and persisting the previous
step count to add to the new values
reported it is also possible to use the
step sensors in the background when the
CPU is suspended
this requires manually flushing the
sensor event queue before it overflows
speaking of listeners here's a sample
sensor event listener once you've
registered you get a callback to on
sensor change every time there's a step
event with some delay depending on
whether you requested batch mode this
listener is for a step detector here
we're implementing a set counter at this
point we can go ahead and display the
step count your listener will be
different depending on the type of
sensor and what you want to do with the
data to see this in action please
download the batch step sensor sample
linked from the video description for a
full working example of this code and go
take it for a walk thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>