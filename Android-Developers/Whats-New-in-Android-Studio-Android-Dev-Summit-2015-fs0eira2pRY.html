<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What's New in Android Studio (Android Dev Summit 2015) | Coder Coacher - Coaching Coders</title><meta content="What's New in Android Studio (Android Dev Summit 2015) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What's New in Android Studio (Android Dev Summit 2015)</b></h2><h5 class="post__date">2015-11-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fs0eira2pRY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Xavier do koi I'm torn or be
high and I'm Jamal and welcome to what's
new in Android studio so today we're
going to talk about three distinct
features idea enhancements build system
and the android emulator it's a first
topic the android studio enhancements so
going back at Google i/o we launched
Android studio 13 and there we launched
a whole host of features including the
C++ editor data binding and some new I
knew you I around SDK management over
this past summer and fall we worked on
new vector assets new h prof bug fixes
and a whole host other features around
android studio and today we're really
excited to talk about android studio to
point o today at the android dev summit
so feature since google i/o 2015 if
we're jumping into some of the to do
stuff i want to recap so the great stuff
he worked on in the past few months so
for instance we lost we launched the GPU
monitor the GPU monitor allows you to
look at your your app as performing on
your device and see the impact on the
GPU calls for your device we launched a
network monitor you look at the input
and the output calls of your device on
the network while running your device on
either on an emulator or a real device
app templates for the new output
templates we took a relook at those and
added things like at compact design
library to help you get started on a new
app or add new enhancement to a
pre-existing application theme editor
the emitter was a way for you to
visualize your styles and colors XML
together recap of how your your look and
feel is going to look for your
application and visualize those tweaks
as you do your app development and
vector assets to do one pain point we
talked about a google google was about
how to manage your raster assets
previously you would have to manage you
know 10 to 20 different assets / api
level
application today you can import one of
the vector drawable assets we provide
for you from the material library or you
can import when your own s e-g files and
place that in your application and
during build time we will automatically
generate all the raster images for you
automatically so you'll have to manage
one asset and that's just an example of
a few things we have Lynch X bit of
accessibility bi-directional support but
our test you I log cats and a whole host
of things and we and we're still
investing we're excited that we're still
working on things that make your life
more better as an app developer with
that will jump into the build system all
right Thank You Jay all right so let's
talk about the build system so it
working before we talk about in stature
and we want to talk about just general
build system improvement right instant
run does not always activate and so we
still wanted to make sure that the build
step would be faster than it used to be
so you know we know of a few butter legs
that are you know I'm sure very obvious
to you whether it's DX or prog out or
just the installation process so let's
go through a few of those so the first
fix that we did was we improve the DX
merger so when you build with Android
with a cradle and you have a lot of
dependencies we're going to protect all
of those dependent dependencies
separately running DX on each of them
and then at the end we have a merge
state now the algorithm was pretty bad
unfortunately it was a quadratic
algorithm and so more and more
dependencies that you're having a
project really slower it would get the
new one is linear if you have you know a
large number of the parentheses just the
DX merger step could be you know at
least an order of magnitude faster it's
available in 20 30 to which we ships a
few weeks ago so if your project is not
here to using that bill tools you should
definitely get it the second thing that
we did was we now run the X in process
so you know I said we run a lot of
predicting you know a lot of different
version of DX in parallel and for each
of those roots down the different vm and
you know that means you have the cost of
starting the vm that means that the GT
of the JVM does not have time to really
optimize the code and then it's really a
lot slower so we change that in plug in
20
it's also it requires build tools 2302
and it requires greater 2 dot for the
previous version would drop all the
plug-in code on everyone so that would
not actually work we recommend using two
at eight or two that nine anyway but you
need at least two that form a simple
setup just du/dx option you know texting
process equal true fauna it's false by
default we want to get feedback make
sure that there's no issue so let's look
at some benchmark this is iOS schedule
2014 there's about 15 or so dependencies
maybe a bit more than that as you can
see both build clean bills and
incremental build are much much faster
so that's pretty good so on the left is
you know the old plug in the old DX and
on the right is that you plug in the new
DX and DX in process now doing that has
some trade of that you have to think
about I'm sure some of you have done
something like that giving you know a
few more memory to DX now what happens
here is that every calls to DX will
actually get two gigs so if you're
predicting for different libraries in
parallel you have thought the external
parallel and each of them gets two gigs
and now all of them will be in the same
jvm so you will need to get probably a
little bit more memory the other thing
to think about is that this when we pass
that in your beloved Raider the griddle
JVM is already started and you cannot
change that after the fact right so it's
only to control external process so if
you have that right now in your build up
greater when you switch to the X in
process that won't do anything you have
instead to change grade all the
properties give it more memory you may
already have done that because like
proguard is already in memory and prog
out sometime require a lot of memory so
you will have to play with that value it
may not be exactly like you know four
times what you give to DX before because
there's different overhead but you
should play with the number do you
realize though that this is you know
long-lasting in the diamond the diamond
has a three hour time out so you know
this memory will be used all the time
while before DX was really no
fire-and-forget on you know the JVM
would disappear still it's a very big
speed game so you should definitely try
it right now we run up to 40 X in
parallels you can control that through
an environment variable you know Android
big sample size you know give us
feedback on the number that works for
you the memory and things
that and we may tweak the default values
later the second bottleneck I want to
talk about is prog out now proguard
works great you know there's no issue
you know if you're running it for your
release process not a problem the prime
starts happening when you have a really
big application and you have more than
65 k method and you need to shrink it
below the actual limit so when you do
that then you need to run program on
every debug build and it's slow the main
problem it's non incremental and the
second problem is it disabled predicting
and by that I mean that you know when
you run proguard the output of proguard
is a single jar which means that you
have to read X the whole application and
its dependencies every time and so
really wanted to fix that so we've been
working on a new shrinker it's
experimental right now the big thing is
that it has some increment allottee but
the big thing really is that it
disability it enables predicting so if
you have let's say your main application
plus ten dependencies the output of the
shrinker will be ten dependencies or ten
jars plus the jar for your code and even
if the shrinker has to do a full non
incremental run it doesn't really matter
if it only touches one of those jar file
the other nine jars will be the same and
greater allows us to just say you know
hey those jars are the same I don't need
to relax them already have text em
somewhere and that's again a big speed
game this is only the shrinker our goal
is not to replace program you know so
the configuration is prevalent it
doesn't do application it doesn't the
optimization it's only a shrink here for
debug mode only and you know the other
thing that it will arise in the future
is to do a legacy multi text faster as
well right now if you first train quiz
program to get bit others if you like a
limit but you're still above it you have
to enable the decimal sticks if you're
mean sdk is not less than 21 so in that
case what happened is the process is hey
we run together sometime because it was
slow the first time so let's running
again yeah and so here you know because
we control the code of the shrinker it's
easier to keep the graph of dependencies
and without codes and things like that
and actually run shrinker and multi
decks at the same time so that will come
later probably after to do we want to
stabilize first the shrinker for 40 dodo
it's not actually available right now in
alpha one of the plug-in it will come in
the next
in a few weeks this is how you enable it
so you do have to enable minify still
but in debug you would say use program
thoughts and in release you would say
use forgot you actually it's true by
default so you don't need to say it but
this is what would happen here the
result so if we look at here the first
thing I want to mention you know just to
go back to the DX mojo if you compare
the clean build on the first column and
the clean build with shrinking on the
first column you'll notice that hey
running progress faster ads because
again i said you know prog out disable
merging of DX and DX being so bad at
merging it's actually better not to do
it but anyway we fix that so on the
right column you can see that you know
we're quite faster than before almost
two decks and that is running the
shrinker in a known incremental way so
as soon as there's a change we rerun the
food shrinking if we run it actually in
an incremental way it's something that
is not completely there so I do not want
to show the numbers we get you know a
little bit faster again so it's not you
know like if you compare on the on the
left side basically doing a cleaner an
incremental build was just basically not
different and here we can get you know
hopefully you know at least twice as
faster than the clean build fine
crematory so that's quite good so that's
the changes for actually building now we
want to talk about deployment deployment
is slow we know a DB is slow so we
talked about it a little bit yesterday
during the keynote you know we'd have a
new adb push pull protocol much faster
throughput it's coming to the emulator
soon and with some system image at least
22 APR 22 and 23 and we'll back power
back later to two more system images so
the plane faster is great what we want
to do also is maybe Bush less right so
we have a new mechanism in a studio 1.5
that you may have noticed where when you
click the Run button we first asked you
you know where you want to deploy it to
and then we build and then we deploy and
before we would do first build and then
ask you so this is something that you
know it's not really did to what we
wanted to do but since we are doing that
now we figure out hey maybe we can do
something so as I first proof of concept
we decided to do it to target
specifically for your device in term of
density so if you plug a device with
mdpi you know why package xhdpi why
package
xxhdpi and all of that so apt does that
falls in a very smart way so if there's
some data I said that you do not have an
mdpi it will package another density
basically like the device will choose
right if you have a device that you know
has a density when you don't have those
assets it's fine some some other assets
to use so here we don't get a whole lot
only ten percent but you know this is
still useful but we do want to extend
that to more thing so the things that
you want to extend to for example our ad
is right if you deploy to an x86 device
why build and package I'm code let's not
do it all right so we'll do that next
and that would be for people who have
native code beginning and then we want
to do that for multi text as well it's
not really packaging it's more building
this time right now we tell you hey if
you have to use legacy multi legs and
you want it to be faster creative
violent for min SDK 21 and above so that
when you deploy it to let's say the
marshmallow device it uses the native
multi text rather than the legacy so
here we're basically going to be able to
that automatically if you plug it 21 it
will just relate with the native one you
unplug it you plug a different one and
it will use the legacy one that way you
don't have to think about changing the
variance and deploying the wrong guy on
to the wrong device and all of that will
just take care of that for you ok so we
saw building we saw deploying now you
have to install so i took this small
little app right i was scheduled five
meg that's not really big and i try to
install it on my nexus 6 and the install
was 12 seconds which is just 12 seconds
right it's awful i mean we have before
and after right it's like you know we
made some really good progress on
building you know 2.4 x that's awesome
and then we add installation and it's
just bad so you know 18 x is better than
28 sorry 18 seconds is better than 28
but it's still just way too slow so we
wanted to fix that and so that's why we
didn't start trying right we really
wanted to change the whole deployment
cycle from end to end not just focus on
building look at everything and we
wanted to do that in a way that worked
on all the devices as well so instant
run so what we want to do is we want to
deploy as little as possible so only
what changed we want to avoid it
studying because as we just saw it 12
seconds or more if you have a much
bigger application right it could be a
lot more and you know
just not kill the app whatsoever right
so to avoid killing the app it's not
always possible if you made a completely
structural change but when we can leave
it running that's what we called hot
swap so the app is just running if we
have to mess with your app in in more
significant ways but still leave it
running that's what we called warm swap
so a resource change will trigger a warm
swap cold swap is not in the preview
build but that's where we restart your
app in order to make bigger structural
changes so that your objects have
changed and of course the last one is
full rebuild and restore if you change
something for example the app icon we're
gonna have to do this because obviously
your launcher wants to see the icon we
can deal with that but every building we
reinstall is where you are today before
instant run so let's see what happens
actually when you do a full regular
build with instance right right because
we have to prepare your application if
you take a regular application build
with another version of studio we can
just go and replace the phone the fly
there it's just not going to work so the
first thing that you have started doing
is when you build with Gradle from
studio we kind of do something a little
bit different right so we kind of called
studio we we call grade oil with you
know an additional properties saying hey
you're in that special mode and then
Gradle we create additional task in
order to do more work than if you build
from the command line so will you no
will you do by code instrumentation
we'll add a server to your app so that
you can talk to it and things like that
so let's look at what it looks like so
this is a very simplified version of the
build steps right we have the manifest
merger that generate the final manifest
that we packaged with a PT and then we
have the Java CDX flow where we just you
know compile and convert code so the
first thing that we do is we stopped
fitting DX with your regular classes
right so we have a new API call you
transform API and I'll talk about that
in my other chalk on the Gradle plug-in
and so we are going to do that bike on
instrumentation and we're basically
going to add a level of indirection to
every method and constructor in your
code so that we can go and replace stuff
on the fly later then you know I
mentioned we need an app server because
to do we'll talk directly to the app so
we add that code to your app and then
you know we just send that to the X in
order to actually start the server and
add some just some class loader and
things like that we actually have to
change our manifest so we actually
instrument you know your manifest we add
stuff to it and we add a new custom
application class
you know and then we actually need to
add your that particular application
class to your code and that you know if
you have already your own custom
application class that the one that we
use will proxy and delegate to yours so
that it's transparent you know you don't
have anything to change right that was
one thing that we really wanted to do is
as a developer you should not have to go
and hack the code around to make the
appt work with instant and it should
just work and then the final thing that
you are doing is in order to make sure
that the connection between the app and
studio is valid we generate to build ID
on every bill to make sure that we know
what the current state is so when you're
hitting the Run button ni de this is
what happens so we first make sure that
you're actually using Gradle Tip O'Neill
and then we check the build IDs I've
just mentioned to make sure that the
device and Gradle are in sync because if
they're not if you've you know rent rent
your device from a different developer
machine or whatever it could be really
really bad if we put the wrong bites on
there that are incompatible then we make
sure that we actually talked to it so we
use the socket connection to the app and
then we check is the activity in the
foreground and if all that's true then
we run Gradle and Gradle is run with a
different task which basically would
build up the decks files it then runs a
verifier which makes sure that
everything that you've done in your code
is compatible with the hot swap and if
it is of course we can do a hot swap
otherwise we will do a cold swap and the
other thing we do for optimization is to
monitor that files you're editing in the
IDE and the reason we're doing that is
that that allows the Gradle plug-in to
do certain optimizations they're not
technically necessary but we're really
looking for latency avoidance and so if
I've noticed that you only touch java
files we don't have to touch the
resource task or similarly form only
touch the Java class anything so the
right now we only support hot-swap in
the main module we'll add that to the
sub-module but one of the optimization
that we do is if you change the code in
the main module and you just ask greater
to build it doesn't know anything about
the state it doesn't monitor the file
change at the moment and so it's going
to try to build all your sub modules
which will be up to date but because it
doesn't know anything it has to go and
make sure that all the fines haven't
changed and if you have dozens of
modules that can take a lot of time now
if you actually run it you will see you
know up to date up to date up to date up
to date and nothing change and that's
good but it
can't take still take some time if you
don't have you know an SSD if you have
slow I or whatever you know that's going
to take a lot of time and so studio
knows so studio tells you hey you know
only the main module change and then we
just you know something at the greater
plug-in we will just stop asking to
build those and then we won't even do
the up-to-date check and then it's much
much faster so this is what happens once
you get the actual file so here you have
studio on the left and then greater and
then on the right you have your app it's
running and it has a server and it has
that class that we just touched so you
know we call greater you know and then
here that's you know it's a custom task
it's not a regular as somebody buglet
you would normally use and we create you
know a text file that contains only the
classes that change it could be one it
could be two depending on how many you
change then you know studio grabs that
send that to the app server which you
know gets ready to use a custom class
loader to just load it now the thing
that's important is that when we load it
we don't actually load the same class
that you actually you know what we
actually yeah the class is there we
can't replace it so what we load instead
is the special version and that special
version is created by cradle itself
during the bytecode transformation and
it's just another ride of it and then
the observer will just basically call
you know modify the class here on the
left to delegate every method called to
to the override and that's you know
that's because that version of the class
is a special version as i showed in the
first graph where we had that by college
mutation we go and we add like lavelle
of indirection so here the observer just
big make the connection between the
original class saying you know hey now
when we call that method just go and
call that version instead so for
resource changes we're currently relying
on sending all the resources so we have
to run apt and it so if you have an app
that's really large with lots of
resources it's not going to be instant
so the instant run feature i think is
really after the hot swap case but there
is a incremental apt underway that's
going to really help with this a lot and
we have some short-term tricks we're
going to do to to send a smaller portion
of the resource file and once we send it
across the wire we then use reflection
hacks and i think there's no prettier
way of referring to it to actually make
that running app restart activity and
apply the
changes you made there are some
limitations to resource changes if you
change for example the app name or any
resource that can be referenced from the
manifest we know we have to trigger a
full rebuild and the other thing is that
we you know until the preview build we
had some special optimizations where the
our class was treated specially so we
would exclude you know field checks for
them but we saw some crashes so to be on
the safe side if you have any ID changes
as well so if you drop in a new button
in the layout editor that's going to put
an ID for you by default or even if you
have plus IDs and you reorder them
that'll change the values in our class
so those things right now will trigger a
a restart and so for cold swap this is
something that is not in the preview
build I will demo it shortly but that's
when you have any compatible change so
you've added a field which currently is
an incompatible change and so we're
working on basically making that be not
a full rebuild which it is right now
okay so you know there's a lot of things
happening under the hood by consume
attrition replacing class on the fly but
we wanted it to be as easy for you as
possible right the user interface for
instant run is just like the Run button
that you've used before all right so the
goal is that studio knows whether we can
do instruction whether we can do cold
swap warm swap how to have anything you
don't have to think about it you know if
there's a little lightning bolt right
next to the Run button then you know
that you know you have instant run but
you know just keep pressing that button
or using the shortcut and it will just
happen and hopefully the best behavior
the best scenario will happen you know
without you having to do anything now
because we talk directly to the app you
know and with sign stuff you know on the
fly you know something you could be in a
weird situation where we replace some
code but you know because the state can
be weird there is a stop button so if
you do that it will kill the app and
then on the next one it will do a
regular hopefully called swap at some
point but for now fully rebuilt and then
you have a socket or so to restart the
activity right there are some case we
replace stuff that we can actually apply
it so we have a shortcut for that all
right demo can we get stage two all
right so here is a old project you can
see it's using the ancient Gradle
plug-in 1.5 and if you bring up the
Preferences panel
and you go to the instant run settings
you can say it's telling me right now
that I don't have instant run because I
need to update my project what that will
do is it'll update the Gradle people
know but it'll also give you build tools
2302 which isn't necessary but really
it's gonna be much you should use them
anyways yeah and Gradle plug-in 2.8 all
right so here I'm going to switch to a
different project in topeka sample app
which I've already run on the device so
let me show you some of the instant run
stuff the first thing we can do here is
we can change some resources so CSS sign
in at the top let me open up the
translations editor and find the sign in
string and we'll just change it to
welcome sign in and if i hit the instant
run button it now performs a incremental
build a grabs total resource file and it
sends it over and it restarts activity
you can see it says welcome sign in over
here if i switch to the theme editor i
can make non string changes too so let's
for example go and change the primary
color to material red material pink yeah
we'll do red amba can also change the
status color for the device which I
thought was now I can't see it there it
is so we'll switch that to let's say
this one and again if i press instant
run the package the resources the app is
still running and it applies to those
changes so let's make some code changes
so if you look at this grid of icons
over here the number of icons this
dynamic is based on the size of the
avatar icons and the size of the screen
and it's done by this method right here
calculate spam count I can just go and
change this code let's say this is
hard-coded two three four now and if i
press isn't run you can see that nothing
happens and you can see that it was
saying in the toast we've made this
change for you but you know you may want
to restart activity and that's because
this code is only run on create right so
just because I'm hot swapped it doesn't
really make you know make the change
visually appear but there's also a
bubble we're showing in the bottom left
corner here saying hey you know you
haven't restarted pivot II would you
like to do that it's telling you what
the shortcut is for doing it or you can
also configure it by options so if I
first of all I'll set turn the option on
but also just applied manually right now
control shift are you can see if we got
our three columns and now if I switch it
to four for example and press ctrl run
you can see it's nearly instant right
four columns so that's basically the hot
swap case and the warm swap case with
the resources now I'm going to show your
cold swap so cold swap is not actually
enabled and the reason for that is
primarily that it's really really buggy
so you can see I have an option here
called demo only and that's because you
know this is not available in your build
but i'm going to show you what it does
when we hopefully get it working so
let's put their real code back in and
let me do some method extraction here so
i'm going to actually extract this whole
line will call it get avatar sighs oh
and the ID noticed hey this is a pretty
generic method let me try to generalize
that for you so now it's basically
turned it into something different which
I'll call get dimension and then we will
extract this expression over here to you
know calculate columns alright so now we
have some structural changes and because
i did a turned on cold swap if i hit run
now it's gonna kill the app and restart
it but it's not doing a full build you
can see it's little bubble saying hey
method added we couldn't really restart
it but now the app is back and running
and it's running a new code although
it's the correct code so let me change
it to prove that this new method can do
the right thing so instead run two
columns from the new method so that's
that's cold swap which hopefully will
get working soon the last thing I want
to show you is data binding so data
binding also broke for the preview build
we have it working in the night place
again one other actually let me just run
it first of all so this is a sample app
I found in the data binding code
repository I don't know what the app
means but it has some buying expression
so I can show you so while that's
starting let me show you the stuff we
have predated money now this is not
integrated in the previous a added code
completion for expression language
so here not only can i navigate between
symbols and into you know methods and
data objects we also have full code
completion here on all the attributes
and all that stuff so that's nice so let
me just as you can see in this app here
we have uppercase characters in some of
these name cards if I were to change
this to lowercase and do instant run you
can see that hopefully soon yeah it
applied the change and you can see it's
not lower case so data by name is
working to and that'll hopefully make
their binding and its and run work
really well together that's it for the
demo
alright so android emulator we talked
about the android emulator at the
keynote yesterday and we really wanted
to invest time and effort into the
product because we knew we use it all
the time as a developer but it hasn't
been as great as we wanted it to be a as
a team so the two things we worked on
first is performance the second thing
its usability and we think of
performance in three different ways for
the emulator it's around cpu GPU and i
oh so for cpu will be added to the
emulator as multi core support what
allows you to do is that you can
actually process your apps faster and
install them faster and get a more
performant experience in the emulator
for GPU if I just kind of strong
offering so far with the added
additional GL calls so you actually can
support more GL applications and get a
more performant experience while using
OpenGL ES and the third column we added
is I oh so zap touched on about adb push
speeds we also look at the i/o speed on
the actual virtual device in itself it's
like a little mini hard drive we
actually improve that very dramatically
in order to improve things like install
time and processing time so let's look
isn't data to sort of highlight that
particular data point and so we looked
at the google play store and try to find
the biggest not possible to kind of
highlight this particular scenario we
found one it's about forty five
megabytes it's quite extreme most
developers don't have apps this big but
let's just use this as an example so in
the past the emulator 1 dot 0 will take
just under 300 seconds to install and
push that application most of the time
as indicated by Zeb is that it's
actually on the install install part in
a few seconds you can push it across the
wire but takes a long time to process
that same application on the next 6 was
just under 150 seconds that's okay we
thought we could do better so the
android studio emulator 20 or now just
under 45 seconds for that same push
so usability so again the mother's been
around for some time we've had a lot of
great features but most of them have
been under command line not very easy to
use not very intuitive again you know if
you're trying to develop our application
and try out different scenarios it's
very difficult to remember some keyboard
shortcut we have shortcuts now but
remember some archaic APA to be pushed
command or some command just to give
your app running or to try out some
scenario so you decide to invest on a
new UI to address this so let's jump to
stage one demo please okay perfect so
this is the the new UI for the android
emulator we showed a little bit of this
at the keynote yesterday so of course
here let me just open up google maps
here a tree since all right so as before
you can use the emulator to type in
directly into the to the U is for
quickly typing so let's go to New York
and again with OpenGL we can quickly
render this really quickly with a UI to
render all the maps but in addition to
this allow me to enter in gps points
we've also allows you to input KML files
so here in the right hand side of a
table of GPS points and this right now
is a path I want to test out from
application so let me turn on the GPS
location here on the emulator let's
pressing that blue button here let me
speed this up to 2x for the demo here
and press play what's happening now is
that are now pumping in points to my
emulator this is actually the Googleplex
and you can kind of move through through
the employer experience and kind of
repeat that process for your
applications if you use location and
your emulation cool alright alright so
moving on to the next tab is around
cellular now some developers had asked
about hey you know how do you I don't
have some way to control the speed of my
network so let me kind of zoom into this
the top here okay so you can control
here on the network type I want to
change it to 2g if you notice here on
the notifications currently saying 3g
android changing this to edge will
change this to 2g can change that to e4
edge we pull that back to full for this
demonstration or if I want to change
things like hey what happens if i'm
roaming i can quickly change that on my
data connection that changes from the
eat or are for that icon or if you want
to see what happens with an application
has no no service or the sim cards out
how do i serve a similar at that
situation and here i can sum of that on
the cellular data tab as well again this
is us to help you out to figure out your
different authentic connections as
you're testing out your application
okay so moving on to battery so batter
here let me just open better here on the
cui great so as you can see here i can i
can move the charge level here with the
UI that's straight forward i can i can
say hey I wanted to be charging I'd be
an AC or not charging so it can change
the state that's moves it to not
charging so straight for it there just a
way for you to toggle that if your if
your app uses any battery kind of
configurations we now you I for you to
manage that as well great alright so now
moving on to to phone so at the keynote
we talked about you can actually receive
phone calls from the emulator that's
what your app does we also can send SMS
messages that that's switching to test
as well so in this case I set myself a
text saying hey don't forget the
marshmallows that's great we'll come
back to that so let me go back to the
sensors so at Google ILS pasture we
talked about fingerprint and fingerprint
is a way for you to authenticate your
application either for payments or for
security for your device and we've added
that feature into the emulator itself so
if you go under settings we have
fingerprint here under security great
fingerprint and here we can ask you to
add a fingerprint to unlock your device
you click continue here and this from a
pin says super secure for one's right
all right and then we have this
fingerprints happier and what this
allows you to do it has 510 input points
for 10 fingers on a your hands and let's
say I wanted to use my finger one touch
the sensor little it's authenticated now
you've added fingerprints into your
device and now I can use this for your
testing for fingerprint for your
applications
okay great so last few things here so on
settings you know if you don't like dark
we have the ability for you to switch to
like lightning if you that's your that's
your option here and seeing the lights
it has a light beam of your emulator so
you can see that now that works my
personal favorites dark so i'll put that
put it back to dark here alright and
then we're just going to close this
extended controls here so we talked
about the drag-and-drop capability so in
addition to being able to install apks
drag and drop it also allows you to
install media files let me go too masty
card and it's going to download here let
me rotate because rotates also available
here which is great so I can rotate that
very easily let me resize this so we can
kind of see this together in one screen
okay so I have a picture here I wanted
to get on this device so i can simply
drag this on to my emitter window and
there you go so this is my picture
so pictures they're great okay cool all
right that's uh so then let's let's go
to back to that SMS here so I see myself
that text message so let me just take
this back again so let's get back to
this all right and let's go to that
message here we go all right so that
there is that text I sent to myself all
right let's make this little bigger here
say we can see this right resize out the
corner and again with a keyboard i can
just type messages here on the keyboard
and so then lastly I'll say thanks for
coming to android dev conference whole
spell check sauce included here great
conference and send that's it great
disrespect the sides please so we talked
about a lot of different features here
at this session and so a few things
going to be available now so things like
DX merger instrum is available today in
the Canary channel and coming soon we're
adding the shrinker the emulator and apt
or actually the apts coming later on
this in a few weeks and so with that I
think that's yeah we have time for
questions we'll have a questions cool so
questions we were supposed to tell
people to line up oh yeah does some mics
over there so you need to go to the max
so that they were one can hear hi my
question is come can't Anjali emulate
the Android wear connectivity to the
android phone emulator yes so if you a
load up in Andrew where a B with a
device we automatically simulate that
Bluetooth connection so you can send
messages between your Android wear and
the device thank you
do you know if you can modify the
network settings in the emulator so you
can point to a proxy a local proxy for
me to use like Charles or something like
that to sniff network traffic you want
to set one time point the wife Wi-Fi
connection on the emulator to a local
proxy so you could sniff network traffic
like using Charles proxy or something
like that I don't think so what's the
stock afterwards I think do we don't
have Wi-Fi in addition because there's
only one network connection on the
emulator right now it's something we're
working on so right now you only have
basically the network connection but
it's something we want to fix it cool
let's go to the side hi you mentioned
the better GPU support in the emulator
which versions of es can we play with
now so we're shipping with Android ah
sorry Edwyn GLS 2.2 dodo and we're
working on three dot theater though yeah
thank you is that possible to round
instead of run from the command line no
there is the reason for that is that a
lot of stuff we're doing is the in
particular the socket connection is from
the IDE not from Gradle so the idea is
really central to instant run a lot of
the tasks you see like actually
preparing performing the incremental Dex
file creation is done you can just look
in the Gator calls we'll see which tasks
running at plus that command line flag
that was in saviors slide but no you
need you need ID so one question is
about the village is that possible to
simulate the same car we are going to
add some card soon yeah thank you ok hi
on the IDK side when will you be adding
support for building static libraries
and native only libraries from Android
studio so it's actually a good winner so
we just added and talked about it a
little bit in the next talk but cradle
but we just added well its support for
modules that only build native code ok
and we also just added in char module
dependencies because the DMDK is built
on the new version new API is on the
greater side to the plugins and in the
prayer
version we did not have in some of your
dependencies because they handled that
differently so we have intermediate
dependencies and there's an option to do
like your static leakage between
different modules so you should be able
to do that now okay thanks so the
android emulator currently sports doing
a fingerprint up by touching but it
really only supports happy path I you
either touch finger one or two and not
any of the like finger move too fast or
some of the error scenarios there any
plans to add that in yeah so it's not
gonna be the initial release for that
but we are planning to do add more fit
more fingerprint test kishan's thank you
also on the emulator excuse me is there
any support for other device sensors
accelerometer gyroscope ambient light
any of that kind of stuff yes so that's
in a future release we we didn't show
that today but definitely it's on a room
up to get that out yep I was wondering
for the connectivity settings on the new
emulator is it possible to simulate
partial or total packet loss so there so
there's a data drop connection that's on
the emulator it's it's okay we're
working on creating a more enhanced
version of that but today you can say I
want to like degra gate to 2g network
and they can simulate that such
situation today so you showed a demo
that simulated the location changes I'm
assuming that's intended for the
geofencing api testing that out and you
also mentioned the support for KML files
what about GPX files yeah so we parse
GPX and KML okay yeah so does what when
you're when you install with instant run
is that a normal standalone ap case if I
then disconnect the device takeaway is
that still going to work in the same way
or does it rely somehow I'm being
connected to Android studio still no no
it runs just fine yeah the only thing is
that it does some extra stuff like
listen on a certain socket but the app
is a self-contained APK that has
everything it can run anywhere great
things is there any sort of SDK so that
for some of these emulator features so
if we're running integration tests on
emulators and that kind of stuff we can
control some of the settings
yeah that's not in the first release
something been thinking about but we're
definitely plenty on working that yeah
well the new emulators support a
headless mode for continuous integration
servers so that same point so we we are
looking at that like the remote testing
application for that so we're different
plane to do that so the logcat view in
Android studio kind of is not great like
it's still doesn't have the column view
that Eclipse had I'm sorting your tags
and your time stamps and the filtering
doesn't seem to be as robust and half
the time it seems like it loses the
connection to the device well the
connection wouldn't be logcat we know
that a DB has been pretty flaky
particularly on some platforms and I
think the newer version of a DB is
actually better so you should definitely
install the preview version that's what
we use for the demo because instant run
really wants an ADB connection to be
reliable on the obvious other point
there's also so we also look at this
right you place lock at what we've done
is we in 14 we made log had quite a bit
better so before that it was terrible
now it's better although it still
doesn't have a table sorting part of the
reason for that is that we're actually
using a console widget which gives us
some other stuff for example we can
collapse stack traces and things like
that and a much smarter way with the
auto expand in one in the 20 preview
we've done some more work so actually it
might've been 15 we show dead processes
for example right so once your process
dies you can still find it in the in the
process list and for 10 X what we do
cold swap the process changes was very
important for us to actually associate
the two together so we've done that as
well but we know that we need to improve
it we have some work plan for it young
to rewrite the UI it just I usually use
it from the terminology so you can have
multiple tabs or you know you have
different sorting or Android studio is
kind of pretty inflexible about that
yeah we want to fix that
that's it I was wondering if you
consider the any impact of the bytecode
for instant run for developers who might
be using Matt and trying to profile
their apps considering you know so um
okay it performance tools and such right
are you asking about the overhead of the
in direction that more or less yeah
instrumenting the bytecode has to have
some impact and yeah I definitely
wouldn't do profiling on in the instant
run mode I probably turn off instant run
when I'm gonna measure in our experience
it hasn't been a noticeable like I would
say but you know results may vary I
guess I mean for memory shouldn't impact
it too much anyway you know there is an
instance of each of the right class only
for the classes that you replace of
course but you know because you
mentioned Matt right and so that there
won't be any there should be no memory
changes right we're not educating lotto
objects we're not doing any of that so
for memory there shouldn't be an issue
for performance yes you know there's
definitely something if you do actually
method tracing you're going to see all
those other rights you know delegation
and all of that I guess the main cost is
the stuff we add that counts door to see
if I came at the limit right right
that's another problem I guess I was
wondering if the bytecode had been
measured like you're testing with a five
Meg at the i/o app measured in term of
performance that's the difference in
size for example when your install using
instant run it's negligible I mean it's
very tired it's basically the same as
those numbers was a big kiss for five
megabytes maybe it's really tiny but if
you're dishing it shouldn't be
proportional uh-huh it should I mean
it's basically and in fact we only touch
your code not the library code which
makes a big difference so when you're
using large libraries like Play services
and design library napkin path we're not
going instrumenting those we only
instrument your actual app code that we
think
will change and so that's a pretty small
amount of code actually usually yeah you
know not necessarily know we are aware
of some code bases that are pretty large
yeah so did you want to talk about multi
dicks at all well one of the nice things
that as I mentioned is that we now
target it to the device you picked and a
lot of developers target newer devices
so if you're 21 and up we can use the
what is goin on legacy multics what's it
called its nato native melted x so we
don't do that yet but we'll do that soon
the one issue to think about for multi
texts if you're only get legacy multi
decks and your app is very close to the
65 k limit and you know adding that
extra app server and stuff like that may
bring you over the limit and in that
case you would have to figure out what
you do in your app to reduce the amount
of classes that you need upstart so
every time you're at a time so if you're
more questions please see us in the same
box over there and thanks for coming
today thank you
Oh</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>