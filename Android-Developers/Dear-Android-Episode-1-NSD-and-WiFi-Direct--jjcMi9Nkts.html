<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Dear Android: Episode 1 - NSD and WiFi Direct | Coder Coacher - Coaching Coders</title><meta content="Dear Android: Episode 1 - NSD and WiFi Direct - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Dear Android: Episode 1 - NSD and WiFi Direct</b></h2><h5 class="post__date">2012-10-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-jjcMi9Nkts" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to dear Android the
show previously known as Android
developer office hours we got a bit
tired of developers always trying to
show us off by asking us questions we
couldn't answer every week so we just
try to decided to try a new format for a
change
we'll be selecting the best Android
application development questions from
across the internet including Google+
and answer them for you here on YouTube
if you're watching us live which is
every Wednesday at 2 p.m. Pacific we'll
be hanging around for a few minutes
after each episode to answer any
questions about this about the current
episode so with that other way let's go
ahead and move on to this week's
question which comes from Dan CEO on
Stack Overflow whose user from Poland he
asks if I have a custom service that I'm
broadcasting via Bonjour and that I'd
like to either you know broadcast or
discover using Wi-Fi or Bluetooth is
this possible on Android to answer this
question we have Alex Lucas who's a
member of our Android developer
relations team who wrote many of the
doctors many of the Doc's about both
network service discovery and Wi-Fi on
our developer site Alex could you help
us answer this question absolutely so to
break the question in into two subparts
will Bonjour
like services work on Bluetooth and will
they work on Wi-Fi the answer is yes on
Wi-Fi no on Bluetooth thank you for
tuning in that's our show see Alex bye
so we should actually probably answer
this question in a little bit more
detail but to start with the Bluetooth
part bluetooth is a really great
protocol for lots of device-to-device
applications like streaming music or or
communicating with heart rate monitors
but on Android it does not actually
support TCP so what that means is you
cannot create a TCP socket and connect
to it over bluetooth to other devices
because network service discovery or at
least the Android implementation of
network service discovery run over TCP
this creates a fundamental and
compatibility between Bluetooth and TCP
that said it does actually work over
Wi-Fi all right
before we go into a bit more detail
let's give in to the background about
what exactly NS d is so NS D is network
service discovery which is androids
implementation of multicast DNS using
the DNS SD DNS service discovery
protocol and what this does is it allows
applications to broadcast to their
existence on the local network along
with connection details for that
application to any other devices in the
same proximity which would be any other
devices again on the same local network
so this is useful for things like social
applications games or even network
services like printers or web servers so
that way you can find out what devices
are nearby
when MSD broadcasts this information
over the network there's four
fundamental pieces of information it's
going to send over one of them is the
device identifier the device identifier
is often going to be either the user's
name or the device host name another
item is going to be the service name the
service name is often going to be the
name of the application for instance if
you have a game called replica Island
that you want to play with other users
over the network and replica Island has
a network service discovery built in the
service name is probably going to be
something like replica Island another
item is going to be the host address
which you don't actually have to enter
yourself a runtime Android will just
figure that out for you and send that
along in the MSD packets the final item
is going to be the port and I want to do
make a certain special note about the
port which is that for for mobile
applications the easiest thing to do
when you're designing the game or the
application is not actually to pick your
own port at runtime or hard-code one in
what you want to do is get a server
socket and set it to port 0 and what
that's going to do is it's going to tell
the android framework just give me
whatever port is available on on the
system when the server socket returns
the port number to you you then enter
that port number into the network
service discovery broadcasts the handy
thing about this is that if you for
instance had decided that you wanted
port 53 to be the one your application
runs on and some other application
developers decided that they wanted port
53 is the one that they're up
and runs on there would never be a
conflict and there would never be an
issue where these are had to choose
between your application or someone
else's application running at any given
time right it's a nice side effect it
means you don't have to request a
reserved port from naya-a
right now you do still have to go and
register your service name but it's as
simple as just filling out a simple form
and the chances there being a conflict
are pretty much non-existent yeah very
small you don't actually need the iaea
reservation for when you're doing
internal testing but as soon as you let
your application out onto the Internet
to roam free it's a really good idea to
get registered yes it's just good
practice yeah all right now we talked a
bit earlier about Bluetooth and even
though you can't use an SD on Bluetooth
there's another answer that we want to
give you a better answer and that's
called Wi-Fi direct Wi-Fi direct is a
peer-to-peer version of Wi-Fi so unless
devices communicate with one another
without having to go through an access
point this provides many the same
benefits as Bluetooth device device
connections but with the advantages of
Wi-Fi which means increased speed and
increased range this is available on
devices running Android for our above
that space Cream Sandwich and if you
happen to be running Android 4.1
jellybean
you also get service discovery now
unlike the traditional case of network
service discovery which we just
addressed Wi-Fi direct service discovery
will work even when you're not connected
to a network so think about that for a
second
devices running your application nearby
can be detected even if they're not
connected to the same network as you
that's pretty cool yeah what a my
favorite thing about that what that
basically means is if you're in a movie
theater waiting for the previews to
start let's say you you know gone to the
midnight showing or something like that
you have an hour to kill you can open up
the application and see who else in the
feeder or inline is playing the same
game you are and connect to them and
play a game having no idea who they are
it keeps them in physical proximity
right physical proximity which is
awesome because you know that the what
that the movie theater is not going to
have a Wi-Fi network there and they're
there probably a lot of them these days
actually are designed to block incoming
calls and signals and stuff
yeah but please don't use that excuse to
play the game right during the movie
right don't play during the movie
there's lots of helpful praise I tell
you that's just a bad idea and it's rude
there would be a bright screen and in
front of the people behind you and we're
not suggesting that but when you have
time to kill in line or before the
previews knock yourself out
now we do want to point out that it's
still important to implement network
service discovery for when you're
connected to a network there's a couple
reasons for this one of them is that
Wi-Fi direct is not going to work at all
when you're connected to a network
because of the way the underlying
technology works either connected to a
network or you're surfing around for
Wi-Fi direct devices the other item is
that there are a lot of services and
hardware that broadcast services that
are designed to be discovered on a
network examples of this are network
cameras and network printers now most
companies will not set up their network
printers to be Wi-Fi direct accessible
because that means anyone who is within
physical proximity who didn't
necessarily have permission to use that
printer could print out whatever they
wanted so that so being on the network
and requiring the user to be on the
network provides a a sort of permission
system or just a small layer of security
so really your best option is to
implement both Wi-Fi direct and NSD and
that way your application will have the
best of both worlds and increase the
chances of your users being able to
connect to each other no matter what
circumstance in order to use Wi-Fi
direct service discovery the the
necessary class that you want to use is
Wi-Fi p2p manager which provides an
implementation of DNS SD similar to the
way standard NSD does for more
information about how to actually
implement network service discovery and
service discovery over Wi-Fi direct we
have a training class available at
developer.android.com slash training and
we really recommend you go there and
read to the tutorial we also provide
some sample code and and it walks you
through a real-world example of how to
implement this functionality in a
pre-existing application and if you have
any questions about either ns
or Wi-Fi direct join us via hangout
after the live broadcast we will be able
to help answer those questions for you
right and if you have any questions for
next week's broadcast post them to Stack
Overflow or send them to us via Android
developers at Google+ and we'll pick the
best of them for next week's podcast
right and with that we'll see you all
next week thanks for joining us
bye guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>