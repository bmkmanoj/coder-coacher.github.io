<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Game On!: To The Web (and Beyond!) | Coder Coacher - Coaching Coders</title><meta content="Game On!: To The Web (and Beyond!) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Game On!: To The Web (and Beyond!)</b></h2><h5 class="post__date">2013-07-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5SFtGo8VHwU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to our second official
Google Play games show not a game show
but a show about Google Play game
services important difference yes
I'm Todd Kerpelman I'm a developer
advocate here at Google Play game
services and I'm Bruno Oliveira and I'm
a developer programs engineer in the
Google Play game services and we are
broadcasting actually from our advanced
physics lab where we are researching
very advanced materials like this
invisible Android doll
yes I'm I've discovered I now have the
x-ray app on my phone which is pretty
cool it looks through all sorts of
organic matter which I think they'll be
coming out pretty soon we're working on
so as you can see there's very advanced
and top-secret stuff that we have here
yes and this is in no way a green screen
not an IDE not at all I actually I did
not realize until I was in the studio
today that this is this is fake I
thought this was a real background so
we're letting you in on exactly on the
magic and I feel the real background is
right over there
this is just there's a camera there and
then there's a green screen over here
projecting the background that's over
there over here just so that we can have
this transparent Android doll it's
really just for the gaming exactly so we
are here to talk to you today about
building web games with Play game
services it's because I realized that up
until this point we've been talking an
awful lot about mobile we've been
talking an awful lot about Android and a
bit about iOS but you know web game
developers you're people to reveal of
and we're here to give you some of that
love in the form of a demo and a
presentation yeah yeah talking about
advanced stuff let's switch to a
presentation all right I thought this is
just gonna be like a casual talk but
like Bruno prepared slides so uh well
slice yeah so anyway yes so let's talk
about building web games using the
Google Play game services we're gonna
give her just a very quick overview of
how to set up your game because we're
not gonna go through all the steps
because we wouldn't have time but let's
just give a quick overview of the steps
so yes we do have a Web API for Google
Play game services and if you go to a
developers.google.com slash game slash
services and look at the left side
navigation menu you're going to find a
whole section there about
games so we're gonna find both the
client-side setup and the client server
setup so there are basically these two
options for web games you can either do
a client only setup where we have
essentially a client-side HTML and
JavaScript and no server component or
you can have the client server setup
where your client side essentially
serves as an interface and then the
server is the component that actually
makes the API calls we're gonna talk
about only the client side here because
it's simpler
but the the server side is also not very
difficult and the only difference is
that you have to pass your token to the
server and then the server is gonna make
the API calls but to set up the client
side so first of all you should have
done the the initial setup so you should
set up your your game in the in the
developer console first once you have
that done then you can now from the
client side you can start by loading the
API and then you authorize which means
showing the authorization dialogues if
they're needed and then you can start
making the API calls as soon as you get
the callback saying that you are signed
in so the setting up the game is
actually pretty easy and most of the
code is pretty much copy and paste from
boilerplate so just load the the client
jas and then you just you just write
that to initialize the the Google+ API
once you have that done you're going to
get a callback saying you are
authenticated and well I mean the API
are loaded and that's the point where
you should authenticate so if you just
call a gap either alt or authorize you
can start this authentication process if
you call it with immediate equals true
that's that's going to mean that the API
API is not going to show any pop-ups and
then if you call with immediately calls
false that means that poppers pop-ups
may be shown which means that you should
first try to authenticate with immediate
equals true and then if that succeeds
well that's very good and if that fails
you can call again with immediate e
equals false once the user clicks is a
sign-in button
I'll break in here and say immediate
equals true generally succeeds if the
user has signed in to your application
in the past this is usually for you know
returning returning players that have
already signed in they've already
accepted you don't want them to have to
press a sign
every time they visit your game and so
this call essentially tries to log them
in behind the scenes it's when that
attempt fails that you then say oh
alright you know maybe we should show a
hey click here to sign-in button and
that's on clicking that sign-in button
that's when you would make this call
with immediate equals false exactly and
the reason why this is not automatic is
that most browsers block pop-ups so if
you try and show a pop-up without the
user having clicked a button that's
usually gonna get blocked so this is why
it's important to first try to call with
immediate equals true and then if that
fails then you wait until the user
clicks a button and only then do you
call with immediate equals false so that
you don't get that blocking behavior so
next once you have your authenticated
you can either use the API have a
calling request for everything so you
would call request and then you have to
pass the parameters and so on
but there's actually a very very handy
service called discovery service and the
discovery service means you can actually
make the REST API calls in a much more
convenient syntax and to use that if you
have you first have to load your API
using that syntax which is capital
client that load then in this case I'm
loading the games API version 1 and then
this is the callback that it's gonna get
called as soon as they that API is ready
so when I get a call to own API loaded I
know that I can start making the calls
and the calls look much more convenient
than than what you would see with
requests so for instance if I want to
list the player's achievements all I
have to do is call capital client that
game store achievements are list and
that's gonna generate a request that I
can then execute and then pass my call
back and once the callback gets called
you're gonna get the the result of that
call so you can test you can check for
errors and if there is no error then you
can do whatever you want with that
without results in this case I'm just
iterating through the achievements that
the user has and then doing something
with them so this just illustrates just
you know in a few minutes pretty much to
you the summary of how to use the the
Web API well of course we do encourage
you to take a more careful look at the
documentation because there are many
more details to this so with that said
let's let's go onto the demo so this is
a demo that we've been writing called a
firewall defense so this is what it what
it kind of looks like this is a screen
shot this is the the first screen and
then when you play this the actual game
for those those of you who know me know
that I have a certain passion for for
Rito games with very big pixels so this
is one example of such game so I'm
running an instance the the source code
for this sample is available on github
but I'm running this source code on my
private app engine instance so this is
what you're seeing here so this is the
game running so I have this initial
screen where I show the the top three
the top three scorers in the
leaderboards
I have my achievements team I'm actually
already signed in so I either need to
click here but for somebody you are
playing the game for the first time they
would have to click Sign In then I have
the achievements over here so I'm
showing green the achievements that I
have and then in grey the ones that I
don't have so as you can see I've been
playing the SWAT but I haven't really
gotten a very good score yet unlike some
people in the leaderboards and then I
have the high score screen which shows
my my social leaderboards so the high
scores from my friends and then it also
shows the the public high scores from
everybody so as you can say I am as you
can see I mean I think in eighth place
no seventh place in the list no actually
that's eight better ten so I'm I'm
reduced to eighth place on my own okay
I'm not even on that top ten list
anymore but I and on your socialist
exactly so you are at 4050 points so
let's show the actual gameplay hopefully
the sounds gonna come out right let's
see so alright so this is where I try to
beat everyone's high-score so you have
these enemies that you can shoot and
then you they disappear then of course
one of the challenges of the game is
that there are not not only these
enemies but also these Allied packets
and if you shoot them they become
missiles that are going to try and
destroy your firewall once you run out
of firewall you lose the game and that's
your score I just scored 500 points and
of course if that score had been bigger
I would appear in the my place in the
indie leaderboards would would change
but my sport was not that big but I'll
try harder there
yep so that's pretty much the the demo
cool so let's bring up a few things that
people might be asking after after
seeing this demo the first is we noticed
that you know we were able to see a list
of achievements and a list of high
scores now on android iOS devices
they're widgets wait a minute I've been
informed I need to adjust my mic how's
that all right I got a thumbs up okay so
on Android iOS we have widgets to
display achievements and high scores did
you have widgets that you were able to
use here no come on if you're doing a
web game since every web game is pretty
much different so there are no
ready-to-use widgets but it turns out
that the API is actually pretty
straightforward you have to do that or
they have to do is call the load api's
and then you got a callback whenever you
have the data loaded so that's pretty
much what I'm doing here you know in
achievements and and the leaderboards I
just make a call to to the load API and
then when I get the callback I have the
data and then with the data just form
with my own HTML with that data and so
getting the data should be pretty
straightforward most of the work the
developers going to need to do is any
CSS magic that they want to you know say
make an achievement look nice versus an
achievement they haven't earned or that
sort of thing exactly so making
achievements look nice is not it's not
in the scope of the sample as you can
see there they look pretty disastrously
ugly so the what I'm doing here is I'm
just showing the that's this is actually
one of the things I really like about
retail games is that I can use that as
an excuse to have very poor graphics
that is true so this is just E and I'm
actually showing the the icon for each
achievement so when you're setting up
achievements on the developer console
you have the chance to upload an icon
for each achievement and that's the one
what the one that I'm showing the fact
that it's always the same is just
because of my complete lack of artistic
ability and I'm just using the same icon
for every achievement but if you had
different icon for different icons for
different achievements you would be
seeing them here cool I'm also going to
ask about now I know that we we talked
about during your presentation we talked
about calling gapi authorized to sign
the user in but I know that for this
particular sample application you're
using the Google+ sign-in box that
that's correct
that's correct so if I sign out and
hopefully nothing will blow up if I do
there we go so I'm using the
built-in Google Plus the Google sign-in
button so which means that I'm this this
actually saves me a lot of code because
instead of having to write gabador
authorize and all that all I have to do
is is just place the sign-in button and
set the the properties right this is
about yeah the sign-in button is like
you know three lines of HTML essentially
that you're putting them that kind of
does all the work for you the main
drawback and the the reason I think
we're showing use both ways of signing
the user in is that this sign-in button
has to appear within a span or within a
div and say for an html5 game like this
it's not a problem but if you were for
example great creating a flash game or a
Unity game or something or whatever your
game yeah we're being harder to put a
span on top of your game and you know it
would need to be outside the frame of
the game where people might miss it or
something like that you would probably
want to go with the more you know closer
the metal JavaScript Kathy Gaby not
authorized things are equi hall so I
mean both methods are both methods work
if you're able to use the sign-in button
that is the preferred way it also does a
couple of extra things behind the scenes
I think it makes you know loading the +1
button faster and and some other stuff
like that so I know that on behalf of
the Google+ team they would prefer that
you use this if possible if however you
know your game engine simply can't
render a div on top of it or it has
problems then go with the go with the
Gaby nod off that off yeah that's called
it for me so on the end the other the
other items to look out for which is
which was actually a bug in the initial
version of this game is that if the user
doesn't sign in you have to be careful
never to try and call an aid to make any
API calls when the user's not signed in
so notice that I'm not signed in but it
can still play of course none of my hive
scores are gonna be recorded and I'm not
gonna be able to unlock any achievements
because I'm not I'm not signed in but
this doesn't mean that I can't play so
the recommendation is make sign-in
optional so users can sign in if they
want and if they don't want you should
provide pretty much the same gaming
experience - the achievements and
leaderboards and so on and so forth so I
can I can still play it's still gonna
give me a score but of course nothing
none of that's going to
uploaded and if I click the achievements
button I'm gonna have this beautiful
alert dialog saying that please sign
into with Google to see achievements of
course you know you know in a production
application you shouldn't use alerts but
you should just integrate that into your
games user interface even better would
be to disable the buttons if only I knew
what the HTML code for great was so for
when you tried to call you know
uploading achievements before when the
user wasn't signed in what happened yeah
what happens you get JavaScript errors
okay so depending on the case you might
actually I survived it and all the
browser's just stopped because of that
okay yeah that's it's always a good
practice to check if you're signed in
before trying to enter any API calls and
I think we should probably point out
this is one of four different sample
applications that are available to you
as web developers that will all be
linked to from our downloads page so
this one firewall defense is the one
that actually looks and plays like a
game and you can kind of see the
potential and it's actually fun we also
have a pure JavaScript version of the
typer number challenge this is our
fantastic sample game where you can
enter a number and that's your score
it's definitely about our most user
friendly game yeah if you if you want to
score just type it you type it except
you're putting in hard mode cuz then
hard of all you want you only actually
get half the score you requested that is
true so yeah and that and that's what
that does demonstrate most of the major
calls in terms of achievements
leaderboards we also have the type of
number ajaxy PHP version which shows an
example of the client server setup that
Bruno had alluded to earlier in in the
presentation so if you actually want to
see what that looks like and before the
OAuth guys get after it I want to point
out the proper way to do it is to
request a one-time code on the client
that you then pass down to the server
which then exchanges for a token you
don't actually want to pass your oauth2
token down to the server if you can help
it so but all of that is it is displayed
and working in the PHP sample app feel
free to take a look at that and it
should be pretty easy to translate that
to other languages if
you're not using PHP on the backend we
also have the collect all the stars
sample application and that demonstrates
cloud save in JavaScript that's that's
probably something that you should look
at as well if you're at all interested
in cloud save and you should because
it's kind of cool we did not do a
client-server version of that because if
you have a server running then cloud
save probably isn't quite as interesting
but do take a look at that and hold on
I'm being told to adjust my Mike again
you know I promised last time that I
would wear a collared shirt and then I
forgot
so intercepts asleep perfectly still and
right well it's warm here in Mountain
View so I I went with the t-shirt today
forgot I was recording so we should also
ask what about what about cheating so
this is all the high scores are being
essentially generated and set up by the
client mind if I'm a you know JavaScript
game developer it what is is there
anything I can do to prevent cheating or
what strategies would you recommend well
actually on this sample that we we don't
know much to prevent cheating at all
because we want the source code to be
readable so we're not doing anything
like truly special here but oh but of
course if you're doing a production game
you want to take every possible measure
to make sure that people don't cheat and
that goes that starts with maybe
obfuscating your code and making sure
that it's not that easy to tamper with
it and so on
but of course people maybe people are
gonna find ways to cheat anyway maybe
there's a special there's a glitch in
your game logic that allows people to
get an infinite score or something like
that and what you can do of course is
you can manage that from the server side
and if you notice that somebody has
cheated and has an impossible score what
you can do is call the management API so
the management and api's are also
documented in our web documentation and
what they allow you allow you to do is
you can authenticate as the the owner of
the game so this means the user who
created that client ID and once you are
authenticated as the owner of the game
you can hide a player score hide a means
the that player that the other cheater
who has 1 million points they're still
gonna see that they have 1 million
points but after a high you hide their
score nobody else is going to be able to
see that they have that score so they
can go on and be happy that they have 1
million points but then nobody else
plays the game
is gonna see this sport anymore so he
can be happy alone and that's much nicer
than deleting the score cuz if it turns
out this was actually a fantastic player
who really did legitimately get a
million points you're able to unhide
them later exam we should also point out
these management api's work for mobile
games as well so you would need to build
a little web client to make these calls
but if you notice say you're building a
mobile game and there's some people on
the high score list that maybe shouldn't
be at the level they're at you can hide
those scores as well just by building a
little little web app that that would
make these calls exactly but of course
the the burden is upon you to make good
judgments of what is a plausible score
and what's not so what you don't want to
do is get you know I mean it's hide the
score from player who actually
legitimately has that score yeah so this
this is pretty much up to you so you
have to be very careful to detect when
cheating is actually happening and when
it's not I'd also probably point out one
of the best ways to deter cheating is
just focus on the social source like if
if I'm cheating on a public leaderboard
maybe I you know feel like I'm a bad ass
hacker because I hacked Google or
something but like if it's a social
leaderboard I've cheated my way to the
top you know I'm just a jerk like my
friends will exactly it's yeah exactly
all social leaderboards are they have
this automatic control which is nice
yeah which is nice hey okay
did my microphone just jump it's part of
our advanced technology how is laughs
awesome yes we should also probably
point out that if you're a flash
developer or a unity developer and run
or anything else developer practices
yeah anything else and you are looking
to make a web game like this as far as I
know you know on flash probably the best
strategy I would recommend would be to
make external interface calls this is
something that ActionScript has that
essentially allows you to make calls to
JavaScript from flash and then
JavaScript also has a way that you can
find your Flash object and make calls
into it yeah I think most browser-based
plugins or or technologies have a way in
which you can communicate with
JavaScript yeah and if you can do that
then you can call the api's from
JavaScript even if it's just a wrapper
you just write like it
wrapper over to the api's and JavaScript
and then call it from your wrong engine
yeah we really I really need to make a
sample flash game it's a I don't know if
I still have it installed to find out in
a while but uh but yeah I think it
sample might be good for for the flash
developers out there yeah and if you're
using anything else that's not web I
mean the the good thing about it being a
REST API is that it pretty much everyone
can use it as long as your language
platform or whatever has a way to
communicate with the interwebs you can
make REST API calls so like I mean what
if what if I make in a downloadable you
know exe game can I can I still do it
absolutely
hell you know well yeah you have to go
through the OAuth flow for for
downloading applications which is not as
fun as the one for web because you might
have to pop up a browser where the user
has to log in and authorize your token
but then users are pretty much used to
that on downloaded application so it
shouldn't be anything you so with it if
would I be able to like display a
browser like a browser window within my
game or would I be essentially kind of
tabbing out all tabbing out to like my
browser you know having the user go
through click clicking okay and then
going back into the game it's pretty
much I think up to every game but the
preferred flow is if you launch the
actual browser because I mean this would
only work so it works with an embedded
browser but the the users gonna feel
much more comfortable if you pop up an
actual browser because the whole point
of auth is that users feel very
comfortable typing their password
whenever they know that they are
actually talking to the to the owner of
that password okay they should be able
to look at the adat URL bar and know
that they're talking they are typing
their Google password into Google server
so that's the whole point of so
definitely prefer using an actual an
actual browser in their case all right
yeah and then from that point on I mean
once once you're you're over that
authentication part it's pretty much
very easy because then you have the
token and you can make REST API calls
using that token until it expires
I'll get my to have to renew it but then
it's pretty much straightforward cool
well all right I think do we have
anything else we're gonna talk about for
this session mmm I guess that's about it
all right well if you are a web
developer we're hoping that you found
some of this useful be sure to check out
firewall defense which is now posted
our github page along with all the other
fantastic JavaScript sample apps and
start adding some achievements to your
games because they're always fun yep and
remember don't tell anybody about the
invisible Android technology still beta
yes we're looking for our last intern we
haven't found it yet yep all right so
thank you very much and see you next
time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>