<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>DevBytes: Layout Transitions | Coder Coacher - Coaching Coders</title><meta content="DevBytes: Layout Transitions - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>DevBytes: Layout Transitions</b></h2><h5 class="post__date">2013-03-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/55wLsaWpQ4g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so today let's talk about animation
there was a lot of animation facilities
added in android 3.0 the honeycomb
release there's a whole animation
package and that's packaged in those
classes have been enhanced over time in
subsequent releases so we're going to
talk about some of the stuff that was
added in 3.0 as well as some stuff that
was added in Android 4.1 jelly bean in
particular we're going to talk about the
layout transition class it's a little
known class it's actually used a lot
internally in some of the applications
that we ship on Android and it's
something that we created to make
animation much easier for you I like to
think about animation all the time but I
realize that maybe some other developers
don't so if we can make it easier and
easier for you to get animated
facilities within your application
without spending a great deal of time
and thought on it then that's a good
thing right
so let's talk about layout transition
first of all we'll start with the base
application that doesn't have animations
in it and let's look at the code here so
we have a simple class that I've created
it's a custom view that I call colored
view and it has two States it has an
expanded and a compressed state and when
it's first added into its container it's
in a compressed State and it's going to
be 50 pixels high and when it's expanded
it's going to be 200 pixels high and we
can simply change those layout brands so
that when we click on this thing it can
expand or it can contract and so we can
see we do something really interesting
here we basically randomized a color to
make it a colored view so that you can
actually tell what the bounds of the
view are and then we allow you to click
on the view and expand it contract and
we can take a look at the demo over on
the screen to the right and see how this
works so we have two buttons up at the
top which adds new views of different
randomized colors or remove views in the
container and if we click on one of
these views it will expand and contract
as we toggle the clicks back and forth
and we can see other activity logic up
here that does that we have an add
button and a remove button we have the
container and we start out with two
views that we add to the container and
then when you click on the Add button
we add a view and when you click on the
remove button well we remove a view okay
not terribly interesting I don't think
I'd be doing this video if this was all
it was but now let's actually add some
animation you can notice that when we
add an item it just blinks into place
when we remove it it blinks out of place
and when we click it just automatically
expands or contracts that's not what I
would call a nice transition it's
certainly not a nice animation so what
can we do about that
well first thing we can do is add a
facility that was added in android 3.0
as I said before called layout
transition and there are a couple of
different ways to do this both of which
are simple but the easiest way is just
to tell the container where you want
animations to run automatically to
animate the layout changes so let's add
an attribute here that is Android
animate layout changes and we'll set it
to true we go ahead and save this we'll
run the application again
and watch over on the demo screen as it
comes up so starts out the same we add
an item you'll see we actually get
animated behavior just from that one
line of code in the XML file things
slide out of place to make room and then
fade in or fade out so you can see as we
add items everything around it moves out
of the way and then we fade the new item
in as we remove an item we fade out the
item and then everything moves around it
to compress the space that was freed up
by the item going away but when we click
on the items to expand and contract
obviously those are not animating those
are just popping into their before and
after state this was the behavior as it
was in a honeycomb you could easily add
this one line of code in XML you could
add something very similar to set a
layout transition object on a container
if you wanted to do it in code instead
of the XML file so now we go to Android
4.1 jelly bean release and we've got a
new facility in there that allows you to
actually animate more so let's see how
that works so if we come down to the end
of our on create method and we actually
get a reference to the layout transition
object that we created so we can say
layout transition
equals container get layout transition
okay we know there's one on there
because we set it in the resource file
but and similarly we could have set this
in encode instead instead of the
resource file anyway we know that
there's a transition there and we can
say transition dot enable transition
type layout transition dot change in so
there's a new type of transition that
we're going to take advantage of in this
release now if we run this file again
down pops up off the hand a demo screen
and now let's see what it's like so as
before when we add items we get a nice
animated behavior when we remove them we
get a nice animated behavior and we
would click on them we also get an
animated behavior so what we've told the
layout transition object is to animate
not only the default animations that it
knows about when items go away or come
into being but also when anything in the
container changes the layout so anything
that happens that causes a layout on the
container will make it look at all of
its items and say ok where are you now
and how big are you and where are you
and how big are you after the layout
runs and then it sets up animations
internally to animate those changes
basically animating the bounds of the
objects so kind of nifty and the best
part is this was what three lines of
code it's one line of code just to
enable the layout transition on a
container and then it's another couple
of lines of code or even effectively one
line of code to say oh I also want this
changing behavior now we change the we
added this facility in fourth I want to
allow this behavior but we did not
change the default behavior because it
could have been unexpected if people
were using layout transition already so
instead we added it as a facility that
you could add after the fact saying ok
enable a layout transition and also
enable the changing capability on that
and one of the things to realize about
layout transition is that these could
also be custom animations you can check
this out in API demos if you'd like
there's some dem
showing custom animations as well as the
default animations but the default ones
basically give you kind of what would be
expected which is when an item comes
into being we move everything out of the
way then we fade it in and when it goes
away we fade the thing out and then we
move everything around if you want
something different than you can
certainly create that so go ahead and
check out layout transition and the 4.1
jelly bean release and please play with
it and add cool animated effects to your
application thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>