<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Experts App Clinic: Best practices when building apps for billions - Google I/O 2016 | Coder Coacher - Coaching Coders</title><meta content="Experts App Clinic: Best practices when building apps for billions - Google I/O 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Experts App Clinic: Best practices when building apps for billions - Google I/O 2016</b></h2><h5 class="post__date">2016-05-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Fhj7IIsAgyE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello hello everybody good afternoon my
name is David Ostrovsky and I'm a
program manager in the developer
relations team at Google and over the
next 45 minutes together with two Google
developer experts Roy Ben Joseph and
Etienne Karen
will make you more aware of various
challenges that developers have while
building apps for billions but rather
than be taking talking about scalability
or actual user acquisition we'll take a
step back making sure our apps can at
least potentially provide the proper
user experience to a billion of users
will take into account huge diversity of
users around the world as well as topic
like connectivity device capabilities
data cost battery consumption and
content we'll be presenting you with
tools and discussing real-life examples
showcasing implementation best practices
as well as areas for improvement in
highly visible apps from Google Play I
would also like to invite you to our
space in the spaces up Natalie who is in
my team she will be interacting with you
over there so let's start probably every
developer who creates a new product
dreams about its worldwide adoption
success is often defined by hundreds of
thousands or millions of users but what
about billions is such a thing even if
possible yes it is just take a look on
those randomly selected apps Google
search YouTube Chrome Maps Gmail and of
course Android each of this Google
product is used by over a billion of
users worldwide and what's probably
quite important to many of you here in
this room when I mentioned Android I
didn't just mean the operating system
I meant actually over a billion of
30-day active users of Google Play
luckily all of those products serve as a
platform for you
to reach billions your billions so is it
possible yes is it easy no established
markets are saturated with apps while
emerging markets have challenges that
developers around the world are not
always aware of so even if you're up
with ultra viral or you spend massive
amounts of budgets on promotion chances
are your IP your app might not be
providing them with the experience that
would convert them into regular
customers why
well did you realize that over half of
the users in the world still might
experience your app through a 2g
connection or that data plans in some
countries they can be you know they can
cost upwards of 10% of the monthly
income maybe you thought that most of
the people on the Internet actually
speak English well actually 74% of the
online population does not at Google we
are more and more aware of use cases
like those just mentioned our mission is
to make the world information
universally accessible and useful and
why we believe that users have the same
fundamental needs keeping in touch with
friends being more productive at work
and so on the environment in which day
they are coming online mass media might
be different that's why we have launched
various efforts internally and
externally that aim at providing the
best experience regardless of the users
connectivity issues data plan
limitations or language they speak one
of the examples of line mode for Google
Maps now you can download all of you
know area of the word to the phone and
the next time there is no connectivity
like underground garage or the country
road apps Maps will work seamlessly
whereas before you could simply browse
the maps offline now you can get driving
directions third by turn directions and
information about places like opening
hours or ratings another example in some
countries including Indonesia and India
we launch YouTube offline when actually
you in the
blow up when you are signed in you are
able to download some movies to watch
offline later up to 48 hours also in
India and Indonesia we entered this
lighter and streamlined search results
and optimized webpages on average they
load up to four times faster than the
original ones and they use 80% less data
as our users overall experience became
faster we saw also fifty percent
increase in traffic to those optimized
pages it's also very important that you
can have a great experience online
regardless of language the users speak
with Google Translate we hope we help
moreover the with moreover the 500
million users every month to do
translations in 303 languages and we
estimate that with this 103 languages we
are reaching 99% of the online
population so building for billions is a
challenge but we work hard we collected
feedback analyze data and learnt a lot
now we are sharing those insights with
the broader developers community in a
form of an easy-to-use checklist you can
find guidelines recommendations and best
practices for both Android and the web
at developers.google.com slash billions
and remember by adapting those best
practices you are not only opening your
app for a new users in emerging markets
but also providing much better user
experience for those in established
markets so that was a glimpse of Google
effort in the matter but what about the
developers out there how do they deal
with limited connectivity varying device
capabilities data cost battery
consumption and localization to answer
that question I would like to invite on
stage
Roy ban yourself who is a program
manager at Samsung Innovation Center in
Tel Aviv
and at the end karo a mobile developer
lead at Shopify Thank You Montreal
they are both members of Google
developer experts program which I'm very
proud to eat globally the experts
program thank you the exodus program is
a global network of over 400 recognized
and influential technology professionals
experiencing Google technologies as well
as outstanding specialist in product
strategy marketing and design they
distinguish themselves by frequently
speaking at conferences sharing their
experience and passion by publishing
videos tutorials writing code samples
mentoring developers and startups and
much more experts are verified by both
Google and community and they are
acknowledged through a public directory
they benefit from easier access to
Google product teams are invited to
exclusive events and projects like this
one and they participate in early access
programs trusted personal programs and
so on some have opportunity to
indirectly shape the future of some of
the Google products by participating in
feedback sessions and customer advisory
boards thanks to their support
developers startups and technology
communities around the world create
build and ship high quality apps so
without further ado I'm leaving you now
with our top experts
hello everybody so we're gonna talk
about connectivity and as developers we
usually work in an ideal environment
right the network is solid we're gonna
test on somewhat recent devices that we
bought locally and truth be told we're
we often have a limited idea of who our
actual end-users are or what their
day-to-day environment is really like
typically we're only gonna come down
from my ivory towers when we start
getting reviews that look like this and
when these review start flying in the
damage is already done so we're gonna
explore today how to engineer apps more
suited to the real world at a very high
level the approach breaks down as
follows so you're gonna want to surface
problems by simulating the real world as
plot as closely as possible you're gonna
want to diagnose the problem by looking
at its symptoms and then we're gonna
talk about problem solving and
prevention techniques so let's start
talking about actual connectivity the
real world obviously is a very
complicated place and in the real world
connectivity is an unreliable thing so
think about your users on the train in
the subway or going up in an elevator is
your app really always gonna behave
reliably what about when one out of
three server calls fails and times out
so let's find out we need to see how our
apps perform under stress first we're
gonna want to slow things down Android
emulators allow developers to simulate a
various range of different network
bandwidth from full Wi-Fi all the way
down to GSM by writing a few functional
tests and exercising goes over a
comprehensive range of emulator setups
we can we should be able to find out
fairly quickly if our happiness behaves
in certain situations and when that word
calls start timing out the problem here
that we're still working in fairly ideal
lab conditions we don't just want a slow
Network we need a flaky one and that
usually involves a debugging proxy such
as Charles for example this Charles
allows you to limit the bandwidth and
the reliability of your network
connection with this type of tool you
can control the round-trip latency cross
packet fragmentation random
action failures and just degrade the
overall network quality however you see
fit after running our apps through those
gauntlets we now have data to work with
right likely we're gonna have a lie
system issues to work on we now need to
investigate and find out what the root
causes of these issues are when
investigating we can start by taking a
little peek at the Android studio
network monitoring overview at it gives
us a nice idea of what actual
communications are going on this gives
us hints but obviously we're gonna want
more details very quickly
again a debugging proxy like Charles is
very useful here as mentioned you can
use it to inject flakiness in your
network calls but you can also see in
detail what was sent over the wire the
timings involved and if you have the
right certificates configured on your
device you can start inspecting the
actual SSL and encrypted packets that go
through step though is actually another
very good tool diagnostic tool it will
allow you have amongst other things to
analyze the network communications you
can see the exact timeline of requests
again the size completion time all of
this from within Chrome one of the big
advantage with stetko is that you don't
need to set up special certificates on
your device and all that kind of extra
work since you're actually logging
information straight from the device
stress testing reveals and surfaces
potential problems and issues with our
apps and diagnostics gives us the
information we need to get to the root
cause and solve it but ultimately we'd
like to harden our application and
architecture it in such a way that we'll
be able to handle whatever we get thrown
at so knowing that network connectivity
is a transient thing and whenever a
feature of our application relies on
that we're gonna need a strategy to
gracefully degrade the performance and
the feature set the end goal is really
to try to avoid surprising your users
and it's a stay consistent so let's see
this concept that worked with a real app
make my trip there's an application it
allows you to book flights Hotel rail
tickets and holiday vacation packages we
can see an example here how it handles
connectivity loss when trying to book
the flight we get clear and concise
messaging with our call to action to the
user
that's nice there's a couple of other
screens for make my trip again we have
nice clear messaging with a cute cartoon
character so that hits all the right
marks there is the question of keeping
your error messaging consistent and
that's actually fairly hard to achieve
consistent messaging you need to take a
step back and look at your app at a
higher abstraction level from the get-go
so say we're gonna work with a simple
movie lifting app with three basic use
cases I'm gonna have a list of movies of
nearby theaters and we're gonna be able
to purchase tickets straight from our
app what can we still offer if we lose
the network here so let's apply a few of
these ideas to our example right we can
definitely using a cache copy of data to
provide you can provide partial
functionality for all the movie theater
listings obviously then we can prevent
users for starting certain use cases
such as ticket purchasing but what
happens if we lose connectivity during a
purchase we could always take the user
out of the flow
but that's gonna lead to lost sales and
annoyed users right so let's try to find
a way of gracefully degrading that for
the sake of the example again let's
imagine the simple ticket purchasing
flow finding a number of tickets
available for the selected movie showing
is the first step then we're gonna have
a selection of the number of deserve
desired tickets to put a hold on them
for say five minutes then the users
going to complete the purchase if we
take the first of these flows and focus
on it this is an example is the Golden
Path right but obviously we're gonna
need to handle errors here so we're
gonna want to be able to say try again
later if an error comes up but that's
still pretty irritating if the network
is kind of flaky around our area chances
are high the users are just gonna give
up on the purchase right so you can make
the flow more solid by simply retrying
the server calls when possible you're
gonna want to be smart about retries
consider using exponential back-off
logic in the right places I definitely
encourage people here to explore
something called our X Java a very
fairly popular library to solve that
kind of problem and when a request for
example finally does timeout or fail
after say 10 attempts like on this
diagram consider giving control back to
the users by giving them a try
or give up dialogue of some sort or if
you're clever about saving transaction
state what you could do is give a users
a way to complete the purchase at a
later time that say so these are a lot
of work and you know offering a way to
complete the transaction later when the
network comes back up people are gonna
appreciate that so a very simple example
obviously but the key concepts are as
follows think about the big picture
to avoid surprising your users be
consistent and when you surface
connectivity errors try to say the same
messaging all over the app keep the same
messaging all over the app and when an
error does actually occur try to save
your users work and allow them to
complete any given flow later if
possible let's look at another offline
example practice an app that brings
health and fitness to your phone you can
use it to save and share your health
records or book a doctor's appointment
and find a clinic things like that
fractal in this case partially supports
finding a local clinic even if you
aren't flying so that's actually great
value for end-users right especially
when you're looking for a consult if you
don't have the network you still need a
doctor that's actually pretty awesome
don't hesitate to be aggressive with the
offline caching of your data even if
it's not the freshest it can provide
really great value for your users when
connectivity is hard to come by for a
very lovely little development cost
ultimately connectivity is still the
game changer so consider that if the
internet is not available it's not the
end of networking at all modern mobile
devices would give us a ton of multiple
connectivity stacks so you know we could
use Wi-Fi direct to create a a doc mesh
network or you can use bluetooth to
share files between devices so if your
transactional in the main logics
supports it you'll be able to bring
great value to users even if you measure
the network latency in days instead of
milliseconds in the same vein don't
disregard mms and SMS in remote areas
even slow Network can be lifesavers for
years nurses and remote locations where
doctors were not available have been
sending photos of actual wounds to
doctors for prognosis so then you know
that provides awesome value even though
people are really remote
don't have a fancy network around so the
better we get to know our users in the
infrastructure available to them the
better we can serve them Hotel OTA is a
hotel booking management app and is a
great example of using an alternative
networking solution they developed a
strategic partnership with African
multinational telecommunications
companies and this allowed them to
provide dedicated data only sims to
their users the app also works offline
and supports SMS as a fallback
communication mechanism so now I'm gonna
hand it off to Roy don't worry he's
coming back hi hello everybody okay so
after do we discuss connectivity let's
discuss the cost of it all applications
modern applications require connectivity
and connectivity costs money
at least when you're on a metered
network like LTE or 3G or anything that
you need to buy a data plan for let's
consider the data plan like a battery
only you charge it with your wallet
instead of your wall socket now there's
no real analytics about how much is too
much but there are pain points to notice
and patterns to notice as well so app
size is important it makes a difference
why because if you see an application
that it's 50 megabyte and you're on 2g
and it costs 10 percent of your paycheck
it is most likely you will not download
that on 3G you'll wait for Wi-Fi same
goes for updates people will delay
updates if it thinks if they think it's
too big and they might not get the
updates and we all know as developers
updates are important so let's start
with dieting code trimming third-party
libraries to be exact borrowed code most
of us take these libraries were which
are very big and we only use like 10% of
them so the smart thing to do is to
carve out what you're actually using
which is a good pattern altogether
because then you'll know what you're
relying on and it also helps to reduce
the amount of code code duplicates as
well is a big problem so use lint to
find the code duplicates and refactor
them and you'll save 90% of that moving
on to something a little bit more
fattening which are images and it's also
a lot
easier to maintain them for instance use
lint to find all the unused images in
your applications you would not believe
the amount of data you'll save their
amount of space also take your PNG and
JPEG files and put them through online
compressing an optimized optimization
engines most of the size of your JPEGs
and PNG files are metadata that the user
cannot see like where was the picture
taken or who took the picture if you
reduce that where you might reduce up to
90% of the image size to do that you can
ills even though you can also go ahead
and use more progressive formats such as
vector drawables or nine-patches
or you can either eliminate resources
all together by tenting which is taking
a list of icons and then coloring them
in various colors or using the dynamic
resource content coloring which is the
palette API if you're not familiar with
these concepts then where were you in
the last two and a half years last but
not least you can compress just use the
can't remember the name ProGuard which
is also cyber secure but also compresses
the size so we got the diet all figured
out
let's go to day to day usage network
usage has one Golden Rule which is the
same as in all dieting simply think
about everything you're putting into
your mouth I'm downloading sorry never
download anything twice
if you tolling and just taking down
information it is most likely you're
downloading something more than once and
that's wrong there are many patterns
that you can use that help you know
exactly what changed and when it changed
like GCM downward messaging or like
staleness headers in in the server side
or diffs in the server side etc so use
them in order to never download it twice
be conscious of network type for
instance if you are on a Wi-Fi since
we're discussing price here if you're on
a Wi-Fi download everything cash
everything and they're on 3gb much
cheaper with your data and only download
what the user has asked for in what they
can see that just makes perfect sense
and you have handlers inside Android to
give you pretty much all of it optimize
back-end back-end
has a lot of power here most back-end
programmers are like programmers which
means they're lazy simply tell them how
much it would benefit if you change the
API to fit only what the user sees at
any given time and now how much it saves
in radio time and I can guarantee they
will not listen in you have to go to
their bosses but still you'll make a
good argument and if we're talking about
back-end let's also try and use new and
exciting stuff like flatbuffers or or
like GCM or like this or like staleness
headers they'd like playing with that
because you like playing with new stuff
so they should like it as well and
you'll save not only battery and data
costs you will also save type
performance Facebook and Google with
flatbuffers have reduced time with
loading their own apps for up to 90% so
not even data cost now let's go to
something a little bit different which
is battery consumption it's almost
exactly the same with a key difference
the cost here is implicit you cannot
it's not money coming out of your pocket
but it does have a cost and let me show
you how I'm in my office 9:00 a.m.
putting the phone in my pocket and I'm
working on emails or whatever it is that
I do at 11 o'clock I check my phone to
see if I have any calls or messages and
I see two sad things one of which I got
no messages and no calls because I have
no friends and the second thing is is
that I lost 37% of battery
that's an actual case by the way so
there's a problem here battery is life
for most people people live on their
phones so you have to be conscientious
of that now let's talk about the tools
that will help you as a good Android
developers help me as the user avoid
these kind of situations so first of all
the best example out there is the
battery historian is not that new
anymore and it's very helpful it tells
you exactly what portion of your
application service thread activity used
what energy non-efficient hardware
device like the GPU or the CPU or the
kernel or the job schedule or whatever
let's take an example this is the
application known as make my trip which
an already introduced you to as you can
see the amount of data that's applied to
you you know if the device
was rebooted you know how much time the
CPU is running if you have Wi-Fi how
much time did you scan what's the signal
strength temperature which I have no
idea why but I'm guessing LAN can
explain etc etc etc there's a lot of
data here that you can use in order to
help you know what's going on and just
give a quick round of applause for this
amazing 1/8 of 1% result for a full
nighter
make my trip I don't know if you were
here but kudos ok you can actually
applaud if you want to second thing does
not really involve around you but what
you need to be aware of those in standby
and if you don't know what that is
please get up and go outside but there
are tools that were implemented in
lollipop that are helping the device
self is it self itself from you and you
need to comply to it in order to be
graceful and to work with it
the tests are fairly easy you simply
plug in the device turn on your
application turn the screen off and then
plug in these bash commands which are
pretty straightforward then you turn the
screen on ok it's not that simple okay
but there's simple command it's just a
lot to remember and then you see an
example this is rounds rounds is a
beautifully made video calls application
that has handled this is a real test we
did an animated gif handle it well
beautifully it's and again rounded up
applause for rounds because I see their
CD alright right here it's gonna ok same
thing goes for dose that was standby
this is dose almost the same test only
different back bash command same result
they did their job just right it's
possible it's plausible okay moving on
radio radio is the thing that you use in
order to access the Internet so you need
to be careful with it because it drinks
a lot of juice sorry that's why I'm with
the speaker so it comes to a saying that
I like to say which nobody understands
but I'm on stage so you have to hear it
let sleeping radios lie but what do I
mean these are the practices that you
need to use in order to save their your
radio and your battery so the first
thing is use batch calls meaning that
you can you
either jobscheduler which was introduced
in android 6.0 or GCM network manager
which is exactly the same thing only
backward compatible for all apps that
have Google Play services from version I
have no idea
google it or sync adapter which does
exactly the same thing all the way back
but it's a little bit too complex it's
not to compress it a little bit more
complex to implement so if you do not
have access to these devices you sync
adapter it's it's plausible again and it
will batch the calls together so you
would not call the radio all the time
only in specific maintenance windows
which says battery never download
anything twice returning back you
remember we talked about it in data cost
so again same thing progressive service
client scheme changing the API using
downward GCM data or using GCM to update
what's changed if it's small enough
all of them are viable examples but the
most important thing is stop polling
polling is the worst the worst thing you
can do in an application and there are
so many patterns you can use so just
please for me for you now I don't for
the children I'm just kidding
okay so after we optimize the actual
request and the backend side and
everything else let's just listen to the
users you have enough handlers and
listeners telling you if the user
actually wants your day are right now so
if the screen is off it is most likely
that the user just doesn't care if it's
plugged into the to the electricity you
can do whatever you want to because the
batter we will never run out but if it's
not and you know the battery level and
it's low and you're the difference
between a brick in a working phone don't
update you have activity recognition
which is wonderful because it's not only
telling you if the user is present or
not it tells you context because if
you're a traffic app it makes perfect
sense to update more while on the go but
it doesn't make any sense to update new
scores while someone is driving so
context is key here and it gives you a
lot of information okay now I'm handing
over the clicker again for device
capabilities please welcome
all right so let's talk about device
capabilities Android runs in a multitude
of different devices that's no surprise
to anyone here there's different OS
versions screen densities processing
power memory storage all that stuff can
be very different from undivided 'next
so when going global your users device
will likely be very different from one
instance to the next you're gonna need
to have your apps optimized and flexible
and ready to handle all these different
use cases so another thing to consider
about five of the seven billion people
on earth do not understand English
localizing an app can be very
challenging especially if you didn't
plan for it so think of the different
character sets of right-to-left
languages and strings once translated
can end up 50% longer especially with
French and German so once translated
your carefully-designed UI could very
likely break so what can we do to catch
issues before we release well emulators
allow us again to configure various
screen sizes change the disk size change
of memory configuration and the locale
settings so all of this is great for
testing your UX but no emulator covers
all the different hardware
configurations that you're probably
going to see think about the different
hardware and the software software
drivers write x86 versus arm OpenGL 3
those things are usually not available
in emulators they can't tell us with a
hundred percent accuracy how our app
will actually perform on the real
hardware so ideally you're gonna want to
test your app on real devices one
approach is to build your own hardware
test lab that's usually fairly expensive
and time consuming when you think about
maintaining those devices making sure
they're up handling the random crashes
in etc right so consider using a testing
lab service such as for example Google's
cloud test labs between emulators and
devices testing labs we are now close to
real world conditions so we're ready to
test them and start hunting for issues
for UA and UX testing it's challenging
to completely automate the process how
do you write a test that validates if
the screen is actually ledger
or really usable or that the translated
you eyes actually still make sense
that's where human intervention is most
likely needed you might be thinking wait
if I multiply screen densities by
orientation and then again by the number
of locales I'm going to support yeah
that is a lot of screens so but if you
have the proper UX integration tests and
that you exercise most of your UI you
can actually take screenshots of those
you eyes as you go on the different
devices that you're testing on and you
provide those to your QA if you run a
diff tools on these images once somebody
has validated an image you only need to
look it over again once it actually
changes and you detect the Delta that
makes things a lot more manageable
benchmarks can allow you to monitor your
performance execution time of your hat
so even if you can't run them off of the
physical device by keeping the actual
benchmark historical data you can raise
alarms when runtimes change
significantly from one version to the
next of course this means you're gonna
need to keep that history in the first
place an actual easy way to do this is
to use your favorite metrics or
analytics tool platform using that data
then you can write all those tests
create alarms or even fail the test if
the numbers are starting to look bad
it's worth noting here on the slide you
see that there's a dumb six info a DB
command in there that one's very
valuable when you want to sort of
monitor the actual performance of the
rendering of the app so given the range
of screen sizes your app is going to be
running on your layouts will be anything
but static and that's really nothing new
right web designers have been dealing
with this forever so considering
exploring all that great literature on
responsive web design and draw
inspiration from it think of Bruce Lee
basically your layouts and content needs
to be like water and also don't feel
forced to write one layout to rule them
all don't forget you have all these
local specific classifiers that we see
here on the slide that you can use to
create exceptions to handle those corner
cases you can do stuff that you know you
can change the layout for certain
languages which are just taking up too
much space or
you know we accommodate the different
with subscreen etc right and here are
some of the most important strategies to
follow when you want to do responsive
layouts and responsive design so
alternate your layouts try to reuse your
view groups and fragments localize the
layouts when necessary
think about left to right that might
change some of those layouts pretty
drastically material design metrics and
key lines are really a nice tool to be
aware of here when you want to do
responsive design
use relative percent layouts DPS and
ESPYs for text and never use px please
it's for your own good
nine patches are nice and as VG's and
vector drawables are a very nice tool as
well when you want to do responsive for
memory I'm gonna keep it short simply
avoid the big pitfalls image loading is
a scary place usually and leaking
context is typically the one that
everybody gets wrong so keeping in usage
on keeping an eye on all that memory is
very important so consider using a tool
like leak Qunari to detect the leaks
early and keep things simple for you
right
then there's localization we've touched
on it so this is a well-known quote by a
French Canadian philosopher which
roughly translates to the following you
notice it's actually longer in English
and it was in French this case but
anyway proper localization is actually
super hard and this is one of the areas
you're gonna need to imply some tender
loving care if you really want to reach
a wider audience so these are the big
challenges right here we've talked about
the string length variants think about
things like numbers dates and time
formatting that will change depending on
your locale so will your currencies you
might have currencies that are gonna be
using different locales as well you're
gonna have different rounding rules
depending on the countries so remember
that locales are a language and country
and think of localization QA and think
about it early in the process you want
to catch that time where the translators
are actually sending you machine
translation since they're human
translations and charging you for it
how will you know if you don't speak
Japanese for example right so you need
to think about all those QA factors
they're very
so we're gonna pass over to Rory again
Thanks here it for a TN okay so I know
we've dropped a lot of information on
you and we're running low on time but
this is might this is the last segment
and it's probably the most important
because it's the one that's being left
behind most of the time so how do we
diagnose content it sounds almost
irrational okay Android was kind enough
to have a lot of tools into groups on
device or hosted devices now because we
don't have a lot of time I'm gonna do it
real quickly so if there's a tool that
you don't know about tough for you
because most of them have been around
for five years or longer so let's start
with strict mode strict mode simply does
a border on the under skin of an
application if you're doing to too much
work on the UI thread simple as that if
we look in an example with his go check
which is a location-based services
application out of Indonesia and it's a
beautiful application you can see it's
completely compliant because you see
absolutely no red border and trust me
strict mode is on so kudos guys if
you're here profile GPU rendering it
means that it tells you how long it
takes to render each frames in four
paths which are creating display lists
syncing the render thread issuing the
display list and swapping the buffers
and if it means nothing to you go talk
to run I don't know
here's an example with minth router we
talked about before beautiful material
design I'm gonna say it a few times are
live I love the app it's ecommerce app
the problem is is that you see the graph
below and it's most of the time it's
over the threshold and then you see
Peaks where I'd ranks that's exactly
what's wrong with it just imagine how
this wonderful looking app would look
better if it was completely performant
debug GPU overdraw is very important
because it's telling you how many times
you draw each pixels which tells you
what is the GPU overhead well you cannot
avoid all over draw but lower is better
so make my trip which we did mention
before again looks great and as you can
see first of all in settings it's not
transparent it's a good thing to she'll
make my trip is almost transparent and
it does so wonderfully but the
navigation drawer is almost completely
red and I hope it's because they use the
wrong third-party library so guys check
this out the funny thing is is this one
look at the scrolling it will scroll
down and you'll see that the images
become redder as they go this just
screams get few issues and it's a
perfect example of how you can find
performance issues in get views which
are completely implicit to the tools so
guys check it out other otherwise this
app is just beautiful host tools layout
and hierarchy hierarchy viewer is there
anybody who doesn't know hierarchy
viewer
excellent moving on now go right which
we mentioned earlier is a wonderful
example I love this app it's beautiful
it's clear but in this screen they have
14 layers which means that on my device
which was powerful and modern everything
was great but if you think of us of a
lower end device or an older device it
might junk as hell so I would check that
method and event profiling has systrace
which is putting the events in the
system in a tie line and it's very very
helpful it's also has trace view which
has trace mode which races the method
calls or it can check out through a
limited time which is something it's
called sample mode I am examining
fractal practice re with with systrace
because it looks smooth enough on my
device but you can see all that
information you can also see the frames
notice that the frames are right on the
video right on the place where they
paint it so sisters actually said that
one of these frame was delayed due to
the fact that it used too much UI thread
blocking over other thread and it had a
problem with background thread
priorities so it was delayed and caused
jank this is perfect actually tells you
what you're doing wrong and how to fix
it
allocation and memory profiles are very
important because allocations are very
important now you have three main tools
you have the allocation tracker which is
best if you have jank in specific
animations and you don't know how to
solve it will tell you exactly what you
do you have
m80 that helps you funny find memory
leaks and you have memory monitor which
puts a visual representation of heap
usage and it's very helpful for runtime
this is an example again for make my
trip a wonderful example we don't have
time to go into it but trust me it tells
you a lot so let's talk about pain point
if you have problem with UI
responsiveness pay attention to your
allocations use the memory allocation
tracker because if you're allocating too
much you're just stopping the CPU and
GPU UI should not be dependent on
loading the decouple rendering from
connectivity is important use caching
for this use all kinds of pattern for
this simply put them apart it does not
need to impact one another use the GPU
correctly if you do not know if you're
using the GPU correctly that's wonderful
use the rendering agent and the overdraw
to know if you're using it correctly and
you're using hardware acceleration
correctly
moving on to UX UX is even more
important your app could be absolutely
performant but still terrible so here
are a few patterns to help you not be
terrible material design is a good place
to start it alleviates a lot of aches
you really need to know what you're
doing if you're stepping out of material
design and I cannot stress this enough
cover oral end and empty cases if there
is a reason that you do not have content
on your screen it has to be apparent as
to why with a clear message and
preferably a nice animation to make the
people feel better a call to action so
that they'll know what to do and a way
to do it on screen so for instance go
check again now there right I had no
items and in progress or completed
they're absolutely right but to put a
blank screen tells me nothing it's just
kind of disappointing on the other hand
rounds have a wonderful screen telling
me that I don't have any chats yet it's
nice and colorful it has a button for me
to start a new chat and they're giving
me a call to action wait for it start
new chat
I actually know what's going on and what
I need to do and that's perfect this
example I don't have time for because
it's yen already mention it so we're
moving on to avoiding deprecated
patterns I see a lot of applications
that I'm reviewing that are using the
overflow menu the dashboard pattern the
action bar
they're old people that we stopped using
them because users don't like them
because they're cumbersome because
they're dated stop using them you have
plenty of new things to go practive an
is a wonderful application almost
everything is elegant and correct but
they're using the overflow menu on my
phone and has Android n it's not even m
and it looks dated it's only text while
make my trip
look at how colorful and wonderful that
is I think it speaks volumes last but
not least and I'm not gonna give an
example because I don't have time is
find out the places that has a lot of
friction smooth them out by
understanding the the users and smooth
and putting something then make them
understand what's going on so now I'm
calling a daveed again to wrap things up
and mention other stuff Thank You Roy
Thank You Roy that's all that we have
prepared for you today I hope you now
are much more interested in topics that
affect users around the world
connectivity data costs battery
consumption device capabilities and
content if you'd like to learn even more
please attend other sessions on building
apps for billions the one focus on the
wet who will be tomorrow at 10 a.m.
followed by the Android one at 3 p.m.
please don't forget to go to
developers.google.com slash billions to
make yourself familiar with the details
and recommendations and best practices
if you'd like to learn more about Google
developer extras program just go to
developers.google.com/plus experts
thanks a lot for listening and have a
great evening thing to Roy and again
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>