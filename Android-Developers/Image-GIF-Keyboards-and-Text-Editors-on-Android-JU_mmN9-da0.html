<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Image &amp; GIF Keyboards and Text Editors on Android | Coder Coacher - Coaching Coders</title><meta content="Image &amp; GIF Keyboards and Text Editors on Android - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Image &amp; GIF Keyboards and Text Editors on Android</b></h2><h5 class="post__date">2016-11-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JU_mmN9-da0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in Android nuga 7.1 that's API level 25
there's an exciting new API and it's a
total GameChanger it provides full
platform support for the most expressive
of conversational tools the jiff or even
gif keyboard even better than that is
not just in API 25 because version 25 of
the support library provides a backwards
compatible set of API allowing apps and
keyboards to support it all the way back
to API 13 that's over 98% of all active
devices so there's two halves to the API
the outputting of emojis stickers the
g-word and other rich content views by
keyboard devs and then exposing the
input capabilities and receiving the
media for use by app devs the flow goes
like this when the user taps on an edit
text the editor sends a list of mime
types it can accept to the keyboard the
keyboard reads those lists and displays
content of those types to the user when
the user selects an image the keyboard
calls commit content and sends that
content to the editor we're going to
look at the flow for app developers
first if you're the developer of a
messaging social or any other app that
can benefit from enhanced keyboard
support then by implementing rich media
this way you can accept it from any
compatible keyboard letting users choose
which they prefer to tell the keyboard
which content types you can accept you
override the oncreate
input connection method of edit text
then use editor info compact set content
mime types to populate the editor info
object with the mime types you support
its the editor info that's passed
between the app and the keyboard then
return your input connection callback
which you're going to use to handle the
incoming media when the keyboard commits
it many messaging apps have an edit text
at the bottom of the screen for text
entry and then a pretty message history
or conversational view above it we've
got a sample called commit content
sample app that displays edit text with
different allowed mime types and
displays the incoming media in a webview
it's available in the usual places in
Android Studios samples importer or
github repo another thing it shows is
requesting and releasing permissions for
the rich content being passed over
for input method editor developers gone
are the days of copying images to the
clipboard now apps can tell you what
content types they'll accept and you can
start flinging it across simply override
the on start input view and you'll
receive the editor info object that was
populated by the app and discover the
accepted mime types then you can
retrieve your current input connection
and commit the content ideally using the
compact version of the API s it's worth
mentioning that Android 7.1 devices will
use the native implementation and that
means you're going to need to grant
permissions to the content URI we've got
a sample IME implementation as well and
it's called the commit Content IME
sample you'll also find it in the
Android studio samples browser now you
can enable more expressive and exciting
conversations across your entire user
base excellent
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>