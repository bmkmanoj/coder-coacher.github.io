<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Media Router Framework - Part 2 - MediaRouteProvider | Coder Coacher - Coaching Coders</title><meta content="Media Router Framework - Part 2 - MediaRouteProvider - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Media Router Framework - Part 2 - MediaRouteProvider</b></h2><h5 class="post__date">2014-04-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BuHEhmp47VE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi my name is Lisa Raye and I'm a
developer advocate at Google today I'm
going to talk about media route provider
in the last episode we talked about the
Android support library media router
that was the first part of our series on
the media router framework the API for
any Android app to cast its content via
supported media routes to remote devices
in this episode I'm gonna cover media
route provider a media route provider
can be used by other applications to
control media content playback equipment
such as TVs stereos and home theatre
components if you are a device
manufacturer then this devbyte is for
you makers and media devices can publish
their products as media routes on
Android by implementing their own Mr P's
the providers can then be plugged into
the framework and presented to any
Android application that supports media
routes this approach allows applications
to control content playback equipment
without knowing the specific and
possibly proprietary interfaces to
manufacturers playback equipment a
sample implementation of media wrap
provider is the Google cast SDK which
allows apps to cast content to Google
cast compatible receiver devices such as
chromecast if you've used one you know
how satisfying it is to cast a video
from your mobile device to the big
screen first an important note the media
router framework we're examining here is
the one in the support library which
means that is backward compatible with
Android 2.1 and above it supersedes the
media router classes in the android
framework meaning that you should not
use them use the classes in the v7 media
router library instead so how do we get
started
subclass media rep provider and in the
constructor we register one or more
media routes using a media route
descriptor each route needs control
intent filters these filters tell
applications that use your route what
types of features are supported
including playback controls like play
pause rewind fast-forward etc cueing
features or playlist management and
session features meaning Android device
to playback device connection management
you can also set many other capabilities
of the route such as the playback type
which can be remote playback or
secondary output the media type can be
audio or video the volume can be fixed
or variable and intent filters we just
discussed defined playback controls such
as basic play controls cueing and
session management
next you need to implement a route
controller class that extends media
route provider route controller this
class handles the actual media control
requests from other applications
supported by your route anything you
defined in your intent filters including
playback controls cueing and session
features this route controller class
accesses the wrapper for the proprietary
interface to your media playback
equipment this is where the magic
happens
your implementation will depend on your
specific media device and finally it
should be instantiated in this helpfully
named method oncreate route controller
of your media route provider next is the
service wrapper to enable other
applications to use the provider
immediate provider should be wrapped in
a service to do this extend the media
route provider service class and provide
an instance of your media route provider
from within the class you can make a
media rep provider private within the
scope of an app by simply calling media
router ad provider
no service needed but in this example
we'll make the media rep provider
available to all apps on the device to
do this our application must declare in
the manifest a service declaration for
the media rep provider with an intent
filter for Android media media route
provider service this service is the
same one we just looked at
finally the provider should watch for
changes to the discovery request by
implementing on discovery request
changed in this method we kick off an
update of the media routes the provider
describes by finding the routes that
satisfy the new criteria specified by
the current request to publish them we
create a new media route provider
descriptor with information about each
route and call set descriptor again this
notifies the currently registered
callback and this process usually
happens asynchronously if you are a
manufacturer of media playback devices
or you work with one the media rep
provider is for you Android devices
everywhere can be casting to your MRP
shortly please take a look at the docs
and sample code and get started my name
is Lisa Wray thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>