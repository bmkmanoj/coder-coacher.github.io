<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>DevBytes: Restricted Profiles in Android 4.3 | Coder Coacher - Coaching Coders</title><meta content="DevBytes: Restricted Profiles in Android 4.3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>DevBytes: Restricted Profiles in Android 4.3</b></h2><h5 class="post__date">2013-07-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pdUcANNm72o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi I'm Richard Hyndman an engineer on
the Android developer relations team
with the launch of Android jelly bean
4.3 we've seen some great new features
for users and developers alike and I'm
going to run you through restricted
profiles in jelly bean we announced
multiple users so you could share your
tablet easily with your family members
everyone would create their own profile
signing with their own Google accounts
install that wraps and just use it as if
it was their own tablet but if you were
sharing your tablet with a child this
sometimes got a little bit complicated
you probably create them a profile but
then sign in with your own Google
account install some apps maybe you put
a pin code on the Play Store change the
synchronization settings
maybe disable some apps just really try
and make it a restricted safe
environment for that child to use with
restricted profiles this has become a
whole lot easier restricted profiles are
based on the primary users profile they
share the account the Google account and
the applications of that primary user
but in a restricted Lanna the restricted
users don't get access to your gmail
calendar Play Store or in-app purchases
the primary user can choose which apps
they can access and whether those apps
can access things like device location
as a developer the restricted profile
API allows you to offer up fine-grained
control over your application and your
applications restrictions and the user
manager has also been extended so your
application can find out what
restrictions are being imposed on it
application restrictions are managed
under the device user settings so when
you create a new restricted profile
you'll see a list of all the
applications and you can choose which
ones are available and your application
will automatically appear in this list
but if you have specific settings you're
going to want to let the platform know
about them so how do you do that you add
the intent filter into your Android
manifest further get restriction entries
this is going to prepare Android to add
that Settings button in the settings
screen like this so here we got the
Settings button and when you press it
it's going to populate with your
restrictions here we've got some example
restrictions full restriction enabled in
this particular app you can choose
whether or not the
the child uses the restricted user can
change the language or access any in-app
items so to populate these settings the
system is going to broadcast the action
to get restrictions intent to your
application and it's going to expect
that you returned with an ArrayList of
restriction entries in the bundle so in
the broadcast receiver when you get the
broadcast the first thing you want to do
is called go async on the broadcast
receiver this is going to keep it active
and also give you a pending results
object to return your restrictions in
then you create an ArrayList of
restriction entries and put it in the
bundle and return it we've got three
different types of restriction entry we
have the boolean type just on and off
we've got the check box single select
from a list and we have multiple
selection from a list three different
types and looking at those in code we
have three different constructors for
those different types of restriction
entry and all of those constructors take
a key so that later on you can retrieve
the setting from the system
and also a default or current value here
we've got the brilliant ID and then the
single choice type maybe in the single
choice type you want to use it for the
content rating of the content available
to restricted user so you can have a
single choice of under 12 15 plus
whatever and then you just choose one of
those and make the content in your
application relevant for the user and
then the multiple choice type is going
to take an ArrayList of strings for the
default so now the system's asked you
for your restrictions you've returned
them in this bundle and ArrayList of
restriction interest and then the device
owner has been and set the exact
restrictions for their child so the
final step of course is going to be to
retrieve those restrictions from the
system so on resuming your application
you can recall the restriction set by
getting hold of the system service for
user service and then get the
application restrictions for your
package of course this may come back
without any restrictions in it in that
case you'll be running in the device
owners or unrestricted profile but if
you're in a restricted profile you'll
see all the restrictions you can collect
them back from the keys that you
specified earlier and find out the
settings that there are if you don't
want any specific settings but you just
want to find out if you're in a
restricted profile at the
and you can call get user restrictions
and just check if that bundle is empty
or not if it's empty they're not
restricted and if it's not you almost
certainly in a restricted profile so
that's how restricted profile works but
there is of course just one more thing
if you'd rather have your own nice tidy
UI inside your application a single
place to manage all your restrictions
that when the device owners run your app
they can see it and then when they go
through settings and press it it
launches your activity instead of
launching instead of showing the
settings directly in the settings screen
you can have custom restrictions so when
the get restriction entries broadcast is
broadcast out to your app instead of
returning an ArrayList of restriction
entries you can return an intent to
launch your custom activity this is
similar to the way it works for battery
users data usage things like this where
you can launch an intern into your
application to show your own screen so
that should be all you need to know
about restricted profiles they're
especially useful for content-based
applications and I'm looking forward to
seeing what use cases you come up with
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>