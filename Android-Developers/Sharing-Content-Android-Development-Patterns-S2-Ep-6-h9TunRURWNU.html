<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Sharing Content (Android Development Patterns S2 Ep 6) | Coder Coacher - Coaching Coders</title><meta content="Sharing Content (Android Development Patterns S2 Ep 6) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Sharing Content (Android Development Patterns S2 Ep 6)</b></h2><h5 class="post__date">2016-02-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/h9TunRURWNU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this little icon means sharing and it's
awesome on Android you can build an
action send intent yourself but I prefer
using sharecompat and shared text with
just a single command I mean like and
I'll go through what it takes to
correctly share content other apps as
well as receive that content what kinds
of content we saw text but how about
HTML formatted text files images is such
a thing even possible yes it is so let's
just do it share some text sharecompat
does a hard work of constructing our
intent you just have to make sure to set
the mime type this is how apps filter
what type of content they can receive
then call startactivity we wrap it in
resolve activity this prevents activity
not found exceptions for cases where
there's actually no app that can handle
what we're sharing better safe than
sorry I was too easy though let's do
HTML text as an email mmm not much more
to it
HTML text uses set HTML text makes sense
we added a subject and we can add
multiple to cc or BCC email addresses
they only apply to email apps that's
fine receiving apps could ignore them if
they want you just give it all you got
but talking about the sending side
without talking about the receiving side
it's like talking about peanut butter
without mentioning jelly something like
that the receiving activity would need
an intent filter with the appropriate
mime type we'll note we add the category
default you won't get any of our start
activity implicit intents we've created
without it category browsable is what
allows websites to directly share into
the app then whether the sender use
sharecompat or not you can use intent
reader to extract the information you
need but text formatted or not it's a
bit basic move on to the cool part
sharing sake an image now we're getting
somewhere
okay so that stream is new except where
do we get that URI to image ah here's
the interesting part you'd think this
could be a file path to the image itself
that's your really bad idea means you
need to write the file some are
accessible to other apps
potentially needing the right storage
permission and the receiving app would
definitely need the read storage
permission with Android 6.0 marshmallow
those are dangerous permissions that
need to be requested at runtime don't be
that app instead we have a whole
training doc on correctly sharing files
in a way that requires no storage
permission using file provider check out
our blog posts and docs for how to set
it all up first so what does our code
look like now we've used file providers
get uri for file to get a shareable uri
suitable for passing to another app
awesome you even get a way of
determining the type automatically from
the file under the hood this approach
uses what's called URI based permissions
the sending app grants permission to
just the single URI we grant permission
by calling set data with our URI and
then adding the flag grant read URI
permission that's it now the receiving
side can use get content resolver open
input stream to get the image so we know
how to share text and files to other
apps as well as receive those files all
without dangerous permissions hope this
helps you play well with others and
build better apps</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>