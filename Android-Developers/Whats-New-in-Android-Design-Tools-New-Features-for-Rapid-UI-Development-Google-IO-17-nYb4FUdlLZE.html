<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What's New in Android Design Tools - New Features for Rapid UI Development (Google I/O '17) | Coder Coacher - Coaching Coders</title><meta content="What's New in Android Design Tools - New Features for Rapid UI Development (Google I/O '17) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Android-Developers/">Android Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What's New in Android Design Tools - New Features for Rapid UI Development (Google I/O '17)</b></h2><h5 class="post__date">2017-05-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nYb4FUdlLZE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi I'm John Hufford
and this is nicolas road we both work on
constrained layout and the android
studio design surface Nicolas will sort
of give us a little introduction to the
whole thing so hi everyone
so we're going to talk a little bit
about Android studio in general and a
little more as well about constraint
layouts so quick summary about what's
our goal here right
as far as Google developers what we want
is really to make your life much much
better right and we want to listen to
what you have to save any feedback in
the ideas requests but you know anything
we really are you know looking into that
and we try to move fast
you know we since last year at i/o we
release the stable version of on
restitute 2.2 2.3 and we are not working
on 3.0 and I strongly encourage you to
test 3.0 there is a lot of improvements
in the layout editor notably and
specifically for the neoteny top of the
visual designer in number 8 studio our
gods are relatively simple basic one we
want you to be able to visualize your
layout I know it's called a visual
designer we want you to be able to
create the layout very easily and all of
that being efficient we don't want you
to you know use your time or for no
reason and another jump okay so we want
to just give you a brief overview layer
the land of the designer to give you an
idea of how it all comes together
so one of the things you can do is in
Dracula mode
I'm sure a lot of people are like the
ocular mode and we could go back to the
other one now we have on the left hand
side the palette that's basically where
you can just drag and drop your your
widgets onto your design surface
then the componentry the then comes the
inspector and we'll have much more about
that later
then the core design surface and there's
a toolbar we also have a right-click
menu so people a lot of people kind of
forget that there's a right-click menu
if you select an object you can click on
it and right-click
you'll get useful actions associated
with what you've selected the other
thing that can you can switch to is
blueprint mode you can also switch to
two screens at once the blueprint mode
is is kind of a a blueprint as a rough
outline a sketch of your UI the design
surface is actually being rendered in
layout Lib which is a sort of emulator
of Android so one of the things that we
we also can do is use loupe use the
designer in the XML editor mode so if
you are in the XML editor and you press
the preview you get essentially a full
design mode right there notice if you
select it'll actually navigate you to
the right elements in the XML you can
switch to sleep design or blueprint you
can also expand it a little bit pull out
the palette and you can actually just
drag a element right there on the screen
notice this actually created the XML at
the bottom and in fact if you edit the
XML in this case I'll just delete the
XML it goes from the design service
instantly so you get a real-time
feedback in both directions simply like
that so that's just a brief introduction
just to give you some of the concepts
some of the you know vocabulary we are
going to using that talk
and hopefully you have been already
familiar with this UI if not again give
it a try
specifically with 3.0 let pick up our
cross friendly out now so constantly
ours is the library we are north last
year at i/o in this very room and the
general idea is to provide something
that gives you all the flexibility and
the power to create any type of layout
that you want
we will strong emphasis on having flat
layers if you have flat layout meaning
you don't have an STD I'll ask each of
you in order to create that layout
there's a lot of advantages one you know
often-repeated advantages performance
indeed with nested layouts you could you
could have corner cases where you know
there's an explosion of computation
necessary so if everything is flat you
tend to winning performance so that's
one reason the other reason which i
think is actually more interesting is
you got a lot more flexibility it's much
better if you want to animate contents
it's much better if you want to modify
the content a greatest modify etc the
other big thing will constantly add this
it's the same team that works on
construct layout and on the layout
editor in order to do so it deeply
integrated from the very beginning which
means we have some pictures in confront
layout that helps creating a great UI
designer and vice versa we have some
features in studio that allows you to
create much better and much more
efficient layouts with cross track
layout it's also an unbundled library
which means we can push any version any
time and in fact you know we just push
the new version like five minutes ago
and it's compatible with basically every
device so a quick recap on the 1.0 last
year when we announced the 1.0 we we did
a long series of alpha releases beta
releases
and you know basically seventeen
religion since laughter when I told you
we are trying to move fast and iterate
quickly that's what we do we did the
final release of 1.0 in February
lots of performance increases that's
courage if you only try will construct a
lot worse last year
if you give it a go a bunch of new
features as well that will cover and
it's the default layout now in all the
rights to do so when you create a new
screen by default we put constantly at
where before we used to put relative
layout and of course studio is very
flexible if you want to change that you
can but you know that that we believe
that it's a great layer to start your
screen with and you know that's what we
want to encourage you to do and all of
that really should not have been
possible without the involvement of the
community there's been a flurry of
optical stocks use video on YouTube
leading to widespread adoption of the
libraries there's also a new community
based constructive website that is
launching this week and you should check
it out
so 1.0 what did we have in terms of
feature why did we show you laughter
well and what did we add in the meantime
so we had the original idea of having
relative positioning you can you know
set up your layout so that one button is
going to be positioned relative to
another element very similar to relative
layout with a couple of interesting
tricks we also added a center
positioning so if you create constraints
in between two targets your element will
be centered and you can actually modify
that it's not just Center you can apply
a bias so think about it as being able
to build much more flexible reactive UI
that will you know position themselves
not simply in terms of an exact
dimension we also added introduced the
concept of helpers objects like
guidelines the idea of guidelines is
that it lets you create a UI in a much
much more natural way particularly if
you come from a design background or if
you're working with designers they
always think and create the alert in
terms of you know they call it many
names guidelines key line read lines
basically vertical and horizontal lines
to to make sure that everything is
aligned correctly
well guidelines in
layout is just a first-class concept
that you can use and create your layout
with but your teammate Leon the device
it just results in the right settings
for the layup we also introduced change
and that's a relatively late addition in
the one-point already second thing
capacitors being able to position a
group of widgets as a group so to for
example spread them apart
the interesting thing compared to
previously on algorithm is that it only
works in one axis so the other axis is
not constrained by a chain finally we
introduced ratio I'm sure a lot of you
had to reemployment a custom view just
to implement a ratio well we just added
it in constructed from the get-go
and last but not least we introduced
constraint set the idea with constraint
set is that now we we have layout that
is flat there is no Yaqui necessary to
create your layout in a sense you end up
with a bunch of widgets at the same
level and we apply in order to create
the layout so to get the result that you
want to apply those constraints so
constraint set the idea is simply that
we gather all those constraints and put
them into that object into a constraint
set object so you can create a
constraint set that embed all the
constraints of your layout you can embed
you can create it from a layout file
from the live view hierarchy and the
fact that you can do that is actually
really really powerful because I just
give you a simple example you can simply
just you know toggle one set of
constraints with another one so it's
very easy to tweak your UI at runtime
and even more you can specify and create
your layers in the comfort of the layout
editor graphically and at runtime in
your program you can decide which layout
you want so this is a very powerful
concept and we'll come back to that and
finally today we just released 1.1 beta
1
and decided about a neighbor so should
be very easy for you to integrate in
your workflow so what did we add in 1.1
we did first the concept of barriers and
barrier in essence is a way to say just
stack on a set of widgets take the
maximum or the minimum of an edge and
that allows you to create a lot of UI
that previously with construct layout
1.0 would have been tricky to do we also
added another helper class that's called
the group which follow is relatively
limited but we have some ideas on how to
improve it but the concept is basically
you can have a set of widgets that are
you know stored into that group and you
can set for example the visibility of
the group so you don't have any more to
maintain yourself a list of widgets just
so that you can you know toggle the
visibility in one go you can just
specify that in XML and you know any
visibility state on the group will
basically be applied to the elements in
the group we also have a new concept the
placeholder concept and we'll cover that
in in more details later but I think
you'll like it
and finally we added a couple of tweaks
in the way we deal with constraints on
dimensions so if you ever wanted to
create a view with we'd was 30% of the
screen you could do that but it was a
little complex with guidelines because
guidelines are a low current positioning
but now you can just do it simply
directly on the widget and now we're
going to cover a little bit of the new
features in Android studio itself yeah
so it essentially to give you a kind of
more detail inside of Android studios we
have a set of tools some of them we'll
talk a little bit more about in later
but we have a series of them that are
alignment type tools and arrangement I
tools and we have some stuff to add
guidelines and we'll see more on those
here's also exist the right-click menu
which is actually a lot of them are
existing tools now here's a little
example of what you can do with the
tools so in this particular example I
create a chain I Center align all of
them and then I use the inference to
automatically connect them so in three
clicks I have just essentially made like
a top layer layout now one of the other
things that has we've done a lot of work
on is the inspector those little pluses
you see I'm clicking on they
automatically cast array and connect to
the to the adjacent surface so it's a
quick handy way of just making the
connections without actually having to
drag out little lines it can really
speed up a lot of connections and then
playing with all the other features of
the inspector I can change the bias I
can then go and kill connections all
over again
and it doesn't if they both work
together so I'll just move it back over
and the loop starts all over again
the inference I you so let me do a
little bit of the inference before it's
essentially based on a probabilistic
model where we try to connect estimate
what is the most likely thing it would
want to connect to if they're lined
above each other it's more likely to
align that way if it's directly on the
center the little icon is it will it
will want to connect it one of the cool
things about it is that you'll notice I
can make connections and then use
inference to finish it off and
essentially complete my UI so the the
ones that I care about a lot I do by
hand and an inference does not currently
create chains or some of the new widgets
that we talked about that they don't
operate properly with some of the newer
design design features but as those
features become stable I will work on
bring them into the inference engine so
here is an example it inferred and as
you can see it detected that it was
centered and attached there it changes
some things from rap content to 0dp
things like that it just try so fix it
now one of the other things to remember
here is it's not a beautifier it is not
going to align things for you and
arrange say it tries very hard to keep
exactly where you put things so I've
seen a few cases where people just
sloppy put things on this on the UI and
then hit inference and they get bad
results because it's not organized so
just remember to do that when you're
you're thinking about it what are the
things that we like and we used is the
inspector just so me use it there's
another mode that you can get if you hit
the little arrow at the top which is
this which is all the constraints that's
kind of a pain to use quite frankly so
we've been working on something to try
and make that a little easier and how
you would use it and how we would
interact with it and we call it
internally we call it slice so imagine
you whenever you have a layout you will
actually have associated with the layout
you'll have a dimensions a strings file
a few files and the information you're
trying to work with is mapped across all
of these different files so it becomes a
sort of hopping around game where you're
trying to figure out oh I've got to go
and adjust the dimensions here I got to
go and set the string in this file and I
got it
and I have no easy simple navigation so
if we couldn't take the selected object
is this in layout the person's the
dimensions that uses the strings that
use
is and all the other things it's
referring to and we sort of combine them
into one user interface it appears on
the right and we gave it a look that
it's kind of like an XML file so if
you're used to the XML you can
understand what it does and how it works
you can sort of see the the files that
are coming from all the other parameters
for example the drawable is a picture of
me the values is some number and in fact
you can go edit and even create new
elements directly in that user interface
so it's a quick fast way to work within
the designer and do all the other little
things you would like to do typically a
little bit about the tools attribute so
so the idea we're showing you all of
this is also that you could of course
use all the layouts in XML right I mean
they are normal Android layouts you can
use the old layers you can use
constantly up everything is perfectly
visible in XML but the idea and this is
what we strongly believe is that with
the designer we've got great opportunity
to really make your life easier I think
you could see with some of those tools
that we presented doing the same thing
in XML line-by-line is certainly doable
but I think you'll be much faster by by
using those tools so the two top
tributes it's something you may human
already right see the general problem is
that we have we have something in the
editor that's not executing your code
directly so sometimes what you what we
show you in the layout editor is not
going to be exactly the same as what you
have on your device so because for
example some of it is just determined by
your program it strings computed at
runtime so we had this idea of having
tool attributes where you can specify
behavior that will only be applied in
the layout editor so in those attributes
are not going to be there when you
publish your application when you push
it on a device they are just stripped
out but in the designer that allows you
quite a lot of flexibility in how you
want to render things
so we got like showing for instance is
pretty useful please take them you know
to set up something in a recycle view
and things like that so just the generic
problem right of how do you want to show
layout when we don't really want to
agree with the code and you should try
to drag a recycle view all these do in
the layout editor body what you saw
because we we automatically generate the
default adapter that is pretty limited
you know and by default that's what you
see this is probably not how your
application looks like so if you have
some contents let's say I created a role
you can specify it and you you'll be
able to see that being replicated better
but clearly not what your applications
going to look like right chuckling of
course you're going to have different
data so and that's for example data
comes in you could specify new
attributes and this is going to be
available in 3.0 where by default we
have pre baked attributes like for
example names or phone numbers and
you'll be able to reference that instead
of you know other attributes and that
will be replicated in the designer so
think about it as a way to very quickly
see all your layout is going to look
like without having to program anything
we actually do more than just that we
have a new sample data folder in the
project that that's you'll be able to
create you could specify things like
colors and as trivial just create a text
file put the colors on each line and
that's it every time that reference data
element we will pull the next color and
we'll just loop so you can very quickly
get something like that and you have
more sample data capabilities you can
you know this day Laura me zoom it zoom
date in the specific format colors you
can even specify and not your JSON file
if you want to use more structured data
so we got baked in datatypes oh sorry
kicker victim datatype the distance eyes
as I said if you want to have no
structure and if you have any resources
into that sample folder you can
reference it and we'll pick them so if
you want a collection of image for
instance you put them into a folder and
you refer on that folder will pick the
next one and let's go on some more
advanced examples and construct layouts
so you may have seen you know in your
you know in your practice problem like
that you know I I have some text on the
left of my button and I want that text
to grow but no more than what the button
allows and I want everything to be
centered left so the way you would do it
in construct layouts and it's written
you know can be a little tricky but
formal today we create the chain make
the text being resizable and it will
automatically apply the constraints so
it won't go further and so that's just a
quick example of how you can use chain
it's not just oh I want to spread with
data path you can do much more complex
and powerful combination there's another
example as well about the going behavior
so by default when you set with yet to
gone we resolve it at the points so in
that case my center button gets collapse
little as a single point and that gave
your is you know looks fine to me
that's probably what I want sometimes
it's not going to work the same way if I
do that on the first element everything
collapse to zero again the margin
included and then the rest of my buttons
are moving so that you have another
attributes that you can specify when the
object you connect to is going and in
that case we'll use those values for the
margin so the second button I'd
originally imagine on the top of zero
and now at the margin of substitute only
if the first element is mark let's go
and let's talk a little about playful
there which is a new addition in there
constantly out 1.1 so this is new so
1.1.1 essentially what it is is you can
create a virtual view and set its
content to another view within the
within the constraint layout so in this
simple example it's it's grabbing
whichever one you clicked on whichever
view you clicked on and walking it up to
the top of the screen if you look at the
text it might look a little strange if
you're not familiar with Cortland
checkout : tomorrow that's the total
length of the code inside of the
Cortland file so the animation you're
seeing on the right is completely being
generated by the code you see on the
left nothing else is being used at an
XML file so as you can see it's randomly
switching but the fact that you can
actually have a placeholder a place
where you can move a widget may seem
like ok what what else can you do with
that well if I design a placeholder
based UI with merge tag essentially I've
defined an in constraint layout make
sure to use the parent tag if you want
to see the UI while you're doing it it
essentially gives you a fixed layout
which you can then use in another file
so in this case I've decided to have one
placeholder that's going to be my top
image a big image and then a second
placeholder that's going to be my action
button but I can actually make the
second place holder with now using for
landscape mode and this one I arranged
it's a little bit different I use a
different slightly different set of
constraints
and now in the main layout I just
declare it to UI elements and include
the place hold the the template
essentially it produces a template the
design
decides on how you do your layout and
because there in fact two of these
templates one in different ones when I
rotate the the screen it would actually
take the other template so now I can lay
out my views and separate out the layout
from it but I can actually do more than
just that one of the things that you can
do with with this structure is what is
instead of the image button the second
image button I could decide to put an
entire include file with something else
in it so in this particular case I have
I don't know why that in this particular
case I have an entire include with a
bunch of different layout elements and
it's actually being warped into that
space so it's a constraint layout within
a constraint layouts it's nested in that
context but this is a very simple and
almost stupid I example but you could
imagine where you decide how you want
the top and the bottom the left and the
right and and behaviors and lay them out
and design them as templates and then
when you're ready to to produce your
main stuff you just go and do it in a
completely separate file you could have
designers help you design templates the
things like that one of the things that
that we wanted to do it with constraint
set and I'll talk a little bit about how
you use constraint set is you can
separate the views completely from how
you do the layouts so essentially you
can another way of doing things to
encapsulate your entire layout as a
separate constraint set
and then you apply it to a layout so you
might kind of wonder what would you want
to do with that well you can use you can
switch between two constraint sets on
the fly no views get reloaded it's not
like switching a layout you're actually
just moving the layout the widgets
around by applying different sets of
constraints so in this example I create
two constraint set I grab a constraint
set from a layout file and I put another
layout on the screen with set content
view then I actually get that one and
grab its constraint settings constraint
set two now to switch between the two
constraint set all I have to do is call
the constraint set and apply to the
constraint layout and that will allow me
to switch so I can produce lots of
clever animations that way so one simple
example is if I have a dialog and this
is a normal constraint set with my
picture on it and I can do another one
in landscape now instead of of creating
two separate layouts and inflating them
when you rotate you can take over the
rotation yourself and you can perform
the constraint set switch yourself and
that way you have a lot less going on
during rotation so if you if you have an
app that likes to rotate its a lot you
can do it that way and save some speed
well the other thing that important to
keep in mind with a constraint set is
the a nice example of rotation is
interesting of course you can use the
normal system on average and let the
resource being loaded in at runtime the
thing with constraint set is that you
actually in complete control of when you
create the constraint set so often in
mobile it's not so much about trying to
not do the work that you need to do
because you need to do it so sometimes
if the walk is costly you still have to
do it it's more matter of trying to find
the right time on what to do it and to
me that's what constraints are residue
to do you can basically
pre-baked all those constraints and not
them before and so you don't have to
incur registers or anything like that
because suddenly you have to pull the
entire set of resources so concert set
is also pretty useful when we want to do
motion in general so one advantage of
constantly atoms and this focus on
trying to clip a flat tire key is that
there's no keeping issues you can think
about it as a syndrome you know it's you
just have all the different object the
visual objects you want to show on
screen your buttons your images and etc
you can think about content in some ways
as a as a keyframe and the way you would
do that if you remember that slide that
we just saw you only need to add 1/9 and
that's all and that's simply using the
Android transition framework that is
that's also is available on industry
pocket and that will automatically
animate any type of layouts changes
that's also would apply even on the
individual view right so in that example
I have a saree clicker notably in that
example we have a layer that set with
with the normal contract layout but I
can change the parameters of an
individual view the layout will
automatically resize accordingly to the
constraints I set and traditional
manager will animate all of that so you
can do kind of complex behavior like
that very very easily and because it
just is very trivial you could do a lot
further than that you know another
another example you could create one
stage of your screen in one layout
change you know create a second States
basically and note that from constraint
set apply that at runtime and the
transition framework will just do the
rest
what's recall is that to do that
graphically you don't have to try to
figure out how much you need to do what
the dimension no you have the immediate
result on screen without having to do a
round trip to your device and that's
what purely in construct layout the
constructor can be also used by
leveraging the existing or you know
framework and the existing with yet in
the framework so here this is just a
nice view that the ones used in the
drawer layout but I can simply release
it into a construct layout here so here
this is a simple subclass that's applied
that what knife is and you you know I
encourage you to think about it in the
link to the concept of placeholders is
that you could basically define a set of
generic rules on how your you IDF and so
constructed becomes something a lot more
than simply am I just want to position
like buttons and how do you interact
with each other it can become more about
all the entire UI moves around and of
course you can apply that with your
custom widgets if you want that's you
know as simple so here's another example
of the world constraint set slash
transition animation so we define two
states like the previous examples and
you see like the shadows are applied the
elevation changes and all of that is
done graphically the only problem with
this animation is that it's little stage
I mean doesn't do anything special there
is no movement but we could do a lot
more than that and with custom
transitions you could simply define
whatever you want so recently it was a
physics library being released
you could easily create your own custom
transition plug them in to the system
and do whatever you want I would not
encourage you to replicate this
particular UI this is a test example but
you know just to give you like the type
of flexibility this approach can give
you
and on that note I think we are done we
have a few minutes for Q&amp;amp;A and please do
file back feature requests we can
contact us pretty easily the
documentation constantly art is
available online as well
and we as I said we just released 1.1
please give it a try</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>