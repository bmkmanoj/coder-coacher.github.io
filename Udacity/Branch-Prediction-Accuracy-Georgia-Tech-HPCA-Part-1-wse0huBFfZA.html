<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Branch Prediction Accuracy - Georgia Tech - HPCA: Part 1 | Coder Coacher - Coaching Coders</title><meta content="Branch Prediction Accuracy - Georgia Tech - HPCA: Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Branch Prediction Accuracy - Georgia Tech - HPCA: Part 1</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wse0huBFfZA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now let's look at branch position
accuracy and how it affects performance
our CPI can be written as 1 which is the
CPI we get with ideal pipelining plus
the cycles we add on average per
instruction because of branch
mispredictions and that can be written
as how often we have mispredictions
times the penalty we pay in terms of
cycles every time we have a
misprediction note that this part is
determined by predictor accuracy it
really says how often do we miss predict
this part is determined by our pipeline
where in the pipeline we figure out that
we have miss predicted that's
approximately how many cycles we pay
let's look at a more specific example
let's look at a processor that resolves
branches in its third stage of the
pipeline and at the processor that
resolves branches in its tenth stage of
a pipeline this is actually much closer
to what modern processors do let's also
look at different accuracies for
predictors we will look at the predictor
that is 50% accurate for branches and a
hundred percent accurate for all other
instructions and we will look at the
predictor that is 90% accurate for
branches and a hundred percent accurate
for all other instructions and in all of
this we will be assuming that about 20%
of all instructions are branches this is
pretty common in programs now let's
computer CPI's here we have a CPI of 1 +
how many miss predictions do we get per
instruction we get 50% miss prediction
for branches so we get 0.5 of branches
are miss predicted but branches are only
0.2 of all instructions so these two
really are the miss predictions per
instruction it's really the miss
predictions per branch times branches
per instruction and this is multiplied
by the penalty that we get per
misprediction if we resolve
in the third stage at that time we have
two stages of the pipeline where wrong
stuff is already fetched so the penalty
will be two cycles note that it will
resolve the branch in the first stage
then there would be no penalty because
next cycle we can fetch the correct
instruction so branch is being resolved
in some stage means really that we pay
one cycle less than that in penalties
and we get an overall CPI of one point
two here if we resolve the branches in
the tenth stage this part is the same
the accuracy of the predictor and the
frequency of branches but the penalty
now would be nine cycles so we have one
plus zero point five times zero point
two times nine in this case for the
overall CPI of 1.9 this is a
significantly worse CPI than we were
getting here now let's look at the more
accurate branch picture now what we have
is 1 plus mispredictions per instruction
are going to be how many mispredictions
we have per branch we are 90% accurate
that means we are 10% misprediction
times 0.2 because not all instructions
are branches times 2 which is our
penalty and we end up with one point
zero four so this is a significant
improvement from a more accurate
predictor let's look now at this
processor here we have one plus zero
point one times zero point two times now
nine and when we compute this we get one
point eighteen what we can conclude from
this is that a better branch vector will
help us regardless of whether we have a
shallow or a deep pipeline but the
amount of help from a better predictor
changes depending on how deep the
pipeline is here we have a speed-up of
1.15 when we go from worse to better
predictor
in a shallow pipeline but here we have a
speed up of 1.61 when we go from the
same waters predictor to the same better
predictor in a deeper pipeline as you
can see the deeper the pipeline the more
dependent it is on having a good
predictor for good performance and that
is really why research in branch vectors
continues to this day although our
predictors are now pretty good they are
significantly better than 90% accurate
for branches
however our pipelines are deep so we
still benefit from further improvements</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>