<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Splay Tree Example - Software Testing | Coder Coacher - Coaching Coders</title><meta content="Splay Tree Example - Software Testing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Splay Tree Example - Software Testing</b></h2><h5 class="post__date">2012-07-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/LvngYR1Nkkk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so here I've bought up the splay tree
code in an editor called Emacs and this
is my personal editor of choice it's
doing syntax highlighting and indenting
very much like the audacity on light ID
you would do for you but here what I'm
doing is running this on my local PC
here and so we can see is we have a
splay tree class it supports an insert
method a remove method this takes a key
out of the tree a couple of other
operations so insert remove and look up
are the basic operations supported by
any binary search tree but many
implementations support additional
operations so find is the lookup
operation for this tree and then there's
a splay operation and what display does
is it moves a particular key up to the
root of the binary search tree up to the
root of the splay tree this serves as
both the balancing operation for the
splay tree and also the lookup so the
splay routine involves a couple screen
fills of code but it's still fairly
simple and now let's go look quickly at
the test suite for this so the author of
this open source play tree wrote a test
suite this test suite you can see
imports the Python module unit tests and
what unit test does is basically
provides a little bit of infrastructure
for running unit tests and so what it's
going to do is automatically call these
different functions which are defined
for an object inherited from the test
case framework and you can see here that
what we do is for example we have a
setup routine that initializes a list of
keys we make ourselves a new splay tree
and insert those ten elements into the
tree we have a test insert function
which loops over all of the elements of
the tree and asserts that they're found
we have a removed test function which is
going to be called last at our test
suite the functions beginning with the
string t EST are called in alphabetical
order and this type ins to be the last
one this is going to remove all of the
keys from the tree and finally we have a
function which is going to insert a
large number of elements into the tree
it's going to insert 40,000 elements
into the tree it's going to make sure
that they get staggered by a gap of 307
this is good basically going to end up
stress testing our splay tree a little
bit finally we have a routine that tests
whether the tree correctly knows that
it's empty okay so this is our sort of
minimal unit test we can do is we can
run this and this is going to take just
a couple seconds to run okay so all
those tests took about 1.6 seconds to
run and what I'm going to do now is run
the same test under a coach code
coverage framework so i'm doing here is
erasing the code coverage state which
has been previously stored in this
directory running the splay test under
the coverage framework which is
basically gonna run an instrument
version of a code and we'll talk
how this all works a little bit later
and what it means and we're going to
generate some HTML so what you can see
is it ran quite a bit slower this time
because instrumenting the code to
measure coverage adds a lot of
instructions to the code and thus takes
extra time ok now we're going to look at
the output here we are looking at the
output of the code coverage tool and
what it's telling us is that when we ran
the splay tree on its own unit tests out
of the 98 statements in the file 89 of
them got run nine of them failed to run
and we'll talk about this excluded
business later so the lines which didn't
get run are marked in red so this first
one we're going to skip over for now and
let's look at the second example so the
second line that didn't get run is in
the splay trees insert function what we
can see is that the test suite failed to
test the case where we inserted an
element into the tree and it was already
there if we look at this looks fairly
harmless we're just erroring out we're
not going to worry about this one right
now so let's let's move on a little bit
so here we get something a little bit
more interesting so here in a splay
trees remove function so we're going to
remove an element from the tree and so
what you can see is that the first thing
this function does is splays the tree
based on the key to be removed and so
this is intended to draw that key up to
the root node of the tree if the root
node of the tree does not have the key
that we're looking for then we're going
to raise an exception saying that this
key wasn't found but the thing to notice
here is that this wasn't tested now if
we look below here and more into the
body of the delete function we see
there's a pretty significant chunk of
code that wasn't tested so we'll
probably want to go back and revisit
this and so let's take a step back and
think about what the coverage tool is
telling us here it's basically showing
us what we didn't think to test with the
unit test that we wrote so far so what
we're going to do is go ahead and fix
the unit tests a little bit in order to
test this case in order to test the case
of removing an element from the tree or
it's not there so let's go ahead and go
do that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>