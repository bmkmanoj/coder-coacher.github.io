<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Optimization Timing - Programming Languages | Coder Coacher - Coaching Coders</title><meta content="Optimization Timing - Programming Languages - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Optimization Timing - Programming Languages</b></h2><h5 class="post__date">2012-06-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EBZb5mE_hSE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so how are we going to fit optimization
in to our JavaScript interpreter the
basic plan is to change the parse tree
before interpreting that way we'll save
time especially if the optimization we
made was in the inside recursive call of
Fibonacci r factorial or something like
that so recall our general plan the
outline of our interpreter we start with
program text which is a string and we
use lexical analysis to break it up into
tokens or important words this is
implemented with regular expressions
then we use parsing based on context
free grammars and dynamic programming to
check and see if those tokens are in the
right order are they valid syntactically
do they form a sentence if so we end up
with a parse tree also called an
abstract syntax tree and now here's the
new part we're going to do optimization
which will also yield a parse tree but
hopefully a simpler one if all else
fails dunno optimizations return the
same one then we do our interpreting and
that gives us the meaning of the program
the final result so we're going to fit
optimization in after parsing but before
interpreting optimization is always
optional you don't have to do it
typically unless you're in some sort of
company where timing really really
matters like say a cars anti-lock brake
system where you might have to respond
within a certain number of milliseconds
but for the vast majority of
applications optimization is optional so
often we do it last in fact let me show
you a simple Python example of how a
JavaScript optimizer might go for now
I'll just optimize expression trees will
do these sort of arithmetic
optimizations we've been thinking of and
for now I'm going to focus on
expressions that have expression type
bin up binary operator for example maybe
it's something like a times 1 and I just
want to replace that with a well here's
a real simple way to do that I'll just
check and see if the operation is star
and I'll check and see if the right-hand
side is literally the number one and if
it is then I can just return a otherwise
i'll return the original tree unchanged
maybe it was something more complicated
like five times three or five times X
that we
reason about we could certainly put in
more optimizations here but now we have
at least one and the basic plan is right
before we interpret an expression we
call optimize on it just to show this
pictorially let's say our input is 5
times 1 we're just going to replace that
with 5 in our Python interpreter that
abstract syntax tree would show up as
nested tuples bin up involving
multiplication that's not exactly the
order we use there we go a bit off where
the left child is 5 there's some
multiplication and then the right child
is one and if these two parts match a
pattern we've already established then
we'll just hoist this part out and
return it unchanged so we've gone from
five times one to just five by looking
at our Python abstract syntax tree
checking to make sure the optimization
is legal an optimization is only legal
if it doesn't change the semantics of
the program doesn't change the meaning
of the result and then once it is legal
we just replace the tree with a simpler
tree the way I've written it we're
officially returning a new tree
potentially if we wanted to be a little
more efficient we could change it in
place but returning a new copy of the
tree is fine for us</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>