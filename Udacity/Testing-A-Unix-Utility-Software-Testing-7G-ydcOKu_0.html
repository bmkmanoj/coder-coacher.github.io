<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Testing A Unix Utility - Software Testing | Coder Coacher - Coaching Coders</title><meta content="Testing A Unix Utility - Software Testing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Testing A Unix Utility - Software Testing</b></h2><h5 class="post__date">2012-07-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7G-ydcOKu_0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so the example we just saw using c smith
to test c compilers represented several
years of work by my group those are
really is really sort of a large effort
for us so what I want to show now is a
different example of random testing
we're going to test a tiny unix utility
function using a very tiny random tester
and so if you remember a couple of Units
ago we talked about the UNIX read system
call so let's look at how the read
system call works before I get going
into this example I should apologize a
bit for dropping in to see here I tried
to make I tried to work this example
into Python and I really just didn't
come out right it just didn't feel right
this is sort of inherently see example
so it's not going to matter if you don't
know C or if you don't like see I'll go
through i'll go through the code and
really it will be rather simple so the
UNIX read system call has called from a
sea program takes three arguments it
takes FD which is a file descriptor it
takes buff which is a pointer to a block
of memory into which data is going to be
read and it takes a number of bytes to
read from the file represented by the
file descriptor into the memory or block
pointed to by buff and now usually what
the read system call does is it reads
the number of bytes that you expected
into the memory block that you provided
and all is good so the return value of
read is going to be the number of bytes
read so that's what usually happens but
there are a couple of other things that
can happen a second possibility is the
read system call can return 0 indicating
that you've reached the end of the file
another thing that can happen is it can
return minus 1 if it failed but the
fourth possibility and this is one
that's sort of pernicious and it's one
that a lot of programmers get wrong is
that read can return a number of bytes
less than the number you asked for and
this isn't a failure if this doesn't
represent any sort of out of memory
condition or end a file or anything like
that it just means you need to try again
and so the little unix utility function
that i'm going to test here is a
different version of read it's a version
of recalled read all that acts just like
read except that it's not going to have
this property of returning partial reads
ever so what read all is going to do is
in the case of a partial read it's going
to just issue another read call that
picks up where the first call left off
and it's going to repeatedly do that
until the reed is complete or until some
sort of an error or end of file
condition occurs so if anything bad
happens we'll just return a minus 1
value which is the sort of standard UNIX
error value if the read calls are
succeeding but returning partial results
we're just going to keep issuing read
calls until we're finished so let's look
at the code that does this</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>