<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>制作大索引 | Coder Coacher - Coaching Coders</title><meta content="制作大索引 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>制作大索引</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zxfXpB6U_0w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we've seen a few examples measuring
the time of execution of toy programs of
a loop that does nothing well we care
about though is the time the execution
of our indexing code so what I'm going
to do next is write a program to be able
to test the time of execution indexing
code to get a go test we need to make a
big index we need to fill up an index
with lots and lots of words and we could
do that by hand that would take a lot of
time and effort so what I'm going to do
instead is to find a procedure that
makes a big index so what it does is
take in a size and then it's going to
fill up in index with that number of
words to fill up the index with that
number of key words we need to generate
different words so what I've done is
traded a variable called letters that
initially is all A's and as we go
through the loop we go through the loop
size number of times we keep making a
new string we add that string to the
next I'll explain what make string does
later we add that string to the index
then we change the letters and we're
gonna keep increasing the letter once we
get to Z we wrap around for now it's not
too important to understand everything
in this code but I do want to walk
through the code a little bit so what
this loop is doing is going through all
of the positions in the letters array
and we've filled this up with eight
different elements and we're going to go
through those elements starting from the
last one going backwards so this range
loop goes from the length minus 1 to 0
stepping by negative 1 we're gonna check
each letter if the letter is less than Z
that means we can increase it and we're
going to increase it using this code
here and I'll talk soon about the code
that turns letters into numbers but what
this expression does is get the next
letter so if the letter was an A the
result after this will be a B and we're
gonna replace the letter at that
position in the letters list with the
next letter if the letter is a Z we
don't wanna go beyond the alphabet so
instead we're gonna set that letter to a
and we're going to go back through the
loop to find the next layer once we
found one less than Z we break we only
need to change one letter what the make
string procedure does that we call here
is just turn that array into one string
so it's going through the elements of P
which is this list of letters that keeps
changing and concatenating all those
letters into
one string so the whole point of this is
to allow us to easily make big indexes
so we can run tests on different size
indexes so let's try this in the Python
shell first I'll show you what the
result is when we use make big index
we'll start with a fairly small one so
I'm passing in three as the size what
make big index gives us is an index with
three keywords a it'd be a C and for
each of them there's one URL which is
the name fake if we pass in a bigger
value this will have an index with 100
keywords so we're gonna pass in 100 as
the size we get this big index and you
can see it's starting to change the
second from the last letter to make sure
each let each word is a different more
than index so what we want to do now is
look at how the time of executions take
for different size indexes so let's make
a really big index so oregano will make
an index of size 10,000 and remember our
concern is the time for lookups that's
the operation that's going to happen
most frequently so we're not timing the
time to make the begin next let's see
what the time is to do a lookup and so
all time the execution of looking up in
index 10,000 the keyword and the word
makes a difference
so first let's try looking up the word
Udacity which sadly is not in our index
we'd need them a much bigger index to
get up to Udacity and the time of
execution is shown here so it's point 0
0 0 8 seconds so still getting close to
a millisecond but still quite fast let's
make a bigger index this time we have a
hundred thousand keywords it's gonna
take a little longer to make it but
we're not worrying about the time to
make it now what we care is the time to
do a lookup
so that took a long time let's see how
many entries there are so we can look at
the very last element in our index and
we can see we got to live which I don't
know how to pronounce another way to see
that which we didn't talk about yet we
can actually index from the back using
negative numbers so if we use negative 1
as the index that will give us the last
entry in the list so now we'll try doing
a time to execution we're gonna look up
in the 10,000 size index and we'll see
the times pretty similar to what it was
before that time might vary a little bit
let's try it once more and again it's
just under a millisecond so now we'll
try instead of the 10,000 index looking
up in the 100,000 length index the same
look up and we see that the time is now
10 times that so it's now about 8.6
milliseconds whereas before it was 0.9
milliseconds and let's for consistency
try that again well note that these
timings vary a little bit each time we
do it and there's lots of reasons why
the time varies we're running lots of
other things on the computer at the same
time so it's not the case that we have
total control over the processor and
running exactly the same thing every
time because all of the other programs
might be doing other things the other
reason the time can vary is where things
are in memory sometimes it's very quick
to look up a value in memory sometimes
it takes longer and we're not going to
talk about the details of that what
matters is that the time is roughly the
same each time we execute it and it
really depends on the size of the input
in this case it's the size an input
table so when we increase the size of
the table to have a hundred thousand
entries it's about ten times as slow as
when we had ten thousand entries so now
let's have a few quizzes to see if you
can guess how these timings work</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>