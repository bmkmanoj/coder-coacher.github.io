<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>具有自定义 ArrayAdapter 的示例应用 | Coder Coacher - Coaching Coders</title><meta content="具有自定义 ArrayAdapter 的示例应用 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>具有自定义 ArrayAdapter 的示例应用</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ec9YBW3OTpY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I know there were a lot of steps in
that quiz and it was a lot to process so
let's start off by looking at the
Android flavor app an understanding that
codebase first because it has all these
pieces working together in a single
project remember you can always download
a zipped up version of the project
import the app into Android studio and
it'd be easier to navigate through all
these files so if we scroll down to the
bottom we see the readme which is an
explanation of what this app is so this
example uses a ListView and a custom
array adapter called flavor adapter to
display a custom list item view that
contains an image view and two text
views and so all this information is
used to display the Android flavor names
and version names so this item layout
pattern and custom adapter sound very
similar to what we need for the Miwok
app so I said no whenever the comments
in the app referred to the adapter view
it means a view such as the ListView or
grid view which are common adapter views
so here we are again in Android studio
so I downloaded a zip version of the
project and opened it here in Android
studio to explore it some more so to see
how this project looks let's first
explore the Java files so opening up we
say that there are three Java files here
and the first one to look take a look at
is the main activity so given its name
it's probably the main screen of the app
so when we first open the app the main
activity is created by the oncreate
method and then we set the content view
to be activity underscore main layout so
following that we see there's an
ArrayList
called Android flavors that contains
objects of the type Android flavor
so Android flavor doesn't sound like a
standard class so it's most likely a
custom class now to check this out we'll
use the declaration function and Android
so to use this I'll right-click on the
name of the class go to go to and then
declaration nice so notice that it jumps
us to the Android flavor class so the
Android flavor Java is a custom class
that we created notice here that the
objects of this class have three
properties version name
version number and image resource ID so
values for these are assigned in a
constructor which we find down here and
this class also contains some getter
methods so what we've done is we've
created an array containing these
Android flavor objects so here we have
an example of a single Android flavor
object so with the analogy of the box
and the states inside and we've taken
each of these objects and put them
inside an android flavors array so many
android flavor objects are stored in an
android flavors array so let's go back
to the main activity so we just saw the
ArrayList getting created up here so
next are the array adapter calls so
here's the line where we instantiate a
custom adapter that is stored in a
variable called flavor adapter now to
create this Android flavor adapter we
call the constructor and pass in two
inputs so this one likely refers to the
context and the second one Android
flavors it sounds like we're passing in
our Android flavors array so let's see
more about how this adapter is defined
by going to where Android flavor adapter
is defined so right click go to and
declaration so here's the Android flavor
adapter Java file so notice at the top
Android flavor adapter extends array
adapter meaning that it inherits from
the array adapter so array adapter is a
superclass an Android flavor adapter is
a subclass so in addition tooks just
inheriting from a red Apter we also
customize our adapter class to expect
the data source to be a list of Android
flavor objects so let's take a look at
its constructor notice here that we call
this super classes constructor so we're
calling a ray adapters constructor here
and pass in three inputs now if you
remember back to the discussion about
inheritance because Android flavor
adapter extends array adapter we can use
the constructor from a ray adapter so
that we get all the logic to initialize
the state of the array adapter for free
without needing to write it ourselves so
this means we can take a look into the
Ray adapter documentation to find out
more about this constructor so I'm back
here in the array adapter developer
documentation I'm going to scroll down
to the public constructor section now
out of all of these public constructors
the second to last one is the one that
we're using for our Android flavor
adapter so when we call this superclass
constructor aka the array adapters
constructor we need to pass in three
inputs so the context the list item
layout resource ID and the list of
Android flavor objects so I'm going to
copy this code and paste it over here so
that we can have it to refer to when we
look back at our code now we're back in
Android studio looking at the code for
the Android flavor adapter and here's
the constructor code for the array
adapter the superclass in this case so
notice here that we passed in zero as
the layout resource ID because we don't
need to rely on the superclass array
adapter inflating or creating a list
item view for us instead our getview
method will manually handle the
inflating of the layout from the layout
resource ID ourselves
so moving down a little bit further
we'll see more about what I was talking
about so down here we have the get view
method and we're overriding the get view
method from the superclass and adding in
our own logic for a specific use case so
the comment above mentions that our get
view provides a list item view for an
adapter view of some sorts an adapter
view like we mentioned before could be
either a ListView or grid view or some
other type of adapter view so the get
view method should take in three
parameters so the first is the position
which is the position in the list of
data this layout shall represent the
convert view which is the recycled view
that needs to be populated and the
parent view group so the list items will
be added to this parent view group as
children so the first step inside the
get view method
is the get item method which is
originally defined in the superclass
arrayadapter
so this method returns the item in the
list at the given index position and
note that the return value of this
method is an object with the datatype
Android flavor and this is because in
the class declaration we specified the
array adapter we'll expect a list of
Android flavor objects so as the
ListView calls the getview method for
different positions in the list the
adapter will go and get the items at the
different positions in the list of
Android flavor objects so this Android
flavor object contains the information
that will populate the list item and
will read out that data from it shortly
so the second input parameter of the get
view method is a convert view which we
said earlier it's an existing view that
we can reuse however sometimes this view
will be equal to null meaning that
there's no view that we can reuse so the
view being null is common when you first
open up the activity and you're creating
items in the list for the first time to
fill up the screen now once the screen
is filled up then it's likely that there
will be a valid view that we can reuse
now in our case because we know that
we're working with list items all
assigned convert view to list item view
to make it clear what type of view we're
working with first we check if there's
an existing view that we can reuse using
this if statement if the list item view
is null then we execute this line of
code inside the if statement and this
inflates the new list item view from the
XML layout file called list item in case
you're wondering we're using a layout
inflator which turns an XML layout file
into actual view objects
so we're manually deflating the view
which is why we don't need to pass the
layout resource ID to the superclass in
the constructor because remember here we
passed in 0 so once we know that the
list item view is valid and not null
then we can start to update the text
views and image views within the list
item based on the Android flavor object
so notice that we're using the fine view
by ID calls to find the view within the
ID list item icon or list item name
or list item number so once we find an
image view and text views we can call
methods like set image resource or set
text and passing the value from the
Android flavor object to change the data
to displaying displayed on these views
so to summarize from the current Android
flavor object we can get the different
States from it such as the version name
the version number and image resource ID
so knowing that information from the
specific Android flavor object we can
set either the image view or the text
view to be the information that we've
gotten from the Android and flavor
object so at the very end we returned
the list item view which is the list
item view with the updating and
information from the current Android
flavor object so this list item view
will be added as a child to the adapter
view all right so that's an overview of
how the Android flavor adapter is a
custom adapter that takes as its input a
list of Android flavor objects so when a
list of item views is requested the
Android flavor adapter will find the
android view at the pret position and
then create or reuse a list item layout
so the views will be updated based on
the information and the Android flavor
object and then the list item view is
returned to the ListView so back to the
main activity so the last two lines are
related to implementing the ListView and
array adapter so one thing we've seen
before when modifying the Miwok app so
here we get a reference to ListView and
we're calling that reference list view
and then finally we attach the flavor
adapter to the ListView so we can
populate it with data all right so we
just unpacked a rather complex structure
so let's recap all of it so first off we
created a way to store custom objects
and in this case we use the Android
flavours array which contains Android
flavor objects next we create a custom
adapter that extends from the array
adapter and takes a custom object so in
this case we created the Android flavor
adapter which extends from the array
adapt
and it took in the custom object Android
flavor alright so for the last step we
modified the get view method in the
custom adapter to provide a list item
view for your ListView
so we modify the get view method to get
Android flavor objects from the array
adapter so those at the appropriate
position and then to use that
information to populate either a
recycled view or to populate a newly
created view so I highly recommend you
to walk through this project on your own
and see if you can move through how all
these pieces fit together so it's
well-documented and if you do ever get
lost refer back to the walkthrough above
if it helps draw out a diagram of the
connections so understand that the
custom array adapter pattern is a very
powerful concept for displaying lists in
android</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>