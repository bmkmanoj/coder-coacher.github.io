<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Combiners - Intro to Hadoop and MapReduce | Coder Coacher - Coaching Coders</title><meta content="Combiners - Intro to Hadoop and MapReduce - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Combiners - Intro to Hadoop and MapReduce</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aCwPIue7k2o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now we're going to talk about a pretty
cool new tool something that goes
between the map and the reduce phase
called the combiner before we do that
let's review how you may have calculated
the mean in the last problem and I don't
know exactly what you did but one thing
you may have done is something like this
first you probably had your map or go
through the data I should say your
mappers go through the data and output
key value pairs that looked something
like day of week amount spent then for
each day of the week
your reducer probably kept a total of
the sum and account so actually maybe
your value here was the amount of money
spent and then also a one to help
increment the count and then you
probably would divide the sum by the
count and it looks pretty good but
remember MapReduce is happening on this
whole network of data nodes each of
these little boxes will pretend as a
data node and your data is spread out
across all these different machines and
now let's think about where each of
these three steps took place so we're
not going to focus on what happened but
where it happened well for step one the
mappers were all over the place there
were mappers anywhere there was relevant
data but for any given day all the
reduction had to happen on a single
machine where that reducer was living
and actually that's enough we've already
exposed a problem because if there's a
lot of data even if each individual
output was simply a day in a number
depending on the number of records we
have transferring all of this all this
data to this machine where the reducer
lived that's that's a lot of bandwidth
that's going to be a lot of traffic on
our network that we don't necessarily
want and that it doesn't actually seem
like we need to have so what if we could
do some of this reduction locally what
if on each machine before we send our
key value pairs off off to be reduced
what if we get to do some pre reduction
and it turns out we can and that pre
reduction happens with these things
called combiners and before you practice
using combiners let me try and sell you
a bit more in their value so as you know
when you run a MapReduce job you get
some output like this this is where it's
displaying how much mapping has happened
and how much reducing but you get this
tracking URL and if you open that URL in
a browser you get a job page and that
job page looks something like this and
actually if you scroll down below here
you'll see some more interesting
statistics and in fact we ran two jobs
they were identical jobs except one
implemented combiners so they were
reducing locally as much as possible
before shuttling that data off to the
machine that held the end reducer let's
compare the statistics from those two
jobs the one with combiners none without
so let's compare what happened on these
job pages the one without the combiner
versus the one with the combiner so a
lot of stuff is the same the mappers do
the same amount the input matches the
output for without and with that's as
expected in fact a lot of things look
pretty similar but where things get
really interesting is down here at
reduce input records so the reducers had
to handle the whole four million records
that the mappers outputted when there
was no combiner but when there was a
combiner these four million mapped
output records are combined into 412
reduced input records or reducer input
records that's pretty amazing that's a
huge change in fact the reducers had to
shuffle far fewer bytes and for time
spent with the combiner this job took 31
seconds to run versus without where it
took 43 that's a significant difference
so you can really use combiners to
improve the efficiency of your MapReduce
jobs and we're going to try that next</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>