<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JUnit testing - Developing Android Apps | Coder Coacher - Coaching Coders</title><meta content="JUnit testing - Developing Android Apps - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JUnit testing - Developing Android Apps</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oAy4tbBSZEU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">but it will be a while before we can
test this in our code we still are going
to implement a whole layer on top of it
along with a bunch of UI changes
fortunately we can implement J unit
tests here to help and now for some
magic we'll add a directory to the
source directory of our Android studio
project called Android tests and then
another one underneath it called Java
this is the way we tell Android studio
there's a test target in Gradle for our
app now we create a test package that
matches our main package with an extra
test directory on the end create a new
class called full test suite in the test
package add this code this is some
boilerplate code that will allow us to
add tests in additional classes next
we'll create a test DB class that
extends Android test case and add a test
that creates our DV the way this works
is that the test Runner will execute
every function in our class that begins
with tests in the order that they are
declared in the class each test should
have a failure path that uses an assert
we start by deleting the database before
testing it so we have a clean test now
to run the test we go to the App Start
drop-down and select edit configurations
we select + to add a new configuration
and select Android tests against module
app now we name the test now note that
it tends to target the emulator by
default so I want to use an actual
device I'm going to select show chooser
dialogue now we can just run the tests
against our device and it passes so
let's create a database insert and read
test at the beginning of it we will
insert a single record into each table
we'll begin with some dummy data for our
location we'll use the DB helper to get
a writable database this is exactly how
we will use the database when we code it
up in our project will then create a
Content values object which is a handy
helper
object that Android uses to store values
and keys will store our dummy data into
the columns from our location entry
contract note that in order to make it
work with this abbreviated syntax I did
have to add some extra imports up here
we then insert the data into our
database and verify that we got a row
back now I find that it's helpful to put
log messages into my test cases now
we'll use the database read operations
to pull our dummy data back out of the
database we're making use of a custom
projection here which in theory would
make it easy to use our database cursor
to query for the values we want we use a
custom projection here although it's not
required if the custom projection wasn't
there we would simply return all columns
a database cursor is a control structure
that enables traversal over the records
in a database in Android this is
represented by a cursor object the
cursor object allows one to traverse
between records in a query and get the
contents of any individual column from a
query now we use cursor dot move to
first to populate our cursor with our
row of data we then pull out our data by
index finally assert if it doesn't match
our dummy data and now we get to run our
tests again and they passed</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>