<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A method for GETing_V2 | Coder Coacher - Coaching Coders</title><meta content="A method for GETing_V2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>A method for GETing_V2</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/z5fRKazH-RU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right to begin writing our task
forget method I'm still in this split
view and on the Left I have the task for
get method that we're going to implement
in the tmdb client and on the right
we're looking at the get session ID
method in a login view controller and if
you don't know how to use the split view
we just need to select the assistant
editor here and then you can select
which files you want using these file
navigators here at the top for the left
and right these now what we want to do
is pull the common code elements out of
get session ID from here on the right
into the task for getting method on the
left now as we stated earlier each
method may have different parameters but
they all take the API key so there's our
first step for tasks for get method we
can ensure that the API is included in
our quest by adding it to our parameters
dictionary that's passed into the
function and remember this can change
because we've are the the dictionary
itself can change because we've declared
it as a variable parameter next we need
to build the URL and the request object
so I've copied over the two and three
steps here from get session ID but they
need to be tweaked slightly so that we
can construct a URL depending on the
method that we're using and remember we
pass in the method string as the first
parameter for task for get method so for
the with path extension argument let's
just change this to method now let's
create the request and start defining
the completion handler for the data task
with request method and get session ID
the first thing that we do is to find
the display error function but we don't
need that here and tasks forget method
instead we'll let whoever calls task
forget method handle any errors that we
pass back using that completion handler
forget remember how when we looked at
tasks for get image I think it was yep
and login view controller that we can
respond to the image data that was being
passed back or the air that was being
passed back that's what we're gonna let
people respond to the errors is using
this completion handler so we're not
going to add that here instead the first
thing that we're going to do is make
these guard checks so let's copy the
guard statements that we've been using
all along and let's move them over here
and instead of calling display error we
can use the completion handler forget to
send the air back so I'll define a
method called send air it's going to be
similar to our display air it's going to
construct a in s air like we need and
then our result that's going to pass
back as nil and then we can just simply
replace display air with send air send
air and send air there we go now we're
ready to turn our JSON data into a
useable dictionary after we've made
these guard checks now we can do that by
copying this code over or we can use a
method that's already defined in the
tmdb client and that method is called
convert data with completion handler so
if we pass it our data and then it also
takes a completion Handler and this
completion handler its signature it
matches the signature of our task
handler or comes our completion handle
or forget so let's do that and then
let's go down to see what this or scroll
we could scroll down and we can click to
see what this method actually looks like
now this method takes our data and then
it takes a completion handler a closure
matching the the closure type that we
saw for what is it completion handler
forget so let's go back down here and
what this is going to allow this method
to do is to handle the converting of our
data into a useable dictionary and
because it takes our completion handler
it can call it so if this conversion
into a useable dictionary fails then it
can call our completion handler and
it'll pass nil for the results and pass
the in essere are an error with
converted data with completion handler
otherwise it'll call it and pass our
results back our usable dictionary and
an error of nil and this will bubble
back up to where it's being called here
which in turn you can think of it as
bubbling back up to wherever the
completion handler forget is defined so
in our view controller it will bubble
back up with either the result there
resulting data or our air and the last
thing we need to do is make sure that we
start the task which we already have
that there and that's it
we now have a reusable method that will
make a get request and return some data
or an air from the movie database so
next we're going to do the same thing
for tasks for post method</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>