<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Querying Coordinate Information - Web Development | Coder Coacher - Coaching Coders</title><meta content="Querying Coordinate Information - Web Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Querying Coordinate Information - Web Development</b></h2><h5 class="post__date">2012-05-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UawL-EhDm_c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">here's our map API what we need to do is
figure out how to draw this map the URL
is going to look like this it's going to
be this URL maps that Google API is calm
/ Maps API / static mat and then it's
going to have some parameters and I've
done a little research already to find
that the only required parameters are
size which is going to be the size of
the map sensor which is whether if we
were doing this on a phone or in a
browser that knows where you are already
whether to actually try to figure out
where the user is we're not going to use
any of that and then we can just add
these marker parameters so here's one
marker you can see in here this marker
is defining the color to be blue and it
has a label and then also we can see
something that looks like coordinates in
here I've learned that the color and the
label aren't required so we can just say
marker and give it the coordinates and
if you notice here there's another
marker parameter and the way this API
works is it just looks for multiple
marker parameters will just add one
marker parameter in the URL for each
point that we have let's go ahead and do
that now we want to update our front
page to actually have the art images so
let's think about what we're going to do
we're going to first find which arts
have the coordinates if we have any arts
with coordinates and we need to display
the image URL personally news we need to
find which arts have coordinates this is
fairly easy what we can do is we're
going to take this list of arts and for
each one we're going to check to see if
it has coordinates so let's say for a
and arts if arts dot chords points dot
append a dot chords and we have to
define points is equal to the empty list
this is pretty straightforward or and
arts for each one of these if there is
coordinates the way the data store works
is if there are not coordinates in the
database this will just be none it won't
blow up on us or anything just add it to
the list points this is a clear way of
writing it how I would have written it
is slightly less clear a little shorter
this is just some Python learning for
your own edification points equals
filter none a dot chords for a in arts
so this is a generator a dot chords for
a and art this will return an iterator
of all the coordinates which may be
either coordinates or none and then
filter takes two parameters it takes a
function or nun and a list or an
iterable and basically returns all of
the items in the list
that match the filter and in this case
if the filter is none it basically says
match all the ones that aren't none this
will give us all of the cords for each a
and art if it's not none and that does
exactly the same as this we're going to
use the slightly shorter version this
should work let's make sure this this
doesn't blow up on us here on the
browser we reload the page and we see
our little guys maybe we should print
out the coordinates so we can see them
let's go ahead and do that okay so we're
going to go ahead and write that out
let's try that in our browser there we
go there's a list of our points in this
case we only have one so that's good
there's one subtle bug I'd like to point
out to you in this code arts is a query
when we iterate over arts that's when we
actually run the query so if we didn't
if we never iterated over arts here this
query wouldn't run well we iterate over
here and then when we're rendering the
front that HTML this template if you
recall has a loop in it that draws all
the arts and this also iterates over
that arts query each time we do that we
run the query we don't want to run the
query twice that's wasteful not only is
it wasteful the query the results of
that query could change whenever you
find yourself in a situation of
iterating over results you get from a
database whether it's data store or some
other kind of cursor based abstraction
from a database it's usually good to say
something like this and what this does
is it creates a new list out of that
arts so the arts that comes out of here
is a cursor and then we basically call
the list constructor on it which says
okay make a new list out of that of that
iterable and then we can iterate over
this list as many times as we want and
we've kind of detached it from the query
this is a good habit to get into if you
think you're going to be using results
from database more than once or you're
going to be manipulating this result
from the database kind of too far away
from this query because it generally if
you get a list of things on interval you
assume that you can go over it a couple
times that's all this is going to do
it's basically going to cache the
results of this query in a list it's
very subtle and I was actually
struggling a little bit how to
demonstrate that to you I don't know how
to debug Google queries if I could have
made this print in the console I would
have been if we figure that out between
now and when we wrap this lesson up will
include that in the instructor comments
how to show what queries are actually
running but I did a little googling and
confirm to myself that this would be the
case so anyway that's good to do</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>