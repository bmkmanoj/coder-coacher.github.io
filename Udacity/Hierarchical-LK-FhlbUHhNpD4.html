<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hierarchical LK | Coder Coacher - Coaching Coders</title><meta content="Hierarchical LK - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hierarchical LK</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FhlbUHhNpD4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now we're going to apply these pyramids
to Lucas and kannadi so here's another
really really ugly picture and what I'm
gonna do is I'm gonna step you through
the algorithm in a minute but let me
just show you sort of an in drawing okay
so first is here's our image at t minus
1 here's our image at T we reduce and we
reduce on both of these in order to get
small versions of them the first thing
we do is this M stands for motion model
we run Lucas and conadi
between those two okay and that gives us
a flow field okay and what we do is we
make and that tells you how every pixel
moves we double up and multiply by two
that flow field and then we apply that
to the next level down and then there is
this funny function called warp we take
that function we warp the level one of t
minus one and now that's almost the
level one at time T it's almost there so
you know what we can do because it's
almost there we can run Lucas and
kannadi again all right we come up with
a new motion field add it back to the
motion field that we had before expand
up x to apply and warp and continue and
that's how the iterative Lucas and
conadi algorithm works I know that
that's hard to see from a picture here
is the algorithm written out as steps so
we're gonna compute two level K right so
we build all of our gaussians up to
level K we initialize the flow field as
being zero at sort of K plus 1 then what
do we have to do well you know here
doing it from level K to zero so from
the previous level we have the flow
field from the previous level which of
course is half the size so we have to up
sample the flow field that's just expand
it make it twice as big all right
and that's now the right size to map
from level K to level K of t minus one
to T the problem is if in the previous
level something moved by one point two
pixels how far is it going to move now
one point two times two two point four
pixels
so when I expand the flow field which
just makes it a bigger size I also have
to multiply it by two that's what the
next step of the algorithm says is
multiply you IP and VIP by 2 to get the
predicted flow and then you warp that
level of the Gaussian of image 2 towards
image 1 in order to get to prime or t
minus 1 to T whether you call it 1 or 2
doesn't matter and you just keep
iterating and then we apply Lucas and
Kennedy again between the Warped version
and that same level of I 1 to get this
flight what's called the correction flow
and we have to add that correction flow
back to the expanded flow that we had
before that's what these these equations
here are doing there they're adding that
slight difference that we now found back
to the original predicted flow here are
some results so this is an example of
the optic flow and here's that tree and
you can see if we don't do it
hierarchically we just apply Lucas
conadi
it does a nice job on the background but
up on the tree itself where there was a
large amount of motion it gives you
exactly what you'd expect which is junk
but when we run it with the pyramids we
get a better solution and so you get
these nice you know flow fields here in
the middle also in the back now you'll
notice we still have a problem at the
boundaries right and why is that well
remember at the boundaries there are
pixels appearing and disappearing and
there's no way that optic flow knows
what to do when a pixel appears out of
nowhere basically because the you moved
in now there are pixels that were the
invisible four are now visible and so
the optic flow along the occlusion
boundaries is still a problem and you
need further processing to handle that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>