<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Write Update vs Write Invalidate Quiz Solution 2 - Georgia Tech - HPCA: Part 5 | Coder Coacher - Coaching Coders</title><meta content="Write Update vs Write Invalidate Quiz Solution 2 - Georgia Tech - HPCA: Part 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Write Update vs Write Invalidate Quiz Solution 2 - Georgia Tech - HPCA: Part 5</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_yNF8BhzKAE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let's look at the solution to our second
write-update versus write-invalidate
quiz this time we have a program where
one core repeatedly reads and then
writes a and then the other so how many
bus uses do we get with the right update
and with the right invalidate protocol
this time the write-update protocol is
going to have one bus access here to
read because this is a Miss because
there is no sharing the write doesn't
need a write axis because we know that
we privately have this thing in our
cache so this is what happens the first
time in the remaining 499 iterations of
this nothing else happens we just hit in
our cache once we get to core 1 however
the read a is going to get the data from
core 0 but now we have the shared bit
set at 1 in both caches so the right
here will need to do a broadcast the
first time and then the next time and so
on so overall we get one for the initial
miss and then five hundred updates of
cores zeros cache note that this is
wasteful because core 0 is no longer
really interested in this so overall we
get 502 bus accesses in a write
invalidate protocol we have the same
thing here we have a mess and the data
is not shared
so the write and all of the reads and
writes after that are just cache hits
however here what happens is the read
here will make the data shared and fetch
the data from the other core so that's
going to be a miss because the data
shared the right will have to do an
invalidation broadcast so we will have
another bus access but that makes the
data private to core 1 because this
version is invalidated so for the
remaining 499 iterations of this nothing
else happens so overall we get only
three bus accesses as you can see right
invalidate is a lot more efficient if
the
it tends to be used frequently on one
core and then the frequent use moves to
another core</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>