<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Shared Memory and Caches - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="Shared Memory and Caches - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Shared Memory and Caches - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VO48QBCkvNI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now let's start discussing shared memory
and the private caches and in order to
simplify the discussion what I've done
is I'm using the simplest form of the
shared memory machine that I told you
about that is an SMP whether the single
system bus that connects all these
processes have to talk to the main
memory
now cache that is associated with the
CPU serves exactly the same purpose in a
multiprocessor like this as it does in a
unit processor and that is the CPU when
it wants to access some memory location
of course it is going to go to the cache
and see if it is there if it is there
life is good you can get it from this
from the cache if it is not in the cache
then it has to go to the main memory and
fetch it from main memory and put it
into the cache so that it can reuse it
later and that's the purpose that cache
performs in a unit processor in a
multiprocessor performs exactly the same
function as a unit processor by caching
data that is pulled in or instructions
that are pulled in from memory into the
cache so that CPU can reuse it later no
cache in a multiprocessor associated
with each of these CPUs performs exactly
the same role as it does in any
processor and that is if the CPU goes to
main memory and pulls in some data it's
going to come and sit in the cache so
obviously when the CPU is looking for
something first it is going to come and
look at the cache if it is not there
it's going to go to main memory and
fetch the data and put it into the cache
so that in the future the CPU doesn't
have to go to the main memory but get it
from the cache itself that's the purpose
of the cache in a unit processor exactly
the same purpose cache performs in a
multiprocessor as well however there's a
unique problem with a multiprocessor the
fact that there are private caches
associated with each one of these CPUs
and the memory itself is shared across
all of these processors let me explain
that let's say that there is a memory
location Y that is currently in the
private caches of all the processors
well maybe Y is a hot memory location so
all the processors happen
to fetch it and therefore it is sitting
in the private caches of all the
processes let's say that processor p1
decides to write to this memory location
why now why has changed to Y prime now
what should happen to the value of y
that is sitting in all the peer caches
and clearly you know in a multiprocessor
a multi-threaded program there could be
a de shared data structure that is being
shared by all the processors and
therefore if this guy writes to a
particular memory location it is
possible that that same memory location
is in the private caches of the peers so
this is referred to as the cache
coherence problem now someone has to
ensure that if at a later point of time
if processor p2 or p3 or any of these
processes that happen to have this
memory location Y in the private caches
decide to access it they should get Y
Prime and not Y now who should ensure
this consistency here again there's a
partnership between hardware and
software or in other words the hardware
and software have to agree as to what is
called the memory consistency model
there is this memory consistency model
is a contract between hardware and
software as to what behavior a
programmer can expect writing a
multi-threaded application running on
this multiprocessor an analogy that you
may be familiar with is a contract
between hardware and software if you
just think about a uniprocessor if you
think about a uniprocessor there's a
compiler writer that knows about the
instruction set provided by the CPU and
the architect goes and builds the CPU
and he has no idea how this instruction
set is going to be used but there is an
expectation that the instruction set the
semantics of that instruction set is
going to be adhered to the
implementation of the processor so that
the compiler writer can use that
instruction set in order to compile
high-level language programs similarly
when you're writing a multi-threaded
application you need an a contract
between the software and the hardware as
to the behavior of the hardware when
processors are accessing the same memory
location
and that is what is called the memory
consistency model and what we're going
to do now is in order to get your
creative juices flowing I'm going to ask
you a question</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>