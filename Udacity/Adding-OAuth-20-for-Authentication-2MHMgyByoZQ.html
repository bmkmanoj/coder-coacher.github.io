<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Adding OAuth 20 for Authentication | Coder Coacher - Coaching Coders</title><meta content="Adding OAuth 20 for Authentication - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Adding OAuth 20 for Authentication</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2MHMgyByoZQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this example I have a client-side
application that logs in with Google and
has provided a one-time-use
auth code the client sends this off code
off to my server in which in-turn
communicates with Google in order to
exchange the code for an authorization
token the client then sends off this
code to my server which in turns
communicates with Google in order to
exchange the code for an access token if
the exchange is successful then I create
my own token which I can send back off
to the client to authenticate with my
application let's start by registering
our application with Google in order to
get a client ID we can download our
credentials into a JSON file our code
can then point to a more detailed
walkthrough is provided in the
instructor notes now in the code
let's start by refactoring my user model
to take advantage of some of the profile
information I can get from my OAuth
access token a user's name email and
profile picture can be easily obtained
with OAuth so I will add these fields
now I can look up users by their unique
email addresses so I will index my
database based on emails as well now in
my views dot PI I will add a new
endpoint called / o auth slash provider
that responds to a post request we will
first get the one-time off code if the
provider parameter is set to Google then
we will take this off code and send it
off to Google in exchange for an access
token
once I have successfully received an
access token from Google I can use it to
send an API request to Google to get my
users information I will look up a user
based on the provided email address from
the Google API if a user exists I will
retrieve that user object otherwise I
will just make a new user object and
store their information in my database
now that I have a user object I can
generate an auth token to allow that
user to access protected endpoints
without having to provide a username and
password and since this course doesn't
focus on creating the client-side
application that will send off this
authorization code I have added a
template that signs into Google and
displays the one time off code view the
instructor notes to see and play around
with the code from this video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>