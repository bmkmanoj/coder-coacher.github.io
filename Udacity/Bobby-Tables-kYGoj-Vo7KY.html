<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>帖子破坏者 Bobby Tables | Coder Coacher - Coaching Coders</title><meta content="帖子破坏者 Bobby Tables - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>帖子破坏者 Bobby Tables</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kYGoj-Vo7KY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now in adapting our forum DB code to use
a real database you might have written
something that looks a lot like this in
the get all posts function you connect
to a database make a cursor execute a
select statement from at the results
appropriately close the connection
return the posts but then to add a post
connect to the database make a cursor
execute an insert that substitutes in
the post content commit that to the
database and close now this looks good
but it isn't quite turn writing a bunch
of different posts in your for map are
there any posts that don't seem to work
quite right say what hey wait a minute
that looked like a perfectly good post
why are we getting this weird error from
it let's go back to our terminal oh look
at this we have a trace back from Python
it says programming error syntax error
at or near T there's our insert
statement values I can't find a problem
let's look back at the code so here's
where the posts content gets sent to the
database it just gets added into an SQL
statement inside single quotes because
we put SQL strings inside single quotes
but the database sees the quote from the
post and it thinks that's the end of a
string and that T is something it
doesn't understand by the way if your
code didn't have this bug
congratulations that's awesome but stay
tuned because there's more to this bug
that might first appear despite the fact
that we had a little problem we can
still post things as long as they don't
have single quotes in them but here's
something to try single quote close
paren semicolon don't retype this from
what I'm saying copy it from the
instructor notes and put it into your
forum delete from posts semicolon double
dash post this wait oh all of our posts
are gone I thought we had a database
here hey wait a minute I think I saw
this one on the webcomic xkc
d what we have here is a security hole
called an SQL injection attack some of
the posts text is being treated as a
database command namely delete from
posts which as it happens means delete
every row from the posts table well that
stinks all those brilliant test post we
wrote are gone and we have a famous
security bug in our code how are we
going to fix this well we might not be
able to get all those great posts back
but we should be able to at least keep
it from happening again</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>