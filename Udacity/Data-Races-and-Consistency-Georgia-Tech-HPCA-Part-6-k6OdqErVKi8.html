<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Data Races and Consistency - Georgia Tech - HPCA: Part 6 | Coder Coacher - Coaching Coders</title><meta content="Data Races and Consistency - Georgia Tech - HPCA: Part 6 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Data Races and Consistency - Georgia Tech - HPCA: Part 6</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/k6OdqErVKi8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">there is a concept of data race that
plays an important role in considering
how we can relax consistency a data race
occurs when there is a data dependence
between accesses that are on different
cores and these accesses are not ordered
by synchronization so for a data race to
occur we need to really have one
processor reading another writing to the
same variable or the other way around or
both of them writing and the accesses on
these different cores are not ordered by
synchronization so here's an example of
a data race a data race here exists
because really we can have this happen
or in another execution this store might
occur before the load and thus this can
happen too so this is a data race in
contrast something like this where we do
load a then a barrier and this thread
participates in that barrier and then
the store a there is a data dependence
between accesses but they are clearly
ordered by synchronization this one will
happen before this one because of the
barrier synchronization so there is no
data race here conceptually a data race
allows any order of these operations and
that might change the outcome of the
program whereas here we know what's
going to happen then there is a concept
of a data race free program which is a
program that cannot create any data
races in its execution pretty much that
program is considered to be well
synchronized so that any accesses to
data are correctly ordered by
synchronization barriers locks flags etc
a key property of data race free
programs is that they behave exactly the
same as they would in sequential
consistency even if we run them in any
relaxed consistency model why is that so
well because if your synchronization is
implemented correctly then your
synchronization is going to create the
right orderings for things and then
there is no opportunity for the
reorderings
that might violate sequential
consistency so data is free program is
actually sequentially consistent even if
we run it on a machine that doesn't
support sequential consistency as long
as synchronization is correctly
implemented for that machine but keep in
mind that while you're debugging your
programs even if you intend them to be
data race free they may not actually be
data race free in which case
theoretically anything can happen
so pretty much while we are debugging a
program to remove data races the
behavior of that program on a weekly
consistent system might be very weird
and thus it makes debugging really
really difficult so for most programs
that are correct and that means data is
free we can relax the consistency model
but for debugging it really helps if we
can support sequential consistency so
some processors actually have support to
flip between sequential consistency or
some more relaxed consistency that gives
us better performance so that when
you're debugging you can use sequential
consistency until you're reasonably sure
that your program is working correctly
in its data is free at which point we
can run it on a weaker consistency model
to benefit from the additional
reordering that the processor is now
allowed to do</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>