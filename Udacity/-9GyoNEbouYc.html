<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>集合小部件 | Coder Coacher - Coaching Coders</title><meta content="集合小部件 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>集合小部件</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9GyoNEbouYc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so our current widget focuses on one
thing today's weather and I'm kind of
okay with that however there are
certainly times when quick access the
entire forecast would be helpful for
that case we can build a collection
widget these widgets control full list
grid or stack of elements perfect for
showing off the upcoming forecast a good
starting point for this is a simple list
view widget the top banner can open
sunshine itself while below the list
offers direct access to the forecast of
each upcoming day clicking on one of
these we go directly to the detail page
for that day so the layout style and
header click behavior the same as our
today widget but filling in the data are
a list view is a different story for
that we'll use a remote view service the
remote view service is responsible for
creating a remote views Factory think of
it as the equivalent to a cursor adapter
but specifically designed for turning
remote views suitable for widgets note
the special permission bind remote views
this is what lets the system bind your
service to create the remote views for
each row hello remote views to connect
to a remote views factory you'll use the
set remote views adapter method this
method kicks off the remote views
factory lifecycle causing our data
reloaded and remote views created for
each row to update our widget based on
new data we can still use the same
technique as our today widget in
receiving the data updated broadcast but
instead of calling an intense service to
update the whole widget you can just
call the notify app widget view data
changed method to trigger the on dataset
changed to require you for new data so
if that's all it takes to a data into
our widget and I get our list populated
we're done right in some cases sure but
we're trying to make this production
ready right what we really want is to be
able to tap on a particular day and go
directly to the details of that date if
your mind is already spinning on where
to add the set on click pending intent
method to get this working you happy to
know that there's some tools which make
this easier the idea is that each
element shares some common template for
the click
action that means our app widget
provider can also call set pending
intent template with a pending intent
that has all the common attributes say
what activity to start our remote views
factory get view at method then handles
the unique part for each element calling
set on click fill in intent to fill in
our template appropriately now of course
for sunshine we have to consider how
both tablets which have the master in
detail view together and phones which
have them as separate activities work
that complicates things a bit here let's
just see how it all falls together</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>