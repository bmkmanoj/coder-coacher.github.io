<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Bad Shuffle - Design of Computer Programs | Coder Coacher - Coaching Coders</title><meta content="Bad Shuffle - Design of Computer Programs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Bad Shuffle - Design of Computer Programs</b></h2><h5 class="post__date">2012-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cx1FXMXgroU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now by all means you should use the
library functions like random shuffle
that's what they're there for but I'm
going to allow a little bit of a
diversion here because the shuffle
algorithm is one that's important to me
personally it was the first non-trivial
algorithm that I came up with on my own
when I was in high school and one of the
first cases where I saw that my teacher
was just completely wrong now here's the
algorithm that my teacher was trying to
describe to me and of course I went to
high school in the dark ages before
there was any Python so it wasn't
written in exactly this language but
I've translated into into Python that
makes sense to you here's what the
algorithm does it says we're going to
keep track with an array of which items
have been swapped so far and then until
there they've all been swapped at least
once we're going to generate two random
indices into that array and then swap
them and record the fact that they were
both swapped and keep going until all
the items have been swapped at least
once so it looks like this again we have
this deck of cards and then we have a
parallel array of the same length which
tells us whether we've been swapped or
not and that starts out as being all
false while this one starts out being
cards and then we go through and we pick
out random numbers so say we pick out I
and J as being here and here and say we
have a nine of diamonds there then we're
going to just swap the two and so we
cross those out we now have seven of
spades there and the nine of diamonds
there and we mark the two spots as being
swapped so now this one's true and this
one's true those two spots have had been
swapped and then we keep on going until
all the elements of swapped are all
equal to true then we know we're done so
that's what my teacher was trying to
sell to me that day in high school and I
was sitting in the back and I just woke
up and I said that can't be right I just
had this visceral reaction that said I
can see what the algorithm does and I
know it swaps everything
but it just seems too inefficient it has
this loop that keeps on going and it's
not a for loop it's a while loop and it
just seemed to me that it was possible
that this loop could go forever
depending on the choice of random
numbers this might never terminate and
that just seemed wrong it seemed like
there was a much better way and in my
head I came up with the shuffle
algorithm that we showed before
Knuth calls it algorithm P for
permutation it just seemed like that was
a simple incorrect way and this was just
too complicated and that really bothered
me I thought that an algorithm should be
guaranteed to terminate</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>