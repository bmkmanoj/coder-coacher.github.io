<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tree Barrier (cont) - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="Tree Barrier (cont) - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tree Barrier (cont) - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/caDFJXja07s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so the last processor to arrive at the
root of the tree in this case p5 he's
the guy who is going to start the waking
up process for everyone and the way the
wake up process works is that p5 having
realized that he has reached the root of
the tree and having realized that he's
the last one to arrive because count is
already 0 after he decremented it he's
gonna flip this locksense flag so when
he flips this locksense flag what's
gonna happen two things one is this guy
p3 he is waiting on this rock since
flipping so he's going to be released
from the spin that he's on of course p5
has reset the count back up to N to
prepare for the next barrier and let us
flip the lock sense so freeing up p3 and
it is now ready to go down the tree as
well to tell his buddies that the
barrier is done and wake up everyone
along the way so the wakeup starts from
the root and so in this case p5 and p3
having been released from the root they
gonna come down to the next level and
they're going to wake up the buddies
that are waiting at this level of the
tree remember I told you that this can
be a carry
tree k happens to be 2 in this case but
for any general K basically at every
level of the tree there's going to be K
minus 1 buddies waiting here K minus 1
buddies waiting here so what we're going
to do is we're gonna release that many
number of prisoners from every level of
the tree so this is a 0 it's level of
the tree there's a first level of the
tree the second level of the tree and at
the zero at level there is K minus 1
buddies at the first level there is K
times K minus 1 buddy is waiting and
similarly as you go down the different
levels of the tree there are more and
more buddies waiting to be released so
for this simple example with k equal to
2 so when he comes up here comes down to
this level P 3 is going to release p 0
and P 5 is going to release P 6 and so
now we have more helpers to go down the
tree and wake up more people so
at this level only p5 was there to wake
up p3 and at this level what P 3 and P P
5 are there to wake up the respective
bodies p 0 in this case and p 6 in this
case so once a 0 and p 6 have been woken
up there are four of them now available
that can go down to the next level of
the tree and they can go down to the
next level of the tree p0 can wake up
his buddies at this level of the tree p3
his buddies at this level p5 and p6 and
so now all the others so P 1 in this
case P 2 in this case p4 in this case
and P 7 in this case who are all been
waiting at this level of the tree they
will all get awakened because of these
guys marching down from the root and
basically what each of these guys are
doing on the way down is to flip the
locksense flag so the first thing that
beef I did was to flip the locksense
flag over here that released this guy
and when when P 3 and P 5 come to this
level of the tree each of them
respectively flipped the locksense flag
that is associated with this data
structure and when they do that P Phi
releases P 6 P 3 releases p 0 and now
both p 0 P 3 P 5 and P 6 on this side
they all can go down to the next level
and p 0 can flip locksense over here P 3
can flip locksense over here P 5 over
here P 6 over here that is going to
release the rest of the bodies P 1 P 2 P
4 and P 7 and everybody is now being
released from the barrier and that
signals that the spinners are done for
all of the processes that have been
waiting and the barrier completion is
complete</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>