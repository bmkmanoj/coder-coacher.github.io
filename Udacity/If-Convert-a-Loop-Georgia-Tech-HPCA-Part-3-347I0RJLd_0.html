<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>If Convert a Loop - Georgia Tech - HPCA: Part 3 | Coder Coacher - Coaching Coders</title><meta content="If Convert a Loop - Georgia Tech - HPCA: Part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>If Convert a Loop - Georgia Tech - HPCA: Part 3</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/347I0RJLd_0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we have seen that we can if convert
if-then-else is a similar technique
would be very useful for a loop but can
we really if convert a loop
let's go back to our loop that loads
from some memory address add something
to that stores that back in memory adds
four to the pointer to the beginning of
the loop unless the pointer has reached
some final value let's say that in this
processor every operation takes two
cycle to do so we will have a stall
cycle here because we need to use our
two two cycles later another stall cycle
here because the add needs to operate
for one more cycle before the store can
see that value there is no stall cycle
here because this add can actually
proceed immediately it doesn't depend on
the store and then the branch gets
delayed by one more cycle because it's
using the result of the add so we have
three stall cycles here and again this
is a processor where every operation
just takes two cycles we have already
seen that we can schedule this loop
differently so that we load and then we
do the add I and then we do the add this
way we avoid the stall cycle here
however after this add the only things
that are left to do in this iteration of
the loop are the store and the branch we
cannot do the branch before the store so
the store has to happen here and thus we
haven't eliminated this stall cycle here
and then the branch can check r1 for
whether it reach the final value here
because without a stall because r1 has
been manipulated here and then we have
to change this store if you remember
because the add of a constant has moved
here so that it uses a minus for offset
to compensate for this so we managed to
eliminate two of these stall cycles but
one still remains now if you look at
this branch here if conversion would
allow us to kind of do the next
iteration of the loop here and then
eliminate this branch because it would
be predicated and then we could maybe
find something here that can go over
here but the problem is that a loop is
not really suitable for if conversion
because every time we have a new
iteration we would have to introduce a
new predicate and then every new
iteration would introduce yet another
predicate and we simply cannot deal with
so many predicates and so many things
that get done
only the
predicate is true pretty much if we are
executing a million iteration loop
sometimes and sometimes only one
iteration then almost a million
iterations would have to be just
predicated out which would be very very
slow so we want to do something about
loops that is like if conversion to
allow us to kind of find things in
future iterations to move here but
without really doing if conversion so we
cannot truly if convert but there is
something else we can do and that
something will be called loop unrolling</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>