<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ambiactive Support | Coder Coacher - Coaching Coders</title><meta content="Ambiactive Support - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ambiactive Support</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AIrJKPHrShI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all of the samples we've tested on
Android wear so far are designed to be
used for a short period of time if you
run an app like this and let it sit for
a few seconds eventually the watch
display will enter ambient mode and the
watch will switch back to the default
watch face your watch activity will be
destroyed and the user will have to
restart it again if needed so what do
you do if you want to keep an app
running on the display for a long period
of time such as showing the number of
steps while on a run one option is to
grab a wakelock and keep the display on
but that will keep the watch fully
powered-up draining the battery very
quickly so that's not a good way to do
things the proper way is to use a
feature called always on mode this mode
allows your app to control what is shown
on the watch screen while the watch is
in ambient mode it works very similar to
a watch face in that the power usage of
the display and processor is kept to a
minimum saving power you should only
refresh the screen infrequently and try
to avoid doing any processing later on
in this course we're going to discuss
watch faces which run all down a watch
and it's the default to show when
nothing else is running but always on
mode here is useful for activities that
run for an extended period of time where
you want the watch to go into ambient
mode but you don't want it to run 24
hours a day like a watch face here's the
documentation that you can refer to for
more details let's work through an
example of how to add always-on support
to a basic wearable sample so let's
create a new wearable project file new
new project use the defaults and make
sure you create a web project with a min
SDK of 21 and we'll leave everything as
is now that the project is ready open up
the wearable androidmanifest.xml file we
need to add a dependency to the Android
wear shared wearable library the shared
library is needed for backwards
compatibility so that older Android wear
devices that do not implement always-on
can still run your application as a
regular activity you need to request
wakelock permissions in the
androidmanifest.xml as well make sure
you add this to the phone app to since
wearable permissions must always be a
subset of phone permissions we need to
have this here as well to make it
install correctly we also need to go to
the wearable build.gradle file we also
need to declare our target SDK version 2
being 22 since this is the first API
release when always-on is supported in
your build.gradle you also need to make
sure that you're including
the wearable support library correctly
you also need to make sure you include
this new provided entry which deals with
some other dependency issues when you
want to do release builds with proguard
but you don't need to worry about that
right now we use the plus here to grab
the latest versions but you can specify
an exact version if you want at this
point you should be able to build and
install everything you won't notice any
differences yet but at least you can
check you did everything right up until
now let's go and modify our activity so
that it can stay always on click on the
activity here modify the activities so
that it extends wearable activity you
need to call set ambient enabled to
indicate that you want to keep your
activity running in ambient mode instead
of going back to the default watch face
you then need to override the on enter
ambient method which as cold as the
watch is going into ambient mode you can
implement whatever changes you want to
your UI you need to present a much
simpler you I here so you should turn
off any unnecessary details reduce the
colors used and keep the number of
pixels illuminated to a minimum now
let's set the text view so we can see
when we're ambient or not next override
the on update ambient method to receive
system delivered ticks every minute this
is useful if you want to show an
updating clock in your UI which is
important since the watch face is not
visible when your app is running like
this finally you override the on exit
ambient method which is called when the
user touches the watch display and we
need to restore the user interface back
to normal so we need to undo everything
we did in on enter ambien also if you
need to query this information you can
call is ambient to find the current
state of ambient mode of your activity
although you shouldn't need to do this
if you track state in the previously
overridden methods so let's now start up
and observe it in action the screen is
in ambient mode right now then you can
see that shown on the screen when you
touch it it wakes up into interactive
mode you could slide the app away if you
wanted to as well when you do the palm
gesture it goes back into ambient mode
and our app stays running on the screen
and you can see the color and size
changes that take effect as we switch
between the different modes finally if
you want to see a more complex example
we have a full sample demonstrating how
always on mode works that you can look
out as well so go to file import sample
and search for always on to find it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>