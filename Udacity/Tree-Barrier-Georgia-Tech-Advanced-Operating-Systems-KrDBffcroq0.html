<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tree Barrier - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="Tree Barrier - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tree Barrier - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KrDBffcroq0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I'm going to first describe to you a
more scalable version of the sense
reversal algorithm and the basic idea is
to use divide and conquer I have a
hierarchical solution that is limit the
amount of sharing to a small number of
processes let's say a small number K of
processors and and in this example K is
equal to 2 so essentially you know what
we are saying is if you have n
processors that want into a barrier
synchronization break them up into small
groups of K processors and so we build a
hierarchical solution in the hierarchy
the solution obviously leads to a tree
solution and so since we have K
processors competing and accomplishing a
barrier among themselves if you have n
processors then you have and log n to
the base K as a number of levels in the
tree in order to achieve the barrier and
in this case what we have done is K is
equal to 2 and so the number of levels
and with 8 processors the number of
levels in the tree is going to be 3 so
let's talk about what happens when we
arrive at a barrier so at a micro level
the algorithm works exactly like a lot
of sense reversing algorithm and that is
these 2 processors if they are sharing
this data structure account variable and
a locksense variable and you see that
for every K processors in this case K
being 2 every 2 processors you have
these two shared variables account
variable and a locksense variable count
variable locksense variable count and
lock sense and so what's going to happen
and you'll see that you have this
counter locksense variable replicated in
every level of the tree and we'll talk
about how these variables are going to
be used in the progression of this
algorithm so let's first talk about
arriving at a barrier so let's say that
p1 has arrived at the barrier what it is
going to do is it's going to go and
decrement this counter now what is this
counter going to be set to well this
counter is is just for the K processors
that are barrier syncing here and K
being true this count
is going to be too and so this guy is
going to decrement the count and if the
count is not zero it's going to
basically wait for the sense to reverse
just like the sense reversal algorithm
so same thing it's going to happen that
p1 comes here decrements the count and
it waits for sense to reverse by
spinning on this flag sometime later p0
comes to the barrier and a decrement
account count goes to zero but we're not
done with the barrier yet because the
values for all of the processes so what
p0 is going to say okay between the two
of us I know that we both have reached
the value because the count is zero but
I have to go up and go to the next level
up and here I'm going to decrement the
count here to indicate that I've arrived
at the barrier so p0 is the one that
moves up the tree p1 is stuck here
waiting for sense to reverse p0 moves up
so remember that even though p0 has come
here and decrement the count and made it
0 it doesn't flip the sense flag yet
right because the barrier will be done
only when everybody has arrived and
therefore all that p0 is going to do now
is decrement the count
see that it is 0 then it is going to
move up in the tree and go to the next
level of the tree and this data
structure which is now shared among this
half of the tree this half of the tree
is reading this data structure so p0
decrements this count and what will this
count be initialized to again 2 right
because at every level you have K
processors K being 2 in this case
arriving at a barrier so p0 arrives here
decrements account count is not 0 yet
and so it waits so p0 is going to wait
unlocked sensitive rivers here p1 is
waiting on lock sensitive rivers here p0
is not waiting on locksense rivers here
because it was arrived at the barrier
but his partners are still stragglers
they have not arrived at the barrier yet</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>