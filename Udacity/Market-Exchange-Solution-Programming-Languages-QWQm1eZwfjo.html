<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Market Exchange Solution - Programming Languages | Coder Coacher - Coaching Coders</title><meta content="Market Exchange Solution - Programming Languages - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Market Exchange Solution - Programming Languages</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QWQm1eZwfjo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so far in this final exam reverting a
lexer a parser and now in this problem
we're going to write an interpreter
however we're mixing it up a bit and
we're not going to write an interpreter
for a programming language per se but
rather for a market we're going to be
given a list of how much money people
have things they want to buy and things
are willing to sell and we're going to
simulate the market and the result is
going to be the amount of money that
people have left over so let's take a
look at an example input into our
interpreter so here I have our abstract
syntax tree for our market at the
beginning we declare how much money
Klaus and andreas are two participants
in the marketplace half and then we talk
about what are they willing to buy and
sell within each element we generally
say who is the person that this element
applies to the what this element is
dealing with and then some amount of
money so for the has elements we're
saying Klaus has a hundred coins we're
saying add Reyes has 50 coins down here
we're saying Klaus wants to buy a sheep
for 50 he also wants to buy another
sheep for 50 you can have more than one
and Reyes wants to sell a sheep for 50
and he wants to sale another sheet for
50 so Klaus wants to buy two sheep each
for 50 and Reyes wants to sell two sheep
each for 50 we should probably be able
to make a deal here note that after the
has elements the buys and sells can be
in any order so it steps through this by
hand and see if we can come up with an
algorithm for which to write our
interpreter so here we're saying Klaus
has a hundred coins we should probably
keep track of that since the output of
the entire interpretation is going to be
a list of how much money each person has
or actually we're gonna store it as a
dictionary but so let's do that
I just wrote Klaus for short okay so we
say Klaus is 100 we are done with this
we don't need it anymore this next line
says Andreas has 50 so let's update our
dictionary alright we're done with this
now that we see Klaus wants to buy a
sheep for 50 let's see if anyone is
willing to sell a sheep so let's go
through the rest of them one by one so
we in this next line it's about Klaus
buying we don't really care about
we're looking for selling ok here we
have a cell it happens to be for a sheep
it also happens to be for the exact
amount that we want so these three
elements match perfectly for what we're
looking for one more thing that we have
to check is to make sure that Klaus has
at least 50 coins to make the
transaction so we look up here clauses
100 that's more than 50 he's able to
enforce it so now we do the transaction
clause now only has 50 and Andreas now
has 100 we should cross off the elements
that we used and now let's continue the
process from the top again so we only
have two things left so the next one is
Klaus wants to buy a sheep 50 we do the
same lookup go to the next element see
cell sheet 50 yay Klaus has at least 50
we're all good let's make the
transaction okay
we've gone through everything in our
parse tree there's nothing left to do
because there's nothing left so our
output is just going to be this
dictionary so we went through that
algorithm it's pretty straightforward
it's a matter of just stepping through
what is available in doing what we can
until there's nothing left so now you're
probably thinking where's the code well
let me show you so here I have the
solution it may look a bit messy but
it's actually pretty straightforward the
first thing we do is declare the
dictionary that we store how much money
each person has and the basic strategy
like I went over is to continue going
through elements in the parse tree until
there's nothing left to do
until we didn't do anything so nothing's
changed and we should just stop in the
case of the example that I went over
that just meant that we were out of
elements but it could also be the case
that no one can afford to buy anything
so we should just stop so let's assume
that there's nothing left to do and then
only change it once we do something
we're going to go through each element
in our abstract syntax tree we're going
to pull out who is involved in the
element that's always the zero index the
first element in the tuple we're going
to do what kind of type it is and if
it's a has so those are going to go
first we're going to put that person in
our environment and then I'm what I'm
doing right here
is we're just marking off it as skip
we're changing the type to skip skip
isn't has by ourselves so we're just
going to ignore it this is equivalent to
me crossing it off an alternative way of
doing a similar process would be to
recursing onto the parse tree and
removing parse tree elements as we use
them but this is just as easy
if we're in a bi scenario if we find an
element for which we want to buy we're
going to take out what we want to buy
and how much it's for and then we're
going to go through the abstract syntax
tree again if we find an element in the
abstract syntax tree that is a sell its
what we're looking for I can afford it
for that price and it's the price that I
want to pay for it we're going to do the
transaction this involves skipping
crossing off both elements in the parse
tree that are involved in the
transaction subtracting off the new cost
and adding that amount of money to the
person that sold it and we're also here
putting finished equals false because we
did something the state has changed and
we should do another pass and once we're
done we just return the dictionary that
we started with</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>