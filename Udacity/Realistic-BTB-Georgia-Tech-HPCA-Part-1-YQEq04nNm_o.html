<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Realistic BTB - Georgia Tech - HPCA: Part 1 | Coder Coacher - Coaching Coders</title><meta content="Realistic BTB - Georgia Tech - HPCA: Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Realistic BTB - Georgia Tech - HPCA: Part 1</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YQEq04nNm_o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so how do we make this BT be realistic
it needs to be small yet it needs to
work this way first of all we don't need
to have an entry for every possible PC
it's enough if we have enough entries
for all the instructions that are likely
to execute soon so for example if our
program is executing a loop that has
about a hundred instructions of code we
really need only slightly more than a
hundred entries after the first
iteration of the loop the BTB will be
populated with instructions in the loop
at which point we will keep finding what
we need in the BTB so now we have
relatively few entries in the BTB let's
say that we do our timing experiments
and we find that only 1,024 entries can
be accessed in one cycle the question is
now there are many many possible pieces
how do we map each PC to an entry in a
way that avoids conflicts among
different pcs that map to the same entry
and note also that we need this mapping
function to be really really simple
because any delay in computing the
mapping function means that we need an
even smaller BTB so that the whole thing
finishes in one cycle the way we do this
is the program counter from which we are
fetching is let's say a 64-bit value so
it has bits starting from 0 to 63 we
need 10 bits to index into our BTB so
what we will do is we'll take the least
significant 10 bits and use that as the
index into our BTB this mapping function
is really fast because all we do is we
just take these 10 bits and we just feed
that to the BTB as an index why are we
using the least significant bits and not
the most significant bits think about a
typical program where an instruction has
some sort of PC address and then the
next instruction will have an address
that is very close to it for example
just increment by 4 and so on so if we
were using the most significant bits of
the PC all instructions that are in the
same part of the program would map to
the same entry
because they have the same most
significant bits thus if you have a loop
of some sort here all of the
instructions in the loop would map to
the same entry so that as we execute
this loop these instructions are kicking
each other's stuff from the BTB
which we don't want to have we want each
of these to have an entry if we use the
least significant bits what we get is
that each instruction gets a different
entry from nearby instructions thus
ensuring that things like loops and
functions and so on neatly map to the
BTB</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>