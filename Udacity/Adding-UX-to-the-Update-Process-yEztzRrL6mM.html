<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Adding UX to the Update Process | Coder Coacher - Coaching Coders</title><meta content="Adding UX to the Update Process - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Adding UX to the Update Process</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yEztzRrL6mM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now we have a safe way to update our
static assets but as we saw in a
previous chapter the changes would be in
the waiting worker ideally we want users
to be on the latest version as soon as
possible we want them to get the latest
features the latest design and of course
bug fixes but as we saw when a new
worker is discovered it waits until all
pages using the current version go away
before it can take over and that could
be a long time let's do something better
our goal here is to tell the user once
an update has been found and give them a
button to ignore it or refresh the page
to get the new version but how can we
achieve this well first off let's cover
the update notification thankfully there
are api's that give us insight into the
serviceworker life cycle when you
register for a service worker it returns
a promise that promise fulfills with a
serviceworker registration object this
object has properties and methods
relating to the serviceworker
registration we get methods to do things
like unregistered a service worker or
programmatically trigger an update we
also get free properties installing
waiting and active these will point to a
service worker object or be null they
give you an insight into the service
worker lifecycle they also map directly
to the dev tools view we've been working
with so far this dev tools viewers
actually just looking at these
registration objects for example if
there's a service worker instance in
installing that tells us there's an
update on its way although it might be
thrown away if the install fails if
there's a service worker in dock waiting
we know there's an updated service
worker ready and waiting to take over
the registration object will admit an
event when a new update is found called
well update found when this fires dot
installing has become a new worker on
the service worker objects themselves
you can look at their state the state
can be installing the install event has
fired but hasn't yet completed installed
the installation completed successfully
but hasn't yet activated activating the
activate event has fired but not yet
complete or activated the service worker
is ready to receive fetch events oh and
also there's redundant the service
worker has been thrown away redundant
happens
the service worker has been superseded
by a newer worker and it also happens if
the service worker fails to install the
service worker fires an event state
change whenever the value of the state
property changes also navigate a service
worker controller refers to the service
worker that controls this page we want
to tell the user when does an update
ready but because the service worker
update happens in the background the
update could be ready and waiting it
could be in progress or it might not
started yet this means we need to look
at the state of things when the page
loads but we may also need to listen for
future changes for instance if there's
no controller that means this page
didn't know you sing a service worker so
they loaded the content from the network
otherwise we need to look at the
registration if there's a waiting worker
there's an update ready and waiting we
tell the user about him otherwise if
there's an installing worker there's an
update in progress of course that update
may fail so we listen to the state
changes to track it and if it reaches
the installed state we tell the user
otherwise we listen for the update found
event when that fires we track the state
of the installing worker and if it
reaches the installed state we tell the
user that's how we can tell the user
about update whether they're already
there in progress or start sometime
later</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>