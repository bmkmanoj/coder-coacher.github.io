<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cache Management - Design of Computer Programs | Coder Coacher - Coaching Coders</title><meta content="Cache Management - Design of Computer Programs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cache Management - Design of Computer Programs</b></h2><h5 class="post__date">2012-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1jCy7tLrHWU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">if you took cs101 you saw the idea of
memorization if you haven't seen it the
idea is that sometimes particularly with
a recursive function you will be making
the same function calls over and over
again if the result of a function call
is always the same and the computation
took a long time it's better to store
the results of each value of n with its
result in a cache a table data structure
and then look it up each time rather
than try to recompute it we can make
this function be cached very simply with
a couple extra lines of code we asked if
the argument is already in the cache
then we just go ahead and return it
otherwise we compute it store it and
then return it and so this part with the
dot dot is the body of the function all
the rest is just the kind of boilerplate
that you have to do to implement this
idea of a cache we've done this once and
that's fine but I'm worrying about the
principle of don't repeat yourself
there's probably gonna be lots of
functions in which I want to restore
intermediate results in a cache and I
don't want to have to repeat this code
all the time and so this is a great idea
for a decorator
we can define a decorator called memo
which we'll go ahead and do this cache
management and we can apply it to any
function and the great thing about this
pattern of using memoization is that it
will speed up any function f that you
pass to it because doing a table lookup
is going to be faster than a computation
as long as the computation is is
non-trivial it's more than just a lookup
now the hockey player Wayne Gretzky once
said that you miss 100% of the shots you
don't take this is kind of the converse
this is saying you speed up a hundred
percent of the computations that you
don't make so here's the memo decorator
the guts of it is the same as what I
sketched out previously if we haven't
computed the result already we compute
the result by applying the the function
f to the arguments gives us a result we
cache that result away and then we
return it for this time and it's ready
for next time next time we come through
we try to look up the arguments in the
cache to see if they're there if they
are we return the result and now I've
decided to strut
this one as a try/except statement
rather than an if-then statement and in
Python you always have two choices you
can first ask for permission to say are
the args in the cache and if so return
cash or args or you can use a try accept
pattern to ask for forgiveness
afterwards to say I'm first gonna try to
say if the cat if the args are in the
cache go ahead and return it if I get a
key error then I have to fill in the
cache by doing the computation and then
returning the result and the reason I
use the try structure here rather than
the if structure is because I knew I was
gonna need it anyways for this third
case either the args are in the cache or
they aren't but then there's this third
case which says that the args are not
even hashable and what does that mean
start out with the dictionary D being
empty and then I'm going to have a
variable X and let's say X is a number
if I now ask is X in D that's going to
tell me false it's not in the dictionary
yet but now let's say I have another
variable which is Y which is the list 1
2 3 and now if I ask is why in D you'd
think that that would tell me false but
in fact it doesn't instead it gives me
an error and what it's going to tell me
is type error unhackable type list what
does that mean so that means we were
trying to look up Y in the dictionary
and a dictionary is a hash tables
implemented as a hash table in order to
do that we have to compute the hash code
for Y and then look in that slot in the
dictionary but this error is telling us
that there is no hash code for a list
and why do you think that is our list
unhackable
because list can be arbitrarily long or
because list can hold any type of data
as the elements not just integers or
because lists are mutable now I
recognize this might be a hard problem
if you're not up on hash tables this
might not be a question you can answer
but give it a shot and give me though
your one best response</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>