<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Updating the Static Cache | Coder Coacher - Coaching Coders</title><meta content="Updating the Static Cache - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Updating the Static Cache</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8rIYvtCcFyA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you have done well to get this far your
skills they are strong you are ready it
is time time to disable force update on
page load now the serviceworker
lifecycle is back to normal which is how
real users will experience it you see
force update is great during development
say we want it to change the theme of
the app the theme colors are in public
scss themed SCSS these are a set of sass
variables reference throughout the rest
of the style sheets if i change the
primary color to red then go back to the
browser with force update enabled and
refresh boom red toolbar but this is
because force update reloads the service
worker from the network on every refresh
and causes it to install even if the
serviceworker hasn't changed let's say I
change the whole theme by an commenting
this other set of variables here which
should make the theme green but this
time I'll disable force update on page
load refresh the page and still red no
matter how many times a refresh still
red if I shift refresh and bypass the
serviceworker I see the changes but
normal refreshing gets me nowhere
because I cash still contains the old
CSS our cash CSS is updated as part of
the install step but that isn't
happening because there's no new service
worker to install we can see from dev
tools there's no new service worker
waiting without force update the browser
checks for an update to the service
worker per page load but I didn't change
the serviceworker i only changed the CSS
so there's nothing new to install we
need to work with the serviceworker to
get to pick up changes because we're
developers right we change code all the
time and we need users to get those
changes as soon as possible with minimum
disruption here's how we work with the
serviceworker lifecycle to get the CSS
to update we need to make a change to
the serviceworker the browser will then
treat this updated worker as a new
version because it's new it'll get its
own install event where it'll fetch the
JavaScript HTML and our updated CSS and
put them in a new cash it won't put them
in a different cache automatically we
change the name of our cash to make this
happen we create a new cache because we
do
to disrupt the cash that's already there
being used by the old service worker and
the pages it controls then once the old
service workers released and we're ready
to take over we delete the old cash so
the next page load gets resources from
the new cash meaning it gets the latest
CSS job done we've already covered most
of the parts needed to make this happen
we know that a change to the service
worker will cause it to spin up a new
instance and that change can just be
renaming the cash from v1 to v2 the bit
we haven't covered is how to get rid of
that old cash the first piece of the
puzzle is the activate event we've
already seen the install event which
fires when the browser sets up a new
service worker for the first time where
is the activate event fires when this
service worker becomes active when it's
ready to control pages and the previous
service worker is gone this makes it the
perfect time to get rid of old caches
like the install event you can use a
vent wait until to signal the length of
the process while you're activating the
browser will queue of a service worker
events such as fetch so by the time your
service worker receives its first fetch
you know you have the cash is how you
want them you can delete cache is using
caches delete passing in the name of the
cash you can also get the names of all
your caches using caches keys both of
these methods return promises</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>