<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Putting It Together - Web Development | Coder Coacher - Coaching Coders</title><meta content="Putting It Together - Web Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Putting It Together - Web Development</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/E2mPjwweIJ0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we're going to go ahead and
restructure this program a little bit to
use our new secure functions you can see
I've got them here the three functions
we were working on in those quizzes
let's go ahead and use them so first
thing we want to do is we're not going
to store this visits in a variable
called visits anywhere we're going to
call it visit cookie the l equals get
visits okay and we're also we're going
to make a new variable for actual visits
count I'm just going to give by default
be zero and then we say if visits cookie
Val basically if it's not none because
get will return none if that cookie
doesn't exist at all
which is what's going to happen if the
users never been to us we're going to
run our check secure Val on this visit
cookie star I renamed this variable to
visit cookie stir and and we're the
result of that run start in cookie Val
and if cookie Val remember that function
returns none if it wasn't valid if
cookie Val visits equals int cookie Val
so we set visits to zero by default we
look up our cookie if we have a cookie
at all we try to decode it using check
secure Val and if we got a result back
from that that's our valid result we
convert it to an integer and we saw it
in visits so if as this is either zero
or what we got in the cookie we don't
need to check anymore if it's a digit
because we're going to assume it's valid
so we're going to say visits plus equals
one because now we know it's valid
nobody's Stanford with it this integer
should have worked now we need to update
our new our new cookie value so we call
our make secure Val function we got to
convert visits to a string before we
send that in and then we're going to
send that to our header okay so we made
these changes let's go to our browser
and give it a try so in our browser
reload our page the visit cookie has
whatever we left in it before 10,000 won
or something which isn't going to be
valid because there's no hash so we
reload the page and we start seeing our
counter but you can see our our feature
is working now you can see our counter
is working if we look at our cookie you
can see it now stores the number and it
has the hash notice it's got a pipe here
actually I noticed the that there's a
little snafu with Google App Engine when
I was working on this where the a comma
in a cookie has some special meanings so
I changed our function to use
pipe character instead of a comma
because we were get I was getting a bug
where my cookie store didn't didn't have
anything after the comma so I switched
from commas to pipes and that's what I
use for the rest of this lesson back to
our browser we can see that we have this
cookie if we were to mangle this cookie
a little bit by saying visits equals ten
thousand one and then we'll use that
same hash like this ten thousand one and
reload the page it resets us back to one
because our cookie wasn't valid or at
least the number in the cookie didn't
match the hat match the hash so because
the check secure valve failed we reset
visits back to zero or actually what we
never set it to what its true value is</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>