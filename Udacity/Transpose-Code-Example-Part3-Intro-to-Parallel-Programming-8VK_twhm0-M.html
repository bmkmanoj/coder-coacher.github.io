<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Transpose Code Example Part3 - Intro to Parallel Programming | Coder Coacher - Coaching Coders</title><meta content="Transpose Code Example Part3 - Intro to Parallel Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Transpose Code Example Part3 - Intro to Parallel Programming</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8VK_twhm0-M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's keep track of what we're doing
version one is serial a single thread
and it took about 466 milliseconds so
466 milliseconds is pretty slow but
sometimes that's okay for code that's
only going to be executed once port code
that's not performance critical at all
or code that's going to run on a really
small data set like that 8x8 matrix that
we started with it's just not worthwhile
to optimize the heck out of this so even
though this simple serial kernel may
seem very naive that's really sometimes
the right thing to do so keep this in
mind when you're optimizing think about
what you need to optimize whether it's
important now let's assume that in fact
performance is critical on this section
that's why we're optimizing it and let's
go back to the code and see what we can
do now one easy step would be to launch
one thread for each row of the input
okay so now here's the code that does
that and this code we're going to launch
one thread per row of the output matrix
so the value of I is going to be fixed
by the thread ID and every thread is
going to execute just the outer loop of
this code we saw before and the inner
loop we're essentially handing off to be
run across many different threads so
these two codes are almost identical and
the only difference is that we're
launching threads instead of looping
over values of I let's time this okay so
here's the code for calling a new
function we're going to launch the
function transpose parallel per row as a
kernel we're going to launch a single
thread block consisting of n threads
remember n is the size of our matrix
1,024 currently we're going to pass in
the input matrix pull out the output
matrix copy it and then we're going to
print out the timing and verify it let's
compile and run this code okay transpose
serial ran 484 milliseconds again
roughly what we saw before transpose
parallel per row is running in 4.7
milliseconds so obviously we're making a
huge improvement by parallelizing this
just across the threads of a single
thread block so let's note that down 4.7
milliseconds roughly a hundred X
improvement</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>