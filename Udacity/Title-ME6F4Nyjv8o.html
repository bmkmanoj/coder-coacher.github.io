<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Title | Coder Coacher - Coaching Coders</title><meta content="Title - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Title</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ME6F4Nyjv8o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Now that we have our map drawn,
we need to draw circles representing our attendance data on top of it.
The first step in doing this is to actually load our attendance data.
Remember, we used our initial d3.json load function to load the GeoJSON data,
but we never loaded the attendance data that we've been working with all along.
In order to load our attendance data,
we can do exactly what we have previously done.
In this case using an intermediate data transform function to convert our
attendance to an integer and our date to a JavaScript date object.
Which we will then pass to a function as a call back
that I've defined as plot points.
The plot points function is going to act similarly to the draw
function of previous lessons that gets past a single argument, in this case,
data, which corresponds to our attendance data.
And inside of it we will put the code that
will draw the circles corresponding to the attendance of each World Cup.
The only difference from what we've done before is that
we're actually calling a d3 data loading function.
In this case, d3.tsv.
Inside of our other call back function, with loads the GeoJSON.
This is perfectly alright and simply has the effect of saying,
first load my map data, with d3.json, world countries, GeoJSON.
And once that file's loaded call the draw function,
passing the GeoJSON data to it, and then inside of the draw function you
make another call to a data loading function.
In this case d3.tsv, that says when you get through this line
of the draw function, load the world_cup_geo.tsv file.
And once that file's loaded, call the plot_points function so
that the order of functions is called in the following.
First, d3.json is called to load world_countries, which gets passed to draw.
And inside of draw, towards the end, we call d3.tsv.
Which asynchronously loads the World Cup data for the attendances.
And once that file's loaded gets passed to the plot points function.
And in theory, if we wanted to do more data loading,
we can simply put another call to d2.json or
d2.tsv inside of our plot points, and can nest these somewhat infinitely, but I
would say it's a bad practice to go too far deep down this nesting of callbacks.</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>