<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Thread Divergence in the Real World Part3 - Intro to Parallel Programming | Coder Coacher - Coaching Coders</title><meta content="Thread Divergence in the Real World Part3 - Intro to Parallel Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Thread Divergence in the Real World Part3 - Intro to Parallel Programming</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jAo4nrLk2Tk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this drives home an important point you
need to be aware of branch divergence
it's one of the fundamental things about
GPU architectures there any massively
parallel architecture that uses a sim D
approach but don't freak out just
because your code has an if statement or
a for loop reason it out profile the
code figure out whether this is a real
problem worth optimizing there's no real
recipe for reducing branch divergence
what to do depends on the algorithm and
sometimes the right answer is an
entirely new algorithm there are a
couple of general principles though try
to avoid branchy code if you have a lot
of if or switch statements in your code
consider whether or not adjacent threads
are likely to take different branches
and if so try to restructure the second
general principle is to beware large
imbalance and thread workloads sometimes
one thread can take much much longer
than the average thread to complete a
task and when this happens the
long-running thread can hold up the rest
of the warp or even the rest of the
thread block we saw this in the example
earlier where some threads performed a
loop much more often than other threads
in the same warp so look carefully at
loops and recursive calls to decide if
this kind of work imbalance might be
hurting you in the next unit you'll see
another example breadth-first search and
a graph where each thread is assigned a
work item of random size and if one
thread gets unlucky and picks up a work
item that takes a thousand times longer
than the rest of the threads you're
wasting a lot of computational
horsepower as all the rest of those
threads sit idle waiting for that one
long-running thread to finish so there's
a lot of simple strategies that can
mitigate this imbalance you can
restructure your code entirely or you
might for example coarsely sort the work
items before size and John will dive
deeper into parallel strategies for
breadth-first search and a lot of other
interesting problems in the next unit</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>