<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Coverage For Random Testing - Software Testing | Coder Coacher - Coaching Coders</title><meta content="Coverage For Random Testing - Software Testing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Coverage For Random Testing - Software Testing</b></h2><h5 class="post__date">2012-07-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oH433BupOI0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so this is what our random tester
is going to look like and now let's look
at the implementation in Python and
we're going to see is that since all i
have is the reference implementation not
actually going to be testing two
implementations against each other
rather all i'm going to be doing is
making up to random 64-bit integers and
just running the high common bits and
low comment bits functions on them so
we're going to do is we're going to be
able to see code coverage but i'm not
actually checking the output for
correctness and i'm running a hundred
thousand test cases so let's run this
under the coverage harness and so you
can see i'm asking here for branch
coverage so we've got lots of output and
the coverage should have been computed
and we see here is that was 25
statements who ran 23 of them a couple
of statements were missing and we had a
couple of partial branch coverage
results what you can see here is that
we've executed the body of the loops and
we've returned out of this path but we
failed to take the exit branch from the
loop and we failed to execute the return
statement and the same thing has
happened over here so let's ask
ourselves why completely random testing
with valid inputs a hundred thousand
times didn't manage to cover this well
of course this is pretty easy to see so
we're generating to totally independent
random 64-bit numbers and the only way
we can reach this case is if they're the
same so what are the odds of two
randomly generating 64-bit integers
being the same they're extremely low
compared to the number of test cases are
running we're never going to test this
case if we're testing optimized
implementations of these functions this
actually matters quite a bit more when
we do optimized implementations of these
functions we're going to use specialized
instructions a modern architecture
support for providing bit counts these
going to boil down to at least if we're
using GCC as a compiler functions like
this built-in clz and built-in ctz which
as you can see clz returns the number of
leading zero bits in X starting at the
most significant bit position and we can
use this to implement our one of our bit
functions by X soaring together the two
operands to get comp to turn common bits
into leading zero bits and so what we
can do is use an XOR operation to turn
high order common bits in our in our
arguments into leading zero bits then we
can use this built-in clz to implement
an extremely fast version of the high
common bits function and similarly this
built-in ctz could be used to build an
extremely fast low common bits and so
but if you see here if x is 0 that is to
say if the two inputs are equal the
result is undefined so the
implementation here is allowed to do
something really weird in the case where
we pass in two operands that are the
same but as we saw our little random
testing here has only a negligible
chance of actually generating two
arguments are actually the same so
it's really a bad random tester for this
case so let's go back and try to do
better</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>