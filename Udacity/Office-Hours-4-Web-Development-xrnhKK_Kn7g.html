<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Office Hours 4 - Web Development | Coder Coacher - Coaching Coders</title><meta content="Office Hours 4 - Web Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Office Hours 4 - Web Development</b></h2><h5 class="post__date">2012-05-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xrnhKK_Kn7g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to office hours for week four
before we get into your questions
there's a little issue i'd like to
mention with regard to the homeworks so
some of you have been asking about how
to delete cookies the way i had intended
for you to do this for the logout
portion of the homework deleting cookies
is how you log out what's for you to
basically just set an empty cookie
unbeknownst to me but now I've learned
that web app to the the framework we're
using that's built in the App Engine
also has a delete cooking method that
you can use to delete a cookie and
that's just and all that does is it sets
the cookie to blank just like you would
do by hand if you're manipulating the
headers so both should work fine delete
cookies probably a little bit easier but
you know not all frameworks have that
sort of thing built in and I wasn't
really looking for it so now if you read
the docs and you find that sort of thing
good for you should work fine okay so
let's uh what do you got for me okay
well first off we've got some questions
on authentication and when we should
roll our own authentication libraries
when we should use ones that are
provided and if we go into more
professional authentication libraries
like Oh off for example a little bit
in-depth authentication is a tricky
issue if you get it wrong it can be a
painful process and I told you that
story about how I got it wrong during
read it and it was a painful process so
the decision whether to roll your own or
use what's built in it's almost the same
thing because if we can use what's built
in you need to understand how it works
so you can decide whether you're better
off rolling your own the one that's
built into web app too I looked into it
in response to this question and what I
found is that they basically have the
almost exact same algorithm that we
discussed in the lecture you know having
a password creating a random salt
hashing the whole thing together and
storing that by default that you shall
one and you can specify what ever you
know hashing system you would like you
know I mentioned in the lecture if you
have the option you should use bcrypt
somebody else in the forums mentioned s
script I'm not super familiar with that
script it seems like the same concept
but a little bit better the whole idea
of bcrypt versus you know one of the
Shah hashing systems is Shaw and md5 and
those guys were designed to be
asked in a mostly for message
authentication and bcrypt is designed
deliberately to be slow so that if
somebody has it wants to you know hash
all of your passwords it's going to take
a while now with regard to things like
Google's built-in authentication based
on Google users you know if that fits
your app you know use it by all means
it's kind of a neat thing but if you
want users to have passwords and custom
behavior you're gonna have to you know
build your own thing or use another
library but if logging with Google
suffices yeah great the next part of the
question was about oh off Oh off is a
protocol for authenticating with
third-party websites I wouldn't use it
if you could if you can avoid it there's
a successor to OAuth got 0 off to which
works a lot better you know if you try
to implement all off you will be grumpy
for weeks you know I'm still getting
over it Oh auth to is much more
straightforward and it's basically you
know if you want to you know integrate
with you know I think Twitter and Google
has an auth to integration Facebook does
as well you basically sign up for them
get an API key some credentials and
there's a little kind of back and forth
message exchange that basically says you
know I'm this developer and you you know
you agreed to give me access so it's not
just random access you don't have to
worry about passwords it's a little more
complicated there's all these tokens and
timeouts and stuff like that to deal
with but you know there are all off to
libraries and python that work just fine
so long story short use what fits your
app you know you'll find yourself
rolling your own very often I dread it
hit monk we rolled our own both times
but if Google login works for you great
and if you need off to good luck the
next question we had was about database
constraints and people had some issues
with usernames not being unique in the
google data store sure and how to
enforce that and when you need to
enforce that ok sure ok so the database
consistency issue that's a great
question and it's been lurking in the
back of my mind ever since i started
teaching you guys about data store
there's kind of two main ways to
approach this problem the first to be
using transactions i'm not super
familiar with how the transaction
work in data store which is why I
haven't spent a whole lot of time on it
and I'm not gonna spend a whole lot of
time on it now but the general idea is
most database systems that a story
included and also you know postcards in
my sequel all the sequel ones have this
notion of a transaction where you
basically say begin transaction and then
you can do all sorts of operations you
know you can do some selects you can do
updates you can do inserts and then you
commit that transaction and if any of
those queries fail for whatever reason
the whole transaction fails and so you
can turn a bunch of operations into one
cohesive unit so that's one way of
solving this problem and actually most
of the sequel databases allow you to
have constraints on the tables as well
so you can just say you know this field
is supposed to be unique now that astore
doesn't allow those constraints at least
to my knowledge so the way I would solve
it in data store not understanding a
transaction super well is to use
memcached memcached is an external
system will be talking about it in unit
6 largely from the point of view of
caching so you don't have to hit the
database in every request because
memcache is very fast it's basically a
giant shared key value store now
memcache can be used to basically behave
as a shared locking system so for the
user concurrency issue the way I would
do it probably is you know let's say you
have two people trying to register the
same username at the same time so the
first case is that user already exists
both of those queries you know from
separate requests are going to say does
this user exists and they'll both fail
because the user exists now if the user
doesn't exist the problem can arise is
that both queries who the database at
the same time and sighs oh great the
user doesn't exist and then allows two
registrations that happen at the same
time and then that user name gets in
circuit twice the way you would work
around that is both both queries hit the
database return to the app server as you
know false the user doesn't exist and
then you'd have them both right to mem
cached and mem cached has an operation
called ad which basically says put this
item in the cache if it doesn't already
exist and if they both try to add that
username to the cash at the same time
one of them will fail because you can
it's an atomic operation so they'll both
try to add it one will fail and he'll
return to the user you know user already
exists or I can't register this name
right now and the other one will go
ahead with the register
process and then when the registration
process was complete delete that value
from the cache or it'll expire on its
own that sort of thing so in summary I
would use memcached you basically need
some shared state between all of your
application servers and that's one of
the tricky things when you're scaling
because the more shared state you have
the harder it is to scale and memcache
is a good place to store this sort of
thing so I hope that helps ok so what's
next ok so we had a question about
storing static files sort of being data
files that you're serving through links
or or whatever on your site and where to
put them and how to organize them ok
great ok so the easy answer is just look
at the code that I've put up for the
homework solutions 2 and 3 at this point
both have a static directory and an app
engine you can basically define app that
yamel you can give it a directory
specifically for this purpose and in my
case I just called its static and then
you can put whatever file you want in
there and your urls will be you know
whatever you define in your app thought
you animal so mine is / static / and
then whatever file when you're operating
out a bigger scale often what you do is
you have a web server dedicated to only
serving static files so you probably
still put all of your static files under
one path in your URLs you know very
often it's / static and then you have a
whole sub system designed that's
optimized for serving static files and
you know cashing them very aggressively
and doing all of that stuff but for our
purposes right here for a little stuff
just look just look at the example code
I have in my apt yamel for defining the
static directory and then I just put
files in that directory in my project
and it should work just fine for you
okay so possibly embarrassing but
probably not we had a note that select
star is actually not the only thing
that's allowed in data store queries and
gql queries so could you talk a little
about that and why you mentioned that
sure I had mentioned in the lecture for
unit 3 that in that a story you can only
do queries that are of the nature of
select star from you know one table and
it turns out that by the time that
lecture air that is no longer a true
statement App Engine released in our
google released an update to App Engine
to allow you to do more complex select
queries so you can select you know one
column or multiple columns or start
whatever you want so that's an
improvement to App Engine it's it's a
you know we're teaching a little bit to
a moving target so you know no big deal
there if you want to use those fancy
select statements you know knock
yourself out you don't really need to
use them in any of the homeworks I'm
doing in this class but you know google
app engine gets a little bit better
every day and this is this is like a nap
this is an example of it and a little
bit of unfortunate timing but that's how
it goes sometimes the final question we
had was about infrastructure and how you
go about planning how to build your
infrastructure and grow your
infrastructure when you're designing
your app okay designing your
infrastructure ahead of time is
important and this is actually mostly
what we talked about in unit 6 so you
don't need to scale ahead of time you
know that definitely would kind of fall
under premature optimization you know
making things too complex when all your
writing is a simple blog or you know
ASCII Chan or something like that but
it's good to have in mind the approach
you're going to take so you don't you
know shut any doors that you may need to
go through later generally what I do is
so I've been working on amazon for years
not both reddit hit monk use amazon
service and the way amazon service works
is you just rent two machines from them
physical machines you never get to see
these machines but you have access to
them so we'll have a couple machines for
our database and a couple machines for
our app servers you know I always
whenever I have a database I always
replicated at least once especially in
Amazon system machines can come and go
but even if you're running your own
machines i mean the machine can fail a
hard drive will die bad memory power
failure there's lots of reasons you know
you'll lose a machine so i always
replicate a database at least once
usually twice so that even if we lose
one of our machines if we lose our
master database even if the site goes
down for a little bit as a result you
know maybe we're not very good at
automatically switching over to our
slaves we want to make sure we don't
actually lose the data you know there's
there's a couple classes of failures and
users will forgive you for having a
little bit of downtime they're not so
friendly when you actually lose their
data so no matter how small a system I'm
working on I at least you're up the cake
the database once you know if that's not
a can of worms you want to open you know
if you're really running a small thing
for yourself I'd suggest at the minimum
at least dumping your database every you
know day maybe every couple hours and
uploading that to you know a third-party
service you know we would use Amazon's
s3 google has status storage you know
Dropbox downloading it doesn't matter
just make sure you store that data
somewhere else so that
she dies you lose it and gets stolen
whatever your data safe that's usually
the most important thing and then of
course as your system gets bigger you
can start being a little bit more you
know thoughtful about how you store you
know huge amounts of data in a reliable
way you know one of the advantages of
using Google's data store is they do all
that for you you know if you're running
your own machine you have to do all of
this yourself you know amazon is kind of
in the middle where you know you're
still getting your own machines but you
have this really nice infrastructure and
the data store you don't even really
deal with in the notion of machines and
replication google just handles it and
that's one of the reasons we're using in
this class so you don't have to think
about that stuff right now okay I think
that's all for this time anything you
want to add or any comments you want to
make for the upcoming weeks sure um so I
haven't seen a whole lot of questions in
the forums or in the office I was about
actually like unifor stuff so that makes
me think you all either you know figured
it out or quit so good job it sounds
like everybody's doing well you know
thanks again to everybody who's been
helping out in the forums you know Sean
and I do the best we can in terms of
trying to find questions that are easy
to grade but you guys always come up
with creative solutions that are
technically correct but then fit you
know exactly what we're asking so you
know thanks for being patient with us
you know we try to work with you and if
you have you know if you have those
answers you think I correct and our
grading scripts don't don't think it's
so it's perfectly reasonable and you
guys have been doing so to just let us
know and we'll you know adapt
accordingly and you know best of luck in
unit 5 that which should be a little bit
simpler and and and a lot of fun so
we'll see you there ya see it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>