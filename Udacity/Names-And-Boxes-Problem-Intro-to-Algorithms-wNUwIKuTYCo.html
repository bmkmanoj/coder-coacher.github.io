<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Names And Boxes Problem - Intro to Algorithms | Coder Coacher - Coaching Coders</title><meta content="Names And Boxes Problem - Intro to Algorithms - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Names And Boxes Problem - Intro to Algorithms</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wNUwIKuTYCo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this one became quite famous as
sometimes known as the names inboxes
problem in this problem there are 100
prisoners and the warden comes and tells
them that they will be given their
freedom if they can win the following
game a hundred boxes are going to be put
on a table in each box will be put one
of the prisoners names on a piece of
paper and this will they'll be lined up
on a table in a room and the prisoners
will be brought into the room one by one
and each prisoner is permitted to look
in 50 boxes trying to find his own name
when he's done he's escorted out of the
room he must leave the room exactly as
he found it and he has no further
communication with the other prisoners
in order to win the game every prisoner
must find his own name ok now this
sounds really completely hopeless wait
so just say again so how many prisoners
and how many boxes there's a hundred
prisoners and your prisoners 100 boxes
of these spots oh you can only look in
fifty of the hundred but each prisoner
can only look in fifty so any individual
prisoners probability of finding his own
name is 50/50 percent half nothing you
can do about that
okay so how do you do this I mean what's
your algorithm right well one
possibility is everybody looks in a
random 50 boxes right that gives your
probability of winning the game to to
the minus 100 not very good another
algorithm is everybody looks on the same
50 boxes that has a probability of
success of zero right which is
essentially the same as the first so the
story with this puzzle is that
Peterborough mil Tristan and a negaal to
theoretical computer scientists that you
may know
working on a problem and they needed to
be able to show that in a certain
version of this problem that the
prisoners have no algorithm which would
give them any decent probability one
over polynomial and then anything like
that and they didn't see how to prove it
and one day mill tristan happened to be
passing the problem on to a friend of
his fence guy him over lunch and fence
camp said we'll have you tried this and
mill tristan told me he fell off his
chair okay so it turns out that there's
an algorithm which will guarantee the
prisoners are better than better than
30% chance to win the game irrespective
of what n is here it works 400 prisoners
but also for a million prisoners the
probability of winning is better than
30% and it's and even after you see the
solution it's hard to believe that this
really works I remember every individual
prisoner has probably the only 50%
there's no communication so how could
you possibly get enough correlation into
this problem they have their probability
of all of them finding their own names
be 30% it's ridiculous
but here's the here's the algorithm
that's actually wonderful the prisoners
first assign boxes assigned ownership of
the hundred boxes randomly in other
words they choose a random permutation
in the boxes si an ownership of the
boxes and every prisoner gets to know
all the all the ownership gets to
memorize all the ownerships and
everything of course these ownerships
may have nothing to do with the names
that are inside the boxes but that's
okay so now prisoner a goes into the
room and he opens his box he opens the
box and it's been assigned to prisoner
he looks inside and it's got some other
prisoners name in it maybe prisoner G so
then he goes over he looks in prisoner G
bump
geez box and maybe prisoner Q is there
and he opens the box for prisoner Q
opens it find the prisoner C there etc
he keeps doing this and he's hoping that
he'll find his own name if he doesn't do
bad and he leaves the room and the next
prisoner does exactly the same thing
next prisoner B goes in he opens the box
for prisoner B looks for looks at the
name inside opens that box and hopes
that eventually he'll get back to his
own it was a to to his his name so
that's the algorithm right well why in
the world should this work right here
and why would this be better than for
example just going through in their
permutation order or something like that
I mean it's at first at all clear why
this would work in fact the only way I
know people come up with this algorithms
is they're looking for something for
prisons to do and and the problem is
once you think of this algorithm to not
dismiss it but it's sad to think about
what would make it work so what's going
on here is that this random permutation
combined with the permutation of the
prisoners names in the boxes gives you a
permutation of the prisoners which is a
uniformly random permutation okay so the
permutation is defined in the following
way you take a prisoner prisoner you
look inside his box you see whose name
is there that's defines the permutation
so I said that prisoner a is box
contained the name of prisoner G that
means that in this permutation a goes to
G so what's gonna happen is that
prisoner a will win will find his own
name if in this permutation
the cycle that his name is in the cycle
that a is in as length at most 50 if
that cycle has length less than 50 goes
to 50 or less he comes back and finds
his own name otherwise he doesn't so
what does that mean well that means that
the prisoners will actually win this
game if there are long cycles because
then everybody will start in their own
cycle come back around and I'm their own
name okay now it turns out that it's
actually easy to compute the probability
that a permutation contains a long cycle
but not only short but it has to be
short and contain that prisoners
information that that prisoners name
well another we know it contains that
prisoners name because he starts at the
box that he owns so for example suppose
the cycle is a G C a oh the only way to
get back to it is if you found the name
that's right
okay alright so now okay so now your
next step was you find you can now and
probably there's a probability that a
random permutation contains a long cycle
well it's actually quite easy to show
it's just a little stripe down the
binomial coefficients that the
probability that a permutation contains
a sake a cycle of length K where K is
bigger than n over 2 is exactly 1 over K
so the probability that our permutation
contains a cycle of length greater than
50 is 1 over 51 plus 1 over 52 plus 1
over 53 etc etc plus 1 over 100 which is
about natural log of 2.69 something
so the probability of prisoners winning
is about 0.3 one you know you could sit
and stare at this thing and still not
really understand why it works so well
so it's got harmonic numbers in it and
logarithms and a simple kind of
tail-chasing kind of algorithm right
it's just it's just a nice reasoning
right nice undergraduate</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>