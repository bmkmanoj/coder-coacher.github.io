<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cast Companion Library | Coder Coacher - Coaching Coders</title><meta content="Cast Companion Library - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cast Companion Library</b></h2><h5 class="post__date">2015-07-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7g-tT9Ieohc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">by far the best way to build a sender
application for Android is to use the
cast companion library or CCL for short
CCL provides a collection of
ready-to-use components that provide
features and behaviors recommended by
the UX guidelines CCL primarily helps
you build media-centric apps but it's
also helpful for data centric use cases
as well in this lesson we'll take a look
at the major features and in the next
we'll see how it's used in practice now
as you can see CCL does quite a bit for
you the main features included ready to
go mini controller and a fullscreen
player also included are notifications
to provide player controls when your app
is closed or out of focus lock screen
controls so the user can maintain
control even if their phones locked
closed caption support and Wi-Fi
reconnection support in case the
connection drops you control the CCL
through the videocast manager this is a
singleton that maintains the state of
the application and keeps track of the
connectivity to the cast device behind
the scenes it also keeps track of the
playback status of the receiver for
instance if it's playing your paused now
for a data-centric app you'd use its
analog which is actually called the data
cast manager instead of the video cast
manager before you can use it you have
to initialize it as we're doing here
when you initialize it you choose which
features you want enabled the first
argument is your application context and
the second is the application idea of
your receiver we'll get to the third and
fourth arguments later at this time you
also select the types of features you'd
like enabled here we're enabling quite a
bit notifications lock screen and so
forth when you use the CCL you want to
create an instance of the video cast
manager early typically inside your
oncreate method of your activity before
you do so though it's a good idea to
call this method to check whether Google
Play services is installed and updated
if it's not the CCL will automatically
show the user a dialogue that will
direct them to take the appropriate
action the third argument when we
initialize the CCL is for a player
control activity if you leave it null
CCL will provide one for you this player
shows automatically during media
playback and provides controls to play
pause and see you can also start this
activity manually if you like using the
cast manager instance like this this
argument by the way is an instance of
media info and that's a class used by
cast to keep track of metadata for a
video or song check out a link to that
instructor notes now the fourth argument
is a namespace of a custom message
channel if you'd like when created
between your sender and your receive
once the channels created you can easily
send messages with just a single message
call CCL also provides callbacks to
inform you whether a message was
received and whether there was an error
and if you have a data center gap the
data cast manager makes it easy for you
to add a number of channels each with
their own namespace one of the ready to
use components CCL provides is the mini
controller this is a small controller
that can be added to the layout XML of
your different activities its purpose is
to allow the user to browse to different
pages of your app while still being able
to control the cast if you use this
component in addition to the XML you'll
need to register it with the video cast
manager inside your activities oncreate
method also remember to unregister it in
ondestroy behind the scenes the cast
manager handles everything else
including updating its metadata its
playback state as well as hiding it when
no media is playing and for details on
all of this check out the instructor
notes another great ready to go
component is notifications CCL shows
these automatically when your app is in
the background or killed all you have to
do is indicate you want this feature
when you initialize the video cast
manager then you need to keep CCL
informed when your app is active or not
and you do this by incrementing or
decrementing the UI counter inside your
on start and on stop methods another
excellent ready to go feature our lock
screen controls when you enable this
feature when you initialize the video
cast manager a play/pause button will
automatically show on android devices
running jellybean or higher and as an
added bonus CCL automatically provides
the ability for users to control the
cast devices system volume even if your
application is in the background and
your screen is locked by using the
hardware controls on your phone CCL
makes reconnecting to a running cast
session easy for instance if the Wi-Fi
drops to do so it starts up a
reconnection service behind the scenes
and you have to indicate you want this
functionality both when you initialize
the video cast manager and also by
adding these lines to your Android
manifest you need these permissions as
well then inside your oncreate method
indicate that you want to reconnect to
an existing session if possible and this
parameter here is a timeout in seconds
in addition to helping you out of the
Wi-Fi drops the reconnection service is
also great if your app is killed before
you can gracefully exit the cast session
if the user then restarts your app you
can automatically rejoin the existing
session that's the CCL in a nutshell we
have an extensive PDF guide you can find
in instructor notes that will provide
details on how to use all these features
in your app
and again if you're building or
extending an Android app to work with
cast the CCL is definitely your best way
to go another great resource is the cast
video sample this contains a handy guide
on downloading and installing the CCL
and connecting it to another project
inside Android studio</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>