<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Offscreen canvas - HTML5 Game Development | Coder Coacher - Coaching Coders</title><meta content="Offscreen canvas - HTML5 Game Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Offscreen canvas - HTML5 Game Development</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oTKVrkwXUOs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">tiled allows an artist to add multiple
layers per map tile meaning that we can
potentially do ten draws per on-screen
tile sadly our bounding view rectangle
won't help us fix this in performance
terms so we have to employ a new
technique now as you've played grits
you'll notice that our environment is
mostly static which means that we could
hypothetically at export time from the
map editor actually composite our entire
map into a single image at runtime this
means instead of doing two hundred to
two thousand draw calls we could only do
one so this is not necessarily ideal
having a single large image representing
the background of our map because of the
fact that that's actually a pretty big
image and it would take time to download
that off the internet now we can't deny
the fact that this would help on the
client side for rendering so it would be
nice to find a way to mix both of these
techniques together so that we can
improve rendering and reduce download
time thankfully canvas provides a
technique called off-screen canvas
rendering that allows a single canvas to
be used as an image element for future
draws so let's say we create an
off-screen canvas and in this canvas we
draw lots of little happy figures or
happy trees later when we'd like to
actually draw this to our main canvas we
simply draw each of the elements using
the draw image API passing into it the
canvas that we composited before so if
it took 300 draw calls to composite this
canvas when we draw to our real image it
will only actually take one for each
time we render it so instead of doing
1200 draw calls we only have to do 4
which I think we can all agree is a good
thing now in order support off-screen
canvas we need to keep track of a
separate canvas for each tile that we're
creating in our map we've separated this
functionality out into a canvas tile
class now the canvas tile class itself
has some boundaries that we should talk
about first is its X&amp;amp;Y value in world
space and its width and its height next
we actually have a handle to the canvas
object itself or more specifically a
handle to the canvas Dom object as well
as a handle to the context for the
canvas the create element for this
process should be given a width and a
height besides setting up some initial
values the create function should
actually go through
and create a brand new canvas element in
the DOM and set its width and height
accordingly to the past in values from
there we cash that handle and actually
grab a handle to the 2d graphics context
for the canvas we just created</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>