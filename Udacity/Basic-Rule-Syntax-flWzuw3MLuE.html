<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Basic Rule Syntax | Coder Coacher - Coaching Coders</title><meta content="Basic Rule Syntax - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Basic Rule Syntax</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/flWzuw3MLuE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright so JP gave you a very good
summary of what the options are
available to you when you use firebases
rules at security language but what do
these rules actually look like before we
dive into validation let's take a quick
look at how these rules are structured
you already saw an example of what rules
look like when we looked at the
dashboard before in fact clicking here
is where you'll need to go to edit your
rules once you're in the security and
rules tab you could write your rules
here and save them using this button any
changes that you save will immediately
affect any read or write calls sent to
your firebase database these rules
should also look familiar from when in
version 0.4 we talked about using index
on and value rules okay so here are the
default rules the rules themselves are
written in JSON which looks similar to
your firebase database itself there are
string key value pairs which are
separated by colons and everything
that's considered an object or a list is
surrounded by curly braces as seen here
remember that these strings are closed
in quotes if you're not super familiar
with this sort of Jason syntax I've
provided a link to a sample rules file
that you could look at to base your rule
syntax off of so what are these rules
doing well these are the simplest of
simplest rules your rules file will
always start with this rules object here
and then usually the children inside of
it mirror the structure of your actual
database in this case these rules are
providing access to the entire database
no matter what the structure happens to
be it's read and write viewable and
there are no validation rules so there
aren't any structural constraints here
including these two rules is actually
important because by default access to
the data is false so you do need these
rules to explicitly say that read is
true for the whole database and write is
true for the whole database because if I
actually deleted this and saved it by
default nobody would be able to write
anything to the database but I'll undo
that normally your rules are going to
mirror your database structure so for
example if I wanted to write some rules
to validate the structure of my user
node I might write something like this
as you can see here I've got the exact
root node name of the user do and here
I've got the key names embedded of all
the properties so your key names here
need to match exactly what's shown in
your database and they need to be nested
in exactly the same way now you might be
wondering what this key here is all
about the dollar sign followed by a word
in decay
what is known in firebase as a wildcard
variable now wildcard variables have a
couple different uses but the most
common one is to represent dynamic keys
like push IDs and in this case user
emails because remember under the user
node is a list of user emails the keys
of which we can't guess in advance
now once you've laid out this structure
you can start defining rules for the
user object when you want to write a
rule for a particular location you go to
the location in your rules file that
mirrors the location in your database
and this is your first example of a rule
the key of a rule is always a dot read
dot right or dot validate value and the
value of a rule will always be something
that evaluates to a boolean and this is
important because when a user tries to
read or write at that location the value
of this boolean affects whether they're
actually able to do so now these
expressions that evaluate ebullience can
get pretty complicated
they can include comparison and logical
operators and firebase also provides
additional methods and internal preset
variables that allow you to get a value
at the current location or compared to
other locations of the database for
example there are methods that let you
look at the data at children and parent
locations of your current location so if
necessary you can do comparisons between
the value of name and the value of email
or even the value of name and some place
totally else in the database okay so
once you've written this out and you
actually start to try to read or write
data at certain locations all of the
applicable rules along the path to that
location will be checked validate and
write rules are checked whenever a value
is written and read rules are checked
whenever listeners are attached for
example if I try to write in this
location with the value lilah any rules
that are at the lilah fish at gmail.com
location which is this wildcard variable
here there aren't any rules here and at
the name location which has one validate
rule here so in total because this is a
write these two rules would be checked
now let's pretend that this write rule
wasn't here this was actually the rule
that was giving me the ability to write
to this location so if you ever tried to
do something like that where you don't
have permission to do the action that
you want to do the on cancel callback
method will be triggered in your code
and it'll be given a firebase error
of type permission denied alright I've
just thrown a lot of information at you
so let me take a moment to summarise
your rules file is found in the firebase
dashboard in the security and rules tab
and the rules themselves are written in
Jason the actual permissions will have
keys that are right read or validate and
they will always have values that
evaluate to either true or false
if there is no read or write rule at a
location or its parent locations then it
will default to false when you're
reading a permission rule you'll place
it in the rules location that mirrors
the database location that you're
interested in if a user tries to do
something that is not allowed by the
readwrite or validate rules the firebase
error will be returned to them and its
value will be permission denied okay and
those are basically the facts that you
need to get started so go ahead and
we'll start laying out some of these
rules</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>