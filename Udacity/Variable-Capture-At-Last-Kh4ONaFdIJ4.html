<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Variable Capture At Last | Coder Coacher - Coaching Coders</title><meta content="Variable Capture At Last - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Variable Capture At Last</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Kh4ONaFdIJ4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now we can finally move on to the main
course how functions and closures
capture variables take a close look at
the function make counter below the code
is pretty short but it will require some
close inspection to understand it the
first sign what's special about this
well it returns a function an int maker
that's ok there is nothing really
special about that we've seen that
functions and closures and by the way
here I'm using function instead of a
closure syntax simply because the syntax
is simpler that's the only reason it
would work exactly the same with a
closure so we're returning a function or
closure remember it's the same thing and
since functions and closures are class
objects we can return from another
function so far that's normal just like
some machines create other machines some
functions can create other functions
there's nothing special about that what
else is interesting or at least unusual
it has a function within itself so it
contains a function defined within make
counter well don't panic that's normal
too just like you can have machines that
contain other machines and these are
only visible from within the container
machine think of your radio inside your
car so no big deal there and it's
actually useful and good practice to
break down a long function not this one
but a long function or a complex one
into small simple functions by using
inner functions that do part of the
total job what else is interesting about
this the really really interesting funky
part by the way this should be this is
that adder the inner function can access
this variable that is defined before not
only can it access it but it's changing
it it's adding one to that that's what
we call variable capture so to
understand how this works let's create
two closures of ty
in maker by calling twice make counter
and say them into two variables so both
counter one encounter to take no
arguments and they return an integer
think very carefully what the output
should be when i call counter one fries
try to think before using the playground
so the first time n will have value zero
we add one and a derp returns one let's
see if it's true and what happens when i
call again counter one what do you
expect let's give it a try so as you can
see when we call it again counter which
is actually a type of adder keeps adding
1 to N and that value remains there so
we get 2 3 4 etc and now for the grand
finale what do you think this would
return calling counter to for the first
time think before trying it and as we
can see it returns one you might have
expected it to return for actually that
would not be very useful because that
would mean that every function adder
shares this n the first languages that
implemented this variable capture
feature did behave that way but it will
soon realize that this was a bug it was
not a feature so right now every single
closure that we return from make counter
takes its own copy of all the captured
variables so every time an adder is
created it takes a copy of all the
capture variables therefore each closure
has its own copy of the environment and
the environments all the values of all
the variables that were captured this is
done for safety and also to keep you
sane the value of a variable will never
change out of the blue because somewhere
some closure decided to change it
everybody has its own copy let's wrap up
we learn quite a few things about Swift
in this lesson so let's recap first of
all functions and closures are the same
thing we just have two different
syntaxes to express one same thing
functions and closures are first-class
citizens of our language we can treat
them like any other type and also
functions and closures capture variables
defined before the closure or function
is defined it might not seem obvious to
you at this point but those two less
features make swift a far more powerful
language they are the base of a
different style of programming called
functional programming its popularity is
increasing a lot lately however you
won't need it to finish the nanodegree
or even land your first job so don't
worry it's something that you can learn
later on if you want if you're
interested you might want to check any
of the books that are linked in the
instructor notes there are introductions
to functional programming and in the
meantime we'll move to the next chapter
which deals with grand central dispatch
this is a library that allows us to
create background task with great ease
this is vital to ship great apps and
avoid being rejected from the App Store
our newly gained knowledge of closures
would make understanding GCD a breeze so
let's move on and learn it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>