<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Sharing Memory Across Virtual Machines - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="Sharing Memory Across Virtual Machines - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Sharing Memory Across Virtual Machines - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eK5vPJ3AdME" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">memory is of precious resource you don't
want to waste it you want protection for
the virtual machines from one another
but at the same time if there is an
opportunity to share memory so that the
available physical resource can be
maximally utilized you want to be able
to do that so the question is can we
share memory across virtual machines
without affecting the integrity of these
virtual machines because protection is
important but without affecting the
protection can we actually enhance the
utility of the available physical memory
in the hypervisor and the answer is yes
think about it you may have one instance
of linux contained in a virtual machine
may be hosted by me and maybe you have
the same linux hosted in another virtual
machine virtual machine number two and
in both of our virtual machines the
memory footprint of the operating system
is exactly the same and even the
applications that run on it are going to
be exactly the same in terms of the
contents because it is the same
operating system it is just that we have
two different instances and let's say
that we have Firefox running on this VM
and similarly Firefox running on this VM
this copy of Linux is going to have a
page table unique for this particular
Firefox instance
similarly this instance of Linux is
going to have a page table data
structure unique for this instance of
Firefox and if all things are equal in
terms of versions and so on then a
particular virtual page of the Firefox
instance running here and the Firefox
instance running here is going to have
the same content whether we are talking
about this VM or this VM and so there is
an opportunity to make both of those
page table entries to point to the same
machine page if we can do that then we
are avoiding duplication we are not
compromising safety but we are avoiding
duplication this is particularly true
for the code pages the code pages are
immutable
so the code pages for this Firefox
instance in this Firefox instance
could actually share the same page in
physical memory and if it does that
you're using the resources that much
more effectively in a virtualized
setting one way of doing the sharing is
by a cooperation between the virtual
machines and the hypervisor in other
words the guest OS has hooks that allows
the hypervisor to mark pages
copy-on-write and have their PP ends
point to exactly the same machine page
and this way if a page is going to be
written into by the operating system
it'll result in a fault and we can make
a copy of the page that is currently
being shared across two different
virtual machines that is one way of
doing it
that is with the cooperation between the
hypervisor
and the virtual machines so that we can
with their containments share machine
pages across virtual machines but mark
the entries in the individual page
tables as copy-on-write
meaning that so long as they are read
shared is perfectly fine the minute any
one of these guys wants to write into a
particular page at that point you make a
copy of it and make these two instances
point to different machine pages so that
is one way of doing it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>