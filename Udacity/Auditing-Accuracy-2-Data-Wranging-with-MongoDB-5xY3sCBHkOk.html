<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Auditing Accuracy 2 - Data Wranging with MongoDB | Coder Coacher - Coaching Coders</title><meta content="Auditing Accuracy 2 - Data Wranging with MongoDB - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Auditing Accuracy 2 - Data Wranging with MongoDB</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5xY3sCBHkOk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay the way I like to go about auditing
my data it's to write code that performs
the kinds of checks that I'm interested
in doing now you could use something
like a piece of ETL software there are a
number clover there are some Python
based ones petal is one of those for me
I find those get in the way a lot and
this might just be personal preference
in terms of this class I think it's
better for us to talk about the basics
so what I'd like to do is just give you
an idea for the type of process in terms
of the code you'll be writing in order
to do auditing and cleaning tasks and
we'll just write Python scripts to do
this so in my case I'm interested in
auditing the accuracy of the country
field here so I've written a little
script here that is going to follow the
process I just described of comparing
country field values in our data with
this reliable list of country names now
this is the type of thing that we
probably want to use a database for so
we're going to have a little bit of a
preview here for the next lesson
in that I'm actually taking advantage of
some data stored in MongoDB in fact that
country codes data that I've stored in
MongoDB and I'm going to just do a very
simple query in this code that happens
right here using the PI Mongo module
which is the Python driver or client
library for MongoDB again what I'm doing
is moving through every value in my
cities data and executing a query
against a database asking whether the
value I'm finding in the country field
is in that list of country names from
the ISO which I have stored in a
collection in MongoDB okay so let's run
this and see what we find
okay so this just ran through all 20,000
odd cities and here's what we get as
country names that were not found in our
list you can see that in some cases what
we've got here is that need to do some
further parsing on the country field
because we've got multiple names listed
and you could imagine why for some
cities there would be two names list
so let's just note this this is just
problems with the country field so the
first thing we found is that some values
are actually arrays take a look at this
one
or this one this is naming a county in
Wisconsin a county in Texas and a county
in Florida so these are examples of the
wrong type of value being in the field a
lot of times that's due to something
called column shift which is a
particular value that got moved one
column over now that's probably not in
fact what happened here but the idea is
the same someone entered a value that
would be valid in another field other
than our country field then we have some
instances of data that simply needs to
be cleaned up a bit
so the parentheses here is to
distinguish the country of Georgia from
the state by the same name in the United
States and here you can see we've got an
underscore separating the individual
words for this particular country I
would call those examples of where we
need regular expressions to come to the
rescue we simply need to account for
these types of things in our field and
clean them up by writing a little
regular expression that will pull out
the country name that's sitting there
and then finally we've got some
countries that appear here that aren't
recognized in our list for one reason or
another there might be a political
reason it might be a language issue so
for these we need to make a decision and
the decision is whether or not we want
to include these maybe add them to our
gold standard list that's something you
really have to make on a situation by
situation basis so there we simply have
possibly valid countries that will need
to make a decision about okay so this
provides us with a nice concrete example
of how we might go about auditing
accuracy for a particular field</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>