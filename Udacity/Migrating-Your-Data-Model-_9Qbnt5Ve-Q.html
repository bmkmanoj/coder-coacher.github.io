<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Migrating Your Data Model | Coder Coacher - Coaching Coders</title><meta content="Migrating Your Data Model - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Migrating Your Data Model</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_9Qbnt5Ve-Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">first of all let's run our app once so
we can call the preload data method that
deletes all the previous contents of the
database and then populates it with note
books and notes and here we have our
preloaded data so let's go to app
delegate and let's comment it out as we
don't need this anymore we can create
objects using the apps UI so let's
comment out preload data and now let's
go back to the model and make some
modifications let's create a new entity
for photo frame with an image data
attribute we can't save the image as an
instance of UI image because core data
has no idea what a UI image is so we
have to save it as a binary type which
means an estate it's a bit inconvenient
but we'll deal with it later every
single note will have a photo frame and
each photo frame might have a single
image data this property is going to be
optional as it could be empty but every
node will have an image data so now we
have to create the relationships between
node and photo frame it can't be
optional because every node must have a
form so off it goes and the deletion
rule should be when we delete a note we
delete the photo frame so it should be
cascade now let's go back to photo frame
and create the inverse relationship this
should not be optional because a photo
frame should not exist if it's not
connected to a node and when we delete a
photo frame what should we do to the
note nothing
so nullify okay so let's save and run
our app and see what happens and it
looks like we have an error and this is
the reason the model used to open the
store is incompatible with the one used
to create the store well we got this
error because we already have saved
objects
that match the previous data model the
one that didn't have a photo frame now
we change this model but we forgot to
tell core data how to migrate the older
data to the new format fortunately this
is quite easy so think about it make
sure you can reproduce this on your own
project and we'll fix it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>