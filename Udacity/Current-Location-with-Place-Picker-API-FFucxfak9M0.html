<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Current Location with Place Picker API | Coder Coacher - Coaching Coders</title><meta content="Current Location with Place Picker API - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Current Location with Place Picker API</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FFucxfak9M0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">settings activity is tied to a list of
preferences and the location edit text
preference is a custom preference that
we have added a widget to that widget
when clicked should build an intent and
start the place picker activity and when
that activity returns it should have a
place for us which means that we need to
process the result of the place picker
call in on activity result inside of
settings activity and if we have a new
place we need to store that in our
location shared preference of course
before we can do this we have to
configure our app for the places API we
need to add another dependency to our
build.gradle recall how Google Play
services allows you to specify the
bundles that you care about and ignore
the others we already have the GCM
bundle but now we need to add the
location 1 then to use the place picker
we need to add a permission to our
Android manifest that will give us
access to location at a fine-grained
detail now let's look at our place
picker backwards what will we do once we
have the place picker response a non
activity result in settings activity we
need to parse and store the address as
our new location for sunshine first we
should verify that this activity result
is actually intended for us and if it
isn't the place to pick a response will
pass it along to super in order for them
to handle if it is from the place picker
and the location was chosen then we can
fetch the place object from the place
picker API then look at the address to
use as a human-readable location string
and store this in our shared preference
for location however if the result code
is not successful we're going to
gracefully fail by not doing anything at
all the most likely cause for this is
the user hitting back without choosing a
place at which point returning to an
unchanged setting screen is the correct
thing to do to launch the place picker
we need to build an intent but we are in
a view not an activity which means we
won't be able to call
startactivityforresult so we need to
cast the context to a specified activity
in this case that would be settings
activity this will allow us to make the
call to start the place picker and by
choosing settings activity the result of
the place picker ends up in the right
place I'm going to let you figure out
how to build the intent and launch it
however</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>