<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Typical Application | Coder Coacher - Coaching Coders</title><meta content="Typical Application - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Typical Application</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yQ0NstabDiM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well can you give us an idea of a
typical application and in particular
you know how big it is how long it takes
to to develop sure so there there are
two or three as I said different kinds
of applications that we tend to develop
the I think one that's a good
representative is the forecast manager
so a forecast manager is an application
that will will forecast demand customer
demand for products at various locations
various stores of a retailer based on an
historical analysis of of how those
products have solo those stores over the
last two to three years it takes into
account special events like promotions
that are in force and it's actually a
pretty complicated set of calculations
in Boston regression analysis and it's
it's pretty involved so we generally
when we have a customer what we'll do is
every week or maybe even every day we
will generate new forecasts for them in
a big nightly batch night Lear weekly
batch and will calculate the next 52
weeks of forecast for all their products
at all their stores after which the they
have a most retailers have a group of
employees who go through and review
those forecasts and if they find things
don't look like they have imagined
because it's forecasting it's not you
know it's not an exact science they'll
want to get in and do some tweaking make
some adjustments to them maybe they
think that some estimates of I've
increased demand or too high or too low
and the one I actually make some changes
so forecast manager application is
responsible for generating all these
forecasts allowing forecasters the
employees at a retail organization to go
through and drill up and drill down and
try to understand these forecasts and
also allow them to to make changes to
the forecast week than what if them etc
and they can use these forecasts to
predict sales and do inventory sorts of
the present and so on its kind of
central to their planning it's very
central to their planet yeah it's
typically hooked up with replenishment
systems as well so once they approve
their forecasts that we've we've
suggested for them
they'll then send those forecasts down
to a replenishment system which will
actually make orders and you know cause
cause goods to be put on trucks or own
ships or whatever and I imagine with all
this data that there are kind of heavy
heavy weight calculations functional
requirements that that the forecast
manager has to satisfy that's correct
that's great and what's interesting
about it and what I found particularly
working in the retail domain is with
surprising but that way there are every
different client has slightly different
business requirements that that make it
very difficult to design a completely
generic product so there's always a bit
of client specific business rules that
you need to take into account and
configuration it's it's not like a
shrink-wrap product at also really is
when you when you want to sell this to a
new client even if it's a product that's
very similar to one you've released
before you have to do a fair amount of
you have to staff it up with with the
development team and you know do or
extend an existing requirements analysis
and do some custom implementation so
when you say product before you were
talking about software as a service your
products are really services that's
correct yes okay and I what I'm what I'm
hearing is that you don't want to have
to do a separate forecaster for every
one of your customers but there are
individual pieces individually each each
customer has their individual needs and
so you need some solution for them
specifically but but you can't have a
general one for everybody that's correct
that's great that's one of the core
parts of the problem it makes it hard
okay now how about on that on the
non-functional side what sort of
interesting non functional
characteristics of these applications
have yeah you can break them into a
couple of categories one is you asked
earlier about how we get data and how we
have we load it so that implies that
there's a batch operation that has to
load all this data all these data that
come in and
our database the batches tend to have
pretty tight timing requirements so for
example when we do forecasting at the
end of a week for the next week's orders
we typically get the sales data the
revised sales data that we use in
predicting we'll get that sometime late
on a Friday evening and we may get any
number of other kind of data from from
the customer as well that we need to use
in predicting prediction and we'll have
to have the forecasts all regenerated
and ready for for inspection and
modification by the forecasters when
they arrive by 8am Monday morning right
so there's a batch window and that batch
window is one that is is a very hard
deadline we have if we can't do all the
work within that deadline we have a
service level agreement with our
customers because we're selling this as
a service and if we don't meet our batch
window then we're in violation of that
agreement that has financial
implications etc so batch requirements
are big we also have a nightly batch
which has its which has a much tighter
window and doesn't consume as much data
so in the weekend situation is that
enough time for you to deal with things
or I mean how much of that weekend is
consumed with actually computing yeah so
that's a good question it depends
largely by client wewe for our bigger
clients we the one we have one that that
I think their app is now it's over 11
terabytes of data that we have to
maintain it now let them use and what we
do is we we actually partition the
database over many different nodes many
different notes on the cloud so that um
so we can meet this batch window and
what we find when we r when we're
scaling scanning these up is we have to
do some experiments to decide you know
how big how fat can we make one database
in order to meet our batch window to
load out not just to do the calculation
just to load the data to begin with
because it takes a while to load yeah
six terabytes of data so we have to we
have to scale ourselves and partition it
so that we can load all the data perform
all the calculations that within the
batch window and there's always a
trade-off between you know the more
you can you can make them you can you
can decrease your batch time if you
throw more machines out of it then that
increase your costs which you which you
our company's cost which we have to eat
alright so we're always trying to
optimize that and hit the sweet spot so
what I'm hearing is that you're making
use of many or a large number of fairly
heavy weight server nodes on the cloud
that are cranking pretty much full time
over the weekend that's correct to make
sure you you hit your deadline for money
more that's correct that's great and one
of the things that's interesting about
deploying this as a service has
everything to do with that problem so
additionally when a retailer would would
want a forecasting application that
retailer would have to buy and maintain
all of the machinery he or she might
need in order to generate those
forecasts even though you're only going
to do it every week every weekend sorry
so what what typically happens with the
forecasting application is it's a lot of
heavy weight work on the weekend but
then during the week it's not so much
and so our solution scales so that we
actually scale up over the weekend in
order to to calc you to do all this data
loading in calculation but then we scale
that down to a much smaller footprint
after all those calculations so you so
you're taking advantage of the fact that
you can get elastic computing recess
DISA tee off of the cloud and only pay
for what you need precisely okay so I
interrupted you before when you were
talking about the non-functional
requirements what else is there so batch
requirements was the one category the
other category are interactive
requirements so users are going to as I
mentioned when after they after we
generate all these forecasts are going
to want to go through and inspect them
and analyze them and drill up and drill
down and make analyses and maybe even
make modifications so that that's a
large set of data that they need to
operate over and anytime you have users
doing interactive queries over large
data sets you have the potential that
queries and operations can take a very
long time so in addition to our batch
window we also have to design and in
partition accordingly so that queries
will be user operations will be what
will be will perform in acceptable times
and I'm assuming you kind of
mentioned that that reliability is very
important okay this you have that you
have to get the thing done um how about
accuracy of these computations how do
you deal with that yeah so usually
through a separate process so logic
blocks has a dedicated data science team
that works with big retailers who are
very familiar with their own data to do
accuracy analyses and we tend to do this
by running our forecasting offline and
comparing it on on old data and then
comparing it with actual sales data and
so there's there some metrics we use
called mean mean percent error that
you'll use to decide you know whether
your forecasts are sufficiently accurate
if they're within a certain mean percent
error of the actual sales and so we tend
to do that offline and then if there are
any changes to the algorithms the
science algorithms we're all those into
the service so that it will be available
the next week when the we do the next
analysis so some real significant
non-functional requirements in order to
make all this this work in a fashion
that can satisfy your customers great
okay how about the the architecture
itself let's say of the the forecast
manager what makes this this particular
application architectural II interesting
ok so I think from from an architecture
standpoint what makes this architecture
most interesting is the distribution
aspects the services oriented design of
the whole thing and and and how each of
the distributed nodes talk to one
another so I have a diagram we can we
can take a quick look at this is a
multi-tier diagram I'm not showing the
top tier because the top tier is
basically a web browser right so all of
our clients there there there there
there there top tier presentation tier
would be their web browser they're going
to be running you no html5 JavaScript
applications running in their browser
that are periodically going to make
service calls to 22 it to a uniform
location on the on the cloud those
requests those those HTTP service
requests will all go through this front
end node that I'm showing here in this
diagram we consider that the middle tier
all right so the the front end of our
application is a middle-tier that has a
couple of databases running on it which
I'm showing there one of them is largely
the one called you I 0 is largely is
hosting services which do things like
either directly answer queries or proxy
them down to two other nodes that
actually contain a slice of the real
data and so that data tier level that
I'm showing in the diagram actually has
multiple I'm abstracting it by just
showing two but there could be up to you
know fifty or sixty or a hundred of
these things depending on the size of
the data each one of them is the same in
terms of what code they're running but
they have a different partition of the
of the data that they're responsible for
and each one of them is running a web
server that's hosting services that
answer queries right or new updates so
typically in this architecture you don't
see this much when you're when you're
running the app from your browser but
you'll click on a click on a link to go
drill down into a result of some query
that will issue a request that goes to
this front end node which may then
delegate to one or more of those data to
your nodes to gather some data or
perform some updates put it back
together and then it gives you response
and all this has to work very quickly so
as far as architectural style would you
say this is a three-tier architecture
yes yes and complicated by the fact that
you get you partition your data across
many many in the rest grant</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>