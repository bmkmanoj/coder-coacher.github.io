<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Activity Enter and Exit | Coder Coacher - Coaching Coders</title><meta content="Activity Enter and Exit - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Activity Enter and Exit</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7iY7nRHhdS4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so back to activity content
transitions these transitions allow you
to animate the views within an activity
when they enter or leave it say you have
two activities a and B from activity a
we can launch activity B by calling
start activity and return by hitting the
back button when a call startactivity to
launch activity B we have the
opportunity to run two sets of
transition animations firstly we can run
an exit transition on the views in
activity a and secondly we can run an
enter transition on the views in
activity B we can define these
transitions either in code or declare
them in XML and then set them on the
activities theme let's take a look at
examples of both approaches let's for
example add animations to this app which
shows a grid of images clicking on an
individual image takes you to a detail
screen so here's what it looks like
before we add any content transitions we
just see the standard window animations
let's add an exit transition to the
first grid screen we'll use an explodes
ition which moves all of the views
outwards let's do this declaratively
first we create a new file in res
transition and we're going to call it
grid exit you may have to create this
transition folder if it doesn't already
exist now the transition itself uses the
exact same syntax as we saw earlier to
use the built-in explode transition all
we need is this explode tag now to
assign the exit transition to the
activity will open the activities theme
and add an entry for window exit
transition which points to the
transition we just defined lastly there
are a couple of things we need to do to
enable activity content transitions
first we'll need to alter a call to
start activity to use this variant which
takes a bundle will go into this bundle
a bit shortly next we might need to set
the window content transitions flag to
true on your applications theme if
you're already inheriting from a
material theme or app compat then this
will automatically be set for you okay
so now that we've done that here's how
it looks not too bad we see that the
views move outwards as we move on to the
detail screen let's add another
transition to the content on the detail
screen as it comes in let's slide the
text into place from the bottom this
time we'll create the transition from
code in the detail activity we
instantiate a new slide transition
object and we here in the constructor
tell it to enter from the bottom edge we
then set which views is acting on using
this add target call passing in the ID
of the view we'll also set the duration
and an interpolator to quickly ease the
view into place more on these concepts
soon finally we call set enter
transition on the window here's a result
well the title and description slide in
nicely but the image just appears this
is because by opting in to use activity
content transitions were implicitly
turning off the window animation feature
as our transition doesn't target the
image specifically it just appears we'll
fix that shortly let's take a second to
consider these two different approaches
for creating transitions code and XML
now the code approach might involve less
steps but there are some trade-offs to
consider firstly it's harder to reuse
the transition in other places also this
example was relatively simple but as you
create more complicated transitions then
this can get a bit more complex it can
be nice to keep this contained in a
single XML file for good separation of
concerns and to keep your activities
clean lastly as we mentioned this
feature was introduced in API 21 so we
should guard our code to not attempt to
use api's that don't exist on earlier
versions in the code approach you can
use an API check like this or
declaratively
you can use a resource qualifier such as
transition v21
and values v21 to only use it on the
newer platforms as you might have
guessed I'm quite a fan of the
declarative approach but pick the one
that makes the most sense for your use
case you can even mix and match by using
a transition inflator to load the XML
transition in code now you may have
noticed that when we hit the back button
to return from the details page to the
grid our explode transition reversed or
imploded I guess now this is a default
behavior to reverse any transitions that
you set on the way back but you can of
course hook into this and set your own
so in addition to the enter and exit
transitions we've looked at you're also
able to specify return and re-enter
transitions so going from activity A to
B and back again the sequence will be
first an exit transitional activity a
followed by the enter transition on
activity B we've already looked at then
when you hit back you have the
opportunity to run a return transition
on the views in activity B followed by a
reenter transition on the views in
activity a let's hook into the re-enter
event to customize the behavior when
returning from the details page to the
grid let's make the items slide in from
the top like this this is as easy as
simply specifying a new transition in
the theme like so so here the window
reenter transition pointing to one of
their default platform transitions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>