<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Matlab Demo - Intro to Parallel Programming | Coder Coacher - Coaching Coders</title><meta content="Matlab Demo - Intro to Parallel Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Matlab Demo - Intro to Parallel Programming</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mGBLjCuwKMY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's look at a demo this is what the
example white balance routine looks like
in MATLAB as you can see it's quite
short MATLAB is a high-level programming
language it's got a simple syntax and a
whole lot of built-in math and
engineering functions so this whole
routine can be written in just six lines
of code now the way this is written now
currently this function runs entirely on
the CPU and so next what we're going to
do is use the MATLAB profiler to
identify sections of this code that
might be candidates run on the GPU to
improve performance so we run the
profiler and it indicates that this last
line is by far the most time consuming
this line of code is applying an
operation to each color channel across
every pixel on the image such an
operation could be sped up when executed
on a GPU this is clearly a good
candidate for parallel computing so
before using the GPU let's first measure
how long it takes to execute the white
balance function on the CPU using the
tick and tock commands notice that it
takes approximately point 1 to 4 seconds
to execute the code entirely on the CPU
now to utilize the GPU for executing
that last line of code there's a couple
of options one thing that we could do is
simply transfer the image data to the
GPU memory using the GPU array command
and that's what we're doing here on line
14 of this slightly modified white
balance routine whenever a GPU is passed
as input to the most common core MATLAB
functions as in this last line of code
then those computations will
automatically be executed on the GPU so
here by adding just that single line of
code notice that the time it takes to
execute the white balance function went
down from point 1 to 4 seconds 2.0 to 6
seconds so that's a big speed-up
especially for a single line of code so
the second approach to using the GPU for
computing within MATLAB is to use the
MATLAB interface to invoke custom CUDA
kernels here's a CUDA kernel that
performs the same operation that was
causing that original bottleneck and the
white balance routine and then this
MATLAB function that CUDA kernel is
being used to speed up the execution
time instead of using GPU array so the
first 12 lines of code are the same as
in the original white balance routine
then however MATLAB loads the kernel and
sets up the threading parameters creates
data on the GPU and finally invokes the
kernel using F eval and now notice that
the white balance routine executes since
point O 2 2 seconds using the CUDA
kernel so the application executes
faster but we should still verify that
our CUDA code does what it's supposed to
do so we need to ask the question to the
result from the GPU
match the results that we were getting
on the CPU and you can check that the
outputs match using this simple script
which computes the norm of the
difference between outputs so normal to
zero signifies that the two outputs are
the same after running the verify script
we can see that the two outputs are the
same and there we go so in summary
MATLAB is a nice high-level language
it's used heavily by scientists and
engineers all over the world for all
kinds of applications and it's a great
way to quickly design and test
algorithms that perform computations on
a GPU either by using the GPU array
command or by using an interface
directly to CUDA kernels furthermore
existing CUDA kernels can be quickly and
easily tested inside MATLAB it makes a
great harness for developing and
exploring and testing CUDA kernels and
that's MATLAB</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>