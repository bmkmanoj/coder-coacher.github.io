<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Walk-thru the `template` function | Coder Coacher - Coaching Coders</title><meta content="Walk-thru the `template` function - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Walk-thru the `template` function</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YRZ3dW7wd7k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that we have a handle on what
constructor functions are and how
they're created let's dive into
underscore source code keep in mind the
things we've been discussing so far
about template delimiters don't get
bogged down in the nitty gritty details
of the function but focus on what is
happening to the template string that's
passed in okay let's do this I've got
the developer tools open to the source
tab and I've opened the projects at file
when this line is run remember that it
converts the template to a string and
passes it to underscores template
function this function is defined in
underscore online 1415 as a tip you can
press ctrl G and type in the line number
now let's set a breakpoint on this first
line refreshing the page with commander
control our will pause execution right
as it's starting to build up the
template we can see that we got to this
line from FJ s by checking the call
stack remember that the text variable
holds the contents of the HTML template
chrome will show us what a variable
holds if we mouse over the variable if
you're feeling adventurous how about you
pause the video and see if you can step
through the code yourself if you get
stumped or even if you make it all the
way through to the end come back and we
can go through it together these lines
here determine what de limiters to look
for in the template if you want to
override the default de limiters you can
pass them in as part of the settings
argument this match or variable is the
set of de limiters since we didn't
override them they're the ones we looked
at already matcher is a regular
expression regular expressions are out
of the scope of this course but it would
be helpful to know the basics you'll
find some resources on regular
expressions in the instructor notes
these buttons over here let us step
through the code and i'll use them as we
move through everything this line starts
the new source string the rest of the
function will add to this string this is
what will become the body of the
constructor function these lines here
take the text and replaces it with the
contents of the matched delimiter let's
step through one loop to see how it
works replace uses matter which if you
remember is a regular expression
to search for starting and ending
delimiter pair the first one it found is
stored in match the delimiter that were
found in this match were the interpolate
ones looking at the current scope the
matches content is stored in the
interpolate variable if the contents
were stored in the escape variable then
that variable would get saved to a tee
variable which gets wrapped and
underscores escaped function and is
added to the source string if the
contents were stored in the escape
variable then that variable will get
saved to a tee variable which gets
wrapped and underscores escaped function
and is added to the source string if the
contents were stored in interpolate then
it gets directly added to the source
string if the contents are stored and
evaluate then it gets directly added to
the source string interpolate and
evaluate are similar but interpolate
will insert the contents while evaluate
will actually run the code the replace
function loops through the entire text
string until it finds all the delimiter
zan dad's their contents to the source
string the next few lines add a little
bit more to the front of the source
string we've been using the T and P
variables already this is where they are
created all of the hard work of building
up the source string is finally about to
pay off a new function is created with
the source string as the last argument
remember that the last argument to a
constructor function becomes the body of
that function this new function is
stored in render now this render
function and this template function are
very important template will be called
at some later point with data when
template is called it calls render and
passes along the data it receives
believe it or not that's the end
underscore adds a source property to the
function which we used earlier and then
it returns the template function</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>