<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a Server with HTTPBaseServer - Full Stack Foundations | Coder Coacher - Coaching Coders</title><meta content="Building a Server with HTTPBaseServer - Full Stack Foundations - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building a Server with HTTPBaseServer - Full Stack Foundations</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2FwNy4Gxyh4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in the previous video I introduced a lot
of new concepts that may or may not be
familiar to you to see all of these
concepts in action in this section we're
going to build our own web server in
Python that not only renders web pages
in a browser but by processing data
submitted by the user can create a
unique web page each time a user
modifies the input to get started let's
create a new python file called web
server pi and save it in the same
directory as your restaurant menu DB and
database setup pi files so we can access
it from our vagrant machine follow along
with me using sublime or your favorite
text editor one of the cool things about
Python is that it comes with a large
collection of libraries we can use right
out of the box we will be using the HTTP
base server library extensively to
create this project take a minute to
skim over the HTTP base server
documentation on the official Python
documentation website I will add from
base HTTP server import base HTTP
request handler and HTTP server to the
first side of my web server dot PI file
to be able to take advantage of this
base HTTP server functionality our
webserver code will have two main
sections the main method and the handler
class in main we instantiate our server
and specify what port it will listen on
our handler code indicates what code to
execute based on the type of HTTP
request that is sent to the server I
will start by coding a main method as
the entry point of my code I'll add this
block of code at the end of my file to
immediately run the main method when the
Python interpreter executes my script
inside this main method I will add a try
except block the Python interpreter will
try to attempt the code inside the try
block and if a defined event occurs we
can exit out of the code with an
exception the exception I want to handle
is keyboard interrupt this is a built-in
exception in Python that can be
triggered when the user holds ctrl C on
the keyboard going back inside my try
block I will create an instance of an
HTTP server class looking at the
documentation for HTTP server I see that
I can create a web server like so in the
documentation we also see that HTTP
server is built off of a TCP server
class indicating the transmission
protocol that this server will use
server address is a tuple that contains
the host and port number for our server
I will leave host as an empty string and
specify a port number with an integer I
will define port in a separate variable
and create my server instances so notice
that
made up a name web server handler for
the request handler class I will define
my web server handler in the next
section of code but first let me add
some finishing code to the main method
after I create the server I'll add a
print statement to know that my server
is running then I will use this surf
forever function built into my HTTP
server to keep it constantly listening
until I call ctrl C or exit the
application inside my keyboard interrupt
exception I will shut down the server by
calling server socket close and have
another print statement just letting me
know that the server was properly
stopped above my main method I will now
define the webserver handler class that
I called in my HTTP server and have it
extend from a class called base HTTP
request handler the do gate function
handles all get requests our web server
receives in order to figure out which
resource we are trying to access we will
use a simple pattern matching plan that
only looks for the ending of our URL
path let's create another try except
block for our do get method the base
HTTP request handler provides us a
variable called path that contains the
URL sent by the client to the server as
a string I will make an if statement
that looks for the URL that ends with
slash hello I will tell my web server to
send a response code of 200 indicating a
successful get request I will use this
in header function to indicate that I'm
replying with text in the form of HTML
to my client along with this end headers
command which just sends a blank line
indicating the end of our HTTP headers
in the response now that I've created
the response I can include some content
to send back to the client I'll create
an empty string for now and name it
output in the next line I will add a
message with some HTML and body tags to
my output string I can use this self W
file dot write function to send a
message back to the client so I'll go
ahead and put my output string there I'm
going to add a print statement for now
just so I can see my output string in
the terminal this might come in handy
for debugging then I can exit my if
statement with a return command I will
also write an exception for i/o errors
and use the following line of code to
notify me of a 404 or file not found
error now I think I'm ready to test and
see what I've written that's far in the
browser</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>