<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Link Based Queueing Lock (cont) - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="Link Based Queueing Lock (cont) - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Link Based Queueing Lock (cont) - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SXUJ40PtcRo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so if there was a new request that is
forming you know that the new requester
called this lock algorithm and if you
had called this lock algorithm and he
has actually executed this fetch and
store operation then you know that this
link is no longer going to be pointing
to me but it is going to be pointing to
him right and that's what this fetch in
store would have done is to give this
new guy my coordinates and it has also
set the linked list to point to him as a
last requester so that would have been
accomplished through this fetch in store
so what I have to do when I come in and
try to unlock that is removing me from
the queue even though my next pointer is
nil I cannot trust it entirely because
there could be a successor that is
forming it's just that he's not that
that formation list is not complete yet
so what should I do
well I remember what I told you if I was
the only guy what I wanted to do was to
set this guy you know to indicate that
there's no requesters after me the list
is empty but before I do that I have to
double check if there is a request that
is in the information and in other words
I want to have an atomic way of setting
this guy to nil if in fact he's pointing
to me and the invariant in this case is
that if he is pointing to me I can set
him to mil if he's not pointing to me I
cannot set him to nil because he's
pointing to somebody else that's the
invariant I should be looking for so I
need an atomic way of checking for that
invariant and that invariant is in the
form of a conditional store operation
the conditional store being do the store
only if some condition is satisfied now
in this particular case I'm going to
tell you a primitive that would be
useful for this purpose and that that
primitive is what is called compare and
swap it takes three arguments the first
two arguments is saying here is L and
this is me check if these two are the
same if these two are the same then you
set L to the third argument the third
argument is what L has to be set to if
these two are the same that's where it's
called compare and swap you're comparing
the first two arguments and are the
first two arguments
happen to be equal then we are saying
set the first argument to be equal to
the third argument so that's the idea
behind compare and SWAT so essentially
when I execute the compare-and-swap
operation on L me and nel what I'm
telling is to set this guy to nil if he
is pointing to me if he is not pointing
to me don't do that so that's the idea
behind compare-and-swap</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>