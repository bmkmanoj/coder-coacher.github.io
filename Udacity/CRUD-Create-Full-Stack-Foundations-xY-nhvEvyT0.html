<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CRUD Create - Full Stack Foundations | Coder Coacher - Coaching Coders</title><meta content="CRUD Create - Full Stack Foundations - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CRUD Create - Full Stack Foundations</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xY-nhvEvyT0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that we have an empty database let's
populate it with some information with
SQL we would need to execute an insert
command with all of the information we
wanted to populate into our database
using SQL alchemy creating a new
database is as easy as creating a new
object in Python I will be executing
these operations from the Python shell
but they could also be done from within
a Python script we must first import the
following dependencies from SQL alchemy
and the empty database we created into
our environment we will see what they do
in just a second from our database setup
pie file that we created let's import
our base restaurant and menu item
classes the create engine function lets
our program know which database engine
we want to communicate with then let's
bind the engine to the base class with
the following command this command just
makes the connections between our class
definitions and their corresponding
tables within our database the next
thing I'm going to do is create a
session maker object this establishes a
link of communication between our code
executions and the engine we just
created in order to create read update
or delete information on our database
SQL alchemy executes database operations
via an interface called a session a
session allows us to write down all the
commands we want to execute but not send
them to the database until we call a
commit here I'll show you what I mean
I'm going to create an instance of a DB
session and call it session for short
from now on when I want to make a change
to my database I can do it just by
calling a method from within session the
DB session object gives me a staging
zone for all of the objects loaded into
the database session object any change
made to the objects in the session won't
be persisted into the database until I
call session commit now as I promised
making a new entry in our database is as
easy as making a new object in Python
take a look at these three lines of
example code and watch as I implement
them to create a new restaurant in my
database following this example I'll
make my first restaurant like so as you
can see it's just an instance of my
restaurant class with the name attribute
I decided to give it Pizza palace to
persist my new restaurant into the
database I must do two more session
operations first by calling session add
my first restaurant my restaurant object
is in the staging zone to be added to
the database then with session commit
it's now stored to my database but how
do I know it worked well I can also use
the session to interact with
and see what's inside of it if I execute
session query restaurant all I'm asking
my session to go into the database find
the table that corresponds to the
restaurant class and find all the
entries in that table and return them in
a list when I run this I get a response
with something like database set up
restaurant object ad and some
hexadecimal number this just lets us
know that Python found a restaurant in
our database and represents it as an
object at this location in memory I'm
sure you're thinking well that's great
but how is it useful to me we'll go into
more detail about the query method when
we focus on reading data out of our
database so now let's add a menu item to
our Pizza palace menu since our menu
items all belong to a restaurant and
have a few more attributes we have to
provide a bit more information in our
declaration I can create a cheese pizza
by executing the following command
notice that I provided all of the fields
of information for a menu item here and
specified a foreign key relationship to
the object name of my restaurant in
order for this operation to work I
didn't have to fill out every entry
unless I specified it as nullable equal
to false and our database setup pie file
now let's run session query menu item
dal to see that an object now exists for
our cheese pizza item as well now that
you know how to add data to a database
it's your turn to get some practice at
it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>