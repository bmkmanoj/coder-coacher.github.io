<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Need For Barriers - Solution - Intro to Parallel Programming | Coder Coacher - Coaching Coders</title><meta content="The Need For Barriers - Solution - Intro to Parallel Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Need For Barriers - Solution - Intro to Parallel Programming</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TDT0BA4i-Oc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so the answer is three why is that well
here's the code let's take a step by
step first of all every thread is just
setting a local variable equal to its
own thread index then in this line we're
declaring a shared variable which is
gonna be shared by all the threads and
thread block
I just hard-coded an 128 elements here
and now we're actually gonna do
something we're gonna write every thread
is going to write into a single element
of the array corresponding to its thread
index and the thing that it's gonna
write into that element of the array
happens to be its own thread index okay
so this is gonna load up that array with
one two three four and so on and that's
just to put something in the array that
we can play with this operation is right
so we need a barrier after this right
completes in order to make sure that
nobody tries to read from the array
until after all of the threads have
finished the right operation so let's
insert a barrier here and now all of the
threads that pass this if statement are
going to do this shift operation right
they're gonna set the array element
their index equal to the array element
at their index plus one but if you think
about it this is really a read and a
write operation here is our first write
operation that was number one and now
we're doing a read operation that's
number two okay we're gonna read from
the array at index plus one and then
finally we're gonna write to the array
at index and that's operation three and
the tricky thing about this is that all
of these reads should complete before we
allow any of these writes to finish so
really we need to restructure this code
we'll make this read operation explicit
put it in a local temporary variable
will call sync threads will perform the
write operation explicitly and then just
to be absolutely safe before anybody can
use these written values we need another
sync threads to ensure that all of these
write operations have completed before
anybody attempts to do anything with
this array value afterwards</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>