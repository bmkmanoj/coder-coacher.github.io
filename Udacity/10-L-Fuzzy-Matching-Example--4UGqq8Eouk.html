<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>10 L Fuzzy Matching Example | Coder Coacher - Coaching Coders</title><meta content="10 L Fuzzy Matching Example - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>10 L Fuzzy Matching Example</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-4UGqq8Eouk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're going to start with a fully built
workflow where we have a master database
of all people who have been contacted in
the past for direct marketing campaigns
notice that the fields at the end of the
file are marked with zeros and ones the
ones represent the customers who are
contacted on that date for particular
marketing campaign the second data set
our customers who are contacted on the
last direct marketing campaign on
January 15 2013
whenever we fuzzy match two data sets
together the data sets actually need to
be merged into one data set however we
use an ID field to identify each record
and we use a source field to identify
where the record is coming from so that
in that way we can differentiate the
data that comes from each file in our
scenario these fields already exist
however if we don't have these fields in
our data sets we need to create them
coming back to the merging what we're
actually doing is appending the records
from the customer file to the records
from master data set so we use the Union
tool we can see the fields from the two
data sets lined up with the date fields
not lined up because they're unique to
the individual files that's okay in the
next step we'll do the actual fuzzy
matching we choose the merge mode
because as mentioned earlier we're
working with two data sets that were
merged or unioned together the source ID
is the field that contains the source of
the data this field is called source and
you can see the contents contain the
words master or customer we can see that
by running the workflow the record ID
field is the field that contains the
unique ID identifying each record in our
case it's called HH ID lastly we have to
set the match threshold the match
threshold is the minimum score achieved
by the fuzzy matching for it to be
considered to be a match the higher this
or the closer or the more accurate the
match the lower the score the less
accurate the match however more records
will pass through we have set this to
60% here now we have to identify the
match fields these are the fields that
we'll use in the fuzzy matching process
we're going to use pre-existing
templates that have been set up as
standard ways that you can fuzzy match
to those fields the fields we're gonna
match on our primary address zip and
lastname the primary address is the
address field but I'm not sure if it has
any suites or apartments in it so we can
simply choose address in the match style
if we're ensure that there are no suites
or apartments I'm gonna save this next
section second next sentence again if we
are sure that there are no suites or
apartments we could choose the address
no suite option we're then adding the
zip field as an additional field to
match on and using the zip code style
last we're matching on last name and for
this we choose the name style out of the
fuzzy match tool we can see the records
that match between the two data sets
household ID 1 0 0 3 9 0 8 5 5 matches
to household ID 2 0 0 0 1 1 8 6 2 in the
second data set we may find that there
are duplicate matches to the same
records based on the way that the fuzzy
matching tool works so we use the unique
tool from the preparation category and
set the fields to HH ID and HH ID to the
unique tool pulls one set of records
that are unique through the u side and
the duplicates come out the d side we
don't need the duplicates so we continue
our workflow out of the u side now that
we
rich records are matches we need to link
the IDs back to the original files to
pull through the rest of the information
about those records to see how well the
address name and zip code fields matched
if we look closely at the numbers we can
tell that the master files have numbers
that start with a 1 in that household ID
field yet the customer file starts with
a 2 in the household i50 field so we use
a joint tool and we connect the
household ID field to the household ID
field of the master data set pulling
through all of the fields we do remove
the household ID field on the right
though since it's duplicated
you can tell it's duplicated because
it's added right underscore as a prefix
to this field additionally you might
notice that we've renamed some of the
fields with a prefix of master
underscore we've add this to the
additional field names so that we can
identify these fields more easily after
we join to the customer records now we
use a second join tool so that we can
join all the records to the customer
file to pull in the customer fields by
joining household ID to to household ID
in the customer file in this case we
again remove the second hence old ID
field by unchecking it and we reorder
the fields in the join tool so that the
address zip code and name fields are
side-by-side for the two files also the
fields that we have done the fuzzy
matching on also have a prefix in this
case of customer underscore so we'll
move customer primary address so it's
next to the master primary address
customer zip so it's next to the master
zip and customer last name so it's next
to the master last name now we can see
how all the records matched and how the
fuzzy matching was a
able to match the records that are not
spelled exactly the same
notice how the fuzzy matching was able
to match many names that sound the same
but are not spelled the same the fuzzy
matched records are just a subset of the
master data set so next we need to Union
in the records that did not match the
ones that fell out on the left side to
put the entire master data set back
together and then deselect out the
fields that we don't need the final
output represented in the Browse is the
entire master data set notice how the
top records represent the records that
matched and the bottom records represent
the original master records that did not
match to any records in the customer
file note that all of these records have
the value of one in the date field the
new date January 15 2013 and the rest
are empty with nulls because they did
not match we can replace these later on
with zeros if we like so this final
dataset shown in the Browse tool
represents the entire master file with
the records that were fuzzy matched
identified as ones in the January 15
2013 column</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>