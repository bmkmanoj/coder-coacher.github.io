<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A Related Problem Part 2 - Intro to Parallel Programming | Coder Coacher - Coaching Coders</title><meta content="A Related Problem Part 2 - Intro to Parallel Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>A Related Problem Part 2 - Intro to Parallel Programming</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/M-faEfLwtOA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so let's see what we've got so a
million threads and one thousand blocks
wrote into ten array elements right so
we we should have in every array element
we've done an increment operation so we
should have a hundred thousand and each
the number a hundred thousand in each of
the array elements and when we print it
out instead what we see is we've got
four hundred and seventy six that is
clearly completely wrong and we need to
figure out what happened let's notice by
the way that it took about three
milliseconds to run this code I can run
it again a few times hmm this time I got
a different number okay that's odd
slightly different amount of time took
took slightly less time about the same
though about three milliseconds I can
run it again and again and what you're
seeing is that every time I'm getting
you know different seemingly random
values written into each of these array
elements and it's consistently taking
around three milliseconds three to 3.2
milliseconds so let's see what's going
on so the problem is that each of these
threads is writing directly into the
array and ignoring the fact that there
might be many other threads doing the
same thing so if you look at this actual
increment operation every thread is
reading the value at G sub I it's adding
one to that value and then it's storing
the result back in G sub I again so
there's a read a modify and a write is
called a read modify write operation for
that reason so the difficulty is that
there's a hundred thousand other threads
that are also trying to read this value
compute a different value and write the
result into the same location so an
amount of time that it takes each thread
to read this value and increment it and
store it back many many other threads
have gotten to run at the same time and
they read the old value the unemployment
advance so many threads are reading the
old value the unemployment avalue and
adding a number you know incrementing it
and storing it back you're gonna get the
same result written over and over and
over again you also might have older
threads overwriting the results from
later threads so you know it's no
surprise really when you look at this
code that in fact the numbers that we're
getting in those array elements are
essentially random so what do we do
about it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>