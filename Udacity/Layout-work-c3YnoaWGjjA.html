<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Layout work | Coder Coacher - Coaching Coders</title><meta content="Layout work - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Layout work</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/c3YnoaWGjjA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">currently our settings view is a list of
preferences dan showed you how to create
a custom preference for location but
what we want to do now is to extend that
custom preference by adding a widget to
launch the place picker however we only
want to show this widget when Google
Play services is available this way
devices without play services can avoid
displaying a broken feature we already
have a check for Google Play services
and main activities on create because of
our GCM integration however we cannot
assume that the user's device will not
change between activity creation and the
active state so the first thing we are
going to do is to perform an additional
check at the moment we display the
location preference in case something
has gone wonky theoretically you could
move the existing GCM check from
oncreate to on resume but these are two
different features that are just powered
by the same service and we actually have
different expectations for each feature
GCM needs to be configured at the
creation of the activity but the place
picker needs to be supported each time
the user enters the settings activity so
we don't want to be checking in on
resume which means that we should call
is play services available in our
location edit text preference class note
that we aren't handling any potential
recoverable errors this time because in
the middle of changing a location for
the weather forecast it would be really
disruptive to direct the user to the
google play store for a potential update
so instead our failure case is that if
the sdk is not immediately available we
just use the default settings layout
however if it is available then we're
going to add a widget to the location
preference that can launch the place
picker API so now we need to create the
pref current location land this is going
to be the icon that we're going to add
to the location preference because we
want a simple visual cue it's best to
use a system icon that the user will
already be familiar with all of the
android system icons have been updated
for material design and can actually be
downloaded off of github you just need
to make sure that you get the right size
for each Straubel density that your app
support for sunshine that be these for
because our place picker is intended to
make it easy for a user to indicate
current location you should retrieve the
current location system icon from the
map set then all you need to do is to
drop each resource into its relevant
folder the layout that we need then is a
simple image view of our system icon
however our icon is very small but if we
wrap it in a frame layout we can make a
larger click space without having to
scale the icon all we need to do is to
reference the ID of the frame layout
instead of the image view when we build
our click listener you'll also want to
make sure that all of your icons are
visually aligned so to do this you'll
want to set the layout gravity you also
probably want icons to match in color so
just go ahead and add a color tint in
order to get the icon teal instead of
black and finally don't forget your
content description you'll need to write
the string in strings.xml so that it
could be translated and then just
reference it here now that our layout is
ready to go we need to set up our
onclicklistener when the location
preference is created that calls on
create view and in this callback we can
retrieve our new layout and set our
click listener for now just go ahead and
use a toast to test that everything is
working</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>