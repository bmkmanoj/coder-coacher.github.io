<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Conditional Wait Variables | Coder Coacher - Coaching Coders</title><meta content="Conditional Wait Variables - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Conditional Wait Variables</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VAV2h1GdgE0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">most simply conditional weight variables
allow you to take one thread off the
scheduling queue until there is a signal
from another thread that it should be
put back on this is useful if we don't
want one thread to continue its work
until the work of another thread is
finished to give an example let's
suppose that we have a thread a over
here and a thread B over here
thread B wants to stop until thread a's
work is done now to use a conditional
weight variable we need three things a
variable indicating whether the work is
done or some other condition that can be
tested in memory a lock that we can
apply to this variable and a special
conditional weight variable now after
finishing the work thread a is going to
acquire the lock change is done to true
and then send a signal to anyone waiting
on this condition a signal that they
should wake up and then he'll unlock the
lock thread B for his part will first
acquire the lock and then check to see
if the work is done if it isn't he will
wait now it is important that this con
weight not only makes thread B weight
but it also unlocks the mutex
this will allow thread a to acquire the
lock and eventually send the signal the
call blocks until the signal is received
and thread B acquires the lock again
hence need to unlock it at the end of
the code at first this might seem
unnecessarily complicated why do we need
this if statement before the con weight
procedure call for instance well if it
weren't there then it's possible that
the Signum will have already come and we
would never see it so it's important to
check that there's something to wait for
before you actually wait given that
there is such a condition to check
we'd better also have a lock for it
otherwise we might decide that we need
to wait but before we actually execute
the weight function the signal might
come and of course the con weight method
had better unlock the mutex otherwise
thread a would never be able to acquire
it and change the condition that we're
waiting on</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>