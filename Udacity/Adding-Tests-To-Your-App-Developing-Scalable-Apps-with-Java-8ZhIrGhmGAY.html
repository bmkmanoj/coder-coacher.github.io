<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Adding Tests To Your App - Developing Scalable Apps with Java | Coder Coacher - Coaching Coders</title><meta content="Adding Tests To Your App - Developing Scalable Apps with Java - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Adding Tests To Your App - Developing Scalable Apps with Java</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8ZhIrGhmGAY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that you've got significant
functionality working in your
application this would be a good time to
add some unit tests in the lesson 3
folder for off the code that you
downloaded from Udacity github you'll
find the test folder this folder
contains tests that are applicable up to
the end of lesson three basically tests
for the profile functionality probably
can't see but we've got profile test
Java we've got conference API test or
Java so go ahead and copy the test
folder into the SRC source folder where
you have your project for conference
central so you can just drag and drop it
there it is and I also want you to go
ahead and delete the target directory in
this folder whenever you run your
project or you run it on dev server you
deploy it to appspot the output from the
build all goes into the target directory
and it gets it'll get recreated if you
delete it and sometimes the old build
and the the old output files and the new
output files don't work well together so
when in doubt delete the target
directory since we're adding tests we
want to make sure we're starting with a
clean slate so I'm going to delete it
and there it is looks like it's gone
won't stay gone for long but it's gone
for now okay now let's go over to
eclipse going to refresh the projects
and we've added the test directory and
deleted the target directory okay so
target or targets still there so
whenever you do delete the target
directory it actually pretty much
automatically gets recreated right away
with a couple of things in it but it
doesn't have everything that's needed
here down in the source directory you'll
see the test folder now and it has to
test it has profile test java in the
domain package and it has conference API
tests or java in the SPI package so
let's take a look at the tests first I'm
going to look at profile test Java here
we have our class profile test start out
by defining some values that we're going
to need in our tests then we do the
setup and all we're doing this set in
for setup here is we create a new
profile and we supply some values
then we have the teardown method which
ways need and then here's our first test
we're testing the Gators very simple
just checking that the values in the
profile are in fact values that we put
in the profile then we check what
happens when we update the profile so
what we're going to do is update the
display name and the t-shirt size and
then we want to check that the display
name is updated and t-shirt size is
updated but in fact the user ID and the
email don't get updated they need to
remain as they were and then this other
function here is commented out because
it tests and functionality that you
haven't implemented yet so the test
wouldn't work now let's look at
conference API test Java so here we are
conference API test and again the first
thing we do is set up some values for
testing on have our service help her do
the setup and in this case the main
thing we're doing is creating a new user
with an email and a user ID you have the
teardown method and then we start
testing so the first thing we do is
testing getting the profile the first
time then we test saving the profile
then we test saving the profile with
null values and so on I look at the
different tests that we do and then you
get to a point where it's commented out
and that's because they're testing
functionality you haven't implemented
like you can't test creating a
conference because we haven't written
the function to create a conference yet
and as you go through the lessons you
can come back into conference API test
or Java uncomment the testing functions
as the functions are ready for testing
okay now we're going to look at running
the project when we've got tests so if
we go out to conference central this
time I'm going to choose run as and then
run configurations and this is my
configuration to run the run the dev
server on localhost and you see here
there's this skip tests check box so by
default tests are not skipped it hasn't
mattered up until now because we haven't
had any tests in there so I didn't
matter whether they were skipped or not
but now the test will be run if at any
point you find that the
the blocking you or you want to deploy
without the test you can come and click
there skip test but let's not do that ok
so I'm going to run now I'm running as
per normally out and see the tests ok my
dev server is running let me scroll back
up and see what the results of the tests
were ok so it ran seven tests there were
zero failures zero errors 0 skipped and
it took point for 15 seconds and then
here's the summary ok good ok well
that's all fine but what happens if you
actually do have an error so to test
that to test the tests let's introduce
an error so since we're testing the
profile functionality I'm going to make
one of the functions to do with profiles
return an unexpected result ok so we
have to get profile method and this gets
the profile associated with the logged
in user and to get the profile entity
out of the data store we have to first
create a key we specify the class which
is profile top class and then the seeds
the key user ID but let's say we made a
mistake and we put the user ID inside a
string which is something that does
happen now there's no error here this is
a valid kind of value here so doesn't
show me an error now let's see what
happens when we run our tests now I'm
going to run the project on localhost ok
this time we got an error fail to
execute and we got an error in the test
we got the error and test get profile no
huge surprise there so you see we have
the stack trace but at the bottom we
have nice summary where it shows the
tests that gave an error and how many
failures ok now the other thing I want
to show you is over in your target
directory may need to refresh your
project here in
target directory you see a folder called
surefire hyphen reports and this
directory contains the results of the
report so if we look at profile test txt
this is not where we had our errors 0
failure 0 errors if we look at
conference API test txt rule lots of
errors but here failures arrows actually
only one error but this is the stack
trace but now if we come down I want you
to look at see what happens with the XML
files if i click on conference API tests
on XML it'll show me the functions that
got called and the ones with the errors
or the failures in this case here it
takes me straight to where i had the
error and the problem I can see right
here is is that the user ID did not
match what was expected so I'm going to
go ahead now actually and just fix my
code before I forget ok there's my code
I'll fix now when I run it I won't get
any errors as you continue through the
lessons be sure to add the test the new
functionality as you implement it in
some cases you'll need to get the test
files from the appropriate lesson
folders as you implement new endpoint
functions you can simply uncomment the
tests are already in conference API test
and if you deviate from the code we have
you write like if you had your own
functions or you change what the
functions do then you're going to need
to update the tests and add your own
tests to make sure that you're testing
the functionality that's in your
application</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>