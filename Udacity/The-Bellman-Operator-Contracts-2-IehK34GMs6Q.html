<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Bellman Operator Contracts - 2 | Coder Coacher - Coaching Coders</title><meta content="The Bellman Operator Contracts - 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Bellman Operator Contracts - 2</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IehK34GMs6Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's just make a little room here
and we'll copy this equation down one
more time but this time what we're gonna
do is instead of considering this
weighted combination of the Q values at
state as prime weighted by the
probability of reaching s Prime let's
just you know make it simpler and just
worry about the S Prime where the
difference is largest since this is a
weighted average or a convex combination
it can't be any larger than the biggest
difference at any s prime so we're gonna
do that we're gonna copy that down max
it over s Prime's
and we don't need to include the max
over a and s anymore because you'll
notice this expression doesn't even have
a and s in it anymore so actually by
considering this kind of worst-case
version we don't have to we don't have
that max anymore
mm-hmm and that gets us from an equal to
a less than an equal this gets us from
an equal to a less than equal that's
right because we're bounding it could it
could actually be a bit wider here we're
considering the worst possible next
state in terms of the difference between
these q functions okay and now you can
see that it's actually getting pretty
close to where we want to end up the
main difference in fact let me just let
me rewrite this
max norm equation out so when we write
that out we get gamma times the max over
state action pairs I'm gonna write s
Prime and a prime just to make it easier
to match up with the other equation it's
it's whatever you know whatever however
we're indexing over the state action
pairs that make up Q 1 and Q 2 so so
this max norm is really just the max
over those of the difference between the
Q to Q functions and this is where we
are at the moment we have something like
gamma max over s Prime and these maxes
are kind of trapped in the absolute
value would be really nice if we could
move these maxes out of the absolute
value and and have it this way so now
the a Prime's actually match up here
this is the max action according to the
Q function q1 and this is the max action
according to Q function q2 and it would
be good if we could just talk about them
together so so this is kind of to me
anyway this is the most fun most
exciting most interesting step because
this turns out to be true right that we
can actually move these maxes out and
and then we get a valid sequence so what
I'm gonna focus in on on this step in a
moment but let's just accept it
the time being that that we can move
these maxes out now we've actually
completed the algebra that we needed to
complete that the difference between the
two q functions after we apply the Abell
'men operator is actually less than or
equal to gamma something smaller than 1
times what the distance was before we
apply the q operator sorry the B
operator so this is this is in fact the
contraction property of of the bellmen
operator of value duration well so
bellman in value iteration converges
except for this magical step you're
about to explain to me except for the
magical step yeah and and the magic step
is fun because it's I alternate between
seeing it as completely obvious and like
of course this is true and being
completely mystified and don't
understand how it could possibly be true
and my brain just sort of flips back and
forth between those kind of like a neck
or cube so let's dive in and make sure
that this property holds knowing that
once we establish that we get the whole
chain we get the whole contraction
operator thing we get all the power of
contraction operators in when we're
doing bellman Optive updates</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>