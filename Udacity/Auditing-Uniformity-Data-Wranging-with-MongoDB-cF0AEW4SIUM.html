<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Auditing Uniformity - Data Wranging with MongoDB | Coder Coacher - Coaching Coders</title><meta content="Auditing Uniformity - Data Wranging with MongoDB - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Auditing Uniformity - Data Wranging with MongoDB</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cF0AEW4SIUM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay let's talk about our last data
quality metric that being uniformity and
we're going to look at how we go about
auditing a particular field for
uniformity so if you remember uniformity
is about all the values in a field using
the same units of measurement let's look
at an example so here we're going to
work with the city's data set again and
what I want to explore here is just one
field that being the latitude field now
the latitude field is identified in this
data set using this particular field
name so let's take a look at some of the
auditing tasks we might do here now the
way I've organized this code is that
we're going to loop through each of the
rows in this data file and again here
we're using our CSV module in Python for
each row we're going to call this
function audit float field so this
particular piece of code is something
that we can actually use to parse any
field that should have a floating point
value and in general this is how i like
to think about auditing fields in my
data sets I like to think about the
things in general that can go wrong with
a particular type of data field and do
some auditing for that type and that if
I need to I can write more specific
auditing routines to check the values
okay let's take a look at that audit
float field function this is where all
of the real work happens here so what
I'm going to do is I'm going to keep
track of the number of nulls that I find
the number of empty fields if any and
then the number of field values that are
actually arrays and if you remember
arrays are encoded using curly braces
and vertical bars to separate the
individual elements of arrays in the
info box data set I'm also going to
check to make sure that the value is
actually a number and then if it is I'm
going to run a check to make sure that
it falls within the minimum and maximum
values okay so this is a way of making
sure that it's using the units of
measurement that I expect and if you
remember earlier we saw an example where
the area for a city is actually
represented using square millimeters as
opposed to square kilometers so what I'm
doing in this particular piece of code
is actually hard coding in
some values for this particular field
now what I would do here if I wasn't
using this as an example for this course
as I would actually treat each of these
as command line parameters that I would
input to this script here i'm just going
to hard-code them in so if I wanted to
actually use this for a different field
what i would do is change the field name
and change the min and max values to
test for a different float field ok so
going back to our audit float field
function again we're checking for nulls
empties arrays any fields that are not
in fact a number once we've made it
through all these tests and then finally
if I get down to here I've got something
that I believed to be a number what I'm
going to do is actually convert it to a
floating point value because of course
all the values coming in are strings and
then I'm going to check its range ok now
the range for latitude the way this data
should be encoded is between negative 90
and positive 90 and technically speaking
I should have actually made this less
than or equal to ok so let's run this
and see what pops up ok so I found three
non numbers and you can see this looks
like an okay latitude value just express
in a different type of units total
number of cities that's what I expect
quite a few nulls actually okay not much
we're going to do about that in this
particular example and quite a few
arrays if I wanted to fully audit this I
would need to take a look at these
arrays and see what's going on there and
then I would need to check each of the
individual values in those arrays what
I'm more concerned about in this
particular example are these now there
are several different ways of
representing geographic coordinates this
is three examples where instead of
having the raw values for latitude and
longitude we've instead got this type of
coordinate which is actually degrees
minutes and seconds so a different way
of encoding the same information for
latitude if I change this code slightly
will get a chance to see what the bulk
of the values actually look like ok and
you can see that they are all values
between negative 90 and positive 90 and
there we can see a few negative values
as well so commenting those out running
this again what's going on with these
values well the story could be that
these numbers were coded by hand
using a different coordinate system and
that's actually why we're seeing this
come out rather than this type of number
which is what we expect so this is the
type of thing we might see when we're
auditing for uniformity we've got a
single field that holds a particular
type of data in this case latitude
values for the location of cities but
there's two different coordinate systems
being used here the decimal degrees
latitude and latitude represented in
degrees minutes and seconds now an
interest in full disclosure I actually
made the data set dirty by introducing
these three values but this is exactly
the type of thing you might expect to
see in terms of the same type of value
being represented using different units</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>