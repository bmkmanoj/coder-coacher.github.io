<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>XFS Data Structures - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="XFS Data Structures - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>XFS Data Structures - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hEXucD9Y4Os" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">XFS data structures for implementing a
truly distributed file system are much
more involved and let's talk a little
bit about that first of all I mentioned
that the metadata management is not
static even though the file that you're
looking for may be resident at the
particular node the manager for that
file may not be at that same node so the
client action when it is looking for a
file it starts to the file name and this
is a data structure that is a replicated
data structure at every node in the
entire distributed system so any client
node when it starts to the file name it
consults this manager map data structure
to know who is the metadata manager for
this particular file name and the
manager node action is fairly involved
so the client comes to the manager with
a file name and when you come to the
manager with a file name the manager
looks up the first data structure called
the file directory and that file
directory has the inode number and that
inode number is a starting point for
looking up the contents of that file now
let's talk about all the data structures
that are used by the manager node on the
manager node when the client presents
the file name the manager node uses a
data structure called the file directory
to map that file name to an AI number
and from the AI number it uses another
data structure called AI map data
structure to get the inode address for
this particular file name the inode
address is the inode address for the log
segment associated with this file name
and using the stripe group map which is
telling how this particular file is
striped it can locate the storage server
that contains a log segment ID that is
associated with this file name I
mentioned earlier that every log segment
is actually striped on a whole bunch of
disks a stripe group what is the stripe
group associated with this particular
log segment that's the information that
it gets from the stripe group map once
it has the set of storage servers
that contain this log segment it can go
to the set of storage servers to get the
data blocks associated with this
particular file name that's the entire
roadmap of what the manager would have
to do to go from the file name to actual
data blocks that corresponds to that
file name now this sounds like a lot of
work being done
fortunately caching helps in making sure
that this long path is not taken for
every file access we will see that in
terms of how reads and writes happen in
the XFS file system just to recap the
data structures file name - I number
mapping is contained in this data
structure file there the mapping between
the I number and the inode address for
the log segment ID that is containing
this I map given the inode address I can
consult the stripe group map to know
which storage server actually has the
inode for this file name there is a log
segment that corresponds to this file
name I can get that and once I get that
then I can find out the stripe group
that is associated with this log segment
and that will say what are all the
storage servers that I have to contact
in order to get the contents of that log
segment then I can go to those storage
servers and get all the data blocks that
correspond to a particular log segment
so that's the road map</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>