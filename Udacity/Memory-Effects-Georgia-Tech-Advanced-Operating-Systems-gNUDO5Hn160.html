<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Memory Effects - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="Memory Effects - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Memory Effects - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gNUDO5Hn160" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">the next myth is regarding memory
effects and that myth concerns the
assertion that the loss of locality in a
microkernel based design is much more
than in a monolithic structure or the
structure that is advocated in spin and
exokernel but before we talk about the
memory effects there's a primer on the
memory hierarchy you know that in the
processor architecture you have a CPU
you have the TLB and in several levels
of caches main memory and the virtual
memory that resides on the disk and
these caches are typically physically
tagged now what do we mean by memory
affects what we mean by that is if you
have this Hardware address space and
this of course is much bigger than the
amount of space that's available in
these caches and in fact we know that
the entire Hardware address space may
not even be in physical memory because
in a demand page system when a process
is executing the pages that it needs may
be demand paged from the virtual memory
that's on the disk and brought into
physical memory and when the processor
is executing instructions then the
instructions and data contained in
physical memory move into this memory
hierarchy close to the CPU so that the
CPU can access the working set of the
currently running thread by getting it
from the cache that is closest to it
that's the hope in this memory hierarchy
what we mean by memory affects is when
we can take switch between protection
domains how warm are the caches now
recall that if we have small protection
domains p1 p2 p3 p4 let's say they're
all small protection domains in that
case lead-k suggestion is don't put each
of these in its own Hardware address
space pack them together in the same
Hardware address space and enforce
protection for these processes from one
another through segment registers
so when we have small protection domains
then the caches are going to be pretty
warm even when you do a context switch
from one process to another process
there's a good chance that the cache
hierarchy is going to contain the
working set of the newly scheduled small
protection domain so in other words the
memory effects can be mitigated by
carefully structuring the protection
domains in the hardware address space so
debunking the second myth with respect
to address space switching also helps in
reducing the ill effects of implicit
costs associated with address based
switching because these small protection
domains occupy only a small memory
footprint and therefore occupy only a
small memory footprint of the caches as
well and therefore when we go across
small protection domains there's a good
chance that the locality for the newly
scheduled small protection domain is
going to be contained in the cache
hierarchy so the caches are probably
going to be warm when we do context
switches so long as the protection
domains are small we already mentioned
that if the protection domains are large
you cannot avoid that whether it is a
monolithic kernel or the exokernel or
the spin type of extensibility if the
memory footprint of the system service
is so big it is going to pollute the
cache when we visit that particular
system service so even if we have a
monolithic kernel and the monolithic
kernel has subsystems that occupy a
significant portion of the hardware
address space even though we are not
doing any context switch the ill effects
of implicit costs in the memory
hierarchy is going to be felt because
the caches after all are physically
tagged and therefore when we go from
large protection domains or large
subsystems in the context of a
monolithic kernel
you have to incur the cash pollution so
that ill effect is unavoidable for large
protection to mean so the only place
where a monolithic kernel can win or an
exokernel can win or a spin can win is
in small protection domains and a
microkernel can also win for small
protection domain by packing multiple
small protection domains in the same
Hardware address space so this makes the
question why was it so bad in mock
recall I mentioned that in mark on the
same Hardware border crossing cost 800
more cycles compared to the border
crossing in the l3 microkernel so we can
ask the question why was it so bad in
the Mach microkernel</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>