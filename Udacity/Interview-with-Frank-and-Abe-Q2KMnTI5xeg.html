<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Interview with Frank and Abe | Coder Coacher - Coaching Coders</title><meta content="Interview with Frank and Abe - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Interview with Frank and Abe</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Q2KMnTI5xeg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">JP thank goodness you're okay any reason
I wouldn't be say did I tell you I got
someone from the firebase team that
offered to chat with about data best
practices no but actually I think that
might be just the kind of guidance that
we need it's incredibly important that
we get this stuff right crap though I've
got a bocce ball game with the investors
do you think that you could take notes
or better yet the developer could come
over to Google hmm yeah that sounds like
a plan want to borrow the company
appaloosa hello and welcome i'm here
with Abe again and i'm joined by puff
puff is also an engineer on the firebase
team welcome puff hey thanks for having
me so I'm trying to advise a friend on
how to correctly lock them up with a
database schema for firebase I imagine
there could be some pitfalls is there is
there an issue in you know getting your
schema right up front now one of the
things firebase really allows you to be
flexible about how you structure your
data and that's one of the great
benefits of using a schema less no
sequel database unfortunately it's also
one of the pitfalls because people tend
to not think up front of how they need
to model their data and that's one of
things we're at some point during the
life cycle of your application you need
to start then hammering down the
structure you need to start validating
your data if you don't you're going to
run into issues later with either
scalability or especially when you're an
Android developer you need to start
mapping your your schema-less Jason into
your Java classes and that becomes
progressively more expensive if you make
your if you make changes later on in the
in the cycle an important important
thing to note about firebase is that
when you start out when you get a new
firebase you can pretty much do whatever
you want you can write in any type of
crazy structure you want to when you're
developing and when you're testing and
this is easier on web than it is on
Android wear your structure can be very
very loose but once you get something
and you're like this is what we're going
with this is how we're building you can
lock that structure and you can write
schema validation and you can make sure
that the only data in your firebase
matches these rules so initially it's
very freeform but once you're once you
have it more
about what you're building and how you
want to build it you can lock it in just
like you would in any other database so
when you're developing apps and your
first laying out your scheme how do you
go about doing it you sketch it on paper
do you build you take some json data and
sort of model it how do you go about
actually doing it I usually start with
just some some code where I write some
of the sample data at the same a shooter
yeah I think for sure if you get a
little bit of code where you start
setting like all right here is a very
loosely defined user creation page or I
can start writing what a user object
looks like I start figuring out what I
need and then that data can start
showing up in your firebase right away
because it's so easy to get up and
running with let then you can be like
all right I need this profile
information or I need a list of their
likes or whatever and you can just start
very free forming building out your data
structure and then once I sit once once
you're confident with your structure
like I said you can lock it in but up
until then you can just very casually
add in things where you need to and
experiment with the structure for most
cases i find that works sometimes if
it's a very large app and you know
there's going to be tons of different
types of data in there I'll whiteboard
it out and sketch out like all right
here's this and this will have a list
that points to this other type of data
or something like that but it's a much
more common that I just start playing
around and then develop the structure
that way yeah and it's because what you
then notice is that after you figure out
your structure and how you want to store
the data or what data you want to store
mostly then you start worrying about
scalability of today time and that's
something you can then do later so you
now know which data you want now let's
think about how we can make dis capable
so but starting with some exploratory
coding and just structuring the data I
should go along it's very common great
so what are some of the biggest mistakes
you see new developers doing when they
were designer schema mm-hmm I think
people because firebase can have this
very complicated nested structure where
you can essentially mimic any Jason
structure you have which could be you
know users and then under users a list
of usernames and under that you each
user could have a list of their friends
which could have a whole bunch of
profile information about them that
could have their profile you end up with
this very nested structure and that
doesn't work very well in firebase it's
very hard to be specific about your what
your
loading if you have this very
complicated deep structure so that
nesting I think it's a very common issue
it does it's not that it doesn't work
it's just that it doesn't scale as well
no so and it's very natural you see that
lots of developers write to me most of
us come from a sequel background where
we work with relational databases and
there it's there you cannot do
hierarchies very easily so when you get
to a hierarchical database like firebase
it's very natural to want to start
building building these nested
structures because you've never been
able to do them and that's when as Apes
set we need to start paying attention to
not overly nesting the data because
you're going to run into into issues
later on so you typically want to stay
relatively flat in your data structure
and that's that's not very appealing to
developers coming from a sequel
backgrounds okay do you guys have any
like war stories some like we gave
assistance to customers that had some
hiccups because they didn't follow best
practices yeah you don't get to a
quarter of a million developers without
some war stories so now what we see
quite often is that people start
gathering lots of data in long lists and
that is is fine if you need all their
data but but one of the ones we saw was
we had a developer that was tracking
couriers who were delivering packages
across the city and each courier was I
imagine them being on their mopeds and
their their their phone was pinging the
firebase server so there's lots of data
being generated and they were keeping
this data in one long list that would
last essentially for like days on end
and yeah that would be half a million
items easily and they were showing this
in a dashboard and things were sluggish
in general it was not the performance
they were looking for so it's like well
okay how many items do you want to show
in this list and it turns out they were
actually showing like it most the last
five minutes of data and this is one of
things that you have to then start
explaining to them or if you only want
to show five minutes of data then why
are you keeping the days of data in one
big list because the you will have to
query all of it to just get to top the
top ten items that's a very common one
we see where people are not separating
their active data from their from their
historical data and yeah these hurt
shows how we see this quite often New
York's not good ones yeah another common
issue related to that is people
go and they'll build some application
with firebase really quickly because it
lets you do that and they'll start
getting a ton of data and then they'll
make one mistake in their code and they
will clear out their firebase this is
not normally possible if you're adhering
to what we are best practices that we
provide in our documentation which is
basically that you restrict things in
your firebase you say only this type of
data can exist here only these people
can write to this and that that way when
you're developing you don't accidentally
delete all your firebase data but
because we don't enforce that because in
the early like we want you to be able to
experiment and play around we don't know
if you're trying to clear out your
firebase because your toad of the
structure you made or if you made a
mistake in your code and your union with
some bug is clearing it out so we see
that a lot especially like things like
hackathons where people are trying to
write code very quickly and they're like
oh i'll not bother with the security
rules i won't bother enforcing a schema
and then they make one mistake and
they're like where's all my data and the
answer is it's gone luckily we have
backups for that we do backups of your
fire bases all the time and we can
recover that if it's like important
mission critical data but in general
it's a very easy mistake to make if
you're not following our best practices
and implementing security and validation
rules good one yeah last one i remember
is I was talking to a game developer and
day we're doing a I OS app I think where
you got to vote on either the blue egg
hatched or the yet or the red egg would
hatch and they were looking for okay so
we would probably use transactions to
keep the count right of who voted for
what and this is a common one where it's
like well how many players do you get in
and how often do they or how how fast is
to vote it's like they had half a
million in in like 30 seconds that's
typically something where if you start
doing transactions yeah it will not
scale very well anymore because everyone
will be hitting that same counter at the
same at that time so there you you see
that no you need to stare into a
direction where you actually instead of
increasing a counter you you keep the
votes and start counting them separately
this is always fun to explain because
yeah people are used to doing
transactions
well guys really appreciate your time
today thank you very much I'm sure that
our developer rule really go take this
advice and continue on developing their
app cool okay glad we could help yeah
thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>