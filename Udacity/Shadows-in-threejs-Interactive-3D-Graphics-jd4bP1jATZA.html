<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Shadows in three.js - Interactive 3D Graphics | Coder Coacher - Coaching Coders</title><meta content="Shadows in three.js - Interactive 3D Graphics - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Shadows in three.js - Interactive 3D Graphics</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jd4bP1jATZA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">turning on shadows for a scene is pretty
straightforward in three.js
you enable the shadow map on the
renderer itself and tell the spotlight
to cast shadows for each object you have
a choice you can have it cast or not
cast a shadow and you can have it
receive or not receive shadows from
other objects for example if you know a
ground plane is never going to cast a
shadow you can save a little processing
by not setting the cast shadow flag to
true for it
one feature of three j/s is that you
need to set cast shadow and receive
shadow for every piece of geometry if
you have an object 3d that contains
three meshes you need to set the flags
for each of the meshes setting the flags
on the object 3d itself will do nothing
this is actually a constant struggle in
scene graph systems what wins if I set
an attribute on a parent and on a child
does the child setting win over the
parent or vice versa 3js avoids the
issue by simply not letting the parent
have any say it's tedious to go through
every object and have to set these flags
especially for something such as the
drinking bird happily 3js has a
traversal method you can call that will
walk through an object in all its
descendants children grandchildren and
so on and do whatever you want with them
here's the snippet I use this code sets
the cast and receive shadow flags true
on every object that makes up the
drinking bird it's actually doing a
little bit too much as setting these
flags on objects without meshes doesn't
do anything in other words on parents
here's better code this uses some real
live JavaScript checking if an object
has a mesh if it does then the shadow
flags have meaning for it so we set them
give it a try now turning on shadows for
the spotlight you added to the drinking
bird scene I've kindly set up the cast
and receive shadow flags for the
drinking bird itself but not for the
ground plane I'm also leaving it up to
you to figure out where the various
calls to enable shadowing go for this
exercise I've also added a little sphere
representing the light source in the
scene if you move out you'll see it
hanging in the air
doing this for your lights is a handy
way to get a better sense of where
you're placing them</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>