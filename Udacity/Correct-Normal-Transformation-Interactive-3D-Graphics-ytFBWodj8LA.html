<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Correct Normal Transformation - Interactive 3D Graphics | Coder Coacher - Coaching Coders</title><meta content="Correct Normal Transformation - Interactive 3D Graphics - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Correct Normal Transformation - Interactive 3D Graphics</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ytFBWodj8LA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we have a problem with transforming
normals when using non-uniform scaling
matrices if we tried to transform the
normal with the same scaling matrix used
to transform the vertex coordinates we
ran into the strange situation of
normals getting bent away from their
surfaces how to solve this I'll jump to
the punchline what you want to use to
transform normals is the transpose of
the inverse of the model matrix you
could also use the inverse of the
transpose of the model matrix they're
the same thing either way that's a
mouthful and let me explain let's look
at how this solution applies to each
different kind of transform that we're
used to first of all forget about
translation matrices we're going to be
transforming normals and translation
matrices do not affect vectors in any
way for rotation matrices the transpose
is the inverse the transpose of the
inverse in other words would be the
inverse of the inverse this is starting
to sound a little like Alice in
Wonderland to be a little more clear if
you take the transpose of the inverse of
a rotation matrix you get the same
rotation matrix back this means that for
a matrix made up of any series of
translations and rotations you can use
this same matrix to transform points and
normals this is because the transpose is
the inverse as far as normals are
concerned scaling makes it no longer
true that the transpose is the inverse
so we have to take special steps if the
scaling matrix is uniform in other words
the shape of the object doesn't change
we can get away with just normalizing
the normals after transforming by the
original model matrix for non-uniform
scaling where the shape of the object is
changed we must explicitly compute the
special transpose of the inverse matrix
in order to transform normals correctly
or you can do the inverse of the
transpose I'm not going to explain here
why the transpose of the inverse works
you likely don't want me to talk about
contravariant and covariant vectors see
the additional course materials for more
information if you keep away from
non-uniform scaling matrices you'll
never run into this mismatch and can
merrily use the modeling matrix for both
position and vector transforms if you
never use scales of any sort you won't
even have to renormalize your vectors
the good news is if you use scales of
any sort and 3gs it will correctly
handle normal trans
formation for you it's only when you're
using scales on your own that you can
get pretty weird shading results if you
don't pay attention and you do want to
pay attention as while this is always
the correct answer it's costly to
compute all the time I've seen many a
young programmer led astray by normal
transformation
seriously back in the 1980s before any
book ever mentioned it this problem was
fairly common back then we consulted for
a hardware company who'll remain
nameless writing programs using that are
expensive graphics accelerator and I
mean expensive something like $35,000
the price of a nice BMW back then I
found that the graphics accelerator had
this problem with polygon display
meaning we had to avoid using
non-uniform scales as a modeling
operation the company was more than a
bit dismayed when they found out about
this problem since it's costly to fix
properly</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>