<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How does the OS Implement ACL | Coder Coacher - Coaching Coders</title><meta content="How does the OS Implement ACL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How does the OS Implement ACL</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-ezUo3ASqH0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I won't talk a little bit more about
what happens when you open a file and
how does access control factor input so
process here is making these calls you
were talking about it first opens this
file laughs not specifying the mode here
but maybe this is read this line is
going from user to the operating system
system called you know this is the
boundary between the two this is
untrusted this is trusted as we talked
about so this is all in the operating
system so basically you know the files
are stored on a disk and files that are
actively being accessed the operating
system keeps track of those information
about a particular file is in a file
control block so if you done your
operating systems class you have some
idea of how file systems are implemented
but for each file that we want to access
we in a metadata that we are talking
about for a file you know what's the
file pointer where should we read next
where on disk the file blocks are and
other kind of information we keep track
of that in a file control block in UNIX
world that's called an inode and there's
a table of these that's where this inode
table stores the metadata about the
active or currently open files so this
is here I'm saying it file metadata
table a file that you can open has to be
active if it's not active it it's gonna
get activated so there's something
interesting happens when you open a file
you tell the file name the operating
system actually is going to go and say
is this file currently active if it is
active then there is going to be a file
control block for it okay that's where
the metadata for this file is going to
be so a process also has an other data
structure that's called an open file
table okay this is kept by the operating
system it's a per process data structure
we're talking about
so in this open file table that we have
for this process that is making this
this open call basically what we want to
do in the open call is that we want to
see the file is active if it is then
there is a metadata block or file
control block for it in the Open File
table there's some set of entries that
we have this is a fixed size table we're
going to use one of those entries to
actually store a pointer to this and the
file
scripta we return is actually nothing
but an index into this table so I is the
index in this table that we returning I
think it was about axis check when do we
perform actually in in UNIX based
systems access control is done when you
open the file at the time the file is
opened remember we're going to go in
we're going to find out if the file is
currently active or not we're gonna look
hit its file control block where the
metadata is in particular the ACL is
here to the ACL is here then those 9
bits that I was talking about depending
on the hood the user or what group the
user is fault of I'm actually going to
look at those ACL bits that we were
discussing and if the the mode here is
read and you have read permission I do
all this okay I'm gonna grant you access
mode is right and the write permission
is here I'm going to do all this and
give you write permission and to place
data into this file so access check is
going to happen when during the open
calls execution in the operating system
because we locate this information where
the ACL information is and we're gonna
look that up and if everything checks
out we set this up and return this file
descriptor so the reason we do it at the
time it's it's open is that when you
come to read you specify a file
descriptor so it's gonna say you know
read I hear for example that's what
you're saying
well once I come to the operating system
it's the ayat
that's remember is an index into a table
that tells me it's this particular entry
in the table follow the pointer that it
points to that's where the file metadata
is that tells you where the file data is
I don't do any access check at the time
I do a read or write I just sort of
quickly follow these pointers and get to
the file if I'm doing reads then I find
the file data returned into the book
copy that into the buffer if I'm doing a
write then I copy the data from the
buffer into I'll cache or something like
that it gets copied so there's no check
done during either read call or a right
call the check was done when we did the
open okay so the fact that a descriptor
was returned to you at that time we did
the checking and now you're able to do
that
if we open it for read and you try to do
right of course we're going to stop that
goes without saying but we we don't have
to go look for the the particular do the
traversal that we are talking about</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>