<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Computing Estimates Incrementally | Coder Coacher - Coaching Coders</title><meta content="Computing Estimates Incrementally - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Computing Estimates Incrementally</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DCVoyucPclk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay Charles I'm gonna see if I can get
you to derive a piece of the temporal
difference equation just by working
through this example again in a slightly
different way so from the last thing we
talked about we said that the value
estimate for s1
after three episodes was five and then
we ran an episode and the return of that
episode the sort of the total discounted
reward for that episode episode number
four starting from that state s1 was +2
mm-hmm could we just from this
information figure out what the new
estimate is going to be sure so let's
see if we can do that let's work through
that step by step okay well I can cheat
right by just I mean you have everything
indexed by time so I know that five is
an estimate of the last three and four
is an estimate of the fourth one right
so I should be able to you know wait the
first one with three and the other one
with one or something like that and
that'll give me the right answer all
right so what do you mean by wait so
what you mean is since five is the
average of the first three episodes
mm-hmm then the 15 is the total for the
first three episodes right that's right
I've seen it three times
good it's as if we had seen five three
times oh you know the details actually
varied from that but that's okay because
averages work out nicely
no matter then we got an additional
reward of two and now we want to know
the average over four steps right mm-hmm
so that gives us 15 plus two divided by
four is seventeen over four which is
just the answer that we had in the quiz
in fact it's exactly how I did it I just
took the fifteen that to 15 over three
that you had written down and just said
oh so that would be 17 over for good so
now let's generalize this a little bit
and put in some letters cuz you know
math so let's say instead that we're
talking about the previous estimate
which which was from time t minus 1 then
we get a return on step T of T and now
we want to compute the new estimate V T
of s1 so we should be able to do that
same kind of calculation with these
quantities just symbolically okay so you
want to try that again
sure so I think I know what the the
of s1 is equal to t minus one times V
sub t minus 1 of s 1 plus R so T of s 1
/ T good which was 4 before but now in
general it's T accident all right so
let's now do a little bit of algebra on
this oh sure
so first I'm just going to divide
through by this capital T and split it
into two pieces of the sum okay all
right so then we can regroup things as
follows let's see so I guess mainly the
idea is that we split this t minus 1
over t into a t over t and a minus 1
over t so that gets us the t minus 1 of
s 1 plus 1 over t of RT s 1 minus VT
minus 1 s 1 so I wrote it kind of funky
I introduced this additional learning
rate parameter alpha sub T the learning
rate at time step T but it's really just
playing the role of 1 over T here the
averaging but there's an interesting
thing that popped out of this particular
way of rewriting it in that we are
looking at the kind of a temporal
difference that that our update to the
value is going to equal the difference
between the reward that we got at this
step and the estimate that we had at the
previous step and so this difference is
actually going to drive the learning so
if this if the difference is zero then
things don't change if the difference is
big positive then it goes up and if it's
big negative then it goes down and as we
get more and more and more episodes this
learning rate parameter is getting
smaller and smaller and smaller so we're
making smaller and smaller changes we're
kind of honing in on the actual true
value so this actually looks just like
the update rule for perceptrons yes yes
in fact that was I believe what Sutton
was trying to do he wanted to make
temporal predictions and he wanted to
put it into the same kind of algebraic
framework that people were familiar with
from perceptron learning and from neural
net learning right so if we did that way
then our t minus v sub t minus 1 is the
error very good yeah that's a great way
to look at it that we're making our
update based on moving a little bit in
the direction of there
right moving less and less unless as
time goes on which is just what you're
supposed to do with the learning rate
exactly so let me ask a question along
that line then so one of those lines
then so if alpha sub T was not 1 over T
but something else like I don't know 1
over the square root of T or ana
something some other way of doing the
learning rate uh-huh you would get a
slightly different answer would you
expect at any given time but would you
expect to kind of converge to the same
answer ultimately that is a really good
question in fact that was the next
question that I was going to ask oh wow
I feel better now so here comes</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>