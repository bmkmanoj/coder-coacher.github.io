<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Watching Ping and DNS in tcpdump | Coder Coacher - Coaching Coders</title><meta content="Watching Ping and DNS in tcpdump - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Watching Ping and DNS in tcpdump</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/STbw6SrKeVQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in Lesson one you use the ping tool
to test connectivity between your
machine and another network host but
what's ping actually doing there's a
tool you can use to display quite a bit
of detail about network traffic between
hosts and networks
it's called TCP dump and it's slightly
missed named it can actually look at any
network traffic not just TCP you already
installed it on your machine back in
Lesson one so let's take a look at the
manual for it
oh holy wow that's a lot of options ok
we're going to ignore most to these the
important part is that we need to tell
TCP dump what traffic we want it has its
own little language for this called the
pcap filter syntax you can look at the
pcap - filter man page for more about it
but for now i'll just give you a really
straightforward command to catch traffic
that's going between your host and the
host at 888 so it's going to be sudo TCP
dump - n host eight eight eight eight
now let's run TCP dump over here and run
ping again over here oh hey look
packets now for each ping over here
which there are three we see two packet
records over here two messages appear
from TCP dump one after the other each
one of these records is a description of
one of the packets that ping is sending
over to that machine or one that's
coming back see here's 888 and here's
the IP address of my machine and here it
says that this record is an ICMP echo
request that's a ping request and then
coming back as an echo reply echo
request is message to ping sends an echo
reply is the one coming back
other things agree - for instance the
ping program tells us that it got 64
bytes and sure enough there's length 64
to exit TCP dump will type control C you
can use TCP dump to monitor traffic for
any network application like for
instance if you wanted to see all the
DNS requests your machine sends you'd
need to know what port DNS uses which is
port 53 by the way and then you'd
compose
like this pseudo TCP dump n port 53 then
if you do anything that causes a DNS
lookup like say pinging a machine by
hostname you'd see the DNS traffic like
so if you look closely here's my IP
address and here's the IP address of the
DNS server that I'm using and since I
pained yahoo.com here's an a query or a
request question mark for query for
yahoo.com and then here comes back the
response on the next line with an a
response first IP address Senate being
206 dot 1 9.30 6.45 which is the IP
address that ping is using to ping Yahoo
take a moment to try this yourself
don't worry about all the other bits the
TCP dump prints up but do get a sense of
where the traffic you're looking at is
coming from and going to</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>