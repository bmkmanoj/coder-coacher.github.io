<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>根据列表向布局添加 TextView | Coder Coacher - Coaching Coders</title><meta content="根据列表向布局添加 TextView - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>根据列表向布局添加 TextView</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3mnRtER76c0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now we've written a lot of code and you
must be anxious to see the list of words
start to appear on the screen well
here's a manual way of making that
happen we've mentioned multiple times
that anything you'd write in an XML of
your app we can actually accomplish in
the Java code as well so I could create
a textview object for each element in
this list and then it is a child view to
the current layout so let's try that
approach first off I need to start by
checking out the layout so for the
numbers activity we see that the layout
is defined in the activity underscore
numbers XML file so I'm gonna open up
that file and then I'm gonna change this
relative layout to a linear layout so
every child view that I add to it will
just come one right after another in a
single column additionally I'm gonna add
the orientation attribute to be vertical
now I'm gonna be adding child views
dynamically in Java code and because of
this I should give this linear layout of
UID so that I can reference it in the
Java code later and I'm going to call
that ID root view now let's go back to
the numbers activity so I'm going to be
adding the lines of code to display the
list of words at the end of the oncreate
method and I'm gonna do this after I've
created my ArrayList
I can go ahead and I can go ahead and
delete these log messages because I
already know my list was created
properly so I'm going to close the
project panel on the side so we can see
the code better so what I need to do in
the java code is that first i need to
find the linear layout that i called
route view and store it in a variable
and then i can start creating and adding
text views to this linear layout so to
do so i need to start off by using fine
view by ID method to find the view with
the ID route view and this will return a
view to me but I need to cast it
specifically into a linear layout data
type and I do so so that I can add child
views to it now I'll store this view in
the root view variable so that I can use
it later and remember to end it with a
semicolon
nice so remember this line helps me find
the linear layout called route view
and I'm gonna store it in this variable
called review and remember next I need
to create an add text views to this
linear layout which is created so start
off by creating the text view object so
I'm going to use this constructor which
requires a context as its only input
remember to help us and understand which
constructor to use we can always check
the documentation so here's the
documentation for the text view class
and I'm going to scroll down to the
section about public constructors so
here we see there are a couple of
possible constructors we could have used
and each of them has a different number
of inputs but I'm gonna go ahead and use
this first one which takes in one input
context remember that every time you
create a view in Java code you need a
past in a context so that the view knows
the theme and other information about
the app in which it will be displayed so
it gives it context as to what's going
on around it now in this case we have
this passed in as the input for this
constructor and since this class is the
number activity class this will also be
the context all right so now this line
of code has helped me create a textview
object that is stored in a variable
called word view whose data type is a
textview so to change the text that is
splayed on screen i call the set text
method on the word view object and i
pass in one input which is the desired
text in this case I want the textview to
display the string stored in the words
list at the 0th index and so this should
help us map to the word 1 now that we
have a word view object with the correct
text inside I'm gonna add the view as a
child to the parent view called route
view so this is our child view word view
and this is our parent view route view
so I'm adding the child view word view
using the dot add view method to the
parent view route view all right so
let's run this code in our app and see
what happens all right so now when we go
into the numbers activity nice so we see
the word 1 which was
the zeroth element of our word ArrayList
so what we've done here is dynamically
created a textview in java code based on
the first element in the array list and
at this point you're probably starting
to think of all the possibilities so
what if we repeat this same code for all
the other elements in the list then we
could show a list of words on the screen
so let's give that a try with a couple
more views so I'm gonna copy these three
lines of code that helped us create a
textview for the word one paste it below
and then modify it to help us create a
textview for the word too so it looks
like I'm getting an error here and it
says the variable word view is already
defined in the scope and that means that
you can only define a local variable
once with the same name within the same
scope and the scope what it's referring
to here is the method let's do the help
with that I'll pick a different name and
call it word view too then I'm gonna
update the code below to reflect that
great so now we have a block of code
that creates another textview called
word view - and we add that textview to
the parent view route view oh but wait a
second I want this second textview to
display the next word at the first index
so instead of words get 0 I'll change it
to words that get 1 to get the string
located at the index 1 in the list
so now let's copy and paste that section
and make some modifications to display
the third word in the list all right so
let's give it a test and see what
happens when we run the app on our
device
and hit numbers nice so in the numbers
activity we print out a list of 1 2 and
3 which are the first 3 elements of our
ArrayList all right so we didn't
continue this approach of copy and
pasting and making modifications to the
text view and the indexes but it's gonna
get really tedious and we also need to
style these text views to make them look
better right now it's just plain text
well we might have well just done all
this in XML and just copy and pasted the
XML element over and over and over again
well hang on for a moment in writing
this Java code
do start to see a pattern so notice that
each block of code for each textview is
really similar and the main difference
is that the in exposition is changing
from one block to another so see that
we're incrementing the index from 0 1 2
and so on and so on so I've rewritten
the code based on the pattern we saw so
what if we replace the integer variable
that tracks our current index position
in the list and then just update it by
one each time so notice that these
blocks of code are looking more and more
similar so they all call words get and
they pass in index as the input and we
just have extra code now that increases
the index value by one so now I'm gonna
introduce you to an awesome new
programming concept called loops and
once you learn about loops I'm going to
ask you to fix this code so that you can
display all the words on the screen
without copy and pasting this block of
code over and over again 10 times</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>