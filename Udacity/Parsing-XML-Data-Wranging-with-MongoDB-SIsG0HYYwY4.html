<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Parsing XML - Data Wranging with MongoDB | Coder Coacher - Coaching Coders</title><meta content="Parsing XML - Data Wranging with MongoDB - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Parsing XML - Data Wranging with MongoDB</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SIsG0HYYwY4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">JSON maps almost perfectly on to Python
dictionaries and arrays parsing XML is a
lot more complex so there are several
options to choose from we'll look at
some of the most common I also recommend
that you have a look at the Python XML
page to see what your options are let's
first look at parsing XML into a
document tree the fundamental difference
between this and event-driven or what we
might call sax parsing of XML is that
here we're going to read the entire XML
tree into memory we're going to use the
XML a tree element tree module which is
part of the Python standard library with
element tree we can parse data in a
couple of different ways we can parse it
by filename we can also use the from
string method of the element tree module
to parse xml stored as a string value in
our program as we think about parsing
XML using element trees it makes most
sense for us to work with document
oriented XML data so let's return to the
research article example this dataset
from biomed central is both an excellent
example of xml used to encode documents
and one type of data that data
scientists specifically text mining
folks are likely to use in their work
and extracting the data we need from a
tree we're mostly going to be working
with element objects elements permit us
to iterate over their children for
example here we've parsed our research
article into a tree and then from this
tree we're getting the root element then
we're going to iterate over the children
of that root element and in this case
use the tag attribute to print out the
tag name of each child element so let's
see what this looks like when we run it
ok now let's take a look at that XML
document again to see where these values
come from okay and here we can see that
this is the root element and we are
getting out all of the elements that are
nested immediately within that element
or the direct children of that element
ui ji and FM you can see that those are
coming out here now if we want to
extract the title of an article we can
see that it's found in the bibliography
section of the frontmatter sec
let's see how we might extract that
element tree supports basic XPath
expressions because in data wrangling
were often pulling most of the data out
of an XML document this level of support
is going to be sufficient for many if
not most of our needs returning you the
problem of extracting the title we can
do that as follows so here you can see
that I'm using the fine method on the
root element and I'm using an XPath
expression to specify where I expect to
find a title element dot simply means
start at the current element and then
work your way down into the AFM element
and it's child the bibble or
bibliography element and then finally
into the title element itself note that
this is very much like the way you
specify a path in a URL or in many file
systems now it turns out that in this
data
many of the text elements are actually
wrapped in paragraph tags and we can see
that that's the case actually for the
title here so what I'm gonna do here is
with the title element that I got by
using this XPath expression in this fine
method I'm simply going to iterate over
all of the children of title very
similar syntax to what we saw before
when iterating over all of the children
of route and for each child I'm simply
going to take the text of that child and
concatenate it on with my title text now
so far four elements we've seen two
different attributes the first one was
tag and now we're seeing the text
attribute there are a number of
attributes for elements that are useful
these are two of the most common that
you'll end up using okay and then here
we're simply going to print out the
title so let's go ahead and run this and
then we'll return and take a look at
what this piece of code is doing for us
okay and here we can see that the title
is actually selected and printed out
properly here we're actually printing
out the author email addresses let's
take a look at how we did that in the
code here we're going to use the find
all method instead of the find method
find all we'll return all of the
elements that match this XPath
expression and so we're simply going to
iterate over each one of those elements
and then for each one of those elements
we're going to do a find in order to
locate the email tag so let's go again
then and take a look at the data
okay so my XPath expression gets me this
far down here into the author group and
then for each one of these authors I'm
doing a find for an email element and
I'm selecting the text of that element
here and simply printing it out so again
this selects all of the individual
authors found in the author group that's
part of the bibliography section in the
front matter</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>