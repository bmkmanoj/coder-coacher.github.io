<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Load Linked Store Conditional - Georgia Tech - HPCA: Part 5 | Coder Coacher - Coaching Coders</title><meta content="Load Linked Store Conditional - Georgia Tech - HPCA: Part 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Load Linked Store Conditional - Georgia Tech - HPCA: Part 5</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fuHwmyZXnPA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's look at the load-linked store
conditional instructions which usually
we call ll and SC instruction we have
them because atomic reading and writing
in the same instruction even if we just
do the right if the read has tested
positive for something it's really bad
for pipelining or processor let's look
at the classical five stage pipeline
where we fetch decode and read registers
do the early operation this is where we
compute the address for memory
instructions then we have a memory
access stage and finally we write the
result to a register if a register
result exists in instruction loads would
be fetched decoded and read the register
compute the address using that register
access memory to get the value from that
address and then write the result to a
register an atomic read write
instruction such as a swap or test and
set or test and write would compute the
address and read registers and then when
it gets to the memory stage it cannot do
everything it needs to do in one access
to memory because loads and stores do
either a read or a write a read write
instruction needs to do both and that
cannot be done in the same cycle for the
same memory location without really
complicating the memory stage a lot so
just for the sake of atomic read write
instructions we would need to add memory
to stage possibly memory tree so that
they can read the memory do some
checking and then I finally write the
memory so we would be adding to our
pipeline several stages possibly just
for these instructions but remember that
every instruction flows through the
pipeline the same way so if we add these
two stages for these instructions we
really have added two stages for all
instructions which is not very good
because these are actually not going to
execute that frequently to justify this
so we will separate the atomic read and
write into two instructions the first
will be a load linked instruction each
purpose is to implement the read part of
the atomic operation what it does is it
behaves just like a normal load it just
reads from a memory location and puts
the value in a register but in addition
to that
it saves the address from which it
loaded into a special link register so
that's the only thing that it does that
is different from a normal load the
store instruction that we will use to
implement the right part of the atomic
read/write operation is called a store
conditional what it does is to check
first if the address that it computes is
the same as the one in the link register
if the address is the same then it
doesn't normal store to that memory
location and returns a 1 in its register
if the address that the store computes
is not the same as the one in the link
register then it just returns 0 in the
register without storing anything these
two are behaving like a single atomic
operation because of the link registers
so let's see in more detail how that
works</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>