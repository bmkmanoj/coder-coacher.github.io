<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Checkrep - Software Testing | Coder Coacher - Coaching Coders</title><meta content="Checkrep - Software Testing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Checkrep - Software Testing</b></h2><h5 class="post__date">2012-06-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dL08kDGylks" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so here we are looking at the cue
code from unit 1 and what we're gonna do
is try to figure out what kind of
assertions we can add to this cue code
that would make it more robust with
respect to mistakes so we go through the
code and this is the same code we looked
at and what you can see is at the end
I've added the checkrep function and
what checkrep is is a function that
stands for check representation and this
is a function that we commonly add to a
data structure or to other functions
that checks the variables in the program
for self-consistency that's what's gonna
do is basically trying to terminate the
program if some invariant the we know
should hold over the program's data
structures fails to hold what I first
want to do though is run this program
and when I run it what's going to happen
is some testing code that I haven't
shown you is going to create a queue and
call its methods in a loop and it's
going to look at the output of the queue
and try to find any mistakes so the test
function has a test Oracle built into it
that I wrote that's going to try to see
if our test is see if our queue is
correct so we hope is that it's correct
and also we know that the check wrap is
going to succeed because it contains no
assertions right now so let's run okay
so now that we've seen that our queue
passes the test harness let's see if we
can harden up the queue a little bit by
thinking of a good assertion to add to
it and so I think that the first
assertion that we're going to add is
going to be over the size variable and
if you recall from earlier the size
variable tracks the number of elements
currently in the queue so let's go ahead
and add an assertion about the size so
one thing we know about the size
variable is it should never be negative
because we can can't possibly ever have
a negative number of elements in the
queue so let's assert that self dot size
is greater than equal to zero and the
other thing we can assert about self dot
size is that it never exceeds softmax
which is the constant variable which
counts the most elements that could ever
be in our queue so here we're sorting
self dot size is now non-negative and
doesn't exceed self dot Max and so now
when I run the test harness again we're
going to again check the queue for
functional correctness and also call the
checkrep so let's see what happens so it
printed a finished over the old finished
and so so that's good okay so so that
invariant was good so what I want to do
next is I'm going to break our queue so
I'm going to break our queue by making
the in queue fail to properly reset the
tail variable when it overflows so what
we have here is logic
that when self-taught ale is equal to
self-taught max we reset it back to zero
I'm gonna set it to one instead so let's
see what happens when we run the queue
now so it failed and what it did is it
failed in an assertion inside the test
harness this is in my test function down
here on line 90 see we only have 40
lines of this code so way below is my
test function and we failed there so
what this means is we've messed with our
data structure in such a way that it
actually returns a wrong result so this
is a this is a result not being able to
the expected result assertion and so
we've done is we've created a data
structure that's broken and when it
returns wrong results this is going to
be deeply buried in some program that we
care about so it's going to return the
wrong results to some deeply buried part
of the program and probably that program
is going to keep running for a while and
it's gonna start do very bad things it's
going to lose track of webpages or it's
going to start to do other things that
we don't like and so what we want is to
write a tighter set of assertions for
our cue so that our checkrep can catch
this before we actually return the wrong
thing to the user and so this is your
API quiz your API quiz is write an
assertion that goes under mine in the
check wrap which catches the bug in the
queue before it can actually misbehave
the trick you're gonna have to do is
since our buggy code sets off that a
loved one that's in range
so another invariant besides settings
saying self dot size is between 0 and
and self Max include inclusive is we
could have asserted the same things for
self dot head and self dot tail but the
bug here is not going to violate those
particular checks rather what's going to
violate is a relative check between the
values of head tail and size and so
that's what you should be thinking about
to add your assertion here and so what I
want you to do is come up with the
correct data structure invariant to
assert here so that that assertion fails
when we run our cue tester before we
actually return a wrong result and
additionally what we're going to do is
we're going to check your assertion
against a correct version of the queue
so we're going to take your check wreck
code and put it in a correct version of
the queue and check that it doesn't fail
spurious lis so we want to do is you
have another we want you to do is right
in the certian that's tight enough that
it catches the error that we've
introduced here but not so tight that it
always fails
okay I hope you have fun with this</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>