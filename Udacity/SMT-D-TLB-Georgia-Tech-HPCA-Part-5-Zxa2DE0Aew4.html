<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>SMT, D$, TLB - Georgia Tech - HPCA: Part 5 | Coder Coacher - Coaching Coders</title><meta content="SMT, D$, TLB - Georgia Tech - HPCA: Part 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>SMT, D$, TLB - Georgia Tech - HPCA: Part 5</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Zxa2DE0Aew4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now let's look at the relationship
between smt data cache in TLB if we have
a virtual indexed virtually tagged cache
then we simply send the virtual address
into the cache and use the data that
comes out of the cash so with virtual
index virtually tagged cache is the
problem is that our two threads might
have different address spaces and now we
are sending them simultaneously to the
cash the cash is no clue which one of
the two it's getting so unless we make
something really complicated here to
figure out which is which we will have
some aliasing between the two threads
note that normally with the givt cash
when we switch between threads in a
coarse grain we would flush the cache
between that but now that the two
threads can pretty much every cycle
you're getting one or the other we
cannot flush the cache in between those
so with the virtual index virtually tag
cache we are running a real risk of
getting the wrong data because the same
address in the two threads that are
accessing the cash pretty much
alternatingly in a very haphazard way
might map to different physical
addresses but the data cache doesn't
know that so one thread saves data to
each stack another one pops data from
each stack and if they are at the same
virtual address we get the data
forwarded from one tree to the other
which we didn't want if we use a virtual
index physically tagged cache that
avoids aliasing then we are fine we will
find the set in the cash and the
physical tags that come out will be
compared with those from the TLB so
assuming that the TLB does what it's
supposed to do we will have the same
virtual address from the two threads
look up the same set but find different
data based on the physical address in
that red however that assumes that when
we use the virtual address to access the
TLB it doesn't look at just the page
number in the virtual address because
the two threads could have the same page
number translate two different things so
for virtual index physically tagged or
physical index physically tagged caches
the cash is just fine but the TLB must
be thread aware that can be done by
adding a single bit to each entry that
tells us which
of the two threads is this mapping for
in that way indexing into the TLB with
the virtual address we'll find a set in
the TLB that has multiple entries and we
will only be looking at entries that
both match our virtual page number and
also match at red ID so we will now send
the page number and also the thread ID
here and the TLB needs to match both
before it treats this as a TLD hit and
produces the physical address here</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>