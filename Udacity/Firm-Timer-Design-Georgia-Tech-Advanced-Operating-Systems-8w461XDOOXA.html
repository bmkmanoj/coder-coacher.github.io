<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Firm Timer Design - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="Firm Timer Design - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Firm Timer Design - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8w461XDOOXA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">the fundamental idea behind the firm
timer design is to provide accurate
timing with very low overhead and what
it does
it combines the good points of the
one-shot timer and the soft climbers as
I mentioned the one-shot timer its
virtue is the fact that we can have the
timer interrupts happen exactly at the
time that we want in other words we get
rid of the timer inaccuracy that we
mentioned earlier that plagues normal
timer design in general purpose
operating systems the con that we said
with the one-shot timer is that there is
overhead associated with processing one
shot timer events as well as
reprogramming them so for that reason
what they do in TS Linux with the firm
timer design is to have a knob which is
called the overshoot knob and the idea
is the one-shot timer expired here this
is the point at which the event happened
but what we going to do is we're gonna
have a parameter associated with the
one-shot timer called the overshoot
parameter and what that overshoot
parameter is allowing you to do is even
though this is the point at which the
event happened the one-shot timer is
programmed to go off at this point so
there is a distance between the actual
event happening and the point at which
the one-shot timer has been programmed
to interrupt the CPU this is the
overshoot parameter you may wonder what
is the advantage of this overshoot
parameter well within this overshoot
parameter window there could be a system
call which is a soft interrupt we
mentioned that applications typically
make system calls or there could be an
external interrupt any of those things
can bring you into the kernel and so you
may be already in the kernel at this
point during this overshoot window so
what we can do now is we'll dispatch the
expired timers at this point of time and
also we will reprogram the one-shot
timer that expired for the next time
that
we need the one shot timer to interrupt
normally the one shot timer would have
gone off here because this is the
overshoot window but even before that
since the system call happened at this
point we're going to see that oh there
is a one shot timer that is already
expired it's gonna interrupt me not in
the too distant future - of dispatch
that expired timer right now and
reprogram that one-shot timer so that it
is now ready for the next one shot timer
interrupts the upshot of doing this
dispatching the expired timer at the
point of the system call that is
happening within this over should window
is that at the point at which this
one-shot timer has been programmed
interrupts that is gone it will not
cause an intro because we've
reprogrammed this one-shot timer to
interrupt at the next one shot timer
expiry event because whatever action
there needed to be taken with respect to
this particular one-shot timer
expiration has already been taken at
this point and therefore at this point
we will not get another interrupt so we
have saved on the one-shot timer
interrupts that would have happened at
this point of time by combining the hard
and soft timer in this manner I
mentioned that fielding a one-shot timer
interrupt is expensive we avoided that
because fielding that interrupts
happened as part of handling the system
call and at this point itself we've
reprogrammed the one-shot timer for the
next event as well so you can see that
the firm timer design combines the good
points of both the one-shot timer as
well as the soft timer it is giving us
the accuracy that we want from the
one-shot timer but at the same time we
are avoiding the overhead associated
with one-shot timer by processing that
interrupts using this overshoot
parameter of course with within this
overshoot parameter there is no system
call or external interrupt that brings
us into the kernel then we will have
this one-shot timer going off at this
point but the hope is that by choosing
this knob appropriately between hard and
soft timers
we can make sure that we reduce the
number of times we get the one shot
timer interrupts actually occurring</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>