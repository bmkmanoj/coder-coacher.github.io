<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Desenho V3 | Coder Coacher - Coaching Coders</title><meta content="Desenho V3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Desenho V3</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/o1pljwdLuzI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we'll focus on the drawing library so we
can fulfill OJ's business need will load
the drawing library in the library's
parameter after loading the library will
need to tell the map that we plan to
draw all over it so we'll create a new
object called the drawing manager in our
initialize function this allows us to
specify multiple drawing modes and the
position of the controls on the map I'm
copying this right from our developer
site linked in the notes at first we
aren't going to set the map on the
drawing manager so essentially we're
initializing it but we aren't going to
have it appear right away we're telling
it that our default drawing mode and our
only drawing mode is going to be polygon
other drawing modes are rectangle circle
polyline and marker these requires
slightly different handling than a
polygon but polygons are the hardest so
if you can do this one you can do
anything next we'll create a button to
allow the user to toggle the drawing
tools on and off we'll call it toggle
drawing and will prompt the user to use
it will also add in some more CSS next
we'll add an event listener so that when
this button is clicked the drawing tools
are either hidden or shown will create a
toggle drawing function for that and
passing the drawing manager that we
created in the initialize function with
this function we're essentially saying
that when the user clicks on toggle
drawing check the map property on the
drawing manager if it's map set it to
null or hide the drawing manager or set
it to map or show the drawing manager ok
cool now we can create geometric
overlays on our map so this still begs
the question how do I actually use this
to search within it for listings back to
the code the next order of business is
to add an event listener so that when a
polygon is drawn on the map we capture
those points into a polygon and use them
I'm going to create a global polygon
variable which is changed every time a
user draws a new polygon next we'll add
the event listener the goal of this
event listener is that when the polygon
is complete we're going to iterate
through our markers array show all of
the markers that are within
the shape and hide all the markers that
are outside of it the first thing we're
going to do is check on our polygon
variable to see if it already has a
value if it does we're going to hide it
off the map by doing this we're limiting
the user to one polygon at a time we
could certainly allow multiple to let
them select different zones for a better
user experience we're going to assume
that the users done drawing when the
polygon is completed and switch the
pointer back to normal so that they can
click on the markers after they see them
then we'll capture the overlay which was
drawn and assign it to our polygon
variable we want the polygon to be
editable so we'll set this to true we
could make it draggable as well and
finally we'll call our search within
polygon function which will create below
we also want to make sure that the
search is redone if the polygon is
edited so we'll add more event listeners
on the polygon itself checking for
changes and re executing the search
let's create our search within polygon
function this function uses the polygon
that was drawn by the user and the
markers position and uses more geometry
library functionality to check to see if
the polygon contains the marker if it
does we'll set the map property to map
on each marker which shows it and if it
doesn't we'll set it to null which hides
it this is going to result in only the
markers that are within the polygon
showing on the map finally we'll add a
little bit more into our toggle drawing
function when the user is done drawing
and turns off the drawing tools will
assume that they don't want to see their
polygons anymore so we'll remove the
overlay but we'll keep the marker as
that appeared so let's test this out I'm
going to turn on the drawing tools and
draw a quick polygon there we go if the
user wants to limit the search to one or
two city blocks we'll see the listing
fair if they then decide to redraw the
shape the search will be reacts acute it
if I then turn off the drawing tools the
shape will disappear but my markers will
remain never fear aw Jay you can do with
however you want with the Google Maps
API is thanks for that Emily I would
feel better but I just realized that we
keep using let lungs and none of our
students would
the coordinates of the places they want
to use also I'm hungry you're right we
better teach them about geocoding after
the next quiz and here thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>