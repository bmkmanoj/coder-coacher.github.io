<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>VM Oblivious Page Sharing - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="VM Oblivious Page Sharing - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>VM Oblivious Page Sharing - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/drrx9FOLHNo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">an alternative is to achieve the same
effect but completely oblivious to the
guest operating system and this is used
in VMware ESX server the idea is to use
content based sharing and in order to
support that VMware has a data structure
which is a hash table kept in the
hypervisor and this hash table data
structure contains a content hash of the
Machine pages so for instance this entry
is saying that for virtual machine
number three for its physical page which
is at this address for three f8 there is
a machine page that hosts this physical
page number of VM 3 and that's contained
in Machine page number 1 2 3 B and the
content hash that is if it hash the
contents of this memory page you get a
signature that signature is the content
hash that content hash is stored in this
data structure now let's see how this
data structure is used for doing VM
oblivious page sharing in the ESX server
we want to know if there is some page in
vm 2 which is content why is the same as
this page contained in VM three in
particular we want to know if this
physical page number PPN 2 8 6 8 of vm 2
which is mapped to this machine page 1 0
9 6 its content y is the same as this
guy so how do we find that out what we
do is we take the contents of this
machine page 1 0 9 6 create a conference
hash so that's the content hash that
we're going to generate a particular
algorithm that the hypervisor is going
to run to create a Content hash so we
clear a content hash for this page 1 0 9
6 that corresponds to PPN 2 8 6 8 of vm
2 now we take this content hash
and look through hypervisors data
structure to see if there is a match
between this content hash that I created
for this page and any page currently in
the machine memory well we have a match
we have a match between the content hash
for this page and the content hash of
the page contained in VM 343 f8 which is
mapped to MPN 1 2 3 b so now we've got
this match can we know that this page
and the spades are exactly the same well
we cannot it's only a hint at this point
that this pages content hash is the same
as this because this content hash for 1
2 3 B was taken at some point of time
and we created this data structure to
represent this as a hint frame which has
a particular content hash now vm3 could
have been using this page actively and
modified it and if it has modified it
then this content hash that we have in
this data structure may no longer be
valid and therefore even though we got a
match it's only a hint not an absolute
it's only a hint so once we have a match
then we want to do a full comparison
between these two guys make sure that
these two guys are exactly the same full
comparison upon match</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>