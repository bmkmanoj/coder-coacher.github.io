<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Thread Divergence - Intro to Parallel Programming | Coder Coacher - Coaching Coders</title><meta content="Thread Divergence - Intro to Parallel Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Thread Divergence - Intro to Parallel Programming</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8NiigEw_UIE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you can also encounter thread divergence
due to loops here's the somewhat
contrived example we have some pre loop
code and our kernel all the threads are
going to do this code and then they're
going to reach this for loop and the way
I've constructed it is they're going to
go to this loop a number of times equal
to their thread index so thread 0 will
execute this code once thread 1 will
execute it twice
thread to the execute of 3 times and so
on and then eventually they're all gonna
exit the loop and proceed and do some
post loop stuff so what does this look
like so here's a bunch of threads and
they're all on the same thread block
I've just color code them so you can see
what they do more easily and they're all
gonna be executing this pre loop code
and they're gonna reach the loop so
thread 0 it's gonna proceed and do this
loop code and they just keep going red
wine is gonna execute the loop code and
the next cute again and keep going red 2
likes to keep the loop code again and
again and keep going and thread 3 will
execute the loop code 4 times so if we
think about these threads a little
differently in terms of what they're
doing over time the first thread is
executing the pre loop code then it goes
ahead and execute the loop code and then
it really just kind of sits around ok
doesn't have anything to do for a while
because in the meantime thread 1 has
been executing the pre loop code and in
the loop code and then executes the loop
code again the third thread executes the
pre loop code the loop code the loop
code and execute the loop code again and
the final thread executes the pre loop
code and then executes the loop code
four times and finally all the threads
can go ahead and proceed with the post
loop code this diagram when you draw it
like this kind of gives you a sense of
why loop divergence is a bad thing why
it slows you down because it turns out
that the hardware likes to run these
threads together and as long as they're
doing the same thing as long as they're
executing the same code then it has the
ability to do that but in this case the
blue thread proceeds for a while and
then because it's not gonna do the loop
again it just ends up waiting around
while the other threads do so and the
red thread waits for a little while the
green thread waits a little bit and only
the purple thread was executing at full
efficiency the whole time and so you can
imagine that if the hardware gets some
efficiency out of running all four of
these threads at the same time then that
efficiency has been lost during
portion of the loop</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>