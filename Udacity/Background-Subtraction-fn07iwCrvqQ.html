<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Background Subtraction | Coder Coacher - Coaching Coders</title><meta content="Background Subtraction - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Background Subtraction</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fn07iwCrvqQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">How do you do background subtraction?
Not so complicated.
You have to estimate the background.
So at some time t, you remember doing x,
image of x, y, and t.
I have to estimate the background,
and then
I'm going to subtract that background
from whatever the current frame is.
And wherever the difference is,
big enough I'm going to call that
my foreground mask, okay, and
it's an absolute difference because
the background could be brighter than
the thing that's moving or
it could be darker.
Here's an example, sort of notionally,
so here again same image, right.
And this is my estimated background,
we'll talk a little bit later about how
you might get such
a beautiful background.
And the idea would be to
take your current image,
subtract off the background,
take the absolute value,
and anywhere that it's bigger than
the threshold, just output that.
All right, fine.
But of course the question is, what's
a good estimate of the background?
There's a form of background
subtraction, which isn't really
background subtraction at all, and
it's referred to as frame differencing.
Frame differencing is
exactly what you might think.
I'm going to assume that the background
is whatever was in the picture
just before.
Okay?
I'm just going to compare
the current image to the last image.
All right?
And, background subtraction becomes,
then, I of x,y, and
t minus I of x,y and t minus 1.
And if that value is greater
than some threshold,
I'll output that as my foreground mask.
Okay?
So here again, two examples.
So here's I of x, y, t.
Here's this van here.
And van has moved a little bit.
Let's see, which one's easiest to see
that something has actually changed?
Oh, here.
So you see that this car is
moving forward that way, and it's now,
it's now moved past this line.
But at time t minus 1,
it was even with that line.
Same thing that this
van is moving forward.
In fact, pay attention to
this white van there, okay?
I'm going to subtract from this
image that background image,
and then I'm going to take a look
at different thresholds, right?
Even before we look at the results,
you can just think a little bit
about how well will this work.
Well, clearly this is going to depend
upon sort of what the objects look like,
how fast they're moving, what
the frame rate is the threshold, so,
you know, sometimes this is good.
And then the slide that took,
you know, [LAUGH] it says usually not.
Well, and this can be shown here,
all right?
So if I take different thresholds, so
here's threshold of 25, of 50, of 100,
and you can see, you know, for this
illumination, I don't know, somewhere,
a threshold somewhere between 50 and
100 seems to be going pretty well.
You remember that white
van that I told you about?
Okay, well that's right there.
Okay, so you can see the front of the
van, you can see the back of the van,
but there's a big hole eaten
out the middle of the van.
What happened there?
Well, duh the top of the van is just
white, all right it's just plain white.
So the van tops here and
then in the next frame it's moved there.
So the part where the van was and
now you can see the road behind it,
that's a difference.
And the part that was road,
or the windshield, and
now the top of the van there,
you can see that, that's a difference.
But, the middle of the top
of that van is white,
and then if I move it,
what does it stay?
White, so
I don't get much of a difference.
Okay, so this is a problem with,
with frame differencing,
is that large areas even as they move.
They can move relatively quickly,
but if you have large,
constant, intensity areas, you know
that's just not going to work very well.
So, what's a better idea?</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>