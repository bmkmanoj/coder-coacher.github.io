<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Context Switch | Coder Coacher - Coaching Coders</title><meta content="Context Switch - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Context Switch</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lS1GOdXFLJo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Recall our illustration that shows how the operating system swaps between P1 and
P2 for them to share the CPU.
In this illustration, the process control blocks for P1 and P2 reside in memory.
And the values of the CPU will change depending on which process is
currently executing.
Now we can more formally state that a context switch is the mechanism used by
the operating system to switch the execution from the context of
one process to the context of another process.
In our diagram, this is happening both when the operating system switches from
the execution of P1 to the execution of P2.
And then again a second time when the OS switches from the execution of P2
back to the execution of P1.
This operation can be expensive, and that's for two reasons.
First, there are direct costs, and this is basically the number of
cycles that have to be executed to simply load and
store all the values of the process control blocks to and from memory.
There are also indirect costs.
When process 1 is running on the CPU,
a lot of its data is going to be stored into the processor cache.
As long as P1 is executing, a lot of its data is likely going to
be present somewhere in the processor cache hierarchy.
In the picture, we show a single processor cache, but in practice, modern CPUs
have a hierarchy of caches from L1 to L2, down to the last level cache.
And each one is larger, but potentially slower than the previous one.
More importantly, however, accessing this cache is much,
much faster than accessing the memory.
For instance, the accesses along the processor cache hierarchy will be on
the order of cycles, whereas the accesses to memory will be on
the order of hundreds of cycles, for instance.
When the data we need is present in the cache, in this case,
that's P1's data, we call this that the cache is hot.
But when we context switch to P2, some, or even all, of the data belonging
to P1 in the cache will be replaced to make room for the data needed by P2.
So, the next time P1 is scheduled to execute, its data will not be in the cache.
It will have to spend much more time to read data from memory,
so it will incur cache misses.
We call this the cold cache.
Running with a cold cache is clearly bad because every single
data access requires much longer latency to memory and
it slows down the execution of the process.
As a result, we clearly want to limit the frequency with
which content switching is done.</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>