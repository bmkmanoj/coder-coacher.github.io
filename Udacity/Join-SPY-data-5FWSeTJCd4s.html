<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Join SPY data | Coder Coacher - Coaching Coders</title><meta content="Join SPY data - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Join SPY data</b></h2><h5 class="post__date">2015-07-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5FWSeTJCd4s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">continuing on let's read the CSV file
for SP y in DFS py a temporary data
frame the next step is the heart of
building the final data frame we combine
the empty data frame DF 1 with the
temporary data frame DF SP why we use
the join function of the data frame for
this purpose let's do it
data frame dot join does a left joint by
default so if we write a dot joint B it
will retain all the rows from a but only
those rows from B whose index values are
present in ace index for the remaining
rows that is the index values not
present in B pandas introduce Nance so
in this case all the rows from the DF 1
will be retained and we will get all the
values for the prizes from DF s py for
the given range we defined about so in
our case all the rows from the DF 1
would be retained and only those rows of
DF s py which is present in DF 1 will be
retained this will give us all the
prizes for the stock s py in the defined
date range let's use print DF 1 after
the join step to make it clear you
should expect to see all the values of s
py for the given dates observe the
output we did not get any values from
the DF s py what do you think what could
be the reason let's print DF s py to
investigate commenting out the join
lines so let's see what DF s py has we
told pandas to join DF 1 and DF s py but
DF s py has an index of integers which
is not the same as the dates index that
DF 1 uses we fix this by informing the
read CSV function that the date column
in the CSV file should be used as index
we do this by using the index called
parameter make sure you give the correct
column name we also want the date
present in the data frame to be
converted into date time index objects
this can be done by setting the value
for the parse dates parameter to true
let's see if this works notice that the
date column is now being used as the
index there is no separate integer index
on the left now let's see what the
resulting joint data frame looks like by
uncommenting these lines but before that
let's add some more parameters to the
read CSV function note that we are
interested in just two columns which is
the date and adjusted close we can get
rid of the other columns by using the
use called parameter of the read CSV we
pass a list of column name we are
interested in which are date and
adjusted close now let's see what's
there in DF 1 you see now we have just
the adjusted close for the s py for a
given date range also observe that
weekend dates have non-value before we
go ahead let's understand that CSV has
nan a string so we need to tell the read
CSV that nan should be interpret as not
a number this is how you indicate it one
last step we just want the dates on
which s py traded so we can add more
stocks based on these dates let's drop
the rows where s py is nan for this we
use the drop knee function DF 1 dot drop
now we'll drop all the rows which has
nan values for the s py let's go ahead
and print this now we have built a clean
data frame filled with s py data using a
selected date range and keeping only the
dates that s py traded on</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>