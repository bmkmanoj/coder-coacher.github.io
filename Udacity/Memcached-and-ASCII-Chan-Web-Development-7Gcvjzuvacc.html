<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Memcached and ASCII Chan - Web Development | Coder Coacher - Coaching Coders</title><meta content="Memcached and ASCII Chan - Web Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Memcached and ASCII Chan - Web Development</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7Gcvjzuvacc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay the next thing we're going to do is
add let's replace our dictionary cash in
ASCII Chan with LEM cashed okay here we
are in ASCII Chan fortunately memcache
is there's a there's a version built
into the App Engine that you run on your
local machine so you can develop against
it and then when you deploy your machine
on App Engine google has memcached
already spread out for you across many
machines and you don't have to deal with
it so that's a very nice convenience
first what we do is we import it which
is just it's in the google app engine
API memcache so we do that and now let's
replace our dictionary cash with
memcached which should be pretty
straightforward since the two behave
very similarly okay the first thing we
can get rid of is this cache line we
don't need that anymore so we got rid of
our cache dictionary let's use the
memcache library now now this is this
syntax here key in cash and all this
stuff is specific to Python dictionaries
so we need to get rid of that instead
let's try to look the arts up out of
memcache so it's going to be our x
equals memcache like get key now in
memcache in the official protocol both
keys and values need to be strings in
this library values can be Python data
types and in the memcache library that
Google provides will convert your Python
data type into a string and then when
you fetch the data out of the cash it'll
convert it back into your Python data
type so we can still store our art
objects directly in the cache but the
keys need to be strings and so we're
going to use top as our key now we're
going to change this if statement a
little bit because now we just looked up
arts out of a memcache and if it's not
in the cache arts will be none so let's
structure this like so if arts is none
or update run the query and we don't
need that other line now so the query
doesn't change we need to change this
line to set the key in the cache which
is this memcache that's set key arts and
that should do it ok so let's go ahead
and try this out on our browser we were
in our page now if I reload this page
and go to our terminal and we can see
that we ran a DB query on our get
request and if we were to run another if
we were to reload that page again I
reloaded it you would see that we don't
do a DB queer
pretty cool huh I would like to show you
something I built in the App Engine is
an admit tool if you're running app
engine you can go to underscore aah /
admin / memcache and you can actually
view the memcache thing if I reload this
page it says that we have one item in
our cash and if I were to click flush
cash we can actually clear the cache and
if i were to reload this page and then
check out our console we can see that we
ran a database query again and if i go
back to our page here and reload it we
can see that we have one item in our
cash because we just loaded this is kind
of neat you can type in a key here and
click display and it will show you the
value in that cache and in this case it
says top is pickled pickled is the
python library Finke River for
converting a Python object into a string
and then the Google memcache library is
automatically doing that for us so yeah
pretty neat handy tool here if you want
to test your caching you can sit here
and flush it and you can see how many
items are in the cache and manipulate it
that way so anyway that's how you
implement add memcache to your app once
you understand the algorithm for caching
you know check the cash return the value
hit the DB that sort of thing using
memcache tis a cinch</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>