<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>修正数据类型 | Coder Coacher - Coaching Coders</title><meta content="修正数据类型 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>修正数据类型</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7NSYtdVrlRE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now one thing that looks a little funny
about this data is that every value is a
string but days to cancel looks like
logically it should be an integer cancel
day is clearly a date and is canceled
looks like a boolean but they're all
represented as strings that's because
the CSV library doesn't try to detect
what type each column has it's up to me
to convert these data types if I want I
could wait and convert them later when I
really need to for example every time I
need to check whether is canceled is
true I could use the code if is canceled
is equal to the string true rather than
the simpler if is canceled that I could
use if I had a boolean however I prefer
to update all my data types up front
because otherwise I tend to forget that
they're not the type I expect and then I
waste time debugging later I've written
some code for you which you can find in
your starter notebook which updates a
bunch of the types here you can see the
main loop that's updating the types of
the enrollments data
I didn't update the type of account key
because even though the account key
looked like an integer I'm never going
to do arithmetic with it I'm not going
to add up to it count keys for example
so the types might as well remain a
string I did convert the cancel date to
a Python date/time object and I wrote
this function to do that for me first I
check whether the day is actually the
empty string in which case I return none
for example the cancel date could be an
empty string if the student hadn't
cancelled yet otherwise I use the stur P
time function to parse the string as a
date time don't worry if you've never
seen the star P time function I'm going
to take care of the date time handling
for you in this lesson similarly for the
days to cancel function I've written a
function called parse maybe int this
function takes something that might be
an integer but might not be for days to
cancel it might not be an integer if the
student hasn't cancelled yet if the
argument is the empty string this
function will return none and otherwise
it will cast the argument to an integer
then for the is canceled column I check
if the value is equal to the string true
so this comparison will return the
boolean true if the field is equal to
the string true and false otherwise the
rest of the conversions are similar the
only other thing that's a bit strange is
in the day
engagement table where you can see that
a few times I've cast the number to a
float first and then an int to see why
I'm going to scroll up and see what the
lessons completed value looked like the
first value for lessons completed was
zero point zero because of the decimal
point directly converting this string to
an integer would fail but logically I
know lessons completed should be an
integer since if you only complete half
a lesson he'll be marked as completing
zero lessons not zero point five so once
I've converted the value to a floating
point number
I then convert it to an integer I've
done the same thing for a number of
courses visited and projects completed
this code is included in the starter
notebook once you have everything set up
locally you should make sure you run
each of these cells that way you'll have
the correct types throughout the rest of
the lesson in general make sure you run
all the provided starter code or some
later codes may not work correctly</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>