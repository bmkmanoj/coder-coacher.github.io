<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android TV - Search | Coder Coacher - Coaching Coders</title><meta content="Android TV - Search - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android TV - Search</b></h2><h5 class="post__date">2015-07-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DgfvQ-Ge-Wk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">search is a big part of Android TV let's
see it in action cat videos neat right
you can use search to expose content
from your app so users can get to it
straight from the home screen here's how
search works Android TV shows search
results from google as well as locally
installed searchable apps to make our
appt searchable we implement a content
provider to provide search results for a
query android TV combines these results
into a search results page users now
have one click access to launch content
you return using a pending intent you
provide for this to work we'll have to
map our data into a cursor format that's
expected by the system if you've
previously worked with search on Android
for example on a mobile device then you
should know that android TV uses exactly
the same search interface that you might
have already built for another form
factor in this section I'll describe the
key steps involved and you can check out
the instructor notes for more detail
before we go any further we should talk
about privacy protecting user privacy is
key and many users consider their
activities on TV including searches to
be private information here are two tips
never send personal information over the
network for example if a user is
searching for a pizza restaurant near
them you don't need to send their user
ID to the server along with their zip
code now in the rare case that you have
to send personal info you should never
log it and if for some reason you do
have to log it then you should protect
that data extremely carefully and erase
it as soon as possible also be sure to
provide users with an easy way to clear
their search history the first step is
to define an activity to respond to the
search request here we are inside our
manifest the first step will be to
define an activity that will be launched
when the user selects one of our results
from the TV home screen we declare this
activity to accept the action search
intent using this intent filter we also
have to specify the search configuration
to use using this metadata element and
this XML you can find this data inside
of searchable XML and see the instructor
notes for a description of the fields
now when our movie details activities
launched we need to resolve the search
data and display the corresponding movie
you can see how we do that inside the
check global search intent method here
we check to see if the intent action
corresponds to global search and if so
we pull the selected movie idea of the
intent
next we need to define a content
provider which returned search results
to the android TV search dialog we only
need to implement a part of it and all
the necessary columns are already
defined by the SDK and you can find a
step-by-step guide for building a
content provider in the instructor notes
or the Android fundamentals course first
let's define a content provider in the
manifest here we'll use the video
content provider also make sure that
exported is set to true so Android TV
global search can use the results you
should see the instructor notes for more
info about securing your content
provider here we are inside our video
content provider and the first step is
to implement the query method now
usually this takes five arguments our
provider though only needs to provide
search results and the only argument we
need to handle is selection args this
contains the search terms from the user
because of the way we configured our
searchable XML it will only contain a
single element which represents the
entire search string the last thing we
need to do to finish our search provider
is to pack the search results into the
cursor format that's expected by Android
TV the data fields expected are
represented as columns of a sequel like
database and regardless of your data's
original format you must map your data
fields to these columns you can find a
description of all of these in the
instructor notes to polish your search
results you can also add a watch action
link as you can see here this search
result actually came from google but
when a user clicks this button it will
launch your app in order for this to
work these three fields returned by your
search data must match those from Google
when these three fields match Android TV
will automatically attach the watch
action link to the search result card so
it's in your favor to provide accurate
metadata with your search results
there's one last thing you can do to
polish your app and here's in app search
notice that here we've added the search
button to the browse fragment at this
point we've already got our content
provider working and all we have to do
is add a fragment provided by the
Leanback support library that fragment
is the search fragment and you can see
details on how to use it in the
instructor notes the pattern is exactly
the same as we've seen previously in
this course</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>