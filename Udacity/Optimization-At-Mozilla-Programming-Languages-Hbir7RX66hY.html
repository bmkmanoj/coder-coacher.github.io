<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Optimization At Mozilla - Programming Languages | Coder Coacher - Coaching Coders</title><meta content="Optimization At Mozilla - Programming Languages - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Optimization At Mozilla - Programming Languages</b></h2><h5 class="post__date">2012-06-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Hbir7RX66hY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so one of the topics that we cover in
this class is optimization making a
program faster but having it compute the
same result and I like optimization a
lot it is a lot of fun to think of cool
ways to speed up the code but it turns
out that often getting the right answer
or maintaining the code later having the
code be well documented making it easy
to debug the code these things might all
Trump optimization Steve have you seen
anything like that at Mozilla or other
projects you've worked on now constantly
within a spider monkey JavaScript engine
these days I kind of feel like we spend
half of our time removing old
optimizations to make way for
refactorings future engines I think
we've been hit particularly hard because
we've switched our jet engines several
times at this point trace monkey was our
original optimization when our original
jet engine which had a particular style
of optimization that it covered and we
have since entirely removed the trace
monkey jet engine and replaced it with
jager monkey which is kind of the next
generation jet engine except now it's
the previous generation jet engine
itself and it is slated to be replaced
by light on monkey we like monkeys as I
said recurring monthly payment and it
turns out that the sorts of
optimizations that are really helpful
for eight racing style jet are really
obnoxious when you get into a different
style yet because they just get in the
way and it prevents you from making a
lot of the code simplifications that
makes it straight forward to
you do age it in a different style and
so there are many many different
optimizations that we've had to just rip
out wholesale and unfortunately it's at
least as much work to remove some of
these some of these optimizations as it
was to make them in the first place and
really anytime you do in optimizations
you have to be very aware of the cost of
that optimization you may be saving some
runtime but you are adding complexity to
everybody who comes by and tries to read
and understand that code you are
preventing some refactorings root some
restructurings of that code because it
would it would break the optimization
you know the optimization was made with
certain assumptions that's almost the
definition is up of an optimization is
that you know if we assume certain
things then we don't have to do some of
these operations and that's the way to
make things faster is to not do some of
the things that your previously doing
and so there are all kinds of you no
hidden costs to an optimization and it
can actually be very damaging to put
certain offices optimizations in the
code because they're going to prevent
other optimizations that are going to
prevent you know simplifications of the
code they're going to prevent changing
the semantics of what you've implemented
because the optimization based in
certain assumptions that you may want to
change in the future and so we spend a
lot of time
you know trying to find the right
balance today which is actually
different from the balance yesterday and
so even if the previous optimization
made total sense in the past world it
may actually get in the way in in the
current world so yeah we see a lot of
this excellent you mentioned something
that that caught my ear and I wonder if
I might put you on the spot with a bit
of a surprise question you mentioned
that you're looking over old code or
refactoring I'm just wondering
throughout your average day let's say
you spend some amount of time reading
code and some amount of time writing new
code what's that ratio or how many hours
is fixing bugs in code looking over old
code and how much is writing new code it
varies a lot from day to day somebody's
are actually spent one hundred percent
writing new code in those days are happy
days and rare days the vast majority
really is looking at existing code
sometimes code that I wrote much more
often code that other people wrote and
here in Mozilla we have a rule that
every line of code that goes into the
tree must be reviewed by another person
so you know in terms of you have a a
ceiling of fifty percent of you know
time is spent on new code because every
line of new code is going to be you know
viewed by advisee one other person and
off and you'll go through multiple
rounds a review and so we know little
people or the same person are looking at
that line of code you know several times
but even if you're going to write new
code you always have to understand the
context in which you're placing that
code and so you know you really have to
understand what comes before and you
will spend much much of your time
doing that far more of your time doing
that then kind of going you know into a
green field ahead and putting something
brand-new in place and this idea that
you have to understand the context in
which are adding code is one of the
reasons why understanding the meanings
of programs their semantics is so
important</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>