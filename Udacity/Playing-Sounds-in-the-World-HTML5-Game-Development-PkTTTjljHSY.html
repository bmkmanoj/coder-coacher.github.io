<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Playing Sounds in the World - HTML5 Game Development | Coder Coacher - Coaching Coders</title><meta content="Playing Sounds in the World - HTML5 Game Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Playing Sounds in the World - HTML5 Game Development</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PkTTTjljHSY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright let's take a look at how we
implemented the play world sound
function now remember it takes as
parameters first a sound URL
representing the path to the sound that
we want to play in the world and then
the x and y position that this sound
should be played at so first we're going
to check if the player is null for some
reason just as a sanity check if it is
then we simply return and don't worry
about playing it there's no players to
hear the sound does a sound actually
play then we're going to do a little bit
of shorthand here just to make it a bit
easier to write for ourselves by
shortening G game engine gmat to just
gmaps locally and now we're going to do
the calculation for fading the volume
out based upon the distance from the
player that the sound is supposed to be
played at first we check the view size
of the the maps V wrecked and we're
actually going to do this as a square
rather than as a rectangle for
simplicity's sake so we take the maximum
of the width and the height then we
multiply it by a half since we don't
want the full width we only want the
half since we're going to set the center
of that view size to be the players
current position and we want the
distance from the player to the sound
now we're going to take the x value the
absolute x value from the players
position to the sounds exposition and
similarly for the y value and now we
simply compute the distance function
which is the same one that you've
probably learned in high school which is
the square root of the x squared plus
the y distance squared then we're going
to normalize that distance and what we
mean by that is we're going to take the
distance to the observer that we've just
calculated and we're going to divide
that by the view size that we calculated
earlier to see how many view sizes from
the player we are like we talked about
before if we are more than to view sizes
away then maybe want to start reducing
the sound like we discussed so in this
case if norm of the distance is greater
than one view size away then we set the
norm to
students to one since we're going to
reduce the volume by the norm distance
later on and it doesn't really make
sense to have a negative volume the norm
distance is for whatever reason less
than zero then we simply return and
don't play then we create a callback
function and immediately calls play
sound on that sound object the path of
that sound object that is and with
settings saying looping is false and the
volume is the volume that we have just
calculated so once this function is
written we'll have a nice effect where
the further the a sound is away from a
player the more quietly it's played
until the player can't hear at all
creating a more realistic sound
environment</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>