<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Stepping thru Backbone.history.start() | Coder Coacher - Coaching Coders</title><meta content="Stepping thru Backbone.history.start() - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Stepping thru Backbone.history.start()</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vtjYBsByic8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">backbone has cycled through each of the
routes in the food router router and
added them to backbone history handlers
the backbone dot history object is what
actually takes care of managing the
state of your application it monitors
the URL for changes and when it sees a
route that's listed in its list of
handlers it calls the function let's
take our last dive into backbone source
to see how it does this let's add a
breakpoint here to pause execution and
start working through the code reloading
pauses at the breakpoint so let's step
inside start these lines determine if
the app can use the hash change and push
date events to monitor the URL for
changes since we didn't tell backbone to
use push date it will default to hash
change if we want to use push date we
could call start like this backbone gets
the current URL fragment here this is a
precaution in case the app is loaded
with one of the routes already in the
URL this section will run if we said we
wanted push date and hash change is also
available this section will load if the
app is loaded in an iframe older
browsers do not support the add event
listener API so if the app is loaded in
an older browser it will set add event
listener to a function that calls attach
event this section sets up the listener
for either push date has changed or if
neither one of them is available then it
fallbacks to polling the URL for changes
every 50 milliseconds we're checking for
the hash change event so we add this
listener here we're done with this part
so i'll click resumed to finish running
through all the code now that check URL
will be called when there's a hash
change let's set a breakpoint here and
walk through it let's click this button
to change the URLs fragment check URL
gets the current fragment and calls load
URL load URL is what compares the new
URL against the list of handlers it gets
the current fragment then it goes
through the list of handlers for some
that have a route that matches the
current URL I'll add a breakpoint here
to let us skip over the details of some
it's paused right here at the breakpoint
check in the scope we can see that this
handler is the one for the clear route
the tests the route against the current
pages fragment and they don't match so
i'll click resume to get to the next
handler now is checking the select route
notice fragment right
year the fragment starts out with select
so the test does match remember when we
walked through what happens when a
router is set up this is the callback
function that was created this line gets
the parameter from the URL then it
executes the callback function that's
set up in food router after that it just
returns and that's it we finished
digging through how routing in state
management work but don't lose track of
the big picture backbone dot history dot
start sets up an event listener to watch
the URL for changes when it does change
backbone cycles through its list of
handlers looking for one that matches
the URL when it finds one it executes
the callback function associated with
that route</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>