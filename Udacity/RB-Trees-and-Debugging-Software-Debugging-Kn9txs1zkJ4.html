<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>R-B Trees and Debugging - Software Debugging | Coder Coacher - Coaching Coders</title><meta content="R-B Trees and Debugging - Software Debugging - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>R-B Trees and Debugging - Software Debugging</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Kn9txs1zkJ4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so here's our invariant checker for the
class red black tree you want to make
sure that the root node is black you can
make a mistake say move their sub tree
up here and all of a sudden there the
route becomes red this assertion will
take care of this and as you can see
here we're setting up helper functions
in order to break down the invariant
into manageable small pieces we want to
make sure that there's no cycles in the
tree we want to make sure that pointers
to parents are consistent that is if
some node points to its parent then it
should also be a child of this very
parent we want to make sure that in both
subtrees the number of black nodes is
equal that's a nice long function name
which says it all and finally you want
to make sure that red nodes have only
black children and at the same time
black nodes only have read children not
sure whether we need to make this a
separate method some of these checkers
are rather trivial that is one liners
others require traversal of the entire
tree and would typically call themselves
recursively and now for every single
method that changed the state you can
now invoke the invariant checker you do
so at the beginning you do so at the end
and when all of your assertions path and
you can be sure that your red black tree
never ever becomes corrupted however if
something goes wrong you will get the
error message at the very moment you
make the red black tree inconsistent you
will get the precise assertion that
fails and you won't implant any time
bombs because if the precondition is
satisfied and if the post condition is
violated you know that it's precisely
this method the insert method in this
case that caused the data invariant to
be violated this thing about red black
trees actually is a sort of personal
thing for me ten years ago when it was a
teaching assistant my professor had the
cool idea to have the students implement
red black trees as a programming
exercise and we as teaching assistants
at the cool idea to come up with real
hard automatic testing for the student
assignments which turned out a
disastrous combination because writing a
red black tree is one thing writing a
red back
that works is another at this time I did
not really know how to debug neither did
my students and neither did my professor
so we as teaching assistants would be
sitting with our students for hours and
hours and hours in the night stepping
and stepping and stepping through the
program and trying to figure out where
on earth on the Ambu teen insert
operation this particular pointer would
finally be moved to this other location
which was a total pain to figure out in
particular with regular debuggers you
typically step over the whole thing and
then finally lose the moment so you'd
have to restart again and restart again
and if I think about how many hours
probably days and weeks I have the last
digging through these data structures
whereas with a single invariant checker
I could have found them in minutes I'm
still somewhat sorry</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>