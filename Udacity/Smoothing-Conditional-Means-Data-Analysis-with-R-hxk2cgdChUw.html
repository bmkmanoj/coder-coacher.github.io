<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Smoothing Conditional Means - Data Analysis with R | Coder Coacher - Coaching Coders</title><meta content="Smoothing Conditional Means - Data Analysis with R - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Smoothing Conditional Means - Data Analysis with R</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hxk2cgdChUw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this lesson you created two plots for
conditional means let's take a closer
look at both of the plots and see how
they're different this second block of
code gave us this plot and this first
block of code gave us this plot
now you subset this data frame to only
consider users who are age 71 or less so
let's do the same up here running the
code we can see that we're limiting in
our x-axis now what I want to do is put
these two plots side-by-side so we can
look at them together now you know this
before we basically just save each plot
into a variable and then we plot those
variables in one column so here's the
difference between age and age with
months by decreasing the size of our
bins and increasing the number of bins
we have less data to estimate each
conditional mean we can see that the
noise is a lot worse on this graph since
we have finer bin choices on the other
hand we could go the other direction and
increase the size of the bins say we
could lump everyone together whose age
falls on a multiple of five essentially
what we'll do is we'll cut our graph in
pieces and average these mean friend
counts together so users who are within
two and a half years of 40 will get
lumped into one point this same will be
true for users who are within two and a
half years of 50 and for users who are
in two and a half years of 60 I'll show
you what I mean in code here I'm
creating a plot with age that's been
divided by five rounded and then
multiplied by five
I've also subsetted our data frame just
like the other plots the last thing I'll
do is add a G oh mine with a stat
summary I don't really want to plot the
friend count I want to plot the mean
friend count so we'll pass summary to
stat and I'll pass mean to fund out why
I'll save this plot and add it in with
the others so see how we have less data
points here and wider bin widths by
doing this we would estimate the mean
more precisely but potentially miss
important features of the age and friend
count relationship these three plots are
an example of the bias-variance tradeoff
and it's similar to the trade-off we
make when choosing the bin width and
histograms one way that analysts can
better make this trade-off is by using a
flexible statistical model to smooth our
estimates of conditional means ggplot
makes it easy to fit such models using
giome smooth so instead of seeing all
this noise will have a smooth modeler
function that will fit along the data
will do the same for this plot as well
here I've added the giome smooth layer
to both our first plot and our second
plot I'm just using GG plots defaults so
all the decisions about what model we'll
be using will be made for us if you're
interested in exploring the models and
the parameters take a look at the G omen
tation so I'll save these two plots and
then I'll run the code again so here's
our smoother for age with months and
here's our smoother for age while the
smoother captures some of the features
of this relationship it doesn't draw
attention to the non metonic
relationship in the low age as well not
only that but it really misses the
discontinuity at age 69 this highlights
that using models like low SR smoothing
splines can be useful but like nearly
any model it can be subject to
systematic errors when the true process
gender in our data isn't so consistent
with the model itself here the models
are based on the idea that the true
function is smooth but we really know
that there's some discontinuity in the
relationship</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>