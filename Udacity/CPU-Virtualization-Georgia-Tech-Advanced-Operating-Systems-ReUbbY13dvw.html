<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CPU Virtualization - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="CPU Virtualization - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CPU Virtualization - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ReUbbY13dvw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">to keep things simple let's assume that
there's a single CPU each guest
operating system is already multiplexing
the processes that it is currently
hosting on the CPU in a non virtualized
setting also so each operating system
has a ready queue of processes that can
be scheduled on the CPU but there is
this hypervisor that is sitting in
between a guest operating system it's
ready queue and the CPU so the first
part of what the hypervisor has to do is
to give an illusion of ownership of the
CPU for each of the virtual machines so
that each virtual machine can schedule
the processes that it currently has in
its ready queue on the CPU so if you
look at it from the hypervisors point of
view it has to have a precise way of
accounting the time that a particular VM
uses on the CPU from the point of view
of billing the different customers
that's the key thing that the hypervisor
is worried about that it gave the CPU
for a certain amount of time to this VM
certain amount of time to this VM and so
on now for the time that has been
allocated for instance this virtual
machine how this virtual machine is
using the CPU time what processes it is
scheduling on the CPU the hypervisor
doesn't care about them so commensurate
with whatever is the scheduling policy
in force in a particular guest operating
system that guest operating system is
free to schedule its pool of processes
on the CPU for the time that has been
given to it by the hypervisor now
similar to the policy that we discussed
for memory allocation one
straightforward way to share the CPU
among the guest operating systems is to
give a share of the CPU a proportional
share of the CPU for each guest
operating system commensurate with the
service agreement
this virtual machine has with the
hypervisor this is called a proportional
share scheduler and it is used in the
VMware ESX server another approach is to
use a fair share scheduler which is
going to give a fair share of the CPU
for each of the guest operating system
an equal share to each of the guest
operating systems running on top of the
hypervisor both of these strategies
proportional share scheduler or a fair
share scheduler are straightforward
conceptual mechanisms and you can learn
more about them from the assigned
readings for this course in either of
these cases the hypervisor
has to account for the time used on the
CPU on behalf of a different guest
during the allocated time for a
particular guest and this can happen for
instance if there is an external
interrupt that is fielded by the CPU
that is intended for this VM while a
process that belongs to this VM is
currently executing on the CPU so this
is accounting that the hypervisor would
keep in order to make sure that any time
that was stolen away from a particular
VM in order to service an external
interrupt that did not belong to this VM
it will get rewarded for later on by the
accounting procedure in the hypervisor
we have discussed this issue already in
the context of operating system
extensibility specifically when we
discussed the exokernel approach to
extensibility so it's not new problem it
is just that this problem occurs in the
hypervisor setting also</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>