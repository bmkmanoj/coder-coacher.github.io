<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Adding Transactions in Objectify - Developing Scalable Apps with Java | Coder Coacher - Coaching Coders</title><meta content="Adding Transactions in Objectify - Developing Scalable Apps with Java - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Adding Transactions in Objectify - Developing Scalable Apps with Java</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Cl7_gXPlJEQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so the way that you run a transaction in
objectify is that you call off your
transact at the start of the transaction
and you specify new work and if you
don't want the transaction to return
anything then you would use new void
work instead of work and then you call
the run method and then inside the run
method you do the stuff that you want
done inside the transaction and if your
transaction expects a return result
don't forget to return it there are some
things that are different about
transactions in objectify and in the raw
Java datastore API for example
objectified does not use snapshot
isolation this can affect the outcome of
queries and gets inside a transaction my
advice is to try to limit your use of
transactions so that you only do updates
inside a transaction because it can be
confusing to know exactly what the
outcome of queries will be anyway I
encourage you to read about transactions
and the objectify developer guide so go
ahead and implement the - dues in
register for conference and when you've
implemented the function run the app on
localhost and try registering for
conference you could use the API
Explorer to test out the new
functionality to register for a
conference I find its easiest to query
conferences and then to copy one of the
web-safe key strings of the conference
that I'm going to want to attend now I
can go and register for the conference
you have to have the web-safe key string
so I'm going to enter it here and I'm
going to execute the function and we'll
see what we got back results true so
hopefully that means I am in fact
registered for that conference let's
take a look in the datastore admin I'm
on localhost I'm going to go to the
admin console on localhost and list the
profiles and there I am and I'm
registered for a conference you can see
that I can't tell from here what the
name of the conference is but
programmatically you can take the
conference key and from that you could
define the conference name if you wanted
to you should also find that the UI
works for registering for a conference
and you see that it says that you can
unregister from a conference well
actually it won't work
register from a conference because you
haven't yet implemented the
functionality to do that so now it's
your turn to go ahead and write the code
to implement register for conference so
the profile class needs to have the
conference keys to attend property and
you're also going to need to write the
methods to get add and remove values and
then you're going to need to copy the
skeleton code for register for
conference into conference API and then
fill in the to dues in register for
conference in the conference API class
don't forget when you copy over the
register for conference skeleton you're
going to need to make sure you also copy
over the wrapped boolean class when you
implement register for conference you'll
notice that the method is defined to
throw some exceptions and you need to
honor that if you change the way the
method behaves for example you change
the exceptions that it throws or it
throws different exceptions or it
doesn't throw them in the right place
the UI for registering for conferences
won't work properly and then to check
what happens when you try to register
for a conference it has no seats
available just create a conference with
zero seats left the easiest way to
create a conference with zero seats left
is that when you create the conference
just set max attendees to zero if you
want to see what happens if you try to
register for a conference that you've
already registered for you'll need to
use the api's explorer because the
conference page in the UI will know if
you've already registered and won't
offer you the option to register again
so how did you check that your code
worked did you check that the conference
keys to attend property if the profile
entity contains a string of the
conference key or did you look to see if
the conference keys to attend property
of the profile contains the conference
name did you check the seats available
of the conference is one less than the
max attendees of the conference and did
you try registering for a conference
that you had created</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>