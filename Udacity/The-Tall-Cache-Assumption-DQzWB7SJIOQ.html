<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Tall Cache Assumption | Coder Coacher - Coaching Coders</title><meta content="The Tall Cache Assumption - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Tall Cache Assumption</b></h2><h5 class="post__date">2015-07-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DQzWB7SJIOQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">consider the problem of the matrix
matrix multiply operation c gets c plus
a times B suppose you run this operation
on an ideal cash machine let's make our
usual simplifying assumptions namely
that the matrix is square and stuff
conveniently divides other stuff now if
you want to minimize data transfers in a
memory hierarchy one way is to
reorganize the computation to multiply B
by B sub blocks again for simplicity
let's assume that B divides and the
corresponding pseudocode algorithm would
look something like this now to make
this algorithm cash efficient you would
just choose B so that these three B by B
blocks fit in cache in other words be
ought to be proportional to the square
root of Z now there's a subtle detail
here about what fitting in cash means to
see it suppose the matrices are stored
in column major order that means the
elements of each column are laid out
consecutively in linear memory addresses
with one column following the other this
layout is common in linear algebra
packages though note that languages like
C and C++ assume by default that a
two-dimensional array uses row major
order a little more formally the IJ
element maps to a linear address the
offset is I plus J times s where s is
the stride or sometimes leading
dimension it has to be at least n now
let's take any B by B block of one of
the matrices let's say we just want to
fit this block into cash then it has to
be the case that Z is at least l squared
in the literature this is sometimes
written as the following lower bound
this condition is called the tall cash
assumption the tall cash assumption says
the cash should be taller in terms of
the number of lines and then it is wide
in terms of the number of words per line
let's take a simple example suppose our
matrix block is exactly the size of the
cache is e which holds 16 words now
suppose the line size is four words in
this case the tall cash assumption holds
assuming the matrix is stored in column
major layout columns would map to
complete lines now suppose instead that
L is equal to eight words in this case
the tall cash assumption does not hold
columns no longer fill full lines
thus the four by four block doesn't
actually fit in cache even though the
cache has enough capacity now the tall
cache assumption is actually a really
interesting one it's basically an
artifact of how we chose to lay out the
matrices put differently in a memory
hierarchy model an efficient algorithm
might be linked to your choice of data
structure and how you choose to lay out
the data we'll see more examples of this
soon enough</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>