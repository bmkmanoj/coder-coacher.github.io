<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Near and Far Clipping - Interactive 3D Graphics | Coder Coacher - Coaching Coders</title><meta content="Near and Far Clipping - Interactive 3D Graphics - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Near and Far Clipping - Interactive 3D Graphics</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Sfy6pB0susM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">here you can see the effect of moving
the near and far clipping planes through
the scene seeing this kind of clipping
is usually a bug not a feature an
algorithm such as ray tracing doesn't
have this sort of problem as the
mechanism there is to shoot rays from
the eye these two values near and far
are necessary for rasterization to work
sensibly due to its use of the
projection matrix well at the minimum
you need to set the near distance it's
possible to form a projection matrix
that gives a frustum with no far limit
to the pyramid the key thing about these
two values is you want to set them to be
as close together as you can without
causing any clipping to occur the near
plane is particularly important to move
as far as possible away from the camera
the near and far values determine how
the z-buffer value is computed
internally the z-buffer value typically
gets stored as an integer value with
some number of bits for example 24 bits
is common with 8 bits for what's called
the stencil buffer this is a separate
buffer I'm not going to talk about in
this course but it can be used for on
screen clipping and other effects the Z
buffer has lots of bits but not an
infinite number of them for example if
you're rendering a sheet of paper on top
of a desk you can easily get z-fighting
even if you've modeled everything
correctly and the sheet is slightly
above the desk at some pixels the Z
value of the paper and the desktop will
have the same value and the desktop can
then bleed on through the Z depth range
of values is spread between the near and
far distances it's clear that having
these two distances close together
directly benefits precision however with
the perspective transform in particular
you want to move the near plane as far
from the eye as possible here's an
example say we have our near plane at a
distance of one unit away from the
camera and the far plane 10 units away
the end a seed z depth does not vary
linearly but instead forms a hyperbolic
curve for example say we have an object
at 7 units away the NDC Z value is about
9.0 when the near distance is 1 unit in
other words the Z depths of more distant
objects are relatively higher these
objects that are farther away have to
share a small range of Z depth values
and so are more likely to exhibit Z
fighting the reason the Z depth values
vary in this nonlinear way has to do
with interpolation we want straight
lines to stay straight when using
perspective projection I won't prove it
to you here but think of train tracks
disappearing into the distance near the
camera the railroad ties are visually
far apart
as you move toward the horizon the
tracks get closer and closer together
the distance between the tracks is the
same of course and the track stays
straight but the distance between them
on the image changes the W value for
homogeneous coordinates is interpolated
linearly but when used for division
gives us this differing rate of change
to get back to setting the near and far
planes say we're able to safely move the
near plane to a distance of five units
and not cause clipping we're effectively
taking this piece of our original graph
and stretching it to our new range first
we get the simple benefit of having a
smaller range between the near and far
we also get a more linear graph the more
you increase the near plane relative to
the far plane the slower the NDC Z depth
actually goes to one the long and short
is that moving the near plane away from
the camera has a large benefit much
larger than moving the far plane in by a
similar distance of course this all begs
the question how do we know where to set
these planes the far distance is usually
relatively easy to compute either we
know in advance or perform some rough
computation to determine the distance to
the farthest object in the scene the
near clipping plane is trickier you
usually have to have some rules such as
not letting your camera get too close to
the walls or some rule of thumb such as
that the near plane will be one one
thousandth the distance of that of the
far plane some more elaborate systems
will do a pre pass setting the near
plane very close to the camera it'll do
a quick render of nearby objects to
determine a good distance for setting of
the scene and then render the whole
scene there's no single perfect solution</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>