<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>5. Example before we dive into the code | Coder Coacher - Coaching Coders</title><meta content="5. Example before we dive into the code - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>5. Example before we dive into the code</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/r0jf_ZnGv7Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that you have the general idea down
let's go over an example say there's a
part of your app that presents users
with the Preferences page and allows
them to choose between two app themes
daytime and midnight if you set your
preference to the midnight theme you'd
probably want the app to remember that
so you don't have to reset it every time
upon app launch so this would be a good
place to use NS user defaults your
device has a default database where it
stores everything from system-wide
defaults to language defaults to app
specific defaults and more app specific
defaults is what we'll be focusing on to
access the values from this database
will need to call standard user defaults
from an NS user defaults object which
will return the shared defaults object
that we need notice i said shared object
that means that NS user defaults class
has a class method that will return a
reference to the same user defaults
object regardless of where we invoke it
in our program this is called the
singleton design pattern once we have
the shared user defaults object we can
then use keys to get values for this
defaults object just like a dictionary
in this example we'll use the method
value for key but there are other
methods available as well such as string
for key bull for key float for key and
others in this example we want to keep a
value that lets us know whether the
midnight theme is off or on so it makes
sense to use a boolean here so we'll
first check to see if a boolean value
already exists for the string midnight
theme on using the if let syntax in case
it doesn't so let's first suppose the
app has no idea what we're talking about
it's never heard of midnight theme on
and this is our first time launching the
app so here's where we'll set it setting
a value and NS user defaults is very
similar to checking for a value and the
syntax is set value with a value and
then the key string will want to use to
retrieve it so in our case this will be
a bull so we'll say false because no one
has flipped the midnight theme on yet
and forkie will put in that midnight
theme on string so we know that if this
else statement is being executed it's
because our call to value for key up
here return nil meaning no value had
been set for that key string so this
also shows us that the app has never
been launched before because if it had
it have value for midnight theme on so
let's just add a print that shows us
that this is the apps very first launch
and we know that after this first launch
we will now have a value for NS user
defaults for that midnight theme on key
so let's go back up here and deal with
this case that is the case where value
for key midnight theme on returns a
value so we know that since we're using
value for key it's returning in any
object so the first thing we need to do
is cast this to a pool then we can check
its value if it is true we'll call a
method called switch to midnight which
makes all the UI changes necessary to
show the midnight theme if it's false we
don't really need to do anything because
the UI is set to load with the daytime
theme in general but let's just add some
print statements in here so we can see
what's happening one okay so now I just
need to set up an action for when the
switch gets flipped let me do that now
so when this action gets executed I
check my switch outlet to see whether
it's turned off or on and then I call
the appropriate you I configuration
method and it's here that I want to
update my new preference in my user
defaults so I'll add an asset value here
to true for midnight theme on and if the
theme switch is set to OFF I'll put in a
set value here to false for midnight
theme on so this should work to save our
preference let's try it out now let's
switch to midnight theme and let's see
what happens when we close the app on a
device you can view all your open apps
by pressing the home button twice in
rapid succession and then you can close
an app from there we can simulate this
action on your simulator by holding
command shift and rapidly pressing the H
key twice so command shift HH and just
like on a device I can swipe up to close
it now let's relaunch our app and great
we see that our preference is saved
let's switch back to daylight and close
it again awesome it saved our daylight
preference but how come it didn't print
this is the first launch ever when we
first ran it well because I had run this
app with the NS user defaults already
implemented when I showed you the demo
so how do we simulate running this app
as if it was the first time it's ever
been launched on our device what we need
to do is reset the content and settings
of our simulator
we'll end up doing this a lot throughout
the course so we've included the
directions for this step in the
accompanying text as well it's pretty
simple though we just click simulator
and then reset content and settings and
that's it now we can launch the app as
if it's the first time it's on our
device and now we get this output that
says this is the first launch ever so
let's switch the midnight theme on let's
close the app lets relaunch and we see
our preference is saved so awesome but
there's actually an even better place to
put all this code and that's in our app
delegate so I've made this method called
check if first launched which does a
similar thing to what our code and our
viewdidload method did except for the
primary focus is not whether the theme
has been said or not but in a more
general sense whether the app has ever
launched before so similar to the code
in our viewdidload method we have bull
for key has launched before to check if
the app has ever launched and if it
hasn't we know that this is the first
launch and in this else section we can
set the bowl for has launched before to
true and here we'll also set the default
value for midnight theme on so that we
know it's taken care of for the rest of
the app and then we can go back here and
delete some of this section and see that
the app still works we no longer need to
check if there's a value for we want
midnight because we know that there is
because we set it in the app delegate
which launches first and you can see how
this would be preferred because then you
can make sure things are set up at app
launch rather than at view load and
let's run it one more time but first
let's reset the content and settings and
launch and switch to midnight let's
close our app relaunch and we see that
our preference is saved awesome</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>