<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Memcache and Objectify - Developing Scalable Apps with Java | Coder Coacher - Coaching Coders</title><meta content="Memcache and Objectify - Developing Scalable Apps with Java - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Memcache and Objectify - Developing Scalable Apps with Java</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DI0Uu1ZWqiM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this lesson we're going to look at
how to use memcache in App Engine
applications one good thing about using
objectify
is that you can configure it to
automatically use memcache to cache your
entity data all you have to do is add a
cache annotation to your entity class
then object fires going to do its best
to use memcache whenever possible when
you try to get entity data to reduce
hits to the datastore it's really easy
to use objectify with memcache but
there's a few things that you should
know about how object fire uses memcache
for one thing it only uses memcache when
you get an entity by key you save it or
you delete it and query results are not
cached object if I put some property
values into memcache it doesn't put that
entire entity into memcache another
thing that it's really helpful to be
aware of is that objectify has its own
session cache so often when you do a get
by key objectify is going to get the
results from the session cache without
even going to memcache let alone going
to the datastore
so here's what the profile class looks
like with the app cache annotation all I
did was add app cache to the entity
class definition and now objectify is
going to use memcache to cache property
values whenever possible I don't even
have to write a single line of code to
do it so when your applications been
deployed to appspot
you can use the memcache viewer to view
the memcache entries I'm gonna flush
memcache to make sure I have no mam
cache entries to start with so now I
have no entries in memcache I'm going to
go and do some things in my application
to see if I can get some memcache
entries when you go to the profile page
it gets your profile entity out of the
datastore if you already have a profile
that's how it knows what your display
name and t-shirt size are here in the
profile page I'm going to make a change
change my t-shirt size and update my
profile I'm also going to go to the show
conferences page and show all the
conference's the list of conferences is
retrieved as a query and as I already
mentioned objectified doesn't use
memcache for query results however we do
actually get the profile entity by key
so we can figure out this
play name of the organizer I can also
drill down into conference details which
does it get by key so now I've done a
few things that involve getting entities
by key from the datastore let's see if
any of the results got cached in
memcache so you need to be sure to
refresh the memcache viewer to get the
latest data and here you see there are
some memcache entries I've actually only
got one item and I thought maybe I would
have had a few more than that the reason
there might not be as many items in
memcache as you expect is because object
if I has its own session cache so it's
going to save data in the session cache
which will reduce use not only of
memcache but of the datastore so anyway
you end up seeing less items that you
mark the memcache viewer because of the
session cache so go ahead and update the
conference and profile entity classes to
use memcache it's a good practice to
always check any changes to your app on
localhost first so feel free to do that
and you're going to need to deploy to
app spot because we want to use some M
cache viewer and for that your app has
to be running on appspot after you've
deployed your app to appspot
go to the memcache viewer and if you
have any items in memcache you might or
you might not but if you do go ahead and
flush memcache then in your application
go ahead and do some things to put some
data into memcache so create some
conferences show conferences view
details maybe create or change a profile
and then go back to the memcache viewer
and see if you've got any entries in
memcache you might need to do a few
things in your application to get some
entries to show up and you'll probably
see less items in the memcache viewer
than you might expect because objectify
uses its own session cache</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>