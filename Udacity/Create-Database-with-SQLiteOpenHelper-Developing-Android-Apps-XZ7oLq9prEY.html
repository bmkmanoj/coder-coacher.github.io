<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Create Database with SQLiteOpenHelper - Developing Android Apps | Coder Coacher - Coaching Coders</title><meta content="Create Database with SQLiteOpenHelper - Developing Android Apps - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Create Database with SQLiteOpenHelper - Developing Android Apps</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XZ7oLq9prEY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that's a contract but we still don't
have a database our database class will
extend an Android class SQLite open
helper SQLite open helper contains cool
stuff to help us handle database
versioning as we make changes to our
database in the future it will help us
modify our tables from many apps being
able to upgrade to a new version without
data loss is critical let's create a
weather DP helper class within the data
package and have it extend SQLite open
helper we can add the required methods
by hitting ctrl I and we can override
the constructor by hitting ctrl o so now
we can hard code these variables to the
constructor hard-coding name to database
name our factory to null and our version
to database version now you'll note I
have made the database name public and
that's because we're going to use it in
our tests in the future now you see
we've got it on creating a non upgrade
method in the oncreate method we're
gonna start by creating a string to
build the weather entry table using data
defined within the weather entry
contract now I'm just going to add this
comment so you know where to go back and
add the location entry stuff later since
weather entry depends on location entry
I would normally write location entry
first but weather entry is pretty
complicated so I'd rather explain what
we've done and leave location entry up
to you we're going to use raw SQL for
our create table query beginning with
the table name from our contract at this
point it's helpful to import weather
contract dot location entry and weather
entry it makes our query so much easier
to read we'll start with our ID field
which we'll set as our primary key and
an auto increment field note that
integer is actually assigned value up to
8 bytes long in SQLite using the auto
increment feature doesn't do precisely
what one might think setting up the ID
is an integer primary key actually makes
the value unique whenever you do an
insert
it may not always increment it may reuse
existing ID values if the records have
been deleted
what Auto increment is really useful for
is if you were synchronizing data two
ways with the server but will take
advantage of it here because it makes
data from our queries sort a bit more
naturally because we insert them in the
right order coming from the server in
general we're using constraints on
fields in this case not null we do this
because it allows the database to do
much of our parameter validation for us
the tricky part about doing it this way
is we don't get useful errors when these
constraints fail so it can be
challenging to debug we're using a human
readable string for the date there's no
strong reason for or against this choice
we wanted to normalize the date to
simplify our queries and human
readability simplifies debugging the
date comes from open weather in UNIX
timestamp format with some time
information that we need to get rid of
I'm not going to cover every field real
means floating-point in SQL it would
have been fine to have used integer with
fixed point math as well and some would
argue that this would be faster but real
is more straightforward since we're
storing floating-point values now for
the fun stuff we're going to set up the
load key it's a foreign key to the
location entry table that you will be
building this causes SQLite to enforce
the relationship between the tables we
cannot insert a weather entry when there
is no corresponding location entry and
we cannot delete a location entry if
there are still weather entries that
depend on it cool stuff right one last
constraint our date text plus location
must be unique on conflict replace the
data this allows us to insert new data
from the open weather API easily
preserving existing keys and updating
the values of the forecast changes</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>