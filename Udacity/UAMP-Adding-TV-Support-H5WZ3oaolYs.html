<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>UAMP   Adding TV Support | Coder Coacher - Coaching Coders</title><meta content="UAMP   Adding TV Support - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>UAMP   Adding TV Support</b></h2><h5 class="post__date">2015-07-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/H5WZ3oaolYs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright now let's see how TV support was
added to the universal media player on
the github page you can see a complete
diff of the code changes that were made
of course there's a link to this in the
instructor notes so there's no need to
memorize anything while you're going
through this pay special attention to
the manifest this diff is pretty good
but a few changes were actually
committed before this diff was made so
it's probably about ninety ninety-five
percent complete but it doesn't quite
get everything right now what I'd like
to do is walk through the essential
pieces in Android studio here we are
inside the manifest the first step is to
update the manifest to include lean back
support being careful not to require it
since will run on multiple devices and
because we intend to run it on TV we
need to set the touch screen to not
required now let's create an activity to
run on the TV which we specify using the
Leanback launcher category here's our
main activity for the TV as before our
plan is to use lean backs browse
fragment as the main UI so the first
step is create a layout for it also as
before the layout does little else but
hold the Browse fragment if we ran the
project at this point without including
any other code we'd see an empty browse
fragment notice that right now we only
have a mobile configuration launching
that will cause the phone UI to appear
on the TV let's see what happens here's
the you a mobile UI on the TV emulator
this is in fact proof that Android TV is
just Android now you can still run the
TV UI by exiting you amp and launching
it again from the TV home screen and
here's the empty browse fragment or you
can create a new launch configuration
for the TV that specifies the right
activity to run from Android studio and
here's how you do that under
configurations select edit then add a
new one for an Android application
specify the module and choose the TV
activity oops didn't give it a name then
hit ok now when you run that launch
configuration the right you I will come
up now it's time to populate the Browse
fragment and to do so we'll use the
media browser you saw in the Android
auto lesson scrolling up a bit i want to
point you to this comment the details of
the Media Browser aren't important
beyond that it provides a tree structure
of media items you can explore a media
item can be playable like a song or
browsable like a play
list you amp is hard-coded to expect the
three levels of media items that you see
here the first level is a category of
categories like Jean roux which will go
here on the header items the next
category is a music style like rocker
jazz they'll go here on the Rose
fragment finally we have actual songs
which we displayed on a separate you I
first let's create the header items we
do so inside the Media Browser call back
this gives us a list of media items
which can be playable or browsable and
they contain metadata about a song or
category at this first level will create
a header item for each of the media
items and the pattern is exactly the
same as you've seen in previous lessons
next if the item is browsable we'll
explore the music hierarchy deeper and
create a row for its contents here the
browsable items are going to be music
styles like rock and jazz you can see
how the second level is explored inside
the row subscription call back also as
before we'll need to presenter to
display these items here our presenter
can take either a media item or a cue
item as input and if you scroll down a
bit you can see logic to set the
description and to fetch the album
artwork at this point if we run you up
again let's see what we get here you can
see the header items and the row items
we can drill down into further using a
separate you I back in the Browse
fragment we set up event listeners to
respond when one of our row items is
selected these will open up a vertical
grid fragment and this is just another
Leanback class that works a whole lot
like the Browse fragment it just happens
to lay out its content a bit differently
inside the vertical grid fragment you
can see we also use the Media Browser
subscription callbacks to populate the
UI the principles are identical to the
material we've already covered and
here's how they look in action when one
of the songs is selected on the vertical
grid fragment will want to start a
playback activity notice that we
actually kick off playback here using
the media controller although of course
we could do so instead inside the
playback overlay fragment now let's have
a look at the playback overlay fragment
another Leanback class that provides
playback controls the media controller
will handle the actual playback all we
have to do inside this class is map the
UI control actions to commands for the
media controller and we do so using this
event listener here you can see how we
forward an action on the UI to the media
controller and here's how that looks in
action
at this point you have everything you
need to know to build a great lean back
application</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>