<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Enter Update Exit - Data Visualization and D3.js | Coder Coacher - Coaching Coders</title><meta content="Enter Update Exit - Data Visualization and D3.js - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Enter Update Exit - Data Visualization and D3.js</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0SU3cKsWsPw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that we have filtered our data by
year in our update function and bound
our data using a key function key down
the year we're ready to start updating
what's on our map as we iterate through
a years while that might seem like
overkill to use a key binding function
since we're only visualizing a single
year with a single circle we could
imagine a scenario where we would have
multiple elements on our page
interacting in a complex way through
updates exits and enters to begin
updating our map based on a single year
we start as we most always do with our
SVG element in this case we want to
select all the circles that are
currently on the page what's in this
case is going to be every circle for
every year and then rebind our new data
in this case our data filtered by year
and the properly update our map we will
use a key function the same key function
that we use when we initially bound our
circles because we often would want
these two to be the same I'm going to
abstract us away into a function defined
above in this case again remember we're
simply extracting the key of the nested
object that gets passed to the key
function and then our initial data bind
we can simply pass in key funk so that
we're sure when we update our data and
rebind our filter data we can use the
same key funk as well now we've been
through a lot of code since we've
explored it in our browser so I want to
take a moment to pause place a debugger
inside our update function and start
inspecting where we are since update
isn't being called currently I'll also
place a debugger at the end of our plot
points function so that can experiment
with the code defined within it here you
can see we have our nested object which
corresponds to the 20 games of the World
Cup and each nested object if you
remember has the key set to the year and
the values with the total attendance x
and y coordinate but also our new teams
array which in this case you can see is
a nice array of
all the teams countries who participated
in the world cup for the given year and
I've added a call to the update function
with a given year so that we can then
step into it and see the debug your
catch inside our update function and now
if you look at our source here you can
see they were in the update function we
have filtered data which represents an
array with a single object that object
represents a single year in this case I
ran update with a year nineteen thirty
and the values is what we would expect
and notice that we have this year
argument available as well throughout
the update function since we pass it in
as the argument to understand a little
bit better howdy three updates work
let's see what the selection currently
looks like a d3 select all on circle or
turns an array of twenty circles which
makes sense since there's 20 World Cups
plotted on the map currently and let's
put a breakpoint right after we bind
data to circles to see what it looks
like after we've found new data to it
and if you look at the circles variable
now we're before we bound data the SVG
select all above or turn an array of 20
elements with the newly bound data
filtered in this case since it only has
one element returns an array with only
one circle in it remember from our
previous Venn diagram we know that the
exit selection corresponds to every
element present on the page that does
not have any corresponding bound data in
this new data bind or in our case
databound unfiltered if we look at the
enter selection on the newly bound
circles you can see here that
corresponds to an array of a single
element which has an update property the
update property has a circle and that
circle corresponds to the new data we're
going to be adding in this case the year
nineteen thirty and if we inspect the
exit selection on the circles it says we
have an array of twenty elements
but notice near the bottom here that we
have a parent node as part of the array
so if there's 20 elements and there's
also an additional parent node element
that we didn't have can you look at the
list of circles here and figure out what
year of the World Cup is not contained
in the exit selection remember we have
run update with year nineteen thirty and
I've shown you that the enter selection
as one element under the update</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>