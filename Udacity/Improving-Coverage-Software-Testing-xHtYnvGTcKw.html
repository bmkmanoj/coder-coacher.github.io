<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Improving Coverage - Software Testing | Coder Coacher - Coaching Coders</title><meta content="Improving Coverage - Software Testing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Improving Coverage - Software Testing</b></h2><h5 class="post__date">2012-07-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xHtYnvGTcKw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so go to the test suite we're going to
go to the test remove after we've
removed everything from the tree we're
going to remove an element that we know
is not in the tree and of course after
we've removed everything from the tree
anything we choose should not be in the
tree so minus 9 99 will work as well as
any so we're going to go ahead and save
that and run the coverage tool again so
this time something interesting happens
what happened is the remove method for
the splay tree on removal of minus 9 99
so on the line that we just added causes
an exception to be thrown in display
function and so let's go back and look
at the splay tree code so when we remove
an element from the tree but wasn't
there it's supposed to raise the
exception key not found in tree on the
other hand what it's actually doing is
failing quite a bit below here in the
middle of the splay function when the
code does a comparison against an
element of type none and so that's
probably not what the developer intended
by adding just a little bit tour test
suite we seem to have found a bug not
anticipated by the developer of the
splay tree and I think this example is
illustrative for a couple of reasons
first of all the coverage tool the very
first time we ran it told us something
that we didn't know and this is my
experience in general that this is what
happens when you use a coverage tool
it's basically very similar to the first
time you run a profiling tool on a piece
of code where it turns out that usually
the functions that are using up cpu time
are not the ones that you necessarily
thought were using up cpu time what
coverage tools are very similar it often
turns out that the stuff that you
thought was going to run might not be
running early some of it it often turns
out that some of the stuff that you
thought was going to run doesn't get
right so it told us something
interesting and that's nice now on the
other hand if the coverage tool hadn't
told us anything interesting that is to
say if it told us that everything that
we hoped was executing when we were in
the unit test was executing well then
that's good too we get to sleep a little
easier the second thing to notice is a
much more subtle point and this point is
that we added a test case to execute
this line of code but it turned out that
the bug wasn't right here the bug was
somewhere completely different buried in
the splay routine and if we go back and
look at the coverage information it's
going to turn out that display routine
is entirely covered that is to say every
line of the splay routine was executed
during the execution of the unit tests
for the splay tree this serves to make a
couple of points first of all just
because some code was covered especially
at the statement level this doesn't mean
anything about whether it contains bugs
or not it just means that it ran at
least once the other thing is is that
then the second thing is we have to ask
the question what do we really want to
read into the fact that we failed to
cover something the thing to not read
into it is that a failed piece of
coverage is I'm
mandate to write a test that covers this
test case that's what we did that's not
a good general lesson rather the way we
should think about this is the coverage
tool is giving us a bit of a bit of
evidence is giving us an example
suggesting that our test suite is poorly
thought out that is to say that estimate
is failing to exercise functionality
that's present in our code and what that
means is we haven't thought about this
problem very well and we need to rethink
the test suite so to summarize that when
coverage fails it's better to try to
think about why we went wrong rather
than just blindly writing a test case to
exercise the code which wasn't cooked</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>