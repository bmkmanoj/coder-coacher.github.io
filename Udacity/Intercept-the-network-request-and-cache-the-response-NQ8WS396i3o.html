<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Intercept the network request and cache the response | Coder Coacher - Coaching Coders</title><meta content="Intercept the network request and cache the response - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Intercept the network request and cache the response</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NQ8WS396i3o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">first to get something on screen even if
it's not the latest data
we'll pull data from the cache like
service workers themselves getting data
from the cache object is a progressive
enhancement so we need to check if the
caches object is available in the global
scope if it is will read the caste
weather data from there and get
something on screen as quickly as
possible
next it's time to get the weather data
from the API with an ajax request if
you're feeling adventurous try using the
new fetch API but remember you'll
probably need to polyfill it so that it
works in all browsers when the get
forecast method fires it now makes two
asynchronous requests one that will try
and get data from the cache and one that
will try and make an AJAX request if
there's data in the cache it will be
returned extremely quickly usually
within tens of milliseconds then when
the Ajax request responds the card will
be updated with the freshest data direct
from our weather API perfect well okay
not quite there is a potential race
condition what happens if the network
respond before the cache when that
happened the latest data from the
network could be clobbered by the older
cached data for a weather app that's
probably not a critical problem you
might be caught without an umbrella or
you'll wear shorts on a cold day but
what about time sensitive data like
stock prices or a spreadsheet with
financial data in this case it's
important to have a flag indicating that
there is a network request pending and
only use the cached data if the network
request is still pending that ensures
that if the xhr responds faster than the
cache the flag will prevent the cast
from overwriting the latest data from
the network</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>