<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cache To Cache Transfers - Georgia Tech - HPCA: Part 5 | Coder Coacher - Coaching Coders</title><meta content="Cache To Cache Transfers - Georgia Tech - HPCA: Part 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cache To Cache Transfers - Georgia Tech - HPCA: Part 5</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FYkgffTCMy0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's look more closely at what is
called cash to cash transfers which is
what happens when Corwin has some Block
B in a modified state and another core
puts a read request on the bus so that
it wants to basically bring the Block in
its own cash at this point c1 has to
react because c1 is the one that has to
provide the data if we have the Block in
the M state that means that the only
up-to-date copy in the system is our
copy even the memory doesn't have an
up-to-date copy so if the data is going
to be sent to see to it had better be
our data but how and we have briefly
touched on this when we were discussing
the MSI protocol there are really two
solutions the first solution is aboard
and retry the idea here is that c1
somehow cancels c2 request and for that
we need some sort of an abort bus signal
that when a request is placed on the bus
another core can assert the abort signal
that tells the requesting core to kind
of back off and try again later
now that c2 request has been aborted c1
can do a normal right back to memory at
this point the memory has the up-to-date
data and when c2 retries its read
request it will get the data from memory
the problem with this approach is that
really from the time c2 makes the
request if this data was normally coming
from memory we would have a memory
latency so if this is just a read miss
we will have a memory latency but if it
is a read miss where another core has
the data we really have to have two
memory latencies before c2 can get the
data one for the write back to memory to
happen on c1 and then for us to actually
get the data from memory so the read
miss from c1 has a latency that is twice
the memory latency plus some so this is
why this approach is not ideal the
second solution is called intervention
in this case C one sees the read request
is being made
and it tells the memory somehow that c1
will supply the data instead of the
memory so normally the memory would
respond to a read miss request now c1
kind of tells memory that I will do that
and for that we need an intervention bus
signal through which c1 by asserting the
intervention signal signals to the
memory not to respond so the memory now
doesn't respond with the data but c1
does and now the memory must pick up the
data that c1 was responding with in
order to put it in the appropriate
memory block the reason the memory has
to pick up the data is that once c1
responds with the data both c1 and c2
will have the Block in the shared state
so both of them will think that the
block is not dirty and that means that
if the memory doesn't get the data now
it will never get the fresh data so by
picking up the data the memory ensures
that it gets the data that will not be
written back anymore so the disadvantage
of this approach is that it needs more
complex Hardware now a cache needs to be
able to kind of insert its data into
what would normally be the memory
sending data and also the memory has to
have enough intelligence to pick up the
data when a core is responding to an
intervention request instead of just
picking up the data when there is a
write back request in modern processors
we nowadays mostly use a variant of an
intervention approach and the reason is
that yes the hardware is slightly more
complex but fancier snooping protocols
actually eliminate the problem of memory
picking up the data and the complexity
to respond with the data is not too
large in contrast here the performance
suffers so pretty much between having a
fancier protocol and having enough
transistors from Moore's Law to actually
add this capability to caches we pretty
much can do this and not have to suffer
in performance like this</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>