<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Counting Barrier - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="Counting Barrier - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Counting Barrier - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FDlEuiGzwGw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so there is a problem with the
centralized barrier and that is that
when the counters become zero if these
guys immediately are a lot allowed to go
on executing before the count has been
reset to end then they can all reach the
next barrier and then they fall through
and that is a problem so the key thing
to do to avoid this problem or to
overcome this problem is to make sure
that the threads that are waiting here
they don't leave the barrier before the
count has been reset to it right so
they're all waiting here for the count
to become zero and once the count has
become zero they are ready to go but we
don't want to let them go yet we want to
let them go only after the count has
been reset to end so what we gonna do is
we're gonna add another spin loop here
and that is after they recognize that
the count has become zero they're going
to wait till the count is not n yet and
so this ordering of these two statements
is really important obviously so so we
want to wait till the counters become
zero at that point we know that the
value is over but we want to make sure
that the counter has been reset to N by
the last guy and once that has been done
then we are ready to go on executing the
code that we need to execute till we get
to the next barrier so we solved the
problem with the first version of the
centralized barrier and that is the
counting barrier by having a second spin
loop that's the problem right there are
two spin loops for every barrier in the
counting algorithm and ideally we would
like to have a single spin loop and and
that's the reason that we have this
particular algorithm which is called
sense reversing barrier if you recall in
the counting barrier we needed two
spinning episodes the first spinning
episode was when you arrive at the
barrier you decrement the count and wait
for the count to become zero that's the
first spinning episode and the second
spinning episode to leave the barrier
what you needed to do was to make sure
that the count has become n right those
are the two spinning episodes that were
there in the counting barrier and in the
sense reversal barrier we're going to
get rid of one of those spinning
episodes the arrival one
we'll get rid of it so we don't have to
spin on count becoming zero and we'll
see how that is done so what you notice
is that in addition to the count there
is a sense variable in the shared
variables that we have X we included a
new variable called sense variable
that's also shared by all the processes
that want to accomplish a barrier
synchronization and the idea behind the
sense variable is that the sense
variable is going to be true for one
barrier episode and it's going to be
false for the next barrier so because we
at most you have one batter at a time
and therefore if we call this barrier is
a true barrier the next barrier is going
to be the false barrier so that's the
way we can identify which barrier we are
in at any particular point of time so
far today a given thread is concerned by
looking at the sense variable</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>