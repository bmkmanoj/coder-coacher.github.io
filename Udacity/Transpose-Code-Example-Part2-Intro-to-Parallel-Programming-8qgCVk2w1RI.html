<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Transpose Code Example Part2 - Intro to Parallel Programming | Coder Coacher - Coaching Coders</title><meta content="Transpose Code Example Part2 - Intro to Parallel Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Transpose Code Example Part2 - Intro to Parallel Programming</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8qgCVk2w1RI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">would we compile it and run it I made a
really small matrix to begin with so we
can just see that it's acting correctly
so as you see our input matrix goes from
0 to 63 and the transpose version does
the same thing down the columns instead
of the rows so we've written correct
code as we expected and we're just going
to store this routine for generating
this transpose and the gold matrix and
we'll use that to compare so we don't
have to keep printing out these matrices
for the rest of the lecture I'll leave a
smaller window so that we can see the
results without actually printing out
the matrices okay so here's how you code
transpose on a serial machine like a CPU
and here's how you call it so let's do
our first CUDA version we'll copy this
paste it make it a kernel rename it so
now we've got a kernel that will operate
on the GPU and to call it we need to do
a few things we need to allocate space
for the input and output matrix on the
device so we'll allocate those and we
need to copy the input matrix onto the
device call our kernel so what you see
here is I've taken that same kernel that
we wrote a serial kernel I've called it
on a single thread running in a single
block past indiana d out and then i copy
my result and we're done see that was
quick
GPU programming is easy i'm actually
making an important point here ok this
code is going to run correctly and it
was really easy to write and the problem
of course is that it won't perform very
well right it's using a single thread
which is a really small fraction of the
horsepower of a GPU especially a high
end GPU which can run tens of thousands
of threads concurrently so let's go
ahead and time this okay so I've added
some timer code okay we're going to
start the timer measure it and I also
added I'm using a helper function here
called compare matrices which just
compares the output to to the golden
matrix that we calculated to make sure
that we did the transpose correctly
let's compile again
run again great so yes we performed the
transpose successfully and it took some
very small fraction of a millisecond but
this was a really small problem let's
make this problem bigger again say a
1024 by 1024 matrix so now we've got
roughly a million elements to touch and
we're going to do this in a single
thread okay now this is taking almost
half a second that's a long time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>