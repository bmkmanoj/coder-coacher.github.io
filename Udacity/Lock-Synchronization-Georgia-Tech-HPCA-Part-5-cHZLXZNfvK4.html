<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lock Synchronization - Georgia Tech - HPCA: Part 5 | Coder Coacher - Coaching Coders</title><meta content="Lock Synchronization - Georgia Tech - HPCA: Part 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lock Synchronization - Georgia Tech - HPCA: Part 5</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cHZLXZNfvK4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's look at what log
synchronization looks like so we said
that a lock or mutex is just a location
in memory so let's say that we are using
integers to represent the log structure
so really a lock is just a number
we initialize a lock variable so you
pass a lock variable to initialize to
let's say a lock init function and what
it's going to do is set the lock to an
unlocked value which let's say that's 0
so pretty much lock initialization is
just write 0 to that memory location
that represents the lock zero means
unlocked in this case and now the lock
function the function two tries to
acquire the lock and make sure that we
are alone in doing that we'll do
something like this it will spin as long
as the lock that is 1 which is the
locked value and once it sees that lock
var is 0 not 1 it's going to put 1 in
that value to mark it as locked and then
we can enter the critical section
because others will now see our 1 and
spin there and then to unlock we will
just set the lock variable back to being
free once we do this
coherence ensures that whoever is
waiting here now sees a 0 and acquires
the lock themselves so we let them go
into the critical section
but this lock function doesn't really
work suppose you have two threads the
purple and the green that come to this
point at the same time the lock was
initialized to 0 both of them read the
lock var for the first time cz row of
them exit this loop because the lock var
is not 1 so both of them come here right
1 to the lock var and then leave this
lock function and now both of them are
in the critical section which is what we
were trying to prevent what we really
need to correctly implement the lock
function is that the looking at lock var
and sing 0 and the right thing to lock
var of 1 needs to be atomic which means
we really need to do this in a critical
section of its own to make sure that
when we see a 0 we end up writing one
before anybody else gets to see a 0 or
at least when we see a 0 we try to write
1 but we know if we were the one to
write 1
or if somebody did it before us we
should not write one if somebody
succeeded in writing one before us so we
have some sort of a paradox here in that
we need logs here in order to implement
the log function so how do we ever
support the log function because in
order to have a working log function we
really need to have a log in and unlock
here</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>