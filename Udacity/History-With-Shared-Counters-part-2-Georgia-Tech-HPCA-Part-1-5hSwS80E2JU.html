<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>History With Shared Counters part 2 - Georgia Tech - HPCA: Part 1 | Coder Coacher - Coaching Coders</title><meta content="History With Shared Counters part 2 - Georgia Tech - HPCA: Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>History With Shared Counters part 2 - Georgia Tech - HPCA: Part 1</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5hSwS80E2JU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so this is how our history with shared
counters would work we have the program
counter we take some of the lowermost
bits use that to index into what we will
call pH T or pattern history table this
is a table that simply keeps the history
bits alone for that branch so if we have
an 11-bit history this table will have
11 bits per entry so it doesn't have the
two bit counters but we do need the two
bit counter to eventually tell us
whether the branch is supposed to be
taken or not taken so what we do is we
take this history from this table
combine it in some way usually using an
XOR with the bits of the PC and use that
to index into what we still will call
the branch history table this branch
history table has entries each of these
entries is just a single two bit counter
so each entry is very small and that
entry will tell us whether we should be
predicting taken or not taken when the
branch outcome is known we use the same
history and PC combination to index back
into this two bit counter increment or
decrement it based on the current
decision on a branch and then we shift
in that pattern also into the phd
entries so that this history is ready
for the next prediction on this
particular branch so the idea is that
the program counter here tells us which
branch we are talking about we hope that
the pattern history table has one
history per branch that we have
different histories and different pieces
will result in different two bit
counters being used and thus the
decisions will be made for kind of like
a combination of the history and the PC
note that it is possible for another PC
to map somewhere here but that history
when ex-ored with that PC gives us maybe
the same two bit counter so it is
possible to have some overlap here but
the idea is that this way for each PC we
have a single history of all the
possible histories where there is like
two to the end of them we are really
using only a very small number of
counters because very few histories are
actually happening and that means that
if we have a relatively large array of
to be
counters the possibility of conflict is
very low but this allows us to have a
lot of bits of history for example if we
take 11 bits of PC and we index into the
PhD with them we will need 2 to the 11th
histories times let's say 11 bits of
history we exert those 11 bits with
these 11 bits so we will have 2 to the
11th 2 bit counters so the overall cost
of this predictor will be 2 TD xi x xi
for the histories plus 2 2 xi times 2
for the counters which ends up costing
us 26 kilobits this is much less than
what the cost would be if we had an
array of 2 bit counters for each
possible history in each entry over here
pretty much these 2 to the 11 times 2
would need to be in each entry here if
we didn't do the XOR ring like this note
also that we don't have to have these
numbers here and here equal we can for
example take something like 10 bits of
the PC to index into the PhD which gives
us only 2 to the 10th histories and have
a 16 bit history so that we can have 2
to the 16th entries here and so on
it still will keep the overall cost in
the you know tens of kilobits not
megabits or Giga bits that we would get
if we try to put together long histories
with dedicating 2 bit counters for each
possible history in each entry</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>