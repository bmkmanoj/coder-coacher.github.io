<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Set Unset - Data Wranging with MongoDB | Coder Coacher - Coaching Coders</title><meta content="Set Unset - Data Wranging with MongoDB - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Set Unset - Data Wranging with MongoDB</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bgOky14w77Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we just looked at a way of
modifying a document using the save
method now let's look at an alternative
way of updating documents what I want to
introduce you to here are two things one
the update command or method in pi Mongo
it's a method on collection objects and
the set operator let's talk about update
first update expects a query document as
its first parameter and then as its
second parameter it expects an update
document and that update document
specifies what operations MongoDB should
perform on the document matching this
query now by default update operates on
just one document the first one it finds
matching the query document the
semantics have set our if this document
does not already contain the field
specified here then what should happen
is that field should be added with this
value if the document already contains
this field then that field will be
updated to the value supplied okay now
before I run this code what I'd like to
do is introduce you to the inverse
operator for set which is unset okay so
these two pieces of code are almost
exactly the same the only differences
are here and here the semantics of unset
are for whatever document matches this
query if it has the fields specified
here remove it this value is ignored now
if this document does not already have
this field then this call has no effect
okay so now we've looked at the set
operator and the unset operator and
their use with the update command now
let's go and run these two programs and
see what their effect is but first I
want to query for this document in the
mango shell to look at its current state
and then we can see how running those
two programs changes its state so I'm
going to run a find one command here now
this is exactly the same command as we
saw in the Python programs we were
looking at the only difference is in the
name and the names are different merely
to match the conventions of the two
different programming languages
represented in this case JavaScript
because the language of the mango shell
is JavaScript and in the other case
Python
we're using the PI Mongo driver okay so
going to issue this query and I want to
point out that the iso code is in fact
present now let's run the unset example
and then go back to the Mongo shell and
issue our query again okay and note that
the iso country code has disappeared
because we just ran this command ok now
let's run our set example and again
remember this simply uses the set
operator will issue our query again in
the Mongo shell and note that the iso
country code is now in our document
again ok so now we've looked at two
different commands that allow us to
modify documents the save command and
the update command and we've looked at
two different operators being used in
conjunction with the update command ok
now I feel like it's necessary before we
move on to just give you a heads up it's
really easy to forget to put an operator
here ok if you issue your command this
way what's going to happen is this
entire document the document matching
this query will be replaced so that it
contains the underscore ID field and
this field only so essentially the
document will be composed entirely of a
single field so always take care to use
update correctly</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>