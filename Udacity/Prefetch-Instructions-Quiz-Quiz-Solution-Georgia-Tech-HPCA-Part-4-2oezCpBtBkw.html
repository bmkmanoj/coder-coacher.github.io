<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Prefetch Instructions Quiz Quiz Solution - Georgia Tech - HPCA: Part 4 | Coder Coacher - Coaching Coders</title><meta content="Prefetch Instructions Quiz Quiz Solution - Georgia Tech - HPCA: Part 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Prefetch Instructions Quiz Quiz Solution - Georgia Tech - HPCA: Part 4</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2oezCpBtBkw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let's look at the solution to our
prefetch instructions quiz let's look
first at this inner loop and the
prefetch distance for fetching elements
of the B array we were told that each
iteration takes two ten cycles if there
are no misses and we want to eliminate
misses so if we do prefetch incorrectly
there will be ten cycles per iteration
here the Miss penalty and the memory
latency are two hundred cycles which
means that we should be issuing a
prefetch for a B element and two hundred
cycles before we reach it corresponds to
twenty iterations so we will prefetch
twenty iterations ahead of time and we
will do it because if we do it this way
the prefetch will arrive just in time
for B to get its value now we need to
figure out what to prefetch here and
whether we should be doing the
prefetching we should not be doing the
prefetching if by the time we reach the
access to that element of a know that
this should be I plus 1 or something
larger this eliminates that element from
the cache so the question is how much
cash stuff does each iteration of this
outer loop bring in and the answer is it
brings a thousand eight byte elements
here and an element of a so if we
prefetch with a distance of one what we
get is that our prefetch is done after
200 cycles there are 10,000 cycles here
so it's in time to be accessed in the
next iteration of the outer loop the
question just does this element get
kicked out before we can use it and the
answer is no because eight times this
1,000 ends up being 8,000 the cache is
16 kilobytes so basically if we prefetch
here the element of the a array that we
prefetch will still be there when we
eventually get to the next iteration of
the outer loop where we get to use it so
the answer is we should prefetch with I
plus 1 and we should not be selecting
this note that we should not be
prefetching with I
+20 here if we do that there are 20
loops in between when we prefetch and
when we actually use it and each of
these loops is bringing in 8,000 bytes
worth of B so if we prefetch that early
then 20 times 8 is larger than our cache
and the element we prefetch will be
kicked out from the cache so that would
be an example of premature prefetching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>