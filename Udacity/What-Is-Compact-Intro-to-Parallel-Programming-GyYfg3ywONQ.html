<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What Is Compact - Intro to Parallel Programming | Coder Coacher - Coaching Coders</title><meta content="What Is Compact - Intro to Parallel Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What Is Compact - Intro to Parallel Programming</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GyYfg3ywONQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're going to start with what is
compact and so let's consider a common
problem in computing we have a set of
things like cards and we want to filter
that set to get a subset that we care
about so this comes up all the time we
might decide that we only want to do
computation on the Diamonds from this
set of cards and take all the other
cards and throw them away we might
select students from the roster of this
class we have perfect scores on the
programming assignments my background is
in computer graphics for instance so an
example there we might have a lot of
objects to draw in a scene but we only
want to keep those that actually
intersect the screen we call this
operation compact because we're
compacting the large input set of
potentially many items into something
smaller another word for this is filter
now why do we want to do this well if we
only care about a subset of the input
and we want to run some computation on
that input it makes more sense to throw
away the items that we don't care about
and only compute on the objects that we
do care about we can rightfully assume
this is both cheaper to compute and
takes less space we have a set of
objects as 0 s1 s2 s3 s4 and so on and
we have what we call a predicate that's
this line here predicate is a function
that inputs an s object and returns true
or false for that object so for instance
this predicate we're looking at here is
is my index even so for s 0 s 2 and s 4
the predicate returns true for s 1 and s
3 the predicate returns false and so on
we want to calculate s filtered by this
predicate so we only keep those objects
in s for which the predicate is true so
what form do we want the output of this
filter of this compact operation to be
we have a choice of how to do it we can
either have a sparse output or a dense
output for the sparse output each
element tracks to its same position in
the output and if an input has a false
predicate we just put some sort of null
element in there alternatively we can
have a dense output where all the
elements for which the predicate is true
or then packed together into the output
so they're all sitting right next to
each other
there aren't any gaps in the output in
general we want the out
of a compact operation to be dense and
let me tell you why so let's go back to
one of the examples I cited earlier
selecting the 13 diamonds from a deck of
52 playing cards and running a procedure
called compute card on each of the
diamonds we could structure this code in
one of two ways we could either wrap our
computation in a big if clause so what
we're doing here is on each card we
check if it's a diamond and if it is a
diamond then we run compute card
otherwise we do nothing this is the
sparse approach or we could run a
compact on the deck of 52 cards to get
back 13 diamonds by running compact on
the cards using the is diamond predicate
and then run a map on the compacted
cards calling compute card only on the
Diamonds so note that the sparse
computation on the left side is going to
launch 52 threads one per card and 39 of
those threads will be idle the dense
computation on the other hand and kurz
the cost of the compact but then in the
map step it only launches 13 threads if
the compute card routine is at all
expensive then the sparse approach loses
because we have to launch four times as
many threads 3/4 of those threads are
going to be idle while the other quarter
of the threads are actually doing useful
work but because both idle and non idle
threads are running in lockstep we're
still paying the runtime cost of having
four times as many threads therefore
generally you prefer the dense approach
especially when this computation is
expensive</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>