<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Getting Started with IDB | Coder Coacher - Coaching Coders</title><meta content="Getting Started with IDB - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Getting Started with IDB</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/43a0oSaieTo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay in this chapter you're going to get
a crash course in indexdb so hold on
tight let's get through this as quickly
as possible and hopefully in one piece
I'm gonna start by going to the browser
and opening IDB test this is just a
blank page with a script tag this script
is in public je s ID B test index J s
all it contains at the moment is an
import for the ITB library we saw before
so okay then let's create a database we
can see from the library's code that the
function signature is open and then the
name of the database the version then a
callback to set the database up so let's
do that
I'm gonna call ID B to open then name
the DB test DB version 1 and pass in my
setup callback this function will be
called if the browser hasn't heard about
this database before or if the version
it knows about is less than this number
here this function gets a special
upgrade DB parameter which we use to
define the database to ensure a database
integrity this is the only place you can
create and remove object stores and
indexes the API for upgrade DB is in the
library but it's mostly just a mirror of
the real index DB API except for a few
minor differences which will cover the
docs tell me create object store is the
same as ID b so md n can give us the
full story and there's the full detail
of the api so i'll create an object
store called key Val because we haven't
told it otherwise this store has a key
that's separate to the data which is
what we want for a key Val store I'm
going to add some content here too
we can see from the library Doc's that
an object store has these methods which
behave the same as ID B except they
return a promise this is the thing that
makes the library way more usable than
plain IDB so I want to put an item into
the store
so let's look up the docs for that mdn
shows us doc put takes an item and a key
and returns a request these request
objects are the thing that makes ID be
really difficult to deal with so
whenever I DB would return a request the
library returns a promise and yes the
signature here is value key rather than
key value which is a real gotcha but
you'll see why it's like that later on
in fact most of the IDB api is stupid
but
for sensible reasons so I'm going to put
the value world and set the key to be
hello with that we've finished setting
our database up and don't open returns a
promise that resolves with a database
object so we'll star that for later we
can use that database object to get and
set items in a database but for now if
we refresh the page and run the code we
can pop over to the resources panel in
dev tools and oh yeah right click and
refresh and there we can see our
database we can see the object store and
we can see the value inside so now if I
want to read from the database I need to
create a transaction the function to do
this is DB transaction passing in the
object stores I'm going to be using just
key Val then I call object store passing
in the name of the object store I want
key Val this seems a bit repetitive but
it's possible to have a transaction that
uses multiple object stores I called doc
get on the object store passing in the
key I'm interested in hello this returns
a promise which resolves to the value
I'm looking for which I'll log it's over
in the browser if I hit refresh
there's the console log but say I want
it to add another value to the object
store to do that I create a transaction
just as I did before but I specify that
I want to read right this time now I can
get my object store as before but this
time called dot put on it to set a value
I'm going to set the key foo to be value
bar dot put returns a promise but this
promise doesn't necessarily mean the
operation worked as we saw if the
transaction fails all the operations are
a part of it are undone this means that
you can do a lot of work in a
transaction and be sure that it won't be
left or accessed in some kind of
half-finished State either all happens
or none of it happens transaction dot
complete is a promise that fulfills if
and when the transaction completes and
it rejects if it fails once the
transaction completes I'm going to log
out a success message now I can refresh
the browser and see the console log and
in the resources panel there it is
there's the value we set now I wanted to
talk a bit more about IDB features but
it looks like we're getting rude
interrupted by a certain mic Wales mic
what do you want you've been talking for
quite a while there I think it's time we
let the student have a go okay yeah I
think you're right
take it away Mike</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>