<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Load Store Queue Part 2 - Georgia Tech - HPCA: Part 3 | Coder Coacher - Coaching Coders</title><meta content="Load Store Queue Part 2 - Georgia Tech - HPCA: Part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Load Store Queue Part 2 - Georgia Tech - HPCA: Part 3</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mbwf-CoA5Zg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it is entirely possible that for example
for this store and this load the store
doesn't have the address at the time
when the load produces the address and
now what do we do the options for this
situation are make loads and stores
execute in order so this load is not
allowed to execute until all previous
instructions have been completed that
guarantees that at the time when we want
to figure out what to do with this load
we have all the store addresses and
values so we can have a situation just
like this one here but of course that
orders these instructions so for example
loads cannot really proceed so for
example if this load has been a cache
miss and takes a long time all of these
instructions will have to wait for that
the waiting can be reduced by not
waiting for all of these instructions to
complete instead we just wait for all
previous store addresses to be known
once we know all the store addresses our
load address can be compared with them
and then we know what to do we either go
to memory if nothing matches we get the
value from the store if it is available
or we wait for the store to produce the
value if the address matches but the
store is not done yet with its value the
third option is the most aggressive and
it is to just let the load go anyway so
pretty much when we produce the address
of the load we check the addresses of
the previous stores if one of them does
match we wait for it because clearly
going to memory will be wrong but if
none of them match we ignore the fact
that some of them might match once we
lose all their addresses so in this
situation this load will end up going to
memory now two things can happen one is
this store resolves to something like 74
in which case we confirm that this was
done ok or the store might actually get
the address of 174 in which case this
load loaded the wrong value from memory
in that case we need to recover this
load loaded the wrong value and possibly
supplied it to other instructions so in
this case the stores
when they produce the address would
check whether any of the loads that
follow them match the address and we're
done and if so then request a redoing of
the load and all of the subsequent
instructions to fix the problem of the
load loading the wrong value most modern
processors today actually go with the go
anyway option because it produces the
best performance if we let the loads go
without waiting for store addresses it
turns out that most of the time we are
right so this most of the time
successfully loads the value earlier
then if we waited but occasionally we
have a cost of the recovery because we
were wrong about this and then there are
entire schemes that try to predict when
is this going to happen
let the loads go if it's unlikely and
for loads that often conflict with some
store wait for that store to produce the
address before we proceed</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>