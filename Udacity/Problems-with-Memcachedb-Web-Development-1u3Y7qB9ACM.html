<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Problems with Memcachedb - Web Development | Coder Coacher - Coaching Coders</title><meta content="Problems with Memcachedb - Web Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Problems with Memcachedb - Web Development</b></h2><h5 class="post__date">2012-05-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1u3Y7qB9ACM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's take it from from which of
these pieces don't exist anymore all
right so after you left but before I
started memcachedb hit a scaling wall
and it just would not go any further the
rights just were too fast for it
was it was did you guys try adding more
memcache DVD boxes I don't know you
weren't there for that yeah that caste
was not designed for the heavy load we
were throwing out it's basically this is
a memcache code bolted on top of
Berkeley DB but just kind of neat but it
wasn't really kind of designed to work
at that kind of our scale or our use
case which was just basically sending as
many queries that isn't good so you guys
got rid of this right and replace it
with Cassandra so it's a distributed no
sequel database the way it works is you
have rows and a row is charted by its
key to somewhere in the ring of servers
so you get automatic sharding across
this entire ring and when a row has
columns inside of it and that's where
the actual data is stored so this moves
to Cassandra and was pretty similar
yeah so so I'll let you draw Cassandra
in there and I'll explain a little bit
more about so man we talked about with
databases you can you can replicate them
where you send the same data to multiple
machines which helps for load and
durability this conflicts are here or
you can shard them which is you send
some chunk it out at the one machine and
another chunk of data to another so
let's say we're talking about in this
case this is we started using this for
the pre compute stuff first yeah so
you've got these listings every
subreddit has like a hot page and that
would be pre computed so you can store
you know hot pages for some reddit's on
this node somehow pitches for edits on
this node and all around so each node is
not a an exact copy of every other node
right now there is some overlap right so
it's configurable but in our case we're
using replication factor of 3 which
means that
if a piece of data lives on this node it
is also on this one and this one and
that's that happens all around the ring
and why do you do that
that's simultaneously a read can be
serviced from any one of the three if if
we allow it to be which means that if
one nodes going slow we don't go really
slow and also it means that if any one
node just ceased to exist we wouldn't
lose all our data for that segment of
the data let's say you have content this
guy this guy and this guy and we lose
this note that's the content get
redistributed no no no there they're
assigned a key space and you have to
move tokens if you want to rebalance the
ring okay and that's something that you
as a developer have to do yeah that's it
that's one of the things as the team
grows too is people's roles change you
know when you're a small website you are
the designer developer and sysadmin
all-in-one and you guys have a whole
team of operations guys
yeah they're very good from well they're
extremely good when I left it was me and
David who now works with me at Hipmunk
basically developers and Ops guys and we
were better developers and we were ops
guys so that explains some of us</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>