<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>System Calls  Going from User to OS Code | Coder Coacher - Coaching Coders</title><meta content="System Calls  Going from User to OS Code - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>System Calls  Going from User to OS Code</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/O1QcuMSGrVM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we already talked about system
calls in fact I said think about the
cost of a system call I compared to a
regular call so systems calls allow you
to go from user mode to OS or the system
mode so let's talk a little bit more
about system calls first of all they are
used to transfer control between user
and system code or execution that must
happen in user mode and system mode the
interesting thing about these calls are
that they cannot be arbitrary these are
a set of calls that user level code is
allowed to make okay this is defined by
the application programming interface or
the API that your operating system
provides so you have these calls and
these calls have to come into the
operating system in a controlled fashion
okay so we said this called the
different than regular calls they have
to come through what is called used to
be called call gates this is sort of
special ways in which you can enter from
user to it's a defined way transition
from user to system level you come
through these call gates and what
happens as a result of that is well we
know that it's it's a call so we're
going to return at some point so we have
to keep track of where we're going to
return and the user code once the system
call completes but the processor
execution mode has to change as a result
of that isn't it we're going from user
mode to system mode so the pool is ring
or the mode is going to change and we
actually going to be able to we'll have
to change the memory mappings data
structures that keep track of those
because we're going to be able to access
memory now that we couldn't access
before so some registers have to be
saved others have to be loaded and and
things like that so all that work has to
be done so now we are executing in a
different protection domain in fact this
used to happen through sort of a and
interrupt or a trap into the system from
user mode but in x86 we actually have
explicit instructions this is different
from your regular call return these are
execute a system call that sister sis
enter enter that the system or the
operating system and when you done you
return by doing this another special
instruction
consis exit so there are these
instructions that help you implement
this system calls that we are talking
about keep in mind that they are more
expensive because now we are using Yui
doing this work that we didn't have to
it is we have to check what kind of
qualities arguments that are being
passed save information when we come
back and change memory mappings so we
can access things that we couldn't
before use this special instructions
rather than the regular ones and so on
so that's what makes it costlier or more
expensive</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>