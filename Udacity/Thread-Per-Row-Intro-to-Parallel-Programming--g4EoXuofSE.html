<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Thread Per Row - Intro to Parallel Programming | Coder Coacher - Coaching Coders</title><meta content="Thread Per Row - Intro to Parallel Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Thread Per Row - Intro to Parallel Programming</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-g4EoXuofSE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we'll start with the thread per row
approach let's start with the data
structure we're going to use the CSR the
compressed sparse row format here just
as we did in unit 4 recall that value
contains the nonzero elements in the
matrix index gives the column of each
entry and row pointer contains the index
of the beginning of each row so each
blue dot here corresponds to the element
that begins each row which is element 0
2 3 &amp;amp; 5 so let's just walk through some
code note this code like many spendy
routines calculates wide plus equals MX
so it multiplies M by vector X and then
adds it to the element Y and reset the
result as wife
it adds the matrix vector product to the
destination vector y we're going to
start by this line here computing the
global index for each thread the thread
with this index I will calculate the
result for row I next we're going to
have an if statement if row less than
the number of rows why do we have this
if statement we're going to launch many
blocks of many threads and it might be
that the number of rows is not a perfect
multiple of blocks and threads this if
statement is a common one in CUDA
programs inside the if is the meat of
the routine recall that row pointer
contains the indices of the starts of
each row so for instance the value 3
here says that the third element D here
is the beginning of a particular row
that then contains D and Eve so we're
going to start with D we're going to
start at the beginning of a row and
we're going to go up to but not
including the first element of the next
row so that's this loop right here and
at every iteration of that loop we will
multiply two things one is the value of
that element so in this case D and the
second is we check which column D is in
in this case D is in column zero so
we're going to look up the vector
element at position zero and multiply D
by that vector element so that's this
value times that vector element and then
add that to dot and when we're finally
done we take our destination value Y add
it to dot and put it back in to wife</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>