<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Introducing the IDB Promised Library | Coder Coacher - Coaching Coders</title><meta content="Introducing the IDB Promised Library - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Introducing the IDB Promised Library</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/79KULwhfN50" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">when the user opens whitter we want to
start by showing the latest posts the
device received before going to the
network then we make the WebSocket
connection and we start receiving new
posts one by one when we receive these
posts we want to display them of course
but also we want to add them to the set
of posts we already have stored we also
want to remove entries are too old to be
worth keeping a database is the best
model for this it means we can add and
remove individual posts as needed it's
right over them and query the data the
web platform has a database called index
DB and it's fair to say it has a bit of
a bad reputation but hopefully we can
break through that in this chapter and
we're not going to touch our
serviceworker script for a bit we're
going to concentrate on learning IDB
shape and how it ticks then we'll
integrate it into a whole offline first
experience if you've used no SQL
databases before IDB will seem kind of
familiar if you've only used relational
databases before this might seem a
little weird but if you've never used
databases before well that might even
help as you can come to index DB fresh
without trying to translate it too
similar but ultimately different things
you've encountered first up here's a
shape of index DB databases with index
DB you can have multiple databases with
whatever name you give them but we're
only going to be creating one generally
you'll only have one database per app
that database contains multiple object
stores generally one for each kind of
thing you want to store an object store
contains multiple values these can be
JavaScript objects strings numbers dates
or arrays items and the object store can
have a separate primary key or you can
sign a property of the values to be the
key the key must be unique within an
object store it becomes the way to
identify a particular object later you
can get set add remove iterate over
items and object stores as part of a
transaction all read or write operations
in index DB must be part of a
transaction this means that if you
create a transaction for a series of
steps and one of the actions fail none
of them are applied the state of the
database would be as if none of the
steps happened you can also create
indexes within an object store which
provides a different view of the same
data ordered by particular properties
the model here is similar to a
of databases which makes a lot of sense
the browser support is good as well with
every major browser supporting it so why
does indexdb have such a bad reputation
unfortunately the API is a little horrid
and often creates spaghetti code it's
all a synchronous which is fine but it
predates promises so it kind of invented
its own event-based
promise system which creates really
confusing code now I'm a true believer
in teaching the web platform rather than
libraries but ID B's API is so clumsy
and I'm gonna chicken out of doing that
we're going to use indexdb promised this
is a really small library that mirrors
the indexdb api but uses promises rather
than events but other than that it's the
same as indexdb so anything you learn
using this library you can apply to
using indexdb directly in fact if you
want to spoil your day really early
feel free to avoid the library and write
indexdb code directly but all the
examples will be using the library in
the next chapter we'll take a look at
how you'd create a real-life index
database in the browser</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>