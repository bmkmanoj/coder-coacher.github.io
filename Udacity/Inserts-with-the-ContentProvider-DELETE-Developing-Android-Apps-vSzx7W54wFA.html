<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Inserts with the ContentProvider DELETE - Developing Android Apps | Coder Coacher - Coaching Coders</title><meta content="Inserts with the ContentProvider DELETE - Developing Android Apps - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Inserts with the ContentProvider DELETE - Developing Android Apps</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vSzx7W54wFA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right let's get serious now we need
to move to using a real task to fetch
the weather after all weather is serious
business let's create a separate
fetchweathertask
to populate our content provider
database and we'll start by moving our
existing tasks over to this new one wow
it's good to get that big task out of
forecastfragment
and we're going to change the parameters
to string void void oh we've got a lot
of compile errors to fix that's okay for
now we're going to delete everything
except for the doing background part of
the async task
let's give it a constructor and pass in
a context in doing background let's save
off the location query as a string to
make the code easier to understand and
for fun let's fetch the maximum 14 days
of forecast data since we've temporarily
deleted get weather data from JSON we
can remove it from the try catch at the
bottom we're going to look for lots of
additional data from the open weather
API to make this easy here are the
strings will use we'll also get the city
name the latitude and longitude returned
by open weather now we do have to wrap
this in a try in order to make sure that
we handle the exception all right now
we've handle the exception so everything
compiles and hey look we've got the city
name in coordinates hmm we've now gotten
the location that we can use to insert
things into the database and we haven't
done this in a while so it's time for a
programming exercise but before we can
do that let's actually make sure that
your app can really compile let's go
back to forecast fragment and take a
look at how fetchweathertask is working
one is it fetch weather task has been
require that we get an activity or some
other context and pass that in there
another thing we can do is remove these
pesky shared preferences and there we
have it a utility function that gets us
our preferred location all right so now
we're ready to run the application so we
can actually do the next exercise once
again
we're going to be calling into our very
new fetchweathertask
but it's not going to do anything other
than trying to read some JSON so we've
got to make it do something beyond that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>