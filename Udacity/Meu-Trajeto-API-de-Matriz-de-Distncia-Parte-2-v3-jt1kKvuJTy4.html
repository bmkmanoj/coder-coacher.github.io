<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Meu Trajeto - API de Matriz de Distância Parte 2 v3 | Coder Coacher - Coaching Coders</title><meta content="Meu Trajeto - API de Matriz de Distância Parte 2 v3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Meu Trajeto - API de Matriz de Distância Parte 2 v3</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jt1kKvuJTy4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I can specify the output language the
units in metric or imperial and more
check out the link in the instructor
notes for a full list of optional
parameters let's build this feature into
our site in the form of a search within
time function we're going to expand our
user control window to allow the user to
specify the number of minutes they want
to take to get to a certain place
whether they walk drive bike or date
transit we could do within a certain
distance but in New York City i know
people usually don't drive and I think
time matters more to our users so we're
adding in a bit more HTML here we're
going to give the users the option to
choose a maximum duration so the maximum
time they'd like to spend commuting and
an option to choose a travel mode then
we'll give them a place to input the
address that they're interested in and
will prompt them for something like
their office address and a Go button and
we'll add in some additional CSS then as
usual we'll just add an event listener
on the Go button to call our new
function which will call search within
time now at the high level what this
search within time function is going to
do is use the distance matrix service to
calculate the distances and the
durations of travel between each of our
markers and the location that the user
entered will create our distance matrix
service which we'll use and will capture
the user entered address and check to
make sure it isn't blank if it isn't
will create an origins array from our
list of markers and use the user enter
address as the destination and will
capture the travel mode that was also
entered by the user finally we'll call
the get distance matrix function passing
in our origins are single destination
the travel mode and specifying the unit
should be Imperial when we get back the
response will check to make sure the
status is ok and if the status is ok
will display all of the markers that fit
the criteria that the user entered and
we'll do this in a separate function
since this is getting huge if the status
wasn't ok we're going to alert the user
with what the status was this is an
example of a more specific error message
let's
on to the next piece to display the
markers that were written the time of
the user entered ok so again we just use
the distance matrix service we passed in
all of our markers as the origins and
the users important place as the
destination now that we got back the
responds we have to parse through it to
get the useful data will recapture all
of the origins and destinations from the
response and also capture that user
entered maximum travel duration which
was in minutes we have a nested loop
here to create one element / origin and
destination pair that element is going
to have a distance and duration from
point A to point B we want to capture
both the distance and the duration and
text form because we're going to display
that to our users and we also need the
value of the duration which we're going
to compare to our maximum value that was
entered by the user if the duration is
within that maximum value then we'll
display that marker on the map we're
also keeping track of this at least one
variable this is important because even
if we get an OK response from the get
distance matrix function if we don't
find any markers that are within the
acceptable commute we want to let the
user know for each marker that does
appear will create a small info window
will display the duration and the
journey distance in that info window
finally we'll put a little event
listener onto that marker so that if the
user clicks on it will close the little
info window and make room for a big one
that has a street view panorama let's
test out this feature i'd like to stay
within a 30 minute walk of my office I
can see that two listings fit that
criteria and if I select them I can see
more details before we move on let's
review the distance matrix functionality</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>