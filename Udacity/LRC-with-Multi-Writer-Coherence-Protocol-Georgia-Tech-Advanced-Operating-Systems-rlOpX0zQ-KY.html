<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>LRC with Multi Writer Coherence Protocol - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="LRC with Multi Writer Coherence Protocol - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>LRC with Multi Writer Coherence Protocol - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rlOpX0zQ-KY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">that brings us to a new coherence
protocol which is multiple writer
protocol so the idea is we want to
maintain coherence information still at
the granularity of pages because that is
the granularity at which the operating
system operates and therefore the DSM
can be integrated with the operating
system if the granularity of coherence
maintenance is at the level of a page
but at the same time we want to allow
multiple writers to be able to write to
the same page recognizing that an
application programmer may have packed
lots of different data structures within
the same page so we could see how this
multiple writer coherence protocol works
and in particular we're going to use
that in concert with lazy release
consistency the background for what I'm
going to describe is covered in the
paper that is a sign for you which is a
TreadMarks paper I encourage you to read
that paper to get all the details but
here I'm going to give you a high-level
view of how LRC is integrated with
multiple writer protocol in a TreadMarks
system so a process of p1 acquires a
lock and makes modifications there's
notation that I'm using is to indicate
that these pages XY and Z actually they
are data structures that are being
modified but we are maintaining
coherence at the level of pages so we
will say that the data structures that
we're modifying within this critical
section are contained in pages XY and Z
and so those are the pages that are
being modified within this critical
section when processor p1 execute this
piece of code now the operating system
has no knowledge of the association
between this lock l and the pages that
are being modified all it knows is that
within the critical section these are
the pages that were modified that's what
the operating system knows and what
we're going to do is we're going to
create a diff of the changes that were
made to the pages x y and z in this
critical section so we know at the
beginning of this critical section what
the contents of the page XY and z
and at the end of this critical section
we're gonna find out what is the
difference that has been made or what
are the changes that have been made and
compute the diffs between the original
page and the modified page X D Y D and
ZD r the diffs
two pages x y and z respectively as a
result of executing this critical
section so the coherence protocol we're
going to use is LRC or lazy release
consistency so the next time the same
lock L is requested by some other
processor P 2 we're going to first
invalidate the pages we know were
modified by the previous lock holder
because this is information that is
available to the DSN that at the point
of unlock it knows that these were the
pages that were modified by this
critical section it doesn't know what
part of the pages were modified that's
contained in the lifts but it knows that
pages x y and z are associated with this
lock l and therefore when p2 makes this
lock request L the DSN is going to first
invalidate if copies of pages x y and z
are locally resident in the process of
p2 then the DSM software is going to
invalidate those pages XY and Z at the
point of lock acquisition that's
consistent with the lazy release
consistency model
so once we've invalidated these pages
then you can allow this guy to get the
lock and start getting into its critical
section now once it is in the critical
section it can do whatever it wants but
if it tries to access page X at that
point we know that page is invalid
because we've done that at the beginning
of this critical section invalidated
page X and at this point the DSM
software also knows that the previous
lock holder has the modifications that
need to be made to the original page to
get the current version of the page
current version of the page is with some
order for this page I mentioned this
ownership based protocol in the DSM
software so the DSM software knows who
the owner of the pages from the owner of
the page I can get the original content
of X I'll do that but I'll also go and
get the diff that is created by the
execution of the previous critical
section but the previous lock holder so
the DSM software brings at the point of
access to X XD and the original version
of the page from the order of the page
it can then create the current version
of the page for use by p2</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>