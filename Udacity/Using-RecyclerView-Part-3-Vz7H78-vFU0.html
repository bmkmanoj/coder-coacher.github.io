<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using RecyclerView Part 3 | Coder Coacher - Coaching Coders</title><meta content="Using RecyclerView Part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Using RecyclerView Part 3</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Vz7H78-vFU0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I'm almost ready to talk about how
what I did in this recyclerview part 3
and that was to handle items selection
and choice which is one of those things
that recyclerview is missing so what I
did was I created this thing called item
choice manager and this is not a
complete implementation of item choice
in selection it is liberally copied from
what ListView actually does internally
and you can see it actually uses a whole
bunch of ListView constants but
basically it takes advantage of sparse
boolean arrays and long sparse arrays
and it to store the check states and the
checked ID states and the big code that
it probably you know takes the most from
ListView is actually how it deals with
checking positions by ID this dish I did
not write for this this is actually
fairly complicated if you see what it's
doing it checks for nearby IDs and
searches through the list to try to try
to confirm these check positions and III
I think this kind of code is one of the
reasons why the framework team was happy
to see this functionality taken out of
recycler view because it is really
tricky to implement and what we do
actually for this you need to know when
the view holder is bound so what we do
is we actually have this work together
in conjunction with the code that is in
the forecast adapter in fact in a weird
way this is sort of a helper for the
forecast adapter far more than it is
actually a helper for recyclerview it
also does a couple of nice things here
it actually restores and saves inputs
instant states this I did write mostly
because I was I wanted to kind of
automatically do this and we don't
automatically have a way of saving these
sparse arrays into bundles but we do
have the way a way of saving them into
parcels so I just implemented that here
just another function that can be called
so that we are saving these checked
items and then finally get selected item
position very similar to ListView
returns the first item that is selected
so if you have multiple items like it'll
return one
otherwise we return zero I did not
implement the modal selection stuff so
there's none of this you know choice
mode multiple or whatever
but I do support a multiple modal here
and you get an exception if you try to
use it but it does support both multiple
and single choice basically adding that
functionality into recyclerview and then
so the interesting stuff of course is
also what happens inside of forecast
adapter and this is this is pretty
straightforward whenever we bind the
view holder we also have to make sure
that we call ICM on buying view holder
same thing with on restore and instance
state and on save instance state and we
also added some helper functions so that
other things didn't have to call all the
way in and get access to the item choice
managers like get selected item position
etc etc is also supported we also added
this nice selective u function here and
this is used to implement a feature that
I thought was really really important
and so it was one of the things I sort
of slid into this one we have this
concept of Auto selecting a view I kind
of threw that in here because it was
really unfortunate to have views showing
up so what I do is I wait to see we that
we have children like we've been doing
with these on pre draw listeners and
then once I know we have children then I
go and select view either the position
if there already is one or if there
isn't a position then we go and select
the first one so that we have something
selected which just looks a lot nicer
when you're in tablet mode so this is
just a trick or a hack or you know a
reasonable way of doing it depending on
how you want to look at things but so
we're also taking advantage of that and
that's the reason why we expose that
select view functionality and other than
that it you know looks pretty nice works
pretty well so that's a big piece of
Razak of you know the reason I didn't
teach this and I didn't have you guys
code this up is because I expect in the
next year or so we're gonna have a
better solution for doing this kind of
item selection within recyclerview
recyclerview is under heavy development
and there's all sorts of great stuff
that's gone in to it in the last six
months and I suspect more and more of
these things that are that are missing
from ListView
are actually going to be in recycle
review in one way or another so here is
my stab at doing it in a reasonable way
perhaps the framework team will come up
with something better so that is
finishing our work on recyclerview
again you know take a look at those
changes there's some interesting code in
there the next thing we're gonna get
into is scrolling in parallel</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>