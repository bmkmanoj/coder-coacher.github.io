<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>TD(1) Example p1 | Coder Coacher - Coaching Coders</title><meta content="TD(1) Example p1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>TD(1) Example p1</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rJUjAjHJ8qI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so let's walk through the
pseudocode with a very tiny little
example in mind just to see how the
value updates work so what we're doing
here is we start off at the beginning of
an episode we say that the eligibility
for all the states is 0 and the new
values the new value function is
whatever the value function was at the
end of the previous episode so we just
just make a note of that what we're
gonna do for this example is just keep
track of the changes so so this
ultimately it's all gonna get added to
whatever the previous value was all
right so now we make a transition and
the first transition we make is from s1
to s2 with reward r1 what does that do
to the eligibility well for s1 it sets
the eligibility to one good all right
then we're now going to loop through all
the states all of them and we're gonna
apply the same little update to all of
them and the update has the form
whatever the current learning rate is
times the reward that we just
experienced the r1 plus gamma times
whatever the previous iteration value
was for the state that we landed in
mm-hmm
minus the previous iterations value of
the state that we just left all right so
this quantity is going to actually get
added to all the states but the amount
that it's going to get added to all the
states is proportional to the
eligibility for that state and since at
the moment states s2 and s3 are
ineligible right they have their
eligibility set to zero really nothing's
happening there we're only making an
update with respect to the state s1 okay
so then why are we bothering well it's
not clear yet for now let's just make
sure that it does the right thing then
we'll talk about why it's a reasonable
thing to have done ok I trust you
Michael implicitly all right so that's
the changes that we've made so far to
the new value function for s1 s2 and s3
all right now we take the next step
which is from s2 to s3 oh wait no sorry
before that we have to decay the
eligibilities for everybody so the
zeroes decay to still 0 and the 1 decays
down to gamma all right now we're done
that update from the step that we just
took we take the next step s2 to s3
reward r2
so what does it tell us to do well the
first thing is we have to update the
eligibility of the state that we just
left so that bumps s2s eligibility up to
one then we go through everybody and we
add this quantity again so what's the
new quantity it's r2 plus gamma times
the value of the state that we just left
- the the previous value of the state
that we know sorry the state we just got
to in state we just left all right so
this is this is this update that is now
independent of which state were actually
changing we're going to apply that
everywhere but we're going to apply it
proportionally to the eligibility so the
eligibility czar at the moment
gamma one and zero so gamma 1 and zero
so we just have to add this into the
other things what does that look like so
through the magic of cut and paste we
can actually add that same complex
quantity to both both these updates here
and in particular we're multiplying by
the eligibility so for the first value
we have this extra gamma in here for the
second one nothing and for the third one
it gets multiplied by zero so I didn't
even bother to write it so this is
starting to look a little bit hairy but
that's okay because we're gonna do some
simplification okay
so here's the interesting thing to
observe that previously we added in this
value of s2 according to the previous
value function times gamma and now we're
subtracting away the value of s2 from
the previous iteration and we're
multiplying that by this gamma and this
alpha so they actually match exactly
this thing and this thing cancel that's
beautiful so now I can rearrange the
remaining terms and make it look a
little bit simpler all right and this is
the simplified form that we get it
compacta compactify is really nicely
actually and so we have a something
that's of a similar form that we had
before but the point is that mainly what
just happened is we regroup terms and
the s2 related stuff in this term in
this update here cancelled so the last
thing we do after we've done all those
value updates is we update the
eligibilities and we're ready for the
next step</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>