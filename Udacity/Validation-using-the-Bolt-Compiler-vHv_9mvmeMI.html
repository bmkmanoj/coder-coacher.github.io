<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Validation using the Bolt Compiler | Coder Coacher - Coaching Coders</title><meta content="Validation using the Bolt Compiler - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Validation using the Bolt Compiler</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vHv_9mvmeMI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you might notice that these rules for
user friends look similar to the rules
that we wrote for the users themselves I
could essentially copy the user to
validation rules for a user objects
stored here and paste them for the user
validation rules for user objects stored
in the users node but copying and
pasting this user structure throughout
my rules kind of makes me cringe a bit
and it also makes the rules a lot harder
to maintain when I want to change one
thing so I did a little bit of research
on how to simplify my rules and on the
firebase and rule security page they
suggest the bolt compiler the bolts
compiler is a officially supported
high-level modeling and security
language that compiles to firebase Jason
rules and bolts pretty cool because it
allows you to abstract out some of this
repetitive validation code among other
features now before you dive into the
boat quick start it should be noted that
using bolt is completely optional also
you should have a firm grasp of the
rules language itself before diving too
far in to bolt the compiler is self
described as a bit experimental meaning
that it is relatively young and actively
being worked on so there are still a few
kinks and things might change with those
caveats let's take a look at how you'd
write the rules that you just wrote but
using bolt to start you'll need to set
bolt up now if everything goes smoothly
this should only take a few minutes and
involves first downloading and PM NPM
stands for node package manager and is a
JavaScript package manager bolt is
written in JavaScript hence the need for
NPM once you have 10pm you can install
bolt I provided the instructions in the
instructor notes so take a moment now
and install bolt once you've bolt
installed you can write a rules bulb
file and in the directory with your rule
stop bolt file you can then run the
following in a terminal this will
convert the bolt file into a Jason rules
file which you can then copy over
manually into firebase so let's suit a
bolt file for user friends might look
like remember that bolt is a modeling
language this means that it allows you
to write typed models for your firebase
object and then it generates all the
necessary validation code we have a user
type a time stamp type and an encoded
email type this allows you to abstract
out all the qualities of a
user or a time stamp into one place
these objects here can contain property
keys and you can specify the type of
each of these properties this encoded
email type extends a string which means
that everything that's an encoded email
will also be a string but there's an
additional validation that the string
has to have the format of an email
address and we can see up here that this
property email is using this type
encoded email now this is all well and
good but it isn't saying we're in our
rules to use these types to do that you
have to use something that bulb calls
paths now instead of forcing you to
write out the nest adjacent structure
the right paths and then specify the
rules within the path you can also say
the value at the location that is
referenced by the path is of one of the
types that you defined above using is
and the type that it is so here we're
specifying that whatever is stored at
the path user fred's user coded email
friend encoded email is a user object
and then in turn we say what's stored at
users and then user encoded email is
also a user object so the validation for
these two things just going to look
exactly the same and then once you've
got your bolt file you can save it and
then run this command that I showed you
before which then in turn generates a
JSON file which should look pretty darn
similar to the JSON file that we just
made and that was with very minimal to
no copy and paste</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>