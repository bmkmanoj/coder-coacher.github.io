<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tree Barrier (cont) - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="Tree Barrier (cont) - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tree Barrier (cont) - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qciuV0CjV2Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">of course multiple processors can arrive
at the barrier at the same time and all
of them are going to work with their
local data structure so like this guy
will work with this local data structure
this guy with this local data structure
with this local data structure and each
of them is waiting for his partner to
arrive so that they can move up the tree
so that's what is going on and so
eventually p3 is going to arrive and so
when p3 arrives he decrements the count
sees it as zero so it can move up the
tree when it comes here it says oh the
count is already once I decremented and
the count becomes zero and remember p0
decrement of the count and it was
waiting on locksense so p3 when it comes
here finds that the count is one
decrement set becomes zero and it moves
up the tree because the barrier is still
not done until we know that everybody
has arrived at the barrier so in the
meanwhile on this half of the tree
what's going on is that p4 has arrived
p4 I was not there yet p6 and p7 have
arrived and it turns out that p6 was the
last guy to come to the barrier here and
therefore he is the guy that has moved
up and he has decremented count and he's
waiting for this half of the tree to
arrive at the barrier and you can guess
which one is going to come up right
because p4 has already arrived here and
so if p4 has already arrived here he's
decremented the count and he's waiting
on locksense to flip so the straggler in
this whole scheme of things is this guy
right here
he's the guy who is he's still not
arrived but eventually he'll also arrive
when he arrives he will decrement the
count find out the count has become zero
move up the tree and he'll find that
this count is already decremented also
and when he comes up here he will
decrement at a zero and then it'll say
oh if you're all done so we can move up
here so that's what is gonna happen so
we come come here p5 comes here and goes
all the way up and when it comes up here
it sees that p3 is already decremented
the count to 1 and so when he comes up
he decrements it and it becomes zero and
at this point everybody has arrived at
the barrier so let's understand what
each processor does when a processor
arrives at a barrier it is going to
decrement the count if the count is not
zero is going to spare
on this locksense flag if a processor
arrives at a barrier decrements the
count finds that the count is zero then
what it is going to do is one of two
things the first thing is going to do is
it's gonna say do I have a parent if I
have a parent what I have to do is I
have to recurse do the same thing to the
next level right so so the algorithm is
decrement count and see if the count
becomes zero if the count has become
zero then you recurse if and if the
parent is there you recurse if the count
does not become zero then spin on the
local locksense flag and you continue
this so you continue this p0 did this
came up here and it found that there's
another parent so so this it is it is
stuck here but Petri when it came later
on it moves up and when it came up here
this is the last spot so there's no more
recursing here so when p5 finally
arrives here it finds that there is no
more parent this is the root of the tree
and since we reached the root of the
tree you know that if the count is zero
now at the root of the tree then
everybody has arrived at the barrier so
count at the root of the tree becoming
zero is indicated to the last arriving
processor p5 in this case that everybody
is out of this at the barrier so it's
time now to wake up everyone</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>