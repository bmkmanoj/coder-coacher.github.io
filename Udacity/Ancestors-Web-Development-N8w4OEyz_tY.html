<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ancestors - Web Development | Coder Coacher - Coaching Coders</title><meta content="Ancestors - Web Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ancestors - Web Development</b></h2><h5 class="post__date">2012-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/N8w4OEyz_tY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">another question we've had and we've had
it a lot is more information about the
whole ancestor thing how the ancestor
part of a query works what it means okay
and how to work with it sure sure okay
so yes I have seen that question a lot
and I'll do my best to answer it it's
it's google app engine specific the
notion of ancestor paths and ancestor
queries but it has a couple of neat
things so the question in the in the
forums was about ASCII Chan in
particular and we had a line that looks
like this DB key that from path and then
from path can take a couple of
parameters and it can actually take I
think as many as you want but in this
particular example i just used to it
said like ASCII Chan I'll just
abbreviate it AC and then and then I
think I had the string arts and so what
this does is this actually creates a
data store key for an object that
doesn't exist but what I basically said
is all of my arts are going to have this
parent and when I created arts I think
when I when I said something like you
know like a equals art and then you have
all those properties like you know I
guess I cast a spell not here you know
we have title what did I call it
actually like like the contents of the
art there's probably another parameter
called parent parents i equals you know
whatever this key is you know we'll call
that k I think it was a function call
what this does is this just stores the
other than database and basically says
its parent is this is this key and the
parent is supposed to be another object
but in this case the object hasn't
actually been created I've just kind of
a reference to the stake object and this
is purely for organizational purposes
there's a couple handy things you can do
with this the first is what I was doing
in ASCII Chan which is when you're doing
a query you can say you know you have
your select statement or you can do it
be you can be doing it procedurally you
know you know how to run queries at this
point so you store this in a string and
you run out whatever so select star
from arts and then one of the
constraints on this query is where
ancestor equals something in this case
where ancestor equals this K this this
key and what that does is it it gives
you this property of in data store that
the query will be consistent so that
means when you've inserted with this
parent and then you immediately do a
select star if I didn't have this where
ancestor equals K there's a chance I
might not actually get the element I
just inserted because of the way data
store works with this you know possibly
being stored over multiple machines and
started in all that what Google is doing
there isn't entirely transparent to us
but one of the things they say in their
docs is that if you include this
constraint ancestor equals something and
that happens to be an ancestor of the
object you're looking for the query will
be consistent and so that's all I was
doing there and if you look at the data
store docs if you go to that hello world
example in the data stored box it'll
actually explain that a little bit and
that's what I was basing this on now
this came up again in the final for
doing the wiki and one of the way that I
decided to do to do the history is I
made every page every path basically
every URL path like every wiki page in
my in my program basically be its own
path here and so I basically just say
from path I think I call that wiki and
then I would actually have the URL and
then each version of the page was
another object with that parent and so
when I did a wiki page you know if
you're just viewing the page I would
just say okay get me all of the children
of this parent and I'll take the most
recent one to actually show the page and
then when you click on the history of
you i just say give me all the children
of this parent and that's how i did the
version history thing and that actually
made it really easy to do using data
store this is a concept that only exists
in data store though this whole parent
ancestor queries where you specify the
ancestor thing so it's actually it's new
to me as it is to you
but it helps you work around a few
constraints that data store has so I
hope that helps there's plenty of
information in the google data store
docs and that's what I'm basing most of
what I'm telling you on anyway so i
would suggest you check that up</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>