<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Point to point Completion Semantics | Coder Coacher - Coaching Coders</title><meta content="Point to point Completion Semantics - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Point to point Completion Semantics</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MCrsEoKT0PM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now here's a very important and subtle
point about the completion of a weight
when weight returns the only thing that
you know is that buff is safe to reuse
if the handle is for a receive then it
must mean that the message was delivered
but what about send for a send buffer
being available for use doesn't really
tell you anything for instance it could
mean the message was delivered since the
weight might actually wait until the
message is delivered but it doesn't have
to mean that in fact it might not even
be the case that the message is even in
flight yet the precise action is
implementation-dependent the
implementation-dependent but why the
answer has to do with buffering implied
by these primitives remember that the
processes are executing asynchronously
also remember that a send completes when
the caller may reuse the message buffer
so let's imagine what might happen here
are two ranks I and J rank I is
computing and then decides to send a
message to J in the meantime J is
running off asynchronously for a long
long time before it decides oh I'm ready
to receive a message from I so the send
could arrive way before the receive is
actually ready so should the send stop
and wait until the receive has been
posted before it starts delivering in
this scenario rank I would have to wait
a long long time what rank I might do
instead is make a copy and then later on
decide to start the delivery that way
rank I can kind of keep going so by
leaving the meaning of the completion of
a send a little bit loose you give more
freedom to the implementation to make a
good trade off okay so what's the
punchline of all this well it means that
when you're trying to determine if your
algorithm is correct meaning that a sent
message is received you need to prove
that for every post it's send there is a
matching receive this protocol that
sends match receives is called two-sided
messaging two-sided suggests there might
be a one-sided and in fact that's kind
of what shared memory communication is
I'll let you think about that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>