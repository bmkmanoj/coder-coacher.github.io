<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Pthread Mutexes | Coder Coacher - Coaching Coders</title><meta content="Pthread Mutexes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Pthread Mutexes</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sD__p9cbQpc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">to deal with the mutual exclusion
problem pthread supports mutexes as we
explained when discussing Burrell's
paper and mutexes provide a mechanism to
solve the mutual exclusion problems
among concurrent threats mutual
exclusion lets us ensure that threads
access shared state in a controlled
manner so that only one thread at a time
can perform modifications or otherwise
access that shared variable burl
proposed the use of the mutex itself and
an operation to lock mutexes in P
threads the mutex data structure is
represented via type P threads new text
type for the log operation remember that
Burrell used the block construct where
the critical section was protected by
these curly brackets where the open
curly bracket meant that the mutex was
being clocked and the closed curly
bracket meant that the mutex was
unlocked or free in P threads this
concept is supported explicitly there is
a separate piece read mutex lock
operation and a separate P thread new
text unlock operation whatever code
appears between these two statements
will correspond to the critical section
as an example remember that in the
thread introductory lecture we
implemented the safe insert operation
using Burrell's construct in the
following claim with P threads the same
safe insert operation would be
implemented as follows we would
explicitly be locking and unlocking the
mutex around the insert operation in the
shared list my list and also note that
the mutex is of appropriate type pthread
mutex type this rod supports a number of
other mutex related operations several
of them are worth highlighting first
mutexes must be explicitly initialized
this operation allocates a mutex data
structure and also specifies its
behavior it takes as an argument a mutex
attribute variable and this is how we
specify the mutex behavior by passing
now as this argument a we have an option
to specify the default behavior for
mutexes or we can set one or more
attributes that are associated with new
Texas for instance P
threats permits mutexes and condition
variables in general to be shared among
processes the default behavior with make
a mutex private to a process so only
visible among the threads within a
process whereas we can explicitly modify
that behavior and make sure that the
mutex can be shared with other processes
another interesting operation is pthread
mutex try lock unlike the log operation
which will block the calling thread if
the mutex is in use what try lock will
end up doing is it will check the mutex
and if it is in use it will actually
return immediately and it will notify
the calling thread that the mutex is not
available
if the mutex is free trial lock will
result in the mutex successfully being
clocked but if the mutex is locked
Trilok will not block the calling thread
this gives the calling thread an option
to go and do something else and perhaps
come back a little bit later to check if
the mutex is free also you should make
sure that you free up any P thread
related data structures and for mutexes
for instance you have the mutex destroy
operation these are just some of the
operations pthread support from mutexes
the ones we described here are enough to
get you started with P threads and you
can always refer to the P threads
documentation for information on the
others in the previous lesson we
mentioned a number of common pitfalls
when it comes to writing multi-threaded
programs few that are worth mentioning
in the context of pthread mutex s
include the following share data should
always be accessed through a single
mutex this is such a frequent error that
it's worth reiterating next the mutex
scope must be visible to all threats
remember a mutex cannot be defined as a
private variable to a single thread
including main you must declare all of
your mutex this is global variables
another important tip is to globally
order the locks once we establish an
order between the locks basically
between the mutexes in the P threads
program then for all threads we have to
make sure that the mutex is are locked
in that particular order remember we
said that this is a way to ensure the
dead locks don't happen
finally remember to always unlock a
mutex
moreover make sure that you always
unlock the correct mutex given that
pthreads has separate lock and unlock
operations it can be easy to forget the
unlock and compilers will not
necessarily tell you that there is a
problem with your code so you have to
make sure that you keep track of your
locks and unlocks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>