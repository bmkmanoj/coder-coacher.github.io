<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Updating and Deleting Solution - Developing Android Apps | Coder Coacher - Coaching Coders</title><meta content="Updating and Deleting Solution - Developing Android Apps - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Updating and Deleting Solution - Developing Android Apps</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jlYL_rvk9U4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right you're done let's take a look
at the solution delete is actually
pretty straightforward note that once
again we have almost useless parameters
s actually refers to our selection while
our strings here are actually our
selection arms
one little trickiness and delete is it
if you actually put a null selection in
it'll delete all the rows I still want
to make sure we notify the change I've
done a slight optimization here it would
be fine to just notify the change always
but I've decided if no rows have been
deleted then we should bother not
notifying unless the selection is null
in which case we deleted all the rows
but again it would be fine just to use
notify change here even if no rows are
actually deleted act for all the
intention was that rows would be deleted
once again let's take pity on someone
who might have to maintain your code and
change these default parameter names to
something more useful like selection and
selection args other than that update
looks almost exactly like delete once
again we're returning the number of rows
impacted by the update and we don't
bother notifying if no rows were
impacted now that we've finished writing
update and delete we can go back to test
provider and add some tests first let's
remove tests to delete DB the last test
that doesn't depend on the provider
instead let's have a test that deletes
all the records and checks to make sure
they're actually deleted remember
passing a null query actually deletes
all of the records in a table so this is
really straightforward just passing
nulls
since we're depending on the database
for our deletes it's not all that
particularly important that we actually
test the delete functions although it
would be nice to add that later on the
reason we want to add it is to make sure
that our constraints are valid and once
we're done doing the deletes we check to
make sure that there are no rows left
note that we have to delete weatherentry
before we delete location entry because
you've got constraint in the database
that prevent whether entry from existing
if location entries do not also exist
and would also prevent a deletion of
those entries so let's check to see
whether that actually works all right
that passes good news now we can add the
same test to the end
to make sure we can delete all the rows
at the end and it still works and as you
can see they still pass so now we know
we've deleted records before and after
running tests now let's try that update
we'll do just an update of the location
again let's start by deleting all
records and inserting a record that we
want to update one of the nice things
about content values is you can actually
copy them using a copy constructor after
that we can add the ID we want to update
and then put the name of the city we
want to update it to in this case from
North Pole to Santa's Village and then
finally we call update assert that we've
actually updated exactly one record as
we'd expect and then do a query on that
validating our cursor making sure that
our update actually works and then
finally we close our cursor it all looks
pretty good let's see if it actually
runs and does the right thing and our
test pass so we've now proved that we
can update delete insert and query and
all this is fully tested in other words
the bones of our application are
finished just waiting to attach our UI
let's go through and attach some of our
UI</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>