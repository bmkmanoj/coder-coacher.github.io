<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>需要自定义 ArrayAdapter | Coder Coacher - Coaching Coders</title><meta content="需要自定义 ArrayAdapter - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>需要自定义 ArrayAdapter</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Lc40eC3HLtA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's recap the major changes we just
made to the Miwa gap we changed from
using a loop to populate a vertical in
your layout to display a list of words
to using a more efficient ListView plus
arrayadapter combination and then we
build a list item layout that contains
two text views so next we wanted to
create a single list of objects that we
could pass the array adapter so we
created a custom word class that
contains both the English and meiotic
translations for a single word with that
we could have an ArrayList of word
objects that we passed to an array
adapter now let's navigate to the
numbers activity here we'll need to
change our ArrayList of strings into an
array list of words so we need to update
the generic type parameter what's in
between those brackets and create an
array list where each element is a word
object so when you type in a word here
you might get to autocomplete
suggestions and this is because the word
class already exists in the android
framework under a different package name
so here you'll see is under user
dictionary so these are words that you
can add to your autocomplete dictionary
say when you're messaging your friends
so be sure to pick the correct option
for the word class we want the one
that's in our package Comdex sample
android dummy walk so now we've updated
our ArrayList to contain word objects
instead of string objects so remember
that I specifying word as a parameter of
the ArrayList this means that when we
add elements the list will need to add
objects of datatype word and if we were
to say call the get method which is used
for getting elements at a specific
position in the list will receive an
object with a datatype word so currently
all these add methods are adding a
single string object to the words list
each time and that's why we're getting
all these errors so we need to update
each of these lines to pass in a single
word object so let's just focus on this
first element here so I'm gonna comment
it out so below it I'm gonna write in
the version of the code where we're
adding in a new word object to the words
list this is a typical way to go about
this we would have created a new word
object stored it in a variable here
called W and then added that variable to
our words list so now here then when
were creating our new word object we're
passing in two inputs into the
constructor so the English and me
awkward's so since we only need to
reference this W
variable ones here there's actually a
more concise way to write these two
lines of code so this method of creating
a word object and adding it to the list
does work but there's actually a more
concise way to do it so you'll notice
here that we only reference this
variable W once down here so we can go
ahead and actually cut out the
substantiation of the word object and
paste it directly into the add method so
doing it this way we don't need this
extra step up here to create a new word
object on a separate line of code and
then store it into a temporary variable
so we can actually go ahead and just
remove this line completely instead
we've directly added our new word object
into the list
so to summarize the input into this list
is a new word object which is created in
line by using the new keyword I'm gonna
go ahead and finish populating the
ArrayList with the word objects all
right when you're all done this is what
the code for creating an ArrayList of
words should look like so let's move
down here to where we're passing our
ArrayList into the adapter now so we'll
need to update this Jerek type from
string to be words and this change
reflects that the array adapter now
contains a list of words as a status
source instead of strings we'll also
need to update the layout resource to be
our new list item layout so instead of
this we'll have our dot layout dot list
item all right so there's no errors in
the code now so I'm gonna go ahead and
run the app on my device all right so
here's the emulator running this version
of the app let's navigate into the
numbers activity ooh that just crashed I
wonder what happened let's check out the
Android monitor and check out the
android logs at the very top of the log
message we see here that it says
java.lang illegal State exception
arrayadapter requires the resource ID to
be a textview hmm I'm not exactly sure
what this error means so I'm gonna have
to go into the documentation and see if
I can find any clues here's the
developer documentation for the
arrayadapter so let's read through the
class overview alternatively you can
also pause the video here if you want to
read through it yourself so what I've
learned from these couple paragraphs is
by default the class expects that the
provided resource ID reference is a
single textview hmm
that's probably why the list item layout
from the android framework itself worked
because the whole layout just consisted
of a single textview and here in this
next paragraph we see that we can also
add lists or arrays of custom objects so
that's perfect for us to help display
our custom word objects now all this
makes sense because remember that the
array adapter uses generics which means
that we can substitute any object data
type in here for this T now moving down
to the third paragraph in order to
display more complicated list items that
contain more than a single textview
we'll need to override and provide our
own implementation of the get view
method so ListView calls the adapters
getview method when it needs a new view
on the screen and one of the input
arguments into the method is the desired
element of the list so in this case we
have position 0 that we need knowing
this information the adapter returns a
view to the ListView that's populated
with the information from the position 0
so think of the relationship between the
ListView and get view similar to what
happens between a surgeon and a surgical
technician in an operating room so in
this analogy the surgical technician
like the get view hands the surgeon the
list view the correct instrument or the
correct view when the time comes
so the ListView or surgeon requests for
the view or the scissors in this case
the get view gets what's needed the view
or in this case the scissors and passes
it to the surgeon so by default the
array adapter class expects that I'll be
populating a single text view so because
the list item layout that we will be
populating is more complex so it has two
text views and it eventually I'll have
an image view we need to override the
get view method with our own custom
behavior in order to do this we need
just sub class the raid after class so
to elaborate this means we need to
create a new Java class so we'll call it
the word adapter class and it needs to
extend the array adapter class so I'll
show you how to get that done now so
let's never get over here to the project
view select our package
right click new and Java class so we
want to name this file word adapter
we'll need to modify this auto-generated
file from Android studio we want this
class declaration to specify that the
word adapter extends or inherits
behavior from the array adapter class
now to show the available methods to
override from the raid after class our
cursor will have to be between these two
brackets will hit code and then override
methods alternatively a keyboard
shortcut is ctrl o now in this list here
go down and find get view and then click
enter alright so this method gets
auto-generated by default now I'm gonna
take a step back and let you finish the
steps that are needed to make this app
display the list of vocabulary words for
the numbers activity so the steps will
include finishing the implementation of
the get view method when you're done
with this entire quiz the app should
look like this each list item should
display a me awkward on top of the
English translation for that word now to
help verify you're on track I'm gonna
provide you with some code changes that
are needed in the numbers activity so
instead of the array adapter we'll be
using a word adapter so the constructor
for the word adapter class takes in two
inputs so just the context and this list
of words and then also remember to
update the adapter variable down here
now make sure your word adapter class
works with these number activity changes
otherwise you'll need to go back and fix
your word adapter class now I know this
coding exercise will be a bit of a
challenge because you've never created a
custom array adapter before or even
overridden the get view method this task
involves many steps but I think you're
definitely ready for this now just be
patient with yourself because this task
will require a bit of time to give you
another hint I'll point you to an
example app which handles a similar use
case so this project here is hosted on
github as an open source project and
this means that the code is available
for anyone to take a look at so note
that there's a different license on each
open source project so remember to check
out the license for limitations on
whether the code can be modified or
distributed again if you're taking a
look at a particular open source project
so in this case this app was created at
Udacity so you're free to use it and
adapt it as you wish
Soraa custom adapter sample app is
called the Android flavors app and it
displays a list of all Android releases
so each release is represented in a list
item and each list item contains an
image a title and the version number so
this app is using a custom array adapter
then we're calling the flavor adapter to
display a custom list item view that
contains an image and two text views so
we're having you practice the skill of
reading code from other apps and
figuring out how to adapt it into our
Miwok app so as a developer you'll often
look at tutorials or other open source
for apps and try to apply those skills
into your own application so you can
start browsing this Android flavor app
code by either clicking this download
zip button and downloading all the code
and then importing it into Android
studio as an existing project or you can
browse the files directly in the web
browser so for example I can click here
app source / main and then navigate
through the Java files or the res files
another cool github shortcut here is to
type T on my keyboard so I'll hit T here
and that activates the file finder so
this saw is made to easily browse
through the files in my project so if I
want to look up that main activity I can
type activity and it pulls up our
mainactivity.java
or if I want to search up the flavor
adapter that I mentioned earlier I can
easily find out here so hopefully this
example will help you in the next coding
exercise so check out the quiz for
specific instructions on how to get
started and best of luck</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>