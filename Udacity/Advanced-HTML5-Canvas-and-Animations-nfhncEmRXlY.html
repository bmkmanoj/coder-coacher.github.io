<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Advanced - HTML5 Canvas and Animations | Coder Coacher - Coaching Coders</title><meta content="Advanced - HTML5 Canvas and Animations - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Advanced - HTML5 Canvas and Animations</b></h2><h5 class="post__date">2016-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nfhncEmRXlY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we will be talking about canvas
so what is the canvas in html5 the
canvas is basically a way for you it
gives you a way for you to draw stuff in
a nutshell it gives you a built the
ability to draw objects basic objects
such as rectangles squares lines as well
as being able to paint pictures that you
import in and why the name of the why's
the name canvas is that it's just like
if you were a painter right and you're
painting on a canvas and the canvas is
just a white piece of you know what
piece of cloth that you would just paint
on the canvas with your actual pink with
the brushstrokes
so instead of manually painting it you
actually paint it through your code and
how it will work is like if you paint
something on your canvas that's it
you don't you cannot really remove the
paint and weep and and adjust it once
you paint on something on on your real
canvas and then your pray for us you
actually have to paint it over and
that's a very important concept to know
once you paint something on the canvas
those pixels are there indefinitely on
your canvas so if you want to adjust
something you need to paint it over
those pixels now lucky for up lucky for
us in the computer world we have the
ability to clear our canvas to reset it
to a black state in order for us to be
able to repaint it again and that will
be a very good concept very crucial
concept for you to learn about the
canvas animation is basically you just
showing me a picture and then showing
you another picture and then show me
another picture of rapidly a very fast
and each picture one thing one slight
thing changes so in my eye
is show it tell us it gives me the
illusion of movement that is basically
animation and you just flip through it
the first thing I'm going to do and you
can find all this documentation on
Mozilla's development network or on the
campus video lessons on Udacity so the
first thing that we need to do is this
is our HTML site here in HTML and taurah
is what the page will look like right
now there's nothing because we haven't
drawn anything so what we need to do is
first we need to please you see this
highlight here we need to declare a
canvas element called canvas that's
pretty easy
we need to set our ID to something
similar like my canvas and is good to
set a width and a height because this is
very important that will let us know
allow us to know our boundaries well
when we're drawing and then I am
actually hooking into a JavaScript file
that actually does all the heavy lifting
all the work and this is called demo
setup jeaious so I'm gonna go into demo
JA set up dot J's now and tell you how
would you set up an animation for it
anything right here so the first couple
lines you're gonna see this line here
set up canvas and other variables
so I'm declaring I'm getting a Dom
object do M called canvas I'm getting
the ID from my canvas and then I'm
getting the context the context will
allow us to hook into every other API
call in the canvas now if you if you're
not sure of what I'm doing or why I'm
doing it it's just part of the
documentation and you will find out more
about this set up in our you guys
Udacity course or you just read the
documentation online so this is very
important a lot of people a lot of
beginners don't realize that like once
you set up your canvas and your context
you think that you're ready to start
animating and start drawing but it's not
quite that simple because in javascript
in HTML programming there's a lot of
things called events and we actually had
to wait for events to finish because the
browser needs a couple milliseconds to
actually load up and create the document
tree tree structured like a Dom cuz
how how browser is working you'll find
out more on in project four is that it
gets a string file it gets the code in
your HTML it then needs to process and
create these abstractions these nodes
these objects in the document object
model and if the browser it has not
finished loading all these objects and
if you have a Java Script that's trying
to refer to an object that does not
exist such as canvas it's not going to
work so this is a trick that I recommend
you keep notes of it's called window
onload so window onload is an event that
the window the browser will fire off
once it's done loading everything
including the document object model the
images and also also other other
resources for you let's go back and talk
about animation so we set up our objects
here and then we set this onload
function here so onload I'm going to
call this flushing call enemy and I'm
gonna pass in my canvas object and my
context object and then I'm gonna go
down here and then I'm gonna do my magic
here and then I'll walk through these
common stuffs here again but you do your
magic here but then at the end this is
very crucial this is how animation works
because right here I'm going to
highlight things you're making one frame
one function call is basically one frame
you're just making one static picture
how do you show the next picture because
in animation we need to show the next
picture and change the objects change
the X&amp;amp;Y coordinates when we draw stuff
and then show that picture again there
is a method in JavaScript call
requestanimationframe so what you do is
pass in your function an anonymous
function from when two window
requestanimationframe and then you pass
in this function again animate so
animate function is calling itself again
this may be new to to you if you're new
to programming but a function has the
ability to call itself
so once I'm done drawing I'm actually
going to go ahead and call myself again
and then once I call myself I'm gonna go
back to the top here I'm going to repeat
my instructions what I want to do is
that I want to be able to draw a line
pretend that this is line this pen is a
line I'm drawing this line from point A
to point B and then I want to rotate
this line like this in a circular motion
indefinitely so basically how do we do
that we'll just go back to our animation
we want to draw a stack we want to
George strike images static images of
one line then okay we call animation
frame again change the position of this
lawn again okay paint that over a series
of thousands of frames that you're
drawing it will look like it's an amine
like this so let's go let's go back to
the code and let's see how we're gonna
do that
so let's just first learn how to draw a
line because I think you know if you're
if you're not familiar how'd your lamb
will show you and how you gonna figure
this out is just just read the
documentation and let's just draw a line
so CTX line with I'm going to draw a
line width of 10 because I want the
width of this line could be 10 pixels
I'm gonna keep this command called begin
path and you'll find all this in the
documentation so you just really don't
read the documentation then apply what
you want so I'm gonna move my Maya I'm
gonna begin and let's say the coordinate
100 pixels 200 pixels down so this is
your x coordinate I'm 100 pixels from
the left and then I'm 200 pixels down
from the top so that's real and then I'm
going to start line to next quarter now
300
two hearts coordinate and my ex-wife I'm
gonna actually execute the command
stroke yeah we're going to close this
path
okay and that's how we join the line so
I'm going to save this and uncle refresh
yours our line but mark it's not
animating well it's technically it is
cuz it's calling the frame again and
again it's called a function animate
again and again but we're not moving the
line cuz we just have the static code
because it's just painting this line
over and over and over again so how are
you gonna show that this is actually
working well let's just go ahead and
change these XY coordinates and what I'm
gonna do I'm just I'm gonna give you a
little trick here is that this is my
start point my end point will be
different so my end point will be let me
add a little bit of randomness to it so
random 150 plus 10 so and if you're not
familiar with this random function for
each call at this function it will give
you a random number from 0 to 1 and then
I am increasing the range of certain 1/2
from let's say 160 to 10 and if you are
a little bit confused on that just look
up the documentation for random and
figure out how can I set random numbers
between you know my minimum value and
maximum value one so I'm gonna set this
so per frame what do you think
the line should move it should look
something like this
all right so that's great so the line
moves but then it doesn't it's painting
over everything else remember this is a
canvas so if I'm picking something over
and over again that that it's like I'm
simulating I will paint something on a
real actual canvas so in order for me to
be able to displays animation per se
that like I want this line to move and I
just only want that one line drawn I
need to actually clear the canvas
per friend call for animation cost so if
you go to this code here there is a
flushing called Claire
rectangle and the rectangle is basically
the canvas like the whole campus so I'm
gonna clear this I say that um I'm gonna
refresh and here we go
so this is animation in a nutshell you
see that so every animate animate call
it will draw a line from one point to
another
this doesn't it's and we're animating so
congratulations we just learned the
basic concepts of anime and learn how to
apply that in canvas now we want we want
the line to not do this but we want the
mountain rotating in a circle so how are
we gonna do that so I'm gonna use a
series of sine and cosine and a series
of angles because basically what I'm I'm
doing is that I want to be able to have
a point here and a point here along the
circle and I want trace the X&amp;amp;Y points
here because they're on a circle so I'm
gonna go and well free to code a little
bit so first I set up my canvas here I
didn't set my center of my circle and
here this is in the center of the canvas
I actually get my time Delta to smooth
out my animations and here's the trick I
set my angle and the angle is will
basically change for per animation call
and this angle will basically drive
everything else insofar as calculating
the X&amp;amp;Y coordinates of my circle I'm I
do my math I do some magic with math
here I'm actually setting the color of
my line cos stroke style and then I just
dropped my line with my new X&amp;amp;Y
coordinates based on this angle here so
what does this look like let's just go
every fresh this is what it looks like
pretty cool well remember that I'm
painting over my past pixels so if I
want to just have show the line itself
and don't care about my past pixels I
need to go back to this code here and
clear it for every frame there we go
so we are now animating a line</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>