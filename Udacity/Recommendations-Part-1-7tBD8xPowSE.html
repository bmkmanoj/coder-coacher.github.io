<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Recommendations Part 1 | Coder Coacher - Coaching Coders</title><meta content="Recommendations Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Recommendations Part 1</b></h2><h5 class="post__date">2015-07-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7tBD8xPowSE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">the recommendations Row is a central
feature of the Android TV home screen
you can place recommendations here to
prominently feature content and to
enable your users to effortlessly start
playback notice that when the
recommendation card is selected the
background image of the home screen
changes to reflect it encode Rex work a
lot like notifications basically you
issue a recommendation by creating a
notification cool right as apps issue
notifications they're collected by the
notification manager the Leanback
launcher then displays these
notifications as recommendation cards in
the recommendations row on the Android
TV home screen to create a good user
experience Android TV looks at all the
available Rex and ranks them using an
internal algorithm the more often a user
picks one of your recommendations the
more prominently they'll be displayed in
the future also it's best practice not
to have more than two or three
recommendations active at a single time
let's take a look at how this works in
code to make issuing recommendations
easier the Leanback sample provides the
recommendation builder class this class
uses the Builder design pattern to
construct recommendations and if you're
curious check out the instructor notes
you can reuse this in your own code
let's take a look at how it works for
completeness first we'll issue
notifications using notification compat
which you saw in a wearable section this
class is included with the Android v4
support library let's take a look inside
the build method to see how we construct
our recommendation notification
scrolling down a bit you'll see here's
where we start constructing or
notification you might be aware that
notifications have four available styles
big picture big text inbox and media
here we always use big pictures so we
can set a background image for the card
details on each style are in the notes
if you're curious scrolling down a bit
more to indicate this notification is
actually a recommendation we set a
category like this we need to set both a
large and small icon the small icon is a
drawable resource for a badge icon on
the card and the large icon is used as
the card background image we set local
only the true to indicate this
notification is for the current device
only to learn more about the other
fields check out the link in the
instructor notes also notice that when a
recommendation card is selected the
background image of the android TV
homescreen chain
is to reflect it the image we used for
the background image is a large bitmap
it's too big for a notification instead
we'll use a content URI to provide its
location but first to serve this image
will use a simple content provider and
implement only its open file method will
do this right inside the recommendation
builder class and here's how our
bare-bones content provider looks the
only method with an implementation is
open file a parcel file descriptor by
the way is used to send a file
descriptor across different processes in
this case from our sample app to the
Leanback launcher app moving back to the
build method here's how we get a
background image notice by the way that
this method is also called inside our
content provider to resolve the
background image from an ID at this
point we can create a content URI that
indicates the background image we put
this notification into the bundle using
the extra background image URI key
finally we'll set a pending intent to
take users straight to the details
fragment when they select our
recommendation if you prefer you can
also jump directly into playback to see
how this works we'll need to take a look
at another class called update
recommendation service will use this
class to keep a recommendations current
by updating them from time to time and
performing small job regularly sounds
like a perfect job for an intent service
will actually start this service when an
android TV boots up and we'll see how to
do that shortly first let's cover what
it does</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>