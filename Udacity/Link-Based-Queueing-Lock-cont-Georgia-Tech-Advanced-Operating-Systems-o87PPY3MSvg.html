<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Link Based Queueing Lock (cont) - Georgia Tech - Advanced Operating Systems | Coder Coacher - Coaching Coders</title><meta content="Link Based Queueing Lock (cont) - Georgia Tech - Advanced Operating Systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Link Based Queueing Lock (cont) - Georgia Tech - Advanced Operating Systems</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/o87PPY3MSvg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so once I've done the double act then I
can set up the current nodes next
pointer to point to me and then I'll be
done with joining the queue and then I
can await the predecessor to signal me
so I'm spinning on the guarded variable
and how will I know that I've got to
lock well my predecessor who is
currently using the lock will eventually
come around and call this unlock
function and the unlock function is
basically taking again two arguments one
argument being the name of the lock and
and the other argument is a guy that is
making the unlock or in this case the
current node is making the unlock call
and what it does is to remove current
from the list and it was going to signal
the successor and the way the successor
is going to be signaled is because the
current node has a next pointer and the
next pointer says he's an ex guy waiting
in line for getting this particular lock
and he is spinning on the guarded
variable so he's just gonna signal the
successor by setting the guarded
variable for the successor to be true
and that will get me out of my spin loop
and I'll have the lock and I'm now
running inside the critical section
having obtained the lock that's
protecting the data structure associated
with that critical section so now I'm in
my critical section and eventually I'll
get done with my critical section when I
get done with a critical section I have
to unlock and I call the unlock function
normally the unlock function involves me
removing myself from this linked list
and then signalling make successor so
these are the two things that I have to
do remove myself from the list and
signal any successor the special case
occurs when there is no successor to me
the special case when that occurs what I
have to do is I have to set the head
node the dummy node of the linked linked
list namely L to null to indicate that
there is no requester waiting for this
lock so that's a special case and so if
I look at this picture here what I have
to do is I have to set this L to nil and
then I'll be done
I don't have a successful signal but
wait there could be a new request that
is forming and if a new request
for me now this guy what he would have
done is to do a fetch in store and if
you did a fetch in store on this linked
list what would have happened is that he
would have gotten my coordinates and
here to set the list to point to him so
the new request is forming but it'll not
formed completely yet in other words the
next pointer in me is not pointing to
this new request yet and this is the
classic race condition that can occur in
parallel programs and in this particular
case the race condition is between the
unlocker that is me and the new
requester that is coming to put himself
on the queue and such these conditions
are the bane of paddle programs and one
has to be very very watchful for such
race conditions and being an operating
system designer you have to be ultra
careful to ensure that your
synchronization algorithm is implemented
correctly you don't want to give the
users the experience of the blue screen
of death you have to think through any
corner case that can happen in this kind
of scenario and design the software in
such a way operating system in
particular to make sure that all such
release conditions are completely
avoided now let's return to this
particular case and see how we can take
care of this situation</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>