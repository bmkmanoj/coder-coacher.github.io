<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Scheduled Synchronization - Developing Android Apps | Coder Coacher - Coaching Coders</title><meta content="Scheduled Synchronization - Developing Android Apps - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Udacity/">Udacity</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Scheduled Synchronization - Developing Android Apps</b></h2><h5 class="post__date">2015-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vlNeBT1UyQs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well we're now using the sync adapter
and things are working pretty much as
before we want the app to do this
synchronization cleverly and we'd like
to get rid of that old refresh menu item
let's start by cleaning up all the other
routines we have to sync so we certainly
don't need any of this other stuff like
fetchweathertask or all this stuff we
did in sunshine service and we'll want
to clean up the manifest accordingly we
certainly don't need either one of these
anymore
and in preferences we can just change
that to think immediately so now we're
really using the sync adapter everywhere
we have a problem though we're not being
very smart the user still has all sorts
of places where they see an empty list
we want to sync more intelligently in
Android 2.2 Froyo Android added the
ability to have sync adapters sync
periodically we can add a helper method
to do this in our sync adapter the
problem is this method isn't as smart as
we'd like it to be it still won't do all
that cool batching with inexact
repeating alarms that we'd like it to
fortunately we've added something that
does just that but it's not available
until API level 19 taking advantage of
flexible time to do in exact repeating
alarms let's set some nice defaults for
our sunshine sync adapter first we'll
add these constants to make things a
little clearer in our code let's add
another function that will call when a
new account is created in here we'll set
some important flags such as configure
periodic sync the one we just created
set sync automatically without which our
periodic sync will not be enabled since
we're just starting off let's do an
immediate sync then we can call it from
a strategic place and get sync account
finally we can make the interface to the
world a little bit cleaner by adding an
initialize sync adapter function that
simply makes sure that an account has
been created and now inside of the main
activity in the oncreate we can just
make a call to that new function and
it'll make sure that the parameters of
our sync adapter are set up correctly
let's see if this has any impact on our
emulator the new version of sunshine
right from the starch all the current
weather photo sink with a sync adapter
to happen successfully at periodic
intervals in the background you must
have a content provider marked a sync
enable automatic sync for your sync
adapter do an initial immediate sync or
set an interval in milliseconds</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>