<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Database Design 44 - Inner Join on 3 Tables (Example) | Coder Coacher - Coaching Coders</title><meta content="Database Design 44 - Inner Join on 3 Tables (Example) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CalebTheVideoMaker2/">CalebTheVideoMaker2</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Database Design 44 - Inner Join on 3 Tables (Example)</b></h2><h5 class="post__date">2015-02-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/B47Idwxi3jI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yo what is up man
long time no see I just say some bread
we are going to discuss the same thing
we discussed in the last video and
you're probably like oh oh but I just
want to go over one more example and
then I'm gonna be like showing you how
to do it
it's me sweet alright so we talked about
in last few but never actually talked
about the join conditions very much so
I'm going to go over a new example in
this video let's do this so we're gonna
have a user table not a customer table
user table and then we're going to have
a comment table and a video table so
think of like a video sharing website
like that one called starts with a you I
don't know
but anyways we have a table here we also
have a table here we also have a table
right there alright these are all
connected right boom boom boom
I'm just gonna write the name of the
table I'm not going to really write any
comments in here this is low on space so
got the user I got the comment and then
we got the video so the the only way the
user has any connection with the video
is through the comic table because a
user posts a comment on a video that
makes sense hopefully does I don't even
know why I asked you that still I'm
trying to stall let's try me crazy what
are the joint conditions for this if we
want to do an inner join let's discuss
the conditions and also the results we
should expect okay so let's just define
the keys that are going to connect these
tables so we have a user ID and then
we're going to a common ID and then a
user ID and then a video ID and then
this video ad will be referenced in this
table by a video ID okay now if you
think of this as a many to many
relationship between user and the video
you could potentially get rid of the
comment ID and just use the combination
of you
our ID and video ID but that is not the
best way to do it one user could post
multiple comments on one video so you
see like if we had this common table we
could have user ID then we could have
video ID and then we could have comment
we have the user ID with seven video ID
was 106 in the comment was name and then
the user ID of seven the UID of 106
could be JK so this is a bad idea you
wouldn't want to use those combined
unless you are working on some kind of
thing where you can only leave like one
review on a product the same stead of
just user review product or user review
whatever in that case you could use user
ID combined with the product ID or the
video ID to allow that but I'm going to
use the comment ID in this and this is
going to be a surrogate ID that's going
to the use as the primary key and these
are only going to be foreign keys they
use already in the video ID they're only
going to be foreign keys and they're not
going to be part of a compound or a
compound key in any sort of way
they are just another column that's a
foreign key you referencing a table to
see you guys understand the structure of
how I set this up alright now there's
going to be a join condition right here
which basically a join condition is what
columns are in both tables right you
don't always have to say user ID equals
user ID or customer ID equals customer
ID or comment equals common ID you can
do other stuff with like greater than
less than and all those fancy things but
we're just going to be using equals
because it's most common one and it's
the easiest to understand the one here
is going to be the user ID so we're
going to have user dot user ID and it's
equal to comment user ID this is the
first joint condition now for this we're
gonna have a second joint condition
between these two and the only thing we
can use is the video ID because it's the
only thing in both tables so we're
basically going to have a comment dot
video ID equals video video ID we got to
say what table they're in because
they're in multiple tables so we have to
use the dot syntax table dot column
equal to table column I know you guys
probably can't read that I wrote is so
small but it's okay as long as you
understand this is the job this is the
joint condition for these two and this
is the joint condition for these two
when you join these you're going to join
them by those columns and now what about
not known no columns what are they going
to be returned as well the way we have a
structured user can comment on as many
videos as they want so they can be in
the comment table multiple time so got
one too many there now a comment can
only be posted by one user and can only
be posted on one video because each
individual comment is going to be a
separate row in the comment table so for
a video ID we're going to have that set
to not null and also for user ID we're
going to have that set to not null
that's because there should never be a
comment that doesn't exist on a video
and it should never be a comment on a
video that wasn't posted by a user right
now for video we don't necessarily have
to have comments on it so there's
nothing we need to worry about that just
like a user we don't have to worry about
having to have a comment so the only
time we need to put not null is on these
two columns to make sure the comments
exist with everything they need you see
the user ID would be not normal is
because every user is a user in every
video as a video but we don't have to
say every user has to comment that would
make it impractical
so that's the setup for the not null and
the relationship types so then when we
do an inner join in this case what are
we going to get well I just want to
think about that for a little so we can
kind of understand what our end result
is going to be so what do we want well
we want a table that looks like we want
a table that looks like this and that's
because we wouldn't want it any other
shape right I'm Steven but basically
we're going to take the user with the
user ID and likely we'll have more
information about them such as their
user name so if you wanted you could
also include that in the table which
would likely be done from the beginning
because you likely do your joins and
stuff after that so make sure you put
your user name in there you don't have
to add that in there because then half
your users won't have a user name and
half of them will which isn't good so
user name from the beginning likely
include your user name and then will
likely include the comment so we would
need to include the actual comment in
the comment table the reason I didn't
put these in there earlier because I
just wanted to think about the keys for
now but now we can put those in there
Nessus we're designing this right and
then we also want the video title maybe
a link but we'll just go with the title
for now so these are the three columns
that we want to include and we could
have set it up in a table and each
individual row is going to be a new
comment well let's see let's think about
what can be excluded from this so then
we can decide which ones actually will
be excluded well let's just ask
questions can a user be excluded well if
we're using an inner join we're only
going to return users that posted a
comment on a video so yes any user that
did not post a comment will not be
included
now what about videos
well videos be excluded
well since it's an inner join we're not
going to include any videos that do not
have a comment from a user so yes videos
can be excluded they likely will so
videos we're just going to put XY to say
that it can be excluded users can be
excluded now can comments be excluded
well let's think about each individual
key we have the U or the foreign keys
user ID which is labeled as not null so
that means every single comment is going
to have a user and also the video ID is
not and also every single comment is
going to have a video so in this
situation all of the comments will be
returned so we can't remove those so
within here every single comment is
going to be included so if we had 10
comments we're going to have them
labeled 1 through 10 well actually I
want to label them but we'd have all 10
of them there and then only some users
would show up here
and all their comments all the comments
would show up in this column so it would
be like like be like black black and
then and then the video title only some
videos are going to be put in here so
subscribe change that's how it's gonna
work
and let's just see how that goes so oh
yeah let's see this in action here I
have some snapshots of some tables I
created and I'll just be illustrating
this and I'll be drawing on the screen
as needed and I have one of them walk
them tablets and if I am drawing all
over the place it's because I haven't
installed the software not because I
can't write better than a kindergartener
all right so let's begin here we have
what would be like a user table or
something we have the user ID email
user name in the past which is like just
encrypted basically and this is going to
be joined with the comment table over
here I mean sorry that's the video table
here me this is the comment table
alright so here we got each comment and
foreign keys to the user ID and the
video ID as well as the actual comment
and then we have the video table the
video table has the title of the video
and also the description which would go
like under the video or on the side or
appended to the title whatever you want
to do for your website and this is just
what the video is about alright and as
you can see I'm advertising my database
design course which is pretty awesome
right and what we want to do is we just
want to join these so we have the user
name the title and the comment all from
three different tables so the user name
comes from the user table right here and
then the title comes from the video
title right here and then finally the
comment comes from the comment table
right here so let's go back to the join
table what we want to do is is if we're
using let's say the comment table we
want to replace the user ID with the
user name and the video ID with the
title so let's look at the comment table
we want to replace all these numbers in
the user ID column with the user name
which means we have to reference the
user table and then the video ID we want
to replace with the video name which
means we'll have to rest rinse the video
table and then the comment ID that's
just the primary key for this table all
right so let's just kind of look at how
this works so yeah this is how it works
the user name from the user table the
title from the video table and a comment
from the comment table now let's go
through how the join looks I have all
the tables here now it's kind of small
so sorry if you can't see well
but we have the join table right here
this is the joined table that's the join
then we have the comment the user and we
have the video and we're going to
basically just borrow some columns so
the title that's going to come from the
video so just going to go over here to
to do it's going to come from over here
and then the the username is going to
come from up here and then finally we
have the comment in the comment is going
to come from right over here you can
even see that probably not okay so
there's a couple things though not all
of the columns values are included so
not every single row that's because this
is an inner join now if you look at the
username we got all sky pizza let's
follow this user so let's go to the user
table oh my god all sky pizza right
there then we got if we keep going down
this table we got ha ha 12 which of
course is um use my mouse now right
there then we got Pablo is Alstott which
is Pablo is awesome then I got milk and
COO which is milk and cookies and then
we got yellow swag ha which is yellow
swag hashtag Yolo swag psy and then we
got but I don't even know what that says
best tips which is this person right
best best speller in the world ok I made
these a while ago so so you can see
these two people they're not included
that's because it's an inner joint and
they are not part of the end result now
let's look at the video so we got the
videos we got database design 1 2 3
four five six seven where's-where's
eight though I don't see an eight on
here well you can see eight on the video
side right here it's not included so
eight is not included basically we're
taking of different columns from
different tables but not every single
row is included that's because it's they
don't meet the qualifications for the
inner join so the syntax or something
like this would be like this so I have
to select and then the username title in
the comment these are all from different
three tables but it might vary on how it
looks for your database management
system but it'll look something like
this and then from the user comment and
video table and we just do the inner
join inner join the comment by the user
ID in the comment user ID and then the
inner join a video by the video video ID
being the same as the comment video ID
so yeah that's that guys so thank you
for watching and I'll see you in the
next video and I'll be sure to subscribe
even though even though my drawing
literally looked like a drunk animal fat
even know just just forgive me for that
one my handwriting is just just awful
that's all I can say it's awful it's
hideous ah ah</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>