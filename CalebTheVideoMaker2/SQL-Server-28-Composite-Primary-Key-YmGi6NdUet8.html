<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>SQL Server 28 - Composite Primary Key | Coder Coacher - Coaching Coders</title><meta content="SQL Server 28 - Composite Primary Key - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CalebTheVideoMaker2/">CalebTheVideoMaker2</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>SQL Server 28 - Composite Primary Key</b></h2><h5 class="post__date">2017-01-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YmGi6NdUet8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yo everyone welcome back to caleb the
video maker - so in the last video this
is where we left off we are in the
process of creating an animal dating
site and we have a table to store all of
the animals that sign up and a table to
record all of the available species and
then the animal can reference one of
these species but you know that's really
not enough for an efficient dating site
the animal needs a way to say other
species that they are interested in
right so we need to create an interests
table why do we need a third table well
it's because one animal can be
interested in multiple species and an
individual species can be labeled as an
interest from multiple animals therefore
we have a many-to-many relationship and
you know many to many relationships
don't go well with databases so we break
this up into two one-to-many
relationships so this becomes an
intermediary table and this kind of
breaks that tension between the two
tables by now you're probably an expert
on the create table statement so I'm not
going to waste your time explaining it
all but now I'm wasting your time
talking about how I'm not going to
explain it all oh and the two columns in
here are literally just going to be a
species ID and an animal ID that's
because we are associating one species
with one animal we'll start with the
animal ID though because an animal is
interested in species it just makes more
sense to put it that way you could flip
it and say here are the animals
interested in this species but this is
more clear to me and then we are also
going to have the species ID now what
data types are these going to be well as
you learned in the last video the
foreign keys always need to match the
data type of the column we're
referencing which means we need to make
these both int we are also going to make
them not null but we are not going to
make them unique because that would
defeat the purpose of this table the
point of this table is to allow an
animal to be interested in multiple
species but if we made the animal unique
for example then we could only have this
animal in this table one time which
would limit the animal to only one
species so each individual interest is
going to get one row that means an
individual animal ID might be in here 20
30 40 times depending
and you know the character of the animal
now what about the primary key well
we've talked about this there's two ways
we could do a primary key for this table
the first is to have a compound primary
key the second is to create an ID column
and this would be a unique ID to
describe a specific interest now these
both have their ups and downs the ups
for the compound is that we don't need
to add any columns but the downside is
that it becomes more complex any time we
want to talk about this individual
interest we're going to have to have a
compound foreign key which that just
makes things more complicated the
benefit of this column is that we can
avoid that now when we reference an
individual interest all we have to do is
have an individual ID as the foreign key
to expand our learning I am going to go
with this route so we are going to
create a composite primary key now how
do we do this we can't just add it to a
column like this that's because this is
a column level constraint it can only
talk about this individual column so
this is a problem we actually have to
add the constraint at the table level so
that means we add it as if it's its own
column so we just come past here and add
a comma and then we just say primary key
and then in parentheses we can actually
add both columns so we could say animal
ID species ID so that is how you create
a compound or composite primary key last
thing I wanted to add a drop table
statement for this table so let's go up
to the top and one thing about the drop
tables is you always want to try to
delete the children first because for
example if we hate try to drop this
table here I'll show you you can see it
says it's referenced by a foreign key
constraint that's because we didn't use
the on update Clause when we created
this foreign key that means we need to
try to delete all the children first so
this new table it actually references
both tables so it's like the child of
all children so we need to drop it first
so let's add a line here drop table if
exists interests all right so everything
should be good let's run it and make
sure it all works and there you go now
let's go to our object Explorer and find
that database subscribe go to the tables
and then go to interests and columns you
can see that they're both labeled the
primary key but if you go to key so you
can see it has this disgusting name it's
this gross alright we need to fix that
so in the next video we are going to
learn how to name our constraints so you
guys thanks for watching hopefully that
was useful if you need to look over this
here's the entire code and yeah thanks
as I'll see you in the next one and be
sure to subscribe</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>