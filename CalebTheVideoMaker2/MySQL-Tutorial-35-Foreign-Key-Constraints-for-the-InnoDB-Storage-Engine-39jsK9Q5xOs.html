<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MySQL Tutorial 35 - Foreign Key Constraints for the InnoDB Storage Engine | Coder Coacher - Coaching Coders</title><meta content="MySQL Tutorial 35 - Foreign Key Constraints for the InnoDB Storage Engine - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CalebTheVideoMaker2/">CalebTheVideoMaker2</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MySQL Tutorial 35 - Foreign Key Constraints for the InnoDB Storage Engine</b></h2><h5 class="post__date">2012-10-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/39jsK9Q5xOs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody in this video I'll be
talking about foreign key constraints
and these are actually pretty cool so
but first I want to give an example so
let's say in our imaginary world we have
a database for customers of an online
store all right and then there's also
orders so customer six ordered a bicycle
and a new hat
alright so let's draw this out here we
have a table now let's say also we can
leave comments on the website from
certain customers so here's the
customers and then we also have a table
down here for the orders that says
orders and we also have a table here for
comments and reviews of products so each
one of these is going to have IDs so
this will have a customers ID orders ID
and comments ID now also since these are
going these two have for each order we
have who bought it we will also have a
customers ID here which will be a
foreign key back to customers so this
will come back up to here and then
comments will have a who it's from so
these will also come back up to here so
if you look at it it's sort of like a
branching system so these both point
back to the customers and then the
foreign keys so we have the ID here the
ID here an ID here and these are all
supposed to be the same person so here
we have a little guy his name's Caleb
and he goes to this website daily and
buy stuff so his customer ID he has a
customer ID of 6 right yeah that's nice
seven so now when he buys something he
has another order number of seven and
then when he leaves a comment
he has another seven seven so now you
can see these are all the same ID so the
seven all refers to Caleb and this is
how it is all connected to know who is
who
so if you need to know who is customer
seven you look at the customers table
because it's going to display all the
information about customer seven whereas
these tables are only going to say the
customer ID so if you look at this this
is sort of like the mother and these are
like the child's the children I should
say sorry and the IDS the customer IDs
are foreign keys so now let's say in our
imaginary world
this guy breaks the law on the website
and gets his account deleted right so no
more Caleb he's gone so customer ID 7 is
gone so now let's say his his
information in the table is gone for the
customers table the table still there
just his information about is gone so
now we have an order with the ID 7 and a
comment from the ID 7 or a review from
the ID 7 so who does this point to oh
let's go look at her table and whose ID
is 7 oh it's not there you know why
because Caleb got deleted so now we have
comments by people who don't exist and
this isn't good so the purpose of
foreign key constraint is to prevent
this so basically let's say we have a
table with the information of Caleb and
then when this the information gets
deleted say the information here will
also get deleted so now we don't have
any orders by Caleb or this person who
doesn't exist except for history like he
keep at one point in time this guy
bought this yet
if so there's no comments by him either
so now we don't have anything about
Caleb which is what we want because he's
gone there may be times when you don't
want this and that's why there's more
options for constraints and that's what
I'm going to be talking about here I
wrote a whole bunch of stuff but don't
freak out because I'm going to explain
everything here now first I want you to
remember what our database looked like
we had a table here which broke off onto
two tables so this was like sort of like
the mother which this will be the
customer info then we had the orders and
then we had the comments or reviews of
certain products that was on the website
so let's look at this when you create a
new table first we would create the
customers table since it's like the mall
I in theory so the customer info table
and then what we would do is we would
create foreign keys on these two tables
back to this these back to this single
table up here you get the point yes so
um in order to do this we would first
create the mother table and then when we
created this we would define a foreign
key in the in the query so you would say
foreign key just like you write primary
key before to define the primary key
when I are going to write foreign key
now what is the foreign keys name or
what's the column name it would be
customer ID which will be a prop foreign
key so even though it's a foreign key
it's still a column within these tables
so you would have a order ID and then
you would have a customer ID or a cust
ID now what does this customer ID what
is it reference it references customer
info which is a table and then it
references the column customer ID so
here we have the table customer info so
this here points to this table right
here can you see that yes and then which
column does it refer to it refers to the
customer ID or this is actually the
primary key of this table down here
because you remember the tables customer
info and every single table needs a
primary key so the primary key will be
customer or cost ID that's a really
matter you can name it whatever you want
now when you do this this makes a
connection now by default if you uh
don't say any this extra stuff and you
try and delete this it'll give you an
error or if you try to change something
it's it's gonna prevent you from doing
this it'll give you an error and there
so if you want to break it up more
there's two options on update on delete
and then you can put two things after it
cascade or settle there's some others
but these are the main ones so what does
this mean
let me explain these first cascade this
will do whatever you do to the main or
the muddler table will affect the
children so if I delete this table and
erase it these two will disappear too
because they reference back to that set
null let's say if I delete this table
it'll actually go and set these tables
the information for Caleb to know if you
remember a little guy Caleb if we erased
him the new information will be null or
empty so this is our options so now
which one points to what on update if
you want let's say you update it and you
want it to also update it in the
children tables then you would use
cascade and if on update you want to set
everything else to know that you've
changed then you would use set null so
for an update I'm going to use cascade
right now on delete we can set it to no
and think about this if the table hat or
of the column has the feature not null
then this will also give you an error
because we can't set it more so we're
also going to use cascade for this
so let me explain this a bit more here
is this real quick if we update the
mother table it's going to affect all
the children's tables children table Hey
all that yeah and if we delete the
mother table it's also going to delete
the children's tables so this is going
to protect our our database structure
integrity or whatever you want to say
it's going to protect it and keep it so
there's not going to be stuff that
points to things that don't exist and
this is all called foreign key
constraints and also this must be on the
database engine storage engine in Oh DB
so if you remember we had my I Sam
Americas out I guess
my I Sam and then we had you know n o DV
this must be of the storage in an engine
in ODB not this one this this is for
full-text searches and we will be
getting into those soon so keep watching
and you I'm hoping you're learning a lot
because this is actually some pretty
interesting and this is actually
starting to get more advanced so I'm
glad you're sticking with me this far
and I'm hoping you're learning and
subscribe and let me know what you think
and like my video and add me on Google+
and share it to your friends and uh
that's all oh yeah
subscribe see you later</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>