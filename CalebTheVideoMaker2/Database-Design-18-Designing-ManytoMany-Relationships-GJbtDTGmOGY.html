<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Database Design 18 - Designing Many-to-Many Relationships | Coder Coacher - Coaching Coders</title><meta content="Database Design 18 - Designing Many-to-Many Relationships - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CalebTheVideoMaker2/">CalebTheVideoMaker2</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Database Design 18 - Designing Many-to-Many Relationships</b></h2><h5 class="post__date">2014-07-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GJbtDTGmOGY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up everyone its Caleb from
Caleb the video maker to killer comm if
you like this video be sure to subscribe
kit I'm like a broken record tell you
this like all the time guys you just
need to click it already
let's click click subscribe if you
haven't made a Google account make a
Google account and then subscribe and
then make 10 more now I'm getting dull
huh
just subscribe 1 yeah I mean whatever
but anyways this video will be about
many to many relationships oh and we're
talking about designing many to many
relationships so I set her a couple
video videos ago that we have problems
when we design many to many
relationships they don't work out right
they don't and I mean I never really
explained why well this video I'm going
to explain why think of let's think of a
good example a college a class can have
many students and a student can have
many classes so we have two entities we
have to worry about we have a big class
or let's just little eyes it because it
makes more sense the classes and then
the students so let's just think of an
example of a way we would try to true we
would try to design this and it's not
going to work out right but we'll just
we'll just try here we have classes
table and we have a specific class such
as math math 101 whatever really so we
have Matt you can't even read that my
handwriting is so bad so we have math
101 and then we list all of the people
within this class so we have a student
number one and then number two and then
Stu number three all right well we can
try that except what if a student drops
out well then we have
a null value which we don't want to have
those if possible and what if we need
for students well that's not going to
work because we only have three columns
so how else could we do it well we could
try just having students
well then every single column could have
like 100 students and we already learned
about the atomic rule we only want one
column to store one value on student so
what we do well okay that's not going to
work
let's try over here let's try it on the
student side we have a table for
students so we have Jimmy and he's
taking his first alright let's let's
list the columns so we have the name and
then we have class number one and then
we have class number two and then we
have class number three well that's cool
what if he wants to take four classes
though well then we have to add a new
column and let's say someone psycho
crazy guy takes like twenty classes so
now I have all the way down to class
twenty and then a new person comes to
the school and he only takes one class
so now his first class is like math and
then there's nineteen columns for that
guy who are empty because we have to
have the columns for every single person
we think of it like this we drew that
out so where you can see it better we
would have a table and then we'd have
the ID of the person and then the
classes so which puts like class 1 class
2 plus 3 plus 4 plus 5 6 let's just
leave it at that and we'll just kind of
make rows for these and we have a new
guy signup so we have a guy we've gotta
give 6 and his first class is math right
and then his second class is geology and
then Spanish and then fashion and then
biology
and then chemistry and then we have a
new guy come and he his ideas eight and
he only takes signs right well now we
have null null null empty nothing we
wasted all of this space and you can
assume that's going to keep happening
so that's wasted space in our database
bad design so how do we possibly do this
well the trick is because because we
think of if we're trying to think of
like parent children who's the parent in
this situation well a class has multiple
students so that would make the class
the parent and the students the children
but a student can have multiple classes
so that would make the student the
parent in the classes the children so
how is it that this is the parent and
this is the parent at the same time that
means this points to a child and this
points to a child so this parent is the
parent of this parent who is also the
child of this child which that's just
like blew my mind I don't even know
what's going on so the way we do this is
we break it up into two one-to-many
relationships so this many-to-many is
going to become a one-to-many and then a
a second I think I guess all right okay
just for you guys as information these
these : things I think the correct way
to do that is many two and four like the
like the end keep going on but just
don't worry about that we'll talk about
that in upcoming videos I'll just
writing that for a my sake so we're
going to break this up into one many and
then another one two
but the other way so that is how we fix
that problem all right so let's
implement that with classes and students
what we need is what's known as an
intermediary table or a junction table
they're both the same thing I'll write
that out so you can hear me enter
mediary
or a junction there's also like 50 other
names for this table but I mean just
intermediary table will work fine so int
erm EDI ary now what that is that is how
we connect our tables so we break this
up into a total of three tables so we
have the intermediary table which is the
one I just talked about and then we have
the students table and then we have the
class table so class student this is the
intermediary table so we have a
one-to-many relationship going this way
and then we have a one-to-many
relationship going this way so one many
one-to-many I know that it seems a
little confusing at first but trust me
it'll make sense once we start
explaining things more so we have one
too many one-to-many and this is the
intermediary table
so let's just draw this connection so we
kind of make can visualize this a little
more kind of like split this so see how
it works
so we're storing the many side of both
relationships in one table that's
because we know that a one-to-many
relationship is spread out over two
tables so one two one two
the the two it's being shared so what
would we name is we would say like we
can name it class students for example
and these are going to have foreign keys
that point back to the class and the
students so now that we kind of
understand what it looks like when we
draw it let's give specific examples to
illustrate this actually like what it
would work like look like whatever all
right so let's say we have our classes
over here and our students over here
okay so first things first we have math
we're just keep it simple math science I
mean obviously be more in-depth like
math 101 math 2 of 5 or but 1200 or
whatever and then we have English but
just for simplicity sake let's say these
are the only three classes in the
college all right
then we have all of our our students we
have Caleb oh we have Salam we have come
Klebe and then we have May I'm so
conceited all I ever talk about is
myself all right let's get rid of my
name let's go with Johnny and Jake
and Sally and Claire Claire all right so
here are all of our students for our
class flosses students we connect these
in the middle so first things first we
give them all an ID because that will be
our primary key so we'll just give these
random assignment Murs which is pretty
much what a primary key is a surrogate
primary key so look at this one 63 this
is something our database would do for
us
this one will be 75 and this one will be
89 hope you guys can see that clearly
we'll do the same thing over here so
John will have the ID of 8 Jake the ID
of 17 Sally the ID of 16 and Claire the
ID of 4 just kidding six six six cuz
she's evil six six six I'm just kidding
we'll just we'll just go with six okay
now we use the intermediary table to
connect these IDs so we have this table
here we have two columns we have the
class ID and then we have the user ID
and then if you wanted to title these
tables we can make it classes class
students and students it's the
intermediary table what intermediary is
it's something that connects two things
it's like it allows this table to talk
to that table so it's a connection
between these two teams we put the ID of
the user with the class that they're
taking so let's say John is taking
English and science we would have 875
889 right really big I'm going to run
out of room really quickly and what this
does is using this intermediary tape we
can figure out that all of these user
IDs point back to a specific person and
these IDs point back to a specific class
we are not repeating data because we
need to know the user of this class ID
this is a foreign key pointing back to
one specific value so that means if John
decided to drop out well then we have
foreign key constraints to get rid of
these that way we don't have to worry
about incorrect data or users I guess
I'm sorry this should be like students
sorry but we don't have to worry about
students who we don't have to worry
about students being enrolled who don't
exist so that is the solution to a many
to many relationship this video is
getting really long so Sally could do
the same thing we could say 16 and then
75 she's taken science Claire she's
taken uh she's taken math we keep going
on if we really wanted to we can make
this table as big as we wanted and
basically this is the easiest best way
to use as much data basing resources
storage as possible as well is now we
solved the many I'm sorry the
parent-child relationships that's
because we have the parent over here we
also have the parent over here they
point to the child table so this child
table becomes the child of both of these
parents sort of how in real life every
single person has two parents and the
person is this entire room we know can
see it applying that to this the parent
is the class and the student of the
class and the child is a row where we
have both the class and the student this
right here needs to be unique it's an
individual child we can't have 663 again
because that's saying Claire is taking
science and Claire I'm sorry math Claire
is taking math and player is taking math
that doesn't make sense
so this right here is unique 63 to 6 you
can't have it in there twice so the
child is an individual connection
between the parent and the other parent
so that is how you properly store many
to many relationships and I know the all
these relationships are kind of complex
and you don't really understand with
like a stupid chalkboard but like I said
we will be getting into on-screen
computer videos in the introduction I
mean I said that in the introduction
we're not going to do that introduction
because that would a new make sense so
we will be explaining these concepts and
then we will be applying these concepts
to actual databases once we get through
all of the database concepts so yeah see
you round stic stick through to the end
of this series and you will learn a lot
so be sure to subscribe thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>