<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Oracle SQL Tutorial 19 - ON DELETE (SET NULL and CASCADE) | Coder Coacher - Coaching Coders</title><meta content="Oracle SQL Tutorial 19 - ON DELETE (SET NULL and CASCADE) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CalebTheVideoMaker2/">CalebTheVideoMaker2</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Oracle SQL Tutorial 19 - ON DELETE (SET NULL and CASCADE)</b></h2><h5 class="post__date">2016-12-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xDti3Y66Naw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back to your oracle SQL
tutorial series this is Caleb from
Caleb's video maker 2 and in this video
we are going to continue our discussion
of foreign keys constraints and what
they are supposed to protect us against
so the first thing constraints are
supposed to protect us against is
incorrect or invalid insert statements
so for example in this users table we
have a unique constraint so that means
if you try to put a user name in there
that already exists you're gonna get an
error so let's just show how this works
so I already have both of these tables
in existence and we're going to run an
insert statement if this is your first
time learning about inserts
congratulations but it's really simple
all you got to do is say insert into and
then say the table so let's say projects
and then all you do is say values and
then in parentheses you pass in the
values separated by commas so we just
have to make sure we match the datatypes
numbers are always just plain no quotes
or anything like that
so we could just say 24 23 whatever then
a comma and then inside of quotes the
project name and then finally we need to
say the Creator and that's going to be
the creator's username because that's
what the Creator column references so
that means we need to pass in the user
name inside of quotes so in here I'll
just say created by Caleb curry and then
we'll highlight this entire thing and
run it and you can see we get an error
you see it says integrity constraint
violated parent key not found and what
that is saying is that we tried to make
a project and assign it a creator but
that Creator does not exist these
constraints work really well at
protecting us from invalid inserts but
the other thing they need to protect us
from is invalid deletes now how does
that work well by default you're just
going to get an error if you try to
delete something that violates a
constraint and let's go through an
example that shows this we're going to
keep this insert statement for the
projects but first we're going to create
a user insert into user
values and then we'll just fill in those
columns the first one the user ID will
go with one and then we'll give them a
user name of Caleb curry put a semicolon
so we can run both these at the same
time
hover over all of it and run it and you
can see in here both rows were inserted
so if you wanted you could go look in
the table and see the data sorry to have
the user's table open you can click data
and you can see we have user ID of one
with the username Caleb curry but we
don't need this right now so I'm just
gonna drag that back down now let's be
mischievious and delete stuff so to do
that we need to use the delete keyword
so we're gonna try to delete the parent
Caleb curry we need to use the from
keyword and then we need to say what
table users and then we need to use
what's known as a where Clause to
specify which users we want to delete so
we'll say where and then we'll say let's
go with the user ID equal to one so
that's going to delete the user who has
the ID of one let's run it and you can
see we get an error it says attempted to
delete a parent key value that has a
foreign dependency so you can see it's
not even going to let us delete the
content from the table and that's pretty
good by default but what if you want to
configure some stuff you can actually do
that and to do that you need to use the
on delete keyword when we define our
foreign key constraints so we're done
with this insert and delete so let's
just get rid of that let's go back to
this projects table and after the
foreign key constraint let's add the
keywords on delete then you need to say
on delete what do you want it to do the
first option I'm going to explain is set
null essentially what this is going to
do that rows Creator column is going to
become null that might work in some
situations in this situation it's not
going to work super well because we have
it labeled as not null so when would you
want to do that the best time to make it
set null is if the long-term survival of
projects is important to you if that
user deletes his account well the
project is still going to exist it's
just going to be creator
what is the other option though the
other option is called cascade what this
is going to do is also delete the child
and yes this can get very dangerous
because ten years from now when you're
working with your data you try to delete
something and that delete cascades
through your database like a virus
deleting all kinds of stuff so you need
to be very very careful with the on
delete cascade in all honesty the
default is probably the safest route
because it's basically going to prevent
you from deleting anything because
everything's connected but that gets
really frustrating because then you
always have to find the child of the
child of the child and then delete up
the tree until you get to the parent so
it can get a little frustrating in this
situation we're going to go with cascade
because we want it that if the user
deletes his account or he gets banned or
something stupid then the project is
just deleted we don't want it to be in
existence anymore whether you want your
app to do that that's up to you but
that's what we're gonna go with in this
situation so first let's delete that
table so we'll hover over this and run
that and then finally let's create that
table again so it's created everything
seems to be working and now when you
delete the parent that change will
cascade down and delete the project so
hopefully that was useful for you guys
if you guys have any questions be sure
to leave them in the comments I will try
to help you out or if anyone else knows
the answer I'm sure they'll try to post
something if you like these videos
please be sure to subscribe it click
like and continue watching thanks guys
and I'll see you in the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>