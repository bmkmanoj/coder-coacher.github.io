<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel 5.2 PHP Build  a social network - Post Validation &amp; Outputting Errors | Coder Coacher - Coaching Coders</title><meta content="Laravel 5.2 PHP Build  a social network - Post Validation &amp; Outputting Errors - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel 5.2 PHP Build  a social network - Post Validation &amp; Outputting Errors</b></h2><h5 class="post__date">2016-02-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8zIWGhVmTKk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everyone will come back in the last
video we set up our post so that we can
create new posts and attach them to a
user now in this video I want to do a
little bit of fine tuning I want to
validate what the user sends us
I want to output a narrower if well
basically we receive an empty post field
and I want to also give back a success
message when a post was created now let
the next would you we'll have a look at
outputting these posts in our dashboard
let's start so validation isn't
something new we've done it before
so it should be done really quick here
in my post controller I want to add it
and as you are aware I can just call my
this validate function in my controller
here and I will pass the request and
then an array with well my rules
basically now I only got one feel this
is the body field and I want to have a
rule of well it being required it
shouldn't be empty and let's say we
don't want it to be longer than 1000
characters okay so this should be the
validation and in case we're not getting
a validation error but instead we're
saving this I want to give a success
message now therefore I will wrap this
in Pretorius saving of the post in the
if statement because this will only
return true if it was successfully
inserted well and if it was not
successfully inserted I want to give
back an error message saying well there
was an error while trying to insert your
post or to create your post so in case
of success what I will do is I will pass
a message and let's say this message by
default is it's a bad outcome that we
say there was an error now if we're
successful then I want to alter that
message to say post successfully created
now how do we pass this message well the
good thing is when we're redirecting
here we can chain another method here
and say with now the width method allows
us to pass a message
so here I'm just passing is an array
where I have a key that says message and
I'll have and then the value of the
message so here this will just be
message and in the case of only passing
one string I could also just pass the
string but but here I'll use the array
because what you might want to do is you
might want to send the success message
with a key of success and a failure
message of a key or fail so that you can
differently style the output you're
showing in the template but in this case
so I don't think we'd get ever will ever
get a fail so just have one styling
should be okay here okay so now we're
passing back our message here and we
obviously pass back an error if
validation fails so now in my dashboard
I want to output this error now we did
something similar in the Balkan view if
you remember we already have a block
here where we output our validation
errors now I could just copy that and
put it into the dashboard but that would
not be good coding style we won't be
repeating ourselves so the better way is
to create a new include remember
includes are just pieces of code which
we use in different places throughout
our application so here I'll just create
a new let's call it message block that
blade dot PHP and in this message block
all I do is not that all I do is I cut
this part here and insert it here that's
all
and then here my welcome view I will use
the blade expression include to well
target this message block inclusion and
then I do the same here in my dashboard
at the very top and now here I already
use a certain styling so you could want
to
put these rows and columns out of that
include so that you can better control
where it is positioned in the view where
you include it because this way we'll
always have
well this column positioning here but in
this case that's fine so here we have a
problem in a welcome view we're just
using this validation arrow bag but in
the dashboard we also get a success
message which I want to display well it
isn't a real problem I'll just add a
message block here so let's say if here
I'm checking if I have errors now I'll
do the same check for if I have well a
message I can do this by checking if
session has message is true because this
message will be stored in our session
and we gave it a key of message
therefore checking with the level helper
method has here on the session for Sade
if message is there we'll well give us
basically the answer if we have to
output a message now this will always be
true when we created a post but it won't
be true if we're accessing the dashboard
through other means so I'll close this
block here and then I'll just copy the
formatting of this block here but now
here are not outputting a list or
anything like this
all output here is really chest well the
message I get it with the GAT helper
method on the session facade so get
message will output the message here
let's see if that works that I included
here yes let me reload and now let me
submit an empty post as you can see
we're getting an arrow here now let me
create a real boost now we get our
success message up here so that's really
cool now the last thing I want to do is
I want to improve the styling of this
box a little bit so I'm a message blog
here I want to basically have a reddish
block for for the errors and a green
block for the message yes the message
be the creation fated part but as I said
in our local development environment
creating the post that this database
action will probably never fail in a
real application you should have some
kind of differentiation between those
cases so here what I will do is I'll
just give this div in our class where I
say error and here I will say success
and now in my public source in my CSS my
main CSS file I'll just create those two
classes so arrow will just have a border
which is yeah let's say red and it
should have a red background color or
reddish so let me just pick maybe Zin
something like like this here and give
it a red colored text and now the
success will be well basically the
opposite it will have a green border it
will have a background color which
should be like a light green here and it
should have a color text which has the
color of green let's save this reload
this page and try this again yeah okay
now there is something else I have to do
just recognized so I want to make sure
in my error class that my unordered list
that I removed the list-style:none and I
remove all margin and padding of this
unordered list so let me try this again
now yeah that looks better now the last
thing which I might do is Center it and
this is the same for error and success
well therefore
create one rule where I just say it's
the text alignment to Center now if we
load this again yeah and now let's
create a number post here wonderful so
now this is
working we get our validation and our
success message and nice way to output
it so we'll see you in the next videos
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>