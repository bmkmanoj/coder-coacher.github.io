<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node.js + Express - Tutorial - MongoDB + Monk | Coder Coacher - Coaching Coders</title><meta content="Node.js + Express - Tutorial - MongoDB + Monk - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node.js + Express - Tutorial - MongoDB + Monk</b></h2><h5 class="post__date">2016-04-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JnyBjeMmJyY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone welcome back in the last
videos we had a look at well interacting
over longer with database and we used
two native mondo DB driver as supplied
by the MongoDB team and while this
driver isn't too bad we used two point X
version of it and here you can see the
code we wrote and well it isn't too bad
these are really are lots of lines of
codes for example for simply retrieving
all our data here and you may do it this
way it is necessarily wrong but in this
video I at least want to show you an
alternative which cuts down these lines
of codes which is sir you might say an
additional layer using the MongoDB
driver we used in the last parts but
then abstracting it a little bit away or
make him a little easier providing us an
easier access and doing all the stuff we
wrote here by hand behind the scenes so
this is something we'll have a look at
in this video and the name of this
package which test is for us is monkey
now here's an important thing in the
last videos we used to MongoDB driver
version 2.0 this driver already isn't
too bad as you saw in the videos monke
requires MongoDB one point for the
driver the package one point for
something because it is older version
all the functionality we need is
included but it well it has less of this
easy access we used in the last videos
so therefore you really have to compare
the axis of the last videos with what
we're doing now with monk okay now
talking let's get started so what I will
do is I will take our MongoDB project
here and just well copy tips and give it
a new name of or reciprocal it monkey
because this names the package we'll be
using
if two seconds to finish yes or to add
it to get thank you so here I am now the
first thing I'll do is in the package
I'll change the version of MongoDB and I
will change it to version one point four
point one the next thing I'll do is I'll
go into my terminal here make sure that
I'm in this newly created folder and I
will run npm install to install this new
one would it be worship Wednesdays is
finished I will npm install with saved
flag mod and it should finish with it
without any errors so no monk is
installed as you can see the package so
chase updated and now we may use it now
in my index 30s file I will first get
rid of all our MongoDB code here because
of course we will the brightest from
scratch using monk now using long is
really easy completed URL here don't
need a certain target object first
we will import it or require it and we
will also automatically create the
database with it or the database
connection with it so we'll create a
variable 2 DB for database and I will
require monk and this is actually a
method or a function and I will call
this function I will pass the address
patient off my MongoDB and this is
basically just if you remember last
video this URL here without the MongoDB
part at the beginning so I can't just
copy this paste it in here that's the
first thing the next fingers I want to
set my default collection which you will
use for out this file here and I
supposed to use for data collection so
we'll use my newly created database
connection here and used to get mad
which allows me to well yet a collection
of this collection has named you for
data that's the same name as in the last
videos so with this we got our database
and the connection to the database as
well as our well collection object here
setup so I'll start in this get method
here in this get route in this Cathedral
I will create a new variable data and I
will set this equal to user data which
is all newly created collections or say
the representation of this collection or
it connects you to this collection and
here Alice has called a 5 method which
is a method one offers us to well
search for specific database entries
I'll pass an empty object to tell mom
that I want all the entries in this
collection I could in this object well
specify conditions which object should
be retrieved
like for example name column something
if we had an object which has the same
property and we only wanted objects with
this name specify them but for now I
want to retrieve all the entries all the
documents to stay no sequel wording so
this is the first step but this is not
actually a list of our well database
documents here this is indeed a promise
and it has this on function what we can
listen to the on success event so if we
successfully retrieve the data
she then fired well and our function we
then want to execute asses of Korus
asynchronously
so here this function will be less
actual documents which were retrieved
and I can let me say that I want to
render my in next page and I will pass
the items just like in the last videos
and will pass documents we retrieved
here and I can get rid of this result
area so if you compare this method here
this route here
with the same wrote in well the last
part where we used to native mom would
you-- fredward we can see that it's got
a lot shorter we don't have to loop
through all the entries we don't have
this extra area here which we use but
instead well we simply have one call
which kind of sets up this search query
and then we wait for it to succeed to
say hey what do you want to do with the
results you get back and what we want to
do is well we want to pass them to our
view in this case so this was not too
difficult I guess and inserting data
into our database isn't much harder to
be honest indeed it's even easier maybe
here in the post or any insert route I
have my item this is the same code as in
the last videos and what I will do here
is I will simply use my user data
collection representation I got here
call the insert method again a method
provided by mom to insert data into our
MongoDB and well I just passed the item
I went to insert then that's it
that really is all now I could also bind
this statement here to a very look like
bar insert equals and then I can listen
to the onsuccess method if I wanted to
do something with it but in this case
I'm fine doing it this way in a real
application you would of course also
well care for error cases and handle
them but here this is fine and the
redirects fight you of course
so this well just one line not too long
next thing is updating for this we got
two ways to do this the first way is to
use two user data and then update the
update method here and this method takes
two arguments least the first argument
will be our selector so to say which
says which elements do you want to
update and here I'd say I want to update
all elements with an ID
of and now we need this objectid thing
again if you remember it is for in the
last video we can do get this with a
little helper one provides us by using
the DB connection or monk database
object here and called the ID method on
it and this will allow us to transform
any ID with this case the ID were
retrieving from our request into an
object ID that's the first thing this
allows us to select data we want to
update and the next argument is well
what we want to put their own with what
we want to replace this resource in this
case our item here and the support
should not be a comma but I : so this is
how we can update it and we also would
have an alternative which is easy even
quicker got this update by ID method
because we'll updating ready is quite a
common case and in this case we don't
need this DB ID thing here all we came
here is just pass the ID nd item and
we're done so I'm just going to comment
out the first method even though this
would work perfectly fine as well last
thing deleting well not too hard here
again we get two possibilities to do
this like what the update we could use
user data delete and then well manually
do the selection with ID ID just the
same code as with D yeah what's the
update in here but I like to comment to
select Picasa of course we've also got
our user data delete by ID method here
excuse me remove by ID and this is also
remove not delete make sure to get this
right so remove by DHS pass the ID and
you are done
of course as said before you can also
bind all these functions all these
database queries you two variables which
are done promises which you can then
handle the same
we did here and you get data to listen
for success or error he wins so if all
this let me save it and I will run my
application here and this little error
Gator is not important at this point it
will work nonetheless and then I will
navigate to local over 8,000 which is
our application here just bring them to
some website so if we love data well we
don't have any in the database you will
do this I will create a new data entry
here and now I can see we got it so
getting an inserting that's work we can
say this next thing is updating the data
let me grab the side a year and I will
name this a real title real content and
let's capital make the first cut of max
capital letter update load data as you
can see updating works as well last
thing of course is still eating paste
the ID in here delete located it's gone
so this are all the actions we did in
the last to do with the native moment to
be driver with mug and as you can see
monk allows us to do this a little bit
quicker and in a more convenient way
maybe but of course it's up to you you
may also use to normal I'm going to be
driver which we did not last videos and
maybe you liked us more maybe you want
this more fine-grained control over what
happens behind the scenes in the next
video we will have a look at and even
more elaborate solution to this problem
or to the school database access thing
which is Mongoose which will not only be
an extra layer allowing us to do all
these database interested quicker but it
will be a fully fledged / M which means
it actually Maps certain objects to
database entries like you might know it
from laravel Zelo went and this will
allow us to interact with our database
and
some validation and defined schemas in a
very negative way or in a very natural
way but it will see this in the next
video see you there but</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>