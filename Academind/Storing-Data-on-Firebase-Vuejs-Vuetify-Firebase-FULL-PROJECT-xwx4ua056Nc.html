<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Storing Data on Firebase | Vue.js + Vuetify + Firebase FULL PROJECT | Coder Coacher - Coaching Coders</title><meta content="Storing Data on Firebase | Vue.js + Vuetify + Firebase FULL PROJECT - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Storing Data on Firebase | Vue.js + Vuetify + Firebase FULL PROJECT</b></h2><h5 class="post__date">2017-08-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xwx4ua056Nc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back to our meter project in the
previous videos we already added quite
some functionalities in the last videos
you made sure that we can sign up sign
in and get off education errors now I
wanna sign in and I want to work on the
next big thing when we organize a
meet-up right now we only store that
locally in our view X store and
therefore we can see it there but we
don't persist it we don't store it in a
database on a server this is what I want
to do in this video let's store new
meetups on firebase
so the goal is to store new meetups on
firebase so that if we fill out this
form entered image and everything pick a
date that we actually write this to our
real time database on this firebase
project we're using here now for this I
will use the firebase SDK though I will
highlight that if you visit the docs and
click on guides there if you pick real
time database this is what will use the
web SDK JavaScript SDK you could also go
with the REST API though so you can send
normal Ajax requests queue this REST API
to save new items in the database or
gets the items and there won't be
nothing wrong with that I'll stick to
the SDK because well I also wanna teach
that and because I used the SDK for
signing users in and up already
but I just wanted to highlight you have
that option you don't need to use the
firebase SDK now with that out of the
way let me close the documentation and
go back to our project code here now any
earth it's this is a store opened right
now what we do is we have hard-coded
meetups here which we load at the
beginning and then we also have our
create meetup method here which will
basically just create a new meetup
constant and write that to our well
local array of meetups I want to keep
that action but in that action I now of
course want to reach out to firebase and
store it there now we're already
importing the firebase SDK because we're
using it for authentication so what we
can do in this create meetup action is
we can use the SDK here to to write data
to the database I will still create a
meet-up obviously but before I commit
anything I want to reach out to my
firebase servers and this is important I
do this in the action because actions
are the place where you do asynchronous
tasks in a view X store you never run
any asynchronous code in you
Haitians so you never do that here and
of course we do have asynchronous code
here because reaching out to a server
which we do in the end and storing data
there that is just a synchronous task so
Q reach out to firebase I'll use the
firebase SDK and for authentication we
use the off method here now off gives us
access to all the authentication relay
that methods and functions here I want
to get access to the database related
ones so we call database now on database
we now got this ref function and ref is
a super important functional method
actually ref allows us to pass an
argument which is basically denote in
our database under which we want to
store data if you check out your
real-time database here you see that it
basically is a tree of nodes well we
only get the root node right now but you
will soon see it becoming a tree
we don't have tables here or anything
like that we just have one big JSON
object so to say and that is where we
store our data so to store data I first
of all need to specify a node under
which I want to specify that store that
data and that node doesn't have to exist
yet here I will name it meetups and
again this is totally up to you what you
name it it doesn't have to exist yet it
will get created once you start writing
data to it so now I specified that I
want to store data or that I want to
access the meetups node that's all I'm
specifying right now I'm not doing
anything I will call the push method
next which is one of these supported
methods firebase offers us for writing
data Porsche simply allows us to add
data to a list we would also have set
which is useful if you don't have a list
of data but a single object you want to
set and we also have updated we will see
update later in action which basically
allows us to update one single item
again here I will use push though
because of course I manage a list of
meetups
now to push I can pass my meat up just
like that I can remove this ID note or
this ID property though because firebase
will automatically create a unique ID
for me so I can remove that and by the
way if you want to learn more about
firebase check out this mini-series I
did together with an actual firebase
employee who gave us some deeper insight
into what firebase is and how it works
super useful for understanding the
bigger picture and some advanced pieces
back to this project though we're
pushing this meetup constant to firebase
under this node and that should already
add it however this actually just gives
us a promise here so we can use them now
to react you a success case so if we
successfully wrote data here for now
what I will do is I will simply fetch
that data we might get back here and
simply log into the console to see if
that was successful we could also fail
so let's also add a catch block queue
whoops without semicolons here that's
the style we write the code to also see
any potential errors we got so here we
might receive an error which I then also
want your output console log error just
like that with that we're handling all
that and we're not quite done I will
also change the place where we commit
this in the future actually I can do it
right now I want to commit it inside the
success callback because I only want to
commit this item to my local store if we
successfully wrote it to the database so
with that let's save this code and let's
do it in our application here let's open
up the console and let's create a new
Meetup maybe the Paris meetup and I can
now actually just take the data here
like the image here in my dummy meetup I
have hard-coded that is in Paris
obviously here's the image URL it's a
nice meetup in Paris
and let's pick 24 third August and maybe
5:00 p.m. let's click create meetup and
you see we get something back a
strange-looking object I will come back
to how we can handle this soon let's
have a look at our database now and you
see without updating the page by the way
it updates automatically then we have a
new meet-ups node and that's of course
the node we specified here in our create
meetup action this node here so we get
this new node and if we expand it we see
there's a new object with some cryptic
key that is this ID firebase krint
automatically it's guaranteed to be
unique and in there we got the
description the image URL the location
and the title you will see that the date
is missing though even though we had it
in this object the reason for that is
that the date as we get it here can't be
stored by firebase it's a date object
and it can't store that we can actually
call to izo string on that date object
to convert it into a string which can be
stored so why don't we try out that so
let me save this and let's quickly sign
in again by the way of course you don't
see our newly created meetup here in the
list of meetups because we don't fetch
meetups from firebase yet so let's
create a new meetup quickly and I will
do this really quick just hammering some
characters in there because I just want
to see if the date gets safe now so
let's just pick any arbitrary date here
let's click create meetup and let's have
a look new item was added and now you
see the date was stored as a string so
that's useful
now we're already storing our meetup
here now I will soon also add file
upload so that we don't just paste a
link in here but that we can actually
upload files and store them on firebase
before we do that though let's think
about how we can read or how we can get
the meetups
from firebase and what we would need to
work with them correctly one thing we
would for example need SD ID firebase
creates for us descriptor extreme
previously we hard-coded an ID into our
code but we removed that a few seconds
ago that means that if we view our
meetups and we try to access our new
Meetup
you already see it in the bottom left
corner it's undefined it has no idea we
try to fetch it by ID and it worked in
the past when we hard-coded the ID but
now it's of course not working anymore
because well we got no ID anymore we
removed the field here in our Meetup
that's the meetup we commit to our store
though we try to access a media buy ID
we got non error well we have an ID in
firebase and we actually get back some
data op check here so maybe we have a
way of getting that ID firebase created
for us and stored it in our local store
too so that we can use the firebase ID
to access the Meetup and when deed we
can even though the object we get back
when we successfully saved our object
even though that looks rather cryptic we
can extract some useful data from it for
example the key so here what I can do is
I can create a new constant key and just
access data key we might not see that
property when we print it to the console
but it is there it's just a special type
of object firebase gives us back it's a
promise about and it basically will
resolve to some actual data pretty fast
so we can safely access key here so with
that we get the key
firebase credit for us and now we can
use that to adjust the meetup we wanna
save so we can basically just commit an
object here where we use the spread
operator here to get our meetup data so
from that me table object so basically
just get all the properties we had in
there and add them to this newly created
object here and also add our key
however just don't don't just add it
like that use ID
use key as a value so now we're using
that key firebase created and stored as
an ID to the meetup which we actually
committed to the store with that in
place if we now save this and reload
clear the console to see we got no
errors quickly load in again a login
again organize a new Meetup
let's just add a meetup here again again
pick any date we want
let's hit create meetup now again we see
this was created here sign out if you
have really good eyes you might see that
the date we store here is stored as 7:00
a.m. or 751 a.m. whilst here we did
indeed save 951 a.m. that's just my
local timezone here and a destur the
time zone here - with this character so
we are able to retrieve to correct time
later just a side note more
interestingly we can see that if I now
click on view meetup you see already
we're using this idea and it works we
can load it so we get the front that
fixed again however of course if we have
a look at all the meetups we just see
the one we just created even though we
have more of them in our firebase list
well we're not fetching data from
firebase yet so let's do that - now for
that we need to make sure that we fetch
data whenever our application loads
basically and we need to add a new
action well let's start with the action
then for that I'll add well a new action
I'll call it load meetups here as always
I get access to the commit method I
don't have a payload I'm interested in
because I just want to load all the
meetups and there I now want to reach
out to my firebase database again and
now I want to reach out to the ref again
so to this meetups reference where we
stored all the meetups to tell firebase
which node I want to access however now
I'm not pushing or setting anything
instead I want to fetch values in there
are basically two ways of getting values
the first honesty on method
on actually allows us to listen to an
event the value event is the most
important one and this is an event
firebase gives us which is fired
whenever the day that changes keep in
mind that it's called a real-time
database firebase automatically accesses
aid via WebSockets and hence we can
listen to any value changes and get push
notifications by the server whenever the
meetups on our array of meetups change
sounds pretty awesome and it is and
again check out this our video series I
mentioned I did together with Abe from
Google to learn more about that now here
I don't really need that real-time
functionality though I can use one stair
4 which will just give me a snapshot and
not establish a real-time connection
because I'm not interested in future
updates I update my store anyways if
someone else were to add a media buy the
really neat add life update in the list
and if I go back to the app will reload
the app I fetch all meetups anyways
still I pass the value here to get the
value of this reference here so get a
list of all meetups and then again
that's a promise so I can catch errors
and have my then block now like come
back to deep then block soon let's catch
errors first so here I get any potential
error and if I got an error well then
for now I simply want to lock that so
I'm logging my error the deadlock is
interesting of course here I get back my
data and this data here now is super
interesting because this of course is my
list of meetups so it is basically al
this list these three nodes including
the ski and of course all the content in
there I will get rid of the first one
because we have no valid date here can
just click the X the averages have well
ugly names and descriptions but a valid
date and it will soon clear this anyways
to start fresh but let's go with that
for now so that's the data these two
values are what I expect to fetch what I
can now do
I can create a new array I'll call it
meetups and it's an empty array I want
to store all the meetups I fetch in
there now data of course already is a
list of all the elements in the meetups
node but these meetups don't have the
shape I need for my application so I
need to transform the data so we'll
store an object here where it's simply X
is my data and there I have two Val
helper method
well basically gives us access to the
values in the data we fetched here
because we get some additional metadata
too so object here is the actual value I
want to use dad will be an object not an
array an object will have a couple of
properties each key is a property and
the value of each property would be an
average checked with the detailed data
so that is what I get with well there's
object with property value pairs now
since I have an object and not an array
and I want to transform all the elements
in this object so to say I can create a
for loop and basically loop through all
the keys in my object because again just
because it's important I get an object
with two properties in this case the
property is the key here just a strange
ID and the value would be an average
checked so now I'm looping through all
the keys of the object of God so an
object with these two properties and
inside this loop I now have access to
that object which holds the detail
information for each Meetup so with that
here I'm looping through all the keys an
object so I can now use this meetups
array I created up here and push a new
object on it this will now be an object
I construct manually where I want to
ensure that I have an ID which is just
the key actually this key firebase gives
me where I have in title this will be
now object then access to key because
again it's important object is not an
array there's an object we have these
strange IDs generated by firebase as
keys so we're accessing the key on the
object I get access to well basically
this object stored in that property and
on this object here I'm interested in
the title
and then I repeat the same for the
description object key description and
for the image URL which I also stored
object key image URL and so on so let's
do the same for the date here object key
date and that is it for now the
interesting thing here of course is
where do we call this and what do we do
with this meetups array well we'll call
it soon before we do though after
leaving this for loop I want to commit a
new mutation which I'll call set loaded
meetups and I have to create that I will
pass this array of meetups which are
popular here queue it up in Maya
mutations here I'll add a numeration
mutation set loaded meetups this one
here I do expect to get my state here
and of course the payload and then
inside there I will just say state
loaded meetups so access this array
which right now holds hard-coded values
loaded meetups
and set it equal to payload so to that
array I created and I've fetched so
that's what I do now of course would
also be interesting to decide where
should be called this act to where
should we dispatch it when should we
fetch all these meetups and when I do
this in the main dot J's file because
that's the file where I load my app so
we already got this created method and
this is called whenever this route view
instance is created so it sounds like a
good place to load all the meetups so
what I'll do it your is all add some
code after we initialize firebase and
there I will now call this store
dispatch and call load meetups so this
action we just created in the store load
meetups this one so that's what I do
here
let's save this and see if it works if
we go back to the application and we
reload it well we see a strange behavior
here if we explore meetups we see the
meetup so if I go back we see the
meetups but if I reload the application
you will notice at the beginning for a
brief second you saw the meetup in New
York then it becomes black and then the
new meetups are loaded the reason for
this is that when we dispatch this load
meetups method it of course takes a
second to fetch the meetups so maybe it
would be nice to see a loader whilst we
are fetching meetups and we can easily
implement that if you go back to the
store we already have to set loading
mutation which sets the loading state to
true or to whatever the payload is
actually we can take advantage of this
when we load the meetups wait don't we
commit set loading first set it to true
copy that and set it to false here once
we get the meetups maybe after we
actually committed that and also if you
got an error because it's not loading
anymore we got an error but it's not
loading anymore so with that in place
all we need to do is add a loader so
let's go to the home that view file and
here we get this carousel where we want
to basically make sure we only show it
if we loaded all the elements let's head
over to beautify chase for this to see
which component can help us with that we
click on components we actually see that
we get this progress and activity
component thing so here why don't we
pick one of these loaders and
indeterminate one makes sense because we
don't know when we'll be finished so
what I can do here is I can simply pick
any of these let's maybe pick this one
the first one go back to our application
and add it so add a new relay out here
in as we layout on you'd add a new view
flax element
make dis X as 12 to span the full width
on all devices and that's also at a
class which is text XS Center to make
sure the loader which is an inline
element is centered now in there let's
paste our circular loader in there with
the intern managed indeterminate
directive to make sure it keeps on
spinning we don't manually have to
adjust the percentage as it's loaded but
this place is over multiple lines of
course feel free to adjust the color off
it
I'll also then bind Q width and set this
is 7 and size which all set to 70 and
feel free to play around with these well
see how it changes the size of the
loader and then I also want to add the
if and check if it's loading and only if
loading is true I want to show this
spinner now with that I can go back to
my computer properties down there and
loading property and in there I want to
return the value of my loading getter
which we have in the store so with that
let's reload this application and we see
the spinner and once we're done well we
see a black carousel we saw the carousel
before the reason for this is simple
here I'm checking for a loading but
we're showing the carousel at all times
so we can go to the layout with the
carousel and add if not loading on the
whole layout on the whole row here and
now what we should see is that if you
load this we just see the spinner and
then we get the carousel with the loaded
meetups so now we got this working as it
should work loading the meetups when we
need them that's a final step I'll clear
up my database here and remove both
meetups this will not change my display
here but if I go back we loaded we see
an empty carousel and we could improve
this user experience what I want to do
is I want to improve it by organizing a
new one for Dad I'll organize a new
meetup and now I will copy dead link
here give it a new name so that's the
New York
oops New York meetup if I'm not mistaken
here ok
New York therefore maybe with a
lowercase L enter the image awesome New
York meetup and let's pick a time maybe
six September 6 p.m. like that
let's hit create meetup and you see it
works even though I'm not locked in so
that's something I also want to change
I'll do that in the next video though I
want to make sure that only
authenticated users can create new
meetups and that we also store the idea
of the user who created a meetup in the
database because right now we get a new
meetup to get no idea who created it
because we're also not enforcing the
user needs to be signed up and needs to
be able to create meetup so that we need
to user to be signed in so let's fix
this in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>