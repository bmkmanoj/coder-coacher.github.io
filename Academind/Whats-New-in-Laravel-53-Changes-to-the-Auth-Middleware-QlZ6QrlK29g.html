<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What's New in Laravel 5.3? - Changes to the Auth Middleware | Coder Coacher - Coaching Coders</title><meta content="What's New in Laravel 5.3? - Changes to the Auth Middleware - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What's New in Laravel 5.3? - Changes to the Auth Middleware</b></h2><h5 class="post__date">2016-09-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QlZ6QrlK29g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone in many of your applications
you probably need to authenticate some
users and we covered of Education on
this channel quite a lot there with
level 5.3 there were some changes to
authentication and I'm not talking about
passport which was a brand new feature
added to it to create your own ofto
server I'll cover this in some extra
videos now I'm talking about the default
of Education and especially route
protection where we do need to make some
adjustments to make our application work
again which adjustments let's have a
look
actually authentication in level 5.3 saw
quite some enhancements especially with
the introduction of passport which is an
extra package integrated into level
which makes it easy for you to set up
your own Oh off to server which is
especially useful for api-related
authentication for example now I will
have dedicated videos or one video I'll
see how many it will be on password in
one of the next weeks in this video I
want to focus on the changes to the
default normal authentication especially
the change of the middleware we can use
to protect some routes so let's compare
the level 5.2 set up on the right here
with the level 5.3 set up on the left
well one thing we can note notice is
that user model in 5.2 looked like this
user extends of indica table and then
well this is the basic user model we may
use for our own authentication in level
5.3 it looks pretty similar but there's
when you think this is this use
notifiable here now I know the code is
not super big to read here but basically
we do have the same setup of the user
models but this use notifiable here is
new now that's not directly connected to
authentication it's a trait we can use
or we need if we want to use levels
notifications which were also added with
5.3 but about which I'm not going to
talk in this video so that's not really
a change impacting authentication so
from this point of view the user model
did not really change now what did
change is if we go any 5.2 setup in the
HTTP folder and then in middle where we
see the authenticate PHP file here which
is the off malware which you could see
in the kernel PHP file was assigned to
off here now to make this a bit more
readable
I'll act
we expand this over the full window size
so this off Miller here was pointing to
the app HTTP milla where authenticate
file so to dis file here and it was this
off Miller where we could use in our
routes file to basically protect a route
with middleware and then simply off like
this and this would make sure that only
authenticated users were able to visit
this you could of course also use DD
syntax with these square brackets and
I'm protected with the middle aware key
cell that was the 5.2 world and any
authentic a PHP file which in the end
was to malware applied you could control
where you want to redirect a user if
authentication fail so if he was not
authenticated that you then want to
redirect the user to the login screen
for example here as a default setup now
in 5.3 that changed if we have a look at
the HTTP middleware folder we see that
we don't have to authenticate PHP file
anymore if we have a look at the kernel
file we see the off malware is still
there but it's pointing to some malware
deeply integrated into the core
framework so it's not a file we can add
it of course you could edit it but we
shouldn't edit any files in the core
framework instead we have to find some
other way to handle authentication
errors or to handle the case that the
user is trying to access around who is
not allowed to access because maybe we
don't want to use the default way
direction pointing to the login view
here but maybe we want to still change
this now how can we change this if the
file is moved to a place where we
shouldn't edit it the answer can be
found in the exceptions folder now with
the authenticated malware being moved to
the core framework what now happens is
it actually throws an error an exception
whenever we try to access a route will
not allow it to access therefore in the
exceptions file the cat the handler PHP
file and as far as not empty and indeed
it already has this part down here the
of unauthenticated
a function here this function here was
is basically triggered whenever we have
an authenticated exception and such and
such an exception is risen whenever
we're trying to access a route we're not
allowed to do so whenever were using a
route which has the off middleware and
were not authenticated then we get the
unauthenticated middleware but exception
excuse me and we reach this a function
now as you can see this function looks
very similar to the old authenticate
middleware here we are still checking if
we do have adjacent requests in which
case we want to return some JSON
otherwise we want to redirect to the
login view with redirect guest and
that's exactly the same logic we had
here in 5.2 in the authenticate PHP file
so long story short the new place to
edit the behavior letter will should
show when you try to access a route
you're not allowed to access is to be
found here in this handler PHP file in
the unauthenticated function so this is
the place where you make edits if you
want to basically change the behavior
level should use there and that's just a
new way of thinking that you're no
longer editing the file but instead the
exception which is now risen bilateral
that's really all and with that you're
still able to attach the off middleware
to any of the routes you want to protect
and it isn't this file here in 5.3 that
you did that you then decide what you
want to do these are the chord changes I
want to talk about in this video as I
said I will have dedicated videos on
Passport to dive deeper into this so see
you in the other videos bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>