<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>BACKEND WITH LARAVEL | Laravel + Angular 2 / Vue.js 2 | Coder Coacher - Coaching Coders</title><meta content="BACKEND WITH LARAVEL | Laravel + Angular 2 / Vue.js 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>BACKEND WITH LARAVEL | Laravel + Angular 2 / Vue.js 2</b></h2><h5 class="post__date">2017-01-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4uajiXW5R3o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to this video in this series on
building a lateral back and then
connecting it to view chairs or angle to
front ends or in general using lateral
with UJS and angular 2 in this video
we're going to both the lateral back end
so write some PHP some lateral code now
how does the back and look like what
does backhand mean what do we need to be
able to connect our angular 2 or view
chair single page application to it as
mentioned in the first video of this
series we need some API endpoints and
you could kind of translate that with
some routes so let's go to the routes
folder and here in a normal lateral
application we always went to the web
PHP file and started setting up our
routes there so that we then could go
there in the browser and simply enter
localhost or whatever your domain is
slash your route whatever you enter here
now that is not how we do it or how we
work when building chest at API and API
is not there for a normal user to wizard
it's not something you want to make
available by just visiting localhost /
something or you can make it available
to be wizard like this but you don't
want to return use there you don't want
to return HTML instead typically you
transfer JSON documents so you get JSON
data and you return JSON data letter
will has a specific group for that a
group of routes and that is in the API
dot PHP file the difference between the
two files are the middle of where's
which get applied to those routes we can
have a look at those middle Aware's in
the app folder and there at HTTP and
then kernel PHP file here all the middle
of wares are set up and here you can see
those middleware groups web and API and
as you can see the webmail or group has
a lot of middle of wares which get
applied to all the routes in the web
tour PHP folder and the very important
middleware is here are responsible for
encrypting cookies
checking the CSRF token storing the
session so all those
typical tasks we need to do when we
create a normal well lateral application
where we render some views where the
user will do some things and send some
requests back to us now for the API we
only have to default middlewares
for frauding and substituting the
bindings and this is the difference here
we're not storing or managing any
session we're not encrypting cookies
we're not setting any CSRF token because
we won't use sessions our back and then
this is important our back-end does not
care about our front-end and the other
way around we're not storing a user
session because we're not using our
back-end like this because we're not
sending requests like in a normal
lateral application our front-end yang
go to application for example we'll from
time to time send a request but this
does not have to be connected to the
user who's on the page the backend
doesn't care you could have a mobile and
app sending requests or a web app and
your back and chest does not care your
back and simply provide some services
for example an API endpoint where you
can send some data which then gets
stored in the database and it just
doesn't care who wants it to store that
it doesn't need to manage your session
and therefore we don't need that
middleware now when it comes to
authentication that is something I'll
cover in separate videos but even there
we won't need sessions so this is the
difference we will have much less API or
excuse me
middle of where's in general being added
to our routes and that is why we take
the API dot PHP file now there we
already get a route but we can get rid
of this and instead create a new one now
we will need four routes for the example
application we want to have a route
which allows us to create a new quote so
a post route and we need to specify our
path so our URL basically so let's name
it slash quote for example this means
whenever we send a post request at at
what well at our domain where the app
runs so that doesn't change from a
normal lateral application so mine here
has is mapped to level ng to view dot
death and then not slash quote but slash
API quote that's just something letter
will ads in between two routes specified
in the API dot PHP file it adds this API
prefix so every post request getting
sent to this route will trigger
well this route we set up here so in
this route here I use the normal route
configuration here with an array and say
uses quote controller a controller we
still have to create at post quote for
example now we also need free other
routes we need get route to get all
quotes so maybe from slash quotes and
then here also an array where we use our
quote controller at get quotes and then
we also will need a route to update our
client and our quote here I will accept
a put request now put request something
you maybe haven't seen before or at
least not that often because in normal
web applications ran bilateral where
level also renders the views we only
have post and get requests put delete
and so on requests are other valid HTTP
methods which are not supported in
normal web applications where we send a
request by for example clicking the
submit button
so by nan HX requests since we will only
use Ajax requests though we can also use
put delete in all those other methods to
those from HTTP methods which better
describe the purpose of the request so
put basically means simply replace the
old resource with a new content you
could also use patch if you only want to
update a part of your old resource now
here it won't matter that much but you
couldn't can use evil either of the two
I will use put here now this shall also
target
would since we will simply add it a
single quote but I will also pass a
parameter here the idea of the quote you
want to add it so a dynamic parameter
here in the path and then again just the
configuration where we use the quote
controller to put a quote so to edit it
and finally to delete it we have to
delete HTTP method all should also
targeting a quote with the ID passed as
a dynamic parameter and then once we
configure that I will also target the
the quote controller here of course
quote controller at the lead quote so
these are our routes setup
the next step is to create the quote
controller and actually hook those
routes app so I will do this in the
control this folder here in the app HTTP
folder and simply create a new file
quote controller tour dot PHP and here
that's just no PHP file of course the
namespace is simply the same namespace
as here it's app HTTP controllers so we
can set this up here and then I'll have
a class quote controller which will
extend the controller from app HTV
controller so from the same namespace
and in there I'll have four functions
the first one is responsible for
creating a new quote so post quote that
was the function name we set up here
post quote and this will get the request
so we need to add that import the
request object which will hold our data
now I will also create three other
functions here get quotes which doesn't
take any arguments but which will in the
end return all the quotes then I'll also
have another function which I'll name
put quote that's the same name I used in
the mindy api dot PHP file in the routes
folder here i will get the idea of the
quote i want to change and the request
object so both we will have a request
body and a parameter in the URL and then
finally the last function need is to
delete quote function here I will just
get the idea of the quote we need to
delete so all those functions are of
course not doing anything but we set
them up we're going to work on them in a
second before we do so we need a model a
quote model for accessing it for storing
it in the database and so on so let's
create this in the command line using
the artisan tool I'm in a command line
in the project folder in my level
project folder and in this project
folder I will simply use PHP artisan
make model so this command you probably
know from my other projects and I'll
name it quote and with that we can
create the model now I also will create
the fitting migration file so make
migration of course you click on go
ahead could have combined combined that
create quote table so this will give me
the quote model is quoted PHP file and
here I don't really need to configure
anything and then the database folder in
the migrations folder I already deleted
the to our default migrations files now
I only get the new create quote table
migrations file now in there I need to
run schema create and I'll name it
quotes that will be the table name I
will create and quotes here of course
takes a second argument will pass a
function loop print table then also
configure the table setup increments ID
so I have this auto incrementing ID
column to set up the time stamps and to
be able to store some content some
content off the quote so maybe in a text
field the content field and then here
I'll also create the schema drop
function to drop the quotes table when
we roll back the migrations so with that
the model is set up the database
migrations are set up you can now run it
by running PHP artisan migrate make sure
your database connections are correctly
so that created the database tables so
that should be all stuff you already
know from the other projects with that I
can now continue working on my methods
in there so for creating a new quote I
obviously want to create a new code
using the quote model and I will set the
content of the quote to the content we
pass here in the request retrieving it
with the input method the content
already not quote content will be the
field name I will use and of course we
need to make sure that our front and
application angler - or view chess will
populate this content field here so that
we actually send an HTTP request which
has this content field so with that I'm
setting the content of the quote I can
thereafter simply save that save that
quote and now I want to return a
response I will use the response helper
method to send a JSON response because
as I explained Jaison is data format we
will receive and we will return now the
convenient thing with Larry Willis we
receive JSON but as you see we access
the input of our request the body of the
request just as we do in a normal level
application so Larry will unwrap that
JSON content for us we don't have to do
that which is great all we have to do is
tell it to also send back a JSON
response and I do so by using your
response helper method here and then
adjacent method now this method takes
two arguments the first one is an
associative array which will then be
transferred into JSON format by level
and here we could simply for example
return the newly created quote like this
so return the quote here and I also want
to send G status code 201 for everything
was successful quote related created now
you could also do some error handling in
case T database access goes wrong but
I'll leave it like this now with that
let's go on to the get quotes method
here so here I want to get some quotes
using the quote model and I will
you see all method normal eloquence in
text to fetch all the quotes from the
database now with the quotes fetched
I'll create a new response helper
variable here which is an associative
array and in this array I simply want to
return my quotes like this just to show
an alternative to inlining this as we
did in the post quote method and then I
will return response Jason the response
object or very light just treated and
then 200 so this gives me back all
quotes not too difficult I guess now in
the put quote method I first need to
find the quote so again using eloquent
quote and then find the ID and then I
want to check if I did find it so if
quote is not set is if it is empty then
I want to return a response which is of
course also of type Jason where I simply
set some message let's say a message
could be document not found and then a
404 status code but if I do find the
quote well in this case I want to set
the quote content to the content I get
in my request body retrieve Y at the
input method again and then I can call a
quote update to update it or save to
override it maybe save since we put it
here so we really overwrite the old
record keeping the ideas and so on
though and then I will return a response
here the response is of type JSON and
here I will simply also return quote
let's say and you can return anything
there any message you want to retrieve
on your front that whatever you need and
then also status code 200 last but not
least here in the delete quote method
I'll also fetch the query with fine
method so find it here and then simply
call the delete method on it like this
now with that I can then also return a
response of type JSON where I also say
sets a message for
Sowell quote deleted or simply return an
empty array if you don't want to return
any data you don't have to and then
status code 200 so with that all the
controller actions are configured you
hold some code you use my model they are
hooked up to my API routes so that looks
good now to quickly test it I will use a
tool named postman you can find it by
simply googling folk postman and postman
is a great tool for testing api's it
allows you to send some requests there
and get back your responses
now I already installed it so I quickly
switch to it and here in postman you
basically can select type of request you
want to send so I want to create a new
cloudlets I switch to post then enter
your URL for me it's level ng to view
dev slash API as I explained this will
be a prefix automatically added by level
and then quote that was the route we set
up here in the API I taught PHP file for
creating a new poster excuse me quote
here now we also need to attach some
content here in the body what is that a
raw body to send some well raw data this
will be a JSON document a JSON data
format so like a JavaScript object with
opening and closing curly braces and
then all keys and values wrap between
double quotation marks and here we need
to set a Content key and then a value of
some content for example now to make the
server understand that we're sending
JSON data I'll set a content type header
on this request set a to application
slash Jason to inform the back at hey
you're getting some JSON data and
that'll hit send and here we see the
newly created quote it has the ID -
because I already created one comment or
one quote test behind the scenes so
probably has I do one for you and that
looks good looks like it works so let's
create a new request in a get request to
see our newly created post here I'll
send us two level NGT
view F slash api's slash quotes to get
all quotes no need to set some header
here because this will just get some
data and then click send and here indeed
we get back an array of quotes which
holds our one quote we created now let's
change that quote I'll switch the post
method on the first request to a put
method and leave the URL as it is well
almost I'll add the idea of the quote I
want to add it so too was the ID so I'll
add two at the end here and then I also
need to adjust the body of that request
and maybe switch this to some content
with many exclamation marks and hit Send
and I get back the updated quote as you
can also see if I send to get quotes
request again now you see we still get
that array but in this single quote we
have in a database
the exclamation marks were added well
and finally to set our to send a delete
request I'll switch that to delete no
need to send some body data there no
need to set the header instead just half
the URL with T parameter with the ID of
the quote at the end hit Send
quote deleted let's confirm by fetching
all quotes we get an empty array so our
API seems to work in the next video I
want to bolt the angler to front end and
try to connect it with our newly created
back end here</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>