<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel 5.2 PHP - Build a Shopping Cart - #15 Displaying Orders in the User Profile | Coder Coacher - Coaching Coders</title><meta content="Laravel 5.2 PHP - Build a Shopping Cart - #15 Displaying Orders in the User Profile - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel 5.2 PHP - Build a Shopping Cart - #15 Displaying Orders in the User Profile</b></h2><h5 class="post__date">2016-08-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2LDcnkQLwp8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in order to show all the user orders on
this user profile page I'll of course go
to the user profile view here and we
need to make some changes here the first
thing is I'm going to change the width
of my column here a little bit and
thereafter I want you to create a
bootstrap panel here once a bootstrap
panel let's head of a look at bootstrap
components here and then here we got the
panels I want to create a panel with a
footer this one year because in the
content I want to list all the items off
an order and the footer I want to list
the total price so I'm just copying that
code remember I do use bootstrap already
so I can't just copy the code here like
that I also want to add a horizontal
line here and then let's say a heading
where I say your orders something like
that or my orders since it is my profile
page then I have this panel and again
any panel content I want to list the
items of each order back to the
bootstrap page I'll use the list group
class here for that and I can use the
very basic list review with the
unordered list so I'm replacing panel
content with that unordered list get rid
of all list items but one and then of
course I need a couple of for each loops
here now currently I'm not passing
anything to that profile page if we have
a look at the user controller here and
the get profile method well I'm not
passing any data to the user profile
page but I want to pass my user orders
of course so let's work on that in order
to get my orders I'll create a new
variable here and I'll take the
currently logged in user which and now
it's available on the profile page
because it is protected with the off mil
aware so I'm using my logged in user and
I've fetched all the orders on that user
with out parentheses so I'm accessing
this like a property because I'm already
querying the user here on the database
and then I want to
don't want to build a continued query
instead of just want to take the user
already fetched and then fetch the
orders often user so here I got my
orders and now the next step is I'll use
a built-in method laravel offers me on
collections collections are allowable
object type kind of and for example all
the data we fetch through eloquent
eloquent again is how we can access
database do you do RM level ships with
so orders here is a collection and then
we can use the transform method on
orders now what does the transform
method to do the transform method allows
me to kind of edit each order in this
order's collection why do I need to do
that well remember we have that
serialized card in the orders so each
order has this serialized card
I want to unserious that card but I need
to do this for each order now of course
I could also treat some loops and loop
through all of them but of the transform
method here it's really easy
the transform method takes an anonymous
function where I have an item this will
be the individual order I could also
name this order to make it clearer and
then the key which will just be 0 1 2
and so on in here I want to take my
individual order an X SD card field
which I now each order has because I'm
saving it like this in the database so
I'm overwriting the card field and what
one a well what do I want to enter as a
new value well I want to enter the uncie
realized value of the existing card
field value so the existing card field
or the card field currently at the
beginning holds this long string which
is the serialized version of the PHP
object with the uncie realized method
I'm turning this into an object at yeah
and then chest well I'm over writing
this string to no longer be a string but
now be the the PHP object again because
I'm in PHP code here again I don't need
to work with a string anymore and I'm
doing that for all the orders in the
well orders collection with the
transform method here so with that I
make sure that the card field actually
holds to PHP object and no strong in a
string anymore I also need to return the
order inside here to well let the
transform method know how the new order
should look like so here I'm changing it
and here I'm just returning it with that
I can pass my orders to my view like
this and then I can work with them in
the view of course so in my view I'll
loop through all my orders and I want to
create a new panel for each order
therefore I'm placing the loop outside
of that panel did so here I'll loop
through all my orders as order and I'll
close this loop after this panel div
here and for each like that and inside
the div I do have my unordered list here
where I want to loop through multiple
what multiple items in the cart and the
good thing is I already grouped the
items in the cart because of course I
don't want to print three times
World of Warcraft or anything like that
if I don't have it three times
so here I'll again loop through all my
items in the cart and I can access the
items while on my order then on the cart
object which ID serialized so it's PHP
object again therefore I can also access
the items field on my card and if you
have a look at the cart model again you
might remember that we have this items
field here so with that I'm looping
through all my items as item here
and I want you closely for each loop
after my list item here an in this list
item
I actually don't only want to output
that text but instead I want to give it
a batch which well tells me the overall
price of this item group so this should
get the batch class and the well you
will just be item price I do have to
access this like this not with the arrow
notation because this is no field on an
item object item is just an associative
array
therefore I'm accessing a field in this
array with the square brackets notation
and I'll place deep dollar sign after
that because this will be a price in the
end thereafter
and notice or remember this will be
floated to the right so it will actually
appear on the right even if I entered in
front of the text here at the HTML code
so thereafter I'm outputting the name of
the item so item item and then the name
was stored in the title field like this
and I also want to output quantity I'll
separated with a pipe symbol here you of
course may choose whatever layout you
prefer and here I'll just output item
quantity and then I'll just add units
after it with that the last thing I want
to do is here in the footer the panel
footer should actually get a strong tag
well I swear it's a total price and then
output the total price which I can
access on my order then on the card
object and there I had this total price
field which I can access and again place
a dollar sign well actually in front of
it right that's how we do it so let's do
the same for the individual item price
with that I should output all my orders
and if I go back to my application I am
already logged in if I go to the user
profile again well yes
the orders so let's try this again by
making a new one maybe a more complex
order where I buy multiple items like
this go to the shopping cart page click
on checkout get this dummy credit card
data again enter some dummy data up here
enter the credit card enter expiration
and so on all the data click on checkout
and thereafter let's have a look at the
user profile looks pretty good to me
with that we got our working shopping
cart application here if you want to
name it like this and I'm very happy to
see you in all the future videos bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>