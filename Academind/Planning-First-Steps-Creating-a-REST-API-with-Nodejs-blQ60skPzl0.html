<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Planning &amp; First Steps | Creating a REST API with Node.js | Coder Coacher - Coaching Coders</title><meta content="Planning &amp; First Steps | Creating a REST API with Node.js - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Planning &amp; First Steps | Creating a REST API with Node.js</b></h2><h5 class="post__date">2017-11-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/blQ60skPzl0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back to this series where we
build a restful api with no js' in the
last video we had a look at all the
theory and that was important but now
let's dive into the fun stuff and let's
start building a restful api so let's
have a look at what we'll build and then
let's start with it
so what are we going to build in this
serious our API will have a couple of
resources a one people the API that's
realistic and that contains some things
which are typical to restful api s4 this
will have a products resource so slash
products is one route we can target and
there I went to support get requests to
get a list of all the products we have
post requests to add new products I also
want to be able to target an individual
product by ID and get information about
that product patch that product so
change it updated delete this product so
that we can get rid of it and let's also
implement our orders resource where we
can place orders so where we for example
could get a list of all the orders we
have I also want to be able to post a
new order so create a new order and I
also want to be able to then access my
individual order and just like for
products get more information about it
and not patch it let's say we shouldn't
be able to edit our orders but we could
delete so cancel them that is what I
want to build will also add
authentication to make sure that some of
these routes of these endpoints are
protected so that only locked in users
can access them and therefore you will
also learn how to log users in when
building a restful api because we can't
use sessions remember from the last
videos so that won't work that is what
we're going to build we're going to
build it step by step we're going to
start with it right now so let's start
with building this restful api and for
that I'll navigate or I navigated
already in the folder where I want to
create this project make sure you do the
same and then in terminal here I'll just
run make tier 4 make directory to create
a new directory and then the name of the
project and you can of course also do
this in the Windows Explorer or the
finder manually you don't need to do
that in the terminal I'll name it note
rest shop
something like that then with CD no
dress shop I can navigate into it and
now we have an empty folder now if first
of all needs to put this under control
of NPM notes package manager because I
will install a couple of dependencies
and I will install them all through NPM
this dependency manager tool for that
you need nodejs and you will need this
anyways since we're going to create a
node restful api so having node makes a
lot of sense you can get no chase from
nodejs dot org either download the
latest version or if you're facing any
issues with that download the long-term
stability version eight dot 9.1 at the
point of time I'm recording this once
you got this simply type NPM init in
this new project folder and this will
now walk us through a little wizard here
which allows us to initialize that so
you can assign a package name version
some description like a node.js restful
api tutorial project build a simple shop
api something like that entry point does
really matter for us here test command
i'll leave that empty can enter a git
repository i won't do that for now can
enter some keywords don't need that you
don't need to and no offer here i'll put
my name finally you can choose a license
I'll confirm this default license and
type yes with that we got this new file
in there and I will now open this whole
project in an editor now I will use
visuals to you code but you can also use
a another editor sublime webstorm Adam
whatever you like so I opened the
project we just created in this editor
and there you see this package to JSON
file that was created automatically
through this npm init command and here
you can always tweak these things you
just confirmed in the terminal if you
want you now open the terminal in this
editor that's the built in terminal into
visual studio code it's the same as the
default terminal on the operating system
though and i
want to install a couple of dependencies
we'll need we need nodejs but we already
got this on our system so what I will
install here with npm install' - - save
- - save creates an entry in the package
adjacent file is Express because I will
use Express as a framework for node.js
to make building this API a bit easier
and will add more packages throughout
this video series but let's start with
this one with Express installed I'll add
a new file to the project by clicking on
this icon here or simply hitting command
N and I'll name this file server dot Jas
here I will set up all the code to spin
up my node.js server which as you
probably know we do through code through
JavaScript code so not like in PHP where
we have a separate server software which
then kind of is connected to our PHP
script and stuff like that we create a
server instead in JavaScript when using
nodejs now how do we create that server
then well first of all import something
from nodejs and i'll store it in a
constant name HTTP constant let our
next-gen JavaScript features which
nodejs in the later versions supports
and I do import it with require HTTP now
if you worked a lot with single page
applications or with front-end
JavaScript development in general you
might be used to the import something
from something syntax now this syntax is
not yet supported in nodejs hence this
old or still the only import syntax we
have no Chasse
so this HTTP package I'm importing here
provides us some functionality we need
for spinning up a server additionally
I'll create a new constant port where I
will assign a port at which my project
should run and here I want you either
get that port through an environment
variable or I will hard code it in there
now
the environment variable would be
process not entered port and processed
on and simply accesses no trace
environment variables and this would be
set for example on the server you deploy
it on most hosting providers offer UDID
opera offer you tools to inject
environment variables into your running
project and then you would simply add
this port environment variable if it's
not set however we'll use
3000 as a default port thereafter I'll
create my server and store it in a
constant with this HTTP package and then
they create server command now to to
recreate server we need to pass a
listener so a function which essentially
is executed whenever we got a new
request and which then in turn is
responsible for returning the response
I'll leave this empty for now but we'll
add something soon with the setup we
have here it wouldn't really work
because we need to handle incoming
requests thereafter I'll call server
listen to really start the server and
I'll pass the port as an argument
so it starts listening on this port and
then it will execute whichever listener
or function we passed to create server
that's the idea now this is a very
simple server setup I'll now add a
second file app dot j s and this file
now is spinning up this Express
application which will make handling
requests a bit easier for us so how does
this not work there I will treat a new
constant named Express and I will
require Express that's the package we
just installed with NPM install - - safe
I then we'll create a new constant app
and just execute express like a function
this will spin up an express application
where we can use all kinds of utility
methods and so on now I will add more
and more functionality to this file for
now what I will do is I will simply add
app and then call a method on App and
that method will just be you
now use as a method sets up a so-called
middleware so an incoming request has to
go through app use and to whatever we
pass to it now the thing we pass to it
can have different formats it can simply
be a function like an aryl function you
can also use a normal one where you get
the request the response and some
special next function the third argument
here is actually a function which you
can execute to move the request to the
next middleware in line and if you don't
execute it the request will not go there
and here what you could do is you could
simply use response to send a response
so you can here simply send a response
and let's already send a JSON response
by first of all setting a status code
it's a method and takes the status code
let's send 200 for everything okay and
then jason method and this will send a
JSON response so if the write header is
set up and so on and there you can pass
a JavaScript object will automatically
be stringify it for you because JSON
data which is sent over the wire is in
string format and there we could add a
message property whatever you want and
simply say it works now with that setup
what we have to do at the end of the
file is we add module exports and set is
equal to app with that let's save this
file and go back to the server JS file
and Dera will now import app with
require and then I'll point to slash app
this app file we just set up you can
omit the file extension here by the way
it'll automatically look for J's files
now I pass app to create server and the
Express application qualifies as a
request handler so with that we have a
setup that should actually work and
allow us to send a request a get request
right now or any type of request
actually queue this back-end and this
mail aware should make sure that we
actually receive a
Bonz let's try it out and in the
terminal in your project folder where
you read npm install you can now run
note to start something with the node
library and target server dot j s and
this will execute it with nodejs
and keep this process running it doesn't
finish so it's not stuck it should keep
on running because you just started your
server and now how can we see if it
works well for now since we started this
in our machine
it runs on localhost and then at port
3000 because we don't have environment
variables here so it takes 3000 let's
try it out in the browser there if you
enter localhost 3000 you should see a
message it works and by the way you
should also see this if you send some
different kind of requests like a post
request now we can't easily simulate a
post request for the browser like this
but we can use a useful tool for this
the tool I mean is called postman you
can simply google for it and you should
find get postman com
so tool which helps you with developing
api's it allows you to simulate all
kinds of different requests you can
download it for the different operating
systems so I'm going to go with Mac OS
here and then simply follow the
instructions here install it enter the
API endpoint and so on once you started
it you're prompted to sign it but you
can skip this and now you can create a
new request so if you click here you can
gift is a name and a description you can
all just exit here and now you are on
this screen on this screen you can
always create a new request by clicking
this plus button here but then you can
choose two different HTTP words now we
won't support all of them in this
restful api and some of them are really
rarely used but we'll have a look at gat
post patch and so on so let's try a post
request and let's send it to localhost
3000 just like this click send and you
should also see message 8 works
and here you can also choose between the
raw format so the request body as it
looked like formatted one and preview
here all this nice if you for example
would get bagged HTML it tries to
preview it in a nicer way it can also
have a look at the headers which were
created by default like application
Jason dad was set up because we use to
this jason method here on our back-end
and with that we created our first very
basic restful api now it's not really
useful it doesn't have different
endpoints it's not adhering to all the
constraints we set up but the base
functionality here isn't dead wrong now
let's continue on this road and let's
have a look how we can improve this and
get closer to the api setup we sketched
out earlier in this video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>