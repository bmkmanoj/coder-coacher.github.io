<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>IONIC 2 FULL APP (2/2) - GEOLOCATION &amp; MAPS | Ionic 2 + Angular to build a full Mobile Application | Coder Coacher - Coaching Coders</title><meta content="IONIC 2 FULL APP (2/2) - GEOLOCATION &amp; MAPS | Ionic 2 + Angular to build a full Mobile Application - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>IONIC 2 FULL APP (2/2) - GEOLOCATION &amp; MAPS | Ionic 2 + Angular to build a full Mobile Application</b></h2><h5 class="post__date">2017-03-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DgWlNAudNlg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back to this mini video series
on ionic you in the last video of this
series we built our first basic ionic
you app this app here it's not super
amazing but it covers a lot of the
features ionic to offers you and it
dives deeply into how navigation works
there you can add your favorite place
here like to spray a river in Berlin and
then you see a list of your places on
the front page well as I said not super
impressive right now and it also has one
important flaw if we reload this app
here if we reload the page well then all
our state here is gone because we're not
saving it in some persistent storage
you're just saving it in an angular
service and when we're talking about
places here it would also be nice to to
see that place to have like a map
snippet if we click on a place in the
list here something like that well let's
implement these features in this video
so let's implement made of device
storage made of device features like
fetching the current location and the
third-party package to display the
location on Google Maps let's start
let's start by storing our items in some
persistent storage and I like to offers
you a helpful package for that if you go
to your project and a/c project we
created the last you open in webstore my
IDE the place service might be a good
place to store it permanently right now
we're just pushing it to disarray and
this is alright but again it would be
nice to also store it on some place on
our device or when running on the
browser or maybe the local storage turns
out that ionic has a helpful package for
this the storage package we can simply
import it here so you should import
storage from and now deposits at ionic
storage bays pause now this past year
where this package will automatically
pick the right storage depending on
where this app runs so if you run it in
the browser it will try to find a clever
solution there like local storage for
example if you run it on a real device
though it will try to use a sequel Lite
database for example so this handles the
question where to store it for you you
can simply use this package to access
that storage whatever that will be in
the end then now with that import added
we can inject that storage here so here
we can set up a private property maybe
name storage and use this type storage
which you import at the top and now we
get the storage service provided by
ionic tube now for example when we add a
place it would be nice to store this
array of places so that whenever this
array changes what we store it we
overwrite the old array we had in our
local storage database whatever ionic
you chose so we can unselect our storage
and set a new key value pair for example
the key could be places and the value
would just be displaces our array which
already holds this new place since we
call this after the push method and this
will make sure that we constantly save
the latest version of our places array
it will override any older versions we
might have now when we get places we can
simply get
places from this storage so instead of
returning just the array like this we
could also get it like this accessing
storage and then get at the key is
places now get here returns us a promise
so we have to use then to actually react
once the places where the data here has
been fetched because this is an
asynchronous task as it may take a bit
longer now since we all returned a slice
of our places here and we certainly want
to update our places in this services
array here at the top too we actually
should return this storage here instead
of displace a slice and here in the then
method I actually want to use my places
which I get back and I will use an arrow
function for this and first of all I
want to set my places equal to the
places we retrieved and thereafter I
want to return this places so now we can
call it then on the return value of get
faces which will be a promise to and
then this then method will give us back
our updated places array here and we
might even use slice here again to
return a slice of this a copy basically
now this should set our places whenever
we call get places here retrieve them
from the storage one extra thing I want
to do though is initially where we don't
have any places in the storage places
will be undefined so in this case I
don't want to set this place is equal to
places instead I want to set it equal to
an empty array so I will check if places
equals null and if this is the case that
I want to set this place is equal to an
array and otherwise I won't use places
so again that if places were undefined
because we're retrieving it for the
first time where nothing has been stored
in our storage we're not setting these
places to a define but to an empty array
instead so instead we should have
persistent storage in place now in our
home PS file where we call get places as
I mentioned this
also returns a promise so here we have
to call them - and here as before we
know that we will get back some places
so we can simply set this place is equal
to places here and this now will always
be either an empty array or our actual
places so let's save it the server is
already running and let's view it in the
browser here and we get an error the
reason for this is that we do inject
storage here with you import it but what
else do you have to do with an angular
service and this is just a service
provided by ionic - well you have to
provide the service so let's go to app
module and in providers here we should
besides our places service provide
storage and make sure to also import it
from EDI Onix storage here in your app
module - to add this import additionally
we need to go to our places service and
of course add add injectable to it
because since we inject the service into
a service we need to add injectable this
is how angular works add injectable
needs to be added to a service which
receives an average service with this we
can save it and if we now let our app
reload we should see that the error goes
away and now if we try to add a new
place again hit add place this seems to
work if I reload the app now you see
it's pre-populated with my place because
now it's stored persistently again this
works in the browser it will also work
on a native device and in the video
description you will actually find a
link which describes how to run your app
on an emulator or a real device if you
want to see it run there so with that we
got the first thing finished using
native device storage let's now get a
tool or let's now add a functionality to
get the current user location for our
for our favorite place here and you
could also of course add just a package
which adds Google Maps where the user
can actually pick the favorite location
but since I want to show how to use
native device feature
I'll go with the auto locate feature now
for made of device features the ionic Q
docks are actually a great starting
point because there you will find the
native section and here you can find all
the packages Cordova provides you which
are all wrapped by ionic two so that you
can conveniently use them in your ionic
2 application and you'll also find how
to use them now for our app here we need
the geolocation package which gives us
the feature of Auto locating the user
now here you find the instructions on
how to add it and first you have to run
this command here so make sure to copy
it or type it by hand of course in your
project folder simply run ionic plug-in
add Cordova plug-in queue location
because we need to install such plugins
to access native device features and
locating the user of course uses such a
feature because there we actually do
well access the GPS for example so with
that this should have been installed
successfully with it installed you can
now follow three other instructions here
though getting the location is really
really simple we can in the place where
we want to get like a new place where we
add a new place add a button to allow
the user to actually trigger this Auto
locating so maybe below our forum why
don't we add something there add a
button there should be precise button
with iron button directive on it so to
turn it into a nice looking button make
it off type lock at the block directive
and say locate me and below the but here
maybe
so why don't we place this in another
component ionic offers us the iron grid
which s names that yes is a built in
grid system where you can nest iron rows
and in rows iron column and this will
use flexbox to automatically distributed
nicely though you can also attach your
own with find out more in the ionic to
docs here i will simply add such
row with a column for the button and
then another row with a number column
where I simply want to output your
location and now there I want to output
the coordinates now for this I will go
to new place and add a new method on
locate user would be a fitting name and
in there I want to use geolocation now
since we added this plug-in we can add
item for that the top geo geo locations
that was the name of the plug-in from
and now here it's ionic made us as I
mentioned the plug-in we installed is
provided by Cordova or these are
packages which were written for Cordova
but ionic to the framework we use here
conveniently wraps those packages so we
can access them directly through ionic
you for a nice interface through
typescript and use all their features
and again the documentation I showed you
a second ago guides you on how to use
these individual packages it's really
great so here we import geolocation from
ionic native and with this we can simply
say geo location just like that
you don't need to inject it you can
simply access it like this and then
there we have to get current position
method now get current sources because
position returns us a promise where we
can listen to the case that it is
successful in the band block or handle
any errors in the cache block so here we
could simply output console log and
error occurred like this and then will
actually give us the location so here we
would get some location object which you
can use and there I will simply log
location fetched successfully you could
of course also lock the data you get
back here I'm just not doing that here
because I don't want to reveal my
location of course and therefore so that
I don't have to blur it out right now I
will do this later when we actually use
the map I will simply lock this if you
lock location you should see the actual
location
so let's save this and make sure that we
add this event listener to the button we
added so to the click event we want to
listen and hear I will listen or will
execute on locate user the method we
just added which should trigger this
location now with this being saved we
can go back to our application and there
if we add and your place and click on
locate me this might take a second but
it should work in the browser too if you
enabled the location feature in your
browser so that Chrome or whatever
browser you're using is allowed to
locate you you see location fetched
successfully if you can't get this to
work
in your browser again follow the link in
the video description on how to run the
app on a native device to see it in
action there now with the location
fetched we get the user location now in
new place or in the new place HTML here
we would output this location here so
there you could simply output let's say
location and there you can have the
chords and you can see this in your
personal documentation that this returns
data has a chords data fields which can
host your latitude and longitude of your
location so here you can then output the
ladee cute and that may be separated
with a slash you could output location
chords long it huge and of course you
will need to store or create this newly
created or used location property first
of all so location which is of type any
now gets set here besides logging that
successful call to the equal to DD
result of this operation you can simply
say this location equals location like
this and now I will of course blur out
my location but you should see that once
this runs successfully here if we click
here we get an error cannot read
property
words yeah that makes sense because
undefined so we show of course add the
Elvis operate your author location so
that we don't try to access this if it's
undefined if it's not set so add a
question mark after location because
initially of course location is not set
time mistake
now if we click here click on locate me
we should see that this gets populated I
will blur it of course but there you
should see your lead feet and longitude
so with that back to the editor now I
also want to display the location on a
map now for this I will get rid of this
location output here in the new location
page of course you could leave it there
you could even implement the map there I
don't want to do this here so I'll get
rid of location here what I want to do
now is on the home screen
I want you allow the user to tap a item
here so tap this list item and then open
a new page where I actually display this
map and why don't we open this new page
in a modal so that we have it slide up
from the bottom for example display this
map snippet and allow the user to exit
it for this I will quickly generate a
new page so ionic generate page would be
the command and this page I will name it
place because of this new place we open
when tapping it here in our home screen
in this list of places so this is this
new place page I just created and in
there again I want to display such your
map
now first of all let's open this page as
a modal or just I will just remove this
comment here gives us a title of place
and to put in a paragraph so that we can
see that it works it works for example
and then maybe a button which allows us
to close this modal so iron button with
a caption of dismiss and now let's show
this page make sure that it has been
added to app module so at the place page
here two declarations and then also edit
to entry components as always make sure
to also at the import and now
to show it as a modal in the homepage I
first of all need to make sure that I on
item can be clicked now you can simply
assign a quick listener to this item
your queue you could also use a button
and add an item here to make this button
look like a item in the list then this
will have a little arrow on the right
indicating that something new is loaded
when you click this item but that would
somehow indicate that a new page gets
swiped in in my opinion I want you not
give this impression so I will use the I
on item with a click listener and then I
will say on open place any method name
you like copy that method name and
create this new method in your home the
TS file and again in this method I now
want to trigger a modal to well have
this page slide up this place page we
just created which then will display as
in snippet off the map
now with for this to work I need to
inject a special service ionic officers
this is the modal controller so I will
assign it to a property named modal
controller modal controller then is the
type make sure to import modal
controller from ionic angular up here
and what's this imported we can create a
new mode layer by accessing it calling
create and then as an argument you pass
the page you want to open as a modal so
the lace page in this example your lace
page just like this and this should now
create the modal now to show it you can
simply call percent change to it so this
will not only create it but then also
present the modal now let's see this in
action if we save this and let our app
reload here and maybe fix this little
error I introduced here I should
reintroduce this closing tag you're
after iron list just lead to this
accidentally so now if I click on spray
you see if it works this modal slides up
of course
button doesn't do anything so let's fix
the button and for this I will go to my
place HTML file where you have this
dismiss button I will add a click
listener year and maybe also make this
of type lock to have it span over to
full width and I will say on this miss
here and the on dismiss method now needs
to be implemented on the place that
types put file so on the types of files
is newly added page I will remove all of
that stuff here though I don't need
these imports I don't need the these
services injected here instead the only
thing I will need here is another
controller that is the view controller
of type view controller make sure to
import it from ionic angular and the
view controller simply controls well
your view controls your page and
therefore if you access this view
controller you can call dismiss and what
this does is it tells ionic you hey
please remove myself dismiss myself and
then it will dismiss itself from the
stack of pages you could say but Amol
it's not really part of this stack of
pages it's simply an overlay but
nonetheless if you dismiss a page it's
gone no matter if overlay or on the
stack of pages so dismissed will remove
the overlay and since it is a modal
ionic you will out-of-the-box give us a
nice animation for this so now with this
implemented if we go back to the app and
let it reload and open this modal again
you see if I click the smiths now it
slides down and closes this model so the
mode lives in place let's now add this
Google Maps functionality and for this I
will use a third-party package called
angular to Google Maps you can google
for its angular Google Maps angular cube
Google Maps to be precise and you should
find the official web page for this
package there you can find out how to
get started in a detailed documentation
if you want to play around with it and
learn more about it installing it is
pretty simple what you can do now
is back to the project you simply run
npm install - - save and then angular to
Google Maps that's the name of the
package so it enter and let it install
and this is important to realize since
you're building an angular app here in
the end you can install any third-party
package and it will be packed into your
project and in the end converted to a
part of this native app - so you can use
any third-party package here so with
this angular - Google Maps was installed
now we can use it in our app and using
it is pretty simple there are a couple
of built-in components we need to use
but first of all we need to configure
Google Maps to work we need to configure
it in the ng module and we will need a
Google Maps API key for this now in the
official documentation you find a link
on where to create this key so click on
this link get an API key here and there
you can simply get a key now this
doesn't require much setup what you can
do is you can either exist create an
existing project you might have created
in firebase or you create a new project
click this button and after a few
seconds you should be presented an API
key which you can use so I will be back
once it has been generated here it is so
I will copy this key my personal API key
and I will delete this project
thereafter so no need and copying it and
in my project in F module as outlined on
the page of the angler cube Google Maps
package we need to add an import to the
ng module so let's quickly do this let's
say mater import the AGM core module
which you should import from angular
Google Maps / chord angular to Google
Maps / core to be precise and they're
called the full route method and pass a
JavaScript object to it this configures
this angular 2 package which just
downloaded and sets up this API key so
there you should simply set up this API
key property make sure that is K
is AG uppercase and then paste in the
key you just received from Google now
you're good to go
now you can use this package to use it
just scroll down a bit to learn how to
use it you basically need a latitude and
a longitude how convenient that we have
this and then you can create a map with
this sepm - google map component so
let's add it in our place HTML file up
here I will add a CBM Google Maps this
component so the component you see here
oops it's just google map though not
Maps and there again you need to bind to
the latitude properties so this should
be the latitude and of course be long if
you'd balance to the longitude we
fetched from the current position so lad
and long here these two properties don't
exist yet I have to create them but with
them we should theoretically be able to
see a map but there's one important
thing you need to do in your SPSS file
you need to give this s EBM google map
selector this component a specific style
and you do find this here too you need
to give it a height otherwise you won't
see a map so I will set up a height of
300 pixels you can use an average
different value but you need to set up a
height that is important now with this
added we're missing the let and be long
property here we try to bind to the
latitude and longitude property of our
third-party package but we don't have
our own properties here so we need in
our place page latitude which will be a
number and long acute which will be a
number and of course these should be the
values we fetch when we locate the user
so for this I now want to store this
location in our in our place so I will
go back to my place of service
and when we add a place we from now and
will not only receive a place which is
made up of a title type string but also
of a location which will be a JavaScript
object which holds a latitude which is a
number and a long acute which is a
number so I just improved this type here
by also receiving data information this
location object here and of course such
an update should be made here to our
places array 2 and since there is now
getting really complex or a bit cute
complex and really long here in this
component it would be nice to create a
model for this interface which you can
import which simply defines our type so
for this I will create a new folder
whoops
under source here and I will name it
model and in there I will create a place
Model Ts file and in this file I simply
want to export an interface named place
which should define how a place looks
like just so that we can remove all
these custom declarations we created
here so there's these long type
definitions here so into place model a
place should have a title which is a
string and a location which as explained
the second ago just is an object with a
latitude type number and a longitude of
type number so again I simply define my
own type here now with place being added
here I can go to my place of service and
simply say places is of type place array
and of course I need to import place
from my own model the file we just
created and now I can also use place
here as a type so in the add place
method and now all of a sudden this
looks much much nicer and much shorter
so now with dead we're storing this
place information or at least we set up
our app to store it we're not there yet
though in a new place where we create
this place we somehow also need to pass
the
new information so value here still it's
just a title on the string we receive it
from our forum but we should make sure
that we also pass a location so I will
add a location here the assembly will be
an object which has a latitude of type
number and a longitude which will be a
number and initially it's an object
where we have latitude set to zero on
long it you set to zero you could also
set it to undefined and check if the
user actually did click this locate me
button I will leave out this check you
though so we do have a location by
default here when we locate a user I
will override this location and we'll
set the latitude to location chords
latitude remember location here holds
this chords object which has to let huge
stored in it and this location long
acute referring to our own location
property up there should be set to
location chords longitude like this so
now we're actually using our location
updating our property here and therefore
here when we add a place I actually will
add a place which shows a title so the
value title here the title gets from our
form and then a location referring to
this location the location we set in
this component suggests if this was too
fast what I'm doing is I'm storing the
location we get when the user clicks
this locate the button in the location
property which is set to some default
location in case the user didn't click
the button again you can add your own
logic to force the user to click it or
disable the submit button until it has
been clicked and then here I'm calling a
place passing an object which for one
contains my title which I fetched from
mod form and then as a second property
the location property which holds my
location this property up there so this
is now the place we create urate
fulfills the requirements of our place
model it has a title and a location
and the location has a language
longitude and latitude as setup you up
here with that we're storing this in our
service we're also storing it out in our
persistent storage since we simply store
the whole array that hasn't changed now
we need to get this place information to
the model we open and that's actually
super simple here when we create the
mall model we can pass a second argument
which will be the data well I'm there we
can simply pass the place data off the
selected place so the only thing we
should do though is in the HTML file
when we click here to open up place we
should make sure that we actually pass
the place as an argument we can do this
since we loop through all the places so
place will just be the place of the
current iteration so we can pass this to
on open place there we know that we
receive the place which is of type place
so we can import this type from our own
model file we created here so from the
model folder and then a place that modal
file a model file and with that we
passed we can pass the place by simply
passing a second argument to the create
method to place here and just the data
we pass to the modal which gets opened
well and now in the modal retrieving the
place is super simple Q we can use nav
parents so nav param of type Nath
parents is another built-in service make
sure to import it from ionic angular
which gives you access to any parameters
you pass through navigation this works
all the for pushing pages where you can
also pass parameters as a second
argument or for modal's which are also
considered kind of part of this
navigation concept so now we get the nav
parents therefore what I can do here in
the constructor for convenience is I can
set the lad huge equal to mine and
parents and there it's just data
location latitude because remember data
it's simply just a place we pass it here
and a place simply has a location
property which then in turn has a
latitude and a longitude property so we
can assign the latitude like this and
the longitude like this the same command
just with LMG with that we should get
the latitude and longitude
now that should not be undefined anymore
and since we added this Google Map
snippet here with our own well-planned
latitude and longitude bound to the
latitude and longitude properties off
that component we should see a map
snippet well let's see if this all works
as expected by going back to the
application and it won't work for this
year because there we haven't stored a
latitude or longitude so we'll add a new
place instead let me quickly reload the
app let's add a new place like the
angles a garden which is not where I'm
sitting right now but anyways click on
locate me until we see the success
message and of course the user
experience here can be improved by
showing a little alert a little info
message a toast click on add place now
and open the englischer garten l and
here we see the map snippet it's zoomed
out pretty far I'm sitting in Berlin so
this is correct it located me correctly
you can't see my exact address and I
don't want you to see it but you can
change the zoom factor on the Google
Maps package here as explained here in
the documentation somewhere by simply
setting the zoom property and you could
set it to 16 which should be soon in
fervor or more closely to the actual
target I will leave it to the default
because again I'm happy with not showing
the exact location but as you can see
this is how easy you can use Google Maps
and how you can fetch your location and
use persistent device storage now this
app can be improved you can allow users
to delete items on the list you
can show a toast after the location has
been fetched you can improve the visuals
there is stuff you can improve this
miniseries had one goal though I want to
show some very important key features
all Bionic you packed into two videos
and I hope this was successful of course
you should dive into the official
documentation or some other tutorials
possible my udemy quiz if you want to
learn more and of course I will continue
making videos on ionic you on this
channel but this brief mini appear
should really get you started and allow
you to start your ionic to developer
terior see you in all the future videos
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>