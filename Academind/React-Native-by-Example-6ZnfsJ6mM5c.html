<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native by Example | Coder Coacher - Coaching Coders</title><meta content="React Native by Example - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native by Example</b></h2><h5 class="post__date">2017-12-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6ZnfsJ6mM5c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to this video great to have you
on board in this video all that means
you react native together with you I'll
explain what it is and we'll build a
simple application with it where we can
get our current location and share it
with our users and see the position of
other users on a map so that's pretty
cool I think and it will cover a lot of
features react native it's all about
react native in case you weren't aware
is a library that builds up upon react
and JavaScript and allows you to build
native mobile apps so apps for iOS and
Android that use react and JavaScript
for you during the build process during
development but then are real native
apps that you distribute over the App
Store's
that run natively on these devices so
let's have a look at how all of that
works and how we can get started
before we install anything and write any
code let's understand what react native
is there's just one sentence to read
from time to time when you come across
react native it's learn once right
everywhere that's kind of the theme of
react native as I said at the intro of
this video react native builds up upon
reactant JavaScript hence we can use our
JavaScript to react knowledge to build
mobile apps which of course sounds
awesome with react native we build apps
that we still tailor for iOS or Android
but we don't have to write any Java or
Swift code and we learn the technology
once to then write apps for iOS and
Android
what react native don't is it's not an
app which provides you with a component
library of pre-styled components that
look like material design on Android and
iOS design on iOS it instead gives you
core building blocks which you can take
which you then have to style and compose
on your own but you will see this in
this video
the idea behind react native of course
still is that we write real mobile apps
and what I emphasize that real native
apps not wrapped in some webview or
anything like that with JavaScript and
react anti react native library which
gives us a lot of utilities helpers and
a couple of our things you will see in
this video so what is a react native app
and maybe more importantly what is it
not when you build an app with react
native you're not building a web page
running in the browser on your mobile
device
that's not the case you're not building
a web page you're also not building a
web app that's hosted in a webview
like it would be the case for ionic or
Cordova apps there you typically or you
build a web app with CSS HTML and
JavaScript and then Cordova gives you a
wrapper that will lead to a native app
being created that is distributed over
the app stores but that wrapper just
wraps your web page so to say so you got
a native app but don't really have
native code under the hood and that can
lead to
for men's issues were at least two worse
performance than for native apps the big
advantage of course is that you got all
the web stack technologies at your
disposal and you build your native app
just as you build a web app for react
native it's different there we have a
real native app because all the UI is
going to get compiled to native code
that's really important we're going to
get a native app out of that the
JavaScript part is going to stay
JavaScript but all of the UI elements
the buttons and so on will be the native
equivalents depending on which platform
we're running on that gives us better
performance but it also makes a
development a bit harder because we're
not really working with just HTML CSS
and JavaScript to be precise we won't
work with CSS at all it's not supported
we won't work with traditional HTML
elements at all it's not in there you
will see what we got instead and we can
use JavaScript but only the features
that are supported by the environment
react native gives us now I'll come back
to all these things throughout the video
though so why don't we just get started
and build our first react native app to
get started with building react native
apps
I recommend the official Doc's to which
you can find a link in the video
description there's a getting started
page and for now we'll go with the
QuickStart there will soon go into a
more elaborate project set up but let's
start with the QuickStart now there you
see one instruction when installation
command that might look familiar to you
if you've worked with react for react
projects so not react native just react
there is a package called create react
app which makes it easy to get started
with react projects and gives you a nice
project with a nice build workflow out
of the blocks now there's an equivalent
for create for react native it's called
create react native app and which can't
just copy that command to install that
tool on our machine now on Mac &amp;amp; Linux
you probably need to add sudo in front
of it to get the right permissions and
then you're prompted to enter your
password and now this will install this
package globally on your machine once
this is done you can treat a new project
by running create react native app as a
command
so here I navigated into the folder
where I want to create my project and
then I'll name it share places you can
choose any name you want this will
create a new folder and install all the
required dependencies here you can see
it's using yarn and alternative to NPM
which I got installed check it out if
you're facing any issues with NPM and
dead set up process also make sure to
not use NPM version 5 at least at the
point I'm recording this it's buggy use
version 4 instead and once all of that
is finished we actually can start our
app already we can navigate into the
newly created folder and run NPM start
now this will build the project and spin
up a development server so that's pretty
cool you still get these web development
light features where your native app
will actually connect to that
development server to get life updates
and so on and now you can do something
cool you can visit the App Store on your
real smartphone did the real device you
own and search for an app named Expo
Expo client is the exact name and if you
got it you can open it and scan that QR
code you should see here and this will
connect your development server and
launch your app on your real device
though and that's important only in a
wrapper
it doesn't really install it on your
device it just wraps your app that's all
the way I won't use this approach here
because whilst it's nice to see
something quickly on the phone if you
want to dig into native features of your
app so you want to use some native
features like maps and so on you can
face difficulties with this wrapper and
if you ever want to publish your app and
build it for the App Store's you need to
leave this process here so therefore I
will quit this process and run npm run
eject which is a command that gets out
of that wrapped world here and gives us
access to the full workflow to the real
native app and to do full capabilities
of react native so to say though I will
say this Expo approach is great and you
can build apps with that too but I like
the raw the original approach so i'll
run npm run eject I'll choose a react
native project which I want to create
give it a name as it should appear on
the user device screens share places
maybe and then I Android an Xcode studio
project name because you can open that
project in Android studio and Xcode
which are the IDE s for developing
native apps and you will need to do this
especially for Xcode if you add certain
libraries that hook into real native
device features now with that we got
this running by the way if you ever
during npm start encounter an error
there should be also two commands you
can copy and to fix that error
immediately so make sure to run these
commands in that case so with that we
got this working now it would be nice to
see it in a code editor so let's open
the project in one and here I opened it
in visual studio code you could also use
webstorm atom or sublime whatever you
like now in there you'll see this expo
folder with some configuration more
importantly Android and iOS
these folders holds the actual config
files and builds off the native apps so
don't delete them in these files you
also find the project you can open with
Android studio open the full folder or
iOS open the Xcode project file we got
node modules which holds all the
dependencies of our JavaScript project
and then a couple of config files and
then there are two important faults
index J s kicks off our app by calling
this strange app registry here in the
end and there it registers a functions a
function that returns our app component
and that app component can be found in
the app.js file and it's a normal react
component we import react the normal
reactions using web projects we create a
component by extending react component
we have a render method we export that
component and in the render method we
render some JSX
though and that's important you won't
see a div a span h1 tag anything like
that here because and this is the most
important takeaway
you should take away from this video
react native doesn't work with the
normal HTML elements it doesn't work
with the normal Dom it doesn't work with
the normal CSS it doesn't even work with
the same JavaScript support as in the
browser all of that is given to you by
react native and CSS isn't given to you
at all so instead of the normal Dom
elements like a day of a span h1 and so
on you use a couple of components
provided by react native which we
therefore import from the react native
package like the view which essentially
is your div replacement and the text
which would be your paragraph or a span
replacement and you can find a full list
of all the components on the official
Docs if you scroll down you will find a
components section with all the
components that are built in to react
native and you will see that these
aren't too many because react native is
a lot about you building your own
interfaces it gives you some core
building blocks but you have to build
your app on your own and for a lot of
features like later when we add a map we
will also have to go to the third-party
package to get that functionality
because react native really only gives
you the core to work with so this is our
code important maybe that style sheet
thing thing here at the bottom now I
mentioned that CSS isn't part of react
native apps it's not supported this
syntax here might look like CSS but it's
just JavaScript and react native gives
you this stylesheet object to create
optimized JavaScript objects that
basically allow you to define classes
like this property here which then hold
a couple of properties which you then
can assign to components now again this
is not CSS it just emulates CSS and it
doesn't support all CSS features for a
list of these supported features also
check the video description there is a
cheat sheet to be found there
so this is our component this is how it
works now let's view it and I want to
view it on a simulator now you can also
go back to the official docs and on the
getting started guide if you click on
building projects with native code you
can choose your operating system and for
which
system you want to build and then you
can find detailed instructions on how to
set everything up they're important if
you wanna build for iOS on Windows that
unfortunately won't work
that's not permitted by Apple basically
you need Xcode to build an iOS app and
Xcode doesn't run on Windows
Averell combinations like Android for
Windows and so on are possible so you
will find the solution structures there
like for how to install Android on
Windows make sure to follow through all
these steps here at the bottom is
install android studio install the SDK
maybe not the latest version but the one
before that the latest version often
isn't supported install the Android
device manager the build support library
and so on make sure to also set your
environment variables as described here
so basically follow to through the full
process here and once you did that open
Android studio and create a new virtual
device there you can also find
instructions on how to do that here
preparing a virtual device here you find
screenshots and so on and in the end you
just launch it by clicking the play
button once all of that is done you can
go into your project open the terminal
that's the normal terminal just
integrate it into my IDE and run NPM
around Android and the same of course
for iOS once you set everything up there
this will open this terminal window
where a process starts
that's your development server don't
quit this it's important to get live
updates and for your app to continue
running in development mode this run
Android process here will build your
project now thereafter it will fill the
finish and not keep running so the
development server is the only thing
that keeps running and this will now
build the project and bundle it and ship
it to the simulator and then also start
it there so once this is done the app
should start up on that simulator which
I started here it is coming needs to
connect to the server now it's building
on the server and once that is done once
we reach 100% here we should see our app
run here on the left and here it is
that's the text you see in fjs now let's
quickly confirm this by adding our own
text here we say
it works maybe like this let's save that
and now to get live updates
press command M on Mac and ctrl M on
Windows and then click enable life
reload or imahara even hot reloading if
you want you can also manually reload
here or do that by pressing R twice like
this and you should see your updated a
up here and that's really great of
course we don't just want to see some
text here we want to get the user
location and also then share it with our
users display it on a map and so on now
to achieve that we need to have a button
and I will treat my own component for
this so I'll create a new folder which I
named components you could also place
this in a subfolder which named source
if you want and in that folder I will
add my fetch location component it'll be
a very simple one but I want to show you
that you can and that you will build
your own components and react native
apps now here I first of all we'll
import react from react so not react
native just react and then create a
constant fetch location which gets props
and returns a function body so that's
just a functional component I'm creating
here and I'll export fetch location as
the default of this file and in there I
will return some JSX in my function now
here I want to return a button and
therefore it is of course a very simple
component does it make sense to just
wrap a button maybe we'll do it here so
I'll import my button from react native
and then I can simply add it here button
as a self closing tag that's important
it needs a title property to know which
text to display here all rights get
location and then it needs a on press
handler now in react for web projects
you would have on click here q react to
clicks now it's just on press here to
react to user touch events to press
events and there I don't want to handle
this event at this file
instead calls a method I expect to get
wire props so here I'll call on
get location maybe so I need to set up
prop on the component when I use it and
then hook it up to a method there so
let's use fetch location in a purchase
there I will import fetch location with
a capital F as it's the convention for
custom components from dot slash
components fetch location and then in
step my text here instead of that I'll
import I'll add fetch location and I'm
important we need to set that on get
location prop on that so on get location
prop should now refer to a method that
then gets executed so above the render
method I'll add a new method get user
location handler maybe I'll use this
syntax where I assign a arrow function
to a property to make sure that this
always refers to my class and then here
I'll bind this get user location as a
handler now if we save that we we reload
it should life reload or not sure it's
not doing that but anyways if we save
that we should see that button now that
button along weren't too much right now
let's now simply log something to the
console pressed the button the question
just is how do we see the console now
we're not in a browser well cool thing
is if you open e developer tools you can
debug JavaScript remotely this will open
up a new browser tab it should do so at
least here I position it next to my
simulator and there you can open the
developer tools and now you will see the
console log from your device here which
of course is cool for debugging there's
of course more you can do with debugging
and you'll find more information on that
as well as on react knife in general in
my udemy course which you find a link in
the video description but for now let's
keep it as it is here and now of course
I don't want to log here I want to get
the user location right to get that
location we need you calls a method
problem or probably and here react
native actually exposes Web API to us if
we have a look at the official react
native dogs
you will see that under guides there is
this JavaScript environment point and
there you find information about all the
features JavaScript all the JavaScript
features you can use in your react
native app because it's not running in
the browser so you can't use the same
features as and let's say the latest
version of Chrome instead it runs in a
JavaScript environment spun up by react
native so react native decides which
features you can use here you can find
that information and here you will find
that there is a navigator geolocation
object you can access it's the same
object you can use in the browser to get
the user location so here we can use
navigator geolocation and then call get
current position this method expects two
arguments the first one is a callback
function here I'll use an arrow function
where I get the user position so I'll
lock this to the console and the second
argument is a arrow function in case we
got some well error now if we safe
doesn't we go back to our application
and we reload the app and click the
button the app actually crashes now this
happens because we don't have the
permission to get the user position and
if we don't even tell our app that we
will eventually need this permission it
will just crash so what you can and
should do is access the documentation on
navigate navigator geolocation here in
the react native Docs and there you see
how to set up the permissions on iOS
where you will basically need to edit
the info pianist file and on Android
wear you need to copy data entry here
this element is users permissions
element cue your Android manifest so
here you can access the Android folder
go to app go to source and then to
Android manifest and there you see two
permission entries and you can copy that
one into there and you see we try to
access the user location here at the end
now with that entry we basically make
Android aware of that permission which
our app eventually needs and it would
show that permission when we install it
for the app store
so now with that added if we reload the
app it will still trash because what we
will need to do here after we edit at
the manifest rerun run Android this will
all trigger a full rebuild which we need
here to ensure that our new Android
manifest is taken into account so let's
make sure this happens this will install
a new version of the app and thereafter
you can see I click this and I get
objects being printed here on the right
and these by the way are not my real
coordinates now it might still fail at
this point and give you some error
saying that it timed out in this case
you should go to these settings of your
simulator by clicking the three dots
here and then to location and send a
location to this simulator and also try
going to settings and disable use
detected a DB location and turn it back
on
although waiting for just a minute or so
sometimes resolves the issue and
thereafter you should be able to get a
user location here now with that we have
a location we want to display it on a
map right so we need a map now there is
no map built in to react native if we
have a look at the official Docs and we
use full down 2d components you at least
at the point of time of recording this
won't find a map here so we need a map
and there is a third-party library we
can use if you google for react native
maps you will find this library
maintained by Airbnb Airbnb uses react
native and their app and they basically
built this library which wraps the
Google Maps and Apple Maps SDKs and
gives you components you can use in the
you react native app and these
components really will hook into the
native code and give you access to the
native code features though for you with
a nice JavaScript interface
you should wizard T installation
instructions the first time you are here
and there you see that first of all we
install it like any other JavaScript
library with npm install' so let's do
that lets run this command in our
terminal in our project and this will
download react native maps and add it to
the
modules folder now once this completes
we can also have a look at the next
steps because since this library will
actually hook into native device
features using the native maps as the
case we need to link it to our apps you
can do it automatically with this
command though for this to work you
first of all need to run npm install - g
react native to have this tool available
globally on your machine but i will show
you the manual linking way here are the
explanations for iOS
I recommend the last way option free and
the steps here should be really clear on
how to do this in Xcode for Android we
follow these steps and they are first of
all we take that code here and compile
our project or react native maps project
now for that you need Google Play
services installed so make sure you
check this in your SDK manager in your
Android studio and then just go to your
Android folder there to the app folder
and there to be both Gradle file and
important
there is another build.gradle file one
level above that don't go in there
go into the one in the app folder then
if you scroll down you will find a
dependencies object this one and there
simply add this new entry compile
project react native air maps the next
step is that we copy these two lines
here and go to Android settings Gradle
so now this is directly in the Android
folder this file and just paste them in
at the end of that file you may close
that folder after next you need a Maps
API key that's important you're going to
use the Google Maps API behind the
scenes and to be able to use it you need
a key now you can follow the link you
see here this should take you to the
Google API console you need to be logged
in for that there you should then choose
a project here at the drop down at the
top and then you can generate new
credentials a new API key now here I
already got once I'll just copy that you
will now need to add a new entry to the
application element in your Android
manifest XML file so let's go back to
our project
app source Android manifest and here in
application
I'll temporarily store my key and then
copy that metadata item don't overwrite
the full application just add this item
here and then take your key and replace
your Google Maps API key with that don't
replace this year this has to stay as it
is just the other part with that let's
close there and now there's one
additional thing we need to do besides
ensuring that we have Google Play
services installed go down a little bit
further and take this import here and
now go to the Java folder in app source
main Java to main application and add
this import here below to our imports
and then take the new Maps package code
here and then the same file scroll down
to the get packages function add a comma
after main react backage and add this
entry and with that you should have
everything you need to work with maps
now let's see if that's the case let's
first of all create a new component and
I'll name it users map top j/s I'll
import reactant here from react and I'll
create my users map method where I
receive props and then where I simply
have a function where I return JSX
and it will export users map as the
default here
like this and now in there I want to use
a view so import view from react native
like this add it because if you always
makes up for a great container I also
want to import stylesheet to define some
styles thereafter and I want to import
my map so I will import map view that's
simply how the component is named though
you could name it whatever you want it's
a default export from the package from
react native Maps and with that we can
add a map inside our view here so I can
add a map view here self-closing element
and this map view here needs some
styling so I'll trade a new constant
below my functional component which will
name Stiles where I use stylesheet
create and pass object to it and there
alpha 1 trade a new property name map
container that will hold the Styles the
view receives and you'd simply want to
use with 100% needs to be wrapped in
quotation marks 10 and height may be 200
this will be pixels automatically don't
add a unit here and then I'll add my map
property where I will simply set width
to 100% and high to 100% to take the
width and height of the container now
for the view here I'll add the style
prop and set it equal to Styles map
container and for the map view I'll add
style and set it equal to Styles dot map
with that let's save this and let's use
this component let's head over to app
chase and let's import it so import
users map from dot slash components
users map and let's add it below the
fetch location component users map just
like that now since we added a library
that accesses native device features I
strongly recommend restarting the whole
development server so quit this terminal
you can see it already crashed here and
that's pretty normal and rerun npm run
and write before you do so even goes so
far to close the app here and uninstall
it from your
voice like this
thereafter rerun npm run Android to get
a clean new build a new development
workflow and a new version of the app
shipped to your simulator with that
restarted I'll I can turn on live free
loading and connect my remote JavaScript
debugging and you should see the map you
might also see a blank map because it
can be tricky to configure this
correctly in that case you'll find a
link with a lot of discussions and
solutions to that in the video
description also make sure because
that's one common source that in your
credentials page here if you go to
library you can go to Google Maps
Android API that this is enabled and
able it otherwise if this is not the
case with that you should see the map
here now would be nice to have some
margin between the map and the button so
I'll quickly go to my users map and add
a style to the map container where I say
margin top of 20 maybe and now of course
we wanna maybe show a different snippet
different part of the world when it
loads and also move the focus off the
map once the user picked a location and
now for starting with a certain region
being focused on the map let's have a
look at the official docs here on Airbnb
create react native maps so let's get up
repository you found why Google there if
you scroll down you will find a code
snippet where we set an initial region
prop to some object that has led here
de'longhi to it and a lead to Delta and
along it you Delta now this is how you
describe a region in or for the react
native maps package a region has a
latitude and longitude for the center
basically and then the deltas for both
coordinates to describe a circle or a
part around that Center so how far do we
go to left and right and to top and
bottom from the point so I'll just copy
death set up here
into our code for the map view here so
there let's simply set initial region
and the important point about the
initial region by the way is that this
will only be set initially as the name
implies and will not refocus if you ever
were to change those in run mode during
run time and here I will maybe decreases
a little bit to zoom in closer if I now
say if this and we go back to our
application you see we resume then on
San Francisco here so this is the
initial region I now also want to focus
onto the place the user sits in when I
got that user location so for that I'll
go back to the App J's file and in there
I'll add my state property because I
want to manage all the application state
in here you can also use Redux with
react native I won't do it in this video
it's basically as easy to add as you add
it to a normal react app and I will also
cover it in my udemy course if you're
interested so here I'll set the normal
state as you set it in any react
component any class-based component and
here I'll set this user location to null
initially now if we got a position here
I will call this set state and there I
will set user location Q an object where
I have a latitude property that is equal
to position and there we had a quartz
object and there we had a latitude
property too and I will set a long acute
property that's equal to position chords
longitude now also need to set the Delta
since I want you not only navigate to a
point but also keep a certain soon so I
will just copy longitude and latitude
from there or alternatively hard-coded
in there so whatever approach you want
to use feel free to do so
I'll simply copy it here and add it to
my user location and with that we got
that in the state now we want to pass it
down to users map so they're all pads a
user location property and bind it to
this state user location
and in users map we now need to accept
this property and do something with it
as I said changing the initial region at
runtime won't do much but we can also
set the normal region and this will be
updated during runtime so we can set
this equal to props user location user
location the props will probably just
add it and it will then focus on that
location on the map
now with that if we go back and we click
get location you should move to
basically the Googleplex this is where
they sit would be nice to also see a
marker wouldn't it of course we can
display one in the map view let's
convert it from a self-closing tag to a
non self closing one because in between
the opening and closing tag we can add
an average component the map view dot
marker component and check out the docks
of react native maps for a full list of
all the components and features they
have they have a lot map you markers a
self-closing one it needs a coordinate
prop and this is now not a reaching it
doesn't care about deltas it just wants
a position to find by latitude and
longitude so here to coordinate we can
also just pass props user location this
object will have two deltas but it will
just ignore them here so that's fine if
we reload we'll get an error do you know
why because initially in app KS our user
location is null so we try to set a
marker on a position we don't have at
the beginning the solution is simple
only render this if we got a user
position so here prior to returning
something in that function I'll create a
new variable user location marker which
is null but then I'll check if props
user location is true ish so if it's not
null then user location marker will be
that marker code and then I can just
output this variable user location
marker down there in my JSX code this is
how we conditionally render content in
react with that now it works again and
if I click get location we Center on to
our position and we all
they have that marker which is great now
of course we don't just want to have our
location we want to see that location of
our users - right now in order to do
this we need to store it on a server in
a database and we need to fetch it from
there now I will use firebase as a
back-end and for that I created a new
firebase project by visiting firebase
page going to the console creating a new
project and in the new project you
should go to the database tab and take
the real time database in there visit
the rules and make sure that read and
write are both set to true so that
anyone can read and write to your
database not settings you want to use in
production but settings which are great
for our dummy app here in production you
typically have a authentication flow to
only allow a fennec ated users to post
data and read data but here we won't add
authentication i instead once it will
send HTTP requests a post request to
decent to this endpoint and a nested URL
actually to store my place on this
database and of course you could use any
other back and to I just use firebase
because it's easy to use if you get your
own back-end
definitely use that that approaches show
you here will work with any back-end
so we want to send a request here
whenever we got the user location so
what I will do is after calling set
state I will send an HTTP request with
the fetch API now the fetch API is
basically the modern replacement for XML
HTTP requests in JavaScript you could
say it's a browser API which is made
available to you by react native you can
find more information about this in the
JavaScript environment page I showed you
earlier in the video and the fetch API
as a first argument takes a URL you want
to send your request to so that's this
firebase URL and there I actually want
to target a places node and for firebase
I need to add jason at the end it's
really just the firebase database thing
you don't need to add this for your own
back-end and places this will create a
new places node now what is in a post
request I need to set up a second
argument here one argument only would
send a get request the second argument
is a JavaScript object where I configure
this with
West for example visiting method to post
turning this from a get to a post
request and again this is just a normal
fetch API if it's unclear to you how it
works check out some docs on it
it's just react native simplement
Haitian off it now we send a post
request we all need to send a body so
let's specify a body property and this
now needs to be a JSON string so we can
use json stringify to turn that
javascript object into such a string and
i just want to send our object that
holds a latitude and a longitude so i
will just copy latitude and longitude
from there I don't care about the deltas
I just want to store positions which I
will use for markers that don't care
about Delta's ever and with that we sent
this to firebase now fetch gives us back
a promise so I can change them here to
get back a response and lock that
response to the console and catch Tuukka
technic to catch any errors during that
not server-side arrows or 404 errors but
errors due to connectivity problems for
example now if we save that and I click
get location I get back a 200 response
so that's looking good looks like it
worked if I check out firebase I see the
places node and in there a new element
with this cryptic ID that's an ID
automatically generated by firebase and
in there I see my latitude and longitude
so that's looking promising we're
storing data obviously we want to get it
to output markers of our users too so
what I'll first of all do is I'll just
get up my location again hence creating
a second object with the same
coordinates but now we'll manually tweak
the court it's a little bit set this to
eight to maybe here and the latitude to
for one so just tiny adjustments so that
it doesn't go all the way to the other
end of the world and hitting Enter helps
in saving these changes by the way so
make sure to save them and now we got
two different positions
which I want to see if I see different
markers you could of course also launch
your app on a second device and it
should work if you then get a different
location there now we need a button to
fetch the location so I will add a
button here above my fetch location
component I need to import that button
from react native therefore and I will
wrap this button in a view component
simply because this view element makes
it easy for me to style that and it will
add inline style here which you can do
that would have to bind to a style sheet
object though it is preferred but here
I'll quickly add an inline style where I
say margin-bottom to 20 to have some
distance to the fetch location button
now I'll give this button a title of get
user places and on press will execute a
method then I'll add this method here
I'll name it get user places handler
like this so let's target this year.this
get user replaces handler and in that
method I'll again send a fetch request
I'll copy the logic from this fat
request here actually
but I will not send a second argument
because I want to send a get request to
this node so just like that on the other
end that don't want just want to lock
the response instead of a cold lock
response Jason here to take Jason out of
it and then in the next then call I'll
have to parse response this is
essentially how fetch works with first
of all get back to response with the
code and I'm parsed data body and then
with Jason we can't parse that and we
get back the body in a JavaScript object
for him so here we have this object and
that's an important thing we probably
want to have an array to conveniently
you loop through it and output a couple
of markers for the different items in
the array on firebase we store
everything in this object format though
so here we got the places object which
has these cryptic strings here as
properties and then the values would be
these objects here so we have nested
objects where these are the keys we need
to convert the data object into an array
therefore so I'll create a new places
array here which is an empty array at
the beginning and then with a for in
loop where I get my keys of parsed
response I can extract these places so I
can then call places array push and push
a new javascript object there where i
will have a latitude we need that for
the marker which is parsed response for
that given key and then there will be a
latitude property because we're storing
latitude and longitude there and
therefore the same of course for
longitude and then I'll add a third
element third property which I'll name
ID which will be just my key that
cryptic key so that I have that stored
here too will be helpful for looping
would be helpful if you add some update
functionality or delete functionality
this is the ID under which it is stored
on firebase now there array needs to be
stored in the state of this component so
I'll add a user of places array which is
empty initially
to my state and then here where I got my
places in an array outside of the for in
loop I'll set this were called this set
state and now set state should set the
state of user places equal to my places
array I got here with that I got an
array of these places I of course want
to out put them on my map though
so to my map component I'll pass user of
places you can name this property
whatever you want and I'll bind it to
this state user places to pass it on to
the users map so in the air we will now
have a prop user places under which we
can get the places off our users maybe
we should name this property here in the
states users places so update it down
there where you call set state you as
well as here where you pass it on and
let's do renamed the prop to user places
to in the users map component I now want
to create as many markers as needed so
I'll create my users markers component
here constant here and use props users
places this new prop we just added with
the map method as you always do it and
react for outputting an array of
elements in JSX in there I'll get my
user place and I want to return a map
view dot marker component where I bind
the coordinate to use your place because
it is an object that has a latitude and
longitude key or property and I also
want to set the keys since we're having
a loop here so that is the default logic
and react arrays basically you need a
key set the key to use your place ID
like that so this is the marker output
for each element in my user places array
so now I get this users markers constant
which I can output next to my user
location marker and if we do all of that
and we save all the files and we real
our application we should be able to go
down zoom out a little bit by holding
command control and then just dragging
and first of all click get usual places
whoops a little bit further down and see
these two places here near the
Googleplex and these are indeed two
places we added and edited on firebase
and this is it this is of course only a
rough introduction to react native there
is much more you can do with it with the
styling you can access the camera add
authentication
create responsive designs all of that
all of that covered in my udemy course
in case you're interested but I hope
that this was a great introduction to it
that you've got a feeling for how you
work with react native how you start a
project how you add packages that need
native device features how you work with
components build your own components
work with the web with a back-end and
now you can dive into the official talks
and or my course or of course some other
tutorial to learn more about it would be
great to welcome you my course would be
great to welcome you in future videos
here on this channel have a great day
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>