<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What's New in Laravel 5.3? - Sending Mails with Mailables | Coder Coacher - Coaching Coders</title><meta content="What's New in Laravel 5.3? - Sending Mails with Mailables - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What's New in Laravel 5.3? - Sending Mails with Mailables</b></h2><h5 class="post__date">2016-09-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8nZribKoUJ4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">there is this one thing or actually
there are a couple of things but there
is one thing I haven't had a look at it
on this channel and this is mailing
sending mails with Lera well now I won't
say that this video is the everything
you ever need to know about level
mailing with you but it definitely is a
good first step and it especially takes
into account what changed with lateral
5.3 something which might be interesting
to you even if you already knew how
mailing worked if you didn't know it
well then this video is extra good for
you because here you will get a start to
end example of how to implement mailing
in your lateral application and send
some mails so let's get started
so let's send the mail out shall we
let's first start with the difference
from five point two to five point three
and then I'll actually walk you through
the process of sending a mail in five
point three so I opened up the
documentation for level five point two
and here in this article we see how we
send a mail in five point to side note
this way would still work nowadays in
five point two you would use Gmail for
say it here then the send method and
emails reminder here refers to a view
you wanted to use for this email in
letter well and that hasn't changed you
use blade templates to layout your mails
and then it is so at the time you send
an email that you tell their will which
template template to use so you
basically send a mail like you render a
view when it comes to layouting it so we
would specify the disss delay out we
want to use then we would specify which
data we want to pass to the view just
like we specified when rendering of view
so that we have access to the user
variable in that view in this example
here and then we have disclosure where
you would configure your mail and
configure to whom you want to send it
down here and from whom you want to send
so which address should be displayed in
the email the subject and so on and this
would send an email and this approach
would still work nowadays
now the problem with that approach is
that it's not very pretty with that
closure here and use keywords you'll be
able to use the user data inside of the
closure that all works and that's all
valid PHP code but it's a bit too
complicated not as pretty as we are used
to
well things to be pretty in level
therefore it changed a bit in level 5.3
not only making it pretty prettier but
also distributing the logic better so
that you don't have the whole logic in
your controller for example like we do
have it in level 5.2 so let's see how we
actually send mail in level 5.3 then I
got a basic
view here which allows me to enter a
male address and then a title and then
well basically hit the send me a mail
button to send the mail so that's the UI
setup here in my resources views welcome
play PHP file and well just some input
fields named mail and title and then the
button
you already saw that in the routes file
here in the web PHP file I get a post
route sent mail which basically
redirects me back to the Welcome page
whenever I'm well done here which has
the name sent mail and that of course is
the route targeted here in my action of
this forum so I will execute this route
here this function disclosure here
whenever I hit the send mail button
that's the set up so far now in order to
send mail we need two things
we need a view which should lay out our
mail and then we need well this mail
send thing from level 5.2 or better said
what we now use in 5.3 well I'll come
back to this let's first create a view
now it is a good practice to go to your
views folder and there create a new
directory and name it for example email
so that all your email templates are in
one single place you don't have to elect
this but it is a good practice now in
here I'll quickly create a new file and
I'll simply name it my mail dot blade
for PHP of course this name is totally
up to you now in this file I'll set up a
html5 skeleton here real quick and of
course you may render any HTML code you
want to send as an email you could also
just send some text whatever you like my
mail here even though it doesn't really
matter
and then here all I want to do is I want
to output you got you got mail and then
let's say here the title which we
entered so simply output the title
remember we can enter a title here in
this input field in the welcome plate
file so that's all a really basic mail
and of course website should have a
dollar sign
and of course you may style this to your
needs and output whatever you want to
output and so on so this is my title
this is my email I wanna send and with
that setup it's time to create the new
five-point-three approach or follow that
approach of sending email and mailable
are this new thing I was talking about
introduced with lateral 5.3 now in order
to create such available I'll head over
to my command line in vagrant here
because I'm using lateral homestead
basically navigate into your project
folder and then I'm running PHP artisan
make mail my mail like this so this now
created a new mailable for me and I
can't find it in the app folder and then
here in this newly created mail folder
this folder wasn't be there before
because what would have had no content
but now it has the my mail PHP file so
this is a so-called mailable here a file
we use to send mail now we get two
methods here the constructor and the
build method the build method is where
we actually send the mail by returning
this and then we chain up or build up
our mail in here so what I actually do
here is for specifying the view I want
to send I'll specify from whom this mail
should be so which address should be
shown now you're free to choose whatever
you want I will just choose my app at
lateral 5.3 dev and it doesn't really
matter what you show here of course
people might reply to this address be
aware of that but you can specify
whatever you want to specify here so
this is G from address and then here the
view I wanna render now that of course
will be my views folder the email folder
and then my mail this is this view I
just created now remember in my view I
also want to output some data the title
here now I could or you might think that
we would still pass this here in an
array like with you for rendering a view
so that
you would have title and then somehow
well the title but where do we get the
title from well we could use this
approach but the question remains how do
we get the title we want to send mail
we'll make it easy to get some data we
will use the constructor here and we
would expect to get the title here so
title for example now with that we tell
this mail about that it will receive
this title whenever we send a mail now
the constructor is the wrong place for
this so what I will actually do is I
will create a new public property here
which I'll also name title and then I
want to set this title equal to the
title I get passed here in my
constructor now what this allows me to
do is it enables me to use the title
throughout my file here and now I could
pass it here as an array so title set it
equal to this title but I don't have to
do this
conveniently lateral may labels make all
public properties they have like this
title field here available in the view
of this male so I don't have to pass it
explicitly with the array it will
already be available very convenient so
with that my mailable is set up the next
step is to go to the web PHP file to my
route where I actually want to send the
mail and here I got two options I can
either use the mail for say like that or
of course as always when using force
AIDS I can also inject the appropriate
class which would be the mailer in this
case so here I could simply inject the
mailer from the illuminate mail package
here so the label package give it a name
of mailer for example and then I could
use mailer to to specify to whom I want
to send this mail now I'm already
injecting the request here and remember
this request holds the title and the
mail address
of de recipient so therefore I may
simply say request input mail which will
be the person to whom I want to send the
email address and then I can chain send
to actually send it now here I will need
to send it to my mailable so to this my
mail PHP follower to this class defined
in this file I do this by simply passing
you my mail and since I'm in a closure
here in the routes file I need to
basically also add the path tutors so
slash a backslash backslash mail my mail
and don't forget I need to pass an
argument to the constructor here the
argument is my not mail my title rip
style like that so let me just
restructure this so that it's easier to
read so basically of my mailer I set up
to who I want to send to email and then
I send it with the sent method here
where I pass my mailable and I need to
specify the full path here because I'm
in the routes file which is no class
where I could define this as as an
import as a namespace basically and then
the data has to be passed to my mailable
with that an email will be sent and
thereafter I will be redirected now you
might be tempted to now hit this button
and send yourself an email now you'll
encounter one issue your local
development environment might not have
an email server and you need such an
email server to be able to send mail
specifically you get multiple options of
which driver you want to use in order to
send a mail let's go back to the lateral
Docs but this time 35.3 Docs to see what
we have available at the very beginning
you learn the drivers or some of the
drivers you have specifically we may use
SMTP mail GaN spark post which are
basically api's you can use for sending
mails very convenient Amazon simple
email service peach piece malfunction
and sent mail and PHP is malfunctions I
male we'll need your local development
environment to have a mail server to
work correctly the environment where
you're deploying to probably has dust
but your local environment might not
have this now a good way to test
emailing without having a local mail
server and so on is to use a service
like mail trap so you can add a well to
mail trap and mail trap is a real cool
server metal trap IO it is which allows
you to test mailing basically it's not
sending emails it's not an API you can
use to use an external mail server to
send emails instead yes it does have a
mail server but basically that's the
move where the name comes from it traps
all emails it catches them so no email
gets actually sent so you can enter
whichever address you want or entry
email will not arrive there but instead
it will arrive in your inbox atmega trap
which makes testing very convenient and
easy so I definitely recommend this
service for testing you may simply sign
up there it's free and once you have
sign up we'll meet each other in the
dashboard where I will show you how to
actually then use the credentials of
this service in your lateral application
to use this service so I am now logged
in and there you got a demo inbox and
here you will see your credentials
now the credentials are blurred out here
because well it's it's it's my
accountant right but basically here you
have a host port username password and
so on well turns out these are the
credentials on the SMTP side here you
will lead in your lateral application so
if we head over to the level app you can
set up your mail server here in the dot
a and V file which is your config file
down here you see the male driver which
is SMTP the male host which is mail trap
IO by default so no need to change
anything here the male port is also fine
and then you will need to basically grab
your username and password here on the
mail trap inbox and paste it into these
few
here now I'm going to do this behind the
scenes because I would blur it out
anyways but make sure to enter your data
there now before hitting the button make
sure you have TC as RF field down here
or I didn't before it so now it is there
now let me hit to send me a mail I got
redirect it back didn't get an error
let's have a look at our inbox we get a
new mail here my mail you got mail and
Hello is displayed here with just title
I entered and this is how you can send
emails in level with May labels the new
feature introduced with 5.3 making it
easy to configure emails to configure
which view you want to use to configure
how to pass data there and to finally
send the email now if you don't want to
use mail trap and want to dive deeper
into all of that check out the official
mail documentation where you will learn
how to set up other drivers how to well
send attachments for example with emails
and so on so a really good resource to
dive deeper into this topic see you in
the other videos bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>