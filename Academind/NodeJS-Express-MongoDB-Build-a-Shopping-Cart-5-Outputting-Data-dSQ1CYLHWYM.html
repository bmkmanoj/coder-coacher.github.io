<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>NodeJS / Express / MongoDB - Build a Shopping Cart - #5 Outputting Data | Coder Coacher - Coaching Coders</title><meta content="NodeJS / Express / MongoDB - Build a Shopping Cart - #5 Outputting Data - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>NodeJS / Express / MongoDB - Build a Shopping Cart - #5 Outputting Data</b></h2><h5 class="post__date">2016-05-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dSQ1CYLHWYM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so if the data in place it's time to
output it so I will go into my routes
folder in the index.js file where I
render my index view and now it's time
to not only return the title but instead
to return an array of products through
which I can loop in the view with
handlebars handlebars provides a looping
mechanism and then well output the right
data in the view so first step is to
fetch all the the items so products and
in order to do this or in order to use
this I will need my product model from
me from the models folder yeah Thank You
webstorm had a little got a little stuck
here so importing that and then products
can be fetched by simply executing
product find with no arguments and this
does exactly the same I did in the shell
client in the last video when using DB
dot products find this will give us the
exact same data next I can pass this
data to the view with a separate new
products where it will notice named URIs
option and it's up to not optional but
up to you you may choose whichever name
you like and then in the index dot HBS
file I can loop through this so looping
however needs to be planned because I
will have multiple columns and grids now
right and this was easy when hard coding
this but we're looping through an array
where I don't know how many items it has
of course I dunno here but you get my
point in a real application you won't
know I need to be able to create rows um
once I reach the maximum number of items
I want to have in a single row
thankfully bootstrap will take care
about collapsing it if we go to smaller
screen sizes but nonetheless I know that
the default setup will have
three thumbnails in in a row so I need
to break after looping through three
items the first thing however is to
create loop and I use double handlebars
or double curly braces - to do this and
then followed by a hashtag to indicate a
blog statement and here I will use each
product now this will loop through all
the products and I need to close that
lock statement by just typing double
curly braces and then slash each so like
you close an HTML tag basically now this
will loop through all the products and I
can show you that this works by simply
outputting product here and then I will
restart my server and yes by the way you
could of course install node monitor or
some other packages making sure that
this gets Auto restarted whenever you
change anything but I kind of like doing
this on my own and keeps me keeps me
focused whatever but you may do this of
course so with that if I reload use the
product product product proper product
however that are a bit too much products
here we don't have that many products in
our database here right the reason is
that if we have a look at the code here
in the UNIX J's file this is the same
problem we had in the seeder the finding
of product is asynchronous
therefore we are calling the render
method here when we actually haven't
gotten all the results back so as you
can see it's looping through something
because products is some kind of
Mongoose object at this point but it's
not the actual result it's not the
actual products array we get this array
in another way I can get rid of this
variable here and instead I will create
a new call back here where I either get
an error or all the documents and now
inside of this callback I will call
this render method here and pass the
documents here now if I restart the
server and reload this looks much better
now we got five products which is
exactly the amount we have in the
database since you see that five
products great so this is good but of
course we don't want your output product
here we want to well output the actual
products so I need to split after having
free products so I will kind of need to
loop through chunks of products each
chunk has reaiiy tums and we'll make up
a row and then within each chunk I need
to loop through the individual items to
then create the columns right the entry
point you create those chunks which we
need to live through as an ear next
chest file here I will create product
chunks this will be an empty area at the
beginning and I want to have a chunk
size of three of course variable two
next I will create a for loop where I
will loop until I reach my document
length so the nth element the last
element and my product area of the
products I get back but I will increase
I not buy one but instead by the chunk
size you jump in these jump size chunk
size steps here then I will use the
product chunks array pushing new item
and this new item will be another array
you can go away thank you so this will
be another array so I will and take my
my document but all my products here and
slice a part out of that and I will
slice from the current I so from the
current in X here or record loop in X 2i
plus chunk size
so if we're at the first iteration where
is zero then I will take a part of that
dot products array
starting at the first element all the
way up to the fourth or at the third
element so excluding the fourth element
so I 0 plus 3 which is the chunk size
here is 3 so this will be the first
chunk I take out now I go into the next
iteration I is incremented by free since
this is my chunk size here so now I is
free it was 0 now it is incremented by
free it is free therefore the next slice
I take is beginning at the third element
for the actually the fourth element
since the UNIX VD area next edge starts
at 0 and I go up to well this will be 6
my array only has 5 items so it will
take the last two elements and I will
therefore have create a new array the
product chunks array which has two
elements two arrays the first area
having free products or free elements
and secondary having two I then pass
this product chunks array here and in my
view I will solute through this I can
leave this name products if I like and I
will copy one or I will copy the row
here put this into this loop get rid of
all columns but one and inside this loop
because I want to create this row for
each chunk therefore this is in the
outer each loop now I will trade another
each loop and inner each loop here
inside this I will loop through or it
will create my columns since this will
be the individual products in each row
and here I simply loop through this this
is a keyword and handlebars if you have
a loop each products then you can
reference the current element off a loop
with this and this will be of course
another array since we have this chunk
array with its elements which are
I raised two and therefore I then loop
through each element now this I can
output the data and I will start here
with the source of the image I can use
handle bar syntax here or a handle bars
expression to again use this now this
here is of course in this loop and
therefore is not referring to an array
here anymore but instead to the
individual object now I know that this
object will have an image path since
well this is what I set up in the schema
and if I now reload this page you can
see it still works but I got all the
images lovely looks good and of course I
also get the old items here since I
didn't delete that so let me get rid of
that code reload here again looks good
so let's do the same for all the other
pieces so for the title for example
and for the price now I'm not replacing
the dollar sign I believe that just want
to output the price here if I get reload
this looks good
however you do see that we don't have
equal sizes for all thumbnails but for
me that is okay um of course you could
fix this and this button you should say
by by the way didn't change this as it
seems
or it should say add to shopping card so
like this looks great so regarding the
thumbnail sizes it's no problem for me
here if you want to change this you
would have to set a minimum hay height
on all these fun nails but for me that's
okay like that so that were outputting
the actual information we see that enter
the database and this is already an
important first step I'm happy to see
you back in the next videos when we take
the well next steps
see you there bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>