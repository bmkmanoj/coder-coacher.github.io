<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular Elements Introduction &amp; Walkthrough | Coder Coacher - Coaching Coders</title><meta content="Angular Elements Introduction &amp; Walkthrough - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular Elements Introduction &amp; Walkthrough</b></h2><h5 class="post__date">2018-05-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/y73NMviRoPY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we'll do just that we'll
load an angular component well this
would be pretty boring so we'll do it an
exciting way we'll load it dynamically
as a custom element as a native web
component instead of a normal angular
component what's great about that and
how does it work let's take a closer
look at this in this video
so let's get started with angular
elements what is angular elements it's a
feature of the angular framework that
allows you to turn your normal angular
components which you use in your angular
app into native web components web
components are basically custom HTML
elements you could say they are part of
the of the Dom of the JavaScript API
they're not related to angular and you
can use them in vanilla JavaScript apps
or it apps built with other frameworks
so that's web components and that is
what you can create with angular
elements now before you get too excited
right now at the point of time I'm
releasing this video when angular 6 was
released the web components you're
building with angular can only be used
an angular project still and the obvious
question then is why would you build web
components at all what is the use of
angular elements if you can only use
these elements inside of an angular app
and the answer is they are useful for
loading dynamic content so let's say you
got a content management system on your
back-end on a server and there your
editors can create HTML code they know
how to write HTML code and therefore
they create the content that gets loaded
into your angular app in HTML now so far
that is fine but what if you actually
want to enable them to also use some of
your angular components in the HTML code
they prepared if they do that if they
use your angular component selectors and
you then load this content dynamically
in your angular app it will actually not
work because your angular app is
compiled ahead of time or even with
just-in-time compilation it's compiled
before the content is loaded so if the
content contains these Elector of an
angular element of an angular component
this will not work it will not recognize
that let me show you what I mean here's
a brand new angular project read with
the angular CLI important if we check
the package to JSON file I'm using
angular version 6 and I'm using rxjs
version 6 and I installed the rxjs
compat pack
to have no issues with rxjs this might
be needed at the point of time recording
this I need it for the angular elements
package which we'll use in the future
you might not need this all angular
packages should by default support the
rxjs syntax if you want to learn more
about what changed with angular 6 and
why does rxjs six thing is so important
check out these separate videos I
created on that my angular 6 update
video and the rxjs six update video but
back to the angular components let's
create a new component let's name it
alert component maybe a normal angular
component so in there I'll export a
class alert component like this and of
course we could create that with the CLI
too
I'll import the component decorator and
in there I'll define my selector which
is Apple eart let's say and a template
which could to be of course an external
file - but here I'll simply add a div
and inside of the div I'll say this is
an alert and then we all even output a
message here so some string
interpolation now last but not least
I'll add my Styles array here with a
string in there to define some styles
for this template and there I simply
want to star my div give it a border of
1 pixel solid and black background of
let's say Selman so this is a light red
color and a padding of 10 pixels and
last but not least let me also define a
font family and Selman by the way should
not be a string let me define a fun
family of sense serif
now this is my my style for D for the
alert now the alert uses this message
property so I have to add it here and I
want to make this bindable from outside
salt decorated with at input which I
have to import from angular core and now
with that D component is finished and we
can now use it to use it we have to add
it to our declarations array there I add
my alert component and with it added
here we can go to the app component to
its HTML file to be precise and then
we can use my newly created app alerts
component like this and of course all
the pass a match the message which since
it's a string can be passed like this
without the square brackets this is just
a shortcut in case you are passing some
text and there I could say this is a
normal angular component with that if we
save all these files and we go back we
see our component there now the styling
didn't work yeah I should add more
semicolons instead of commas with that
now we got this alert so there's a
normal angular component now let's say
in the app component we actually want to
load this dynamically I got this content
property there it's null initially and
now let's say instead of outputting this
component like this we have a div and on
this div we use the inner HTML property
binding to bind to you the content in
the app component in the constructor for
simplicity reasons I can then add my
timeout just to simulate that this is an
asynchronous task and we're getting this
from a server we don't have to put it
into a timeout we can also run this code
once does Epke port loads just adding
this to well give us a little bit of
time to prepare for the data to arrive I
guess and then that function that
executes here in set timeout I now want
to set this content to let's say a
string that holds HTML paragraph so this
is all obviously not using our element I
just want you to show you that this
works we're now rendering this paragraph
if we inspect it we see a paragraph is
rendered to the Dom because we're using
inner HTML now what be great if we could
use our own element there so if we could
use app alert here like this app alert
and now we also set a message of
rendered dynamically dynamically because
we don't include it in our component
template we're not including it in the
app component HTML file but here we're
hard-coding an intro record but we could
easily imagine that this is coming from
an API
KOB that were fetching this from a
server so if we do it like this and then
we reload our app we can wait forever we
won't see anything here and if we
inspect our app root we see that the dev
indeed is empty so nothing gets rendered
here and the reason for this is that
this is rendered as HTML code but it's
not recognized as an HTML element app
alert is not a built in element it's our
own component but that exact is what I
meant
angular will not consider this after it
has loaded our app because the
compilation of the templates and
therefore the part where it understands
your component selectors is already done
by that point of time and this doesn't
change if we remove this from set
timeout and execute it right at the
beginning of this component so here we
don't see anything even so this is not
the reason the reason indeed is that
angular doesn't compile this code and
angular elements fixes this issue or
this problem you could say it allows us
to basically take our angular component
and put it into a totally encapsulated
self bootstrapping
HTML element which you can dump into
your angular app in this way for example
and which will still work now how do we
create such a component we need to
install angular elements and you can
already see that I added an import up
here create custom element this has been
lurking around for a while and it seems
to be what we need now make sure that
you install the angular elements package
with npm install' - - safe at angular
elements just in case this isn't
installed already now I'm recording this
with a beta version but of course but
the point of time you're watching is it
probably was released as part of the
normal angular framework so once this is
installed you should also ensure that
especially for the beta version might
not be a problem in later versions that
you got rxjs compact because this is
required for this to run at least right
now and very important that you add this
line to your package JSON fall this is a
polyfill which right now all is required
for this to run this might also change
in the future but right now you need to
add this so add this line with this
version
and rerun npm install' thereafter to
download it and add it to your project
and with that polyfill installed you can
go to the polyfills TS file and there
you should add these two lines import at
web components slash custom elements
slash custom elements dot min and import
add web components slash custom elements
slash source slash native shim this
might also change in the future but we
read now Nietzsche's to enable custom
elements to ensure that this works that
the native element there's custom
elements package or the angular elements
package sure spits out that this element
works therefore this is needed so with
that all added with the polyfills added
on with the packages added we can now
try creating a custom element and for
this and a constructor of app component
you want to do this in a place that runs
early in your project I'll create a new
element and I'll name it
alert element the name is up to you I'll
stored net constant which is named like
this and I will use create custom
element and now I need to import my
custom element I want to do this on the
alert element so you should make sure
that you add an import to that so import
alert component from and now it's alert
component and there of course it should
also be alert component element is the
name of the constant but we pass in the
component to create custom element now
create custom element also needs a
second argument this argument is used to
configure this element and there we need
to pass the injector we're using now
angular uses dependency injection as you
know and the injector is basically the
tool which tests this injection and we
provided to this custom element so that
the element behind the scenes is able to
connect itself to our app so to say
therefore we simply inject the injector
so import injector from at angular cord
and with that injected in that object
you're passing to create custom element
you add the injector key and as a value
the injector you're injecting that's a
lot of injection going on I guess so
with that we created a
custom element and this indeed already
is a native web component now we can use
the custom elements API and important
this is not an angular feature this is a
feature provided by JavaScript and
called the finder this allows us to
register a custom web component and
again alert element is just such a
component it's the same as we could have
built on our own so therefore here we
first of all define the tag by which you
want to select it and this doesn't have
to be the same one as down here so we
could also use my dash alert for example
and then you pass in the element so not
the component but alert elements are a
custom element now with this we can use
that so down there I use my alert
instead of Apple Earth because I changed
tag and now if we save this
it compiles and if we go to our
application nothing happens but if we
inspect the console we actually got an
error that we well that doesn't find a
component Factory
now as I said angular elements are only
available in angular apps right now so
what we have to do at this point of time
is we have to add the entry components
array to our app module entry components
essentially is an array of components
which you don't use with it's selector
or wire routing but where you want to
tell angular that you're eventually
going to use it and this is exactly what
will happen for the alert component we
declare it that's important so today
angular can find it but we also need to
tell angular hey you won't see me use a
selector for this you won't see me
loaded with routing but eventually I
will need it so please be prepared to
load it when I need it and that is why
we also have to load the angular
component X using the alert component
not our custom element but the angular
component here into our entry components
array and if we do that and we save the
app will reload and we get at least a
warning not an error sanitizing HTML
stripped some content now the custom
element is in the end a bunch of
JavaScript code and this is sanitized so
this can't be rendered with inner HTML
that's a security mechanism to avoid
cross-site scripting attacks we want
this mechanism but in this case we know
our content is safe and therefore we
want to be able to output it we can do
this with the help of the Dom sanitizer
you can also uncheck this it's the Dom
sanitizer object or class which you need
to import from at angular platform
browser and with it injected you can
wrap this custom mm HTML code which
again behind the scenes will use a lot
of JavaScript you can wrap this with Dom
sanitizer bypass security trust HTML so
that this HTML code and whatever is
connected to it is
trusted so now with that if we reload
this we do see our alert after a second
but this time it's loaded as custom
element if we inspect it we see our
template here and we see the styles we
applied to it but this now actually is
loaded as a native web component still
only usable in angular projects this
will probably change in the future
though but already useful for dynamic
content like this since we sanitize it
you should of course make sure that you
know that this content is safe but with
that you've got a really great tool to
load content into your app and control
it as an angular component and do all
the fun stuff you can do with components
whilst getting it from another source
which is not hard-coded into your
angular project code when you're
compiling it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>