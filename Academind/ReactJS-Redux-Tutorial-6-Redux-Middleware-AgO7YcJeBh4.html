<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ReactJS / Redux Tutorial - #6 Redux Middleware | Coder Coacher - Coaching Coders</title><meta content="ReactJS / Redux Tutorial - #6 Redux Middleware - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ReactJS / Redux Tutorial - #6 Redux Middleware</b></h2><h5 class="post__date">2016-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AgO7YcJeBh4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let's have a look at another feature of
redux middleware this is the flow
diagram you already knew the application
dispatches actions actions are handled
by a reducers the reducer is returned
and you state the state is stored in the
store and to store it and passes this
back to our application
now we haven't hooked up reactions to
read acts yet but we'll do so soon but
the flow is true no matter if we use
react or anything like that or nothing
like we're doing now now mellower allows
us to hook into this process
specifically here once action is
dispatched right before reaching the
reducer and then executing some code for
example logging this action and the
upcoming state change or anything like
that so let's see this in action and
let's see why this might be useful
though you will see every users of
middleware throughout this well course
or throughout the next videos - in order
to use middleware I will go up to my
imports and I'll use or import another
method which is called apply Milla we're
also from the redox package this allows
me to apply semilla wear into my redox
flow as you saw it on the diagram right
before this middleware is set up here in
my store or in the create store method
the first argument here creates their or
sets up the reducer reducers in this
case then we pass the initial state and
empty JavaScript object here as will be
overwritten by the reducers which have
their own initial state and then the
apply middleware method here now the
apply middleware method here takes an
argument and this argument is the middle
of where we want to use currently I
don't have such a mil aware so let's
create a new one let's create it right
above the store I'll name it my logger
so it's a middleware which should lock
something and middleware has this
pattern or is created in this way
it's a couple of fat arrow functions
chained together so we have the store
which is passed into a method which
actually returns us a method which takes
the next method provided by redux here
and then we have this return another
method call which takes the action which
then finally has a function body as we
know it which well allows us to do
whatever you want to do for example say
locked action action and then execute
next action this next call here is
important because next as a method
provided by reread acts package and if
we don't call next well then our action
is not travelling any further it's not
reaching the reducer it's cancelled
we're failing store on state is not
updated so therefore calling next is
important but I could imagine that this
syntax here is a bit strange it's
certainly strange looking in the end
it's just a couple of fat arrow
functions as es6 introduced them and you
can think of it like this the first
function here which gets executed by the
way my lager here yeah it's just this
function here so store is the argument
this is the function body of this
function taking store as an input now in
this function body we simply return
another fat arrow function which takes
the next variable or as we learn method
here as an input now the next method or
function here is a function
automatically passed by redux that's why
this pattern here is so important redux
expects this pattern it wants to pass
the next method here and this fat arrow
function which gets this next action
your function
as an input then returns us yet another
fete error function which takes the
action which was executed and which then
finally has a function body as we know
it where we can write our own code and
then use any of the free arguments we
pass down this chain and that's why you
see federal functions here because
that's the convenient way I can use any
of the arguments here in the final
function which is this one so while it
might look strange just keep this
pattern in mind and in the end you'll
probably not write your own middleware
that often but there are SME useful
third-party milla wares which you might
want to hook in at any point in your
application so what the my log our
middleware created I'm passing it here
in the apply middleware method I'm
calling my logger and I'm not executing
it just passing a reference here if I
save this go back to the application and
reload it now we see a whole bunch of
things being locked to the console and
distorted well that's just the code here
in a subscription whenever the store
changes but the locked action text
that's the one from our middleware
as you can see it always appears right
before we get store updated which makes
sense because as you saw on the slide
the middleware is executed before the
store is changed and before the state
has changed so the lock action or simply
is doing the following of the prints the
action we're about to execute so here
add with a payload of 100 and indeed we
can see the store get updated where we
have now a result of 101 and this error
--air a value of 100 was added and then
here for set H for example we see that
the user reducer indeed changed the H
here to 30 so that is how we can create
our own Miller and use it
nice to know might be helpful but as
it's just sad you'll probably use apply
malware more often in the context that
you want to use some third-party malware
so let's add one and actually a useful
one ASD read acts logger which gives us
a nicer logger than the one I'm using
here so I'll go down to the console and
npm install read acts logger - - safe
here and i'll just split this our
multiple lines here so that it's a
little bit easier to read so logger was
installed and i can now go to the top
here at my import and import logger from
read acts logger i'm not using the curly
braces here because logger or the Redux
logger package here has a default export
which i then import like this again es6
stuff have a look at my video or course
if you want to learn more about this so
i want to use this logger - and i can
use multiple middlewares by simply
chaining them here I add logger though
here I need to execute it why do I need
to execute logger the one I just
imported and not my logger well that's
just how this package Redux logger here
is setup logger which I import here is a
function I actually need to execute to
get again this middleware chain here
could be different but it isn't so we
have to do it like this save this reload
and now it's getting crowded here huh
not really better to see but what you
can see is that the logger here gives us
a much nicer view of the previous state
the action which gets executed and then
the next state so if I remove my logger
here to make it a bit more readable and
maybe comment out this store updated
thing if I save this
and reload now it's much easier to read
Oh Dix Pont is now as you can see we get
a clear view of which actions get
dispatched what the status before this
action is dispatched so here when we add
twenty two we get the old state where
the result is 101 and then we get a new
state where the result is 123 and that's
a nice logger for development purposes
mainly of course probably not something
you will use in your deployment or in
your production app which you want to
deploy but that is how you use
middleware how it can be useful and you
will see another very useful thing you
can deal with middleware in one of the
next videos when we actually have a look
at asynchronous tasks asynchronous
actions for example reaching out to a
server I'm not going to spoil the fun
we'll see it when we're there so let's
instead continue to the next video and
finally finally hook up read acts and
react</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>