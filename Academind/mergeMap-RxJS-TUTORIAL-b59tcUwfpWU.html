<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>mergeMap() | RxJS TUTORIAL | Coder Coacher - Coaching Coders</title><meta content="mergeMap() | RxJS TUTORIAL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>mergeMap() | RxJS TUTORIAL</b></h2><h5 class="post__date">2017-05-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/b59tcUwfpWU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to this video in this video
we're going to have a look at how we can
merge the result the values of two
observables in q1 using the merge map
operator as always you can find the
source code starting and ending source
code for this video in a link in the
video description and with that let's
get started and let's find out how merge
map actually works in the starting
project I have a little bit of code with
two inputs and a combined value
paragraph but obviously nothing is
happening here now I want to change that
and I want to change it using
observables so what can I do well for a
start I want to react to whenever I type
something into these input fields so I
need access to them so let's use good
old JavaScript to get access using query
selector and then you can see that these
inputs have some ID so I can use the
input one idea let me bring this into a
new line input 1 ID for the first input
and then simply copy that for the second
one to also replace it here and now get
access to both inputs why because as I
said I want to react to an event here to
the input event so that would be the
next step I can create an observable and
using rx which I already do import
observable from event I can react to
events on that or on any element so I
could pass input 1 this element here and
react to the input event which is fired
whenever the user types now doing that
what I can do is I can subscribe to that
of course and then the first callback or
the first function which I passed to
subscribe I know that I will get the
event because they are using from event
to constructors observable and I can use
that event data to basically simply set
MDD of the value of my Spanier which I
also need to fetch because they are
going to output my values so span using
document query selector and other span
element set it to whatever I typed so I
could
simply say span text content equals
events targets that will be the input
which fire the event so where the user
disk type something and then target
value to get the value of that input if
we hit enter and we type something into
the first input here you see that we log
it here in our combined value field
however it's not really a combined value
of course because the second input
doesn't do anything now clearly we can
also create a second observable so let
me quickly do that here ops to where I
listen to you the same event on the
input queue and now if I hit control
later I can type something here and I
update the span and I can't have
something here and I will overwrite that
value in the span because now I have two
data sources two inputs with two
observables listening to the input event
which will basically change the text
content of that span that might be the
behavior you're looking for but now I
want to merge both observables to get a
combined value and we can do that merge
with the merge map operator merge map
will take an outer observable and then
merge an inner observable into it and
whenever the inner observable then emits
a value it will also take the value of
the outer observable into account to
give us a combined value sounds
complicated let's see in action first of
all I'll remove the subscription both
observables because I don't need it so
for now I only got two observables here
and nothing else
both observables fire on the event but
we don't subscribe to any of them so
what I want to do as a next step is I
want to merge the let's say second
observable into the first one so I can
say opps one merge map that's the
operator I'm gonna use now merge map
here will receive a function as an
argument and this function first of all
gets the value of the observable we
is merge map on so in this case that's
the value of observable 1 or since we
know that this will actually be the
event object we can also name this
parameter event 1 but again it will
always be the value of the first
observable now and the function body and
I will use curly braces I have to return
another observable so let's return
observable 2 now that alone won't do the
trick because I want to combine the
values of the second of the first
observable so what I can do is I can
call normal map operator on observable
map on observable 2 and here I know I
get the event object of the second
observable since we always use from
event here we know it will be a in an
event object so now here in the map
operator on the second observable I can
combine event 1 target value and let's
say a white space plus event queue
target value why can I do that let me
bring this into a new line to make it a
bit easier to read
why can I return event one target value
plus some white space plus event to
target value well keep in mind we're
still in this function we passed to
merge map so we're still in this
function here and in there we have to
return an observable we could just
return observable to but that wouldn't
really do the trick because what we want
to return in the end is a combined
observable which combines the values of
Q observables therefore we then call the
map operator on observable to which make
sure that we actually transform the
value we get back so since we now have
access to both the values of the first
and the second observable it's easy for
us to simply combine them and in the end
would be returned is this combined
observable so now all that's left to do
for us is to now call subscribe on this
merge map or after this merge map
operator and we know that inside off
subscribed we get a combined value and
now we can reach out to our span set the
text content equals
to that combined value and his
control-enter to load our app and now to
type something here you see nothing
happens but if I type something in a
second field we get the combined value
now why does nothing happen if I type in
the first field because that is how
merge map works the inner observable
this one here has to emit in value for
the whole observable to update and to
emit in value and that is exactly what's
happening here as soon as we type
something in the second field which is
our second observable in this case we
emit a value on the combined observable
so that is how you may use merge map and
it can become handy if you have module
data sources and you want to merge them
into one where one of the data sources
is the one
well basically telling you when the
event mission happens like here the
inner observable</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>