<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Register for Meetups | Vue.js + Vuetify + Firebase FULL PROJECT | Coder Coacher - Coaching Coders</title><meta content="Register for Meetups | Vue.js + Vuetify + Firebase FULL PROJECT - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Register for Meetups | Vue.js + Vuetify + Firebase FULL PROJECT</b></h2><h5 class="post__date">2017-09-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/d4nUU8vCT8U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back to the view of unify and
firebase serious we're almost at the end
of the series and we added a lot of
functionalities to this application and
the last weakness we made sure that we
can't edit meetups we created in this
video I want to make sure that we can
actually register for meetups at least
four meetups we didn't create so let's
dive into that and let's start working
on that feature
now how do I want to be able to register
for a meet-up if we have a look at an
example meetup here we got this register
button here on the bottom right corner
off the Meetup
the goal is that we can click this
button obviously and open a dialog in
which I can then confirm that I really
want to register it so that I basically
asked of course you could just register
upon clicking the button but a little
extra twist never hurts if I am
registered I want to have an
unregistered button here instead instead
of the register button obviously and if
I'm the creator of the meetup I don't
want to have any button down there now
we already have to register button so we
can build up on that but I will actually
build a new component for this a
registration dialog and that basically
follows the same pattern as all the
other dialogues we've built over the
last videos the Edit the date and so on
dialogues we managed a lot of
functionality in there and now I want to
use an average I'll log for confirming
that I want to register it's going to be
a much simpler dialogue than the Edit
details dialog and so on though now for
that in the meetup folder i'll create a
new subfolder and i'll name it
registration because it's about
registering for meetups in that folder i
wanna create a component which i'll name
register dialogue dot view to be in line
with the average components where i open
the dialogue so this also ends with
dialogue in the name now let's build
that dialogue here and for that we can
actually use let's say the dates dialog
though we're going to change a lot about
it I'm still going to copy the whole
file content in there but I'm going to
clean up a lot of the things actually
everything down there and this default
object I want to write this from scratch
later and in the template well we
obviously will have a video log wrapper
now I will get rid of the width here I
want to have our automatic scaling
because we will have very little content
in there just a question basically I
want to have a persistent dialogue which
stays on top of the of the screen
basically and I will open it or hook it
up to a register dialog property which
controls whether we can see this dialog
or not
now then we have a button and this
button is our activator and that shall
actually say register if we are
registered or unregistered if we are not
now to control this we of course need to
find out if we are registered or not and
that is something I want to find out
with the help of UX because if we have a
look at our store we see that for our
user when we sign in and we will clean
up the store to the in the next videos
if we assign a user up or in we also get
a list of the registered meetups now
this list always is empty as of now
because we got no way of registering
this is about to change but that is the
starting point with which I want to
start so in the gathers it would be
interesting to find out for which
elements or meetups a user is registered
and we already get the user the user has
this registered meet-ups
array I was just pointing to you so dad
will be the starting point with which
I'll find out if we should show a
register or an unregistered button with
that information
let's go back and our register dialog
and let's add a computed property in
there the computed property I want a
name add can be named user is registered
because that's what I want to check and
in there I'll reach out to the store of
course
so this store to the gathers and then as
I just said to the user because the user
has this registered meet-ups
array now you could of course also build
a getter which already gives you the
finished information you are interested
in here I'm going to put this logic into
this component because it's basically
the only place where I use it now what
I'll do here is I'll use defined index
method that's a default JavaScript
method which allows me to find a
specific element in an array of elements
and gives me back the position at which
this element can be found and this will
be negative minus one if it doesn't find
an element and that's what I want to
take advantage of if it's greater than
zero I know that we found
registration if it's smaller than zero I
know that the user is not registered the
question then just is for which element
am I looking well in there we're going
to have a function arrow function where
I will get up my meetup ID because this
registered meetups array whilst
currently being empty will in the end
just hold an array of meetup IDs so the
individual element which of course is
passed to this function which gets
executed and find index the individual
element will be just such an ID a string
in the end so in that function which we
pass to find index I now want to return
true if that meetup ID is all the D ID
of the meetup we currently load it now
for that I need to currently loaded
meetup and I expect to get this wire
props so here I'll also get the meetup
ID so that's the meetup ID for which we
click the registration button and with
that information here I can return if
the meetup ID here is equal to the
meetup ID we have as data so to our
props now just to clarify what's
happening here find it next again runs
this function here which we pass as an
argument on every element in registered
meetups and registered meetups will be
an array of meetup IDs the loaded meetup
for which we clicked on the registration
button also is just or for which we for
possibly show this dialogue I should say
also has an ID of course and if the ID
of the element for which we want to
click the button happens to be part of
our meetups
in this registered meetups array we know
that we already are signed up for this
meetup so then I can show the and
register button otherwise I show the
register button so with that let's take
this logic and let's use it and I do use
it here at the top where I set up this
button now of course you can use
different approaches I'll simply go
there and use string interpolation and
check if user is registered if that is
true and keep in mind this will be true
if we find something well at least if I
finish the condition
that should be greater or equal than
zero because that alone just returns me
the position of that ID and that idea
such as said where that position is
going to be negative if we don't find a
match so only if it's greater or equal
than zero so we found an element at some
position in this index in this array
only if that's greater than zero I know
that I am registered and this is what
I'm checking so greater or equal than
zero definitely has to be added here at
the end this is the full condition I
want to check now with that though I
know that this will be true if I've
found a match so if that is true then I
want to show whoops with a ternary
expression then I want to show
unregister and otherwise I will show
register now of course you could also
outsource this into a computed property
and not put it in line into the template
I'll leave it here for now the thing is
that you shouldn't put too much code
into your templates short ternary
expression like this one certainly isn't
too bad but in general don't put too
much logic into your template instead
contain it into a new computer property
you could create where you simply well
perform this check and return this or
this string anyways with that we make
sure that the button shows the correct
text taking advantage of our user is
registered computed property we just set
up this one here and now we can move on
in this dialogue of course in this
dialog the textview on a display depends
on whether we are registered or not so
here I can say unregister from Meetup
question mark and only show this title
if user is registered returns true and
then I can duplicate this and say we
else which I can use since we have a
sibling of the same component type next
to it here we could say register for
Meetup
so only one of the two titles is going
to show up at a time but we make sure
that it's the correct one depending on
our registration status the next thing
is in
the body then so here we have a divider
we can leave that here now in the body I
don't want to have a date picker instead
I'll add a V card text and there I'll
just say you can always change your
decision later on that's just an example
text now I also need some actions and I
will add these actions below the card
text of course so add another row here
we card actions like that and now the
action shall basically be a confirm
action that I do want to register or
unregister or a cancel action so I can
add a V button and say cancel and the
number one where I say confirm now I
want to stall these buttons differently
the cancel button there I want to add a
class of red text dark and one to make
it well red because we cancel and I'll
make it a flat button also I want to
register my click listener and basically
say that I want to close the dialog by
setting register dialog to false because
keep in mind and I'm just splitting this
over lines keep in mind that register
dialog is bound by a two-way binding to
the V dialogue over V model that's
exposed by beautify and therefore
whatever we set this to true the
dialogue will show up if we set it to
false the dialogue will disappear so
that's exactly what I do upon clicking
cancel we don't do anything except for
hiding the dialogue now on the upper
button there I want to also add a class
use some green text maybe because here
we are confirming also you start in one
to make it a bit darker make this button
a flat button and add a click listener
also split this over multiple lines on
this click listener here I want to
execute on agree and that's going to be
a method which basically kicks off the
registration process
dispatches some action which in the end
reaches out to firebase and stores the
registration there too
so there
our button now let's have a look at it
and for that we of course have to use
that component right it's registered
dialogue so let's register it as a
global component may be in the main dot
JS file and there I'll duplicate the
edit meetup time dialog
I'll also duplicate the import reach out
to the registration folder there and in
that folder I now want to import the
register dialog that's also the name
I'll give the component here so here
register dialog and this can be the app
added register dialog maybe and not AB
edit just a producer maybe app me tap
register I'm a fan of clear names even
though they tend to get a bit long I
guess well anyways this is the meetup
register dialog referring to the newly
created component we can now use that on
our meetup component and just as we use
the our dialogues for date and time and
so on we can just put them in here where
we had the button in the past so now
let's add our new dialog and don't
forget we need to pass some props to the
dialog we need to pass our meetup ID to
it so I'll do that here pass meetup ID
and this of course is simply equal to
meetup ID a meetup is of course loaded
here in this component we have it here
we get it from the store so with that
let's save this and let's see it in our
application loading a meetup here
see you just this button keep on
occurring this error I mean we have an
error here let's see any bullet handler
for even click yeah makes sense um India
registered our I'm handling a click on
confirm with on agree and we don't have
that method yet so to get rid of that
error all quickly added already even
though we don't do anything in there yet
so now let's make sure we add this
without landing errors and reload one
more time now it should work what else
property or method register dialogue is
not too fine on the instance although a
valid point that is something you
definitely have to keep in mind we're
binding to reduce
dialog here with two-way binding but we
never set up his property it's easy to
overlook because I created so many
dialogues here but of course we have to
set this up so that's a data property
return an object in there and set
register dialogue here to false
initially so that it doesn't show up by
default now if we have a look at this
yeah get rid of this limiting error now
we should be able to reload this with
out getting an error looks better and
now if you click register here we see
this little nice dialog here where we
can confirm or cancel it now this is
nice I want to change the styling of
this button here there adjust your
button keep in mind that's our activator
here we can simply change it by giving
it a different color for example the
primary color by adding the primary
directive or to be precise property I
should say so now we have a nice red
button ear that's looking good
now we can turn towards the logic upon
clicking these buttons so we have cancel
and confirm cancel is simple but confirm
is of course the tricky part there I
want you dispatch in action which in the
end leads to us setting a request to
firebase and of course also altering our
local state in view X so for that we
need to go to our store and there I'll
start by creating a new action and we
get loads of actions and mutations here
that's well also clean it up in the next
videos but for now let's simply add
something here maybe at the top register
user for meetup could be one action name
and there we of course get the commit in
the object we can extract and we get a
payload that will be the meetup for
which you want to register and of course
I'll also have a unregistered user from
meetup action where I also get the
commit method from that first object and
also get a payload which will be the ID
of the meetup I want to unregister from
now let's start with registering here
for registering I first of all want to
commit set loading set this to true to
indicate that we are currently doing
something because we will reach out to a
server so this will take a couple of
seconds or milliseconds and then I want
you actually send a request to firebase
to edit my user there if we have a look
at our firebase data here we only got
meetups right now we also of course got
users we got users here under
authentication now we can't change that
data firebase doesn't give us access to
the user data here well we can read it
we can get the email address and so on
but we can't add new fields but of
course we can simply add it to our main
database and that's exactly what I want
to do here in the past I didn't need to
do that but now that I want to store
some user information namely if the user
is registered for a given Meetup
I of course need to well store some data
connected to my user on the firebase
database too so what I want to do here
is I want to take the firebase object
reach out to the database and there get
a reference to slash users now that
doesn't exist yet but then it will just
be created the first time we access it
now I need my user ID because that is a
good identifier for the node beneath the
users level so that I can store some
user specific data below that I denote I
can enter afforded I need to get my
active user and we actually have a
getter for that right we have the user
here now one thing we can do is we can
go back to our action and not just
receive the commit method from this
object we can also get access to the
gathers here
that's another property provided on that
object which we can pull out with
destructuring
so here I can then say plus and maybe
store the user in a new constant where I
just get getters user and we have that
user gathered that's where I'm getting
it from and with that I can check check
user ID here add this as a new SAP node
so to say and then chain
another thing registrations may be with
child here so I want you add
registrations so this would basically
create free notes a users note then
below that note and note for the user ID
and then below the user ID our
registrations note under which I want to
push all the media bodies the user
registered for so it's under
registrations that I want to push
something and that something will be the
payload which will just be the meetup ID
for which the user want to register so
then I know that this will probably
eventually succeed if it does succeed
then I will commit said loading and set
it to false because we're not loading
anymore and I also want to commit a new
mutation I haven't created yet which is
also called register user for Meetup
because we changed firebase we also need
to change our view X store of course and
I need to pass some payload to that to
that mutation and a good payload to pass
is actually something taking into
account the data I get back from
firebase I can of course pass the ID of
the meda for which I registered but I
also won Q store the registration ID
firebase created for me and I can
retrieve that as part of the data I get
in that response keep in mind if I push
something to firebase firebase creates
these cryptic strings and I want to
store this cryptic string on my
registration in view X because that
makes it way easier for me to later
unregister the user
so here I'll store it under maybe FB key
for firebase key data key and again data
is simply an object returned by firebase
which happens to have some meta
information about the successful request
and one field is the key field which
gives me information about the key
firebase created automatically so that's
important and that's helpful if we fail
I'll catch that of course here I'll then
get an error and I will law
that error to find out what's wrong but
of course I will also commit set loading
and set this to false to stop the
loading nonetheless with that out of the
way we can create this register user for
meetup mutation next so I'll go up to my
meetups and maybe here at the beginning
tube I'll add this meetup where I get
the state and the payload and now the
question is what do I want to do in this
mutation well I first of all want to
extract the ID off the meetup which was
registered or for which the user
registered so I've extracted from the
payload from the ID field which will be
available because I passed two fields ID
and the firebase key and the ID is the
meetup ID for which the user registered
so with that we'll have that available
in our meetup now I will also check if
the user is registered in there because
if I try to register for a meetup I
somehow am already registered in I can't
just cancel this mutation I don't want
to add this registration again now
theoretically you should not be able to
trigger this mutation if you already are
registered but still extra security so
we'll check if state user registered
oops
registered meetups and here use the same
logic from before if find in index for
the given meetup here if the idea of the
given meetup is basically the same as
the ID for which I want to register if
that's greater or equal than serum then
I know I always already have a
registration and I can't just return
without doing anything else because then
I would try to register for a meetup I
already am registered for in uppercase s
if I pass this check so if I don't make
it into DF statement I can add this new
registration so then I will reach out to
my user on the state and use registered
meetups to push this new ID onto it so
this shall now or this now make sure
that I add it I will now also use my
user
and at firebase keys here access that ID
that property and store for the given ID
D payload firebase key so that my
registered user has a property called FB
keys which I add here for which I stored
the meetup ID as a property and the
firebase key as a value so I have key
value pairs with meetup IDs and firebase
keys and if a user wants to unregister
from a given meetup I can easily look up
that meetup ID here and immediately get
the firebase ID or key off that
registration on firebase which makes it
easy to unregister that's why I add this
logic here now with that added we can
already add a new mutation for
unregistered user from meetup so for the
opposite where I will probably also get
a state and a payload and we haven't
added the action yet but why don't we
already start with mutation and there I
now want to get the registered meetups
of a user so I'll store it in a new
constant by accessing state user and
then D registered meetups so this array
and I then want to use these and splice
by finding the meetup for which the user
did unregister so here I can use
registered meetups and use find index
again this time hoping to find something
the same logic as before I'll find the
meetup for which this mutation was
triggered and if I do find something
that will give me the position off that
Meetup and that's exactly what I want to
splice so I'll splice exactly one
element the one meetup I want to remove
I all of course want to remove this key
value pair where I stored the meetup and
the registration ID and I can do this by
using the JavaScript reflect API this
has a delete property method and there I
can pass the user and firebase keys so
the property
and then I can wear the object on which
I want to delete a property and the
property is then deep meetup ID because
remember we're creating this FB keys
object as a property on that user and
there we create a new property ID which
in the end is just the ID of the
firebase of the meetup we register for
so the properties of that firebase Keys
object are meetup IDs and here I'm
accessing the firebase keys object and
I'm removing one specific property which
is the ID of the media for which I
unregistered and that of course will
also remove the value of the property
which will be the firebase key
identifying that meet up on the firebase
server which I can remove now because
this is mutation so prior to this
mutation running I'll probably already
have ran action where I got rid of that
key on firebase this is actually what
we'll add next so that this hopefully
gets a little better a little bit less
confusing so let's go down to the
actions again and here we have the
unregister from need of action now there
I first of all will of course
commit set loading and set it to true to
make sure we show a loader if you want
you and then I'll get my user by
extracting it from the getters again
remember we can get access to gathers
here too we can get this out of this
object being passed to actions so here
does this just gathers user and of
course also want to get the key the
firebase key off the Meetup
for which I want to unregister and this
is now taking advantage of this little
trick I used where I store the extra
object on the user to store my keys I
can now simply get my firebase key by
accessing the user and there the
firebase Keys object and there the
payload which is to meet up I want to
register for and again one final time
since the properties of that firebase
keys object are the meetup IDs the user
is registered for I will find this
meetup there and then I get back as a
value the fire-based key off that
registration and that registration is
what I want to delete now first of all I
should check if user has firebase keys
if this is faulty then I should return
because then I would try to access
something which isn't there that would
be strange but still this would then
throw an error this next line so don't
get there without checking if firebase
Keys exists here however I can safely
extract my firebase key and with that I
can reach out to the firebase database
add a reference to users and then to my
user ID
remember we stored all the registrations
under users user ID registrations so now
I'm basically rebuilding that so here we
have registrations with a plus in front
of it and there I access a shout out
node and that child node is the firebase
key I extract that because again
firebase assigned a key to the new
registration I stored that on that
firebase keys object on the user I
retrieve that here and now I'm using FB
key here to get rid of it
I get rid of it by calling remove on
this reference that's all this also
returns a promise which hopefully is
successful in which case I will commit
said loading and set it to false because
we're not loading anymore we're done and
I will commit this mutation we just
created so this unregistered user from
meetup mutation here I will commit this
in my action in the unregistered user
from u-dub action there I will pass on
the payload which is just the idea of
the meetup I wanted to unregister for
then I'll have a catch block to where I
get any potential errors here I will
lock that error and of course not only
log it I also want to stop any loading
processes several committees and set it
to false with that we worked a lot in
the story we added methods actions and
mutations for registering and unruhe
important part is this part where I
stored the key of the registration the
fire-based key of the registration which
makes it much easier for me to delete it
later on and now with that we can
continue in our web status error so now
with that we can continue in our
component where we want to dispatch an
action in register dialog we have our
confirm button where we execute on agree
and on agree we of course want to
dispatch the while which action that
depends on the registration status so an
on agree I check if this user is
registered so if my computer property
here returns true or false if it is true
then I want to dispatch a special action
which one well if I am registered I want
to dispatch the unregistered user from
meetup action and I'll pass the meetup
ID as a payload else if the user is not
registered
I want to dispatch register user for
Meetup and also pass my meetup ID of
course like that now we can still find
Eunice but let's save this which error
am I getting here probably some linting
error semicolon in line 81 in my store
yeah we shouldn't add a semi colon here
let's see if this now is done it is so
let's reload this page here and yes I am
the creator of this meetup we'll add the
logic to prevent this later for now let
me click register and confirm and we get
an error cannot set property of
undefined that comes from us accessing
in the store the fire-based keys
property on the user in this register
for meetup mutation here I try to set an
ID property but firebase Keys is a
proper
Gyan the user which doesn't exist yet
now how can we fix that I simply need to
make sure that every user has that so
I'll take it and I want to add it to
newly created users too now right now I
only create users here in users signup
and of course in you to sign in and Auto
sign in where I call set user so in the
end it's always set user now if we
scroll all the way up to mutations where
we have set user I set it equal to
payload so I need to add it that payload
before I pass it here so scrolling down
again here whenever we set the user I
have to add my Facebook keys element
which should be an empty object simply
I'll do it not only here in sign user up
I'll also do it in sign user in to
initialize the firebase keys property
and an auto sign in I of course also
need to add it let me distribute this or
multiple lines to make it easier to read
with that every user should have that
and now when there's reloads here this
should work by the way one thing we can
see though on firebase is that the
addition here on firebase did work we
created a new registration here this is
our ID of that registration created by a
firebase whereas this here is the ID of
our meetup this key here and that's
exactly that key value pair we have on
firebase and I want to inversely
replicate this on my client so that I
can easily delete firebase registrations
so I'll manually delete it for now and
try this again I reloaded the page so
let's register again this looks much
better it was added here now we also see
on register and if I click this and
confirm now we get an error database ref
is not a function well I assume that in
my Mutai in my action here I accessed
here are mutations database without
calling it like a function so make sure
to call database only firebase object
always like a function
so with that let's go back and reload
this page now we see register that has
of course a good reason if we load this
page new we load the application from
scratch and we have no code at all to
fetch our existing registrations from
firebase on firebase we know that this
user is registered for this meetup but
in our front-end application how would
we know we always initialize registered
meetups as an empty array check our
actions here when we sign the user app
empty array here signing in empty array
Auto sign in empty array so in our
application the user is never signed in
it's never registered for any meetup I
should say that's why reloading the page
well makes it appear as if we were
inside in so I'll manually delete this
registration on firebase again and
register myself again now of course we
see unregistered because now the page
didn't reload we are still in the same
application and we manually edit this
registration now now let's try
unregistering and this also seems to
have worked though removing it from
firebase didn't work we removed it from
our local store for sure but in firebase
I still see the subscription so let's
investigate why this isn't gone
dissolution can be found in our store
again in the unregistered user from
media of action we reach out to users
user ID registrations and remove that
key so far so good
unfortunately we store the key under
registration not registrations it should
be registration Shen's though so simple
typo here and with that if I now save
this clear my firebase data from hand
the user's data here and now I try this
again and I register now on firebase we
see it's under registrations and now if
I unregister here we also see it gets
deleted here on firebase so this is now
working as expected and this was a lot
of new content with all this
raishin and unn registration here now
what I want to do next is I want to make
sure that whatever we initially load our
application we fetch all that
registration data for the user so this
is what I'll have a look at in the next
video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>