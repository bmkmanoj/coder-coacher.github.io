<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>SENDING THE JWT WITH VUE.JS | Laravel + Angular 2 / Vue.js 2 | Coder Coacher - Coaching Coders</title><meta content="SENDING THE JWT WITH VUE.JS | Laravel + Angular 2 / Vue.js 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>SENDING THE JWT WITH VUE.JS | Laravel + Angular 2 / Vue.js 2</b></h2><h5 class="post__date">2017-03-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yJ0Wqnoa6s4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back to this series on creating
a lateral back-end and connecting it to
angler or view chest front-end we
already finished back in part we added
authentication to it and we also already
finished the angular front-end part
we're also pretty far regarding the view
chase front-end there we are able to
assign a user up and in and we're
storing the token we're getting back
from the server now we want to send this
token with requests which acts protected
resources on our server to be able to
access them again if we are
authenticated now since we already store
the token with this line of code here
and we are able to sign in here with our
sign-in form we got everything we need
you authenticate ourselves to the server
and let them know that we are indeed
allowed to access protected resources so
the missing piece for us is to send this
token with requests that access
protected resources now if we have a
look at our back-end here in our routes
file and the API PHP folder we see which
routes are protected throughout which
creates a new quote which updates a
quote or deletes a quote getting quotes
is not protected so therefore for these
free routes here we need to send this
token from our front-end now we do
access these routes either from our
quote component here where we have to
delete and update methods or from the
new quote method now I will quickly ask
the code we need to use here in these
components and I will start in a new
quote dot view file now the simple thing
we need to do is here and unsubmitted
where we try to create a new quote we
need to get our token and we can get it
from all local storage because that's
where we stored it we use the key token
so by getting an item with that key we
should get a token where we get
undefined if no token is stored now this
is fine if we get undefined because we
will check if a token is present on our
back-end so only if
touken is present and only if that token
is valid only in this case are we
allowed to continue so here where we
sent this post request we now need to
add this token and we do this by simply
adding a query parameter to it so at the
end of this route I'll add a query
parameter which is called token and the
value is of course
well our token we fetch here and this is
all this well send token and allow us to
create a new quote now since this is all
it takes
let's see if it works if I go back to my
application here and I sign in with my
assigning credentials this seems to work
now let me go to the new quote page and
let's create a new quote here and hit
submit and this looks pretty pretty good
we get to created status text here and
if I get my quotes we see the new quote
now if I try to delete that it is
deleted here of course because we update
our front-end before waiting on a
response on the back end to give this
instant reaction to the user but you
will see that we got an error message
and if we have a look at this error
message here in the network tab you see
that in the end it just says token not
provided now of course we could also
print this more cleanly and prettily in
our front end here when we catch it
there is something you could try
implementing as a bonus task I want to
come back to how to add the token to not
get this error message so since we
already implemented this logic here in
our update quote excuse me in our new
quote component I will go to the quote
component where we have to delete and
update methods and you could also create
a mix in to share this code across all
components where you need to have this
token retrieval code or create a shared
method in this component here I will be
very explicit and add this token
retrieval code to both methods on delete
and on update and then we need to add
this query parameter very importantly
after this ID though so not here after
quote not here it
be at the end of your URL so here I will
add a new string question mark token
equals and then well equals our token
and I will copy this and paste it into
this purge request as well at the very
end
now with this token should be sent to
all requests where we need to send it
and keep in mind if you don't have the
token will be undefined hence you will
get an error and not be able to access
this and now with that if I reload my
application and get my quotes you see
it's still there let's try to edit it
simply like this hit save and this looks
good
we're getting status 200 and if I reload
the app and reload my quotes you see
that indeed quote or that change was
stored in the database and now if I
delete it this looks good too we're
getting a success message and if I try
to get my quotes again it's not coming
back because indeed it was deleted so
sending the token from our view jeaious
application works too and with that we
implemented all I wanted to implement in
this tiny serious we have a lateral
back-end serving as a restful server
where we have a couple of routes here
which target appropriate controller
actions when we validate our input and
that store quotes or create a user or
assign a user in and sent back to stokin
we get route protection place to prevent
access to some well sensible routes from
unauthenticated users and on the front
and we finish both our angular and our
view KS application of course these are
very basic applications and you can
approve them both when it comes to the
look of it and the features they offer
but what did you offer are a lot of key
features you will probably need in your
projects accessing your restful api
sending requests or post requests you
create new quotes or put or delete
requests or a get request and also
authentication how to implement this how
to manage to token and then finally how
to allow users to sign up and sign in to
be
able to access your protected resources
so a lot of things covered I hope you'll
join me in future serious to see you
there bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>