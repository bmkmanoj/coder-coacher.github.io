<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel 5.2 PHP Build  a social network - Updating DB &amp; View | Coder Coacher - Coaching Coders</title><meta content="Laravel 5.2 PHP Build  a social network - Updating DB &amp; View - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel 5.2 PHP Build  a social network - Updating DB &amp; View</b></h2><h5 class="post__date">2016-03-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xiCk5OGCdCE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back now we're finally on the
way to finishing this edit post section
in this video we'll take care that the
whole added post thing is working once
we're finished here so we're at the
point we close this console where we
were passing the post content the body
here and the ID to the router now the
only thing we have left to do is to
actually create a controller function
which will add at the post in a database
so go to my controllers and it was
clearly a shell for a boost controller
so in here I want to add a function here
public function function post edit post
and this again will request and then
inside this function I first want to
validate this request because suppose
could be empty this validate request and
now let's create a rules and the only
rule I have is that the body is required
and you might ask okay it's a it's an HX
request what happens if validation fails
well in this case we will also return
will return it Jason or check with well
the errors regarding to this fail what
we're living this applications will not
have these errors weren't out putting
them at least for a moment but we won't
continue we won't we won't update the UI
so the user will see that the changes
have not been written to the database
if you pass validation what I don't want
to do this I want to get my post and we
have to post ID passed into this
function post will be just getting it
through the post eloquent model here and
we can just find the request post ID
we're passing opposed to being finds
just a handy function to use our post
model which is directly mapped to the
database who element too well to find
this ID were passing into here
we gotta post Europe and now what we
want to do is edit this post so for us
all just said the body of this post
equal to the new body who passed in here
and this is all I have to do right
that's the only thing we can add it so
they're after
I'm calling post update not safe we're
not saving it as a new post were
updating the existing post very
important after this I can return your
response which Jason I'm here I want to
really hurry a Charles would object
so yeah I'm pulling this up very well
we'll just send a message post edited
something like this so this is the
function we have you're now in our route
Red Hook this function up there rebel
get rid of all this array here say which
actually should be useful controllers
few so obviously we're in there whose
control here at coast added hose and
this should have a name off we'll add it
again so we've all seen that before now
we're passing this to a real functioning
controller this will validate it and
invalidation succeeds it will edit it if
it's not succeed succeed while it won't
edited so to actually see something let
me go here and now I'm just outputting a
string of five version of whatever we're
getting back so that we can see what
happens if we well don't pass validation
so let me reload here and move my dev
tools like edit and save changes you'll
see we get this message post edited now
let's see a new posts as many as here
and it was edited we don't see it here
we go
for a moment here but now I see was
successfully edited in the database
otherwise it would not appear now
because we're fetching the stay or data
from the database
each time we refreshing was paid right
so this is cool this Maurice know what
happens if this is an empty field when
we get an error here we got the 422
error message and so now if we reload we
see nothing happened it well did not
pass and that was all we're doing for
now so the last thing is when we added
this we want to close this model and
instantly update our post here right
this is how it should feel
now we don't want to reload our page and
therefore he changed the text on the
currently active page when we
successfully updated our data in the in
the database I will you know do this in
this dumb function here where I know it
will only get if we have successfully
passed validation now I might get there
even though there is an error in the
database but that's very unlikely in our
case here and it would of course be easy
to implement some functionality to check
if we're actually successful or not so
in this case we're going to say when
we're inside the stomach whole bag we're
good to go
and data has been updated in this case I
then want you change the post body here
this text here basically to the new text
to do this I will create a new variable
here at the top okay I call it post body
element so to knowledge beginning and I
will initialize it here post body
element should just be this year so
about the text but the pure element and
I will obviously then use post body
element here and then down here I can
use jQuery pass this post body element
variable into it and I call the text
function to output some text now the
text I want to output should be sent
back from the post controller now for
you
yes I will edit this message here no
longer same thing pick a message but
instead let's say we're sending back a
new body property which is set equal to
post body so that's definitely the post
body were writing into database and
therefore I'm sending it back to the
Chawla script here obviously you could
also implement other ways of handling
this you could update it as soon as you
click this button here for example
because you might say hey I'm sure it
works and we do this kind of eager or
optimistic
updating else so you will see doesn't
matter what publications are not because
normally our database access would
obviously take some time and maybe we
don't want to use to wait that long so
this would be pro q better idea but yeah
this will be very easy to implement you
which just updated right away once it
clicks the Save button
we're doing it where we're getting back
our data now in this case I will access
my message element your new body was
like all right new body property which
will be exactly the text we stored in a
database as the new body once it's done
let's try it cuz I reload my page click
Edit and you posts enter something yeah
as you see it updated all you fingers I
want to close the model I can do this
here in the done functions well let's
say I was just target my edit model and
here I can call modal him know smooth
hide so let's try if this work we should
here safe and smooth closes poses
updated here and also as you can see we
reload this page in the database so this
is we can edit our post was quite a lot
of work now can and then delete them
also
only edited leader all posts oh that's
one thing we should edit maybe here a
post cooler this check we have here when
deleting posts we should also implement
implemented here or were editing post to
check if the current user is the user
who created this post very important
thing so now we're good to go
everything has been set here see in the
next videos bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>