<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel 5.2 PHP Build  a social network - Input Validation | Coder Coacher - Coaching Coders</title><meta content="Laravel 5.2 PHP Build  a social network - Input Validation - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel 5.2 PHP Build  a social network - Input Validation</b></h2><h5 class="post__date">2016-02-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gybCjXYBgNA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everyone welcome back in the last video
we finished our login and sign up
section so that our users are now able
to sign up and login we have to open
issues with this process right now one
is we're not validating any of the input
we're receiving so well we could not
check if the username or the email
address someone enters is already taken
or if an empty login form was submitted
the second issue we have is well we
don't protect our dashboard in any way
right so anyone could access it we
should fix those two issues I want you
to start with validating the user input
in my user controller for both to sign
up and the login form the cool thing is
letter well offers us
nice nice helpers at this point as it
does with quite a lot of things and well
I'm going to use these this help we're
we're getting here so the help I'm
talking of is a special validate method
we can call on any controller so here in
this controller I just call this and
then validate and this will access this
validate helper method which we inherit
from our base controller and inside here
or inside this method I have to pass two
arguments the first is just a request
which we are getting here through
dependency injection and the set the
second is an array of rules which you
want to use on this validation now for
to sign up if we have a look at the
Welcome page here we want to make sure
that the email field contains a valid
email address and that this amount
hasn't already been taken our database
now we also want to make sure that the
first name field is not empty and let's
say we want to limit
number of characters here to 120 or
something like that and the password
should also not be empty and should also
be at least let's say four characters
long so to do this I'm specifying these
rules here in my user controller and
this works the following way
first I specify the as a key as a string
the name of the field for which these
following rules should be applied and
this will be for example email so I'm
now creating the rules for this email
field and then the value here is another
string very well then list the rules
separated by a pipe symbol now you might
ask but how do I describe the rules
there angular 2 ships with a lot of
built-in rules which really cover in my
experience pretty much all the use cases
you have with inputs so here this email
I want to be in an email format well
cool thing is we got this email rule
here in level we also want it to be
unique in a database cool thing is I can
use the unique rule unique and then I
specify in which database well this
should be users so in the users database
which is the only or table I should say
which table in the users table which is
the only table we have so far this
should be unique now this only works if
the email field also is called email in
our table otherwise angle you would not
be able engli to level would not be able
to identify it correctly but in this
case it is called email so this works ok
now the first name should be we said
required oh that is also something which
applies to email which should be
required also another rule here required
and it should have a maximum of 120
characters we said so we use the max
rule
followed by a colon and then the
of characters so max 120 and the
password should also be required and it
should have a min minimum character
count of 4 now I save this now in my
signup page I will try to enter an email
address we already have which is test
test calm and well the rest doesn't
really matter password I will supply 1
which is long enough and if I click
Submit
well we're redirected back which is a
good sign
but we don't get any error message so
let's change this we want to see what we
did wrong right so in my welcome view
here
I'm doing this in a very easy way here
I'll just add and you row at the very
top with yeah with just an average
column here and inside this column I
will have an unordered list where I will
loop through all the errors I got now I
only want to display the section if we
have any errors therefore I use the
plate templating syntax here and I'll
insert an if statement here and the
condition for this if statement will be
if count errors greater than 0 so errors
is a variable which will always get
passed to our to our fuse and I should
say that always is only true if our
routes to those fuse are placed in this
Web middleware otherwise if we place
them outside they ever s with mm-hmm
excusing the errors variable will not be
available but since we're in the smell
aware we should have it available and
then I know ok we have more than 0
errors so we have errors I will output
this block and here I will
loop through all the errors by using for
each errors all as error so I have to
access this all function here to really
access an array of output little arrows
and let me close this for each section
and between these for each blocks I'll
put a list element which just holds this
error with a dollar sign so let's save
doesn't try it just real urge and let me
enter again my email address and
something here the email has already
been taken that's exactly the kind of
error message we wanted now let's try to
submit an empty form
well now we're being told that all the
fields are required now let's try to
enter a password which is only two
characters long now we got that it must
be at least four characters so does this
working great and we can't submit a
wrong form and as you see that's really
easy to achieve with just this block
here and this little code block so very
very easy now let me just copy that and
paste it here in my sign-in controller
or my sign in action and we don't have
to first name here the email also
doesn't have to be unique because we're
just logging in but it should be
required and a password should be
required so basically both fields have
should only be required because if they
are correct as something we're checking
here when we're trying to login the user
we just want to make sure we're not
getting an empty for so this is all
after you because I got my error log
already set up here so let's reload this
page and try to submit an empty form and
now we get that this is required now if
we submit any here we don't get
an error we're not logged in because
while our credentials were wrong but
we're not getting an error so our
validation is working great here but we
have one problem let's say we enter a
correct email address and our correct
first name but we enter a password which
is too short now if we submit we get the
error messages well okay this was also
taken but everything is gone our whole
forum is empty now that is very annoying
because we don't want to re-enter the
fields which were correct right well
good thing is we can fix this in our
form here I'm going to add a value field
to my input so to the inserter and then
add value just into this field and value
I want to enter lives in a plate
template expression and is basically
another helper function we can use we
access through the request for Sayed and
here we have request old and inside the
parentheses I have to specify the name
of the yells field now if we save this
and reload our phone and I enter
something here and now I submit this you
see it's still there because what this
command does it is it looks if we still
have a value in our old requests and
requests the last sent and if we do well
it outputs it there so this is how Larry
will allows us to make sure that if a
request has been sent which has been
kind of rejected due to validation we
still are able to use the values of this
old request to not require you our user
to re-enter everything so I'm just going
to copy that and just change the value
in the parentheses for each field
well the password yeah let's let's do it
thank you because I find it really
annoying on forms where you
have to reenter your password every time
you make a mistake when setting it up so
that's that and now here the password -
so now we got our validation much more
user friendly now there is one more
thing we can add just some visual sugar
well we could also enhance the visual
effects of our of our error here let's
see if I do like four that looks better
let's see what I can do
call mg offset for now that should look
better I guess so but one other thing we
can do to make it look better is we can
go to our input field here and here we
have our class full control now we can
also add another class here and we will
dynamically add it so I will use my
blade templating expression here and I
will say if our errors so does this the
errors variable from from here if this
errors bag it's basically a bag full of
messages if this has an error for the
field email check this by using the hash
function and pass in the name of the
field if this is the case I want to add
the has error class which is defined in
bootstrap our file otherwise I won't add
anything
so let's reload this and I have to
correct myself do you have to paste it
into here
so that it was correct in the bootstrap
environment now if I reload this page
and hit submit you see that we now get
this red border around my wrong input
field so let me just add this
for all the inputs obviously you have to
replace the value you're checking on and
down here too and while it was already
email I guess here for password save
this now if you reload well now we get
all this nice styling here so that's how
validation level works really easy to
implement a lot of flexibility with all
the different rules we can use Nazz you
can see it's really easy to manipulate
our ORD on the deck document the few we
render to the user
- so hope this was helpful and see you
in the next videos bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>