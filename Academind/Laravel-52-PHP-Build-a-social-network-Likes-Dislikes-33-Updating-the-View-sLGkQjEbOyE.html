<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel 5.2 PHP Build  a social network - Likes &amp; Dislikes (3/3 - Updating the View) | Coder Coacher - Coaching Coders</title><meta content="Laravel 5.2 PHP Build  a social network - Likes &amp; Dislikes (3/3 - Updating the View) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel 5.2 PHP Build  a social network - Likes &amp; Dislikes (3/3 - Updating the View)</b></h2><h5 class="post__date">2016-03-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sLGkQjEbOyE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back we got all the
functionality we need to like or dislike
posts now what I want to do is I want to
update our or Dom I want to update what
we actually see here because right now
we get no way of seeing if we like or
dislike this post I will start in the
dashboard to update it when we reload
this page as I said you also want to
implement the functionality to update it
directly after we get back
well the info that we successfully
finished our Ajax request but also of
course once you display the correct
thing when this view is loaded now this
will be a or will probably look a bit
more complicated but I will explain
detailed what we're doing now I'm
replacing this like text here with a
literal template expression and I will
say off user which is the currently
authenticated user I want to access all
likes this user did so all the Liza's
user did yeah and then I will again
search for a post ID which matches the
post ID of the current post we're
looping through here now I want to say
one thing right away this is fine for
this app to do it like that a better way
for a bigger app would certainly be
besides other options you might have to
do this in a controller and just added
this posts array to attach info to each
post that well this post is liked by the
currently authenticated user or not so
basically what we're doing here you
would have to attach to each post
element in the post array in the
controller to have all the logic there
and not do it here inside the post or
this you rendering but it's fine for now
and I really just want to show you how
can how you can do such queries
inside of you itself so what I'm doing
here is I'm getting if it exists there
like for this post here of this user
disel fennekin user that is the same
code as we ran in the post controller
here where we got well the like or the
info if this user liked or disliked this
post so if we get something back here we
know yep this user is actually liking or
disliking this post therefore I will
then copy this and now this is the part
where it certainly is not optimal so as
I said you might want to outsource this
to post controller so now um during this
but now accessing the like property of
this like we got back and I can't do
this here at the beginning because we
could it would get an error if label is
not able to find a post therefore we
have to Tora like excuse me therefore we
have to first check if a like exists
before we can access this like property
on this like and if this exists now we
are accessing this property and if this
is equal to 1 we know the usual likes
this post therefore I will then output
let's say you like this post
otherwise I will output like so that
well our links has just like it gives us
the options you like it I will have
another out statement here which also
says like in the case we did not find a
like on this post in the first place so
I will save this reload click like
reload again you like this post click on
this and it's back to like those
basically what I want to help now will
copy all of that and do the same here
for the dislike but of course here I'm
checking if this is 0 so if it is a
dislike and then I say let's say you
don't escape it with a backslash escaped
a quotation mark here you don't like
this post or say dislike ok so let's
load this again and I say dislike I load
this
you don't like this post and click on
this I am going back to neutral state I
can say dislike you don't like this post
now click on like reload and you see you
don't like to spoil change back just
like but like change to you like this
post so this looks exactly the way I
wanted to work now the next thing is I
want to trigger these changes from the
callback of my HX request here in this
done function so first thing I do is
inside here I will use my event target
which is just the anchor tag on which
was clicked and I yeah I then went to
change the inner text of this element so
where it basically says like or dislike
now what should this be equal to I will
check that if is like so if we're
clicking on the like button then I want
you well either rename it to you like
this post because we clicked unlike when
it said like and we didn't already like
it that I want to change it you to you
like this post or if it already said
this
because we already liked the post I want
to change it back to like now I will
just check this by using II went target
again or and let me just went to try it
again and then I will again say in our
text it's not a nurse if inner text is
equal to like so currently it's saying
like and we clicked on it so we didn't
like it before but now we do like it in
this case I want to say you like this
post same text as here in the dashboard
you like this post right it might be
copied too if the same text because it
should really be the same as it says
when loading this or refreshing this
page otherwise I know I can say like
because it didn't have the inner text
like to be like before that means it had
to say you like this post which means we
already liked it we undid it now and
therefore now it has to say like again
okay so now this is the first condition
block here where we check if it says
like but this is only relevant if we're
any is live mode to begin with if we
already or if we clicked on the like
button now we define the same for the
case that we're in the dislike mode
we're clicking the dislike button so I
will therefore again use you went target
inner text and check if it is equal to
dislike in that case I want to say you
don't
like this post otherwise I'm saying
dislike and that is exactly the same
logic as in the light case we're
checking if it currently says dislike if
it does and we clicked on this like we
know we're now disliking this post and
therefore we're changing the text of the
anchor - you don't like the post if it
didn't say dislike at the beginning we
already dislike the post and now we
undid it we deleted this entry so we
change the text back to dislike let's
save this reload click on you like this
post and you can see it changes back
like without me reloading this page
click on like again and yeah we can
toggle between these two states click on
this like you don't like this post and
so on click on like ok now you can see
we're not changing back to dislike text
in this case this only changes after
refreshing certainly not what we want to
do now to fix this little problem I will
add another statement here where a check
if I clicked on the like button and if I
did this I want to change the other
anchor so if I clicked on like I know
this is the first anchor element so I
will get the next element sibling which
you know will be the dislike anchor and
I will change its inner tacks to dislike
because I know I clicked on like so it
doesn't matter if I undid it or change
it from this light to like this button
always has to say dislike in this way or
in this case because we're never be able
to like and dislike a post at the same
time otherwise if I did not click on the
like button I will also get my event
target but now it's - oops the previous
element sibling so the anchor tag before
the dislike button which is the like
button and I will set
dis siblings innertext - like so let me
save this reload you like this post okay
dislike like dislike so now it is a
switch incorrectly and this is the like
functionally built in with a checks with
the updating of the dom without
refreshing the page and with the
functionality to not only like or not
like a post but like not like dislike or
not dislike a post so this is this now I
will see you in the next videos bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>