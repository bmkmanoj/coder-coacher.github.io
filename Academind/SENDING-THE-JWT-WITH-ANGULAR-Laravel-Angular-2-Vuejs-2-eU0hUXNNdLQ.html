<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>SENDING THE JWT WITH ANGULAR | Laravel + Angular 2 / Vue.js 2 | Coder Coacher - Coaching Coders</title><meta content="SENDING THE JWT WITH ANGULAR | Laravel + Angular 2 / Vue.js 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>SENDING THE JWT WITH ANGULAR | Laravel + Angular 2 / Vue.js 2</b></h2><h5 class="post__date">2017-02-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eU0hUXNNdLQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back and well now we already
achieved a lot in this series we are
fennec aided users we edited the back
and to allow us to authenticate users in
the first place and in the last video we
were able to sign the user in and
receive two token which of indicates to
user which allows us to authenticate for
subsequent requests now we're at this
subsequent request part now when I use
this token to well allow us to create
quotes again because right now we get
this error message so let's change
something about this and let's make sure
that we can indeed now create quotes
again to do this we already stored token
in the local storage now we need to
retrieve it when we send requests to the
server so in my quote service here we
need to attach this token for adding
quotes updating quotes or deleting
quotes and to do so we need to reach
Reeve to token so I'll add a little help
a method to my whoops to my off service
here I'll name it get token and you
could add this anywhere but I think
logically it makes sense to sell in the
off service and all I will do here is I
will return local storage get item
tokens although try to fetch this token
from the local storage of course this is
undefined if we don't have two token
store it there so with this in place I
can go to the quote service and inject
my off service here to get access to
this newly created method so the off
service is added here but that we're now
able to get D token from the off service
make sure to add this import here at the
top though in the quote service that is
now and now for adding a quote I need to
get to token so I can reach out to off
service and simply call get token there
and this is even the token or null if we
don't have a token whatever it is if it
is null well we will get an error
anyways when trying to reach out to the
back end so in this case here when we
get the token we now need to add adhere
to our request so I will add a query
parameter token equal
and then well equals our token which you
just fetched from the local storage some
of that we're trying to attach the token
to our request and this is how you saw a
few lectures earlier how we do it we add
it as a query parameter at the end of
our URL well with that we now send the
token to the back end we we now are able
to hopefully create posts again or
quotes again let's see it in action I
already have a quote token stored in a
local storage from the last video let's
now go to add a new quote and new quote
again and let's hit submit and an open
on a new window but I got this quote
created alert so this seems to work
let's have a look at the database figure
two quotes here it is a new quote again
so indeed we were able to create this
quote with the token we passed so this
works as it should now let's quickly add
it for all the other methods here too
so for updating a quote here we should
also at the end after the ID here we
should also then add to token query
parameter and pass the token so make
sure to do this after the idea after /id
add question mark token equals and then
your token and do the same for deleting
also here after the ID because it should
be the last thing you have in a string
token equals and then your token and
this should allow you to delete an
update post too now of course we also
should implement some error handling for
example if we get an error that the
token did expire and you remember
probably that we do send or that the JWT
middleware does send such messages if
that is actually the case so that is
something you should do in a real app
implement some error handling here
handle the case that you're not getting
a successful response but instead that
you're getting an error and show an
appropriate message to user like you
need to sign in again I won't do it here
for now maybe add later
see but it's something to keep in mind
right now we will only see an error in
the console and of course the user
typically doesn't look at the console
and shouldn't
so definitely implement your own error
handling but I want to check if it works
for updating and deleting quoting quotes
if the token is sent there so let's go
to quotes and get all the quotes whoops
get quotes and yeah let's add it just
quote here a new quote 20 20 to 80 or 2
- 2 - I mean but save looks good no
error message if I reload here get
quotes again that looks good and if I
now delete it dad seems to work to quote
delete at let's again reload and see if
there really gone looks great
with that we changed our angle to front
and to now also allow us to sign users
up sign users in stored a token and use
that token to then do something on the
server and authenticate ourselves and
you also saw that we are protected
against invalid tokens or no tokens
being present and this is how you
typically authenticate with a single
page application and the API in the
background now next I will move on to do
the same for view chairs of course feel
free to improve this app to add better
error handling improve the styling a
little bit to make it look nicer or
whatever you wanna do but these are the
basics which should get you started I'll
see you in the next videos bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>