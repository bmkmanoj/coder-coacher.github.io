<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Vue Image Upload Made Easy | Coder Coacher - Coaching Coders</title><meta content="Vue Image Upload Made Easy - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Vue Image Upload Made Easy</b></h2><h5 class="post__date">2018-02-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VqnJwh6E9ak" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to this video great to have you
here in this video I want to show you
how you can upload files from within
your view application so how you can
allow the user to select a file and then
ship it to some restful api endpoint you
got somewhere let's dive right into it
of course to demonstrate file upload we
need a view application so I created a
new one with the view CLI I used the web
pack template and I didn't change
anything now in this application we by
default get this app to view file where
we simply got router installed load this
hello world page and this is to page all
Rickon so I'll simply clean everything
in there so that I just have this diff
and you could change the styling and
everything but I don't care I want to
quickly add my file input field add a
button that allows me to upload it and
show you how to upload a file let's
start simple though let's start by
adding an input field of type file which
is a default HTML element nothing
viewers about it the view part is that I
will now add an event listener at change
that will trigger whenever the user
selects a new file and then I want to
execute let's say on file select that
this method now I will have to add this
in my view instance in this component
here so I'll add the methods object on
file selected and there I will actually
get my event and let's for now simply
log it to the console to see what's
inside of it if I now save everything
and I go back to my app you can ignore
that warning with the extra space that's
missing and simply choose a file here if
I click this and add a file you see an
event is output down there and this file
here is actually holding the normal
event object with the target which is
the file input when we got one useful
property the files property which is an
array of all the files that the user
chose you could add a multi-select tool
here to here I only got one file so it's
the first element in this array and that
is the file we can upload so the goal is
to then store that file right so in my
data object here I'll replace message
with selected file and initially that's
now an on file selected though I'll set
this selected file equal to event and
then it was tired
get files and then there first the first
element in there this is the file the
user selected now we stored it here but
we want to upload it right now for that
I will add a button where I will say
upload and where I will add a click
listener to execute on upload or
whatever name you want to give to this
method so I'll then add my own upload
method here which takes no arguments and
here I now want to send an HTTP request
choose some API endpoint that accepts
the file and we could send the file in
both a binary format or as I will do it
as part of foreign data which is a
JavaScript object
meant to mix normal fields and files and
pack it all into one request body and
send it to the backend now you might
have your own back-end I will use a
function of firebase cloud function I
built in this video link assault in the
video description this firebase cloud
function accepts foreign data and stores
a file on the firebase cloud storage so
that is what I will use and for that I
will access my firebase console of that
project and first of all remove all
files I have in the storage so that we
can really see that it worked and then I
will go to functions here are all the
functions I created and I will use that
endpoint of my HTTP function now you
won't be able to use that because that
project will have been deleted by the
time you're viewing this but you can of
course build your own function by
following that video I mentioned so here
I'll copy that endpoint and with that we
need to send a request right and how do
we do that I will install a special
package for this I will use NPM for that
and payment stall - - save Axios X this
is a third-party package not related to
view which simply makes it easy for us
to send Ajax requests that's the idea
behind access thereafter I'll restart my
development server and now I can simply
import
Axios from Axios in this view component
here
now with that import that I want to use
it here in the upload on upload function
I can use the post method to send a post
request and here I first of all need to
specify the URL which is the URL I just
copied the second part Denis that I will
need to set the data I want to send and
as I said I want to send form data
because this is the format my back-end
here expects so I'll trade a new
constant FD initialize a new form data
object form data is a default JavaScript
object we don't need to import or
install that and that I can call append
to append a new piece of data to that
form data object I'll give it a name of
image name is up to you and the value
will be this selected file so the file
the user picked which we then stored and
I'll also keep the file name I'll take
it from this selected file there will be
a knight name property which is the
original file name with that we get the
form data prepared we can now simply add
it as a second argument here and then
chain up then call because the exes will
return a promise and there we should
eventually get a response which I'll
simply log to the console if I save this
and we reload our application if I now
choose my file here and I clear the
console and then hit upload it takes a
while but then we should see a response
here this status code 200 looks good
data holds ade worked datas the response
my firebase back and gives me if it
worked and if we visit the storage on my
firebase back-end I indeed see the file
and another fall because of an hour
cloud function which automatically
transformed that file but this is now
working this is the file I picked and I
uploaded
now that's great but let's enhance this
let's say we want to see the progress
whilst this is uploading especially
useful for bigger fault of course exes
makes this easy we can pass a third
argument to the post method this is an
argument where we can configure this
request by passing a JavaScript object
and there we can add the on upload
progress event handler or so to say here
we simply store a function where we get
the upload event and now we can simply
console.log upload progress and the
upload event has two important fields
the first one is the loaded field this
is holding a number in bytes how much we
uploaded we can divide this by the
second important field upload event
total that is the total amount we wanna
upload so by dividing loaded by total we
get the percentage essentially now we
can use math round on that but not on
that like this but instead let's
multiply it by 100 to get a full integer
and I will then simply append percent at
the end now this should also give me
percentages was it's uploading the file
let's try this out let's clear the
console and pick a file and let's press
upload and you see we get the upload
progress percentages and then after a
while also the response so that's pretty
cool and this is how easy it is to
upload a file now whenever the thing you
sometimes wanted you is you want to hide
that input element and instead have some
button where you maybe say take file and
that button should then trigger this
input you can do this by first of all
setting the style and set display to non
here to not show this input and now we
want to basically proxy a click on this
button to this input here now this is
done relatively easy we can use a
feature by view chess called refs we can
add the ref key
your and assign this a name at which we
then can access this element like file
input and then on the button we can add
a click listener and set is equal to
dollar sign refs which is an object in
which view manages all the refs you
setup with the ref key and then file
input and now I can simply execute click
here to proxy my click on the button to
that input F as if the user had directly
clicked on it now if I save this I clear
the console and I click on pick file I
open that file picker through the button
and I can still upload that file just as
before and this is actually it this is
how easy we can implement all kinds of
things related to file upload in of the
you app so I hope this was helpful it
helps you with your next project would
be awesome to welcome you to feature
videos have a great time bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>