<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Connecting a SPA to a Serverless API | Amazon Web Services BASICS | Coder Coacher - Coaching Coders</title><meta content="Connecting a SPA to a Serverless API | Amazon Web Services BASICS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Connecting a SPA to a Serverless API | Amazon Web Services BASICS</b></h2><h5 class="post__date">2017-07-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eracVWTSqLs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi welcome to this video my name is
Maximilian and in this video I want to
show you how you can connect your a
single page application in this case an
angular application to your server less
API run on AWS using AWS lambda and API
gateway if you didn't have a chance yet
make sure to view the first video of
this while of these two videos here
where I do explain what lambda is and
how you actually set up your very simple
restful api in a server this way with
that let's get started
q get started we of course need an
application we can connect and for that
I provided you with this github repo AWS
through last time we have a link can be
found in the video description of course
now you can simply clone this repo to
follow along it's an angular application
which well does the following let me
show you what it does
inside this project once you did clone
it run ng surf or NPM starts to use the
local CLI version and once this did
start let's visit the application what
you can see is it's loading and it
displays as a chart where everything all
the data points are exactly equal at 30
now the chart was created with with
charge J s so if you were interested in
diving into this you can start by
checking out my code it's a very
convenient library for developing charts
and certainly possible that I'll cover
it on this channel in the future too
this charge isn't your complex as you
can see this configuration your
basically creates the chart there isn't
more to it let me shrink it a little bit
but the chart is not really what I focus
on in this video but I want to populate
this chart with useful data right now
what I'm doing is I'm subscribing cue
fetch data method in my topics service
and I'm getting the chart data some data
points which are defined in this model
I'm getting the chart data from that
service and here I simply hard-coded it
into year so here I'm simply setting up
my own observable which I'm returning
which returns means I'm done dummy data
and I have a timeout function to
simulate that I'm actually fetching this
asynchronously now that sniper core is
not that impressive or useful so why
don't we comment this out and instead
try to reach out to a real server using
the get method provided by angular's
HTTP service we do have a real server or
a real API at least we don't really
manage the server we created it in the
last video of this series or of this
miniseries here so make sure to check
out this video
now I of course already have that here
this is broken for now because I'm not
returning data here under API gateway
this is this endpoint 1/2 simple test
and under lambda here whoops we have a
function which right now only returns a
string wouldn't it be nice if that
function would return some real data so
why don't we make this function return
some data so that we can reach out to
our API endpoint here for that let me
create or add some code here on a med
response state data and that should be
an array of data points now this array
can be structured in whatever way you
want to structure it here on keep it
close to what I actually need to use in
my application and therefore I can
really just copy these objects I just
create their these dummy objects and
paste them in there make sure to of
course
remove the comments because you don't
want to have that commented out and let
me quickly whoops restructure this looks
better and now let's replace this with
the actual values you gave me when we
asked you for your favorite topics so
I'll quickly fill this in because there
we have 42 for view 28 if you wanted to
see a full project and there will be one
soon electron 26 angular that is 25 and
level was 21 now we get a response array
and with that all we have to do is
return it here instead of our string now
this lambda function all of a sudden
returns an array all we have to do is
hit save and that's it we don't need to
go back to API gateway because what did
we do there we created a resource and a
method and we forwarded the request to
this lambda function where we triggered
this lambda function whenever a request
came in and then it's still the case
that we don't need to adjust anything we
change the code which gets executed but
we didn't change the logic when it gets
executed so no need to change
a gateway with that we're returning an
array and we go back to the angular
application
here I'm expecting a result and there
I'm executed to chase a method and that
is the normal angular code which I can
use to get the data returned by response
transform it into a JavaScript object
and since I know because I wrote the API
we did it a second ago that the data
will be an array of objects in this
format and there is exactly the exactly
the data and key format I need I don't
need to do anything else you could of
course use other observable operators
here I do have some observable videos on
this channel after all however here it
is in the format I well I need it and
therefore I will go back to API gateway
but only to fetch that URL again here on
simple API let's click on stages data
set deployed snapshot of our API so to
say let's click get here on that
resource and copy dead link address
let's now enter it here and it's safe
and go back to our running angular
application as you can see it's still
spinning so let's open up the console
and what we see here is that we got a
course err or no access control allow
origin header is present on the resource
and what this tells us is that by
default and that is a default security
mechanism we're not allowed to access
resources on a different server than the
one we're sending requests from so here
we're sending requests from local host
localhost 4200 and we're sending them to
deep well to that URL here and that is
prevented by default of course we want
to allow it though so we can do this on
API gateway and now we need have to
change something we can simply select
our resource and what we need to do to
allow us access is we need to send back
the right headers we could do this
manually and that is all the one thing I
do show you in a much more complete
udemy course I already mention in the
last video but what we also can do very
convenient is we can
actions and ale Accords just make sure
that you have the resource selected for
which you want to enable course so for
all the endpoints connected to that
resource so here I click enable course
now we see which address will get added
and I can click the name of course we
get a warning that this will overwrite
the default headers we might have set so
that it overrides any settings you might
have added it also added this options
Methodist options endpoint
this is required for example post
requests because browsers like Chrome
send a pre-flight request so an extra
request before sending the actual post
request to check if they may send a post
request and this extra options HTTP
request also needs to be allowed by
course and that is why automatically
added this options endpoint for us with
that it should work but what's missing
well we need to redeploy the API because
we changed something and that's an
interesting thing or an important thing
you need to know whenever you're working
here and resources you're not working on
the live API you only deploy snapshots
the stages so once you change something
here and you want to create a new
snapshot you have to go to actions
deploy API again choose a stage you
could either add a new one or override
the existing one of course therefore
also overwriting the old snapshot you
can roll back though with that hits
deploy and now it will take a couple of
seconds typically until this really is
life so the link didn't change the URL
is still the same and well let's give it
a try let's see if it now works looks
much better now that shard is populated
with the day that we returned in our
lambda function and how easy was that
that is how you can connect your single
page application to your API and I hope
to show you which options you have with
that it's super simple to build amazing
applications in a completely serverless
manner you don't have to take care about
managing servers provisioning them you
write your code you create your API in a
very visual way as you saw and you
to your application and that's it now as
mentioned before you want to dive deeper
check out the UDP course and there
certainly will also be some pictures on
YouTube again I'd be happy to welcome
you in the course though but of course
I'm also extremely happy to welcome you
in the next youtube videos of which
there will of course be more so see you
there bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>