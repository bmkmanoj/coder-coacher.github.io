<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node.js + Express - Tutorial - Update and Delete Data with MongoDB | Coder Coacher - Coaching Coders</title><meta content="Node.js + Express - Tutorial - Update and Delete Data with MongoDB - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node.js + Express - Tutorial - Update and Delete Data with MongoDB</b></h2><h5 class="post__date">2016-04-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-JcgwLIh0Z4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back so we're able to insert
data to get data now let's add the
functionality to update and delete it it
isn't that difficult to be honest
I'll start by copying this insert Mongo
code here and insert it here in my
update route and this update route of
course also needs to have a item so I
will add this here also copy this but we
need one more thing to identify it we
need an ID because we need to the ID of
the item which should be updated so the
item alone isn't enough because yes we
could search for the title but we might
have two items with the same title and
so on so we need a unique ID that's no
problem though it won't be submitted as
I've set up the form accordingly and it
will be found in the body of our request
and will have a name of ID and does this
because in the update form here I got
this field here ID which has the name of
ID so these are all day this is the data
I need now I'm connecting to database
but I'll replace insert one with update
one also the parameters have to be
changed I no longer just passed the item
but I passed the first parameter how to
identify deed the data to be changed and
the second parameter what the new data
should be like the third parameter the
third argument is callback here will
stay the same so the first parameter
will be a JavaScript object where I
describe the object I want to identify
so in my case here I know that I want
the ID underscore at least default ID
MongoDB inserts to be equal to the ID I
extract from the request but this would
not work because IDs in MongoDB in the
database are actually of type object ID
they are not strings and MongoDB is a
strongly typed database so types are
important
therefore I need to make this an object
ID to to do this I will scroll to the
top duplicate this line where kram one
would be and by the way this is an error
here this should be Mongo client as I
saw it did work nonetheless but it
should be Mongo client and here will
access object ID and this will be called
var object ID and now what I can do is I
can transform this ID to an object ID by
just using this variable I just created
where I access this object ID in our
MongoDB package and well use it as a
function where I pass this ID and this
will transform this ID into an object ID
which has done a correct type for
MongoDB to use it the next thing is the
data I want to change I'll have a child
object here too and I will use dollar as
set does the property name MongoDB needs
to know okay now after the colon follows
what the new item should be or what the
new item is in this case item of course
so after dollar set here I have two new
data which will replace the old data
identified with the identifier specified
here as a first argument that's very
important to get right first argument
identifies data second argument after
the set property specified specifies
what a new data should be so this will
replace any item or there will be only
one item with this ID with this item
last fingers I will update this text
here safe does restart my server and
then let's have oke I'll just copy this
ID here paste it here and give this some
title here as well as some content and
some author update this and load data as
you can see this was updated so this
worked great
next thing is last thing I want to be
able to delete data for this I will copy
this part from the update route because
I will of course also have an ID which
identifies the data what to delete but
here I will replace update 1 with delete
1 and I will get rid of the second
argument because I don't need any new
data there won't be new data we'll just
delete it
but I'll keep the first parameter which
identifies the object to be deleted and
that's really all now I just replace
this console.log here
reload let's copy this ID insert here
click delete and load data as you can
see it's gone and this is how you update
and delete no as you probably saw when I
started typing and you saw my auto
completion there are a lot more
operations you can use with MongoDB and
I recommend you just check the official
documentation for this and of course you
will see more in future videos but to be
honest as you probably saw this is kind
of annoying to do this all by hand
every time and yes we could refactor
this a bit but there are great
extensions our packages which build up
upon the default MongoDB driver and will
give us a more convenient way of
interacting with or among would it be
database and we will see this in the
future videos bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>