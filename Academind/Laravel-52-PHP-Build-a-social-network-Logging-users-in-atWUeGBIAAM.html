<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel 5.2 PHP Build  a social network - Logging users in | Coder Coacher - Coaching Coders</title><meta content="Laravel 5.2 PHP Build  a social network - Logging users in - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel 5.2 PHP Build  a social network - Logging users in</b></h2><h5 class="post__date">2016-02-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/atWUeGBIAAM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back to the next part of my
laravel series here in the last part we
actually created the logic to sign up
users so to create a user in our
database and to to handle our signup
requests we sent through this form here
so the first step to user authentication
or to you to our user management system
now in this video we're going to handle
the user login so if they already is
signed up we want to amp also implement
the method for a sign lab user to to
just log in with his email as its
password and we'll also redirect locked
in users as well as sign-up users to a
dashboard page currently not a very
pretty one but to to another page but
pretty much so let's get started
now the first thing for our
authentication to work is we need to
make a little change to our user model
so let me go to my user model file here
and in here we need to implement the
authentic cable contract that's a
contract provided by the laravel
framework which basically allows us to
use built-in level authentication
helpers so to say the of class if you
want to put it that way to easily
authenticate users so that we don't
manually have to check if the password
is equal and so on but we can use these
handle helper functions provided by
level and that's a framework is all
about it yet right so to do this I'll
implement implement the authentic cable
contract and don't forget to add this
import here so use illuminate contract
off authenticate able and now we need to
implement the methods that this contract
or this interface as it would be called
in other programming languages and needs
us to yeah implement in this class
thankfully we can use a nice little
trait wearable provides us with namely
the Authenticator bull trade now don't
mistake that with the
that for the contract we're implementing
here that's basically a trade so to put
it easily a bundle of functions we can
import into any class we create add it
yep basically in this case is all we
need to four folders authenticated
contract and this is obviously no no no
surprise or no coincidence but instead
that is how authentication and level
works and how laravel makes it easy for
us to make any of our models we of the
models we created authentic edible just
by implementing that contract and then
using this trade here which lifts any
illuminate off namespace and with those
two changes here with these two changes
we're done that's all we need to be able
to authenticate our user now we could
have used any model here we could have
had a dog modeler dot PHP file with a
dog model and a dog's database table we
would just have to implement this
contract and then implement or import
the straight here this authentic adbul
trade and we would be able to yeah to
use the dark class as our user class if
we would have used another name but user
there would have been one other change
necessary that is in our config folder
in the app PHP file here we got where is
it
now it's an hour off PHP file it changed
in layer five to two here we got this
providers area here of the users with
the driver of eloquent which is driver
we use here because eloquent is levels
over m so the way to easily access
database tales behind our models and
here we specify the model used for
authentication when we use the office
aid we will use that in a second to yet
to access
those authentication helper methods
level offers us so it is by default set
to user in the app namespace which is
exactly what we have here app folder
user is in the namespace app so this
works out of the box but if you would
have dog well we would have to rename
this to dog otherwise it would be
looking for a user model with the
authenticate able contract implemented
and we're to find one because our dog is
the class doing this so that's important
but in this case everything is working
just wanted to let you know that there
is this additional change you would have
to do if you're not using a user class
okay now for the talking the user is now
prepared let's go back to our user
controller now the first thing is I want
you automatically redirect user to the
dashboard if he signs up because then we
know yeah he is authenticated right he
is locked in so in this case I want to
create a new few here which I call
dashboard dash board put plate took PHP
and I'll just say add an h1 tag here the
dashboard we're gonna fill this with
life later on and well we're not
redirecting back here anymore but
instead I want to basically redirect to
another route I would have to create
which is called dashboard and let me
create this route here real quick so
again here in our middleware I'm going
to create a getter out here route get
dashboard
so we'll also use a controller
functional I the user oops
user controller at get dashboard and
name will be as I just used it dashboard
don't forget a cell a semicolon so this
is prepared now back here I'll create a
new function at the top which I just
call public function get dashboard and
here all I do is return a few namely
that dashboard few H has created so we
can try this out this should already
work if I enter and you name here like
yeah let's use test so we need a unit
receiver so let's use test at gmail.com
my name first name is test and the
passwords also test so we're creative
well we got forward to the dashboard
great now let's create our side in logic
that we want to execute when we try to
sign in here first we will try to route
we need for this so let's start our
welcome view and hook this action here
up to it route which we still have to
create a route called sign in in our
routes folder just copying this sign up
route here really quick and then I will
just rename it to sign in in all three
places here so this is our sign in route
which we set to use our post sign-in
function here and in this function we're
now using the office aide which is
another one of those shortcuts lateral
ships with which allows us to easily
access our authentication helper methods
we access this helper method or these
helper methods floor office aide which
we import form from illuminate support
facades then see off the side
and here we got this function attempt of
attempt we'll try to log in a user with
the credentials we provide here as
argument which will be an array of your
arguments or of credentials and if the
attempt fails this will returns false
and if it succeeds it will return true
so we can basically just check this in F
condition here if off attempt so if it
is successful then we want to return our
redirect to our dashboard route and if
it fails well we just want to return a
redirect back so back to the front end
screen to the starting screen so to say
to our welcome view now here I'll pass
an array and we want to authenticate
using our email which will be stored I
will request in which you can access
through the email name because again
this is here now welcome few what we use
for an a as a name for our input field
when we input the email and here for a
password we're using the name password
and therefore in my user controller oops
I have my second parameter which is the
password obviously which I can access
through the password key in my request
array here so we can almost try out if
this voice but we've got to do seven
more things we have to add our session
token here in the login form as well
this is basically the case for every
form we're posting in Larra well we
always have to include this session
children otherwise we'll always get this
tope mismatch error message so now let's
try this out I will create a new user
here test at yahoo.com named test
password test so you see a very creative
when it comes to the names of my testing
users here so yeah that works obviously
now let's use let's use them here
ooh password of task 8 works too so we
can see in our user controller our
authentication attempt through this off
helper classroom through this office
aide and a helper class attempt here the
AL helper function was successful it
returned true and therefore we were
forwarded to our dashboard view or our
dashboard route which again returns this
view here now let's try something wrong
let's try
yeah the RAM a random password here and
you see we're just taking back to our
welcome view and this is exactly the
behavior we want here so this works now
one more thing
let's also log in the user when he signs
up because yeah we are redirecting to
our dashboard but currently we're not
really protecting our dashboard we could
just access our dashboard by typing this
right so it's not something we have to
login and we will focus on a logic to
protect our routes soon but for now
let's at least login our user so that in
theory he would be locked in we can
access another helper method here the
login method where we just pass our user
the user which has created and this will
automatically login the user so let's
again try this and I'll be a little bit
more creative now I'll use Chris at
gmail.com
I guess this email address exists but
does really matter here and he has a
password of Chris said mintus and we're
still forward we're not getting any
error so this works otherwise would have
got an error and now we're technically
locked in not just forwarded but also
technically logged in so this is sign up
and sign in and now that we got this
ready we'll have chance to focus on
additional steps for example we want to
validate that we don't have double email
addresses in our user database right
that will be something we'll have to
and that we finally also want to create
our dashboard and the possibility to
create posts and see our peoples posts
we'll do this in the next videos see
that bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>