<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Stencil | Props, State &amp; Tons of Decorators | Coder Coacher - Coaching Coders</title><meta content="Stencil | Props, State &amp; Tons of Decorators - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Stencil | Props, State &amp; Tons of Decorators</b></h2><h5 class="post__date">2017-09-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/g4jsOCUD4lA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to this video in the last video
of this miniseries I introduced you to
stancil a nice compiler which allows you
to easily create your own web components
here's the web component we created in
the last video this little modal which
is always there now in this video I want
to add some logic that we can pass in
some data from the outside then we can
actually open and close it and improve
the styling a little bit so let's get
started with that in this video
we get our mold layer and first of all I
want to make sure that we can actually
open it that's not always there now for
dead you could go to the index.html file
and add a normal button in there a
normal HTML button where I say open
modal just like that not my model just
mold thank you now this is the button
I'll now add some script here
conveniently simply in the index.html
file so that we can have it all on one
screen
and in that script I now want to reach
out to my buttons stored in a variable
so I'll use document query selector here
to select my normal HTML button and I
will now say button add eventlistener
and add a click event listener add a
function here and then this function
won't you open the modal and alright now
we couldn't click the button because the
backdrop is always in front of it so
I'll comment out the backdrop and I
don't want to have the modal opened by
default now to make sure that the model
isn't open by default I'll go to the my
mol/s CSS file and add display non cuit
so now if I save everything we should
have a white page with only the button
in there the rest should be hidden now I
want to make sure I open the Mon when I
click the button one convenient way of
course is to simply reach out to my
modal and store it in a variable - with
queryselector and now my modal and I can
use my own custom element tag here just
like I could use button because it's a
normal HTML element now my custom
element but here to JavaScript in zone
it's like a regular element I can select
it like this and I could set my modal
excuse-me modeless the name of the
variable modal style display to block
because it's non by default block should
show it if I now save everything and I
clicked this button we see the model
without the backdrop because we
commented this out we'll work on this
but this is the modal this is one way of
doing this however there's also another
way which might be more convenient in
average
use cases would it be nice if our modal
just had something like open method we
could call I know it's a HTML element
but still maybe we could execute some
method on that open like we can call
button click on a normal HTML element to
expose such a method you can call from
outside I'll go into the modal and I
will import a new decorator it's called
method and I will use this method inside
of my class with the method decorator
and opening and closing parenthesis and
attach it to a method I add to this
typescript class I'll name it open the
cool thing is I could create a method
like this anyways but by adding the
method decorator to it I make it call
from outside though like I planted you
by simply calling modal open this will
be possible because open is a method
decorated with the method decorator and
hence callable now in there I could
change the style but I need to change
the style of the element itself
conveniently there all this a decorator
for this the element decorator I can
simply use this and assign it to a
normal property which I'll name modal l
but the name is up to you which will be
of type HTML element and I assign no
value the value will be set
automatically by stance or so to say and
it will be the element itself this
allows me to access it here and say
mol/l style display is try it is by his
german equals block will block like this
so with that I got my open method and
now if I reload the page and I click
this button I still open it but now on a
different way I call this open method
which is exposed to the public where I
then changed the style from with it so
these are two new decorators you learn
about element and method now you
probably want to pass some data when
giving this is to go to the index.html
file and maybe you want to set a title
which could be info and some content
which could be this is an important in
formation so we want to set two
attributes on our custom element to pass
in some data now to do this I'll go back
to my model and you saw this earlier
there's never decorated we can use the
prop decorator and I can use this to
attach it to properties of this class
like to the title property which will be
a string and also to the content which
will be a string and this allows me to
then output this here so I'll get rid of
this for now use parentheses to nicely
wrap this and in there I now want to
have a div which wraps this though
theoretically you could always return an
array here
so unlike and react at least prior to
react 16 you can return an array but
I'll still wrap it here and I'll give a
h1 tag where I now use this type of data
binding which you also might know from
react single curly braces and there I
want to output this title and then I'll
add a paragraph where I output this
content and the single quality braces
allow you to mix your JSX code with
references to your CF CSS to your
typescript class if you now save this
and you open the modal you see info this
is an important information now this is
already nice maybe add some padding to
this modal though it's all sitting on
the edge so in the S CSS file I'll add
padding 16 pixels maybe just a little
styling to make this a bit nicer to view
so that's important that's of course
nice what else can we do though well
maybe we want to have a button in there
which allows us to close the modal and
maybe we want to make this super
complicated and have a button which
allows us to show the button which
closes the modal eventually so we could
add let's say a horizontal line in there
and then a button and here we could say
show up
now let's style that button a little bit
so in my Model S CSS file
I'll nest the button selector inside in
my modal selector and there I'll remove
the background color by setting it to
transparent I'll remove the borders by
setting it to non and I will also set
the outline to non I will also set the
font to inherit so to use the ah font we
have up here Arial and so on if we save
all that reload the page
oops make sure to save DT as X file to
here we see show options options look
like it looks like this now we need more
styling we should add cursor:pointer
here to make it look like a pointer when
we hover over it and let's maybe add a
color like this orange color with fa9
q3f as a hex code with that we got the
show options button which doesn't do
anything when we click it now when you
click it as I said I want to show the
options below it so what we can do for
that is we can go to my model tsx and
first of all let's add a normal property
up there so maybe add it at the very top
I'll name this one buttons and shall be
an array where I have two strings like
ok and cancel so that's my array and it
isn't decorated with prop or anything
like that I also want to add a new
property which shall named show options
and this will be set to false initially
now with that I want to listen to a
click on this button and I do this by
adding on click to it now on click takes
these single curly braces and then a
reference to the method you want to
execute so that could be show options
handler and the handler at the end it is
optional it's kind of the convention you
see right now instantly components like
and react that you name the methods
triggered by your own listeners here
with handler at the end now in there I
could set this
show options to true so this property I
created here now all we need to do is
use the property to show more options so
here I could use a horizontal line again
and then I want to output all the
buttons I have here now since I stored
them in a property what I can do is I
can use these single curly braces to
output this buttons and then just like
in react I want to loop through all of
them and basically output an element for
each element in the array
technically what I'll do is I'll map
this array of strings into an array of
HTML elements of JSX
elements to be precise I do this by
calling the map method and there we have
a function which gets executed
automatically it's an arrow function
here but you could use a normal one
which will get executed for each element
in that array and give me that element
in each function call so a single button
so it will loop through all the elements
in this array and button therefore is
just a string so then I'll use
parentheses to structure this over
multiple lines I'll simply output a
button element here and in there I'll
again use single curly braces to output
button which is just string keep this in
mind so this will be the caption of the
button this should only happen if I
click this button here though so there
they call this show options Handler and
just like you might know it from react
again you need to bind this on this
method call otherwise it won't work
because this in show options handler
will not refer to your class here if
this is called at run time if you're not
finding this during development already
so there was a lot of work if we save
this we see that if we reload this and
up the pub modal we immediately see more
options which makes sense because we
have no logic to only conditionally show
them so I want to add this logic now
q at this logic we still use the same
concept use and react
there is no directive like we have an
angler or view there is no ng if instead
since we simply use JavaScript here in
the end in the render method we can
create a variable which will name
options that by default it's null so so
nothing then I will check if this show
options if this is true then I want you
cut the code from down there and set
options equal Q it whips wrapped in
parentheses what this basically means is
that and I know this can can look
strange if Ural looking at this the
first time the PI default this variable
is null but if this show options is true
we said it equal Q it looks like to HTML
but keep in mind that's just a nicer
syntax for JavaScript here so we sent an
equal Q an array of buttons and now we
can simply use this options variable
down there in our JSX code to output it
and it's even now if show options is
false this will never be overwritten and
then we actually don't want to output
anything but if show options is true
options will be an array of buttons and
we will render the buttons now let's
save this file and reload this page and
open the modal and if you click show
options nothing happens this actually is
to be expected stands for by default
isn't watching all your properties for
changes and doesn't rerender the Dom the
element if one of your properties
changes you have to tell it to
explicitly Ted watch one like show
options when show options changes we as
a developer know that this impacts our
template so to say our JSX code because
we use show options to decide what we
want to output buttons or not
so stancil should actually watch show
options we can tell it to do so
by adding another import state and we
decorate show options with at state this
might look similar to you from react
again there you also have state and if
you change state it rear Enders your
code here and react all the re-renders
of one of your props changes and that
would be the case here at you if this
changes set from outside of course it
would also rerender your template so now
since show options now is decorated with
state whenever we change it like this it
will rerender and if you were coming
from react you don't need to call this
set state or anything like that you just
change it like this if we now save this
and we reload the page and open the
model now if I click show options
it shows the options and I can toggle it
there now always there you could of
course alter the code to make this a
toggle functionality and set show
options to true if it's false and the
other way around now with the option set
of course want you close the modal
whenever I click OK or cancel for this I
simply need to add an onclicklistener to
my buttons and there I want to execute a
method which will name closed modal
handler again handler because it's
triggered from inside basically it's not
decorated with method and in there I
simply want to copy that code where I
set it to block and set it to non again
and here I will simply then call this on
excuse me not on closed modal Handler
and find this again and you could use an
arrow function your tool I can react if
you are coming from that background so
with that if we now saved us one more
time and real otis click show options ok
and cancel should both get rid of it and
we always see that if we reopen it
because we never have logic to switch
show options back to false we could of
course do this as part of the close mole
handler we could set this show options
back to false so that the next time we
this model the options aren't there
anymore so whatever doing a lot let's go
back to the modal which were not really
seeing we simply or if you also want to
open the modal well what we can do is we
called modal open here using the
backdrop I want to show the backdrop I
can comment it in again now it's always
there and we can't click the button
anymore so first of all let's go to the
backdrop and we can basically do this
just like we did it with the modal we
can make sure that we implemented we set
the display to non by default add an
open method and call the open method
like we called modal open nothing wrong
with that in the next video I want to
show you how you nest components though
and how you can then let the components
interact with each other</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>