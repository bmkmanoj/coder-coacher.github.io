<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>SIGNIN IN ANGULAR APP | Laravel + Angular 2 / Vue.js 2 | Coder Coacher - Coaching Coders</title><meta content="SIGNIN IN ANGULAR APP | Laravel + Angular 2 / Vue.js 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>SIGNIN IN ANGULAR APP | Laravel + Angular 2 / Vue.js 2</b></h2><h5 class="post__date">2017-02-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pT9_FngJuzY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back in the last videos we added
the backend authentication and also a
way for us to sign users up to create
new users in our angular 2 application
now I want to sign users in and store
the token which we're getting so let's
work on the sign-in page in our
front-end app I will copy the form from
this signup component added in 2-11
component I theoretically don't need to
user name but we still use this on the
users on the backend we require it there
in the validation and we could remove it
there because we're not really using it
right so let's quickly go to the user
controller and on sign-in I'll remove
this name validation rule here because
we're not using the name anywhere you're
gonna sign in so that is really just
kind of a relict we don't need it so
what's that removed we can also remove
this user name form in the sign-in form
the rest is the same though so that all
should work and with that I will only
rename this method to on sign-in and
this button to have a sign in caption
and of course you could think about
clever ways of using only one component
for sign up and sign in but again this
is not really what I want to focus on
and using choko two components is
totally fine I will add the on sign-in
method in the typescript file off this
sign and component of course I also will
inject the off service here because I
want to append occator user I want to
sign user in make sure to add the import
but any off service we have no method
for signing a user in so let's quickly
add a sign-in method here we know we
will get an email and we will need a
password so these are the two arguments
this method will receive and in there I
now again want to reach out to my
back-end and I'll copy that code from
the signup method the URL changes though
to users slash sign-in this is the URL
we created on our back-end use of course
your URL if you have a different one we
don't need to pass the name we only pass
email and passwords but the rest is
exactly the same so this is still
the same the same header and email and
password we send to the server so if
that we get the assign and method and
with the sign and method well in on sign
in I can reach out to my off service
sign the user in I know that here in the
ons on the method I will receive the
form which is of type ng form make sure
to add this import from add angular form
and then here I want to pass for value
email and whoops forum value password
cutest request and this will return an
observable so let's subscribe as always
and simply print the response and also
print any potential error or we might
get so super simple at the end now let's
go back to our running application to
the sign in page enter a valid email
address and the appropriate password
open up the console to see if it works
and hits sign in and invalid credentials
itself let me use a different one here I
should have the correct credentials and
I view so here you can see the token is
returned in the body of course now would
be interesting to have a look into this
token because we can it's not encrypted
in a way that we couldn't decrypt it we
can't validate it here on the front end
because our a secret which was used for
assigning it was stored on the server so
it can only be validated on the server
but we can't have a look into the token
on the front end this will work and for
this we can simply create our own little
script so in the off service I will add
the map method here like this and for
this operator to work I need to unlock
it by importing our XJS rx like this and
here I know that I will receive the
response which is a type response of
course and first of all I want to
extract token so I will call response
Jason which is this JavaScript option
which will have a token property holding
the token so if dad I got the extracted
token now I want to want to decode to
token and we could actually write the
code for that on our own I already
prepared this code and we'll copied in
here and of course you can find it
attached to this video in the video
description where you can find a link to
get up which contains this finished code
so this basically shows the splits up to
token in its free pieces such as JSON
web token has and then since it is a 64
encoded decodes it so in the sign in
component we now know that this will
actually be the decoder token of course
renaming it here doesn't really matter
but it's clearer what we're getting and
what Dad let's reload here let's open up
the developer tools to see the console
and let's try signing in again and here
this is our decoded token this is what
it actually contains you see the issuer
which is our back-end and a couple of
other things like the expiration time
and yes there is this is what our token
consists of what we have in our token we
could change this on the backend we
could add other things to the token but
this is our base token and if you need
any information from the token wealth
this is how you can get it more
importantly we receive the token in
general and decoding it to have a look
is nice but not the end of the road here
I want to store that token so my goal is
to store it in our app so that we can
send it with subsequent requests and I
will do it as in the off service queue
here in the map that's where I decode
token I will return not just be decoded
token instead here I will return the
decoded token but I will also return the
original token like this so that we also
still have the well token as we had it
before and it's signing component
therefore this will simply be my choke
and data let's name it so last time we
renamed it no worries and what's that we
get access to both the token as a string
as the decoded object and then I will
add another operator here it's the do
operator do is simply execute it on
every well every time subscribe virus
every time we receive new data you could
say then do comes in and that something
allows us to do something here we also
get to token data so we get to transform
data here too and the thing I want to
deal with the data is I want to store
the token so what I will do is I will
reach out to my local storage and there
I will set item name it token and store
my token theta token so this string
token in the local storage and I choose
the local local storage here because I
want to have to soak and persist even if
we reload the application let's have a
look if I go back to the app and let it
recompile and reload here and we sign in
one more time
see we got the UT token here but more
interesting than this if you go to
application on the chrome developer
tools to local storage you see that here
we get this token key and if I reload
the page you see it's still there so
this persists even if we restart the app
which I did when reloading the page so
now we can always reach out to the local
storage to get our token and send it to
the server now of course you could also
store the expiration date to make sure
that you automatically force the user to
re-authenticate if the token has expired
I won't do this for now you saw how to
get the expiration date though we
decoded the token and there it was
stored so that would be possible but I'd
say enough of the authentication of the
signing in let's next have a look at
using this token to send it with request
to authenticate user to successfully
create new quotes because right now if I
try to create a new quote here let's go
back to the console and hit submit we
get an error because we don't provide a
token because we configured our back-end
to require a token so let's work on this
next so that we are able to create toka
quotes again see you in the next video
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>