<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Stencil | Nesting &amp; Component Communication | Coder Coacher - Coaching Coders</title><meta content="Stencil | Nesting &amp; Component Communication - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Stencil | Nesting &amp; Component Communication</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Yp_oiCWV_no" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to another video in this mini
stencil serious in the last videos we
created a model which you are
unfortunately can't do right now because
we reintroduced our backdrop and we have
no logic to conditionally show or hide
this
now I explained towards the end of the
last video that you can basically open
and close the backdrop just like you do
it with my modal now that would be a
fine way and might be the best way if
you will plan on using the backdrop and
the modal independently for the sake of
this tutorial though I want to show you
how to nest components and make them
work together so let's have a look at
how this works in this video
to make the backdrop and the modal work
together I'll first a frolic get rid of
the backdrop in my index.html file it
now also might make sense to put them
into the same bundle here in these
stands the contact but for now I'll
leave it as it is now I'll go back to my
modal then and there I want to use that
backdrop it will require some
refactorings though to make the modal
display at the correct place though
because the whole modal position is
positioned in the middle of the page so
if we simply insert my backdrop here
like this it would be displayed in the
totally wrong place as you can tell if
we open oops if we reload the page and
open the model in what people had
displayed above of everything now to fix
this I'll get rid of the backdrop here
and I'll introduce a new component I'll
simply name it my modal bundle in there
I'll create a my modal bundle dot TSX
file obviously I don't need any styling
here I'll copy the TSX code from my
backdrop into there and exchange the tag
for my modal bundle and have my madlyn
get rid of the style URL I mean because
we don't have one change the class name
instead to my modal bundle now any
stance a convict again it would make
sense to put them all into the same
bundle though so I will do this and
comment out the other one so I have my
modal bundle here I have my modal in
there and I will also have my backdrop
all in the same bundle and therefore in
the same JavaScript file we output so
now with that back to the my modal
bundle I don't want to return null here
I actually want to return my backdrop
and my modal here I can do this by
simply outputting my backdrop no need to
add an import because it's a normal HTML
element and I can actually output an
array of elements there by using square
brackets and simply wrap
all the elements I want to output so
here my backdrop and then my modal if I
now do this I can go to the index.html
file and there I can simply output my
modal bundle
now of course my model relies on output
on input from the outside so we can
simply pass this input on by adding
these attributes to the my modal bundle
here and also exposing an open method so
here I would select my modal bundle and
call open on that so we need support
these functionalities so I need two
props and a method so let's import prop
and method and simply replicate what we
did in the last video from the my mom
modal TSX file I can import the true
prop statements here and add it to my my
modal bundle class and import the open
method with the method decorator let's
add all of that for that we also need to
import the element selector excuse me
decorator because we need to get access
to be my modal bundle element too so
let's also do this here now to show
backdrop and mold when open is triggered
I simply can use the conditional
rendering to decide whether I want to
output both elements or not so ever I
want to attach them to the Dom or not
for that I'll use state again in the
modal bundler and attach at state with
parentheses to show and by default this
could be false now when I call open this
show should of course be Drew and true
the sides where we output this array or
not so there again all may have a
content variable in render which is null
but if this show is true then content
will actually be this array so output
disarray in this case and I output
content here where I return content so
even nothing or back
and modal and for that I need to go my
to my modal in this s CSS file and
removed that display non thing because
it should always be visible it's just
not always attached to the Dom we could
now get rid of the open method in my
modal TSX I will leave it in there for
reference but we don't need it anymore
and with that if we save this and I
click opal now we see it again we see
show options we don't see the text
though because we need to pass this on
we already receive it in my modal bundle
we pass it in there from our index.html
file with title and content these are
props of my modal bundle these are also
still props of my modal so all I need to
do is pass them on so on my mobile here
I can simply set title equal to width
single equality braces this title
referring to the title prop of my modal
bundle at the same of course for content
content equals this content now with
that if I now reload this we see info
and so on again and show options
although still works and we can even
still close the modal though we do this
incorrectly we still do it by changing
the style of my modal TSX or of this
modal component we want to close the
whole modal bundle though and to do this
we actually need to event omit our own
custom event so in my Model T as X I can
import one more thing event and with
that we can well you guessed it create
our own event so just like a button can
emit a click now we can create a custom
event our custom component can emit and
in my my modal component I decorate a
property with at event parenthesis to
create this custom event now here we
could name this event on close and this
should be of type event emitter which
you also need to import from Stan's
liqueur and since I got a lot of imports
there now I'll quickly restructure this
to make it a bit easier to read so now
we also have event emitter there this is
the type of the on
property which is decorated with at
event now on its own doesn't do anything
but if we execute closed model handler I
no longer want to change display style I
will set show options to false though
and I will reach out to on close and
omit it now we could even pass some data
with it which we can then fetch in the
component where we listen to this event
but for now I just want you omit it in
my modal bundle I don't want to listen
to this event and for dad we import
listen now listen is an avid decorator
which we can add to a method for example
to the closed modal handler I add and
listen in front of it and add listen
it's an argument it needs the name of
the event to which I want to listen and
here it's on close and whenever any of
my child components so either backdrop
or by modal emits an event which is
named on close this method will get
executed so to do this I will now simply
execute this show or not executed but
set it to false
remember show is the property
determining whether we show or don't
show the backdrop and modal with dead if
I now save everything and I reload the
page if I click open model we see it if
I click OK we close everything and I can
then reopen it so this is now our custom
modal with nested components
communicating with each other and you
can of course see where this goes this
allows you to build powerful custom
elements and in the end what you use in
your HTML project is just this single
element now combined with some
JavaScript code to open it but it's only
because this is an element which we
actually need to interact with to show
modal it's not something you show all
the time but we just import our custom
element and we've got all that
functionality we built into all these
nested components out-of-the-box we can
ship this and
use this model in every future project
which is pretty amazing in my opinion
that makes it easy to create a set of
reusable pieces you can use in any web
project and it will just emphasize it
again including web projects where you
use a framework like angular or
something like that
now what I still want to show you is in
my model bundle we're listening to on
clothes and correctly you would say what
if my backdrop also emitted an on
clothes event but I actually want to do
something different on the on clothes
event of the backdrop then on the on
clothes event of the model now that
isn't the case here but it could be the
case that you have two conflicting
events which have the same name
obviously you could pick different names
but you can also change listen to
clearly define for which element you
want to listen my modal on clothes and
by separating this with a : unifying the
left part is the element my modal you
just specified a tag for which you want
to listen or on which you want to listen
and then on the right side of the colon
is the actual event and then you
conveniently execute this method super
easy to do super convenient and gives
you powerful tools to structure all your
components and have them work together
now this of course is just a quick
introduction to the core features there
is more to stencil but this already
shows you the power and how you make
both components with it see you in the
other videos hopefully</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>