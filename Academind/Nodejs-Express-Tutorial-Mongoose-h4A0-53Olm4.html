<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node.js + Express - Tutorial - Mongoose | Coder Coacher - Coaching Coders</title><meta content="Node.js + Express - Tutorial - Mongoose - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node.js + Express - Tutorial - Mongoose</b></h2><h5 class="post__date">2016-04-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/h4A0-53Olm4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone welcome back in the last
video we had a look at monk which allows
us to interact or a MongoDB a little bit
easier or by writing less code by giving
us this extra layer so to say which we
can access which takes a lot of work off
of us and dust is not background in this
video we'll have a look at Mongoose and
Mongoose is not directly comparable to
monk it is a lot more than monk monk is
just you might say an extension to the
MongoDB driver mangu is it has a
different concept it is a fully pledge
term Orion which means that to put it
easy it will represent our data our
documents in our no sequel database as
JavaScript objects when you find a
schema for a certain will or check or
how our entries in the database should
look like and then we create models of
this schema and then we use these models
to uh create childhood objects and to
work with these objects in a very
natural way and all our changes we do
there are then upon certain commands
written to the database and reflect
there and we can work with it on a very
and yet your natural or high level way
without having to doing all the
nitty-gritty things ourselves the best
thing to learn it is to actually see it
so let's dive into it what I will do is
I will take my model to be off draw
project here duplicate it and just
rename it and once this is done come on
um I will go to my package to chasten
file I'll remove MongoDB we won't me
that human who's has all this built in
and then I'll stop my server here I will
well navigate into this newly created
folder
and here I will install with the save
flag would say flag Mongoose so with
this I got Mongoose and stalled as you
can see now in the package to chase and
fall and to use it I'll go in my routes
in the excess fat here again I will get
rid of the MongoDB related things here
and of course I will also get rid of all
the code here all the well basically
everything related to MongoDB to be in
our Ross okay so now I get this empty
app again and now let's use Mongoose the
first thing I will do is at the top of
course I will require it so that we can
use it require and then Mongoose and
then I want to establish a connection
and keep this connection open throughout
this file here so I will do it here at
the top by using this Mongoose object
here this variable and then calling the
connect method on it and then as an
argument I have to provide the power to
the database and this path we can use it
here from the monke project has the same
well form as it does here so no mom
would be colon slash slash slash slash
the beginning just the direct address of
our database so now this is the
connection to our MongoDB and now it is
open and we can work with it the next
thing I'll do is as I already said it's
all about creating this schemas which
kind of tell mom who is how the data in
the database should look like how it is
how is it is structured therefore I will
create a new variable here called schema
and it does we'll be learning what that
will be related refer to our mongoose
schema object here and whatever
next is I will define the schema or a
user data you should have so I will call
this user data scheme and with this
create a new schema and here I just
passed as an argument to the constructor
well a child script object which defines
this schema and in this case we got a
title pick content and offer all free
will be strings I will set title which
should be a string I will set content
which should be a string and author
now the cool thing is this schema will
define how Mongoose will writes the data
to the database of course but it will
also do some validation now not
regarding these types here but for
example let's say we want this title to
be required I would replace it with a
separate JavaScript object we would have
first we'll type is string and then I
would set required true now of course
you know whatever which options you have
of specifying here should have a look at
the Mongoose documentation because
Mongoose is a bit too complex to cover
is completely in one video but this is
how I generally work with it and how you
define these schemas and why they are so
important because now we won't be able
to save something to the database which
doesn't specify a title because we're
saying the title is required
it may not be empty or not okay so this
is this schema I define now this would
work like this but I will come back to
it in a minute but first let me continue
after creating the schema I will now
create a model of that schema so this
schema is just like the blueprint and
now I will create a new model which I
will hold
use your data and this will be pipe
Mongoose model here we call this method
and here I first pass the name of this
model and then
the schema which should be used as a
blueprint for this model so just to get
this differentiation clear here which
just you find the layout whereas here
we're then creating an actual model of
debt which you can later use to
instantiate it and to actually write
data to the database and this is if you
watch my letter will produce highly
comparable to levels l went to school
concept now with dad what mongers would
do it would create and store this data
at a collection called user data with an
S at the end to the plural form of this
model name now we already have our
collection called user - data course we
could create a new one here but if you
want to force a certain collection name
you may pass an additional JavaScript
object to this schema constructor here
which will contain some options in this
case I'd only specify one option which
is collection the collection key and I
defined that the collection name will be
user data now this will override the
default of taking this in the plural
form and our collection will be user
attached data which was before in the
past videos so this is how we set up the
schema and how we use it in our model
and now let's do the actual database
operations and how this works first
let's have a look at getting some data
here what I want to do is I will call
user data our model here and through
this more like and directly code find
with no arguments to find all entries
and then Mongoose provides us the Len
function to basically handle the results
when it's done when when say it is done
with the database operation and in there
a loop as function which has the
retrieved documents and in this function
I can then call my well let's render
that you returned the response and
Renard is index file here and set the
items equal to the documents we
retrieved here this is all this is how
it works and that's why I meant with
abstracting this away yes in a way of
course looks like a database access here
with five method but we are using our
setup model here and you would set up
such a model for each the collection
type where each yet each collection we
have in our database like again if
you're familiar with this with a low
Quint and narrow so that's how we find
or get our data next let's have a look
at storing it well for this I will trade
a new variable called data which is a
new user data now we're using our model
to create an instance of it I can then
pass my item which I define up here into
the constructor of this model to
automatically assign all these fields
because of course enters this import
this has the same structure as our
schema that's why would you find the
schema so now I have two data here and
then I just called data save and this
will also store it to the database know
insert or anything just pay the save
this will do that if you have a look at
the update method here here I would
again use my model that I would call
find to find the edge we want to up it
and I can use defined by ID method here
to make it easy and just pass in the ID
and the psyche may be a number or a
string or an object ID and also
automatically figure out how it has to
transform it to actually get our
database entry here so I also provide a
callback here and this callback will
have given an error or the documents it
found and now we could just show an
example and
sure the real app handle this error by
while outputting error no entry found
and then of course we should also render
back some error response in this case
but here I will just continue and what
it will do is never will update this
document so we'll set doc title and I'm
getting this auto-completion up because
this is the schema we defined and I will
set it to well basically whatever we
have stored in our request here and
therefore I can get rid of this item
here also update the content and finally
I will set dot offer equals request body
offered and now I call dog save to save
this but not as a new entry but just to
update this entry with new information
finally let's go to removing and
elements in our database
this is very easy can use again or
morally user data and then the find my
ID and remove method and while this does
what the name implies I pass an ID but
now to execute this I will call the exit
function at the end because I'm not
fetching any call back here I'll just
leave it like this of course I also
deleted this redirect I just saw so I
definitely want to add this here and
here and now let me restart this server
for this new folder here and I already
had one entry here because I test this
but let me create in you and you entry
with new content bunny injured and get
data and I can see it here and now let's
update this first entry look let's say
alson you you you
Update load as you can see this works
and finally to get rid of it
let's try this out voice so that's how
we use Mongoose and now I'll be honest
Mongoose has a lot more going on that
one than what I showed you here you can
also use relations or as it's called in
the new snow sequel world populations to
relate certain collections you can do a
lot more with these models they really
have a great validation hope in and so
on and this might be something for
future videos but this here should get
you going and help you get started
Mongoose in the description you will
find a link for more information if you
want to dive in a little deeper right
now see you in the next videos bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>