<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel 5.2 PHP Build  a social network - Edit Posts with AJAX Request | Coder Coacher - Coaching Coders</title><meta content="Laravel 5.2 PHP Build  a social network - Edit Posts with AJAX Request - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Academind/">Academind</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel 5.2 PHP Build  a social network - Edit Posts with AJAX Request</b></h2><h5 class="post__date">2016-02-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/L2YXZ5fZcqM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everyone welcome back so as we get our
text into our text area in this video we
want to send DHX requests so I'm
starting off on my dashboard here and we
want to send that request whenever this
Save Changes button here is press now
therefore I added this ID modal safe and
you should do this too because this
allows us that can in our app touch s in
our JavaScript file here simply target
this modal save element here or this
element which with the idea and I'll
just add the on click method here with a
function and inside this function I want
to call a DHX function of jquery dhx
method checkering offers us and we have
to pass a javascript object here and
specify several things now one of the
things is the method which will be post
the next thing is the URL which is a bit
tricky we have created throughout yet
but if we create route and let's say you
want to have slash edit as the route we
can't use slash added here because if we
have a look at browser we're currently
here at slash dashboard now if we enter
the slash edit route what jQuery will do
is try to access this route which does
not exist therefore we somehow have to
yeah we have to find out the root router
the route as Larimer would create for us
using this route
function therefore I will use a variable
here URL which you will then set outside
of this javascript file in the dashboard
HTML file which will give us the route
the next thing we need here is data
which should be passed as a salted
JavaScript object and here I want to
pass the body the body of our post which
will be just this value here from the
last lecture but
post body passed into it of course and
then we will also need a post ID now we
all we don't have that yet so I will
just leave this empty for now it just
gives us an empty string but we will
have to do something about this so
that's what we're passing then I want to
call the done function on this which
receives the message inside this done
function here I don't just want to
output something let's say message and
then here just a message property which
I will add just for testing purposes
when we are handling this raju will see
this in a second now there is one
critical thing we're missing here when
we're passing the data we here to have
to pass our token our CSRF token if we
don't do this we'll get an error so in
order to pass the stove now add another
property here to the Chava script object
we're passing us data and this we called
token just a name of well that hidden
input field we'll be reusing in a normal
form and the torque token itself will
also be a variable I will be setting
outside of this file let's do this in a
dashboard at the bottom of this file
I'll enter a new script tag here and
inside the script tags here I want to
set a token variable the token and this
will be like always session tome so just
like we were setting this in forms I'm
here now storing it in a variable so
that I can use this variable later in
the HX call to have two token there too
because we need it next variable I need
SD URL variable which will give us the
correct route the correct edit route and
here we can use this handy route method
of level to just use route let's name it
added will create this road a second and
then we will get a perfectly styled of
URL which will always lead us there and
not go
anywhere else so that's great now let's
create this route in the app folder
under HTTP and the routes file you're at
the bottom I want to create a new route
so does well be a post route should be
slash added and for now just add a
closure will read and will add the rest
of the functionality in the future with
you for now I just want to check that
the HX call gets there therefore I will
get my request here so this is
illuminated HTTP request this object or
an instance of this object request and
then I just want to return a.j Sobchak
as a response which will contain the
post body just so that we see that we
successfully passed it okay so here we
will then return response just a little
helper function we got to create a
response or to access the response jason
and i want to send a message
we do this with to chase the function
here by passing an array into it so
we'll create a new array and with all
this array like you would fill a
javascript object right but we're in PHP
we can't directly create a JavaScript
object so we're kind of building it from
arrays so I want to it pass simply I
think I'm fetching the body you're right
no message I want to pass this message
property in this JavaScript object we're
creating here so should be message and
this should just be request body so
exactly what we sent into this route
we're now sending it back just to let us
see that is perfectly working and this
route receives the data it should
receive now what this function will do
is it will send back Jason yeah object
adjacent element which will look like
this now let me enter this okay so it
will look like this this is my jason
element
and inside we will have we will have a
message property which will be set to
the value of well request body so
whatever we get out of this of accessing
this this is a item in this is a request
collection so to say so this will be
returned and we created throughout here
we have to give it a name though because
we're accessing it as added at the
bottom for dashboard here we're
following our helper variable so this is
the route name added so we have to use
it here too and we're using it here and
now I think we should be good to go
let's esters I'm just opening my dev
tools to see the console and click Edit
save changes and as you can see we get
this a new post message you're lining up
let's stride up a boost by Chris and we
got a post by crisp cool so that is
working we're successfully passing our
data into this route and by the way if
we change it to and you post anything
and Save Changes you'll see in a console
this is successfully passed so now we
could theoretically edit the post but
we're still missing the ID right we're
still missing the ID of the post and
we're still listening the logic to edit
the post regarding the ID I want to add
this in this video so let's have a look
at our dashboard we're getting the post
body here we should also get the post ID
here maybe in this article class here we
can use the html5 dataset for this by
basically creating custom attributes
we're pre-fitting prefixing with data -
and then we can create whatever
attribute name we want in this case I'm
which is created post ID and we'll set
this equal to late expression your post
ID so we're getting the post passed
we're cycling through all
a post each post has an ID so we have
the data and I'm just biting the stata
to this post aidid attribute which i'm
storing in the data set of this article
element this is html5 feature in this
data set so now I have my post ID
attached to each article post article
were outputting here therefore I can in
my app touch as simply fetch it when
well we click on this edit button
I will first create a variable to store
it I will call it post ID and at the
beginning it's just let's say zero and
then in here where I'm getting my post
body I will just duplicate this and set
my post ID equal to now here we're not
accessing this first element this
paragraph element but we stop here at
the article we know this article has the
post ID so I access the data set of this
article and here the post ID element or
proper to you which we know we set
because we just did this in the
dashboard view so this will be available
so now this will be our post ID
available in this variable and here
therefore we can easily pass it here by
just
oops you already got it here by just
adding this post ID variable here let me
make sure that this works by exchanging
my request body here we're sending back
with jason to post ID like that's
high-handed regarding the casing in post
ID yes okay so let me reload this click
edit save
post 84 added this save posted e free
looks very good to me so now we're
passing the post ID and the new body and
the next video will actually write those
changes into our database see you later
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>