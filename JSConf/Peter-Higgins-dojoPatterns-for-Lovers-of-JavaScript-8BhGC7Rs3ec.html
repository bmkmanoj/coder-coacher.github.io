<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Peter Higgins: dojo.Patterns for Lovers of JavaScript | Coder Coacher - Coaching Coders</title><meta content="Peter Higgins: dojo.Patterns for Lovers of JavaScript - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Peter Higgins: dojo.Patterns for Lovers of JavaScript</b></h2><h5 class="post__date">2013-01-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8BhGC7Rs3ec" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi I'm Peter Higgins I am presenting on
dojo patterns and this is me um Dante
those are boot kit p Higgins on Twitter
wonderful I want to before i get into
any of any of this I want a big huge
round of applause for Chris and Laura
I'm really just stalling I only have
three slides um seriously though they've
done such a great great job in getting
this together and just to have a
JavaScript conference here that we can
do this it's phenomenal and I salute you
so I am a huge obviously a huge fan of
JavaScript or else I wouldn't be here
with the rest of you and and I worked
for dojo that is what I do the history
of dojo and this is this is the exciting
i only have three slides i swear to god
it was started by this guy alex russell
and if you've never gotten a cease and
desist letter before name of product net
windows or something with the word
windows in it and that's what dojo
started as essentially it was started as
a net windows turned into a foundation
of a couple of javascript hackers that
had a unified vision for just JavaScript
let's make an API let's make a dojo
foundation where we can license this and
then the rest is history we've come into
we have 40 some-odd core committers that
are full-time dedicated to to the
betterment of dojo Dylan Chi Minh is the
founder of sight pen and one of the
original founders of the dojo foundation
so the what dojo is has changed today is
in fact dojos five year anniversary
today was the first day that the net
windows mailing list email went out five
years ago so that's kind of significant
in that wow it's been that long that's
amazing so we became a JavaScript
toolkit we're not anything a framework
or anything beyond tools lightweight
base starts at typically 26 k it can get
down as small as 6 k and somewhere on 17
k is another another variant for web kit
which is i'll explain later we're
probably going to hover right around the
30k mark in 1.4 because of a project
that i also do called plug d probably
should be pronounced plugged
but I call it plug d because I refused
to follow conventions so it's it's just
a use it will library it starts with
this small base and then you get all of
these extra components right like it's
everyone's familiar with XKCD right
right so dojo is to javascript like
Python in my humble opinion um it's like
you're flying I go you know err on the
side of the medicine cabinet comparison
thing but I think it's the Python but i
think it's the dojo really because it's
like flying if you want something you
just require it and it goes on and on
calendars there's a require for it and
it pulls it in file uploads everything
you could ever think that you wanted is
probably there you just don't know it
yet right it's partially the
documentation which is my first point on
what's wrong but it just goes on and on
there are so many wonderful components
in dojo that are just there so not only
it's it's not so much that you have to
use the the framework okay i think the
south park right have you seen the south
park where he's going around trying to
do something that the simpsons hasn't
done that's that's what dojo is really
it's we've been around so long we have
so much stuff that it's not necessarily
the best way to do it but it's there and
it's licensed it's free and you can use
it and you can take it and you can port
it and you can modify it and do whatever
you want but really consider looking at
it for nothing else other than to learn
the javascript because there's a huge
huge amount of talent that went into
this product so it adds up right go back
it adds up all of these modules that
you're that you're doing requiring in or
whatever our individual javascript files
and contradictory to the the performance
talk we saw earlier that's probably a
bad thing because its individual files
and its individual you know synchronous
requests out onto the server so the dojo
solution to that is the dojo build
system it's like an all-in-one
optimization kind of thing that happens
it starts works transparently with our
package system so when you don't require
something all of the
dependencies are tracked all of the all
of the modules are pulled in in order
dependencies within those modules are
tracked but when you build it all turns
it into one file you group the modules
into layers you group them into
optimized layers you can have like a
first layer and then an additive layer
that you lazy load after the initial
page load the deferring of widget
loading stuff like that it's you create
these optimize things we do it to CSS as
well within our themes are our widget UI
library is called digit and their theme
files are only at import calls or the
roll-up game file is it's just a bunch
of Adam for calls which Steve Souders
will tell us is a horrible horrible way
to do anything but it works because it
works and then we import the ettes the
ad imports just like we do the requires
and it concatenates single layer CSS
files after you do that we do to both of
the JavaScript and CSS whitespace
removal comment removal and new line
removal just wasted cruft and then
shrink safe as well goes through and
does the variable up of obfuscation that
Yui compressor basic that does as well
they're essentially the same thing both
of them are based on rhino both of them
have essentially the same output as far
as Speights on the wire and then on top
of on top of the removal stuff we have
stripped console and a bunch of other
interesting options but stripped console
is interesting because it'll actually
just remove the console debugging
statements that you put in so you can
accidentally leave a console log in a
thing and after you go to production
it'll be removed if you if you do so
there's varying levels so you can strip
warn log but leave error because they're
part of your you know part of your API
and that's not so interesting to
everybody because everyone's like but
why why do you have console logs in your
code directly you can't use that naive
but we all know about Firebug light and
dojo has shipped Firebug light as part
of its package for years now so we're
kind of spoiled in the sense that I've
never known a time when I couldn't use
console any of the console calls it's
just kind of transparently there which
is really really nice
nice I'm really gonna try and rush
through this because we only have you
know 50 minutes so bear with me and if
I'm going too fast or if I'm going too
slow stop me and feel free to ask any
questions along the way and just throw
something at me get my attention basic
api's require a download after the
require is done you can add on load
works just like a Dom ready function and
then you can embed them a download
require a download require a download
require and it's always going to be
accurate all the way down the chain you
can do the required thing you can do
your own custom code as well in the
module system this is the first most
complicated example and only complicated
example is two directories down if you
put your name space as a sibling of the
dojo namespace it works transparently
transparently it thinks that whatever
your folder name is your route natan
space otherwise you have to define where
it is in the file system it can be an
absolute URL it can be whatever you want
it's very flexible um and then you just
know to require my code and it goes off
and fetches my my code AS ifdef Tim
JavaScript another cool build feature
right you can do ifdef in javascript
it's really really cool and it's not
really cool until you realize the kind
of things that you can do with it um we
are using it for WebKit right now we
have these if thefts all over the code
where we've eliminated the IE branch
basically for a lot of our functions and
we've gotten our build for WebKit mobile
almost under the cash of limits so we've
got a little bit a little bit to work
out there but it's it's almost under the
cacheable limit its i believe it's 17 k
compressed so it's like 39 something
before and it occurred to me earlier
today i could probably get rid of that
with with animations CSS transition
animations rewriting our api is in that
getting it down to something smaller but
i haven't done that yet so these are a
couple of special builds the stubs dojo
is really really cool it's a 6k dojo
that has all of the api's in it
but it's only 6k and then if you
actually call the api goes out and
fetches it and pulls it in and then you
can use it it's not for performance
reasons it's for size reasons you can
get it this gets under the the 6k or the
25k limit on the on the iPhone but it's
definitely not performance but you can
go the other way with it to base plus
plus you can roll extra code into dojo
j/s so your solution is a single file we
typically recommend you don't mess with
da jjs and leave it as a 26 and then do
your one layer on top of it but in stuff
like air or whatever you can really just
you know deploy a single javascript file
with your library in your production
code in it and ship it and it's done
which is awesome plug d is another
special build where I use I use the
ifdef stuff to conflict there's a
there's a I'll get into it a little bit
later but it automatically runs conflict
or dojo conflict scope burning as well
which is kind of interesting it's it's
our solution to running multiple dojos
in the same page which we've been able
to do since 1.1 we're currently at one
point three so it's been about a year
since we've been doing this but the
scope burning you can remap the dojo
namespace on the fly or on page load to
something else you can be like mojo or
whatever you want to do based on just
making a build and then you just access
the api's that way and it works
transparently um so I used scope burning
to do something really really cool
called mujo and it's kind of funny it
doesn't look anything like dojo it was
me working with the the mootools team
joking around one day and this is this
is dojo code this is a automatically all
you do is have to load there's a link I
don't know if you can really read it
it's on my my sandbox link that was
originally on the thing but it's dojo
places the real API so this is using a
special ifdef to allow a function to be
called when you load the page to export
all of the dojo namespaces into the
window object which is not something
dojo would do but it's something dojo
could do
so it actually it speeds it up
considerably um things on the window and
ie are probably the fastest way to
access them it turns out and I'll get
into that in a second um and that's what
the the ifdef stuff looks like exclude
start and then if you pass an auto
conflict into your profile that
everything in between the exclude start
and stop based on the tag is removed so
normally you have this conditional
conditional thing but you know if you're
if you're building it especially and you
know what you're doing then it does it
for you automatically and then dojo
export NS is a plug d plugin which maps
from one to the other dojo global is the
window but we use dojo global so we can
switch it in different environments um
and mujo introduced something very very
interesting uh that I i put mujo in with
the dojo speed test and mujo beats dojo
for whatever reason it's it's it's
faster than then dojo which is
incredible um but it is and it's the
same reason i had i had plugged in here
as well just to test because plug d does
a little bit of magic to dojo that even
dojo wouldn't necessarily agree with but
um i like it and i use it so i've done
it and i'm the project lead of dojo and
i'm working on getting it back into its
a we've got we've got a very very
serious dedication to backwards
compatibility that we just can't break
so especially in the dot releases in 1.4
we'll probably see a lot of the plug the
api's but not anything that will break
so put plug be in here and it was faster
that was interesting so we put mujo in
here it was even faster but it totally
comes down to the object association
look up which i'll be talking about more
not not today because it's brand new
information that we've just discovered
but internet explorer jscript is
considerably considerably slowed in its
in its object look up stuff that you
wouldn't expect but if you've never seen
task speed this is what kind of pointed
it out and john touched on
on yesterday a little bit about what is
what is wrong with using browser browser
numbers um and it is it's seriously
flawed and but tax speed is it is flawed
right but the point is it's fair before
right I took a lot of a lot of effort
into getting each of the each of the
library authors for the tests in task
speed were written by the the leads of
the associated library just to avoid any
any potential but you know bike shedding
or arguing about it it was never
intended to be like a definitive kind of
selector sweet I was just interested in
the 1.3 api's and started testing them
it was fair before right which is great
because Alex leaked it he talked about
it when we were least 1.3 and I was
pissed and I was like no nobody's
supposed to know about this but a little
blah but he did and I'm glad I did
because I was saved because nobody could
like mom me for doing it but it's an
interesting start it it runs the test it
runs the test that runs the test and
then it submits them back to to it back
in for charts and you can go to Dante
dojo toolkit org test speed and find the
link to the charts which are charts by
dojo ironically in our graphics library
charting thing but the point is it's
just JavaScript like we have all of like
all of these things that that I just did
at the MU Joe there's a jojo version in
the mucho which exports dojo to the
dollar sign or the dojo query to the
dollar sign but it's just JavaScript
it's a very flexible beautiful language
and it's it's a lot of fun the earlier I
was talking about the the type coercion
and I was like oh I don't know if I like
that so much like I like the fact that
it's is flexible so but we have
JavaScript and things JavaScript should
have are the basics right there's like a
lot of core api's and dojo that are just
there because the originals don't work
index of right find an it erased index
of first index of that kind of stuff it
doesn't work in IE so we made we made a
function to do so for each map and
filter no
rayners right everyone should have those
hitch and partial are really cool but it
looks like we're going to get bind in
whenever the browser's adopted which is
great but it's kind of like the pull the
pull the leg out from under you the good
grief from from earlier is yeah we're
going to get bind but really not a
browser is going to implement it until
you know 2015 and then we're stuck with
it but we've got the the hitch in the
partial now that work safely namespace
to delegate Mixon extend all these basic
things everything in javascript is an
object you should be able to have object
manipulation tools so dojo has a does
the design philosophy around it is it's
everything stubbed off of the dojo
namespace and that's that's not so not
so desirable to some people so but
that's on our defense we're designed to
be in hostile environments and be
consumed and and share and play nice
with other people so we don't use any
names or we use namespaces don't use any
Global's and then on the offensive side
where we have forward-thinking api's so
so we're deferring to the native
implementations as best we can that's
minus the slightly longer reg up version
comment that's dojos inflammation
implementation of a trim API it's pretty
basic d on all our made fun of me
because not not me specifically but we
also have a dojo string trim which is
the faster much larger version of it so
if size isn't the the consideration then
and then of course the the array methods
that were all familiar with for each map
filter Mozilla was kind enough to give
these to us nobody else really has yet
WebKit I guess is good and then chrome
probably has them and I've not tried so
I'm just used to using the the dojo for
each and it's there's intentionally no
magic there's in it it's straight up for
an array it doesn't do for in lookups
because that's just an extra code path
in it you have to detect and really why
not just implement the the
forward-looking api's at some point we
can replace for each with some kind of
sniff to the
native api's same with map and filter
because of these design patterns we are
able to do really really clever things
and fun things so some people don't like
extending native prototypes some people
do some people don't I don't myself but
I do sometimes I actually do it
sometimes in in pragmatic cases where I
know I'm not going to be consumed and I
know I'm not going to be used with other
libraries so I wrote a function called
dojo clobber which safely extends
prototypes like that it's the opposite
of extend dojo extent which is cool but
because of the the patterns that we that
we already have the map call is really
just the same as it would be it's just
taking off the the actual object so the
pattern there is that all of these
things because of the forward-looking
ness of them and then returning this
just you know allows you to to chain off
of the the new array or whatever and
then so the the native thing in action
there you go you've got an array you map
it down and then you go through and for
each it and it's all it's all based on
the defined specs that already exist and
that's actually a project I kind of
started it's not a full project but it's
on google code it's called dojo type I
thought it was a pretty clever name if
if you've never had any experience with
the prototype JavaScript library that's
what it is so this is a quick glance at
the code style in dojo so you've got the
the regular you know called the dojo and
then we've seen you can you know replace
it with nothing but it it all these are
all the patterns that exist in dojo and
I'm going to explain them but basic
stuff right like connect is a custom
events object events Dom events whatever
you want to do the object sync stuff
there is transparently going through the
the hitch in the partial which is a
kareem basically or Reese coping XA
char functions animation functions
regular down style functions placement
functions all that kind of stuff CSS
selectors everybody has them blah blah
blah blah blah blah blah blah right
nodelist prototype is the the instance
that has returned from a from a dojo
query call and extending nodelist
prototype is writing a plug-in so if you
put a function on nodelist prototype you
are welcome to that's what it's there
for and that's where you put your
plugins into dojo so kind of getting
into the basic patterns that dojo uses
one of my favorites is the magic
arguments it's it's a very flexible
thing I never ever want to see ordered
arguments anywhere ever again on a
function call because it's entirely too
difficult to change by using a magic
argument and defining defaults and then
mixing in the argument over the defaults
allows you a very very clean kind of
short way so this this will accept no
arguments at all so if you mix in a prop
a new prop you get bar so it's it's a
very flexible way to to have great great
api's right that you can add to and you
can remove them without having to worry
so much about where they are
positionally positional arguments are
mine mind-numbing and also mixin mixin
is relatively interesting in the sense
there we go that you can build up these
arguments so you don't necessarily have
to pass the object directly or whatever
you can you know here's my my route
object I'm gonna go along the code path
mix in one more object go along the code
path mix in one more object and then at
the end of it all I'm going to just
execute the function with with the the
final object that I've generated so it's
it allows you a lot more flexibility
than having to repeat that function call
in different places does anyone use Java
in here like okay so yeah exactly I had
a horrible experience my first
experience with Java trying to
make a function that accepted a
different a different number of
parameters yeah so yeah you had to write
a whole new function for it like and it
was the same name or whatever and it's
it's amazing but you don't even need to
think about that stuff it's just passed
around the object so the Dom arguments
pattern that I that we have see
everyone's familiar with get element by
ID right that's the probably it's broken
in internet explorer by the way so in
the cases where it would work right
that's that's a valid piece of code set
the style the width to 200 so why why
not make a utility function to fix by ID
we have dojo by D right and it accepts a
string so N equals dou job ID and then
the the pattern that allows us this is
we can pass a node reference to it or we
can pass the string ID to it directly so
we can skip the by ID call but if we
already have a node reference to it why
not just keep it around and and reuse it
so we're allowed and then of course the
dojo query way so our style API all the
Dom api's do this with the the first one
being a node string stringer Dom node
right and then whatever the ordered
arguments are so property property and
then in the query case it's just
assuming no notes bulk operations so
your note is assume for you and we
iterate over it and call the same
function n times so pretty cool stuff I
went the wrong way so that's that's how
we fix the DOM and this is how we do it
it's basically the same as your last
example except our node is now just
being filtered through by ID not a big
deal so that one line of code gives us
the flexibility to repeat that pattern
throughout everywhere no ref and then of
course the props that get mixed in there
ambiguous constructors dojo has a
object-oriented inheritance stuff but on
a basic level you don't really need it
this is just plain old
a functional prototype whatever so
something is something and then we mix
in this the Magic argh that we were past
so we're mixing into ourselves anything
that was that is a member function right
so we can well the extent is extending
the prototype and that's that's the
basic pattern for for making class
objects but by passing in this optex and
this mix in or whatever our opt is then
overloaded to be X we can do this with
functions we can do this with anything
that can be passed in just because we're
kind of haphazardly mixing into this it
has side effects if you start overriding
like private methods and stuff but you
should know better and you should be
smart enough to know what to do you can
always call the inherited function as
well not not in this example but in this
example you can dojo declare is the
class create whatever it is that that
you that you do so create some things
it's the same exact example is before
inherit from nothing no give it some an
option and then you just list out in
this object hash all of the all the
different member things for this class
um so you make new something with
nothing or new something with an ex and
it's the same exact thing so by doing
this by using allowing these ambiguous
constructors to just mix in haphazardly
the dojo parser is a kind of thing for
these things the dojo parser will turn
Dom nodes decorated with a dojo type
attribute which a lot of people complain
about but it's that's not the discussion
it will it will instantiate this into a
new some class thing and then it will
use these properties so it's the exact
same same exact these two things are the
exact same everything or you can do it
from no Dolph no Dom node at all and in
the widget case at least a dumb node
will be created for you but you have to
place it in the Dom yourself so you
really don't have to do any kind of div
stuff but this is very very
pragmatic it's a very easy way to just
do things especially in prototyping so
and then the next wonderful wonderful
thing and this is partial is the cousin
of hitch but functional JavaScript don't
repeat yourself right it's a kind of a
fundamental thing so you have your
function called my turn it and it
accepts a direction parameter and if it
gets past two one go left whatever or
one go right to the left so you have the
one instead of having a my turn left my
turn right you just have a turnip
function and then you can wherever you
are partial create a partial function
it's like currying this is actually bind
in prototype and in New acma so next is
a function when called it will call my
turn it passing it one and previous will
call my turn it passing a negative one
and then later on we can just reference
the function when we click on the next
button call the next and we can
reference that next variable anywhere
within that scope that we created it so
same duel service functions this is a
great pattern and and this is actually I
didn't really touch on it back it back
at task feed and tasked feed was so
flawed but it did show us one thing or
two things two very very important
things a none of us are optimized for
Internet Explorer every everyone
Internet Explorer's is slow that's you
know unquestionable but it's it's more
painful than we're anticipating and it's
we should do more about that it's still
the majority of the browser market so we
need to stop being like evil evil
hackers and all excited about how fast
this runs in chrome and WebKit for beta
you know safari for beta right but and
focus on the people that are actually
using our products right so but the
other thing that it showed us is that
dojo is fast for whatever reason it's
fast enough it's it's whatever it's it
the argument is is
they're so so dual service functions you
write a function that works on the
pattern of node args it accepts the
string or ID string or node reference
and then it does something and it does
it as fast as it possibly can on one
node it does it optimized for that and
then it's just a matter of adapting it
as a for each for query to have this
this low-level API that you can just do
and then there's the bulk operation so
there's a there's a couple adapt as in
this series for dojo node list there's
adapt as for each adapt as for each with
conditional they're all documented and
they're they're brand-new in 1.3 as part
of a huge performance boost in node list
that we that we did between 1.2 and 1.3
completely backwards compatible so this
is and the node list is where you get
your training in dojo basically but it's
not exclusively limited that it's really
just this any time you return the object
that you're working with you can call
another method off of it and that's it's
just a matter of returning this so like
in graphics the shape creation returns
this so you can add a fill and because
there's nothing that needs to be
returned format fill we return this so
we can continue on you can do there x
equals new graphics shape from a surface
and then x dad Phil or X set stroke it's
a little bit easier to debug because
it's not all on one line and not all on
one long function call but it's a lot
easier to to write without it so back a
little bit to the the the global
namespaces that we have dojo seems a
little verbose to do something like
select elements by class or do something
by ID jquery has the dollar sign there
for the the class and then they have the
same thing for the ID so they don't have
a direct function to get a node by ID
that's any faster than instantiating an
entire jQuery object prototype has the
double dollar sign for its selector
engine and
single dollar sign for its ID which is
just confusing to me to see the people
like they put these libraries together
on a page in it I couldn't imagine even
trying to read or work with that no
criticism at all I'm just saying it like
it blows my mind to see that many dollar
signs and then mootools follows the
prototype example this is its element so
it allows you to change single node
operations and then the bulk operations
on the double dollar sign so plug d
allows you to use the dollar sign as
well in dojo conflict mode I had to name
it conflict because we don't otherwise
but it I I did and then so after you
called Ojo conflict you can write code
that looks like that or you can there's
a bunch of other api's and plug d it's
in google code if you'd like to see it
or you can do it automatically by
setting a DJ config on the on the script
object a typical way of configuring dojo
before load and then it will
automatically call conflict and then
you'll have the exported dollar sign to
the query selector engine in dojo or you
can do it as a build step and you can
just pass auto conflict equals on and
then tell it the profile to build and
there it is it every time you load this
on the page you steal the dollar sign
back so it is conflict and it's not
something that dojo recommends but it's
it's their expansion patterns so once
you get past this base this base set of
functionality and these these base
patterns that we're doing it gets into a
hole a hole bigger world once you can
start loading in modules and you have to
start thinking about things
asynchronously because it is Ajax right
asynchronous JavaScript we have
something called dojo deferred if your
Python fan at all it's just like pythons
deferred it's a contract it's an
asynchronous contract that says i'm
going to i will give you a response at
some point it's going to either be fail
or good or both in some odd cases so
you to find the contract and say okay do
this operation and when the contract is
up you get the call back no matter what
happened you can do it on a timeout you
can do it on within a try catch a lot of
people don't pay attention or don't use
deferred directly it's kind of hidden
from you the most indirect usage of
using a deferred is in our Ajax
functions xhr get calls a get request
right to a UL to a URL and then the load
function calls it will call
asynchronously but in the background a
deferred is happening a deferred was
created in fact the deferred was
returned from the xhr get that you could
further add callbacks and Arab x2 at a
later time you can pass it around and do
that so and then of course dojo hip
manipulating the scope of the of the
callback so fun fun stuff this is a the
load keyword kind of makes you want to
write code like this where it's do
something and then in this callback do
something else and then in this callback
do something else and in this callback
and then by the time you know it you're
nowhere near your 40 tabs in and why I I
don't I don't want to do that I want I
want a clever asynchronous clever
asynchronous API so I call xhr get and
then I had a callback right there in the
place and whatever you return from the
deferred chain you can you can modify
the data along the deferred chain or you
can just listen to it so here we're just
listening to it as long as we don't
return anything nothing along the
deferred chain will get the new stuff
but in this case the next place that
gets it the and post function which is a
function that I've defined up here it's
a it accepts the data it gets called it
gets past the same data which is food
each tml content but it gets passed it
lower cased all lower cased which is
great and then of course we set an error
back in another scope in error handle
this calls other scope error handle in
the scope of other scope it's a magic
thing of dojo hitch and that pattern
exists everywhere in dojo
and then you know the elsewhere add the
callback right so that's fun right the
asynchronous thing moving on into more
asynchronous greatness dojo data it's
it's more than just data for the Dom
like it's it's a we saw on what was it
taffie BB taffie d be reminded a lot of
us of dojo data the api's it's it's
readwrite identity and notification say
the reed is the the most basic of it it
says I want an item give me an item or
i'm making a query give me an item or
give me all the items so you do you have
an on item callback that you can call or
an uncomplete callback that you can call
so you can either know each item
individually or do them all at once when
the entire contract has been fulfilled
common functions and callbacks dojo data
is just an API it's it's it's just an
abstraction it's there's no there are
two official data stores in dojo but
only because their sample
implementations of this API of the
read/write identity and notification a
vis the two are item file read store and
item file right store which basically
are just jason files flat files and it
loads the file using xhr and iterates
but it maps this api which is really
really useful when you don't want to
think about how did how to do the wiring
um there are a couple a couple of okay
so we make a google search store this is
another this one's in dojo directly and
we create a new store with some
parameters that it requires API keys and
and stuff like that but we require the
module create the store and then send
off the query so what is our query its
we're looking for dojo in the google
search and whatever google says on the
search we're going to on item every time
an item is returned from this store
thinger add item is going to be called
in the scope of thing or thing is a
widget i've defined up here um and then
when it's
all done I tell the thinger to render
itself each of the add items is you know
just a little couple lines of code that
says I'm receiving a JSON object maybe I
need to to make a new row in a table or
I need to make a new option in the
drop-down or whatever it is it's it's a
very very simple way to do asynchronous
operations and it's very very clean dojo
data this is a great example I don't
know if our our bandwidth here will
permit us to it's called stalker it's on
it uses persevere where Chris did the
talk earlier but it's using a lot of
dojo technology actually the top part is
a dojo grid where you can sort the the
various headings and stuff like that the
grid is powered by a datastore that same
data store is powering a data chart the
chart data is being fed from persevere
via comedy so we're getting we're
simulating real time stock updates by
pumping fake data on random intervals
into this thing as a demo so you can see
it live if you visit it persevere site
pencom stalker dot HTML but the charts
just kind of flow by and re-render and
you can you can change the the line the
way the lines interact on the fly with
the buttons and stuff so it's a fun
little example but it's using a lot of
asynchronous data technology to pull it
off and it's pretty pretty simple there
are a lot of data stores in dojo X a lot
of them user contributed a lot of them
developer like core developer
contributed because we use them and or
read stores just a basic it's not a
basic it's an extension on the item file
restore which is the basic one and and
or gives you a better query syntax so
you can like item equals and or you know
it gives you more SQL like things and a
couch DB rest or we saw the CouchDB demo
earlier it's a dojo datastore that talks
to CouchDB restfully out of the box
using the dojo data API so CSS rule
store gives you access to your style
sheets using the dojo data API um flickr
store google feed store all of those
stores give you access to
all of this information using the dojo
data API and the reason that the API is
important is because you can write
components that accept data but you
don't have to think about the store
abstraction so the lightbox it's an
image this one's coming from flickr
using the flickr rest or it could come
from any service that i have that can
provide dojo data API data basically the
the gadgets use dojo data the drop-down
combo boxes the trees all of these
little widgets can just talk dojo data
for whatever reason so it's it's a great
thing and you can plug in whatever store
behind it you want so and then I'm
probably running short on time and if
I'm not I have lots of time for
questions because our PC SMD is kind of
the the final final bit of this Chris
showed a bunch of great stuff in his
talk with persevere that kind of got
into this it's a lot the same it's using
a service it's called dojo X RPC service
and then it uses JSON schema basically
to define the api's that to communicate
so in I i wrote the google SMD service
service method definition i think is
what's gone but and then it defines all
of these api so goob now is this service
that i can call and the RPC call is web
search so i call the web search and then
here's my deferred call back you can do
error back you can do handle back you
can do the deferred chaining where you
manipulate the data long the thing it's
all exactly the same no yeah okay so
that's that's that's really it I mean
there's it's a huge huge project and
it's been going on now for five years
but it's a large very very large active
developer friendly friendly developer
base it's great and one of the one of
the most compelling things about it i
think is the licensing to where it's all
licensed m bsd
a free license new BSD app academic free
license and it's just meant to be
consumed you can take it you can hack it
you can do whatever you want as long as
you leave like the copyright notice it
says hey dojo wrote this right it's you
can do whatever meant to be adopted in
that sense and it's all covered under a
dojo foundation it's all covered under
the dojo foundation which is a nonprofit
organization set up to to own the
copyright of this product so that
there's nobody that that's singly
singled out for the for the ownership
all contributions come in under
contributor license like Apache like
contributor license agreements so you
can know that you can you can ship this
code it's actually IBM is probably the
biggest motivator behind that because
they ship dojo in a lot of large
products in their websphere stuff and
and they want to know that that they can
basically that the code is entirely
clean so um our do we have does anyone
have any questions how am i doing on
time i have no idea good great that's so
no questions at all really oh awesome go
for it well I want to do how what it
takes to build like a server-side
version of Jojo like I want to use like
you're talking about the crypto stuff
yeah whatever some dojo component not in
the browser is there a bill for that
there is we have host environments it's
the default one is host envy browser
right but there's host envy rhino and
there's host envy fire what is it XUL
things like that so you define the host
of me and that's the might not have seen
it earlier but there was a call a
function called a dojo body and it was a
function you define that in the host
envy how and all of the rest the code
works transparently as long as it
returns some kind of element that
behaves like a body so
um I was hoping you'd cover the dojo doc
test module oh yeah I can um I don't
know if you had opinions on that so ever
I are you talking about the the doc test
one where the inlet of the unit tests
are in the code like Python or in the
comments in the code like Python or
where they're actually the separate
thing I just curious again opinion oh no
I think it's I think it's great it kind
of makes the code hard to read and it
doesn't really it doesn't really benefit
like UI testing stuff because it's just
the functional stuff but you can do it
it's great on the on the low level on
the low level stuff yeah absolutely
anybody listens well no great that looks
like that's me I'm done and thank you
all
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>