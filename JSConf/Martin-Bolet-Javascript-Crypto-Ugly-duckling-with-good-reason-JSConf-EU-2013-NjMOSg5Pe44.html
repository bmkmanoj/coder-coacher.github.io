<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Martin Boßlet: Javascript Crypto. Ugly duckling with good reason? -- JSConf EU 2013 | Coder Coacher - Coaching Coders</title><meta content="Martin Boßlet: Javascript Crypto. Ugly duckling with good reason? -- JSConf EU 2013 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Martin Boßlet: Javascript Crypto. Ugly duckling with good reason? -- JSConf EU 2013</b></h2><h5 class="post__date">2013-10-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NjMOSg5Pe44" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you
you
so I
about JavaScript crypto and I'm a
freelancer as you've just heard I've
done a lot of security projects in the
past and I actually love Ruby and now
you might ask yourself what am i doing
that Jas conf well I love crypto but I
love JavaScript to and I wrote a lot of
Java crypto code in the past and I wrote
a lot of Ruby and see cryptic code in
the past but it never wrote any
JavaScript crypto code now why is that
is it because I don't like the language
well not really because the reasons for
that have been summarized pretty nicely
in this blog article I think you
probably read that it's written by
Montesano and note that they're just
talking about client-side crypto so it's
totally fine to use something like no
Jess doing crypto there but the problem
is on the client let's have a look at
why it's basically doomed in the general
case the JavaScript code is served over
HTTP so it's pretty easy for somebody to
intercept the code while its interests
mission and this man in the middle could
do everything that they want they could
serve different files they could change
the files they could inject code into
HTML yeah whatever they want now okay
let's take care of that let's take care
of the transmission let's secure the
transport channel we have h GPS for that
this actually will work to prevent
man-in-the-middle attacks because they
can no longer snoop into communication
there but the problem is what if
somebody on the service side decides to
go rogue they could actually serve you
bad files from the beginning and this
even doesn't matter if it's a GPS or not
because they will just send the files on
the server so the transport channel
doesn't matter
and the conclusion by Matt Asano is that
if you don't trust the app to do the
cryptography which is what we basically
do right now so if you don't trust the
app how could you trust any JavaScript
code that the absence to you so there's
no difference in there and they're right
about it and yeah please note that this
is not a javascript problem per se it's
just because javascript is being used on
the client and if it were any other
language they would have the same
problems but to be honest there are some
JavaScript problems as well so most
algorithms actually require you to do
operations on bytes or 32-bit integers
and this is pretty complicated in
JavaScript because we have no
out-of-the-box support for that and
there's also no support for big integers
which is something that is yeah really
important for public key cryptography
and there are workarounds there exists
libraries to do this but they don't have
native support for this so they're
usually pretty slow and there's also
problem problems with javascript in the
browser itself the biggest problem is
probably that we don't have a secure
random number generator what we have is
math with random but this is pretty
predictable and this doesn't help in the
case of crypto because we really need
for everything in cryptography we need
secure random numbers and if you don't
have that we didn't just don't have to
start with anything because it's trivial
IAM breakable so there are again
workarounds that try to induce real
randomness by detecting mouse movements
and stuff but i don't know this is
clearly something that we should have in
the browser by default built-in so there
has been recently crypto get random
values which is an attempt to provide a
real random number generator that is
secure but as so often the problem is
it's not supported by everybody
so another problem with the language
itself is that what makes it so fun
which is the same problem that also
makes writing crypto heart and that's we
can change everything and run time as we
want to so nobody prevents you from
doing something like this so if you
think you can provide a better random
number generator you can simply
overwrite the built-in functionality and
this works with firefox 23 actually so
there's nothing that makes this
immutable you can just override it and
this doesn't even have to be intentional
and so let's say you're under pressure
and you look at some code that you don't
really understand and you try to
optimize it and something like this
could happen so you just override the
encryption and you don't know better and
another problem is using something like
Jason pier so we often rely on remote
code so we can't really trust that code
because they could just go on and
override something that is critical for
our security so if we just define random
values on the server the remote server
could actually override this and do bad
stuff with that so the problem is our
environment could change at any instant
and we don't have a good measure to
actually verify its integrity now I've
shown you a lot of things that suck but
it's just the end of it and I don't
think so because we've seen recent
developments that are actually pretty
interesting and we've seen attempt at
providing something that gives us built
in crypto in the browser one of those
developments is a MJS so it's not just
good for playing unreal tournament it's
also good for doing exactly what we need
in crypto exact with integer operations
it gives us typed array support which
makes it really fast and another major
improvement that we've seen lately is
the development of the w3c web crypto
API
this gives us begin teacher support for
RSA another public-key algorithms and it
also gives us this um CSP orangie the
secure random number generator and other
laughs many other good stuff so let's
say this works in the future but if
still haven't told you why you should
care why is this important to be able to
do crypto in the browser and I think
with recent developments one big subject
that we all need to care about is
privacy so you've probably heard this
sentence that privacy is not so
important if you have nothing to hide
then you don't need privacy and I think
this is total because it's just
a sorry ass excuse to explain everything
and I think even in the audience every
single one of you has something that
they wouldn't want us to know publicly
and the problem is we as social beings
we're often in a social context that is
closed and so we work problems out and
so we tend to forgive but the internet
stores it forever so it does neither
forget nor does it forgive and its
really really dangerous because today's
surveillance is different than it was in
the past so in the past you needed
humans to spine you you so you felt you
probably felt if your privacy was
intruded but today it's more like
nuclear radiation you can't feel it if
your privacy is violated and this is not
a matter of where you live or where
you're born it's not a state it's not
good states bad states it's I think the
interest in our data is global and we
all have to care about this even if you
think that our government is benevolent
it's not the government it's the people
that do the harm so not the system is
evil or the system is to blame it's the
people that are to blame and they will
abuse their power it has happened in the
past and it will happen again if you
give somebody too much
or they start on snooping on their
girlfriend or boyfriend and it just sums
up so even if there's decisions that are
meant to be good the some of them
because they're unrelated may lead to
something that slips out of our control
and this is what has just happened so we
create something that we cannot control
any longer and one of the problems is
that a company if you provide an
application to the public then you can
implement perfect crypto on the front
but agencies will just go in the back
and they will get your data because you
store it in plain text somewhere and so
this this happens through extortion or
the data is sold whatever and it's a
problem now the question is are we
powerless against this can we do
something to protect ourselves and I say
we can we have to start encrypting our
stuff on the client and to do that we're
going to need clients are crypto and
this improves things because even if an
institution has leverage over a
corporation if they can extort them to
end over the data it doesn't matter if
we as individuals encrypted it and it's
not profitable to try to decrypt
everything from every single human now
if this doesn't convince you and you're
still yeah you still think that it's
okay for them to have your data because
there's nothing suspicious let me try
this surveillance will have an impact on
your life totally and we will slowly
graduate from something which we believe
to be a good thing innocent until proven
guilty to something more of guilty until
somebody can prove that you're innocent
and it also puts determinism in our
lives which we certainly don't want and
there has been a case in Germany where a
teacher wasn't allowed to become a
teacher because she had to give her DNA
sample and they detected that she might
be affected by a fatal disease in the
future
and so she wasn't allowed to take the
job and I think this is pretty bad
because you're held accountable for
something that hasn't even happened and
which probably is never going to happen
and because there are way too many
people they won't be able to put human
beings on the profiling it will have
algorithms for that and how would you
feel about if you're being denied a job
or if you're even put in jail just
because you have the same hair color
than a mass murderer and it conveys the
false sense of knowing everything about
you even if I know all the data from you
that is online I still believe that we
are more than this and we have our free
will we have our thoughts and it's not
just the actions that you see online so
they don't know about you but they
claim to know things about you and if
you're still not convinced this is
something that people often do they put
their vacation pictures on facebook so
let me show you how this could go awry
imagine that you put your bikini picture
up there and you actually forgot to
shave and the bikini area and somebody
notices this publishes the picture
online and this goes viral becomes a
meme would you like that no and we
always have to remember that the faces
and memes are actually real people and
probably they don't like to be suddenly
famous and if we look at surveillance
throughout history I mean we as Germans
should know this it's always been
claimed that this is for the greater
good it's to protect us but it never was
and to tell you secret not a single
person felt safer there it was the
opposite they were constant in constant
fear because they were severely
restricted in their attempts to
experiment because they felt observed
all the time now if you try to use
crypto the answer is usually that it's
bad that you shouldn't do it while at
the same time agencies claim that they
need to
do this in order to protect you and the
yeah this is always the excuse and this
just happened i think last week when an
NSA official declared that they have to
snoop on people because this is the only
way how they can actually arrest child
molesters human traffickers to our
clothes and so on but this is really an
excuse do you think this is there a
major concern too yeah arrest human
traffickers I don't think so it may be a
byproduct but it's certainly not the
major operation so this is just an
excuse and there's this imbalance we are
supposed to be completely transparent
while at the same time agencies are
allowed to have secrets and I think this
just doesn't work out I'm yeah I would
say they should have their secrets
because this protects the operation of
agencies but at the same time we should
be allowed to have our secrets too and I
want us to move back to something more
of mutual trust so by default the
government should trust its citizens
citizens and not the other way around
and this is really scary some German
politician actually claimed in public
that he believes that security is more
important than our personal freedom and
again I think this is because
your personal freedom is some form of
security and I think if they take this
away then there can be no security at
all now let me give you a quick
excursion of something that would
totally solve this for good and it's
called homomorphic encryption a
homomorphism is a mathematical function
that maps from one structure G to
another structure H it implies two
operations in GH and the clue of it is
that applying the function to the
combination of those two elements will
yield the same result as applying the
function to the elements individually
and then combining it pretty complicated
so let me give you an example
so for simplicity let's say our a
homomorphism is 1 over X and G H are the
same thing the real numbers as you know
them and the two operations are actually
also the same they're the multiplication
in real numbers so if you just simply
write out the definition then f apply to
a times b is 1 over a times B which by
the loss of multiplication is 1 over 8
times 1 over B and this is actually the
right hand side of the definition so 1
over X is a homomorphism we can find
this in crypto to RSA some example for
this as a quick recap RSA encryption is
defined as having a public key e a
modulus m and then the encryption is
just taking X to the e and then taking
it modulo M if we look at this using
multiplication again then this will
again be home morphisms so the
encryption of X 1 times X 2 as x 1 x x 2
to the e by the loss of exponentiation
we can pull in the exponent there and by
loss of modular arithmetic we can apply
modulo operation individually and then
again we have the right hand side of the
definition but if we try the same thing
for addition it won't work out because
there's no law that would allow us to do
the last line there so this holds true
in general it's pretty easy to find a
homomorphism for one of the operations
so in mathematical fields usually have
two operations for example addition and
multiplication and you find something
for one of the operations but it's
pretty hard to find something for both
and this would be called fully
homomorphic encryption and the
definition there is just extended by
another operation so you look at two
operations at the same time and this
equation has to hold for both operations
now you might ask yourselves why is this
so important well it preserves the ring
structure of the
original structures to put this in
simpler terms think about it as it
allows you to do algorithms unencrypted
data yielding encrypted results and if
you decrypt it again it makes sense so a
good example would be Google search so
if we had something like fully
homomorphic encryption then we could
actually put in our search terms ghoul
would get this encrypted would perform
the algorithm would produce a result
which is still encrypted and only you
can decrypt the result and it makes
sense and Google won't learn anything
about your search of course this can be
abused but i think the advantages are
outweigh the disadvantages and this
would really give us privacy the looks
and the question has been for a long
time so many people have claimed that
this is not possible at all but then
last year this guy made a major
breakthrough and actually found a
function that just allows us to do this
but it's still rocket science and it
won't be available in decades until we
can use this and every day programming
so question is what can we do right now
and this is an example I've worked a lot
in the past with the European Commission
and European Commission tries to
introduce those Eid cards in every
European country and the idea is to do
tax forms and stuff like that online
without requiring requiring you to go to
an office and this is all great but
somebody forgot to think about how we
would use this and a problem in a
browser context is the only way that
allows you to access smart cards is by
using Java applets and this worked for
some time but after last year I don't
think with all the security problems
nobody wants to use applets anymore now
firefox had this experimental access to
smart cards which is pretty cool but
nobody picked it up and this is
something
please browser people think of us
Europeans so that we can use smart cards
eid cards from the prowl this would be
really cool and the advantage is that we
actually have a secure device that
stores the keys and applications could
no longer access the keys on that device
so it's a real improvement and I also
believe that we are the only people that
can actually assess the dangers and
risks of all these privacy intrusions so
we must fix the problems the general
public doesn't care because they can't
really understand the problems for
example many you have advised us to use
PGP as mine for emails student use
client-side encryption tools but I ask
you how often did your relatives your
mom your girlfriend your boyfriend use
this actually and so I'm saying this
opt-in is not going to work nobody is
going through the ordeal to install all
that on their computer what I want
is for my mom to go online it should all
be secure implicitly so she doesn't need
to do anything to be secure and also
academia must help us fix this problem
for example we had sharing schemes they
are already present and they would allow
us to render extortion useless so that
it no longer works to just extort one
specific person but they would have to
extort many people at the same time and
this is much harder to do and so this
would render this whole business useless
and I want something like one time
encryption so if you think of the
messages and mission impossible you read
it and then it is also into thin air and
the same thing is being researched in
cryptography because it's really hard to
do with mathematical tools but there has
been some nice research and I think this
would be perfect for secure and chats or
something like that so it you receive
the message and after you read it it
becomes useless nobody can decrypt it
anymore
and I want to encourage you to use the
web crypto API I think it's a major step
forward even if as we saw at the
beginning there's no real difference
between applications side crypto and
clients are correct or right now I still
think it's a matter of trust so even if
you do the crypto on your local machine
using local tools only you still have to
apply trust at some point because who
tells you that your browser or your
operating system is actually secure have
you looked through all of the source
code have you compiled it yourself and I
think this is a chicken and egg problem
because of course you can do HCBS
downloads you can put a signature on the
package you can verify that signature
but in order to verify the signature you
again need some piece of software so you
would have to do the whole verification
process over again and this yeah it's
just not solvable and that's why I
believe that clients are crypto using
something like them w3c API is still is
an improvement because mostly it doesn't
allow the app to use the keys anymore
they can't look into the keys they don't
see our passwords and so it's really an
improvement but a problem with this API
is it takes all of this code just to
encrypt a little piece of data and this
just calls for ya implementation errors
and unfortunately it's a low-level API
like openssl which gives you full
control which is a good thing but it
also gives you full possibility to shoot
yourself in the foot and worst of all
there's no security false so you have to
figure out yourself what works and what
doesn't and I'd rather want something
like this which is easy to use high
level you generate a key then you
encrypt your data and you're done
because I believe that sure we can all
acknowledge cryptos heart and it
certainly is but I don't think that the
API is surrounding it have to be hard
and complicated
that's why I work on a project which is
a ruby project still which is called
crypt and the idea is to provide a
framework that wraps all those low-level
API s and exposes a higher level API
that makes crypto understandable easy to
use and it's secure by default so you
don't have to figure out all the
parameters and I think we need the same
thing in JavaScript we're gonna get the
w3c API it's too complicated we need
something that is more simple to use and
so I think something like a grip chase
would be a good idea so that's it thank
you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>