<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Alyssa Ong: Bot Building - Debunking Myths And Hard Lessons Learned - JSConf.Asia 2018 | Coder Coacher - Coaching Coders</title><meta content="Alyssa Ong: Bot Building - Debunking Myths And Hard Lessons Learned - JSConf.Asia 2018 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Alyssa Ong: Bot Building - Debunking Myths And Hard Lessons Learned - JSConf.Asia 2018</b></h2><h5 class="post__date">2018-02-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dH1w90_i5fs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everyone how are you doing hopefully not
too hungover cool so my name is Alyssa
and I'm here today to according to J's
comp aja spilled some tasty beans on
vote voting I still don't know it's
filling some tasty beans actually means
but you'll see okay so who am i yeah
okay that's my intro done okay I make
sure we from the commercial software
engineering team in Microsoft so what we
do is we work with enterprise and
startup developers just like you guys to
build epic stuff so this is my twitter
handle if you want to like shown any
questions during my talk alright so on
the menu today I'm just gonna more
specifically cover these different
things so let's start with a simple
gentle introduction into what sports and
an LP okay so whose try to bought or try
to build on before okay
maybe fifty percent of you so in the
middle of 2016 around that time I think
Facebook released their messenger API
platform and a lot of companies started
getting real for more about you know
having chat interfaces or an engine to
build chat interfaces so it suddenly
became like really cool so have a small
little app that lives in your messenger
so yeah a tripod is a service that you
interact with by a chat interface and
this is common misconception that your
bot can only be smart oh it's a good boy
only if you use natural language
processing which is NLP but to be honest
that's a myth if your bot is badly
designed NOP is not going to save it you
can put makeup on a potato but it's no
potato okay so what about NLP natural
language processing it's a form of
machine learning text classification
specifically and it it involves you
trying to understand what your user is
trying to do so I think universally
there's these two main concepts that
have been adopted across all the
different chat engine platforms and
that's intent and entities okay so
intent is what a user is trying to do
and then entity is the important data
within what your user says that's
important so for example I want a chili
crab which is great in Singapore by the
way and sell it those are your two food
entities all right okay so how do you go
about making one I'm not gonna tell you
that do it the Microsoft way or the
highway
that's a ton of different ways you can
make a bot so dialogue flow is from
Google they acquired a Pio a I if you
guys didn't know that which from
Facebook that's IBM Watson and even
bought kit from howdy but today my demos
are gonna be using the Microsoft bought
frameworks nodejs
SDK seeing as this is a J's conf so I'm
hoping that a lot of the concepts that I
talk about today can be sort of used in
your boss no matter what framework use
okay can someone tell me what is well
what I'm sorry well that's a bot and
then have in common like a mobile web it
no takers okay
building one is easy building a good one
isn't okay
so rule number one when you start
thinking about designing your bot it's
really important to remember that bots
aren't mobile web apps okay and you're
probably thinking like I woke up on a
Saturday morning just to hear on someone
tell me this okay but what I really mean
is that there are a whole different
interface okay your users are gonna
perceive things and they're gonna behave
super differently
so I wonder illustrate in the straight
this with a project that I did recently
with a startup company out there based
in Singapore they are over a year old
and they have 24,000 users using the app
and what that app does is it helps you
solve math questions okay I wish this
one
I wish I had this when I wasn't doing so
well in math in high school but never
mind so what you do is you snap a photo
of your question and then what it does
is use machine learning to understand
what's in the question to give you
similar questions as well as any
suggested readings on concepts that are
inside the question and because their
user base is primarily secondary school
students which is between maybe 13 to 16
what they wanted to do is create this
tutor that's you know like a personal
tutor to engage their target audience so
what they wanted to do was to convert
their app into a bot and the problem
with thinking about it this way is that
you start to get and experienced it
isn't you know it isn't that good okay
so this is kind of like the app you send
in a photo and then it actually asks you
do you wanna see similar questions or
relevant topics which is similar to what
you see in the app as well okay so what
we did is we spend a week sitting down
with them and sort of revamping the UI
so before I go into the design
considerations that we put into this let
me just show you the v2 that they have
so there's actually sort of a proper
menu telling users what they can do and
this is using the cards which are
facebook Messenger actually provides you
with and users actually know how you
know what kind of images they can they
can upload to the bottom so I'm doing
this
and as you can see it will just
immediately display similar questions
I like the ball it's really quirky and
it has a lot of fun stuff inside and
then you can view irrelevant topics
about the questions as well cool
so okay we will use this as an example
to talk about the design considerations
there's two main sort of categories that
I will put this in one is managing your
users actions and the second one is
managing the way your board displays
things to the user so managing user
actions when you start the conversation
just immediately tell the user what you
can do for them okay and the user should
be able to just you know go in and just
do it
secondly at every step the user has to
know what they can do next so for
example after you show the answer you
can show like some suggested actions
like this for example at the end of
every conversation you should show them
like a bunch of stuff telling the user
what they can do next you should be able
to handle popular trigger words and
phrases so for example help me I'm lost
and stuck order I do exist quill and
lastly you have to be able to handle
their BS because for some reason users
love talking a lot of crap to your BOTS
so you should be able to handle some of
these for a good experience okay so I'm
just gonna quickly demo how to do some
of this in about framework okay so this
is just using a local emulator as you
can see I have some cards so you can use
this for your menu and how you
instantiate this just like really simply
you can create a message and then just
create two hero cards it's pretty
self-explanatory if you want to do this
without the about framework I think the
facebook messenger API has some like you
have to see what they accept in the
request to send a card to your user and
then if I
say Lissa okay so these little things in
the bot framework are called um some
suggested actions so you can just push
in a couple of actions so main menu
similar questions so equation and then
you send all of these as one message to
your user again messenger API has like
protocols with this so you can just send
the proper request and then if you're on
a handle like special keywords you just
you know user rejects you can just do a
dot trigger action and it will execute
the dialog okay so the last one is the
small talk and I want to spend a little
bit of time talking about this so I
wrote something called the small talk
module this one is a little bit harder
to do because there's just so many
things your user could say okay so API
delay is less dialogue flow actually has
a small talk module okay and it has like
1,400 of our menses so what I did is I
basically took out all those and
exported it to ATSB thanks google but
yeah I thought this was pretty good so
what you can do is go to this bar for
small talk repository and then you can
actually train whatever model whatever a
machine learning model you wanna use
with this and then the responses are
actually in a separate okay okay this
one so the responses are all in here I
just decoupled them so that you can it's
easier to edit this so yeah what I used
to create the Smalltalk module was the
Microsoft Q&amp;amp;A maker but like I say you
can use whatever NOP engine you're on
the trainer with and then I just
integrate it inside here because it's
exposed as an API so if I say I just
trigger this say whatever you want um
how are you
oh you're bad so yeah now we can sort of
answer these little things that they use
up doors I did you say thank you goodbye
super common things and you don't have
to use like specific key words you can
just use you know in general words to
express yourself cool okay so the next
category is how to manage your boss
display so the first one is you know
just cut to it your user wants the least
number of steps to do something so yeah
make it happen that way and also you
have a really limited space to show your
information okay if you think about it
your screen your mobile screen size
assuming your users on mobile it's only
this big if you want to show a wall of
text or tons of images your users not
going to bother like scrolling up and
looking at what you've done
sorry what you have displayed to them so
one good way to overcome this is
actually to you can see on this people
don't read they hate reading sorry I
mean let me show you that again okay
okay let's say your phone screen is only
this big okay so what you want to do is
you actually want to use typing
indicators which are quite a common
thing that you can use across different
platforms I think telegram probably has
one as well
and you want to give your users time to
read the chunks of text
bit by bit and like typing indicators
are a really good a really good thing to
use in this scenario okay
okay so now I'm going to go through some
popular scenarios and when I mean by
popular scenarios is a lot of developers
always like how do you actually
implement this inside the board okay the
first one being authentication it's
really natural for someone to want to
authenticate your user through the bot
because you know it's meant to be
personalized you want to know who's
actually using it so rule number one
whatever you do don't handle login
through the chat interface itself don't
do it what you want to do is like you
know normal or if you authenticate
through Facebook you open a webview and
then you just call back to the bot the
bot is basically a web service so you
know this is something that's you can do
let me just show you okay I think I need
to stop this first
okay
now let's run this saying let's restart
the conversation login oh wait what my
thing isn't showing that's weird
oh okay yes we don't know why it
suddenly changed or extent okay so I
basically said login and it's asking me
to assign them to my account so just
click on that sign in and then I just
make this dummy page just for demo
purposes don't do this at home please
use HTTP I'm just doing this for demo
okay so this is for so that someone else
can spoof if they get in your URL okay
and then now you're logged in so there's
this whole sort of seamless experience
that happens and you can actually just
use I've used passport here for those of
you guys who don't know what passport is
it's like this super good note package
for handling authentication and I've
just defined like a pretty easy local
strategy so you can use like whatever
strategy you want Facebook Dropbox
Microsoft's get hung go goals and then
what happens is your bot will receive
that message and then do the validation
over here yeah okay so yeah it's quite
flexible and please have no
identification this way all right the
next one is custom controls let's say
Facebook provides you with like cards or
quick replies but they don't provide you
with checkboxes for example and you want
the user to be able to select multiple
things before sort of going back to your
body okay so what you can do is make use
of the web view the web view is your
friend it's not this annoying thing that
something yeah I don't know people think
is annoying sometimes but in facebook
it's pretty non intrusive it just opens
up like this so just quickly show you
how
you can do something like this okay was
it I didn't what - sorry so if I say
something like quiz okay so let's say
you want your user to open this quiz and
complete it in in another window you
just open it and then you can say okay
why don't you say you know okay and then
when you submit that you can just go
back to the bot and yeah the book sort
of seamlessly receives the response so
yeah you're not just limited to the UI
UI templates that are provided to you in
the messenger protocol or in any other
chat protocol that you use if you use
channels that don't have embedded web
views I would suggest you use this
sparingly because it's kind of annoying
having to swap through like your Safari
browser and then stop back to the bottom
so yeah use it unless you really need to
okay so turn on being forms this one
seems really simple on face value but
I'm gonna show you why it's not okay and
I want to illustrate this through a
recent thing that we did with a company
called we go I don't know if you guys
have heard of heard of them before they
have an awesome dev team their company
basically is a flight search engine so
they have 700 over flight and hotel
partners that they scan through whenever
you make a search and we spent two weeks
with their dev team building building
out a bot that can take user like the
users search history and then provide
recommendations based on that and they
also wanted to integrate the flight
search capability inside the bot
so the v1 was something like this and
then we realized that this is what we
want the user to do okay realistically
your user isn't going to be as simple as
this because they love being difficult
sometimes they're gonna do
like this they're gonna do stuff like
this or this and it's I oh my god why
can you not yeah
so there's actually five different
scenarios there's a lot of edge cases
that you have to handle because there's
a ton of different things that they can
change and actually I'm gonna share a
story I try building a v1 of handling
all these different edge cases and let's
say it wasn't the most efficient way you
can do things okay and this was a
conversation between me and their
developer so it's like give me a while
to understand your code first okay
and when I saw this I was like oh my god
what have I done
okay so we went back to the drawing
board and sort of redesigned everything
and it looks something like this
this is the more readable version I'm
just really bad at drawing errors it's
actually simpler than it looks
so before I dig into this I'm just gonna
show you guys what the end result looks
like okay
okay so because I wanted to build a
recommender but you the user had to log
in so that you can retrieve the history
but for today we won't do that say I
want to go to Singapore tomorrow sorry
I'm ready in Singapore and I'll go to
Bangkok tomorrow okay
so identifies that that's what departure
day and that's your destination
destination okay let's say yeah I'm like
the worst user ever and I just say I
want to go to Bali instead okay
leave tomorrow and come back and I'm
just totally not answering what the boss
saying okay
and come back next Friday okay so you
can see that it's able to handle a lot
of different stuff if I say change my
destination they can ask me which city
it will be going to go from Singapore to
Singapore okay because I used to live
there for a while so it's awesome okay
so you can see that this actually
handles like you can throw whatever you
want at it and it can really handle a
lot of different scenarios oh it has the
mouse there that's annoying
okay so let's break this down a little
bit so the first thing that you start
with is you initialize the stack and
prompts this is using the above
framework but I mean you can you know
take the principle behind it so if the
user says I'm going to go to Bali
tomorrow you initialize the stack and
your prompts that you need from the user
and then if if this is the first one
so if they've provided some parameters
to begin with then you can just go into
this loop and validate their parameters
sorry if statement otherwise you get the
current context and then you ask the
user what you need from them based on
the current context and then extracting
the intention entities this part for me
required natural language processing
so either the user can search their
flights or they can change whatever
parameter they want and then the
entities are basically the parameters
that you need from them you might not
need an LP in your situation but I'm
just showing you you know how do i
execute if you do need an LP so you can
just extract an intent like this and you
can extract that into entities from your
users or trends and then you check
whether there's an intention for them to
change so you check that intent this is
pretty self-explanatory it's just a if
statement otherwise you move to validate
parameters okay so going on to a
validating parameters what you want to
do is get the current context and then
you handle the users date and put based
on the current context for example the
user gives you a single day like 30 of
January then you have to match it to
your current context to actually find
out what they're talking about if
there's no valid date input then you
just you know save that into the state
and then this is how you validate the
location in my case oops if there's no
location just say you know location
insert is false otherwise you just
validate that so you can use whatever
validation lodging you want we go has a
place API that lets you put in a city
code and get a location so that's what
we used to validate and then you pop it
off the stack because it's been you know
the location has been identified and
then you move on to the next step which
is checking whether all your parameters
have been filled and checking for
invalid input so no data entered no
location entered then you go and tell
the user to input a value value
otherwise if there's still things in
your stack you have to loop the dialog
again if your stack is empty it means
you have all your parameters and you can
get ready to search yeah so it just
loops back here after a while okay so I
want to wrap up with
I'm talking about the status quo more
specifically these few points so let's
start with the NLP conundrum okay so
what I mean by FAQ scenario is those FAQ
bots the ones that handle all your
customer service questions or plug into
a knowledgebase to handle many many
different kinds of questions okay
for example maybe the Singapore Airlines
chat bot can answer how a week and a bit
baby be when you put it in the best best
net when sure you check in there's like
a ton of different questions that you
can ask it now I've really had customers
settling just a third party in lp2 and
for a couple of reasons this is problem
called the code start problem it's
basically where you need a lot of
training data to reach the accuracy that
you need when when you make a NOP model
with too many intents it starts to get
really confused if you don't put enough
training data in it initially and yeah
this leads to something called intent
illusion this is just something that
I've experienced with FAQ scenarios a
lot of engines have intent limitations
and entity limitation in terms of the
number of intense and entities that you
can have and also not all languages are
supported if you want your bot to go
internationally so some possible
solutions you could do to get around
this is to use an obvious your first
layer but don't forget to about
traditional search this means as your
search elastic search sometimes just
doing like indexing your knowledge base
and answering answering questions
through you know like elastic search can
be super effective and secondly when
Emma NLP fails just make sure your UI
your user can actually navigate some
buttons to maybe get to get to the
answer that they want okay
so UI is another fallback and sorry if
everything else fails go to your fall by
message be like okay I'm still done I
can't handle this and then offer like an
email
hand over your honor you know Senate
email to someone or a live chat head
over if you have fun okay so number two
should you build about should you build
a bot this is my rule of thumb if you
can google it don't go do it
sorry if you can't bring it don't move
it okay this is like really homemade I
just use the Pens or join in okay so the
great debate bots versus search engines
versus apps I mean this is on everyone's
mind right
when building a boat you ask yourself
three things number one does your bot
have a unique value proposition that you
can't do by a search engine or your app
number two can it do it much faster than
using a search engine or an app and
number three doesn't actually fulfill
some sort of purpose or do you just like
the idea of having a bot because you
know it's like a password it's like dock
chain for AI about shame for everything
okay and lastly why why build a boat you
know
so for these couple of reasons they open
up a new channel especially to
Millennials so a lot of Millennials
actually love using boats you might not
use it but they definitely are using it
and yeah it just opens a new engagement
channel for customer service it helps
you alleviate a lot of the dumb
questions that your users might have so
yeah it will help you alleviate customer
service you can engage users in your way
and lastly it's personalized so I worked
I was talking to the CTO of we go and I
was asking him you know why do you wanna
build a bot because you already have an
ad sorry yeah you already have an empire
no website and he said you know I think
chat and voice interfaces are the future
one day I want to have a bot that's that
really knows my preferences so for
example if I want to go to fly on a
business trip to Manila it knows that I
want to fly first-class I can't afford
it yet but I want to fight first past
and I want to fly Philippines Airlines
and you can skip a lot of the you know
men or searching so that's the future
that here mission with it and yeah I
really think that that's a super
exciting future and I don't think it's
too far away from now come on
alright thanks everyone for listening
and if you have any questions just feel
free to tweet me</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>