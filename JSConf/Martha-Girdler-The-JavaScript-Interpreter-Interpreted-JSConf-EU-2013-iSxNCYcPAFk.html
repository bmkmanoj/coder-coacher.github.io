<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Martha Girdler: The JavaScript Interpreter, Interpreted -- JSConf EU 2013 | Coder Coacher - Coaching Coders</title><meta content="Martha Girdler: The JavaScript Interpreter, Interpreted -- JSConf EU 2013 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Martha Girdler: The JavaScript Interpreter, Interpreted -- JSConf EU 2013</b></h2><h5 class="post__date">2013-10-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/iSxNCYcPAFk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you
I'm Martha I'm a software engineer at
uber in San Francisco and I primarily
work in JavaScript I also work with
Python and I really like cats as was
said as I like bourbon and I really like
talking with people on Twitter so you
should follow me so also a disclaimer I
really hope this presentation is
coherent I'm quite jet-lagged so we'll
see what happens
uh so does anyone know what software's
primary technical imperative is this is
something that you've heard of sure my
this actually proves my point
managing complexity that's truly like
our only job as software engineers is to
manage complexity so you don't have to
think about too many things at any given
time I just wanted to put this up here
to remind myself mostly and just maybe
like kind of spread that amongst the
developer consciousness um I actually
found that from the book called code
complete written by Steve McConnell I
highly recommend it
so the only way to truly manage
complexity is to understand it and
that's why I personally like to kind of
dig into like the ACMA specifications
and figure out what's happening
underneath I really like to kind of
think about the gritty details of
JavaScript so hopefully you learned
something so javascript is usually
interpreted not always but what that
means is that your source code which is
the JavaScript code you're writing is
parsed which is then turned into an
abstract syntax tree which is then
generated in a bytecode which is then
interpreted into machine code and a
machine code are just as zeros and ones
that are the actual instructions to your
machine so when I said that it's usually
interpreted a1 use case where it's not
is in v8 it's actually just converted
directly to machine code and not
interpreted so javascript is really
wonderful which is probably why most of
us are here nearly everything is an
object which is kind of really freeing
to think about and functions are first
class objects which means you can store
them and variables you can assign them
as mess
to an object you can store them in an
array you can be passed them as
arguments to other functions and you can
return them from other functions so
really the only special property about a
function is that it can be invoked so
one of the one of the more complex parts
of JavaScript is because function
objects are first class they and they
can be passed around quite frequently
many things are decided at runtime so
these are things like scope or the value
of the keyword this and those concepts
are a little confusing at first
especially if you come from another
language so I love this quote I also I
hope everyone is either considering
reading or has or a JavaScript the good
parts but the best thing about
JavaScript is this implementation of
functions I got almost everything right
but as you can expect with JavaScript it
didn't get everything right anyways I
just like to keep that back in my mind
so I kind of tricked you with the title
of my talk I'm not really here to talk
about the interpreter I'm really here
just to talk about how your code is
processed so sorry that I checked you
there but I really want to spend time
talking about how function objects are
created and then subsequently how what
happens when they're executed so when an
a function object is actually created
several things happen behind the scenes
I've you know listed several things here
and basically all of these steps that
happen during creation they're kind of
encapsulated in this concept called an
execution content context and an
execution context is just a word and
that you this used to kind of
encapsulate the environment that a
certain piece of code that encompasses a
piece of code when it was run so and
fortunately for us or maybe
unfortunately I'm not sure but
everything and JavaScript is dependent
upon an execution context and the good
news is they're only three possible
execution contexts that code can be
evaluated in the first is global the
second is function context and third is
eval and so even luckier I'm not really
gonna talk about eval because it's kind
of not super relevant so we'll just
focus on global execution context and
function
excuse me context um so when you run a
script in the browser it first enters
the global execution context it will
remain there until it finds a function
and then it will subsequently enter a
function execution context so really
most of the time we're dealing with
function execution context and not
necessarily global there is always one
global execution context there can be
infinite number of function contexts so
the tricky bit is a few aren't operating
inside of a function chances are you're
in the global context and that's kind of
why everything is implicitly global
within JavaScript which is kind of one
of the more tricky parts so executing
context are you can kind of like
conceptualize them as operating within a
stack so the first when it first enters
or starts pressing and executing your
script it will enter the global
execution context and then once it finds
a function it will then that functions
like execution context so we push the
top of stack it will operate if it calls
function it'll keep happening and
especially like if a function calls
itself recursively that'll still
continue to happen it will continue to
enter a new function execution context
every time its evaluated but then once
it's finished evaluating or executing it
will release control back to the
execution context it called it and be
popped from the stack so this is how I
like to visually conceptualize an
execution context that's it's not an
actual object it's just something behind
the scenes but I like to think of it as
an object that contains other objects
and the three things that we're really
concerned with that happen are this
activation object inside the execution
contests context the value of the scope
chain so what's in scope for this
particular function and then the value
of this so here's the tricky part I hope
I get this right this is insanely
complicated so what happens inside of an
execution context when it is created the
first thing that happens is an
activation object is created an
activation object is
I mean I like to think of it like an
object but the first thing that happens
is a property is appended to it called
arguments and it's just a list of all
the arguments applied to the function
and then the second thing that happens
oh and I should note that this happens
in order when when the context is
actually created so the second thing
that happens is scope is defined and
this is hard for me to articulate so
scope it's basically a chain of objects
or object like things that are available
to this function or everything that's a
yeah in scope and available to this
function so all the identifiers that it
can resolve are included in scope maybe
I won't get back to that later I have
another slide that discusses that in
more detail but the third thing that
happens is variable instantiation and
this is where things can get a little
bit tricky so first well actually one
thing that happens is so there's this
activation object that I mentioned
that's created first and then a scope is
defined so at this point when variable
instantiation happens the activation
object kind of magically is turned into
something called a variable object and
and basically what happens are the
parameters that are defined inside the
function are added as properties to this
object the values are signed as the
resulting arguments that are passed in
the function and it's yeah and then the
second thing that happens or function
declarations so if there's a named
function the name is appended into this
variable object and the value is a
pointer to the function object itself so
yeah the name is the property and the
function pointer to the function object
is the value and so the third thing that
happens our variable names are appended
to this object and the important thing
to remember here is the variable values
assigned to the property name are
undefined and also another like weird
thing to think about so when the
variable is changed or when and variable
instantiation is happening so first like
I said parameters are defined and their
values are the arguments
the second thing function names are
supplied as properties and their values
are pointer to the function object
variable names so if there happens to be
a variable name that she
name identifiers as a function it will
be overwritten or dos pardon me it won't
be over and it'll just be ignored so
that's just something to keep in mind
and also one other thing to keep in mind
is the variable names are are put into
this variable object but the values are
undefined um so if you ever see hosting
that's mostly what that's about so if
you're trying to reference a variable
before it's actually been executed or
like assigned with the equal sign like
in the code
it'll be undefined until that point and
so the last thing that happens is the
value of this is defined and let's see
this is tricky but I tried to like I
tried to make it as simple as I possibly
could this holds a reference to the
object that the functions being applied
to at runtime which is tricky because
functions will be passed around so
anyways that's that's how I try to like
simplify that in my mind whenever I'm
debugging or going through code okay so
I promised I would talk more about scope
so basically scope is this context
variable object at the the forefront so
when if you're trying to like resolve an
identifier like the name is like a
property or a variable it's gonna check
this functions variable object first but
also at when this execution context is
created it stores a reference to its
parents variable object which wouldn't
turn can't contain a reference to its
parents variable object all the way up
until the global until you reach the the
global execution context or the the
global variable object so that's that's
what lexical scoping is all about and
that's why scoping can only happen
within a function because it's actually
scope is only defined within a function
execution context and one interesting
thing to note about variable
instantiation when your script is first
run and your instill in the global
execution context all the top-level
variables and functions go through the
same process so they actually become
members of the Global's the the global
objects variable object that's I know
that's like super crazy but if you have
a top-level function that's why the
value of this applies to the window
because it at that point like after it's
been processed that function itself is
now a member of the global object
and another way to like think about the
value is this as it points to the object
at which the function is applied so I
know that's super tricky okay so that's
creation it's kind of crazy and I hope I
explained it in a coherent way we'll see
that remains to be seen but after that
activation so basically after a function
has been created it runs and the the
code execution stage begins okay so I
just wanted to take a moment to talk
briefly about closures because I have a
feeling that or I know I personally
until I really learned about the
variable object of scoping and like what
that truly means I had no idea really
what closures were about and so I have a
kind of complicated definition up here
but I'm going to simplify it but
basically a closure is formed when an
inner function is made accessible
outside of the function which was
contained so imagine if you had an inner
function the outer function returns that
inner function so basically what's
happening there is the inner function
contains a reference to its parents
variable object and when you actually
return it you make that available for
when that inner function is executed
outside of of its normal context you've
effectively closed over that variable
object and make it available um and so
that's what that's all about and I truly
did not think I would blow through that
so quickly but I did I'm really happy to
answer questions if anyone hasn't
so yeah are there any questions out
there I can bring you a mic and your can
just find me either on the internet or
in real life you can talk to me about
this oh we do we have a question so when
you talked about the I forget whether it
was the context object or something we
have the activation record and all that
stuff
are there any interpreters where this
object is actually exposed no it's just
like an implementation construct so it's
just something that happens behind the
scenes and it's not an actual object
like I just think about it that way like
it doesn't have a prototype or anything
like that it's just like basically it
like assigns all the values to all the
things you have access to within that
function within the context of
whatever's running in memory it makes me
wonder after seeing Dominic's talk
earlier whether we need to convince some
of the VM implementers that they should
actually expose these kind of things
because you can do this I mean small
talk did this and and other languages do
this and you can do some really fun
stuff that sounds super fun it sounds
like you're adding complexity it makes
me nervous yeah you're gonna fight with
eval and I friends yeah a couple people
wanted to like kill me when I said that
we have any other questions yeah II
thought wasn't inherently bad it's just
inherently dangerous right but I just
prefer not to talk about it hey Martha
can you spend the word on block scopes
oh yeah so one of the tricky things
about JavaScript is it looks a lot like
see like it kind of borrowed a lot of
the same syntax so and see everything is
scoped its scoped by block so like an if
statement or something like there the
scope would be contained within that
block but unfortunately it / fortunately
for us with an javascript scope is not
defined within like an if statement it's
only defined within a function so that's
why if you train like reference a
variable inside like a for loop or
something it's not actually scoped
within the loop its scoped within the
function that contains the loop that
help
maybe but yeah there's no bloc scoping
only function scoping or its global
those are your two options more
questions okay I know we have so much
time I have no idea how I rambled so
quickly so is it ever possible to point
to like the parent scope is it kind of
sounded like it because you mention
there's always a references up yeah
that's actually happens for you
implicitly you always have a reference
to like an in the in the scope property
like in the execution context it always
has a pointer to the parents scope
that's why I like Global's are implicit
because it will eventually like you the
scope will eventually resolve all the
way up to the global level so right so
you can always like access named
properties of like the parent scope but
you can never reference it directly
right like parent this only if your turn
it returned a reference to that to like
what the context inside the function
outside like a closure like that be the
only way that you could do that or
window or global and node don't do that
though can you talk about just kind of I
guess how you got started with reading
more into the actual implementation yeah
like how you learned all this stuff yeah
yeah so actually a fun in fact I'm glad
we get to talk about this this is much
better than whatever I just did I have
an art degree I totally self-taught I
went to her school highly recommend it
wonderful program but for some reason
like even like through my like school
like through high school of that like I
kind of have to completely immerse
myself with something and I don't feel
like I felt comfortable going forward
until I know every small detail about
every little thing
so I just like googled a lot and the
internet it a lot and all of that but
reading the actual like Eknath
specifications or amazing so yeah it's
just curiosity or sometimes like I'm
really guilty whenever I'm coding I'm
just like banging my
and my hands and my heart against the
keyboard and then not really
understanding what's happening and so I
think reading and researching kind of
gives me a chance to step back and
actually understand what's happening but
yeah I read specification it's pretty
awesome for both a little weird
maybe maybe that would be a chance for
me to write some blog posts or maybe a
little simplified but yeah it's a
question from Brian what is hacker
school Oh hacker school is a three month
program in New York City and they call
it a writer's retreat for hackers or
programmers they do prefer that you have
some experience before you go I
shouldn't admit this publicly but I lied
on my application and somehow I I still
made it through the technical interview
anyways so but they're wonderful
yeah it's just basically three months
for you to do whatever you want and they
they give you a lot of resources to
mentors and they focus on open source
and it's a really like non-judgmental
atmosphere you can ask any question and
I really appreciated that about it I
really need to book a car somewhere
could you help with that I can't I can't
in Berlin yes you do burn any more
questions I just wanted to mention to
the earlier question about whether you
can whether there's any way of actually
inspecting sort of like the the scope
chain if anyone saw my talk earlier you
can you can actually use something like
a Suprema
to rewrite your JavaScript so that you
actually have an object which knows
which scope of function was identified
in so you can do some pretty fun stuff
with that nice callback to an earlier
talk yeah yeah
I am actually here all day okay yeah I
know
we're exhausting cool topics well it is
lunchtime so we're using the amazing
innovative radial system for lunch but I
don't know what that means
so innovate okay thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>