<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ben Combee: Enyo: A JS Framework for Mobile Devices | Coder Coacher - Coaching Coders</title><meta content="Ben Combee: Enyo: A JS Framework for Mobile Devices - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ben Combee: Enyo: A JS Framework for Mobile Devices</b></h2><h5 class="post__date">2013-01-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BKwTkM4k-xc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm Ben come be I'm one of our developer
engineers inside of the palm global
business unit of hewlett-packard before
i get into the talk i do want to
highlight that a lot of the slides here
going to have a blue background the
legend around HP is that they're a
standard template has a blue background
so when people go in print slides they
use more the blue coloring and that
apparently see most expensive ink for
our printers so I'm kind of ditching
that trend a little bit by going with
white backgrounds for a lot of things
but thought you might like that so let's
get started here for those of you who
aren't familiar with webos this is an
operating system that was developed
within Palm I got launched in 2009 with
the palm pre device and you know later
this year we have a whole series of new
devices the touchpad the HP 33 and HPV
are they're all coming out with various
versions of what less this talk is going
to be about the NGO framework but I
guess to give you some context in n yo I
need to talk a little bit about what's
on webos underneath it so this is the
big boring architecture diagram key
things to take away here is that when
you think webOS which are actually
running is pretty much a web browser you
pull out a webos phone like this one
here and the actual user interface is a
bunch of cards you can figger those
cards as tabs in the web browser and so
each application is actually its own web
page running JavaScript running HTML
we're using web kit and v8 is kind of an
inch and below that now we also support
other kinds of applications I mean we're
not strictly JavaScript we also can you
can compile some C++ code and use that
too but most of the key applications in
the platform all the ones that we ship
is productivity tools lots of the ones
in our catalog are based around
JavaScript now looking up here your C
over to this side we also talked about
JavaScript services in addition to using
v8 inside a WebKit we're also using an
inside of our nodejs runtime and we
actually employ several key people on
the node project like Tim Caswell who
talked earlier today notice actually
being used to you know give you
interfaces system services let
applications write their own service
so when your cards not on display you
still gonna have something sinking to
websites in the background and you know
dealing with all that but what I mainly
sure to talk about today is kind of this
part over here the web applications are
runtime and this new thing that we call
n yo so the story about n yo begins with
aries and aries begins with mojo so
going back to 2009 the palm pre comes
out mojo is the javascript framework
that we ship on it and mojo motors
design basically for this 320 x 480
screen it's designed around a lot of
HTML templates it's basically it's built
on top of prototype and then we took a
lot of tempting stuff we build we build
a lot of widgets but in order to do
anything in mojo you basically had to
write some HTML over here you had to
write some JavaScript over here you had
to hook things up make sure it all works
about the only way you get things done
at least at first is look in an example
and kind of copy and modify that not
very intuitive I mean required on
o'reilly book to figure it out so you
know we had mojo l for a few months we
had some internal tools people we had
been in d on who did the best been
editor over at mozilla came over they
brought a lot of best men ideas and kind
of collaboration with us instead of some
engineers headed up by Matt McNulty
who's now our framework team lead Scott
Myles and Steve Orville who had done
opus GS built this tool kit called Ares
so if you never use Ares that go to
areas palm com it's a web-based ide for
building mobile applications so you can
go through you can you know design your
thing by dragging widgets on to you know
a phone looking screen but then you can
also double-click on things and it
brings up a javascript editor you can
define while your methods do it's great
i mean for building a lot of simple
applications you can do things very
quickly and you know people loved it but
in order to build ares we had to kind of
build this shim this opus j/s shim on
top of mojo it basically it results him
that every application had to download a
few extra 100 k of javascript you had a
lot of lag its run time when things
started up and it just you know wasn't
the best experience so
as part of working on webos too and just
looking at how can we improve the
platform how can we scale up to a lot of
different devices the team decided hey
let's build a new framework and it get
named Ares okay so i got name n yo Ares
the God of War any apparently Ares
sister so you know the names work out
pretty well so what NGO gives you the
ability to do applications that look
kind of like this this was actually the
original prototype application build is
kind of a proof of concept of the
framework this is the email app
something that looks a lot like it is
going to be shipping on the HP TouchPad
this summer a lot of apps that look like
this is going to be shipping on the
touch pad because we've kind of gone
through and reimplemented all of our
core applications in this new framework
and you know if you want to see it
actually running on a touchpad well
maybe I'll pull out one of these and
hold it up and if there's our email
application running an annual on a
touchpad if you want to actually see
some demos system where the devices you
can find some of the HP people in the
audience they're the ones that don't
have macbooks so let's get into a bit of
will you know what's actually going on
behind the hood here or under the hood
anatomy of an annual application so an
in your application is basically a bunch
of HTML it's a bunch of JavaScript
there's some metadata I'm going to just
take you through a couple of quick
slides on this not going to go line by
line in the code but what we have is a
app info JSON which is a bunch of
metadata about the application we've
actually used this file since the
beginning of webos it's just a standard
way of saying here's your application
title here's your app icon what's your
version number you know no big whoop key
thing to note here is that we have a
main and that actually says what is the
HTML file that gets launched you know in
this card when the application starts up
another thing is that type is web the
type is how we indicate what kind of
application if you're if you build some
C++ code and run it there then the type
would be pdk final thing is this UI
revision to this is actually it's still
kind of secret but this is a flag that
says that your application is
able to handle the large size screen on
the touchpad or other devices if you
don't have that setup and it's going to
run an emulation environment that looks
like a phone that you know you have a
little phone screen in the middle of
your tablet that's not so much fun we
have lots of dock options here this is
you know part of our developer website
okay depends jas so every end your
application has at least one of these
it's basically a file that lists what
other files get pulled in the neat thing
about this I said the depends can
actually reference the directory and so
this allows you to kind of build a
module application where you're not just
pulling in single files at a time but
maybe a whole other directory that has a
bunch of things to implement some key
widget implement some data service okay
not a big deal that's depends now we
have index HTML so you build a website
index HTML kind of the beginning of your
website what we've done here two key
things first off there's a script tag
which actually pulls in the onion
framwork and then we have this code here
kind of the middle that's all it's doing
is it's creating a new object that's
based on something you built in n yo and
rendering it into the document this kind
of pulls a key concept of n yo whereas
with mojo we had a lot of HTML a lot of
temple thing a lot of like you know
setting up a page and then going back in
and replacing items as needed ennio is
putting the control in JavaScript han
it's not HTML as you look in the
framework you'll see this pattern over
and over where the actual kind of HTML
that's in the Dom that's being generated
is being done by a JavaScript not
necessarily by the application developer
another thing this actually does kind of
interesting as part of an optimization
for mobile on the device our web kit has
a lot of these kind of framework files
that are a built-in where when you use
it in an application you know instead of
us having to go and parse all the code
for the annual framework we actually can
kind of just tell v8 to pull in this
precompiled file however we have the
ability to say launch equal debug on
that script tag and that will tell it to
go and actually pull in the original
source code which helps if you're trying
to debug and figure out why you know
something down in the middle of
framework isn't acting the way you want
so the last 5 i'll go into here for this
kind of hello world type application is
in fact the hello world control so any
OS built around the idea of a single
inheritance object hierarchy it's built
around the idea that you have objects
and some of those objects controls and
controls can own under controls so for
this very simple application we've just
defined a single control and the
contents of it are the string hello
world so this is not going to be a very
exciting thing but why don't we switch
over to our browser here and see what
this looks like hello world okay now
let's look at some more exciting things
so the philosophy of any o is basically
kind of a set of things there I'm going
to talk about some of the design ideas
that guided us in building this
framework some of the trade-offs we made
and basically why we made some of the
decisions we did so first thing to
notice that applications are a target
unlike frameworks like jQuery which
target websites ennio is entirely
allocation framework so if you're going
to use this you're going to basically be
building it to produce rich applications
that pull data from databases from web
sources and the show it to the user and
give it some way to interact email
application is kind of our standard you
know you know our standard bearer for
this but we've also used to do contacts
to do photo viewers to do a web browser
but apps are the kind of key target here
one of the big things about nu is that
we reuse code through components so you
know instead of us you know having your
index.html filled with here's a bunch of
things about my app you actually build
up a component and then you render that
component as your application give you
an example of some of the ideas behind
this so I move this mouse we don't have
that spinning cursor there so annual
provides this kind system a kind is
basically our version of the word class
we can't use class by itself because
that's the reserved word in JavaScript
so every kind of a parent kind going all
the way back up to any other object
which is kind of the root of a whole
the key thing that this whole kind
system gives is the ability to subclass
an existing class and easily call the
parent or the methods of the parent so
in doing this we have this whole
inherited method and so the magical
inherit is that it will call your
whatever the previous version of this
that you overrode in your class then the
other thing object in harrods the
property cysts are provides a property
system so when you're creating these
objects you have the ability of
specifying properties and then later on
you can easily over I the properties and
provide documentation what they are it
also provides a kind of magical methods
for setting getting and then noting when
a property is change which works really
well especially if you're building some
sort of a online code building UI layout
type program we want to actually you set
a lot of properties based on drawing
something on the editor and the screen
rather than just writing code we have
components that's the base of our kind
of actual Dom object model components
let you have a collection of other items
that are owned by one so an example is
you have a dialog box well instead of
having to then define the dialog box has
a list and then the list has all these
items you can actually kind of specify
here's the list here's all the sub items
but all of those are actually owned by
the original dialog box and it's easy to
reference a lot of things even you have
a very complex infrastructure another
thing that we provide is this dollar
sign hash so instead of having to do a
lot of complex methods to query you just
say this dollar sign dot whatever the
name of the control you happen to have
and then you can call methods directly
on that another the key ideas behind any
o is to support flexible layouts one of
the problems we head back in the
original Pomfrey was you know everything
was built for 320 x 480 but everyone
introduce a bigger screen device we had
to figure out you know suddenly either
redesign everything so how do we solve
this well we use the Flex box CSS model
that's been supported by WebKit for a
while is starting to be supported by a
lot of the other browsers so horizontal
boxes for
ah cool boxes CSS properties for spacing
padding all this stuff kind of combines
two lettuce produce a flexible layout
where if you change the screen size
which might just be as simple as
rotating in device one way or the other
then all of a sudden the layout kind of
happens for you you don't have to do a
lot of extra calculation now recently
we've discovered there's some issues
with flex boxes they tend to work great
at the high level of the application but
if you have like a complex list a lot of
he'll basically if you nest things way
too far down then you can run into some
speed issues but we've been writing code
to basically do kind of fixed versions
of these flex boxes for cases where you
need to be flexible but you don't
actually need to reflow all that often
one of the things that Enya does is it
favors code generation and layout tools
/ kind of static HTML the idea is here
that your javascript is actually going
to be creating HTML that's part of all
your various seems rather than the
designer specifying everything out you
know to the div but this allows some
really nice object-oriented
encapsulation so you know if you have an
OP JavaScript object that's going to
generate this HTML for you then you can
stick that object in a tree and then we
can generate the entire scene at one
time and you know avoid having to do a
mess acerra Lee a lot of Dom work to
continually add new items into his page
also we really like the idea of being
able to do ides being able to produce
layout editors for these web
applications and you know right now our
area stool is only supporting mojo but
in the future we're if you know fully
intending on providing that same can I
de experience for any elapsed example of
application structure kind of the
JavaScript layout of an application
rather than HTML this is just taken from
one of our basic applications which is a
documentation viewer so you know when
you're looking through figuring out
where everything is in the n.o framework
you actually use an nual application
that goes and reads the annual source to
produce these docs for you and so you
know here we're kind of creating an app
menu we have you know various properties
defined on it the app menu owns a flex
box which
produce other things and it basically
kind of nests all the way down here but
basically all of these things in this
whole nesting tree are actually owned by
the one thing that has at top level
components array which means you know
you have a lot of flexibility in how
events come back and basically the owner
of all these is able to handle all the
events generated by its children and
that provides kind of really nice event
model for the app another of the values
of n yo is that you know we refer
javascript / HTML kind of going back to
we'd rather generate the HTML source
from JavaScript rather than write it
directly we also believe very much that
javascript is going to be quicker than
WebKit one of the things we do is that
by having this whole JavaScript object
tree is there able to cash a lot of the
things that normally you'd have to query
the Dom to find out about and the over
time we've seen VA we've seen trace
marker you've seen all these engines get
much quicker do much better job of
handling memory whereas WebKit gets a
lot of new features but speed
improvements aren't so much so the more
we were able to kind of push a lot of
these decisions into the JavaScript
layer which is running yo chittod
running almost as fast as you know pure
compiled code it makes the applications
run faster on the device rather than
having to go and make queries into the
big Dom and you know wait for whatever
complex things have to happen in that
engine just kind of VO and further
application of this caching the Dom in
the JavaScript this actually ties into
something that we call the virtual Dom
which is basically this idea that when
we're trying to generate a scene for an
application instead of us going in and
make calling a bunch of Dom methods to
you know insert object modify attributed
insert object modify attribute addchild
at child add child so on we're actually
going and we're generating a really long
string so like every control can
generate the HTML string for it and we
can nest of strings inside of each other
and so ultimately we end up having this
big string of HTML and then we just do
one set innerhtml call and a WebKit one
thing it does very fast is parse HTML
so instead of doing a bunch of Dom
methods into the into the WebKit wean of
doing one set method it goes parts this
is HTML really quickly and generates a
scene very quickly for us works out
pretty well in practice another value of
the annual framework is supporting
devices and supporting the desktop so
mojo pretty much was only usable on
device you could you know we have an
emulator that you could run you can kind
of do some work in WebKit you know maybe
Safari or Chrome but it didn't work that
great however with any o we we designed
it originally actually in chrome in
Safari and then pushed it to the device
so all along the idea was set you can
build your application as much as
possible in the desktop and then push it
to device on the desktop you have great
debugging tools you have great profiling
tools you can monitor what's happening
over the network and then get it to the
device and things should tend to work
the same way that's generally its mean
you'll building the framework to work
well in the desktop but also you know
making sure that behavior doesn't change
a lot another final kind of value of
venue is supporting the special features
that we have on webos back in that
architecture diagram i talked about
services well on our device what we do
is we have kind of the system partition
into the user interface what's running
inside a WebKit which shown this cards
and we have services which are kind of
basically background processes they talk
over a palm system bus which can be
thought of kind of similar to http
except that it has the advantages of
everything's authenticated on the device
a service can you know deny access based
on what particular process what
application ID is trying to talk to it
and services also can do subscriptions
where you subscribe to you know some
data from a database mop being modified
and you know instead of just having to
keep asked over and over again you get
pushed to your application whenever that
data changes so we have full support for
that and also you know applications to
provider and services based on node we
also provide a mocking facility where
if you're testing on the desktop you
basically provide kind of data values
for these services so your application
can call the same calls that would make
on the device but instead of you know
having to have a device connected you
can just look at a data file stored with
your application and send that back
that's how we do things like test out
our email application on the desktop and
not have to have a device hooked up we
support notifications actually it's one
the real strengths of webos some i wish
i had a projector here for this because
well if you can look you see like in the
middle of my screen I have a couple of
notifications they're just about my own
email and accounts things that's going
on in actually what's happening inside
webOS is that applications in addition
to their own cards can create these
separate notifications which actually
kind of our own HTML web windows put
data into them and then we have a whole
way of stacking that up so that you can
view all the various notifications from
your different applications at once
dismiss them if they're not important to
you and move on with your life multiple
card window management important part of
webos applications can in addition to
just having kind of the main tab they
display on you know occupy other tabs
ennio basically supports this by letting
you create a different index HTML or you
know start HTML page for each one but
then the different windows can share
data between each other either I posting
messages back and forth or just through
a common root window that they can all
talk to we have an iframe based method
for doing cross a flan Qing well you
said internally in the system for doing
things like providing access to the file
system we have like a special privilege
file manager app and then other apps can
you know basically stick it into an
iframe inside their view the user
interacts with it and then that sends a
message back the original app that
invokes it saying here is what got
ticked by the user and then we also
support object tag based hybrid
applications this is a method where an
application can you have part of its
functionality than JavaScript part of it
done and compiled C++ code and then
that's actually invoked by putting an
object tag with a special mind tide that
causes this whole separate process to be
created with
c++ codes running then that can be
displayed as part of your JavaScript
application internally we're using it to
do things like parse Microsoft Word
files for quick office or handle drm
books for the amazon kindle app so any
other platform we've been doing a lot of
work on this since we originally
announced it kind of we first showed it
back in February 9 that are a big
developer event and since then it just
gets more and more fleshed out so if you
actually want to learn more about the
annual API I suggest you start reading
some of these classes I'll start reading
them to you and your activity button and
you know Jake's context and you have a
ha ok ok I'm not actually going to read
all this we have a very nice
documentation viewer but kind of these
are the kind of key areas that we're
tackling in the framework language
instinct shins kind of the standard
stuff you get from any JavaScript
framework binding all that the system
which I talked about earlier with
objects and components Dom management
which is basically our whole system of
generating HTML code cashing it in
JavaScript and then outputting all at
once to generate pages we have input
controls not just standard like wrapper
around input but all the various styled
things that kind of give our web
platform its own distinctive look
everything from sliders now all that
containers can include things like pains
pop-ups dialogues all these things you
want to kind of organize your controls
and application list appears in area we
spend a lot of time on because a lot of
dealing with these heavy data
applications is how do you make a big
list but say it's email messages say its
database records well you don't want
necessarily want to create you know all
these Dom objects just for the list so
we have virtual ways of that where we
page in a bit at a time and kind of keep
the scrolling going but you know we
don't necessarily have to have all that
in the in the actual webpage at once
services are an area already mentioned
how do you interface with that we also
have a whole globalization structure
which done really tells you information
about the region that you're running in
but also provides a way for your
application to have localized resources
so you can replace strings based on with
language around
and finally a very extensive support for
the web platform so now the fun part let
me show you a few demos of some of the
things so they don't have a projector
setup for the device I'm actually going
to run these in Chrome so we've already
showed hello world next thing on a show
here this is just our API browser we
have a list running over here with a
couple of pains switch between that you
can go through and you know pick a
random component all this is being
generated on the fly by the actual
application browser based on the source
code that's stealing that no framework
included with this next one I'll show
you here is a sample called style
matters this is basically one that we
include that lets you kind of browse
through all the various controls we
provide look and see how they work you
know all of the stuff we have is kind of
boring stuff like oh here's a fixed
header okay that's great but you know we
can do more interesting things like
dialogues we want to dialogue without a
pop up from the bottom of the screen yay
what a two-button dialogue okay era
dialogue how do we do with all that next
sample here is this is actually just
more of a kind of looking at the way
various controls look in an yo so this
kind of let's just kind of very quickly
list through a lot of various you know
input fields dividers search engines you
have a pop up for picking integers
making various things you know this
basically we're showing this in chrome
but these work exactly the same way on
device well except that you're touching
instead of you know using a mouse this
is an example the dragon truck system we
have an N yo so tapping and holding on
this suddenly gives you a little icon
which will follow your finger to a drag
target here is showing virtual repeater
so the virtual repeater is a special
kind which lets you repeat a whole lot
of elements basically what you would do
for a list but it doesn't necessarily
generate the entire list at once it
generates a page of that at a time
and as the as you touch and scroll
through you know have the kind of
inertial scrolling well it's going in
its you know creating new ones to put it
this in getting rather the ones at the
top so your actual page it's never over
loaded this was really important on
mobile devices because the more objects
you have on the page the more memory you
use a slower things get next over is
pop-ups just showing some of the things
we're doing a lot of work with CSS
transformation so you know just showing
a pop-up modal one no problem maybe you
want to have it animated popping in
that's great yeah some more transitions
even though the fancy pop-up which you
probably would never use in an
application but it's their kind of like
you know the fancy storm window shutter
animations and video toaster back in the
day yep the fancy rotating pop-up whoo
this is an example these actually are
sliding pains is a very important part
of our UI look and feel you know if
you're working with an application on
this you wanted the ability to both you
know be able to see lots of levels of it
but also zoom in so what we've done is
if you can see down here there's kind of
a whole sliding effect so you can go
fullscreen with that tap once and it
pops out tap again that pops out and the
idea is that you know you drill through
maybe an email application you drill
through you know here's your list of
email providers next is a list of you
know whatever full item if you have in
that folder 1 over is the actual reading
pane another type controlled we have
nano framework is just pains if you'd
play with webos before there's a very
much the idea of scenes and like
switching between your one scene to
another back gestures well pains are
kind of the way you're organizing this
in n.y now so what we've done here is
just showing you you know you can you
know switch between various things
they'll take up full screen and this is
actually a flex box where you have a
header object to find a footer and the
pain is there in the middle final thing
I'm going to show this is our carousel
control and the idea with carousel is
that this is like you're in a photo of
your application the user one
to swipe through so you know just with a
quick swipe of the finger move back and
forth between these various pages and
these are all being generated virtually
on the fly so that's just a few examples
I mean this is all very much developer
demo if you actually want to see you
know the way applications work one way
to do that is to join our developer
program you can go to developer palm
calm and get a lot of details on this
Web OS 30 which is the first one that
ships with Enyo is currently in early
access so if you mailed a PDC at palm
com saying hey I want it early access to
any Oh we'll get you all the details
right now it's just a simple NDA but all
that's going to be coming open open to
the public once the touchpad ships this
summer we're really excited about this
we feel like the touchpad is kind of our
big chance to bring the whole webos
experience to a much wider market and
you know any coming to phones to other
devices going for in the future and we
really love to get your feedback as the
JavaScript community on what you know
what we can do well and how to improve
everything so a big cheesy thank you
transition for spending a few minutes
with me today have a great j/s comp
uh you know there are planes dress we
didn't have to take a wagon to organ</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>