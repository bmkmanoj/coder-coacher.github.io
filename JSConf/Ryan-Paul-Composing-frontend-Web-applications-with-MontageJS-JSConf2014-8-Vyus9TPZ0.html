<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ryan Paul: Composing frontend Web applications with MontageJS [JSConf2014] | Coder Coacher - Coaching Coders</title><meta content="Ryan Paul: Composing frontend Web applications with MontageJS [JSConf2014] - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ryan Paul: Composing frontend Web applications with MontageJS [JSConf2014]</b></h2><h5 class="post__date">2014-06-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8-Vyus9TPZ0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so today we're going to be talking
about composing front-end web
applications with montage jas so i'm
ryan paul i work for montage studio in
developer relations and i'm a front-end
app developer so back in the day like
1801 there's an inventor named Eli
Whitney he's best known for creating the
cotton gin but he was also a gun
manufacturer and he's one of the
pioneers of interchangeable parts he had
a contract to produce rifles for
Congress and they were investing heavily
in you know advanced production
mechanisms that would allow them to get
more output so at one point they hadn't
give a presentation for for the military
in Congress to show what had been
working on and what he did is he took a
bunch of rifles that he had manufactured
he disassembled them on the spot and he
put all the like parts together so you
have you know all of this component in
one basket all of that component in
another basket and then he proceeded to
assemble rifles from the disassembled
parts essentially mixing the components
from previous rifles to build new ones
and it was unprecedented I mean people
had had this idea that you could do that
but nobody had actually done it at
manufacturing scale before and it was
considered one of the milestones that
that brought the Industrial Revolution
to the United States when you have
interchangeable parts you can simplify
manufacturing increase repairability and
generally reduce all of your costs
so in the 60s there was another pioneer
a software pioneer Doug McElroy and he
gave a presentation for the NATO Science
Committee and he had a new take on this
old idea of you know industrial
manufacturing he wanted mass-produced
software components that would allow
developers to take an assembly line
approach to software development
effectively building applications by
piecing together existing parts so here
we have mr. Pugsley at the assembly line
illustrate that point but you know this
is a really compelling idea Doug McElroy
he went on to invent UNIX piping which
is I think one of the most you know
elegant expressions of this idea of
assembly line programming you know but
we've learned a lot since Doug McElroy
you know we have all of these new ideas
from object-oriented programming about
you know encapsulation and you know how
to maximize code reuse ok so you know
what we what we want to be able to do is
truly assemble our entire front end web
applications from individual units of
prefabricated functionality we want to
be able to simplify development and we
use more of our code so today I'm going
to be talking a little bit about how you
can do that so montage is is a front-end
web development framework it's designed
for building single page applications
and it works in modern browsers it's an
open source framework we distribute
under the BSD license so one of the the
central tenants of montage is is that
everything is a component our component
architecture is somewhat unique and it
allows for this kind of composability
that you you really you know that we've
really aspired to previously so in a
montage project you have all of your
components and they're stored in a
folder which you know by convention we
give that dot real extension and
component you know there's no magic it's
made up of standards-based HTML
Javascript CSS
it is just web content but it does have
one thing that's unique and that's a
JSON component declaration that JSON
declaration is where we describe the
contents of the component and the way
that those that the the pieces inside
connect to each other we define our
bindings and that sort of thing so and
talk a little bit about the you know
that now we have you know the HTML
content is just HTML you know you have
an HTML file then it is you can open in
a browser you can view it as HTML you
can actually take the individual content
from a single component and view it and
edit it there's really important because
it facilitates better cooperation
between developers and designers your
designer doesn't have to understand
anything about the framework in order to
be able to work with the underlying HTML
content so the JSON the component
declaration it's it's basically like a
declarative description of what's inside
of the component and to get more
technical with you it's like it's like a
JSON format object serialization so if
your component is an object and it has a
bunch of other objects inside of what
we've done what you've done is
essentially serialized it into JSON and
that's what the component declaration is
it's like a representation of the
internals I'll show you the code in a
second you'll see an example of a
component declaration will make it a
little more clear when we load that
component declaration in the application
what we do is instantiate all of the
objects inside of it then we attach the
ones that are that are connected the Dom
to the page and then we populate
component properties and establish a
bindings okay so here's here's what
component declaration looks like that
JSON that you see at the top and then at
the bottom what you see is the HTML that
corresponds with it this is from a
simple application that does temperature
conversion you have a Celsius number
field in a Fahrenheit number field and
when you put a value in one you'll get
the equivalent value in the other field
and there's no JavaScript code at all
behind this it's done entirely with data
bindings
the component declaration so the
component declaration we have several
elements here you can see that prototype
field that I've highlighted that
basically is a reference to the module
that we're using to instantiate the
object so each of those top-level blocks
they're like the Celsius number fill
block the Fahrenheit number field block
those are objects and the prototype is
the component that we're going to
instantiate when we're creating those
objects and in this case you know you
can see the dot real extension you can
see that it is a component but it could
also be an object you know we're using
common J's module loading so you can you
can load conventional objects in there
too so next we want to be able to take
those those objects from the component
declaration and attach it to the
document object model and to do that we
have this element property which I've
highlighted here and so the element
property in the component declaration
correlates with a data montage ID
attribute in the associated HTML tag so
if you look at the bottom and you see
that we have those those two input
fields with data montage ID tags for
Celsius and Fahrenheit those get
attached to those number field
components that we've instantiate it in
the object this is really significant
here like one of the one of the things
we care a lot about it is not cluttering
up our markup we don't want any any
logic any application logic in our HTML
code we care a lot about separation of
concerns and you know part of how we
achieve that is by putting all of the
the you know the the glue that holds the
application logic together in the
component declaration and the only thing
we have to put in our markup are those
data IDs that associate the components
with the HTML so now I'm going to talk a
little bit about data binding we have a
barely sophisticated binding system our
functional reactive bindings abbreviated
frb it's created by my friend and
co-worker Crisco wall some of you may
know for his work on the cue library he
tells me that I'm not allowed to
pronounce FRB as furby
so of course I have to what what frb
does is it propagates changes between
object properties so when you're
creating your application you're doing
your data binding you're connecting the
property of one object to the property
of another so that one when one changes
that change propagates to the other and
that can be done in one direction or two
directions frb is an open source library
that you can use standalone we've
integrated it very tightly in a montage
guess but you can also use it by itself
and it can work with components or
regular old JavaScript objects so when
you're doing your bindings you can bind
you can just take some JavaScript object
that you've pulled from some rest you
know API you know some JSON you pulled
from a REST API and you can just bind
right into it you can also use it to
connect properties of components i'm
going to show you next so in our
component declaration when we have a
like a binding section for each object
and when we use that that to double
arrow that that signifies a two-way
binding so what we've done here is we've
taken the Fahrenheit number field and
we've bound it to the Celsius number
field and if you look at the binding
expression you can see we're doing a
little bit of basic math in there to do
the conversion between the two
temperature formats one of the cool
things about frb is that you can it's a
very rich expressive language you can
you can do a lot of computations and
data manipulation in the bindings
themselves which spares you from having
to do it in code so you know instead of
having to take your data structures and
tear them apart and wrap them with a
bunch of things then create computed
properties or whatever you can really
get a lot done just with bindings by
themselves so the end result of what you
would see here is that if if the number
field changes it's just going to compute
the the equivalent value for the other
number field as I'll show you later you
can do some interesting things with with
collections and data structures to with
frb expressions so you know as I said
clean semantic markup is a huge emphasis
for us and I really like to to bring up
this point because it's one of the
things that attracted me to this
framework initially we don't have any
procedural flow control
statements in your markup you've
probably seen some some other you know
JavaScript MVC frameworks where you have
like a for each or something or you know
we don't do that we want to keep the
markup as pure and unadulterated as
possible so what you're looking at in
this example here is the mark-up for
like a list and instead of a for loop
basically what we have here is just a
div tag with some data montage ID that
says list places and in your application
you would have a component in your
component declaration it's called a
repetition you use a repetition
component which will repeat all of the
elements nested inside the attached dip
or detach element it can be any HTML
element so you know by taking that
approach we've made it so that you don't
have to clutter up your your HTML or
combined logic and presentation so
unlike me it's completely clean shaven
framework no mustaches all right so
there's pugsley again helping us keep
the mark-up clean all right so now I'm
going to switch gears a little bit here
show you our application that I've made
with montage just give you a little bit
of a sense of what you can do with the
component system this application is
designed to help groups of people decide
where to eat together which I'm sure you
know is one of the hardest problems in
engineering if you've ever tried to do
lunch with your team or whatever so the
application is called nominate and
basically people suggest places and then
vote on them it's a full stack
JavaScript application the backend is
written the API back in is written is
sales jas and the front end is written
with montage guess and it uses web
sockets for real time voting so there we
go I hope everybody can see that yeah ok
so in nominate you create a poll and
then you out of place and what we're
using here is a browser geolocation and
the Google Places API to allow you to do
a place search I don't know if my
connectivity is good enough ok so in
anticipation of connectivity issues I
had
tab open with the example here but yeah
so it'll pull in locations around you
and it'll let you add them to the poll
by clicking one of the plus button in
one of those places you can see that
Todd each tile has the name of a place
and then address right so when your vote
when users are voting you see the the
polls it's again the same tiles the the
name and then the address then
underneath is a vote button when you
click the vote button it'll add your
vote and then it's probably hard to see
not enough contrast on the projector but
it's tallying the vote and you can
switch your vote if you're logged in so
very simple application one of the
things I'm doing here these tiles are
component we have a mechanism for
template replacement so you can take a
component and you can specify a part of
it that can be extended in place so in
the context in which you use the
component you get to add elements to it
so we have the same tile but in one case
we have a vote button and in another
case we have plus button and you can
actually do that in the component in
which you're consuming the the tile so
that's that's one way in which
components help us increase amount of
code reuse that that we get we can we
can reuse those elements and not have to
do the same work over and over again we
can make them generic and allow us to
tailor them to the context so another
feature here see if I can open an
incognito window so you can see when
it's not logged in see if that loads
yeah I might be having connectivity
issues but okay so we have a login form
and a signup form and you can see the
log in and the signup form are very
similar it's basically just your
username field then your password field
and the main difference is whether you
have to password fields to check the
password during registration and then
the the label on the button whether it's
sign up or login so in this case we're
using one component for both contexts
but we're using data binding within the
component to customize it for the
scenario so if you look at the URL bar
here you'll see we have a you know hash
identity / sign up and we have a very
simple like route controller here and
the component the login component is
bound to the route controller and it
looks to see whether you're on the
signup route or the login route and
depending on which one you're using
it'll show you the correct form and
that's all done again with frb
expressions inside of the code so we
don't need JavaScript code to do that
kind of tinkering you can you can
customize many elements of the of the
component with straight up bindings then
put values into properties in the
component and bind to those so you know
it allows you to do a lot of things very
in a very flexible way and where you get
more reuse you know another cool thing
about this login component is that none
of the actual authentication logic or
you know for communication with the
server to do authentication is
implemented in the component itself we
have event handlers that we define in a
component and in this case we have an
event handler for sign up or login event
so we can take this this login component
and we can use it in a higher level
component that makes up our our main
component of our application we can say
when we get this login event then we're
going to do the authentication logic so
we can keep the actual application
specific logic at a higher level and
again that increases Qadri's because I
can take the same login component and I
can drop it into any application that
requires this kind of log in form and I
just attach different behaviors to the
event handler
and you know I've got my login so you
know there are all kinds of
opportunities for reuse now briefly I
want to talk a little bit about bindings
we have the the vote tabulation so when
you're when you're when users are voting
in the application you know effectively
what happens on the servers we're taking
creating like a vote record for each
vote and that vote record has a place ID
associated with it so what I'm showing
you here is just the JSON data returned
by the server when you retrieve the vote
records is what it looks like you can
see that there's a place ID in each one
so we want to take that data and use it
to show the vote count next to each
place so we're actually doing that with
bindings rather than JavaScript this is
this is where it gets kind of
interesting so you can look at this frb
binding expression what we do is we
group those objects by the place
property and that gives us the vote
results then to find out which one was
the winner we take the the entries in
that group so the group is effectively
like a hash table where the the ID is
the place on the value is an array of
vote records so we take the entries from
that hash table we find we use the this
max function to find the the one with
the value that has the greatest length
because the array containing the vote
records the one with the most votes will
have the greatest length so here we're
using these frb expressions to to
compute the scores when we want to
present it in the user interface we can
reach into that that hash table using
this get property and then we use the
place ID from the individual block and
then we get the length of the array
that's associated with it and that's our
count so instead of having to do you
know take take the data from the server
and do a bunch of slicing and dicing on
it we can use FRBS you know very rich
collection manipulation features to do
it all in data binding so what makes
this especially cool is that all of the
whenever the values change all the
changes will propagate so let's
say that you have the application open
and another user opens it on their phone
in place as a vote we use web sockets to
get the new vote record and add it to
the array with the votes well as soon as
you add that vote record to the array
the these frb expressions will all
recompute and it'll automatically change
which one is the winner and you know
what the score value is in each of those
tiles based on the new data and it works
that way if you replace you know the
whole data structure you're bound to or
if you just change values reaching and
change values inside of it so you know
frb gives you a lot of power here and
really reduces the amount of JavaScript
code that you have to write the language
is a little odd I mean it has its own
syntax as you can see but it's it's
intuitive enough that once once you
start using it you know it really it
really becomes very practical
transparent way of moving data through
your application so you know that's
that's nominate now that I've shown you
nominate i want to show you another demo
that the kind of highlights you know
more sophisticated angle you know what
we can do visually with components so
this is a wordpress viewer and you can
see we've got we've got these tiles and
each tile represents a blog post what
i'm doing here is i'm using the new json
api is in wordpress to retrieve posts
from an actual wordpress blog then I'm
displaying the featured image in the
headline for each blog post and this you
know incredible 3d display here is what
we call the flow component and the flow
component it will take elements and
display them in 3d space using CSS 3d
transforms and it gives you like this
really nice touch friendly you know
great on a tablet interaction model for
for manipulating you know this this kind
of view and it does it all you know in a
way that's that's very neatly
encapsulated you can take a flow add it
to your application just dump data into
it you know and have it display in this
this fashion so I mean there are a few
things here like I mean it's you can
click a tile and it'll flip around and
you get the the content of the blog post
so I mean this is pretty cool
right so i want to show you next what
the underlying json representation looks
like for that flow okay so this is from
the component declaration these are the
properties that we use to define the
flow what the flow is it's basically a
path with 3d perspective like a camera
with a 3d perspective on it and the path
has what we call knots which are like
they're like points in the path that the
items will flow through so you define
the the position of these knots in 3d
space and then the angles that they'll
rotate the items at you can also adjust
things like opacity and things like that
now obviously this is a lot of data here
and you could write it by hand in your
component declaration but what if there
was a richer way to visualize it a you
know a better way to see this
information and manipulate it
interactively what would that look like
so this is a visualization I don't know
it's a little hard to see but that's a
visualization of that path you can see
it's like it's almost like editing a
Bezier curve and in a vector art program
if you've ever done that you have
handles on it you can see the position
of the curve and you can see the the
camera and the angle that the camera is
taking on the curve so we you know we
would really like to be able to
manipulate all of this data with a more
interactive visual style would you know
like what you see there and we can so
one of the things that's really
fantastic about the montage j/s
component declaration is that it is just
JSON data so here's a big word for you
homo icon icity and if any of you have
ever learned lisp or a lisp like
language you probably know what that
means the idea is that your code is data
data that you can programmatically
manipulate and that's a really exciting
concept because when when you have code
your your application logic and a format
that you can programmatically manipulate
it opens the door to creating very rich
tooling on top of it being able to
manipulate it programmatically in
interesting ways being able to produce
produce it through scripts and from
other data sources
and that's that's a huge part of what
montage jas is all about so you know
when it comes to application authoring
you know a lot of us use our text
editors our command line tools
preprocessors various things like that
we all use tools but you know unlike
native application developers we tend to
not do visual drag and drop types of
development and you know as the web
becomes more of an application platform
and less of a content delivery system
you know the need for you know parody
with what native platforms have you know
for development is going to increase we
really need richer tools but you know
there's kind of the stigma against
visual authoring in the web development
community and you know a large part of
where that comes from is just that the
first generation of visual authoring
tools for the web were really bad you
think about a lot of the early tools and
they were you know they took this
WYSIWYG approach that they're basically
like word processors and building a web
application with a word processor is
pretty much a worst experience
imaginable and it produced those
applications pretty terrible code right
so you know this the stigma emerged
against visual authoring because that
whole model was just it was just such a
step backward to step in the wrong
direction so you know what we've tried
to do building on this this this concept
of our code is data what if we could
create a visual authoring experience
that exploits that and allows us to
manipulate the data as data it provides
useful and relevant visualizations allow
us to to control and interact with the
content of an application in a way
that's that's practical and most
importantly we're not generating code so
if you're if you're taking that
component declaration it's just data you
can generate that and you can generate
it well but you know unlike trying to
generate a bunch of markup from a you
know WYSIWYG you know word processing
type authoring experience so what I want
to show you now is montage studio which
is kind of our vision of what you can do
with
with interactive visual authoring when
you take advantage of these
characteristics of you know code as data
so what you see here on the the
left-hand column which I'm scrolling
here is a visual representation of the
component declaration all of the
properties all of the bindings the
prototype it's all in there but it's a
visual representation when you want to
adjust the bindings or out of binding
you can just click to add a binding you
can drag in properties and it has
completion so that you understand what
the properties are say when you select a
component like so what we're looking at
here is essentially that WordPress demo
I showed you when you select our
WordPress controller component which is
a component we made in the application
itself for retrieving the data from
WordPress we have property field on the
far far right you can see that text box
there that allows us to set the host
property of that component so we can
take and expose the properties of our
components in a you know a really
intuitive discoverable way instead of
having to look at the reference
documentation you just click a component
you can see it and on the the black
column on the very far right you can see
a set of components that we've loaded
into our project so you can actually
drag a component from the palette into
the the component declaration field area
on the left and I mean it's just like
writing that component declaration all
its producing is the JSON but it's
giving us it's really nice visualization
in the center column we also have a
basically representation of the HTML Dom
and when you attach a component to an
element in the Dom it's just as easy as
dragging and dropping so I mean what
we've done here is take you know the
underlying representation as data and
we've we've created a visual interface
for manipulating it and you know what's
exciting about this I mean this is this
is the tool we're very excited about but
what's really exciting about this is
that when you have this kind of
application development model you can
build your own tools you can build
anything on top of it from manipulating
the code and producing the application
the way that you want to so you know you
can take this a step further to I've
shown you here how you have
you know property property filled all
the properties are exposed in this
property editor and we're using some you
know like met type metadata so if your
property is an integer you get us number
spinner or whatever but you could take
that a step further and actually create
a custom editor for specific kind of
component so here's our flow component
which I've selected in the component
declaration field I'm going to open the
flow editor so now we're manipulating
that JSON with a base your curve and you
can actually manipulate it just visually
and it's producing is that JSON like I
showed you earlier okay so let's see i'm
not sure if the connectivity is good
enough i'd like to try to show you what
that looks like when you do a live
preview we'll see okay that's good so
here's you know a live preview of that
application we've loaded from from the
authoring environment
and now I'm going to open up that flow
editor again okay watch what happens
we're actually seeing the application
change as we're editing it in a live
preview this is a fully functional
working version of the application that
we're just editing in real time and now
I'm doing this on the same computer but
you can actually do this across devices
it works over the web we're using
WebSockets to propagate the changes so
if you were to open this preview on an
iPad for example and you were to edit it
on your computer in the editor you would
see the changes propagated over to the
other device so i mean this is this is
all taking advantage of the same
characteristics of the you know the
underlying code as data approach of our
component architecture so i think that
this this kind of reflects a you know a
potential approach to simplifying
application development and reducing the
amount of time and you know and in
complexity through you know this
component oriented model so real quick
to wrap up I want to show you that you
know where these components are coming
from in our montage project we have a
package.json file and in the
package.json file you can load modules
from npm that contain components so we
use NPM on the front end here and what
you're seeing here are the dependencies
of the application digit which is our
widget collection then montage WordPress
which is our you know that component
that loads in the the other WordPress
data and it's just a component that
we're loading from mpm and adding to the
project when you do that it shows up in
the palette okay so you know that wraps
it up I hope that's you know that you
can kind of appreciate you know the
significance of of what we've created
here we have a beta of the tool online
so you can visit this address or visit
montage to do calm and sign up for the
beta you'll get in right away and you
can build stuff with it the framework
itself is also available online montage
j/s is open source and it's on gay
hub so if you want to use the framework
stand alone without our tool you can do
that too and you can build your own
tools on top we would love to see people
build new stuff with it so we're going
to be here all week I'm here with two of
my colleagues or wearing montage studio
t-shirts so if you happen to build
something great with montage studio this
week you can track one of us down we'll
give you a t-shirt just show us what
you've done thank you i guess i don't
know if i have time for questions but</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>