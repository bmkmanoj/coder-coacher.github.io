<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Brian Chirls: Getting Serious with Web Video - JSConf.Asia 2013 | Coder Coacher - Coaching Coders</title><meta content="Brian Chirls: Getting Serious with Web Video - JSConf.Asia 2013 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Brian Chirls: Getting Serious with Web Video - JSConf.Asia 2013</b></h2><h5 class="post__date">2013-12-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/be6UGdUbcjY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you
alright so yeah it's great to be here
thank you for having me in Manila thanks
Thomas and Rico for organizing this my
name is Bryan as you said I'm a creative
developer I work with a company called
happy yak we do interactive video back
in the states from New York so I'm going
to talk to you about my project
seriously Jas today first a little bit
of context I want to talk about what it
is that we really kind of love about the
web first right first thing I think is
its interactive it kind of you know
responds to you both in the kind of you
know responding to your mouse clicks in
keyboard and touch like that things like
that it's it's up to the minute it's up
to date so you know if you go and look
at a web page or a web app that thing
can be you know it's the latest thing
it's not like a book or a movie frozen
in time it's connected originally
through servers and now with with WebRTC
to to peers so you can kind of
communicate with it and the other thing
one of my favorite things about it is
this view source is that you can kind of
take it apart it's not this kind of
locked black box you can go in and you
know see what other people did and you
look at the source of a web page and
copy it and paste it and it's a great
way it really encourages remix and
mashups and learning and I think it's
why you know you can it's not this kind
of esoteric impossible to understand
saying that you need to go be an
apprentice somewhere to learn it you can
really pull it apart yourself and learn
it and it's great in certain media the
web started out with text on hypertext
so it's it's kind of mature in that
sense and it's great at it Along Came
layout the CSS and and then and then
still images right so it's pretty good
at presenting still images and we have
to deke an vez for modifying those
images and
creating some images on the fly and now
video and audio but until very recently
the last couple of years videos kind of
been a second-class citizen on the web
it's been sort of a black box you know
when video was in in flash or even
before that in like quicktime embed
objects for those of you have been
around longer it's a you know it's sort
of like you you couldn't really affect
it you could just kind of embed it on
the web and the web is really just a
delivery platform for some of them is
kind of less than TV but now you know
i'm going to show you this I think a lot
more we can do it you know there's the
HTML video element we can embed it as
part of the page and apply CSS
transitions to it as well but now with
canvas and with WebGL we can have access
to the actual pixels and really mess
with it and kind of explore it and push
it to some new limits so what's so great
about video in the first place right so
a video is visually expressive a little
bit unlike this slide here and it
expresses stories ideas and emotions
through moving images and sound right
and it does that through you know with
music and dialogue with text hopefully
not so much text with quote unquote real
images and then kind of simulated images
through whether it's trick photography
or or CGI or you know whatever else
right so what if though we could take
those great sings about video and those
great things about the web and kind of
bring them together right because all
those things before I said that we're so
great about the web video traditionally
has none of that right it's not really
interactive it's it's not up to date you
know if you buy a DVD like that DVD is
that DVD until you lose it or throw it
away or it becomes obsolete you can't
plan anymore it's not really connected
it's kind of an isolated experience and
it certainly doesn't really have much in
the way of view source you know if you
want to mash something up you you don't
really you know use a lot you can do
with video mashups but you don't you
don't really
like the project files right but you
know with if we combine it with the web
maybe we can get all of that out of both
so that brings us to seriously Jas right
which is a real-time node based video
effects compositor for the web with
html5 JavaScript and WebGL right so
video effects compositing is kind of the
kind of the key words here so what is
that right now originally sort of in the
beginning of kind of computers being
involved in film we had quote unquote
CGI which is like your basic 3d graphics
and then that started out I think the
first film that that used it was a star
trek to and like a visualization of the
Genesis project and you know when it got
us movies like Tron and longmore man
real cinema classics you know um and
then you know those pics are guys I
guess they did some stuff that was okay
you know but but that was kind of a for
a long time it was just like you know
what like trauma and and no more man
it's you you have these movies that are
about the computer graphics right and it
was only later that we started to see
where the the computer generated stuff
would mix with the live-action video and
that's that's from video compositing
right so this is a sample from from Life
of Pi right which is supposed to bits
fantastical but it's not about computer
graphics there's no point where you're
watching the movie where you to go oh
yeah that's that's a computer I get it
you know I see the polygons right you're
really trying to hide all that and they
you know they shot that home most of
that movie in a studio with a swimming
pool in a big blue screen and you know
the compositing was where they they put
in the background and they put in the
rain and they put in the weather and the
fog and then they affect the color you
know and you can really kind of see the
difference there so seriously Jas is an
effort to see if we can do some of that
in a web browser right now it's inspired
by some software that is traditionally
used for for static compositing
right so this is this is after effects
made by adobe a lot of people use that I
guess this is a scene from iron man also
nuke is a really great one that's using
a lot of professional films for for the
like Hollywood films for this kind of
compositing nuke is also a node-based
compositor like seriously so it's
inspired by that and I'll explain a
little more about what i mean by notes
so first seriously Jess includes a
number of video effects that you can
just apply to a video and you can do it
in real time which I'm going to I'm
going to demo for you guys in a little
bit so it includes color effects which
is just kind of straight up kind of
tweaking the color it's kind of like
Instagram right and there's a range of
those things like blur which is you know
a little more rather than just tweak the
individual color the pixels it kind of
affects the pixels at the left and right
keying like chroma key and luma key
that's like blue screen green screen
that's pretty powerful pretty cool and
then just kind of various kind of style
izing things and a bunch more right we
also provide a kind of some-some
transforms where you can you can scale
the video and you can move it around and
skew it and stretch it in all kinds of
dimensions that's going to become pretty
cool a lot of that stuff you can do in
CSS but when you combine it with the
effects it's more powerful so before I
show you some demos I want to talk a
little bit about kind of the motivation
behind the technology and why this WebGL
stuff is so transformative right so
WebGL right usually you think WebGL is
like you know 3d right and that's kind
of the kind of base case for it you know
three Jas is great and you know you see
all these demos with flying squares and
fish and stuff like that but WebGL
really it's actually just a 2d API it's
really designed for drawing triangles on
this screen and you kind of transform
those triangles right with so we just
kind of use that we just draw two
triangles in the shape of a rectangle
one big rectangle that fills the whole
screen right and we just kind of use the
video as
as a texture on that tron because you
know play textures to the GPU and render
those on your triangles right and we use
it's kind of a perspective transform so
which is you know what what WebGL and
OpenGL usually used to get a 3d effect
we can use that to just kind of you know
move things around like I was talking
about with the the different transforms
and then we write a shader which if you
don't know a shader is a small program
that gets uploaded into your GPU and
runs at each sort of vertex of your
polygon or at each pixel and it gets the
input color and it press and some other
information and it spits out a new color
right now why not 2d canvas right we've
had two de canvas around for awhile it
can access images in the video it's a
lot more widely available than WebGL and
it's a lot more it's much much easier to
use like writing shaders is actually
really hard now so here's an example so
so back when when the 2d canvas first
kind of came around with like you know
the beginning of html5 and you could
access video with it there was some
examples of somebody doing like chroma
keying or you know kind of a green
screen effect so here's some code that I
kind of grabbed from from that I'm just
going to kind of highlight it right and
point out the kind of key components
right so just kind of the way that the
browser gives you access to the video
pixels the first thing you have to do is
you have to take your video element
right which is this kind of video
variable here and you draw it to your
graphics your 2d context right because
you can't directly access the video
pixels from the video but you can access
the pixels from the canvas so first you
have to draw it to a canvas then you get
the pixels from the canvas right then
you go through the pixel the pixel data
a process is at one pixel at a time and
you you check there's like a distance
function here that tells you whether or
not you know it's the color matches and
then you set the alpha channel 20 right
because you get your red blue green blue
and alpha and alpha is your transparency
challenge channel and then you put the
image back into once you've processed it
you display the image by putting that
array
get into the into the display canvas and
this is originally when I decided I want
to do this compositing effects this is
what I did but it didn't work and the
reason is there's a couple of reasons
the first reason is what we're doing
here is we're doing with copy a copy and
and allocate process one pixel at a time
and the cpu with tons of these memory
accesses that a little bit slow and then
a third copy right because the thing is
that when you when you copy when you get
the image data from your canvas it
doesn't let you get the image data into
an existing array it makes a new array
so if you were to have a high definition
video right that's 1280 pixels by 720
pixels by and the four bytes per pixel
because red green blue and alpha you
know you're looking at about three and a
half megabytes right so that's three and
a half megabytes copied three x plus
allocated and then garbage collected 30
times a second right and that'll slow
you down plus and that's not even with
the processing and this is just one
effect right so we tried it it didn't
really work we were getting really slow
frame rates you can see there's a couple
demos out there that do it with these
tiny little postage stamp-sized videos
that kind of remind me of the old cd-rom
days in the 90s but you know I'm pretty
old so anyway so we do it in WebGL so
WebGL is much much faster it processes
things in parallel there's a there's
kind of fewer of the video copies and
the applications and once you've got
your data on the GPU access to it within
the GPU is very very very fast and it
processes depends on what kind of
hardware you have but it processes many
pixels all at the same time right so now
how about this no thing right so i
talked about nodes it has nothing to do
with no Jas it's just a coincidence that
it's called that by the way it works is
kind of we have three or four different
kinds of nodes right you start off with
your source node which that accesses
your image source right so that can be a
video it can be an image it can be a
canvas really anything you want right
and you can make a number of those right
you can even actually access a pixel
array if you have that or dis ting web
GL texture if you want to bring it in
from something like three days and then
you got an effect no
right or one or more effect notes you
can chain the effect notes which takes
so each of these arrows kind of
represents the image data transitioning
from one note to the next right kind of
like an assembly line or if you've ever
used like a like audio-video equipment
and like like each one of those is kind
of like a cable right where each box
does something your signal and passes it
along it's not like the the data flow
stuff that time I was talking about
yesterday so the effect note processes
it and the output is the result to a
target mode which is your canvas and the
kind of the JavaScript kind of
infrastructure of seriously Jas and
design to it kind of has sort of a push
and pull model where it's smart enough
not to render things that doesn't need
right so if you start with the static
image and aura or a video and the video
is paused right it doesn't need to
update that but if you tweak the knobs
on one of the effects it needs to update
that so it kind of every time you get an
update it sort of pushes forward into
the network into the network of nodes
and marks everything is dirty and then
it goes to the end to the target node
the output node and it tracks back
rendering each one as it goes along so
it's really smart if you if you ever run
one of the demos you see that the you
know if it's ever still the frame rate
is very high the CPU usage is very low
and it only kind of bumps up again once
you start playing or modifying it you
can also have like an example of the
split notes you can have multiple
sources and that's this is where it
really becomes compositing so whether a
split or a blend so it does like for
example all of the Photoshop blend modes
you can layer one mode on top of another
and you can have opacity and you know
alpha channels and all that cool stuff
it's pretty cool there's also a
transform nodes which are cool which is
for moving things around you can
basically do it what's called a
perspective transform transform so as
long as it's kind of a uniform you've
got your you're preserving your your
rectangle in 3d space you can do
whatever you want you can't really bend
it
that would require an effect node but
that's really cool for like moving
things around so you know yesterday Leia
was showing some of the stuff with CSS
you know where you have this kind of
face that wants to move around in a
circle and you can you can kind of
composite multiple transforms on another
on one another and the way that works
it's retro really efficient is that it
combines them all into one so when you
get the output of your effect node the
transform node all that really is is a
very simple four by four matrix
multiplication in which you can do in
javascript and it's super fast and it
doesn't actually process the image and
it changes those a change those all into
one sort of little squeezes into one
computation and then puts that send that
trance that matrix transform that four
by four matrix into the target node
which then uses that in the shader and
calculates the output it's a bit
technical but it ends up being pretty
fast so now what's the API like how do
we use this right so seriously j/s have
kind of somewhat I don't say unique but
i wanted it was important to me to
target the audience when designing the
api right I really you kind of have to
audiences right you have your plug-in
developers who are going to actually
build the effects and want to get in
under the hood of seriously and then you
have your kind of the people are going
to use the API and I really wanted to
make this available to people who don't
necessarily have a really long
programming background you know people
who access like you know who learned
through code Academy or just a little
little bits of tinkering I want to make
that easy for them and then you know
it's it's a frame rates really important
so we prioritize general just generally
when work when I'm coding a prioritized
performance when you're in loop you know
in kind of hot code that needs to be you
know within less than 16 milliseconds
but not really you know sacrificing the
usability or the readability of the code
you know and also knowing that the we
want to make this available for kind of
novice developers really
you want to shield them from any
properties or methods that that might
break you know I I think a programmer
has a responsibility to its users
whether the users are you know throw a
graphical interface sort of touch
interface or these are people using your
library say you know I don't it's not up
to me to say oh you need to figure it
out and if you break it it's your fault
like if I can recover from a mistake
then great I'm going to do so so you
know artisan and the authors as the you
know as one target audience you know
like I said assume a code Academy you
know level of programming skill and you
know video compositing and being a video
artist is hard enough like that's plenty
hard and my demos are there just demos
they're not great stories so you know I
respect that that skill and that skill
should be the bottleneck I think if you
know if an artist comes to use this the
hardest thing they're doing is is the
art not not the programming right so we
do lots of input validation you know if
you're going to give me a set of color
as a parameter on something right like
you can give me the name of the color
you can give me a string that's red you
can give me an array of you know RGB
values you can give me a CSS you know a
hex color or a RGB function you know
we'll handle it all right and if you
give me if the numbers are out of the
you know out of the range that's okay
we'll cap it like we work for you so you
know there's polymorphism which tends to
you know it can be a little bit slower
but it's it's worth it and it's not
enough to make a difference in the frame
rate here and you know recovering from
bad input so if you give me something
that's ugly I'm going to try my best not
to crash and just give you something
right now on the other hand there's the
plug-in developers like I said building
shaders is really hard right so I assume
a much higher level of programming skill
so here we can kind of prioritize low
level access and efficiency and speed
and performance you know so it's it
enables you to kind of cover both
audiences and protect them both and I
just think it's important to kind of
know your
it's not weight is served in an that way
so what's it look like how do we use it
so like I said try to keep the API
pretty simple so we start with creating
this source node I'm not going to go
over too much code here so we create the
first thing as we create a new seriously
instance and that's your composition you
can access a video element just like you
have a team access any video element and
you create a source node by calling
seriously dot source that's it you've
got your source node pretty simple an
effect note very symbol similar right
you just we've already got our source
node right you carry a blur equals
seriously affect Direction blur so
you've got a string look up of all the
different effects in the library and
then you just kind of tweak the values
by just setting them on the object so
those are setters and getters and you
know they validate so you know if you
say blur amount and blur needs to be
between 0 and 1 and you give me you know
one and a half it just becomes one it we
try to be you know intelligent here and
make it easy um what else target note
right so target you always almost always
want to help put to a canvas you can
output to a byte array or a pixel you
know a pixel array or to an existing a
web GL texture but for the most part you
output directly to canvas you create
canvas that I put it in the in the DOM
and just create your target on the
canvas and the next step is to string
them all together right because we want
to create that node graph so you just
kind of connect your nodes by saying
blurred source is your source target
outsources your blur and then go so go
is pretty good so we have a couple of
options here for you how you actually
render so if you want to take any given
target node or the whole composition you
could just call target render right so
if you have a game loop for example and
you want to do other stuff in your game
loop and you want to use seriously j/s
as kind of the post-processing pass on
your game right you you're going to want
to run your own Trollope but you can
call it sir target render or you can
just say go and what go does go is great
because it then it monitors all of your
source
all of your you know whether it's your
videos and images as they get connected
and disconnected or as they play and all
of your your inputs so back when I said
like you know blur amount is your point
eight if you want to animate blur all
you got to do is you change it to 0.7 or
something else and once you use go it'll
automatically redraw but it will not
redraw while that stuff is not changing
just to be an efficient so we could
there's also kind of an easier way like
I said polymorphism is really important
here so this is an example where we
create all their elements in in HTML in
the DOM and we can wire it up we can get
I'm going to hide I want to highlight
the code here so instead of actually
creating a source node we can create our
chroma key node right there's a chroma
key example and just set source is the
string is the ID of the video and what
else is really cool so split is our
effect node which which i'm going to
show you in a second and you can just
link that up to an actual input element
and it will watch the input element for
you so it's really fast to create
interfaces on these things I think like
a if you were creating a final
production of a piece you'd probably
build your own interfaces or you'd have
things on you know animate over time and
interact other things but a lot of times
for experimenting you just want to you
know wire that up to a range slider and
go right so that's pretty cool that
works pretty well so here's what that
looks like right so here we got our
video of a dog right and I created two
so we split the input of our dog video
to two different nodes 1 which is the
chroma key node right and then one is
straight into the split right so right
now the split is set at zero so we can
just kind of move I don't know why my
dogs not playing well that's not good
there you go
there you go so we can just kind of drag
our split effect and it's got an angle
parameter on it right and then we can we
can make the edge fuzzy if we want to
just kind of drag that around so that's
it's a it's pretty easy if you just kind
of want to play with the effects and see
what works and it wasn't really very
much code and the dog just kind of
looped some plays and you know and he's
fine he's very happy so okay let's move
back over here all right so a couple of
tips just some things to be aware of if
you're using this first thing is
preprocessed what you can so you know
we're doing a lot of these processing
and you'll see some more options what
you can do is a lot of color effects and
things like that you know if you have a
color fact that's the same on every
video so every time you watch it if it's
the same there's no reason to process
that color effect in the person in
everybody's browser if you can cut you
know process I color effect in you know
in the actual video and burn it into the
video then great do that you'll save
some cpu cycles and you know and you
might even depending on what the effect
is you might even get a better output
next thing is don't forget about cross
origin restrictions videos need to be
for security reasons videos and images
they need to be in this either the same
origin or they need to have coors
headers on it it's a little bit of pay
the neck but you can do it so
unfortunately you can't just grab any
video out there on the internet and you
know process it you usually have to have
your own server or you know serve
somebody you know it's going to give you
access with those headers it's a little
bit pain in the neck but something to be
aware of yeah and generally want to keep
videos i find that 960 x 540 is about
the right size for the right upper limit
for videos so this is a this is a
macbook air it's two years old it's got
four gigs of ram if not anywhere near
like it's not a super fast computer
these days and you know we're running
these effects at pretty high frame rates
but the slowest thing that the
bottleneck tends to be the upload of the
video frame from the video element into
the GPU and once you get above 960 x 540
960 x 540 you can get your 60 frames per
second but past that it starts to slow
things down a little bit so just
something to keep it be aware of but if
you're doing still images or if you know
then feel free to go much bigger if
you're using if you know that it's going
to be your setting up like a kiosk or
something and you know that it's going
to be a really fast computer you can go
higher and that's that has actually
nothing to do with the file size because
the file size can be compressed so once
you're you know if you have if you have
compression on your video once you're
copying that from the GPU you know from
the video to the GPU that's already
uncompressed so your compression rate
makes a difference for the network
transfer like it would on any web page
but here the size is more important in
the pixels okay so moving on it's time
for some demos right let's get to the
good stuff okay um all right so i need
to give myself camera access hang on
thank you all right so all this stuff
works great with getusermedia hang on
there we go okay how are we doing all
right so one thing we can do is I showed
you that split effective before right we
do ourselves a good old Star Wars wipe
effect right to the fish well as a fish
video not playing I don't know that fish
video is supposed to be playing but
imagine it's playing and you know that's
that works back and forth it's a very
simple little effect you can do just
kind of replicate some of the stuff
we've seen in the cinema here's another
one oh this is fun this is an ASCII text
effect that's pretty good and that works
on the fish to another Fisher move in
there you go alright so ASCII fish is
very important okay what else you got Oh
chroma key this is fun so this is um
this is a blue screen effect I was
telling you about I happen to have
behind me a great big blue screen and
yeah so that works so that's pretty good
so works for a blue screen green screen
and it was like
code for this is super short like I set
up the chroma key note i showed you
before and i'll have to do is set the
color from green to blue and it's a
pretty good effect it's um the some of
the demos that you see out there for the
2d canvas they do kind of this distance
model where they say all right I've you
know as long as my color is within a
certain range of my target color Wilkie
it out but this uses a little bit more
complicated model involving the
saturation of the the pixels loop or
high saturation and so it can even do
things like it can detect things like
glass that's semi-transparent so if I if
I had some you know there's I have
another video where there's a guy
blowing bubbles in front of a green
screen and you can kind of see the
bubbles and it extracts the green so
it's pretty cool and shadows and stuff
so that's pretty good definitely play
with that that's a big one for
compositing um what else oh yeah TV
glitch effect this is one of my
favorites we do a little channel change
hang on there you go so hop the TV
glitch effect this one this is my
favorite TV glitch i think is going to
be the page curl of a 21st century right
so I guys I want you all to go out there
and throw TV glitch affected everything
and it's great because we don't really
have TVs like this anymore and i love
how in movies they always have analog
you know TV glitch on digital signals so
go do lots of that that's good explore
it play with it um what else ok so this
is this is not actually affect this is a
thing this is a trend if you see those
movies this is a still from Transformers
7 or something I don't know
and they do this thing now where they
make all these movies they did it in it
did it in this hot tub time machine they
did it great movie they did an iron man
2 I don't have a picture that but you
notice these guys everything is either
blue or orange so they do this kind of
digital color timing the digital color
correction actually is interesting a
little bit of history that started with
some I think it was oh brother where art
thou was the first movie where they they
really just scanned in the whole film
into a computer and they digitally color
corrected it and now everything is
digitally color corrected and now
they're making everything to be blue and
orange and it's ridiculous and it's
terrible and you know you can do that
too so now I'm going to I'll show you
what it looks like I turn it on and off
so there's my skin it's all kind of
orange and the toggle it so that's it
off it's a subtle effect here it works
with the fish too right so that's what
the fish are supposed to look like and
here we get me make the orange pop so if
you want to explore that cliche also
please go do that maybe it could
probably use some TV glitch but I didn't
have time for that okay what else oh
yeah this is a fun one okay this one is
so this is an interactive video
experiment I played with this is a music
video I can't hang out have to do that
here I have to click the play button
okay so this is a video by the band okay
go so this I use for a color replacement
so okay goes great if you go to
seriously Jas org I have another demo
from Ok Go that I did they're great they
did the video the guys on the treadmills
if you don't know who they are and
they're just great to work with because
they make these really colorful videos
and they put it out there for you to
mess with so this is this kind of here
let me go back a little bit this
colorful video so I built this thing
where the more you move the mouse it
just kind of changes the color and it's
got a great little filter on it based on
kind of a range of hue and saturation so
it changes it excludes the skin tone and
kind of the ground and stuff and it only
filters out the wall so I built this
little demo where you have to keep
moving the mouse and the more you move
the mouse the more changes the color but
if you stop moving the mouse you don't
touch it it kind of fades out to grey so
this is kind of a little experiment and
and each scene as they change each scene
has a different kind of different kind
of settings on it so I use popcorn jjs
to create each scene and change the
settings on the hue/saturation node so
that's pretty cool so I like that uh so
what else yeah that one that was some of
these scenes it didn't work this one's
really hard because they're wearing
green and stuff behind them as green so
I couldn't figure that one out so what
else okay this is another one fun fun
one this is so this is just to show one
of the effects in the library is called
it's a repeat effect so you just you
give it what you do is you give it a
transform node that doesn't actually
have an input right you give it a video
input and you go to transform node and
you give it a number right and it takes
that transform node and it repeatedly
runs the transform on every no instance
so you know I've got a whole lot of Neil
deGrasse Tyson's here I don't know what
would happen if you try to make you
could do these transforms in CSS I
suppose I imagine that if you try to do
it and you had like what is it like 25
video elements
and tried to play them all at once and
keep them all in sync I imagine you
might run into trouble so this is a cool
thing you can do it seriously also just
if you notice if you look really
carefully at the bottom or at the top
when their heads overlap each other I've
got a luma key illuminance key effect
running on this luminous keys like green
screen but it uses if you have a bright
white background the keys that so
sometimes it is easier to find a bright
white background than it is to find a
perfectly lit green background so we get
a little transparency just a side note
well you have stuff like PNG which is an
image format that has an alpha channel
in it there is no video format that is
available on the web that can have an
alpha channel so if you ever want to
have an alpha channel on video you gotta
either use use a key like this or you
can we have another there's another
plug-in that's a channel mapping plugin
so you could use another video as the
alpha channel but on the demo that okay
so else oh oh yeah alright so this is
I'm showing off the blur this is
something I'm gonna try this is not
going to work so I have a blur plug-in
which I just got working which is so
you'll notice this is a really large
blur right a lot of the plot the blurs
you'll see in WebGL you kind of get like
a few pixels here and there and it's
really hard to get a high radius blur
this one works by successively blurring
and blurring and blurring and it scales
down the the textures so it's actually
the more you blur it the faster it is
which is weird I'm going to try this
this is not going to work hang on but
let's see let's see enhance
enhance enhance enhance okay um so so
this is it so you notice the blur
animates which is really cool when we
use the scaling of transform node I want
to apologize to Andy so Andy you guys
are all here but for the video I
couldn't get this to work yesterday the
trick Andy is to get it to respond to
any words you say so try that next time
oh my thing I can't believe that word
all right oh ok this was cool so this is
called a displacement map so if you ever
seen when they take a like a when they
shoot a movie in 2d and they converted
to 3d like what you know 3d movies are
huge right now and when you go to you
know they don't all shoot them in 3d
with two cameras a lot of them they
shoot them in 2d and they convert it
which is this miserable painful express
but the users thing called its
displacement map so this is I got a copy
of this displacement map from somebody
in the internet I didn't make it but
check this out what you can do with it
this is kind of crazy come on yeah so
get like a little subtle head movement
from Emma there um how creepy is that
I'm sure she would think so if she saw
it but I actually i was i was thinking
that if i didn't have time but I wanted
to wire this up to the Web Audio API
with a beat detector and have her doing
like you know
so next year next year so this is just
show you this is what the displacement
map looks like so the brighter the value
the more it displaces the pixels to the
left or the right or up or down so some
somebody on YouTube there's a link to
this tutorial there if you can probably
can't see it but like just paints this
by hand based on their his estimation I
tried to do it but it didn't really come
out very well so I borrowed his so
that's that's pretty neat oh I have
another example I think to show you but
you can if you can find a video that is
like a very still seen you could use
that to kind of do this in a video as
well and I kind of change angles in a
video or you know if you wanted to have
you know you could get Emma from two
different sides if you had like a 3d
screen which I don't unfortunately next
year oh okay oh yeah all right so
somebody once said to me if it doesn't
work on mobile it's not worth doing all
right let's see if I can get this to
work go on can I can you guys get zoom
in I didn't come close all right answer
it I brought my own hang on see if this
works camera
okay can you see that so this is a TV
glitch effect running it so this is
firefox on Android I'll get a little bit
more in a second about like what
platforms this works on but firefox is
pretty cool because it lets you hang on
it's creepy it's haunted right so if you
smack it like like an old TV here
respond and the creepy face is
interesting because it has a there you
go it has the light detector in the
phone so firefox mobile is really
awesome it gives you access to the
accelerometer and the brightness
detector and so the theory is with this
little toy like if you if you're
watching it and your lights are on it's
just an old TV and you gotta smack it
every so often but when the lights go
off it it goes crazy and it has that
scary face coming in now so kind of um
alright so I'll go I gotta hurry up here
see what else together okay what else ah
alright this is a couple of challenges
in dealing with the stuff especially
compared to traditional static
compositing I want to go over that so
WebGL is a pain in the butt why is that
their driver issues so you know
sometimes if you have an old driver
drivers that kind of definitely work
very well especially like on Linux
sometimes when you have open source
drive drivers that aren't really from
the manufacturer and kind of things
aren't always that good and you get
these like lost contacts things that
happen it's kind of hard old hardware
again like obviously there's less and
less of that as it go but it can be it
can be a snag for WebGL mobile yeah also
mobile devices are often slower so
sometimes you need to use like a lower
res version of your video for a mobile
device no Dom input that's also like so
you can use um like I said canvas and
images and video for your input textures
but unfortunately you can't use like
actual chunks of the web page there's a
library called HTML to canvas which is
pretty good but it's not really good for
animating so
you want to get like a one-off
screenshot of your image and then that's
with that you can do that oh yeah and
non power of 2 texture limits so WebGL
really likes all of your texture sizes
to be powers of 2 most people just don't
shoot video and power of two textures so
it there's some things you can't really
do with scaling like if you were to
scale it up it uses much smoother
prettier scaling if you have power of
two textures and there may one day be
WebGL extensions for that but for right
now it's just a minor pain in the neck
platforms what platforms is available on
so WebGL worked great on firefox and
chrome those guys are awesome right and
it just works like a like a dream right
Safari technically has WebGL but it's
disabled by default and it's super slow
for videos so unfortunately like it's
not really realistic or a Bible for this
stuff um ie11 finally has WebGL which is
great but it doesn't let you use video
as a texture so you could do basic image
processing for the stuff in ie11 it does
work passes the unit tests awesome but
for video I'm afraid it's kind of
useless mobile Firefox and Chrome again
ipad not going to happen as much as I
would like them to do it they don't seem
to be having an interest in that but
again this is this is I consider this
stuff is to be like pretty well out
there so you know I'm kind of
engineering for the not the lowest
common denominator but but the highest
video delivery compression artifacts so
if you're um a like if you if you were
working on a movie right like like Iron
Man or something like that you would get
the like raw uncompressed straight from
the camera video but you know when
you're drawn in green screen on
something that's compressed with web M
or mp4 you get some artifacts it's kind
of a pain in the neck like I said text
your uploaded GPU slow so the size is
limited there's a seeking delay so
there's not as it's not as easy you can
modify the pixels it's harder to modify
the time if you want to slow things down
and speed them up that's I haven't
really figured out how to do that yet
but hopefully vp9 and all
in the next I mean it could be a few
years it's kind of out there but will
should be higher quality video formats
so maybe we can see some of those
compression artifacts go away webcams
suck they just don't have good color
fidelity and they like to auto adjust
their exposure and white balance so if
you were to like have you know if you
want to shoot something in front of a
blue screen it might go oh your thing is
tinted way to blue sorry we're gonna
we're going to adjust it to white and
then it just screws everything up what
else unsupervised compositing really
quickly again if you're you know working
on Iron Man 3 and you're tweaking stuff
you know there's a lot of manual work
that goes into that you know they paint
out wires and tracking markers you know
they might they might do a green screen
but like this part in the corner needs
to be painted over if you're running
this stuff on a webcam and you don't
know what that's going to look like on
the other end you can't do that so you
just you just have to be aware of these
things and work around it and realize
that you know it's a much more
unpredictable scenario and it's in some
ways a very different art I'm run at a
time here so I'm going to kind of
breathe out what are we doing in the
future more effects make them the API
more at Short mature I want to have
different kinds of sources as well as
you know the videos and images Cheney
knows an interesting idea to make it
faster but a lot of time to talk about
it when I build a graphical interface
there's a guy working on that right now
we did the no flow is a data flow
project WebRTC this could be interesting
getusermedia as you can see works now
recording does not work yet there's a
proposal for that that should be great
and and eventually broadcasting
canvassed appears so I'd love to see
this you know if you're going to make
like a web video show you know you could
do that and broadcast that out what else
very lastly I want to use this some i'm
experimenting with some computer vision
i'm going to skip this and on time but
there's some stuff you can do to
actually analyze the image as in
parallel in the GPU it's really hard but
you can do some cool stuff with it and
this
just the beginning the very first sample
so this is a picture of a couple of guys
are here they took it could probably use
a little white balance correction so
let's run a little white balance on that
so yeah so we do an auto white balance
so we can actually analyze the entire
color of the photo and find you know
what's the color correction that needs
to be done and then just for fun make
them look like they're in transformers
because you know they need that that's
about it what is all this for really
quickly it works great as a simple
effect library interactive cinema kind
of like that example I showed you with
the Ok Go video where you know you're
taking cinnamon making an interactive
browser-based editor sometimes you know
a lot of times offline tools are better
for editing images and video but
sometimes which is easier you know to
build a browser based out of your editor
it can be delivered over the web you
know so that's something that may come
in the future somebody told me the other
day they're building a desktop video up
with this with node WebKit on
accessibility this is really awesome a
guy from the BBC who's an R&amp;amp;D department
I don't time to show it to you but made
an effect that for people who are
colorblind it will process the color to
make them stand out differently so the
color blind people can see that stuff
which is really cool i'm really excited
about that it's pretty awesome um
finally yeah i think this stuff is for
real it's happening but it needs a lot
of work it's a little bit of a new art
form so go out there and experiment with
it and you know make lots of TV glitches
and make stuff that sucks before it
makes stuff that's good and please
contribute uh you know I need I need
patches i need bug reports lots of help
it's on github it's all free check it
out finally you know I think um this
will let us go from you know like i said
compositing is a big step up from cgi it
lets us go from crappy movies like
Lawnmower Man and tron to awesome movies
like a lot more men and tron too so go
out there and do it so thank you very
much um that's it okay
alright thank you very much Brian now we
don't have any time for questions right
now but if you do have any questions hop
on over to the chat room over at jas
conf out Asia or go see Brian during the
breaks cool thanks Brian thanks a lot</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>