<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[JSConfUS 2013] Rebecca Murphey: Optimizing for Developer Delight | Coder Coacher - Coaching Coders</title><meta content="[JSConfUS 2013] Rebecca Murphey: Optimizing for Developer Delight - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[JSConfUS 2013] Rebecca Murphey: Optimizing for Developer Delight</b></h2><h5 class="post__date">2013-08-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-WpDN2k7vbU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm gonna talk about optimizing for
developer delight I am NOT going to talk
about there's no right answer because
Pete and Andrew kinda already did that
justice earlier today and I just worked
on that talk for a month and it wasn't
going anywhere so I wrote this instead
these days i work at bazaarvoice i'm a
senior software engineer at bazaarvoice
where alex is working for another little
bit so i said the whole currently thing
and i work on the client-side framework
that powers the ratings and reviews and
lots of other applications of our core
application is a ratings and reviews
third-party javascript widget so if you
are big retailer then and you want to
have reviews on your site then you might
use the Bazaarvoice ratings and reviews
product in order to get reviews on your
site without you having to write all
that code yourself and i'm working on
the framework that underlies the new
version of this system of the software
and there's a huge motivation to get our
customers switched over to this new
version the legacy version long story
short kind of requires a lot more effort
on our part I could talk about that and
the 4000 XML tag options that you can
set in the old version but it won't of
its didja law or effort that goes into
configuring the old legacy version of
the software and the new version of the
software is configurable by the client
rather than by us and so long story
short we want clients on it because that
means less work for the same amount of
money that's pretty cool so of course
customers don't want to switch to the
new version of the software until the
new version has all the same features as
the old version has and you know word
we're negotiating on some of that but
they're still our features that we need
to build out because they existed in the
old software they were important to
clients in the old software and before
they're willing to sign on the dotted
line to switch over the new version they
need those features there and said
bottom line the easier I can make it for
developers to create new features on top
of this framework in the new system the
easier I can make it
them to do that the more money we make
faster so that's kind of the point of
this talk today and to give you a sense
of scale of the framework and the
application we're talking about kind of
about twenty five thousand lines of code
for the core application and framework
another 10,000 or so lines of tests unit
tests and functional tests and if you
throw in all the vendor libraries and
templates and tooling the development
server and all these other pieces then
you get up to about ninety thousand
lines of code so this isn't enormous
like this is not gmail but it's big it's
probably the biggest application that
I've had the opportunity to work on so
it's big enough and there are some
issues that arise when you have a piece
of software that's this big being worked
on this by this many developers and
being worked on by developers of
different JavaScript skill levels
everyone is our voice is really smart
but some of them came from Java some of
them came from Python some of them came
from who knows where I like to make fun
of the job of people but they're still
nice to me so I appreciate that and and
so a whole bunch of different people a
whole bunch of different JavaScript
skill levels and of course also doing
this all under the pressure of deadlines
and we had a particularly large deadline
before I started working there in
November and I sort of come here in
February the deadline was in November
and a whole lot of stuff happened that
some people may not be particularly
proud of in hindsight but we've all been
there too so I want to make clear that
none of this talk is like oh those dumb
people are our voice I had to go fix all
their no um they wrote good code
but they did a lot they did a lot of
this under pressure and so decent site
decent-sized code bases with lots of
developers working on them are
definitely interesting creatures because
even if you have a whole bunch of really
smart people working on them you still
can end up with people making decisions
that are in the interest of the feature
that they're working on today and not
making decisions based on the interests
of the code base as a whole or the
developer who's going to be working on
another feature tomorrow or next week or
next month and so even really smart
people can may
decisions that are good in the narrow
case but cause problems down the road
for other people and so what I want to
talk about today is this idea of
developer delight which is probably
overstating it a little bit I don't know
that anyways like yay I get to work with
this code I am I'm pretty excited about
working with this code but I might be
weird so developer delight developer
happiness there are lots of things that
make us happy money is one and time off
and you know there's lots of things that
are out of my control that make
developers happy but the things that are
in my control in this code base and in
this job number one getting a clear path
for getting people up to speed that was
one of the first things that I focused
on when i started at bazaarvoice was i
don't know where to start how do i make
this easier for the next person how do i
make it so that Alex doesn't that the
onboarding process isn't alex sitting in
our room with me for three hours
explaining everything that i need to
know how do we make the onboarding
process for this framework more more
automated more more self-serve kind of
thing number two how do we make sure
that we don't need all senior software
engineers working on developing features
because you there's probably a lot of
senior senior software engineers in this
room you know how many recruiting emails
you're getting there aren't enough of us
we can't that can't be our answer is Oh
we'll just find isn't matter we're
willing to pay we can't find them and
number three we want to make sure there
is few surprises as possible we want the
it just works we don't want there to be
any well I tried this nut didn't work
and then I put this variable here and or
I put this argument here and then
suddenly it worked so i'm just going to
commit that move on wait a lot of that
and we're trying to get away from that
we want to isolate complexity so you
don't have to understand the crazy
mechanisms that we use in order to do
our event binding which is a whole other
talk that andrew de pont could give
because he wrote all that for us
recently we don't want to have you
wouldn't want developers to have to
understand the complex purchase the
framework we want to make it really easy
so they can develop features we want the
development process to be
is seamless and for them to have the
information that they need they don't we
don't want them to have to go digging
for it and finally nothing should be
more difficult than it should be you
know we can't make everything easy but
we can make it so that nothing is harder
than it needs to be and so those are
kind of the goals that I set out for
myself when I joined in February my job
like I said or maybe I didn't save my
job when I joined was not to develop
features not to fix bugs but was to
focus on making this a better experience
for people and that's what I want to
talk about today is kind of what I've
done and things that I think are
generally applicable not just to our
code base that we're working on but to
any large project that has a number of
developers of different skill levels
working on it and deadlines like the
deadline part kind of goes without
saying there's always pressure there's
always deadlines so that's why I want to
talk about some of the things that I'm
going to talk about are so simple that
you might not think to do them because
they're so easy and some of them are a
little bit more complex so i just gotta
you know 22 minutes left so let's dive
in and one of the simplest things that
we did was to add assertions to the
framework so simply to say i expect this
thing to be true at this moment and so
how many of you have been you know
working on a feature in a project you've
seen something like this right like
anyone who doesn't put up their hand is
just lazy because it's the end of the
day so you've all seen this and this is
not a useful error of course there's a
lot you can go dig up the line number
and see what happened but maybe this
happened is the result of some
asynchronous operation and so you really
have to go trace back where things went
wrong we added just these really simple
assertions to our code base to say I
expect that right now that config is an
object I expect that it has a property
of subject ID and if these two things
are wrong blow up please make noise now
rather than 400 milliseconds from now
when the Ajax requests that gets fired
three lines later finally responds and
so just
adding these was really simple it's just
you know we have this bv reporter a
beauty reporter object that has this
assert method on you can bring your own
assertion you can write your own really
simple assertion function you can bring
chai or any other assertion library cut
it doesn't matter this is this is kind
of the simplest and dumbest thing that
you can possibly do but the nice thing
about this is that with these assertions
you figure out and some of them are
actually a lot more do they explain in
much more detail what went wrong and
even very easily zero in on where you
have screwed up of course these are all
know ops in production so in production
we just catch our errors and fail
silently as far as the user is concerned
or even gracefully if if we're good next
thing is to I'm pressing the back button
there we go the next thing and which is
also really deceptively simple is to
tell people what's going on you know we
have this 25 thousand lines of code the
the framework is smaller than that but
does a whole lot of crazy things like I
was saying as far as event delegation as
far as how it sets up the views and
everything so just telling people what's
going on is a huge win when I showed up
this is what I saw in the console when
you pressed refresh essentially nothing
it doesn't matter what that says it's
just like hey I thought this is a font
and it's a font but I'm going to be
grumpy about it and so this is what I
saw this is what you would see in the
console when I showed up and if you
wanted to understand what was going on
especially as a new person working on
this framework it was up to you to put
in console.log statements all throughout
the code and then to make sure of course
that you deleted them all before you
commit hit or else Aaron for sander
would fix it on his branch and and it
was really cute branch it's like he has
kenny powers and he has um lynchburg is
his other his other branch for fixing
things to make you feel guilty so if you
if you if you want to find out what was
going on then it was up to you to put
those logs in to take them out and then
the next developer who came around with
we gonna put it in exactly those same
hugs to figure out was going on and then
have to take them out and it's
especially hard to understand what's
going on when you're dealing with an
asynchronous system where things are
happening later and you know there isn't
just a clear procedural chain of events
so we added lifecycle logging and
especially probably the most exciting
thing is these groups that we added
chrome devtools has console group and
console group end I other devtools may
have it as well we wrote this so that if
it doesn't find console group and
console group end then I'll just fall
back to normal console.log but what this
gives us is a nested view of everything
that's happening and so when we're
building this really complex view
hierarchy we can see exactly how that
happens and we're build it and you
anything that happens kind of in groups
we can see when that starts and when
that ends and so now when you are trying
to figure out where something's going
wrong you can put in one console log and
you can see exactly where that's
happening in the whole chain of events
and we also set up different log levels
so that if you don't want to see this
much detail this is actually an
abnormally high level of detail if you
don't want to see this much detail you
don't have to and so in a more normal
log level you would see more basic and
important information and again this is
really great for newcomers because when
they press when they get that server
running for the first time and see the
application running for the first time
they can see exactly what's happening be
like huh let me go look at that code
that does that it's also great for
debugging because as someone who knows
the framework you kind of learn what you
learn what this flow looks like you put
in your log message and you immediately
know where or something broke liga Tory
sniffle this one's a bit more complex
it's kind of a hard concept to explain
its kind of the more you do this the
more you know what this means that
eliminating temptation again you've got
lots of different developers possibly of
different skill levels working against a
deadline you want to eliminate
opportunities for them to make bad
decisions now in our case there are
probably lots of different kinds of
temptations but in our case our
particular temptation was a global it
was this you know we use AMD so there
aren't really any Global's well there
are but that's a whole thing there
aren't really any Global's but we had
this thing called env capital to make
you know that it was really important
and it was a dependency in just about
every single file in the entire code
base some files didn't actually use it
we actually we have scaffolding a
scaffolding tool like when you need a
new feature when you want to make a new
feature you see me a new feature and it
would automatically just be like you're
probably going to need env so I'm just
going to put it there for you it turns
out that this is really a bad idea
because if you give this global to
people they will find all kinds of ways
to take advantage of it in a really bad
way and so the next thing you know the
solution become this is this global kind
of becomes the solution for everything
so it was a global event bus for us okay
it was an error aggregator so whenever
there was an error we would fire another
event and that did something else we'd
send the error along to it was also how
we pass through analytics stuff that was
going on yeah cool um anything that we
couldn't figure out a better place to
put it and be seems like a good place
for it it was also this magical third
argument to on trigger set and get and I
I don't know that there's any what I can
tell you now what that did but when I
showed up I don't know if there's anyone
who could like any single person who
could tell you exactly what that did of
course there were no test for it either
so so we one of the things that I did I
saw this envy is just like the scourge
on the code base and I spent months
I finally got rid of almost all of the
env s just last week I spent months the
last few months trying to eliminate this
from the code base and so maybe you
implement things via a global but that
doesn't mean you need to expose the
global to every single every single
module every single piece of code so now
instead of saying envy trigger show
loading we have a loading overlay object
that we say hey show yourself now and it
may be implemented through envy trigger
show loading maybe it doesn't I don't
remember doesn't matter to that
temptation of env isn't there anymore we
create a BD tracker object that has an
error method and a conversion method a
bunch of other things so any time that
we want to track that something has
happened we now do that in the code
through BB tracker we eliminated the
magical envy arc which is a whole long
story basically it was a weird pub
subsystem and so we said hey let's make
methods called publish and subscribe and
they achieve that same thing but hide
the fact that they're doing it they're
not doing it through env anymore but
even when they were doing it through env
they hid that inside of the methods so
that developers weren't kind of having
to figure out what this magical env as
the last argument meant or what it did
we gave them a method that was what it
did and you one isolated that complexity
and to eliminate that temptation of oh
and these here let me just use it
another thing that we did was to another
kind of rule that I'm trying to enforce
on the code base is this idea of having
code for every concept and so if there's
a concept that you talked about that you
use when you describe how your
application works to another developer
they ought to be able to go in the code
and see the code for that concept and so
we saw this just a second ago with BB
tracker where we have this concept of
tracking when a user does something and
tracking when there's an
her and so before there was no one place
where they could go and see all the
different things that we could track and
how we track them and what the signature
was to do it and all that now we have
this BB tracker object which is where a
developer can go and learn about this
and now there are tests so we know that
it works and so having a code for this
concept of tracking makes it easier to
understand and makes it so you don't
need to know so much about how it works
under the hood in our application we use
these configurable components so this is
an example of a portion of a component
configuration for a review content list
and in when I showed up we had we were
passing around these raw objects so when
we needed to you know initialize a view
for a component we had this in it object
that had an annuity vez raw component
object and use that to initialize the
view of course we stored all these are
all component objects on env shocker and
and so we when I should have not want to
know like what is a component like what
does that mean how do we use them how do
they is this a component or is this like
part of a component I don't understand I
was really really confused and we were
using this term all the time to talk
about how our application worked you
know the Alex would say we have
components and they have features that
but I couldn't go into the code and see
what the heck of component was I just
saw these objects being passed around
and then and at but they there was no
thing that was a component and so a huge
part of the time that I've spent is
actually making this component be a
thing be a documented thing be a tested
thing so that now when you're a new
developer you can go see when we're
talking about components you can go see
the code that is making that whole
system that is the underpinning of our
framework we can see the code that's
making that work and so now we iterate
over the array of component objects and
we make a new component and then we tell
the component to an it it's
you rather than having this view
function that might be totally separated
from something else that we do with
components now everything that we do
with components is a method on the
component class dirty words sorry
another thing that we've done that I
can't emphasize enough is to automate
everything no matter what this XKCD
comic says automate everything
especially when you're working with a
large team large code base with a bunch
of developers of different skills we are
most of the people in this room are
probably really good troubleshooters
you're probably really good at figuring
it when something doesn't work on the
command line you might be pretty good at
figuring out why that is people of all
different skills will have strengths in
some areas not in others and so the more
you can automate these wrote tasks the
better off you'll be so one thing that
we have is this internal tool I can't
emphasize enough make one of these make
an internal tool that you throw in a
client name and it pulls up the whatever
information you might need about a
client their configuration a demo a
preview of their site a preview of their
site using development code whatever so
we have this tool and the great thing
about having this tool that automates
these tasks that otherwise they would be
going into the new admin tool clicking
on this including the old process for
doing some of the things on this page
was like a lot of clicking and now
there's not so much clicking you just
type something in boom you have we need
on the page very developer focused
rather than end user focused or customer
focused or non technical person focused
like this is a developer focus tool is a
tool focused on making it easier for
developers to do their job and the great
thing is that once you have a tool like
this you won't think twice about adding
more things to it so once you go through
that hard work of setting up this is the
first funk piece of functionality and a
tool like this then you won't think
twice about now you have this place
where I want to have performance graphs
of different instances Oh we'll put that
in what we
FBI Firebird inspector I want to have I
want to see how many errors there are on
clients or I want to see how many page
views are on clients well let's throw
that in Firebird inspector will throw
that data in there we weren't happy with
just that though so we've used grunt to
automate a lot of this on the command
line in addition so now you can just say
hey give me a preview URL for this
client in the QA environment and it'll
spit out how you can get to all of that
data so grunt is amazing for this sort
of automation we also have tasks for
scaffolding a new feature like I said so
just like in rails land where you say
rails G and it generates you all the
code you need for a new feature you can
say grunt feature and then the feature
name and it will generate code to get a
basic working feature into the system
for you we of course odd mate running
our tests and we automate getting there
getting our environment back to a happy
place because sometimes you'll get your
environment into a sad place and you
need to kind of blow away all of your
config files and all these things were
things that you know the some of them
existed when I showed up some of them
we've added since I showed up it's it's
all just a matter with the automation
especially it's all just a matter of
listening to the people around you and
what is hard for them and either giving
them a gentle not a gentle nudge to fit
to automate whatever they just struggled
through or doing it yourself if you're
lucky enough to be in a role like mine
where that's my job to do that you
already probably know you should be
documenting everything right I don't I
don't actually agree that you should
necessarily document everything I think
that well written codes it's modularized
and small methods that do one thing and
do one thing well you know doing all of
that will alleviate a lot of the need
for say API documentation developers
should be able to go read code to figure
out how code works but there are some
things that even the best code can't
tell you and so document is a kind of
rationale behind your tool the high
level of this is how
it works this is the problem we're
trying to solve and this is at a very
high level this is how we solved it
document how to do things how do I make
a new feature you know that the code
can't tell you you can go look at other
features but often figure out how do I
get started is really hard so document
how to do things document how to fix
things document where to find things in
your code base and if you can't say what
a directory is for you're doing it wrong
make the directory do less document the
things you wish you didn't have to
document like how to use get in your
suit like how you are using get on this
project how whether you do future
branches in your own repo or whatever
document things like that that maybe
when you were a small team you all just
agreed on with a handshake but now as
your team is growing you need to share
this out treat your code if you have
more than a tiny handful of developers
working on a project like this treat
your code like an open source project
have a change log every week that says
not these are the new features we made
like the new customer facing features we
made but hey I changed how this method
works and you're going to want to know
about that and so have a change on treat
your project like an open source project
so that other developers can know what's
going on just like hopefully they know
what's going on in a in a well
maintained open source project in
finally put it all in the repo at least
to start you know don't put it on your
company wiki that's not where your
developers are working every day I think
that a company wiki is just not a great
place if its documentation about the
code it belongs as close to the code as
possible lastly measuring things this
was this is something that's important I
have no idea what the answer is because
how do you measure developer happiness
like you can measure attrition but
that's kind of a terrible way to find
out that you didn't do a good job it's
really hard to quantify the speed of
feature delivery you can't really you
know the feature a is not equivalent to
feature be you can't say Oh feature a
took two weeks and now it only takes one
but it's a different feature it does it
you can't make a good comparison a
couple of things you can do is make sure
that these changes that you're making
aren't making things worse so we keep an
eye on these cyclomatic complexity of
our code and some other complexity
metrics to make sure that we're not
doing anything terrible in this
refactoring that our overall complexity
is either staying the same or going down
and also the complex that this is a
grunt grunt plugin called complexity
report and it's a great way to also kind
of identify oh maybe I should spend some
time looking at that file because it is
reporting that it is less maintainable
or more complex than other files in the
in the code base you can also make sure
that you aren't making a performance on
improvements so that's another thing
that we're doing is keeping an eye I
have no idea what this little jag is at
the beginning I kinda need to figure
that out because that's bad but it's
going back down so that's good so you
can you can keep an eye on how your how
these changes are affecting the
performance of your code but probably
the best measurement I have of whether
this is working and whether I'm doing my
job is just listening to the people
around me and listening to what they're
saying and I'm getting a lot of good
feedback about like I wish I had this
you mean I can just do this or you know
those sorts of things hearing success
stories that's that's not a very
objective measurement but it's a nice
one and I think so much of this is just
about listening to people listening to
people when they say nice things and
listening to what they're complaining
about and going and fixing it and I
think that even maybe you aren't lucky
enough to have someone who's dedicated
role is this on your team but I'll tell
you what if you nominate yourself to be
that person and just start doing it
you're going to have a new and better
job really soon either the company
you're at or somewhere else who's going
to appreciate this sort of this sort of
thinking about how to make things better
and not just doing your job so are we
there yet is it
done that would be nice cuz I'm about to
disappear for parental leave but I think
that this requires constant vigilance
you can't there's no time when you're
done there's a time when maybe you
aren't spending as much time on these
sorts of things but there's no time when
you're done ensuring that developers can
work with your framework and so that
means doing code reviews reading every
single pull requests and just knowing
what's going on doing the changelog so
that you kind of have a sense of the
churn that's going on eavesdropping on
planning conversations that maybe you
weren't involved in or maybe you don't
strictly need to be involved in but
listening to what's coming down the
pipeline so you can get involved in
conversations about how you can solve
those problems or write those features
so that you aren't creating more
problems down the road yeah that's me
this is a this is the team I've been
working with for the last the last three
months they're amazing and we're hiring
of course because everyone this room is
but come find me on Twitter on the
internet and yeah thank you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>