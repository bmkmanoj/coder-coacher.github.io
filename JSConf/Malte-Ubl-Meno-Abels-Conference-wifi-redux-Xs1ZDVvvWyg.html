<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Malte Ubl &amp; Meno Abels: Conference wifi redux | Coder Coacher - Coaching Coders</title><meta content="Malte Ubl &amp; Meno Abels: Conference wifi redux - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Malte Ubl &amp; Meno Abels: Conference wifi redux</b></h2><h5 class="post__date">2013-01-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Xs1ZDVvvWyg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey jay is calm how are you doing how's
the wife i holding up all right awesome
so yeah welcome to our presentation on
conference Wi-Fi redux we're going to
talk about how we try to you know fix
this Wi-Fi problem that you sometimes
have a conferences let's start with a
quick introduction of us to so this is
me know you might know him from on
Twitter as fast and fearless as a you
know there's this you know a friend of
him once described him it's the only
person in the world that can enter you
in a revolving door one spot behind you
and can exit before you so be aware of
this guy and I'm not so and thanks for
Brendan for the introduction so let's
start with a short voting who in this
room has one Wi-Fi device attached to
the network how about two how about
three anybody 45 the palm guy everyone
nice awesome so yeah right so I mean
Wi-Fi on conference is likely to break
right so we actually made two
presentations this web page right so we
can now click on the on the right one
and we basically choose between
everything's already not not really
working the you know if you're very
familiar with us you know where the
photo on the left happened and but I
kind of get the feeling we're in the
better than dojo department right now so
let's do that yeah we have a story to
tell about conferences Wi-Fi of course
it's very hard to make these first of
all it is absolutely temporary it's the
setup which made for two or three days
so you have to bring in
everything and you have to pick out
everything and you don't know exactly
how the setup on the location are
working so it's tough first of all
what's with the backbone so you have no
cables installed we in this in this
location we have but in general we
didn't had so we have to build a
backbone by on our own and secondary of
course then the Wi-Fi of course the
frequency stuff is coming up and we have
to build a coverage of all the Wi-Fi
spots and it should work all around the
area and this is usually done in longer
set up in commercial environments out of
these it is a very complicated thing to
think about a conference set up of
course you you are crowded you are
sitting in one room there are a lot of
people you need a lot of bandwidth and
first of all you read what's on the
Wi-Fi technical things and you get its
imagine there's enough bandwidth in the
air but that's only terror ethically in
practical you have we discovered we
don't get more than 220 megabits through
a room and this this sounds affordable
and much but it isn't and all of these
we also learned that the bandwidth in
the air is one thing but there are a lot
of other things to do with the back end
and the connections to oust outside
world and the internet and out of these
we had a couple of strange things
discovered with the usage pattern
usually we would like to say okay it's
just HTTP traffic but it isn't at all so
that's all learnings we had and all of
these we try to solve these right so
basically in Berlin the situation worse
we was at these you know really nice
lofty industrial building if the problem
was it didn't have an internet
connection so you know we basically went
the route of taking whatever you can get
right so we enter
with two like microwave radio directed
radio up links to the internet and then
we also bought for dsl consumer lines
which as you might know especially in
Europe there are a synchronous they have
much more downstream bandwidth a nap
streets bandwidth right and what you do
is you do load balancing right so you
all those lines and and you know how do
you get the traffic across yeah that's
uh that's let's load balancing yes and
how do how do you done that of course
it's similar to http but it's it's in
Reverse style so we have a link
aggregation facility which is means okay
on a web server the requests are coming
in from the internet and they are spread
it out of your server cloud or server
farm and what we does is a different one
of course we get the packets from the
conference and we have to spread it out
over the pipes we have to the internet
so and then we have to rejoin them on
the other part in the internet so this
is done with link aggregation and it's
happening in both directions so it's
inbound and outbound traffic which we
are observe all of these that the
connections are as a matrix so there's a
lot of things to do we think this is the
first implementation of this kind so we
you know there's several other packages
around that do this but we didn't really
find one so um it might be the first and
the good thing on it it is JavaScript
and it is written in node so so it's
matt all traffic running over a node or
what could go wrong right yeah awesome
so we're introducing what we call
sashimi sashimi is a packet knife and
it's written it's using the colonel tune
interface which is exposing IP
interfaces for the traffic on your
external interfaces to user land and
what that gives you and this is like the
main part of sashimi it gives you a note
api to do userland javascript level IP
stuff you
no we use it for link aggregation but
you could do all kinds of things and you
could also use it for like packet
inspection packet inspection all kind of
higher-level things that could be done
in JavaScript and which you know you
don't want to do and see if you're a
Java confer ins and to explain what what
what what sashimi is doing it's
basically using HTTPS TCP streams on
those various connections and is sending
IP traffic though whether it's tcp UDP
whatever over those TCP streams so we're
doing IP over tcp/ip between the both
sides we need to go deeper yeah um right
so this this very uncomplicated picture
kind of explains the situation we had in
Berlin so up there is the guy in the
conference and down here is the internet
where you can download kittens right so
there's two sashimi processes one is
running inside the conference the other
one is running outside the conference
some were also at the conference so we
had on the left-hand side those radio
links two of them and on the right side
our dsl connections so we actually
decided that because the dsl connections
have so little upstream bandwidth we
don't want to use it at all for user
traffic we just use it for the
confirmation packages in tcp/ip so what
you see up there is from the upper to
see me the links going out all outgoing
traffic all outgoing traffic is going
through the microwave links and it's
coming back and it's you know the the
traffic lens and the sashimi you
download the kitten so you have the
returning TCP IP packet and right now
we're using all our links for the return
so it might very well happen and I go
out of the camera but I have to it's
that you know your packet is here and it
might always come through here but it
might go actually back through the dsl
connections so you can give full load
balancing and what we have those
multiple lines because we actually we
open for TCP streams on these
connections and two on these and then we
do round-robin load balancing on them so
that you get choices
much traffic back through the microwave
links then we see through the dsl
connections and it worked yeah of course
we are on the technical conference so we
need some code and the this is about the
packet packet streaming protocol it's a
general protocol that it's mad just have
the header which say okay the packet
will be half the size of thousands bite
and then the packet is transmitted and
in general this is the code which is
running in sushi me which receives data
somehow and are further on it it
receives the header and then the packet
and then a header and then the packet
that's why these active switches
happening there and the QA at call does
we will have a further look to later on
the next slide or to it it does just
collecting the incoming data of course
the TCP fragments could be different to
the sizes of the packets so the colds
which are coming in are given to the
queue ad and the queue ID say okay I now
receive four byte for example for the
Harrow and then it calls a call back
header complete and had a complete just
switch around and sets a packet length
for the next packet and then the packet
will be received so with so the
synchronization on a stream with a
packet is established in somehow the the
whole code is not much longer than these
it's a little bit tweaking around with
buffers and having some offset
calculation of the incoming buffers and
dust of the callbacks to all these
things so what you say you drop in their
data and use wait for 4 bytes and like
the the Kohlberg is issued this might be
a little hard to read but you know may
know he's one of those guys he doesn't
like semicolons and but I made him put
them in there so maybe we can get some
learnings always anyway yeah nice so we
talked about this one problem that is
that you know you
kind of have those different connections
and you solve it right so we experienced
that other problem many was talking
about that earlier and that is that
people sometimes do weird things on the
conference Wi-Fi and you you wouldn't
really expect that it's it's you know
your backup your stuff and what and
we're experiment that's actually right
now people do have backup agents running
on their computer and they're constantly
pushing traffic into the internet which
is you know absolutely different from
what you would expect from somebody
checking trigger right so what happens
is we experience this congestion and you
know what what do you do if you get
congestion right so on the first day has
come for you Mina was sitting in this
corner the whole time and was inspecting
target IP addresses trying to block them
so what we experienced actually two
weeks ago is that basically ninety
percent of the interent runs on amazon
right so once you discover that those
guys are all backing up their stuff to
amazon and then you decide to block
amazon you block the internet basically
right so you can't do that so and you
know it's 2011 right so what do you do
if things are broke you know you need to
add more social to the experience so you
might have noticed that you guys had to
make a twitter or lost connection to get
on the Wi-Fi so and we were pretty clear
about on the page what this means that
means that you guys aren't anonymous
anymore right if we see that one of you
guys is sending our huge amounts of
traffic through the internet we're going
to come back to you and tell you please
stop because before that we just end up
here address we didn't know who it is so
now we know right and so coming from
this we actually you know we have all
this data and its associated with
twitter names you can do fancy things
like on the next page you must forget
google
he does obviously he does I didn't
mention that on purpose and I helped him
right so he's the evil guy I'm just he's
a good guy I'm just a search engine okay
so let's look at this um here it doesn't
start out to be very fancy so this is an
application that we call social traffic
occasionally see it now at social desh
traffic streaming org and the first
graph is showing the you the overall
traffic that went through the pipes of
this conference throughout the time
right can you move on to the second
graph yes this is showing you the short
term traffic so this is actually the
last three minutes what went through the
pipes it's kind of a weird unit it's
bytes per 10 minutes but it doesn't
really matter right so moving further
down we see actual twitter names
associated with the traffic that they
pursued and it's very interesting stay
on top seven tops and okay that's it
bound traffic I want to go to no no go
to the go there because there's a new
thing yeah because you know fast and
feelings and cramp oh sorry Niles right
we were on position one because we were
you know we were testing this but who is
jas john st ooh bad guy bad guy way to
go no no no what did you do demos it's a
pretty good excuse you uploaded 1 point
3 gigabytes of demos to the Internet
awesome do that let's let's go to the
outbound traffic so you see all the
names are in that it's a long list it's
around 260 users we discovered and talk
about little how we go this so whenever
you go through the signup oh oh you out
first so it's fine you're still the
first are awesome it's this outgoing or
in bond inbound honestly
so let's talk about how this works so
you know you go through the signup
process we open up iptables for your mac
address and store in a couch to be what
you know what you're always token is
what your trigger idea is with your name
and then you know we get those flow
packages flow files from the firewall
and we associate them back with your
true name and write all of that into a
culture be so don't worry about it we
don't you know we don't actually store
the payload data which would be kind of
hard but we do store the amounts of
bytes that you're sending in and out of
the internet he's a good guy from google
right so we are really then we resync
that database outside of the conference
to a data center using couch to be
replication and this application is
actually just the HTML file that's
looking at the data it's on github you
get the URL later and you might have
other fine ideas what you could do with
that data if you get it yeah you were
like I wanted to see others people right
so spoon so this was this thing you know
what we didn't show you it is you can
actually click those names I can do that
and then you will see in the graph of
course I switch off the OL and all
inbound and all outbound traffic oh I'm
one too high he doesn't it Oh where's
I'm gone maybe it broke it broke no it
doesn't it doesn't I don't know
interesting it's interesting I see so
many else maybe spoon is evil what's up
with this guy that's me it's also gone
gone so we are not here so the things
right it's probably the couch to be that
stone so anyway we got yawn we're going
to fix that it's it's only a maybe it
works for you so so one last thing right
so there was some comments already about
that included you guys all gave us
your Roth write access to a Twitter
account right so what we want to do now
is the largest mass poopin necessary of
the internet please check your internet
actually we didn't what we could but we
could he is a good guy I'm the bad one
of course so we flipped a coin and we
decided not to we should still do this
world record maybe if when everybody is
up here tonight and we but everybody
does it on his own arm will so anyway
really yes that's it oh no it's no no it
isn't it isn't of course of course we
have to mention where we are put all
these stuff first of all it's a bit
pre-alpha no it's not pre-alpha it's
tailor-made for conferences like these
so you cannot stand it but don't expect
that is completely done and everything
is in the first of all sushime is on my
github account and the social traffic
stefan from Grand Falls you will find on
his mom and we are would be it would be
nice if we get some pull requests for
the social traffic stuff or sashimi are
we will integrate that and we will see
where it's working the next time there
are a lot of ideas to do with a to deal
with all these information it's really
interesting once you have traffic and
identity you can do interesting self
with it and you know who knows what's
going to happen yes thank you that's it
there are there are any questions
this is this is the on the plane that
the test set up of course on the plane
you John don't that you don't allow to
enable the Wi-Fi so we choose the cable
and it works okay we're here for for the
Wi-Fi access points are where we have a
lot of hardware the the hardware here
around is from all we didn't install it
here but Wright the actual Wi-Fi routers
are delivered by a vendor so it's not
our business Germany we will have x up x
own and so there's a foxconn computer
you probably know more about it you're
earning inside this conference it's a
very small system which which just
collecting the idea and to just the
backbone Rajan that's all another
question more questions so ok thank you
thanks
Laura did you remember to load the bacon
oh I knew I forgot something</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>