<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Harry Roberts: Why Fast Matters | CSSConf Budapest 2017 | Coder Coacher - Coaching Coders</title><meta content="Harry Roberts: Why Fast Matters | CSSConf Budapest 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Harry Roberts: Why Fast Matters | CSSConf Budapest 2017</b></h2><h5 class="post__date">2018-03-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JoGR6Lh8EFc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">cool right thank you so much
yeah I'm Harry I'm here to talk about
why fast matters it's quite a long talk
I've had to trim a couple of slides out
these slides that I share at the end
will be the full version of the talk so
check those out yeah let's get straight
into it so I'm Harry I'm a consultant
developer from Leeds which is a city in
the north of England
I'm currently focusing a lot on
performance so I know this is CSS conf
but a lot of my work at the moment folks
is very strongly on kind of performance
engineering helping clients make their
sites faster more reliable more
resilient and just real quickly I only
gone a bit of a tangent three years ago
it comes in Paris I met the organisers
of CSS called Budapest and as soon as I
heard the word CSS come from Budapest I
was like I need to be there I have to be
and for a few years it didn't happen and
I finally got the email this year I was
like yes like whatever I need to do I
will be there I arrived on Saturday I've
been exploring a city
absolutely beautiful city incredible
city really great food and drink the
people are really nice but monday was a
national holiday right so museums were
closed everything was closed so I
decided well Monday is the day I will
spend walking I'll spend that day
outside because can't go to museums so I
took a walk up to the the Statue of
Liberty anyone being up there yeah
beautiful but it wasn't on Monday it was
terrible weather this is such a bad idea
I can barely keep my eyes open so the
rain was coming in sideways my hair is
all over the place absolutely dreadful
horrible weather so I mean I'm English
right so I'm kind of used to it but
still wasn't right but then sorrow
landed yesterday owners like sorrow
let's I need to go back it's good
weather so went up again yesterday and
how beautiful is that look at that this
is the view I was treated to yesterday
afternoon and what I thought was quite
nice was
check that out anyway right
let's get down to it I've got like 98
slides left I work for a lot of
different clients right I'm a consultant
I'm very lucky very fortunate very
privileged that in the last four you in
fact my company turns four years old
today right I've been working for myself
for four years starting today right now
it's my company's birthday which is
pretty baller and yeah I've worked with
some beautiful wonderful clients over
the last few years being very very
privileged one of these clients the
train line sort of Center bottom their
train line is a European company who
sell train tickets when they released a
case that he recently a couple years ago
maybe which said that if they could
reduce latency by just 0.3 seconds
customers would spend around eight point
1 million pounds more every year so I've
actually been helping them with this
body of work it's been very fascinating
very insightful and the good news is
it's actually kind of easy to make a
sight point three seconds faster right
it's not much time at all
but at point three seconds had a
tangible sort of measurable impact on
their baseline right 8.1 million pounds
a year another company unfortunately not
a client of mine but Netflix saw a 43
percent decrease in their bandwidth bill
simply by turning on gzip a couple of
things here like who turned gzip off in
the first place like this case that he
should really say Netflix used to waste
43 percent of their bandwidth bill vine
not having jeez it turned on um but the
second thing is 43 percent is an
enormous number 40 imagine if you went
to a restaurant and for some reason they
decided to give you 43 percent off your
bill it's a huge number so imagine what
that translates to translates to in
savings for somebody the size of Netflix
so they saved a huge amount of money
here GQ kind of lifestyle magazine they
cut load time is by a very very
impressive 80% and in return so an 80%
increase in organic traffic so not
search not paid for kind of completely
organic traffic
and over that increase the median time
on site went up by 32% this is a really
great case study for when your clients
or your your managers or whoever tell
you that well we're not ecommerce right
we're not ecommerce so we don't think
performance equals money well might it
may not do but it will increase
engagement it will keep people more
loyal and as much as I hate to mention
it GQ has ads on their site right so
this will translate to more money that
eventually it will make them more cash
imagine increasing ad impressions by
nearly a third right so it will
ultimately translate to money by golly
these case studies from
WPO stats calm this is a fantastic
resource if you ever struggle to sell
performance to your managers your
clients it's full of really good
information but the reason I picked
these three specific case studies is
because each one tells us something
different the first one it will make us
more money right or make the business
more money the second one it will save
as money right performance will reduce
our costs in fact I work for a company
recently and just by optimizing for
performance we reduced their data
overheads by 62% like we reduce their
transfer by 62% just by focusing on
performance and thirdly it will just
make users happier we know from our own
experience that slow websites are
tedious and we don't use them we abandon
them but what I want to talk about today
in this talk is another side to
performance because nearly all the time
when we discuss performance we've got a
very westernized kind of very
capitalistic view of what it's about I
want to talk about the non financial
side of things I believe there's a kind
of ethical and a moral side to
performance there are moral reasons why
we should be fast and why we should
focus on building fast and performant
websites I've got three short anecdotes
out to share with you anecdotes aren't
great because obviously anecdotes aren't
the same as evidence or data but these
are three really interesting stories
that all happened to me this year so I'm
not talking about the Internet five or
10 years ago I'm talking about the
internet in 2017 first one I was
organizing an event with a friend of
mine my friend runs a really really
great coffee shop in Leeds and I sent
him an email and it was in
Porter email and he just did not reply
to me and I was stressing right so I was
like we need to we need to decide what's
gonna happen
so eventually I just went into the
coffee shop and you said look dude like
you didn't reply to the email what's
going on
he was like I'm really sorry I was on
holiday in Thailand and I got a push
notification telling me I received an
email but the data connection out there
was so weak that I couldn't actually
open it I hadn't sent a huge 20 mega
attachment it was just a simple plain
text email but he left the data of the
kind of the connectivity to actually
open and read it the next one somebody
sent me an email and this happens quite
often someone sent me an email asking
for some advice just general kind of
career advice and I sent a really long
response and after about two weeks the
person still haven't replied to me and I
was like nah that's kind of rude I did
put a lot of effort into the reply but
you know whatever I'll get over it but
then a few days after that like sort of
two three weeks later I get a response
he's like I'm really sorry for the
delayed delayed reply I've been on a
really bad connection and I was like
well I will forgive you if you tell me
everything you mean by bad connection
and this is what he said I'm currently
at my parents place in Rajasthan which
is northern India since my parents don't
have a computer they only consume
internet through their smartphone we
were alone Internet services by telco
providers which in our town are still 2g
some providers claim to be 3G but I've
never seen that happening
right now I've got a connector sorry
right now I've connected my laptop via a
Wi-Fi hotspot and opening the basic
version of Gmail takes between 30 and 60
seconds most other sites I just use
mobile Chrome because that will make
savings for me so two interesting things
here I've used the basic HTML version of
Gmail maybe five six times in my entire
life and what I do I'm like god this is
the worst thing ever
all right and it loads and it's fine and
it's a bit clunky but it works this
person has to use it all the time and it
still takes up to a minute to load the
basic version of Gmail the second thing
and more interestingly here is when you
go home you've probably got a Rooter in
the corner of your room that beams out
Wi-Fi and if you're lucky that Wi-Fi
might be backed by a fiber network and
that's how we get online
this guy's family a hundred percent of
the time they're getting online it's not
via Wi-Fi it's not by a broadband it's
not a dedicated connection they don't
have a Rooter in the corner of the room
they've got a commodity Android device
which is beaming out a 2g connection
high latency low bandwidth device a
hundred percent of the time third one
that happened to me
I got a DM again simply asking for
advice I'm not cold at Harry on Twitter
so I don't know who got the notification
um but this this person pinged me asking
for some advice and this is a Nepalese
developer now completely as a soft side
kind of coincidence I'd worked out from
my Google Analytics that Nepal was a
problem region for my site my site was
slow in Nepal so I gave this guy some
answers and I said oh by the way whilst
I have your attention
does my website feel slow for you
because my analytics tells me that my
website is slow in Nepal and his
response was astounding he said no I
don't think so I mean I click through to
your site and it loads within a minute
and that didn't feel slow if we were to
visit a website that took a minute to
load we'd assume the website was down
right we'd borrow the websites down or
go somewhere else this person was like
oh that's fast a minute good work
and the worst thing here right the other
thing I want to mention is that my site
is meant to be fast right my site if you
visit my site from Dublin for example or
from Los Angeles or whatever it'll be
fully rendered within 1.3 seconds the
exact same codebase the exact same CDN
the exact same infrastructure but
visited from Nepal they pay a penalty of
hype 58 seconds just to visit my site
imagine what it's like for this person
visiting sites that haven't been
optimized it must be completely tiresome
it must be in fact almost impossible you
may have noticed a couple of things
about this though um one of the most
important being that all of these
stories all of these things they
happened in in the Far East has anybody
heard of a initiative called the next
billion users anyone heard of this yeah
not many okay so just
right because when you google it you'll
find this resource from quartz which is
a very good canonical resource all about
the next billion Internet users there
are roughly it's actually more than a
billion but 1 billion 253 million is
less catchy I guess the next billion
users coming online are all coming
online from emerging economies and what
are those emerging economy economies are
in the Far East you may have seen this
graphic before more people live inside
of that highlighted area than outside of
it even taking into account how much
ocean there is under that highlighted
area more people live inside of it than
outside of it when you consider that
this contains places like Indonesia
India Bangladesh very densely populated
areas it soon starts to make sense but
this is the majority of our next billion
users these are who we need to optimize
for I'm still really quickly run through
some stats around some of these regions
some of some of the countries in this
region bangladesh average connection
about three and a half Meg only 15% of
people are online 3.9 million broadband
subscribers represents 2.4 percent of
the population on a dedicated broadband
connection what we would actually call
Wi-Fi or or Ethernet you know like a
broadband dedicated connection but with
134 million cellular subscriptions 83%
of the population get online via mobile
highline's hielo bandwidth that
represents a delta of 34 34 times more
people get online with mobile only than
they do with broadband in Bangladesh
India three and a half Meg four of
people online 1.3 percent of the
population have a dedicated internet
connection but with 1 billion and that's
not a typo that's a billion with a B
cellular subscriptions 79% of Indians
get online with a high latency low
bandwidth connection that's 58 times
more people these numbers only get worse
Pakistan average connection two and a
half Meg a fifth of people are online
1.8 million subscribers for broadband
represents just one percent of the
population with a reliable network 126
million cellular subscribers represents
67% with a unreliable mobile only
connection that's 70 times more people
and finally I think these are the slides
I thought I'd cut out so this is a
surprise to me as well these are all
this data was meant to be skipped over
in this talk fastest connection of the
group four and a half Meg represents a
fifth of people online just 1.1 percent
of the population have a dedicated
connection but weird phenomenon here 132
percent of the population have a mobile
connection and this represents people
with more than one cellular subscription
more than one SIM card I've got two SIM
cards I've got a different travel sim
that's cheaper to use abroad than my
British one so Indonesia a lot of people
will have more than one cellular
subscription and the Far East is the
fastest-growing economy on the planet
and Indonesia is its fastest growing
country so this may represent how or why
it's got this kind of growth in in
mobile but this represents 121 times
more people getting online via a solely
high latency low bandwidth connection if
we average the data out we'll quickly
see that three and a Half Men connection
twenty percent of people are online . so
eighty percent of the population
aren't even online yet these are our
next billion users only one and a half
percent one point four five percent of
this region actually have broadband
actually have a proper internet
connection whereas a staggering 90
percent of that region has a mobile only
device let's contrast that we're looking
at nearly 14 Meg speeds three-quarters
of people here are online over 1/4 I've
dedicated broadband and actually again
right here 118 119 percent of people
have more than one device
we're contrasting very very different
views any time I do this kind of talk in
the West I tailor kind of this slide to
each individual country we are doing so
much better so much better than people
in the Far East so what does this tell
us it tells us a few things we're
building for a totally different class
of views a completely dn't profile of
user it also means that we need to
change our technological decisions when
we talk about building mobile
first we normally think oh well I used
Minh with media queries right that's
mobile first not at all mobile first now
means don't build by default on a laptop
I have clients who do this all the time
they will build a specific MDOT website
and the moment most of their testing is
just resizing Chrome we need to build
testing first and foremost on a high
latency low bandwidth connection
optimize for the lowest common
denominator first because speed is a
feature right people I don't have access
to the same kind of infrastructure we do
when I go through this kind of stuff
with clients the first question I get
asked is how fast should we be how fast
is fast enough and the bad news is
there's no real answer to that question
I can't answer that very quickly but
normally if it's a very commercial sort
of a for-profit client I would normally
say just be faster than your nearest
competitor right that's probably the
quickest way to start just be faster
than the person who you want to be your
nearest sort of commercial competitor it
was a really great tool I found almost
by accident called dare boost dare boost
French startup kind of an odd name
especially when I say in my northern
accent dare boost sound very inspiring
but great little tool you can put your
web address in there's a guy he runs a
little site called CSS tricks I don't if
you've heard of him
but I thought right well let's benchmark
each other against ourselves and it
turns out I'm a little faster than his
site but then what you have to remember
is my sites like a personal blog or as
Chris's site is a full-on kind of
WordPress community so you do have to
kind of take into consideration
differences in the actual infrastructure
in the site itself but if you're working
with clients who don't know where to
start optimizing for performance start
here this tool is great
another tool substantially more
expensive but also very very good is
speed curve and these slides are all low
contrast I'm afraid but hopefully you
can see that we got like this historical
data where benchmarking several
different sites against one another
these kind of graphs these charts are
absolutely fantastic for proving to
non-technical stakeholders of the
business clients managers exactly how
well we're doing we don't need to tell
our manager that you know
DNS overhead is down by 3% or
we've reduced number requests by 15 no
need to know about that no one cares
about that all right we can show them
things like this cool so how do we get
there and this is the probably most
important bit
the first kind of part of this talk was
kind of a call to arms I guess I'm just
kind of laying the scene setting the
scene for how bad it is using the
Internet you know in different parts of
the world this next part of the talk is
going to be some sort of fundamental
advice and strategies on how to get
there I've got three kind of tips and
they're not like a BuzzFeed style like
you would not believe these three simple
things because they're not actually
there aren't even three of them there
are four but yeah these are going to be
fairly fundamental shifts they're not
going to be necessarily easy but they're
probably the biggest fundamental changes
you can make to workflows and company
culture to actually start building fast
websites and properly servicing people
who don't have the same infrastructure
as we do the reason I said three tips
when I meant before is because the first
one is actually like a throwaway kind of
a zero tip because honestly the zeroth
step in optimizing for performance is
just build build a fast website just go
and do it no one's gonna stop you now
this sounds very tongue-in-cheek this
sounds very like a pointless thing to
say but genuinely this is where I start
with all of my clients if you want a
fast website then make sure you've said
that you want a fast website it's not
gonna happen by accident it's not easy
to make a fast website so you need to
make sure that it's actually a goal you
need to make sure it's something that
you the team marketing design
stakeholders everyone needs to focus on
this goal so although it sounds like a
really silly throwaway comment this is
probably the most important thing you
and your team can do is actually decide
between yourselves and officially that
you want to have a fast website and
you'll be surprised how much easier it
gets okay let's start with the proper
stuff um
step one understand the problem but like
really properly understand it try your
site from a different kind of point of
view being fast or having a fast website
from your office in a nice European
capital city with blazing fast sort of
fiber connect
being fast in that environment isn't
fast that's not really fast if you can
be fast in the middle of a field in the
middle of nowhere on a 2g connection
then you're going to be fast everywhere
if you optimize for the worst possible
scenario everything else on top of that
is completely free if you start by doing
the hardest bit then everything on top
of that is already solved and it can't
get much simpler if you optimize for
what you're perceived worst case
scenario is everything else on top of it
is already solved Facebook did this
quite well they introduce them in called
2g Tuesday's this is where once a week
on a Tuesday oddly enough they
artificially throttled the speed of
their connection to Facebook's product
to a 2g connection so anybody working in
the Facebook offices any Facebook staff
visiting their products and services on
a Tuesday would be forced over a 2g like
connection so obviously it didn't affect
regular visitors but IP ring-fencing
they basically said any any staff
visiting the site on a Tuesday are going
to be forced through a 2g connection to
understand what it really feels like to
use our applications in emerging
economies and they soon realized that
like moon-like we've looked a very good
job here and it gave them a real sense
of empathy of a quick dose of like I've
been awakening and they started optimize
and they started to fix these things now
I personally as in like specifically me
I lack the skills to actually set up
this kind of infrastructure where we can
IP ring-fencing but what I can do and
what I do with clients is use a tool
called Charles proxy anybody heard of
Charles yeah it's quite a few of us so
Charles proxy is a it's a property it's
a network property but my favorite
feature of Charles is the the throttling
and you can throttle specific endpoints
so what you can do is you can slow your
entire machines traffic down but only to
certain like websites hosts so this
means that Oh Charles is free by the way
there's like a $50 paid for option but
it's free what this means is that I will
say to my clients okay all the
developers go and install Charles and
slow down just our website it means you
can listen to Spotify just fine
it means you can do email you can do
what you need to do you can get to
stackoverflow nice and quickly but just
our website let's slow that down and
let's see how it feels and the
frustration that the developers who
built the website themselves the
frustration they feel is usually enough
of a motivation to start fixing things
but there's kind of some bad news
it's not just about connection speed
anymore so we talked a lot about you
know the Internet's very slow out here
or there's high latency solving
connection is only half of the battle
like solving the performance over the
wire is only a very small fraction of
what we need to do who's got a phone
like this in their pocket this is um
this is an iPhone 7 I never got an
iPhone 7 and it got like a fairly new
Android device yeah yeah I expected that
like most of us have got pretty decent
phones right we're in tech we tend to
update phones fairly frequently and you
know that's good for us lucky us we've
got nice powerful devices unfortunately
this isn't very representative current
advice coming from Google's performance
engineering team is that the most
representative worldwide phone is the
Moto G 4 all right across a global
spectrum the Moto G 4 is probably the
one phone that they say is the best to
optimize for it's the most
representative on a global scale some
really quick sort of comparison shows
that an iPhone 7s roughly twice as fast
in terms of processing power than the
Moto G 4 you immediately get a double
performance benefit just by owning a
certain phone more forensic benchmarking
shows us that in most nearly every
single test the iPhone 7 is 3 to 4 times
more capable than a Moto G 4 so imagine
when you visit a site on your iPhone and
they've got ads everywhere and there's
loads of position:fixed stuff and it's
like scrolling through treacle imagine
making that three to four times slower
all right and that's what people going
to be experiencing you can start
experimenting with this I mean I'm I'm
fairly certain everyone's seen this by
now that opening Chrome we've got these
throttling features the networked one on
the top is alright so who's used the
network throttling in chrome before good
amazing good it's a great start but the
problem with
Network throttling in Chrome as it only
affects the application layer it's very
very very synthetic Charles which is
free does this kind of throttling but on
the network layer so it'll actually do
traffic shaping it will do it will
simulate packet loss for example so this
is a great sort but when you install
Charles you will get the network
throttling which is way more kind of
realistic but underneath it we can see
CPU slow down diva these have actually
been aliased to kind of like mid-range
device and low rate and high high-end
device in in dev tools but aim for a
five times slowdown and evening it a
fairly decent representation but that
said there is no replacement for real
devices the Moto G 4 is about 150 180
euro I think go and speak to someone at
the company who's got the company credit
card and add one of these moto G force
to your device level this is your
performance testing device I'm a bit of
a hypocrite though I don't actually have
a Moto G 4 I've got a Nexus 5 which is
actually even worse this is from about
five years four or five years ago
the Nexus 5 is even slower than a Moto G
4 so I do most of my performance testing
on this this is a screenshot from an
audit that I sent to a client so this
wasn't actually meant to end up in any
slides this was from a report I sent to
a client they just finished building an
MDOT website it was literally only for
mobile devices and they built it as a
full you know JavaScript client rendered
application and asked me hey how do you
make this thing faster don't build it as
a fully client rendered JavaScript
application but it's too late by that
point and what we found out is that they
were testing every developer every
engineer had a really nice new metal
book right and they were all on a wired
connection in central London the site
felt really nice and fast
I plugged in my Nexus 5 I visited their
MDOT web site and it took 1.8 seconds
just to evaluate their main act is train
line a client I mentioned at the
beginning point three seconds is worth
eight mil to them and we're throwing 1.8
seconds away just evaluating a
javascript file so a processing speed
has a marked impact on performance and
the problem is here this is all divorced
from network speeds if I had mine
five talking to the server over a like a
fiber connection it would still take 1.8
seconds right because this is all
happening on the device so this is what
I mean when I say that connection speeds
only a small fraction of the battle
anymore so yeah build up an idea of
realistic conditions realistic devices
realistic kind of typography is in let
you know what is the network looking
like in certain parts of the world and
processing power right these are the
things we need to get a really good
handle on because testing from the
devices that we build on is not suitable
anymore step to know what's going on I
told you these weren't simple tips right
it would be so nice for us like I'll
install this and do this and this
plug-in and make your site faster this
is another really difficult one know
what's going on I find myself all the
time
especially when I work with new clients
like what does this script do what is it
what is he what even hits this I've
never seen this before who's in charge
of this who installed this well what's
going on who who lives this whose life
is this slide right only us to man like
I get this all the time I will build a
site or I'll work on a site and I'll put
it live and I look at the live version
and I'd be like whoa I did not do that
where does this come from more release
tracking pixels I didn't install any of
these tracking pixels so what is
happening is other people are
contributing we'll get onto it in a
second but tagger managers for example
other people contributing to your kind
of code base all the time circumventing
the dev process so you end up just
having no idea what any of the files are
on the live product so other people
teams can add things to the site quite
easily not every site I'm mainly talking
like anything ecommerce tag managers
social widgets tracking scripts
retargeting ads all of that kind of crap
in fact ironically things like maybe
testing tools that work on the client or
optimizing tools right these optimizing
tools have this horrible effect of
actually by measuring the site's
performance we're going to making it
slower right which is the painful irony
so yeah if you're in this situation call
meetings try and find out what things
are find out who's using it find out if
they even need it
I've had it so many times when I go into
a client and I say oh I notice you're
using this analytics package and this
analytics package on the same page why
is that like are we supposed to
uninstall the other one how long's that
been there it's like I don't know just
your website you tell me and it turns
out that people that we haven't logged
into this analytics package for like two
years but it's been on the site the
whole time so this is kind of our
responsibility to kind of audit and sort
of work back from this let's talk
briefly about tag managers honest honest
show of hands who isn't sure what a tag
manager is a few of us so imagine the
scenario right you're a developer and
somebody says to you hey can you just
install this little analytics snippet
and you're like I'm kind of busy but
I'll try and do it after lunch so you
quickly do that and you sneak that bit
of work in and it goes live and the next
day they say hey Cheers that was really
great thank you could you just install
this bit as well and it's like you can't
keep doing this like I've actually got
proper work to do like can you please
prioritize it and and marketing get
annoyed because it's like all the
developers won't do what I ask them and
you're well I've got work to do already
so somebody invented something called a
tag manager which is where the developer
gets asked to install just one
javascript file like can you just put is
one JavaScript snippet on the site and
this tag manager is like a conduit to
like an admin panel Google tag manager
Adobe tag manager which is basically a
WYSIWYG where marketing departments can
install their own analytics they can
install their own tracking scripts and
they're right in production JavaScript
it's not production quality JavaScript
oh no no but is going to production
right they can arbitrarily say let me a
be test this button let me track clicks
on this link let me see how many times
the carousel goeb managed to go through
what's happening is you've got people
who are non developers completely
skipping the dev process and putting
JavaScript on your live site that's why
when you look at the live site and it
looks very very different to what you
actually built this is what happens it's
because there are other people able to
just add things into production without
consulting a developer even once so in
the green box we have the website right
this is a company I was working with
recently the green box represents the
website this is what the user turned up
to see the red box
the red box is tracking scripts its
analytics its retargeting its adverts
its it's just
it's disrespect is what that is because
the user didn't want to see any of that
a user did not see and if you're on a
data plan where you're paying for the
data as you use it right you know you're
on a travel sim here in Budapest right
and you've got several euro of data on
your phone you're paying for all it red
so we call it targeting or retargeting
we call an analytics you know but it's
it's kind of just disrespectful right to
force this upon users who don't want it
so that's what tag managers are if
you're running tag managers on your site
or if you don't know if you are or if
you want to know more about it speak to
your marketing team and just ask them
are we doing anything like this to our
users so ya know your liabilities for
years we call them assets but they're
not their liabilities right they've got
a chance of takers offline so third
parties can and will cripple our
performance a client of mine used a
client-side a B testing tool client-side
a/b testing is the devil by the way
don't do it and what it was doing is it
was provide it was contributing 98% of
the runtime overhead so their page 98%
of the runtime overhead was ironically
caused by a tool meant to optimise the
site if you want to find out this kind
of stuff
in in dev tools you wanna go to
performance run a profile bottom up and
then group by domain and it literally
lists which domains which the parties
are causing you the worst performance
problems at runtime so this client weary
platform the entire site we rebuilt the
whole thing and one of our first things
me and the CTO we decided let's take all
the kind of third-party stuff out and
see how things go so we did we ripped
out all the stuff put the site live and
because it was a complete rebuild like
the site didn't look sorry it was a reap
lat forming not a redesign the site
didn't look any different for the users
so we didn't do email campaigns we
didn't tweet about it because there was
nothing new for the users to really see
so what we found out is that purely
organic traffic two weeks after the
rebuild the kind of conversions were up
revenue is up items added
that increased time on site had gone
down because if you're an e-commerce
company and you look for a high time on
site you're doing it wrong if you owned
a real life shop and something spent two
hours in your shop and left with one
bottle of water you've you've messed up
right so in an e-commerce build time on
site needs to be low because we don't
want to trap people where to on let them
turn up buy stuff disappear so what end
up happening is the site was really fast
and all metrics were up and the
marketing team were really impressed and
we were glad because we were quite proud
of our work and the marketing team said
can we put an a/b testing tool here to
make it even better and then the CTO
like no no no the only reason it's good
now is because we got rid of all that
crap like please don't don't do that and
they dug their heels in and they said
look we want this tool we need to put it
on the site so end up happening is um
first paint went from 0.8 seconds up to
2.1 is that yeah two point one the a/b
testing tool made the site over twice as
slow right it more than doubled the time
to first render the site got twice as
slow because of ironically adding a tool
isn't meant to optimize it absolutely
heartbreaking we couldn't really win
this fight as soon as you have to do
this kind of stuff you're on the
backfoot
but beware of the tools you're using I
need to speed up identifying third
parties then so this is if you've got
Chrome with dev tools experiments
enabled you can find a little thing
called network request groups nice
catchy title and what that allows you is
group different things going from third
parties you can also turn on a product
column hopefully you can like Chrome
changes so often that sometimes this is
there sometimes it isn't but the product
column will literally start listing
which third parties your site is is
requesting so here's the BBC and we
noticed some oddities we turned the
product column on I hope you can see
we've got things from campaign monitor
things from double-click this really
starts to demystify where all this stuff
is coming from right but also we had a
problem here with a certain third party
had a 35 second TCP connection right and
that was directly linked to the load
events the load event was stalled for 35
seconds which
any other important things that happen
the load event were delayed by half a
minute
and we traced it back to this thing
Rubicon project so identifying third
parties has become a lot easier in dev
tools now by using stuff like this so
yeah being vulnerable third parties can
and will takers offline I mentioned tag
managers they're bad for their own
reasons well there's a specific tag
manager
it's a dhobi tag manager but it's not
specific to Adobe a lot of other third
parties do this but if your third-party
ad code or whatever isn't asynchronously
loaded and that third party has an
outage it can take you offline for one
point three minutes that's Chrome's
built-in timeout so if this retargeting
Kotler ad code kind of tag manager goes
offline we go offline for one point
three minutes it's a complete white
screen that's a complete nothingness for
the user for 80 seconds if you want to
work out how to do this or you want to
audit this yourself stick these IP
addresses or this IP address in your
hosts file basically it's a it's a
publicly available blackhole server any
traffic that goes to any of these
endpoints will actually get routed
through a server where it simulates a
full outage again the slides are online
so don't worry so yeah don't prioritize
prioritize your own metrics over your
users experiences there's no point
having a site where you can measure a
really accurate data but then none of
the users can actually access the site
it's a very fine balancing act and
finally I'm gonna have to really speed
up measure everything measuring
everything tells us two important things
one how do I know what's wrong and two
how do I know when I fixed it most times
when I'm asked to make a company's
website faster they'll just say can you
make the homepage faster but it's not
well okay but how do you know the
homepage is a problem maybe it's a more
important page furthering in the sort of
search engine forward world the home
page is very rarely an entry point
anyway you probably land on a different
page entirely so analytics who's got
Google Analytics on their site okay who
hasn't logged into it for like six
months yeah I think a lot of you are
lying
analytics has got some really great
information in here you can begin
exploring things geographically this is
a really huge gift and it will beach
ball my machine for a few seconds
because it's it's kind of it's a bit too
large but um log into analytics behavior
site speed page timings will start to
give you an overview of how your page is
performed on certain days and you can
cross-reference that with specific URLs
specific geographical locales so I work
this is how I learned about in Nepal
being a problem area for me and even
cross-reference ok visitors from this
country to these pages have a really bad
time what's different about this page
than it is about this other page that's
usually quite fast and you can start to
identify what the problem might be I've
done this with clients before and it's
been really really valuable work the
tourism company who thought they needed
to optimize for the UK it turns out
there are the biggest market was
Australia and they were the kind of most
sort of like a little served
geographical locale you can
cross-reference that with a specific
page for specific countries Brazil here
turns out Brazil is a real problem area
for me so all of the emerging economies
we've talked about so far are in the
East but turns out Brazil is also
classed as an emerging market in order
to purchase 500 megabytes of data in
Brazil you'd have to work for eight
point six hours on minimum wage that's
basically a full day's work on minimum
wage just to purchase five hundred
megabytes of data I did a little
comparison I mentioned I've got a
specific travel sim which I use maybe
20% of the time so at 20% usage over 18
months I racked up nearly 15 gig of data
usage now for a Brazilian person working
minimum wage on a postpaid data plan to
purchase 15 gig they would have to work
28 days that's basically an entire month
of your year spent working just for your
data plan so when we send all that stuff
over with tracking codes with tag
managers we are literally costing people
tangible amounts of money um speed curve
right so I mentioned measuring the
before measuring the before told me that
I had a problem in Brazil so what I did
is I thought well if the before tells me
that bril Brazil's that I'm going to
implement a fix I'm gonna measure the
after so speed curve allows you to
geographically test
your sight from different different
parts of the globe
so Brazil icesat-2 monitoring from there
and I just pulled my sight like test
that every day for three months I think
this screenshot says and you can quite
clearly see here that the fixed islands
have had benefit now this is important
because we could just fix things blind
in hope it worked and we don't really
know we can't prove that it worked
unless we're measuring absolutely
everything so uhm duplicate slide here
we can see that something happened
something incredible happened on this
day this is fantastic to take two
clients managers the business whoever is
you don't need to be technical to
understand that something very very good
happened on this day so this is the this
is the sort of major major benefit of
the before and after is because you can
start making more business cases say to
your manager hey look you gave me three
days to fix a performance issue and I
can show you measurably the benefit that
I had and you can use that set budget so
performance budgets people in management
don't like the word budget so it's just
kind of like monitoring with alerts I
set my sights up I kind of you know my
site's fairly typical but I use myself
as an example because I need to build
faster websites if I'm gonna convince
clients to pay any money for it so I've
got my site set up on speed curve also
and it's like there's not much going on
it's a fairly typical website you'll
find that I mentioned this earlier in
Ireland gives it my site it'll be fully
rendered in 1.2 8 seconds right every
single day I'm under my allowed budget
I'd only if you can see there's a really
faint red line running across like here
every single day in Ireland I'm under
budget so I'm doing really well I think
I'm showing off to a roomful of people
I'm doing really well fully loaded again
I'm under budget every single day just
by moving over to Brazil exactly the
exact same codebase the exact same CD
and the exact same infrastructure just
by visiting from Brazil I'm immediately
paying a penalty about 50% of the time I
go over budget and that's not because
I've built the site badly it's because
literally being from Brazil you have to
pay this Geographic penalty where the
internet is not as good for you again
similar story with the fully loaded
event it still goes over budget
now this isn't even bad this isn't even
bad what I did is in speed curve you can
set up specific profiles so I create a
profile called very bad Network which is
a truly terrible network conditioner we
get 10% packet loss we introduced half a
second of latency we only get a down
speed of 150 kilobytes a second and this
is what a real sort of 2g connection
feels like this is what it would really
feel like to be that guy's family in
India visiting websites over this like
Android phone in the corner you can
barely see it but there's my line for my
budget right this is what I've got to
play with and you can see that every
single day I'm at least doubling my
budget I'm going way over the other
thing you'll notice is there is almost
zero consistency hope you can see this a
lot better this is like your Brazil
Ireland San Francisco kind of speeds as
soon as we move to this very bad Network
this 2g device out in the middle of a
field there is no consistency you cannot
plan around this it's very volatile and
it wasn't as I measured it that I
realized that can I could look at these
three lines and think yeah I'm doing a
pretty good job it wasn't so I measured
I realized how much work there is left
to do so apologies I've gone over but in
closing care like just actually just
want to do it just want to build a
faster website it's the easiest way to
start is actually care about doing it
understand as much as you can network
uses their devices their capabilities
and then measure absolutely everything
statistics and data you can cross-check
them it's all true it's all factual I
just want to say thank you for
entertaining me for 43 minutes thank you
very much for listening
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>