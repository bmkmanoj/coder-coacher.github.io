<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Sebastian Tiedtke: Functionally Mobile (Automation) -- JSConf EU 2013 | Coder Coacher - Coaching Coders</title><meta content="Sebastian Tiedtke: Functionally Mobile (Automation) -- JSConf EU 2013 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Sebastian Tiedtke: Functionally Mobile (Automation) -- JSConf EU 2013</b></h2><h5 class="post__date">2013-11-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pPwZsi-sajk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I
you
you
good morning everyone guten morgen for
those of you to speak a little German
was a pretty good party last night
wasn't it so yeah I'm glad there's at
least a bunch of people out this morning
so I'm here today to talk to you guys
because I believe that every mobile app
should be tested through automation I
should probably take the time real quick
so what I'm going to show you is why I
believe you should be doing this and the
great thing about it is that the
technologies that I'm going to use which
is at miam Apache Cordova also known as
phonegap and top code they all backed by
JavaScript a lab technology so it's you
know for this conference pretty relevant
so um I have a little cold to excuse my
um like small breaks in between so the
reason why I like one of the reasons why
I believe every mobile app should be
tested through automation is the fact
that there's a paradigm shift going on
right now especially like consumers like
people that are not professionals that
use can be like that not use they're not
using a computer on a daily basis to
detail work the increasingly using more
mobile devices to you know use the
internet and like whatever is out there
so there's a shift from like the
old-school desktop browser based app to
mobile apps and you know like mobile
devices like smartphones are getting
increasingly more popular cheaper
because technology you know evolves and
you know it's only it's only progressing
it's only getting more that is great
because it also opens up a lot you know
new opportunities business wise and just
you know building awesome stuff so one
of the examples are obviously Instagram
very popular I mean it would found it a
couple of years ago and blew up in like
no time another good example is like
lyft or any of those transportation
companies that use the fact that a
mobile devices so much more in the
context of a real life because it's more
like a person carries it with him or her
whatever they go it's not like you're
going to a computer in your room like
you always bring in the phone so you
have the advantage of having the device
embedded in the car
text of a person's life meaning it knows
the location and it has all kinds of
other like information available that
you just don't get out of a browser or
like all of a desktop browser and a
really good example also is like
variables like the Nike FuelBand you
know I get it actually uses information
that it collects throughout the day and
then sings the W mobile phone and like
presents to you what you've been up to
like activity wise and all that kind of
stuff that's just I would necessarily
say it's impossible on a computer but
the entry barriers way lower for mobile
devices and mobile apps to do that so um
it's great that we get new opportunities
and all that but like opportunities also
come with challenges so that's kind of
exciting but it also can be very
frustrating and you know one of the
challenges obviously that there's not
just one mobile phone and there's not
just one operating system out there and
in particular for for the mobile world
you know the contenders are like iOS
Android Blackberry Windows Phone and
maybe symbian not so much anymore but
you get it it's just like there's like a
multitude of platforms another problem
is that these platforms run on like all
kinds of devices so it's not a standard
device everyone has the same one
everyone has an iphone they're like
plenty of devices this is like a chart
that I took from a blog post and it's
the data of July 2012 and it shows you
how popular certain devices are and um I
can't really show this right now because
it's not in the active but the way they
did that is like they show how it
progressed all the time and then it
moves around really fast so you know the
sudden your phone comes out and like
it's tossed into the mix and the problem
is it you know as very different screen
sizes this is a chart that basically
kind of shows you how many different
screen sizes there are like obviously
like more in a symbolic way not like you
know at scale the other interesting
thing or like the other thing that's
very challenging is that like most of
these devices have different memory
different CPUs you know different
technology so it's not that easy to like
provide a unified experience to all
users
using you know just a single technology
and not a really big problem that brings
back to this test automation statement
that I made is the way you distribute
apps is very different from like
deploying a website and using a browser
and like hitting it it's like these days
they are like you know app stores you
submit an app to app store and it's the
way people find your app discover it and
download and use it the problem with
that is I mean it's great it's not
really a problem it's great because it
is a unified way for non-technical
people to get hold of you know great
apps that provide great open create
experiences and great services the
problem that comes with that is
particularly for a certain platform you
have to submit your app and if you're
lucky it actually makes it into the app
store in like a two weeks time so but it
can sometimes be like you know a month
or five because there's a review process
attached to it like they want to make
sure that you don't steal data from the
users and they're using the platform in
a in a let's say like regulated way like
in a sandboxed way and the way that
works is like you make a change you want
to get out there you have to submit it
to the App Store and go through all this
process so essentially it's not as easy
as like running a website where you can
deploy at will because it's your service
you're running at people hit it from
their desktop browsers it's more like
you make a change and then you have one
shot and then like you have to wait two
weeks or cancel it and like you
definitely have to wait a time until it
actually hits the App Store and people
updated and then it's also after the
people actually update or upgrade to the
latest version so one thing that really
you know is key here is quality
assurance right so when you have one
shot you want to be you know you want to
be sure that when you actually you know
go ahead and you're submitting the app
to the app store that um you know
essentially this app is is buck free at
least the functionality that you want to
provide any users you have a confidence
that it's working and there's a really
common way of doing this which is called
dog fooding so companies go ahead and
like serve a development version to the
employees like I think Facebook does
that because I have a lot of employees
and everyone kind of has to use Facebook
in the way even
big a fan on Twitter but the thing is
the kind of like dependent on like
people using it hitting boxing and
finding reports to actually get some
sort of QA process in there but it's
kind of up to coincidence it's not
really systematical and it's definitely
not automated at least the testing part
of it another thing is like you can't
really execute some sort of test case
repetitively because you like the way
just kind of probing the ad like people
just use it it's not there's no system
to there's no there's no test plan to it
and even if there were one it's really
you know hard to repeat that on a
frequent basis and you know quickly
obviously you want to find bucks before
you use the students kind of like the
bottom line of all then so um you know
like that all that said and all these
variety of platforms and screen size and
all that there's like this this
initiative in this you know app
development world which goes in the area
that like instead of like using some
native programming language like
objective CEO like Android why not just
using you know web technologies to build
apps you can see all you know most of us
in the room here probably uh are either
you know building websites already we
have build websites but you know there's
a there's a standard here or their
standards already and they will accept
it and and they work in the browser so
why not using them Firefox OS is a
really good example they're gonna
embracing that to the full extent the
other platforms are not quite there yet
mostly because of performance reasons
it's it's not quite competitive yet but
you know we'll see what happens in
future so my idea here what I'm going to
demo here is like an approach it
actually uses web technologies to build
an app that's cross-platform so I'm
using Apache Cordova which is also known
as phonegap and I found this really good
app online it's from Chris stuff I
really don't know how to pronounce his
last name so not going to attempt it but
he built this app and I just basically
took you to extend it a little bit and
I'm just going to show you guys what I'm
talking about
so this is an obvious an iPhone
simulator it's really simple it's an
employee directory you can just search
you can scroll for the list you know you
click on things you just get more
information you can like you know hit
the call button it will call the person
at least it will simulate a call and
yeah its overall looks pretty great
because topcoat does a really good job
it's kind of like the Twitter bootstrap
off of mobile apps like if you like like
myself and you don't have a really good
hand for the design you may as well just
use you know something that is already
you know pretty good looking but overall
it's a pretty simple app the emphasis of
my talk is obviously the testing aspect
so I'm not like a full-on could /
developer all right so yeah I just
talked about that yeah code over is
basically the attempt to use native apps
that wrap a web view of fullscreen web
view and make make it possible to deploy
cross-platform apps by using web
technologies and it also makes native
API is available through JavaScript so
you can actually only you know your web
on the JavaScript level you can hook
into stuff that actually happens
natively on the phone and it tries to do
that in a unified way so the idea is to
have like you know and then strap some
abstraction layer on top you know across
all these platforms top coat as i said
is like this twitter bootstrap for
mobile apps it's really great if you
ever design if you ever happen to build
out could / app and you you know we're
going to get something off the ground
real quick i highly recommend that it's
also like build with the performance in
the back of their head so in order to
compete with like native apps you know
performance is key and there's a lot of
things you can do wrong if you if you
like when to a bunch of talks yesterday
yeah you probably notice today a lot of
things you can do wrong using you know
interactivity and like styles and all
that look just like bring down the
performance of yep and it's obviously
more important on mobile phones and it
may be on desktop just because of the
computation power that brings me to at
miam miam is the test automation
framework them are going to use my demo
that i'm going to show you in a second
emiem is a is an effort to
basically create a unified test
automation API which is based on the web
driver Jason prada dr a wire protocol
which is very well accepted by
implementations for selenium webdriver
for the browsers so they are like
language native bindings out there and
all kinds of languages you don't have to
you're not locked into a certain
technology to the test automation it's
very open and at miam is basically the
server that uses native get like native
developer tools of iOS of Android of
Firefox OS to do the backend automation
parts you have a unified API you don't
have to worry about the you know the the
back end part of it I haven't ly
contributed to this earlier this year my
coworker jonathan is basically working
on this full-time it's entirely open
source all of this is probably open
source it's a great thing I'll show you
the second so um a couple of things
about at miam those are kind of like the
the highlight points or like the driving
factors behind it they're a bunch of
like competitive like competitors in the
open source space to do kind of the same
but they don't have these like
guidelines that we build it on top off
or like these cornerstones which is that
you shouldn't you should not have to
instrument your app in order to test it
the idea behind it it's like you should
be able to test the app in the way that
you submitting it to the App Store like
no SDK is no embedded web servers or
anything like that it's like one of the
really big driving factors because once
you modify your app you don't know if
that's going to cause you know issues
when you deliver it because most likely
you're going to take that instrumental
instrumentation out before you deliver
it to the App Store as I said you want
to write the test in any language as far
as I know like even for exotic languages
there like a webdriver selenium
webdriver compel bindings out there so
you can Co do your tests in everything
from coffee script to pearl you name it
it builds on top of like a lot accepted
automation standards that are by nature
grown out of the web you know the web
browser area but we basically try to
since the ideas are kind of the same
like you know evolve them to use mobile
and a bunch of my coworkers are involved
in
you know standardization process with
the with the guys from webdriver and for
to get that into the w3c spec so it
becomes legit web you know technology
standard and on top of that is actually
a lot of traction that project got ever
since and you know I highly recommend to
like take a look if you guys working on
mobile apps and and I'm going to use an
emulator and a simulator they kind of
call differently in iOS and in android
2.x you test but you can you can lower
your tattoo a real device to your
computer and run it on your device
instead of running it in the simulator
and I brought a nexus one tablet if any
we want to know if you guys want to see
how that works I can show you later I
just don't have the time today alright
so code over is this um this framework
that wraps a webview which basically
like you know fullscreen browser in a
native app right and that's the way it
deploys or like it gets the
functionality out to all the different
platforms and the great thing about that
is that if we talked into a website this
whole automation you know process is
basically unified because always web
technology is always the same across the
platforms supposedly it's the same I
mean it relies on the idea that like
everybody implements a standard right
which day which they do most of the time
but it's not it's not as different as
like you know you have android and iOS
and you're very different framework so
like very different ap is so that's
great um also emiem supports talking to
the native part of the app we're talking
to the webview part so the different
contexts the context and you can switch
back and forth between them so you can
automate the web part of the app which
is the web view which is forked over the
actual app but there are things that you
you know you can test to the web app if
you hooking like if you have events
hooked up to some native API that
JavaScript exposes fuka dola so
sometimes you have to switch from the
webview context to the native context in
order to like automate something and
then switch back so the great thing is
that you're actually using the same
exact protocol but the semantics change
because in one way you're talking to
need the native part in the other way
you're talking to the webview part which
is you know web technologies the way
that looks like is I try to make it a
little bit clearer by providing a code
example so the top one here is talking
to native codes as you can see it uses
like a kind of familiar Dom type of like
look up get elements by tag name but in
fact attack name here doesn't doesn't
mean a tag name it doesn't it doesn't
mean like I'm looking for a span or a
diff or something it looks it in fact
uses a UI component class which is a
table cell and it will return all of
them so you can do something within the
automation script the idea is to use the
exact same API and it's already let you
know specified so you're not going to
change it but you can use the same
semantics and just you know for now
forget that you're not really looking
for a tag name it's just a UI component
component class but it works it works
just fine down below is the counterpart
it's like when you switch to the webview
context you look for Hispanic a
delicious man so you can work against it
in between you have to do a bunch of
other commands to let you know at me um
no you not want to talk to native for
the webview part okay um without all
thriller do let's just run the tests so
what I'm going to do here is I'm going
to run the tests on iOS first bringing
up the simulator I dropped some delays
in there so a little execute a little
bit slower so we can actually see how it
you know does it's magic and like on the
side here's mocha as a test runner and
it will just do the BDD style interface
and you know show you what tests are
executing at the moment it gets a little
bit more exciting towards the end so
like the setup face is usually a little
bit slow so this one is really
interesting I'm like switching to the
native for you at the end and I'm
scrolling up I do a flick up which you
can't do through the web automation or
like the web context part of it so you
can see here so I mean this is this is
pretty cool stuff but it gets even
better because i'm using the same exact
code and run the same tests on android
without changing anything so you
basically can automate cross-platform
but you use the same exact test cases
like you don't have to implement like
very different code to like do the tests
here there wasn't like a dialog box like
a modal dialogue that i clicked it's
also a native you know api that gets
called and i'm going to show you the
code on how that works and how you can
switch in into the native context from
the webview context but before we do
that i'm going to kick off the android
test so you can see that it does the
same thing for android so this is the
android simulator emulator and hopefully
it'll bring up the app you can see it's
running and let's move it a little bit
on the right side you okay you can see
how it executes the tests so yeah that's
the excitement Zach saying it's a little
bit done in two like watch it all
happening because it takes a while let's
go back to the presentation so my test
implementation i kinda like you're going
to dive into a little bit of code here
it's based on it's all you know it's all
node it's JavaScript the bleeding edge
part here is that I'm using node 0 dots
point 11 that comes with like years 6
and harmony and i'm using a part of it
or like a part of the specification
which is generators test code is
fundamentally sync because you know user
interaction is you know i use i can only
do so much and it's usually like one
thing at a time so using callbacks as
much as I don't have a problem with call
bags like the code just grows to the
right unless you break it up in
functions but and it's not a square and
so my coworker Jonathan the he build a
library called monocle which is a port
from a Python equally on that basically
uses generators to make this API a
little bit nicer and like what it does
is like yield callbacks here as you can
see here and it will unwrap them and
return the value for you so up here
that's a better example it yields a
selector and it returns the value and
when you hit a yield note won't move on
it will like a like pause execution
right there and then later on when the
value comes back and returns the value
and keeps going so this is a very short
example but as
see it's all like nicely lined up and
it's from a from a test authoring point
of view it's just nice and read in my in
my opinion um all right let's look at
the code so um so I spent a lot of time
on actually like creating a nice API on
top of mocha and like that basically
takes care of like getting your app like
set up on the on the simulator which
mostly at me I'm dust but I kind of want
to abstract that away from the user like
from the from the developer and in that
sense so I created like a nice API where
you can basically just drop in like the
package name and the action name which
is you know some like stuff that you
need to specify when you create a code /
app it's always basically the same thing
but and then you can basically just
start coding tests you don't have to
worry about Android or iOS you set that
through environment variable that the
test runner picks up on so it's a BDD
style interface that i coded against and
as you can see here there's a describe
block and and I'm like basically calling
this before each method that will just
activate the webview and then I just
write my test code without going into
much detail here the thing that I wanted
to highlight is like this here is the
actual tests like the the yet statement
it's a yield it I just made me i shorten
it and it's basically just the sequence
of steps it's really easy to read i'm
using CSS selectors mostly to get hold
of elements and click on them and like
retried values and then use like acid in
this assertion framework to just make
sure that you know what i'm expecting is
actually happening what's really
interesting here is that that part down
here I built this method like this
function it's actually a generator but
it's wrapped in a in a in a function
that is called native sequence and then
let's see whatever you put in there will
x will be executed in the native context
and not in the webview context so the
interesting thing is I'm dismissing a
modal dialogue here and as you can see
up here this is the the function
definition will actually generator this
is obviously different because iOS and
Android are different in the ways you
have to interact with like native code
so there's a little bit of like platform
specific stuff that you have to do but
whenever you talk about view it's the
exact same code
alright um so what's next so since I
said like every you know mobile app
should be tested in an automated way it
should also be part of a build right so
I thought like the scope of this talk is
already you know pretty comprehensive so
I didn't when I get CI in there and all
that kind of stuff but like it's
essential if you know if you want to do
that on a in an automated fashion to
make it part of a build running on a you
know Jenkins server or Travis or Strider
any of those open source solutions or
propriety solutions for that matter the
great thing is that like my employer
sauce labs we running at me I'm in the
cloud and if you happen to work on an
open source project we do that for free
so you can just use that otherwise it's
a really good way of like scaling
because executing functional tests waste
lowered and unit tests and executing in
scale like on a single machine can take
a while so that's a great great way off
like getting around this problem and
especially if you're doing open source
you don't have to worry about you know
costs or anything like that a good
starting point for all this is a smoke
test right like you you just want to see
is your most important flow through the
app working like let's say you your
booking something and you have a credit
card checkout process or the credit card
is already in the system you just want
to make sure that the user gets from n
to n so smoke tests a good starting
point but you know the more the merrier
obviously it's really important to not
confuse unit tests with functional tests
so the great thing is like since we were
working on the web you can you can
heavily test your small parts of the
code using javascript unit tests the
only problem that you have with that is
that you obviously when you coat them in
Chrome or Firefox they're not running on
the actual device right so it's a good
way of having like integration tests
like wrapped up in functional tests it
fulfills a bunch of a lot of purposes
for that matter and yeah it's it's it's
great stuff and you know what it's all
open source so the tools out there they
work and it did this proof-of-concept
implementation here then I'm going to
source and everyone can look at it and
user to make it better and and that's
why I'm saying every app should be a
tested an automated way because it's you
know it's available the tools are there
there's no excuse and that's
basically all I've got and I have a
bunch of links here at miam I always
liked the automation framework please
check it out we can always use
contributions any kind of way sample
codes fixing bucks all that kind of
stuff gap miam is like you know phonegap
and at miam this is like what i showed
you this is basically the the sample app
that I used and it has code in there
that like does this whole nice
abstraction using generators and all
that which hopefully will end in nodes
zero point 12 so you don't have to use
the Harmony command line option to
activate them and it also it will have
all this code I haven't pushed it out
yet but it will I just want to follow
the community process of getting it in
there yeah and other than that there's
Cordova and topcoat padova is really
great um it was the first time I got my
hands basically dirty with code over but
it's it's a really great framework and
it also gives you a multitude of like
API so you can like interact with the
actual app you can you can set geo
locations you can get the battery life
status and all that so check that out
feel free to like hit me up on Twitter
if you have questions or like come you
know finally talk to me i can show you
how to execute that stuff in the real
device or show you the guts of the test
code or like what's behind it in on then
and other than that that's all i have so
if five minutes of Q&amp;amp;A I guess
I love that the guy that looks like me
talked about phonegap that's awesome it
don't get to keep my haircuts yes hi I'm
max from Mozilla working on firefox OS
localization infrastructure stuff like
that one thing that we've been looking
at is actually doing screenshots is part
of the automated testing so that you can
actually have a visual test afterwards
without waiting for the whole execution
part right have you thought about stuff
like that I think this is actually in
the making i'm not sure what platform
are supported so far i know that like on
our platform on saw slaps it works
because it's built into the service but
i think fundamentally we want the the
framework that were using to support it
and not you know make that dependent on
the platform i do know that my coworker
Jonathan worked with Malini dust from
Mozilla who's like working on Marion had
to actually get firefox OS support
Indian as far as i know that actually
works I don't know the extent of it but
if you want to know more about this feel
free to check out a project and you know
if you can't find the screenshot feel
free to create a github issue and then
we can get it in the whole community
process and all then there's also i can
shoot you a link but there's plug-ins
for that for cordova for iOS and Android
actually have a question for you this
Firefox OS implement a screenshot in API
it does cool that's a benefit that you
get when your host is actually the
author of the framework you're talking
about do we have any more questions come
on I have a question actually you guys
gonna start doing work with medic which
is the continuous integration stuff that
film I wrote for Cordova um I mean Phil
works was now so it is a good chance but
I'm trying to dig out the info on this
one I mean I would just I would say it's
not impossible yeah i'm just not deeply
involved I'm just kind of like I was
curious about code ova and and how that
works with automation I wanted to do a
proof of concept now I'm talking about
it but potentially cool
I mean it's it's it's pretty slick yeah
I mean like I can't take the credit for
it i really have to like give my
coworker of jonathan here daughter's
lips all the credit for it the good
thing is like we he poured it the
implementation of Python twisted that we
use internally and salsa for
infrastructure so you had a really nice
API already that you know have been
using for a couple of years I think it's
great to just a little bit of
controversy behind like how to handle
errors which is really not a big deal in
tesco because when an error happens you
just wanted to bubble up and like have
to test run or like make it visible to
you there may be a little bit more work
required to actually use in a different
way but it's you know it's pretty great
it makes called super annoying spoon
yeah I appreciate it then thanks cool so
give give my doppelganger round of
applause and we'll we'll have a white
out a couple days to set up the next
talk about
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>