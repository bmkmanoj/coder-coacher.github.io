<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CSSconf EU 2017 | David Khourshid: Getting Reactive with CSS | Coder Coacher - Coaching Coders</title><meta content="CSSconf EU 2017 | David Khourshid: Getting Reactive with CSS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CSSconf EU 2017 | David Khourshid: Getting Reactive with CSS</b></h2><h5 class="post__date">2017-05-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4IRPxCMAIfA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone I prepared this because the
Wi-Fi was growing up on me so actually I
wired in and now it works so my name is
David crocheted and I'm excited to be
here for two reasons
number one I get to share the stage with
so many amazing talented women and men
in the CSS community so that's pretty
awesome
and also because today we're going to be
exploring some areas of CSS that we
frankly never thought was possible
before I work for Microsoft so I'm
obligated to tell you that edge does not
suck okay and if it does I'm not on the
edge team so it's not my fault a year
and a half ago I entered a hackathon
with my friends um it was an angular 2
hackathon which almost sounds like fun
and there were two main goals number one
was learn the basics of angular 2 which
I think right now is on version 5 or 13
and also build a useful app using Engler
2 so something like a to-do list or a
weather app so we built tinder for goats
this was our app idea you know not
really viable but um I was delegated as
the CSS person for doing this project
and everyone else to the angular which I
was thankful for and they were thankful
that I was doing that CSS because as you
all know the maximum number of CSS
developers that could work on a
stylesheet without messing it up is
between zero and one and so I was at one
and I managed to make the interface look
as close to the attender in her face as
possible with the exception of one thing
and that's the whole swiping thing now I
had only two hours to do this so I was
trying to frantically figure out how do
I do the whole
swiping interaction so I was looking up
tutorials and they said here's this
jQuery thing you could use here's this
ionic thing but none of those were going
to work in Engler - just because angular
2 was so new and so this led to a lot of
questions first and foremost how our
goats going to use this app and secondly
how do you create interactive
experiences in you know CSS and
JavaScript so for years I challenged
myself to create these complex
interfaces and even animations like this
box using only CSS and by doing that I
got to see how much CSS could actually
do because one year constraints to
thinking inside the box and stuff
outside the box you get to know the box
really well so by doing this I got to
you know look at all the ins and outs of
CSS and all the little tricks that you
could use in order to create complex
things but eventually working in just
CSS you hit a wall right and you
discover that CSS is not powerful at all
you know you need JavaScript to do
complex interactions but I also
discovered that CSS not being powerful
is a good thing and there's a principle
of least power that the w3c has where it
says to use a language with the least
power in order to express what you want
to do so CSS would be that language for
styling now on CSS HTML and JavaScript
are pretty much the bread and butter of
web apps which is completely different
than Android apps or iOS apps where is
some Java and Swift or objective-c and
we're in an age right now where
progressive web apps are becoming more
and more important and alliance between
web apps and native apps are being
blurred and because of this micro
interactions are crucial not only
because users come to a
affected because users wants to be able
to play with an interface and move it
and pan it and do all sorts of stuff
with it but also because it reduces
cognitive load so what if what if web
apps felt like native apps and if we
could think about that how exactly can
we get there now Android and iOS have a
slight advantage you know you have core
animations you have layouts you have
property animations and they they handle
nated interactions like touch and voice
and all sorts of stuff natively within
their api's the web is playing catch-up
but it still has a little while to go so
think about this what if interactive web
user interfaces were easier to make
right and what if they were easier to
make with CSS so you all might know that
CSS is awesome
but some people don't think so some
people are like and no CSS has its
quirks right and there's you know some
of the things that we sometimes struggle
with CSS but the thing is if you you
know read the spec for once in your life
you could fix a lot of these problems
but that doesn't stop people from
thinking that CSS is just awful so
instead today what I want you to do at
least for the next 24 minutes and 13 12
seconds is to think of CSS as fun and
we're going to make it fun by
introducing functional and reactive
programming right and the techniques I'm
going to show you are you know going to
be applied anywhere so we're going to be
talking about CSS variables and
functional and reactive programming what
we're not going to be talking about is
CSS JavaScript that means later and
we're not going to be talking about
frameworks such as react angular and
view and other things that you might be
using to build web apps
the reason is because the techniques I'm
going to show you can be applied
anywhere so as you might know you know
on the subject of CSS MJS there's only
two hard things in computer science you
know of course the first one is naming
things
now CSS MJS aims to tackle this one
naming things so how many of you have
actually used something like CSS modules
or I'll know any of the other million
CSS MJS things how many of you use it
alright so you might know how it works
right you have a style sheet or you have
something where you define styles and it
takes whatever class name you give it
and it turns it into complete gibberish
and this way it tackles the naming
things problems and it also tackles the
problem of global styles by isolating
this by creating unintelligible name not
part and also there is there were some
solutions that were proposed a long time
ago in Internet Explorer 7 we had
something called CSS expressions and
this is where we put JavaScript inside
of CSS so it's actually sort of the
complete opposite of doing CSS MJS and
over here is code to vertically Center
this div in the body so this goes to
show you how hard it is to vertically
Center something in Internet Explorer
where we have to add all of that and
Netscape and not wanting to be left out
of the party came out with its own
JavaScript style sheets where instead of
using CSS it just used plain JavaScript
in order to style anything and if you're
wondering why Netscape died it's because
of this but now today we have CSS
variables also known as CSS custom
properties but let's be honest no one's
ever going to call it that and
thankfully for all the browser's that we
care about its
supported which is really really awesome
unfortunately in Internet Explorer if
you have to support Internet Explorer
variables aren't supported variables
don't work but that's ok cuz nothing
else works and there's also Opera Mini 2
all right so how many of you actually
know what CSS variables are I I would
assume most of you right because er SPSS
conference you want to you know be
up-to-date on the latest and greatest so
here's the CSS variable in case you
don't know it starts with two dashes and
the reason it starts with two dashes is
actually a really important reason I
don't know what that reason is
but it I'm sure it's important right now
this does nothing until you actually
apply the variable inside of a ver
statement like that and so this 150
pixels is applied to the transform and
so it moves one hundreds of B pixels to
the right but what if we do this what if
we took the unit's out of the variable
right now we have to use calc and when
you're using CSS variables the more you
use it you're going to discover that
calc is going to be your best friend
with CSS variables here's why we did
this it's because you can set to use
this variables using javascript all you
have to do is you take the elements the
node you do the nodes that style that
set property and then you can set that
to get this variable to any number or
string that works inside of CSS so in
this case I'm using a library called
hammer and I love hammered because
hammer handles touches pans taps any
interaction with your fingers so so what
emulates mobile experience is really
well and over here I'm just setting it
to recognize when I pan left and right I
take the Delta X from that and I set it
to that Delta X variable and so now I
could use that variable inside of this
transformed there's one problem here
though and that's when I dupe an end
I set it to zero because obviously we're
not panning anymore and just jumped to
the mill this is where the magic of CSS
comes in we can set another variable
called panning and do sort of like a a
boolean CSS where we set it to 1 if we
are panning and we set to 0 if we're not
panning and over here down spawn don't
know if you can see but we set the
transition duration to 600 milliseconds
if we're not panning and we set to 0 if
we are panning because the movement is
controlled with our fingers and you
might see this complex formula over here
and this reverses whatever I passed into
panning so if I am panning negative 1
times 1 plus 1 is 0 so it's the opposite
if I'm not handing negative 1 times 0
plus 1 is 1 so I am caning I like to
call this boolean Stiles
also known as BS not not to be confused
with the other BS you know bootstrap
so here's I'm just kidding by the way
here's the real example over here and so
I'm just using my mouse to just go back
and forth and you can see it works
pretty well if you're clapping out that
I'm really excited because there's more
you might be asking why did I use the SS
variables to do this
why can I just set it directly using
javascript so there's a few reasons if
you've ever tried to use media queries
in JavaScript it's a complete pain like
especially trying to detect when the
window resizes listening for that
putting in the requestanimationframe so
it doesn't block your UI all the time
and there's also things like
prefer to reduce motion which you know I
don't even know how to do it in
JavaScript but I'm sure that there's a
way and so you could use media queries
in order to control your CSS variables
this is great because that means
that whatever values you're sending
through JavaScript you're not married to
those values you're not committed to
them you could use them however you want
in your CSS files and what this also
means is that you could use them in
pseudo elements I recognize I said
pseudo selectors over here I was wrong
I'm sorry don't attack me on Twitter or
anything but yeah you could use them
inside before and after which makes
things really easy of course you could
sort of emulate before and after
elements in JavaScript but don't do it
please
there's also performance it's much much
much faster to set a CSS variable on a
parent's container that is inherited by
all of its child and descendant elements
then having to go through each and every
single one of those elements that has
that style and set them one by one and
so here's a benchmark where it shows
that more than twice as fast as doing it
with inline Styles if you don't believe
me you could just click this link but
don't tweet us because I will get in
trouble and there's also in section two
you could open up your dev tools and you
could immediately inspect via CSS
variables apply through anywhere just so
you could see that it doesn't matter
where these values are coming from right
you could just modify them directly and
be able to visually see immediately
what's happening when you change those
values which is much harder to do in
JavaScript so what if instead you you
wanted to react to any events at any
time that could come from anywhere in
order to create rich interactive user
interfaces in an expressive declarative
way so this is where functional reactive
animations come in I could tell you're
really excited so hold on there
Proactive animations here's our reactive
animations are they are animations that
involve discrete changes due to
potentially continuous events so if
you're a musician one of the best ways
to think about this is sheet music sound
is conceptually continuous right you
play a note it goes on and it's
basically an infinite series of sound
waves
however sheet music is like you know
single dots on the page that represents
what you play and animations are sort of
the same way
animations are conceptually continuous
right but there's specific keyframes
where you define all of these animations
and so that's where the discrete changes
are now this idea is not new it's
actually really really old coming from
1997 a year after
well visit CSS or the web was born or
something like that and in this paper
which is very much an academic paper
there's one quote where it says by
allowing programmers to express the what
of an interactive animation one can hope
to automate the how of its presentation
and I quoted this because it's the only
paragraph I understood in this entire
paper but also because it um and this is
her website by the way this is what they
did with reactive animations we're not
going to be doing this this is just
weird but it's important to understand
this because it blurs the lines between
development and design which is really
good so in JavaScript we have what's
called a value which could be anything
it could be a number boolean value it
could be an object and if we have
multiple you know a multiple collection
of these values we have an array or an
iterable
now this is the the spectrum of things
that happen immediately we get this
value immediately we get each of those
values in the array immediately now what
about things that happen over time a
single value can be represented as a
promise
you get a value but it doesn't come
immediately it comes eventually maybe
after three seconds we're going to be
talking about today is observables which
are multiple values just like an array
that all occur over time so we're going
to be implementing observables with rxjs
and this is a library that follows the
observable spec so this is something
that could very well be a native part of
the web but this is essentially a
polyfill with a whole bunch of goodies
built into it so if we do um observable
from event we could represent mouth
moves for example on the box by grabbing
the client X and the client Y and being
able to observe each one of those
positions on the map we could use our
server both from a bent pattern for
doing the same thing and this is for
things that are not natively Dom
elements so if I'm using hammer Jas then
I could um I could grab the Delta X
Delta Y values by passing in a callback
into this from a bent pattern and here's
why this is so powerful it's because we
could operate and compose these
observable values so if you think of
this as an array of value set happening
over time and we get all of these events
represented as balls we could map each
of these false that's one of the
operators and transform it into
something else such as a square but
because we're working over time
we could also delay or do other time
like transformations such as the
bouncing and throttling and buffering
things that you can't do with an array
because in the array exists at only a
single point in time and not over time
there's also filtering of course just
like an array and there's a important
operator called scan and what scan does
is it takes the previous value and it
combines it with the current value so
over here I'm just adding 1 plus 1 is 2
2 plus 1 is 3
three plus five is eight and so on and
this is a distancing operator that I use
a lot when I use rxjs so these are
called marble diagrams and they're fun
to play with because you could visually
see on this website arced marbles com
how observables work together with
different operators I personally like to
call them observables so I'm subscribing
to observables is where the magic
actually happens once you have an
observable if you hit subscribe you get
each value as they come in
so it's sort of like a callback except
by doing this you could isolate all of
your side effects and changes into one
dot subscribe and be observable
the other good thing about is you define
it but it doesn't do anything unless it
absolutely has to so it's really lazy
it's sort of like me all right so here's
an example of using observables to get
the get something else get a change
value from this this range over here and
the reason I'm doing this is because I
got a comment on this pen that said this
dog is a little bit hyperactive but it's
cool and so I added a range slider in
order to slow the animation down and you
can see where I'm doing that over here
I'm grabbing this value and I'm using it
to define each of the durations I didn't
realize I also made so that it goes
super fast though too so yeah now we
could also add physics all I'm doing is
adding a dinette dynamics Ras library in
order to create a physics observable
every time I stop panning so when I do
that instead of just going smoothly back
to the location it bounces right back
this has been controlled entirely with
CSS variables the only thing that Java
scripts doing is sending over the values
so now we have complete control of
styling and we could use those values
however we want here's another example
where I'm actually using
requestanimationframe in an observable
in order to to tilt this clock in a
smooth way and so you could see that
over here
smooth mouse so if I change this and I
just used now then you're going to see
that it's very very rigid and this is
one of the beauties of being able to
compose observables and control them
declaratively just like you do with CSS
alright here's another example that I
did recently where I'm using linear
interpolation to smoothly go from one
place to another and this is also being
controlled with CSS variables as well so
I have a bunch of things that I'm
listening to right touches touchend
numbers which is whenever the number
changes in the range and I'm making it
smooth by using lerp where on by the way
if you don't know what lerp is linear
interpolation it's just if you're going
from one place to another instead of
from jumping from one place to another
you go part of the way there and then a
little closer and a little closer so you
get this really smooth effect going on
here and when my last things I made is
this app which uses a lot of observables
and a lot of CSS variables too and this
is one of the reasons I'm using CSS
variables is because for example that's
Delta X value for going left and right
that's the only value value need to send
in JavaScript in order to control so
many things for example I'm controlling
the gradients in the background I'm
controlling the contents inside and also
controlling the text inside here so
there's a lot of things and a lot of
moving parts that are happening with
just that single value that single CSS
variable now there's a really
good reason why we want to move to CSS
very or not CSS variables but
observables and be able to expressively
and declaratively define these
animations and these interactions this
is a charts by the material motion team
at Google and it shows the typical
process for what happens when we create
a motion design designers prototype that
they get feedback they use that feedback
to continue the prototyping and
eventually they hand off that motion
design to a developer or a team of a
team of developers and from there that's
when the engineering starts instead we
could narrow that cycle and have the
prototype be an actual working prototype
using real code that both engineers and
designers can work on in tandem and by
doing this and by allowing the feedback
cycle to be part of the development
instead of just part of the prototyping
you ship faster and that's one of the
main goals right because right now the
way we're sort of doing things in
JavaScript for dynamic styling is we
apply two styles directly in JavaScript
but if we move styling over to CSS and
use JavaScript only for sending over
values then we could potentially replace
JavaScript and CSS with any sourcing any
medium which means that these important
values can come from anywhere and they
could be applied to anything
so instead CSS think of it as canvas or
can give it as WebGL or think of it as
platforms such as Android or iOS so one
team is doing this right now which is
material motion this is something that
is very much in progress they're making
a animation library using observables
just like we talked about and they're
targeting us iOS with Swift androids and
the web it's still a few months out but
they have a
documentation on it and some really cool
examples already so I definitely invite
you to check that out and when doing
this I also think of the future of what
could be done with prototyping if any of
you have used Facebook origami studio
then this might look familiar to you
where we define these these little
fragments that you could connect to
other fragments and what these are like
is sort of a function where you connect
one function to another and then you
could control exactly what happens
dynamically when creating your motion
designs for at the beauty of this though
is that it could be translated directly
to code and so that way we blur the
lines between design and development so
what will you make with CSS variables
this is an example of something that
someone made with CSS variables and
observables where when I move my mouse
it's actually changing the HSL value and
it's sending the delta x position of the
mouse over the CSS and so the javascript
is not controlling this all JavaScript's
doing is sending over the values and
yeah there's a whole collection of CSS
variables that I've collected over coat
ends because because then sort of my
addiction but I really invite you to
play around with CSS variables see what
you could make and see how using
observables can really help your
interactive user interfaces in both
design and development so thank you
thank you
okay so we're going to have a break for
lunch we have</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>