<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Emily Stark: Meteor - A Full Stack Framework For Building Pure JavaScript Apps - JSConf.Asia 2013 | Coder Coacher - Coaching Coders</title><meta content="Emily Stark: Meteor - A Full Stack Framework For Building Pure JavaScript Apps - JSConf.Asia 2013 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Emily Stark: Meteor - A Full Stack Framework For Building Pure JavaScript Apps - JSConf.Asia 2013</b></h2><h5 class="post__date">2013-12-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rQCbXNEot5s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm Emily um I'm a core developer on
meteor as Rico said I'm really excited
to be here
um and today I'm going to be telling you
all about meteor and also showing you
about it so a few of you it sounds like
he had heard of meteor I've talked to
some people who have used it or even
using it for their for their companies
if you haven't heard of meteor let me
tell you a little bit about what it is
basically meteor is a a set of command
line tools like a build tool and a set
of packages and together these make up a
platform for basically developing really
really cool web apps so what's a cool
web app well what we mean is something
that is very interactive real-time very
fast and has a really rich snappy user
experience and our goal is to make it
really easy for developers to build
these apps very quickly so in this talk
I'm going to start by telling you a
little bit about what makes meteor
different and more generally what Web
Apps are looking like these days which
is different from traditional apps that
you might have built in rails or Django
and then I'm going to spend most of the
time doing a live coding demo so I'm
going to go through building a simple
app and hopefully if you have already
maybe seen that seen meteor played
around with it a little bit I'm
hopefully going to give you a little bit
of new new knowledge because I'm going
to try to as I go through each feature
explain what's going on under the hood a
lot of times people say meteors too much
magic I don't know what's going on and
I'm gonna try to explain what's going on
because I swear it's not magic so let me
start by telling you what a meteor app
looks like and I'm going to do that by
comparing to a traditional request
response style app so this request
response style is where the client says
hey server I want a list of sea
creatures and the server says these are
the sea creatures that I know about
right now and here's the HTML to display
them and that's all the browser knows
how to do is go make a request to get a
response and and display that response
on the page
in a meteor app we want to subscribe to
data we want to say I want to know about
all the sea creatures that the server
knows about and when the server finds
out about new sea creatures then I want
to know about those also and when the
client finds out about new data from the
server the client figures out how to put
it on the page instead of the server
saying here's all the HTML for the
entire list and of course it's not just
meteor apps that are doing this this is
this is a very common style of web
development today you might have used
something like servers and events or
WebSockets to constantly stream data
from the server to the client
client-side rendering is a very common
thing but what we try to do in meteor is
make it very easy and quick to develop
these kinds of apps and make it so that
you can bake these features in from the
very beginning so these are some of the
principles that that we have that
describe this kind of app and that that
inform how meteor works data on the wire
means we send data from the server to
the client we don't generally send these
huge blobs of HTML client-side rendering
I mentioned the client is the one who
knows how to how to render the templates
it's not that the server has a template
and the server renders that template
with some data instead the client has
the template and the client figured out
how to do the rendering and how to react
to data as it comes from the server
another difference is when you start
writing data so when you start making
changes to data on the server in a
traditional request response style app
you generally send an HTTP POST request
where you say this is the new creature I
want to add and the server goes off and
does some work maybe writes to the
database and then it comes back and it
says okay I added that and here's the
updated HTML with with your new creature
in it in a meteor app we have a little
bit of an advantage as I mentioned the
client the client subscribes to data
over time and that means that the client
has this in-memory local cache of the
data that it knows about so when the
client wants to go make a change to that
data instead of going to the server and
saying I want to make this change tell
me what the result is the
I can just do it locally the clan can
just update its local cache and then go
update the page do whatever it needs to
do to reflect that change while sending
the message to the server and when the
server comes back and says ok everything
went according to plan the client has
successfully predicted everything that
it was going to do and it doesn't need
to do anything else and meteor takes
care of all of this for you as you'll
see when I do my demo and so we call
this latency compensation
we're compensating for the latency of
going back and forth to the server by
just predicting what the server is going
to do and and acting accordingly and
only if something goes wrong on the
server like if the server comes back and
says you're not authorized to do that or
exception I don't know what you're
talking about
then meteor figures out how to undo the
changes that were applied locally and
match what actually happened on the
server one final point of comparison I
want to make before I get into my demo
is that we see a lot of developers
building these kinds of apps that behave
a lot like meteor apps but they often do
it by putting together tons of different
tools so you might use any one of a
number of front-end front-end JavaScript
libraries in addition to your CSS
framework
you might pick some different technology
on the server a different framework
different actual application server you
might want to use something like sock
js2 to use web sockets even in browsers
that don't support it in meteor our
philosophy is that it's much easier to
do it all we're a little bit more of an
opinionated framework we we want it we
wanted it to be as easy as possible for
you and so we try to make the hard
decisions for you and give you one stack
so by default you write your entire app
and JavaScript server code client code
and that means you can share a lot of
code from the client in the server and
you can use the same api's under the
client on in the server except where it
doesn't make sense and I'll give you
some examples of that but we also don't
want to tie you down so when when you
want to go hook up your meteor app to an
objective-c client we have a protocol
that we use to transfer data from the
client and the server
and you can implement a client in in
Python or objective-c or you can take
your meteor your meteor app and hook it
up to a Java server can we have
community members who are doing these
things and I think we'll only see more
of that as time goes on all right so now
it's time for my demo and so I'm going
to go through the process of building a
simple app I went to the hobbit house
last night instead of practicing so it's
your job to find typos and where is my
there we go okay okay so we're gonna
start with an app I have a little bit of
scaffolding already set up here but not
not too much um
we're inside a meteor app uh if we
weren't already here we would create an
app by by typing meteor create and the
name of our app can everyone see okay
okay and what's in here is an HTML file
where I have just a little bit of
starter code and and and in every meteor
app you have a meteor directory which
has things like the packages that you're
using and the release of meteor that
this app is pinned to so let's look at
this HTML so I have this file open it's
it's written in mostly HTML and it has
some handlebars syntax so we use a
template language similar to handlebars
which you might have heard of yesterday
described as like the son of Satan or
something but um
so it's okay um so so we have two
templates here we have a header which is
just a header not not too um oh and by
the way this is like not a politically
correct app people's feelings are gonna
get hurt once I deploy this but so so we
have we have this header and then we
have a list of talks so what we're going
to do is iterate over the talks and for
each talk we just print the title and
the speaker and the number of votes so
right now this is just a template we
don't have any JavaScript code yet we
don't have any data here we're not this
is not going to do anything so let's
write some JavaScript
this files not supposed to exist all
right good maybe a little big okay so
the first thing I'm going to do is
declare a collection so if you've used
MongoDB before this is the syntax we're
using and meteor right now only supports
MongoDB but there are plans to support
other databases including sequel
databases in the future so we're
declaring this collection and we're
actually writing code this line of code
is going to run on both the client and
the server so when this code runs on the
server it actually creates a Mongo
collection and when you read and write
to this collection that actually talks
to Mongo on the client we're declaring a
local in-memory cache of this collection
now let's write some code that just runs
on the server and later we'll write some
code that just runs on the client so on
the server we want to publish this data
just as I showed in our picture
so we're writing a published function
and what we're doing here is we're
taking the result we're taking a
database cursor which is sort of like an
abstraction representing a query but not
representing the actual results of the
query at any particular time and we're
basically returning this as our as the
result of our published function now on
the client we're going to subscribe to
this so what this means is that our
server is publishing everything in its
Sox collection and the client is
subscribing to that data and storing it
in its own Sox collection okay so we
have that we have some data being
published one more thing before our app
actually does something is that we want
to actually declare define that template
helper that we used in our template so
when we're when we're iterating over
that list of talks we need to actually
have the talks to iterate all right so I
have some dummy data in the database so
um so let's go run this app and the way
we do this is I was totally gonna do an
okay meteor run joke but I feel like
that was used up already
so okay so this is how you actually run
it um and then we can go so we're
running a local development server now
and now we can go look at our app um did
I get rid of my name let me see I might
have gotten rid of my sample data so
another thing we can do is open up a
Mongo shell um and this is a Mongo shell
to the database that our app is our app
is running okay so I don't have anything
in the database let's go put something
in I think I have some sample data
somewhere
okay so now we should have something in
our database and in a second okay so now
we have our so now we have our we have
our talks can everyone read it it looks
good okay yes okay so we have some stuff
in the database we've we've published
we've subscribed okay so what's going on
I haven't showed too much yet but before
I go further let me explain how this
pub/sub thing is working so it's
actually kind of embarrassing what we do
right now is when you win and when the
server publishes some data and then some
right happens like you go use a meteor
API to write to the database the server
actually goes and pulls Mongo for all
the queries that clients have subscribed
to and then it takes the it takes the
data that it's already sent to the
clients and dips that with the new
result of the query so it's
computationally expensive it's expensive
in memory but it's actually gotten this
quite far there are a few optimizations
that work really well like deduplicating
queries because a lot of times the same
clients subscribe to one query and not
get all their own queries but we
actually have something really cool and
exciting coming out fairly soon there's
actually a preview release if you really
want to try the hot off the press stuff
there's a preview release with something
called a blog tailing and this is a much
more scalable mechanism for doing
pub/sub where the meteor server is
actually going to act as a secondary in
a Mongo replica set so the meteor server
is going to tail the OP log which is the
Mongo log of all the operations that are
happening on the primary and it can tail
that to figure out which queries are
that clients need to be updated so it's
much less memory intensive and it's much
less computationally intensive we're
still you know gathering information
about how it's going to work in real
apps but so so far the benchmarks are
looking really good so that'll be a that
will be a release in the near future all
right let's make this app do something
I'm going to give it some upvote and
downvote buttons so first let's just do
the HTML so this we're we're rendering a
talk let's put in a button
and a downvote button
and so these should show up now on our
on our page okay one little thing I want
to point out is the hot code push I
don't know if you caught that but I
didn't refresh the page the meteor
server just hex one code has changed and
it autumn it tells clients to refresh
and get the new code um okay so we have
our buttons but of course they don't do
anything yet meteor is not that much
magic we didn't write any code to
actually do something yet so let's write
that code so we have we need events for
our upvote and downvote buttons so we'll
go into our JavaScript and define an
event like so so this is called an event
map and we say when you click on an
upvote button we're going to do we're
gonna call what's called a meteor method
so we're calling the up boat method and
we're passing it the ID of the talk
which is the talk we're currently
iterating over that's what goes into the
this keyword and we'll do the same thing
for down boat okay so i've defined these
these event handlers and now we need to
write these actual methods so i'll
define them here and this is just a
function that takes the ID of the talk
and upvotes it
okay sorry I went off the let me do that
so it's a little easier to see so that's
simple enough and we do the exact same
thing for down voting well not the exact
same thing
so this is our method and we can call it
from the client you can also pass
objects or meteor does a lot of
serialization and deserialization for
you so you can you can pass any any
object that can be serialized
approximately with JSON okay so let's
see what happens I'm gonna do one more
thing before I run this which is I'm
gonna change my template to actually to
sort by votes okay so this means our
list should be sorted by votes all right
fingers crossed that I didn't make a
typo we should now be able to up vote
yeah okay so notice that I did not write
any code to actually go update the page
to change the number of votes and if we
upload this one it reorders I didn't
write any code to reorder the list this
is where the reactivity is all about
meteor is just reacting to the changes
in the data and automatically rerender
in the parts of the template that are
relevant and of course this is all
persistent so I just refreshed the page
this is actually writing in the database
on the server so let me show the code
again and this is usually the point
where people start saying this is too
much magic I don't understand what's
going on so I'm gonna tell you about a
package called depths and this is a
fairly small package in the meteor core
it's about 500 lines of code and it's
how all this is implemented it's a
simple dependency tracking system so
when we render this template the first
time we construct this this database
cursor when this cursor is constructed
it says to meteor to this depths package
it says hey meteor any current
computation that's running depends on me
it's running it called me it depends on
me
when I say that I changed you have to go
rerun that computation then sometime
later on the client gets some new data
from the server and the client says oh
that's that goes in this query that
affects this query at that point the
database cursor says hey meteor I
changed you have to go rerun all the
computations that depended on me in this
case that computation is this part of
the template rendering
so this is actually really simple easy
to understand idea even though it seems
kind of magical when you first see it
but you can go read the steps package
it's used to implement reactive
templates it's used to implement
reactive different reactive data
services like database queries and and
even just plain reactive variables on
the client so if you're interested it's
very accessible and I think you should
check it out okay so we can upvote and
downvote um another thing we can do is
actually do this from multiple tabs so
this is not just you know something
that's happening within this tab we can
go to a different tab that doesn't share
any state with this one and changes from
this one are automatically reflected in
the other one and reordering and etc and
we didn't write any code to do that
meteor does that all for us if you were
watching closely you might have seen
that I actually define these methods on
both the client and the server so I
didn't I could have put this code inside
our is server a block but I actually put
it in in the in the top level where it
runs on both the client and the server
but it's sort of weird because these are
the server methods they what is the
client doing running the logic that we
want to happen on the server so this is
the latency compensation I was talking
about with the same code we've defined
both the method on the server and we've
defined what's called the client stub
which is the way that the client
simulates the method locally so when the
client when you click the upload button
the the client immediately sends a
message to the server are saying I'm
calling the upvote method at the same
time the client goes and runs this code
where it actually updates as a local
in-memory collection and that causes the
page to rerender and all that so what
this means is that the client is
simulating the effects while the methods
actually being run on the server and
then when the result from the server
comes back the clients done and this is
why meteor app meteor apps feel so
snappy because we did all the work
already we predicted what was going to
happen and only if something went wrong
do we
to undo the changes that we made and and
meteor takes care of that part too so
you don't have to actually go undo the
changes from the method meteor saves the
original the original state before it
runs the client stub and restores it
afterwards all right so we have used a
meteor method that's a really
fundamental building block is this RPC
mechanism inside meteor um one thing you
might have heard about meteor is that
you can use the database API on both the
client and the server and that's totally
insecure so the first part of that
sentence is true the second part is
false so I'm going to add I'm gonna add
a new feature here which is um adding a
new talk into the into the list so let's
add a new template and this is just
going to have a form inside it and we're
just gonna use the database API directly
to insert this new talk
so it takes a title and a speaker
and boy those kids must be having a lot
of fun okay okay so we have a forum
pretty basic let's write an event
handler for it so down in our client
code we're gonna write an event for a
new new talk template
and what this is going to do is just
call insert just like you would from a
Mongo shell or from server-side code and
it's just gonna grab the values out of
the form
and we can also just pass a callback so
this is a callback that gets run after
the the server has actually acknowledged
the insert and what we'll do is that we
say if there's no error we'll just clear
the forum values so if we run this right
now it shouldn't work that's because
this collection is completely locked
down you can't do any rights to it from
the client except if you call a method
so let me just show you that we have our
form down here and it didn't work and in
fact if you go look in the console which
is ok if we do if we do this again maybe
it doesn't print the error ok I thought
it was gonna say access denied but the
point is that it doesn't it doesn't let
us insert anything that that that we
doesn't let us insert anything right now
and what we're gonna do is write a rule
that it allows us to insert the
particular things that clients should be
able to insert so in our server code
we're gonna write an allow rule and this
is a rule that takes the user ID of the
client the of the client who's doing the
insert and it takes the document that
the client wants to insert and if it
returns true the insert will be allowed
if it returns false the insert will be
denied so just for a toy example we'll
just say you can insert any talk you
want as long as it has a vote to zero so
now I believe that this should work so
if I put a new talk here
inserts here in here and it's allowed
only because we passed that insert check
and just to prove to you that that check
is working if we go change this to be a
bajillion then we should not be able to
add a new talk so that's how an allow
rule works you can also write deny rules
and you can write these rules for for
inserts updates any any operation so
when people say that meteor isn't secure
what they're talking about is a default
prototyping method a mode for
prototyping that we have where you can
write read and write any any collection
arbitrarily from the client but as soon
as you go out of that prototyping
prototyping mode you have to use a
method or write allowing deny rules to
specify what parts of the API of the
clients can use so we have a pretty cool
app now and in not very much code um one
last thing I want to show you is about
meteor we tried it we try to make it
really easy for developers to build the
kind of real time fast apps I was
talking about but part of that is also
just making it easy to do things that
everyone needs to do in every app and
that are very easy to get wrong like an
account system so we don't want everyone
to have to write their own account
system that's that's probably bad for a
security and it's just a lot of wasted
effort so we have a couple packages
actually quite a few packages that help
you implement an account system in very
little code so the first thing we're
going to do is add an accounts google
package to our app so we're adding this
package this is this is a core package
and it will allow users to sign in with
their Google account using OAuth we also
have packages like accounts github
accounts Facebook etc etc and there are
other community supported packages for
other
ooofff providers that we don't support
in in core so I added accounts Google
I'm going to add another package called
accounts UI and this Jib gives us an
out-of-the-box UI for for users to sign
up and login
okay so we've added those packages now
in my template to get this UI all I have
to do is this so this is a this is a UI
template helper that the accounts ui
package gives us so after we've done
that we see this configure button and
this is just something you do once when
you first deploy your app to get the to
get the OAuth the OAuth configuration
set up mmm okay so I have some I have
some credentials for this toy app you
just paste these into the configure
dialog and you get these from the Google
API console okay so we save our
configuration now we have this sign-in
button let me make it bigger again and
now we can sign in with Google
so now I've signed in with my Google
identity it knows who I am
I could similarly add github or Facebook
log in there's also an accounts password
package if you just want password-based
authentication you don't want to use
OAuth and one the last thing I'll show
you is that we can actually use this
user I dated you to do useful things so
if we go we into our methods we can say
if you're not logged in when you call
this method then you just get an error
so we can do that on our methods we can
do that in our Lauer rule also so here
we only want to return return true to
allow the insert if you're logged in so
now that I'm here and I guess one more
one more thing we can do is actually
hide the UI that you're not allowed to
use if you are not logged in so this is
another another template helper that the
accounts UI package gives you which is
that you can just you can just call
current user to see who's logged in and
we can hide the UI that we don't want
the the non logged in users to see
so now I see the UI here but over here
when I'm logged out I don't see the up
foot buttons and here I can upvote here
if I try to insert a new talk directly
I'll get an access denied
so you might be wondering what is going
on at the network level what is the
actual message is being passed between
the client and the server and you can
actually look at them so if this
protocol is called DDP there's a rough
draft specification in the meteor
repository and it runs over a soft Jas
and on this browser which supports
WebSockets it actually runs over
WebSockets and you can see these are the
messages in DDP so there's a connect
message there's a login method that gets
called so all this accounts UI stuff
it's all implemented as methods just
like the upvote and downvote methods
that I showed you these are the
subscription messages where the clients
subscribing to data um you can see when
a method gets called let me let me do
this to call a method so you can see now
a method gets called the upvote method
and a result comes back from the server
this updated message is a message to
tell the client when all the data
changes that the method ran are sent to
the client so at this point the meteor
client knows that now is the time when
it can start figuring out if the things
that it predicted to do during the
method stub are actually the things that
the server wanted it to do okay so I
think that's about what I wanted to show
you in the demo before I wrap up there's
just a couple things I wanted to say
about the future of meteor so I
mentioned some of them already I'm
really excited about about app log
tailing which is going to be going to be
a whole new level of scalability for
meteor apps the current the mechanism
that we have in there right now has has
worked it's gotten a lot it's running a
lot of production sites right now but um
you know it's it is what it sounds like
and we're really excited about a blog
tailing to to be a much more scalable
mechanism there's another project going
on which is called meteor UI and that's
a new rendering engine and front-end
framework for meteor and it's it's a lot
smarter about figuring out when to
re-render things and it's also much more
interoperable with other non meteor code
that might be running on your page both
of these projects have preview releases
out so if you're playing around with
meteor you can check out the meteor talk
we'll group and there are threads on
there for the preview releases you can
try those out I'm trying out a new media
release with your app is as easy as
doing this so if I want to rollback this
app 206 606 6 I can just do this and
then when I run this app it'll run with
meteor 6 6 instead of Oh 6 6 3 which is
what it was on before so those are 2
cool things to check out one thing which
is not publicly available yet but it's
the thing I've been spending most of my
time on is this distributed deployment
environment called galaxy and this is
going to be an application server that
handles auto scaling and monitoring
provisioning all sorts of good things
and it's been a lot of fun to work on
where we're aiming to have some release
of all these things out by early 2014
with the meteor 1.0 release so I hope
you learned something whether you've
seen meteor before or whether this is
the first time you've seen it I've been
having the time of my life working on it
so if you have any more questions about
what's going on under the hood or how
you can get started learning please feel
free to ask me thank you all right Thank
You Emily we actually have time for a
question or two anyone have any
questions raise your hands all right we
have one over here
what how does it work with you know
other server-side code I mean I want to
do like you know I want to send out
email so I want to connect to make a TCP
connection to another server how do how
do I do that so there are a couple well
the specific one one other trick so all
right I'll answers to that the
prerequisite for one of those answers is
that there's this really third use
called meteor deploy where you can
deploy an app to our free hosting
service that has absolutely no uptime
guarantees except like someone will get
paged if it goes down and it might be me
but we have no guarantees about it but
it's a great place to deploy your your
apps and when you deploy them here you
actually get automatically provisioned
with a an email sending is it mailgun is
that the thing is that a thing
mail then ok it's just matter Melvin
yeah anyway you automatically get an
email sending API which is built into
the meteor Cora and which is
automatically provisioned with a
third-party service when you deploy here
I don't think that's really the answer
your question though um there are a
variety of ways you can drop in you can
drop in any NPM module so in your um oh
so now you can all go play with this and
be brutal
okay that's live okay oh but we need an
API key okay you can't be brutal yet
anyway okay so in your server code um
you can do something like like what's
your favorite NPM module mr. coffee
um you can you can you can drop in any
npm module you want um
you can package any code that you want
as a meteor package there's not very
much to that you just need to make a
single manifest file there is also the
biggest problem that people have I think
is that meteor code all runs in fibers
and a lot of pure node code does not so
we provide some wrapper utilities too
for example if you call a third party a
third party um API and you pass it a
callback we give you a helper that wraps
your callback in a fiber for you so you
don't really have to think about fibers
all that much okay and people are
wondering if he could actually vote on
that list I hear just someone betting
ten bucks on Leia okay okay let me put
in people are gonna be very people's
feelings they're gonna get very hurt
it's not my fault
all right it's all yours
again that's talk judge dot meteor danke
oh it's not all yours okay I will I will
set it up and I have to change them
because I set it up for localhost oh I
like put in the chat or something
boy if anyone has any more questions
Emily's gonna be going around it's Iran
and breaks later on</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>