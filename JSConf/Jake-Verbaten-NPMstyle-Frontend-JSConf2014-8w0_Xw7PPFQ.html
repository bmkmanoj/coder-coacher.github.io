<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Jake Verbaten: NPM-style Frontend [JSConf2014] | Coder Coacher - Coaching Coders</title><meta content="Jake Verbaten: NPM-style Frontend [JSConf2014] - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Jake Verbaten: NPM-style Frontend [JSConf2014]</b></h2><h5 class="post__date">2014-07-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8w0_Xw7PPFQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning so we managed to get a
bunch of working with screens that's
impressive it's always really hard so
today I'll be talking about some of the
approaches you can take modularity for
building frontin apps these approaches
are agnostic from like your particular
choice of package manager guy has done a
great ton of work with JSP em these
texts Inc you know work just fine with
any good package manager and in fact
this box with that one was great it
showed exactly what to do have a huge
tree and have like 120 kilobytes of
JavaScript at the minimum that's
definitely like the way to go solo about
me I'm ray knows I've done a lot of
stuff in node and in the browser with
NPM sometimes I think you have a little
bit of an addiction to open source I've
written at least like a hundred modules
targeted at the browser and as approach
to be working great for me so we'll go
over a bit of an overview of the things
i'll be talking about so the first thing
is like how did you get started with
modules how to use them guy pretty much
covered this already so we'll just place
for that the second part is what does it
mean to offer small modules and why what
are the benefits of like offering these
small micro modules instead of offering
like big libraries or larger
we'll take a look at a similar example
to what guys showed which is just you
know you can embed things with CSS and
assets and like self-contained and we'll
just work and I will talk a bit about
how you can build your own flexible
framework from modules I'll talk more
about what i mean by framework later
cool so some of the tools of the trade
i'll be discussing and I've used these
are you don't need these you need
anything that's equivalent let's just
get a bit of a quizzing in questions
going who's here well everybody's
already heard of em p.m. because was
mentioned who's his used em p.m. before
that's that's a good number well I
browserify who hears her too much about
UNIX philosophy and how great this okay
okay cool so quick recap em PM's place
with JavaScript now one of the really
cool things about NPM is it's so easy to
publish you go home at some code and hit
em can publish it's done no waiting no
no gatekeepers no nothing the other
thing is really nice is avoiding the
pendency hell mpm is managed to get the
nest of the paintings to work search
that you don't run into version complex
which is kind of important because as
you start doing modular things you're
going to have multiple things at
different versions and you don't want to
have to think about conflicts or worry
about that you want to just work
browserify you can write comment Jess it
bounces into one file and everything
just works it's great now one of the
things i do recommend checking out is
this browser by handbook substract rode
over last week so it's like sub stacks
browser by handbook and he's written
like pages and pages and pages and pages
but really really does too much there
it's too much and I'll saying I
mentioned is that a lot of my
inspiration comes from some unique
philosophies this one is the quote about
modularity and to sum it up it suggests
that you should use small things and
click them together and one of the
biggest thing that says is the pot the
pot is really important here is like
this the spot here as you start using
small things they can be replaced you're
going to run into oh that was a
mistake I shouldn't have used that Faye
nothing was terrible the other thing is
I have a bad habit or feeling like I
want to be able to maintain and read all
my dependencies because I have a feeling
that as officers are going to get hit by
buses or they're just going to abandon
stuff on github which happens that habit
so much and if something is small it is
a lot easier to be able to be
comfortable that no matter what happens
i can continue working with this but
also helps if it's not written in
CoffeeScript but that's just a personal
thing for me okay cool so when using
modules why so one of the big things
that I love about this approach is I get
to just pick the best everything like I
don't have to make a compromise I don't
have to pick a large thing and go like
well I like eighty percent I just won't
touch you out of twenty percent I don't
have to deal with that I get to really
drive also drive my architecture and my
design of application around what I
wanted to be rather than what some of
the tools I pick off the shelf of
telling me how telling me to do I'm
useful exactly what you need no more so
that lower own kilobytes in theory
sometimes doesn't work out in practice
and lower on complexity so just knowing
that you don't have these really large
things you dependency tree you don't
have to worry about them you don't have
to worry about upgrading them whenever I
used some of these big libraries
whenever a new major version came round
I had to spend a couple of days updating
my app with your small modules the scope
of what you have to deal with is way
smaller and you can operate them more
easily and obviously freedom like
freedom to switch whenever you find
something that works better for
application whenever I build an
application I don't know what it's going
to be like I have an idea in my head of
how it's going to work but it's always
wrong I need to have the freedom to be
able to adapt and move as I start
understand application better and so
modules are great but they're hard to
find like when you start out you don't
know where they are you don't know which
ones to use which was a good which was a
non good and honestly one of the best
approaches to figuring out what the good
motors are is you go and talk to
somebody like you talk to them is
seatalk on Twitter you talk to Mellie
conference failing that mpm search does
wonders I'm gonna try and use mpm search
later and see where it actually gives me
what I want hope it does and then the
last part is there's a whole bunch of
these groupings and collections on
github and other websites where people
have gone and I phone small modules
together in like one bucket it's
basically like a list it's like a wiki
page and these actually work wonders and
you can kind of see what's work for
other people
some other people claim it if you're
going to like build stuff with WebGL
like all these things do good stuff I
don't know anything on WebGL but if I
wanted to try and start there I best you
go down and in fact when you think about
it looking at one of those things it's
like talking to the person who wrote it
that person's like telling you what the
good things are and there's a whole
bunch more like examples there's a whole
foxhole leveldb and streams community of
people making lists of modules and this
is where I write code yay okay so let's
actually get started and show what it
looks like nanas fun show what it looks
like to write code went up into shells
yeah sure what about looks like to write
code where'd these modules so go in here
will create a new little file yay so the
first thing i have here is I have a HTML
file for my little demo that just has
some CSS CSS is I don't want to talk
about how to- he says that's difficult
it has an bundle so has the bundle we're
going to load so we're going to have to
create a bundle and we'll start here but
building our thing so I want to go and
build a little piece of dom and i'm not
going to do it by hand so I'm going to
try and search for module that allows me
to create a new development and then
hopefully mpm comes back with useful
results
I and there's a motor called new element
list that hopefully does what i want so
i opened docs for it by using the MPN
ducks command and go off to the
browser's they create new elements put
some HTML in it and like templating
fantastic that's exactly what I wanted
so I want diff some texture net positive
6 20 just on so we just require the
motor top daddy looks great and then we
want to grab a container so again I
would search the stuff but I'm going to
skip a step because I'm p.m. search a
bit slow we're going to grab the
container by ID quit by 8d and then we
need to append stuff so grab a faint pen
stuff and will append box container and
the box and works just great so one of
the first things you might ask yourself
is ok cool I could have done mr. jquery
this is really not that hard if you use
larger libraries for example jquery here
you're going to be stuck with the
interface they have you're going to be
stuck with whatever design decisions
they've made an air interface and the
feature taste part of the box now
pending is trivial you don't want to
meet stuff for that by ID goes directly
to document element by ID which is
significantly faster than querying with
like a hash container and this new
element thing it kind of looks like how
you would build elements with jquery
except it has string interpolation built
into it and i don't know about you guys
but I don't like cat netting strings
manually when I can use string
interpolation so by picking these small
modules I have the freedom to use a
nicer API I have to freedom to like
say actually the API does other big
thing gave me the box is not good enough
I just want to go and like pick a
different one and if there's a bug in
this guy I'll just like throw it away
and use a different modules there's
another five to do exactly that so we'll
go here press a fight demo spin it 2 out
demos bundle and then open demos in the
spinner yep so that failed horribly
because reasons oh yeah I know I know
why I made the the text color white and
the CSS because so that's a great idea
white and white right let's finish
writing arrested coat here so this demo
is just going to be a little circle that
spins around so to do this animation i'm
going to use requestanimationframe loop
increment discounter render the box in
like the new location for the animation
and on loop again for loop again cool so
for a question emission frame obviously
there's a module for that there's a
motor for everything everything in my
purse we want unless is an example where
like if we had used jquery doesn't mean
how way of doing questioned emission
frame out of the box so you're going to
need to have either your own code or
module for that anyway and i'm too lazy
to write vendors so i'm going to copy
and paste it that i hear this one uses
yet another module for setting star
properties because i don't want to
remember differences between what the
dom does and what the h naught else gets
a bit well what the doanburs what c such
that Scott's opinions and now if we
bundles again go over here and refresh
this
clearly you've seen that I've hard-coded
you can't see anything clearly you've
seen that I've hard-coded the styling
for this thing to not fit more than 10
characters but other than that it looks
it looks great okay so that's kind of an
example of the workflow you go and
search what you want you pick the small
things you want it looks great now
however for me personally I don't want
to work that kind of granularity all the
time that granularity is fine if I want
to do anything performance insensitive
but I've had enough of touching the Dom
so let's step back a bit and talk about
some of the advantages to offering small
modules if you offer a small thing in
very hopefully people are going to be
able to reuse it and expand upon it and
collaborate with you I've actually ran
into multiple situations in the past
we've built like a medium sized thing
and I've tried to collaborate with
people and they said I things too big
and I want to touch it like I've
personally seen the the way to put it is
that people don't want to collaborate on
things that aren't justed absolute
minimum subset they want to collaborate
on they want to be able to it's a lot
easier to work with people if you if
your son opinions it's possible if
you're trying to write like one small
thing that does one thing well people
can work with you on that if you put
that thing into larger thing you're
going to start adding baggage you can
start adding opinion to it and people
don't want to work with you or not
anymore i wrote a motor collects it all
it's really boring since HTTP requests i
wrote it because I nine does cause
really terribly and I couldn't find
anything else I could do that now one of
the cool things about this is that other
people have built stuff on top of it
somebody built this library called HTTP
Phi and it basically takes Nicole's
requests on the server and access her on
the client and then gives it the same
interface so you can use the same code
in both sides he also added a couple of
features i forgot in exit are like form
encoding another guy builds a little
things of my thing for doing Jason by
default out of the box and also adding
promise support so my acute our modules
just driven by a normal call back
because it's driven by a normal call
back it's pretty easy to add from
support on top during inverse that's a
bit harder so like he is able to not
have to duplicate my coat just add
promises he can just add a thing on top
and obviously there's other like people
using your stuff if you write an
external module the internet sucks okay
someone's written in JavaScript client
for a flat sheet surface and rather than
using XML HP request directly use one of
our modules so the idea here is that if
you can write small things people can
use them to book collaborate on that and
people can build on top of it and as you
get more when people bodog on top of a
shared basis everybody wins like
it'sit's code reuse everybody
everybody's happy so the next concept
i'm going to talk about is building a
modular framework and when I say
framework here I want to like have a
quick aside on separating the
implantation of a front-end framework
from the concept the philosophy and the
ideologies a lot of those times those
two pieces are put together into one
package the most important thing about a
framework and the thing that's really
hard and you should avoid doing this at
all costs even though I'm doing it
myself and I'm at
person is to not write your own
philosophy to not write your own top
level concept of how to build
applications how to structure them
together and how to make them gel
however once you've taken some of these
concepts let's say I'd say for example
we take reacts flux concept or we take
Elms frp concept it is possible to have
multiple implementations of a concept so
we reacts flux it's all about having
unidirectional flow from a user input to
like managing a state to rendering
that's a great concept however it
shouldn't need to be coupled to any
imposition detail and people can differ
slightly on that choices implantation
for that so the advantage of differing
on the implantation is that everybody
can agree on like the top level concepts
and how to structure application how
things fit together but they can
disagree on whether they should use
premises or callbacks internally or they
can disagree on whether you should track
the things in an Opie fashion one FB
fashion like the the top level design
shouldn't be coupled to that so if you
want to build our own implantation of
one of these concepts ideally we can
take a whole bunch of modules together
and have them work well and once we do
that it means that the next guy that
comes along and has slightly different
ideas can go and we use half those
modules he doesn't have to go and be
right everything which seems to be
really common in the front end world
well javascript in general were terrible
at rewriting everything and I had this
personally
I try to use the subject of react myself
specifically that virtual domain
condition and I could not figure out
where it was in the imposition I spent a
lot of time looking back to source code
and I couldn't make head or day out of
it so I wish that would have been
written modular from the ground up I
wish react was already modular so I
didn't have to go and like I feel like a
terrible person every single time I
solve an already solved problem so going
back to this slide the biggest thing
about making sure that the tooling and
the framework uses modular is to
decompose your public space to decompose
what you want to build into reasonable
pieces I learn to work from the ground
up and the most important part actually
is to make sure every single piece you
write is useful ones own it has to like
actually be a thing or if you want to
use if you just take your big thing and
spread it out in the five smaller things
but each individual thing doesn't make
any sense at all without the others then
every other people can't use it it means
that people come build on top of it and
that's the thing we want we want people
to be able to build on top of each other
in to share code yeah so as an example
of how I went through and try to do this
approach myself I want to implement
something they had a unidirectional
paucity behind it I didn't invent the
supposed to be myself I didn't like come
to I didn't wake up one morning and
decided I this is how we're going to do
stuff I spent a lot of time reading
react ohm ohm literature about how does
approach should work and this is kind of
important like whenever you're going to
grab together modules ideally you want
to build on top of
what other people have done before now
this the part that sucks is I couldn't
find small mortgages that do what I
wanted and when I did find some i had to
reimplement them for really small in
petitioning tools which kind of sucked
but that's okay because I can use the
things i want to use and that people can
use the other ones it's it's okay to
have different implementations is the k2
have different trade-offs when I went
and decomposed my solution I wanted to
just build a representation of my state
where can be notified of changes and I
needed to be mutable for performance
reasons so I built a thing for being
notified of changes something as
observable and I'm built to amitabh an
immutable object in the mood for a
module and I had a strong focus on
making sure each one of these was useful
on zone and I separated them out to try
and reduce complexity apparently
influencing an immutable array is really
really hard I was really complex however
the other two were a lot simpler so I'm
happy with the outcome of isolating
complexity in like the complex module
and breaking out some simpler modules I
needed a way to represent input
thankfully I've written some modules a
year ago out of frustration with other
stuff I was doing and I could be used
half of them I wrote a module for
handling reading of user input out of
the Dom so whenever user interaction
happens I just want to be able to say
like when the submit action happens give
me all the state in this form and I
wrote this module so that would work
with the Dom interface edges returns you
know vent listener you can just element
add event listener
the thing and it works great standalone
and I'm really happy with being able to
build something that actually works
stand alone so in very other people can
go and use it we also had to implement
some stuff for the rendering side and I
really I tried really hard to use
reaction plantation but it was pretty
tightly coupled one of the things I
wanted with the rendering of my view was
to be able to say here's the stadium
application and here's what it should
look like so it's the exact same process
be behind reacts virtual Dom you just
want to say what it look like so I build
a motor for representing the virtual
tree I build a module for doing all the
Dom manipulation which is which was
paying yes and then I build a separate
one for just some syntax sugar because
creating a tree by hand without
something equivalent of jsx is a bit for
buzz now the interesting part here is
these pieces come together to build a
unidirectional stop application but
every single one of these pieces as an
invitation detail none of them are
actually important to be able to build
the application with the philosophy you
want with architecture you want which
means if you don't agree about imitation
details that's okay we can still agree
about the architecture we can still
agree about how you both applications
and you should build alternatives like
it's really healthy to have alternatives
if we don't have competition whenever
going to like built the best thing we
need competition for performance reasons
and so one of the things I mentioned
earlier was you could publish your I
components as modules and it's possible
to just zoom zoom zoom zoom zoom it's
possible to just publish some kind of
widgets
with Jim petition details of choice to
your package manager choice until use it
so this is going to render a little
widget document.body.appendchild and
it's going to show some his good name
there's somebody want to give me a name
on github that jazz okay i will pick my
name because nobody shouted loud enough
so as an aside required business is
really cool tool for playing around with
NPM you can just write comment jess and
write mpm style stuff and you click we
build and it works so on the right you
can see the divine assets right we've
included some widget of the internet we
had the one line install we had the one
line require it comes with all the CSS
and the icons and the blah blah blah
blah blah blah blah the important thing
here is you can publish all of this to
NPM and we'll just work and also just
widget a temptation little users like my
framework and all of my all of the sub I
personally like and I export a dom based
interface so I people can use it and
that will work quite cleanly so the last
time I wanted to show was building one
of these unit or action elapsed with
modules and in fact the important part
of the demo wanted to show cuz I'm
really low on time was that whatever you
use as an imputation it'll so the
important thing about a unique direction
let's actually sure what it looks like
ratified demo to list ah happened in
next
I to do to do to do to do so I have a
little demo for a nap it's really stupid
you read some text and you had some
stuff and you had a feeling and it works
cool so the way represented this was I
wanted to say what user input is like
sad event I wanted to say what state was
which in this particular case is some
text up here and list of things and then
I wanted to handle user interaction all
in addition let's push a new thing into
the array and then rendering like I had
some rendering code which if you squint
really really hard it looks just like
Jade and you can pretend it's not that
you can pretend there's no braces it's
really not that bad render list which
one of the item we render thing and
reform over here ready not exciting but
the interesting thing here is if I don't
like the impression at all of what I
choose for the state I can just get rid
of it and i can swap out for a better
module it turns out there was a bug in
it or like I just don't like Venice and
it's code and I want to replace it back
on so you can implement a nap with the
same fossa fee and different different
modules so we want nope not that we want
okay I'm just going to cheat a bit more
we want this stuff
so here all I'm doing is I'm refactoring
my code to use backbone models and
backbone collections and I have another
model for the application state has the
exact same description and array of
events and I set it up over here and
then I'm not even gonna bother running
that one but I will run the other one
that and not work this will work now
let's open that so this one is the exact
same invitation exact same rendering
logic yeti-yeti-yeti-yeti and it's using
backbone at the model layer so one of
the kind of important parts of using
modules and the thing that we really
want to be able to swap out an entire
entire subsection of replication with
different in petition and this will be
really difficult to achieve if you using
some kind of tightly coupled MVC
framework and I believe that's all about
all I have time for thank you
member</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>