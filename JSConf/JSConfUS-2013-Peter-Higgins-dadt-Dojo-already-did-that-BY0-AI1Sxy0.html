<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[JSConfUS 2013] Peter Higgins: #dadt (Dojo already did that) | Coder Coacher - Coaching Coders</title><meta content="[JSConfUS 2013] Peter Higgins: #dadt (Dojo already did that) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[JSConfUS 2013] Peter Higgins: #dadt (Dojo already did that)</b></h2><h5 class="post__date">2013-07-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BY0-AI1Sxy0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi I'm Peter Higgins I had the pleasure
of having my own little checkbox on one
of the J s Kampf speaker submission
forms yeah all of them maybe I don't
know what it is that is compelling about
me in particular that they want to hear
but this is dojo already did that it's a
it's a catchphrase that I've been saying
for years and years and years now it's
not very funny it's actually kind of
depressing so we're gonna get get into
that about me
J's coffee alumni am a former dojo
project leader I am no longer actively
contributing to dojo I probably still
write permissions but I don't actually
do anything that's problematic I'm a
generic code monkey my time as a project
leave is much like this picture depicts
a professional cat herder actually list
this on my various LinkedIn and on my
resume and and whatnot it's true of any
open source lead if you own a project
that more than 10 people are involved in
you're a cat herder doesn't matter what
it is it's a lot of a lot of work
because cats are very agreeable I've
been busy I left dojo and kind of
disappeared into being just code monkey
because of my princess fluffy but this
is I'm a new father and entirely elated
about that so that's where I've been and
welcome to J's comm this is an epic
thing that we've been doing here for
some years now if you see this guy
anywhere around thank him give him a pat
on the back kick him in the shins or
whatever it is he's a lot of work goes
into this I like to think of this block
as your digestive tract here we are
finishing up your meals you're gonna sit
and contemplate and I'm not really gonna
do anything really really technical this
is not going to blow your mind it's just
going to Food for Thought light light
food for thought and hopefully you will
digest and innovate and continue on the
spirit of jsf
of amazing mind-blowing things so the
real talk here is called history of the
world
it's not really doge already did that
it's kind of a history of my world in
JavaScript and whatnot I this year I'm
celebrating 20 years of interwebs I got
my first dial-up connection in 1993 as a
young young lad at the ripe age of 13 it
was I subsequently got kicked off the
internet by the same ISP in 1994 but
that's a whole long after track story I
regained my Internet so what do we have
we have 1993-1998 is kind of a dark age
of the internet it was we've got dial-up
we don't have anything this is this is
awful this uh lots of the best when
viewed and started I would still be
biessing I was a heavy heavy BBS er from
the age of 10 on so that was more
interesting to me than the internet at
the time but it kind of progressed on
and then people started using it and
then when the y2k thing happened it's
that's when kind of like this whole
pivotal thing happened it seemed like
the BBS software at the time renegade
just didn't want to fix their y2k bug so
they quit developing renegade so it kind
of went on into me focusing more on the
internet seeing what was going on it's
1999 right so we got Ajax we've got the
the beginnings of the browser's the the
majors or whatever Lynx was awesome
because that was still a viable option
unfortunately it's not so viable these
days and then of course you have the
granddaddy of most of the modern the web
kits and the Chrome's and everything
that's derivative of that conker which
was pretty awesome in itself and 2001 to
2005 we kind of went through like a
renaissance right like Flash was
everywhere it was we already had as you
saw on the web RTC Raimi made a comment
that they already had access to the
camera and they already had access to
the microphone and stuff and that's kind
of that's disheartening right because
flashes everywhere
but in this time the JavaScript people
are doing it's like the tail end of the
dhtml amazingness where you've got the
snowflakes and all the cool stuff coming
down on the screen and then that's when
the JavaScript library started forming
it's like
there's a thing here and we can form
whole libraries to make everything
awesome
we got Script oculus and prototype
prototype is probably one of the first
real library solid that is a derivative
of all these things then we get into
2006 2009 this is where my major
contribution to dojo really happened I
was a little bit before and a little bit
after but this is where the the sweet
spot is and this is where there was a
lot of fighting this is and Angus Kroll
did a great talk
the politics of JavaScript and he
covered this really well so you should
go find that talk and watch this but
we'll double back here this is where
dojo was doing things but there was a
lot of fighting I seeing Indra DuPont
here now makes me think of a
particularly funny thing where Alex
Russell was ranting he is another former
approach dojo Project Lead and he's
ranting heard it's like fucking sucks
you shouldn't use this whatever and it
kind of created this rift right and then
here at the tail end of this 2009 Chris
comes in and says I'm gonna publicly
shame you if you start arguing with
people if you don't offer meaningful
solutions and if you don't don't help
you're not you're a part of the problem
rather than a solution so we're in the
modern era now right it starts about
2010 it's going forward this is where
all the amazing stuff this is a link to
anguses talk I stole this slide
completely it was like oh I don't want
to have to go find my own logos but he
left off a lot of people and a lot of
little projects and stuff but this is
like an age of enlightening all this
time is the question this one I spent
four years of my life defending this to
the standards the to the zealots or
whatever this was this is a fate worse
than death it was like I I you know I
shot young your grave or whatever it's
like one attribute dosha type all it was
doing under the covers was look at the
attribute find the string get an object
based on that and knew it up and the
props are other note attributes that
were there so
okay cool html5 comes along and hey the
data prop it's been it vindicated
everything Doge is gonna do so let's
just go change that to de todo Geo type
problem solved no ones no one's gonna
complain same stuff new class new prop
node but why not use data set right
because it's this is html5 this is the
future this is amazing
but in order to use data set we have to
test for data set because we support
browsers that don't have data set so we
do we do a little quick feature test
that's four lines of code to add to our
thing oh and then we have to write a
shim around it because if you're using
props it does this mix case thing where
the the prop is actually when it's on
the data set it comes it's like the CSS
CSS to JavaScript CSS and so we end up
with this and we've got our native
branch which is hey that's pretty cool
just return this off and then you've got
all this transforming so we've got like
one two three depth of function calling
just to do something for a data set but
why not in the end it's all just get
attribute it that's how it worked like
it worked with the dojo type I worked
with whatever attribute was there the
spec never said explicitly ignore it
just said don't do anything with that
tributes we don't know so it wasn't
really invalid the holder type thing but
in the end back to just get attribute
this is way too much for just looking up
an attribute and so we also had the
backwards compatibility which was always
very important to dojo that the dojo
type would still keep working so in the
end well I have the wrapper for
something that was just going to go back
to I get attribute when all you had to
do was detect if the data dojo type was
there use this new way but still use the
get attribute and if you're unfamiliar
with what the dojo type attribute does
in the first place it's very if you use
backbone just passing the the node to
the element and create
new instance of a thing right there in
the place in the Dom so using the Dom to
store the data and the definition of
things
dojo did early early on and then of
course you know bootstrap with its but I
actually honestly I find two things
wrong with this with the bootstrap you
won the spec recommends I guess it's not
set in stone that you prefix your data
attributes if you are a library or doing
anything so the data dojo type was
intentionally added the dojo in there
because of that right or the I guess the
example in the spec was do query and
Jojo I forget but they referenced those
libraries specifically but it's just a
way of accessing data upon the node so
that's that's cool right we did
something right but we did it wrong to
begin with and we did this wrong to
begin with to and this is a really
really heated heated argument module
loading does anyone has anyone ever
written a module loader nice do you
still use it no okay
so really it's a module loader is just a
we've determined through through years
of of trying that it's really just
inject injecting scripts right so these
are a lot of injected scripts this is
actually off of my airline website I
just happen to like oh it's random page
US air is up this is a nightmare
and this has got to be generated because
I don't know why it has to be generated
actually because there might be someone
that actually typed all this stuff out
but you notice they're using jQuery 1/5
which is four orders old technically but
I bet it's because the 17th one down
here doesn't support whatever the next
the 1/7 API is of jQuery so this is a
nightmare
we need module loading in JavaScript for
anything bigger than just your your
little demo page that has some has
implying so we created it early dojo
supported a concept of packages where
you could pass it
a wild card but it wasn't really magical
or it wasn't anything special right the
asterik just meant load up package
underscore underscore or dunder package
because we didn't have a way to do
Durand X's we can't like look into the
file system and see hey what files are
in this we can't do import from so we
decided this is a great idea but the
fact that it was just under package it
was like a level of indirection that
just made it stupid why not just have it
an explicit package like name it so we
did you dojo require foo bar Baz and
then add-on load is kind of document
ready but it wrapped around the the
module system right so then you get the
global object that's you know that's
amazing but what's really happening is
ugly it was just we just didn't know
right so it starts out foo bar Baz
synchronous xhr we do a path lookup
figure out where this is configured to
live sink exit our it and then eval it
right there in place and then so foo bar
Baz here all of them had to do a provide
which creates the global object at that
place and we got another require so we
got a loop back to the synchronous xhr
and keep doing this recursively until we
hit the end of our thing fire at all
modes and we've got a bunch of there was
no way to avoid blocking the UI with
this it was no matter if it was one file
or four files or whatever even even with
a build you still have that blocking
during the during the transport of
synchronous xhr even if you put it foot
of the page so sync xhr also had same
same origin policy limitations which is
absurd because the script tag doesn't so
we were kind of enforcing or like
imposing this this short-sighted thing
on everybody and of course Crockford
tells us eval is evil so we shouldn't do
that either but this guy james burke who
is out here somewhere
he
you can clap for him I like him we're
friends
he was the core dojo Project Lead at the
time he did all of the loader work and
he kind of got burned out on the the the
politics of trying to herd the cats and
keep everything in line and keep
everything normal and
backwards-compatible and so he kind of
left us and decided to start this
project called require Jess I don't know
if you've heard of it it's it's cool
it's actually directly it's it's a
copy-paste of the dojo X domain loader
which James also wrote as part of his
work at AOL for and with dojo so we came
up with this oh here's our solution
we'll create some kind of global object
that when we inject the script it's just
wrapped in this we get it's wrapped in
this function and we'll tell will define
the module wrapped inside this function
so no matter what the original code was
it gets wrapped around this other thing
and then they have a little house
resource check to prevent duplicate
execution of the same same module and
whatnot but this is really not pretty
but this was generated this is the the
build system generated this for the X
domain case which was what allowed us to
put it on the CD ends it was one of the
unless you were a single fire library
there was really no need to be on a CDN
if you were a single file library but
once you get bigger or more than one
part you need to be able to community
resources so this is the solution we
came up with which actually ended up
being the the foundation of AMD the
concept of single function to register
define and do everything and then the
the function body of whatever it was is
is the module so he took it the next
step created anonymous modules and took
the return value of whatever it is that
function did based on its dependencies
so you get this no longer are you foo
bar Baz your whatever your path mapping
comes out to be and then you get back
whatever single object it is that you
intended to
so you can work with that independently
and nicely so and it's also asynchronous
it did it didn't block the UI thread
anymore because it was just sending
these things off and everything was
compartmentalize so every part that
comes back eventually and when
everything comes back it triggers so
that's good
no UI blocking super fast and then this
is what it ended up looking like so I
find it quite nice I I do have a problem
when it gets into when you have ten or
fifteen or twenty or any more than 10 I
guess modules that you need to load you
end up with a really really long opening
line and it's not pretty so you can
break it on two new lines you get all
this different syntactic stuff and
whatever makes you happy but the
alternative is is and the alternative
that the node is presenting to the
browser versus back-end thing is oh just
go back to synchronous xhr and eval like
why not just treat our require dot or
require whatever load that up in the
browser synchronous I checked our in
eval because that's the only synchronous
part about node is or - the sink
functions so we came up with AMD
hopefully AMD sticks hopefully more and
more people buy into it or find the the
utility in it in making anything more
than just their their little demo apps
so modules are coming to JavaScript I
don't know that it's been approved if
anyone wants to yell and tell me that it
has like there's a final spec I don't
believe there is I think they're still
arguing and then UMD makes me cringe
every time I see it thankfully UMD is a
copy/paste from a repository of 70
different options of types of module use
that I can use and nowadays my shop my
work has been using a lot of jQuery and
backbone and all of those other great
technologies so I just fork whatever
plug-in it is add the UMD thing and then
go start fixing their code
so not happy with UMD but I wish more
people used it if you not familiar with
this you really should look it's it's a
mess of factory functions and tricking
if ease into thinking something else is
the global and we can't can't agree on
this but we need to we need to and
really it's just something dojo already
did so a lot of a lot of the problems
that AMD solves and solves very
elegantly were through years and years
and years of James's work with dojo and
backwards-compatible I think that's what
finally the straw that broke the camel's
back was the backwards compatibility
because we had to migrate our entire
code base to AMD while still maintaining
support for require and or dojo required
directly as a synchronous assumed loader
another thing dojo has been doing
forever it's back in JavaScript and
everyone's o 2009 note came out this is
great note is awesome we have JavaScript
on the back end but we've always had it
by way of Rhino and not to say that
Rhino was good or anything we had it it
was a the entire build system was
written in JavaScript to concatenate
JavaScript with the exception of shrink
safe which was also using our custom
Rhino so we're shipping around Java
stuff and whatever it's nice to get away
from rhino which is horribly slow and it
also wreaked of Java even just the the
api's you still had to write JavaScript
as if it were Java when you wanted to go
into the file IO stuff and it was it was
just very very unpretty even passing
strings back and forth if it was a Java
originated string it was a special
string and you had to cast it to a
JavaScript string by using plus quote
dojo built tool and then another thing
that I'd love to see really really take
off we had something called dojo XD TL
which is a django template which django
was popular way back before it's
probably still very popular
I don't use it now but we had a full
implementation of the DTL language I'd
love to have seen some kind of Express
app or something that comes out and just
straight up says you can use your
templates in the back end or the front
end it's we can either using the exact
same exact same templates desire same
data models everything which is really
really now possibility with node it's
it's right there on the cusp of
happening i I did a mustache thing the
proof of concept using just a simple
node web server but it I never really
never really fought so when we dropped
Rhino dojos abilities using node and DT
L was abandoned but there's no end to
notes potential and likewise everyone
should be very very excited about it
there's it's just doesn't it hasn't just
say via it's not to the pipe to the
Python levels and a lot of the modules
that you get are you can't be sure
NPM is hit or miss there's a lot of
stuff there's a lot of gems but there's
a lot of crap and that's just yeah I
guess the way of the world
it'd be nice if there was a good clean
solution to loading all that stuff UI
libraries which is one of dojos biggest
things that it was it was the monolithic
core library plus a UI library plus
plugins so everyone kind of has UI
library there's there's several out
there Digitas dojos i could do a whole
other our talk based on the failures and
the decisions behind various things that
happened in digit digit is a wonderful
little UI library but i can tell you
what it does do it gives you instant
space control you get the new up your
thing and programmatic object-oriented
access to everything and then the dom
base view is really just a wrapper
around all of that externalizing
resources by way of now AMD text plugin
keeping your templates out of out of the
javascript code
so interestingly the West's the script
for the jQuery templates script type
jQuery slash template interesting
browser thing if it's not text
JavaScript don't execute it so we could
use these containers for completely
arbitrary HTML that never never rendered
whatsoever so that's a big I don't like
it I never liked it when digit did it
but they didn't do it so much for the
templating they did it for methods so
you could actually write script type
equals dojo on and then that code inside
of there would replace the the instance
method for for whatever it is you're
doing so it was really ugly I don't like
putting my JavaScript in the HTML and
one thing that digit does that nobody
has done and digits done this for years
and years I don't know how much money I
BM has put into accessibility but
accessibility is huge and a lot of
people just kind of disregard it
they outline:none display outline:none
or whatever on anchors because they
don't like that little dotted box around
their anchor elements when you click it
somebody needs that localization
internationalization both out of the box
alex has a great new solution to
internationalization they don't really
like dojos internationalization but it's
built in it's all part of it it's
something we learned and something that
we needed so it's there it's been there
for a long time
another thing with digit too painful
degrees it's backwards compatible we
started out with functions like set
disabled and set left-hand side
something individual functions for
everything is like that's not going to
scale we're gonna have millions and
millions of methods that are either set
or yet or whatever so let's go to a
setter just a straight set adder and
then that ended up being renamed to just
set and now it's been replaced with
observable and watchable patterns and so
but the benefit there is that you don't
have to really think back to my job
earlier about jQuery 1/5 and the the
plugins that were listed there there's
no way of knowing if if any of that
stuff works I guess there is now with
the modern plug-in repository I don't
actually look at jQuery very much but I
I believe there's a versioning system in
some kind of package that jQuery thing
that they've got going on but the
there's a benefit to unifying everything
it's in normalizing its and to
normalizing names of functions and
styles of names of functions because
once you get past like a threshold of
understanding the terminology or the the
workings it's it's all comes clear
instead of the the various jQuery
plugins like oh I have to do this and
sometimes I have to call it and
sometimes I need to reinitialize it on a
collection or whatever it's there's no
unification between any of the plugins
or any of the libraries that you piece
together to develop and I'd like to see
more standards there on naming
conventions and and API on the
interfaces right there's been a little
bit of work when you look at something
like bootstrap if you actually look at
the the bootstrap javascript code some
of its really really horrible but some
of it you know it all follows a very
simple pattern of here's a little simple
class and then the plug-in side of it is
do this do this do this do this reload
our plugin so it's instantiation from an
object or string based commands from
that and it's already saved on the
object so that's cool I'd love to see
more style guides for individual modules
and I'd love to see more of them AMD
eyes so you can just take and pick so
you don't need necessarily because a lot
of jQuery plugins for instance don't
even really need jQuery it's just a
function stubbed off of a dollar sign in
the end
likewise with just stubbing a function
that works on a collection it's really
literally just stubbing a function that
works on a collection that iterates over
itself digit could do a lot of stuff
better they don't have a concept of
event delegation which is odd I mean
internally it has a
this connects so you can listen to
events within the scope of yourself and
it cleans up after itself but it never
had like a straight-up delegation API
which would have been beautiful actually
kind of like that about backbone - the
fact that that events object if you're
inheriting you have no control over the
the parent events necessarily I might be
mistaken on that just an experience an
alternate templating I find the digit
templates they're very flat they're very
nothing about them it's just variable
substitution and I've got more complex
data than that and I don't need to write
one off so it's it's two lines of code I
implemented mustache which was fun at
the time until I learned that they don't
support dot notation
oh he's not even looking I was trying to
sorry
and then then and then core gesture
which is which is all dojo really
started out to be just a bunch of
functions a bunch of hackers getting
together and like oh hey we need a
normalised is array or no that's a bad
example that slipped yeah so the Israel
um what's a good example bind stuff you
find an underscore that's a great
example there's a lot of stuff that's in
underscore that that I took for granted
because it's always just been attached
to dojo it's been there it's this is the
tie to go to jQuery stocks but only
because jQuery tux is missing a tie
it's it's like my favorite my favorite
jQuery API is map because the dollar
sign map and the dollar sign effing map
aren't the same it's actually more of a
map filter and then Cody Lindy who may
may not be here called me out I was like
why would you ever need something that
map's down to a sparse array and I was
like well in case you ever have ten
things and you want to make sure they
line back up later or bind its an event
handler in jQuery confused so many
people's like oh hey echo five start
doing this new fancy binds in that use
that I'm very confused what does this
have to do with event handlers you know
but it's impossible to even explain the
concept of bind to the the avid jQuery
user because they're this is something
completely different than the rest of
our this is and this is the most
important thing this literally this is
the most important thing in JavaScript
in my eyes this is the the ability to
control the context and and do whatever
it is you want whatever it is you need
to do and having an understanding of
this is good I the each it just
frustrates me son so much
the fact that in order to iterate over a
jQuery collection you have to reinstate
like you end up reinstating a this
jQuery object within itself rather than
working directly on the node and then
the key value pairs are all there's no
way to get the original collection it's
just so angering so angry I'm actually
running really short on time so I'm
gonna go underscore is not AMD um be
ready it doesn't even have a um be shim
plug for John Dalton lodash does I it's
just a matter of a quick build and you
get and actually faster than underscore
underscore compliant underscore in your
underscores you know I heard you like
underscores I actually hate using the
underscore as an API because it makes it
look like I've already obfuscated my
code
have you ever called a dynamic method
off of an underscore it's a it's a
underscore bracket conditional question
mark string colon string and it's
just--it's and then you pass a jQuery
collection of that and it's a dollar
sign right after a parenthesis and it's
just like what the fuck did I just write
and then you step back and you had a
couple spaces around some things and you
know it's okay hey I can kind of see or
you start adding new lines after the
parentheses and that's your the
parentheses of the new squiggle so lots
of stuff is an AMD ready as I mentioned
I'd love to see more but in the end
again it's just JavaScript dojo did so
much stuff and dojo wrote so much
JavaScript there's date normalization
there's deferreds which is the early
onset promises which are now also in
jquery which everyone loves and like you
would have been amazed at the time the
when jquery first announced support for
deferred and they were like everybody
was like this is amazing this is great
we need two promises or the fucking shit
and then I just can't I just one-handed
clap you know it's we've been doing it
forever it's it's like I'm proud of all
of you for for using that but it's
nothing new so I understand understand
the language enjoy the nuance don't buy
into any particular library other than
the immediate goals that that library
serves and just write code and continue
learning and that's all I've got
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>