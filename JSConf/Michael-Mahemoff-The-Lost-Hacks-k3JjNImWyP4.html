<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Michael Mahemoff: The Lost Hacks | Coder Coacher - Coaching Coders</title><meta content="Michael Mahemoff: The Lost Hacks - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Michael Mahemoff: The Lost Hacks</b></h2><h5 class="post__date">2013-01-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/k3JjNImWyP4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">ah
what I'm talking about here is work i
did when i was working Ozma soft which
I've moved on from recently a little bit
of a discovery process about all the
hacks that go on behind the scenes of an
application like tiddlywiki which is a
single page application and in many
respects to the wiki is a very
understood software framework it's more
than just an application so quick demo
of what to lee wiki is how many people
here have heard of tiddlywiki all right
probably about a third how many people
actually have used to lee wiki cool nice
to see people using it as well the way
it works is I can download this so this
is sitting on an HTTP URL standard web
server I download it to my local system
and now it's actually running on the
file system so you can see it's just a
file URL hence we call it single page
application running off the file URL and
I can actually start changing this thing
so i can say save it and it's going to
see if check efforts if i'm allowing it
to do that because I've just saved a
local file system so i can actually
reload this now and just to prove the
point it's reloaded and this is running
on the file system saving to the file
system without any browser extensions
being installed and what's quite cool
that tiddlywiki as an application is it
lets you do more than just manipulate
these little bits of content these
tiddlers that are basically like a
little blocks of content that show up
with a title and a text and everything
is composed of these things you can
actually go beyond just treating it as
something for content although that in
itself is quite useful for many people
that's all they ever do and that's fine
but you can actually go on and you can
start customizing it so I can start
doing things like change the site title
and I can get even more advanced if I
know how to do that because a lot of the
people in the tiddlywiki community are
not programmers that people like poets
and genealogists and physicists people
who just want to make little tweaks so
these are the kind of people who hacked
quite comfortable doing things like this
and taking it as far as they want to
take it and I can even get further than
that if I really know what I'm doing I
can actually do some programming as well
and this is all everything's tiddlers
here so it's a very simple model of
modularity where you don't have to learn
new concepts for every type of thing
you're doing so all I'm doing is I'm
tagging this Hitler this tiddler as a
system config Hitler and that means that
it that system knows that it gets
evaluated on startup so when I do a save
and reload the page you've got
JavaScript being executed so you can
take it as far as you want and with that
JavaScript you can start manipulating
all the underlying components here and
start building entire applications on
top of what looks like just a simple
personal wiki and in fact the
presentation i'm using here is
dogfooding it's another version of
tiddlywiki that's got all these plugins
that have been reused from other places
and some extra configuration that's been
done on top of it so what I think is
cool about this sort of model is it's
the idea of extreme agility because
there was a talk a little while ago or a
paper a little while ago talking about
extreme agility as being something where
programmers are writing the kinds of
things they want themselves but we don't
all have that luxury so to me what
extreme agility is about it's about
empowering users to tweak their own
environment I think the spreadsheet is a
perfect example of this much loathed by
IT departments for this very reason but
something that gives users great power
to set their own environments up and
it's it's agility from a deployment
point of view as well as a development
point of view from a deployment point of
view you're just dealing with a single
file with all your HTML Javascript CSS
and the content inside that file so that
lets you run it on your own system lets
you mail it to your friends lets you
upload it to a web server just using
static FTTP upload and having a static
file sitting on the server and it also
lets you put it on a shared drive and
treat it as a very lightweight sort of
multi-user system where other people can
access that too and change the content
so that's from a deployment point of
view from a development point of view
like I've just shown you it also is very
easy for individual users who aren't
programmers to tweak and to me that's
real agility it's single page
application most of us have probably
done this kind of thing where we want to
experiment with a bit of CSS or
JavaScript so we'll open up our text
editor save to the file and open that in
the browser against a file you are i but
tiddlywiki goes further than that
because it also allows saving so the
first version actually just had a little
text area because Jeremy rust and the
Creator and my former boss at Ozma's
soft he figured well he can't really
saved a local file system right that's
crazy no web application could let you
do that so it was just a text area that
said you know now that you've changed
all this you can have to cut and paste
this back into the original file and
what's very cool about this nice open
source success story here someone
actually came along and wrote a Firefox
extension and to actually do saving and
Jeremy looked at this and he looked at
the code is kind of interesting I wonder
what would happen if I put this in the
actual tiddlywiki application this is
back in 2004 and in actually lo and
behold did actually work it actually
allowed saving without having any
browser extensions installed just with
that simple pop-up dialog you saw Ramona
to go to check if you ok with it and so
ever since then it's turned out that you
can actually do saving with tiddlywiki
so it leads to you from these different
sets of evolution you've got the single
page application which is kind of thing
we all know where it's just a single bit
of rich interactive JavaScript that runs
either from the server or from just a
file you are I then you go to the next
stage which is once you can start saving
and doing that round trip back and forth
you've got what i call a single page
application and database and then the
step beyond that the next insight was
well we've got all our javascript in our
CSS sitting in this file anyway we may
as well let the you
actually edit that while they're
actually working with the application to
do all those kinds of tweaks that users
even if they're not programmers are
quite capable of doing and especially
because there's also a plug-in
mechanisms that lets you pull plugins
from other places on the net very easily
to users are quite comfortable with
configuring stuff like that so it does
position tiddlywiki is a kind of cloud
ID in the same vein as things like bus
P&amp;amp;J has been and jsfiddle where we're
seeing a lot more of this actually
editing javascript inside the actual
browser not that you have to do it this
way most of us have written fairly
complex applications on top of
tiddlywinks still use an editor and a
make type tool but for doing those
little tweaks very handy and if you want
to get a feel for some of the things
that are written on top of tiddlywinks a
platoon frameworks i created a showcase
just before i left oz and soph actually
that's that goes through a bunch of
verticals all these slides are online
too if you look in the j s comp tag i
just put on twitter the actual um the
link for these for these presentations
and just to mention too although there
are some very cool things about running
off the file you are I there are also
some great advantages to running things
in the cloud and there is a whole server
side story to Tilly wiki as well say
where it gets position from this point
of view is you've got all these tiddlers
that i just showed you there's just
little blocks of text content all of
those things can sit as resources on a
restful web server as well and that's
what tiddly web and tilly space enable
so that you can put to them and get them
and delete them and you can render them
as json or HTML however you want and
then what you can do is you can compose
them together too so you can have a
whole bunch of tiddlers and render those
things as json or whatever but what you
can also do is you can take a whole
bunch of tiddlers sitting on the server
and render them on the browser as a wiki
in which case you get the tiddlywiki
until the wiki then becomes a single
page application client into a no SQL
restful database so it leads to a very
interesting model which I've
demonstrated in this screencast here
right at the end where I've developed
the whole thing
on the file you are i but then at the
last stage i actually go and upload to a
server and at that point you can start
setting up your security policies and
you can see what kind of tiddlers can be
accessed by what kind of users in what
kinds of ways but your day to day
development is done on a file you are a
so this is talking more than just about
tiddlywiki it's about some of that hacks
that we uncovered in the creation and
the ongoing evolution of tiddlywiki and
the most obvious hack here is the file
access it's the fact that in all of
these different browsers you can
actually talk to the file system which
is something that a lot of people just
unaware of tiddlywiki these days is
built on top of jquery so there's been a
a file plugin extracted from jQuery TW
file and interestingly enough it doesn't
just say back to itself the tiddlywiki
that you're actually running it actually
will do general purpose file
manipulation loading and saving any file
on your hard drive it's got a bunch of
strategy objects different
implementations depending on what the
current environment is so we'll sort of
say can you do this no okay can you do
this no and we'll go through until you
find something that will actually be
able to deal with it the first one that
was created and the one that most people
use today because the best supported is
on Firefox so it's this mozilla object
and you can see here that it's got this
in the mozilla these native objects
component or interfaces dot NSR local
file component or interfaces that NSI
file output stream and once you know
that those things exist it's very
straightforward it's just a standard
sort of thing that you'd expect to see
in C or Java for doing outdoor in it
outright I've got flash out close
standard API for outputting to a file
activex also has a similar sort of
component scripting.filesystemobject so
you can do the same sorts of things that
way unfortunately for the other browsers
you have to resort to an applet and I
say this is unfortunate because a lot of
the thinking
to the wiki is that a single file is
just extremely easy and straightforward
for users as soon as you introduce any
concept of having to carry around
multiple files means you always have to
remember to attach ten different files
to an email or upload ten different
files or put them in a zip file and hope
that someone on the other end can done
it can unzip it and all the directories
work out right or having to have any
kind of server infrastructure so all of
those things zip files and server side
stuff it's not rocket science but it is
actually exponentially simpler if you
can actually encapsulate everything in a
single file and so that's where it is a
bit of a downside that at the moment the
other browsers do actually require too
far so if you go to tiddlywiki com do a
download you'll get a zip link and that
zip will include the applet as well as
the HTML but it still does actually work
you can still save from the other
browsers for the most part and the final
technique is java live connect very old
technique for talking to native java
objects would actually be quite cool but
it's just a very slow process you know
to start up every time it has to try to
use one of those components the next
tack is something quite different
something that I came up with when I was
coming when I was trying to create an
OpenSocial gadget to talk to tiddlywiki
and there are all these single page
files you know HTML files sitting on the
web and how cool would it be if we could
turn all of those into AP is that could
be meshed up using javascript api is the
kind of thing that Doug Crockford was
trashing this morning so this is the
idea where you dynamically create a
script tag and evaluate that and the
response comes back into your third
party mashup and here you're just
dealing with a single file you've got no
server side component so is it possible
that you can have a single HTML file
that also presents itself as valid
JavaScript and the answer turns out to
be yes you can so this is a chameleon
file its kind of thing where depending
on who's looking at it you can see it in
two different ways
you view it from the browser just type
the tiddlywiki URL into an address bar
and you see it as a tiddlywiki take them
from a third-party web app it calls on
it the same URL as a script tag and that
actually evaluates in the browser as
valid JavaScript and the URL you can see
it here and I'll show you how it looks
it's basically you've got an open tag
click open JavaScript tattoo open HTML
open JavaScript closed HTML and so on
I'll show you how this actually looks
from the point of view of something that
treats it as HTML it ignores all this
stuff at the top because that's it
that's commented out as HTML and the
stuff at the bottom so it ignores all at
javascript fortunately enough all of the
browser's except for IE actually look at
the doctype even though it appears after
a comment so it turns out you can
actually get away with having a doctype
further down and not falling into quirks
mode and so from browsers they'll
happily render that javascript a little
bit more interesting because the HTML
tags are actually ignored and this is
just some fortunate thing I don't know
if anyone can explain why this is but
they're not only ignored but the thing
that's inside them is not ignored so you
think maybe if they're ignoring they're
ignoring it because they're treating it
as oh well you didn't really know the
difference between JavaScript and HTML
so we'll just treat it as an HTML
comment it's not that they're actually
just ignoring the open tag and the close
tag so all that HTML gets ignored and
you end up with valid JavaScript so it
is actually possible to have a single
file that is both HTML and JavaScript
the next hack is kind of trying to do
the same thing with vector images and
again you know if you have the idea of a
single file it just makes life easier
you can mail it around to different
people so a bit of an experiment again
turned out that you can actually do this
in a very simplistic sense any way is to
have a single file where it works out as
vml most of that is actually just vml
but you've got an SVG tag in there that
I ignores and likewise if you treat it
as SVG fortunately the most of the
browsers will ignore the rest of it you
can't
do everything with it but it's um an
interesting hack which might go
somewhere sometime although now the IE
supports SVG maybe not another
interesting thing about SVG is actually
taking an actual block of SVG the actual
code for it and putting on a page turns
out to me not so simple and this is
exactly the kind of thing you need to be
able to do when you're keeping
everything in a single file you can't
you don't have the luxury of putting it
in a separate file and linking to it via
an iframe source so turns out that if
you want to have this as a standard HTML
document rather than XHTML where you can
actually add an SPG node you have to do
something like this you do it you create
an object and you said its data the data
attribute to data images SVG plus xml
and the SVG code and that way you can
actually put more than one if you like
SVG elements on the page in real time
and this could be useful if you have an
SVG editor which tiddlywiki the next
version hopefully is going to have and
Jeremy Ruston's done some further
research on this that you can find here
again all these links are actually in
the slides and he's been looking at
doing unique name spacing on the SVG
elements as well so he recursos through
all of the things inside it like
gradients and gives them all the unique
name space otherwise you end up with
conflicts depending on how you've added
the SVG elements the next hack is do it
I frames and this is I think a an area
that needs a lot more research that's
starting to become quite interesting you
end up with you've got all these
miniature HTML documents inside your big
HTML document so until a wiki for
instance one of the things I did was a
playground application in this case 2
playground for html5 with little little
bite-sized applications to do little
things and these are just you know this
is a complete HTML document that I'm
embedding inside my bigger HTML document
and I don't want this mini HTML document
to be in any way contaminated by the
JavaScript or CSS that's in this bigger
this bigger application so that's why I
squared it all into
you dynamically generated iframe so
we're used to iframes being rendered as
as having a source you know that
appoints somewhere else but we don't
have that luxury here so we need to
actually have a technique for creating a
new iframe and pushing content into it
and that's where you get code like this
but basically lets you get hold of the
iframes document and then it's a simple
matter of dr. open right lane closed
what's also cool about running off a
filer URI is you actually don't have the
standard cross-domain policies applying
as well so you can actually do cross
domain xmlhttprequest calls and this
leads to a whole application as a
scraper because what you can then do is
you can call off to a third party site
pull down the entire HTML inject it into
an iframe and start pausing it using a
CSS selector engine so that's a
completely different application from
the playground type application but also
something that's useful and people have
done it Ozma soft as well and I wanted
to point out that Primrose has actually
done a lot of work recently on iframes
he's been doing a whole widget framework
called squidgy that is actually quite
cool and worth checking out and one of
the ways he does it is with CSS resets
that use bang important rules and so on
to basically say you've got a new div
where nothing else above applies and
also it starts to get into fuse j/s
territory as well about having things
that don't conflict with other things
that are still on the same page but what
it's also done is a lot of work on
iframes squirting too so actually being
able to do this the idea of us I frames
without a source is something that
hasn't been explored and has a lot of
subtle things like the fact that if you
move it from one element one part of the
Dom tree to another it basically
destroys the whole content it's like why
doesn't do that who knows but it does
actually fail on a lot of things that
he's trying to equalize that across all
the different browsers the next hack is
script islands also a pattern I think
we'll start to see more of it's the idea
of embedding scripts that don't actually
get
evaluated when the page actually loads
and Google's done this as a performance
optimization putting scripts inside
comments in the case of tiddlywiki we're
doing it for a different reason we're
doing it because we want to just keep
them in a nicely contained place whereas
previously to Lewicki were storing
everything in divs all of that content
whether it's the users content or CSS or
JavaScript nowadays or in the new
version of tiddlywiki to lyric you five
which is complete rewrite its using a
different text a different type so as
long as that types not text / JavaScript
it's not going to be evaluated but you
still have the nicety of keeping them in
the place where they belong the next
hack is embedded images again we wanted
we want to we don't want to carry around
all those separate images so we want to
keep them in one place so we used data
URIs all the images you've seen in this
presentation that based on data URIs and
most of you probably familiar with the
idea of data URIs that's just a long
string that represents the content
instead of having it on a separate in a
separate URL somewhere problem with ie a
six and seven they don't support data
URIs and even i ate pretty much supports
them just for images so there's a hack
that came out last year that was quite
cool that's rediscovering what was
around a long time ago mhtml and the
idea of multi-part HTML documents which
we've proven to work and is also being
incorporated into tiddlywiki 5 and this
is how it looks you end up with just
these different blocks of content at the
start fortunately enough this is the
same syntax as you get in a day to URI
so you do have to have the redundancy of
storing it twice and having to save it
to two different locations because the
other browsers can't read this but at
least it's the same content and when you
use it in CSS it looks something like
this mhtml of the URL and then the
segment that you've got
and you can also use data URI for other
things like audio video and font faces
that you would usually expect to see in
a separate file as well so all of those
things allow you to get some extended
features but without having to carry
those separate files around and the last
tack to mention is the magic hash that
we've come to know and love we see this
a lot and tilly wiki used it to
basically changing the fragment ID to
let you store the state and bookmark
things and send them around to different
people so that's about it just to say
what's going on in the future tiddlywiki
5 is putting a lot of these things
together a lot of them are already in
the existing version of tiddlywiki but
tiddlywiki 5 is a complete it's the
first complete rewrite for the six years
of tiddlywiki production typically space
is multi-user tiddlywiki hosting and
when I say it it's hosting wiki's that
you can sort of spin off its not just
really wiki's because it's things like
this slideshow or forums or blogs or
whatever people want to build on top of
tiddlywiki and above to see what people
can come up with some of these hacks
that I've shown today and I hope you
found it useful and thank you so no no
probably don't have time for questions
do we probably got time for lunch
instead I ok gone you we're doing this
trip down
painting the tape country consumes later
oh yeah well that's just a matter of you
can actually just get hold of all the
script tags in the document and then so
this is for the script Island how do you
actually evaluate the scripts later on
so you just get hold of all the script
tags look at their inner HTML and you've
got access to that information know
where you get access to see the
multi-part thing would you build good
acting you can you can get X 0 to
actually get a whole access to the
content I think you actually can I'm not
a hundred percent sure but I think yeah
that's true except i think if you can
get access it might only be nae that you
can get access to it but yeah because i
think the reason i say i think you can
get access to it is is I mentioned that
originally to the wiki is or the current
version of tiddlywiki at storing
everything and gives the next version
will store some things in script tags
and other things in mhtml so I think
that's why you can actually get hold of
it in a yeah cool
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>