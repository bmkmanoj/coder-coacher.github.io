<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Nathan Rajlich: Writing a Webmodule | JSConf.ar 2014 | Coder Coacher - Coaching Coders</title><meta content="Nathan Rajlich: Writing a Webmodule | JSConf.ar 2014 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Nathan Rajlich: Writing a Webmodule | JSConf.ar 2014</b></h2><h5 class="post__date">2015-05-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5EFAnFske_w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">College a scarf Argentina
so i'm here to talk today about web
modules and you're kind of like wow what
does that mean right kind of a vague
term and you're you wouldn't be totally
incorrect if you check on Google it's a
not a totally unclaimed name so what web
module is am I here to talk about today
not not this one not the python library
either and I mean Java has a special
place in all of our hearts but i'm not
talking about java Taylor this is jae's
conf up after all so I'm talking about
web modules and specifically mpm modules
designed for web browser usage so
automatically created this github
organization web modules and it's
basically just a collection of common
j/s JavaScript modules that are intended
for use in the browser so if it's
something generic that can also run in
ojs it probably doesn't belong there but
we're also trying to maintain a certain
level of coding standards and sort of
like a development philosophy of us at
this point they're kind of more
guidelines because we're still working
on complying 100% with these guidelines
yeah these standards but hopefully with
some more time we'll be able get all
that in so basically every module should
be very small very focused on one single
task using browserify for bundling so
you hopefully off mode with that on the
github repository name should match the
NPM module name and I'm read me a
markdown file is preferable of course
and then unit tests which might be a
little bit more out of the norm for for
client-side kid and then with a cloud
testing enabled via sauce labs and we'll
talk about that a little bit so small
and focus right in a perfect world you'd
only export a single function which we
do by setting module exports to function
reference
and this helps enforce the small and
focused design philosophy and so one
good example of that would be the node
contains web module and that's it in its
entirety right there so small
self-contained focused but this is
basically actually a polyfill for the
node contains WWDC method with you know
compatibility for internet explorer but
polyfills are also a great piece case
but like i just said actually but always
try to just probably fill the smallest
you know piece of the puzzle that you
need to and so another good example
would be the progress event module which
which which implements the progress
event constructor to return a progress
object like you'd use with xml
httprequest or things like that but then
of course support for things like
Internet Explorer which the unit test
can verify so if a module has an inverse
of whatever it's doing you should not
implement that in the same repository do
that in a new repository you know keep
things isolated if you think separated
keeps tests focused that way too and so
a good example of that is wrap range and
unwrap range so they're two different
modules but they do the inverse of each
other basically so wrap range I'm not
showing it here but you pass in a range
and a dom dom element name and so then
it would wrap the selection with abby
node set pretty simple and then the
inverse unwrap hola guys come and so you
could see how you could use these
together to implement something like a
bold command in an editor and text
editor and so I mentioned we're using
browser ified hopefully you're familiar
with that and that allows us to use the
common j/s code and it also has
transforms and things like that which
I'm not a huge fan of
like to i do like compiled two languages
and using them with browserify i just
like to compile ahead of time sauce so
soon browserify other bundlers night
work you know component or required yes
things like that but not really put you
know our biggest priority at the moment
and there's a wizard so as our
convention you know we try to pick a
name that is available on NPM so that's
one of the first steps is picking out
the name so this helps users find the
repository which happens quite a lot it
seems npm I wish would enforce the
repository field more than it currently
does but so as a result you end up
wondering where the hell the repository
is and so at this point in the NPM
registry I mean there's a lot of modules
on there now i mean i i'm not i couldnt
even give an accurate number but in the
tens of thousands i'm pretty sure and a
lot of the good names are taken or a lot
of the single word names are taken out
which i should say and so as a result
almost all of our web modules i think
with the exception of one is hyphenated
you know we had to be good to figure out
a name that uses two words basically but
this ends up working out decently
because we get a nice noun piping verb
convention and so there's a little bit
consistency consistency there so github
wrap range and then NPM same name
everybody's happy so hopefully this goes
without saying but I'm gonna say it
anyway always add the readme file if
you're looking through the modules and
the organization are now you might be
like a but this one doesn't have a
readme and so yes yes that's one of the
that's one of the guidelines we're still
trying to get fully compliant with it'd
be good to have the NPM installation
instructions which I mean if you're
following the convention it should just
be the same as the repository name but
sorry is good to have it in the readme
as well a usage example is always good
to just like a little quick showing of
how how how the API works and I mean
honestly if if the module is as simple
and focus as it should be it's a quick
example should be all that's really
needed right but nonetheless sometimes
you might also want to generate api docs
using you know Jo stock comments in line
or something like that we find that the
docs do X command line tool it's um it's
an MPN also from TJ Holloway check does
a pretty decent job of that but more
importantly we like to have the readme
because we add the we can add the Travis
CI and sauce labs build badges and we
can see a granular output of which
browsers are failing if any and all so
Travis just gives a basic overall
everyone pass Trevor and failed but it's
good to have that in there too so it
brings us on to the clab testing we use
a command line tool called zool which
combines browserify mocha travis CI the
service and sauce labs so it's kind of a
hodgepodge but in the end you get to
execute your browser tests using a
browser Phi in the cloud you know using
arbitrary web browsers
and in the package.json file the npm
test command will be set up to run to
execute zool and there's the repository
for it if you want to check that up if
you don't get the reference there is no
Dana only Zuul ghostbusters so Travis CI
is a part of the equation here Travis CI
ends up invoking sauce labs when when
you set up your commit hooks like that
and so you need to enable that from
github for each repository a little bit
of a pain but you know there could be
could be more annoyances the zoo leaky
has a good page on explaining how to set
up Travis CI but it basically involves
creating a sauce labs account and like
encrypt you know travis has a way of
encrypting environment variables so you
can encrypt your username and your in
your authentication key and then it
knows which repository you're accessing
so there's an example of what Travis
TI's matrix will look like it's a little
blurry but you were specifying the
browser name browser version and in a
matrix style and a couple tests or
failing there so we'd want to go in
there and clean that up right
so you'll need to create a sauce labs
account there's free ones they're called
open sauce and you you uh you can you
can basically create as many of those as
you want so zool integrates the sauce
labs like i said by checking the
environment variable and so somewhat
annoying but you have to create a new
sauce labs account for every module
created I'm gonna have to like finger
support on that pretty soon or something
but it's a little a little annoying my
one password looks like this by now so
it's kind of it's kind of a ridiculous
hopefully they'll make that process
easier soon so then I course hopefully
in the end you get nice all greens and
then you're like okay my module is
stable and I can use it in the
application now if not then you know
you'd be able to go to Travis CI and see
the output see exactly what errors were
thrown and then hopefully can figure it
out from there Internet Explorer it was
really terrible eras so usually it
requires a little more digging but then
you commit something else try to fix it
and hope for greens again right so
please check out the organization check
the codes and patches and hopefully some
of these these ideals rub off on you and
thank you for listening</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>