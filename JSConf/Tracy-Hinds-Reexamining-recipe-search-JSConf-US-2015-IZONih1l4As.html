<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tracy Hinds: Re-examining recipe search | JSConf US 2015 | Coder Coacher - Coaching Coders</title><meta content="Tracy Hinds: Re-examining recipe search | JSConf US 2015 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tracy Hinds: Re-examining recipe search | JSConf US 2015</b></h2><h5 class="post__date">2015-06-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IZONih1l4As" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi I'm Tracy I'm a web engineer at urban
airship by day I'm also a conference
organizer and self-confessed sugar fiend
I've worn many hats and one of them
being a baker also the conference
organizer an addictions program
coordinator and a restaurant manager
that is not an exhaustive list so
because I love making whether it's via
code or cookies I long considered
culinary schools means to fulfillment so
I know da nerd out on cooking and baking
and recipes as much as I like to nerd
out on JavaScript and learning things
very quickly and kind of taking notes on
what I need to keep up on so in one of
my younger fits of courage I was
determined to run my own bakery and the
idea of being able to take recipes I'd
crafted to perfection over many years
and build a successful business was
intoxicating in hindsight I could chalk
this up to maybe being on a fairly
pervasive sugar high yeah so I've got
this huge collection of recipes at this
point and this this is something that I
thought was absolutely beautiful this is
a collection of recipes from a pillsbury
used to be able to mail in for I believe
it was a dollar that was back in the 50s
and it's kind of incredible that you've
got this this book that when you plow
through it you can find these in vintage
shops and flea markets they've got this
you know handwritten notes all along the
way and this is you know it's a
beautiful way to collect collect recipes
and collect memories but it's terrible
if you want to be able to search for it
down the road if you lose a page if you
spill something on it so that's that's
kind of where I got started with this so
on any given night when I get finished
working I'm starving because I'm pretty
obsessed with food all the time and I'll
throw up in my laptop and search
what I've got in the house and that's
just to minimize me running to the store
so I'm craving a flavor not necessarily
a cuisine you know how does how does
recipe search address this every time I
would Google something one of my
favorite recipe search sites all recipes
it's sort of like they're giving me this
huge amount of information back and I
don't want to have to plow through all
these recipes that have way too many
ingredients that I just don't care what
I have to go by so you know how do we
combine curation of good recipe content
with better search to avoid having to do
something like build a recommendation
engine because I'm lazy and I don't want
to see a thousand results so again once
you know in my prior life I was a baker
and I i love researching recipes i love
modifying them and I delight in the Y as
much as the how following the methods
repeating experiments seeing what I've
done wrong my methodology for making
something new begins with recipe
compilation in paper and digital formats
I read the comments lots and lots of
them this is one of the few times I
think it's a very unhappy and I find I
kind of find where cultural habits have
crept in I try and hone in on the recipe
for what I believe to be the most honest
to history and honest to my experiences
with baking and cooking already and then
I run with it so to do this where do you
go books and magazine articles I've
hoarded over the years but this this
ended up in very recent years becoming a
sort of obsolete method for me I've
moved quite a bit and in that I've
downsized and even prioritizing my
recipe books you can only box full of
professional culinary books around have
a few flight of stairs so many times
before you realize like you just need to
digitize things and you know the other
method that I use now more than ever is
the internet so recipe search and that's
where we're at it turns out search is
done pretty well by this this place
called Google
and I have my favorite sources and most
of them have been revealed by that its
food bloggers who can be trusted to have
sort of my style of cooking they test
recipes out they make comments about it
they modify it they might even do a
follow-up a year later on a project that
they'd already done and they accept
feedback for improvement which is
incredible those ones tend to be the
best recipes for me but you know again
how you find them Google and that's not
easy for discovery purposes you know I
can make arguments about curated web
with blog posts and writing verses
something like social web which is what
i consider all recipes it's a super
interesting rabbit hole that i would
love to do another project on but not
yet so from a Content perspective what's
the current state of recipe search there
are tons of recipe api's most of them
are paid and they provide really an
insane amount of recipes but the idea is
that you're wanting to provide that
information to something a project that
you're already building and I guess
they're assuming that you're not going
to be making that many requests because
the price really adds up quickly then
the question is like what do you do if
the data that they're offering is is
limited or they're not offering
something that you find really
interesting and you want to include I
wanted a cross-reference reviews I
wanted ingredient lists types of food
timer preparation of cooking it's not
that I think of all of these resources
that have been provided to us even
something like all recipes which is I'm
really appreciative of and they've been
in existence for years I don't think
that they're broken it's that I want to
play with the idea of another way and I
wanted more i wanted to be able to
explore so again the bright side is I'm
not pooh-poohing all recipe is there an
incredible website and I believe that
they were the most robust for collection
and discovering it labels itself as a
food focused social
a website and I would say that that's
very on point what's been so interesting
about all recipes over the years is that
as they've added features and even
trying to clean up the UI the user added
comments has still remained the most
valuable piece of that website for me
and really across the internet it's it
helps me learn and helps me spot out
when there's issues in a recipe you know
you'll look at something in the comments
for instance we'll have something like
this recipe had way too much baking soda
in it or I prefer less salt and they
even have user ratings on how helpful
these comments have been in the past and
how helpful these users have been in the
past with giving good comments and um I
was sort of flabbergasted when i was
working through this project and how
valuable that could be and sort of like
how you can harness that you know it's
sort of like you've got I've got my mom
standing in the kitchen helping me and
telling me not to use that much salt and
you know blogs generally have lower
traffic most of the commenters are
appreciating the art of food photography
and maybe the the beautiful descriptive
writing but they haven't tested the
recipes so that's not really helpful and
it's frustrating so it might seem like a
silly question but what is a recipe when
it comes down to it like what are we
talking about when I'm talking about you
know working on what this means and they
can be you know essentially it's a
fairly standard formula of how to cook
or bake something that you want they can
be an experiment to try flavors you're
curious about they can be a family
legacy passed down and recreated from
generation generation the nights I
chased my mom around the kitchen asking
questions to understand what's going
where and why you know those the kind of
things that you end up writing in the
little corner notes there's a series
that I obsessed over for a little while
called mind of a chef and it features a
few chefs celebrating cooking and travel
history science all kind of wrapped up
into this rich study of past heritage
and the line it carries from the
delicious food that they prepare and
their world-class restaurants now chef
sean brock
of Charleston South Carolina and his
famed restaurant husk I was known for
his passion in sharing southern
preservation techniques as well as
elevating generations old graham and
heirloom seeds he used in his own
kitchen he's converted many a skeptic
into appreciating southern food for more
than its sweet tea and it's greats in
tracing the roots of the flavors he was
so familiar with he traveled to Senegal
to explore the West African influences
on Southern cuisine there's a point
where he starts to notice this
remarkable familiarity in flavors and
techniques such as gumbo broths and rice
dishes despite the vast geographical
differences in availability of similar
raw ingredients so you know like where
am I going with this you've got these
beautiful connections that you can find
but how are you going to discover them
and I was at a talk at Brooklyn Jas and
I got to see John Resig talk about this
awesome new thing that he's been working
on sort of branching off of an older
project he's been working on for years
and it was building an art history
database using computer vision with the
Frick library and he had actually
announced that he upped his funding he
got more funding for this project it's
really exciting he showed how clear and
concise the queries were for you know
being able to use neo4j in making these
connections with unattributed italian
artwork and i thought that that was
really incredible so you know it's sort
of like of all the technologies I could
use when it comes to trying to discover
cool relationships in recipe search from
ingredients to cuisine you know why not
graph databases so common uses for graph
databases include geospatial problems
recommendation engines network analysis
which is definitely a lot of social
network type work and bioinformatics
anywhere that the relationship between
the data is as important as the data
itself so what if you could see
if there are any interesting histories
or similarities you could surface by
doing large scale comparisons of
ingredients and cooking preparation
across millions of recipes so we're
going to dive into a little graph theory
just so that we can make sure that
everyone's kind of grasping the concepts
of where neo4j graph database takes you
so let's get started a graph theory at
its core is the study of graphs in this
case it's a mathematical structure used
to model relations between objects so
they can be slightly different from the
use of word graphs we might be familiar
with but are a powerful way to visually
represent relationships so here you know
we have graph for the initial concept of
my recipe exploration the fundamental
units that form a graph are nodes and
relationships the nodes are here are
represented as the circles I indicates
ingredient are is indicative of recipe
and the dashed circles that I've got our
ingredients that don't actually are not
contained within these recipes so they
have no link to these other these other
nodes so a property graph is made up of
nodes relationships which are these
edges these lines that are connecting
and properties so nodes contain
properties some great insight provided
by online docs I thought it was great
was that you should think of these nodes
as documents that store properties in
the form of arbitrary key value pairs so
the most common graph model application
is is this and it's referred to as the
property graph model the keys are
strings and the values are arbitrary
data types I an neo4j both nodes and
relationships can contain properties and
that's not common across all graph
database types relationships can
relationships connect and structure
notes getting a little excited there a
relationship always has a direction a
label a start node and a Ned node there
are no dangling relationships together
relations a relationships direction and
label add semantic clarity to the
structuring of
notes the ability to add properties to
relationships is particularly useful for
providing additional metadata for graph
so cipher is the query language that we
use in neo4j these primitives are all we
need to create sophisticated and
semantically rich models so far all of
our models have been in the form of
diagrams diagrams are great for
describing grass outside of any
technology context but when it comes to
using a database you need some other
mechanism for creating manipulating and
querying data and cipher is it so I
immediately appreciated how intuitive
cipher was when it took advantage of
ASCII art to represent graph patterns
I'd still uses sequel like clauses and
keywords such as like match where delete
to combine these patterns and specify
desired actions if you so choose so the
first example with the node syntax is
that cipher uses a pair of parentheses
to indicate the nodes which is the
ingredient a pair of dashes under my
relationship syntax will represent an
undirected relationship so there I've
got a directed relationship laptop with
the arrowhead at one point and you can
end up having bracketed expressions as
well to be used for details so combining
the syntax for nodes and relationships
we can express the patterns below so
treating relationships the edges of the
graph the connections as a first class
object is the fundamental innovation of
graph databases the database doesn't
only just storm information about
individual things it also stores those
relationships between things and that
capability makes it much easier to
express sophisticated questions and get
answers in a small fraction of the time
it takes a traditional database those
queries corner of those discoveries can
stack on each other and end up giving
you a much richer context the
relationships in the database can
express the nature of each connection a
parent-child owns friend and capture any
number a qualitative or quantitative
facts about that relationship so waiting
start and end date because of this you
can write queries that are expressed
constraints I consider this exploratory
modeling it's all in what you're
interested in I can hop pass SI as a
connection and very quickly be delighted
we're disappointed with my results so
small lessons I've learned so far I'd
had a couple of recommendations and seen
some talks influencing what database
would be a good try so it turns out I
don't have a lot of friends that are
attempting to mess around with graph
databases right now so the
recommendations weren't as strong as I
had hoped I initially wanted to use
level graph which is built off of
leveldb and it has a great community of
developers working on it but still what
I considered fairly small group and when
I read the docs I found you know I
looked at the docks and then I compared
them to the other option I had been
recommended to and is also the most
popular right now which is neo4j and
that battle was quickly won by neo4j so
it turned out that neo4j not only had a
huge a wide breadth of developers who
had written projects around it and had
written posts on problems that they had
it had a whole manual a manual of
documentation that included examples
tutorials and links to other community
projects so at that point it was for
someone who was attempting to learn more
about databases by diving into graph
theory and graph databases this was
extremely helpful so the next choice I
had to make and exploring this work was
how the heck would I find a hardy
collection of digitized recipes so
there's no library of congress for
recipes nobody's really working at this
point that i can tell on building an
archive that is open and there's no
central repository for baking yet so we
all make mistakes this is part of mine
and it's a bit silly how quickly it can
pile up but I ended up choosing to
attempt API
a calls instead of the down and dirty
job of web scraping the glorious amount
of cooking that is spread across the the
far reaches of the Internet so we're
going to take a look at some of the API
a response structures that I had
examined as part of this so that's me
trying to get it all of my AP s so all
of these had a decent start for
documentation they were nice to approach
this first one that's going to be
scrolling why a buy for quite some time
is big oven they're super developer
friendly but they give me way too much
information the next 1 i've got is at a
mom and edamame is a really great i
thought that there are design choices
around the structures that they chose
they were clear they made sense and it
was a nice way to to approach getting at
information without nesting it too
deeply and it also didn't give me the
entire kitchen sink like big oven did
big oven tries to give you the
nutritional information for every single
ingredient as well and also tries to
convert all of the weights to grams
regardless of whether you want it food
to fork is another great API in terms of
its accessibility it'll it's affordable
it's free for a lot a larger number of
requests than the other AP is but it
gives you no information I think that
there were maybe 12 12 properties it was
just terrible so then I got to my my
dream structure the structure that I
wanted to see out of my project let's
still go like such a useless amount of
information to me so this is this is my
dreamy dreamy structure of an API for
normalizing these api calls so what I
ended up doing with this was trying to
figure out what I wanted for now and
what I wanted to build sort of future
proof so I wouldn't have too many holes
moving forward when i'm trying to make
comparisons and i tried to
I tried to be kind with how I built out
the structure so that I wouldn't have to
do too much work and if other people
wanted to use it as well they wouldn't
either but there's still there's still
work to be done and unfortunately none
of the api's I was working with provided
me with all of these things so the
ultimate goal of this stage one of this
project was to lock down the ingredient
to recipe relationships if I have a
couple of vitamins in my pantry
optimized for the recipes that will
acquire the minimum amount of purchasing
when I stop by the grocery store after
work for this one can give weight to the
recipes and that are a perfect match but
this might not be a very exciting recipe
if I've put in five ingredients so my
exact research results is going to come
up with something like pita flour oil
salt yeast water that's not dinner so I
need to do things like being able to
expand the search maybe add a few more
ingredients and add in matches such as
something like a category for dinner or
a cuisine like southern food which makes
for our far more delicious results so
stage two of this project is still being
implemented unfortunately so the
limitations of the API is I chose over
web scraping left me with too small of a
data set around cuisine for me to be
able to play with it and that also turns
into sort of a layer of the project that
i would have to approach where i might
have to take in large datasets and apply
these tags manually go through and
actually label the cuisine and i don't
know how scientific that would be or if
there's some sort of a recipe science
body that would be angry with me for
applying an inaccurate label of some
sort so again this notion of being able
to discover culinary connections between
cultures could mean I could get to
explore the world through eating instead
of sitting in a library poring over
culinary history you know both are
really interesting but i prefer food
experiences that fire on more sense
owners so currently this project is all
command line and neo4j interface which
is a gorgeous web admin by the way a
bunch of fun to work with so what this
project isn't is a business it's an
exploration I'm not particularly
interested in starting my own company to
compete against the likes of all recipe
yummly I've mentioned prior you know who
have contributed to too much of what you
can find on the internet nowadays like
I'm very appreciative of that I am
interested in encourage these projects
to rethink the way that they've
approached the rich data that they have
at their fingertips so what this project
will be moving forward first I need to
open source it so it's currently a
private repo that will be turned over
this week to that github URL and I think
I may end up having some NPM packages
out of that as well and then secondly
we've got you know the web interface
that I was really excited to do but took
second you know second place to diving
into these gnarly api api call issues so
you can do fun things like throw a few
ingredients into a box and it should
just work you know let let me let my
site do the hard work and provide you
with some really neat discoveries on
things that you would like to cook and
then thirdly i want to convert to
scraping and that's going to be i
imagine a very long project so i would
argue that web scraping might end up
giving me some legal trouble but the api
call is expensive and i'm not
particularly interested in giving anyone
recipe api all of my money so they're
still limited they still only have
hundreds of thousands of recipes which i
find not enough and that's you know
that's just focusing on my my previous
regrets in the choices so you know let's
let's review we've learned a little bit
about graph theory and you know how
nodes and relationships you know
coincide with recipes ingredients
we've talked a little bit about neo4j
we've got gaps in the current recipe
discovery and how helpful documentation
can be we've got an idea of approaching
a kinder data structure and all of the
mistakes that can go into building an
idea that many people have already
interrupted or attempted erupted in this
is how I got to be a better program and
you can too so there's a pervasive
notion in in many programming
communities that trying these sorts of
things can be a waste of effort that
they've already been done well or can be
done better in another language while
this might be true and that you know at
the time of this discouraging whining
when someone says that it's it's each
person attempting you know these
projects a bit out of their reach and
potentially yours are you know they're
forging a path that contribute in a much
larger way in the future so practicing
failure by taking bigger and bigger
risks prepares you for eventual look at
even more often endeavors I'd first
considered many of my choices in this
project as failures experiencing failure
is universal so you know we can we can
go on that together I tried to start a
bakery when I was younger and I had a
long table an adventure and having to
let that go I know I can start a bakery
I can feel a little more there you go so
why do you care sharing projects that
help us explore and learn to be better
programmers through the intersection of
passions is a powerful means of
including people from many facets of
life and gather you know getting others
to try it so you know do you like graph
theory I don't know I didn't know before
this project how about being able to
explore unique connections between
ingredients or recipe cuisine yes like
that's how I got here so I don't have a
formal CS background I'm always reaching
for projects that will help push you
know fill in these gaps for me I'd seen
some really cool grata graph database
projects over the years but hadn't
considered myself interested until I
found this connection that was
meaningful so you know if you do have a
passion in this please come chat me up
with resources you've been excited about
I've got a long way to go
and you know you wanna any way that you
can help communicate data structures and
algorithms better is a great thing to
share so these are this is a very short
list of the resources that that were
available to me and why I approached
this project in the first place and then
most importantly I have to thank so many
people so my co-workers at urban airship
my past mentor Chris Dickinson has been
a huge support Charlie Robbins nerded
out with graph databases far too much
with me on this project and try to take
it from me and you know so many people
on the local community in New York that
have been supporting me in preparing for
this talk and just encouraging each of
us along the way to get here so these
folks deserve some cookies and thank you
for listening</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>