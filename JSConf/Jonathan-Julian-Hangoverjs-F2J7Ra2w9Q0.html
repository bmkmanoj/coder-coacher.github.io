<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Jonathan Julian: Hangover.js | Coder Coacher - Coaching Coders</title><meta content="Jonathan Julian: Hangover.js - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Jonathan Julian: Hangover.js</b></h2><h5 class="post__date">2013-01-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/F2J7Ra2w9Q0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right you guys what do you guys want
to talk about today I can do two things
for you I can do both or I can do one at
a time or I can do one we can build a
light box or we can add a character
counter kind of like the Twitter web
page or we can do both you're gonna do
frameworks or without just using jquery
yeah you must see the light box all
right so I'm Jonathan Julian I have this
code it's going to go up in this github
repo so that if you're interested you
can pull it back down and look at it and
play with it when we're done it's it
might not be beautiful so it probably
would need more work to be production
ready but just to show some examples of
how easy it is even or first thing in
the morning to build your own light box
for example it's not too hard so
here's our code for this page and
basically here's the use case that we're
thinking of your boss says to you hey
are our homepage it has this login form
on it we want to make it like super cool
and have it come up in a lightbox
instead of being sitting there on the
page all the time so you say okay I can
do this on matru sively I can leave this
here for non JavaScript browsers but
when somebody comes along with
JavaScript we're going to take it out of
the page will show it on a lightbox so
I'm just going to go through and code
that and if anybody else has ever done
this before maybe you could help me out
I'm just going to the resolution is
really wacky so first thing we want to
do here I think is we want to take this
login form using jQuery take it out of
the flow so first we'll add jquery to
the page
if you have any suggestions or if you
want to help me out or holler out stuff
go ahead yes becomes do if you want to
speak in a low yeah you're really losing
all right so when documents ready will
do all this fun stuff ray you know what
if you have a 3.5 to 3.5 I could hook it
up I have speakers but I just don't have
a ipod cable real bummer like some
Mossad like some massage casual kind of
you know alright that was the login form
I think so yeah there we go login forms
out then let's turn this right here into
a link so that when you click this that
launches the lightbox what was it called
login to put an ID on it yeah thank you
play some music
just for the record this is being
recorded and everything there's exactly
five people other than me in the room so
what we're going to do when this link is
clicked let's show the format well we
don't only exactly show the form right
away but we could
see how this works I need to put the
link in that's a pee I don't want to
change the page as part of the goal here
I want to do this totally untrue silly
so let's take that login link and jam in
the nature of a href in there this will
work right
there we go
okay so that's the beginning stages of
actually hiding what we want to show in
the light box but then showing it when
we click so light boxes have there's
three main components to your lightbox
you have your page which is at z index
whatever and then you have the overlay
which is the z-index above that and you
have what you want to show in light box
which is the Z necks above that so we
need to build and overlay and we're
going to put that login form into the
top feel free to move about oh please so
let's build an overlay I meant for this
to be in here but doesn't really matter
we're going to make sure the overlay is
hidden when the page starts up and the
overlay we're going to build as an
absolutely position div that takes up
the whole screen
see top 0 left 0 width 100 width 8 100
and what else we need a background color
let's make it black and we're gonna put
an overlay on this and someone told me
point six is a good number for an
overlay but you can use anything over
with overlay Oh past city point seven I
hear from the crowd is the right number
for your opacity and we want to make the
z-index above everything else on our
page so depending on what else we have
going on usually pick a big number like
90 um let's see what's going to happen
here we're not showing it yet so there's
the overlay and it's hidden by default
so we're going to show it with the login
form
now when we click it'll look the same
when they come out walking home
position you need to visit yes exactly
the top and the left were meaningless it
was still invisible until we positioned
it so now that's better so now we have
an overlay of point seven over top of
everything on the page not exactly what
we want we want this to pop out so let's
do that next the login form which is
hidden I like to there's many ways to do
this I like to do it this way add a
style to it
absolutely add class add that class to
it and then here I can select login form
but not always only when it has the
class of light box so this is going to
work normally when no javascript than
when there is JavaScript you'll see the
lightbox tiles and here we will set Z
index of 91 and we'll also position this
to get it above the lightbox div and
let's do top 0 left 0 see how that looks
not perfect when you put a background
color on it
better so we're not doing any design
today because that's just that's too
much thinking for this early you want to
have your design or position this
somewhere else and etc etc but we've got
the underpinnings of the lightbox what
if the user decides to get out of here
what do they do when we need to cancel
button you want to take a minute where
we got here modified
ok
we're good should I push it all right
cancel button again trying to be
unobtrusive what I'd really like to do
is add the cancel button right here next
to the button I don't want to put it in
the form manually which will be easier
so we can since we're in here login form
adding the class of light boxing we can
just append it in here I think we can
just do this all right
and we need to put a either an idea or
class on this we can say let's call it a
class classes canceled
now we have a cancel link there's a
great vibe in here this is really good
it's really cool all right what are we
gonna do with that cancel link let's
attach a handler turn I hope so I hope
so and there's a total of six people
here to witness it 60 the room is packed
backup sleep all right when that cancel
buttons pressed let's just get rid of
all this stuff both of these the overlay
and the form hide fast
gone cool so that wasn't much good I did
that in eight minutes or them um yeah
bit it well there's one more thing
there's one more thing that I thought
would be really cool here is you know
sometimes when you're using like a
desktop app and you hit escape and it
kind of like dismiss is what you're
looking at that would be really cool
wouldn't it how do we do that all right
I'll figure it out cool all right so um
you can have being a blip on the overlay
oh that's an awesome idea yeah that's an
awesome idea let's do that why don't we
do cancel comma overlay now wherever you
click cancel or overlay it makes it go
away nice nice I'm gonna raise you I'm
gonna raise you a double effect how
about that let's make the login form
fade out fast and then chain to that
have the overlay
fade out
cool let's get back to the key press cuz
that that's kind of fun I think there's
a couple ways of doing this oh gotta
commit lightbox but what did we just do
added cancel and other cool we're
good now the key press so what should we
listen on should with us in on window I
know if done this one window before and
key up just to save some time key up is
the more fun way to do this key down you
know that doesn't happen right away it
key up is the cooler way to do this so
this is how I poked around and figured
out what the key code for escape is
anybody know what not you because I know
she knows they might knew what the key
code for escape is alright so i don't
have to console log it i can just do it
i need to pass the event in here let's
capture that the key code triple equals
twenty-seven then let's do this same
thing
will it work that was the Escape key
this is the Tiki nothing so good let's
commit that
my use my say-so just committed
everything this is this is my first
presentation I've done with live coding
and it's surprising how little I look
around just kind of staring at my
keyboard I feel like an introvert okay
just just just commit at all just come
in at all
alright so everybody's cool with that
I'll push it and you guys can pull it
down for kit make it better
and and there it is who needs a fancy
box yeah the jpg I bring plug-in make
sure it covers out like it's just too
much it's just too much for right now
this works when we look when we launch
will need to fix those problems all
right let's move on to the next one the
character counter let's go to Twitter
first because everybody news about this
right here so situation number two that
will go through is your boss says hey
this twitter thing is really cool you
know our fields on our account info page
can only be so long let's tell our users
where we are where they are and how many
keys they have left because right now I
have no idea how many keys i can type
into the bio section i have no idea how
many keys how many letters i can type
into my username so this is going to be
even easier than the lightbox here's the
code for character counter it's just a
simple form first thing we need to do is
add a little bit of markup to say how
many characters are left so let's do the
bio first and after the text area will
add let's see add a span and we're going
to make sure that this works pretty well
so we're going to name it very similarly
to the text area so the text areas ideas
bio so we'll name this bio counter and
within here we can put the count but
like Twitter does but it might be likely
that somebody says hey i want to say i
want to show cool message like you have
x characters remaining so let's do it
that way since a little harder
and we'll pre fill it because we know
that for example the bio can only hold
50 so that's what it looks like for non
JavaScript clients and the the copy
really doesn't fit because it's not
updating right now but you get the point
now let's update it first we'll put
j.crew viewing the page again
and then we're going to attach another
key up and this is actually really fun
to do with key press and key down just
to learn a little bit about key events
key down you'll get more events but
you'll get them later or earlier so your
account won't be reflected using key up
is better in this case because you
actually get the count after the key is
shown to the user so the user starts
typing their name and they type B and
then the count isn't reflected after the
B shows in the screen so
what's the name of that bio it's just
called bio so we're going to attach to
the bio text area p up handler and in
that handler we are going to update the
span within the similarly named bio
counter with the number of characters
remaining so we need to do a little bit
of text manipulation here we know that
the name of this is bio so we are going
to look for the element with the ID of
this ID which is x 0 plus counter and
actually will update the span within
that with the count what's the count we
can get the count a couple different
ways we can say this dot Val so true dot
length so let's say the max is 50 so
let's say 50 minus this dot valid at
length is that going to work ok cool
first shot that's good ok so it shows
how many characters we have remaining
when we get down to zero it goes
negative which is actually pretty useful
I think and we don't have to think about
this but you know it's it's cool so if
it's less than zero let's see if the
count
is less than zero let's do something
interesting let's set a style on here to
turn that red over here to turn this red
so when it's under zero then it's
telling the user hey this is uh you're
not going to be able to submit this it's
not gonna work so um yeah this could get
cleaned up a little bit but we use the
same selector this could be cleaned up
with some local variables and we'll just
call it like over count maybe and if not
then we'll move over count we have to
define over count
how's that look
not what I wanted but close
I really wanted the whole text all right
so we have a few minutes left and with
that few minutes will actually do
something a little bit harder if you
guys are ready for it I'm going to do a
closure we're going to do a closure I'm
just telling you ahead of time so this
isn't it let's look at the let's look at
this okay so so the next thing you're
asked to do is also put this on the
username field and you're like that'll
be easy i'll just copy all that code but
then like the senior developer on your
team says hey don't do that we're going
to reuse the code we're not going to
copy the code so not here this one the
username counter so this is what you
have to do you have to add a user name
counter and this one can only take 10
characters so you can't use the exact
same code anyway so we're going to take
this entire chunk here this function and
I just pulled it out to define it as key
counter
and that as it is should work the same i
just took key counter out to a function
and i'm referencing the function the
same way so it should work the same way
for bio and it does so here's where the
closure comes in we want to reuse key
counter and we had this these 50s all
over the place so let's pass that in as
a parameter and call it max and then
down here we can't just pass in 50
because that whoops that actually calls
key counter so it's the hardest thing
we're going to do today before nine
thirty need to build this to return a
function that encloses that 50 so that
it can be used as the handler and the
way to do that is really easy we are
going to make key counter not actually
do the work of doing the counting but
return a function that does the work of
the counting because just wrap
you
and the first suggestion from the crowd
that actually makes awesome sense I like
it a lot just trying to do a little work
that it's not as pretty
here might be that this might be the
deciding factor here when we do this how
does that look how does this hit you
they have two blocks like this if we did
it without the anonymous function then
it would just be one liners so either
way let's see if it works no it does not
no it does not all right what did we do
wrong we didn't find this all
inside that the key count inside of the
anonymous function yeah and I still have
it taking a max in here because I
started doing it one way and then
they'll find it haulmax but the key
counter all right there he's say okay
let's just for complete list
completeness here let's do it the other
way which would be to would be to return
a function see how that looks
so now key counter takes in max as a
parameter returns a function that refers
to max so there's your closure and now
that anonymous function is returned back
to be the handler and let's hope this
works
extra
indeed where's my console when I need it
hey that's better and this one works
independently this one thanks for coming</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>