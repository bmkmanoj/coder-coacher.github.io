<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[CSSConfUS 2013] Thomas Reynolds: 3D All of the Things | Coder Coacher - Coaching Coders</title><meta content="[CSSConfUS 2013] Thomas Reynolds: 3D All of the Things - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[CSSConfUS 2013] Thomas Reynolds: 3D All of the Things</b></h2><h5 class="post__date">2013-10-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ty3BnpItCbQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright thanks for having me let's get
started so as he mentioned I'm Thomas
Reynolds this is me on github and also
my blog which has a bunch of additional
content kind of on 3d and middleman and
preprocessor topics I'm the creator
middleman which is a static blogging
prototyping and front-end development
framework it basically gives you
something like the power of rails and
allows you to use it in a static context
or if you're a purely web context or
thick client I work at instrument which
is a digital creative agency in Portland
Oregon we work on a whole host of
different things from film to
Interactive's to web and also physical
one of the things we just released
recently for the Google at i/o was the
Google map dive the map dive is seven
large instances of Chrome each running
on a different screen which is allows
you to dive 3d through this world and
it's built in both WebGL and also CSS 3d
and something we worked on a little bit
longer ago last November was Google
zeitgeist for this year which is a site
that which you explored search trends
for Google over the past year and we
also embraced CSS 3d in here to kind of
bring a little extra spark so let's talk
about some 3d we're gonna talk about
WebGL WebGL is this massive topic you
write all your code and see or it
compiles down the C it runs on the
graphics card you can make video games
you can do pretty much anything you want
in WebGL but this is CSS conference so
we're just gonna completely ignore that
so what does CD 3d CSS actually mean
it's written in CSS this most obvious
part it works with CSS so what that
means is like anything else in CSS by
just adding some 3d components you're
not going to trample over the rest of it
and it's going to cascade so if you have
a style well you have an anchor tag that
looks a certain way when you move it
into 3d it's not going to stop working
that way it's going to work exactly the
same
interactions still work you can still
attach hover pseudo selectors to things
that are in 3d the system will figure it
out your mouse will go where it's
supposed to go and everything will react
as expected and any other content in
there is also interactive so if you can
tab through your forms you can have
animations going that are controlled by
some entirely different system like
JavaScript and CSS is simply just moving
these things around for you one of the
reasons I think this is really
interesting is for mobile transitions so
we talked about 3d it's really easy to
overdo everything and just a little bit
of movement and you throw it on a
website this is the size of like a
27-inch monitor then it's it's
overbearing and it's too much and it's
everywhere but and mobile were
constrained and we're used to these side
to side up and down for and backwards
page transitions a lot so I think 3d
fits in here really well users expect a
little bit of flair Apple maybe does a
little too much Flair but at least
everyone's accustomed to seeing some of
these kind of movements in a mobile
context and the lack of transitions is
one of the things that screams to me
that it is not a native app or it does
not behave the way users expect it to
behave so it doesn't necessarily mean 3d
but things should move and animate
smoothly and that's something we can do
it's not out of the realm of possibility
for mobile web apps
there's plan I'm gonna discuss 3d
coordinate systems and how things move
in 3d and what that means in CSS every
system is a little different the
definition of which direction is up is
not well-defined across multiple systems
CSS has its opinion on this but it may
not be the same as 3GS or any other kind
of 3d modeling system and talk about the
transform style and how this which is
the only way you can access 3d
transforms from CSS going to go over a
couple really popular mobile transitions
and how to reimplemented CSS then
finally I'm going to talk about some the
far future or near future possibilities
for this stuff looping back around to
running code
the GPU so this is your basic
three-dimensional access system Z is
coming out towards you from the screen x
and y are about how you expect it if
you've ever done anything with
positioning and CSS or a canvas except
for everything is oriented around the
center of this object as opposed to the
top left which is common in normal CSS
and also in canvas to move things around
in 3d use the translation so the
commands that you can pass in to
transform which is the style element
that allows us to do 3d transforms it's
not prefixed here it's not prefixed
everywhere so I'm just going to leave it
as its root version here which I believe
runs in the most recent versions of
Chrome and Firefox but the WebKit prefix
would still be necessary for mobile so
what you pass into the transform style
is a series of commands and unlike a lot
of CSS they don't overwrite each other
if you do one too many and you don't
need commas to separate them rather it's
a set it's a series of steps that you're
telling the object to make so the first
step is you say I translate along X 100%
these translations are relative to the
object being moved so it's not saying a
hundred percent of the screen saying 100
percent of the thing that's moving and
then you move it down by 10 pixels so if
both these are normal you have to
remember which direction Z is Z as it
increases comes towards you as the as
the viewer a negative puts you back
deeper into the scene and the common
units that we passed this are both
percentages and pixels second most
important thing you can do in addition
to moving in 3d is also rotating in 3d
here again we have commands rotated X
rotate Y and rotate Z these can be
stacked on top of each other and in
order these rotate around the axis which
means it's not entirely intuitive what
that means so I have a demo in just a
second and I'll show you what that means
there
there are degrees you can go negative
and go positive zeros is facing directly
as you would expect forward you can also
use radians but unless you have a
preprocessor or something or CSS math
library then it's going to be kind of a
pain to work with radians and finally
there's a perspective the perspective
sets the distance of the viewer from the
scene without this the browser won't
even kick in the GPU you won't get any
3d animations at all so you have to put
this on a parent somewhere above the
elements you're animating this number it
basically it's saying how far you are
from the object and so if you're closer
to it things would be more exaggerated
if you're far away big movements are
going to look smaller there's some magic
numbers somewhere between 400 and 2,000
usually you look just about right so I
know that was all very abstract so
here's some actual code and some
interactive elements so we have a square
and we're going to apply these
transforms that aren't on top to it so
if we move X and move left to right like
you would expect Y is up and down and
the magic is in Z as we increase it it
comes closer to you or recedes into the
background the rotation is along those
three dimensional axes so X which runs
from left to right means that it'll flip
over the top Y runs from top to bottom
it'll flip from side to side Z runs
towards you and you get just a normal
kind of rotation so you can see that as
we start to rotate something the thing
that tricks our brain and thinking that
it's actually a 3d object is is the
angle
perspective right now is is pretty huge
we can we can increase it and get
further away from the object and you'll
see that that angle increases a little
bit if we get really close up into it it
becomes kind of absurd as I mentioned
before transform applies these commands
in order so if you translate something
then rotate it's different from rotates
and rotating something and then
translating it so for example if we take
this and rotate it off to the side and
then we move it out along Z it doesn't
move towards the camera per se that's
right it does in this case it moves
first camera exactly like I said it
would but if we reversed order commands
so that we rotate it first and then
translate it basically are picking your
angle Z according to the object is still
straight out in front of it even though
it's off to the side for us so now when
we move Z it moves along its own axis
so can you actually use this thing it's
great it's in all modern browsers it's
on mobile I haven't included opera here
but I assume it'll basically look
exactly like Chrome as soon as they're
done with that currently opera doesn't
support it but it's a niche thing
don't kill me if you work for opera it
also works on Mobile Safari and Chrome
for Android and iOS
for Android that means 3.0 and newer
there is the asterisk though ie10 has
not supported a property called
preserved 3d and I'm going to show why
this is so important that it basically
means that ie10 can't really even use
any of this stuff so preserve 3d is one
of only two options for the transform
style style the system basically says if
an item is nested beneath me in the Dom
how do i render it and the default is
flat which means ignore it if
something's transformed everything else
get below it gets the same transform so
the cascading transform over rights
everything below it what you might
expect would actually be the default is
preserved 3d reserve 2d says if I rotate
something and then I rotate it's
apparent the original transform is
maintained and it just removes inside of
it so this isn't in 3d or in ie10
which means it's you can only do the
motors the surface kind of animations in
ie10 so here's four elements and they
live in a parent element and I rotate
them all I move them to Center I rotate
them and I just changed their Z like I
did before to push them out to the edges
of this cube now if I start trying to
rotate it they collapse back down into a
single cube which doesn't make any sense
at all if we turn on preserved 3d
they'll maintain their internal
transform in addition to the parent
transform that's rotating the entire
object
alright so I'm gonna show off a couple
transitions common transitions on mobile
applications and show how to implement
them this is Michael receding layers
basically says in mobile like you eyes
we often have layers on top of each
other and they're revealed beneath them
we could just slide this top off off of
it but it's from behind so it actually
feels kind of nice to actually have it
moving forward towards you as if coming
from behind I've been watching our
development all week and on the plane
instead of cramming all right so here's
our animation tap on an object and it
moves off to the side and something
comes from behind it so how do we
implement that so here's a two up view
of what's actually going on we have two
layers and then top right there's an
overhead view of the scene so it'll help
you know when something's behind
something else so you can see that
they're beside each other right now
there's the magical perspective value
off in the corner
the first one is translated 100% of its
own self off to the right so it
basically takes it off screen and the
other one is not moving at all so if we
go ahead and run that animation again
all we're doing is translating the Z
negative 250 pixels back into the scene
and you can see it moves back also in
the overhead view so our default state
for this animation is when you come to
this it's placed behind it and shrunken
down already and then as it comes
forward we basically run a CSS
transition from the negative to 250
degree or negative to knit 50 pixel
translation of Z back to 0 where you
expect it to be
second super common animation especially
on iOS is the card flip so this demo has
been out for css3 forever and ever and
ever it's it's pretty representative of
a bunch of more complicated things
you'll do so I'll show you how to put
one of these together
so here's Tobias look in pert and we can
flip them around by interacting with
this and double-clicking so again we
have two objects we have a friend in the
back and we bring off side to side from
each other so you have to get an idea of
what's going on we rotate this it
rotates in place and rather than seeing
some unknown backside of this object we
actually see the mirror image so when we
move it put it back and we flip it on
backwards and put it behind itself it
ends up clipping over at the top of the
original images because they're both at
the same translation of Z equals zero so
the system doesn't know which one's
actually in front of the other what we
can do is use a property called back
phase visibility which basically tells
the object if we can see the back side
of it we actually want to see through it
so that way when this back face as you
can see is facing the other direction
it's invisible facing it from the front
direction now we can take the parent
object of both of these objects and we
can animate that and it'll move the
things inside of it
because we have reserved 3d so they both
move together this isn't two separate
animations you're just moving the parent
and running the CSS transition one thing
you might notice is we're actually
clipping at the top of this animation
which is pretty cool pretty tacky
alternatively if we wanted to avoid
clipping as we animate we can just move
our camera back or the object back
however you want to think about it
while the animation is running so in
this case we have a little CSS animation
that says very quickly we're going to
move this whole thing back to no pixels
and continue on rotating and because the
order we've given it it doesn't affect
how the rotation actually looks so goes
back rotates comes forward
third example our carousels so these are
used rather sparingly but you can see
that the animation at the top is
rotating on a cube so as it folds in it
looks like it has four sides and gives
it a nice little bit of depth
I'd say here's Jobe so we have two sides
job's on each and they rotate as if on a
cube so we want to inspect this scene
you can see what's actually going on
we've got a center point which is zero
zero zero
we've moved one the first frame closer
and we've rotated and move the second
one off to the side in a square to be
acute I've also kept some of the code
from the last slide where they move back
in space before continuing so it doesn't
clip so terribly but cubes are boring so
here's a Pentagon it's exact same except
for the math to make anagon is a little
different than to make a square so
there's some math in here that you can
review later it's pretty basic
it basically says I've given in number
of sides what is the position of the
rotation of each object so that they
meet each other and make a shape so in
this case we have five sides so the
angle between them is 360 divided by
five and the distance from the center
point so that they meet up nicely is
this nice trig function here's an
octagon it's pretty much the same thing
to plug in new values if you're using
this is all written and all the demos
are in SAS so I just ran through some
loops and ran some math you can do a
more complicated transition shape and
then here's the clipped version as
opposed to extending outside the frame
you may notice that as we got to a
larger number of sides the center point
has disappeared way up into the top to
maintain the relationship between them
all right so that's what you can do now
and I think it looks great on mobile
runs great on mobile so it's it's worth
including on your apps but I will talk
about the near future and things that
may not be entirely about CSS so as I
mentioned we worked on the Google
zeitgeist site which was actually
written in three.js
and it uses a component called the CSS
3d renderer to translate the system of
3gs which is a scene graph that lets you
move objects and nest them inside of
each other and what's that apply to CSS
and so all the JavaScript this giant
pile of JavaScript it outputs to just
you know transforms and perspectives and
other styles inside of your CSS
this should not be this is responsive
and it's responding correctly the screen
is too small
all right I'm gonna give up on that one
all right so basically what we had was a
2d map which would look kinda like a
Google map and you're staring at it
with items on it as you interact with
the scene it folds down to appear if
it's laying on a table and all the
Google map pins pop up from it another
thing we've done with the heavy use of
3d and CSS and also in three.js
is a Google map dive I'll show a short
little video of how that project
actually worked if the Wi-Fi cooperates
nice gonna RAM for 27 seconds all right
so the interesting thing about 3GS is
that you can render to multiple
renderers at the same time so it has a
canvas renderer which tries to draw a 3d
scene in a 2d canvas api it has the 3GS
that sorry the CSS renderer which takes
CSS objects and rotates in 3d and it
also does WebGL all at the same time so
we can do is you can combine these two
and stack them up because weird thing
about CSS 3d is that everything remains
interactive so if you want to have a 3d
scene you know objects on the cube or
something you can still select text on
them you can still interact with them
you can still do hover events you can do
all these great things but in WebGL
you're just drawing pixels basically and
doing UI in WebGL is super hard so you
can do a hybrid approach where you do
WebGL for all the fancy graphics and you
just CSS for all the UI 3GS matches them
up so they sit on top of each other and
they move like each other so this is the
map dive the bottom layer is the actual
Google map this is just chrome running
here nothing fancy
the foreground the video game portion is
all int in WebGL and 3j s so these are
3d models there's a camera chasing a
little man throughout the scene but it's
also it's confining the Google map which
was pure HTML with WebGL
and finally the New York one of the near
future items is a CSS custom filter so
CSS custom filters is a means of taking
the same kind of techniques and things
that we can do in WebGL and moving them
to CSS and to be called from CSS so
these filters are little C functions
that run on the GPU and they change the
positioning shape and colors of any
object they're run directly on GPU that
means they're super fast you can make it
I mean entire video games are made this
way currently there are only in chrome
and they're behind a dev flag but
there's a ton of possibilities sorry
so adobe has given us the CSS filter lab
which is a place where you can go play
with these animations so for example we
have a normal scene on the left hand
side we can apply a spherify CSS custom
filter at the bottom you can see how
that's applied so there's a vertex
shader there's a fragment shader these
are two little C functions one was
responsible for taking a flat plane of
content from HTML and wrapping it in a
sphere the other responsible for doing
things like colors which gives it the
shadow and the gradients across that you
can pass functions and numbers into
these shaders because they're in C there
they run on the graphics card you can't
inspect them they're hard to use but you
can pass variables in from your side and
you can run CSS transitions and CSS
animations on these values so you could
have a transition that rotates this
sphere
there's some other ones in here and
they're pretty great but the idea B is
basically being that we can in the near
future take existing content and
transform it in a 3d way without
breaking the content or interacting with
so well 3d CS has to let us do planes
and squares and simple rotations this
will actually let us put things on a
sphere you know light them on fire have
them burst into confetti all kinds of
crazy animations but we're gonna need
GLSL C programmers to actually empower
us through that unless everyone wants to
learn C it's made of a quick demo I
don't know how long how quickly this
will get into chrome but maybe my next
year we'll be able to do the Fancy Pants
page curl natively instead of as an
image
all right and that's actually the end
slides are up there on slides had that
URL all the code is in github it's all
run through middleman so you can get a
boot course in that really quick but
it's also compiled there if you want to
inspect any of the math and the sass
functions it's also there all right
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>