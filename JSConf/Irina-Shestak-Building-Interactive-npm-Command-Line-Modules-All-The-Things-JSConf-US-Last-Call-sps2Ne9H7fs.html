<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Irina Shestak: Building Interactive npm Command Line Modules -- All The Things - JSConf US Last Call | Coder Coacher - Coaching Coders</title><meta content="Irina Shestak: Building Interactive npm Command Line Modules -- All The Things - JSConf US Last Call - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Irina Shestak: Building Interactive npm Command Line Modules -- All The Things - JSConf US Last Call</b></h2><h5 class="post__date">2016-03-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sps2Ne9H7fs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">how was everybody's morning yeah Judy
does anybody need a stretch before we
start ok cool so my name is Serena I am
some people know me as era either way
whichever works for you i'm a developer
in all things javascript and you can
find me on their interwebs by the
following handles of things alright and
today i would like to talk about
building interactive and p.m.
command-line modules all the things and
let's move on so i want to talk about
some of the things that you know said
said some groundwork the command line
modules i right are a note and that's
basically what I'll be talking about but
obviously whatever I talk about doesn't
have to be specifically a node it could
be written in shell it could be applied
to shell scripts it could be a prior to
rubygems Python scripts and I will be
referring to the command line modules as
CLE modules for the rest of the
presentation and I like writing mine in
node because I can basically can do the
same thing in any other possible
language basically because of the
JavaScript community which is wonderful
to work with and there are just so many
tools available that I can plug in into
whatever i'm writing and i don't have to
rewrite them again and they're basically
built for my convenience and delight and
somebody's got no somebody's it's nice
to get by with a little help of your
friends basically the Beatles set it
right or it's nice to get by with a
little help of the tools that are
available to me all right so what's a
command line module because some people
might not know what that is essentially
it's a program that you interact with
inside your terminal or your command
line or command prompt the ones you're
most likely available are
mcdeere make directory it's actually a
command-line module that's built into
unix another one get in it also one that
you would work with that work the dip
and another one npm in it
um kind of three that you're familiar
with more or less so programming is very
similar to art for me and creative
process that requires you making
creative things building things with
your hands make making making art but
making it through a program and to make
a successful art piece we often must
play place limitations on ourselves to
actually get creative and otherwise
we're just stuck in like this paradox of
choice and 179 options of salad dressing
that Barry Schwartz talked about in his
stuck talk being kind of paralyzed by
choice and so we kind of sit there and
it's like what I have so many options
when I build my tool and what do I do
with myself and like how do I approach
this problem when there's no 179 ways of
solving it so when we're faced with the
task to do on the website of things of
our projects the sheer possibility kind
of becomes really limiting and really
stressful which is why it's so
interesting to work with command line
interface because you're limited to just
working with the command line and you're
limited to just one screen and you were
limited to colors and you're unable to
kind of work with any of the fancy
things that the web provides for you and
it's kind of refreshing and it gets you
to be to solve problems in the very
creative ways I think and given that you
are in a command line you can you can do
a bunch of different things with the
tools that you already have built in
within your applications at work or side
projects that you're working on so how
can we accomplish this on the command
line and keep that same awesome user
experience and I think this kind of
this google hang up so have they told
you about how we hook this up I should
tell me about how we hook this up we'll
take a pause so this computer is hooked
up to this project to this monitor that
I have my speaker notes on and then I am
google hangout in my presentation to
that computer and that computer now
projects it to the screen which is why
there is a lag don't you love the love
love Linux machines okay so um adesso
and as i was saying and awesome thing
for me to kind of accomplish that user
experience is to be able to do one thing
and one thing well as the unix sensei's
have mentioned before and you know it's
kind of that minimalist approach to
solving problems so basically the UNIX
philosophy and that's kind of the
solution to working with building those
interactive and user-friendly
command-line experiences and being able
to work with those same constraints that
the command line provides for you in
india of working with a browser so the
key here is actually the UNIX design
patterns that we may have done in school
or we may have never done in school or
we may have heard of or we may not have
heard of so I think to dive into this a
bit more will actually give us a little
bit a little bit more perspective it's
kind of there's there's maybe 10 or
eight to eight to ten different kind of
patterns you can implement when you work
with the unix-like command line I'm
going to talk about four that are sort
of the ones i've used quite frequently
that's filter cantrip source and ed
pattern and they're kind of you've used
them before in terms of you might have
used a tool that uses that or you might
have implemented it yourself I still
so filter is pretty awesome that's kind
of like a grep all it takes is it takes
an input and the greps or filter stuff
out of that input and gives you an
output another kind of thing is sort or
TR on the command line that you would
use with the Linux then kind of you pass
it in the argument you tell it where to
look for just like the usual grep works
and a way that I've done it before is I
built this this was my first command
line module and all it did was if the
dick was going to work all I did is it
took it took a string and just I would
put it a picture of actually output it I
would put it I'm not that slow of a
typewriter oh come on close the string
okay I would put it and fixture hahahaha
so this is like the very first kind of
module to work with and all it took is a
string and an argument to make the
wombat yellow and it outputted that
argument so kind of like that that
filter function takes an outfit modifies
and outputs it back and there are
obviously like way more complicated ways
that you can do this source is kind of a
similar it's a filter like function PS
is is a similar one so it's basically
takes no input and the output is based
on the startup condition or the current
conditions that you have so PS kind of
looks at whatever is happening right now
and that's kind of it or I guess another
example you could say is that when
you're dealing with node you could be
looking at the current directory and
saying like what's happening there and
then dealing with that as you pipe it to
a different kind of
unix pattern that you want to work with
can drip is is oh well canter okay so
may make directory is is a type of can
trip so what this does is it basically
it takes no arguments and all it does is
create something based on whatever
arguments you do and okay
hurry and then another example oh my god
I'm really sorry but okay and another
one that I've done was it takes so
basically takes one takes an argument
and does something based on whatever
your functions described I was recently
working with I was recently in Lebanon
to work on a data visualization project
for one of the human rights
organizations and I needed to write a
scraper that would basically take all of
their information in and I chose to make
it into your command line module and my
little contra bala did is told my
program to scan and it would scan the
particular page or scrape the particular
page that I need it and then it's not
very pure in terms of what the function
did and then it put it into the JSON
according to like the UNIX philosophies
technically you try to keep you out but
as pure as possible so turning it into
disans not very UNIX philosophy in terms
of that but basically just kind of use
give it one kind of input and then it
deals with the output on its own okay I
think we need a one bad break
if we can get the diff to work that is
we can't that's okay
and if i can get this site to change on
52
Wow okay no this is okay so the next
one's kind of the ED pattern sorry but
the lack of wombats so basically what a
ed does it takes a file and modifies the
output file so I was I'm working on
something called a command line texting
module so basically allows a user to
text within the command line and one of
the aspects of that project is for the
user to be able to set up their own
config files these are like totally
arbitrary numbers I'm putting in but the
idea is for the user to be able to add
their kind of information and then for
me to write that file and most of the
times the file already exists so we're
modifying that particular file and I'll
give an example a little later as I go
through the actual code so given those
particular patterns that we talked about
what might be the general guidelines for
writing interactive clays I think that's
I know what we want to talk about and as
I've been working with some of them over
the past couple of months I kind of came
up with a little list that I like to use
when I start on a new project I try to
work with giving options to users I
think it's super important to be able to
give a user as to what they want to
modify and how they want to work with a
particular with your program whether
it's commands or arguments and they
would be able to specify if you never
know whether users used your program
before if they've ever used command-line
modules before so they might not know
the particular patterns of guitar in PM
use which are very similar kind of
verbose options help I mean you don't
have to reinvent the wheel there's a
bunch of them that already parse the
options for you that you will be able to
kind of work with and
set them up and there is a real life
example of very tiny and very dark that
I worked with before to set up the
command line texting module so basically
i have i have three commands that the
modules the module uses one start one is
config and one is add and two of them
kind of have their options so if a user
goes to start the conversation they can
add different options of who they want
to start the conversation with so that's
the option with to the command start or
if they're just going through config I
work with the config option and then
parse that option later on and I used
yards but I mean they're all kind of the
same in that regard mainly yards because
their documentation Xin pirate speak so
that's kind of cool I like to set up
some defaults for argument parsing
because that's that's really neat and
sometimes with especially config files
you kind of sometimes you set those up
already Andy the user doesn't have to
modify them afterwards so I sometimes
would set that up already and I don't
have to worry about it and it's nice and
neat in terms of that super important
one is
log your errors it's it's really it's
really really crucial because program
could be terminated the user doesn't
know what happens and then it just kind
of works like that and the program
explodes so it's really important to
kind of walk your user user through even
if it's with errors or just without
errors again you never know if the users
used your program before or so used a
command line program before in general
and just kind of taking them by the hand
and saying okay we're going to do this
now and we're going to do this now just
like you would in the browser you would
in the command line it's enough
exploding in the face so we talked about
for kind of different unix design
patterns and kind of combining them
together is pretty neat because then you
are able to kind of work with different
concepts and actually progress your
program a little further so I think that
kind of increases the possibilities of
different things you could do so the
possibilities are pretty much endless at
that point so with the fact that you can
pretty much build anything work with
your existing API and get your
co-workers to handle certain things via
the command line module you could build
a node module that has a command line
extension so for example you're just
building some sort of abstraction and
you know your your program is just
supposed to use that but what if you
abstract certain things out and just
write some option parsing and then you
are able to make it a command line
extension and a cron job because I mean
you could write shell scripts but I mean
notes so much more fun and it's
asynchronous so why not write in a note
and then just make it a cron job and I
mean you can build all three together
and that's kind of fun to use tools I
think that's pretty important because
note has so many awesome tools you could
use there is FS everybody or so many
people use FSI
to be able to get things done to write a
file read a file and things like that
and then again we can pipe it to the
existing patterns we've already built
out and if the tools are there for you
you might as well use them already I'm
exploit the tools you have like doing
your laundry and stuff that was a long
back brake and the one of the one of the
kind of really important things is
building your tools with empathy it's
not everybody who uses the product that
you've built out has a mac for example
so testing on different machines is
super important as a linux user that
sometimes i get left out not everybody's
used a command-line product before it's
really important to be able to kind of
again guide them through the
presentation what would you do if you
were in their shoes and you know being
able to kind of work even if it's just
built out for your co-workers and not
for the open source community in general
you should still be able to kind of
build it out so it's not just for your
own use and you kind of look remember
and if you think about it if you open up
whatever you've written three or four
months ago you will need not necessarily
remember which kind of options you've
set out to your program to have if they
weren't verbose and it just said m and
am i doing for time I thought I kind of
rushed through this but I now that I
have a little bit more time I can show
you one of the projects that I'm working
on right now which hopefully i can with
a screen casting thing on I worked with
the three so on line 13 it was number
one that started with start and what
that would do is just start a server for
the text messaging to go through and and
26 would set up the config which you can
probably barely see
and then that would kind of launch my
the prototype that I have for the config
file and work through the particular
arguments of the user parses and add
would add a particular user to the to
their already existing config file if
you wanted to text with other people I
don't think I can zoom in so i won't go
into into too much detail because that's
probably just really painful on the eye
I'll end it here sorry about the
technical difficulties I think thank you
so much for having me this was a
pleasure and again sorry for the
technical difficulties</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>