<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[CSSconf.eu 2013] Chris Eppstein - The Mind-blowing Power of Sass 3.3 | Coder Coacher - Coaching Coders</title><meta content="[CSSconf.eu 2013] Chris Eppstein - The Mind-blowing Power of Sass 3.3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[CSSconf.eu 2013] Chris Eppstein - The Mind-blowing Power of Sass 3.3</b></h2><h5 class="post__date">2013-09-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-ZJeOJGazgE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you very much can hear me okay all
right uh Wow
this has been an amazing conference
hasn't it so many beautiful slides I'm
like I think my mind's been blown so
many times today I can't even tell you
so and I'm gonna get to show you some
really amazing texts nothing quite as
pretty as what we've seen coming up but
hopefully you'll see the beauty in the
structure I hope so yeah
Who am I am Chris Epstein I'm one of the
I'm the creator of compass I'm SAS core
developer I'm an engineer at LinkedIn
they recently hired me to help them make
SAS better so thanks to them for all the
great money and I'm a husband and a
father that's my beautiful family there
with me so this is an interactive slide
deck and I know that we haven't been too
talkative during presentations but if I
say something and it's totally confusing
please just like throw your hand up in
the air and I'll try to clarify in line
because otherwise we might get lost and
I'm gonna to talk quite a bit about
advanced stuff that's coming in SAS and
it's not there's not introductory stuff
so if you haven't done SAS before you
might be lost I'm sorry
so speaking of people who have worked
with SAS can I just by a show of hands
like if you've used a preprocessor at
all just put your hands up
great keep your hands up if you don't
use SAS but but you use a preprocessor
okay so are you the you're less than
yeah all right I have something for you
read that and get back to me so that's
that's my new book me and a couple other
guys wrote it together and it's all
about fasten campus it speaks for itself
so what's coming out in Fast 3 3 which
we don't have dates that we deliver
things on but I'm thinking in the next
month or two there's a really awesome
feature called source maps some new
amazing string functions with a new data
structure called a map we're getting a
bunch of new meta capabilities for SAS
script we're bringing the ampersand from
The Selecter into SAS script I'll show
you what that's all about and we're
changing how variable scoping works so
let's get into source Maps so the the
problem if you've used a preprocessor
which looks like many of you have now is
when you went into debug it you're like
where is it
like and SAS had this feature where you
could turn on line numbers and before
each selector you'd be able to like find
the line number of where the selector
was and you could probably trace it back
through there but after a while that
gets a little tedious too and so the
great people that Google have developed
this proposed standard I guess for
source maps that allows you to create a
file that's generated by this
preprocessor that tells the browser how
to get from the generated source project
that the browser's reading to the real
source and then our great dev tools can
show us the real get us to the real
source location instead of keeping us in
the generated content all right but it's
not it's not so easy to set up so I'm
gonna really quickly walk you guys
through the steps here that are required
first you have to install Chrome Canary
which is Google's like advanced chrome
version and then you need to go to the
special URL Chrome colon slash slash
Flags
pound enable dev tools experiments and
click that little enable thing right
there and then you'll have experiments
and then your browser will restart
afterwards in your corner of your
browser you gotta just click this little
wheel that'll bring up a window you're
gonna go to the experiments tab and turn
on fast stylesheet debugging not done
yet we have to install the new version
assess so gem install sass with the dash
dash pre option will bring in the latest
version instead and then we're gonna
compile with a new option called source
map and afterwards you'll get two files
per sass file one is a CSS file and one
is a map file which is actually a JSON
file that's the what's inside and this
was a capability that was contributed to
sass from the google chrome team which
was really awesome for them to help us
get that up and running quickly but
you're not done yet so now there's this
concept called a workspace and so you'll
have to go to a workspace in the chrome
dev tools click add folder and you're
gonna what you're gonna do is you're
gonna select your project folder and
it'll say that the dev tools wants to
access it and you'll say allow you're
still not done
because so that's what Google wants to
what Chrome wants to do is basically
associate an output file on disk to the
output file that's being served to it
from the web browser and then it'll kind
of from that point once one file on disk
has been found that map's to where it is
on the browser then chrome will be able
to be like AHA I know the structure and
so you'll you'll just pick really go to
you go to sources go to CSS and pick
basically any CSS file and then say map
to file system resource and from there
it'll give you three options of things
that it thinks are probably the right
thing and you might be tempted to pick
the s CSS file because that's what you
want to map it to that would be wrong
instead you're gonna pick the CSS file
because you want to associate the served
file to the actual file on disk now
you're ready so I had a small problem
with screen resolution so have a big gap
here I'm sorry but basically what you're
going to get now is a source map and so
what it'll output of a source map looks
kind of like this there's a bunch of
gobbledygook under this mappings heading
and this is a small stylesheet so it's
pretty small but this gets pretty crazy
pretty fast interrupts
be possible to use a 8 attribute on the
CSS file which links quotes with the
saucepot rather than go through all of
this because we're not looking for just
a file level mapping sorry the question
was why don't we just put a comment in
the file and say where to go to for the
file that it came from and that would be
great but it's not enough information
it's not enough to know that one
selector is here and there what files
are we actually want to know what a
character by character basis where that
came from and I'm going to show you how
that all works in a second and so you
get this cool stuff so let's just like
inspect an element here and you'll see
that right here in my inspector this
this slide that I've selected comes from
this fade s CSS file and if I click on
that it takes me right into the s CSS
file and highlights the line that it was
on which is pretty awesome right there I
can just like see it but it's actually
better than that so let me show you
something slightly different amount
select something in my generated content
here alright so the background color
here is the start green and let's just
say that we want to change the
background color to red so now we can
pick our source file and it takes us
over here we like okay this is our
background color it actually gets better
than that let me show you this this is
awesome if I press the command button in
Mac I don't know what it is in Windows
then things start to highlight and
actually now I can go to this directly
to where like the color is and so now it
takes me to actually just got generated
at this color right here which I can say
oh that was passed to this mixin which
was passed this BG color okay so this is
the color so actually I want this to be
red and now I'm not gonna
I'm gonna actually save this locally in
Chrome and I need to run a watcher see
where does it no not that one
static where does it go oh my apologies
I'm gonna just skip this part but
basically when you save if you're
running a washer it'll compile it on the
fly and then it'll automatically reload
this in your browser and if I had more
than 30 minutes with this talk I
wouldn't finish debugging this but I'm
gonna move on and so then what we see is
in real time while editing in our
stylesheet in our browser styles are
updating just like if you've used live
reload just like that and it's just a
super smooth workflow and this is this
is the combination of the workspace
concept plus the source mappings and it
all just connects end to end and it's a
really nice way to develop so that is
source Maps so we added a bunch of new
string manipulation functions so I just
wanted to walk you guys through some of
the cool things you can do with strings
now so for instance you can check if a
string is quoted some strings with
quotes will return true you can ask for
the length of a string with sure length
so that's a 27 characters long you can
look for a substring within a string now
using the string index function so we
found that at character 13 and then you
can start to compose those so that you
can do things like inserting at just the
location you're looking for so here what
we're gonna do is insert Chris into the
middle of of our string just before the
word dole door so there we go that comes
out there and you can also do things
like pick out the first word so we're
gonna slice between the beginning of the
string slice function is just to extract
a substring and then we'll look for the
first space and that'll be the end index
we'll have to remove one because we
don't want to actually include that
space and so we get the first word in
that string is lorem we provide
uppercase functions and lowercase
functions to manipulate the strings in
that way as well so standard stuff you'd
expect from any programming language we
got to it by 3/3 I think we're doing
okay that was joke the other thing in
CSS is you have identifier x' but in
sass they're kind they're kind of like a
string so all of the same string
functions are gonna work on them except
it won't return quoted true for
identifiers it'll return false and you
can uppercase lowercase you can do
inserts so here we're inserting the word
new and so the question might be why do
I need all this stuff what am I gonna do
with it and I think probably not for not
your average style sheet you're gonna
need these sorts of functions but if
you're building a framework that has
conventions or or and like it wants to
append things at the end or in the
middle of stuff or maybe you want to
convert from dash to camelcase then you
could write that sort of function so I
did so here I wrote a capitalized
function using these building blocks and
what it does is it takes in a string and
it converts the first character to be
uppercase that's annoying so here I'm
capitalizing the word something and it
comes out capitalized the other thing
that I wrote using that is this camel
eyes function so we can take in
something that was dashed and produce
something that is camel cased and so if
maybe your web framework requires you to
use camel case classes but in writing
your CSS you find dashes to be more
aesthetic than you could do something
like this to keep things seamless
and aesthetically pleasing so the the
code for this is not a trivial but it's
here and it works just fine
and I'm not going to walk you through it
but I will I will publish these slides
to a Heroku or some other place that I
can get it running soon requires the
custom build of sass and a bunch of
other things so it's kind of complicated
and they didn't get to it yet but it's a
it's all working very nicely and it
shows how you can use these string
functions to build more powerful things
that can meet your own needs and if we
find that there are really common things
that people are building over and over
again we'll try to move those into the
core we're not sure we want to keep
things kind of small until we see the
demand questions about string functions
cool alright so strings are pretty
pretty boring kind of used to that
another feature that you're probably
used to in most languages is a map or an
associative array and CSS being about
associating things to other things so
rules to selectors or values to
properties it makes sense that we would
need to have some sort of Association
like structure and so we've decided to
add one and so here we can see a basic
map the syntax is basically you have to
have parentheses and then it's comma
separated pairs that are separated by a
colon the key can be anything it doesn't
have to be a string here like you could
use two pics can be your value or it can
be a color etc from there you can now
have a map and you can use that map to
store information you can pass that
around and so here's an example of me
building like a theme defining some
basic structures of that theme and then
if I want to in
hear it from that theme and make a new
better theme I can use the map merge
function to add more properties to the
base theme and then I can basically
access the data from inside the map and
go through it so here I'm able to read
out the keys so you can see they come
out comma separated I can get out the
values I can use the map get function to
just retrieve a single key from there
that the value associated with a certain
key if it's not there you just get the
word you just get null have you guys
seen I think what people don't know
about know if you don't have null if you
don't have it you get null and then SAS
when it gets when the property gets
assigned then no value just drops that
declaration which is actually pretty
cool so that's why this background color
is just disappearing values that contain
lists sure the because you're worried
about the comma confusing it so what you
do is just wrap that in parentheses and
and it'll be fine so the question was
basically if it the value was font Comic
Sans you know is that fee no now it's
kind of confused so what you would do is
just throw in some extra parentheses 2d
confuse SAS all right
these maps also work with iteration so
if you wanted to just see everything
that's there you could do at each key
comma value in theme
and then we would see
nothing I know I there we go so here you
can see if you just wanted to like print
out everything and and so you could
write a mixin that basically now
converts your map into a rule set so
there's some really interesting things
that you can do now again this is a
feature I think that the frameworks are
going to find more useful but we get a
lot of people asking us questions about
like they want to take a variable and
then interpolate it so they'll say like
can I just do like theme so they have
their theme name somewhere and then then
they have something like and they'll
want to do this to get to get the value
like it and create an association that
way and we just felt this was ugly and
unreadable and a little confusing and so
maps are basically our answer to the
request for variable interpolation
let's get that example for right now any
more questions about maps all right
moving on
yes
so here the map has key function returns
false because nope doesn't exist but
basecolor does so now it returns true
and that's pretty useful too I think I
use that actually no later example is
there limits to how deep the map merging
can go so basically every time you merge
a map you get a new map so in in fast
every data type is every piece of data
is immutable so we always just make a
copy and give you a copy back so there's
no limit to how many merges but if you
did a lot you're gonna probably make a
lot of garbage along the way so some
performance aspect to think about you
can embed Maps within other maps as well
like nested as a value and you just
would just put more parentheses and just
repeat the next map there all right
so meta scripting again another feature
that the framework developers have been
asking for over and over again probably
you're not gonna need them in your style
sheets but the goal is so if we give
great tools to the framework makers the
framework makers give you amazing tools
that make your life even better so
here's the the call function so if
there's a function defined either you've
defined it or Sasa's defined it or even
CSS is defined it you can pass that
function name to call and it will get
invoked and so by this we can now say
hey like what is the function like user
of my framework what is the function
that you need that's gonna tell me how
to compute colors safer for theming and
you give it that that the the user space
code can pass the framework the the name
of the function and it can call it for
you whenever it needs to know that
information so we can do a lot of
inversion of control now and that's
super handy so here's an example that I
made this kind of doing that
so basically this this theme is hoping
for a for a function that tells it how
to compute colors and we're able to pass
in the background function is called my
theme background and I've defined it
right here and all it does is just
lighten the color a little bit and then
the theme when it's doing all of its
hard work to set things up ends up
calling that function for us and then we
get a lighter color of red so basically
it took the base color here and
lightened it for us if it had been blue
it'd get different output so it should
be some neat stuff that comes our way
from from this the other meta stuff that
we are added is the ability to check
existence of various things within your
stylesheet so for instance we can now
check if a function exists so ask if
some function named in begin exists so
that will return true here
lightin is built in by sass that's gonna
return true we can ask if a mixin exists
and because it was defined here we will
get the true from there we can check
about global variables and if you've
defined a local than you then you can
just check if the normal variable exists
so there's a bunch of of stuff that will
allow inspection of kind of the context
and avoid making mistakes and where this
gets really handy is in upgrading
frameworks from version to version
so somebody adds a new sweet feature but
they want to support an older version of
the same library and so now what they
can do is kind of figure out what's
going on by saying does that does that
mix it even exists and if not I'm gonna
do something different here let's
question
right so these will just return true or
false but then you can combine these
with an if statement if you want to like
do something on the other side so
there's if you guys don't know there's
two kinds of if statements in SAS
there's a block level if that's at if
there's also an inline level if which
maybe that's on the next page no I was a
show to you real quick so it used to be
in SAS that if you wrote and if an if
function you would get an error if one
of the conditions was was basically
invalid but oftentimes you wanted to
branch on the condition because it would
have been invalid if you just but don't
evaluate that and that was the case for
the block level if statement but for the
function level if statement that wasn't
true so we fixed that so we can do this
like
so if true and then the true value will
be green and the false value will be ten
divided by zero so we get green but if
we change this to false it will assess
you're so smart know what's something
else that's invalid let's do divided by
nothing that exists all right so that
this this variable doesn't exist but if
we change this to true we get something
that works because we didn't even
evaluate the branch condition it's what
you'd expect from an if statement we're
getting there all right so that's meta
scripting now the feature that I have
been dying for for so long and this is
one that you guys are gonna really find
a lot of value and I think and this the
ability to move the parent selector into
SAS script so basically the idea is you
like you've been able to use ampersand
inside selectors you know that works
fine or you could do whatever or if it's
a class etc and and so that works great
but the second you need to kind of do
some manipulation or you wanna do
something fancy all of a sudden you
start to see the limitations of this as
being a proper selector abstraction and
not something you can fiddle with and in
particular the way people really wanted
to do this was by doing names doing like
modules like BEM style or smack style or
oo CSS style of modules and so this is
an example of how you will define a
module here so this is just my module
what this really appears to be in sass
is actually an element name there's no
such element
and so this gets passed in and we're
using interpolation to generate a
selector and and so the output comes out
very nicely with the kind of more Oh CSS
friendly style class names that are
named spaced instead of adding more
specificity through context where
sniffle
so that's obviously really huge but and
so like people wanted the ability to
basically just to do this but we had a
really specific reason of to do that
which is it what it allows you to make
invalid selectors and we really wanted
to have a foolproof way of using the
ampersand an interpolation is basically
you saying hey sass don't worry I got
this I know what I'm doing from here we
can go and do more crazy things and we
love to find a solution to a fairly
simple problem that then pays off in
these other ways to do things that are
even more crazy and mind-blowing so I
made a little Nixon called inject parent
and so what this mixin is going to do is
it's gonna cuz ampersand only works you
can like add something to the start of
your selector you can add something to
the end but you're kind of that's what
you got so now we want to be able to say
go up one selector component and insert
something right there and so now we can
do that so inject parent is a mixin that
uses the content directive to place its
content and basically allows us to go in
using list manipulation functions and
things like this so the selector gets
returned to you as a comma delimited
list of space separated of lists and the
components in the space separated lists
are strings that are unquoted that are
basically your class names or if they're
if you have like other selector
combinators they'll be they'll be there
too as their own component and so we're
gonna put that all together down here so
this was kind of like the old way and
you you were frustrated you couldn't
really make it work
and in the new way what we're adding
here is we're gonna inject the parent
for the main the main element into the
selector that's in our current context
and so the output we get is basically
this main gets injected just into the
middle of the selector yay and then you
know starting to see how the mixin
content from sas3 to combined with now
new selector manipulation it's all
starting to pay some really awesome
dividends in terms of what we can do
here so here's another interesting thing
for people who love specificity a person
wrote in to the fast issue tracker
they're like I really want to do this
thing where I want to double up my class
name to add just a little bit of
specificity I don't want to add
important that's too much
I just want to dink it up a tad I'm like
okay we can do that now and so this is a
really crazy function I wrote that can
find the last class in a selector so
this is a function that goes through
your selector finds the last class this
is a function I think I'm gonna add to
sass cuz I have to keep defining it in
all these examples it just cuts the list
up into pieces
and then we're gonna define a mixin that
does that increases the specificity so
basically this is gonna go it's gonna
find the last class it's gonna say when
it finds it I'm gonna double it up and
then keep going so let me show you how
this would work so here we have this
selector increased me please and in the
output we get please please but if the
last component is not a class it
wouldn't be okay to do placate the the
element itself because it's not an
element and so instead what we do is we
still refining the last class there and
bumping that up so some really cool
things we can do now in selectors go
crazy
what is what no I don't know who does
this but you can that's the point
um let's find some really cool things
that are that make sense and and do that
more than this maybe so I didn't really
talk about it but you might have been
seeing this thing called at root
floating around so let me just real
quickly describe kind of why we have to
do that basically once the ampersand
goes into SAS script we don't know like
what are you gonna do with that we we
kind of knew not to repeat the context
when you put it in your selector but now
it's in script it could have gotten
passed to a mixin maybe it got ignored
maybe it didn't and so we couldn't find
the good heuristic so we decided that
you're gonna have to tell us when you
want your context to be doubled up so if
you don't have an app root let me just
show you what it would happen
let's keep these you get the context
over again so at root basically says
take this selector and place it at the
root of the document and ignore my
context but keep my context available in
terms of the the the parent reference
and so on now I'm basically controlling
my context and you can use this to
completely bounce out of your current
context you don't have to use the
selector parent anymore you can just
decide your deeply nested in something
and it makes sense for you to like pop
up to the main level now make a new
selector at the top level go back down
so there's some interesting things that
happen here and we we think that a tree
will have value beyond just there and
one way that it's gonna pay dividends
though this isn't implemented just yet
is you're going to be able to unscoped
or self from a media block so I don't
know if you guys have ever tried to do
an extend within that media block and
gotten this little message telling you
that you were making a sin and you've
made the SAS gods angry did I just call
myself a guidance yeah so you can't do
that it doesn't make sense we don't know
how to apply extend across your entire
document for a runtime value so we've
been slapping people's hands but it fits
makes sense
you can now basically pop out of your
media context do your extend and then
you'll be right back into your media
context and so the the syntax for that
is going to be basically a true like
without media and then anything that's
inside there will not get this media
this will also work if you say all it'll
like bounce you out of all like runtime
directives so document supports things
like that so that's going to work soon
almost ready so we're changing variable
scoping I'm gonna say something here can
we keep it between us so this is
something less got right they scoped
variables to their block and if you
defined a variable that was defined
elsewhere it didn't change the value
outside that block and we decided that
you wanted to change the global value
and I think that was bad so starting in
3 3 that were deprecating the ability to
assign to a global value from within a
local scope unless you provide this bang
global modifier at the end of your
assignment then the deprecation warnings
will go away in the next release we will
change this behavior in entirety and
that is what I have for you guys today
I'd like to make a quick note two things
doing this makes it takes a whole
community like Nathan Weizenbaum that
works with me on the core team is
brilliant and he doesn't get enough
credit so if you guys can shoot a
message to him at next 3 on Twitter and
just tell him he's awesome
it would probably cheer him up at
LinkedIn we're hiring SAS developers
would love it if if you guys are looking
for a job and compass is is actually
charity wear which means that if you use
it and love it we ask that you make a
donation to the UM DF org which is
trying to find a cure for the disease
that's killing my dad so I'd appreciate
that
you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>