<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Kushagra Gour: 10 Commandments for Efficient CSS Architecture - CSSConf.Asia 2014 | Coder Coacher - Coaching Coders</title><meta content="Kushagra Gour: 10 Commandments for Efficient CSS Architecture - CSSConf.Asia 2014 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Kushagra Gour: 10 Commandments for Efficient CSS Architecture - CSSConf.Asia 2014</b></h2><h5 class="post__date">2015-02-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FYcu-wWrNqo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">but title of my talk is basically ten
Commandant's for efficiency access
architecture and you might have noticed
the star on the ten and that says
condition supply which will no you know
that soon why it's there so let me start
by introducing myself my name is
cachaça record and I'm if known I am
better known as chen changwu on web and
i'm from india now just to clarify india
is not just the land of snakes and
tigers we recently started writing CSS
also okay I'm a front-end developer by
it's my day job and I work at a
wonderful startup called wing if I
so we basically develop an AV testing
tool called visual website optimizer
that I work on and in case you have
already heard about me it is probably
due to my open source projects oh one of
which is a hindered CSS it basically of
CSS - tape library and the second one is
epistle art that lets you create pixel
art using CSS alright so what is this
talk going to be about so I've been
doing front-end stuff for almost three
years now and like we all do I have
learnt a lot about issues we face in CSS
and many solutions that we can use to
prevent them and avoid them so this is
going to be about those CSS stuff that I
would like to share with you from
experience and the target of this talk
is to basically help us know certain
things which make the CSS architecture
efficient and by efficient I mean two
things over here so first your CSS will
be easy it should be easy to understand
for you as well as anyone on new joining
on your project and also it should be
easy to extend in future
so no more kale in style sprinkling
which generally tends to be in our apps
also I'm a first-time speaker at a
conference and that is such a big
conference and it's quite hot and I'm
not really good at speaking and making
presentations so I
and basically added a game for some
reason because I'm good at making games
and this is a game which we can all play
together at the end of the talk
all right so commandment number one it
says thy height shall remain greater
than thy files as at all times
it simply means keep your file size is
small but why why do we need to make a
file size is small so first thing it
keep helps to keep your code modular and
more modular code basically means
whenever need you need to add something
or you need to change something you can
quickly search for it
added you can search for the target spot
where in the code you actually need to
place your CSS because modularity will
easily enable you to figure out which
file or which module actually needs to
be changed so things become quite fast
in
extensibility wise and what do we need
to do it's a simple rule keep dividing
and refactoring your files as and when
they get too big so you just need to
stop at points in your development and
see what could be separated out into
separate modules and just keep on doing
it periodically so let's take a simple
scenario when you you're starting a
slight side project on the first day of
Christmas and obviously you start with a
single CSS file style of CSS as it is
commonly known for for a single file and
you pay for your CSS in just a single
file right and you quickly recognize and
apply the rule that my style of CSS is
getting bigger and I need to refactor it
and separate it out into modules so on
the fourth day of Christmas you realize
that and this is a common scenario which
applies to almost every app so you could
separate your styled or CSS file into
say four separate files or modules so
base could have styles pertaining to
tags anchor tags and other tags which
need to have a basic style then there
could be a helper store CSS which is
basically helpers like for helper for
floating elements left and right or say
clearing throats then there could be a
file called components or CS
which could carry your components like
buttons dropdowns tabs and all then
there could be an optional theme dot CSS
let's say you have your site which
renders in a blue team and also there is
a red team so maybe you could have team
dogs as well and if you are having a
view using a preprocessor or like sass
you might as well have a file called
mixing dot a CSS which has a mixed sense
for them on the area of Christmas you
realize that your components orders here
CSS again got bigger it has a lot of
components in it so again you apply the
same rule you basically divided and
refactor into separate modules so your
component or CSS now can become a folder
basically components and it can have
files like buttons dot CSS drop downs or
CSS basically every component divided
into a separate file and if you follow
this approach most probably you will be
happy on the twelfth day of Christmas ok
commandment number two the code config
shall remain at one place and this
basically means use variables now this
is related to a pre process of I mean a
preprocessor because this won't work in
CSS currently but the good news is that
variables are arriving in C native CSS
in future as well so you can always use
that in CSS also so let's take a sample
layout so this is a very common layout
into apps today so basically I have a
header sidebar and content so how does
something that spans full width and it
has a height of 50 pixel then you have a
sidebar that spans the complete height
and a width fixed width and it's
obviously starting from the bottom of
header then there is content which is
below the header and alongside the
sidebar now if you notice here there are
too many magic numbers and these are ha
coded numbers which should be avoided
and we will see why so consider this
approach what basically I have done is
I've separated those hard-coded magic
numbers into separate into variables
right so I have a variable called head
header height which is 50 pixels and a
sidebar with so what I'm doing right now
is instead of using those hard-coded
numbers in my code I'm actually using
those variables so why is this better
first of all it's less error-prone so we
have we have minimized the chance of
making mistakes so if I was using those
hard-coded numbers I might at some place
use wrong values instead of 10 I might
use 20 or so likewise so we have
potentially minimize see error here and
the second thing is easy extensibility
in future while extensibility because
let's say this probably applies to early
stages of development where you need to
tweak things very quickly and see how it
goes so with this approach you can
basically treat the variables instead of
modifying the values at every place in
the code and you can very quickly see
how the result is and decide on the
values and fix on them okay commandment
number three
thou shalt believe in abstractions this
simply means component abstraction okay
so let's take this example okay you have
a game and you are developing this in
HTML file just because you can nowadays
and you're basically styling the
complete screen of the game and
specifically the HUD elements you see so
let's take the example of the one you
see at the bottom left and the top right
so your code might look probably look
like this you have a class for these
stats hot element called
let's say it's a class called hot stats
so it's a fixed position element of the
screen and it has some opacity and
filter - just to give it a feel now we
see we position it using the bottom
bottom and left similarly for the map
hot element so it's gonna be same it's a
fixed position element the same
filtering and obviously the top and
right properties - just to position it
now if you notice here the first three
properties in both the rules are exactly
the same and this is repetition and we
all know repetition is bad it's a common
issue of common reason for issues that
you face in your applications so we
should not repeat it so this is a
different approach what we have done
here is we have separated out those
three properties into a separate class
and it's called HUD element and now HUD
stats and Hart map which were initial
assess are just left with the
positioning styles and actually these
styles which were different for those
classes and the usage is simple so we
have a HTML element now the thing is
that both the classes need to be applied
so that we get these tiles from both the
classes so this can be improved for you
let's say we are using a preprocessor so
there's something called specifically
inside is something called placeholders
so the difference in from the previous
slide is that we now define a
placeholder instead of a class which
basically defines are those properties
which are common in those hard elements
and instead of basically using that
placeholder we extend our current
classes with that right so what it
enables is basically hard stats and
heart map classes are now extended with
the header element placeholders and now
I can simply use the individual class in
my HTML I don't have to repeat the two
classes so no repetition here clean code
less transfers of error commandment
number four thou shalt speed a spread
peace and stop tie selectors from
fighting any cases for this keeps vector
strength flow
so selectors have strengths and they do
fight we have all seen this in Christian
stock so selectors have something called
as specificity which determines the
strength of those selectors and they do
conflict with each other let's take a
simple example let's say we have a
component of tabs in an app and for some
reason a developer styled it using depth
or taps and it was being used in the
HTML we simply put the class now another
developer joining the project and he he
was required to make a variation of the
tab component which instead of having a
full width which initial class has it
was required to have 1/2 with 50% width
so he went ahead and made a separate
class for that tabs half and gave it a
property with 50% and this was meant to
be used with along with the tabs class
so this is a simple common usage how he
would go about have the tabs class on
the element and along with it he has the
tabs half now this won't work and the
reason is simple
the strength of the first selector which
is div dot tabs is basically greater
than the selector define after it which
is tabs half and the reason is because
of concatenation so concatenation of the
actual tag with the class increases the
strength and hence the second class is
not able to override the properties of
first class so things can get a lot
Messier from here the probable solution
is you again prefix your class name with
the div tag just to make your selectors
equal with the first one and able to
override the first one right or you
could go the better way not important
plus we have another problem now the
tabs can only be used on the width along
with a div tag so it's it is fine but
it's an unnecessary restriction you have
put on your selector that even in future
if you decide to have the tab class on
some other element this won't work it
could break so the solution is simple
here there was no need to concatenate
the tab component the cap class but we
could simply have dot tabs and this
would be solved so the key thing is just
keep your selectors no don't put
unnecessary nesting don't put
unnecessary concatenation because that
would just make things worse okay / -
come on another five thou shalt treat
your classes as their own children name
them with equal love which is basically
a naming convention
okay so naming is very important in CSS
I feel and when I say it's important in
CSS I actually mean not in CSS itself
but in comparison to other languages
because if you see in other languages if
your variable names are not correct they
don't makes sense they're not I mean
they are not good
nothing would break your code will still
function everything will work fine but
CSS has some bad things in it like the
earlier commandment we saw a selectors
friends vector specificity so these
things are something which can be
avoided if we incorporate a very good
naming system in our CSS and that is why
I say it is very important in CSS so BEM
is something I'm going to talk about as
a naming convention so then basically is
a methodology to not to name things but
instead to separate out components from
your app it basically supports component
abstraction so M stands for block
element and modifier so what it says
that in your app you most probably have
things which are independent
independent components things which
could be separated out into modules and
could be used anywhere independently so
BEM can say a terms them as block so
block is basically a component you have
in your app then there is something
called element so element is sub parts
of your component a component might have
several things which eventually build up
2d components so those are called
elements then finally this modifier the
component might have variations which
BEM terms as modifier so this is the
methodology part of them but this is
augmented with a naming convention as
well so the naming convention I have
shown here is basically a variation of
actual thing which was developed at
Yandex so it's a variation by Nicholas
and Harry Roberts so what we translate
this into is a block is always a single
class rule number one so let us say we
have a class called component so block
is a component then there's an element
class so element class according to this
rule is basically prefect sing with the
actual component name and double
underscores and lastly we have the
modifier which is whose name we get by
prefixing component name and then double
hyphens so this is the naming convention
we follow for all the three elements
three parts of them now let's see how
this applies actually and why it's good
so let's take an example of a component
because then basically works on
component we have a slider an app if
what if you were not to use BEM this was
deep probably the CSS you would have
written so we have the slider class
which has a position relative then we
have two things residing in this slider
so firstly this slider track so be
writer C says when the side will track
in the side of slider
they give it a background and similarly
for the knob right and you might as well
have a variation of this slider
variation in which we have an extra
input to basically
and really let the user manually change
the values so forth for that we might
have a selector like this so if you see
here we have lots of so-called the bad
things in CSS in our selectors so the
first first selector is fine but the
second selector has nesting in it the
third as well and the last one is quite
variable so we have concatenation along
with nesting so that is really bad so
let's apply them on this example so if
you were to use the same name naming
conventions we just saw this would
actually translate into the component
class being the same Sider the slider
track would be simply named as the
component name underscore underscore the
actual element so these are the elements
track and not the slider not track and
slider knob then the variation so
variation would actually be styled like
slider - - with input and whenever this
variation class is basically on a
component we need to actually display
the slider input which is again an
element of a component so if you notice
here first vector remains the same but
the second and third selector we have
managed to remove the nesting so they
are single classes now much better much
uniform and less specific and even in
the last one we have the nesting is
still there but concatenation has been
removed much better than the previous
one so this is how BEM can be used to
actually keep your selectors low the
target is to keep this every selector as
just one class wherever it works okay
commandment number six thou shalt not
mix up the ego and the indexes z-index
management so what's the issue with Z
indexes so this is a common thing we see
in most our apps so people tend to set
properties set the values of the indexes
properties like nine nine nine
and the reason is simple they don't know
what might come over me so why not set a
max value so the solution for this is
basically using the commandment number
two which we saw earlier using variables
and separating out your Z indexes in two
variables right so let's say we have an
app and it has multiple components so
components like overlay slide out
backdrop and there is a slide-out
there's a side bar navigation header and
stuff so first thing we separate out the
indexes into variables but that is not
it
so what addition purpose this code is
solving is it's basically translating
your visual hierarchy the actual layer
system of your components into code now
I have a linear representation of your
layers right in my code what good is it
so there are two things you could do
with your components in with your UI
elements in an app you could change the
existing layer position of those
elements or you might add new elements
UI elements to your app so changing
existing Z indexes become really easy
because you actually know what might
break you actually know the what things
come pay for me and what after me and
same with the scene while adding new
elements to your app you actually you
can now actually visualize where my
element fits in the layer system right
so normal Z index 9 9 9 9 9
you can keep your Z index is short
because now you know what's allow me and
what's below me
okay over to commandment number seven
inheritance doesn't always gives you no
money so this is again a SAS commandment
and it basically is about the ad extent
thing which SAS provides so like you saw
earlier ad extent is something which you
can use to extend a current class with
any previous class and the properties of
that class which you actually extend
would be carried over to your new class
right so and extend has a thing which it
which might make your CSS very bad and
item it as selector hell let's see what
it is so let's say in your app you have
an error class which is basically used
to define things which any error in your
app might have so your error should be
colored red and it might have a
background a reddish background so
anything which is which represents error
would obviously be using this error
class then there was a requirement to
actually increase the padding let's say
of any error which is coming in the
sidebar so we probably will have a style
like that any error in the sidebar
should be having a padding of 10 pixels
now consider we have a notification box
and it's basically an error notification
box so what I would do is my error
notification should extend with an error
class so I get the error properties on
myself without actually writing the
properties again now notice this this is
the compiled CSS of the sass over here
and if you notice the highlighted
selector is something which we did not
want it and did not actually
intentionally write but it is being
generated and this is an unnecessary C
or CSS so this might look not so much of
concern right now but if you let's say
you have a huge app of with so many
styles
this is something you could end up with
this is real selector we had in an app
so the solution for this is basically
using placeholders which we earlier saw
in component extract abstraction
commandment so what we are doing
differently here is first of all the
error class does not have the properties
now it's basically transferred into a
placeholder so we define a new
placeholder core error and that now has
the properties of an error second rule
we never extend a class we always extend
a placeholder so error class is
something that is to be used in the HTML
so we create the error class and this
then basically extend it with the
placeholder similarly we have the
message notification so that is
extending the error again and rule
number three three whenever a class
needs to be tweaked based on some
location or based on some anything so we
use class for that and that you can see
so when doing the PAC padding of the
error error we basically use the class
there and if you follow those three
rules you see that that unnecessary CSS
that was generated is no mother and this
actually helps reducing compilation time
as well and in app we were able to
reduce it by 76% because sass needs to
do a lot of work to while compilation to
actually see what what is extending
being extended wear in your code and
replace those instances so it's a lot of
work it's could really be of quite a
benefit this is what that start meant so
seven Commandments is all I have and now
I'll be actually switching over to the
game which I was talking about so this
game is basically a MMO
see T G so that's massively multiplayer
online CSS throwing game so if you could
open this IP in your Mobile's or laptops
we could all play this together so the
thing here is I don't play this you guys
paid together so if anything goes wrong
it is because because of you I mean so
we are getting a count here the number
of people who are getting connected to
the game so nine people please don't
start sending things that may explain
what it does okay so so this let's see
what we need to do here so I'm starting
a simple lever here level three is guys
where's the code of conduct piece so
this is level number three it's quite
hard so I'm using another demo level so
we have a player here and that's a flag
which we need to basically get and
there's a block in between which we need
to somehow remove right now all you guys
what you need to do is you you all see
your text box right it's all good so you
see a text box where you need to put a
pair of property or a no value right so
let's say display : none and you need to
submit submit that right and the thing
here is this is a sample scenario
whatever rule you submit whatever
property and value you sum it is
basically gonna apply in an abstract way
on the scenario not really getting
applied technically but as you won't be
able to kill like this
so can we try submitting sensible
solutions
this is CSS contract so let me give you
a hint here so you all every one of you
is basically in front of a table and
this is a border which is blocking so if
you are in front of a table and there is
a border how do you remove the border
Oh
something related to border and table
okay so solution here was I guess nobody
is making and current attempt so the
solution is basically
border-collapse:collapse so if you do
rat it basically will disappear the
bottom so let's try this level one so
that's an enemy it keeps on hitting us
oh my god
so you need to submit a a property and a
value pair that will basically somehow
block this enemy from hitting us can we
try this okay I think I need to give a
hint here as well
so you basically need something in
between the player and the enemy
probably a block so how do you display a
block can we try submitting correct
solutions vendor prefixes are not
required so another thing which I forgot
to mention is if 50% of the audience
submits the correct solution this level
would get cleared and out of 1:03 we
just 17 correct solutions you want CSS
lovers I don't think we are going to
reach 50% correct solution okay solution
for this is obvious or people are
sending display:block
so assuming 50% audience was not doing
funny stuff Oh
so we would have a block which would
actually kill the enemy and level clear
so this is an interesting one last level
from my side they will do so the player
is on a platform and he needs to capture
the flag but the issue is the platforms
on order and save seem level so I'm not
able to get the flag so how do you get
something which has broken on the next
line to actually get on the same level
as the previous element come on
not a single right solution okay so the
solution is basically white-space:nowrap
so that's it hi
pretty much the beginning of your talk
you talked about keeping your files
modular and small right
but you mentioned CSS and then you
mentioned if you're using sass you
should use the mid sense file for sense
like don't you think that reason sass
you should keep small files but then
concatenate them into one CSS file when
you deploy so production is not really
of a concern here it's a good practice
even to get your audio styles in to
single CSS so you don't have I mean
multiple HTTP request being sent from
the browser so that is something which
is fine the concern here is actually the
indie development process so you know
why you need modularity is because you
need to append things and change things
over time right so spreading of files is
necessary in develop and not in
production I guess another small
question you show that you're separating
it to files according to kind of the
style of the components dropdowns and
stuff like that right don't you think
maybe also it would be good to separate
it to the pages that you're using or the
templates that are associated with most
of these styles because a lot of times
styles are associated more with the page
they appear on and not with a specific
component right so so writing styles
pertaining to specific pages is
something we all have been doing for a
long time now but the issue with that is
it leads to basically a lot of
repetitive code and code gets repeated
on
friend pages and even though certain
things are same on all the pages you
still have repeated code so the solution
for this which many people have started
using is to have a different outlook
over this so instead of styling things
on specific pages again and again you
basically what you do is look out for
things which are common in all the pages
and separate down them as components so
that is reason number one I have I
haven't included those page Styles in
the sample solution eyes just showed so
you basically should have components in
your averages and styling pages but even
if you have those specific page styling
things even if it's a requirement you
can always have something called as
specific page section where you have
styles for your homepage your for your
about page and so thanks
actually I'm going to bring about
support number five events and a bouncer
instead of using the next editor you
trying to prefix and using the name
convention using underscore or not -
right I'm gonna really miss the coolest
reusable because I mean every time you I
mean then with some other author class
name so I agree these selectors do get
do tend to get longer if you use the BEM
convention but I feel the extensibility
and the and the reusability and the
thing that it lets you avoid very
various things in CSS like stricter
sense and all is much more than just the
names getting bigger it doesn't really
affect affect you it's just a visual
thing that you see long selectors and
that really scares you
I guess the advantages are better more
than you disadvantages in that case
hello greater what what do you think is
the advantage of using placeholder if
you compare it to like variables
placeholder and variables are I guess
two separate things so variables can
like in other languages to store values
right they could be single decimal
strings and maps and stuff but place
what is on the other hand something
which is a group of properties just like
classes are or any other rulers so it's
a group of property which you can extend
variables is not something you can
extend placeholders can be extended</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>