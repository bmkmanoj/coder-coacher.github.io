<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Martin Schuhfuss: Welcome to 3D - JSUnconf 2016 | Coder Coacher - Coaching Coders</title><meta content="Martin Schuhfuss: Welcome to 3D - JSUnconf 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Martin Schuhfuss: Welcome to 3D - JSUnconf 2016</b></h2><h5 class="post__date">2016-06-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kNnyjygRTFI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you all right so um yeah I'm
Martin welcome to 3d um yeah the reason
I I decided to do those talk as just
that every 3d introduction that you read
somehow assumes that you already know
quite a lot about 3d so I'm here to
clear a bit obvious things up in the
last half year something I've been doing
quite a lot of work but has had to do
with three jrs had to do with WebGL and
so I came to learn the hard way and so
this is one of the project i'm currently
working on which is basically just
rendering study to see how we can
achieve real nice looking effects with
very simple polygons and all those
post-processing that is required to do
that and yeah this is one of the studies
for the intro for Jays convoy Lopez the
first time I'm showing this publicly so
the problem with WebGL is basically it's
learning curve so maybe if you read a
little bit about what 3d in the web can
do and you're like hey we can do this
thing in 3d only to discover that
somehow along this straight wall of
learning curve you just say no maybe we
find a simpler solution another problem
here is every WebGL tutorial ever starts
with hey let's just draw a triangle
which is very okay so you create camera
then you have to set some parameters you
don't know about and we need to create
two shaders the fragment and vertex
shader come to that later and those
traders yeah well they have written in a
different language but don't worry too
much because we're still not done
drawing a triangle finally right there
was a vertices array that
and those are the points of the triangle
and it's really those code really just
ran as a black or white triangle on the
black background so yeah it's so III
think that there is a better way to
explain this and I will do this without
showing you any color so the way that
will work is basically i'm following
buzzword after buzzword at you and try
to explain what all these words mean in
the 3d world so I did this the hard way
because this is a one really really
awesome book but really really have your
math but yeah it's quite worth reading
because it explores all those fully
rendering up to how current generation
games do they are rendering in greatest
detail so if you really want a deep dive
all of this book so I'm contributor
graphics and 3d rendering is a really
vast field so we have around around 50
years of research having gone on in to
this this yeah probably one of the best
funded areas of research just games
industry the visual effects for
Hollywood all those that rely on 3d
graphics poor vast amounts of money into
it so there's no shortage and research
and yeah finally it's also a really huge
scientific field it involves physics and
involves math so it involves lots of
numerics and information technology
things there are feels like radiometry
and all the likes involved so what is 3d
rendering the basic idea and 3d
rendering is let me use a virtual camera
to take pictures of virtual scene so
it's a pretty easy like that to it but
yeah how do we do this
we need to figure out how how light
would behave in over to virtual the
world and finally find out which parts
of the light will end up in our camera
sensor and form the pixels on screen so
naive solution to those what the year we
make a simulation of how the photons
behave and how they bounce around on a
scene and finally figure out which of
these photons hit the camera sensor and
get this play but yeah as you may know a
quite many photons to simulate there so
there's not an option um so this leads
to some rendering techniques being
developed that and I will show you the
most prominent ones just right now so
the first thing is the ray tracing and
path tracing the idea behind this is but
you that you just trace how how race
behave in your light seen you can see
there are left pictures basically how
how light normally behave so you have a
yellow ray it hits an object and gets
gets reflected of that object so the
orange race and then all these refer the
reflected rays are reflected themselves
so those are the rep raised and then you
can see what's happening and we can we
can describe each of these paths of
light which you can see in our right
hand picture so what path tracing now
does that is it starts backwards so you
have a camera or somewhere in the scene
and you cast a riot ray out of the
camera so this looks a bit like those
apologize for the for the contrast not
that awesome beemo so we help a camera
and we start with a red rays and we
recast those of you raised into the
scene and see where it hits an object so
at that point where it's an object
several of things might happen so the
first we'll draw these lines towards
ever
every light source and a scene to see it
is in shadow or isn't it and otherwise
which is the case for the for the right
hand point of intersection there could
be a reflection which is the green ray
or it could be refracted through the
material if it's made of glass of water
or something so this will be the blu-ray
and finally things can happen like
subsurface scattering which is shown on
the left hand side where rather light
slightly emphasis circles gets bounced
around and exits the surface at another
point so um what ray tracing and pulse
racing now try to do is calculate
backwards towards the light source where
the light shines on that object is
coming from the point the point of use
algorithms that they are really very
accurate they can they can have a really
amazing quality especially in rendering
how whole shadows and lights behave they
support several special behaviors the
commonly called global illumination
which is refers to or everything that is
illumination that isn't directly from a
light source so in this room for
instance we only have global
illumination because the light sources
are basically hidden from us okay and
yeah ray tracing or more path tracing
are used for everything that doesn't
need to be in real time well
unfortunately it's we are still not
there that we can do those in real time
just because the amount of computation
required us way too big Princeton's
twice Daria they took for rendering the
movie around 2 to 15 hours for every
single image in the film and they were
like 140,000 images so it took some time
to render that new movie okay so here's
an example of someone actually built a
real path tracing renderer in WebGL and
like can change the scene here and we
can move move move around to other
camera and you can see some some of the
effects that only path tracing can do
like these shadows here in between or
these refractions within that glass ball
we can even just camera Pam our
parameters like the focal length or the
aperture size of the camera so it's it's
a really good simulation of how how
light really behaves anyway um the main
techniques exist that is useful for a
real-time rendering though is called
rasterization and together with scanline
rendering which is accompanying
technique so basically all applications
like games or everything that does 3d
graphics in real time uses this
technique to renderer so this is
basically also GPUs are designed for
this restoration technique so what
rasterization basically does is we have
objects that are described as a huge
amount of triangles and each of these
triangles is then split up according to
which screen pixels are covered by it
and then finally for every pixel of the
color is provided it's calculated from
the data that is available for that
triangle so um in order to explain more
deeply what this rasterization does is
we need to take a look at some math so
let's begin with the rendering equation
this is a funny mix of calculus and
linear algebra
and trigonometry yeah but nope you
really didn't don't need to know too
much math in order to work with 3d there
are just three four things that i'm
going to show you that that you need to
be aware of so first is we have
coordinates bases a coordinate space is
basically just the frame of reference so
it shows for any given back to where we
are the origin point is the vector
refers to and it has three axis XY and Z
and yeah these three axes are organized
another right-handed system so if you
take your right hand hold up like this
thumb is the x-axis or y-axis and the z
axis so this is how you have always find
out which direction which axis is
pointing to so in this case we have x
axis pointing pointing from left to
right y axis up like a node and the z
axis is coming towards you so um
vertices this is a here you probably all
know vectors do you mass at school all
right so vertices is just a vertex just
the term used in 3d graphics for vectors
and enough so it's basically just a
single point somewhere in a cabinet
space so in this this example was a
teapot you can see the thin black line
which points to the director to the
point where we had 111 coordinate is and
yeah so every vertex have the three
components of the dial in direction of x
y&amp;amp;z axis so what we can do with vertices
is now we can transform them you will
probably know from CSS these CSS
transform this is the same thing so um
we can rotate them we can translate them
so move them around we can scale them
and all of this is done with something
called
matrix multiplication don't worry too
much because you have a math library
that takes care of those so it's just
you have a matrix and you have a vector
and you basically throw that vector at
the matrix and out comes another waxhaw
so that matrix yeah just the recipe
about how to make one vector of another
vector and the recipe contains all these
rotations translations and so on so
another thing I need I need to talk
about a hormone homogeneous coordinates
and this is a weird term but you will if
you start diving into 3d graphics you
will see four dimensional coordinates
everywhere so don't vary they simulate a
similar just describe a point in 3d
space i have x y&amp;amp;z corner and the force
why are you it's basically just used to
enable some mathematic tricks that are
you that are required for some
calculations you don't need to worry
about so moving on the the single most
important thing and 3d graphics are the
geometry so geometry is defined using
triangles or in some other in some other
systems like direct x jail we can also
use quartz which are rectangles
basically and those are called faces and
all of these faces together like you can
see in the picture we form from the
surface of the object so all of these
all of these triangles are described by
three points three vertices and all of
these vertices have a common reference
point a comment coordinate system this
coordinate system is called the object
space so reason for this is that you can
move the object space around without
having to modify any of the vertices so
the shape of the object stays the same
where you can move and rotate and sky
look around so from the from the
geometry we come to object so an object
in 3d is just a combination of the
geometry and a material information will
come to that later so the object is the
provides provides the coordinate space
for the vertices of a geometry and
managers all these transforms that I
used on that object to move it around
and finally get objects are hierarchical
so they can contain more objects so if I
I came for instance just a model robot
by I have a body and a child of the body
would be the arm so if I move the body
around but I'm moves with it so the arm
uses the body as a reference and finally
there's one root object in every 15 so
well this is also in three.js is called
the scene and i hope the term in various
other systems as well so yeah the root
object hosts the one coordinate space
that is called the world coordinate
space which is a single point of
reference for everything and it also
contains special objects like cameras
that do the actual filming of your scene
and lights that light it up so the
camera is a special in that it actually
it does the viewing part of filming your
scene so it can be positioned and
rotators like everything else on the
scene but it has something the field of
view which you might know from from
normal cameras which are basically just
two angles like the horizontal and the
vertical angle that open up that camera
view frustum like it's called in
addition to this
there's also an airplane and of our
plane which then define this cut off by
remote which is called the frustum so
putting all this together you see and
lower left for instance there are
several teapots and the coordinate
system that you can see there within
these teapots those are the object
spaces so all of those teapots are
basically identical they are just
rotated around on the scene so um the
difference between these three pictures
is just what the point of reference so
we can we can just view it in any way
you won't like if you use the world
space as a point of reference like in
the bottom left you have the camera
positioned according to the world space
and finally there is a view space that
is used by as a camera and so if you use
that as a reference you have coordinates
of the camera are 0 0 0 and everything
else is positioned related to the camera
and you can move between these different
systems using these matrix
multiplications I mentioned earlier this
is why you will find a lot of this
matrix stuff everywhere in every 3d
implementation then there is a one
interesting thing how do we do
perspective so um this is a really neat
trick so um if you see the left image we
have that view frustum and the regular
world coordinates and in order to do
those perspective so further away
objects are rendered smaller we simply
convert this frustum shape of pyramid
shape into a square and this the squares
is called the the club space or a
canonical view volume so all coordinates
are converted into into values between
minus 1 and 1
so um as the frustum defines everything
that camera can see so does this cube
and everything that is outside of the
value range from minus one to one simply
clipped and will not be visible and on
the same at the same time you can see
that uh that as teapot gets distorted
according to this prospector so if we
now just watch from left to right into
this cube we will see we will see the
perspective transformation taking place
the conversion from the left image to
right images done by once again matrix
multiplication which is called the
perspective transform so um now we have
all those paths together so let's talk
about the rendering algorithm first the
first step is we need to project all the
vertices into the canonical view volume
so we have them into the in this clip
space then we can start to assemble the
triangles rasterize up those triangles
like I explained earlier and then
finally we can compute the color value
for every of the fragments in that image
and yet last step fragment was the
special term for a pixel that is not yet
a pixel on screen but just corresponds
to a picture and as part of one of these
restaurants triangles so um last step is
to blend these color values in case
there's any transparency involved we
take the value that's already there and
put where you'll be computed and plant
them together so and this is what WebGL
basically does so we have a lot of a lot
of vertex data coming in with the rep
power the vertex buffer objects they are
named attributes and they they run into
the vertex shader which is the first of
those two shader programs that you can
write the vertex shader does does the
thing
which is basically just can compute the
club space Corps not been and there are
two stages called primitive assembly and
rasterization and finally the single
rough arrested fragments are passed on
to the fragment shader which will then
compute the color the color blending
happens and everything lands the frame
buffer of the graphics car which is
exactly what will be on screen so the
vertex shader computes the club space
coordinates and it gets the vertices in
something that's called attributes and
get some additional data I'll just call
uniforms and it can write output data in
form of varying variables which are
passed on to the vertex shader the
primitive assembly now we'll take this
computer vertex values in club space
assembler triangles rest of those
triangles and find out where each screen
pixel corresponds to some pixel in the
triangle and then finally we can compute
the color so the fragment shader can
only access data that is pastored by by
the vertex shader doesn't matter too
much yeah the primary responsibility of
the fragment shaders to implement
lighting equations and implement
texturing for the surfaces involved so
let's talk about materials in the real
world materials so stuff objects are
made of can react light in three
different ways basically which is a they
can absorb the light or parts of the
light like only specific parts of the
spectrum which make service bottle cap
here look blue for instance because
everything but blue color is absorbed
they can reflect light or light bounces
off the surface and finally there's a
possibility that there's a refraction of
a material is transparent it slightly
changes the lights direction which is
something you see you with lenses glass
surfaces and everything like that so in
the 3d world materials are basically
just what encapsulates all those all
those parameters that are required to
calculate the color so we have at least
one of the other one material per object
and we can have as many year as one
material / triangle so each of the
phases of the object can be rendered in
a different way with different
properties so there are some terms you
should have heard which are basically
just Lambert shading and the bloom phong
shading models those are the most
commonly used and shading models which
is basically just a simple equation not
so simple maybe but it's just an
equation that takes in light sources and
material properties like the the own
color of the material or the color of
reflected light and finally a calculus
from all these values together the final
color that you will see if you look at
that object from this direction at that
point so um the three used models here
there's basic which is just a plain
color independent of every light
influence lambo chatting does this is a
very simple and fast lighting equation
that can just have the few surfaces and
finally the foam material which can
properly render also specular highlights
so gloss
nose and stuff maybe so again the Beamer
sucks but as you can see here we have we
have for instance from from back to
front here on the the diffuse color
mount changes for instance so you can
see in the back the objects are
basically black and to the front they
get they get more and more intense red
then there's parameters like the
roughness of the material just a bit
hard to see but can see these specular
highlights here which are caused by the
material just not being very rough and
finally yeah I'm getting a bit stressed
so I'm texture Maps texture maps is last
point here and you can see it is
basically just way to paint images onto
all 3d objects so these are two simple
cubes and all phases of these cubes have
the same same picture of a side wall of
a box painted on them so we can use by
using texture maps we can use these
textures on to add further detail to our
objects without needing to specify all
of those in form of three angles and
colors of triangles so we can simply
draw an image onto an object surface so
this is the most common use cases it's
called diffuse mapping and there are
several other use cases possible for
like bump mapping or environment mapping
alpha mapping so iphone mapping would
describe how how transparent an object
would be at a specific point of its
surface bump mapping describes tiny
details of the object surface I have an
example for the environment web mapping
is something that we need in order to
describe reflection because the object
needs to know about its environment in
order to have something to reflect so
it's all bit difficult to put into the
30 minutes I see finally one important
term here is a UV mapping the UV mapping
the process of describing how a part of
your texture image maps to the geometry
so a UV map is something that you
definitely need an order to put this
two-dimensional image on for your
three-dimensional geometry and as
promised here is this is an example of
what what is very simple material can do
if you just add a bump map so you can
see here all those detail all this tiny
tiny specks in the face are simply
caused by adding a bump map which shows
how a bit of a displacement how the how
the face is detailed yeah and finally a
no time for questions but yeah just find
me outside thanks for listening
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>