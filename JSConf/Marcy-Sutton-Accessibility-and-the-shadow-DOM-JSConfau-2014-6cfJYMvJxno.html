<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Marcy Sutton: Accessibility and the shadow DOM | JSConf.au 2014 | Coder Coacher - Coaching Coders</title><meta content="Marcy Sutton: Accessibility and the shadow DOM | JSConf.au 2014 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Marcy Sutton: Accessibility and the shadow DOM | JSConf.au 2014</b></h2><h5 class="post__date">2015-02-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6cfJYMvJxno" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">today it's not something that comes up
that often at conferences but I have
heard a few mentioned so far at least
yesterday at CSS cops which got me
pretty excited to hear people talking
about accessibility so just a show of
hands how many people are familiar with
shadow Dom quite a few cool that's
awesome so we're going to start with a
story so imagine that you are working at
a company that's a little behind the
times they're losing engineers because
the people are pretty cool but the work
is really boring it's really stale you
don't get to do anything modern it's
like you're supporting ie7 and it kind
of sucks but you are in a really good
position at this company and they have
trusted you to pick the technology for a
new project they've said it can be super
modern you don't have to support IE 7 or
I ate or ie9 so that's awesome they've
given you this trust and you get to pick
something you start thinking man like
everyone's been talking there's so many
cool things out there right now and you
think web components I've heard of that
that might be pretty cool to work into a
project because you know we're only
supporting the most evergreen of
browsers which means that they update
themselves and we can use a polyfill and
that sounds awesome I think I'm going to
do that so you get to work on this
project it's like the best project ever
you get to your cool workstation finally
the quality of the work aligns with the
kind of work that you want to do and the
kind of work at a company that you want
to work at so do you go to your job
every day and you work on this amazing
project super cool a couple months goes
by and you need to present this project
so a couple things about this company
they hire people with disabilities and
you have a really awesome project
manager who is blind and she uses
microsoft project along with jaws which
is a screen reader it actually stands
for job access
speech actually didn't know what that
stood for but she can do her job
effectively if she is supported by the
technology that she needs so she'll be
in the audience also your CEO can't use
a mouse so you have some requirements in
your audience for this internal project
you've chosen technology that you're not
really sure if it's going to work for
them so when you go to present it are
you going to be a hero or are you going
to be sent back to the drawing board
because you didn't consider your
audience so we'll have to find out so
before we answer that question we're
going to do some accessibility
background just refresh our memories of
what accessibility is about how you can
make your projects more accessible we're
going to talk about what is the big deal
with web components everybody's been
talking about them sounds like most of
us have heard of it but we'll talk about
what that is specifically we're going to
talk about shadow Dom which is one part
of web components and then we're going
to talk about the accessibility
situation of web components and then
we'll answer that question about if
you're a hero or zero so when you're
creating things that are accessible or
any projects actually who are you
building it for I think sometimes we
forget that everybody has different
ability and it seems like some people
aren't actually building projects for
people which I find pretty peculiar so I
just want to remind us all that we're
building things for people and we all
have different abilities so it's
important to keep that in mind in
accessibility there are some traditional
groups of people that we talk about and
that includes blind and low-vision
there's people who they can see but
maybe they can't see very far and they
look at their phone really close to
their face all different kinds of visual
impairments deaf or hard of hearing so
if you have video you need to provide
captions physical disabilities there's a
huge range of those as well color
blindness which affects a lot of people
and then cognitive impairments
which are a little more challenging but
if you can make the copy in your project
read a little more understandably you
kind of cut down on the marketing speak
you can make something more
understandable to someone with a
cognitive impairment but really that
includes everybody so maybe you broke
your arm and you can't use a mouse for a
temporary period or maybe you had LASIK
eye surgery and you can't see for a
little while like we have these
different abilities that come and go
some people have to live with them
forever so it's important to remember
that not everybody can use a mouse or
see the screen so I wanted to find a
persona that we could focus on a little
bit and I remember that Stevie Wonder's
blind maybe I could find a picture of
Stevie Wonder so I went and looked for
one and i found this which is a picture
of a goat his name is actually Stevie
Wonder because he's a blind goat so I
went alright I like goats I'm gonna go
with that what a pic Stevie Wonder and
we're going to look at this graph I have
up on the screen that describes the
assistive technology process and there
are multiple assistive technologies but
the one we most commonly talked about is
a screen reader so in this diagram we're
seeing Stevie Wonder he interacts with a
web browser or in the case of our
project manager Microsoft Project so
some software application that software
application then interacts with another
application which is a screen reader in
this case and they talk back and forth
via and accessibility API and there are
multiple api's but there are some tricks
we can do to make that expanse fur of
data more understandable so this graph
is just indicating to you that there's
some interaction between the web browser
and the assistive technology so that was
the goal of this but Phoebe wonder
relies on his screen reader to tell him
what's on the screen because he can't
see it so in an ideal world
we should have everything work from the
keyboard have you ever navigated a
website without a mouse and you gave up
and started using the mouse because you
could you tried using the keyboard
you're having through you don't know
where you are maybe you got trapped
somewhere you gave up because you could
but what if you couldn't use a mouse at
all part of what makes this better that
we should do this is some low-hanging
fruit stuff that just applies to any
website that you build is that we should
provide good visual feedback it's really
helpful for everybody if you along with
the hover state you define a focus state
pretty easy right another thing you
consider is a logical tab order if you
tab through a web page what is the order
of elements that you see as you focus
throughout the screen it should go in a
linear fashion just no matter what your
layout looks like it should be logical
it shouldn't jump all over the place so
keyboard navigation is pretty important
if you have stuff hidden away in a mega
menu you should be able to get there
from the keyboard you shouldn't prevent
people who can't use a mouse from
navigating your website so with screen
reader access meaningful page structure
is really important so you want to
consider the outline of your document
not just the way it looks you should pay
attention to semantics you should use
headings you should think about what is
this document what am I trying to convey
and what is the best HTML that I could
use to communicate what is on the screen
right now you should have relevant non
visual content so if you have images you
need to explain what they are especially
in the case where we used to embed text
into images we have to provide that text
off-screen somehow you have to make it
usable without seeing basically it's
pretty important if you can't see the
screen you should know what's on it but
we forget that sometimes some general
accessibility things that we should
remember color contrast that's a huge
population of people who can't see some
of your texts because it doesn't stand
out enough over
the background on this slide actually I
had some great X where it says in an
ideal world and i figured that probably
wouldn't be readable because of this
monitor so i changed it and that's
something that we should consider is
your text going to be readable based on
you the colors that you've chosen we
should make experiences interactive and
accessible so just because you're making
it accessible doesn't mean it has to be
text only and boring you can script it
so that it's interactive using the
keyboard it's really important that we
consider the user experience SEO and
accessibility are bffs I like to think
of that it's a good way to sell
accessibility actually if you can say
that there's more than the small niche
audience that you're considering
actually google bot is the world's
largest blind user because google bot
can't see the screen it also needs
relevant text content so that's a win if
you can make your content work for as
many people as possible and Googlebot
mobile accessibility is a thing that we
have to think about we should make our
websites work from a screen reader on a
phone it's kind of a no-brainer now that
I realized that but at one point I
actually thought oh that won't matter we
don't need to make our mobile web pages
accessible you should because you have a
screen reader in your pocket all the
time it's pretty useful and then lastly
for general accessibility software
testing is really useful for this so
what if when you're creating a project
you could check whether you're about to
deploy code that would fail an
accessibility test that might be kind of
useful if you can lit for accessibility
and then on the flip side of that there
are methods of software testing that
ride on the coattails of accessibility
so I know an iOS development and windows
development sometimes you can get
testing to work by way of accessibility
api's so it's pretty awesome if you can
make accessibility a win for multiple
groups and multiple purposes
so checking in on our project how's it
going we've been working for a while
we've got this cool prototype we're
presenting just want to keep in mind
that we have an audience that might have
different needs than our own so projects
still going really well but we don't
quite know yet whether they're going to
be able to access it so we'll come back
to that so web components there are set
of new standards we're super excited
about them there's multiple parts to
this new standard moving through the w3c
HTML imports templates which we're going
to look at a little bit today decorators
I don't really use those yet but custom
elements and shadow Dom are super
important for creating web components
and we're going to look at those today
as well so why are we excited about web
components it's a new approach to
building HTML and web pages that I think
we we are just super excited to try
something different we aren't waiting on
browser implementers so the html5 stuff
came around and it was really cool
because we have these new range inputs
and we have new elements that we can use
that we don't have to go and script
everything with JavaScript so we aren't
waiting for browser implementers anymore
because we can create our own widgets
that have that same native effect as
these new elements they get rolled out
every so often not having to wait on a
browser for that to be to be able to
create your own it's pretty exciting web
components provide a way to minimize
conflicts and the way that I explain web
components to people who aren't familiar
at all is that it's kind of like an
iframe and that you are creating a
sandbox for your your javascript in your
CSS so that it is encapsulated and it's
separated from the rest of the document
so encapsulation to me is the biggest
win in web components and that's kind of
getting into where my questions about
accessibility came in
which was all right we can create the
sandbox so that you know CSS can't go in
or out depending on what styles you're
defining but what happens to a screen
reader and that's really where I started
wondering what is the going on here with
web components so I started digging in a
lot more and it became really
interesting so diving into the shadow
Dom specifically which is one part of
that spec the shadow Dom encapsulate say
dom subtree and we're going to talk a
little bit about what a subtree is it
has this idea of implementation versus
interface meaning that you can implement
a single tag but there's this whole
interface behind that that you didn't
have to implement which is pretty
awesome like in the case of the the
range input it has multiple parts to it
but all you're putting in your HTML is
one input tag shadow DOM is not a
shadowy underworld organization which it
has pretty creepy name so this interface
versus implementation a good example
that we actually see and use on the web
it's a video tag and we can see here we
have a screenshot of a there's a video i
just found last night actually of a goat
named gary and he was accused of eating
flowers outside a museum in sydney and
so we're looking at a screen capture of
the video with the controls and then i
have the devtools open and in the latest
chrome you can turn on this flag to show
shadow Dom you're probably aware of it
once you've enabled that you see how
widespread shadow Dom usage is on the
web it's on text areas it's on form
inputs any time that we have this
element that we can drop in just an
implementation it has all of these other
things that it comes with that we didn't
have to build we didn't have to create
the inputs for these play and pause
buttons over the range for the volume
slider but it comes prepackaged and it's
all wired up and we can use it and
that's awesome so the whole idea with
web components
that we could create our own versions of
this which is super cool so some
important terms the document object
model I mean we've all used the document
object model but what is it really it's
a it's an object-oriented tree
representation of an HTML document so
each component of that tree is a node
nodes can be groups nested groups and
when they are they become no trees or
sub trees so getting into the shadow Dom
specific stuff a shadow host is the
element that hosts one or more shadow
Dom trees so you have basically your
your video tag that's a host for a
shadow DOM and you can have multiple
trees that you shove in there this idea
of encapsulation in web components in
shadow Dom this specific term for it is
the shadow boundary and that is the the
line where scripts and styles don't
cross there are some exceptions and
there are some back doors but for the
most part that's the whole idea is that
if you define an h1 in your web
component it won't affect the style of
an h1 outside of the web component which
is pretty awesome because if you're
working alongside somebody and they've
written some really general CSS and it
screws you up well wouldn't it be nice
if you could both be as general as you
want your CSS but you don't run into
conflicts so a shadow tree is the actual
sub tree that gets inserted into the
shadow host and then finally the shadow
root is the root node of a shadow dom
subtree and this was all stuff that i
kind of knew and i read a little bit
about these terms but the more I really
dug into what's happening here these
things kept coming up so it was
important at least for me to understand
what is the Dom you know what are these
node trees and actually they come up a
lot not just in HTM
all so a little more about trees they
resembled nature this graphic is from a
book on scheme which i think is really
interesting so we have a root node we
have branches that come off of the tree
they have nested node groups there's
nothing here indicating a shadow
boundary or a shadow tree but it's a
data structure that we're pretty
familiar with already so we're going to
look at some shadow Dom so I have this
really simple document and it has a
couple of headings it has a paragraph
and image and a link in it so I'm just
going to look at the source and see what
like what does this look like it looks
like a normal document there's no
outline there's no indicator that
anything other than a regular document
is happening here so if we look at our
HTML source we can see that it's just
some pretty normal code we have a
template tag that's one of those new
items in this in the shadow or web
components spec and inside of it we are
defining some style we have a heading a
paragraph inside of the paragraph we
have another template type tag that the
content and it has content inside of it
that says meat popsicle that's a little
weird we don't see meat popsicle on the
rendered webpage so what's happening
there so keep going we have the image
and then down here at the bottom we have
a custom tag called goat stuff pretty
sure there is not a goat stuff tagged
already the only requirement with web
components and custom elements is that
you add a hyphen in the middle so the
word before the hyphen is effectively a
namespace so I'm calling the goat
namespace just to hand so what's going
on here is that we have one word in our
shadow host the goat stuff tagged as our
shadow host
we have a template that has a bunch of
stuff in it that we're going to grab and
then insert into our custom tag but one
thing we haven't really figured out is
what is this meat popsicle business so
if I go back to our demo we can see it
says I'm a goat it's got the image so if
I go and look at it in the dev tools
like this a little bigger okay so this
is a little different representation
because this is after javascript has run
so this is after your HTML has been
affected by JavaScript and CSS it's a
different representation of your webpage
so we drill into this goat stuff tagged
we can see we've got a shadow root we've
got some style we've got a paragraph tag
it's the same stuff we've got this
content it still says meat popsicle but
I'm not seeing that I'm seeing in the
ghost stuff tagged we have goat so
what's happening here is that goat is
being projected into the content tagged
and that is what gets rendered to you
even though after rendering we're still
seeing meat popsicle in the dev tools
but that doesn't ever get rendered to
the screen so that's one of the really
to me one of the strangest parts about
shadow Dom but I am still curious what's
going to happen at a screen reader
they're not quite sure yet so to get
that shadow Dom stuff to work polymer is
a really awesome polyfill and they have
a set of components that you can use but
before I got into that I wanted to build
it myself I wanted to know exactly what
goes into this I want to learn it really
well before I go and add a bunch of
tools that somebody else has made so in
the latest chrome I could create a
little bit of JavaScript I'm going and
grabbing the contents out of a template
tag I'm creating a new element so you
extend a basic HTML element which we're
seeing here with object.create and then
we're copying the prototype
just from a very generic HTML element
when that element gets created which
we've registered down here on the bottom
we register the goat stuff element and
then we set its prototype to be this
goat component when that gets created it
has a callback function and that's when
you can start doing stuff to it that's
when you can change the content that's
when you can enable some of these back
doors for your scripts you can find
events and polymer does a really great
job of abstract amiss away but and I'm
finally ready to move to that now but it
was really useful to go through and see
what is happening so about that boundary
I mentioned there are some back doors
and this stuff still trips me up a
little bit I think it's really odd so
when you create your CSS for your main
document tree if you define a font on
your body tag you would think that the
shadow Dom would be encapsulated so that
it would not get the same font face but
it does that's one of the few styles
that actually goes past the boundary so
it's a little unexpected but there is
this JavaScript property that you can
set called reset style inheritance and
that will wipe out any of those cascades
that go through the boundary there's
also apply author styles which allows
your parent stylesheet to go into the
shadow Dom so you as the document
creator have that control you can say do
I want the styles to go in or not if I'm
implementing some widget that some
third-party developer created I want to
be able to override their styles but I
don't want them to be able to override
mine so you have this control as the
parent document owner and these are the
the tools that you can use for that so
going back to the trees and looking at
if we have a shadow host and this image
comes right out of the shadow Dom spec
which I've had open in my browser for
six months so we have a shadow host and
this image is describing that it has
children in it
which actually get replaced by a shadow
Dom which we're showing here on the
right side of the graphic there's a
shadow boundary so that's indicating the
encapsulation and then we have the
shadow root which is the parent node of
a bunch of children and the shadow Dom
spec is actually really awesome as far
as specs go so we looked at our demo but
we didn't answer whether it was
accessible or not it looks okay it
looked like a normal document so we're
going to go back to that demo and I'm
just going to start tabbing through I
could tab on to the link that's cool 37
voiceover basic demo shadow Dom
accessibility window basic demo heading
level 1 shadow dumb down low we gotta we
gotta heading heading level two main
document that's still the main document
so now I'm going to go into the shadow
Dom heading level two goats stuff all
right we went over the boundary it read
it iono coat I'm a goat fancy goat image
goat simulator gameplay hands-on no joke
all goat visited link voiceover off so
that's awesome we went into the boundary
cool so that kind of like all right it's
accessible and it worked but why did
that work
what what why did that work and that's
what I wanted to know so a little bit
about web browsers and screen readers
and how they work the difference between
our view source and our rendered markup
was that the web browser takes your HTML
it creates objects from the markup
that's what the DOM is the Dom has been
altered by your CSS your JavaScript and
Aria or accessible rich Internet
applications if you use any roles or
states or properties those affect the
tree that gets created web components
also create a sub tree so that is added
to the larger tree the screen reader
uses the objects in the render Dom so it
gets one big tree and that is called an
accessibility tree and that is what is
presented to the screen reader user or a
screen magnifier I thought that was
really interesting it was pretty key to
what made shadow Dom work so how do you
make accessible web components you write
accessible code it's pretty simple but
we forget that stuff sometimes and if
you don't you might get knocked by this
goat like this newscaster lady boom okay
so how do you write accessible code
little recap you use native and semantic
HTML so use headings inside of your web
components use native and semantic HTML
if you have a button make it a button
don't make it a div like just try to use
the HTML the way it was intended and
you'll have a lot better time you want
to make readable text content you want
to provide visual feedback you need to
use focus management and use JavaScript
events to send the user around your
experience and then finally you can use
Aria to fill in gaps where HTML doesn't
quite meet your needs but you should
have exhausted all upward all avenues
with native HTML first so one last look
and I'm actually going to use a
different screen reader this time
news MV da which is on Windows and i'm
going to use virtualbox for that and one
quick note I was going to use jaws but I
had trouble getting it installed on this
machine but if you're going to test for
accessibility you can actually use the
demo version of Jaws 445 or 40 minutes
at a time just a side note explode but
MV da is a free one so I'm going to
hover over things and it'll read it
explosions explosions and a little
background of this component actually
was I was thinking if I'm going to make
an encapsulated component what would be
useful and I thought that a single
button that was kind of like a nuclear
detonator that you could engage and then
have it expose another kind of a button
that would be kind of cool but I didn't
know how I would create that so I made a
little it has a certain part of it you
have to slide to engage it it exposes
another button and then explosions will
happen one hut are you sure are you sure
you want to engage it choose a
percentage between 0 and 100 0 % all
right I'm gonna do it yes really yes are
you sure are we sure yes really all
right really we're really sure main
landmark yes goats on metal jib so what
happened there with it it was reading
out the parts of the component so the
encapsulated parts get read aloud just
fine and that's because you get
presented with one big tree and I
thought that was really cool I learned a
lot about how screen readers work I
learned how browsers work and it really
transcended just something about
accessibility I thought that was pretty
awesome get me out of here Rob Firefox
alright so one little note about support
polymer has this great matrix up on
their website to show you and i just
added their polyfill to extend support
beyond just chrome and firefox but I eat
n is as far back as you can go so just a
quick recap we want to develop
the ideal we want to develop for people
because why else are you doing it
otherwise web components provide
encapsulation shadow DOM is accessible
and it's accessible because screen
readers utilize the Dom as rendered and
finally you want to pick the right
technology for your audience so how'd
you do on your project well your
executives came in and your project
manager and who couldn't see the screen
and they demoed your project just fine
because web components are accessible so
you nailed it and that's it for me</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>