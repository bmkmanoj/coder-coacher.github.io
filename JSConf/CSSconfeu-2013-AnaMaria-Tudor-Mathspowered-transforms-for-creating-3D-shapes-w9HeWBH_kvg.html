<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[CSSconf.eu 2013] Ana-Maria Tudor: Maths-powered transforms for creating 3D shapes | Coder Coacher - Coaching Coders</title><meta content="[CSSconf.eu 2013] Ana-Maria Tudor: Maths-powered transforms for creating 3D shapes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>[CSSconf.eu 2013] Ana-Maria Tudor: Maths-powered transforms for creating 3D shapes</b></h2><h5 class="post__date">2013-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/w9HeWBH_kvg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so on that's the title of my
talk which I completely hate now and I
thought it was awesome when I picked it
but then I grew to hate it so let's get
into it so I'll start with the short to
recap of 2d geometry and first of all
let's see what a polygon is and just the
crud still broken line in a plane in a
plane there's a word missing there I
can't believe I missed us the number of
vertices equals the number of sides
they're only straight lines besides
there are no arcs and there are no three
successive points on the same line
because you have three successive points
on the same line one connected to two
two connected to three three connected
to one that's not a polygon
that's a downline so these are a few
examples convex concave convex convex
and regular and then a circle obviously
not a polygon and not online obviously
not a polygon a few more examples and
three sides four sides five six and it's
going on columns from the first back on
to the last first row regular second row
be a regular third row regular fourth
row irregular again and this is where
you see such shapes like here you have
Pentagon's and hexagons and there are 12
Pentagon's and 20 hexagons and this
shape is exactly the shape of this does
anybody here have a background in
electronics knowing that what that might
be
No all right
so that's a carbon molecule there are 16
atoms of carbon and the shape is exactly
the same as the one of the ball no not
exactly the same because the ball is
obviously round because of the pressure
inside but um oops there are also 12
Pentagon's and 20 hexagons and these are
also polygons and these are star
polygons and there are regular polygons
and only the points in red only those
are the vertices and all the sides are
equal and the points where they
intersect those are not vertices and
these are star shaped polygons which are
different from star polygons and let's
move on let's see it and this is
actually the last fly that I act I added
to the presentation because I thought I
was going to talk about this a lot and I
didn't actually explain it anywhere well
I did explain it in an article that I
wrote a while ago but she put a slide on
it so on the circum circle is the circle
on which all the vertices of a polygon
are situated of course not all polygons
can have all vertices on a circle but
we're gonna talk only about those that
do and the central angle corresponding
to one side for example corresponding to
side a beam is going to be this angle a
OB this is the central angle
corresponding to this side so I hope
that clears what the central angle is so
start from the simplest one a rectangle
nothing exciting there with height and
you can make it square if you give it
same width and height you can make it a
parallelogram
if you skew it and let's try I'm
particular kind of problem
a rhombus around was some and you can
see this one has different width and
different height and you can see the
angles in it
okay so the rhombus has all four sides
equal so you think that you get a
rhombus by skewing a square let's see
that this is the square so let's see
what happens if we skew it well it's not
rhombus and you can see it better if I
increase the angle it's not so why isn't
it what's happening here
well let's see first how the skew
transform works so we have one we start
with a square and we apply a skew
transform on it so you can see that the
skew transform as any other transform
also transforms some the system of
coordinates of the element it's not the
same as it was before and all for every
point of the initial square applying the
skew X preserves the y coordinate and
changes the x coordinate just the x
coordinate and you can see from for
every point XY the new coordinate after
skew is going to be X plus a and Y and
frisky Y is going to be x and y plus a
all right but what is a well to
understand that we need to go a bit into
trigonometry so does anybody remember
the stuff well what a sine and a cosine
and tangent are so the sine is the ratio
between the side opposing the angle and
the hypotenuse the biggest side the one
opposing the 90-degree angle and the
cosine is the ratio between the adjacent
side
the one near it and the hypotenuse and
tangent is the ratio between the
opposite side and the adjacent side and
now let's go back to this one so in this
case we consider this triangle and this
point has coordinates initially let's go
back this point it has initially
coordinates 0 and Y and after we skew it
it gets here and it has coordinates a
and Y so this piece here is a the
distance from this point to this point
this is a but this is half the initial
length of the side and this is the skew
angle which is 30 degrees in our case
and this the length of this is y so the
tangent for this angle is going to be a
over Y so we can get a as being Y times
the tangent of the skew angle so since
the side of the initial rectangle was to
2y and the cosine of this angle
is why over the hypotenuse which is just
half of the initial side which means
that applying the skew X gives us the
lateral side of two times y over cosine
of 30 degrees in our case skew angle in
general so we need to scale down along
the y axis and we need to scale down by
the cosine this is the factor and I
usually don't compute this kind of stuff
I usually use us but I just wrote it
like this this time and you can do more
polygons with CSS and you can get a
hexagon by you're rotating by skewing
down you can see it better if I do this
and this is the original element and I
skewed by 30 degrees and then I scale it
to make it a rhombus and you can see
that I undo the transforms on the child
element I under the scale and undoing
the scale means scaling by 1 over the
initial scale factor so this is 1 over
866 and rotate and skew it by the
opposite angle minus 13 because 2 is 30
and then rotate it to get it right into
position and then scaling and get back
because it's height would be still don't
comment code like this you can also get
a triangle if you just shift the whole
thing and that's a translate by Yan 50%
and you can move the triangle so that
it's centered it's in the center of the
original system of coordinates and it
goes like this
and this Sun translate it's applied this
one here it's applied on the original
element from the parent element not on
the pseudo element and this value is
actually the inner radius and it's the
inner radius from this kind of triangle
and of course your sassed computed and
we can do more shapes like a pentagon
and how would we do a pentagon I first
had this idea about a year and something
ago and I thought well first use the
rhombus and then inside of it
use another rhombus and then inside that
rhombus is a square
and cut off all the outer elements and
we're left with this this is the
Pentagon and it's actually a regular
pentagon and let's break it into pieces
we can break the Pentagon's into three
pieces three triangles and the sum of
the angles in a triangle is 180 degrees
so we have three triangles so the sum of
the angles of the Pentagon is going to
be sum of the angles for all three
triangles that's gonna be three times
180 that's 540 and that means that we
have to divide that 540 to 5 because the
Pentagon has five vertices and one angle
results in 108 so this is going to give
us the skew angle for the first rhombus
and we get the skew angle for the first
rhombus by subtracting 90 degrees from
the value of the angle the angle for the
Pentagon and these are the general
formulas and you can find them on the
internet you don't need to remember them
and so we first get the first rhombus
rotate it and we rotate it by half the
acute angle and this is the acute angle
which is 90 minus the skew angle and the
rotate angle is this over tuned and we
skew it by 18 degrees which was a skew
angle computed previously and we scale
it down by cosine of 18 degrees and now
we need to know to get the next formas
we start with the square and actually if
we don't apply any transforms on it
it's going to be the same shape as the
parent don't comment CSS like that and
undoing the transforms from the parent
results in a square and now we we make
it a rhombus but it doesn't really look
like before it has the same Center as
the first rhombus and oops I think I
blew that well it this thing should
actually have this corner it should have
it up here intersecting this side
somewhere up here so how do we bring it
up and by what distance do we need to
bring it up well we're gonna need a
pentagram for that not this one this one
looks artistic but it's kind of hard to
see angles and stuff so on but this is
actually the first thing I found when I
search for pentagram this you can see it
a lot better so inside in the middle
this is a regular pentagon and all
angles are 108 degrees and this is 72
degrees and this is 36 degrees and now
we need to compute the distance and the
distance now by which we need to move
the red rhombus up is this distance Y so
this distance Y is the difference
between the distance between this vertex
here and this point here yellow one yeah
you can see it yellow and the difference
between this big distance and this small
distance here and this big distance here
is L times sine of 36° because this
angle is 36 degrees all right and
this one the small one here is a sine of
36° a being the side of the Pentagon
but we don't know the side of the
Pentagon well we can compute it this
angle is half of 36 degrees so one we
know that this is half the side of the
Pentagon so it's a over two so this side
the hypotenuse in this triangle it's
going to be 8 over 2 over sine of 18 but
the side of the initial rhombus we
started with is a plus a over 2 over
sine of 18 and we get a from this
equation and I never actually computed I
always use us for this and this is how I
got the volume the translate one and I
put translate between the reverting the
transforms for the parent and the new
transforms to transform it into a
rhombus and now all I need to add is the
square and the square has the center in
the center of its parent and of course I
undid the transforms from the parent but
this looks wrong because while it's a
Pentagon but it's not a regular pentagon
and we have to move it up a bit
so let's see by how much we need to move
it up this is a Pentagon and this is its
inner circle this is the side of the
Pentagon and call it a half of it is a
over 2 and the in radius is going to be
a over 2 over tangent of 36 so that's 13
points at 67 66 67 out of the initial
side so we need to translate it up
that's why it's with a minus so this is
the regular pentagon move on to 3d
because that's actually my topic
that was quite a long introduction down
long introduction and let's do a cube or
not it's actually pretty simple and I've
already written a lot about it and it's
really simple let's build something a
bit more complicated like this this is a
3d shape a regular 3d shape with 12
sides 12 Pentagon's and another regular
polyhedron is this one it has 20 sides
20 triangles but first let's see a few
more 3d shapes prisons and anti prisms
so what are these they both have all
vertices contained in just two planes
top line bottom plane you can see them
the two bases are all identical lateral
sides are all parallel for the prisons
and one base is rotated by 100 over N
and being the number of sides with
respect to the other in the case of anti
presence all right so let's see how I
get some a prism we're not gonna get the
full prism we're gonna get just one
ladder other side of the prison because
all the others are just the same and
we're gonna get a triangular prism which
is why we start with a triangular base
and a square lateral face the first
thing is we translate the base we
translate it down by half of it and now
we rotate it around the x axis by 90
degrees and we rotate it by minus 90
degrees because we want from the front
of it we wanted facing down because down
is going to be outside the shape this is
not right
the center is not right we need to
translate it back
by the incircle and we're done with the
base now this is the lateral face and we
rotate it by half the central angle for
the triangle and for the triangle the
central angle is 180 360 over three
which is 120 so half of that is going to
be 60 degrees and now we translate it
along the z-axis and it gets into
position and the other two we get them
just the same we just add the radius
ankle we add another on central angle so
it's going to be 60 plus 120 180 and
adding one more that's going to be minus
60 so this is how you get a prison
that's moving further we can transform a
prism into a cylinder if we keep
increasing the number of sides and
decreasing their width and you can see
how it goes here back and forth and I
could have get it more prasad could have
all got it more precise if I had used
more elements but didn't really want to
animate too many elements and we can
change this a bit and turn it into an
infinite strip but first let's see the
code and this is SAS because there is no
way in hell I'm writing 23 elements with
the transforms so this is the number of
sides and it's the number of sides RI is
the radius of the inner circle of the
polygon the CA is the central angle and
we compute the width of a strip and in
the same manner as we did here except is
the opposite computation it's going to
be the inner radius
and the transform is basically the same
except we take we take into account the
index when on for the angle and now
let's see the infinite strip we get this
oops this isn't working
oh it started working the infinite strip
is some starting from a cylinder and we
also apply a rotate around the x-axis
the rest of the code is just the same
there is just this one more rotate
around the x-axis and this of course
looks a lot better if I used a lot more
elements like this and there's a link to
the live demo which I'm not going to
click because there are a hundred
elements here and I'm animating it to
make it look more realistic and I have
no idea how that is going to look on a
projector and this is also done in the
same way and there is a live demo or
real them of it and it's also using like
really really narrow line to pixels and
I apply a rotate X and what this rotate
is going to do is going to rotate this
ribbon is going to make a rotated like
this and the translate is going to
translate it along the y axis which
changes direction because of the
previous rotate and it goes from going
pointing downwards this to pointing like
that in that direction and there is
going to be another rotate Y which is
going to rotate each line and a
translate which is going to position it
it would be on a circle if we were to
ignore the first two transforms but
there are also the first two transforms
which make it a bit of a sparrow
and there's also something like this and
I've had a toy like this when I was a
child and I used to play with it and
somebody challenged me one day like do
this with CSS so I thought alright I'll
do it and it's done in approximately the
same way as the ribbon except segments
are wider and I call this a worm because
we don't really have to limit ourselves
to lines and strips and squares and
stuff like that and we can do this stuff
at circles and my dad was revolted it's
so pretty why do you call it such an
ugly name and this the entire surface is
rotated so the initial y axis points
like this and the translate simply moves
each circle a bit more down down down
down down down down and the rotate and
rotates it like this and the translate
positions it on will be a circle if we
were to ignore this translate the first
translate and the rotate X makes it
perpendicular and the scale makes it go
from this size the smaller smaller
smaller until you can barely see it
there and this is the last surface and
this is simply an arc because we don't
have to take the into our circle we can
take just an arc and taking the the arc
we are just scale it because it goes
from this long to just this line here
and then we just rotate it around itself
and we get this shape so now let's move
on if the first starship seemed a bit
complicated we can just stun make it
into pieces and we can split it into two
halves and each half is like a cup with
a Pentagon as a base and five more
Pentagon's on each side so let's see how
we get this we are start with the
and lateral face and the base we rotated
by 90 degrees and then we translated by
the value of the incircle and now we
move on to the lateral and we rotate it
and we translate and it's the same thing
as for the prism and adding adding up if
we add another angle we get 108 and 180
and so on the others and it's all the
same for the other side and the same for
the other half and now let's see how we
make into pieces the other one just
didn't start right from the beginning
it's like this and you split it into a
pyramid and an antifreeze
and maybe some of you are wondering why
I showed you that bowl at the beginning
well we can morph this shape into a ball
and this is actually not working right
and it was working right a few minutes
ago and I can't believe this damn it
damnit but I do have it working right
this is it yeah this is working right
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>