<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Jan Jongboom: Run Your JS App For Years On A Single Coin Cell - JSConf.Asia 2016 | Coder Coacher - Coaching Coders</title><meta content="Jan Jongboom: Run Your JS App For Years On A Single Coin Cell - JSConf.Asia 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Jan Jongboom: Run Your JS App For Years On A Single Coin Cell - JSConf.Asia 2016</b></h2><h5 class="post__date">2016-11-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3HLRwcVqgFE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello hi yes
incredibly good to be back here
third time actually here at here in
Singapore I was here five years ago when
Thomas organized J s Camtasia was called
back then my name is Yong Yong boom
I am developer evangelist IOT at arm
arms the company that makes it basically
all the chipsets all the chips are in
your phones
in a lot of the smart devices that you
might have in your house have ARM chips
in them and we're going to talk a little
bit about JavaScript and IOT I know that
this morning if we're talk from woman
from tehsil we're gonna build on top of
that we're gonna take it one step
further we're not just gonna look at
okay how do I do my prototyping in
JavaScript but if we go from there how
can I run that application then on a
coin sell for multiple years which is a
challenge so when I propose this to to
Thomas Thomas said this was me and
Thomas in Bali earlier this year
Thomas said yeah it's fine if you come
back but you need to bring lasers so
what we have in front of ear for lasers
that we're gonna utilize later in this
point and later at later in this talk
and hopefully I have something for you
to take home as well so in the last five
years I've seen JavaScript change a
tremendous bit
javascript has more or less and don't
ask me how it happened jobs get this
taken over the world
we we've seen JavaScript pop up
basically everywhere in the last few
years you know when I started
programming and this were in the days
that Phoebe script was still a thing
JavaScript first took over the browsers
then all of a sudden it started taking
over servers as well when we got no GS
and the situation that we're now in is
that is even making its way into the IOT
space two years ago or a year and a half
ago it's J's conf us we did a program
called node Rockets in which we
developed and builds senior just by
ourselves a rocket powered by JavaScript
videos that based on water power will
shoot up in the air write a JavaScript
program where we can verify whether it
was already going down when it goes down
deploy a parachute lengthen things
safely get a nice video everything had
happened as you might see from this
photo our rocket didn't completely work
as planned but there was JavaScript
inside and the reason the JavaScript
gains momentum here around these kind of
solutions like I want to build something
connected or something smart that
doesn't even need a screen or doesn't
even it's not even mains powered it's
because it's easy to learn and because
there we can easily make a big community
around it you know we've seen libraries
like like Johnny Five with team boards
like tehsil they make it really easy to
leverage JavaScript leverage the amazing
community that is around javascript that
we might miss from traditional
programming languages traditional
programming methods for IOT devices and
see them here to quickly help us build
connected devices now typically these
these solutions including the the rocket
that we built run on a development board
like a recipe by a chip or maybe a
tehsil often using a library like Johnny
v the JavaScript robotics framework
there many others the key is everything
is built on top of no GS and that has a
number of really big downsides the most
important one is that well no GS is
desktop software right battery usage has
never been a concern no Jess's desktop
software running on desktop great
computers I can run a full desktop on a
Raspberry Pi so it means that
the two biggest downside that I see
there its first of all it's way over
powerful we're trying to do every time I
see an article on the interrupts where
basically someone says well I got this
super cool temperature sensor on a
recipe by three running yeah I wrote the
program in OGS the only thing that I'm
thinking at that point is well that
you're using a quad-core machine to run
a temperature sensor it's got this
computer good way around right and this
is bad if you if you want to go a little
bit further than just simple prototyping
on one end it is equally expensive to
put a Raspberry Pi in everything runs
you $40 the other thing which is no I
think is is worse in that sense is that
well look at look at battery usage
current consumption arrests replied
three in idle modes consumes 2 + or 20
milliamps of current if you if you told
me this a year ago or no idea what you
were talking about but let's compare it
if we want to run that rest free pie 3
for a year on a battery you know it's
not even a coin cell relatively powerful
this is the budget that we need to work
with we need to be sixteen hundred times
more efficient to run a recipe by three
off a battery than we can currently do
can we do better
I bet you were expecting Obama here sure
so let's look a bit at like how
professional companies do that if I'm
building a real IT solution today what
am i using well this for example a
Honeywell sensor temperature sensor that
you put outside these weren't fine on
batteries and if they've run fine on
batteries for many years the key here is
my controllers my controllers are really
tiny computers running on really really
tiny chips this is one this is a chip
from Nordic semiconductors it's point
six centimeters five point six
centimeters that's a scale that we're
thinking about this is a development
board for that ship this little thing
you can't even see it from the audience
that is responsible for all computing it
combines the MCU it combines RAM and
combines flash storage and a Bluetooth
chip in a half centimeter by a half a
centimeter it's insanity but you know
it's a trade-off yes they're small and
yes they are cheap typical mic
controllers run one dollar two dollars
very easy to integrate in your own
design but it has a trade-off
I can't run Linux on of it Linux on it I
can't run another operating system on it
the cons run v8 on it so that means that
no GS is kind of out of the question the
way they're not powerful enough for that
a powerful mic controller will maybe
have 80 megahertz of processor speeds
and 64 kilobytes of RAM you know and
with with a lack of power also comes a
lack of ecosystem because it's hard as a
program then it's C++ it's assembly that
means that we don't get a nice ecosystem
around that we have with JavaScript sort
of got me thinking I've been I've been
toying with the idea of JavaScript and
connected devices for the past two three
years and in a way I want best of all
worlds I want two cheap designs of a
microcontroller I want the easy way of
integrating that into my own designs but
also love to have a vibrant and
community around that similar to what we
can currently do in the know GS
connected devices ecosystem wouldn't it
be amazing if you could run JavaScript
on these microcontrollers in arm we've
been thinking about ways of making my
controller development easier already
for about the last seven years so we we
developed a product called
embeds mr. program working on the day to
day basis well the first thing that we
wanted to do is make Mike control
developing in general easier so we
created the ambit platform with over a
hundred board support that's two hundred
thousand developers you guys have no
idea what it is because you're not
embedded deaths but it also means that
we already have lots of api's libraries
and community around it's not enough
that's what I'm saying is if LR
evangelist I wanna want to have a bigger
community of course I want that you know
it's all in C++ and then game along Sam
Soon
Sampson developed a Jerry script is not
the official logo if you've seen
Seinfeld you understand the reference
let's develop a Samsung and it's a
JavaScript VM for ultra constraint
devices the Jerry's give VM unlike no GS
runs on Mike Rotolo the whole idea is
that it fits in 64 K of RAM and it's
written in Japanese he plus plus so I
figured if we can combine these two
projects we have a met on this side
making it super easy to program on my
controllers for a lot of different ones
so we don't need to port to a new market
role every time comes out we still have
the flexibility of JavaScript VM so
that's the project that there were that
was launched actually this morning and
worked really hard to get the website
out which is called JavaScript and
embeds and it combines the best of all
worlds of my controller development with
JavaScript it combines the power to run
on little tiny boards like these and
this is a this is a microcontroller
under $2 retail price and they're two
dollars you can buy it in single
quantities as a Wi-Fi chip on board and
now can run JavaScript can run all your
programs that is freaking
awesome that is okay getting ahead of
myself so today we're releasing that we
runs on 40 different boards already so
you can just go to a website pick any of
those boards so my Wi-Fi so my bluetooth
all the critical parts drivers operating
system etc are still written in C++ it's
it's a project that's been has been
going for about seven years already so
we have stuff like deep sleep and have a
way of like putting your microcontroller
in really really deep sleep states you
can leverage or C++ ecosystem around
it's in every connectivity methods your
whole application code Korean JavaScript
still take advantage of our stuff that
we done on making it run efficiently
making it go to sleep whenever possible
while still maintaining the flexibility
of writing your application in Jas so
this is one of the simple programs that
we have really easy how to override
blinky you start with cloning our sample
write a little bit of code run gulp
JavaScript stuff it creates a file and
you just drag the file onto your boards
the development board mounts as a USB
mass storage device so you don't need
any drivers just drag and drop them
application running nice flexible be
aware if you think like yeah I want to
do this javascript is really really slow
on this on these things raw performance
is about a hundred times slower than C++
but because we've written all the
critical parts in C++ you know the boot
load our networking stacks basically
everything else that not your user code
efficiency is relatively good especially
if you sleep a lot
you can spawn out of JavaScript whenever
we need it we can run stuff in C++ in a
separate thread but this way we have
like a with a model where we have the
nice flexibility of Java scripts but
still can run stuff at native speed in
C++ a bit similar how nodejs does that
on on Linux systems but it's through
microcontroller right yeah applications
code might run a bit slow but it's a
real microcontroller it's come with all
the benefits we can run this is one of
the development boards again this one
even as a
little coin cell holder welcomes a
little here and that's because it's
actually meant to run off a coin cell
using this approach we can write
JavaScript applications that run
straight on that absent members later it
also allows you to do some really
interesting experiments the BBC micro
bits is a low computer that's been given
to every 10 and 11 year old kid in both
the UK and ins and in Iceland now it is
how they learned blurt program as part
of their official primary school
curriculum it's really cool
all these kids like a million kids have
gotten like this little board and had
learned a program and by having an
abstraction layer on top of it on top of
like our native api's we can all of a
sudden have little simulators that run
sobriquet the program it in the browser
drag little blocks together we can
simulate it and after that we compile it
run it in our VM and all of a sudden
have the same experience on the device
and here same thing we can do and this
simulator that comes with J's and embeds
I hacked it together in the plane here
so on top you see basically three three
LEDs toggling will run exactly the same
on the board and then we can also fake
extra peripherals like the Bluetooth
stack so in this case you can connect I
see what is happening if I could connect
my phone to the device and for example
toggled toggle the LED year which I just
did so it's some really interesting
things some other stuff do we do is that
we abstract away many microcontroller
problems manual threat management
interrupts switching it's all abstracted
away behind the JavaScript event loop so
even if you wanted to make like a real
product out of this having a JavaScript
abstraction on top of it is really nice
in the future what I would really like
to do is because we have everything in
the event loop automatic power
management just put the device to sleep
you don't need to do anything you don't
need to call sleep we just realize oh
every second do this in between I'll go
to sleep and make everything magic so to
come back can we run this on on a on a
coin cell right now yes
remember to 20 point 1 to 7 milliamp is
the budget that we have you want to run
is one year in AAA battery these are
numbers of a JavaScript beacon with
Bluetooth on sending a message every
seconds broadcasting it outs her budget
is point zero to a there's seven years
in an AAA battery and on a coincidence
out a year and a half that is freaking
impressive search how script yes thank
you so current States its released today
it's some embedded comm /cas
with 40 board support it's unfortunately
at the moment if you want to use C++
libraries we have about 6,000 of them
for basically every peripheral that
you'll find if you buy sensor if you buy
an actuator if you buy an accelerometer
ever we need a C++ binding right now I'm
hoping that someone here in the audience
will say yon of course I'm gonna help
you with that because then we can
automate that shooting me to art it's
Apache 2 license it's better but please
help us it's gonna be freaking amazing
I said everything available Emma thumbs
yes here's one of the things we can do
with that whoo got lasers controlled
through JavaScript and I can do stuff
and I don't know if you can actually see
this from the audience because they're a
little bit less bright than I thought
but lasers JavaScript's all kinds of
cool stuff runs on the coin cell if this
is not the future then I don't know what
is and with that I want to thank you all
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>