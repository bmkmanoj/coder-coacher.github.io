<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Simon Tennant: The API is dead. Long live the protocol! -- JSConf EU 2013 | Coder Coacher - Coaching Coders</title><meta content="Simon Tennant: The API is dead. Long live the protocol! -- JSConf EU 2013 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Simon Tennant: The API is dead. Long live the protocol! -- JSConf EU 2013</b></h2><h5 class="post__date">2013-11-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uwQsU0PwtaE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you
you
so I'm from a little team called buddy
cloud where an open source project and
we have the the big big hairy audacious
goal to kind of reinvent messaging we
look at looked at the email and we've
said like you know this is this protocol
that's been around for the last 30 years
let's think about what do we do for the
next 30 years so we think that we can
really build something better right now
we're working with with governments with
with small companies and lots of other
small software teams to kind of change
messaging to to let you share files
better to shift messages around and this
shifting messages around is is really
important if you think about the
internet it's it's totally built on
these little boxes of you know Facebook
feed or a Twitter feed or this crappy
forum software feed when you type stuff
in and it gets pushed out to your
followers you get retweets back or you
get likes back or you get flame wars
back from the crappy forum software and
we think this can be can be done a lot
better but this there's still a lot of
incompatibility out there so I got a
call from from another South African
here and he was like a little bit
desperate he he'd arrived with his South
African plug saying like hey man do you
have a power adapter I have nothing I
can't find anybody in the hotel what do
we do and this really reminds me a lot
of like how we build our software right
now we build software much like a plug
you know it plugs in and it works
perfectly with an API but as soon as
there's some other system that comes
along we try to like Jimmy it with with
a power adapter you know those ones you
stick in the wall you hope they don't
fall out and it sort of hopefully
converts to the right voltage and
whatnot and that's kind of the world
we're living in right now it's kind of
sucky so we think we can do this a
little bit better and just so we're
clear about this when I'm talking about
api's I'm talking about like systems
that interconnect with other systems
very simple when I'm talking about
protocols I'm really talking about like
a gentlemen's agreement like how does
you know when we when we're driving down
the road I'm pretty
much on the right-hand side you passed
me on the left and that that kind of
works as long as we all follow the rules
but why does this matter like why should
we really kit really care about this
well back in the olden days once upon a
time we used to build these nice
distributed systems and if you scratch
underneath the surface of the internet
you still find a few of them around and
they've been around for a hell of a long
time for example DNS this is something
that was built in the 80s and yet it's
so critical to what we're doing and then
we've we've thrown a lot of that away
we're in the cyst this world where we're
being told like how we can and can't
build against other peoples api's and
what we can do and this this kind of
reminds me of the the old days where we
had we had the mainframe and you know
you had to connect in and both of us
remember like you have all your data on
a centralized system and you were
totally beholden to somebody else on how
you would interact with this stuff and
then along came the pc and suddenly
everybody could do everything and
there's this huge like wave of
innovation that happened in the bedroom
in the home in the office everywhere and
we've kind of lost that we've lost a lot
of that and what I want to talk to you
about today is how do we get some of
that back how do we go back to the
future and start building and designing
these these distributed systems and for
that we need protocols because protocols
let us agree on a sort of common way on
how we can interact and the other super
cool thing about this is when we can
push the sort of innovation out so
instead of being on a centralized like
team in the middle controlling what we
can can't do when we when we can all
work on the edge of the system then the
amount of innovation really explodes
like the pc exploded so Robert Scoble
has this interesting analogy it's called
the ice cream of the internet and we
have we have this like super cool step
like things happening right now we have
a phone in our pockets where we can like
pull it out and we've got the entire
world's information at our fingertips we
can take photos and they magically
appear on certain websites or you can
swipe up and Google now tells you where
to go
and we're living in this like super
super cool world of really cool stuff
happening but we're not really asking
ourselves like do we want to be sharing
all of this public this information
publicly now I don't want to stand up in
front of you and say look centralized is
bad decentralized is good I think the
the answer to that is is far more
nuanced the yogi berra says you know
when you come to the fork in the road
you take it centralized definitely
hazard advantages like if you think
about Facebook they came along and say
it had to sit there and design a
distributed system distributed is really
hard like when you don't control all the
nodes on the network it's it's a tough
problem to solve like nodes go down how
do you resynchronize messages things
like that so but but we also know that
that decentralized kind of wins in the
long term like the car decentralized
model the GSM protocol it's
decentralized pc again email so we did
solve this with email email is is in
many ways pretty fantastic protocols
been around for 30 years like there's
not many people who can write an app and
say yeah my apps okay maybe PHP but very
few systems have been around for as long
as something like email and it it works
well because people can innovate on
different areas of the stack you can
innovate on the server you can innovate
on the client there's a sub gentleman's
agreement on how it should work this is
codified up into protocols and rfcs but
there's also well we know it's it's
insecure client to server is pretty
secure but server to server as we're
finding out from some of the Snowden
stuff is is pretty damn insecure it's
completely clear text the other thing if
you think about email is like it could
be so much better if you if you get an
email message imagine you're getting an
invoice if this invoice was tagged up
and dealt was the right way it wouldn't
land in your inbox you wouldn't have to
process it would just magically go to
your accounting software or to your
accountant and seriously this is
is a bit broken and let me let me just
share one other piece of brokenness and
then we'll think about how do we fix
this so the other part is like we have
all of these services these are great
services so let us do super awesome
things but why do we have to have three
different accounts on these systems to
be able to post and go to these
different sites to post and we never
have these comments coming back we're
pretty smart people I'm sure we all
agree that the stuff could be a little
bit better so let's think about how do
we build this better and I'm going to
share with you some of the things that
that myself and my team have been
thinking about some of the problems we
face and how we've we've come up with
them we know that the system has to have
structured messages you know if you're
passing messages around between systems
you kind of wanted to be tagged up in
the right way so this is like the
Activity Feed format that's some subject
object verb so so-and-so tag so-and-so
in southern size photo so that's a good
starting point and that's sort of some
of the stuff that we're starting to
think about we definitely want to
distribute it anybody should be able to
host it should be reliable and it should
be easy to implement so in terms of
thinking like how do we use protocols to
design a system where anybody can run it
and anybody can build apps on it and all
of these different apps and systems will
intercommunicate the first thing we need
to think about is how do we how do we
deal with addressing like you know
there's been some social networks that
have said your identity on this on this
network is like a URL that sort of works
okay but people really sort of think
about their email addresses as an
identity so we we took the assumption
that email is a good starting point for
this doesn't have to be email but the
format should be something somewhat like
email and that works really well because
you've kind of got a system example.com
knows how to connect to remote com
it knows that there's a user at these
different services and then all we have
to worry about is how do we build an API
and how do we build this Federation
protocol between different domains so
these messages can be passed and then if
we're if we're building this you know we
have to think about how do these servers
find each other and interconnect so
again we're going back to our roots the
the 30 year old technology comes to the
rescue dns has this great record in it
it's called the SRV record and what this
basically says is like when you want to
do something on a remote domain you can
find out which server is responsible for
that it's not dissimilar to the MX
record in an email which says sending
email connect to the server that's the
email server this is more generalized
thing what this is saying is like when
you want to talk to your app running on
a remote site basically connect to port
443 and do stuff do stuff using the
protocol but then like we we have
clients and going back to our email
analogy you currently if you have to set
up email on your phone you pull it out
and you've got to find out what your
your mail server is where to send email
stuff like you're going to type that
alone we can do much better than that we
can actually have a protocol for
discovering like where to connect and
this is important because imagine
imagine you build this super-awesome
next-generation communication protocol
and it's an app and you can download it
it's important because the user expects
to just log in with their user app
domain com and you want to be able to
find out domain com where do I have to
go for that like where is the API
endpoint for domain com and the guys
over at iono have solved this they've
said look there's this DNS record that
you can use to look up stuff so users
don't have to put in anything more than
just the username and password and this
basically is its tax record very easy to
parse in any software and that would
basically result in
connecting to this server port 443 and
then your API would be prefixed with /ap
I there's three more problems we have to
solve before we can come up with our
super awesome next-generation
communication protocol is servers not
always being online so how do we resync
our servers this is this is not
something that's that there's a perfect
answer to on the body cloud side of
things we say that look you know we
can't guarantee that all servers would
always be online but when they do come
online they can ping out to all of the
other servers with users that follow
their their channels or their data and
at the same time remote servers can
always like keep-keep polling like are
you back online are you back online but
it's just something to be aware of
because if you assume all servers online
you're going to end up with a lot of
problems and then the time to glass is
really important we've worked kinda with
the assumption that with you within one
second you really want to have data
appearing on the mobile screen but again
in the distributive world you've got to
really rethink a lot of these
assumptions so imagine if i turn on my
phone and I'm following like 20 people
on 15 different domains my phone now has
to go out and discover these do dns
lookups set up TLS connections between
15 other different domains as just not
really going to be a very impressive
time to glass so this is something that
we tried to solve invite card by
building this inbox server so what what
happens is when your client is not
online these remote servers are pushing
data in and pushing updates through into
your inbox it's basically a spool you
come back online and within one second
you've got data appearing on your screen
and I think this is an important sort of
architectural or architectural decision
for any type of software to be to be
building these things so that you've got
a very very fast time to glass and then
it's not just jealous lovers that are
trying to write read
email this is this is a really tricky
problem to solve like I don't claim that
we've we've solved it well yet when you
have you know of course email hasn't
even solved the the bottom part of how
do we connect service to service this is
something that we've solved but we still
have to work with the assumption that
you you trust your sis admin so when
you've got code running on a remote
server you have to kind of trust the
remotes to said min and well the real
solution to this is going to be to have
systems that do end-to-end cryptography
but you know my parents are not so good
and I'm not even so good at managing
like private keys on my end devices and
distributing them to different end
devices so really tough problem to solve
it is something that we've built the
architecture for and we're trying to
think about how do we solve it but it's
a tough one so there's this couple of
other teams that are also working on
this type of stuff you've probably all
hold it heard of the Diaspora project
there's the freedom box from the from
the Debian guys pump is a pretty cool
npm based system that evans working on
and you know there's other systems like
the and yet guys are doing some pretty
awesome stuff with building lots of
small systems that then interconnect so
there is stuff happening in the space
and my like whole to you is that we get
involved with standards committees like
when you're building your apps think
about it if this is something that can
be really like pushed to a broader
audience however there's a big warning
about standards committees there's two
types of people on standards committees
the first one is is the type of person
who enjoys being on a standards
committee and enjoys writing specs and
these are people you really really want
to avoid do not go near them they're
toxic we try to take the other approach
we try to like build software generalize
it and
then come back and this is so much more
powerful because the first group of
people really think about how the world
should be and I think it's so much
better to accept the world as it is and
then build stuff and we discovered that
this the hard way we we sort of designed
something we found them we had about a
million users using this chat
application that we built on nokia
phones and it turned out to be a
complete nightmare there were so many
bad actors so we had to actually go back
and change this back and change the
protocol to to put in some more sensible
assumptions about what people would the
initial state of the network so i can
also highly recommend working with the
guys at the XMPP standards foundation
this is like one of the most friendly
standards committees if you ever need to
pass messages between systems these guys
these guys would love to hear from you
it's very easy to write a spec they'll
accept it they'd probably give a little
bit of pushback but it's a nice group
and they organise awesome summits every
year so I spoken a little bit about
buddy cloud we've we've built most of
the system we think we've solved a lot
of these problems the code is of course
all open source will try to build
reference implementations wherever is
possible what we want is that people
start using using the code and building
in like generalized communication into
their products like I think it's crazy
that every single product we rebuild the
messaging stack every single time it's
like if we had them we wanted to include
maps on a web page we would we're not
going to build like map rent I'll
renderers we simply drop some coded but
I think that using AP is and protocols
we can actually build a slightly better
way of of this communication and this is
our roadmap we're almost ready to do an
initial release of course there's
there's stuff working on the web already
if you've got a buddy claro calm and my
my call out is like you know this if we
are going to build the next 30 years of
messaging this is the type of audience
like if we can't solve this here in this
room then we're stuck with email and
Facebook feeds I think
sir it's time to change that so let's
let's innovate on the edge and make a
difference thanks everyone
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>