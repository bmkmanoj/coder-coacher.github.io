<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Robert Kerr – Science in the Browser – Orchestrating and Visualising Neural Simulations | Coder Coacher - Coaching Coders</title><meta content="Robert Kerr – Science in the Browser – Orchestrating and Visualising Neural Simulations - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Robert Kerr – Science in the Browser – Orchestrating and Visualising Neural Simulations</b></h2><h5 class="post__date">2015-10-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fq2IFFK08Ik" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">reject hi everyone I'm really excited to
be here talking to you I've come all the
way from Melbourne Australia so today
what I'm going to talk to you about is
how I use the browser to do science I'm
going to talk about how I use it to do
my research which involves simulating
brain cells but I'm also going to talk
sort of more generally about my
experiences and thoughts relating to
sort of the crossroads between science
and web development but first I'm going
to tell you to origin stories and like
all good origin stories both of these
involve science so the first one I think
probably most you are familiar with is
it's the birth of the web so the web was
created in the late 1980s by Tim
berners-lee at CERN and it was created
to help scientists do science it was so
the problem that was happening was that
there were all these particle physicists
who would travel discern to do their
experiments on the facilities there and
they needed a better way to share and
access their data when they go back to
their home home laboratories so as Tim
berners-lee put it in those days there
was different information on different
computers and you'd have to log on to
these different computers and often have
to learn a new program to get at the
data so often it was just easier to to
meet with the people um over a coffee or
something like that and so he saw the
web as a way to solve these problems and
so shortly after that the web spun out
of the scientific community and became
what it is today now the second origin
story I'm pretty confident not many
people here will know about it's the
story of how I came to be speaking here
today
so like many of you and as Ronald sort
of pointed out earlier a lot of people
come from a different area and I'm no
exception my background is in sort of
mathematics and engineering and then
went into modeling brain systems trying
to understand how they worked much stand
here so and I was so interested in that
that I decided to do a PhD in it which I
don't recommend people get into
half-heartedly PhDs are hard and it's
not because you need to be super smart
or anything like that it's hard because
you have to stay interested in a
particular topic for a long time you
have to be the one driving it forward
and motivating it you will probably be
the only one who really fully knows
what's going on and really cares you
know if you're successful and this needs
to be the case for years and because of
this the end of a PhD is often a time of
stress disillusionment and
procrastination so I didn't make a
jacket out of tax receipts the way I
procrastinated was instead teaching
myself Ruby on Rails and so I'd like to
help me learn i decided to build a
project and so actually built a rhyming
dictionary called any rom-com so us can
check that out if you want and I taught
myself JavaScript as well to try and
make sort of a nice interface for how
you could you know make a particular
kind of rhyme that you wanted so I
learned angular for that and I found
myself really enjoying doing this I was
really satisfying and it's not just
because i had a thesis but I didn't want
to ride but at this point I did
eventually hand in my thesis and I got a
job working for IBM Research Australia
still doing euro science research
believe it or not but at this point I
now had a taste for for what for what
the web could do and and I now knew
about this whole other world of cool
stuff and and maybe this could help with
my research so before I go any further
I'll give you some context to my
research
so this is the human brain well it's a
plastic model of human brain it
represents this hunk of meat that sits
in our head that is somehow responsible
for all our memories emotions and
decisions our sense of self and our
ability to comprehend the world it takes
information from our senses from our
eyes our ears and our fingertips and
somehow members this and we can then use
this information to to speak to move but
how it does all of this is largely a
mystery and understanding this is sort
of the map the fundamental goal of
neuroscience what we do know however is
that the brain is made up of a large
number of cells called neurons in the
human brain they're approximately 86
billion neurons and each one of these
forms 10,000 connections to its
neighbors and it's this dense network of
neurons that scientists believe is what
sort of gives rise to the brains
abilities so if we now just focusing on
a single neuron we see it has sort of
this fairly common structure it has
incoming fibers called dendrites and
which carry signal to carry a signal to
the cell body called the soma and
there's an outgoing fiber called an axon
which branches and forms connections to
the dendrites of other neurons um but
despite this basic structure there
exists a large variety of shapes and
morphologies for these neurons depending
on where in the brain our and what type
of neuron now and luckily
experimentalists have there's an online
database where you can go through these
different types of of morphologies so
experimentalist what they've done is
they've taken brain tissue they've
stained neurons with fluorescent dyes
they've been taken many many microscope
images at different depths what they've
been done is carefully traced well their
graduate students have carefully traced
through these microscope images in order
to
reconstruct like the 3d information of
the neuron and so you can see here are
some images of these types of neurons so
these are just sort of static images but
what the data actually looks like is a
text file so each point in here is a
sort of a point on the neuron starting
with the cell body is the first point
each of the points has an ID it has a
type so if it's a dendrite or an axon
has XYZ coordinates and has a radius so
it gives the thickness of the fiber and
it has its like parent point so the
point going back towards the cell body
and in this way it describes like a tree
structure which is what a neuron is so
very often in science it's it's
invaluable to have sort of a visual way
of looking at your data and this is a
prime example because it's very hard to
look at this and understand what's going
on like what does this neuron look like
and so I decided to build something that
would help me look at this so there they
were existing Java applets and that sort
of thing to try and visualize this but I
wanted to build my own I wanted to use
three jess to build something that I
could use so that's what our demo to you
now so this is kind of the very basic
interface I made where I can select one
of these text files that I was just
showing you and it loads up here and we
can zoom in and then rotate and so this
one's a little bit flat but we can see
it has a three-dimensional structure and
also i can click on points with in here
and see see the data that generated that
so i can see what type of fiber it is i
can see the coordinates of it and i can
see its ID so i can link it back to the
data so this is nice I've got like a
useful tool to help me do my research
but let's put that aside for the moment
and come back to the problems in science
that Tim berners-lee was trying to solve
with the web how we doing today how is
how a science going well the web has
helped scientific research a lot we can
now easily browse through scientific
publications from researchers around the
world and in addition to these reports
researchers can share and publish their
data and code for others to use I can
point to a number of websites just in
neuroscience such as neuromorphic org
with carefully curated data sets that
for other people to use and online you
can find the software that they've used
to analyze the data or to run
simulations and you can download this
and its documentation and forums around
how to use it but is this really that
different to how things were before the
web I mean it is we can now trivially
share information biet reports data or
code but all three of these to actually
use and understand require a high level
of technical understanding or technical
expertise what if instead we started
using and sharing interactive tools to
help visualize like fully visualize data
sets interactively without needing to
install anything what if we could share
interactive tools for performing
simulations that could be run anywhere
this I think would be a more complete
solution to the problems that Tim
berners-lee saw and researchers want to
be able to to share their results this
helps them make an impact in the field
and allows other people to build on what
they've done they just haven't had good
ways of doing this when there was
specialized software that was required
for simulation or visualization however
this is starting to change so recent
developments in browser technologies
like WebGL for instance and new
JavaScript libraries such as 3gs and
d3.js make the browser a compelling
place to build
interactive useful visual scientific
tools I'd say it's easier now to create
sort of an interactive scientific tool
in a browser than it is natively and
it's much more easily shared so let's
get back to me for for a minute I was
now able to visualize a 3d structure and
morphology of neurons but so what what I
actually want to do is to understand how
this neuron works how it behaves and how
when you connect a whole bunch of these
neurons up to form a network how this
ultimately leads to us to our thoughts
and memories and behavior so let's go
back to a second to our neuron diagram
so neurons in the brain communicate with
each other by sending burst of
electricity called spikes they each
receive spikes from other neurons fire
connections called synapses so there's
one there so when a neuron fires it
sends its signal out along an axon to
the end of the axon to the signups where
the synapse is made on to the dendrite
of another neuron and it excites our
this dendrite and we get a small current
being generated in the dendrite that
travels down to the cell body and if we
get enough of these arriving at the same
time in the cell body and neuron gets
excited past a threshold point where it
generates its own spike its own burst of
electricity which it sends out along
attacks on to other neurons and often
this whole setup is recreated in
experiments artificially by positioning
and electrode near the dendrite and
injecting current into the cell and it
was by doing these sort of experiments
that two English scientists back in the
1950s developed a model of how in your
own works so these in experiments
involved so this sorry to a mention
their names Hodgkin and Huxley were the
two English scientist and they did these
experiments by
using stimulating electrodes like this
one and also recording electrodes to see
what the neuron was doing the neuron
they used was the squid giant axon well
that was that was the accident of the
neuron they used which is
disappointingly a normal-sized squid
that has this very large neuron in it
and it was the size of this neuron that
allowed them to do these experiments
even back in the 1950s with the
technology they had and so the
understanding they got from this in the
model they developed off in your on it
one than the Nobel Prize which they
shared with another researcher John
Eccles who is actually also from
Melbourne like me so I don't have any
code to show today so instead what I'm
going to show is some equations so the
model they develop the mathematical
model developed is is encompassed by
these these set of equations and even
today this is sort of this type of
equations are the main ones used to
model single neurons and this is the
sort of thing I use so in my models a
neuron gets divided up into small little
segments and in each one of those this
set of equation dictates how the voltage
changes over time
so what I wanted to be able to do was
build a visual tool for constructing
models of neurons and configuring models
in neurons for example I wanted to be
able to choose where I was going to
inject current into the neuron and then
look at where in the neuron got excited
or I might want to look at adding
synaptic inputs from other neurons and
look at how the neuron responded so i
started building an interface to let me
do this this was something i spent a
decent portion of the last year working
on and it's something that I'm really
proud of my baby so I'm now going to
demonstrate the interface the first
thing I'm going to show you is how it
can be used to sort of set up a
simulation exactly how you want it so
set up the inputs and then going to show
you how it can be used to visualize the
outputs and see what happened in the
simulation so I'll show you a completed
simulation so jumping back to Chrome so
this is the interface it's it's pretty
similar to the one I showed you before
you can rotate and zoom in I've now got
a sphere for the cell body which sort of
helps a bit so you can see where that is
one difference now though is I can click
on a section of the neuron and look at
the properties for that section so I can
look at the sort of Jim geometric
properties like XYZ and are but I could
also look at I can also look at the
actual electrical properties of the
tissue so things like channel
conductances and that sort of thing and
so I can select for instance multiple
compartments and I can override the
default value for these and set it to be
something a bit smaller than it was and
I can then go and color the neuron by
this property so this is this is the
sodium channel density so how many
sodium channels are in this part of the
neuron and this is very important for
how in your own sort of behaves
electrically so here we can now see for
different parts of the neuron we've got
different channel densities so when that
where there's the most channels is in
the soma and along the axon we've got
less in the dendrites so flying and then
in this section we
made their be far fewer sodium channels
so it's in dark blue and we can also
color the neuron by by its radius so at
my visualization is just a skeleton
there's no actual volumes but here we
can see that this neuron has some sort
of thicker branch sort of going
vertically through it and thinner
branches coming out switching back to
that so I can also choose a compartment
within the neuron to inject current so i
can add an electrode here and i can
choose when I want to inject the can't
for how long the current gets injected
and the size of the current and so in
this way I can sort of set up a
simulation run that and then look at how
so let's now look at this is a similar
one I'd set up previously and run so now
i can click on a compartment and i can
visualize how the voltage change changes
over time through the simulation so down
here i've built this little graph using
d3 and i can also i can color the neuron
by by the voltage so i can now see the
voltage at any point within the neuron
over time so we can play forward through
this like a movie i can zoom in on this
and we should see it getting current
being injected here and the neuron gets
enough current to produce an action
potential a spike that travels out along
the axon and so this is really really
useful to me i can and i can look at
graphs from different parts
thank you so yeah this is a really
useful tool and I plan to start using it
for my own research to to understand how
in your own works what was going to it
yeah so I don't know this is an example
I guess a really accessible tool for
helping visualize what you're doing for
making making these sort of simulations
are like very visual so set up so what
have I learned from this well I've
learned that the web has has a lot to
offer science and the scientific
community and I'd really like to see a
much larger crossover between these two
communities I think there's a lot they
can learn from each other and to this
end a friend of mine Isabel and I have
been developing a course for teaching
researchers in the scientific community
teaching them sort of web skills and
teaching them to use d3.js so here's
yeah I'll suppose padova cool so here's
a tweet from Isabel about about the
course material we developed so we
developed it on github so that other
people could borrow this material and
use themselves and in fact before we had
the chance to teach this to researchers
at our University someone beat us to it
they in fact ordered at CERN so at CERN
as part of some summer student web fest
they told our materials around using d3
to visualize your data which is really
exciting we couldn't believe it so I've
shown you a visual tool for a vigil
browser based tool for configuring
simulation inputs and visualizing
simulation outputs but the browser is
sort of only half of the web what we
wanted to do was once we'd set up a
simulation actually then stay in the
browser and have that simulation get run
in the cloud
and then pull back the data from that
simulation and stay so still in the
browser seamlessly go through that whole
transition this would mean so
researchers being able to use this tool
mean they now no longer have to worry
about moving around files or setting up
or installing any software so this was
really exciting that's what I wanted to
do so this is the web app sort of i'm
using now i needed to be able to
orchestrate simulations and have them
store their outputs in the cloud where
they could be accessed from the browser
but this is not an easy thing this is
not trivial at least it wasn't for me
luckily though I work with a lot of
really amazing people who who I could
learn from him who could teach me also
the other benefits working at IBM is
they're acquiring all the companies that
do all this useful cloud technologies so
I could make use of that so I'm
deploying my app using an IBM product
called bluemix which is cloud foundry
but it also lets you connect in other
services so i connect to database to
keep track of my simulations keep track
of the data and what state they're in
whether they're still running but i need
to actually run their simulations so i
need to run these on virtual machines in
the cloud and as these runs so these the
simulations are actually run in c++
inside dr. containers and as they run
they need somewhere to put their data
somewhere the browser can get up so I
use object storage for this in both the
virtual machines and object storage are
within something another IBM product
called called softlayer another recent
acquisition so let's now see all of this
in action so here we were visualizing
visualizing Apple to this simulation we
can actually go back and so here I've
got a list of other simulations that
existed so we were in here so the green
simulations are ones that have been
completed have been finished
in yellow our simulations that we're
just setting up and haven't yet run and
so I can make a copy of this one we were
just in so it creates a new one over
here and then we go in and so we've got
this simulation we're just injecting
current at one point so we can now go
and modify this we might want to add
current in it here as well maybe we want
to do that after 90 milliseconds we can
also inject some current here maybe this
is a 60 and actually this one here I'm
gonna make it a bit stronger and so what
we can do now is up the top here i can
click a button called simulate and the
state of the jobs changes to running so
what's happening here is our web app is
sending the job off 22 softlayer to the
vm in software the c++ code is starting
up inside the docker container and as
it's running it will put its data in
object storage where the browser can
download it as it's running so this was
really cool we can actually watch the
simulation as it's going on now full
disclosure I didn't write the superloft
passcode my boss actually did he kind of
insisted he's written this sort of code
to model how current flows through a
neuron I think this might be his fifth
time so he thought he knew exactly how
it should be done he'd learned from all
his mistakes but the thing is this is
the first time that you can actually see
what's going on as the simulation is
running so if we click over here we can
see that some of the results have
already downloaded and we can color the
neuron by these oak like we wear before
I mean so this line here where you can
see it stops that's where the simulation
is up to so we can jump back and we can
play forward through here so being able
to watch this as it's running and and
this is all online so other researchers
can go on and see the models that you
created see the simulations you've run
collaborators now have a like a really
easy way to share their results and
build upon what each other have done
they don't have to worry about
installing software they don't have to
worry about transferring files so I see
this as an amazing way for collaboration
to occur and moreover it's an example of
a super accessible way of sharing
scientific findings that would otherwise
require specialized software and and to
do simulation and visualization and this
is much more accessible like people in
different fields or even the general
public can look at this and and have a
much better understanding of what's
going on and then if they read a journal
paper so I see this is something that
science really needs I see it as like
the future of science so as the last
thing so I'm used to giving academic
talks and at the end of an academic talk
there's always an acknowledgment slide
so that's what I've done there's a
number of people I'd like to thank the
first person is Glenn Madden so he's the
one that initially got me into into into
the web into web development and he
continues to be a mentor around anything
web-related the second person is Isabel
Carol Cornick so she's the one that I
built those d3 course materials with and
she also provides an endless source of
feedback for this project and for other
projects I like to thank Ben Schwartz
and Carolina sure they were the ones
that encouraged me to actually submit to
this conference an international
JavaScript conference which is not
something i think i would have thought
of otherwise i'd like to thank IBM
research and in particular my manager
who wrote that c++ code for for
encouraging me and seeing the value in
this work and also all the other amazing
people i work with that IBM who taught
me a lot of the skills I've needed to do
this lastly I'd like to thank the
organizers of rejecters
for for inviting me and for being
awesome and all of you so thanks for
listening</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>