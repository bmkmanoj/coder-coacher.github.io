<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Claudia Hernández: Down the Rabbit Hole: Javascript in Wonderland | JSConf EU 2017 | Coder Coacher - Coaching Coders</title><meta content="Claudia Hernández: Down the Rabbit Hole: Javascript in Wonderland | JSConf EU 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Claudia Hernández: Down the Rabbit Hole: Javascript in Wonderland | JSConf EU 2017</b></h2><h5 class="post__date">2017-05-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gE9xn-KOp1I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so first off thank you very much for
having me here today
I'm so excited to be at JSF Europe it's
such a dream come true so my name is
flora Mendez I'm from Mexico and as you
can see I'm a huge fan of Alice in
Wonderland but you know I'm also
front-end engineer in this French
company in Paris called dailymotion so
if you have any comments suggestions or
even complained you can find me on
Twitter as for support don't hesitate
but enough about me because you know you
are not here for me so for the following
30 minutes I'm actually going to be your
own personal why draw because I'm going
to drag you with me into the rabbit hole
and I'm going to show you some really
weird things going on in JavaScript but
one things first I'm not an expert but
I'm a really really curious person and I
just really love to know how things work
this is one of the main reasons that I
actually decided to do this talk so most
of the things that you're going to be
seeing in the following slides are
things that I have come across and at
the beginning I didn't understand what's
going on so the beauty of JavaScript
JavaScript is this kind of language
where nothing is what it is because math
mean is obviously not less than math.max
because in JavaScript everything is what
it isn't Mad Max is equal to minus
infinity and math mean is equal to
infinity and contrariwise what is is not
in JavaScript - totally similar looking
areas are not the same and what is not
actually is did you get in like what's
going on JavaScript with the touch so
I'm not going to go into detail into the
previous examples but if you're curious
about them they all have to do with
inconsistencies with voting point
numbers in
scrip and also in a lot of languages and
also knowing the difference between
primitive and reference 5 now the thing
with JavaScript is that gel scrip is
very easy to learn everyone can do a
console log in their browser but it's
even harder to learn in a deeper and
meaningful way and this is our first
part through Wonderland and our first
stop is now so nan literally stands for
not a number however gives what ya type
of man is number it's like what's going
on JavaScript so in really simplistic
terms none is use the return value of a
mathematical operation that fails so if
we try to do operations on where both
operands are not numbers we will get man
or if we do things on numbers that are
not defined such as dividing seed of
like 0 by 0 or trying to get the square
root of a negative number we will also
get man
so basically man is just trying to tell
us something along the lines of hey I
try to perform this mathematical
operation but I fail so here's this fail
number instead
and maybe the label man it's a little
bit misleading maybe it would be way
easier to think of 8s I don't know bad
number fail number invalid number more
than not a number because bottom line 9
if you love numeric types but it just
represents a value that could not
represent a valid number so in
JavaScript mathematical operations can't
lead to an error or crash they just give
up man so why do we actually want it to
know it's value is equal to 9 or not if
this was your first guess let me tell
you something actually none is not equal
to greater than or less than anything
including itself but why is that you may
be wondering so none is not only a
JavaScript being none is actually
defined by this standard called the I
Triple E 754 forty point Center and to
keep things short because it's a very
minute talk basically what this standard
tells us is that there is 16777215
different floating point values as none
what does this mean this means that
there are so many different
representations of man that is highly
unlikely that one is equal to another
and so yes indeed none is not equal to
men I guess at this point we can all
agree that man actually stands for not a
not a number so the only way we can
actually know if if a values man or not
is using javascript built-in function is
man so now let's talk about certain
areas because that's always fun
so can you spot what's seriously wrong
in this code I don't know about you but
normally in my world twenty-five and
thirty three would be absurd number four
not before but you know JavaScript
things are never what they seem
what's going on actually so what we're
moving here is that javascript is doing
lexicographical sorting what is that
it's just like dictionary like
alphabetical I kind of sorting not
numerical at all so what's actually
happening under the hood is that
JavaScript is just transforming all of
the elements of the array into strings
and then for every character in those
strings it's comparing the Unicode code
point value so this code point value is
the unicode ID of any character so in
this example we have a color array red
and blue we call the sort method in blue
is coming before before red because of
American thirteen but in the second case
we have numerical array with eighty in
mine and it will be the exact same thing
as we call the the third method with
those numbers of strings
so basically ad has a smaller Unicode
code point value so in a more simple way
we can just say that 8 is
lexicographically less than nine and it
starts to make a little bit more sense
now
so if you want to know the code point
value of any character you can use the
string code point a good point at the
method so going back to our previous
example now 25 and 33 are indeed
lexicographically less than four it it
starts to make a little bit more of
sense but when we're trying to sort a
numerical array I guess lexicographical
sorting is not the first thing we want
so what we're missing here is that the
certain methods can actually take as a
parameter compare function so if a
compare function is given given a MV if
a is smaller than V we will try minus 1
and a will come before B if a is greater
than B we'll return 1 and B will come
before a and in any other case we will
just return 0 and a and B will remain
unchanged now if you're as curious as I
am maybe just maybe you have a wonder
what's the actual sorting algorithm
behind the native sort method in
JavaScript and the answer is that
actually it depends on the JavaScript
engine because the ACMA stream is
standard doesn't really impose a certain
algorithm to be used so every JavaScript
engine is free to use whatever they want
so now out of curiosity view if you want
to know a spider monkey for example from
Firefox is using a combination of the
merge sort algorithm and the insertion
sort for smaller arrays for performance
and v8 from is using a quick sort and
insertion sort so that's just a fun fact
for the people who love computer science
so going back to our previous example
now that we have finally provided a
compare function we can have a numerical
sort the Q the operator how many of you
have actually used this operator before
okay a few of you so this is actually a
bitwise operator in what's that so a
bitwise operator is an operator that we
take a number it will transform it into
a sequence of beats and then it will do
some kind of operation on it and you'll
return back a new integer as a result it
is very important now maybe just maybe
you're familiar with the bitwise and
individuals or but huge warnings these
are not the same as a logical another
logical or but they are actually seven
different kind of us operators in
JavaScript but today I'm going to be
talking about the bitwise not so in
really simplistic terms whether bitwise
not is doing is just inverting the waves
in a sequence so I know we normally
don't do these kind of a specific big to
read operations in our applications so
let me put it this way the
kill the operator is just doing this
small algorithm is anyone and then
changing the sign so basically we can
just pass a -2 and we will get along we
can pass a minus 1 we will get a 0 etc
so the million-dollar question here is
what actual use in real life can we give
to this operator so one of it is by
using a double QE operator of the log
bitwise we can actually truncate numbers
and this is faster than using master on
or math.floor so we could actually use
the other bitwise operators through to
do the same thing and as I show you this
is faster now another thing that we can
use with the width bitwise not is
imagine that if we want to know if
someone is coming to the tea party that
we are going to have later so you know
the area the RA function has these index
index or method so the way these this
method works is that it will give us the
position of an element if it was found
on an array and if it wasn't found it
will just return a minus 1 so a lot of
developers have used these methods to
know if an element is in an array or not
and they would do a lot of these things
they will just compare it with if the
result of the index of method is equal
to 2 minus 1 different the line of one
greater than 0 or less than 0 but
actually all of this can be simplified
by just using the QV operator so
basically what's happening here is that
the element was not found the index of
method will return back a minus 1 then
we'll Pat we will pass this minus 1 to
the collaborator and it will transform
transform it into a false is 0 and in
any other case it will mean that the
element was actually found now before
you start getting angry at me I know
that this is not very code friendly and
human readable so don't worry because
actually es7 has this new function that
is called include basically it will just
return as a boolean that will say if the
element was fun or not so don't worry
about it
es 7 has our backs
cool so now let's talk about for loops
they can be fun so I told you I'm a
curious person once I saw these four ena
in a JavaScript book and I was just like
I don't get what it means what's going
on so now let me bring you back to those
days when you're learning about
JavaScript and variables and loops and
you were like so eager to learn up
everything and let me remind you
something really basic about general
treatment for loops so for the first
three parts they have an initialization
for a condition for in an iteration part
no biggie but what I didn't know is that
all of these parts are optional in
JavaScript so you can take the first
part because basically you can declare
variables outside the loop and it
doesn't matter or you can remove that
condition part any of you who if you do
that does people will automatically
consider it as true and then it's up to
you to break the loop or you can even
take the iteration for a part away and
in this case that condition part is
acting at the same time as a declaration
part and once this I dropped on to 0 it
will be a false is 0 and then you will
get away the loop so basically also you
can just remove everything if you do
that as I told you before the condition
parts going to be automatically consider
as true and basically these we're
looking for is just an infinite loop so
cool last but not least let's talk about
undefined so we all know that undefined
is this variable that has been declared
but at the moment hosting of value needs
this shouldn't be weird for anybody so
only fun is actually part of the global
of this window object so what would
happen if we wanted to be really clever
and defined undefined so actually the
result of this piece of code actually
depends on the browser that you're
running is so for older browsers from
inter Explorer 8 and below you could
totally redefined on define that good
news is that this has already been
solved for modern browsers and now I get
it off while it's becoming less and less
of a problem we have
take I mean we have to care about these
kind of issues because if you support
older browsers there is a possibility
that people might try to be by neuron
defined so the thinking with JavaScript
is that jealous three rarely runs in
isolation we often run it with other
libraries with external code to just be
careful but the madness doesn't stop
there actually undefined is not a
reserved word in JavaScript meaning that
you could use it as a variable name
which I totally don't recommend of
course so what have we learned so far
not a number is a number all right sort
first lexicographically by default the
tilde operator is the bitwise not
operator all parts in a for loop are
optional and undefined can be defined
sometimes so am i boring you it is like
and that's not that fun
no wait because the mad JavaScript body
is just about to begin
and before I start talking about it just
a little bit of a disclaimer the
following content is designed to
challenge and amuse programmers not need
to be suitable for practical use well
and now I'm going to talk about non
alphanumeric code JavaScript which is
JavaScript without letters and without
numbers but before I get into it I'm
going to keep repeating something that
we have in here in the previous talks
JavaScript is a dynamically typed
language which means that we don't have
to declare the type of data that a
variable will hope we're declarative so
this is a doubled interpreter now when
we mix types we can have really really
weird conversions that can lead to
really really crazy results and what I'm
going to show you now is how to write
valid JavaScript only using four
brackets parenthesis the curly curly
brackets the plus operator and
exclamation point I swear I'm not crazy
this actually works and you can follow
along on your developer tools but before
that just I'm going to explain something
really really basic on JavaScript I've
been talking in the previous slides
about policy and trophy values so here's
the thing everything in JavaScript has a
boolean value everything can either be
faulty or truthy and how can we know
that so the golden rule is this one
everything in JavaScript is true P
unless is falsely and you know it's true
because the post eval is by default are
false zero and empty string
no undefined and man and the truly
values is everything else and it could
either be a string serial string false
an empty array or an empty object now
the basics so in this example in the
first one what we're trying to do is we
are trying to negate an empty array so
we're forcing JavaScript to three that
empty array as a boolean as a boolean
type and if you remember from the
previous slide then mtra is just a true
feed value so we're negating a true so
we get a false and the second example
were negating false so we get true now
from false and true we can get to zero
and one by just using the unary plus
operator which actual function is to
just transform things into numbers now
guess what
once we have 0 &amp;amp; 1 we have a ways to
create any other number you can just
picture that as adding one plus one plus
one plus one on to infinity so we can
also convert things into strings so in
JavaScript you can only concatenate
things with the plus operator or add
numbers so if you try to put anything
else over there javascript is going to
automatically try to transform it into
either a primitive type a number or a
string so in this first case the first
part is just a false which is a boolean
type which is a primitive types and the
mtra is automatically transform a
javascript into a string so these
actually give us a string fold or string
true and this work the exact same way
for numbers we can convert numbers into
strings using these techniques so what
if we wanted to do bigger numbers
because we're not just going to add 1
plus 1 until infinity here is the thing
we can actually just transform into
strings every single digit and then
concatenate those digits back and
transform the whole thing back into a
number The Hunger infinite tree actually
looks like this in non of a number
Oh JavaScript so we can also get work
like on define by trying to access an
element that is not found on an array if
we try to transform an object into a
number we'll get man and if we try to
transform an object into a string we
will get the string object object so now
now that we have access to all of these
words and vocabulary what we can
actually do is transform into strings as
I show you before and access every
single character as if they were three
arrays so if you're following along for
handsome I notice that what we can do is
we can try to make up functions in works
that actually means something to
JavaScript so actually marking clappa
that should be somewhere on the crowd
here the career of a website called is
Fox he will call this technique like
JavaScript strable which I love the clay
I love the term because I think it's
really clever basically what we're
trying to do is given the set of
characters of words we're trying to make
up functions that actually means
something to JavaScript so to keep
things short basically we can have
access to call contact constructor join
slice or and filter now how does this
actually look in action and I'm going to
show you step by step so you will
understand so this this piece of code is
only just doing another one in your
browser and here's our here's how it
works
so the first part is just an empty Eric
no surprises now the filter segment is
just trying to access the filter
function of that empty array which is a
function now the constructor part is
just getting that constructor for
functions and the constructor of
functions can actually take as a
parameter a string that were that will
return back and you know any function
with that string as its body so now you
can finally get the last part is just
outputs securing that new function so
basically this will give us in our
browser another one and the code behind
it is the code used to actually make
this work and it does work
so yeah jealous trip is confusing
sometimes but if you're really
interested in the technique you can find
a lot of converters online and I really
encourage you to actually check that
open source the code su sorry
and there is JW d ma there is a assualt
v mode there is Stargell j s they'e
screwed and the most well-known is Jes
Volquez mark from marking weapon so
there is no limit with this actually
when I was doing research for this talk
I came across this repository which is
called jQuery screwed in which basically
the guy he just like rewrote the whole
jQuery library using this
non-alphanumeric of techniques I think
this is the source code so a lot of
people have like way too much time on
their hands not like me so and at this
point you might be wondering like
Claudia I would never write JavaScript
that way why should I even care about
these things and one good reason could
be security and it is a tweet by
marketing paper from a few months ago in
which he was pointing out to a blog post
from a security researcher that he found
a vulnerability on eBay and basically
what he realized that he was able to
inject malicious JavaScript into eBay by
using this non of a numerical technique
because basically what a way was doing
is filtering tax which is script or
iframe but it was unaware of this
technique I I guess by and by this by
this time it's already fixed so yeah and
we're reaching the end of our journey
this is our last part but I can't leave
without talking about our o function
because there's so much fun now this is
a piece of code that I guess most of you
have seen in your applications like this
is very common to see and it doesn't
work because the context of the function
that is inside the function is no longer
in the same food context so a lot of
developers have actually solved this
issue with the other but by adding my
own new viable source such as self equal
these or data for these but actually
there is one thing our own functions
don't have
these at all actually they don't have
abs they don't have arguments they don't
have super and they don't have new
charges any reference to them will just
lexically resolve up so now we can
actually rewrite the previous example by
just using an arrow function and in this
way we can reference to the food context
and we will actually have something
being displayed so what if we want it to
be really really stubborn and we
actually want it to heart buying
something on the arrow function it's not
possible because since arrow functions
won't have a context at all there is
nothing the vine method can actually
grab on so I guess what I want to say
with this last part is that arrow
functions are not about sin that sugar
it's not about writing less they
actually have a behavior that we have to
learn how to use and use it accordingly
so let's leave all a dream suddenly no
this is really a low script this is the
thing that we have to build every day so
but why should we care why should we
care about all of the numbers that I
just show you first of all knowledge is
power we have to know why we're writing
the code we're writing and how it works
we have to push the limits it's also has
big javascript this amazing language
that is running on our servers on the
desktop everywhere we have to push it to
the limit we have to break rules and
don't forget that playing is learning
for me personally is this quirkiness of
JavaScript that just makes me want to
continue working and it make mistakes
and just play around with it that and
this is ultimately what makes me
everyday a better developer just diving
into the language itself and it's the
power of the language and this is a code
that I really like that says javascript
is the language that has survived not
despite its flaws but because of them
and last thing I just want to read this
quote from a really really good book
that I recommend from Angus Kroll that
is called if Hemingway wrote JavaScript
and it says the vegetable script
developers are those who obsessive on
language which Splore and play with it
every day and in doing so develop their
own idioms and their own voice
and that's all for me I hope you liked
it and danke Shoen</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>