<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Raquel Vélez: Wombat-Driven Understanding - An Interactive Guide To Using npm - JSConf.Asia 2016 | Coder Coacher - Coaching Coders</title><meta content="Raquel Vélez: Wombat-Driven Understanding - An Interactive Guide To Using npm - JSConf.Asia 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Raquel Vélez: Wombat-Driven Understanding - An Interactive Guide To Using npm - JSConf.Asia 2016</b></h2><h5 class="post__date">2016-12-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7MbXsRS-ZLg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I am I'm rockbot on the interwebs so
follow me whatever I work a 10pm npm
started out as open source but it's a
company now and i was actually employee
number one and as employee number one I
was a web engineer and then I moved up
to being a tech lead in the web team and
now I'm an engineering manager for the
web team and today what I'd like to do
is kind of take you through an p.m. kind
of like to start over but let's just
kind of play with NPM of it today but
before I do that the first thing I want
to do is kind of talk a little bit about
NPM NPM is a package manager for
javascript a lot of people think NPM
means node package manager uh it turns
out it doesn't mean that it's just three
random letters that someone put together
it you could say that it has no
prescribed meaning ok but here's your
the funny saying javascripts a bit of a
misnomer as well because there's CSS in
our repository at birth in the registry
there's go there's rust or C++ so in
reality NPM is just a package manager
but I like to think it's pretty cool and
our number one priority a 10pm is to
reduce friction you all have an
important job to do you want to write
code push to production make cool stuff
the last thing you want is to have your
tools get in the way so everything we do
every product you build every service we
create the major takeaway for us is is
this going to make your lives easier so
with all of that in mind let's build a
nap our app is going to be a random
wombat fact generator and it's going to
be a command line client because we
don't have a lot of time and I just kind
of want to get moving
whatever at now this is a wombat it's a
marsupial native to Australia and your
pie wondering why wombats that seems
ridiculous well it turns out if you take
the npm logo and you flip it around it
no longer says npm it says WD u which
obviously not obviously really means
wombat developer union and all of the
people at npm we refer to ourselves as
wombats and this is our little mascot if
you want to know why were the wombat
developer union and why we chose a
wombat in the first place come find me
afterwards I have a bunch of stickers we
can talk about wombats and NPM and all
that good stuff ok so I'm going to start
talking really really really fast the
good news is this is being recorded so
you can go on to youtube later and you
can go ahead and put it down to a one
point or a point 5 X so that you're not
talking about fast but we've a lots of
stuff to cover so great ok the first
thing that we're going to do in building
this app we are going to install nodejs
if you haven't already I personally
prefer to go to nodejs org to impress
the big green button it's easy it's fast
you can use homebrew or whatever else
you want I just prefer to go straight to
the source now npm comes bundled with
node but end hams release process is at
a different rate than nodes release
process and we're going to hear all
about nodes release process later for
miles but suffice it to say that most of
the time when you're installing node you
probably have a slightly out-of-date npm
in fact if it's been a few weeks since
you updated npm go ahead and update it
again so you want to go and pmin p.m. at
latest ash g fantastic ok now let's get
to building this app are we ready we're
gonna do this live do-do-do-do-do-do to
do ok so here we are we're in our nice
little terminal fantastic and the first
thing i want to point out is that any
time you have questions or whatever from
right within your terminal you can ask
ask for help and it's feeling it's an
easy you can just kind of be like all
right well what do i do how does this
work fantastic ok moving on so the first
thing we're going to do is we're going
to create a directory
of random wombat facts this is going to
be our application and if you're looking
at this and going what kind of syntax is
that that's not bad it's because it's
fish shell I like it I'm not going to
have a shell war with you whatever ok so
we're creating an application so the
first thing that we're going to do is
we're going to do NPM in it now npm1 it
is an automated tool to create a
package.json your package.json is
essentially a manifest file for your
entire app it's where the computers
basically going to say ok what
dependencies do you have what is the
name of your app what version is it on
what's the description all of those good
things now you could of course totally
make it by yourself but why would you do
that I'm a lazy developer I don't know
if you're lazy developers but I'm
totally lazy developer and if I can I
totally want my computer to do all the
work for me so here we are in this
automated tool and anything that's in
front disease is kind of a default and
so I'm like okay you know what name
random on backs that sounds great
version 1.0 point zero fantastic
description random wombat fact generate
or fantastic entry point we're gonna
have some file called index at jas that
sounds good we won't have any tests just
ignore that and no get repo whatever
it's fine we're doing it live up and so
wombats fax Jess call fantastic sums
keywords that will be useful for
searches later and then you need to add
a license now is see is a pretty
standard open source license but in the
event that you don't want the license
something you know what you don't have
to license it you can just say on
license is this okay yes sounds great so
now all we have in here is just a simple
back package.json and that's what it
looks like and this is what's going to
be stored in the registry and this is
what the website uses to kind of show
off what version you're on and all that
good stuff okay so we know that our
entry point is indexed is so we're going
to go ahead and build that so let's do
an index J I asked group and we're going
to am I going too fast fantastic good
okay so we're going to create a really
really really basic little array
all facts and we're just kind of dinner
to do and this is going to be the
easiest little no DJ s script you've
ever seen we're just going to
console.log this fat and cool and now
we're going to do it note index is and
boom that's our fact one okay beautiful
we don't have to applause yet Klaus
later love applause all of you want
applause I'll take the applause okay all
right so this was great but what do we
really want to do we want something to
randomly grab one item from that array
right now of course we could totally
just go ahead and say a mascot random
math dot floor some algorithm you know
what someone has probably already
written this because it is the most
commonly used code for any randomizer so
let's just see if maybe a package like
that already exists so what we going to
do we're going to go to NP MJS calm and
we're going to open up the search and I
know what you're thinking you're going
to say Raquel and cam so just terrible
not anymore um alright so what do we see
here just kind of we just put in a
little search for random array and hey
would you look at that get a random item
from an array that's exactly what we're
looking for Thank You syndra Soros okay
so we're going to take a look at that
package page and sounds cool so in order
to install it we do an NPM install dash
dash save random item then we're going
to we have an API for using it so let's
go ahead and do that we're going to say
and p.m. install random item dash save
beautiful fantastic and the reason why
we do dash dash save is because again we
want that package that JSON manifest to
kind of have all of our dependencies
listed in there and we could do it
autumn we could do it ourselves but i'm
a lazy developer and I hope you're a
lazy developers to so why do it
ourselves when the when the you know
program can do it for us plus it tells
you it goes ahead and save
the exact version that you're using all
the names and see you don't swear about
typos or anything so if we wanted to
take a look the package.json you can see
right here we have our random item
dependency beautiful okay now this is
less of an NPM thing and more of a node
practice thing I don't always believe
everything I read on the internet so I'm
going to do a little trust but verify
type thing so in case you're not aware
node has a read eval print loop also
known as the repple where you can kind
of sandbox with packages that you've
installed and so as long as you've
already installed it into the current
directory you just as do node and then
you can kind of play with a you can play
with the the packages that you've just
pulled in and do and you can kind of
just do okay so according to the readme
the API is just Rando of array and it
should just pull ok cool so this works
exactly as I expect it's pulling random
ones fantastic so now I'm going to go
ahead and update my index at jas to have
this right Amanda item require random
item and update this to have random item
and now if I do node index is all right
back to back to fact one alright cool so
it's doing exactly what we were asking
for beautiful okay so that worked
exactly the way we wanted and now I'm
going to so okay again really lazy I'm
such a lazy programmer I really don't
like writing node index day is over and
over and over again and what I'm about
to do is going to make a go you didn't
actually make it better but I want you
to think about your own applications
where you're kind of like when you're
starting up your app maybe it's not just
a single point of entry right maybe you
have a gulp script that you want to run
before you start your app up maybe you
have a test suite that you want to run
before you start wrap up well we're
going to
npm start script and the way that we do
that is we go into our package that JSON
and we create a new script called start
and there are a few scripts that have
special keywords like start and test is
it you can just use NPM start and I'll
show you that in a second but you can
just do basically index node index is
and now if i do npm start it'll run the
exact same thing and so it's just a
little bit of an easier thing like i can
set whatever it is i want you can you
can also change that to be a bash script
if you really want it to but you can
just have it you can put I just bash
straight into that ax into your
package.json so that's pretty cool but I
don't know if you noticed my my codes a
little wonky I've got some semicolon
some places and some semicolons not in
other places and you know missing so
what's one thing that I could do to kind
of clean up my code well I can use a
package like standard to go ahead and
clean this up because you know what am I
doing here again I don't want to have to
think about this I want to have other
other modules take care of this for me
so I'm going to go ahead and Pam install
standard and again I'm lazy you don't
have to use and Kim install you can just
do NPM I and I'm going to do a dash dash
save hyphen dev I can also change this
to just HD with a capital D now so
here's the thing about standard and
actually any module usually you would
kind of install it globally with a dash
G kind of like we did with NPM but it
turns out you don't ever I mean ever
have to install a module globally so
especially if you have an application
that you're working on and other people
on your team are also working on the
exact same thing you know sometimes
you're like oh shoot I completely forgot
to tell you have to install this one
thing globally you don't have to do that
ever ever ever again just install it as
a dev dependency because you're the
whole point of Deb dependencies versus
regular dependencies is that your dev
dependencies don't need to go into
production they have nothing to do with
your actual code it's just kind of sad
stuff so ok so you've your def
dependency in there and then I'm going
to go ahead and create a new run script
and you to do and I'm going to call it
standardized and amna dues runs standard
and what that's going to do for me is I
can do npm run standardized and because
standard is a is not a reserved word so
like start or test you have to use the
word run there you can't just say npm
standardized un p.m. rotten standardized
and so there were a whole bunch of
errors oh my gosh why well it's because
standard had a bunch of errors and it
said hey look you you had extra
semicolons and that was really gross
because standard apparently doesn't like
semicolons whatever standard fine
compromise you're doing a job that I
want to do so uh the recommended fix is
to standard dash dash fix now a lot of
people kind of would say oh well I guess
I'll have to create a brand new start
startup script or NPM run script so that
I can have a dash dash fix in there but
fun fact you could just as easily and
Pam run standardized if you add a dash
dash right after your run script you can
add parameters that you would normally
add to your command line and so
basically just ran a fix on the NPM run
standardized and you can see what
essentially happened is it ran standard
dash dash fix for me so that's pretty
cool too okay so from there on time okay
we're good okay so now I want to build
another module I want to build a module
of wombat facts right now the difference
between a package and a module is that a
package is something that you would that
you can kind of install with NPM but a
module is something that you can
actually use with nodes module loader so
you use the require syntax and so not
all packages or modules but all modules
are packages ish but yeah so we're going
to do is I like to module as my code
like to break it up into different
pieces and I just think about well what
kinds of modules would other people want
to use I have no idea what kind of
things people would want with what brand
ahmet facts but that's cool we're going
to go ahead
that anyway so let's go and create a
brand new directory called wombat facts
and we're going to go into that
directory now creating a module is the
exact same process as creating an
application we're going to do an NPM in
it now here's the thing about eminent if
I'm totally cool with all of the little
automated bits and pieces I can just say
NP a minute dash dash yes and it'll take
care of it for me you can also do just a
regular dash Y and so no it doesn't have
the description or the keywords you know
lazy and that happened really fast it
into press ENTER like a whole bunch of
times so that's pretty nice and now i'm
going to go again into indexed at jas
but because i'm creating a module I need
you get module dot exports and I'm going
to create this fact one in fact two in
fact three and that's all fantastic and
so that's cool and what I think a lot of
people would do right now is they would
kind of publish with some sort of alpha
thing or whatever to try to test it on
their other application you don't have
to do that thing is I don't want anybody
to accidentally download this right now
I just wanted to tech to see if it works
in my regular application so I'm going
to use is a thing called npm link but n
cam link does is it creates a symlink
between your your working directory and
a directory and user local lib node
modules and then i'm going to go ahead
and go back to my random wombat facts
application and i'm going to do n p.m.
link wombat facts and what that does is
it creates another symlink from that
user local lib node modules and puts it
straight into my node modules now if you
were wondering node modules is where all
of your packages live and and so so
that's pretty neat and now if I were to
now it's kind of like you had just
installed it even though I didn't really
install it because I didn't really
publish it now I can go into my index is
and I can change these facts here to
require wombat facts and if all goes
well if I can just do npm start
and I should still get fact one fact
three whatever but if you're a little
bit like okay wait but it said fact one
factory factory before that's cool let's
go ahead and update our index at Jass
with some real wombat facts and doo doo
doo doo so here's some real wombat facts
and note I haven't done anything I don't
need to NPM link again I don't need to
do I need to publish or anything and I'm
just going to go ahead I just changed
directories back in my random wombat
facts app and I'm going to NPM start and
turns out they have a backwards facing
pouch like other marsupials wombats give
brooke to a tiny underdeveloped baby
that calls into its mother's pouch to
grow and develop further but wombats
pouch is have a special difference they
are positioned backwards opening toward
the brothers rear rather than their head
this allows her to dig without getting
dirt in her hatch that's a pretty cool
little fact also wombats have slow
metabolisms it takes a wombat up to 14
days to digest a meal this low
metabolism helps them out and they're
hot and dry habitat so very cool I think
it's pretty cool okay
alright so now I've I you to go ahead
and publish this module the first thing
when I do is in an MPN unlink so it
kills it takes out that at that symlink
and now i'm going to go ahead and
publish it now keep in mind that in
order to publish you need to have an
account on NPM you can either NPM you
can NPM login and I think you can do an
NPM sign up I think it might be and I'm
camp sign up so you can do that on the
CLI or you can just go to the website
and create an account there or if you
already have an account then just make
sure you npm login for sure now i'm a
little wary about creating a wombat
facts like high level module maybe
because somebody else already took the
name or i'm just not sure I'm ready to
do have that kind of commitment to the
public so what i could do is i can scope
this module and what that means is i can
put it under my user name scope usually
we think about scopes as an organization
scope which you have to pay for your
company has to pay for orgs or a private
scope like a solo account where you can
basically create private modules but
guess what you can totally create public
scoped modules to and the way that we do
that is we go into our package at JSON
i'm going to change this to at rock
bottom on bad facts and if you ever
curious about if you're logged in or not
if you just do NPM Who am I it'll tell
you who you're logged in as so good good
trick up and so now I can do and p.m.
publish with a dash dash access equals
public so with with that that allows you
to create a public script module and
should work so now I've published it and
I can go ahead and take a look at this
if you're wondering about this thing
it's amusing Alfred about facts and lo
and behold here we go I've published it
and it's a version 1.0 point zero and
that's fantastic whoo um oh no no read
me found what do we do
let's go ahead and create a reaping and
so we're just going to kind of do a
really quick read me and now when you
create a readme it's not really a major
change to your module instead it's just
kind of like a little thing so what I'm
going to do is I'm going to bump my
patch version i'm going to put my
version to bump the patch and so you can
actually use NPM version patch and so
you can do patch minor or major and i'll
talk about that in just a second and
then you can add a little bit of a tag
like i'm creating a readme or something
like that and what version will do is
it'll not only update your version
number but it'll also create a new
commit if you have a github repo it'll
create a new commit with all of these
updates and it'll create a new get
tagged so when you push up make sure you
remember to get push and get push dash
tags but I don't have a github repo for
this project right now so ignore that
but if I do an NPM publish again now as
soon as it publishes I should be able to
find that pack now there should be a
readme tada okay fantastic
okay so let's say I totally didn't like
this at all and I really want I just was
not a fan so I can unpublish and I can
just say unpublish and what end Kim
unpublished tends to do is if you only
have one little module if you only have
one version it will go ahead and delete
that one version or it'll unpublish just
one pieces of it but specifically it's
good to say explicitly what version you
want to unpublish so I can you know NPM
unpublish rack part 1 about facts at one
point 0 point 0 because I really didn't
like the fact that didn't how to read me
so cool I can unpublish that or if I
want to unpublish everything I can
unpublish with a dash F or a dash dash
force and that'll unpublish the entire
package in its entirety and you know I
we sure hope you know what you're doing
when you do that but then as you will
see it's not found it's totally gone now
one major thing that a lot of people try
to do is they'll go hey wait a second I
I want to I want to publish I want to
republish version 1.0 point zero well
let me tell you that is not a good idea
and here's why let's talk about sempra
for a second miles borns is going to go
a little bit more in detail about some
verse I'm just going to do a really
really high level version but what's
ember summer is semantic versioning it
is a handshake that you do with the rest
of the developer community at least
within the NPM land where you basically
say I promise I sure do solemnly swear
that I am up to very good and what
you're basically saying is whatever this
number is when I make a change I will
update this number to reflect the type
of change that I'm about to do so the
the last digit is going to be your patch
and that's something that's like okay if
I have some bug fixes or I forgot to add
a readme
it doesn't actually affect the code that
much it's just going to be like this
tiny tiny thing now you can use NPM
version patch to to bump that and then
if you have a minor so if you change the
middle number that's because you've
added some new features maybe you've
extended your API or you've you know
just kind of made something a little bit
cooler so that's a minor that's NPM
version minor and then if you have a
major breaking change like your
deprecating a function you are
completely rewriting how a function
works you're using modules that have
also totally had massive breaking
changes then you're going to go ahead
and bump that in major and that's NPM
version major and so again this is a
handshake that you're making with the
rest of the community when somebody
comes in and to support and says hey I
accidentally unpublished my version 1.0
and I don't want to create a new version
1.0 point one can I just rewrite one
point 0 point 0 no you can't and the
reason for that is that you've now
violated the handshake that's kind of
like giving somebody a present and
saying hi I bought you a present it's
this really amazing cake and it's
chocolate and delicious and then saying
oh wait a second I'm just going to take
that back and then and then you kind of
like give them like a vanilla cake
instead and it's like a vanilla cake is
good but it's not the chocolate one that
you gave me for originally what why what
happened my chocolate cake right and so
that's the community is expecting you to
uphold this and here's the fun fact
versions are cheap they're completely
free they're completely free so it's
totally okay if you have to bump your
version number but you know a little
patch a point point Oh point one so cool
there's more there's totally more
there's always more but we don't have
time for all of that unfortunately so
here are a few things for you to totally
look up a bun of dependencies and p.m.
shrink wrap their configuration options
that will totally make your whole
workflow a lot better dis tags an NPM
packin em Pam deprecated mpm update so
many things how will you ever learn
about at them all good at dockside MP
MJS calm it has every single bit of
documentation that we currently
have about all of our products all of
our services all of those good things
and if you need help that's totally fine
come to our support page there you can
fill out a form to contact us or you can
just email us or you can tweet at us or
you can even take a look at our issue
tracker and create issue tracker or
create issues on our issue trackers for
the command line interface the website
or the registry so come like come say hi
please fill out bugs we depend on you
and we know how much you depend on us so
go out build some really really cool
stuff come talk to me i will give you
stickers in exchange and you know chat
with me on the twitter is and stuff too
all right thank you so much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>