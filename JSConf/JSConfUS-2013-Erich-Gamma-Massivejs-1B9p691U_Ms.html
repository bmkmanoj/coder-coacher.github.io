<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[JSConfUS 2013] Erich Gamma: Massive.js | Coder Coacher - Coaching Coders</title><meta content="[JSConfUS 2013] Erich Gamma: Massive.js - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[JSConfUS 2013] Erich Gamma: Massive.js</b></h2><h5 class="post__date">2013-08-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1B9p691U_Ms" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I was a chalice program until two years
ago and I enjoyed it actually but at
that time I tried I'd like to make
something else I'd i have done java for
many years I thought I started dumped
down I need some fresh spirit rent and
at that time I had this nice title of
IBM distinguish engineer and once at old
IBM that I'd like to work for Microsoft
within one day I became an extinguished
engineer that's really cool actually
because that means you're out of the
building within one day which means you
have time till the end of the work
contract to do other stuff set three
months to learn so what did I do to me
three months I watched recordings from
the chairs conference actual and I
really liked them about one day I want
to be on eddies conference but this
Congress has always sold out right so I
learned you have to talk there that you
can get his conference of course now the
problem is I had nothing right so I was
a baby well we are still baby so I need
at least two years to get some material
to talk about and I see I hope today I
have enough material to talk about so
what I did and in this last two years
now I built a small team in Zurich in
good Mike's of tradition we have feature
teams now with testers and program
managers we're now eight developers and
our focus is and dead what I found to
challenge that hope to start my
something down we work on online develop
experiences so the ideas whenever you
interact through a browser recode we'd
like to have components for you right so
we have a toolkit of components that
allow to build coding experience in the
browser and I can show you some of them
which are shipping today which you might
use are not right so for instance when
it comes two teams of the right we have
diff engines that show a diff
we have to tab strip playground at this
point I'd like to ask how many of you
have heard of tab script excellent how
many of you have played in tabs to
playground I hope we fixed it today how
many of you use tab script in in a
project we work on that so the good
thing is no tab script has been open
source lost October so it's really a tab
script plus the language services and
open source and I think I write highly
recommend try to play the taps key
playground to learn what this language
has to offer for you I think it uses
some dirty words like classes modules
and even interfaces 3 30 words but the
goal is really to reduce develop stress
and that's was my passion since I
started writing code right I like to
reduce the developer stress that's my j
unit happen that's why patterns that's
why clips now we want to liberate
developers to have fun coding so the x 2
playground is yet another component that
is built on our stuff ok i will show you
later briefly it's probably one of the
most powerful playgrounds with
refactoring support and all kinds of
good stuff on a sure when you come to
script editing we are used and for that
i like to give you a quick demo that's
the one which uses most of our
components which using a workbench that
you can do coding off and a an app that
can put in the that you can put into at
the marketplace what you can do and
that's pretty cool for office 365 and
that's the only time i do some microsoft
product stuff but what you can do is you
can write extensions for excel overt in
html5 okay and for instance here i have
written one which allows me to bubble
some stock quotes right and that's the
HTML which it which is extension i say
bubble it will go to the net and show me
all the stock quotes that's an okay
dangerous exercise because it might be
naked
but it's not too bad today huh it's good
so anyway so that's what you show what
you can do but the point is not that the
point is you can use html5 technology to
do that and the point is to try this out
you can do doll in the browser right
that's the point that's the scenario
getting started you want to try
something you do it in the browser
deployed if you like it you can upgrade
to the full ID and I can quickly show
you what you can do in the browser okay
I'm confused but that's fine it's not it
this PowerPoint come on don't drive me
nuts here we go well okay so let me a
people view but at least it's big enough
so you see now that's the workbench it
uses many of our kind of the toolkit of
developer components and it shows his
app is really html5 it has an HTML page
which load several scripts which has
some script logic right in the script I
have normal stuff live Kull validation
come on yeah you see squiggles all this
stuff you have a reference searching who
uses this stuff right you get it in
place you have refactoring it's really
challenging to live in this tight
resolution but you see if refactoring
all this kind of neat stuff you have
navigation help and so on right you can
navigate to stuff so it's pretty rich
right it has outlining step stuff right
things like that so this just to show
you right it's pretty rich experience so
we say even for getting started
experience you want to be rich and you
want to have a good coding experience
with all the comfort develop comfort use
from a browser so enough that's kind of
the background let's go over and talk
about what's behind it and how we grew
into it and our journey actually started
two years ago and we have grown in three
stages right and the challenge is really
how to become bigger and bigger and the
approach you try to use is what i would
call extreme triple extreme programming
right which means we don't use some
technology only until you
we needed until it really hurts right we
knew from the beginning yesterday's
require Chester's AMD which is cool but
we want to lean back and say let's wait
till you reuse it and then we dive in
right you want to feel the pain and then
feel good afterwards so and that's the
three stages know we have kind of small
when we grew quickly to fifty thousand
lines of code 100,000 and to debut two
hundred thousand lines of code which you
wrote ourselves plus test code with all
the libraries right this goes much
higher what I found interesting for each
of these stages we have some patterns
that we are alone to us so yes I confess
that cannot get fully get away v
patterns right in the smaller stage we
really concerned about modules classes
interfaces promises right how you manage
callbacks interface i will talk more
about that sounds a bit strange that
interfaces are powerful way to tell
others what expect and in particular it
helps you define the shape of things and
that's what it will show later models
and classes every project has to think
of which patterns they use for that in
the small stage what is interesting we
only use about ten percent of typescript
because we had some concerns right we
were the first adopters of typescript my
we saw the promise you were skeptical
that will lose the goodness of
JavaScript right as i said no I
transition from Java in Java one
technology developed was we call j dojo
which was a Java front end to the dojo
widgets and while I liked it a lot in
this three month right that I learned
all the stuff this JavaScript community
produced I learned I really don't want
have a layer in between right I want a
program as close to JavaScript as
possible right I want to throw up
closures whatever so for this reason we
are live a concern and in particular our
hardcore JavaScript members evil 3 in
the beginning they say they were highly
skeptical right why why do you want to
do that so we started very slowly then
we rarely dreamt ramped up at this point
even after one year we had skeptics so
our XX as why don't you go two hundred
percent typescript I say well lots of
blah blah but 10
no two of my developers just resisted
they didn't want to do it because they
still thought JavaScript f fiving and so
on is fast over them interestingly right
we see today you up to one hundred
percent which means these two hardcore
guys they transition then I can show a
little bit what's the story that lead
led to death so other patterns no in the
medium sized AMD lazy load the
contributions components dependency
injection which is really chava singh I
thought I will never use that I hope I
can rationalize why we do something in
Java whirl to get to better testability
so I wonder how many of you know tab
script okay so I want to do two minutes
quickly show tab script in action and
then go on okay quick walkthrough it's
in a playground you can all try it out
the point is left tab script write
JavaScript and the point is no top scrip
is very close to JavaScript drive that's
what's really important to us because as
I said we don't want to have lots of
layers in between JavaScript you want to
appreciate the full power of JavaScript
so I'm quickly to show that cap script
is just JavaScript all right if you see
that it's almost the same code that's
just run to the typescript compiler it
adds optional types all right you can
type thing here and the cool thing is it
does type inferencing which means you
don't have to type everything because
it's really smart and from a return
value of a functional inverted type and
so on to make it easy for you and many
other nice tricks it has classes again
very similar translation right to use
prototypes closure and as I said you
have older or the coolness in the in
this playground you can do refactorings
intelligence all the stuff that i showed
before because it's the same kind of a
component that we use you can use a
multi cursor and whatever whatever you
want
all right okay so classes and of course
there is modules didn't like that too
much okay the modules and actually it's
our own editor right so you see it
around corners that's the sign that is
our code editor we had four layers
reason we like we like coat me race and
so on but for this reason we had to
write our own so that you have modules
write the modules follow the standard
module pattern you have a closure and
the module object it captures what you
export and as I said typescript is
really close to JavaScript and you can
in your blog on at the JavaScript level
if you use tab script but still in the
beginning I had the skeptics in my team
as I said so let's go back to that and
one interesting word I mentioned these
interfaces right so I think kind of
emulating some interfaces as a
javascript in normal ways just doesn't
make sense right because interfaces are
really something more at the time before
your own thing to do expressing and one
of the wisest sentence i made i guess in
this gang of four because i always
program to an interface not
implementations or interfaces I always
like what's interesting in in typescript
interfaces a much richer than just what
you see here as a way to define the
shape of a class right that's a typical
interface to the shaft you find the
shape of a class which signatures it
does have it's still very useful right
it's very useful because it allows me to
check whether an implementation conforms
to a particle interface and we have
called many stupid box thanks to
interface with this capability the good
thing is interface are very powerful
define the shape of things right so if
you have an option or an option bag and
object duties can describe the structure
easily through an interface and to make
it easy you can say what's optional its
mandatory and he also uses a lot for
describing chasing structures right if
you see your lies Jason structures from
deserve the decline we have a and a
typescript interface that describes the
structure what's optional mandatory
when you get the chase and object after
the pars weak acid interface you have
intelligence to navigate through a JSON
structure it's pretty powerful nice
interfaces can also express and can be
can be invoked which means you can also
define the signature for callbacks in a
compact way right so that says you have
a measurement call back as the signature
or you can also index them you can
define how he acts as an object and if
you what type of the index taxes is a
string or number then you can say well
you return again to the benefit once you
do that you get intelligence and rich
coding coding support by the tool
because the tool knows what at a certain
point will of the type is and very
important you can use interface describe
the shape of existing JavaScript code
and that's very important because you
only have to live or jQuery knock out
whatever all the cool libraries that the
community produced like Jamaa say one
thing at this point these three months
that I had time to really get into
JavaScript and the transition from child
to child script was my hardest language
transition right at transition from C++
to small talk from small to cook jawa
navin child the javascript that was the
hardest one and the reason is because
the child's cocoon is so productive
right they produce note she has to boost
libraries interesting patterns like the
Model Model View controller Model Model
View you pattern and so on right so this
was really what made me kind of swallow
a lot to get up to speed but without
make makes it very clear you need to
have a way to describe all this existing
libraries otherwise you don't get the
coding comfort that I want because one
thing I want to keep from Java I want to
keep the coding comfort I had their
right i want the intellisense I want
refactoring I want find references
that's just I didn't want to lose so now
what how to use that and the nice
example is to use the air for jquery so
that's kind of another playground right
once you have this toolkit of a coding
compounds you can produce playgrounds as
you like and this playground chose in
the left some type definition file that
just
describes jquery on the right the sample
of jquery code which would kind of it's
a nice play right on the left you can
add type definitions and then on the
right you can experience how much how
Rachel your coding experience begets
right like I can do the dollar stuff I
get intelligence and you all know the
nice method chaining you can do with
jquery right and so on a debts thanks to
all these typedef news on the right and
Shakespeare is very rich when it comes
to coding comfort right they use lots of
optional stuff like for instance you
know that sooner the interface describe
the a check the HX settings you see lots
of stuff is optional but you can still
express the structure get intelligence
for it promises right the promised
consumer the deferred aspect which is
the provider after the promise it's all
captures interfaces and once you do that
you get this powerful intelligence
behavior in the tool which would be very
hard to do otherwise and let me just see
how it's done right jquery static
captures the dollar what you can go on
the dollar and one important thing you
can do on dollar is all these accesses
through a selector through an element
through a function and playing out
different things happen and this all can
be expressed through interfaces right
okay so if you have done that what the
powerful thing is you can describe these
libraries and you get rich tooling
support not even better there is a
community now that does that okay and
the cool thing is there's a whole
project on github that does these type
definitions for all the libraries right
is this definitely typed libran github
and it's very active and almost for any
javascript library you will find
corresponding type definitions and it's
a very interesting to look at them
because it really helps to expose what
are what x do these libraries really do
because you get lots of insights when
you see that and you get much more
insert and reading textual descriptions
right because it's really in the code a
ten-letter the next step so we have
grown up we have used types of models
classes you're use promises i cannot go
in details which version use the problem
is the menus of promises so you have to
pick one we picked one and of course all
the teams pick other
which if you have to fund then when you
combine the code we go to the next level
we grew up to 100,000 lines of code and
we felt we not else anymore right I
always liked this metaphor of code
fitness right when when when my code is
fit I can run fast my code isn't fit I
get slow and we felt that one on sounds
lines we notice fit anymore because we
cannot run that fast as you want so what
are the pains points you had well the
long list of scripts Peter Hagen showed
that we had the same problem right not
only have to manually this long list you
have to also i have the right order and
so on something is wrong here
dependencies big problem right so module
pattern makes you feel like you have
modules but it's a very weak way to
express the dependency right because a
module is just an object and I can
easily the property they're always open
I can contribute the module from
anywhere without any constraints right
so and one of the things you know that
is that our child script was rotting
over time and the dependency graph
looked really messy actually this is a
comment I saw an email from yesterday
which is not from our project but it
shows right that's a problem managing
dependencies in a large-scale project
JavaScript project around 100,000 line
that hurts so need to do something
against it last but not least we're also
growing pains because even so we had
100,000 lines of code we don't want to
load them on startup right when you have
tools you have lots of optional stuff
right when I when I edit when I don't
edit a c-sharp file I don't want to load
the c-sharp relate the code right I want
to load it only when you actually do
something with C sharp for instance so
we had this problem now we had the Eagle
loading our network tab with really ugly
when you see that that's also good
health exercise look at your network tab
when you start your application browser
we looked really ugly lots of requests
lots of data transfer very unhappy am
beaten rescue result already donated one
or one function rules at all it's a very
nice back actually it's a short spec one
function but very rich one so in order
to understand if you have to implement
our own name d loader and it was really
good and we still use our own loader
because I'm give some flexibility
that it's conforming to the spec so what
does typescript offer to that what's
nice our tab script they can extract
kind of the details of the module
definition from you basically in
typescript you can write an external
module statement that gives a path to
the location of the module and then when
you actually transpire it to JavaScript
then you can say which module system
you're using and depending that it will
generate different require statements or
define statements for you so that's very
nice and we found that very handy
because this define statement can become
hard to manage when you have 20 imports
like you have to count all the time and
taps kit makes it kind of nicer but
still we use bows at time time right we
convert our code in JavaScript and it
types creepy word intensive with the
typescript him at this time to get kind
of the support for the module systems in
so that we can really kind of use them
with comfort for what we did the other
challenge we have is you want to support
a la carte consumption right so that's
really nice with AMD because of AMD the
code knows its dependencies and you know
we get many external customers and they
won't have different pieces from our
toolbox so the nice thing with AMD you
can pull out anything and things that
each thing knows its dependency you know
we get everything you need one missing
piece we found was CSS right if you
won't have self content modules you
wanted the CSS when you pull one
component out comes with it as well so
for this reason OMG allows you to
support the two so we had an e/m below
the plugin for CSS which we also can
hint to tab script transpiler using a
pragma that tells actually in this this
class uses the CSS class which includes
the images and so on the cool thing
about that is really hefty
self-contained modules right you can
just pull them out if you don't want a
component you can drop but you will not
get it at all okay that's all so much my
favorite slide in Eclipse the problem is
how we scale up BFF lots of code and the
pattern here is lazy loading of
contributions people contribute to you
but of course just because they can't
you to you doesn't mean you on a load at
all and what did it was different this
time than an eclipse we still use this
contribution pattern by saying you use
play the confusion two parts one is the
top of the iceberg the visible part and
the visual part is what you always load
right the one which you need so that it
can function and deal and play as if the
component is loaded and what we do is we
use JavaScript to describe the component
javascript is very powerful so we didn't
want to use XML and we like to also get
much better because your intelligence or
validation whatever so here we describe
the component in this case it's the
c-sharp a language mode language service
it says loaded when you load a file of
type C sharp you describe which module
to load and which class instantiate
that's how it works and that's kind of
the tip of the iceberg and once the file
of this type is loaded then the code
below is loaded thanks to the AMD
require call that allows the local
dynamically and it can then load the
lots lots of code only on demand and
either way this is how we can scale up
and and you live in many places right if
some we have used different views we
only note use when did the first and
become visible we don't load them up
front and sang to the self containers of
CSS and everything together everything
comes with a contribution in one one
swoop well that's interesting after this
migration it was hard to I must say this
took us two months to migrate our code
because well yeah it was leave it messy
dependencies were messy we had to remove
many cycles we had altered organize a
directory structure which I found is a
common problem in large JavaScript
project right directory structure is
kind of random but the good thing is
afterwards and kind of all alex is a
local developer he says he really feels
like fresh shower that's a good sign and
we also felt we can run fast again our
fitness was good again and we can go on
right we have normal cycles normal
Global's and everything with explicit
dependencies you feel good after that
well they have still drone further right
as usual when the Patek if you do soft
the tools they will always grow and now
comes the next step to one hundred
percent typescript what did you do there
so we are into other limitations the
first one was our hardcore JavaScript
programmer felt he starts to feel like
writing JavaScript code from feels like
carving code in stone but he wrote the
editor and he really felt when he wants
to refactor and JavaScript at a hard
time and he had to refactor a property
called ID and teach us that I die unless
I really know where this is used
precisely so he asked me can I have this
kind of time to convert directed
typescript and I this in this way we got
from fifty percent to one hundred
percent so this austere you're growing
pain right that he could really lost our
chili to change code the tooling slowed
down because when we transpire lots of
code two hundred thousand lines even a
fast compiler takes a while and you also
find this coupling thing I would
testability went down because some of
our high-level objects they have
dependencies on depends on services when
you write a test you have to instantiate
lots of other objects right and this is
really kind of this Java pattern of
dependency injection that allows you
from the outside to inject different
implementation of services so that
control what is instantiated and you can
also get a lot of configuration
configure configuration flexibility so
okay I had slide so just to get a feel
that cleanup from venom amendment two
hundred percent typescript we got a kind
of a speed of thread lines of coke per
hour which is not a lot but it's
explained because you really clean up
stuff right it is dr objects you add
interfaces to capture the structure use
and even a highly disapprove developer
he found no as you're just uses objects
in JavaScript he uses different formats
and he wasn't consistent but once he
could express the structure the objects
they had therefore he flows around his
system he could make it consistent those
are cool thing
compensation is another thing right at
some point you say well we don't want
have all the code treated like it's our
source code I just work with it I don't
I use it but I don't need to change it
right and you need to have some way of
compensation which means you're treated
as a binary component and fortunate a
script supports that and this is how you
use the typescript compiler for instance
we treat it as a binary component that
we just slurp in as JavaScript code
without having to recompile it every
time and there's a compiler option that
allows you to generate these
declarations the interfaces that capture
the shape of the classes in this
component dependency injection I don't
want to talk too much about that it's
some scat helped us because now we found
we use kind of some common services and
we don't want instantiate that so you
identify the services create interfaces
for them and then we inject them into
the code for some high-level objects
last point just as i speak the tab
scriptum is actually working eagerly on
getting the 0.9 Oliza which is a very
important milestone for them towards 10
and the big achievements in this release
is to edit generics which makes you
gives you more power to describe things
like ferns you can describe the map
function right the map function is
interesting because you pass in a
function which returns a value and the
resulting type of your a depends on
return value of the function and now we
can describe that in typescript so which
means you get richer intellisense even
in this case and the compilers in your
architecture which should make it scale
better for very large projects so our
retrospective we were skeptical
initially evensen we also Microsoft very
skeptical because we didn't want to lose
the JavaScript field we didn't want to
use the JavaScript closeness but in the
end I think it paid out for us we feel
we are BF it again we can run fast so we
would do it again and in fact this time
we would start with typescript and AMD
from the beginning
so that's our conclusion and my point
here is really this is open source give
it a try it helped us to increase our
developer comfort I hope maybe it helps
you too okay thank you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>