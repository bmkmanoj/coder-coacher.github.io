<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CSSconf EU 2017 | Glen Maddern: The road to styled components: CSS in component-based systems | Coder Coacher - Coaching Coders</title><meta content="CSSconf EU 2017 | Glen Maddern: The road to styled components: CSS in component-based systems - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CSSconf EU 2017 | Glen Maddern: The road to styled components: CSS in component-based systems</b></h2><h5 class="post__date">2017-05-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MT4D_DioYC8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you very much this is really
happening isn't it um uh hey as I said
max was originally going to give this
talk they had to pull out for family
reasons
him and I have worked really closely for
about a year on our project of CSS and
JavaScript project called style
components and so he asked and the
organizers here asked if I might be able
to fill in which is daunting I've only
had about 24 hours to prepare so I
please ask your forgiveness for the
general improvisational tone of my
presentation today but I wanted to do
this because there was a lot of stuff
that I knew that max wanted to talk to
you about he wanted to share with you
wanted to see your reaction to and get
your feedback on and so I thought if I
could come up here I could potentially
do that obviously I'm not going to be
able to do exactly what max was going to
do but what I thought I could do and
could try to get prepared in a day was
to talk about my own perspective on the
work that we've both done my own journey
into working in CSS and JavaScript and
hopefully along the way cover everything
that max wanted to tell you using his
slides so I thought I'd start by
introducing myself my name is Blaine I'm
from Australia I'm from Melbourne like
Mark who just spoke if you were here at
CFS come see you last time around 18
months ago I was talking about a project
that Mark and I worked on called CSS
modules these days I am much more
involved install components in fact
that's my main focus and I've become a
really strong believer in CSS and
JavaScript for a lot of the same reasons
that Mark just explained but I think
it's a place of real innovation and it's
really exciting and I wanted to try to
convey some of the things that I thought
were important where
and I've been working on it and why I
think you potentially may want to get
involved as well I was trying to figure
out what the summary of Max's talk was
going to be and so I thought I'd start
with the conclusion which is that I
think what we're all saying is that CSS
and JavaScript is worth looking at if
you haven't yet it's worth your time
the investment in developing your skills
and forming your own opinions about
whether it's right for you it's
potentially only recently become a real
candidate for use in your own projects
but I think it is there now
Max and I kind of came to working on
this project together last year Max is
very heavily and you know integrated
into the react community I find myself
much more like all I'm trying to do is
get my CSS to work and so between the
two of us felt like we were maybe going
to stumble upon an API that might work
but in order to tell you about why style
components is the way that it is I
thought I'd start by the component end
of it because I think the idea of
building your UI in terms of components
is I mean I think pretty much we all
accept that it's a best practice but I
don't think it's self-evident that it
would be the case so I thought if we
talk a little bit about what makes a
good component Y component driven
development is actually useful it will
help understand why style components is
the way that it is oh yeah so one of the
things you could say you could you could
cast at the feet of components is that
it breaks the separation concerns you
could consider CSS HTML and JavaScript
to be a hundred percent separate
concerns and for the browser's purposes
they absolutely are they handle
differently their case differently they
have different performance profiles some
of them block rendering some of them
don't but as an author as you're
developing these UIs I'm not convinced
that technological lines are necessarily
the concerns of which you should be
separating on
for me components are a better
separation concerns because they
encapsulate a unit of functionality if
you're talking to your designers if
you're talking to your customers about
what you've built then you're talking in
functional units or visual units not in
terms of this one has JavaScript this
one doesn't one of the things I like
about encapsulation or at least like
about talking about a calculation is the
primary purpose of components is that
really emphasizes the importance of what
you call your components what you name
them and how you design them at what
their properties are and that to me is
the real benefit to working with this
stuff so let me show you what I mean if
you've got a button component here the
button component button class name
button renders out a button with a type
of submit and Parsa to the class name
now this is a react example but
obviously components are common
throughout every UI framework at the
moment so if you're not using react
hopefully you can translate these
examples all of the examples today will
be react so this is a pretty simple
component button the only thing that's
really doing is hiding the fact that
there's a default type of submit for me
if you wanted to make that button more
prominent Milton bigger or a different
color or something then you might add a
second class to it a primary class this
is sort of a been variation or modifier
rather that simply gets passed through
it doesn't change anything else about
the button just adds another class and
this is a sort of workflow I think that
a lot of us became quite comfortable
with and and doesn't scare us at all if
you look at another example where you
have to change the type of the button
but you also have to attach a class name
you get this sort of weird duplication
where you've got using two variables to
say the same thing because potentially
not all disabled buttons are the same
and so button disabled has some specific
CSS attached to it really what you've
got here is these three distinct states
of our component and yet there's
information there that we've written
that isn't relevant to us as we're using
these buttons
the class names in particular are just
implementation details what's really
important to us is that there are three
types of buttons currently being used
the default the primary and the disabled
this is our API contract between the
user and the implementation details are
all hidden and what's even better is
that you can name the component and the
properties whatever you want you can
build up a library of terms that make
sense to you as your team I think this
is even more this is more semantic than
working with HTML elements and class
names because well for one you reuse
HTML elements to mean very different
things too there's also only a limited
set of valid HTML elements and three
your class names have to be valid CSS
things living in a global super global
namespace the goal is to build up Lego
Vaughan's
like individual customized usable
reusable pieces that encapsulate
something behavior visual you know
information typography something and I
think starting from this basic point
when you start thinking about how you
would design a library for CSS and
JavaScript is where we got is how we
created style components so as Mark has
just said why would you want to use
JavaScript to pass your CSS to your
components why is it beneficial he
already talked about not automatically
being able to make your class names not
collide
maybe inline critical critical sales
optimization package management all of
those things but for me the one I one
thing I wanted to emphasize is that
JavaScript as a platform to be designing
these things is actually a lot more
powerful than anything we've been able
to use before you don't have a
preprocessor like sass that's totally
incompatible to every other preprocessor
like less you don't have post CSS
transforms that have to be run in a
certain order because they're all
assuming that they read in a file from
disk transform it and then export it
that fundamentally is not a power not as
powerful as an idea
as code and data just ask anyone or the
last time that you've had to go through
your web pack config to realize that
these files on disk have to be loaded in
the exact right way otherwise the
application rate breaks but this is kind
of where I got to last year this is
where I kind of hit a wall because I was
convinced by all of those arguments
it was definitely going to be better to
have altered your JavaScript or CSS in
JavaScript but I didn't think it was
better to write your CSS in JavaScript
there was nothing that was as easy as
fluid as powerful as the CSS that I
didn't using and so then those benefits
aren't worth it I mean I've only talked
about this morning about the skill and
the value of people who know CSS and how
that's often undervalued and in fact if
you design an API for those people that
really limits them and to ask them to
totally change how they work then you're
doing them a disservice so what I wanted
to do was to design a library that opens
up the power of the JavaScript platform
while still feeling like CSS and that's
what that's what style components aims
to be and this is where Max and I might
actually differ about how we would pitch
it what we would talk about how we'd
explain it and why we you know what
we're so enthusiastic about for me I see
style components as the CSS and
JavaScript libraries for CSS people I
think it's a making a version of CSS and
JavaScript that's as good as possible
for those people all the benefits of
componentization and the JavaScript
ecosystem without losing that power that
familiarity and that expressiveness she
max on the other hand he might take a
different approach he might think that
the real power behind style components
is the way that it lets you encapsulate
and combine these building blocks
components more easily than anything
else and that's actually why I'm really
glad to be working on this with him and
the rest of the wider community that
contributes to the project because
in essence the project is both it is
trying to do both it is trying to be
both the best thing for CSS people and
the best thing for component minded
people and it does that by encapsulating
the relationship between a style and its
component in something called a style
component right hence the name and
expressing your InDesign intent in a way
that leads you down a heavily component
driven path so we'll see how it works
now the first thing to notice is that
it's a normal JavaScript library
it doesn't require a web pack config it
doesn't load files from disk
it doesn't need a babel transform all
they're there there is at least two that
will optimize it and do other things
that you can look into but it's just a
JavaScript project the first thing you
do is you define a style component title
as a styled h1 and that could be a
styled div style image style anything it
could be a styled abstract component
reactor a ttle link could be anything
but that's your kind of syntax and then
beneath that you just write CSS you add
a little block of CSS and it should feel
as close to writing a CSS file as
possible the only things I mean if
you're writing this in CSS it would be
dot title instead of compt title the
only thing that's new here is a style of
h1 other than that this is a string now
you may not recognize the syntax here
this is a neo 6 feature called a
template literal which is the back tick
there means you can do a multi-line
string that then just gets passed around
as code this isn't being like
precompiled or something by babel or
anything for a second component on the
page you have the same thing a wrapper
component and that should feel as close
as possible to writing CSS as quickly
you know the same thing a name and some
rules so when you come to use the
component what you've done is you've
completely hidden that information when
you in this render method in this in the
component definition the only thing
that's there is the names of the
components using their relationship to
each other the fact that the wrap the
title is inside the brother
and the content right to me this is the
separation concerns that I've been
looking for if I want to go and change
the rapper to be a section tag instead
of a div or a main tag of want to change
the title via h2 h3 for any other reason
I don't have to actually change it here
that's all an implementation to detail
of the style component the component now
simply assembles these building blocks
but importantly and as make as mark
touched on when it renders it's just
HTML CSS it's not there's nothing
different it's not trying to do it's not
trying to re-implement the web platform
it's not trying to presuppose anything
about what it's running on it's just
generating H ones and classes and that
ability to write actual CSS I think is a
really big benefit but we go a little
bit further because most of us who've
worked with CSS for a long time
don't just write CSS we write something
like that and so if you look at a more
complex component we can see what I mean
if we have a color changer which in this
case is a styled section we can use a
direct descendant selector by nesting
and this is basically because I like
this from sass a lot and so I brought it
across now nesting is the sort of thing
in sass that sometimes bites you a
little bit and you can overuse it
definitely but here if that h2 is a
little bit more complex it'll be so easy
to break it out into another component
that it kinda doesn't have that same
failure case it doesn't actually go as
bad what's also really good is that
media queries that sort of thing like
again in sass you just put them inside a
component declaration when it compiles
they get inverted and the media query is
valid but it means that you can work
with these things as quickly and as
easily as you work with a satphone and
so that's kind of the CSS half of the
library which is trying to be as
familiar as possible and in fact like
familiarity I think is a huge design
constraint now it's something that's
really difficult to do like the
implementation of style components is
massively complicated by the
fact that it does nothing but for me
it's really worth it because it makes it
easier to bring the same knowledge and
skills across into this new place so the
other half of style component is the
fact that this is JavaScript these are
components these do work like react
components and so we have different ways
of solving the same challenges that
every UI system has for style components
which using props so a button example
and if you're not familiar with react
then button is the component and primary
is a prop in this case it's just a
boolean attribute we can use it by
defining our button to be a style button
and then using some sort of magic in
here we have this interpolation inside
the template string which is the dollar
squiggly bracket
all right this sort of syntax might look
familiar but again it is totally
standard JavaScript it's just new it's
just not commonly used and what we've
done here is we've inserted these two
functions to say that whatever depending
on the primary prop either have it white
on pale violet red or pale violet red on
white now you can use these
interpolations for anything they don't
have to be functions functions will get
run on every new prop
if you want to just use variables this
is the same way that you do it it's very
simple let mixing you know media queries
you can abstract them all and in fact
polished came out of the desire to get a
standard library for CSS basically that
worked in this little way so that when
you call this what you've done is you've
created one button without a primary
prop one button with one they generate
different CSS and they get different
class names attached and so then they
appear differently so the next more
advanced kind of feature is the idea of
theming right instead of having to only
change the display of something by
talking to it directly we can actually
set up an environment and then build
these components that respond to it
we can customize components and
distances my note and this is some code
to do that we have this component called
the theme provider and then you set up a
theme as an object which it could be
anything it'll get passed down but
basically in this case we've just set up
a key and value primary and pale violet
red these are Max's slides he loves
paler violet red I'm more of a papaya
whip kind of guy but yeah so that then
when you render it if you wrap it in
this theme provider then that data is
available to all of your style
components and that can really change
actually how what you think a component
is responsible for when you go to use it
again use one of these function
interpolations but this time you
actually read the primary value off the
theme off the props and then when that
button renders it'll come out pale
violet red if you want to change that
button in two different places you now
have another option rather than just
making a variant of that button you can
simply wrap it in a new theme here we
have two themes one with pearl violet
red one medium C green I do like that
color actually and then when you wrap it
in those two themes they render
differently you can do this stuff really
really well with CSS variables as well
but the theming works through react
reaction mechanism so it sprouts a
support will go a lot further back
basically anything react supports okay
the key here is that these variables
passed down through the whole tree they
don't have to be directly beneath them
which means you can have components
adapt to their relationship between the
theme and the a and the component
without having to directly make them
talk to each other there can be
different files different parts of the
tree the final feature that I want to
talk about style components is about
react native so mark touched on this
which is the ability or the kind of new
ability or nascent ability for us web
developers to target platforms that
aren't the web something like react
native is designed to offer the same
mental model as react for the web but
and it even reimplemented like the
CSS flexbox spec in order to make it as
familiar as possible but open up these
new environments to so with style
components we support that by we wrote a
different back-end we wrote a back-end
that targets back native instead of
injecting CSS in the head it passes
those styled objects to the CSS to the
react native components it means you can
work with these things as you can keep
things as familiar as possible
you still name things in the same way
you still use the same syntax for CSS
although react native doesn't support
all of CSS so there are some times where
it is a little bit different but the
mental model is at the same when you
come to render it you're still just
rendering components and in fact this
component here has nothing react native
specific about it at all so potentially
you can have share some components that
do something but between web and native
they pick a different wrapper and a
different title because the wrapper and
react native is a view and the wrapper
on the web is a div say but again when
it runs it's just the same code as any
other react native code there's nothing
different about using Styles components
once it's running so I would love if you
would go and give this a try then hit me
or max or any of the other contributors
up on github or on Twitter and let us
know what you think there's actually a
bunch of new stuff that's about to go
into the library which is what I was
supposed to be working on yesterday
while max was preparing his talk but it
didn't quite work out like that it's
pretty this is pretty much all I have so
I just wanted to end by repeating this
assertion I think this stuff is really
ready I mean like you may not be sold on
style components but there's so many
other interesting approaches out there
there's something other different design
ideas being tested because you have this
more powerful platform and I wanted to
kind of at least give a little bit more
a wider view which is the point of all
of this work is to make things better
for everybody to try to make things
faster or more reliable or more
maintainable for your team
and potentially to make it easier for
new people to join the industry every
time that we can make things a little
bit better it helps everybody and so I'm
going to steal marks phrase for the end
because I really liked this this is one
of the core reasons that I felt
compelled to actually work on this stuff
interesting violin the first talk talked
about this historical separation between
CSS work and real development and it
made me think that I realized the only
way to understand all of the CSS J and J
s work is to realize that there was
never actually any of that difference
CSS and J's presupposes that CSS was an
engineering task all along and it's just
trying to bring the most powerful tool
to bear to fmjs
isn't an opposition to CSS knowledge
it's simply about allowing you to design
systems that enforce the kinds of
practices you think are important these
are the ones that I think are important
so in conclusion javascript really
powerful and it makes working with CSS
better thank you so much for listening
to me talk having the tools it's a
tremendous privilege to be up here
speaking to you even if it's under
unfortunate circumstances so I wanted to
which max all the best and sure will be
here next year if you've got any
questions about style components please
come and talk to me I might have a
little lie-down
now that I'll be around as pie tonight
thank you very much
I'll bring it in</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>