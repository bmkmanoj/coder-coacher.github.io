<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Nicolás García Belmonte: Visualizing data with JavaScript at Twitter | JSConf.ar 2014 | Coder Coacher - Coaching Coders</title><meta content="Nicolás García Belmonte: Visualizing data with JavaScript at Twitter | JSConf.ar 2014 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Nicolás García Belmonte: Visualizing data with JavaScript at Twitter | JSConf.ar 2014</b></h2><h5 class="post__date">2015-05-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Z04aHM4n29M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody hear me yes cool hi
everyone my name is Nicholas Belmonte
and today I'm going to be talking about
from data journalism to data
illustration so basically the work we do
at Twitter visualizing data so i work at
twitter on the visual insights team it's
a small team that does data
visualizations and I lead the
interactive the twitter com project it's
a web page that has public facing data
visualizations it's the across team
effort between like the communications
team the marketing teams and the
analytics team which is the team I am on
and yeah the main idea behind the data
visualisations we do which is public
facing stuff is trying to kind of
leverage the cool things about the
platform right so the platform has I'd
say like three kind of main features
were global we've been called the pulse
of the planet many times you probably
have seen data visualizations of like
when people you know wake up and go to
sleep and how that correlates with the
number of tweets they make and stuff
like that so we are really the post of
your planet also the fact that we're
real time and that's like a pretty big
challenge for data visualization having
like a real-time platform and finally
conversational right so you have you
know within the text of a tweet you have
at mentions and you have hash tags which
are kind of like channels but you also
can explore other stuff within the text
like you know men named entity
recognition topic analysis sentiment
analysis on off stuff so there's a lot
of things that you can take out of those
140 characters so what we try to do is
focus on different verticals and the
verticals we have depend on kind of like
the audience we have so we can really
find those verticals as well but when we
plan on doing data visualizations we
have government news sports TV and music
and kind of those verticals determine
how you're going to be thinking about
doing the visualization and the main
idea is like what is the tone of the
visualization are going to be working on
do I have to tell a story we have to
present a lot of data like a million
data elements to you and for
you to explore and try to you know get
your own findings do I need to expose
the point it's a like explosive data
visualization or do I have to just be
fun and you know make you play with the
data and like maybe doesn't really have
to be that insightful right so yeah so
I'm going to try to show a bunch of data
visualisations or work we did around
these verticals and kind of like show
you how we work and maybe inspire you to
you know when you're creating your own
data but also agents to you some of this
kind of approaches of course we use web
standards for all this right so the
stuff i like the most is government
database but it's also i know like the
less fun and a bit more boring but we
worked on this one for the state of the
union address this is like it's done
once yearly it's like the president of
the united states gives a speech and and
so what we try to do is like government
people or the people within the
government really read like long
documents and stuff like that and so
what we try to do is like to present
that very same document but enhanced
with with the data visualization right
so let's try this yep slowly so what we
did here is at the top you have a
summary of the of the speech basically
the stream graph and we need topic
analysis on tweets that happen during
the address of the president so these
are tweets that talk about energy jobs
fairness healthcare defense etc the
other cool thing is that this is not
only a summary of what happened during
the address is also an index so if I
like enter the page and like I don't
really care much about reading like 40
pages of like a transcript for for a for
speech maybe what I can just do is well
I care about you know what the president
said about health care and so I can just
go click there and so this takes me
exactly to the time to what the
president was saying when these tweets
occurred so on the right one we have is
kind of like something that leverages a
bit more the real-time aspect of the
platform and as you know when you scroll
down
tell you what is the most discussed
topic on twitter and also the
distribution of those tweets so like you
can say you know people in like this
specific state care about a lot about
health care but if you go over to adult
defense it'll tell you that you know
some other states care more about
defense and so the main idea within the
government type of data visualisations
is always try to try to enhance whatever
document we have and so how we did this
is a very iterative process with a lot
of feedback and you know looking as much
as you can the first the first iteration
was this we didn't know we were going to
have the transcript before the speech
because we annotated every paragraph
with the timestamp of like you know when
did he start saying this till the end of
that paragraph and then grabbed tweets
and did that topic analysis for that
specific paragraph so in order to do
that you need to have the transcript
before the president actually says
anything before the actual speech and
that's props to the media team for
having that so what we did is the first
approach just have like you know every
row is a minute every column is a
different state in the United States and
then we'll just have like volume of
tweets and this was horrible like I show
this to a team I was like I I mean
there's nothing interesting from this no
no interesting inside anything instead
of having the transcript we were just
planning on just putting some quotes on
the right that the president mentioned
during that minute and then at the
bottom instead of having like a topic
analysis we were just using a word
frequency count so for example we're
just like kind of the frequency of the
words in the tweets for that minute so
in this case is you know it's the third
minute within the speech and the words
you can see are like Obama president
State Union watching watch which
basically means I just got here i'm
watching the state of the union address
so this was the second second iteration
we already knew we were going to have to
transcript for the for the speech itself
before it happened but we didn't have it
by like by that time because it was like
three three weeks earlier so what we did
is we took the 20
13 State of the Union address transcript
and then we took 2013 tweets and all
that stuff and we started doing that
that data mining with that we build the
data visualization with this and
feedback was very positive like people
were like you know scrolling down and
seeing like what was happening with the
topic analysis and like they were
actually getting pretty interesting
insights from the VIS the third one was
like you know people were mostly saying
like hey would like to you know have
some sort of summary of the speech at
the top and what can we do and you know
stream graphs are very kind of
mainstreaming right now so it's like
well I want to try something different
but people didn't like it so in the end
we ended up building a stream graph so
this took about four to five iterations
within three weeks I'd say that you know
would recommend having a process that
even iterates more this after that was
turned into a paper that I presented at
I triple v's in Paris last week and yeah
for other examples of interesting things
we did with gov data is this one is
about the elections the midterm election
so like government and senator elections
and stuff like that so what we did is we
took all of the candidates that are on
Twitter and we took all the mutual
follows for the candidates so if one a
follows B&amp;amp;B folks a we will draw a line
with that then we will color them by
democrat or republican and then run this
force directed algorithm so these
clusters emerged from the visualization
algorithm it's not like we decided to
put these blue notes on the left and red
nodes on the right it's just like the
algorithm it's a physical simulation
right and so it ends up showing a
cluster on the left hand cursor on the
right which means that Republicans like
the fall Republicans and Democrats like
to follow Democrats and there's not much
communication between them and then you
can go and go ahead and click on one of
the candidates and see exact like the
exact list of all the candidates that he
follows and is followed back and you
know all the Democrat and so on but
always trying to maintain kind of
a good footprint aspect on the webpage
so this is something that you can scroll
down and we have the kind of the main
points that we or many insights from the
database so very document-oriented and
this is the third one that I'm not going
to be showing but it's not interacted or
20 comments a narrative database that we
did for the Brazil elections so the
other vertical is news so news is kind
of interesting because you need to act
fast it's not like you have three weeks
to do something because otherwise it
won't be news anymore right and the
other thing is that you need to be
mindful so if you take some kind of you
know disaster that happened somewhere
you need to be very conscious of like
you know what you're showing and what
you're not showing in this case this
visit that we built was during the or
right after the typhoon haiyan struck
the philippines and it was you know i
was looking at my twitter feed and
everybody was saying like hey please
help the philippines it sit around like
almost all the tweets i had on my tongue
and what about that so it's like well
this is a huge thing so let's try to
visualize how big it is and so what we
did is I had kind of this idea of having
this map that is centered on the
Philippines which is the main focus of
attention right and then try to get all
the different locations where the
geo-located tweets were happening
geo-located tweets that were mentioning
Philippines and help in about like 22
different languages and then yeah I drew
a line from each one of those locations
to the to the Philippines because
they're talking about about that and
then I run this algorithm which clusters
the edges so these groups edges by it's
not grouped by hand but it's like this
algorithm again creates clusters of
edges with in that graph and these
regions organically emerge from that
algorithm so now you can see and you can
use this as a navigation system and say
like I want to focus on the US and see
all the more interesting or engaging or
informative tweets about typhoon haiyan
in North America and same happen in
Europe and so on so for this it is we
start with like any query rectangular
projection of a map and then we do a
small thing which is just Center it on
the Philippines which is a small thing
but I think that it's like an important
thing because it puts that in the middle
then we just roll a straight line from
each one of those locations to the
Center of the Philippines and then we
run this algorithm which is called
multi-level agglomerative edge bundling
for large graphs mingle and then we
color-coded each one of those clusters
with a categorical color palette so we
we can easily identify all the clusters
so up to hear that algorithm is really
awesome it works really fast and it's
it's it has a very clever algorithm the
only thing is that when you bundle all
these edges together into one group the
resulting edge is also one pixel width
width which is not you know this the
thing you'd like because it means that
it doesn't really take into account the
the weight of each bundle so we extended
this algorithm so that I would would it
would take into account bundle weight
and it would take into account like
direct directed edges and we open
sourced this we have a great open source
team that always want us to open source
as much as possible so that was actually
pretty easy to do so we have kind of
like a kitchen sink for that here this
is the example you can choose the number
of neighbors to cluster so this means
that you know this will if you put more
neighbors there will be less clusters
were with more edges basically and what
you can interpolate here is between the
initial state of straight lines to the
bundle edges you can play a bit with the
margin which is the stuff we added to to
have this kind of like bundle weight
being taken care of you can color by
cluster as i showed before or you can
call x direction so in this case edges
that start from a bloop
point to a red point are like the
direction the direction is encoded in
that so here it's not very easy to see
how many edges are going from one place
to the other and vice versa so what we
did also is we extended the algorithm to
sort a bit the edges when you're
creating the bundles to group the edges
going from one direction to the other
and so now it's a bit easier to see that
about half of the edges are going from
one place to the other and so on yeah so
on sports the audience for sport is like
pretty geeky right it's like they always
like to know the exact stats and goals
and like yellow cards and so on so we
had a lot of fun during the World Cup
with this this this interactive
visualization that was built what by one
of the people in our team cryst it's
pretty amazing because it's an
exploratory visualization I'll give you
all the matches during the World Cup
with all the tweets per minute during
each match and I will show you how those
correlate with each one of the goals so
here you can see during a match how
those correlate with specific goals and
you can scroll down and see all the
matches you can see how many tweets
happen during each match you can see how
many goals we had you can see how many
yellow cards red cards and so on and
also you can do is just like select a
team and follow the path of that team
during the entire tournament another
interesting database that we did with
this was and that really shows the kind
of like global aspect of the platform is
this one so what we did is basically you
know we we had this hash flags during
the World Cup you know that a
three-letter country code that you could
use with the hashtag and this will give
you the flag of the country right so if
you put like hashtag a rj r g you'd see
the the Argentine flag so we use the
hash flags we know that for example
argentina will use allure of the
argentine hash flag right but what is
the second country most mentioned by by
people in Argentina or what is the
second country was mentioned by France
or by the US and so on and so we started
analyzing bad to see interesting
relationships with these countries so
for example if you go to Argentina you
might see that countries that mention
Argentina the most are Nigeria and you
can see the list on the left basically
and on the right or the country's being
mentioned by Argentina Argentina has
been mentioning Brazil Colombia is the
second most and so on so what's
interesting is that we started seeing a
lot of interesting immigration part of
patterns so for example if you click on
the USA well Iran talks a lot about the
USA but the other thing is that on the
right the USA the country most mentioned
by your USA is Mexico and and this kind
of tells you that there's no not only
one voice in the u.s. just like rooting
for the US but they're like multiple
communities and the biggest one after
the the company you know the one that
roots for the USA is the one that roots
for Mexico and so on same happens with
France for example you see a lot of
likes french-speaking countries like
Cote d'Ivoire Ivory Coast and
Switzerland and Nigeria maybe that talk
about France and then France the first
one you know most mention countries
Algeria and kind of like also tells you
a lot about immigration within France
and also you can see proximity so for
example croatia and bosnia and
herzegovina are like really close to
each other right and so you have the
country most measuring both you and
herzegovina croatia and then Croatia's
the country most mentioned by
bosnia-herzegovina all right so I've
been showing SVG to the canvas kind of
stuff one is one is interesting to use
WebGL so maybe when you have a lot of
elements to render that's for
exploratory data visualization but also
when you have a story to tell
or when you want to use like kind of
like the cool factor so for example we
did this visualization for Cannes Lions
so this was part of a deck and the
visualization was exploring mentions of
ian mckellen and sir patrick stewart and
mentions of both users through time and
so the main idea was kind of like to
show the correlations of like you know
how how the relationship we do this to
actors came to be and so we correlated
this with you know a trip they made to
new york city in which like they were
working on a play together and then also
towards the end they were also talking
or mentioning there were mentions of
both a lot too because they were kind of
like promoting the latest like x-men
video and so you can see kind of
correlations of those things so this is
more like for impact or kind of like I
eye candy or I call it data illustration
as opposed to data visualization or data
journalism the other thing is maybe if
you want to make interactive experiences
and we build this for CES and South by
Southwest and so this is built from
scratch we already knew which machine we
were targeting and so we started working
with WebGL and like implementing from
scratch all the touch event and
multi-touch stuff and so we built this
globe in which you can kind of filter
tweets for example by a keyword South by
Southwest twist and you can swipe
through the different tweets and that
will correlate with the tweets on the
globe so there are like two linked
visualizations there if you zoom in or
you do that type of stuff we worked also
on having this expanded to be a plane
from a globe and then you could zoom in
with both fingers and kind of pan around
and so this was like a very fun
interactive experience not very kind of
insightful but super fun and people were
like kind of hooked and using their by
the way there's a book called WebGL
insights and write in a chapter on that
definitely recommend you to check that
out and yeah we talked about things like
this temperature anomalies data
visualization which this one is using
NASA imagery to kind of show the
differences in temperature in the world
so if you see around like for example
1900 it's it's pretty
mild but if you go to 90s or even like
2000s you can see that there's like a
huge change in temperature anomalies so
this means that the temperature is
growing more than 33 degrees I won't
show this so key takeaways so if there's
one thing you need to kind of remember
after this talk is the audience the
audience determines the verticals we're
focusing on it determines the tone of
your data visualization and it ends up
determining also the standards you're
using because for example a touareg we
have more than half of the people just
like logging with their mobile phones so
what phones are they're using what are
the best standards you use for those
phones etc and yeah I just recommend you
to check that out interactive the
turtlecom that's my Twitter handle
thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>