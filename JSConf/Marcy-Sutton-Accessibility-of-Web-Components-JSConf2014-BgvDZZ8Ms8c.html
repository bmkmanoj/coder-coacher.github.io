<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Marcy Sutton: Accessibility of Web Components [JSConf2014] | Coder Coacher - Coaching Coders</title><meta content="Marcy Sutton: Accessibility of Web Components [JSConf2014] - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Marcy Sutton: Accessibility of Web Components [JSConf2014]</b></h2><h5 class="post__date">2014-07-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BgvDZZ8Ms8c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">screaming's marklar
i'm marklar I'm a marklar at marklar
here to talk to you about how you can
make your mark larmor marklar at this
point you're probably saying to yourself
what the marklar is she talking about
well this has been an exercise in
semantics because if we use the same
word for everything it has no meaning it
would be the same word over and over
again which would be useless
so especially to people who can't see
visual designs it's really important
that we add meaning to our words here's
a code example let me zoom in a little
bit and actually given what we're going
to talk about today this isn't that
far-fetched I have a marklar tag it has
a nested marklar tag some text it has a
bark lar that looks like a link but it
kind of doesn't really tell you what
it's for if we created our web
components without semantics we run the
risk of adding a lot of Solus div tags
around the web and nobody needs that
so you're here to hear about the
accessibility of web components Who am I
I am Marcy Sutton I am a developer at
substantial in Seattle which is a 60 ish
person development studio and what we do
design and development but I work there
because they allow me to expand my skill
set beyond just the front end but I am
stronger at the front end so along with
the projects I work on I really focus on
making them accessible and recently
that's included a fitness app for
personal trainers and a whisky
recommendations app because everybody
wants to drink whiskey right so why
shouldn't we make all of those things
accessible
I love accessibility because it adds
meaning to my work
it makes the everyday grind a lot more
enjoyable it's the right thing to do and
also accessibility can provide some
really freaking cool
development opportunities it is not
boring as I tried to convince Dominic
but he's not sold quite yet so some
accessibility challenges that are worth
running going over real quick to refresh
our memory antics is a huge thing in
accessibility that I'm going to talk a
lot about today in the context of web
components so the type of element that
we create it becomes an object and that
type of object matters to somebody who
can't see it
so keyboard access this is actually a
wider audience than just people using
screen readers this affects a lot of
people how many of you have ever broken
your arm how many of you have run out of
batteries in your mouse yeah that's a
lot of you right so you want to use your
keyboard but we are grown too accustomed
to it really sucking out their keyboard
excess is a huge problem and we're used
to being able to give up and use the
mouse but if you couldn't use a mouse
because you had poor motor control or
you're using some sort of assistive
technology you rely on that cue so it's
really important that we build that into
all of our websites but I'm going to
focus a lot on web components because
it's more fun to talk about also in
accessibility challenges text
alternatives are really important so
that includes the alt attributes on your
images form labels or their Aria
equivalents and off screen text which I
use a lot to add text to my documents
when it's not represented in a visual
design I can put headings or other text
off screen to give users who are non
visual use
some context of a document and that
actually rounds out the whole HTML
hierarchy in my document but I don't
leave it out because it wasn't in a
visual design saying it wasn't in the
design is not a good enough excuse we
need text alternatives and another part
of accessibility challenges is color
contrast and this starts with your brand
guide so you want to work with a
designer to make sure that the colors in
your brand and on your webpages meet the
color contrast ratio so that people can
see your content web components you're
probably hearing a lot about them these
days and for good reason because it's
sort of a revolution for us as front-end
developers there's five major parts to
web components which are standards
moving through the w3c and into modern
browsers right now custom elements which
we'll talk about today shadow Dom
templates HTML imports which are super
cool because you can include a
significant of HTML just like a
stylesheet and a link tag and then
decorators which actually don't have a
spec yet as far as I know but the idea
with decorators is that you could
include the fit of HTML in your CSS just
like you would include a background
image except you're including UML and
that will then decorate your HTML for
presentation purposes so that's really
exciting I'm curious to see where
decorators go today we're going to talk
about web components we're gonna focus
on shadow DOM and what happens in a
screen reader because that's what I was
really curious about and then we'll talk
about custom elements and how we need to
add some antics to those elements why
are we excited I mean you may be you
have your own reasons but I'm excited
about web components because it's a
chance to extend the Dom and we have a
lot of power with that that's exciting
we aren't waiting for browser
implementers to give us new elements
like the html5 form inputs there's some
really cool stuff there but it takes a
long time for those standards to roll
out and they vary across browsers so we
have been granted this
or to create new elements but we need to
make sure they're accessible so I'll
tell you about how we can make our
elements accessible and what we get for
free and then lastly we can minimize
conflicts by encapsulating part of our
HTML and that's where shadow Dom comes
in
so shadow DOM is spooky sounding but the
idea is that you're encapsulating a dom
subtree under a shadow root and there's
some terms that we should talk about
here shadow host is the element that
you're actually inserting your shadow
Dom into if you think about the html5
video tag and how you only have to drop
in a video tag but along with that comes
all of the controls the little volume
slider there's a playback slider you
don't have to actually implement each of
those pieces you get those as part of
this component so the shadow host is the
video tag that's in your regular Dom a
shadow tree is the node tree that gets
inserted into that shadow Dom so all of
those parts in the video tag our shadow
tree and then the shadow root is the
root node of the shadow tree and that's
actually behind an encapsulation
boundary so trees and I learned a lot
more about trees as I did some of this
research they exist in other parts of
computer science
they resemble nature there's some
characteristics of trees that I find
really interesting there's a root value
there are sub trees with children and
it's a represent representation of a set
of linked nodes you can see that the end
of the tree branches don't circle back
and reach each other so it's just
interesting to compare trees in other
languages with the Dom we don't really
think of it as a linked list or a Dom or
a tree data structure but it is so
taking that concept and actually looking
at the shadow Dom I have an image here
from the w3c shadow DOM
back and we can see the regular Dom on
the left and it has our shadow hosts in
the document tree and then on the right
we have a representation of a shadow dom
subtree and the line in between is
illustrating that there's actually a
boundary and this boundary I was really
curious what would happen in a screen
reader because you have scripts and
styles that don't cost that boundary but
what happens to a screen reader or any
other kind of assistive technology like
a screen magnifier and as it turns out
actually the screen reader can get past
that boundary but I wanted to know why
it was surprisingly easy once I went and
tested it it just worked but I really
wanted to learn why so I dug in more and
found out some interesting stuff I
actually went and looked a lot at how
browsers work and if you're curious
about this there's a really good article
from html5rocks called how browsers work
and on the screen right now I have a
screenshot of the WebKit rendering
engine flow it's pretty simplified
because browsers are actually some of
the most complex pieces of software they
clean up our messes they fix our broken
code they render it anyway
it's actually really interesting we give
ie a lot of trouble but they clean up a
lot of really bad HTML and render it
anyway we kind of forget that because
chrome is really forgiving but what is
really interesting to look at here with
this rendering flow is that you start
off with your HTML and you can see from
this diagram it parses your HTML it
token eise's it it creates objects out
of your tags and those objects have
types those types are really important
like in the case of a form when a screen
reader encounter it changes modes and it
gives the user a different set of
options for interacting with it so if
you just had a bunch of Dom elements or
div elements and you wanted it to
actually act like a form that's why you
know we use input elements is because a
screen reader will be told what to do
with the element let's see what else so
another thing to mention is that the
objects in this rendering process are
affected by JavaScript and CSS so in the
rendering process we affect our Dom tree
with JavaScript we can append elements
we can hide them with CSS and that
affects the actual tree so elements that
are hidden with display:none and CSS
don't get rendered and therefore they
don't have accessibility objects so
they're kept out of a screen reader
that's how when you're say for example
you had a hover menu and you wanted to
keep all of the content when it's closed
from actually getting read in a screen
reader because if you can't see it with
your eyes you shouldn't force a screen
reader or a keyword through it so to
hide that from a screen reader we hit
just or we add display:none and the
effect that that has is that it doesn't
paint it and it doesn't add an object to
the accessibility tree so all of these
things the CSS and JavaScript they
affect this rendering process and what
you get in the end is a tree why is this
accessible for shadow Dom it's
accessible because it the screen reader
encounters the tree after rendering and
what they call it as rendered and I have
a funny you know pun here with Bob Roth
saying let's paint a happy little tree
because that's what a screen reader gets
it gets the tree as rendered and so
therefore the shadow Dom is actually
accessible which is a huge win super
exciting I didn't have to go beat up any
browser implementers because these specs
are developing and evolving and I
thought if there was a problem it we
could go do something about it now but I
didn't have to which is awesome I could
make friends instead of beating people
up so how do we shadow DOM it's pretty
easy I have a simple example here in
some JavaScript I'll step through each
piece of this we start with a template
tag which in the case of Internet
Explorer like older versions you
actually have to hide the template tag
so they don't know what to do with it so
they render it but the template tag is
supposed to be an element that doesn't
get rendered it basically provides you a
content sandbox that you can grab
content and then inject it into
shadow Dom so to start to create a web
component I need to create an element by
using object that create and then I have
an a generic HTML element here and I
grab its prototype store it in a
variable and when I register this new
element I'm using a taco surprise
element which don't ask me what that is
but when we register this element it has
a callback function that we call and in
this created callback we need to create
a shadow root which I mentioned earlier
or the shadow root is the root node of a
shadow tree which is behind that a
capsulation boundary so to establish the
encapsulation boundary we create a
shadow root and then we own a template
into the shadow root and then our
element that we've created has
encapsulation and it has content because
we're injecting it this implement
expects there to be a tag in your Dom
already named taco - surprise and the
deal with creating your own tags is that
they have to have a dash in the middle
and that's sort of a prefix the the
characters before the dash are a prefix
this may be the w3c is gonna make a taco
surprise element at some point I'm not
really sure so let's do a little demo
because this is where the really
interesting stuff happens I thought when
I was creating an encapsulated web
component like what kind of component
would I make so I thought about a
nuclear detonator something where you
have to actually change the state of it
and so we have this little nuclear
detonator it's like you have to flip the
cap of it and then you get the real
button so for this and I'm gonna turn on
voiceover which how many of you of you
are Mac users did you know that you all
have a screen reader in your computer
already yeah awesome how many of you
have iPhones
you also have screen reader in your
pocket you can test your own stuff any
time it's really cool if you're a
Windows user you can get jaws what
stands for job access with speech that's
the most widely used screen reader you
can get it a free copy a demo copy that
lasts for 40 minutes at a time so I
encourage you to go and test with the
stuff I use VirtualBox and Windows VM
just so that I can test it on my Mac all
the time and that stuff's all free but
I'm gonna turn on voiceover voiceover on
Chrome explosion demo shadow DOM
accessibility window
explosion demo shadow DOM accessibility
HTML content has keyboard focus 0 choose
a percentage between 0 and 1 0 0 slider
slider inside of HTML content to start
interacting with a slider press control
option shift because I've wired this
thing up to slide I don't have to use
the mouse so I can move it and it's
actually changing the position of little
sliders really group it's asking me if I
am I really sure do I really want to
detonate the thing and cause you are
currently on a button inside of HTML
content to click this button press
control option space I definitely really
want to see what happens developer tools
voiceover lot so I like goats I think
it's really cool and I do have
explosions on the screen right now but
there's also an animated gif of goats on
this bendy piece of metal and I yeah I
want to be them I think that looks
really funny and it's just a word if you
end up grabbing my slides which I'll
tweet in a little bit you might not want
to get this demo unless you're on a
really good web connection because that
gif is really big like don't look at it
on your phone because I yeah I want to
preserve your data plan so what we saw
there was that I could use the keyboard
and a screen reader to go right through
that shadow boundary and then I had
enabled the component with the keyboard
so that I could use it and that those
are some of the components
of accessibility that we need to think
about and it's regardless of whether
it's going through shadow Dom boundary
or into a custom element we need
semantics we need keyboard access and we
need text alternatives so on that
element I had Aria attributes that told
me what the maximum value and/or the
minimum and the maximum values were and
then as it slides I update so it's a
percentage I have zero and a hundred
percent and as I slide it with
JavaScript I can update the Aria value
now property and tell you exactly where
the fighter is and that gives a screen
reader really like a lot of data they
actually know what to do with it even if
they can't see it so those are the
things that we need to think about more
when we create HTML current native
support for shadow DOM it's it's not
really out there yet but right now you
can use shadow Dom in chrome in Opera
Firefox nightly I've heard I actually
had a little trouble getting that to
work so I want to play with that more
and then Chrome for Android and I always
check this stuff when can I use com
that's a really good place to go check
support for polyfills there's polymer
and x-tags and they both have a shim
that you can drop in and that'll round
up support to evergreen browsers and
that means browsers that will update
themselves so for polymer they can get
you back to I a 10x tag and get you to
ie 9 but I think that's because they
have a little bit less features in X tag
and I heard that X tag they are possibly
going to roll those features into brick
and do away with it so the stuff is
changing all the time but both polymer
and brick offer you web component
libraries I am just using the shim so
that I can build my own components but
then I can round out support to a few
more browsers than just that list of
three or four so custom elements I think
it would be really cool if we had a taco
button and again I have a dash in there
because the w3c might want to make a
taco button at some point the custom
element basically means that like the
video tag you
could create your own elements the sky's
the limit really but we want to keep in
mind those accessibility things and I
mentioned earlier so adding semantics to
a native element there's a couple
different ways the first way is that
instead of creating the generic HTML
element the prototype here we're
creating an HTML button element and
along with that my hope is that you
would get some of the methods and
default values that a button would get
like if you have a button element that
you just instantiate in your Dom it you
can tap onto it it'll fire event if it's
a submit button in a form it would
actually trigger the form so that's
behavior that you get if you were
actually creating an element that was
supposed to do stuff like that you need
to add those methods or properties
unless you're extending an existing
element so for creating a native element
here we grab the HTML button elements
prototype and then we register our
element and when we register it the
magic keyword here is the extends
property and we give it a string of
whichever type of element works we're
creating so I'm creating a button and
then I can append this thing to the page
I found that to get this behavior you
have to actually inject the element into
the Dom it doesn't seem to work if I
have an existing tag in my Dom already
and then I modify it with JavaScript
these you have to actually inject so
this is something I'm playing with more
as time goes by but theoretically this
is how you would do it purely from the
JavaScript side another approach to
adding semantics is to use native child
elements and polymer is a little guilty
of this or at least they were all of
their or some of their examples they
would have a web component and then
inside of it they would use a div for
heading and that's just silly you should
use a heading for a heading or use a
button or an anchor or whatever your
code is supposed to do use the native
element and then you get all of that
behavior for free and it really helps a
screen reader that's kind of the whole
idea here but here I'm using an h2 and a
button and then I have maybe a nested
web component for some output maybe I'm
going to load an image
if that doesn't work I can show a little
error message here I say give me tacos
or give me death if I had an error I
could make a funny funny error message
so another way to add semantics is to
use Aria and if you're not familiar with
Aria it the goal of it and it stands for
accessible rich Internet applications
the goal of Aria is actually to fill in
gaps where HTML doesn't yet it doesn't
have behavior for what you need so you
can add a role to your HTML to make it
behave like a button element or a tab
panel or something but you need all of
the components and I encourage you to go
and read for any of those roles that
you're gonna use go read the information
the spec about it because you might
learn that that it might be a little
harder to implement than you thought
because there's expectations for the
keyboard and that sort of thing but for
a button it's pretty simple if you could
just use a regular button that would be
ideal but to get my taco button to work
I gave it a roll of button and then I
gave it a tab index so that I could
actually tab onto it because the role of
button doesn't really give it it doesn't
give it tabindex to put it in the tab
order so to actually make it keyboard
accessible I need tabindex as well and
another example I have here is a slider
and I can add a role of slider and I was
thinking mmm slider I kind of want a
pork slider so I made a pork slider web
component and I gave it some Aria values
I need at least one pork slider so I
have an aria volume in of one I can only
eat maybe five I'll be pushing it a
little bit so I have a Bart Aria volume
acts of five but right now I have zero
pork sliders so I have a value now of
zero but as I get pork sliders I could
update that value that would be cool so
this is totally contrived example but I
mean slider that's what you're going to
think of from now on so which leads me
to the ultimate web component what if I
could have tacos
brought to me from the web Dogen amazing
right give me tacos
so I have this button it's similar to my
talked about and I had earlier it has
tabindex I can turn on voiceover
voiceover on chrome accessibility of web
components window
give me tacos the ultimate web conp oh
and ent ready for tacos so if i refresh
because I loaded all my slides earlier
so I have a ready event that I want to
currently only allowed three side of
reload this page accessibility 90%
loaded it was not playing all the time
voiceover is a little picky so the you
are Russo broth before I actually go
through with this I want to explain a
concept of aria-live regions and they're
really cool so basically the idea is
that you have a div off screen somewhere
on your page and it has to be in the
accessibility tree so you can't use
display:none but if you just position it
like way off the screen it'll still get
rendered theoretically but you just
can't see it visually so that's how you
expose content to a screen reader but
you keep it out of the visual design so
I have this div up screen and I give it
an aria live attribute and the property
that I give it in this case I'm using
polite but there's also assertive and so
the idea of this thing is that it's a
div that's like a message center and you
can append content into it and since
it's watching for it basically using
Aria live anytime I inject content into
this div it'll read it through a screen
reader and they're pretty well supported
so I have Aria live of polite here
because it's I don't need to be rude but
if I had an alert like you were logging
out or like some emergency you could use
assertive so I'm gonna interact with
this component and then it should give
us some feedback through voiceover
voiceover on chrome accessibility of web
components and what link skip to
navigation
give me tacos button alright so
compounding the ultimate web Co mpo and
ent ready for tacos well we have some
tacos but I have to do a lot on my
microphone cuz I'm gonna make a phone
call
currently on a button inside of HTML
content to click this button press
control option space so I should be
calling somebody really Wow this is the
weirdest thing
I just tacos why do I just really feel
like tacos okay okay this is weird I
just I've never done this before but
like that's the ultimate web conp oh and
he and he call open that's pretty
awesome did you know that you can make a
web component that brings you tacos and
it can be accessible because you can use
aria-live regions and it'll read it'll
tell you when it's calling so you don't
have to like miss a beat and Angelina
Fabro will bring you tacos I mean come
on weasels not so if you want a taco
come grab one all right so quickly
custom element native support is not
very wide yet the stuff moves really
fast but you can check the website are
we componentized yet to see where it's
at that's the end I want to thank
Mozilla for bringing us tacos and
Angelina especially I want to thank
Carter from Twilio for hooking me up
with that amazing phone functionality
and if you want to get more resources I
have a URL up on the screen right now
it's tiny dot CC flush a 11 Y - web -
components and that has a link to my
slides they're also on github but thanks
all for coming that was a lot of fun</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>