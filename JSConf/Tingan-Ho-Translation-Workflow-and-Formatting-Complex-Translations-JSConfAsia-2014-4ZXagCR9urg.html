<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tingan Ho: Translation Workflow and Formatting Complex Translations - JSConf.Asia 2014 | Coder Coacher - Coaching Coders</title><meta content="Tingan Ho: Translation Workflow and Formatting Complex Translations - JSConf.Asia 2014 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tingan Ho: Translation Workflow and Formatting Complex Translations - JSConf.Asia 2014</b></h2><h5 class="post__date">2015-01-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4ZXagCR9urg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'll tell my camera I could my fingers
away I'm tinghu and I'm the crater of a
project called Elton s.l tennis is a CLI
tool for solving complex translation
workflow and complex formatting which is
mostly what my talk will be about let's
go through the structure of this talk i
will have demos of problems and
solutions regarding i18n i think it's
important for people to understand the
problem before they see solution
especially in the eye 18 subject because
many developers tends to be naive and
think that i 18 n it's not a problem
when in fact it is and it's usually not
until they see a demonstration of a
problem where they recognize a problem
being a problem my presentation will be
divided into two parts one part
explaining complex translation
formatting and the other part explaining
i ate in workflow and at the end of this
talk i will publish my tool to NPM so
let's begin with hot one complex
translation work formatting I will talk
about CLD are and I see us message
format pure formatting context-based
formatting and number formatting and
date formatting so let's begin with
pluralization what we see here is a very
common mistake people make when dealing
with plural is asia we have blocks of
code where the execution is dependent on
a locale so we have if locale equals e
HC n LC flick l equals en doc us and
then we have block to code inside those
if statements and this is bad makes me
want to cry because we have local
dependent code blocks
and it's bad because the translator
needs to depend on a programmer to
translate anything and it's also bad
because a programmer it's no local
specific data which in the pluralization
case means you're remembering or
memorizing clear rules and remember
include our rules for one or two locals
might be fine but try to remember to our
rules for free more which is very hard
and having Luke out specific code box
just makes your code base much more
complex so how do we solve this problem
or how do we make people not crying over
their code base first time explaining
like what is still they are what does it
stand for and why is it useful seal the
R stands for a common local data
repository its data is used as a helper
for localizing strings and it's maybe
the largest repost here in the world if
not only and it's used by Apple Google
IBM yahoo etc here's some example data
taken from CL dr and in first xml tag we
see plural rules and it defines a number
of languages and one of them is english
and inside the xmltype laura rules we
have other plural rule or plural forms
that is defined inside there so let's
move on to plural forms in spoken
English we just have to define plural
forms namely singular and plural the
plural to singular is one and the pure
form of parole for plural is everything
but one but because we have languages
such as Arabic Arabic have
six pure forms so seal dr needs to
define up to 6000 forms and they are
called did they are named secure for now
and they are called 012 few many another
so try to remember it 012 few many
another because it will be most likely
be used in any future i ate an end
library out there why is that Sylvia CL
DRS plural form is becoming de facto
standard to use and its use already by
the iOS SDK and Android escape that
means iOS developers and Android
developers needs to know this plural
forms 012 a few many another and I think
so does you as the JavaScript or try to
remember 012 a few many another and the
plural form 012 does not necessarily
correspond to the numbers 0 12 here is
some example of plural forms like for
English the seal dr defines the pure
form one another for the arabic language
CLD are defines 0 1 2 view many nada or
chinese we just have other for french we
have one another and remember that the
plural form 0 1 2 does not necessarily
correspond to the numbers 0 1 2 &amp;amp; French
is a good example of that where the
plural form 1 correspond to the numbers
0 &amp;amp; 1 and not just one so that is still
they are pure form let's move on to ICUs
message format but before we move on to
something more specific like I see you
message format let's talk about message
format in generally in JavaScript we do
message form up using two methods in
JavaScript we have string concatenation
and template strings and I think
everyone is familiar with this
but this kind of message format is only
used for like trivial things like string
interpolation and it's not suitable for
something complex like pure formatting
and that is where I see use message
format comes in ICU stands for
international components for unicode and
it's written in C++ and Java icu's
message format it's a component in nice
you for having message dreams and here's
an example of chloroform at the market
begins with curly bracket and ends with
the curly bracket and we pass in a
variable which is the counter and in
this example it's called likes the
second argument is the type of
formatting which is plural in the
pluralization case and in the third you
can see we need to define some some
messages it corresponds to each pure for
and for the English we need to define at
least to some messages because there are
two plural forms one another but this
syntax looks a little bit complex and
very difficult to grasp at first time
and I will try to do to explain my best
that this syntax is near optimal because
try to define a simpler syntax using at
least one variable which is the counter
the type of formatting and then you need
some messages for each plural form I
need to think a little bit you will end
up something like this which is quite
what we wanted it's quite optimal also
and for arabic language we needed to
find some messages for 630 forms and not
just too so i'm going to do a live demo
now
I'll open the editor of my choice and I
got some code already ready here I'll
just hit save and then I need to run the
command it's called Elton s update I
will open the translation interface to
translate this I will explain the code
here we require some localization
strings and then we set set it to use
the locale en not use a and at us and
the L function call here is just a
localization string getter and then we
will output the message so it's very
simple ok so let's go to the translation
interface I will just go into the
translation i want to translate and it
will begin with the sorting curly
bracket and ends with the curly bracket
while passing the variable likes and
then the type of formatting which is
plural and then i need to find a sub
message for each 30 for and the pure
form one and other and the string i
wanted to translate was I like explode
post so i will type in I like square
blog post and then square blog post i
will just hit save
go back to my terminal and then compile
the translation with Elton s compile now
I need to test if it works or not so
we'll just run the example just know the
index I like 10 blog post and it ends
with the S so that worked I will try to
set out 10 likes we have just one I like
one blog post so the pluralization works
so let's go back to the presentation so
there was chloroform out let's move on
to select format the use case for select
for mass is context-based formatting and
what is that an example is X likes this
conference where X is substituted with
eec or day he likes this conference she
likes this contrast or day likes this
conference and this is how this syntax
looks like for select format and it
starts with the curly bracket and ends
with the curly bracket we input a
variable and the second argument takes a
select keyword for select format and
then we need to define some messages for
each case and here's an example of
gender context space formatting we
passing the variable gender and then we
define for the case male we define the
sub message p or the case female we
define the sub message she and for all
other just stay so that is select format
let's move on to number format this is
how I see you the pines number format
it's quite familiar with the other
formats or markup start with curly
brackets and then with curly brackets
passing variable of type number and then
the second argument is the type of
formatting which is number and the third
argument we have a couple of options in
the first example we have something
called a decimal pattern and you can see
it's with squares and zeros there and I
want won't go into detail or how to
define your decimal pattern or how it
works you can check out the dogs at the
Internet to see how it works but if you
don't want to define your decimal
pattern you can just use some key words
like interior percent pramila to define
like into the format you want and before
I came here I was checking out our bin
beasts website to see if there was
something good at tuesdaya and I noticed
that their price tag if you look at the
symbol their currency symbol it's with
the super element and this is a perfect
use case for using decimal pattern
number format you wrap the currency
symbol its with an open four legs with
super element and then when we in
compile it it will have that HTML
elements so that is number format let's
move on to date format this is how I see
you defiance date format and it's quite
familiar we have variable and date date
defines the type of formatting and the
further argument is just a date pattern
the date pattern is quite intuitive why
why is for years mmm is for mom didi
days and so on and I won't go into
detail because the date pattern have a
long specification so we can like do
whatever date format you want it's very
flexible let's move on to part two
translation workflow I will talk about
syncing translation keys translator and
programmer workflow
and translation key naming in the left
we have storage which in this example is
a JSON file and in the right we have the
source code and in order for them to
work they must be synched the storage
must have the the translation keys that
the source code has if not they won't
work we usually do this sinking manually
and when we do it manually that means
when you delete the key in your source
you need to delete it from storage when
you add a key in your store source need
to additives or storage when you change
a key in your source you need to change
it in your storage and that's a hell I
mean just explaining it is Helen so most
projects stay out of sync because of
that how can we fix it we can fix it
with something called auto sync what is
that so when you delete the key in your
source it will delete it from the
storage when you add a key in your
source it will add it in your storage
when you change a key in your source it
will migrate to the new key but in order
for our thing to work we need some kind
of workflow and you already seen some
part of it you write your source code
and then you update your translation
keys you tell a translator to translate
it or you can translate it yourself then
you compile your translation and then
you just run your application and you
are done so let's have a demo of auto
sync I will go back to sublime and I
will define a new message now
and it's called demo auto-sync I will
demo the bad part first in this folder
we have the storage you can see this
JSON files but this jason has just have
one entry for the key demo plural and
the index of KS is my source files we
just have them accrual at the beginning
i just added them or sink but in order
for it to work a most ad demo or the
sink in my storage and that means going
through each file and add it in here
oops and then yeah type it manually and
go not just do it for one file but all
these files and that's a hell and but
with Elton s you just wait we must hit
save here first with Elton s we can just
run the command Elton s update and you
can see that it added the translation
key demo auto sync and we can check the
storage to see if it's added there
yeah you can see them all the sink here
instead HCM or you are you them out
seeing jjp have our demo auditing and
all of this file have the motors inc now
but let's say that we want to remove
them or other thing remove it here then
if we did manually we need to remove
this entry in all of these storage files
and that's a help what we tell 10s you
just do Elton s update and it will work
hopefully yeah so it removed that entry
demo or sink it's not there just demo
clear all you can check all this power
there is no demo or think anymore and
finally to the migration part let's say
you want to change this translation key
you don't think think it's a fit like I
want to change this translation key to
demo blue rolls with the next sat there
if you change this key then you need to
go through each of the storage files and
change it with ness at them you need to
do it for all these files and that's
also a help but with Elton s you just
hit save and then L 10s update and it
will tell me the key demo role is now
gone in source what do you want to do
with it we have two options migrate to
the new or delete it and in this case we
want to migrate to the new one so back
to the presentation
so that was demo of auto sync let's talk
about translator and programmer workflow
try to always store the English
translation when you do your development
because then the translator can relate
to the English translation all the time
and let the translator learn about ICUs
message format because they will use in
any future product project and it's very
easy to learn eyes use message form and
have a web translation interface
available for them at all time to ease
your workflow let's talk about
translation key naming don't use English
text as translation keys because you
will have namespace issues and not it's
not future proof but I recommend instead
is defining a sort of content structure
you can see we have a facebook as an
example I just put the feed is in the
center and then we have a side menu here
and we namespace it with double
underscore we need space feed and then
the label name for side menu it's sign
menu underscore and then the label name
this makes it more scalable status
translation workflow so let's move on to
the launch I'll just CD into the project
and of type NPM publish and it will take
a while let me just go through some
relevant links
for Elton s you just go to elton st org
you can check out the dogs also there
for ICU you have the link here side I
see you project aboard and seal they are
so thank you for listening thank you
husband being published going on yay
it's published so go ahead one point
zero point zero eight a.m. install l 10
ms any questions front again yes thanks
for the talk I was wondering about if
you could describe a bit the web
interface that you'd have people use for
translation and also how that works with
auto sync okay and also possibly having
multiple developers and or translators
working on the same code base yeah of
course so I will go to the translation
interface just have a home button here
and it will list in Chronicle order when
you run l 10 s update release the latest
here so this is just having demo parole
but we fled more we listed in Chronicle
order and you can search here I ok why
it's not working because I haven't put
it up
ok
well if everyone can like if program are
going to work with programmer on this
then you will just commit like if you're
using it you just commit your transition
in the storage and then just passed on
up and it will be good like if you have
a staging server and just run elton
async based on that staging server and
when you need someone need to translate
something you just ask your translator
to translate through the web interface
in the staging server so that kind of
workflow I think it's the best give a
round of applause hang on thank you so
much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>