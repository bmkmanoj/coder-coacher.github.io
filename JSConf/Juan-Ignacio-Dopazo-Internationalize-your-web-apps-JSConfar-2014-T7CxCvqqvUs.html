<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Juan Ignacio Dopazo: Internationalize your web apps | JSConf.ar 2014 | Coder Coacher - Coaching Coders</title><meta content="Juan Ignacio Dopazo: Internationalize your web apps | JSConf.ar 2014 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Juan Ignacio Dopazo: Internationalize your web apps | JSConf.ar 2014</b></h2><h5 class="post__date">2015-05-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/T7CxCvqqvUs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">ok so today I want to talk to you
to help you organize and develop web
applications so that they're ready for
users that speak different languages and
I realized that this might not be a
problem that you have you may be working
on something like you know a local
newspaper that only publishes news for
Windows iris so you may need to
translate Clarion gum but you know if
your yahoo and you have 800 million
users spread out throughout the globe
then this is definitely a necessity and
you know this is a really old problem by
now and for which there are a lot of
really good solutions in the server side
and foreign languages at this Java or
PHP but we found that in JavaScript
there are some features that we're
lacking and that's why we're started
working on this and so let's to put
things in context what we're trying to
work on is a internationalized web
applications but in the context of a
modern web application that it's you
know a single page application that uses
JavaScript or running in the browser so
that you don't have to duel or reloads
and make the sprint faster but an issue
that we have with this approach at Yahoo
is that we have a lot of content such as
news or weather information or photos
and flickr that's relatively static
content that we don't want to wait one
or two seconds to load javascript in
order to show that kundan so to us
several surrender is crucial we want to
show the content as pass a fast as
possible and you know the current in
fact a to that we have for insole that
is for instance we had some supporting
YY and there's some really good projects
lecture queries globalization is that we
can get this to work on the on the
server side so um the give me giving an
example bit more concrete example so
this is a screenshot of the flickr photo
page you know the photo would be
actually above the screen and as you can
see I've marked with some arrows some
key parts of it this is mostly the maid
evade around the image like the
scripture
which company was taken for with and the
parts that i highlighted are actual
dynamic data that you normally stir in a
database like you know how many views
the father who had how many favorites or
likes when was it photo taken and you
know this is data that trucks really
normally turn the database as raw data
such as you know an integer or a data
object so this is data that you actually
have to format somehow to display to the
user because you're not going to say oh
yeah this photo was taken two million
seconds before nineteen seventy so let's
start from the beginning with the
simplest sampling room we can think of
so this number to see in the screen for
ninety five percent of you in the
audience will be the number a thousand
and two but for most of the figures
today who are from the USA this is
actually number one with two thousands
we all know this is because in Spanish
we use a dot send the limiter for the
Sultan's but in English you use a coma
as a sultan millimeter but this you know
that in French they actually use spaces
I just learned about it because my boss
is French and you know don't get me
started out dates I've been working as a
remote employee for over two years and
the number of times that it mixed up the
day and the month I just lost count so
Minister Lee ambiguous is this the 11 of
december or is this november 12 I don't
know so it's awesome that we a quick
actually can gather all these little
differences the way in the way with show
and displaying numbers and dates in
different languages and we can put them
in a big table and that thing actually
exists and it's called the CLD are the
Unicode common local data repository
this might say Madison group that
actually defines the standard for the
utf-8 encoding and
what these things allows you to do is
say okay how do I show a number or a
date in Arabic or Chinese and again it
turns out that a certain group inside
tc39 which is the committee that defines
the JavaScript language realize this and
worked on a standard called acma 402
which is the standard
internationalisation api for javascript
and it actually recommends that the
implementations use the CLD our data so
how does this API look like we have a
int'l global object with free properties
number formats and data format kind of
describe themselves and int'l dhadka
later is actually an utility for
comparing strings so you can for
instance sort the fine names in Chinese
because it understands how the old utf-8
encoding works and how you sort things
in Chinese but we're actually not using
it at the moment because an
implementation in pure JavaScript would
be too big you know the algorithm is
really large and it requires a lot of
data so we realize we can't just use in
the browser so for now not gonna talk
about it so how do you actually use this
well it's really simple you create an
instance of int'l number format this
instance has format method which taken
um takes a number and gives you a string
with you know the number formatted
correctly if you don't specify anything
it will use the locale that the user
chose for the system or the browser but
you can even specify it if you want so
instance if your application has you
know an option to change the language of
the application say goes for daytime
formatting you create an instance of
int'l daytime formats it also has a
floor admitted with six the date
instance and it gives you back a string
we know the month in the day in the
right order and
so again you can specify more options if
you want and it'll give you a date
format it in a way that's more readable
by human you can even include the day of
the week or a long version of the month
so now that we have this int'l OPI that
we know will probably work in both
circular browser we start asking
ourselves okay so in the context of
single page application where do we use
it how would have to be use it and so
give enough you know standard MVC
architecture we start asking ourselves
should we use this API in the module
well if we feed in the model then we are
kind of mixing up this logic between
localization with you know the code that
actually does netball fetching or
database access or input validation so I
cannot didn't quite fit there and so
what about the controller where the
controller actually has your business
logic you know the stuff that actually
makes your application what you're what
it is so why would you put translation
go there and when they are realizing
that you know there's a parallel to CSS
here on HTML in that we're we have raw
data that we're trying to present
somehow in a specific way to the user
the same way that you use media queries
to show different styles according to
the size of the device and with that in
mind with you know this idea of doing
things in the view and having servers a
train whistle use project we're calling
for Matias it's basically a set of
integrations with high-level view
libraries and you know you can go to
format is that I oh and there's a lot of
documentation and information there
about both the project and the int'l OPI
and so as I said we have basically
integrations with popular view engines
such as template engines like handle
version dust or react as Sebastian was
mentioning a few moments ago
so I want to show you some examples of
have these words and having you can use
it and I'm going to get them in
handlebars because I think it's probably
gonna be more familiar to all of you
here so in Cumnor words we have this
formats number helper which takes a
number and an optional second argument
that allows you to say oh this number is
actually percentage or a specific
currency and again same goes for date
formatting we have a format date helper
which takes a date and a couple of
functions to specify how you're going to
show this show this date and so far if
you spend a little time to think about
it you can realize okay we actually you
know formatting this data in a way this
useful for the user but it doesn't
really have to do with specific
different languages you can use it just
for displaying these numbers and dates
in a way it's readable even if your your
website is just in one language so now
that we have Dave we start asking our
game so what what's next what more can
we worked on to just end this API and as
I said at the beginning of the talk this
is a problem spaces has been explored a
lot in server-side languages and one
very successful project was started by
IBM quite a few years ago and it's the
ICU library international components for
unicode and this library has been
available for C++ and Java for a long
time and it's pretty much an industry
standard right now and it's in fact the
same library that some browsers used to
implement the in July bi and the thing
that we liked about the AC library is
that it has this feature called message
formatting and mr. formatting allows you
to write these sort of complex sentences
that depend on during your dynamic data
and this is the kind of thing that are
actually kind of hard to do without some
help from software you know you know you
have to start concatenating strings and
in some awkward things with your code
mix this up you're actually translations
with your data so for example in this
case we have a portion of the sentence
that depends on the value of a certain
value such as mum likes in this case and
the rest is just syntax for special
tokens that refer to values in your code
again so if a message is already knew
about numbers and days so you only also
have smaller preserves tokens that help
you with numbers and dates and finally
we have ok so this is an example her
losing hundred words again we have four
not message really simple helper that
takes what there is an reference to the
actual message in your context in new
condo where context and the rest is just
a mapping between the values for the
tokens and the values in your handlebar
context and finally we had this feature
request for a long time to work
something called relative time format in
that is you know until T for giving a
date in the past calculate the
difference between that date in the past
and now and give you the difference in a
way that's human readable so if you have
all 8 24 hours ago and you specify just
use format relative it will try to give
you the best fit possible and then say
yesterday which makes sense or if you
can actually force it to use numeric
hours and but anyone just give you know
just the number 24 it'll just give you
it will give you and part of the
sentence that says as having de cuatro
de Soto 24 hours ago so to wrap this up
I kind of want to take a little step
back and try and answer a question that
has been asked to me a lot lately
because around a couple of months ago we
announced that we are not working on Yui
anymore and so one of the reasons that
we're not working on it is because of
how the JavaScript
system looks like nowadays we've seen in
the last couple of years recently an
explosion of JS frameworks and libraries
there's really hard to keep up with and
you know some of them are really good
and we wanted to use them and so I think
that the reason why we see in this many
libraries and frameworks come up so if
I'm even when there are you know really
popular ones that is why our jquery UI
or backbone we still see new MVC
frameworks every day i think we can use
a med over here and and i think the same
applies for programming languages so
recently I was listening to this lecture
by Alex I can a professor at Stanford
who specializes in compilers and he was
explaining how why he thinks that even
though we have really popular languages
such as Java or C++ or Java Script we
still see new languages coming up every
day in chaska we see lots and lots of
languages that actually compile to
JavaScript and the reason he says is
that because it's easier to not that
it's easier is less costly to write any
language then go and modify one and
fixed one and that's because you know to
come up with a new language you just
need to three smart people you put in a
room and you get in your language or you
big Brendan Eich 10 days and you get any
language and best friend on over there
and but if we need to actually change
the language you have to give you know
we have around 10 million JavaScript
developers so if you have to change the
language and change all the applications
that those 10 million developer roads
there's a lot of cost in human hours and
I think the same thing I'm applies to
frame words you have a standard base but
eventually people recite to break and
write a new one instead of changing all
the code that I already have so in order
to you know again in Yui we had this
base layer that deal with done
and and you know give some cohesion to
the library it eventually you know
eventually worked as a wall that
separated us between YY and the rest of
the JavaScript ecosystem and so each
time that we wanted to use I don't know
something like moment jas or a new
library that we like we had to kind of
adapt it to the y y way and so the
problem the point that I'm trying to
make is that this this will keep
happening we will keep seeing languages
we will keep seeing new frameworks come
up every day and so the way we build our
souls and we build our libraries has to
keep that in mind we need to keep in
mind that the the ecosystem will keep
evolving and sub for Matias was one way
we try to avoid this issue and the day
we did it is by doing something that
Sebastian talked a lot about today and
will be Lynn on top of poly fields will
building on top of JavaScript
implementations of the existing api's in
case of from ajs we use an insole which
is rather stable but we may look into
others and on top of it we just use you
know this really small abstraction layer
that we try and do the effort to keep us
as small as possible and then we just
add whatever you think is missing you
know the way we add those things that
aren't there in the in the web platform
yet I cannot rise to address the issues
that Sebastian came up with so for
instance instead of going and modifying
the interglobal object to other our own
stuff we keep our own Global's such as
instead of you know until dot relative
time which could be standardized some
day we're just doing into relative time
as a 1 by a 1 and in some of that we are
you know we come up with a symbol simple
way to integrate weather frameworks so
what we do can you know adapt easily to
a to any new frame the red comes up but
actually our
I honestly our final goal is to come up
with oh let's see if I can trigger this
sorry so the goal is to come up with
something that looks like this we want
to take these new ideas that we have
such as messy formatting which is
actually already a proposal for the
standardization and relative time which
is in isn't already there I wanted to
contribute back to the web standards we
want to work with tc39 and the other
standard communities to bring this ideas
back into the language so the last
longer and everyone can use it not just
ours so the tip thinking if if you're
interested in four matches go
deformities that I oh and I think I hope
that at least if you're even if you're
not using the stools you take some time
before you start working on your
application or writing a new framework
or library to think about how it
integrates with the web platform and
what's already in the platform that you
can use
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>