<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ruth John, Martin Schuhfuss and Matt McKegg: { Live : JS } - JSConf.Asia 2016 | Coder Coacher - Coaching Coders</title><meta content="Ruth John, Martin Schuhfuss and Matt McKegg: { Live : JS } - JSConf.Asia 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ruth John, Martin Schuhfuss and Matt McKegg: { Live : JS } - JSConf.Asia 2016</b></h2><h5 class="post__date">2016-11-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ody93kpAjAY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yeah it was the amazing drunk hello
hello Jess come Asia we are live jazz
this is Martin Martin is on the lights
this is matt matters on the music
buttons and I am Ruth and I have the
projector everything that you just saw
everything that we do here tonight is
done with JavaScript so I know right so
before we start actually giving you a
show we thought what we'd do is just
take you through very briefly every
single aspect of what you just saw so
grab a tray I assume you got drinks
outside at some war that's fine relax
and enjoy the show and I'm supposed to
be starting my fix of the screen get up
sweet it's gonna be fun right so yeah as
you may have gathered I make music and I
use computers to do that however it's I
can hide there I haven't even drank
anything it anyway okay all right sorry
I just we yeah we good we good ok all
right so I got sick of making music with
computers and I decided to make software
to make music with computers and I did
it with JavaScript because javascript is
the thing I know but I know what you're
thinking today I'm going to show you a
super simple turkey recipe that gives
you the most perfect delicious bird
every time we'll start by tossing out
the giblets
but we'll keep the Nick will be using
that now for the stuffing will need 1
cup of celery 1 cup of carrots and X and
a dog
why would you do that why on earth what
anyway I have a very good reason
basically playing computer music is
really weird it's it's a strange thing
so most of my life the last 10 years no
not most my life almost the last 10
years i have been using computers to
make music in my bedroom and going from
composing stuff in a timeline to
actually trying to play a gig in front
of people it's something that every I
think pretty much anyone that's doing
modern music these days faces but
particularly people that are doing
entirely computer-based music with
they're not actually playing any
instruments themselves they're just
putting little dots on the screen and
they're tweaking parameters and it's
just it's just really strange for us to
try and play live and compared to
someone like a guitarist because what
they're doing on the album is really
similar to what they're doing on stage
they just playing the guitar and so if
they're on stage they play the guitar
people are like woohoo if they're on the
album then the recording engineers like
do that again but otherwise it's pretty
much the same so what are my options as
a musician if I want as a computer
musician if I want to actually play my
stuff for real to an audience well one
of them is I could just get some real
musicians to play everything for me and
I could be like the conductor or
something and there are a lot of really
cool electronic bands that do that so on
the album it's just like one guy doing
everything or one gal but in the stage
they start getting some guy on the drums
and someone else on the guitar and some
of the sense and someone on the crazy
stuff and it's kind of cool but I think
you kind of get a different complete
different vibe from that and some of
this kind of better I mean why do we
even doing computer music which is just
play real instruments but the next
option of course is you can DJ it and
this is more like exhibited as a musical
artist so rather than
just rather than trying to like recreate
everything on stage it's like you know a
painter isn't going to paint something
every gallery it's they painted this
thing in the beautiful little mentioned
somewhere up and he'll and then they've
shifted all this stuff into a beautiful
space that you can come view their
painting and so I think DJ's are kind of
doing that and this is my favorite
example to welcome this gentleman to the
stage please give it up for darude so
everyone is so hot to see this amazing
musician perform have paid thousands of
dollars and learn miles or kilometers
and here he comes is so cool this is
darude darude is like the most amazing
electronic artist of all time he's
coming up on stage and what does he do
are you ready for it he pushes play and
the rest of this is just him going
height and lots of light show so Madden
has a really useful role for the river
but that is not what I wanted to do for
vyas reasons maybe to some people so
really I was only one their option which
is I actually have to play everything
myself and I have and well I mean I'm
not really going to show you the music
that I've been that I used to make
because it's completely changed since I
started trying to play everything myself
but yeah it's if you want to find out
about that story you should look at my
talk I gave last year jazz conf there
was anyone here at last JS conf yeah
cool some people yeah you should look it
up because i'm going to explain what I
makes you doing so what I'm going to do
now is I'm just going to show you what
my JavaScript software does so oops I
haven't get my web camera working and we
able to OB have yeah can you get a
close-up of my hands sweet so I can just
play sounds
instruments I can also play perfectly in
time with the beat
and then i can look whatever I've just
done and I can just build up whole songs
doing those things and so all of these
different colors represent different
sounds that I can trigger at any moment
that I want to and I can have as many
different things loaded and I can mix
between them kinda like it has somewhere
between a DJ and a musician yeah so
that's pretty much how this all works so
I'm going to be doing this for another
hour after this but without talking it's
gonna be much better thank you very much
Matt so what you're saying is you make
music with JavaScript I do that's
amazing cuz I need music really yeah I'm
the VJ right you what now well it's a VJ
I know I get this question a lot so I
put visuals to music that's what a VJ is
I might need a llama in a minute so how
out of the audience waiting for that to
be ready yeah okay good who remembers
this we're now it really whips the law
haha the best internet in heaven and
Eminem I honestly I'm taking that DJ
everywhere with me from now on no best
mp3 player of all time right for those
of you don't know it's a really really
light mp3 player for when we actually
kept mp3s on hard drives but this wasn't
the best thing about winner this lovely
piece of software no no the best thing
about winamp was this the visualization
engine he remembers that so this was
actually a part of the software so you
could fire this up and it would show you
visualizations that went in time with
the music this is probably the biggest
influence of any VJ of my generation we
used to sit there in our teenage years
and just watch it
like I wouldn't be caught if we could
make this ha funnily enough we can in a
browser okay so the first thing you need
to create visuals in browsers to analyze
the sound so we can do that with the Web
Audio API it has an analyzer node that's
really cool so this is just a quick
example of what we can do this is mostly
sort of analyzing my voice now it's a
little bit of latency cuz I'm running it
within the slides so we just grabbed the
analyzer node from the Web Audio API and
all we're doing or we get back is an
array of frequency velocities all right
so frequencies that's low sounds too
high sounds and all it's doing is
telling us what volume those frequencies
are any given time so we can take that
data and it's just numbers we can just
take that data and do whatever we want
with it and we can do that when they're
browser so you can use a whole bunch of
sort of browser features so we can do
stuff on the Dom we can do stuff on
canvas we can we can do stuff with WebGL
we can do whatever we want we can use
new features so one of the visuals do so
at the beginning uses CSS blends and
filters which is nice these lovely
speakers here you saw some of them
earlier that's all blend modes that was
fun building that it's a little bit it's
a little bit cranky unerring a bit it
was fun building it other things like
custom properties right so this is a fun
one this is JavaScript all up in your
CSS so what you can do is you can take
one of the frequency values pass it into
a custom property which is basically a
CSS variable and pass it back into your
CSS right so we can do that here we're
using the get byte frequency data so a
frequency data here is our frequency
data array and then we're just doing
document.documentelement style step
property and then the level there that's
my CSS variable and I'm just passing
that data back into my CSS so i can
change anything in the browser CSS wise
with that frequency data so i can not
only can I do it in my JavaScript I can
do my CSS as well that's fun so it's
pretty it's pretty easy to make visuals
I'm sure we can all code right if you
want to see more of my visuals I've been
doing code member this month so if you
go on code pen and look me up and see a
whole bunch of experiments I've been
doing I've been trying to do them in
different ways as well whether that's
normal Dom elements like looping over
sort of il
and changing sizes which is the spectrum
you saw earlier or trying new things out
like using d3.js that's a really really
nice library to use for taking the data
and manipulating it and doing things
with it but how do we control it web
MIDI API right so when my favorite
things to talk about you say midi to
somebody and everybody just assumes it's
bleep e electronic music i am going to
i'm going to break your brains it is not
even sound midi is a data protocol it
came about in the 80s and a bunch of
industry experts and music manufactures
got together and they said we've got all
these amazing electronic instruments
these days and they've got no way to
talk to each other and they weren't
let's make let's make a protocol so they
did we are all running midi controllers
here all three of us only one of them is
being used to make sounds like he's
using went to control lights with which
is pretty brilliant this this is a
million a word instrument so this has
onboard audio right we pretty much steam
run of these this is a keyboard you play
it play sounds it also sends MIDI data
so you can plug this into your computer
and it will send MIDI data this this is
a controller this is what we're using so
it does the same thing it sends midi
data but it doesn't have any onboard
audio so you can just plug into a laptop
you run the web MIDI API you're
basically getting numbers so this is my
midi controller I've got a little one
they've got big once it's my handbag
midi controller oh and if we get the
camera over here so you can see what
would undoing can i point it that way
what should happen i say this happens is
when I crossfade using the bottom slider
here it will fade from one visual into
the other visual there's a tiny bit of
latency but yeah we're going from the
love the opening for JSA de into the
speakers and back again and all I'm
doing is just picking up on the numbers
and making sure that happens we make it
go back again there you go thank you so
MIDI is a great data protocol and it
actually influenced other things like a
lighting protocol which is DMX which I
believe Martin is using I am actually
so just a bit of background information
if you so there's this protocol called
DMX which is basically used by any sort
of professional lighting equipment but
if you ever have a look at how these
lights are normally operate their huge
custom-made computers that are terribly
expensive I couldn't afford one so I
look like mmm I can build something like
that myself so this is one of the two
medium two phases notnot media DMX DMX
interface is that I'm using to control
all the lights here in this venue um so
how DMX works as a pretty simple so DMX
has 512 channels hence the name DMX 512
and all each of these channels is
basically just one byte number and in
DMX there's always only one sender and
all the other devices are receivers
there's something I call device mapping
happening which means that every device
needs to know which of these 512
channels it should read from a stream of
512 bytes so I define a start address
for each device which is the first
address agreed and then the menu says
for instance or device will read like
four channels for different functions or
maybe just one channel if it's just a
lamp that I can doom or switch on and
off or something like that but the most
annoying thing about DMX is how its
implemented because every manufacturer
does completely different things with it
so that they're sometimes you can
control the color with 16-bit well I use
using two channels sometimes just ate
but were you so it's kind of horrible to
just manipulate the spider race manually
however we look at something like this
this is basically DMX translated to
JavaScript so I have a unsigned int
array
512 bytes and this device data would be
a slice of that array that the device
sees in this case starting at address 42
obviously and gather the array index
zero bias dmx addresses are always one
based and so for instance some device
mapping could look like those that I
have one channel the control to
brightness and three channels and
control a color value but however most
devices especially adult that way i have
here i'm not that simple so the
spotlights we have here in the venue
have like 20 stepper motors and all
sorts of really complex stuff going on
so they are moving hat spotlights like
you see in a picture so you can control
with pan until you can control the
motion then there's the brightness and
the color value the caliber you is not
RGB but it is an see my color mixing
then we have configurable lenses so I
can move both lenses back and forth so I
can have half parameters like zoom and
focus and then there are special beam
shaping effects and a lot of more stuff
so in total verse 27 channels for each
of these devices in order to manage that
I wrote this library called 512 and I
did that for last year's jazz comfy you
where I was first presented which is
basically just a really neat abstraction
library for this dmx512 protocol coat
looks like this so I have DMX device the
first parameter as an address the second
parameter is a list of all the
parameters that device accepts I left
them out because it's usually really
really long list and yeah once I have
those device I can just assign values to
a property is so which is quite amazing
what define property year allows me to
do there there are also things automatic
version from degrees to the internal
system of the Miller moving heads or
even every CSS Calla values
automatically translated into see my
color format so um I wanted to do some
light show with it so the simplest way
would be so I I have some sort of
integral function and yeah I can I can
just use something like trigonal
trigonometric functions I had those were
just to control the motion and and that
works give me a smooth motion but
controlling this was something like
these mini midi controllers here and
constantly switching and not knowing how
exactly the lights are layout and when
you I would have magic numbers
everywhere so I decided to go a
different route and Reeve real bad cold
so it look like this so um you might you
might notice what I did there I still
the same properties but it's just CSS
syntax which is really very much easier
to ride um but yeah how could that even
work so the first thing i did was i have
some HTML so I have something that I can
style which looks like this so I have
devices I have the device route and no
browser of a dentist it's just chrome
didn't complain about there being some
unknown texts I could still style them
as I liked so I have these channel
numbers so one coulomb is the business
interface number so which of these two
interfaces will handle this title the
second one the channel number and then I
have some classes and stuff that i can
use when writing that CSS and then there
is a little bit of JavaScript so i can
just very all these device notes from
from the document and then I can use get
computed style doing this repeatedly in
an animation loop so i can always get
the
current value of all my custom
properties that I just made up and then
I just need to decode what is in the
style so from string to number
conversion stuff like that and write it
out using the dmx interfaces but there's
one problem with that because if I just
write pan colon zero degrees the browser
will just say and now that's invalid
seus as I don't have that in computed
style so I had to do a little trick
which is using custom properties so
color is something the browser knows and
animation is something the browser knows
but everything else just gets the plug
custom property so i can read out the
values but i don't know if you've been
here yesterday's talk by Leah veeru
custom properties and animations don't
mix so there's a proposal for that and I
would have hoped i have a working
implementation of that now here but
didn't show up so I needed a hack for
that this is this one so I figured I can
just use any animatable feels as
property and just instead of writing pan
I can right left and instead of right
until I write lat riot and instead of
brightness I could write top or all
these margins or all these border radius
and any any animatable sees as property
would work for this so i have a huge
repository of properties that i could
animate instead of my own custom
properties so the heck is this I pass
all those years SI right and then modify
the AST so i can add these custom
properties and animation for bags then
finally reassemble it into a CSS source
code and inject it into the browser and
finally in this animation group that are
shown that i've shown you get computed
style will always give me the current
value of all those animations and to
prove this
this is um the code that has been
running all the time so we have for
instance as a whole lot of CSS that I
wrote last day but um so I have these
abbreviations like you p for the quantum
profile and AQW for the quantum wash
light and i can now just go ahead and be
like nah QW and let's say brightness 1
this will be full brightness all right
and it gets even brighter now this app
III know I no no no problem is i'm
missing it's been in pin being overrun
by and here i can also show you that
this is actually happening right in my
browser so here's this device root and i
can now just look at this here and so
which one stage floor stage fours
interesting let's look at this one ah so
come up and here you see all these
others generators style so i have this
color white here which is now over
written somewhere here and i believe i
should be able open those aren't on okay
so i can also just go ahead and write
directly until my dev tools additional
CSS for all these sir for all these
devices anyway so it's about to reload
um and now stuck here
okay this bed oh that's great yeah I
guess wow the little what I what I will
be presenting with for the for the next
hours and the final thing what I need to
know tell you is this thing will do
nothing out and toggling CSS classes on
that devices element on the top so if i
just press these buttons you see devices
updates the style and animations start
and stop and move and so on right was my
part roof that's amazing it if you
haven't discovered midi controllers is
hardware enabling your browser you
really need to do that you press buttons
things change it's amazing would you
like to help us make a song make a track
yeah yeah okay great let's do that
alright so i have a audio recorder here
in my hand and you guys have voices and
you have feet and you have hands and you
can whack all those things together
we'll see what happens not each other
though okay and just adjust that we will
hear can I just get everyone to yell out
javascript on the count of three one two
three just words yeah I think it worked
that's good enough that was just the
warmup what is with it okay okay um can
I get everyone to on the count of three
to stomp their foot I know it sounds
unusual but it makes a very good
standing kick drum hang on okay one two
three it's all right we can we can make
it better though it's all right okay can
I get everyone to on the count of three
to clap one two three that's right ok
now let's do some let's make out this
make some melody here anyone got a
beautiful singing voice or just a voice
is good enough voices so I'm creating a
new chunk which I'm going to drop on my
launch pad as you can see on the screen
there these here they curl correspond to
my actual hardware so I'm just saying on
this particular pair XY coordinates i
want this particular sound and so now
i'm going to record something into it
whoops so i'll just show you what it's
like for a start no
oh well I didn't even need you let's
let's record let's record everyone that
would be great so let's let's all make
the same pitch if we can try anyway we
can have a few goes at it so we'll go
for if you just copy this oh ok ready 1
2 30
can I get this mic cut out now kick kick
kick I get this mic off please
awesome big hands again for martin routh
and meds and then enjoy your drinks and
have a great life chess
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>