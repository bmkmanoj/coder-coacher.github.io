<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CSSconf EU 2017 | Mark Dalgleish: A Unified Styling Language | Coder Coacher - Coaching Coders</title><meta content="CSSconf EU 2017 | Mark Dalgleish: A Unified Styling Language - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CSSconf EU 2017 | Mark Dalgleish: A Unified Styling Language</b></h2><h5 class="post__date">2017-05-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/X_uTCnaRe94" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you so as you heard my name is
Marco Alicia I'm here all the way from
Melbourne Australia and believe it or
not my clicker isn't working yes it is
I've been working the web since 1999
where I first got my start with HTML and
of course very soon after CSS and it
probably goes without saying
given that I'm here that I really love
CSS but I've also been a big part of the
react community the last few years I'm a
huge fan of the react model and what
allows us to do with our product and out
of the reactor mmunity came my work with
CSS module something many of you are
probably familiar with and it's a very
popular alternative to CSS nsj it brings
the component scoping model to CSS and
given that you might be surprised that
I'm not actually here today to talk to
you about CSS modules I am here today to
talk to you about CSS nsj please don't
all leave immediately
I think CSS and J yes even though I
don't use it in my own work is is a
really interesting thing to look at what
I find frustrating though is that I've
been part of the react community and
seeing all this work often what's said
to these people is that they should just
learn CSS that they're just avoiding it
that they're trying to do everything in
JavaScript and what I think is that the
core of this is you know there's a
separation here going on I think that
people think is there but for me it's
not there I'm a big part of the react
community as I said and I love component
systems but I've been around the web for
a long time and I'm a big fan of
progressive enhancement that's actually
what brought me to react in the first
place and I bring this to my own work so
this right here is a video of what I've
been working on the past few years in
Melbourne at seek which is the leading
job site now what you're looking at is a
single page app built in react it's
responsive it's fast it's a single page
app so it's all rendered in the client
hitting api's and rendering in your
browser but the catch is that everything
you're seeing here I actually disable
JavaScript in my browser so despite
being a single page app written in
JavaScript you can run it without
JavaScript
and that's what reactor allows us to do
so I'm very interested in CSS and j/s
again even though I'm not using it in my
own work I'm keeping a close eye on it
and I think you should be too that's the
that's the important point I think
that's why I'm here today but why why
are people doing this and why should you
be interested as well there's five key
reasons I want to cover today there's
there's more to it than this but I think
these are the practical benefits you get
from taking on this approach and even if
you're not going to bring this into your
own work I think it will help you get a
sense of why people are doing something
that seems maybe ridiculous from the
outside so we're going to look at scope
styles are going to look at critical CSS
smarter optimizations package management
and finally non browser styling so the
first one is scope styles now I guess I
don't have to convince you of the fact
that managing CSS at scale is really
hard so much so that I say that it's the
hardest problem in front end because if
you think about working with multiple
people on a large project over a long
period of time if you don't have much
structure what's the technology that
goes downhill the fastest and becomes
unmaintainable it's CSS and that's
that's something that the CSS community
has known for a long time and we've been
working hard to solve it the big entries
in this is io CSS from the core sullivan
we've got snacks from jonathan snook and
we've also got been from Yandex which I
from my experience seems to be the one
most popular in the wild now Ben is a
naming convention for your classes that
I'm sure you're all familiar with but at
the end of the day BEM is just a
convention there's nothing stopping you
from not writing your classes in the bed
style at any given moment but even so
it's a fantastic way to manage
complexity at scale and our code bases
in fact I'd say that if you're working
in CSS at scale an approach like this is
invaluable but if it's so central to
managing CSS at scale well why is it
just a convention this is something that
I wrestled with quite heavily but when
you think of it when you look at it
closely particularly in a component
system Ben blocks are essentially
components it's the same abstraction and
when you're working with
single page app framework or library
like react your components are defined
in JavaScript so having your CSS follow
the same scoping rules as your
components is really valuable what we're
going to do from now is going to take
we're going to take a quick look at a
library that does this this is glamour
from sunil pi and basically what it does
is it allows you to define your CSS in
JavaScript but the key thing is that
whenever you define a rule or set of
rules like this it generates a class for
you automatically so that means that you
don't have to worry about scoping it in
the global namespace that's handled for
you and so that the hashing classes is
done for you rather than by name by hand
and so we're enforcing that scoping at
development time one thing I really have
to address early on it's kind of the
elephant in the room these libraries or
at least the most recent ones they don't
do inline Styles they are all about
generating real CSS and inserting it
into the document exactly what you would
have written by hand another entry in
the CSS andreas space is jss Biola
Oleg's solar Budd ski and he's actually
from here in Berlin but like I said
because it's not inline Styles it's real
CSS we can do things like add hover
stylings we can add media queries and
these will all work the way you would
expect when you attach these styles to
the document that's the moment at which
it hands the classes to you so now you
have a reference to those classes and
when you insert some markup into the
document whether it's by some fancy
framework or even just inner HTML you
can now interpolate those classes into
the HTML like so so here our class is
classes about heading and that evaluates
to a string that was generated by the
library not by us
so scopes CSS is all about scoping to
components that's what this is all about
and that's why you see this work coming
out of the reactor mmunity and similar
libraries so much so that there's often
bindings for the libraries like react
jss so here what you're seeing is that
we're injecting the styles at the bottom
there we're injecting them into the
component and then within the component
we have access to those classes so in a
sense what we're doing is we're
generating a little stylesheet for every
single component
and if you're looking at this and
wondering what about separating concerns
do I have to put my styles in the same
file as my JavaScript as my components
and even though a lot of people do
there's nothing stopping you from
architecting your app differently you
could extract your styles into a
separate file and export them and then
where you want to use it you can just
import them at the top of that file but
what you're doing is you make an
explicit reference from where you define
the styles to where you use them the
maintainability of your Styles is
greatly increased at this point but
what's important here is your Styles are
now passed around like regular code it's
not something that that sits in the
global scope implicitly it's something
that you have to hand around your
application to the components that need
it and component scoping is now
automated for us this is the basis of
working in an environment like atomic
design where it's all about components
all the way down and to do this at scale
effectively with multiple people we need
to scope our CSS the key thing here is
that been a best practice in the CSS
community is now baked in it's not
opt-in it's not something you have to
remember to do it's done for you now at
this point you might be looking at it
and thinking if you're familiar with CSS
modules that's exactly what CSS modules
does for you and that's right so if
that's all you want
CSS modules will do that for you and
it's really great but another feature
came along that people are experiment
experimenting with that really opened my
eyes for the possibility of doing scales
in JavaScript and that's critical CSS
now Patrick's already covered a little
bit of this earlier today but just for a
quick recap this is something that
Google PageSpeed have been talking about
for a while now and recommending that
you do in your applications and that's
inlining styles for the current page in
the head of the document to improve that
that initial rendering speed so it looks
something like this as we've seen before
your your inlining the styles that are
relevant to this page in the head and
then the rest of your stylesheet can
safely set at the bottom of the page
delaying the full stylesheet until later
when it's when it's needed there's some
really great tooling up there for
automating this but a project called
critical from addy Osmani that does this
for us and it's really great to do this
of course for obvious reasons speeding
up that initial render but the problem
is that well first of all it's an
optional optimization
you have to add in later but as Patrick
said as well my clique is playing up
it's hard to maintain and it's hard to
automate and I completely agree with
this it's quite a heavyweight system is
powered by phantom Jo so it's not
something you'd want to do on every
request on the server for example if you
look at CSS and JSO in a server rendered
environment it's a complete opposite
because with CSS and J is critical CSS
is not just an optimization server-side
CSS and J's actually depends on critical
CSS to work a good example of this is
the library Aphrodite from Khan Academy
and it looks something like this so at
the top there you can see we're defining
our Styles next to our component as
we've already seen but what I want you
to pay attention to is inside the render
function for that heading component
every time we reference our Styles we're
wrapping them in a call to the CSS
function and what this function is doing
is its allowing aphrodite to keep track
of every style that's being used at any
moment in time so if you do a full
render of the application Aphrodite
knows exactly which Styles you need
exactly which Styles you don't need so
that means that on a server when you're
rendering server-side for every request
you can hook into Aphrodite and render
your application to a string and part of
that is getting both the HTML and the
CSS for that for that render so now
getting the critical CSS is something
that's automated for us on every render
here we're generating a string of a
style tag and inside of it we're
inserting the CSS content that was
generated for us by Aphrodite and if
you've worked with react on the server
or seen what how it works before you'll
see that this is very familiar because
this is exactly what you do with react
as well so even though react can run in
the browser we can also render it on the
server and all the HTML that react
generates for us we can insert it into
the string so now we have static HTML
and static CSS so the key thing here is
that even though we're defining
everything in JavaScript you might think
that javascript is required but this is
built for progressive enhancement the
browser can completely shut off
JavaScript and things will still work as
expected so even if your server rendered
or if like what we do at seek sometimes
is statically pre-rendered to HTML so
even for simplest static
we can leverage the same components and
we can render the static HTML and CSS
and again there's a bit of a theme here
which is that the best practice of
critical CSS is built-in it's not opt-in
when you work in this environment the
third point I want to cover is smarter
optimizations and this is all based on
the fact that CSS and J's has better
integration with your markup as we'll
see now in the CSS community there's
been a big focus on how we can reduce
our CSS bundle to the absolute minimum
as we add more and more styles to our
application our style sheets grow larger
and larger over time and how do we deal
with that there's been some really
interesting work from Yahoo and atomic
CSS they use a really interesting
somewhat controversial function call
style syntax in their classes and from
this they can use some tooling to
generate a style sheet for you
there's also tachyons from Adam Moss
that does something similar it's a
slightly more opinionated framework
style and it gives you a suite of
classes to choose from and apply the
idea is that once you get familiar with
the library you'd be able to read these
of course and the key idea that they're
pushing here is that they're treating
classes like inline styles to try and
reduce the CSS in that final bundle now
to me this one is a little bit of a
mixed bag in the sense that I value the
output I think it's worth trying to cut
down the CSS bundle but it comes at
quite a cost at development time you
have to buy into a framework or you're
using obscure syntax and these sorts of
things are hard to use in a team
environment where maybe not everyone
familiar not everyone is bought in so
I'm not so sure on this one but if you
look at the way CSS and j/s works and
surface modules as well you never
hard-code a string to a class it's
always a reference to a string that's
provided to you either from the library
from the tooling so here we're saying
that this aside uses the Styles dot side
by class but because that's a reference
with string it might resolve to a simple
string like sidebar after all we know it
could be made up of several classes
dozens of classes it's actually not out
of our control it's the tooling that
takes care of this for us so that opens
up some really interesting possibilities
the perfect example of this is a really
great library called style Tron by Ryan
Zhou and this one really to me shows
where we can start to do red
clean new things once we blow the lines
between CSS and JavaScript because what
it brings to the table is dynamic zero
config atomic CSS all the benefits of
reducing that final payload without the
development time cost without having to
buy into a framework in the same way so
what I want to show you here is is what
it kind of looks like in practice so on
the left there what you've got is three
different sets of rules being defined
and on the right there you've got the
final generated CSS the first thing
you'll notice is that the generated CSS
is half the size and why is that
it's because there's a lot of repetition
going on so font size of 1.6 M is in the
first and the last one a height of 32
pixels is in the top and middle set of
rules and display:inline-block block is
in the last two so that means in effect
we've really only got three unique
combinations with so we only need three
classes and this is something that style
Tron can take care of that for for us
automatically by generating these
virtual class strings in the middle so
you notice we've got classes of a b a c
bc
that's encapsulating what's in common
between these different styles for us so
that that atomic CSS style string can
actually be generated for us so in code
what that looks like at its lowest level
is style Tron gives us an API to inject
a single declaration of a property value
and media query combination again this
is not inline style this is generating
real CSS and for this what we get is the
class a this is the first class we've
generated so once we start to generate
classes for multiple rules what you'll
start to see is what we saw before so
here the color red is used in both the
first and second sets so we get the
class a but display:inline-block in font
size 1.6 m/s they're different so we get
different classes so all the common
styles are factored out for us but it's
hidden away behind this abstraction of
generating the class names for us so
what that means when we generate our
final bundle is that when you can pierce
the Ultron to other CSS and Jas
approaches you get you get half the size
of a bundle basically because it's able
to aggressively optimize down to the
minimum set of combinations of property
value and media query
and just to be clear as well this is
real-world CSS this is actually from
Airbnb this set of CSS and again the
trend continues that the best practice
in terms of generating the smallest
output of atomic CSS it's now baked in
it's not opt-in and we can only do this
because now we have closer integration
between our markup and our Styles the
fourth point I think is where I really
start to be sold on this idea and that's
around package management I want you to
think about how we share CSS we've been
doing it for a long time how do we do it
you might think that we've had package
managers that are friendly to the front
end like valor and that's true but even
when you're using package managers like
NPM when you're including CSS into your
application from a third-party package
the inclusion step is generally a manual
step it's something that you have to go
out of your way to wire into your
application which is completely
different from the code that you're
installing and I think the key reason
why this is happening is because our CSS
and the package managers that provide it
are not coupled to a module system in
the way that we've seen with NPM and
commonjs modules because when you think
about what happens on NPM for example
and how it deals with packages that have
dependencies of dependencies of
dependencies they're easily able to
manage that fact but with CSS it's
something that we can't really do very
well we can't build CSS built up of
other CSS and I think you see this trend
play out in terms of the different
styles of package managers so Bower as a
package manager had this problem as well
is very much about flat dependencies
whereas NPM is more about a web of
dependencies small libraries that that
many many people provide and it plays
out I think in in in the exponential
growth of the number of packages being
created when you have this flat set of
dependencies like we've seen with Bower
or like we see in the CSS community what
you end up having is monolithic
dependencies big big libraries this is
what leads to things like in the older
world of front-end single page
applications you might install jQuery
you might have saw underscore you - all
backbone and then you were done because
you didn't really
a good way to manage much more code than
that and in the CSS world we've seen the
same things with where you would pick a
framework like a like tachyons for
example and then that was it so where's
our package manager for CSS for sass for
less we we don't really have one that's
catered to that specific needs that
really tackles it in the same way that
we've seen elsewhere but what I want you
to do is think a little bit differently
about the web platform for a second and
you think about where's our package
manager for HTML we're putting all this
focus on CSS what do you think about it
we already share HTML a lot but we share
it via JavaScript so you install jQuery
components you install backbone
components angular directives react
components these are all encapsulating
HTML in JavaScript and that's what
enables us to share and build on top of
each other in a way that wouldn't be
possible if we were just using static
HTML so the question is what if we
started sharing CSS via JavaScript and
NPM in the same way packaging up our CSS
behind JavaScript in the way our HTML
templates are as well instead of mix-ins
we have functions that operate on plain
data strings and objects instead of
extending rules we just use built-in
syntax like the new object spread syntax
for spreading our rules objects of rules
together now this means that we can
compose and share our Styles like any
other code in our application and we can
leverage package managers to do this a
good example of how this plays out is a
really great library called polish by
Max turbo who couldn't be here today and
nikrif and polished is really the lodash
of CSS and J's it's it's a whole suite
of utility functions for operating on
CSS in a JavaScript environment but more
importantly it's not relegated to the
style part of your application you can
use this anywhere and this is
particularly useful if you're doing
things like building style guides and
you want to programmatically have access
to the logic behind your CSS this is a
problem we face all the time where I
work and having the logic in JavaScript
neatly solves this problem
so the hope is that once you move
towards expressing CSS in JavaScript we
can start to see open source CSS look
more like the NPM chart there where more
and more Styles are built upon shared
low-level functions are written and
built upon and shared in a way that we
haven't done before and ironically
enough we can do this by embracing
JavaScript modules of module format
that's in it widely supported today the
final point I want to cover is much more
future facing this is not necessarily
something that the CSS and J's community
is particularly particularly big on but
I think it's something that really is
not possible today in the CSS community
and it's really interesting and that's
non browsers filing now again like I
said I've been a big part of the react
community and reacts really interesting
for a number of reasons but one of the
big reasons is the fact that you don't
deal with Dom manipulation directly you
deal with virtual Dom you deal with a
representation of what the final Dom
will be rather than touching it directly
and what that means is that when it
comes time to render you actually use a
renderer for that environment that
you're dealing with so here when you
when you render your react up on the
server you're in a client you're pulling
in from react Dom something that's built
for dealing with the Dom but the fact is
that react cor can actually have
different renderers you don't just have
to target the Dom it's not just virtual
Dom its virtual whatever it is whatever
the primitives are of the environment
that you're working in so you would have
seen that play out with react native
something that I'm sure you've all seen
before and react native is about
bringing this idea of working with
virtual representations of the final
components in this case you're dealing
with native components but what's
interesting about react native is they
wanted to make it friendly to people
like us web developers who know CSS in
and out and it comes with its own
stylesheet abstraction so even though
you're working in a native app you style
your apps with what appears to be CSS
here we're creating a style sheet with
very familiar properties border-radius
and with color font size and font weight
but what's really interesting about it
is the fact that you can use flexbox
this is an environment that's completely
outside of a browser doesn't natively
have flexbox and yet here we are using
flexbox in an iOS or android application
the way they achieve this was actually
by re-implementing flexbox in javascript
in a project called CSS layout and there
was a massive test suite making sure
that it followed the spec correctly and
this allowed them to bring the world of
flex box into their native apps it's now
been formalized in a project called yoga
that's targeting a lot more environment
so now it's actually no longer written
in JavaScript it's written in C it
targets Java c-sharp Objective C and C
as well but what's really interesting
about yoga is they've said that their
focus is on creating an expressive
layout library not implementing all of
CSS so in a sense that might seem like
it's being somewhat restrictive but I
think if you think about our own work
managing CSS at scale is all about
picking a reasonable subset of the
language you think about BEM you are you
are deciding to not do a whole lot of
things that CSS can do but you do this
to make your app more maintainable to
unlock further abilities in your team
and to make your product more resilient
over time so that means that if you're
working react native you're not dealing
with table layouts you're not dealing
with floats you're dealing with flexbox
and again because we're working outside
of the browser environment we don't have
the Cascade we have scope styles but in
some ways this makes our app more
maintainable and more portable what this
unlocks now is the ability for us to
finally have cross-platform components
with embedded styles styles that are
tightly coupled to the component in a
way that makes them available to
different platforms a really good
example of what this allows us to do is
a project called react native web from
Nicholas Gallagher at Twitter and what
react native web is it basically allows
us to have a drop-in replacement where
you can alias react native with react
native web and everything you've written
for your react native app can actually
run in a browser and this is what
they're experimenting with at Twitter
today a similar project along the same
lines as react primitives by Leland
Richardson he works at Airbnb and
recently we've seen funnily enough react
XP from Microsoft which is a
cross-platform component abstraction
which again includes its own stylesheet
system but can we take our components
even further not all of us a building
native apps is there much value beyond
that we've seen a really interesting
answer
recently I'm sure a few of you have seen
this react Sketchup by John Gould from
from Airbnb as well and this is to me is
really key not just to the future of
components but to the future of design
and how designers and developers
interact because what reacts Sketchup
lets you do is write react code with
Styles co-located with your components
but render not into a native app not
into a browser but into sketch I'm sure
most of you are probably not aware as I
wasn't but sketch actually has a
JavaScript API or actually a cocoa
script API and that's what allows them
to run this code in an environment
that's typically targeting designers we
can bridge a gap in a really interesting
way and if like me you work day in day
out on design systems in the browser
this unlocks a really interesting
potential of how we interact with our
designers and we can do really
interesting things like this here's a
video that John posted which is showing
responsive design style rendering into
sketch all driven by code and this is
only possible because we've been able to
write our our markup and our Styles in a
way that's portable outside of a browser
what we're looking at here is finally
cross-platform cross-disciplinary Design
Systems
we're having cross-platform code as the
source of truth in our design systems so
instead of sketching the source of truth
or Photoshop or PDFs code is now the
source of truth but we can move that
code back into an environment where the
designers can also make use of it so
it's been a whirlwind tour of why people
want to do CSS and j/s or at least why
you want to be interested in it at the
very least and just to recap all of this
it's all about scoping our Styles to the
component so that we can scale up to
large systems and make them maintainable
in a way that doesn't require so much
careful hand-holding it's about
optimizing our apps in ways that we
couldn't before and then it's about
taking our work and sharing it through
package managers again in ways that we
couldn't do before
it's about composing large applications
out of that shared code and being able
to build a community that we haven't
been able to build before and it's about
unifying on
on a portable platform that can target
multiple environments it's about moving
us towards a unified styling language
and it's doing it in a way that I never
would have expected and it's taken me a
while to admit that this might very well
be the future of how we do styling for
the web and beyond and this is what I'm
bringing into my work day in and day out
because I work on a component system and
it's all about components it's all about
abstracting the styles behind a clean
component interface and I think this is
the basis of how we're going to build
better and better systems into the
future critically I want to do this
without breaking in a progressive
enhancement I've come from a deep web
background and I really love what the
web platform provides and I think we can
have the best of both worlds here so
when we think about learning CSS and we
think about everything that we've just
seen all of this stuff nothing prevents
you from the fact that you have still
have to learn CSS you still have to
learn CSS and that's where we all come
in the CSS in just J's community is not
done yet there's still a whole lot of
innovation happening and that's where we
need to get involved because there's a
bunch of problems that are still being
worked on there's a lot of room for
improvement and and that the the one
library to rule them all has not been
written yet so we're looking at
improving performance we're looking at
extracting static CSS where possible
hopefully as much as possible we've seen
people experiment with targeting CSS
variables rather than targeting the web
of several years ago and finally the
most important thing and I think this is
where the people in this room can help
the most of all is making developers
happy because what we're seeing here is
potentially the future of CSS tooling
and we want to make sure that we get it
right and I really hope that that from
this you you take the message that this
isn't as as ridiculous as it sounds
there's actually some very sound
thinking behind it and your input is
going to be really valuable and
hopefully maybe you've come around to
the fact that there's something to this
and something worth checking out so
that's it for me thank you so much for
listening</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>