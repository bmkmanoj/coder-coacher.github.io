<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Dominikus Baur: Web-based data visualization on mobile devices | JSConf EU 2014 | Coder Coacher - Coaching Coders</title><meta content="Dominikus Baur: Web-based data visualization on mobile devices | JSConf EU 2014 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Dominikus Baur: Web-based data visualization on mobile devices | JSConf EU 2014</b></h2><h5 class="post__date">2014-11-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/X2ZlDrx6dAw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello Jess cons are you yes thank you
I'm Dominica's power and as you might
have noticed I suffer from an all too
common problem in the tech world which
is um yet another bearded dude and
here's my totally scientific analysis of
the jas conf speakers profile pictures
on the website and as you can see I'm
not alone there's so many of us we
should probably form a support group or
something or just shave those damn
things off I don't know anyway so what
does this bearded guy do I'm based in
Munich Germany and I work as a data
visualization freelancer and here are
some of the projects that i did so in in
the recent time I this better life index
and regional well-being pages for the
OECD I did selfie city which is an
analysis of the selfie phenomenon with
lots and lots of visualizations and also
visits here which is a visualization for
personal travels and you can find them
all on my website so check them out
there of course web based um all right
so let's start I guess most of you know
data visualizations otherwise you
wouldn't be here so the basic idea is to
turn complex data sets into visual
representations and if they're done
right then you can easily spot patterns
and understand the underlying data and
this year for example is a pretty famous
and old one and it depicts Napoleon's
march to Moscow and in this graphic you
can see the course that the army took
you can see it's shrinking size so
people are dying there and you can also
see the temperature down at the bottom
which might give you a clue why the army
was shrinking so you have lots and lots
of information in
easily digestible format and you could
even argue that it's somewhat beautiful
so that makes data is kind of the
perfect tool for portable devices I
think just think of all the data that
you're producing or have to work with
while on the go and visualization spares
you from working with the raw numbers
and gives you a quick overview to find
out what's important and with this place
becoming even smaller now maybe even
watch sized it can quickly show you
what's relevant or interesting to you
without forcing you to look at a
spreadsheet or so okay so how do we go
about building these things of course
there's the native approach but as you
all know that's that's a real pain to do
it like that so you have to support iOS
of course but then you also have to
support Android and they're completely
different and then once you actually
visit the zoo and try to do something
for Windows Phone or blackberry or bada
or whatever they're they are all called
you're in a complete mess and porting
code isn't easily possible so what
better way to solve this problem then
going to the web so the mobile web has
come so far in the last year's that it's
actually viable to develop full-blown
applications even for mobile devices and
especially in use organizations are very
keen to create visualizations
interactive visualizations that work
across devices of course so here's a
couple of examples from the New York
Times who are doing an amazing job out
there but of course there are other
teams like the Guardian Washington Post
and so on that are also creating really
cool stuff ok so what I'll try today is
I'll try to give you a quick crash
course of developing data visualizations
for mobile devices in 20 minutes or less
first I'll give you a quick overview
I'll talk a little bit about responsive
web design and how that already gets us
halfway to our target I would say but
it's also interesting to pursue
mobile first approach to focus on the
strengths that you actually get from
having a portable device that's also
touch controlled which lets you do much
more interesting stuff and finally of
course the big issue i would say in this
whole topic is interaction so how do you
best support interaction on those tiny
portable screens if you need more
inspirations for this topic here's two
websites that can give you that so
mobile vis is one x Boku and another one
is mobile in focused or come by
sebastian sadarski and they're both just
collections for mobile visualizations
you can have a look at those and their
ever-growing and that's really great
stuff there okay um what are the main
differences between desktop and mobile
so first the obvious one interaction
happens via touch instead of a mouse so
we no longer have this one single
miniscule cursor but we have potentially
multiple fingers that are overlapping
everything on your screen and just
creating a mess and we have very
specific results of that for example
we're losing hovering where we're
getting something else like hovering
I'll talk about that in a minute but
there's really a huge difference between
that and then second of course we have
different screen sizes and formats so
with a laptop or a desktop we usually
have relatively low res large screens 16
by 10 or 16 by 9 aspect ratio in
landscape and then on mobile devices you
have your high resolution very very
small portrait oriented screens and this
of course changes how you go about
information layout density things like
that all right if you want to develop
database for the web then I'll recommend
one library that we've that you might
have heard about to
a already so d3 that's kind of we had
this fantastic talk before where we saw
that there's a huge another zoo out
there with all of those various types of
charting libraries that let's let me do
crazy things all in different ways but
really t3 is kind of the lowest common
denominator so most people that are
doing database no d3 or use it so we are
a sort of it who is used it cool yeah so
um it's idiot it really is pretty common
it's mostly being developed by by one
guy Mike Bostock who's working at the
New York Times I'm not sure if that
gives them an unfair advantage I guess
but yeah who knows so Mike is doing an
amazing job he's also producing lots and
lots of examples for d3 so if you go to
black stork PL docks org you can find
hundreds and hundreds of those things
with the really really amazing stuff in
there so d3 has a very very active
community and it's still being developed
and not it hasn't been abandoned two
years ago or something like that and
what's really great about those examples
here is that usually they work directly
on mobile so if you open up this page on
your smartphone for example and try one
of these it usually it's just works
because the interaction issue isn't 143
so if you want to go from mouse to touch
usually you only have to change your
event handlers a bit so usually on a
desktop you would write something like
that on mouse down do something and for
touch those events those event names
change to touchstart touchmove touchend
instead of the mouse equivalents and of
course those events can then appear
multiple times because you have multiple
fingers and then you can keep track of
those fingers and do pinching and stuff
and the nice thing is that most of the
three automatically does that so you
have certain behaviors that
automatically support pinching for
example so interaction isn't really an
issue
what's an issue is screen size so the
three leaves all the scaling to the
developer pretty much and that means of
course that your visualization then
becomes really tiny on a small screen so
those are screenshots from black stork
as he would appear on your smartphone of
course imagine that thing a little bit
smaller and especially with like the
tree map on the right here you can't
really read anything or do anything with
it so scaling is an issue and of course
what do we do when we want to have our
website scale right we go to responsive
web design which is fantastic so
basically you want have a page that
adjusts to the size of your of your
viewport and we can apply those same
principles that we get in responsive web
design to visualizations of course so
you grab your favorite responsive web
design framework like foundation or
bootstrap or whatever and then your
chart just becomes one of those boxes
and your grid and you give it a fixed
width and then it adjusts based on the
devices screen size so that's really
useful I'll show you an example from my
own work where we use that so the OECD
regional well-being project was
something that i did with morcha fauna
and you might know the OED OECD it's
it's a big organization that collects
data on well-being and how people feel
worldwide and this project here regional
well-being focuses on certain regions on
the globe so you can check out how well
people are doing in certain aspects so
we have things like safety the job
market education and so on and they
asked us to create a visualization that
lets people easily explore this data and
our idea was to focus on a certain
region and then that people explore from
there and what better reach and for that
then the one where people actually live
at the moment so this page starts with
your home region and then you get this
nice visualization
that shows the various aspects of
well-being you get a list of similar
regions to your own which sometimes is
very surprising and then down at the
bottom of the page you get an overview
of those those quality factors in detail
so you can compare for example safety to
other regions in your country and so on
okay so you can just browse that you can
then jump from region to region but as
we didn't have the budget to actually
create three different websites for
three different form factors we made the
whole thing responsive and if you're
trying it on your tablet or your
smartphone even you might see that it
should just work and here's kind of the
underlying magic so all of those pink
boxes are our grid elements in bootstrap
and yeah by just putting those
visualizations into those boxes you
actually get the whole responsiveness
for free and depending on your screen
size of course the layout changes some
elements become bigger on smartphones
for example and as you can see like
those three detail views in a row become
two and then one on a smartphone so it
actually works pretty pretty well but of
course that's not everything there are
kind of those little details that you
learn on the go on the job and I'll talk
about those a bit so one thing is
drawing a visualization is usually quite
heavy on the CPU and the battery and so
on and you don't want to kill your
browser tab just because you decide that
you want to redraw your visualization
every time the user adjusts the window
size x 1 pixel so that's when something
like D pounds for example or throttle
comes in really handy i usually use the
underscore version but there are of
course other implementations out there
and the basic idea behind all of those
deep bounces is that you give it a
function in our case render
and this function is at most called
every here resize refresh rate
milliseconds and if you set that to I
don't know 300 milliseconds maybe then
it's only drawn every third sec and
every third of a second and not like
hundreds of times per second which is
quite useful and you might also see that
if you actually try it on your laptop
and adjust the size of the window then
you see that the visualization takes a
bit to be redrawn but at least it keeps
us from crashing the browser window
which is nice alright another thing our
meta viewport so that's something that
you want to set on mobile devices it's
just in the header of your HTML and
there's this meta tag called viewport
and you can define certain things how
mobile safari or mobile chrome displays
your website you can say for example
that with equals device width which
means that the website is initially as
big as your screen from the width and
you also want to set the initial skate
one so it's actually zoomed to 100% and
sometimes it might even be useful to say
something like user scalable equals no
which means that people can't enlarge
your page by pinching depends on the
application if you actually want to do
that and finally one last thing when it
comes to responsive visualizations our
SVG viewports so most of those
visualizations are built in SVG I guess
it's most common application also all
the three examples use SVG usually and
what's nice about SVG is that as the
name scalable vector graphics implies
it's actually a vector graphic so it can
easily be scaled and you can even
control that using CSS so with the view
box attribute here you can define your
own virtual coordinate system within the
SVG so here this coordinate system goes
from 0 0 to 500 by 250 and everything
that you draw within the SVG is then
scaled according to the
um coordinate system and what you also
want to do is you want to define that
the aspect ratio of your virtual
coordinate system always stays the same
and that's what the second attribute
does preserve aspect ratio there's
there's actually two parameters the
second one meet means that your SVG is
always scaled so that it's everything is
visible and nothing is cut off and the
first one the ex MIT why main thing says
that your viewport your SVG viewport
should be centered on the horizontal
axis X mid and should be aligned with
the minimum on the y-axis so it looks
like this so if the SVG actually fits
into a into your window everything's
fine and here it's a bit different here
is where you actually get a horizontally
centered box which is your SVG and it's
also kind of a rare sight and web
development so you get that for free if
you set those attributes okay but let's
dive a little bit more into details when
it comes to mobile data visualization so
what happens when you actually
approached this whole problem from a
mobile first design perspective and see
what comes up so first of all usually
the person that uses your visualization
on a smartphone is like this woman here
so they're in the middle of something
they're not in the mood for any of your
fancy you I shenanigans they wanna they
want the data as quickly as possible so
i would say always if when it comes to
mobile interaction design just gonna let
that loop when it comes to mobile
interaction design think about what's
the task of the person that's using your
app or your visualization or whatever
and then try to support that as as well
as possible and what's really helpful
with designing something like that is
sorry i have to take your picture away
now guys
what's really helpful is that you can
get certain aspects of the context using
the new html5 api's so one of those
geolocation was used that already yes
awesome so that this one's really great
it basically gives you the users current
position global position in this little
amount of code so you just call get
current position you give it a call back
and hopefully you get some latitude and
longitude so we use that as well in the
regional well-being project so if you
open it up on your smartphone or your
browser then you get something like this
pop up here that asks you if the website
is allowed to to use the current
location so you can also see that it's
actually much more privacy conscious
than the server based solutions that
just do it based on your IP address
without ever asking you and once you set
that up you get and the the
visualization starts on your home region
or the region that you're currently at
so it should show Berlin right now if
you try it and that's really nice so you
don't have to pick that from a list or
anything you just get it for free
another aspect when developing for
mobile is of course performance and
battery drain so you want to have fast
beautiful graphics of course but you
also want to be careful that you're not
actually draining the battery in the
process so there are a couple of
graphics technologies that you might
want to use so SVG of course I already
mentioned that it's vector based so it
scales nicely it is Tom integration you
can tie events to certain elements of it
but it's somewhat slower than the other
alternatives are would same faster is
canvas which just gives you a plain
canvas and you can draw on that but kind
of a downside is that it's very low
level so you actually have to draw on
your canvas you don't just say ok here's
a rectangle and it's going to stay there
you have to draw it every time and you
also don't get a Dom so you have to
figure out yourself where the user now
tapped and it's
the same with WebGL which is probably
even faster than canvas and it's able to
do 3d which is awesome but again it's
very low level it has no Dom so
basically pick your poison and by now
WebGL is even supported in iOS 8 in the
upcoming iOS 8 so it's viable to use
that all right um when we talk about
interaction on mobile devices the main
problem is probably the fat finger
problem which means that you're using
those thingies here to interact with
anything on your smartphone most smart
phone companies recommend a certain
minimum size for on-screen elements so
apple says 44 x 44 pixels but yeah it it
varies but it's always something in that
range and of course you have to make
sure that all your interactive elements
are big enough that people can actually
interact with them sometimes you can
avoid the fat finger problem altogether
so in the selfie city project for
example that I did with left mono much
more it Stefan adanya garima and a
couple of other amazing people we looked
at the differences in selfie taking
practices across cities worldwide yes
you can do that and part of that project
was the self exploratory that you can
see here where you can explore the data
set so you have filters at the top but
you can filter the selfie collection
based on head orientation or glasses
smiles and cillian age and stuff like
that and then you get the results at the
bottom and what was good for us was that
everything was big enough that you could
just use it on your fingers so it kind
of with your fingers so it worked kind
of out of the box but of course the
problem is what do you do when you want
to show really high resolution
visualizations that are still
interactive and again there are a couple
of tricks that you can use probably the
most common trick is invisible touch
areas so the idea here is that we have
to scatter plot and we want to have
people being able to tap on the circles
and of course they're much
small so we create those not very
invisible here circles the orange ones
so mostly you just set the opacity 20
give them a high Z index so they're
actually on top of everything and may
position absolute and stuff like that
and then you add your touch event
listener and then of course those
circles have to know which parts of the
data they represent and based on that
you can then have those things be
interactive without actually displaying
them but of course you as you can see it
doesn't always work even here in this
very simple example we already have this
overlap between two circles so what
happens more often is that you just
create a full rectangle another
invisible rectangle opacity zero put it
on top of your graph and then every time
you have a touch event you try to figure
out okay which part of the data is the
finger closest to or something and then
I show the tooltip or filter or whatever
and talking about tooltips is probably
one of the main problems when it comes
to to touch based visualizations because
as as i said we no longer have hovering
really with fingers but tooltips are
really ubiquitous in visualizations that
pretty much in everything because it's
such a nice solution to display
details-on-demand just by showing a
little tool tip and in mobile safari for
example we kind of have hovering but
it's weird and you've probably already
seen that so if you tap on an element
that has some mouse over event you find
once it triggers the mouse over event
and then when you tap again it's a mouse
down and for most people that is just
totally confusing because they tapped on
something and then this tooltip pops up
and they are not really sure are they
able to tap again or not so I can't
really recommend that a better solution
is just have your always on tooltips
they're always always visible but there
tied to some type of interaction so in
this example from the New York Times for
example we have two solutions that apply
this so first we have this little tool
tip there that's tied to the slider and
you can just move that around and you
also have here this this been a like
thing at the bottom that's always
visible and shows you information so
that's I would say that's probably a
good solution to have something like
that but then of course you don't only
have downsides you can also do amazing
things with multi touch and gestural
interactions so one idea is to keep
track of all the touch starts on an
element and then decide what to do with
it for example rotation scaling or so
frameworks can also help you here's two
examples from the three and those handle
multi-touch automatically so if you open
them on your tablet for example then you
can pinch to zoom this world map and you
can move multiple circles around using
multiple fingers if you want to be more
fancy about it you probably want to use
some gesture library like quo jas or
hema jas and those even detect full
gestures so you get stuff like swiping
and pinching rotating long press and so
on so you can go totally crazy with that
and if you're building something with
touch first in mind then you can kind of
look at your visualization as something
that's deformable some physical object
that you can play around with that's
what I tried to do in this research
project here which isn't playing
here we go so that's that's touch wave
and in touch way if we had a stream
graph and the idea behind the screen
stream graph was that you could just
manipulate it using your fingers so you
as you can see you can just stretch it
and enlarge it you can double tap on it
to change the layout so we went as far
with the metaphor as we thought useful
yeah and if you really want to do that
so test that projects already two years
old so i had to implement it natively
but
by now it should probably even work on
the web okay here we go all right I'm
something that you can do right now is
you can use for example the device
orientation events which is really cool
so those actually give you the
orientation of the device in space we've
already heard about talked about that
yesterday which is really neat so you
can use that for example to build one of
those little demos here you can check
that out on your smartphone you have
this little globe and when you orient
your device in a certain way then it
spins around which is a neat effect and
you can probably do all kinds of crazy
things when it comes to visualization I
don't know 3d maybe even though that's
somewhat of a four-letter word in the
community but yeah you could use that
build it right in your browser ok that's
it for me here the links to some of the
examples you can find all the stuff on
my website as well talk to me on Twitter
send me an email or talk to me later in
person thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>