<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Kamen Bundev: Fixing the Mobile Web - tips and tricks that can save your sanity | Coder Coacher - Coaching Coders</title><meta content="Kamen Bundev: Fixing the Mobile Web - tips and tricks that can save your sanity - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Kamen Bundev: Fixing the Mobile Web - tips and tricks that can save your sanity</b></h2><h5 class="post__date">2012-11-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Z4EjMtQJXVo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is common bond effing I'm
a front-end developer working on kendo
UI mobile at T lyric and today I'm going
to help you enter the dark forest of
mobile browser books and keep your head
on you will need it later when you do do
you when you delve deeper alone
smartphones change the web landscape
they introduced smaller screens and weak
processors and to their exponential
growth Foster's the developers to
provide special treatment treatment for
them we grew to love them and support
them but it's a love-hate relationship
we love them and they hate us last year
there were at least three major
smartphone parroting systems on the
global mobile landscape that's roughly
amount for about eighty percent of the
market if we count symbian the number
grows above 19 the good news is that all
the major players are using the WebKit
engine and the bad news the engine and
manufacture implementations vary a lot
as you can see from the table above
features that supposed to work
everywhere are actually not supported on
some platforms every operating system
vendor decides to what to include in
their web key distribution thus leading
to such inconsistencies only the
blackberry playbook OS to support every
feature from the ones listed above but
its market share is most likely below
five percent so to be sure that
everything works as you identity to test
everything you create on every device
you can get your hands on but the coat
hat truth is far worse even unsupported
mobile platforms one of these features
can be close to Anu zabal how many of
you created the web application and
turned into strange or even impossible
issues that forced you to abandon the
original approach
some of you okay issues like slow
performance broken rendering missing
events freezes and crashes plagued the
mobile web development world and prey
upon our time in our money the most
irritating ones are the performance
issues without hardware acceleration
customs curling can't animations grind
to a halt fortunately all that is needed
to speed up the rendering is a 3d
transform a carefully placed WebKit
transform translate Z 0 such transform
chiggers card or acceleration on this
element and it's rendering gets
offloaded to the mobile GPU however
translate these becoming damnation as
much as salvation welcome the new zoom
one of the mobile web among the many
issues caused by hard acceleration are
these transforming bigger elements can
lead to bad performance and can break
the renderings of WebKit masks
especially on Android sometimes the 3d
transform is not enough to trigger
hardware acceleration on some platforms
and transforms also may lead to
artifacting can break form elements or
android versions before jellybean and
finally 3d transforms do not work in on
droid 2 but what else work there I'll
now go over this one by one first we
start with the performance issues
imagine this scenario you have a rather
large list of images on a page with the
custom scroller to speed up the
scrolling we apply translate Z on the
list instead of speeding up the
scrolling gets much worse and you can
actually see part of the Patriots
drawing Queen scroll by the issue you've
just run into its code next exercise all
graphics chips have just exercise limit
in when you reach it your texture is
split into several smaller textures
which are rendered separately resulting
in more calculations and generally worse
performance this especially visible in
high resolutions on ipad 3 as they're
the graphics chip has to move four times
more pixels per texture than on previous
models even though it's slightly faster
even though the max texture size on iPod
trees four times bigger it's two covers
only slightly more than the screen to
avoid this you need to use smaller
elements that are sure to fit into the
texture size in this case apply the
transform on the list items instead of
on the whole list for we already saw
that most native smartphone browsers
that webkit-based this may change in the
future with Internet Explorer 10 and
firefox mobile advancing but now it
drives the usage of some proprietary
WebKit functionality for instance WebKit
masks WebKit masks are just images with
alpha transparency which apply a
non-rectangular clip mask on their
element they are supported in all mobile
webkit-based browsers with the exception
of all blackberry OS with 70 versions in
which they don't work at all how remiss
that escapes me fortunately they do work
okay in 60 and 71 however most issues
with a bit masks you'll probably see
young in Android again 3d transforms in
maths just don't get together there an
example applying WebKit back face
visibility on a must element in android
for results in a colored rectangle on
the other hand the plank WebKit
transform translate Z on a single mask
element breaks all the masks on the page
but wait there's more if you applied
translate Z 0 on a container the masks
inside it will work but the rest of the
mask will break and the best part all
this may vary between Android versions
so to avoid breaking WebKit mass in
Android you need to take extra care
where you apply them and preferably
don't mix them with transforms with the
advancement of HTML mobile applications
and the usage of hardware acceleration
for better responsiveness the graphics
chip is eating smart phone batteries
somewhat faster an attempt to avoid that
manufacturers sent operating system
vendors are limiting the CSS properties
that trigger the hardware acceleration
you probably heard that for iOS 6
but some soon did something similar in
galaxy s3 the limiting more properties
turns out 3d transforms are not enough
to trigger hardware acceleration there
after some testing we were able to do so
with a transition of a transformed
tellement any children at least a little
even for one millisecond it's ugly but
this works so to be able to turn
hardware acceleration in your web
application samsung galaxy s3 apply one
millisecond or shorter transition on the
transformed element but make sure you
don't activate accidentally for instance
you can use web controls asian property
to limit it several times I've run into
a heart reproduce problem on older
Android 2.3 it's really hard to
reproduce but it usually happens when
you have transforms applied in a webview
then you open a new activity with
another web viewing it and then later
closet the transformer on the page
afterwards are frozen they doesn't get
updated on screen even though the page
on the read or no underneath works ok
and fires events so if you run into this
issue while testing your web application
be sure to remove old transforms before
opening the new activity and then you
cannot tell them again almost all modern
mobile browser secluded support for
html5 form elements like date and time
Pickers for instance html5 form elements
were introduced in iOS 5 and blackberry
weighs 60 however the default Android
Browser didn't join the party we will
introduce from as the default browser on
Nexus 7 but mostly most of the jelly
bean phones out there are still using
the alternate browser which still
doesn't have support for html5 form
elements even the nexus l7 webview used
in phonegap is no exception this leads
to another unfortunate conclusion if you
really want to use html5 five for
Pickers
you will have to fall back to external
libraries for them or use simples of
type text with some kind of validation
you may have noticed to enjoy its native
browser that when you place an HTML
input on a page and focus it you can
style the focus state this happens
because it is not actually a state
Android surrenders and another input
this time native on top of the one in
the page this fake native element
possess your typing and sends it back to
the page you can easily observe that if
you know that the fake fake input
doesn't position correctly when the
original element is transformed hideous
disease you can avoid this in Android
for for a price you can use the
little-known CSS property WebKit user
modify to remove the fake input on focus
however just work around that's kind of
a trade off custom keyboards like swipe
for instance stop working completely so
you must carefully carefully weigh the
processing cost of using that in Android
to the solution gets even uglier the CSS
property is not supported so the only
thing you can do to avoid the second
team put this translation of the input
container to get it out of the screen
and then return it back with absolute
positioning thus removing the fake
element don't translate the input itself
or there will be dragons the negative
effects of such work around or even
worse ranging from broken non-english
keyboards through most HTML inputs
turning to type text and to the ability
to type the number 9 why is that I don't
know fortunately all this mess is fixed
in jelly bean but in the default browser
and in webview and we just have to wait
a few years for everyone to update if
you're building a single page web
application you surely need a way to
navigate in it unfortunately the history
op is not consistently supported by all
WebKit browsers
for instance it doesn't work properly
now s the plan including 4.3 well it
should work for your newer versions
interesting though the history AP works
ok in Android too contrary to everything
else the Gustav there it is broken
Android three and four and traditionally
hashes also partially broken Android 4
plus the others bar doesn't get updated
every time well the location do updates
internally to avoid this mess better
don't use the history of before mobile
apps and she wit matures new sketches
instead they are mostly harmless iOS is
no safe haven from strange and obscure
browser books non example of that is the
input label book on every other platform
if you click on even if you click on a
label which is associated with an input
the input gets focused however in iOS
this is not true nothing happens when
you click the label only unless it has
an on-click event actually you can skip
the event an empty onclick attribute is
all that it takes even better if you
have a container around all your inputs
and labels you can add empty on click
attribute to it and all labels will
suddenly start working the next issue is
not really really an issue it's it is
part of how modern browsers work when
you change your CSS style on element
with JavaScript the browser doesn't
hurry a way to actually change it but
instead weights are some cycles for more
such changes then groups them and set
them in one go however you sometimes
need to force the browser to apply the
changes before doing something else for
instance if you show an element and set
the transition and some Styles after it
they all will be set at the same time
and the transition won't run so to avoid
that you can request the elements
computer style for the property or
setting or you can check one of the
elements dimension
like most a tweet for instance at the
browser will be forced to apply the
changes immediately in order to return
you the correct results you can now
safely trigger the transition and it
will run that was it we're back on in
the open and managed to escape the dark
forest labyrinth of mobile browser books
barely stumbling into a dozen of them
but the forest is deep and hungry and
inviting and we know that we'll have to
venture alone into it at some point make
sure you prepare for every Jenkins armed
with sharp weapons like patience and
creativity or you can bring bring a
friend along for a guide like Kendra
mobile either way note that every
problem has a solution you just haven't
found it yet thank you if you have
questions
could you tell me a little bit more
about the push their issues in Android
three and four plays the push state
teachers yeah well they mostly don't
work again the the Dodgers bar is not
updated but location changes internally
so if you click refresh refresh you'll
be going somewhere else so again thank
you thank you for some interesting
tricks and I was wondering uh as a
developer of Kendall you I how do you go
about to find all these things do you
have like a hundred devices on a wall or
how does that work well we have about 20
devices different mostly Android because
they have most change changes between
them and in different versions different
things break so I'm about to start a
device lab an open device lab in Malmo
and we're just a bunch of guys
collecting devices and then sharing them
so that you can come and test your
website on a bunch of devices at the
same time and I think I would just
encourage people in the audience if you
also feel they need to do the same thing
then you know start your own device lab
or check it out maybe there's already a
device lab in your city because I mean
this is awesome and it's great that
you're actually doing this research by
yourselves but I think many of us
developers we don't just we don't have
the we don't own 20 devices and we're
not going to pay for the 20 devices yeah
thanks for your tips and I was also an
additional question just these tips are
there just inside of this presentation
or do have you collected these tips on
others for there are several demos in
the demonstration you can find them on
the site and we don't have a repository
for them unfortunately we do have some
workarounds integrated thinking we are
mobile they're in there in phonegap wiki
okay great more questions Thanks what
was the activity we're referring to well
talking about android browser thank you
and sorry it was the microsoft tech
scanner it was it is a it's a kind of
cure code scanner which scans for
microsoft tak colts and it later opens
webview which when you close it the
whole application freezes all right so
it was about web views the no it doesn't
happen if you don't open the web view
but i didn't reproduce it consistently
with only opening her with you so i said
thats it's not how to reproduce thanks
okay I think we're good so thank you
very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>