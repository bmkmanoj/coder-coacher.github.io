<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Paul Verbeek-Mast: Calendar / Kalender / تقويم (aka, the fun of locali[zs]ation) | JSConf EU 2017 | Coder Coacher - Coaching Coders</title><meta content="Paul Verbeek-Mast: Calendar / Kalender / تقويم (aka, the fun of locali[zs]ation) | JSConf EU 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Paul Verbeek-Mast: Calendar / Kalender / تقويم (aka, the fun of locali[zs]ation) | JSConf EU 2017</b></h2><h5 class="post__date">2017-05-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0I4BNqfVLFI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you um well this is the last part
of my name so four big must recently got
married and had it's my girlfriend's
last name to it up until last week I was
working at booking.com as a front-end
developer but I now joined a start-up in
the Netherlands called sprung and I'm
also a organizer of frontiers conference
this year which will be the tenth
anniversary which is cool so I will also
know it's good tell you what it's all
says but if talk is calendar about
localization of a calendar that we did
as booking.com so these are almost all
like these are part of the languages
that we localize in we a total was 42
we did not localize and Klingon even
though I really wanted to but for some
reasons not a lot of people speak
Klingon but before I give my talk I want
to tell you about a little bit what my
talk is not about so it's not about just
the things that we probably already know
that the date and time is difficult if
you really want to know what what we all
think that that's correct about time
there's a cool article called soul suits
propulsive programs from leave about
time
it gives you a whole list of things that
it's weird about time and if that's
still not enough there's also more fall
suits programs believe about time so
yeah you can just look them up very very
cool as I said I was working at booking
to come and we had this calendar that we
used for people that own an apartment or
a small hotel and where they can see
their reservations change the prices and
things like that but the problem was it
wasn't really actually a calendar it was
like this infinite scrolling list where
you couldn't see any data on you have to
click three times
before you can actually get the real
data so we've got a lot of feedback from
my users that it really didn't really
look like the our calendars that they
were using like the competitor with the
red logo which I cannot tell so we
decided to do to change our calendar we
did some user research about what we
wanted to do and so we just
implementation and we started out with
making some sketches this sketch was
made by someone else this morning but
still cool sketch but we start out with
some sketches and implemented our
front-end
yes and then actually we we use pearl
booking.com so we had some pearl code
and you actually don't want to touch a
lot of that so we just try to use the
coder that was already there and they
willed it for a calendar and then we
needed to localize there are 42
different languages at booking comm so
an even more regions which I will tell
you a little bit later about so if
you're German you might know that this
days for meth in the front and in the
two is not really how it looks in
Germany and probably you're also used at
the Euro sign at the end and things
things like that if you look at the US
it will actually a week will start at
some day the other the date format is
completely different
the prices dollars import of those base
things we actually decided to use
moment.js
nuts also not to talk about moment yes
it will briefly go through it what we
what we get used but moment Jas is has a
very good localization data as well this
morning Metz was talking about
Jas Jodha and Dave it's not the right
name base functions should be and about
the eccrine script temporal proposal so
if you want to know about those just go
watch this 12 minutes online so we had
this so say we have this sketch we
implement the sketch and we want
to add the names of the weeks are we on
the top we need to know well what does
the first day of week start with it
it starts with Sunday or Monday you can
easily get that from moment chess with
moment on locale data you can get the
first day a week and we return you on a
zero or one and then you can get the
names of the week in the locale that
you've selected which will in this case
generates Sunday through Saturday and we
use that at the top and then we needed
to get the first day of the month which
okay well first day on the calendar
which is interesting because it's not
the first day of the month so we used we
could just use start of month and then
start up week and then gets the number
of the date and at that and the same
goes for the for the end at the end of
the month and just fill them all out so
that was easily to generate the first
part of the calendar and then we I
needed to find what kind of format does
this does this country uses and it's not
always it wasn't very easy to find that
it was somewhere in a more private
variable called long date formats and
then we use the capital health and that
it was basically it so I'm going to go
through this very fast but just to get a
sense of what we were kind of working
with so after and this was basically the
localization and for all the languages
very easily so then we went on the
testing and just going through the
languages to see if everything is okay
and then we I hit the bump then I always
forget and that is our tail which sense
for write less languages and those
languages are things like Arabic or
Hebrew languages so it which is if so
you have this calendar you it's not only
the script
goes from right to left you actually
want to change everything from right to
left so for example you want to switch
the the right column to the left and
then also switch switch everything
around as well so that your Monday also
starts with rights under on the right
side your week sorry so this is all done
in CSS so you just change your
float:left to your float:right your
margin left to your margin right if you
have something inline or inline block it
will automatically go to the right side
the only thing here that that is not
being done by CSS are the two arrows we
just switch the functionality around
because if you click on the Left arrow
you want to go to a month in the future
instead of in the past we could have
also just rotated the arrows which would
maybe if you would see it as so we just
clicked through everything fixed a few
bugs and then we went down to more
testing settling that unit testing if
you want to know about unit testing a
booking become you can give me a few
beers later on and I will tell you a
whole lot about unit testing and booking
to come I don't work there anymore so I
can now tell you everything I know but
so what we did what we did was we added
just a whole bunch of our users into a
better group not asking them because why
would you ask them just put them in a
better and they will add a feedback at
the top where they could do it thumbs up
and it thumbs down and get a little bit
of feedback just Texas area what you
want to know about users giving you
feedback there's not always that useful
most of the time it's just very short
very short strings like well these were
the positive ones they finally have a
much better overview and love the new
interface but they already give you a
very long thing about how their life is
and how good a calendar is in their life
and they finally found the
the right person that they want to be
with just because you have the new color
and there's there's weird stories in
there every time will not show well
there's also just some some bad things
like hideous bring your bum back without
saying why they hate it and who made
this smiling chocolate ice cream I think
when if you really dig into roller
feedback you you will find some obscure
things that they will will tell you
which you have to dig through your codes
to figure out what was actually going on
because those these are bug reports and
not in the sense that your testers or
yourself would write a bug report but
more a listen your memorization is
showing up and then using great well now
because I cannot contact the person
really well what I did do is I saved not
enough data it was big mistake for me I
just save their user ID and the language
that they selected and I should have
done a user agent and a whole bunch of
other things but I was lazy and I
implemented too little which was that's
that's a mistake don't be too lazy with
these kind of things so I had two things
to work with to do some bug fixing and
those four examples that I will just
give you that just gave you I will go
through them because these were the four
most interesting things that I found
which cost me a lot of detective work to
figure out what it was so we had a some
reservation data on our calendar as well
so it showed you more than just a blue
bar it showed you the name and things
like that but one person it's just one
random person said well my reservations
aren't showing up and they gave a little
bit more data about which specific
reservation didn't show up and it was in
October 2016 this is reservation the
15th through 16 it just wasn't there for
him and it was weird because I tested it
and was working it's how it usually goes
works on my machine but
for him it didn't work and you don't
want that because they will get over
bookings and lawsuits and okay so first
off just looking through my code see if
I could figure out anything which was a
problem and then I thought well it must
be some localization things because
that's mostly where it where the
problems originate at booking.com and I
figured out this person lives in Brazil
so first step changing the language to
Portuguese simply Brazilian Portuguese
because we have that in our website but
I couldn't reproduce the bug so next
step I changed my timezone on my laptop
to be minus three
because I saw that they were based in
the capital and it still didn't show up
so I couldn't reproduce the bug and then
a colleague sitting next to me says well
I here's the bug I have it
wait what what did you do he said well I
switch to Portuguese change the times
into minus three
well okay let's just check out any other
settings that we might have and if we
couldn't figure out for a very long time
until I noticed there's a wiki page on
time in Brazil which gives you a wall
weird data like they're there summer
time is different
when they have a carnival during the
time that they would normally switch to
summertime but also that's not their
entire country at here it's the summer
time so I thought well couldn't be
summertime took over but I was just
forgetting one of the falsehoods I
believe about time which was summertime
is always in my summer which is not true
for the solid hemisphere of course
because then summer time starts in
October so what the case was is that my
colleague selected the capital of Brazil
as there's news timezone and I selected
a steady just north of Brazil and that
city north of Brazil didn't adhere to
the summertime and
capital dis adhere to it so okay I found
crappy piece of code that I wrote which
compared to different dates and there
was one thing that says at one day and I
learned that in moment Jes as one day
does not mean and one day well sort of
does but it just adds 24 hours so which
comparison comparing this it's basically
meant that the day a was never going to
be the same because they a would would
be 1:00 a.m. while baby would be
midnight now the way smart quotes and
keynote not fun the day they're all
right so I just switched the the ad I
switched them around and it was fixed
great
I could also pick my code make better
but hmm I was leaving anyway
so another thing was why are close dates
read very obscure question was they they
came up in different different kind of
strings so I could figure out that they
it says if this date if they closed it
so I don't accept any reservations we
show this red bar well that's good right
so what do you think of this is it a
good day at the stock market I wouldn't
think so but this is a very good day at
the stock market because in eastern Asia
red often means that it's something
something good instead of something bad
so where their contention is something
is close and you're showing this is good
it's not very fun because sometimes you
show that it's good even though it it
closes because every funeral something
and that you don't want to do that so we
switch it around to make it gray and
that's people there was neutral enough
for people so learning from this just
watch out with colors because you can do
things wrong for some countries so the
third one is that the day selection is
not working
and this was our date selection with it
from and the two and when you click on
it it showed you the jQuery UI a date
picker Y jQuery UI date picker
well because we already use this and
just reusing things and at first lens
that doesn't seem like a big problem but
say you have this this date like we you
cannot really see what year it was what
months and what date it is so you have
to get the date format from moment to
see well okay this is month day year and
then if you want to change that if you
want to connect it with a date picker
you can do par state and then it says
month day year and then you add the
state but this gives an error it just
this does not work because jQuery UI
uses this format month/day/year
lowercase and then the year changes
through to wife's arm so I created a
little script for it and as I already
did this so if it was before debug
showed up so I create a script put it
this by Wayland get help if you haven't
needed I hope you will know if you need
it but isn't get up and the problem with
this script light in this part so if you
were here a couple talks before we're
out regular expressions this is very
easy regular expression it kind of finds
the slashes and dashes in in the in the
date format just to figure out where the
limiters are if you're from Germany you
probably already figured out a problem
because most complaints from from German
users and it also needed a dot because
it's the format in Germany mostly is
about in between so I thought well what
the hell let's just change it which
slash W and then be done with it and
okay that work most of the most people
didn't report a bug anymore except for
one country and I told you that I saved
the language of the country and I
actually saved the full blank name so I
saved this for the country that was a
problem
I thought okay which language is this so
I used my very great tool for that
Google Translate girls translates it
okay I detect this this is Slovenian our
darling Slovenians in the room by the
way are down in Slovakia in the room so
the top one is Slovakia and bottom one
is Slovenia it's a slight difference so
after after I check the Slovenia nice
also still not seeing this is the buck
and then it says in the bottom that you
mean this no no not really
so Google Translate does note that this
word it is Slovak because if you just
change the language to Slovakia it's
translated so so what was the problem
here the day delimiter was dot space
great so just adding a plus to my my
regular expression fix everything maybe
something else broken but at least it
fixes and the last thing that I want to
show you is nothing to do with date or
time it has something to do with the
prices that aren't showing were entering
up properly so we have the reservation
yet the number we also show the prices
showed up perfectly fine nobody we
checked nobody ever had a price that was
higher than ninety-nine thousand euros
so should be fine but not always so this
was 1 million Indonesian Rupiah I think
so it's not always just about dates and
times it's also about prices it's about
changing the colors it's about cultural
differences as well so
I think I went a little bit too fast but
my conclusions who represents a couple
of things so do not make any assumptions
that's basically what a lot of people
already said as numbers of different
conferences but even if you read all the
assumptions people make about date and
time there's a lot of assumptions that
you're probably still going to make and
localization is not just translation
translation is a part of localization
it's more than that it's cultural
differences it's it's date and time it's
its colors well just not just about data
time all the colors and things like that
get our meaningful feedback so now two
things that that I did it's gathering
feedback from the users it's great but
just save their user-agents save the URL
that they are on safe maybe way you look
at languages so maybe instead of the
Slovenian word that I says or the Slovak
in word just save SK which makes more
sense for programmers and bugs will
happen then it doesn't matter how much
it says it it doesn't matter how much
experience you have in localization
every time you do something bugs will
happen and they will always be there
even if you fix all the bugs that people
are giving or reporting it will still be
localization bugs because sometimes
people are just used to localization
issues and change their language to
English just so that they know this
probably works better the localization
is so important because if you if you
don't have tremor language a lot of
people cannot use your website and you
can say well I don't have a lot of
Germans on my website that's because you
don't have German language so if you add
something it's just part of
accessibility and bug fixing is like
being a detective it's it's just digging
through all the code it's actually kind
of like being a traveling detective
because you had I felt like I'd have
travel to all different kinds of regions
just to figure out what the problem was
I did actually travel because if that
was the case and I could travel for
bugfixes I might still be working at
booking so have fun with your bug fixes
and just feel like that you're actually
trying to find something that no one
else has ever done before so thank you
very much this is my twitter handle if
you want to follow frontier
this is frontiers where the handle my
email address I love getting emails my
ICQ number thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>