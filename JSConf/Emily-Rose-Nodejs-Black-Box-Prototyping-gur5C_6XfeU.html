<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Emily Rose: Node.js &amp; Black Box Prototyping | Coder Coacher - Coaching Coders</title><meta content="Emily Rose: Node.js &amp; Black Box Prototyping - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Emily Rose: Node.js &amp; Black Box Prototyping</b></h2><h5 class="post__date">2012-11-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gur5C_6XfeU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello how are we all so I'm going to ask
for your forgiveness in advance because
I'm extremely nervous so what do we
figure out for like participants so okay
yeah you can come up I know that max was
gonna come up to and then like you want
to pick a random person oh yeah yeah
might as well do it now mom all right I
random one person who wants to be a
guinea pig for prototyping black box
let's actually pick let's pick let's
pick a few people and you guys can rock
paper scissor house that you anyone
anyone I don't you and uh stop you yeah
all right coming up we have a rock paper
scissor yeah yeah I'm sorry actually we
can just yeah all right all right ready
you guys know this works all right ready
okay this is rock this is paper it's a
scissor look you ready yeah at the same
time yeah this is this is important it
is Rock Paper Scissors shoot are you
ready at the same time and then
hopefully it'll work out hopefully we
don't have a circular dependency I think
we'll be okay I already rock paper
scissor shoot oh you're out all right
out here yeah all right
never go with rock all right raining too
ready Rock Paper Scissors shoot oh wow
we didn't even plan this it's just
actually this exciting hey rock paper
scissor shoot Wow good job Peter nice
work all right okay so brief history on
this I kind of got involved in this
about a year and a half ago I started
working with a place in Portland Oregon
called casa diablo it's a world's first
vegan strip club and we're trying to
kind of modernize the strip club
industry and so this is kind of grown
from the little sensor situation that
we've created in the private area so
that we can kind of monitor who's back
there whether they've paid that sort of
thing so it's turned into something
that's a lot of fun for a lot of people
in my whole thing is trying to make a
little more accessible for people you
know like software developers kind of
usually look at hardware they're like
that's hard you know so it's really not
that hard and I guess that's what we're
going to try to illustrate today um the
one thing I didn't realize is we're
probably gonna need like a computer or
two for you guys so I don't know if you
guys have your laptop's like grab that
and so let me see here
right
I guess is going to be more of like a
classroom demonstration that an actual
talk but so go ahead an open up your
black box is and we've got everything we
need maybe you guys can show what you've
got in here LEDs jumpers wires we're all
familiar with wires yeah okay arduino
USB cable some screws you don't need
those right now that is the ultrasonic
sensor and I actually manufactured these
for you now just the just the cabling
and so I guess what we're going to do is
get your bread boards out and open up
your pin packaging
and what we're going to do is we're
going to take our ultrasonic sensor and
you can pretty much pick anywhere that
you want to place it but see if I have
mine yeah so plug it in make sure you
plug it in I figure out the best way to
show everyone here but with the
breadboard you'll want to plug it in
yeah like that well not necessarily on
the inside but just so that each pin is
in its own number slot not just a mine
doesn't have that but yours do yeah I
just plug it right in that was the goal
yeah just anywhere as long as it's each
pin has its own way all right and then
we get our dreams out a couple of our
jumpers and on these to explain what
these guys are these are little
ultrasonic sensors and for those of you
who are at node copter this is the same
type of sensor that's in the bottom of
the copters that that pings the floor
and sees how far away it is and we're
going to use that tape that same
mechanism to detect if someone has
walked in front of the alarm so we're
going to go from there's four pins on
this there's VCC which is your your
power ground and then there's the
trigger and the echo pin so go and plug
it in and from VCC we can go to on our
Arduino which says 3.3 volts VCC
labeled right here and so on the top
Yeah right there and then we're also
going to take the last pin which is
ground going to put that into the ground
on the Arduino
ground is just below ya 3.3 and I guess
while they're doing that everyone's kind
of we're all familiar with the Arduino
concept they already know show of hands
if you'd like me to explain it ok so the
Arduino is a like a prototyping device
it's got a little very inexpensive
processor on the AVR process or it's an
8-bit processor and it allows you to
upload C code to it and make it do just
about anything it's got some general
purpose i/o pins analog and digital so
you can connect all sorts of you know
prefab devices to it you can make your
own circuits that sort of thing and it's
kind of like the step before you
actually go and print a circuit and that
sort of thing so it plugs in with USB
it's got all the USB controllers and
everything it's very easy to get it on
to your system whether you're using mac
or windows or unix in my case and I
guess while they're doing that we could
use this time for any other questions to
you have a question to break it mmm I
mean I've been like traveling from
Portland here with a bunch of them just
in my laptop bag um no they're from what
I can tell it's pretty hard to like like
short-circuited or you know overload it
I'm sure it's possible but I haven't as
far as I'm aware broken any so any other
questions ok
okay so trigger an echo in the demo that
I've loaded on these you'll go to pin 10
and pin 11 on their green which is over
here yes so let's see you're going to go
your trigger pin it will come over here
to 11
that one will go to your trigger should
be too yeah all right and then we saw
you guys about your trigger and rock
opens plugin okay and go ahead and plug
it into your computer so they're just
like they're just like us be TTYL
devices and so you kind of UNIX they
just open them up as a file descriptor
and start talking to them and you know
you can write your own protocol or you
can use variety of different libraries
that are available for example fermata
is anyone familiar with Fermata yeah
it's pretty handy it's kind of like a
communication protocol that you can just
upload to the Arduino once and then you
can take all of your programming and
just move it up into javascript
something like that i'm not actually
going to demo that today i wanted to
kind of bring the demo down a little bit
and make it as basic as possible and
kind of prove that it's not as difficult
as it seems but we'll see how that works
up
yeah okay so you can go ahead and npm
install jess confi you demo let me show
you what the package name is
so okay you know I completely forgot put
in a net so it's a jay s con tu dash
demo and hopefully it will install
properly yeah yeah well I've haven't
having Wi-Fi problems yeah that's that's
been that's been an issue for me the
other issues were not we're not getting
anything connected to yoga we might have
to just jump ahead and show everyone
what the end result is what was that
sure
sorry
and work
you
well we have that at least for some
reason my mind's not functioning so
maybe I have to bring some of yours over
something yeah that's not getting data
again yes this is awesome totally
unrelated but I just want to tell you
guys now because I think it's cool
someone asked if they could print their
boarding pass or like a train pass that
they forgot and I was like I don't know
as or can't goes I don't even know
apparently we've set something up where
if you send an email to print at jay's
coffee you it will print on a printer up
there this is what I'm told so I want
you guys to ddos that thing so it's
oh so I look forward to boarding my
flight as Tiffany Conroy yeah yeah it's
me yeah absolutely yeah so try that out
we'll put the email address if you can
remember it print at JS comp that you
put it up during lunch number one
glencoe number two number two is also
apparently there are some really cool
stuff might may or may not involve node
copters and WebGL that someone's put
together as a result of node copter that
is going to be shown at the end of lunch
so if you're gonna eat lunch you might
want to be in this room towards the end
of it that's number two so look forward
to that sweet okay well we might just
have to work with your guys's computers
because mine is not functioning kind of
expected that but we had it working at
one point I swear if any of you that are
actually interested in this I'd be happy
to get working again and you can come
take a look at it but the idea behind
this is we're going to try to get at
least one of these up and running with a
little alarm that will actually connect
with a little library that subsec wrote
called shoot and that will make it
really easy for us to actually just pipe
data events directly from the Arduino
through node into the browser and the
possibilities there have been pretty
much limitless I did a talk at node conf
earlier this year where I set it up and
with twilio and Carter help me with that
and we made the entire audiences phones
ring and I wish that I could have done
that but Coolio's service in Germany is
still a little shaky so okay so we
should be able to get at least someone's
working with just typing node Express
although you may have to npm install
first
what are we going to yeah that's um
another one of those preparation things
we probably should have thought of so i
guess i'll take another opportunity for
any questions yeah you also i added a a
command line option so if you are on a
Mac they named the argument as a little
differently so it's okay oh we can see
if that's a problem yes and so you can
just start node Express dash dash device
and then the path to the device
hopefully maybe max can save this pissed
off yeah well and we had it working
about 15 minutes before the talk so not
sure exactly what's happened but I guess
that's kind of the nature of demos 80 80
or 8,000 3000
yeah the the Wi-Fi hasn't been working
for me all day well yes I have loaded
the sketch on all of these that that
basically just it doesn't in a little
initialization routine and then checks
the average distance and then compares
that against new readings and if it's
off by more than an inch then it then it
sends a trigger event down the pipe sure
hopefully so is that working now sweetly
awesome well maybe you can try
restarting Express yes that is good
so I probably should have named my talk
live debugging but all right okay great
so at the very least we can kind of show
you what the end result is do you want
to trigger another oh yeah well so
what's the so remind me what the device
is for like the original use case so the
original use cases for this is um we
have a private area at the club where
well it's just so that we know at a
glance which of our booths are occupied
which aren't and and whether they've
been paid for or not so this is a really
easy way to say is our body on the chair
and is that associated with a ticket
that was paid for so then there's a
durations that are associated with that
as well so you might have to just sit
there for a second pull your hand back
just a little bit we might say let's
switch our sensors out because mine
might be broken alright so there we go
so finally go ahead and restart it cat
picture compliments of Max Ogden
and then of course I'll break it again
so you remember that part where I said
hardware isn't really that hard
sometimes it is as you can see here it's
still a lot of fun and through the use
of things like JavaScript nodejs node
Fermata Johnny 5 sorry yeah so I guess
we can at the very least kind of show
what we're supposed to be doing here so
in our Express server it's it's a pretty
basic application very beginning hair
we're just requiring serial port may or
may not be familiar with that it's a
very very easy library to use to get
serial devices into your your note app
we define the device get an express
server running and through the use of
shoe we're able to grab data events
which the data function right here is
actually receiving either a 0 or a 1
directly from the Arduino and then
depending on the the status then we we
push it out to the browser via stock so
over here we're just requiring shoe
starting a stream and defining either
waiting which is what you were seeing or
oh my Gurd and then just some really
basic you know Dom manipulation so so
what did you do to get that work working
did you just unplug it and look like an
inner
yeah it's it's supposed to be blinking
months for sure okay well I should still
I should still beginning packets from
the Arduino which we're not right now so
I oh I see okay yes
so the thing that's nice about the
Arduino is you have a really easy to use
well actually let me show you here so
with Arduino it has just variables that
you defined like if you if you have a
certain pin number that you plug it into
on here on your header so like what
we've what we've done here is oh great
so as you're as you're pinning your
breadboard you have a row of pins on
your on your Arduino so you just plug
them in and in the Arduino code or if
you're choosing if you're opting for
something like fremada or Johnny 5 which
95 actually takes care of almost all of
it you're just kind of like I have an
ultrasonic sensor initialize it and then
it's doing it mmhmm yeah that's that's
all it is all all you're doing is this
little wiring and then and you're
welcome to take a look at it after that
after the demo but it's very very
straightforward so it's it's again it's
a prototyping device it's very simple to
just get started then once you're sure
you know what your circuits doing then
you can you know either do like
perfboard and actually solder a circuit
or print it or whatnot so here's the
example of the the code that that's
running on each of these that's failing
right now it was working but so here's
like for example to set up the actual
triggering of a sensor and so all we're
doing is using a serial print
to send the status of whether or not the
the sensor sees a difference in the
distance that it's measuring I just
let's take a look the very good zeros
yeah I can see that those are awesome
zero so as a matter of fact so let's see
let's try flipping these two around real
quick
so all right so if we've got this one
working why don't why don't we plug the
monitor and over here do you have an
adapter for the mac finally so I guess
there you have it black box live
debugging at jas con for you thank you
very much you guys I'm sorry that that
didn't go smoothly as I'd expected but
other any other questions or do any
questions yes yes so to recap we just
got a box that we had no idea what was
in it had our laptop so we had no idea
we needed to install stomachs you
published a new thing to NPM like 10
minutes ago in p.m. we built in arduino
circuit plugged in voltage ground signal
put on a distance sensor plug it into
our computers use chris's library for
serial port stuff to get data from the
US be absolutely amazing to the web
browser / sub stocks chew notes dreamy
and then detected Peter oh that's crazy
yes
thank you very much as awesome</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>