<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[JSConfEU 2009] Steve Souders: JavaScript in Browser Performance | Coder Coacher - Coaching Coders</title><meta content="[JSConfEU 2009] Steve Souders: JavaScript in Browser Performance - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[JSConfEU 2009] Steve Souders: JavaScript in Browser Performance</b></h2><h5 class="post__date">2013-06-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FR8RwsM2Sq0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you very much is very exciting to
be here in Berlin so it's a beautiful
world we live in I grew up cutting my
teeth on shrink wrap software where if
you found a bug and occasionally I would
write code with bugs in it you would
have to wait until the next release in 3
6 12 months to get that bug fix out or
you'd have to ask all your develop your
users to download a patch and you know
that just didn't exist in the 80s and
90s early 90s so in one sense the web
has given us this beautiful world where
we can work on stuff and and make fixes
and do pushes on a daily hourly maybe
even by minute basis but where we've
also entered this minefield this
battlefield where what we really want if
you think about it the idea of pushing
programs at you know apps at that
frequency to everyone in the world is a
very challenging problem and it's
especially challenging because we don't
want any monolithic organization like
Microsoft or Adobe or Google to run that
entire environment and ensure its
quality and integrity so we're trying to
do this in a very distributed way an
open-source way and that's the cause of
many of the problems that we've been
talking about this weekend
inconsistencies incompatibilities so a
primary way that we can or a primary
weapon we can use in this battle to
carry the metaphor is sharing the
information and experiences and best
practices that we have and so I want to
give some credit to the speakers who are
here for the conference to the attendees
you know there's a very receptive techy
audience that's awesome I've never seen
I've never been at a tech
conference where a speaker got a
standing ovation like Ryan got just a
little while ago that was amazing that
shows how committed people are here both
the speakers and the audience and then
also to the organizers I know they're
going to get up at the end and close
this but and I'm sure I'm grow their
names Yong ogre and multi for pulling
this together for a first-time
conference it's just amazing and I know
when they get up they're not going to
complement themselves and ask for a
round of applause so I'd like to do that
now
oh I've got some more fun slides so I'm
in an awkward position I was in this
position earlier this week to I stand
between you and the party but it's just
not me standing between you and the
party there's also John Rezac I'm not
alone and and what we see here is
something that we all need to practice
multiple disciplines right so we all
know that John is a JavaScript ninja and
he's got some of that going on here but
he's also pulled in the three stooges
technique of the two-finger I poke right
so two techniques often in your
development work you're going to have to
employ more than one thing and then
another good buddy of mine couldn't be
here today Dion Almer he had to leave
but he told me that he gave me this next
slide he said it would help me get a
very warm reception when i did my talk I
don't really understand he said to
mention he's from England does that make
it more relevant ok so let's get into
the meat of the talk if you could
memorize this really quick I don't want
to litter all my slides with footnotes
so these are all the footnotes from the
slides and and if you do want to find
the sources it will be pretty obvious
where they go and I skipped over the
first slide kind of quick but you can
find these slides on my website right
now Steve Souders calm so a little bit
about me I used to work at yahoo i work
at Google now I created why slow i wrote
two books about web performance i taught
a class on these books at Stanford i
co-chair the velocity conference on web
performance and operations I also wrote
hammerhead kazillion sprite me and
browser scope I'll talk about some of
those later today i have a blog does
anyone here read my blog ok keep the
hands up hands up keep the hands up ok
hold on
someone said oh but they've already got
the books yeah like I really believe
everyone in the room has read the books
yeah that was very polite of you to say
make me believe that so I think the main
thing that I contributed to the world of
web performance is what I sit call
turning it upside down turning the focus
upside down I worked for 10 years doing
web development on back-end
architectures I ran to my yahoo team I
worked on yahoo's user database before
that I worked at lycos and who wear
large web companies and about five years
ago I got asked to start a performance
group at Yahoo and that was one of the
first times I fired up a packet sniffer
and we've seen a lot of these waterfall
charts so we kind of know what's going
on here but we have a HTML document and
then all the other requests that come
forward here and one thing that I'd like
to highlight here I'm not going to talk
about too much more but if you look at
this we consider or a lot of my work is
on how to download stuff more quickly
Kyle talked about that yesterday for an
hour and if you look here this person's
internet connection is being utilized at
most at about it twenty percent ten or
twenty percent of its capacity and so we
need to do a lot of work in trying to
get that up it'll never be a hundred
percent but we're never going to have
fast web at web applications until we
start utilizing the browser's network
connection at least at the eighty
percent level so we've got a lot of room
for improvement here that's why I'm very
optimistic that the slow performance I
experience now surfing the web is
fixable so anyway the thing I flipped
upside down was you know in my first ten
years why I wanted to optimize the
performance of a website I would focus
on that back-end architecture and it
turns out in here I'm unloading I google
with an empty cache in ie7 that only
nine percent of the overall page load
time was the part that I was focusing on
and maybe I could
move that back in part ten percent if I
was really successful so I was going to
knock off about point nine percent of
the low time of the page so clearly I
wasn't focusing on the long pole in the
tent the long pole in the tent is what i
call this front end part and this front
end part does include some network
traffic maybe a little bit of server
back in time but it turns out that these
techniques that I evangelize can really
have a dramatic improvement on this
front end part and even like the network
part isn't always the culprit so here we
see with a prime cash there's only two
requests the HTML document and some
other beacon or add or something like
that and even with everything cashed
their page still has a long load time
reading all of that all those resources
from the browser cache parsing and
applying all the CSS and JavaScript so
what what can we do to fix that so I
came up in why slow and in my first book
with these 14 rules for faster web sites
and and so I did that work mostly like
2006-2007 and after that first book came
out I started working and focusing more
on on the world of web soooo and ajax in
d HTML and so this book is much more
focused on JavaScript and I've got some
chapters contributed by industry experts
like Dion and band Doug Crockford
Nicholas akos Nicole who's here and
talking about CSS but she and story on
in my mind are the industry experts on
image optimization as well so they
contributed a chapter talking about
images so so we have all of these best
practices and they've been out there for
a while but I don't know about you the
web still feel slow to me and so popping
up a level what is it that you know in
your reaction and your emotional
reaction and frustration frustration
levels what is it that makes you feel
like a site is slow so I have a couple
examples here I want to
show so i actually have videos here so I
hit return so this is real time it's not
slow motion and this also isn't on the
internet here right these are videos i
recorded at home on my comcast cable
modem connection at 3 megabits per
second down and that's how long it took
to load Twitter I love Twitter now use
it a lot but ok and this was this was
that like I mean you know I'm it's like
1am when I'm doing these things you know
like it shouldn't be that slow Twitter
it's a lovely page there's like 20
tweets on there how can that take so
long to load that page I think you know
to me there's no excuse for that anyone
who has flash in our site will like this
one these guys actually do a pretty good
job getting some progressive rendering
to go but the main thing I want to see
in the page is in the in the middle
there and it's the last thing to come in
right and then the poster child for slow
websites I mean it looks like I loaded
the page three times or something yeah
finally it comes in so I think what
makes these sites slow what makes sites
feel slow it's pretty obvious one of the
earlier speakers mentioned it is the
lack of progressive rendering right I go
to the page and it just takes so long
before there's any feedback that what I
want is actually going to be delivered
to me so here's another so I'm starting
to put a lot more visualizations
graphics and video in my presentations
because I think it makes the point
really well and I want to kind of light
the fire run under you know these web
companies to focus on on making a faster
user experience so this is screen
captures done at a half second interval
for the major search providers and I
want to point out here that they're
sorted in order of popularity this might
just be in the US yeah I think it is
just us so Google has the most AOL has
the least
and this kind of pattern where things
are in the upper right art used very
well for my work it shows that the
fastest websites are the most popular
right so in search I think it's not
surprising that we see that kind of
dynamic happening because speed is
something that has become a very real
competitive advantage of a benefit in
the search marketplace so just where did
I get this stuff I want to highlight
webpagetest org here I'll actually we'll
see well even if the Internet's not
working i captured some pages so try it
out it's really easy the AOL guys built
this IE plugin so if you want you can
plug it into IE and do things live on
your desktop but you can also go to this
website and just plug in a URL you can
pick your they just last we've got a
location hosted in california they've
got some folks helping them in the UK in
New Zealand you can choose right now
just ie seven or eight different
bandwidth speeds you can say capture a
video you say go all the results unless
you choose to hide it or saved so even
if you haven't run anything you could
just go to the test history and click
any to video results and compare them
and so here I want to play this video so
this guy Pat mean and has written all
this code like in the last two months
for all this video stuff so you can see
here late these are loading pretty slow
and you can see there that beam comes in
a little bit faster than yahoo search I
think being bing as third right now but
certainly they're fast and they're
getting faster and I think that's a
reason that they're catching on more
plus the awesome name change live search
bing bing now you gotta love thing so
yeah Pat meaning a guy after my own
heart just hack stuff out of his
basement so that's how you can run
webpagetest org here's the same thing in
news notice in news I had to go to a one
second interval and so we see here this
actually argues against my you know
evangelism we see the
fastest one google news is actually
forth in the marketplace so there's
obviously other things that come into
play here yahoo news was established
early on maybe they have I don't know
what more content a better UI we see
here number to CNN hasn't even render
started rendering yet at the four second
mark right shopping so this looks a
little better for me amazon i think you
know if you want to look at techniques
look at things like amazon and msn and
google search these people really know
what they're doing so amazon has a lot i
think has a lot of content in their
pages and yet they're very good about
flushing their document early getting
progressive rendering of stuff above the
fold to happen quickly sports we see
that ESPN even though it starts
rendering early it's one the last ones
to get the meat of the page up there
first the meat of the page is the photo
of the Red Sox almost getting into the
World Series and it comes up last on
ESPN so I think the key to two there's
this key pattern that people don't talk
about enough and maybe because it's a
little too hand wavy and not that techie
but i think we had this pendulum where
we got into javascript and we built
these web apps that were really heavy
with javascript and when I describe this
I think you'll agree with me that if
someone had described this before we
started we would have said oh yeah we'll
never do that we got to this point where
we downloaded all of this really
expensive JavaScript into our pages and
then created all of this these HTML
elements either you know be a create
element or by stitching together a
really long string and setting inner
HTML and then the user could actually
see the content of the page that just
sounds ridiculous we need to say like
that's how I'm going to build my web app
and so I no properties at Google are
doing this and I talked to other people
who are doing
it also trying to get that pendulum to
swing back to where it should be which
is to do progressive enhancement is
deliver the meat of the page in HTML
rendered on the server side as quickly
as possible right defer the JavaScript
don't touch the Dom or touch it as
little as possible and then once you get
that meat of the page up in front of the
user you can add the decoration that
JavaScript functionality to enhance the
page after the user has the content in
front of them and you do have to worry
about race conditions the user clicking
on buttons before it's ready but those
aren't that difficult those challenges
aren't that difficult to work through
and so if you adopt this a pattern of
progressively enhancing your pages
you'll get better recive rendering I
think better user experience so in doing
this it's really important to focus on
JavaScript why so here are some of the
Alexa top 10 websites and what we see is
JavaScript dominates the low time of the
page and usually it's disproportional
there's a very small number of
JavaScript requests in the page but it's
causing the biggest slowdown in the page
these are all done with ie7 and that's
because scripts block write the script
the script block both downloading and
rendering so here's a hypothetical test
case using my kazillion tool I have two
scripts that take two seconds to
download two seconds to execute and then
an image a stylesheet an iframe that
each take one second and and in these
browsers listed here we see what happens
is when the first script starts
downloading the browser won't do
anything else no other downloads no
other rendering it will take two seconds
to download that file two seconds to
execute when all of that is done it will
start the next script but that will
block everything else all rendering and
other resources until it's done and then
we'll get two seconds of execution and
then all the other resources in the page
will download together in parallel which
is very cool and so this is you know
obviously why one of the why slow rules
is to move your JavaScript as low in the
pay
but also in my new work I've talked
about how to load these scripts in
parallel because I certainly understand
you know this script might depend on the
symbols in this script so this code has
to be parsed and executed after this
code but it's just ridiculous that the
browser knows there's two scripts and it
doesn't even start downloading this one
until it's done parsing and executing
this one there's no excuse for that and
that's why we're seeing in the newer
browsers that they've actually added a
parallel script downloading and the
built-in behavior is that it will
download these two scripts in parallel
but it will execute this one for two
seconds and then execute this one for
two seconds so you don't get any race
conditions undefined symbol errors but
we see that they're still not good
enough and Kyle again highlighted this
in his talk so here I think I'm in
Firefox 35 and it will only pull in the
style sheet and load that in parallel as
well whereas what I really want I want
all three of these real extra resources
to be loaded in parallel and that would
make the page one second faster in this
test case so how do we make that happen
so even in the newer browsers we're
getting better and hopefully in the next
round of browsers I already know some of
these issues have been fixed in the next
round of browsers but we're going to
have ie6 and ie7 for years to come so
even in the newer browsers it's not as
optimal as it could be we've got I you
six and seven for years what can we do
about this about making JavaScript less
painful for our pages one thing is to
split the initial download of javascript
so here there's this tool goop PageSpeed
from google they'll talk about in a
minute that can tell you how much of
your code your JavaScript code that you
downloaded was actually used to render
the page and so here for the Alexa top
10 we see on average 250 k of javascript
is downloaded but only twenty-six
percent of that was executed by the time
of the onload event anything executed
after the onload event could have been
lazy loaded could have been deferred to
get progressive enhancement to promote
progressive rendering right
so what's this seventy-four percent of
other code it could be cases conditions
that I didn't trigger error cases or
maybe I'm a special user or something
like that certainly if it's my code
there's a lot of cruft in there that I
never cleaned out but a lot of it
especially for today's web sites is this
enhanced functionality these drop-down
menus pop-up divs Ajax requests things
like that that could have been deferred
to get the main part of the page the
main content of the page delivered to
the user more quickly so that's the
first rule is splitting the initial
payload figure out what of your
javascript is needed to render the main
content of the page and defer everything
else this isn't as easy as it sounds or
it might be for you if you have a lot of
JavaScript and you have a lot of
developers working on that JavaScript
you can get really really hard to
unravel that code and figure out what
needs to be in the initial download of
what can be deferred so there's this
tool PageSpeed that will actually lists
all the functions that weren't called
and so that could be a starting point
it's not a guaranteed to be a hundred
percent accurate but it's probably
eighty to ninety percent accurate and if
someone who is familiar with the code
look at looked at that break out they
could say oh well we also need this you
know error condition code down to the
initial part and get it right and
there's also this tool de loto from
microsoft that was written up about two
years ago and the code was just released
about three months ago publicly but
we're still going to load scripts as the
main part of the page how can we do that
with less pain so before I didn't show
msn and actually this screen capture I
did about two years ago so they've been
doing this for a while on a major portal
we see they have three scripts that are
all downloading in parallel and this is
IE 7 and in addition they have style
sheets that are downloading in parallel
as well how do they do this is it some
secret technology that they have that we
have no hope of ever unraveling or could
we just look at their document source
and see what they're doing
so they're doing document create element
script set the source and appended to
head right so it's very straightforward
I call this the script Dom element
approach so when I saw this I started
talking to other developers doing a
little poking around myself and came up
with these six techniques that I wrote
up in the book for all of these
techniques will load scripts in parallel
without blocking other requests the two
just for the sake of time i'll just talk
about to really quickly xhr eval do an
XML HTTP request for your javascript
file when you get the response eval it
the downside of this is you have the
same domain restriction and you might
have to massage your script a little bit
if you have to have some backslashes in
there some carriage returns or something
like that script on element for loading
scripts asynchronously I think is the
most popular technique that I see out
there well actually that's not true the
most popular technique is document dot
write which is the worst technique it
only has very limited async capability
but its most popular because it's
prevalent in the world of ads but for
developers who are trying and they don't
even use that technique for a sink
loading they do it for other purposes
but for developers who are trying to
take advantage of the async script
loading script on element is the most
typical technique that I see used out
there so you know there's no same site
restriction you can use your da che s
file just the way it is now you have to
be a little careful because although in
Firefox and some other browsers the
order of script execution is preserved
in IE and I think Chrome and Safari it's
not so if you use this technique on two
scripts and you know a and B &amp;amp; B depends
on a but you know a is 100 k &amp;amp; B is 10k
so becomes pack first nie if you use
these techniques without any coupling on
B would be executed first you probably
get some undefined symbol errors so you
have to be a little careful there and in
my book I go into
excruciating detail about you know when
these situations arise and how you can
couple scripts and chain them together
and then the work that Kyle is doing in
lab Jas is beautiful because he's
implementing that in a package that we
can all use I wanted to point out two
techniques have just come up in the last
month or so the gmail mobile guys wrote
an awesome blog post about what they're
doing for gmail on mobile devices where
latency is even a bigger issue so gmail
has a lot of functionality that isn't
used to render the page in fact it may
never be used it all depends on what the
user clicks on right and what the user
tried what features the user tries to
take advantage of so they face a
situation of they want to render the
main part of gmail and then they want to
defer the loading of this other
JavaScript but if you just defer it
until like after the onload event and
then you download another I don't know
what it is 300 k of JavaScript even if
you gzip that JavaScript it's still 300
k that has to be parsed and executed and
guess what it does it locks the UI
thread so all of us have experienced
that when you're downloading something
big like gmail or facebook or something
like that and you go to click on it and
there's no response I especially love it
when the little spinning logo in the tab
stops spinning then you know you're
really got a lock to UI thread so so
they that they didn't want to just like
deferred and then download 300k of
JavaScript and have the UI block so what
they did was they put the JavaScript
code in these script block surrounded by
comments and they debt they defer the
download of it right they do that after
the main content has been rendered but
then they don't have to actually incur
the parsing pain unless the user
actually enables that feature exercises
that feature so they just you know get
the script on elements text remove the
comments and II valid so you know it
sounds pretty like weird
you know Google's really committed to
making things as fast as possible and
they're doing this on a really popular
web app so you know it's a solid
technique they do it I think they put
these script blocks in the same in the
HTML document itself if it was me and I
was using this for a website i would put
him in an iframe so i could have that be
cached and then Charles jolly I've been
going back and forth with him for the
last month or so he looked at that a
different way and said well I'm doing a
little bit of extra work they're getting
it as a comment the JavaScript parser
still parses that one character at a
time even though the whole thing is a
comment so there's some pain there and
then I'm going to eval it so there's
again another set of parsing that has to
happen what if I just get it as a string
right and then as the user takes
advantage of a feature I just know which
module that feature is associated with
and I eval that string so he did a
really good set of experiments and
posted the results and and it's not
surprising here we're just looking at
download time and so it's not surprising
that the technique of either green or
blue of doing it as a comment or a
string or much faster than actually
downloading it as a script and and
incurring the parsing time so he's got
another wave of experiments that
hopefully will come out soon where he
adds the parsing time for the other
string and comment techniques and I
think what we're going to see is it's
actually takes longer to download java
script as a comment or a string and then
eval it but the point here is we're not
doing this on the core java script in
our pages we're doing it on that
javascript that is for enhancing the
page for later functionality and so
getting it down in the page and
incurring as little pain and you I
locking as possible is really key so I
think that's a really good technique so
there are all these techniques out there
how do you remember them all how do you
know which
ones you're not using and which ones you
are using so there's why slow you know
it started with 13 rules that I put it
in now it's up to like 25 or 30 rules so
definitely run why slow on your pages
page speed how many people run why slow
okay PageSpeed came out about three
months ago how many people use pagespeed
yeah so that it's kind of newer and
there's no one really evangelizing it
that that much but it's got some really
good it's very similar to why slow it's
a Firebug plugin it's got 30 rules or
something like that it automatically
tells you what you're doing well and not
well in your page for me when I'm
analyzing a page I'm run both and this
is why there's a lot of rules that they
both measure but why slow has some like
especially etag sprites that only it
measures and page B doesn't and page
speed has some really critical ones like
unused JavaScript on use CSS that why
slow doesn't measure so if you run both
it's not that painful they're both in
Firebug they're both tabs just click on
it to run you'll make sure that you get
coverage of all of the performance best
practices that are automated out there
right now so with all of these books and
techniques and evangelism and automated
tools I kind of envision this world
where you know I would have this stream
of flowing web performance techniques
and and the horses would come up to the
water and just you know lap it up and
adopt all these techniques that we'd
have a faster internet out there and I'm
not seeing that and instead I kind of
feel like this like I'm the performance
cop and you know I have to go around and
find these horses and drag them kicking
and screaming to this stream and force
them to drink the water and so I thought
why is that and and what I heard from a
lot of developers is that they want to
make code fast like I think that's
something that makes you be a
developer's you care about speed and
optimization and write an optimal code
but you know the marketing people or
the product people are the sales people
won't let me prioritize performance
because it's not a WOW factor so I
thought okay like you know developers
want to do this how can I get the rest
of the company to get on board so for
the velocity conference last year I said
a theme of how performance impacts the
bottom line of the business and I was
really pleased to see some big players
come up and pony up some stats about how
performance impacted their websites so
Google search came out and said they did
an experiment where they injected a four
hundred millisecond delay in certain
users a very small percentage of users
and for those users they saw searches go
down point-six percent Yahoo did a
similar experiment at 400 milliseconds
they saw five to nine percent drop off
in full page traffic being got up they
took the experiment to two seconds and
when they got up to that level revenue
per user dropped four percent shopzilla
went through a major optimization
redesign they went from seven seconds 22
seconds of load time and the revenue
went up seven and twelve percent and
there this is the other side of this
optimization coin when you you not only
get a better user experience and better
revenue metrics but you also reduce your
operating costs so in their case they
cut the number of servers needed to run
the website in half and a similar stat
from netflix when they finally turned on
gzip compression compression their
outbound traffic dropped by forty three
percent so are some more charts this is
the google data and not surprisingly as
that delay was incremented up to 400
milliseconds it had a greater and
greater negative impact on searches per
user here's the bing data so i threw up
the revenue stat but they also have page
view stats and things like that and
here's this netflix chart you can see
where they push the apache config that
turned on gzip compression the folks in
the ops group paged bill scott who runs
the UI team there and told them the site
must be down all that all they were
serving were error pages because that's
about how much bandwidth
you would need to serve error pages to
every user and you said no we just
turned on gzip compression so anyone who
runs a large website and knows what the
bandwidth costs are can appreciate
cutting your bandwidth costs by forty
three percent so fast performance it
gives us a better user experience more
traffic better user metrics more revenue
reduces our operating costs or hardware
costs so why don't more people do it
it's too hard I it's really really hard
so oh let's see if this works okay I
have a mic oh really okay audio
I pulled it if I
now watch the Wi-Fi will be down okay it
will try it oh and I better turn off
mute however crank this up
oh that's how the kind of loud okay
we'll see what happens anyone know what
this movie is Oh a league of their own
okay
I should have covered that up it just
got too hard
supposed to be hard if it wasn't hard
everyone would do it
the hard nexon parade
I love that the hard is what makes it
great right so that's why we like being
writing code right we like tackling
these hard problems especially the
people here look right I love a hard
fight I love working hard but Tom Hanks
Jimmy Dugan said something right before
that that is really more relevant if it
wasn't hard everyone would do it I don't
want just one percent of the web
developers in the world writing fast
websites i want everyone building fast
web sites how are we going to make that
happen so the theme for velocity this
year fast by default so I want to throw
up a couple examples of this there's a
company in New Zealand called optimize
they have a web accelerator they call
wax it concatenates scripts style sheets
create sprites in search data URIs make
sure you have a far future expires
header minify xand it does all of this
automatically in real time it's an
Apache and I is software module you
install it you generate your HTML just
the way you are now before it leaves the
box all of these fix-ups are applied
right they installed it on sharepoint
microsoft com the number of requests for
an empty cache went from 96 to 35 for a
prime cash went from 50 down to nine the
pages got about fifty percent faster for
an empty cache and about thirty percent
faster for a prime cash just by
installing a server module strange loop
networks has a similar accelerator it's
a hardware appliance they released a
blog post about a month ago and they
said they ran it on a typical e-commerce
site they didn't say who it was for an a
for half the users they turned on the
appliance for the other half they left
it off so the people who had the
accelerated experience pages per visit
went from 11 to 16 time on the site one
from 24 to 30 which is kind of
surprising right they're getting a
faster experience but they're spending
more time why is that it's a better user
experience
and more importantly for those people in
product and business and sales
conversions went up sixteen percent
order value in about five and a half
percent so we're seeing appliances from
vendors like that but we also need to
embed this fast by default mentality
into the frameworks that we're using
into the CMS is in programming
environment environments that we have so
I've been working recently with yehuda
katz from the rails community and he was
explained to me all the things that
rails does automatically make sure you
have far future expires header
concatenate scripts provides for domain
shardene configure Z tags the main thing
he and I are working on is making the
script loading in rails adopt some of
these acing techniques but he also
mentioned coming up with spriting
modification and document flushing
sprout core was mentioned earlier today
I've been working with Charles jolly
there and again sprout cores the
JavaScript framework behind mobil me so
he was describing to me all the things
that sprout core is doing concatenate
these scripts and stylesheets making
sure style sheets are the top scripts at
the bottom removing duplicate scripts
similar things so I think that we're
going to see more and more of this I'm
certainly going to try to encourage it
by highlighting companies and projects
that are making their frameworks fast by
default that velocity this year if
anyone here has a framework and I know
people do and I already heard some of
this this weekend but i encourage you to
add more fast by default functionality
so that anyone using your framework gets
fast web sites just out of the box just
by default so i'm wrapping up i want to
talk about some recent news recent
projects so is Francisco here so he
scares me a little bit he's so smart and
so yesterday he talked about how sprites
are bad and dated your eyes are good so
I feel a little funny getting up and
talking about sprite me I certainly
think his environment maybe is a little
different and data your eyes I certainly
evangelized but I think for another year
or so we're
are still going to need to deploy
sprites so let me see if the internet is
working if I can do a quick demo of that
how many people here have run sprite me
good good that it's so tiny thanks to
the three of you that raised your hands
okay so let's see it's a bookmarklet so
it runs in all browsers ebay used to be
my canonical example in fact if you look
here you can see that they had all of
these background images and sprite me
found to these are the slides sprite me
found two sprites to create so when
sprite me first came out I emailed it to
the performance guy in know at ebay and
I said oh you guys have some opportunity
here and they've actually since that
time sometimes the last month have
deployed a lot more sprites but right
now sprightly still finds these
opportunities for creating sprites so
with sprite me you can actually like
what you can just see what CSS
backgrounds are being used now you can
open it up and you can hover over an
element you can actually see where CSS
background is being used you can just
click on make sprite and what it's doing
is sending all those URLs off to another
open source project called cool runnings
and getting back a getting back a
getting back a ok and it gets back a
sprite an image and actually injects it
in the page right now and changes all
the CSS and then you can export that CSS
and save that image so you can actually
verify that it's working on your site so
that sprite me Oh browser scope came out
about a month or two ago this is based
off something I built a year ago called
you a profiler so when chrome came out a
year ago dionne asked me if I was go
write a blog post about how good or bad
it was when it came to performance and
it was the weekend before it came out
and so i had to find the internal link
for the download so i could review it
and write the blog post for the launch
and I couldn't find that internal link
so I said okay what I'll do is I'll
write a bunch of
to measure crows performance and then
when it comes out when I go to work on
Monday I'll install it and run it
through the test really quick so I can
write the blog post really quick and
once I built these tests I thought oh
well any browser could be run through
these tests so i created this framework
out of it and then my office mate
Lindsey Simon took that and has started
this open source project called browser
scope and so the original test that i
had are here in the network tab but
we've also added acid three selectors
api rich text edit controls i think next
week we're launching a security module
we've got one of the work for cookies in
html5 and basically you go to the
website and we don't run any tests all
the tests are generated by you people so
anyone with a web client that supports
javascript can navigate to the site
click on this how does your browser
compare button run the test and the data
gets stored in our database so we have
about 30,000 people who have run tests
across maybe 200 or 300 unique browsers
and so it's a great resource for
developers to know what the browser
they're working on does and does not
support but then also it kind of
highlights to the browser vendors what
they're doing well and what they need to
improve on so try to keep that heat
under them to give users a better
browser experience the HTTP archive
format so I want to create this
repository that stores performance
information for the entire internet and
I realized i've had this idea for a
couple years I realized a key component
was an industry standard way of saving
performance data for a web page and so
about it well in January honza from the
Firebug team who owns net panel said he
was going on an export feature so I told
him he should hook up with Simon Perkins
of HTTP watch who already did exporting
but in a proprietary format and get them
to agree on an open source format and if
fire bug net panel and HTTP watch who
are both very popular have a way of
exporting
and importing data that it would get
adopted as an industry standard and I
think we're seeing that happen so my
contributions to this project were
twofold I introduced honza and Simon and
I chose the three-letter suffix for the
file names I'm serious so it actually
works now you have to get a nightly
build of Firefox to get export to work
in Firebug but if you read my blog you
can see that and then the last thing I
wanted to mention i wouldn't plug stuff
you know just for the commercial value
of plugging it I think velocity is a
really good resource if you care about
web performance and we're going to start
doing webinars maybe like once a quarter
so the first one of these is december
eight it's 92 about noon pacific time
and we're going to have us someone from
strange loop their talk they were the
ones who ran that study about the
typical ecommerce site so he's going to
dig into those stats a little bit more
charles jolly from sprout core is going
to talk about the more recent results he
has about that javascript loading
there's go be a cool thing from google
to talk about our tour Bergman is go
talk about stuff more on the op side and
we'll have I think kind of a high-level
talk I think it's going to be from Chris
Andersen not Damien of CouchDB so where
are the takeaways focus on the front end
don't stop focusing on the back end but
I think we've had a disproportionate
amount of our performance optimization
resources focusing on the back end and
when in reality the front end is where
we have the most room for improvement so
make sure that you're getting an
appropriate amount of focus on the front
end run why slow and PageSpeed you
really need to run both of them to get a
full coverage of the performance
optimizations that are well known and i
think really look at how you're
rendering your page and make sure you're
not doing too much in javascript for the
initial user experience try to do as
much of that server side in HTML as
possible I really think already now in
the search marketplace but I think in
other marketplaces we're going to see
speed become a competitive
advantage so I really recommend that you
you start adopting these performance
best practices before one of your
competitors does and passes you by thank
so if there are any questions I'd be
happy to take questions and if we run
out of time I'll be here you know
forever so there any are there any
question style all right thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>