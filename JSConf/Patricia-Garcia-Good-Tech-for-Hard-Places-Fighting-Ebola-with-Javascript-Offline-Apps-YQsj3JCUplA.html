<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Patricia Garcia: Good Tech for Hard Places: Fighting Ebola with Javascript Offline Apps... | Coder Coacher - Coaching Coders</title><meta content="Patricia Garcia: Good Tech for Hard Places: Fighting Ebola with Javascript Offline Apps... - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Patricia Garcia: Good Tech for Hard Places: Fighting Ebola with Javascript Offline Apps...</b></h2><h5 class="post__date">2016-03-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YQsj3JCUplA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I want to show you how you can save
lives with JavaScript I have been
working in the past 15 months developing
JavaScript offline applications to help
on the Ebola outbreak response and it
has been quite a journey and impressive
thing but not always an easy path we
have fun a lot of challenges we have
made a lot of mistakes and and we have
learned a lot thankfully so I want to
serve the learnings with you so if you
happen to find yourself developing
offline applications then maybe you
won't do the same mistakes all right
Ebola answered you all know a lot about
Ebola because it has been in the media
quite often in the past year but I'm
going to review some facts so you will
understand better how they fight against
Ebola work so Ebola unfortunately is
quite an unknown disease one of the
things we don't know about it is how to
cure it there is no confinement
treatment yet so the only thing you can
do is to take the sick people to a
medical facility and keep them strong
and hydrated and make sure that their
body is at their best to fight the virus
however there is a couple of good things
about Ebola in comparison with other
signals one is that contagion requires
direct contact with body fluids of an
infected person it's not airborne like a
cold for example the other one is like
while it is very infectious the sixth
person is only contagious after sowing
symptoms and like the flu for example
that you are probably giving to
everybody around you and you don't even
realize you are sick yet we also know
that the incubation period is up to
three weeks
so the way their response to the Ebola
outbreak works is by trying to stop it
from spreading and this is done by
contact tracing contact tracing means
that when you find somebody who is sick
after bringing that person to a hospital
to be treated you have to find everybody
who has had a significant contact with
that person for the past days and these
people are potentially infected with a
bulletin so you have to keep them in a
sort of quarantine and check on them for
three weeks to see if they develop
symptoms if they don't then awesome they
are healthy and if they do then you
continue the process so there are two
important things on here one is
following up in contacts and the other
one is making sure if somebody is sick
and that was not a contact you knew then
you find that person as soon as possible
so that you can stop the sickness from
spreading further that was quite
difficult in the West African countries
where ever hit very hard in Guinea
Liberia and Sierra Leone so what they
did is to set up an emergency phone
number where people can call with any
Ebola related emergency saying that
somebody sick or somebody's dead or just
asking for information education is very
important here too because at the
beginning of the outbreak people didn't
know how to deal with Ebola or what was
it or some people didn't even believe it
assisted so how does java script enter
the question here I work for a health
Africa this is a Nigerian based NGO that
aims to help vulnerable communities live
healthier lives especially in English
Africa and I'm part of the soccer team
and we try to apply technology wherever
it can to help improving these health
systems part of it was working on the
Ebola outbreak response what do we do
first we started in Nigeria because this
is where we are based and we realized
that the way their responses work in
there is there is these people the
contact tracers that go to visit the
contacts at home every day and see if
they have developed
symptoms and they were using paper forms
and this is that for an ideal because
you know paper is like paper doesn't
have her check in if you forget to feel
a mandatory field paper is not
complaining or if you're hungry teen
it's absolutely horrible and nobody
understand if you write the name wrong
and then it's not clear which contacted
you follow up also is easy to lowes I
managed to do it all the time it can be
destroyed by getting wet for example and
vapor tablets lo you have to take the
paper yourself to the place you want it
to be the place you wanted to be is in
this case the emergency operation center
where they take the information and
decide what to do with in and they also
digitalize it so they can do far than
analytics and planned strategy but again
digital IC needs is like typing typing
all this paper which is a slow and
error-prone and something we humans are
very bad at so what we did is we realize
this is basically a form right so we
provide in with a very simple mobile
application where they just have a drop
down where they select the person they
are following and and this way they
cannot make mistakes with the name and
then they feel the symptoms and safe and
and when they do as a bonus you can
store the GPS coordinates and this way
you are sure that the person really
visited the contact this way the data
were digitalized from the very first
moment so we were able also to provide
the emergency operation center with
another tool that let them see the
information about contact tracing and
about the outbreak in real time internet
gods willing so in the call center it
was even a more extreme case because
first the call center was in Sierra
Leone where the scale of the outbreak
wats much bigger and also there were a
lot of course arrived in every day so
there is the operators who are receiving
the calls and then there is these you
can see two teens here like the burial
team the
19 there is also the ambulance team for
sick people so they were using different
things from paper to excel but it was in
general is low and they were not so
happy with it imagine paper for example
you have the operators taking calls for
very stressed people and they have to
type everything super fast because they
have to collect a lot of data and then
they hung and another call comes and
paper is piling up and then these other
people they have to go through the pile
of paper and find what is relevant for
them because some of the calls are just
asking for information and some of the
calls are from somebody saying that this
is the third time in a row they are
calling and that's somebody's sick and
waiting at home for three days so we did
a custom application for them that makes
them allows them to enter the
information faster and then for these
three teams taking care of the response
they can feel that the information they
need so it's not nothing very
complicated but these two application
managed to speed the process and to make
their life easier in the case of the
contact tracing the time from collecting
the data to having this data available
in the emergency operation center was 12
hours and it become almost instantly in
the case of the call center there was an
article this summer saying that all the
improvements that have gone and that
have been happening in the call center
for months including software
improvements brought the response time
from an average of five days down to 24
hours which is I mean you think about it
if you are sick wait in five days for
somebody to help you is not very nice
but as I said this is not I mean this is
not rocket science this is basically a
lot of web forms bunch of rates API
calls and a lot of processing a little
bit of processing on the data but it's
something easy for us developers right
however we have a constraint that make
our life more difficult that's internet
is not working or yes or slow or you
never know so you have to
make sure that applications can work
offline fortunately we have the help of
an awesome piece of technology Cal TB
cod CB is a non SQL database and that
stores JSON documents and the part of
Cal CB that make it super good for
offline application is that is very good
with distributed systems and it has a
couple of bonus one is that it allows
you to do much reduced operations in
your takeaway just JavaScript so it's
very good for data processing and the
second one is that it is pose regular
HTTP IPA so if the only thing you have
to do is basically store data and
retrieve it and process it a bit then
cuts the we can be your back end and
that was the case for us actually so the
only thing we are missing here is how to
store the data offline in the browser
and for that we were using another great
open source library positive in that
implements sort of couchdb database but
in your browser we also use a little bit
of angular and Cordoba for the mobile
application I forgot to put the logo
here and this statistic allow us to move
very fast for both applications we have
a prototype ready in three days a
prototype I mean something that we can
so to the people and as them like is
this useful for you but even so within a
week we had something with in production
like something buggy and with not so
many features but it was helping already
and after a lot of weekends and nights
of crazy back Dixon Ebola was over in
Nigeria after a couple of months and we
were asked if we can take our
applications and and use them in the
other three countries in Liberia Sierra
Leone and Guinea and that's when we
started to find problems
the first growling we find is because
okay so we created our first apps for
Nigeria and here you can see the
different on the scale of the outbreak
in Nigeria you cannot even see the
number of cases because in total there
were like 20 sick people in Nigeria
while in Sierra Leone it was like 14,000
and we have started with our simple
basically following the puck Stevie
tutorial we do these we replicate
replicate our whole remote database in
our browser awesome we can go as if we
were all the time online yeah of course
that was not such a good idea the
browser started complaining that we were
being too greedy and apparently browsers
half a limit for the amount of space you
can take since we were very stressed and
we have so many things to fix we thought
like well well crumbs let us use six
percent of the harddrive we'll just do
that what can go wrong yeah and that
didn't solve the problem the next thing
we saw is that the replication the first
time somebody was using the application
was going like for taking ten minutes
220 240 and that was in Berlin but we
were saying like a 40 minutes it's not
that bad right but the people in Liberia
were telling us like no guys this is
never finishing the latency library has
worse the internet is more unstable so
they were not even able to to use the
application so the problem is that we
just took the easy path and replicate
everything and that's take too much
space and replication is a slow but why
were what why were we replicating
everything really do we need everything
well use your domain knowledge and see
what do you need offline in the case of
our contact tracing up for example we
realize we only need contacts that are
created in the past three weeks because
after that they are out of the
quarantine only in my area because a
particular person doing conduct racing
only working in one area not in a whole
country if they don't have symptoms
because otherwise they are out of the
quarantine to
and from those only the names and ID's
to sew it in order down so we change our
replicating everything to replicate just
the information we needed this is our
remote database on the left and on the
right you can see that when we had
connections the database we were getting
a list of names and ids and we were
storing that in our database in our
browser and then we could create
follow-up information and we will
synchronize that to the remote database
whenever we had internet but we didn't
need to have all these follow-ups in
every single phone in the case of the
call center however it was different
because we try to reduce the data set
and still the smallest data set was too
weak and also we realize instead of
making things faster we will make you
need us nowhere how is that well if they
were using paper the operator will be
taking all the information in paper and
the people sending ambulances for
example will be here I can just take the
paper and hand it out to this other
person in our case we were trying to
have all the information available all
the time in all the computer with means
that the operator will fill out the data
that will go all the way to the internet
and back to the person sitting next to
me the problem is that maybe internet is
not going to work for two hours and then
the fact of passing this information
takes two hours which is crazy so what
we realized is that we were really
trying to solve a software problem
almost for the sake of it almost because
we thought it would be cool to make it
work like that what we realize is we
need these people to have the
information within a call center
available as soon as possible and then
maybe the other call centers can get
this information with a little bit of a
delay so we forgot about but to be
completely here and we just set up a
local CouchDB database in each of the
centers and then whenever they have
internet they can synchronize to the
remote database and then that
information will get back to the other
call centers actually that allow us to
have call centers that have no access to
internet whatsoever because you can
sometimes
our dedicated telephone line between
them and then the second call center
will take care of synchronized to the
internet so solve real world problems
and replicas late on only what you need
a second very common problem if you are
dealing with offline applications is
dealing with conflicts why do I mean by
conflicts this was our original data
model in the database and so we have the
remote database and to contact tracers
let's assume for simplicity that they
only synchronize data at night so we
have day to both contact tracers have
the information day three one of them
goes to visit the person and at night
there is no internet therefore the
second coat that tracer goes to follow
up on that person and at night internet
works again and they try to synchronize
and Cal Stevie says okay guys I have a
document you both have modify it I have
no idea which one of you is right so I'm
just going to set up this has set this
as a conflict and it's for you to decide
you can do that you can decide what's
the right information but you can do
even better by avoiding completes all
together so what if you design your data
model better and keep things that change
together together and things that change
separated separated this way each one of
the contact tracers will only create new
documents and then there will never be
conflicts this will have another bonus
that is like there is less versions to
maintain because you are not editing the
documents all the time so that makes a
replication faster and takes lazy space
so for avoiding conflicts choose your
data model wisely the third problem I
want to tell you about is a nightmare of
somebody making offline applications
which is Dallas we have this other
application where we are registering
people for a bass ination trial it's
basically taking that information a pic
sure and printing a car and we realize
some people had cars and they seemed
legit and we don't have this information
in our database well we thought that
happened was that at that moment we look
and we realize okay index DB is actually
temporary storage cool have felt how it
works in chrome is that this is your
hard drive and this is the space you
have available on it and chrome can take
one-third of it and every single
application within Chrome can only take
up to twenty percent of these well we
thought okay this is still a lot of
space right special in a computer
although if you think in mobile phones
then it's not so much a space but it
still will have problems for a long time
however one day we realize that has
disappear and the thing is like what we
haven't thought is that if you keep
using available space then the space
allows for chrome and applications keeps
shrinking and our application was
actually making the user take pictures
and if they were not deleting these
pictures then of course the hard drive
was shrinking very fast so what happened
when chrome runs out of a space is that
it decides to remove their less recently
use application all the data from it yep
so this is something to have into
account so those squares some of them is
take we make we will make even more
mistakes I guess but we realize many of
them were like sort of beginner mistakes
and it was because it was all new for us
this is like state-of-the-art technology
and it's new for us and it's new for the
internet so there is no post in a stack
overflow solving your questions there is
no 20 tutorials telling you how to scale
offline applications so it's a lot of
fun an adventure what I can recommend
you if you have to work with the new
technology
is get an expert if you can and you only
need one person and knows what's
happening to help everybody else and we
were super lucky to have one of the core
developers of cults to be helping us
he's somewhere around here he didn't
arrive on time to prevent us from doing
their mistakes but he helped us solve
them and if you cannot get an expert you
kind of still reach out to the community
because the thing is that if somebody is
working in an open source project they
are probably very passionate about it
and if you have an interesting project
and you are pushing the limits then this
is an interesting challenge so reach out
to them be nice help them create baths
solebox if you can add to documentation
and you'll see that they help you okay
so actually I wanted to talk about an or
theme but I remove the slide because I
thought I didn't have time but now I
have plenty I went very fast so another
problem you can find if you are working
with all our offline applications is
that you don't have internet at all so
all the things I was talking about was
about having internet sometimes and
sometimes not if you don't have internet
at all then there is still hope right
and you just need to make sure that you
manage to synchronize things between
devices in some way and how can you do
that well then you so check Matthew
stock from yesterday I'll leave it there
okay so I saw you these charts with all
the people that got sick and that died
in West Africa and that was pretty sad
so I want to show you to end up on a
brighter side how's the state of the
outbreak right now we have like period
that have three cases oh it's not easy
to see it's three new cases on the week
on the twenty-ninth of December this is
not so much what it's a little bit sad
is that Liberia has been declared
ebola-free already twice and this is the
third time they get a new case but
hopefully they have it under control
in Guinea there is only one new case and
it was on 29 of double so this hope that
they will declare it a valid reason and
they will outbreak ended in Sierra Leone
and Nigeria in Sierra Leone that was
particularly good news because the scale
of delray there was crazy and and they
were so happy when it ended that they do
they did this time i'm going to show you
Oh No okay
I'm going to stop it because it's very
long but I think Solarius doesn't check
it out and this is the people from the
call center in Sierra Leone by the way
so I think it's amazing that these
people after all the bad things they
have gone through they still find the
energy to I don't know to celebrate that
everything is over by dancing and and
having fun so let me undo this okay
okay so it was an amazing experience to
work in this project to find that you
can apply to your skills to do something
good for Humanity and I can totally
recommend you and recommend it to you
and but it's also amazing for me that
when we arrived here and we try to help
we found that with all the technology we
are with the way we are advancing
technology and all the time we are
spending on basically writing software
there was nothing prepared to deal with
this kind of situation and I mean Ebola
is quite buy it but it's still just an
epidemic and the way to deal with it is
like at any normal epidemic so let's
make it better next time as the Time
magazine said this is gonna be the last
epidemic and when the next one comes the
world must learn the lesson of this one
we better prepare less fearful less
reactive run toward the fire and put it
out together thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>