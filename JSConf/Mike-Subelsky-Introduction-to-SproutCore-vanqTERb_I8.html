<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mike Subelsky: Introduction to SproutCore | Coder Coacher - Coaching Coders</title><meta content="Mike Subelsky: Introduction to SproutCore - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mike Subelsky: Introduction to SproutCore</b></h2><h5 class="post__date">2013-01-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vanqTERb_I8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay i want to start with the demo right
away this is an app called paper cube by
Peter Bergstrom and here to here it is
it's a this is an experimental tool to
help you navigate through when you like
find the relationships between research
papers which have oh we're oh there we
go that's because I'm about that what
totally all right here's what we'll do
I'm going to spin myself around okay so
I this is a tool for exploring academic
papers as you know papers with their
citations and the author's it has a real
it's a really interesting problem space
because the documents have such rich
metadata about connections to other
documents so Peter made this tool using
the framework I'm going to talk to you
about called called sprout core all
right so I already did a search of by
author name which the app is cached here
just in case there was a network lag but
so I looked for an all the authors whose
last name is Smith and you can see this
second one here this paper has got four
authors and it's been cited 78 x so this
is a really good one just to show off
what this tool could do so you can see
right away as soon as I made that
selection whatever data this app already
knows about starts loading you know I
have a kind of a slow connection here
which under normal demo circumstances
would be like kind of a bummer but it's
actually totally perfect for want to
talk to you about as far as I'm
concerned this could take like five more
minutes to load but we can move on from
here okay so it's right away you got to
see whatever your the local app knew
about and then the rest under the covers
the app is going back to the server to
get as much data as there is to know
about about this object and you know we
don't have the source code for this I
mean we
we could look and you know use an
inspector we don't have it all nicely
formatted but I mean I bet you'd be
really shocked at how little work the
developer needed to do to make all this
kind of work but based on my experiences
with it so that's that's pretty cool i
think everyone can see that applies to
some of the problems you're trying to
solve but it's got some other pretty
interesting feature so let's look at a
graph you all right that's pretty cool
but this is only showing me one level of
connection let's let's dial it up a
little bit show me three levels of
connections so it's cool going back to
server getting getting more objects I
want to Texas too much we can zoom in I
think we even have like we want to save
it for later I don't want to do too much
as I don't know all the commands I want
to break something everybody that's a
pretty noisy graph so let's say I don't
know I don't care about papers that have
been only want to see things have been
cited more than you know ten times so
that's pretty cool okay so that's why
what I wanted to start off with here it
looks like a lost keynote no problem
okay so while I'm waiting for my slides
to load back up oh well I wanted to
point i wanted to point out a couple of
things about that at here we go it's
coming back this whole display here is
very it was very fast and fluid you
notice that oh man I've angered the demo
gods I'm really sorry I'm telling you
I'm actually yeah I'm we're gonna get
this back on track here all right
awesome so what the things I that I
really like about this this application
why I wanted to show it to you first of
all it's very fast and fluid I mean
there was it just had a very native feel
to it didn't feel like I was using a
traditional web app like him from it was
on very much on the far right of the
spectrum that Francisco drew for us
yesterday it's clearly like the exact
kind of thing we've been talking about
for two days here so I don't usually I
spend some more time explain
why it's a good idea to use javascript
for this how it's the future but you
guys already are totally up to speed on
that its web native there's no plugins
involved with that to make that appt
work it's all HTML Javascript CSS and
like SVG and the another thing that's
great about it what kind of makes it all
work is that the client has a lot of
local agency it's not going the servers
at rendering HTML or really does the
server doesn't care at all what the
clients displaying to mean there's
actually no reason in fact the server is
not worried about the UI in any way the
server is providing a service it's just
returning JSON I just ran a sniff around
here so there's nothing to stop any of
us from writing a completely different
client for the different framework to do
other things with this data and is it
does it won't bother Peter in the
slightest effect to borrow a code
snippet from my product from other inbox
like we have a little bit more lines of
code here but this I have action that's
basically the entire core of our
applicant if something broke with this
it would cause a whole lot of problems
for our clients i'm just i just have a
class that absorb i initialize a class
with some parameters that the user has
passed and when I turn into a hash that
gives you back an object graph which I
then converting to JSON so of course the
big you know epiphany I had here which I
you know up a little bit late to the
party or really late to the party is
like well we're going to all this
trouble what am i doing I'm constructing
a document I'm just converting to Jason
well I should probably be finding some
way to just all have this JSON already
and kind of cut out the middleman of it
that's a completely separate talk the
fact is it's just this is just really
clean-looking I think we can all see the
appeal of this and it's a million times
better than what I had before when I was
trying to make one of those apps on the
far right of you know the really rich
interactive app but I was using the
techniques or something in the middle of
that spectrum like out I was just using
partial page updates I had you told this
glue code I had a million different
controller actions and custom JavaScript
mixed with rjs and it was just really a
bear to maintain and users hated it so
my name is mike c Belski i'm here to
give you a reduction to sprout core
I'm you know this is a really incredible
audience to be speaking with I just want
to make clear like I am NOT a framework
author I didn't invent rock or I'm just
a fan of it I'm just somebody that I
co-found his company other in box we
needed something like Spock or we need
you know we needed to create a rich
experience in the browser that felt like
the desktop and this really answered the
bill so I've only made this one thing
with it and so I want to get as deep and
technical as I can but you know you may
have other questions that I'm just going
to frankly I don't know the answer to
because I'm just out there like you guys
grinding trying to make a product so
we've been talking about this already
you know the near future that were
really the present we're going to move
all the processing back to the clients
much as we can we're going to move
presentation to the client were going to
move the edge all the way out to your
browser and so you've already heard
about these projects like titanium
taffie TV cappuccino and o3d and
phonegap there's all these active
efforts out there that are trying to do
that so spark or is very much of a piece
with with all these ideas and so look we
already we have these apps that do these
kinds of things you've already heard
examples of them so Apple has mobile me
it's the that's their effort to move
their desktop apps into the end of the
cloud we hear about 280 slides yesterday
I just showed you pay per cube and you
know hopefully we're worthy to be
considered in this pantheon of products
so the problem is their desktop like but
they're never going to be like real
desktop applications it sounded like
from the phonegap top that you know
that's a that's a future that people are
working towards and maybe someday we'll
get past that but there's still like
this dislike here really contains a lot
of like uncertainty and ambiguity and
that's really it's this like which
brings us here today so the because
these are these are cloud applications
right this is like a super simplified
version diagram or architecture which I
stole from the AWS blog so like the
problem when you're building an app in
this way a client is that there's always
going to be this
latency there you saw how perfectly that
worked out in when i showed you pay per
cube like I all the data wasn't
available right away but because and
because of the way JavaScript works like
you can't write your apps in a way where
that were you allow open network
connection to freeze everything up for
the user you know you know about all the
threading problem so this is a pretty
unique problem for for building a
desktop app that is completely cloud
aware this latency issues it's part of
that like that's something that it's a
big challenge also the client right now
doesn't have all that much storage I
mean we're all familiar with some of the
options that are out there but you can't
really expect anything greater than
sequel 85 right now if you're just
planning to use web technologies also
your app is running inside of the
browser I couldn't find one that also
included chrome is this beautiful keep
everybody happy a trilogy but you could
just sort it here in your mind so
there's things that the browser is
really good at it's really good at
rendering HTML as you guys know you feed
it a long string of HTML text it will
make it will appear instantly but
they're bad at touching the Dom you want
to avoid the Dom as much as you can well
you know the JavaScript that we use a
single thread I mean there's there's
manifold limitations that were there
were well aware of so the sprout core
framework is designed to work within
those constraints and play to the
strengths of the browser so you could
build a desktop app that works in the
cloud so it borrows patterns from from
cocoa some of the like the really tried
and true venerable ideas from that
framework that have made it last for 4
20 years but it doesn't use the same API
and so like I was talking to the creator
of spark or Charles Julian he this is
this quote how they ask themselves how
would you build cocoa for the web
browser if you could rewrite it from
scratch and throw away all the stuff
that was out of date or old or just
didn't really apply and also borrows
patterns from these other projects from
j.crew
in Ruby and Python and prototype and
rails and what first appeal to me about
it really being a coming from like the
web app server side was the the affinity
with for I felt with it from rails
because putting these apps together felt
a lot more like configuring components
and less like writing a whole bunch of
code and that that just was familiar to
me being a rails person so I mean I
think it's interesting to note that when
Apple made mobile me they didn't port
cocoa to the web they view sprout core
and that is how i became aware of it
because last summer we were you know a
year into less than a year into building
our product and we we deal with email so
the users really expect that to be much
more responsive than anything else i had
ever worked on and I saw this these apps
and I was like I just knew that is
exactly what I want I want to be able to
have something that feels very native
and fluid and as a lot of features but
that wasn't complete pain to write and
maintain also like when Apple came out
with sdk for the iphone they didn't they
made a derivative of cocoa called cocoa
touch and i couldn't really when I
shouldn't find a pity graphic for cocoa
touch this as best I could do just
that's really cool I got found that on
flickr so so like all these ideas these
are all this is all the broth from which
Sprott core emerged emerges so when i'm
going to talk kind of briefly about all
the features that it comes with because
I feel like we've already covered a lot
of this ground but just just to show
just kind of a show parody I thought I
would mention it and one what the way I
wanted to explain it was like let's
think for a second what could we build
with these technologies not just with
spark or but anything that lets you use
web native technologies in this way you
know like just free our minds for a
second and these are some of the things
that I came up with and the asterisks
are like once I made this lighting came
here people started telling me about
like oh well did you know
so for example like rich Kilmer said
he's made a video editing app with
sprout core it uses a flash plugin just
just for the video part and for ide of
the core team is for our quarry is
working on an IDE that would work
similar to the interface builder that
Francisco showed you and you know I saw
with like John's demonstration of the
guitar hero app I don't you know I don't
know as much about animation and
graphics and things like that but I feel
like but I'd really like to spend a
weekend trying to do that in sprout
court see if what would be different or
better because some of the core
technology underneath of sprach or is
really designed to make it as make the
browser as fast as possible and deal
with some of those timer problems and
event handling that I feel like that
might it might fit in really well with
what he was trying to do with the guitar
game but so I leave does an exercise to
the reader so if you wanted to make one
of these things it's really rich
interaction but what would you need you
know I came into this very naively
thinking I've been doing web apps for a
couple years I'm a total ninja no
problem well you actually need a lot you
need what desktop developers have always
had what they've really come to expect
so these are all the things that spark
or gives you like keyboard management
and focus and drag and drop and NBC and
you know it has a build system and a
testing framework and I'm trying to go
quickly so I have time and you know at
the end too I can show you any of these
things discuss any of these but the to
me the really cool feature that you know
if you don't remember anything else for
my talk to you from my talk about the
thing that's really was a wide open for
me and like changed my programming life
is bindings and observers so that's the
one that's the feature I want to dwell
on and I think all these other ones
people have already talked about okay so
finding this its really three different
components in one that make this work
its key value coding key value
observation and bindings alright so the
reason why these are big deal is because
they're what help you avoid glue code to
make something like paper cube you have
a lot of things that have to be
incra nuys like a lot of people need to
be notified about changes to different
objects and if you don't have a
framework doing that for you you have to
write it yourself and it's it's really
nasty i looked at some of my old code
for the original version of other inbox
i don't don't--i want to put it up there
because it's so bad but you can imagine
if i want to destroy an object i have to
remove it from a hash somewhere I have
to decrement a counter of the total
objects have to make sure the Dom
element representing that object gets
removed and it's just terrible stuff up
you guys have all been there so here's
here's how it saves you time saves you
from writing all that awful code key
value coding it just means from now on
anytime you want to access a property or
change a property on a JavaScript object
you're going to use a get or set that
it's as simple as that you can do this
it's possible but you you would be
ill-advised to do it because by using
key value coding it gives you a chance
to register other pieces of code that
want to be notified when there's a
change to that object so that's called
key value observation so here's my
example you have this collection of
objects down here there's a sparkler
come to the local database called SC
store and the API of it was very
familiar it looks looks a lot like like
taffy DB so I decided to exercise the
parts where i show you the store because
you've already seen a very awesome
implementation the same idea so here's
the store I got all my contact objects
and here is the actual piece of the view
that I want to effect this is just a
string of HTML and it's represented in
the code by a list item view so the demo
that I'm going to be showing you is just
a really simple contacts address book
application so ultimately we want to
change something over here we want to
cause a change which gets reflected
interview and we don't want to write a
ton of glue code we just wanted to
happen automatically so we can get on
with solving the actual problem so what
to make this work you have a controller
called vote me in this case the contacts
controller which represents a collection
of objects in this case I have it
showing you all the contacts but you
could you can easily one of the things
that the controller does is constrain
which things are being represented on
the screen so you know from from the
paper cube example there's probably some
kind of controller called articles that
is the list of articles that you've
selected in that and/or the container
for the articles that you've searched
for it okay so in that's like a master
controller it contains all the things
that would be in a whole list of objects
so then there's the detailed controller
which just represents one particular
contact the content of the contact
controller is bound to the selection
property of the contacts controller so
the my contacts controller its content
is a collection of contact objects I
probably need to get rid of this
alliteration change it to something else
but this fine will press on contacts
controller has a selection of all the
things i know about which one is
selected what you know where should
where should the user where should they
be highlighted so the user can tell what
they've selected that gets used as a
value for the contact controller and
this list item view the only way it
knows what it should displays it's bound
to the content property of the contact
controller i'll talk about properties in
a second so there's a little bit of code
in here that says okay i want you to
take the name of the contact that i'm
bound to I want you to display it
wrapped in h2 tags okay so the magic
happens with what's now we want to do
something we want to change that this
particular content we want to change the
name I get the first name I want to
change your first name to Sarah okay so
because all these objects in the model
and the view and the controller and
these separate layers of your
application they've all registered to
receive notifications just by saying
they're all bound without you having to
do anything except expressed that
binding when i type this change in or
when I make that happen it flickers
through zubair see that the animation
their work for your hard to get that
right so all right so then the result is
this just changes and you don't have to
do anything except right object set name
Terra so that's the big deal when I
all that I just that look from here
flows all sorts of amazing insights is
really cool so the third part of this
puzzle the bindings that's these
connections here and you don't ever you
don't usually have to create bindings
yourself that gets done for you by the
framework when you are configuring these
components alright any questions about
I've talked about so far all right so
now I'm going to jump back into demo
time and i think i'm going to mirror my
screen this time so i don't like get
seasick okay so one moment here
hopefully the resolution works okay so
this is the app that running that I've
been showing you this is the contacts
application over here over here this
this is like the contact controller is
what's backing this list of contacts up
and we'll look at the code in second you
know then we have a detailed view here
that's bound to that contact controller
that that makes sense everybody follow
me okay so let's actually do the thing
that I was showing you so first of all
when you create one of these apps you
have like you get an application object
it's like the only thing that gets added
your name space other than the like the
sprout core object so what I'm doing is
I'm going to my application I'm saying
all right content i'm going to talk to
the contact model know and say all right
contact model i wanted to do a query I
want to find the person whose first name
is Michael all right and this is one
thing i don't like about the WebKit
developer toilet doesn't like it Firebug
it resolves it but so somebody I hope
somebody fixes out or maybe I'll have to
anyway that gives me back a particular
contact object so now I'm going to use
the key value coding to actually let's
see if I got the object that I thought
that I thought I asked for and it worked
so I asked for somebody's first day was
Michael I got back a contact object
indeed their first name what's Michael
and you know I can do other things get
there
last name I think that yeah so that
proves that what I got back was a
contact ok so now let's let's do
something a little more ambitious so
this time I want to change the last name
to something else all right so watch the
list item with one eye and watch the
detail view here with the other eye all
right or just take note of it and then
like after changes you could just
compare all right so it just changed let
the list item changed and this here
change so let's let me show you the code
that actually makes that work arista
sizes I'm plenty i'm going to do a tour
or like why the code is organized his
way in a second but i want two more get
into the magic of these features here so
here's the master controller and there's
actually almost nothing in here that you
need this is like the they have a pretty
heavyweight documentation system which i
usually just i take all this out but
this stuff in here that's just optional
configuration data you don't really even
need this at all but that you know for
certain apps you want to be able to
select multiple things and you you you
want to be able to have a null selection
there's some startup code most of this
is oh by the way i also should say i'm
showing you this is like a 0.9 app
sprout courses in one point 0 like the
release candidate is out and some of the
API is changed so anything that looks
bad now going here I'm just going to
blame on it being 0.9 but since I'm
living in a 0.9 world i don't feel
comfortable presenting that stuff but
it's it just makes the the syntax a
little bit nicer so anyway this is where
this is like what kicks off everything
we get that we get a collection of
contact objects and we set the master
controller its its content property gets
set to that collection that's the gist
of it you know and you're like for
example you don't have to do this
more in one point oh okay but that's it
there's really no other code required
your controller for free this already
knows about how to handle multiple
selections and you know it can handle
keyboard events all kinds of other cool
things like that reordering objects you
get all that for free you still have to
implement the code where you need to do
something about it if the user reorders
the items in the list but you don't have
to worry about like removing it from one
place and inserting it somewhere else
you get that for free so then we have
this other this detailed controller
again the real that's actually the main
meat of it is right here what is the
contact detail controller what is it and
want to know it just wants to know where
to get its content from so that's a
binding to the selection property of the
contacts controller so I can do contacts
with it let's this one called master
controller going off script here so
that's the collection of objects it's
not that interesting we get the
selection that looks like a bug so what
I'm doing is yeah I'm getting so on
that's that's the binding that the
detail controller is taking advantage of
the selection property of the master
controller it's coming back as an array
which it really shouldn't do or if I if
I if the detail with the master
controller was written differently it
would be aware of the fact that it only
ever selecting one object so we could
have it returned a single object if we
wanted to okay so the last thing i want
to show you would be the model that this
is a property which I'll delve into in a
second but there's there's no schema
there's no thinking especially you have
to do to contact except name it and say
what it is this is an example of a
property in stock or so this is like a
special case of kvo it is super common
so there's a helper for it and the idea
here is suppose I have a computed
property it's not something that gets
created when this object is instantiated
is something that you compute by in this
case concatenated to other properties of
the object well by rap by calling the
property helper there at the end you're
telling sprach all right here is a
function that other people can observe
you can register to get notified when
this changes I'm furthermore you should
recompute me like I care about the value
of these two other properties so if
first name or last name change this gets
recomputed automatically so that's what
made the list item there on the far left
work but then let me I'm sort of getting
ahead of myself so what wires all this
up is the body to our HTML file and this
is the thing that is most different at
one point oh and if we have time at the
end i will show you an example of a much
nicer version of this because this
version we use Ruby helpers but in truck
or one point oh it's all JavaScript but
the idea is basically the same you're
not having to write so much HTML in here
you're using these helpers which
generate most of the code for you it's
just that in the next version you won't
have to use Ruby at all and so but the
reason I'm showing this to you is this
is what actually shows the user
something so this is the most
interesting part of the app as far as
I'm concerned so to make that list work
over there I'm taking a prebuilt object
that comes with a framework called a
list view and I'm binding it's the
content comes from the arranged object
property of master controller and you
know we didn't have to arrange the
object is a special way to show the
collection but that's the behavior we
get for free with the framework I didn't
have to define that and this selection
you know we're telling list item alright
we want you to you know highlight put a
little purple bar on on one of the
objects in this collection and you can
find it by getting the the selection
property of the controller so does that
make sense am I going too fast alright
let's see I didn't show you this but we
also have a split view here and this is
one of the things that gets better and
faster because they've rewritten the
view system like three times probably
since this demo was created so this
actually you'll be able to do it more
things
and that's really all you need to do you
know you have to be designed the other
two views carefully but to turn on list
views you basically just that's that's
essentially it not much more to it than
that here's what like an individual
forum item looks like and there's the
binding all right we want the first name
text field to get it's a value will you
bind to the detail controller first name
but you notice I didn't there's no first
name property on the detail controller
right it's the framework is just smart
enough to know okay if I don't have a
property called first name I'm going to
pass it on to my content collection you
know it's kind of like method missing
i'm gonna forward it on until somebody
can answer the mail on that all right
see so what you don't you it comes with
a lot of built-in views that are really
cool but for any you know sophisticated
app like we're all making you end up
having to write a lot of your own views
so this is an example of what a custom
view looks like so if you're not happy
with the way that list items are
displayed by default you can you get
this here so like I like the cut in the
class is set this way I don't like it
the waist bra corsets a class you can do
that okay so let me dive back in here so
that that's KBC kbo that is the thing
that if you don't even if you never
adopt this framework me you should still
bring into whatever it is you are using
because it's really helpful I already
talked about properties so move on from
that ok so now I just want to go off
script I don't have anything I have like
a few more slides where talk about the
build process but I want to just start
showing you more code and like step back
to wire things organized the way they
are I'm going to show you a couple of
those sample apps and then I'm just
going to dive into the other end box
code you know which is as rough and
tumble and nasty as it is it'll give you
the idea of what it's like to make one
of these apps alright so first of all
let's just back up a little bit the
every spark or app has this clients
directory and the clients are roughly
analogous to
like what you would have to do to load a
new page so this is all one application
but the the contacts app I've been
showing you like that requires a
complete page load and it like I can't
just seamlessly switch from one tab to
another to get to the photos demo so for
example you can see up here I've got
contacts in the URL and I got photos
over here so each one those is a
separate client I don't know a cool web
way to communicate that idea but that's
that's it either they both like top
level path routes for your app alright
so okay another thing we wanted ish that
say all these apps at the top level have
this configuration file that controls
the build process and there's all kinds
of things that you can do to tweak it
make it work in your environment when
you build one of these apps it just gets
compiled and assembled and minified into
just a static javascript file static
HTML files and so but you have a lot of
control over how that happens what
prefixes get set they see if there's
this one may not have okay well you can
turn off magnification all kinds of
stuff like that all right but let's so
the most most of the interesting stuff
comes in these app directories so let's
look at well let's look at the at the
contacts app since I've been that's what
we're most comfortable starting out okay
so there's the model-view-controller
folders I've shown you what those are
all about that's pretty self-explanatory
what goes in there this core file so
every sprout corps app has like this is
where all the code that is really
specific to your application should go
so like it's not about them the model
this is all the like me like for example
I use the core object I have a series of
functions that rap Ajax calls and do a
couple things that our server is
expecting to have out you know like
authenticate you things like that so
it's the kind of stuff it's just a good
place to put that kind of utility code
and there's a couple things that that
spark or expects to see there so this is
it you know
need this anymore one point oh so just
pay no attention the man behind the
counter fixtures get loaded in the main
file here so okay so the fixtures object
actually it gets referenced here I'm
pointing like you can see what I'm
pointing at it gets reference here but
they actually get loaded here so all it
is is a JSON of contact so contacts in
this app they have whatever you tell it
you know they have whatever properties
you say they have all right so I showed
you the body dot HTML file this is kind
of what the glues everything together
this is the main main view of your app
any but but I didn't talk about this
folder that it's in English l proj so
the framework supports localization out
of the box and English tell proj is like
the default localized version so
anything that's most of the code usually
most of the view stuff lives in el proj
and you essentially if you create like
spanish el proj you are overriding stuff
that's an english el prox but the
default is english because we love
English you know so like the generator
creates this file for you that you can
start using for localization I haven't
tried to localize other inbox yet so I
don't have a lot to say about that
except i'm really glad is there when I
need it we talked about models and views
it includes the framework includes
support as a testing engine that works
pretty well I haven't used it yet
because I've been so busy just learning
the framework that I haven't gone back
to write the test but I assure you I
plan to do that that this app doesn't
have I'll show you some examples of
tests later but that that should be
familiar anybody's used to JavaScript
testing framework all right so that's
the basic layout of how these apps are
structured does anybody have any
questions about the layout all right I'm
going to keep on driving then so let's
look at a different application let's
look at this Photos app so we got a you
know a collection of folders over here a
collection of photos and this is more
like the app that I've built where it's
it's a more of a deeper object graph
it's like things containing things
containing thing
so let's let's actually model it one of
these objects you know so it's all this
fancy spinning around magical stuff
change this I kind of like this one you
can change the size of things looks like
just these guys aren't playing a long
though anyway so you can drag objects
around drag these photos around make a
new folder okay I don't want this
picture extra should go out my new
untitled folder so there it is awesome
trip etc okay so that that's the basic
idea it's a really a photo organizer
doesn't have a whole lot of editing
capabilities but you know a wet stay
palette whets your appetite so let's
actually look at the code for that so
this is an example of a more sort of
intense at but you're at oh I'm hoping
they point I'm trying to make by showing
you this is it's actually not that much
code and so you could do a get a lot of
behavior all that drag and drop stuff
you're not going to see a lot here to
turn that on that just that just comes
with the framer because it's such a
common proposition all right that stuff
bugs me ok so the album controller it's
bound to whichever you know this you
have a photos master controller I mean
that looks very familiar that's exactly
the same pattern now that we've already
seen so let me close up some of these
windows here okay I things get a little
more interesting in the details
controller right so you have another
content binding that now now we have we
need something we need a property on a
controller that doesn't come define for
us out of the box we need this property
count label which depends on the length
you know the size of the objects in this
collection and which object is selected
so as objects are added to the
collection or as we change different
things we need to recompute count label
so that's the code that recompute sit
well you know you always are using key
value coding even if you're accessing
your own properties and that's all
that's pretty straightforward here this
that slider the resize of things it's
bound to the photo size property of the
deep to the photos detail controller
here so I can show you an example that
so photo yeah so that here's the binding
down here so this is all the code you
need to turn on that slider you give it
the minimum maximum size of the steps
and you say all right I want you to bind
yourself to the photo size property the
detailed controller and that's that's
basically it and then you can have
somewhere else in here we'll find
somebody else who like probably that
whatever the controller is that are the
list of photos somewhere in there there
there binding their photo size Valley
you're asking to be notified of changes
to photo size and so then they resize
them fact why don't I just show you that
see if we can find that so there it's
not there maybe there's somewhere else
in here I don't want to anger the demo
gods too much but somewhere in here I
can show you later the size of those
pictures what the code that's
responsible for drawing the pictures on
the screen as soon as photo size changes
they know to redraw themselves alright
so moving on here then oh so here this
is an example of like one what the
localization well it's not even in
French push on from their main so some
like this app I haven't used the rock or
database feature where if you have html5
like storage capability it will try and
take advantage of that but that's what
some of the setup code here is trying to
do so if I've set my browser up properly
and all things are working here those
changes I make to the photos should
persist it won't use the fixtures it
will actually load the photos out of my
local store just pretty cool okay
no no tests here all right the last
thing I wanted to show you here or some
of the stuff that you do get out of the
box i mean this styling isn't super
amazing but you you're just going to
create your own styling anyway but that
i think that's one of the things that is
on the roadmap to improve later on down
the road but you get buttons different
kinds of buttons checkboxes and it will
try and use like like native cooler
versions of some of this stuff i think
there's something elegant so you'll get
better looking web check boxes if you're
in safari that's showing up there okay
toggle buttons drop-down menus and these
are all things that you get without
having to do all the work of maintaining
these things so we've already seen like
a collection viewable one thing that I'm
really excited about in one point 0 is
these long lists of things there's a lot
of support for incrementally loading
them from the server so up to now or
like I think one of the default answers
if you have a collection of lido
thousands or millions of objects you
would use pagination and get through
them and it just always looked really
crappy nobody has a really good
pagination well the framework will only
load the subset of objects from the
server that you've actually asked for
and you can you can tell it all right
you know I want you to shoot load the
first 100 because I know that's what I'm
showing first and go ahead and start
fetching the next 100 while the users
looking at it but if you start scrolling
around down here it won't go back to the
server to get more like it'll get just
the stuff you're looking at and it will
only draw those lines so the version of
the app that i wrote without the
framework i had you know i would draw
all 10,000 mailbox objects and go back
to the server to get them and it was a
whole big nightmare so i only have a
little bit of time left i want to dive
in to showing you my code which I know
you're obviously a lot better so here's
an example like something that you know
it's putting food on my table okay so
first of all we ended up putting so much
stuff into that application object that
I split it out into these separate files
I'm sure there's a way better way of
doing it I'm not showing you example of
goods
core code I'm just showing you working
sprout core code you know we charge
money for so okay so like honey actually
I think it would be most comfortable
interesting to start with a model object
so some of this stuff i'm showing you
ended up getting written into the
framework so you like even this is more
work than you'd really have to do but oh
I I should I should load up the app I'll
do that in the background so they
basically other inbox we help manage
email overload the only reason I'm
showing you this is just so you
understand the object graph you the user
has a series of folders that will appear
over here each folder has mail boxes in
it each meal box has a bunch of messages
that's the only reason I'm showing it to
you there okay so what I'm showing you
here is what is what is the code to make
one of these folders work okay so the
big deal method in a folder is folders
have this property called mailboxes so
if you have a folder selected the master
controller for that mailbox list is
going to start asking immediately give
me a list of mailboxes back so the key
here is you never want to block anything
because javascript is single threaded so
this whole big chunk of coach needs to
be refactored it's terrible bears to
show to you the whole point of it is it
needs to return something right away so
that whole big chunk of code which will
step through the whole point of it is
fire off an AJAX request in the
background and return something right
away so the first so initially it's
going to return brackets and it like we
have to do some stuff to go behind the
0.9 frameworks back that you don't have
to do but what I want you to remember is
it returns right away so the run loop
keeps going it feels fluid and nice for
the user so all this other stuff is
involved with constructing that that
Ajax request like and you know we have a
folders know whether they're loading or
not so that we don't end up trying to
fire off multiple requests over and over
again I have different behavior if it's
never if this folder has never been
clicked on before
we do it with one kind of request to the
server where we ask for every object
that the user needs to know about words
if this is a differential update like
you've been clicking around and you come
back to the inbox then I only want to
show you you know the things have
changed last time you look that's what
all this helper code here is about and
so like so here's something that might
be familiar to you if you're from coat
the cocoa world since we are doing some
things behind sprout cores back with
this mailboxes value property we're not
using key value coding the reason it's
okay is because we invoke that we
trigger the observers ourselves directly
by saying all right we're about to
change mailboxes do some quick stuff all
right we did change it so then you can
you can recompute this value so this
gets fired this is a non success handler
for that Ajax call so look we fired off
some data we know at some point later
once it gets parson brought back to us
we're going to want to show it so then
the server all the server's responsible
for doing is looking at the last time
you were updated okay you have an inbox
folder that's current as of ten minutes
ago I want to construct a list of
objects to create update or delete that
you need to know about since 10 minutes
ago and you know we we have a lot of
tortured SQL to do that and I'm hoping
you know something like couch TV will
help me make all that easier let's do
four topic alright so i think i have
like less than five minutes so i don't
want to i'm ready for questions yeah
okay it does have unit testing i'll
bring that up while while we're talking
i'll show it to you you know i can't
remember i'll show you later it does i
don't want to mess i'm screwed up i'm
nervous it does it has a unit testing
framework is they're easy to write easy
to run
say things that aren't oh you're right
I'm sorry I do have that I have the
slides to end I totally forgot guide
it's a really steep learning curve right
now that's the number one obstacle to it
I mean it's been rewritten so
drastically like I've been working on
this for a year I feel like I have a lot
to like I would have a hard time
teaching it to I was mentored by one of
the core committer Zarek ocean so it's
only reason I've been able to get this
far that's the number one number two
like the think that binding stuff it is
it's very cool and I'm making it sound
like its root it's not as easy to wrap
your mind around it could be easier to
like there's some there's some constants
involved with setting up bindings that
seem very magical to me that donor stand
and third frankly it's not it's an open
source project but Apple employs a lot
of the people that work on it and so I
mean if there's other projects like
let's just speak in general that's the
that's the situation you were familiar
with in the open source world like we
all we all own it and can for can
contribute to it but like real progress
is somewhat constrained by the agenda of
a large company that's the best interest
I still think it's great I'm gonna use
it everywhere but like you are somewhat
chaining yourself to their star if you
do that is that that sort of suspicious
enough all right cool all right so I'm
getting the wrap up so i do but i do
want to make sure i have to say some
thank yous to eric ocean and charles
jolie charles there there the core
committers they helped me prepare this
and gave me a lot of like good things to
talk about and did you have any
questions you can email me or follow
talk to me on twitter or afterward thank
you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>