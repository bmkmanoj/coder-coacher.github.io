<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[JSConfEU 2010] Robert Nyman: HTML5 APIs - The New Frontier | Coder Coacher - Coaching Coders</title><meta content="[JSConfEU 2010] Robert Nyman: HTML5 APIs - The New Frontier - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[JSConfEU 2010] Robert Nyman: HTML5 APIs - The New Frontier</b></h2><h5 class="post__date">2013-06-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BQmS7mbhO8A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm Robert and usually when I give a
talk I think we need to establish some
kind of connection like you need to know
who I am to trust me with what I'm going
to tell you so let's start with the
first obvious thing yes i know i'm
balding okay no need to tell me no ninja
turtle jokes no nothing i also have a
goatee to try and cover up for it you
know the places were anything actually
still grows some people say there's a
similarity I don't know I'm just you
know dropping it I come from Sweden when
i live in stockholm and you know
everything you heard about Stockholm is
true so is it is the promised land we
love our flags one thing that when you
go down to to Europe and talk about it
people always like to bring up the first
version of euro coin where we you know
we're sort of the genitals of Europe
thank God we're not Finland and and you
know don't even mention Russia so I also
like to be a bit pretentious when I give
talks like the title with the new
frontier it's a quote from from JFK and
it's basically what you know dreams and
hope and future and all that you can
pretty much applied to to everything and
I think that's the way people see html5
now if it's the the savior of the future
of everything and in many people's minds
so what does actually html5 mean to me
what I mean is it just a flash killer
okay let's work that one out it's not a
flash killer flesh it's going to be
around it's just a journalism thing for
for PR that there's no reason just
because there's something new wood has
to kill their own you know people things
can coexist otherwise you wouldn't have
retirement homes right we'll just kill
off people one part
and this is just the way I see it and
then other people might see if another
way sorry one part of the term html5 for
me is semantics about having new HTML
elements try to give richer meaning to
the content and just don't basically
describe but things are it's also and
especially in a conference like this
it's about going crazy with api's
looking all on all the web applications
and things we've been trying to build so
far how can make the easier to make it
smooth or how can we just look at the
things that trouble us every day and you
know try and take that pain away and I
always have this one in my presentations
or almost always and it's about
progressive enhancement sits about not
you know you whining about web browsers
not supporting enough today and then
just you know dump it down to the lowest
level I think you need to start
somewhere serve content to whatever
mobile device forever well less
competent web browser and build on top
of that just use feature detection see
what you can do and just enhance the
experience on from there and talking
about html5 I think video has been the
poster child of html5 and you know it's
it's fine but it's sort them all so I
kind of have a love/hate with this thing
because i like having video elements in
html5 but it's also all the talk about
html5 have been about videos so sort of
yeah I have to cover it but I want to
move on so no but the idea from the
beginning is pretty simple you have a
video element just set the source
attribute when you include a file it's
just in the code it's in the Dom you can
interact with it fantastic now you can
also have controls website the normal
thing but then of course we come back to
where we always been with video we have
the codec Wars things different patterns
and keeping people trying to defend
their territories and such and well we
have one side with the h.264 codec
which is licensed and evil and then we
have open codecs like octorara for video
and if you want to use the video element
and then serve video then you can just
use different source element way in and
and if it doesn't support the first
format will just go on to the next
format and so on till your fallback
content so this would work in most web
browsers today but at the same time you
know it's the web but it's being a
democratic right we don't want to
exclude everyone and since IE so far and
doesn't support the video element in any
web browser we can just you know keep on
building with bulk code so if it doesn't
support any of the first two formats we
can use flash to serve the video instead
and you know I don't have enough room
here but could also check in to plugins
and operating systems and hook into them
and serve video etc and this is firmly
so far we're video sort of fails because
it's even more of a hassle to serve
video with html5 than it is with flash
and then it kind of loses the point we
also have a script interaction with it
and that's nice part about it it's just
stare into page you can have just a
regular properties for its check if this
post if it has ended regular matt is
like play and pause and such there are
only a few methods actually to to
trigger things with the video you can
check the type and loading and poss play
on the other hand there's lots and lots
of properties where you can check what's
actually happening with it and then read
out the properties in detecting it and
Academy o take action depending on the
value of various properties we also have
a number of events for pretty much
anything that can happen when you play a
video and it's getting a bit old now but
BBC did an interesting experiment we're
just having subtitles synced with video
we're just checking where you are in the
video and you can just overlay different
subtitles and skip two sections and such
and also when you have the text there is
just part of the web browser you can
select the text and copy it and exchange
it which is a good thing because then
it's just not in a closed in flash or
Silverlight box is actually just part of
the normal web experience that people
expect also talking about codex with the
can play type you can also check before
you do anything or before you load a
certain type if it supports that codec
then of course you can always throw in a
personal opinion but that's just me and
then have the canvas element which is
most likely a poster child number two
for html5 and basically it's about
having drawing which use to fill style
again and we can start drawing a path
it's sort of like resetting thing with
using begin path and to move to method
here it's basically about lifting the
pen from the paper so to speak and just
put it down in a certain point and start
drawing there and here you sign to to
draw different lines and just fill it
with the fill style color which ends up
in a triangle and I know I mean these
are cutting-edge examples so it's okay
if you don't get it right away we also
have a well move to enlighten we can
combine it with drawing arcs and using
math for different curves and such and
herself would be you know going to MoMA
in New York or something and also if you
come from a designer world you might be
very used to Bezier curves and you also
have that possibility in canvas to
basically control every kind of drawing
and working and curving and put it out
and it could be a bit tricky because you
know at least for me once you think you
got a hang of it
just fill in the numbers and then you
look at actually result and it's not
really what you expected you might lead
to complement it with a illustrator
something else just to learn actually
how curves are being drawn to to know
what to expect and using the zero curves
you could well do something like that's
how it work over the end another thing
and this is probably just part of me
being performace freak well and you know
making things fast if an end user and
cutting down a request and such and one
nice thing about canvas is you can just
take a normal image an image file and
here you just set the source for that
image to a view jpg file and then you
load it into the canvas and the nice
thing there's when you have it in canvas
you can start manipulating it any way
you want to so here for instance you can
take that image file within the canvas
and just extract it as base64 so you can
just have a code description of the
image and make it possible for you to
download the image or you know draw
something on the page and download the
resulting on the drawing and such so
using a to date that URL method here
would result in you know some code you
know being a geek the more code better
right and well as usual Internet
Explorer doesn't support the canvas
element and to be very proud Swedish era
a Swedish guy started developing the
explorer canvas project which is
basically about using vml and not the
poor thing we have it walked and things
and cell phone but vector markup
language which is what Microsoft has
been using in office products and
internet explorer since way way back to
describe vectors so what it did was
looking at the canvas code and just
tried to present that in vector code for
microsoft as well so what you can do
with this library is you can just write
canvas code insert this library and
we'll just interpret your co
and make it work in IE for you know
sheer magic not the most advanced things
in canvas but you can you know get to a
pretty decent level using this and you
can reach every kind of web browser then
and with canvas of course there are
people doing lots of nice things like
implementing mario kart with it and if
you have a laptop with an accelerometer
you can just you know turn the car by
tilting it and such this also will
fairly new someone to do the video
blowout thing with canvas which is
basically just click on the video and it
takes different direct angles and just
draws them out and then they creep back
into the video and you can have small
mini explosions some interesting code
look at and also you know gaming just
add some good graphics and some good
interactions and then it's pretty nice
another thing especially since i guess
everyone who saw ban indian and a few
years ago when they were working for
mozilla and they started out with the
best print project which is a good
example of using canvas just not for you
know gaming and drawing but what he
implemented a well fairly complete
editor within the web browser using the
canvas element which was really exciting
and also to see how fast they could make
it with text handling and such and now
Bespin has been shaking name to sky
writer but for me it's always been you
know the true star wars name and we need
to respect that on the other hand we
have SVG which is scalable vector
graphics and the good thing about
vectors of course you can scale them any
way you want to so just looking at some
basic vector code here you have an SVG
element here and thus normally set the
dimensions and version here and then you
draw a little circle and you set the
position of the circle what kind of
stroke color and then fill color and
such and it will look like that
fantastic you can also take that G code
and break it out into its own file and
you need to use the XML prologue here
and just specified that it's not going
to be standalone you're going to include
it put in the page and then you can have
the same SVG code and just well insert
it into a page you can also script all
of that instead of havoc in SVG code and
that basically means using the crate
element NS method to create a new name
space for that element and the same way
you set the different attributes and the
position and it would result in the same
code we saw in the previous slide
another option is using the rough L
JavaScript library which is a very
tricky invention and sort of in line
with Explorer countless before that it
uses SVG in those web browsers that
support it and it falls back to vml for
internet explorer and using Rafael
there's not that much code anymore I'm
not gonna say any stupid code like
jQuery for refugee or something but you
know you get a rift you cut out all of
them headaches and just have the focus
on the things you want to do and where
we are today with with SVG is actually a
pretty good place if you serve a web
page with a mime type for XHTML or for
XML you can just have the SVG code in
line because it's true xml otherwise you
can bend it in the page like I mentioned
having the code in a separate file so
you can use the embed element or I frame
or object element and just reference
that file and will be rendered during
the page you can use JavaScript approach
or you can use the ruffle approach to
insert it however you can't use it in
regular HTML pages because it's regarded
as XML and it just won't be rendered so
where we go in tomorrow of course and
then where most web browsers are now is
having a just in line just having it as
normal HTML elements you know no matter
if you're going to go with
smell or not you can just use it as
regular code and in the next version of
Firefox and coming in chrome and ie 9
it's just going to work I'm not really
sure about Safari because might be that
Apple don't tell everything they do and
I think it's going to happen our prop
but it's not set yet and after that that
I don't really know but I really think
that she is going to be a huge part of
the future of doing with your web pages
and then of course coming back to the 0
is this a flash killer thing it's also
about oh I want to use canvas for
everything because now I learned it I
want to use SVG for everything and you
know it's always trying to pick a fight
instead of just using what's suitable
for what you want to do so the thing is
you know don't worry they can coexist as
well we can just be friends about it and
and the actual difference is that they
do complement each other in a very good
way that you know vector has its rings
and you can scale it and all that
whereas canvas is it's just bitmaps and
drawn pixels so I think from my
experience that SVG has been very good
for different kinds of interactions and
drawing shapes and maps and such whereas
canvas is it's very fast and you can do
really nice and good animations with it
the upside though of using SVG is that
you have actual Dom elements in the page
like you can attach events to a certain
part of the vectors in canvas is just
you know just a bunch of scribbled on
the paper you can't really just extract
the pixel and tell what's going to
happen for that pixel and you know if
you're into SEO and being number one on
google and deny thing is that google
officially stated that they do index the
content within the sut code as well
which of course is a very very good
thing and the new location is one of
those things that it's not part of the
well one of the actual HTML 5 specs sort
of a sister spec for me it doesn't
really matter for me is more like
there's a bunch of specs with new
interesting things happening and you
know one day they might be in the
official spec one day might be in a
separate spec you know it's more about
bringing hope and showing your new
things than what spec it belongs to and
of course with your location the nice
thing is just on the Navigator object in
the web browser you can use a few
methods like get current position and
just get the latitude and longitude for
where that user are of course you have
to approve that you find out where they
are at least for now maybe not in ten
years Wilson you order well it goes and
if you go to google maps with a web
browser that supports give allocation
you'll just get a little extra dot up
there and you click it they will just
find out where you are and mark it out
on the map and you can just build on
that and then use well some of the
latest Google api's to to you know you
have directions and it will mattify
before you can have it in your own as
well and just you know find out what
user is like if you build a web page for
a company and you know find your way
from where you are right now to the
museum or whatever you can easily find
that out and then we look at at storage
on the web and so far it'd be sort of
limited like we've had cookies and as
you all might know when you have cookies
you go crazy with koukash and you get
some kind of sugar overload and you
don't really think clearly and and to be
honest you know where we are now cookies
cookies suck cookies aren't that good
for most things we want to do I'm sure
dis boy asked got proud parents and so
what we want to do instead is using
local and session storage and session
storage is basically about your web
browsing session now when you close your
web browser it's gone so you have a
session storage all back with various
methods like set item and get the item
here and it'll just be stored ER and the
good thing of course is that you have
and in the web browser but you usually
have at least five megabytes of storage
capacity whereas you had about what two
three four kilobytes with cookies and
with local storage is just the same
thing the same syntax but the different
with local stores is that it would be
saved across sessions now until the user
clears the cache or similar approaches
and of course it's just being text-based
so you want to save objects or something
in a JSON format or similar and the good
thing about that and especially with
having Douglas in the rumor today with
bringing Jace into the world or at least
have been getting attention to it is
that within web browsers now I think
most media web browsers we have a native
JSON object it has two very important
methods we have string if I and has
parse and the first line here with
setting the item here is just to take a
JSON object and turn it into a string
and save it into the storage and when
you want to read it out you just forced
into an object again and you can work
with it like a normal object and this is
course mates the storing a lot richer
there's also two different paths of a
sort of richer storage than that on the
web and one has been the web SQL and 11
indexdb and I thought told me clear
where it's going right now but it seems
like well internet explorer and mozilla
at least won't be doing the web SQL
saying so it at least I get the feeling
that is sort of ending like it could be
used for certain topics but but not all
over and it's roger singh that index DB
is coming very strong and Firefox and I
meant that Microsoft has expressed
interest in implementing it I think
Google are going there as well so i will
probably put my money on index TV today
tomorrow I might have a different
opinion but we also have post message
and it's more of a lightweight protocol
nice so I'll do some quick thing sir
that's what you get for not being
prepared so I can address the situation
fantastic communicating between frames
so for instance if you have an iframe in
your content document you can just
reference that but I d dot content
window and then you can post a message
into that window so the first part of
the method post message here is you know
what you want to sound and the other one
is what domain are you sending it from
and receiving that within that I frame
is a little bulb code at the end there
but just you have a on message event and
when you receive or when the postmessage
method is being called you can check on
the event object you know what was the
eridian of the message and what was the
date of the message you can make sure
that it's from your domain or from an
allow domain and take different actions
depending on on that we also have a web
workers and and the thing about web
browser is that they're single threaded
we can't really do things in parallel so
the good thing about web workers that if
you have some advanced code that's going
to slow the interface down like you know
usually you have a you get a large box
in the web browser saying that the the
web page is unresponsive and do you want
to stop the script etc with web workers
you can sort of just push it out into a
single thread and just keep some working
there where the web page keeps on acting
as normal so it just starts by creating
a worker object we're going to work or
jas file and then
just a solid post message you can post a
message rhythm with a value into the
worker JS file and then you also have
methods to receive when it calls back
when it has completed what it's going to
do like on message and if an error
occurs so if we look here I send in just
a number five here to the worker in the
working jas file and in that file they
also have a non message event and it
gets the value in like number five and
you just keeps on looping here and for
each iteration of loop we just post the
value back so you can just see it
counting up from zero to a million
without hanging the web browser another
thing of course it's working offline
especially because if my own sake when
you go to conferences and airports and
all that you just want to keep on doing
what you want to do and the good thing
about offline web application is that
first of all as a web developer you can
detect if the user is online and it sort
of works and to give credit internet
explorer works the best here because in
IE well one thing you can use work
offline in the menu who can also just
pull the ethernet cable or turn off
Wi-Fi and such and they'll throw an
event I don't I haven't seen any other
web browser actually do that you know
might do some polling and take it later
on but not when it actually happens so
they need to know if the user is is
online you can also if you want to cover
up with with polling and check an online
property of the navigator object but you
know polling isn't really nice if you
can get around that that's that's the
best way and the the first step to make
an application offline is to use a
manifest attribute an HTML element we're
just point a manifest file that is going
to describe what resources do you want
to keep offline from this web page or
website and within them manifest we
first is declared that it is a manifest
file and there's a
cashing things so when your updated you
want to include a comment with a version
number or something just to sort of push
out the new version otherwise web
browser won't check for a later version
of that file and below the cache
attribute here you specify which files
they want to keep offline and if you
don't have connectivity do you want to
fall back files like for instance you
have the online success worse and
offline can be offline CSS here you can
also declare with the network here that
some paths or some pages you have to be
online like if you're not online you
can't access them so even then the user
will be notified about that file API is
also pretty interesting to be able to
upload files and work with multiple
files the way we always wanted to do it
and it starts with having a regular
input element for a file and you know
what it's like you normally can't style
them you can't really detect so much for
them but now we have a multiple
attribute for it that just declares that
will accept any number of files at the
same time for uploading and if you have
that file element here we just attach
the unchanged event and it has a files
property you can iterate over that these
are all the files that you're trying to
upload right now and for each file you
can read out the name of the file the
size of the file and the type
and to combine that we also have drag
and drop and I'm mature if anyone
follows Peter Paul Cox blogging about it
but he hates it with a strong strong
passion and I can understand him
defeating with dragon drop is that
something Microsoft did a long long time
ago and it was sort of reverse
engineered and then implemented in all
web browsers I'm not really sure where
it goes right now is going to stick
around the race if we will try and
complement it with new things but
looking at the code you can just have a
normal HTML element here and for that
element you have a few events like the
drag enter when you drag something over
that thing and or actually when it
enters the element and when you're over
that element and now what you want to do
when you actually drop something on it
and then you have only a round object
you have data transferring can for
instance read out the files so a little
too much colder we're just looking at
the example before with the multiple
file feel you can just attach to all the
drag and drop events and from outside
the web browser you can drag it into
that field to drop it and just start
uploading and just going through all the
files there you can just check the names
to buy etc and it was a good way to be
able to block a certain type directly at
the client but still allow lots of other
files and if you look at something like
Gmail and while most Ajax type
applications where you update certain
parts of the page a big problem has been
of course that you want to update the
URL bar as well and has been working
updating you know using a hash character
and some values and in some web browsers
no names back and forward hasn't really
been working and then you try to go
through an iframe to fake it and such
and that's where the history API steps
in and the idea there is basically just
have on the history object in the web
browser you have a push state method and
the first part here is an object you
just push in you know what's the address
you want to use what's the title of that
and and what's the actual URL to
navigate to you can also use replace
state so instead of just going back and
forth there and you can just you know
ignore what's there right now and
replace it with a new state and for me
at least I mean one of the most exciting
things and it's going to grow enormously
its web sockets and with WebSockets in
html5 I'm sorry where we had it before
was with with Ajax and then you know
doing some things just you know polling
and different and then we tried to
compliment them by using comments and
having long polling to be able to push
something from the server instead of
just doing lookups to the server all the
time and they also some cases we can use
flash to have the same kind of approach
and the idea for WebSockets is to just
step up there you create the WebSocket
object and then you have an open
connection to the server and you can
just communicate you know whatever way
you want to you can push things to the
server but it can also be completely
idle and the server can push out content
you know when it happens anything new or
an update your an article you reading or
similar and when you have that WebSocket
us with you know most of the names in
the html5 api's you have the message
event when it receives a message when
you open a connection when you close the
connection and substance it's very easy
to track it's very easy to code and I
really think it's going to be a
revolution for pushing things instead of
just you know doing damage to the server
all the time and where we are right now
a few web browsers have implemented it
and most seem to be going that way there
are a few JavaScript libraries like
WebSocket ES and socket i/o
where you have a first do detection for
web socks support and then it falls back
with other parts just to make it work in
every web browser so you can start using
it right away today and talking about 3d
contact before is about bringing
three-dimensional things to the web how
do we code it directly into the web
browser no plugins and nothing and
google has some interesting experiments
probably way more than these which just
shows how much you can do with WebGL and
having different textures and
perspectives and such and quite
interesting things it does depend on the
power of your computer though because
you know it's a very good way to make
the fan go crazy and then to burn your
knee but you know we're getting there I
think we're getting that the possibility
to do it there is also a porting of
quake a few months ago and actually
doing a quake game this approach i'm not
going to specifically mention my
personal opinions about GWT but if you
can do quake with it that's fine and i
think the latest wonder get a lot of
attention was the wilderness downtown
which is basically a mix of most
technology have been talking about today
to use some canvas thomas fiji some 3d
canvas for the different rotating things
one thing that was bit interesting their
ways that they pop up a lot of windows
so i know a system developer at at work
ask me you know okay so what's actually
html5 is about synchronized windows so
what you know what's the deal but anyway
it is a very nice thing and it's a
perfect showcase of what you can do you
know you don't have to do with like that
but it's a possibility and then when we
talk about web browser support of course
web browsers the whole point of web
browsers is to render web page
and to do their thing but that's their
sole purpose in existence and what we
had before is if you have a sole purpose
and you fail with it it you know there's
not really any good way to go from there
but actually what's happening lately
it's that we're becoming happy beavers
and the good thing about that is that
the web browsers now they're getting
there and if they're not there to
getting their very fast and that
includes the company from redmond as
well looking at the things in ie9
compare I 92 I a then it's a vast
difference iodine has lots of nice
things and lots of good hardware
acceleration for canvas and SVG and such
there are a few of these AP is that
aren't supported there yet you know
they're still lagging a bit behind but
there at least they're much much closer
than before and it's it's really
encouraging to see that they're putting
the money and an effort into that and of
course you know I want you to use all
these new API and go crazy but you know
when you go out and the real well
someone has to look at the seams you
code as well so so you know don't go
overboard try to see justice within is
this okay or is it too much my slice
will be available for download if I get
a good connection later from that URL
it's sort of mandatory to follow me at
twitter you don't have to like me I just
need followers okay otherwise all the
other speakers just mock me and it's not
a nice thing and well thank you for
having me and take care of each other
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>