<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Opher Vishnia: Web Animation: from Disney to SASS | JSConf Budapest 2017 | Coder Coacher - Coaching Coders</title><meta content="Opher Vishnia: Web Animation: from Disney to SASS | JSConf Budapest 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Opher Vishnia: Web Animation: from Disney to SASS | JSConf Budapest 2017</b></h2><h5 class="post__date">2017-12-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/d3SP_wi23i0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Hey okay so I want to start by telling
you a story about three and a half years
ago me and my wife decided to adopt a
puppy
this is Blizzard and you know as time
went by lizard grew larger fluffier
larger still even larger and then winter
came became horrible that roof and I'm
going to show you a video of blizzard
this is a very active and fun dog he
like runs around like a devil jumping on
stuff going here going there and in this
video I'm going to show you I want you
to look at his ears as he's jumping and
if you can kind of figure out what goes
on with his ears then you understand
everything that I have to tell you about
today so uh you guys ready you don't
know you maybe you haven't had your
coffee but like need you to be with me
you guys ready okay we'll work on that
okay
awesome so thank you very much it's fine
my name is offer I'm creative developer
of the company called echo where I work
on interactive videos
what are interactive videos so remember
as kids you had books where you'd really
need to say if you want to save the
princess go to page 91 and if you want
to chill out and have some beer go to
page 80 so that's the exact same thing
only on the web with video and an
interesting tidbit is that my name is in
Hebrew in Hebrew most names have an
actual meaning to them so offer is a
young deer or a fawn or Bambi if you
will and I'm not here to talk about
Bambi but I do want to talk about a
different Disney movie one that came out
in 1994 do you know which one that is
and he guessed right so that's true
that's the Lion King and the ranking is
a very special movie for me because it
was the first time I looked at one of
these amazing amazing animation movies
and realized that there's something more
going on here I mean there's so much
more than the story there is some magic
in this in this movie The Lion King
tells a story of a young lion Simba who
gets this in French right for from his
pride and by his evil uncle Jafar or
something and then comes back to take
his place that doesn't matter
The Lion King was a really good movie
but it wasn't perfect and it wasn't this
mean his most original movie either but
there was just something so special
about this movie at least for me because
this was the first time I saw I saw
scenes like this and I thought well
these are in fact just moving pictures
these are drawings people made and it
they convey so much emotion and I wanted
to realize I wanted to understand how
come we're looking at this and we have
so much feels in us
so you know I grew up I read about it
and I came across this book the illusion
of life by Frank Thomas and Ollie
Johnston we came which came out in 1981
these guys are two of Disney's master
animators from the Golden Age and in
this book they lay out 12 principles of
classical animations these principles
include squash and stretch and
dissipations
arcs actions timings exaggerations we're
not going to go through all of them
because that would take like an entire
curriculum of classical animation
studies but I want to focus on one in
particular and that is follow through
and overlapping action so what exactly
is follow through and overlapping action
so take a look at this character for
example and it's Cape and seeing how the
character and the Kate interact let's
zoom in a bit further have a look at
this carrot you see how there's the
carrot body and there is the leaf an
extension of the body and the leaf
starts moving before the carrot and ends
moving after the carrot it's like a
really simple thing with a very powerful
thing let's break it apart even further
fall through as the act of the leaf
starting before and ending after the
moving of the main body of the carrot
overlying overlapping action is a offset
between the direction of the leaf and
the direction of the carrot body and the
two of these actually define different
aspect of the same thing so this also
gives a lot of life to an animation so
you can take a look at this animation
it's really nice but it kind of feels
weird in robotic and if you add
overlapping action suddenly this thing
feels much more alive
it also allows you to define the type of
material or or different feel something
has and this is see the same same exact
drawing with the same
timing but only this overlapping action
then fall through makes it makes the
material appear different so let me show
you some more examples from a show I'm
not going to name this is an Israeli
animator by name's Aaron Mendel who does
did these for each and every episodes
like little tidbits really cool stuff
this one is super cool I like take a
look at the little strand of hair as the
Hound chops off heads and the log is how
it just continues moving past be
animation or this one because it has a
dog and who can forget the season finale
and I'm sorry if I'm spoiling anyone but
like the date has been due so the
amazing season feel and finality that we
just had a couple of months ago okay so
you might ask okay this is super cool
but like where the J's conf and what why
am I talking about
these sorts of things so this is very
applicable to what we do as developers
as web developers take a look at this
example from code drops I'm going to
open up this dialog and see how it
whizzes past as it flies in and flies
out from the from the screen just by
animating the borders of this of this
window or this example where you have
modal and if you drag and stop dragging
then you have this really nice staggered
motion which you know gives a lot of
character to simple really simple things
but more like a modal it conveys a
motion and give some levity to the whole
thing okay so you can trust me but you
know Google says the same thing this is
from Google's material design page and
they say okay if you have an app then
you need to show some elements at the
same time for 2d users don't have them
all appear exactly at the same time
because that's really this
anything for the user instead have them
peer one after the other in a staggered
map instead staggered matter again
overlapping overlapping each other and
staggering okay this is another example
where they show you how to have elements
view one after the other or how about
this one where they animate a card by
showing first the image moving and then
the tenènte icon and then the text this
is something I made at work
it's a little spinner thing that user
sees before the video actual actually
loads which uses the same principle it's
a simple animation it's just like three
circles moving sounds like not a big
deal right
and in a sense it isn't but there is
some trick to the implementation it's
not as straightforward as you might
think and I'll show you how to implement
this in various in a bit in a few
different ways but first like let's take
inventory of what are you going to do so
we have four circles y 4 and not 3
because one always exit stage right and
one enters stage left and there's a
total iteration time which is how much
time the entire looping animation takes
that's one second there is a circle
movement time how much time does each
circle take to move that's 0.5 seconds
and there is the stagger time which is
how much time does each circle wait
before the last circle move that's point
15 seconds okay these are the specs for
our animation and I'm going to show
three different options on how to
implement them these are not the only
options but these are the options that I
oftentimes use the first one is
classical CSS you just do the CSS the
second one is with a green sock or G SAP
JavaScript animation library and the
third one it's kinda a new contender to
the game it's the web animation API or
wrappi which is a new API currently
being implemented in modern browsers
wacky doesn't really have a cool logo at
least not that I found but to me it kind
of
sounds like the sound this meme would
make so uh there I made a logo cool so
let's start with CSS and just to start
off let's talk about a little bit of the
pros is that CSS has good animation good
performance for the animation if you're
using the proper performance properties
and anna is going to be hopefully
talking about that later so do check out
her talk and also it is fine using only
CSS so you can kind of separate your
logic from your animation if you will
but it isn't perfect because nothing is
so CSS is kind of a has a limited
feature set in what you can achieve with
it and if you have to make complex
animations ones that we lie on each
other and synchronize and all sorts of
things it gets really difficult and you
can't do the dynamic animations so
dynamic animations are ones where you
want to do physics for example where a
ball jumps differently depending on how
you move the mouse or something like
that so that will be much harder to
achieve with CSS it's really hard to
debug the tools are getting better but
you can't kind of like scrub the time
like you would in the back of the good
old flash days cool so just a really
quick short recap on CSS animations so
essentially you have a keyframe which is
this thing here which defines several
frames and their percentage so it's 0%
we move by nothing at 25% we move by 100
pixels and at 100% we move by 400 pixels
then we apply it to the span which is
just like the only thing that we have
here with the animation property give it
the name move then number of seconds the
amount of time that the innovation is
going to take and whether it's going to
repeat how many times or infinitely in
this case and so you see this
little circle moving cool so let's
implement our circles let's first do it
without any staggering motion so I'm not
going to go through this just to show
you there's a keyframe here and you
translate it from zero to sixty pixels
that's it okay so let's make the
staggering effect add animation delay a
CSS property which delays the animation
and as you'd expect cool so kind of same
thing only this time for the first
circle I give it the animation until I
have zero the second line this point 15
the third one is point six five so on so
forth let's see how that works and yeah
that's not what we wanted so what just
happened essentially a mission delay
only delays the first run iteration of
every animation it doesn't delay every
time the animation repeats which is kind
of annoying and leads to this thing
where if you take a look at the at how
the animation flows the first circle
started then the third but before the
second finished the fourth started as
well and that's like not what we wanted
at all so this is what we want we want
the fourth one to start then the third
then second then the first and then the
whole thing repeats after one second so
let's take a look at how this animation
would look like what are the key frames
that we know about so two of them will
really simple at 0% which is here you
don't move the thing so you don't move
it and at 100% you want it to be at the
end of the animation
so that's 60 pixels that's this one here
what about these two the one here and
the one here so we don't know the the
percent is yet once we know that this is
the actual animation so it moves from 0
to 60
so let's hopefully
now whether we're much more awake we can
do some math it's not a lot of math I
promise
but let's use math to figure out the
transition so zero percent is zero
second we know that 100% is in one
second
we know that this one letter here means
that we want to start at a delay what is
the delay twice because there were two
circles before so that's point 15 5
point 3 divided by 1 times 100 you get
30% this one is the exact same thing I
mean we add the animation time which was
point 5 and now we have 0.3 plus point 5
divided by 180 yay okay we know the
exact exactly where to put our keyframes
how do we implement this well we can
leverage the power of SAS because we
need a different animation for each
different circles so stats allows us to
do this quite concisely okay I said
concisely so let's take a look at the
first the the first and the only mixin
that we need which is exactly what I
just said but implemented in code so you
have a mixin that takes the circle
number the animation time the total time
and the delay amount and does the same
keyframes that we just saw one for zero
percent one for the percentage the
calculated percentage for the frames one
for 100% and one for the calculated
percentage for the third frame okay and
then how do you use this you just make a
for loop with SAS and for each circle
you use this mixin to create an
animation the animation proper animation
for the circle and you apply it like we
saw earlier by the way this code is
gonna be up later if you want to take a
look at as a reference blah blah blah we
have our animations and it kind of looks
a bit like this so yeah we have our
animation with with CSS and sass
do note that this creates a whole lot of
CSS cues you have to create four
different animations for each of these
circles and if you had 20 they need the
20 animations which is kind of know a
lot more than you'd want but I've used
this animation for loading so it makes
sense to have just something ready and
so you don't need to load the library to
show the users something so that he can
load while he loads cool so that was a
bit to take in how many people work from
home sometimes okay yeah so we have a
few I can't do that because of this you
try to concentrate with that thing
staring at you anyhow let's move on
green sock is a JavaScript library for
animations and let's take a little break
down a bit about the pros and cons of
green sock so first it has a really
great robust API so you can do quite a
lot with it every conceivable type of
animation that gets complex the API
allows you to do it allows you to do
dynamic animations like I said earlier
if you need something that changes
dynamically or that has uses physics or
something like that you can hook into a
green sock and use that and in handles
browser inconsistencies so this is
especially true in cases where you work
with SVG's and SVG is notorious
notoriously differently implemented
across different browsers so greens are
kind of unifies that but nothing is
perfect like I said earlier you know
it's a Java library so you need to load
that JavaScript features extra bandwidth
parsing time it's not a big library but
still JavaScript as you might have
already come across that is
implementation sensitive so if you have
stuff running on your main thread which
locks up the main thread maybe you're
doing complex calculation or analytics
goals
that takes too long for some reason or
something like that that would halt the
execution and make the animation jacket
so you need to be sure that your
JavaScript execution is as optimal as
possible so that the animations
themselves don't stagger or Jakob and
lastly some advanced feature of this
library cost money which is not
necessarily a bad thing because I guess
the amazing team behind it do need to
feed themselves somehow so like I'm all
up for giving them money but I'm not one
of them so it's not like Philly or
something and how do you do the same
thing with green sock that's it so let's
take a look at how this thing works
in green sock we have something called a
timeline which is if you ever work with
flash is kind of like the same concept
where you post animations on stream of
events called the timeline and so we
create a new timeline called timeline
Max and we make it repeat minus 1 which
means repeat this animation exactly not
one time actually means repeated
infinitely and we specify repeatedly
that means after the animation is done
wait a bit and then repeat it and then
we use this we use this stagger from two
handy function call which essentially
means take a bunch of elements spans in
this case these are these are the spans
that I'm talking about and stagger each
and every one of them so stagger animate
them one after the other this is the
duration of the staggered we saw earlier
0.5 seconds and the start the from
second is from 0 pixels to 60 pixels and
then the stagger time is the amount of
time again that you wait between
and then you have it like with few lines
of code which is pretty cool okay but we
can do more so I talked about doing
dynamic animations how does that work
let's have an example how come my errors
was so large okay
so in this example I have the exact same
animation only now I can click on it and
it reverses me animation and this is one
of the strengths of dynamic animations
you can once you have a timeline you can
hook into the API of that timeline to
control it so you kind of scrub through
the timeline the same way you would
scrub through a song or something like
that
you just take the animation start
playing with it and that's that pretty
cool okay huapi I'm just like I have so
much fun saying that even though so YP
is an animation API that's currently
implemented in Firefox Chrome and if I
remember correctly but not fully you
have to look at the table to see what
you thought because it's constantly
changes and the idea behind it is that
as developer you can hook into the
JavaScript into the CSS rendering engine
that you have when you do CSS animations
but you hook into them using javascript
so instead of animating using javascript
you just set up the animation using
javascript and then the browser takes
care of the animation as it would have
if you would implement it in CSS button
and dynamically what did I just say okay
so here is the same exactly mation but
this time it's implemented in in wacky
so
not going to go through each of the
lines but essentially the same
calculation that we saw for the CSS is
applied here you calculate the offset of
each frame using the same calculation
and give it the same property that you
would and for each of the circles you
use the wacky function animate to tell
it okay this is the animation that you
want to make so instead of having to now
specify in CSS for different animations
and loading them you specify them in
runtime and have the browser take care
of them so it's kind of like a mix
between having an all-out JavaScript
library do do the thing and in all CSS
animation in doing it's kind of like
taking some of both worlds to create
this new thing okay so by now you must
be asking great I just showed you three
ways of doing the exact same thing which
one should you use and the answer like
with any other of these type of things
that you ask yourself when you're doing
development for the web is it depends
simply because the by the way this this
is a amazing code penned by yeah but by
a Rachel Smith which just I love ok
anyhow why should you use one over the
other it really depends on your use case
so like I said earlier in my news case I
did the loading animation so you don't
when are you doing loading animations
you don't want to users to load and
other things just so you can see the
loading animation but if you have
complex load like animations that you
need to synchronize with one another and
the unit they need to start at a certain
point or start at a certain time or stop
or maybe you have an animation where it
happens on a mouse over something starts
to happen but then on a mass huh mass
out something else needs to happen it's
really really difficult to do this with
with CSS it's easier to do them with
JavaScript but maybe there's a way to do
the with webby as well so it's really
not a one solution for everything
instead it's best if you kind of know
the method
that you have like the tools your
disposal like the ones I just showed you
and use the ones appropriately okay if
you need want to read more about this in
not a talk form but an article form I
wrote an article CSS tricks called
repeatable staggered animation three
ways jiseop and web animation API catchy
I know but it has all the or at least
most of the information that you just
saw and you can kind of dive deep into
it into both the calculations and
different options that you might have
and there's some good discussion in the
comments there on different
implementation methods so thank you so
much both for me and from Glaser
and before you go out to fetch your
coffee I have one tiny small request
from you and that is my wife is left
home taking care of lizard and I want to
show her that it was worth it for me to
go here so I'm gonna take a selfie with
you
can we have the house lights please yes
no yes no yes no please okay I'll do it
just prepare myself for these selfie
pose this is by the way kind of like the
normal size of lizard yay okay now you
need to look happy lucky like you
enjoyed the talk thank you so much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>