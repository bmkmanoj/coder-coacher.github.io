<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JSConf 2015   Peter Piekarczyk | Coder Coacher - Coaching Coders</title><meta content="JSConf 2015   Peter Piekarczyk - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JSConf 2015   Peter Piekarczyk</b></h2><h5 class="post__date">2015-09-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/X7njm67K6QA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it was really exciting this is not only
my first time speaking it's my first
conference ever so I don't think I've
been in front of a larger the largest
group I've been in front of his like
stand up for the last ten years so
anyway my name is Peter pacar chick I'm
a UI engineer at trunk club if I could
go to the next slide I would oh there we
go okay the UI engineer at trunk club
and he haven't heard of us we can
actually was stylist they'll talk to you
about what you're looking for and what
your kind of look is and then we'll send
you a whole trunk full of clothing you
keep what you like and you return what
you don't like no subscription fees easy
as that cool part is we build all our
internal tools from the ground up
everything from our catalogue the
warehouse to all of our internal tools
it's great and it's cool working with
physical products too so we're located
in chicago and if you're ever around
feel free to stop by we're very nice
people all right getting started so how
many people here use or have used
backbone in production oh great nice now
how many of you have wanted to use react
for one reason or another but haven't
had the time or resources to get started
there's always a p.m. or someone family
member that like no you can't work after
work yeah okay go home right there's
always something that comes up that
stops us from doing that and we can't
just like flip things over one day write
those things just don't happen a lot of
what you see here will be coffee script
or sort of pseudo CoffeeScript because
that's what we've been using but
otherwise i'd recommend Babel which
comes with es6 and j sx right out of the
box it's freaking fantastic so let's
start with trunk club past and present
we have the stack called brunch with
panache a modular approach to building
web apps with brunch this was created by
someone at your own club named josh
named josh abdus and it's been fantastic
more or less its backbone Chaplin jquery
brunch and coffee script for those of
you that haven't heard of chaplain or
brunch it's very similar to
marionette it offers controllers
automatic memory management rails like
routes and custom routers common JSN AMD
support all those cool things that we've
always wanted as front-end developers it
was like the dream framework for the
longest time brunch is more or less
similar to gulp inria our gulp and grunt
it's a build tool it takes care of all
the minification and the stuff that we
don't really worry about anymore that
used to be a big deal right chaplain
also comes with a mediator which is our
pub sub communication between apps so
it's great for like moving member data
around for example we like to automate
all of our process redundancies the
philosophy is onion apps peel back the
layers as you need to let's avoid
complexity let's fatter let's follow
patterns and scale and it's what led us
build great apps really really quickly
so here we go humble SOA trunk club
beginnings we had a service-oriented
architecture and two of these bwp apps
simple API calls only a few services not
much to go wrong it was fun those were
great days but as you can imagine things
change very very quickly the company
starts growing so did the business
requirements and we kept building and
building and building we had more single
page apps we had more api's and we had
more dependencies we were making API
excuse me we're making API calls to
numerous services and stuff started
getting hectic we want to improve that
member experience we built wardrobes
recommendations a whole freakin
warehouse that all work together in one
way shape or form the technology behind
it is great and it worked great for a
long time until it stopped working that
great and that's when that's when we had
some issues we need to take care of we
have a fantastic group of engineers but
as a uit we wanted to try to solve those
issues on our own so what was happening
we were making numerous API calls and
doing a lot of hydration client-side and
it worked but the thing is we were doing
a lot of useless rerun during we
increased load times and we had like the
craziest flame chart spikes like we
needed to fix that as engineers we
didn't like that stuff and then from the
business side to our users were
complaining or stylists same with our
leadership and we were dedicating a lot
of time for render ordered debugging and
optimizations and it was great it was
fun but we wanted to spend less time
debugging and more time building cool
software like we all do patches weren't
really doing the trick anymore so what
could we do react to the rescue
replacing backbone views with react
instant gratification I'm sure most of
you know what react is by now but just
as a quick recap reusable encapsulated
components it's got a fantastic dipping
algorithm that rear enders only what it
needs to rerender which it which is what
makes it so fast we love the deck load
of style that makes it easy to focus on
the app itself rather than coming up
with like nitty-gritty solutions to
making things work we just say hey react
we're going to give you some data render
it you know we're not going to tell it
how to do it and there was less mental
overhead with bringing in templates and
views together I know I know it's hard
thinking about putting those two things
together but trust me the world is great
after a couple of components you guys
will never go back and most importantly
for the first time ever our backends
were much more comfortable with working
with our code video BP was fantastic
from a UI perspective it did everything
we wanted it to do but our backends
didn't want to work with this or that
and it's not because they didn't want to
it's because it did get confusing you've
had to invest a lot of time up front to
understand how the framework works for
it to be effective right with react we
were able to move a lot of that stuff
over to the back ends and let them work
on their apps as well without really
interfering with the UI with the UI team
so we're like more the experts they
would come to if they need help
otherwise they're building great stuff
on their own too we started with a
simple drop down and now we're up to
about 80 components in each of our apps
and everything keeps growing our
components aren't
sarily huge but for the ones that are
and have a ton of internal state react
makes it much easier to manage and
that's just like less headaches so here
we are I don't know how well you can see
that but this is everything this is the
view in the template combined it might
look a little crazy but you have to
remember it's not HTML it's jsx which is
JavaScript and everything just made
sense so in this case I might be getting
ahead of myself here with props but
you've got a header then you've got a
logo and then things just trickle down
accordingly our code became much more
manageable that's a lot easier to
understand then Oh open up this view
that corresponds to this template but
then there's this like oh you know now
we use this like external method that
you need to download to know more
mind-boggling things everything's right
here in front of you and simple easy to
use files our backends our designers
everyone was a huge fan so speaking of
design it helped with CSS to it made
much more sense so what we started doing
is we started modeling our CSS classes
after our reactive components it's much
easier to traverse CSS and make changes
and designers are more comfortable
making those changes to there was a time
where you'd have you know thousands of
lines for a couple of simple things but
did it really make sense was it
effective was it maintainable those were
questions that we asked ourselves a new
head we knew the answers to we needed to
make a change so now we have a
one-to-one relationship between a react
component and CSS and it's helped all of
our apps grow it just makes sense it's
as easy as going into sublime searching
for a class letting that designer change
that information and then if they need
to find it in the react component they
can easily open up that file and make
the change themselves without relying on
another you I resource to make it happen
our design and code became much more
manageable the best part about all of
this is there's no magic involved it's
just good JavaScript right I'm guilty of
saying this but I had to look up call by
and apply because when's the last time
you had to use that in like a framework
like backbone I haven't had a user for a
while all those frameworks abstracted
all those awesome layers of JavaScript
lets you build cool things but then you
forget about the most important stuff
right so react kind of reintroduces you
to those concepts and lets you build
cool stuff and sort of foreshadowing
here handle click bind if you haven't
used react yet you're going to like this
this will help you a lot remember the
slide because I did run into a couple
issues with this in the past but now
it's awesome anyway we came up with the
whole migration process because like I
said we can't just flip the switch turn
stuff on and let our users see all this
broken code right so we started with
small components things that don't
really have a lot of data things that we
just wanted to try out and see how they
worked random pages we use the mixin if
you haven't used react a mixin is sort
of like a plug-in its reacts answer to
sharing code between multiple components
I know the components are reusable but
there are times where you don't really
need a component to make stuff happen
form validation for example you could
have a simple mix in with the regex
involved and apply classes accordingly
or apply state accordingly we use
something called the ria backbone react
component which i'll talk to talk to you
about more in a second and that glues
backbone models and collections and to
react components once it mount once it's
mounted a rapper will listen to those
changes and automatically set your
component state for you freaking awesome
lastly we wanted to get familiar with
the API there are things like initialize
and remove and backbone we wanted to see
if we can match to in react just to kind
of get a feeling for it and really
understand we had component did mount
component will unmount unmount component
at node those are all great things that
will help you kind of transition over
and most importantly convert your parent
view to use react I'll create element
instead so you're rendering all these
views out in backbone and you need some
sort of a tie some sort of adapter to
make those changes happen for you and
react and that's when we came up with
the react backbone adapter
this was actually made by Jason block
who's actually in the crowd hey Jay said
it's a very simple it's a very simple
set of utilities that helps us attach
that component to the backbone view so
we pass in an element you pass in a
container and then finally an optional
call back you don't necessarily need the
call back but it's there just in case so
here we are we create identify attach
render and then finally disposed so we
create whatever element you'd like we
had a react reclast to identify within
the Dom it's more of a sanity check for
us we apply classes to all of our
backbone views it was sort of a good
habit to bring that over when we were
debugging we know right away oh that
must be coming from react let's check
the react folder had a time and so we
don't run into any weird issues we then
append that element to the backbone view
and then let react go from there just
render everything call the callback if
you pass one otherwise react do your
thing you're great added finally
disposed so not only do we unmount the
react component remove from the Dom you
can't forget about the container one
with three actually let's remove that as
well it just makes it easier you don't
want that stuff lingering around so like
I said the use chaplain and it delivers
and it gives us controller so here we
are we do a lot of stuff with member
conversion and onboarding it's a huge
part of my team out on the member facing
team and we want to convert as many
users as possible right in this case
here we are we've got a sign-up header
just a simple logo that stretches across
the top of your screen how can we get
that into the browser in a nice way
without freaking out too much so here we
go we use common J house we require that
module and then we create an element
with it sign up header as you can see
here there's one thing here that may
look a little weird and that's the reuse
it's it's a chaplain composition
function what that lets us do is
it grants us the ability to reuse data
and views beyond one controller action
it's a nice performance perk that we get
right out of the box so then like I said
element container and call back we've
got a sign-up header we've got a simple
utility function to get whatever that
header funk or whatever that wherever
that header lies we kind of query it
it's it's basically query selector
behind the scenes and then the call back
if you need it react gives you component
did mount if you need some sort of
utility method and you want to talk to
something but if you're looking for more
control via backbone that's what the
callback is therefore I don't want to
get too far ahead of myself but as
engineers we always want to move forward
and so we started coming up with a react
backbone wrapper what it does is it
takes the adapt to the next level with
the adapter we're still using backbone
views we wanted to get rid of that
completely so the react backbone wrapper
makes an appt root level react
components and that completely releases
chaplain and all of the features that
come with it and let's react take care
of the whole show I think this is what
everyone loves about it because it was
so simple to insert and the ideas are
more or less the same but we extend the
adapter what we do is we check for
amounted component we check for updates
we pass in props which are properties
which we'll talk about in just a second
we find the note in the Dom apply that
identifier class that's how much ADA to
reacted rapper and then just render and
then we're good to go no delays no
performance lags it just works we're
still in the process of tweaking this so
I don't want to get too far ahead of
myself but it's worked great thus far
and here we are our sign up header
component since we are using
CoffeeScript you have to use something
like CJ SX it works great but there are
bugs with it so if you're looking to try
something new like I said go with Babel
it's been awesome here we go like I said
don't freak out about the template in
view it's okay we're not doing much
javascript manipulation here
but we've got our render method and then
we wrap a header around just the trunk
club imagine that being a logo for
example super simple super basic but you
know we want to do some more creative
stuff right we want to pass down data we
want to see some interaction we want to
see you know cool things happen so we
pass down data multiple models and
collections as props a perhaps perhaps
are basically objects that react lets
you play around with and the mixing that
we're using kind of requires them so
here we are we're namespacing model for
member and stylists and then we're
grabbing some more information from them
out of with and then passing it through
as a collection we've got addresses and
credit cards for example so what are
props I know this isn't a react talk but
it's great to go over these things right
react props or properties that are
received from above and are immutable as
far as the component is concerned it's
short for properties it's commits
component configuration a component
can't change its own props but it's
responsible for the props of its
children and while we're at it let's
just go over state too because they play
a great role together state starts with
a default value in a component mounts
and then suffers for mutations in time
mostly generated from user events
submitting a form clicking a button
changing the page anything that user
interacts with should always be state
there's a great way to kind of keep
track of that components manage its own
state internally you can think of them
you can think of state as private it
doesn't affect the state of its children
a component can't change its own props
but it could change its own States a
component can't change a child's prop
component can change a child's prop
before passing them down but it can't
change its own I hope that makes sense
in any case here we are let's pass down
some data so as you saw earlier we were
passing in addresses and credit cards
here we are we want to map over the
addresses we have a separate address
component living somewhere
and we're passing in a key prop and an
address-- prop this is what I was
talking about when you can pass down
props to other sorts of components this
is where you would make the mutation do
whatever you have to do before the
component below it gets it so like I
said consuming the address collection
mapping them over in our account profile
I'll mention this to pro tip passing a
key whenever you do a map its reacts way
of doing a reconciliation making sure
there's nothing weird that happens it
will ensure that any child within that
key will be ordered reordered instead of
clobbered or destroyed instead of reused
so it's important to have even if you
forget that after this presentation
react is a really good job with error
messages it'll console everything out
and let you know exactly what you should
stack overflow or Google for so don't
worry about it too much now we've passed
down props we talked about state but the
most important part of this is how does
react know that our model has been
updated or we change something or our
collections been updated this is where
the backbone react component mixin comes
from it'll glue your backbone model and
collections and to react components this
was made by jose miguel hayes and it's
been a fantastic part of our workflow so
once your component is mounted a rapper
starts listening in the models and
collection changes to automatically set
components stave and the cheap you I
binding through reactive updates here's
a very simple example get model member
is sinking if it's sinking let's show a
loading indicator otherwise let's load
that member information it's super
simple and it's that easy there's no
weird things happening it just works so
um this mix and gives us some awesome
helper methods because as you recall
props are immutable you can't change
them but sometimes you want to update
that model you want to update a first
and last name you want to update an
email address you have to change that
stuff so what we get is two really great
helper functions this not yet model and
this dock collection or this not get
collection
when you're using just one model you can
just do this dot get model get name and
when you're using numerous you kind of
just use that namespace we talked about
previously get modeled member get name
and then setting works the same way I
get model that address that set zip code
and then whatever your zip code maybe
get collection same idea you saw that
earlier and we were looping over an
array of models so there are some
gotchas that we faced especially if you
are using CoffeeScript like i said
earlier CJ SX is great if you need to
get something up and running you need to
get moving you don't have time to start
rewriting a nap but you want to use
coffeescript Babel is much more robust
if you can use it use it implicit
returns in CoffeeScript sometimes those
will bite you in the butt right remember
to wrap a series of components in a
parent div otherwise it won't render
like you want it to since what react
does is it renders or it renders the it
returns the main component and if
there's other things involved it just
won't work out so you want to wrap
everything in a parent div and then
event handlers to we were getting this
pesky pesky console dot log and we
couldn't figure it out you know like
we're not using prevent when clicking a
button you get this weird oh stop using
event return false like use a vent
propping or event stop propagation a
really weird message but that's because
it's not because of what we were doing
it's because what CJ sx was doing and
what coffeescript was doing behind the
scenes it will emit a warning so just
look out for that so final thoughts this
is all very temporary we don't plan to
keep building our apps this way all of
our newer single-page applications are
more rebus flux and react applications
that use es6 and all those fun things
that we've been learning about so please
once you get the once you get the
ability to start building a new app with
it it's great for now and it works
fantastic
but it can get sort of mingled sometimes
so just keep that in mind once your apps
do grow to just outrageous sizes and
then I had the pleasure of meeting Joe
Hudson I'm not sure if you're here
anywhere Joe but he built this react
backbone Nixon to I haven't had a chance
to use it this week but it seems to be
pretty awesome he seems to be a really
smart guy so give that a shot as well
all right everyone thank you that was
backbone react application</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>