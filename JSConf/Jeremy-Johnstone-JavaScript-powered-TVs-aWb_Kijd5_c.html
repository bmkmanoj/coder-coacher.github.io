<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Jeremy Johnstone: JavaScript powered TVs!? | Coder Coacher - Coaching Coders</title><meta content="Jeremy Johnstone: JavaScript powered TVs!? - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Jeremy Johnstone: JavaScript powered TVs!?</b></h2><h5 class="post__date">2013-01-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aWb_Kijd5_c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Jeremy Johnstone and a little
bit of background about me I actually
worked for Yahoo for almost six years I
started off in the address book team
went over into male team worked in the
messenger but most importantly I worked
in the connected TV team which is what
this topic of this talk is about today I
actually left yahoo on April first of
this year and I'm now currently a
developer advocate for the LinkedIn's
platform team while at Yahoo as i said i
was on the connected to each b team I
was on the team for a little over two
years helped launch and basically
promote the platform through CES in 2009
continuing on from there and then i also
i have a long history of working with
javascript in many different platforms
from you know server-side nodejs and
doing rhinos with stuff and writing
parsers for javascript and PHP and
pretty much every exciting and crazy
thing you can possibly think of what
javascript I've done it at some point in
time so first of all I kind of want to
start off who has actually heard of
Yahoo connected TV in the audience here
surprisingly few it's actually it's
really sad that there isn't more people
out there that know about Yahoo
connected TV because frankly in my
opinion is one of the most exciting
platforms right now for JavaScript it
allows you to basically do all of the
things you've been doing in the web
browser all the things you've been doing
on the server side with no Jas but do it
actually on your television and do it to
enhance the TV watching experience and
not basically try to replace it like
some of the other products have done in
the space but instead just actually kind
of combine and bring in new content new
services that actually enhance people's
watching TV watching experience because
frankly most people when they actually
fire up the TV they don't want to browse
the internet they don't want to pull up
a web browser they you know your average
mom in Kansas doesn't even understand
how to use you know a wiimote to be able
to point on the screen let alone do
anything else what they want to be able
to do is just get to the content that
makes the most sense to them and with
JavaScript on the TV's you can actually
bring on all these developers like
yourselves that have experienced and get
up and going quickly and easily so first
of all just kind of a brief agenda here
I'm going to kind of cover what is Yahoo
connected TV for those of you who
haven't heard of it before I will also
cover why would you want to develop a
widget obviously that's an important
question and then first well after that
will kind of get into like how do we
actually develop a widget and what is
the environment like and
how do you get up and running and then
finally I'll conclude with what you can
do with widgets in general and just give
you some examples of some that so first
of all JavaScript on televisions who's
ever heard of something like that well I
mean we've already have it on browsers
um you know pretty much every browser
out there under the Sun supports
javascript now we have into mobile
devices from the iphone all the way to
you know the first class support that's
in the touch pads that are out coming
from what webos pads we also have on the
server side with no Jas and then a bunch
of competing solutions out there but so
why not TVs and in this example right
here in the bottom right hand corner
you'll actually see an example kind of
the experience so what this is is a full
screen widget here that actually has a
TV signal that's over on the left-hand
side so if you see that little box kind
of this being outline on the screen that
is actually TV signal i'm showing a
world cup game and then here you
actually have a ability to see like some
stats about different games that are
going on and then it across the bottom
you see all the different games of the
World Cup and you can actually go in and
select which one and see the stats we
see the current scores are things like
this and this was a widget that actually
launched last summer basically to
coincide with the world cup so what is
connected TV first of all it's based on
confabulate ur who here in the audience
has ever heard of compact later quite a
bit more hands there so confabulate ur
as everybody knows is the widget engine
that ran on mac and windows it was
brainchild of our larose and ed and
basically what they did was they brought
a kind of like the precursor to
Dashboard widgets so you know for all
the mac users out there to both windows
and mac users what we actually did at
yahoo is we went in and modified
confabulate ER ported it to run on an
embedded linux system so all the tvs
that have been sold since 2009 your mid
to high-end tvs from samsung sony's LG
vizio toshiba they've actually have been
linux running on the televisions what we
did was we actually got the
manufacturers to all go in and port and
put in confabulate Iran to the platform
confabulate er if any of you have not
used it before its uses spidermonkey
internally for its JavaScript engine it
as part of the development for TV
widgets we went in and architected a con
TX framework it's loosely based on the
mood tools class pattern allows people
who have some experience with mootools
to jump right in and immediately get
going but at the same time if you're not
familiar with it it is basic JavaScript
and it allows you to pretty much do
anything you want to do on the platform
it quickly and easily and then as I
mentioned previously six out of ten of
the top TV manufacturers out there are
now actually running connected TV on
their devices with the tvs that they
sell so why would you want to develop a
TV widget first of all is market
distribution currently right now there
are over 70 models of tv's + 135
countries with over 8 million tvs
current status of this morning that are
in the field obviously with that kind of
adoption and that many devices out there
you have a broad reach that you can
actually have your platform and then on
top of that with some of the new things
that are getting ready to launch like
the App Store that yahoo announced back
at CES in January of this year you can
actually even charge for your widgets
make connie directly from the widgets by
selling your content obviously you know
we're all here at jay's comp I don't
need to reiterate this much too much but
it's javascript javascript rules so why
would you not want to develop something
on the platform it's also easy to get up
and running everything there's an
integrated development environment that
i want to show you here that runs on the
mac or windows or linux and it's easy to
go in and quickly develop a widget it's
an open platform so anybody at any
company can go in and develop a widget
you don't actually have to like strike
partnership agreements with Yahoo
they're pretty much any widget that can
actually pass the QA process can be
launched on the platform and then of
course you know no presentation would be
complete without the gnome business plan
build a widget ? profit so what does it
take to actually develop a connected TV
widget so first of all you have to have
a computer I mean that's pretty much no
brainer there I'm a text editor of any
sort and whatever your personal
preferences I use textmate but you can
use whatever you would like and then a
virtual machine the two that are
supported our vmware and virtual box but
you could obviously if you have
familiarity you could probably get up
and running with just about anything
anything that can run a new bun
to vm image then also you need to get
the Yahoo TV widget WD k something you
can download from connected TV that
yahoo com and quick and easy get up and
going obviously you have to know
javascript it's something that a lot of
people out there they especially when
i've been doing a lot of the customer
support in the forms a lot of people
think well I understand jQuery so I
understand JavaScript well that's not
exactly the case jquery is obviously
written in javascript but you do need to
understand JavaScript especially
javascript outside of the browser model
so if you've done javascript in nodejs
or other places like this you'll fit
right in also additionally it helps to
have a TV that's supported for testing I
was actually supposed to have several
models of TVs up here onstage with me
today but they didn't make it but
they're not required but it does make it
easier for testing purposes and then
also a vision for an awesome widget and
the purpose of a TV widget is not to
bring like a web page into your TV is to
actually bring internet content into an
environment that's actually geared
towards and kind of socially acceptable
for the TV watching environment so for
example you know when you're sitting
down with your family you want to be
able to go in and find content on the
internet that is actually like quickly
accessible and is in point-and-click
fashion that you don't have to do a
whole lot of you know remote
interactions to be able to get to the
content so the example that i'm going to
give today is a linkedin network
streaming widget what this widget does
is it is a great example of consuming a
rest-based API basically anybody who has
an existing api out there you can
quickly go and throw up a TV widget
based around this API I spent maybe
three or four days total working on this
and most of that time was actually
working on getting an OAuth library
poured it into the network dong
confabulate ER unfortunately there
wasn't any good pre built libraries that
worked inside of that environment as I
mentioned with OAuth it is a great
example of handling OAuth UX in a widget
so basically you have to go in and be
able to you know do out-of-band Oh auth
and how do you message that to the user
how do you make it easier for the user
to put in their pin code so this will be
an example of one way of doing that it
also shows an example of a full-screen
environment so what you can actually do
is is normally and I'll show you some of
the examples when we get to the demo
normally a widget is in a sidebar so
it's kind of sitting on top of the TV
watching experience so by in the full
screen mode you can actually replace the
entire TV screen with your own content
but in this case we're doing it in TV
overlay mode which means that we're
laying some content on top of the TV
experience so as we'll see in the demo
it's actually a ticker bar that shows
across the bottom the screen and it
shows your network updates from people
that you have on linkedin so why
linkedin linkedin right now is currently
the professional identity for most
people on the web if you have a
professional identity you won't have
your resume your contacts everybody
predominantly speaking goes to LinkedIn
and LinkedIn is the source of truth for
that it's also a great place to go and
find out more information and insights
about your your work environment and
also to be able to you know learn new
things that will help you further your
career has over 100 million users around
the world obviously I'm on the platform
team so I'm a little bit biased here but
it has a powerful platform that allows
you to be able to drill in and get a lot
of information a lot of resources
obviously you know widget didn't exist
yet so it also seemed like a good target
and it's where I work so I kind of have
to go through my employer bone there too
so all right we're interested so how do
we actually build a widget alright first
of all here you'll see that i have
vmware fusion up and running vmware
fusion em is what i'm actually using but
i have also used virtualbox extensively
I you can actually if you go and look on
the blog or look on the connected TV
blog or look in the forums I actually
have some VirtualBox scripts that
actually allow you to get up and going
real easily with vagrant but right now
today I'm just using vmware fusion
following the install instructions that
are available on the website so i
actually have one small problem
currently right now with the OAuth
script that I was not able to fix in
time so I'm going to cheat just a little
bit here forgive me
ok
and now so to actually start off the
widget environment what you would first
of all you would go in and download the
VirtualBox image this is a
pre-configured image or a vmware image
that allows you to be able to get up and
running with ubuntu without having to
worry about installing ubuntu installing
the dependency packages and everything
so it's a prebuilt image that's
available off of the connected TV
website then after you would do that you
would install the WD playtest version of
the WD k it's just a standard package
there and then after you have that
you'll actually see that inside the
application menu you have a tea widgets
menu and here we're just going to fire
off the latest production simulator so
here's actually in the widget experience
this is what similar to what it would
look like if you're actually running on
your television screen so pretend this
black space right here it would actually
be the TV signal unfortunately I don't
have a TV tuner card on this laptop so I
can't actually show you a simulated TV
experience but just pretend that the
black is a TV along the bottom here we
have what's called the widget doc this
is examples of all the different widgets
that are running on the platform and you
can go in and just these are all the
default widgets to come with a TV
simulator but there's also a ton of
other sample code and widget so you can
get out there so first of all I'm going
to go ahead and select that LinkedIn
widget so when we load up in here we can
actually see that we have a sidebar
experience so again this is laying on
top of the TV signal so you would
actually be able to see the sidebar
there and then it'll just be laying on
top of your TV now it's also possible to
do a picture in picture mode so it's
kind of hard to see on this projector
screen here but if you can see there's
kind of a crosshatch on the right-hand
side now and then the TV is actually put
into a picture and picture off to the
side so either way it works both ways so
first thing we need to do is we need to
sign into LinkedIn I need to be able to
get an OAuth token so that way we can
actually make the request to get the
network updates so here I'm gonna go
ahead and do that so here we see an
experience at kind of one example of a
UX experience here so here we just have
some standard text I have a URL that I
need to pull up in my PC that's separate
from my television
and by doing that I'm now shown the
login page here
and we're given a five digit code so 3 4
5 30 so what we're going to do is type
in that code and now that we've typed in
the code we click verify code with
LinkedIn and boom we come right back to
the main screen again and now you'll see
that the Sign In button is actually
disabled and now we have the stream
network updates so stream network
updates if I go ahead and hit enter on
that will see that the sidebar
experience is put away and in now we're
in a full screen mode the TV would be
still playing here in the background and
then we have a ticker bar that shows the
linkedin updates that are going across
the bottom of the screen so you actually
do tons of different things with this
you could have like a twitter feed
that's pulling across the screen here
you could go in and put up like maybe I
am Tok pop-up windows and say like maybe
you want to initiate a chat while you're
watching TV you could have it to where
it's detecting what you're currently
watching on the television screen and
showing more information or more content
about the TV show that you're watching
so say maybe you're watching loss and
you want to see some relevant news about
lost you could have a widget that goes
in and shows you know ticker information
about that so that is the experience
there so let's actually dig in now and
look at some of the code that makes this
work so everybody can read that font
size big enough there so first of all
there's a widget dot XML this is kind of
a description file that goes in and sets
up some meta information about your
widget in the I'll actually show you a
link to a github repository that shows
you a template version of the widget and
then this way you can actually go in and
just cut being pasted in the relevant
values but essentially what we're doing
is we're giving it an a unique
identifier we're giving it a version
number and name who wrote it copyright
and some description information and
then some icon images then so when a
widget starts up the very first thing
that it loads is the main TV file so
what we've actually done is in if
anybody has actually developed a
confabulated widget before you
understand that them one of the main
ways that you did that in the past was
you go in and create a whole bunch of
XML markup and then you'd throw in a
little bit of JavaScript you throw in a
little bit of styling information and
then you would actually have your widget
we found that that was actually more
complex
for people to actually get up and
running with her TV widgets and instead
we wanted to have a standardized look
and feel like buttons look vaguely
similar to the same we had a whole bunch
of controls so what we've done is we've
actually removed almost all of the XML
artifacts from developing and can a
confabulation and instead have it all
done through JavaScript and rain during
in real time from JavaScript so the only
pieces actually left of the XML
experiences is we have to have the
widget tag and then tell it to load the
script so in this script here which is
the jas what we're doing is we're
pulling in the context framework so
right here this first line you'll see
the include line that pulls in the
framework then we're going in and
pulling in some event handlers some API
this is just custom code that belongs to
this widget pulling at an OAuth library
pulling in base 64 support and then also
we're loading up four different views so
if you remember back when we were
actually looking at this widget there
was number one was a snippet so that's
one view then when we went into the
sidebar experience there was like a main
screen so that's the main right there
the ticker is the full screen view that
actually has the ticker bar going across
the bottom of it and then Oh auth is the
actual oo off-screen where we actually
did the out-of-band authorization in the
pin code so here we actually get into
some of the first actual pieces of the
framework code so first of all here
we're going to do what we're doing is
we're actually starting up an
application and creating a new
application and we're telling the
application what the views are so in
this case we're just mapping a view ID
to a specific view class so classes are
something that's reusable so maybe I had
three different ticker screens and they
all had different content I could
actually go in and specify three
different IDs and all have them from the
same view class and then they could
actually internally switch based off of
what's going on in in that view then a
couple default things we have to set up
is we have to tell it what is the view
ID for the default view in this case
it's the view main so this way whenever
if you hit on the top title bar or if
you are navigating inside the widget and
you need to get back to the home of the
widget this is currently the home screen
of that of your application that you're
developing then the settings video ID we
need to know which one is your settings
view in this case the settings view for
this widget which I can go back and show
you it's just a simple about box that
says something
mation about the widget but if you had
more detailed settings there's actually
a green button that you can press on
your remote control to get into the
settings we have to obviously know then
which one is your settings view so when
the user hits a green button we can
automatically send them there so let's
actually go in and kind of dissect one
of these views so we'll look at the most
basic one first this first one here is
going to be the snippet view the snippet
view as you can see we're just going in
and we are creating a new context class
as I said those of you who have used
mootools you'll see that there's a bit
of similarity here we're actually using
kind of a pseudo classical inheritance
inside the framework so we're extending
from context context system anchor
snippet view so an anchor snippet view
is something that's always in the dock
and you know widget can actually have
multiple snippets that the user can
scroll through whenever they're on your
position in the dock so additional ones
that you could have like there may be
added real time would be like a profile
snippet view so for example say I was in
the news widget if I wanted to be able
to bookmark a specific category so I can
get in faster to that category I could
hit a button on my remote control
bookmark that and then that would be a
profile snippet view because it's tied
to my specific user on the TV now each
one of the views and the view life cycle
there is a knit view there's a create
view and an update view a knit view is
kind of like an initialized method it's
anything that you need to do when your
class is first substantial for the first
time you would put that inside the net
view create view is the method that's
called whenever you when your your view
is actually first shown for the first
time so this is where you actually go in
and render all the basically the Dom
nodes that would be going into the DOM
and in this case for the snippet view is
simply just a single image that's being
put into the DOM and then update view is
actually called every single time your
view is updated so if I go to the main
view then go to the OAuth view and then
come back to the main view my update
view call would get called the first
time whenever I first load it in and
then the second time after I came back
from the OAuth view and I'll show you
some more of that in a bit again there's
actually standardized controls for
putting in most of the elements on the
screen so in this case here where it is
creating a new image and we're giving it
a source setting some be offset and H
offsets and then appending it into the
Dom for the window
the main view has a little bit more meat
to it first of all there is a several
images that make up this view so when
we're actually in there I'll go back and
show you there's a image for the logo
that goes across the top there's another
image for the fade that kind of does a
menu on the background there's also a
reflection which is the is actually the
reflection of the image that's shown up
on the screen there and then what we're
doing is we're setting kind of an
opacity a point for so that way it's a
little bit dim down and unfortunately
reflection is something that is
entrapped into the framework as easy
helper method so this is the two lines
of code that you would do to actually
reflect that image and flip it upside
down so that way it gives kind of a
reflection effect to it then basically
we have a text element that goes in and
puts some text on the screen in this
case get the most from your professional
network we put a little of a shadow set
the font sizes colors pretty standard
stuff there for similar to CSS for that
then we create two buttons in this case
here we're actually creating text
buttons which is just a button that has
a text label on it we're giving a class
name of control mini button which is a
way to be able to make the fat buttons
that you would normally see in a menu
section and we set some labels and then
we actually set up an events block for
whenever the events are fired so in this
case here we're firing a non-selective
int whenever the button is actually
pressed by the user and here we're
actually going to say just load this
view which is the view auth so if you
remember back to the net j/s we're
setting up like kind of a string ID
matching to the view well here's an
example of one of those being used and
that's where we're actually telling it
to go in and load the OAuth view
whatever that Brett in this pressed the
next thing that we do here is we in for
entering into the full screen mode we're
going to go in and same thing same setup
as a button here but in this case we're
going to load on the view dash ticker
because it doesn't look good on the
screen if there's a whole bunch of just
black space we have a empty space
control which kind of gives it a little
bit of a cross-hatched look and that
fills in the empty spaces left on there
so here you can actually see the first
example of an update view what the
update view does is it checks this dot
persist offed so whenever a it comes
back from the OAuth view
we can actually pass parameters to the
main view so that way when it loads we
actually can pass some parameters in
this case when the Olaf view em is
completed it sets a off equals true
parameter and then so if we are off then
we just disable the lay link button the
Sign In button and we enable the
interval screen button the next thing
that we do here is inside the focus view
so focus view is when your view first
gets focused so in other words a user
can control and move the you know the
blue focus up and down on the screen in
this case if it was off then we force
the focus over to the inter full screen
view otherwise the focus could actually
be on to maybe potentially on a disable
button I'm going to kind of speed
through the OAuth button here in this
case we're just and this is a first
example of an init view we're setting up
some ham some handlers here for
different events that happen and we're
setting a current position is equal to 0
so that's the position inside of that
digit to the right we have a back button
control which is kind of gives it a
title and it also gives a quick easy way
for the user to go back some text then
what we do is I'm actually creating an
element core so this is one of the most
basic of the elements and I'm putting a
background image background position and
background repeat something you would be
familiar from doing web dev we're
actually going in and putting the code
background so the code background is
actually it's just five white squares on
the screen and then what I do is I'm
going in and creating text elements to
put on top of each one of those digits
on each one of those white boxes so that
way when a user types of digit we just
fill each one of these with a single
digit so it displays on the screen there
are other ways of doing this but this
was a quick easy way to be able to get
those five individual characters and
make sure that they did correctly center
on the center of the white squares as
they should scroll through the rest of
those there and then of course there's a
submit button at the bottom so it's a
standard text button that we've seen
previously so the other thing that we
added as well is a keyboard so there's a
standardized control that allows you to
be able to put an on-screen keyboard up
on the screen in the case of this one
here that we're actually doing a pin
entry and keyboard that will also enable
the number keys on the key whenever the
user is selected on that pin there
they'll actually be able to type in the
birki's on their numbers on the remote
control so instead of me having to go
and select you know 34 and then move my
mouth the focus around I can actually
directly just type those numbers in so
that's another convenience helper there
then what we do is on the events here
for on key down what we do is we are
creating a handle handle key press event
or I mean a callback and passing it
biting it to the this so that weighs in
the correct I'm scope so here on the
handle key press event and will actually
see one of our first examples of a
full-fledged event handler so the first
of all all events and handlers are
always pass it an event object in this
case there so this is a key event on the
event payload will get a key code so if
the key code is equal to 8 which would
be the backspace character there's also
handy like shortcut so you could use but
I just use the rock key codes here
because I happen to know them off the
top my head and then so in this case
what we do is we just actually set the
text back to you know empty for that box
if the user hit the backspace button
then if the key code if the key is
greater than zero or equal to 0 or less
than 10 in other words it's a numeric
digit between 0 and 9 what we do is we
actually set the text to the event
payload keys so that's what actually
populates that box and puts a digit in
the screen if Kurt then I just do a
little bit of management here so if you
keep hitting backspace if current
position isn't less than zero we just
set it to zero so that way it's always
on the first box and then if current
position is greater than four in other
words you've reached the end of the
boxes and we just jumped the focus down
to the submit button so that way the
user doesn't have to move down there on
their own in the case of the handle
submit button what we do is we take the
verifier I'm just basically building up
the verifier and as I said I had a
problem with the OAuth that I didn't get
a chance to fully resolve so right now
I'm just forcing it to set the Mayo off
to be true the clear key code fields and
all this does it just loops over all of
the different code fields and then sets
our text to empty in the case of the set
short URL what this does is is
inside of my coat I am actually firing
off a request to link my TV which is a
domain of registered for this widget so
it goes in and fires off the request and
sends at the URL that he needs to be
able to shorten and then when the short
and euro comes back we're just going to
set JSON that URL pass it in as the set
text in this case we're actually there's
a message center that actually allows
you to be able to pass messages back and
forth between views and other pieces of
your code so you're not directly
coupling you know a view to the data
source so in this case right here if the
message that was broadcast is a short
URL we go in and call this a short URL
update you in this case we show the
loading overlay which is that spinner
that you saw we clear the key code
fields then we go and we get the short
you shortened URL and then when the
callback comes back for that then or
when the message comes back that's when
we set the value and then what I do is
whenever the view comes in and the focus
comes into the first time we go into
focus the keyboard because the user you
know the first thing they're going to do
is be typing in the keyboards to make it
as quick and easy as they can so now the
ticker view as unlike the main view and
the snippet view so if you look here on
the main view it's extending from
sidebar view the snippet as I previously
mentioned is extending from anchor
snippet view the ticker view is
extending from full screen view so the
full screen view what we do here we have
a great view I'm basically building a
container across the bottom of the
screen which actually encapsulates where
the tickers are and we set a background
color so that way it has that little bit
of a white bar and then what I do is I
actually create to text elements so the
reason why I'm creating two here is
because if I'm scrolling one across the
screen I may get to on that one
completely you know off the screen
before the next one or without was still
having trailing text there so by having
two different text nodes basically when
one sliding across the screen when it
gets 50 pixels off from the right-hand
side what I do is I start the next one
with a text note and then start
scrolling it and keeping it and just
evenly spaced off of that and we'll get
to that code here in just a second and
so that makes it to where you can
actually have this neatly flowing text
across the screen that looks like it's
constantly updating
there and I throw in a logo on the
screen now when we go into an update
view what I'm doing is a fire office a
set full screen video mode and I'm
telling it to do a pass through so in
this case that way the TV signal shows
up and it doesn't have a black screen if
there was a TV signal and device and
then I'm also going in and just this is
a bit of cleanup that I did in my in the
widget here for because I was expecting
a TV to be here and that was to go in
and resize the view plane back to the
full size so for example and if you
remember when I put in picture and
picture inside bar when your widget goes
into full screen mode if you're going to
have TV pass through you are responsible
for making sure the TV signal is the
appropriate size for your background so
in this case we want it to be full
screen in the case of hide view here
this is whenever the another example of
a widget life cycle so when the view has
actually taken off screen we want to
stop the ticker because otherwise that
ticker would still be scrolling in the
background even though the full screen
view is not on screen so think about
your consuming CPU resources moving this
text across the screen obviously you
don't wanna do that when the user can't
actually see it same thing with destroy
view destroy view is whenever your view
is being garbage collected because of
memory management and you're off screen
and we need to go in and clean that up
and in this case here all we're doing is
just calling kill on the animation and
then setting the animation equal to null
so when the start ticker the way this is
actually done is using a custom
animation so with the custom animation
I'm firing every 50 milliseconds and I'm
telling it to update animation and then
return true in other words keep running
the animation from there and then I call
animator not start and I pass in the
custom animation that we just created in
the case of the animation update what I
do is I go in and set the offset I'm
just basically shifting everything over
to pixels to the left each time that the
every 50 milliseconds and then what i do
is i set the the ticker to if it's the
one that's on the right hand side I set
it to be 75 pixels offset from whatever
the outer with is in other words the far
right-hand side of the first text
element then what we do is if it's
completely off screen then I reset it
back off to 960 so
a the screen as far as rendering size is
960 x 540 in size there's kind of an odd
semantics that most people don't realize
that the TVs they actually are rendering
at 1920 x 1080 but most of the graphics
and like all the menus and everything
are done at 960 x 540 and then there's a
scalar inside of the TV that scales it
up to 1920 x 1080 does a 2x in each
direction so what it's doing here is
just moving it off screen so that way
it'll start moving correctly again
whatever the animation starry cycles and
then what we do here for the update
ticker text is whenever whenever it goes
off screen we clear out the text for
that one and then put a new network
update into that text field so that way
when it starts scrolling on screen
you'll see a new content region so here
I'm actually going to go ahead and reef
are up the simulator again and show you
a little bit of some debugging things
that you can do inside the switch and
show you a little bit more about the
widget itself so here you can actually
see there when I actually fired this off
there's two windows that are opened this
other one is a terminal window here so
what the terminal window is is actually
a live JavaScript console into your
widget context so in this case right
here I can see the widgets that are
running by typing / widgets I can see
that the LinkedIn widgets is in the
number 2 widget so I'm going to go ahead
and / widgets to and now I'm actually
inside the same JavaScript execution
scope as the LinkedIn which is running
right there so as I mentioned you know
it's not a browser but it does have an
actual Dom structure so here whenever I
go in and do dollar dollar which is a
shorthand for basically dumping the
document structure you can see here that
we have the widget we have the script
tag which we had originally put in in
that main TV but we also now have some
windows in here so the one that we see
at the moment is we have a window that's
a snippet main in other words it's the
snippet that we created and you can see
that there's an image object in here
which as you remember we actually
created a JavaScript image object well
this is actually putting the image
object directly into this into the page
there and creating the Dom nodes that
are relevant so when we go into the
sidebar here if I do that again
you'll see that there's a lot more
elements on the screen now so there is
frames which you could kind of like into
a div or to a span in in a browser world
there's images there's text nodes and
then that's what actually creates the
markup for that page there so an example
of something that just just to prove
that this is a live environment here
what I'm going to do is I'm going to go
ahead
first what I'm going to do is I'm going
to grab a reference to the window itself
and then the dollar bracket there is
basically doing the equivalent of a
document dot get element by ID and then
I can do window dot and then when let's
pull up the source code here to this so
we're going to do view main and say we
want to change the this controls pitch
we want to change that text so control
so if you saw it was this duck controls
that pitch so we're now we're doing
windows duck controls pitch dot set
so as you can see here i just called set
text on that text element and then i go
in and say hello jay is conf and you can
see that it updated right here on the
screen in real time and showed you that
information so you can basically go in
and poke and prod and do anything inside
of your widget experience right here
through this terminal and what your
coding there so I could go in and create
new buttons I could put them on the
screen I could you know control the
whole interaction experience say for
example I wanted to simulate the user
actually hitting the enter key I could
do that / key space enter and that would
actually take me right to the LinkedIn
authorization page an example here where
we were talking about with the back
button so this is the back button you
can see where it has a title which kind
of gives it a window title and then the
back button there allows the user to
actually to go back just by hitting
Enter on that the settings view that I'd
actually told you about and didn't show
you yet so in this case here it's just
in about box and if you notice in the
code that I wrote here we don't actually
have an about box view anywhere inside
of these views so what we actually if we
look at the widget sorry at the unit jas
you'll see that i'm actually using a
view class of context I've used about
box this is a system built in view
there's a several of them that you can
actually go in and Stan she ate and it
just makes it quick and easy for you to
be able to throw something up there on
the screen that's relevant to the users
or in this case that would be the
LinkedIn or in this case the about view
and shows you more information about
that all right
so what does all the things I promise
you know it can't kind of give you a
quick brief overview there of developing
widget what are some of the things that
you can do in a widget so number one is
there's plenty of content based services
that you can do you can do news you can
do social media there's already a
facebook there's already a Twitter
widget out there basically anybody that
works for any other social networks out
there you can quickly develop a widget
and have it running on the TV obviously
there's media so whether it's video
streaming there's already a YouTube
widget that allows you to be able to
watch youtube videos there is a yahoo
video widget that I developed that
allows you to be able to watch jaju
videos that are hosted on yahoo there's
plenty of other things you could do
there be very easy to go in and develop
a Vimeo widget and additional widget
content of different types there's a
showtime widget that allows you to be
able to watch showtime shows
theoretically speaking if hulu had an
h.264 stream they could actually you
could go in and watch hulu videos right
there on your television there is an
amazon unbox widget which allows you to
be able watch the amazon videos on
demand stuff there is a blockbuster
widget that actually allows you be able
to watch any of the blockbuster instant
streaming videos there is a number of
different photo applications from picasa
to flickr to all the different types of
videos mean photo sharing services that
you can actually use as a widget music
right now there's already a pandora
widget there is a let's see there's a
pandora widget there's a couple
different radio like streaming internet
radio providers there's also as another
example of a stream kind of a media
streaming there is the just a whole
bunch of different ones on the platform
that you can actually go and you can
develop a whole bunch more gaming so
right now there's a whole bunch of
different kind of basic games like card
games and you know bejeweled and kind of
things along those lines that are
currently available to platform you
could easily go in and develop a lot of
different types of gameplay interactions
one of the examples that I was going to
do if I had a TV here was actually going
in and showing you where you could have
a palm pre sitting in your hand I'm
running with nodejs and then be able to
have the TV connect to that and then use
the controls to be able to do a race
card game so that's of course possible
there and you can do multiplayer and
things along those lines TV
interactivity is something that just
recently came out the TVs are not in the
field that support this yet but they
were
announced at CES and allows you to be
able so which it can detect what TV show
you're currently watching and provide
relevant information so maybe you wanted
to show IMDb information for the movie
that they're watching or maybe you are
Lincoln and you wanted to be able to
show every time there's a commercial you
wanted to be able to give the user the
option to be able to see more
information about LinkedIn and kind of
go into a full screen experience those
are things that you could do also
widgets could be developed easily for
things like you know american idol so
you want to be able to do the voting you
could vote right there from your
television screen and not have to call
in or do anything additional and then
one of the things that I've actually
used the connected TV platform the most
personally is kind of like stuff that
isn't exactly intended uses for it like
I went in and built a widget that shows
the bill box status so a TVs up on
screen and you can go in and see like
what the current status is of all the
different Hudson build projects and be
able to see that information on the
screen I've also done some mr TG graphs
and have them show up on the screen it
would be very easy to do a like a booth
kiosk and one of the awesome things is
is because this is an open platform you
can develop anything and not have to
actually publish it to the world you can
install it and run it right on your TV
immediately just by putting it up into
the gallery and signing up for a free
developer account so one of the things
that you can do that with that that's
really cool is that I went in and built
a home entertainment kind of a widget
that allows me to be able to browse all
the different content that I have hosted
on my mac mini some of that just
standard h.264 stream some that audio
some that you know pictures stuff like
this and I can go in and be able to
search through you know all of my DVDs
that I ripped in h.264 streams and have
that all running off of my mac mini and
then be able to see that on my widget
and be able to search for the movies and
be able to play them instantly that's
something that any of you could hear the
audience could do and it would take you
I mean I could give you the source code
of the one that I wrote or you could
actually build yourself literally in a
couple hours and be able to show all of
your content and install it on the TV
and most of you if you bought a TV since
2009 and you spit more than about 700
bucks for it or you bought it one in the
last year and spent more than 300 others
for it you probably already have the
connected TV stuff on there you just
didn't realize it because it's not well
communicated on the boxes and things
like this so I also did kind of an like
a little sample here of some different
experiences so you could be able to see
the different widgets so up here in the
upper left-hand corner
you can see the widget gallery which
allows you to go in and install widgets
in this case right here it's actually
showing the new widget gallery that's
getting ready to launch that allows you
to be able to purchase in by
applications the one in the top middle
is a flickr slideshow which shows kind
of an example of having images in the
sidebar the third one as we saw was like
having a TV picture and then having the
doc across the bottom the fourth one
which is in the bottom left hand side is
actually kind of an interesting one so
say you're watching The Home Shopping
Network I don't know why anybody in this
audience would be but if you're watching
The Home Shopping Network and you wanted
to go in and purchase something
immediately well you can actually have a
Home Shopping Network widget that
actually knows what you're currently
seeing on TV and then has a buy now
button and allows you to purchase it
immediately right there and then a fifth
one is an example this is from the
Flickr widget but it's actually using a
standard control that's available in the
framework that allows you to be able to
do kind of a slideshow and then with a
kind of a film strip across the bottom
so users can jump ahead in the slideshow
and be able to see additional things so
kind of wrapping up here for more
information obviously one of the best
sources for the connected TV platform is
go to connect to TV yahoo com there you
can see tons of developer information
you can see a whole bunch of videos
about how to do different things on the
platform I apologize it's my face my
video that's up there on all those and
so you'll have to endure my voice a
little bit longer if you want to watch
those there's tons of documentation tons
of sample code then obviously if you're
interested in getting involved on the
LinkedIn developer API s go to developer
to linkedin com and there's a tons of
different things that you can do with
that happy to talk to anybody and
throughout the conference about either
one of those two and then some more
information about myself obviously you
can find me at my website Jeremy
Johnstone com I have a crapload of stuff
that's up on github so you can find me
there or via Twitter via the Twitter
user ID which if any of you were in here
earlier this morning you probably know
my twitter ID already because apparently
i was the biggest band with upstream
consumer this morning so any questions
we have time we don't
happy trails to you until we meet again</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>