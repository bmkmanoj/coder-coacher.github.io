<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Kai Jäger: What it’s like to live on the Edge | JSConf EU 2015 | Coder Coacher - Coaching Coders</title><meta content="Kai Jäger: What it’s like to live on the Edge | JSConf EU 2015 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Kai Jäger: What it’s like to live on the Edge | JSConf EU 2015</b></h2><h5 class="post__date">2015-10-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ju8x3z1LuCg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Thank you very much and welcome. I was just
told that I'm actually, because of the transcription
over there, expressly forbidden to talk about
Icelandic volcanoes.
Stephen Tyler once said there is something
wrong with the world today, something is wrong
with our eyes, we are seeing things in a different
way, these no sent words perfectly describe
how Internet Explorer was rendering websites
in the past.
The same philosopher, in the same essay also
said, I'm paraphrasing here, &quot;Edge, yeah,
yeah, yeah, yeah, yeah, yeah, yeah&quot; - {Laughter}.
What I think he meant to tell us with this,
as Microsoft we should build a new browser
and call it Microsoft Edge, in that sense
the works of Aerosmith and Stephen Tyler,
have been a Da Vinci Code for us and much
of Microsoft is inspired by it.
I'm the CTO in residence at the Microsoft
Accelerator here in Berlin, like many of you
I was a web developer in the early 2000s,
because of that my relationship with Internet
Explorer has always been complicated, like
many of you I have written terrible code to
make sure that a website also worked in Internet
Explorer that was already working perfectly
everywhere else. Like many of you I've hated
it, I've thought it was the worse experience,
that's not a good place to be in.
Now, when you, actually when I started for
Microsoft I was an Internet Explorer Evangelist
for a little while, I would speak at conferences
like this, talk about Internet Explorer, when
my family asked what my yob was, I did drug
trafficking, it raised fewer questions! {Laughter}
Things have changed quite a bit, on some fundamental
level things are still very wrong, if you
go on Github and you search for IE sucks - when
I saw that I was shocked, I didn't know what
to do with this information and at one put
I thought actually that maybe I'm looking
at this all wrong, IE is the top level domain
for Ireland the so just maybe what these people
are trying to say is that these people are
not very big fans of the band U 2. I have
to admit at some point that I felt that Bono
was a bit pretentious.
If you search Github for internet sucks you
get 34,000 results, &quot;Stop using this when
Internet Explorer no longer sucks.&quot; There
is only one conclusion one can draw from this,
by and large developers are not completely
satisfied with the experience of writing code
for Internet Explorer. This is a bad position
to be in, I'm not going to make a bunch of
excuses, because really there are not very
good excuses for this, I'm going attempt some
what of an explanation.
IE is, in recent versions, a lot more standards
compliant, if you used IE 11 it's a pretty
good browser, there has always been a lot
of baggage that we have been carrying around
with us because of our legacy, IE has a 20
year legacy, IE 1 came out in 1995. This baggage
is a big problem, we are carrying around different
document modes I'll explain what they are,
when we talked to the different developers
out there, one this bigger group, very well-represented
here today, just your average web developer
they're pushing us
to say look you have to build a more standard
compliant browser you have to release updates
more frequently, we don't want to be stuck
with outdated standards and stuff, enterprise
customers are pressurising us not to change
anything, these are conflicting messages,
the reason they are doing that, it's not because
they our mean or behind the times it's because
they have investment in the internet and internal
websites and tools that they have spent millions
of dollars on building and we would break
all of these sites if we didn't support the
broken implementations of web standards we
had in old browsers.
The way we dealt with, we introduced document
modes, you can force IE 11 to render a website
like IE 8, or 9 or 10 or alter versions, it
may seem like a good solution, what it means,
instead of maintaining one browser we are
maintaining 7 or 8 browsers, all of this baggage
really slows us down when we were thinking
about a new version of our browser we figured
that the only way we could build a useful
Powerful browser was to drop all the baggage,
we did a desperate step, we took the rendering
engine, shock ware are JavaScript implementation,
copied and pasted code into a new repository
and basically started over, we still have
internet explorer, if you go on windows 10
it has iterability in, we support that so
customers can use internet and internal tools,
for all purposes Edge is the new IE browser
and default browser in Windows 10.
So, when we set out to build Edge, we had
like one big guiding principle and this guiding
principle was we wanted the web to just work
for everybody. Everybody, that includes of
course the users of the browser, but it also
includes all of you the web developers. What
we mean by that, we want it to just work is
we want you to no longer have to write code
that is specific to Internet Explorer or Edge,
we want you to write code once without vendor
specific modifications and we want this to
work consistently across Google Chrome, safari,
Firefox and edge. In order to make that happen
we had to do a couple of things, we had to
up our game in terms of web standard support
and we've been working on that for a while,
but we really upped are game with Edge, we
are also implementing forward looking standards,
what I mean by that, standards that are not
officially standardising them yet, we are
adding support for pseudo standards I'm going
to give you an example of that, what I mean
by that, things that a lot of browser implement
that are not actually formally standardised,
we are adding support for that just to make
sure that the web works consistently for everybody.
Lastly, this was sort of the most satisfying
part of it, we ripped out all of the baggage
of Internet Explorer, so we have no more backwards
compatibility, there is no IE 7 mode in edge,
none of that, when we were done with building
the first version of edge, we removed 220,000
unique lines of code from the IE code base,
6 document modes, IE 8 mode, IE 9 mode, but
we also removed but 300 APIs, just to give
you some examples of this, we removed ActiveX
support, browser helper objects, VB script
support, but we also removed small things
like attach grams, so you probably no, at
event listener we had a non-standard version
of that, that's gone, we are really starting
with a clean slate, no Microsoft proprietary
extensions in this any more, it's a really
clean browser from the start {Applause}.
Thank you very much. At the same time we also
added 300,000 new lines of code, these 300,000
new lines of code include 55 new web standards
that we are supporting, but 4200 interoperability
fixes, these are tiny things and big things,
in terms of tiny things stuff like where Chrome
has a slightly different interpretation of
a web standard and we were trying to find
common ground where these specifications are
not as clear as they should be, we want to
make sure that you never have to make sure
about Edge doing a thing of its own.
When we set out to figure out what sort of
features do we want to implement in Edge and
what we want to fix, we found that was very,
very hard, over the years people have found
very clever ways of making websites work in
IE, one of the ways serving different content
to the explorer, when it looked fancy and
using a lot of CSS 3 in Chrome, we got a dumped
down version of CSS 2 with some IE-specification
quirks, it was the reality, we are in part
or completely to blame for that, if you want
to build a better browser you need to get
the same content as everybody else to figure
out what's wrong with your implementation.
The user agent string is used to identify
a browser, the truth is the user agent string
is really a bag of lies.
These are the user agent strings of common
browsers all browsers Identify themselves
as Mozilla 5.0, you know what that is, that's
Netscape navigator, every browser says, &quot;I'm
Netscape navigator&quot;, with Chrome, it's KHTML,
comparable on Linux and Gecko the Firefox
rendering engine, they all lie about what
they are. We are no exception here, we are
actually, now the worst of it all, but it
was necessary to make sure we get the same
as everybody else. We are happily announcing
that we are able web, Chrome, Gecko and safari.
{Laughter} {Applause}.
I know this is madness, we are not very happy
about this, but in the end it is for the greater
good, but as a quick side note I want to encourage
you that looking forward please do not use
agent user sniffing any more, if you have
code on your server like regular expression,
that says, &quot;If that is this browser I'm going
to do server different content&quot;, don't do
that, that will always break along the line
when new browsers are introduced, you will
serve them old content although they have
better capabilities. Use feature detection
where possible, in part it's our fault we
want to redeem ourselves and we need your
help to do that.
What we then did, we start to set out to find
the things on the web that broke our browser,
we looked at the top 1,000 most popular websites,
opened them up in an early build of edge and
fixed it, pretty simple. We took the Bing
web crawler and we used it, used it to collect
information from millions of websites, like
what features, what extensions, what web standards
do they use, we used it up in a head less
version of the rendering engine and looked
to see where we didn't do things right. We
took all the information and made 4,000 optimisations,
4,000 changes because of that.
I want to give you pretty interesting examples
because of that, you will find they are a
bit different probably to what you might have
expected. On
the left you see a screen shot of IE 11, on
the right edge, the same page of Hawaiian
airlines, there is a bunch of icons that render
correctly on the left they are not rendered
at all, the are not rendered at all, we are
for once doing something right, we adhere
more strictly to the standard that applies
to this than webkit does, Firefox actually
has the same probably, if you are serving
a font file you have to honour the cross version
and installable files, it ignores this and
it's why it works. We have chosen, it sounds
crazy, to make sure our mobile browser version
renders it the same way as the mobile browsers
on iPhone I pad and Android so we have implemented
the standard the same way that Chrome and
safari does, it works, you don't have to change
anything.
Another weird example, group on website, there
is a minor difference in the way it's rendered,
group on using a CSS attribute called 'Webkit
appearance', now webkit appearance is not
a web standard, an invention of Apple, we
find a lot of mobile sites use it and we support
it with the vendor prefix so you don't have
to touch your code at all it will just work.
Speaking of vendor prefixes we found another
interesting thing, let me first say, what
we now do if we find a prefix CSS attribute
or CSS selector and there is not an unprefixed
version and not a version that using the MS,
Microsoft specific prefix we will actually
considered the other pre-fixed versions, we
will use webkit prefixes if necessary.
This, we did that because - {Applause} - thank
you. Now, you can probably have like a divided
opinion about vendor prefixes, what actually
is happening with vendor prefix is a lot of
websites use the Webkit prefix even though
we have support for much of CSS 3, we don't
get to render it because people don't use
the Microsoft prefix. We did one more, so
on this slide you see a subtle change in the
use of gradients. And what we found was that
when Apple first introduced their gradient
before it was standardised the syntax was
different from what was ultimately standardised.
There were 2 versions. A lot of websites still
use and only use the obsolete Apple version
of it we have decided to support that as well
just to make sure that websites render consistently.
Let me make this absolutely clear I am not
encouraging you to use obsolete CSS syntax
I am not encouraging you to use vendor prefix
where there is an unprefixed version, but
just to make sure that everything renders
the same across all browsers we went to these
lengths to make sure it all works.
But besides this many, many thousand of small
fixes like this me have also add a tonne of
new fixes stuff like WebAudio support, CSS
filters, ECMAScript 2015 I will talk about
I in a second, http/2, SMID extension, and
on top of that we support everything we have
also already supported with IE11, web GL web
crypto, file API and so forth.
Now when you decided, to implement all of
these features we also knew that we needed
a new update strategy, you probably know,
this is one of the main points with Internet
Explorer it's updated with the operating system.
For us to introduce new features we had to
weight for a new service
pack or major release of the operating system.
With Edge we have adopted the same update
model you will find in Chrome and Firefox
today. We will actually update Edge independently
of the operating system we will do future
updates along the way. It's the same ever
green version of Edge as you would expect
with Chrome, we also don't talk about Edge
in a specific version it just Edge we will
keep updating which I think is super important
for this.
Now, people still obviously ask us look when
are you going to implement feature X when
are you going to implement feature Y, even
though we are a bigger company we have a lot
engineers, we have limited engineering resources
we can't implement everything at once. We
prioritise and we have decided to be extremely
open about this I am going to show you how
we are doing this. So this a site it's called
modern.ie, you can go there now, we have a
page that says platform status on this list
we first of all show you all of the different
web standards that we are currently tracking,
and you can see the state of a their implementation.
You can see that some of them are in preview
so we have a preview built on Internet Explorer
that's not stable yet you can download that
see some of features in there some in development,
but some under consideration where we think
about look this might make sense to implement
it we have to prioritise but eventually we
won't implement this stuff.
The other thing is we actually want to have
an open discourse with you about which features
are important and which ones are not. This
is user voice which is are customer feedback
portal you can see somebody here asks we should
support OVG video audio formats here's a comment
from somebody on the engineering team saying
it's under consideration we're looking at
it deciding on whether we want to implement
this. We want to be more transparent about
it you can see the status of all the web standard
support right there.
Now this is a JavaScript conference, I am
fully aware of this, so I should probably
talk a little bit about JavaScript we have
also done a lot of work round JavaScript in
Edge, we have also done a lot work with previous
version of IE there some really cool powerful
new features in Edge. Now our JavaScript energy
is called Chakra, and that is just-in-time
compiler like you have in other browsers,
we have done a tonne of performance improvements
this where most developers get the most value
where your applications runs faster everybody
wins. We have also added somebody like SIMD
support we have added ECMAScript 2015 support.
Let me talk a bit about how Chakra works.
Like any other JavaScript engine, when we
see a bunch of JavaScript on your page we
parse it turn it into an abstract syntax tree
then we compile it into byte code then we
have a byte code interpreter that runs JavaScript
for a bit but while we run the JavaScript
we collect profiling information how office
in a function called, what types does it like
a call site see and after a while we actually
pass that profiling information along to a
just-in-time compiler, to an optimising just-in-time
compiler. It's also been semi-unique but Chakra
we just-in-time compile on a separate thread
we're not blocking the UI thread or main thread
while we're doing just-in-time complication.
This is a really cool feature, and it allows
us to do more aggressive optimisation because
we're
not stalling the UI while we're compiling.
Now one small down side of having a an aggressive
optimising compiler is that it takes longer
before you break out of the interpreter start
running the machine code. So what we have
done in Edge is implement a second just-in-time
compiler which is not as optimising it's much,
much faster. You run your byte code for a
very short amount of time we will actually
instantly just-in-time compile it using the
symbol, then after a while we while we'll
send it to optimising if we think it will
make it faster. You have better performance
right away but we have also done another thing
we have allowed the just-in-time compiler
to use more tan one thread so if you have
a multi-core CPU which even mobile phones
nowadays have you can actually make better
use of the CPU core that will give you better
performance. One of the things that struck
me the most as really unexpected is we actually
found that minifying JavaScript, the patterns
that mini fire make, doesn't allow the compiler
to make as many up assumption. We analysed,
we found there were some tweaks we could do
to make this much faster we running minified
code now. We also improved polymorphic inline
caching that's where you optimise variable.
Also a great feature, we fully all know that
when you have a animation on a site when you
are building a game you sometimes have stutter
during animations so you are frames per second
drop from 60 to something else below that
and go back up to 60. There is its in effect
that typically called by garbage collection
pauses by running the garbage collection parallel
on multiple threads we can reduce the pauses
and eliminate the stutter, you will see during
animation which is important for games that
sort of stuff.
Now everybody likes benchmarks, but I want
you to take these with a grain of salt because
the performance of a browser is much more
than winning at some synthetic benchmark is
really about DOM performance about rendering,
about JavaScript and many factors so this
does not mean Edge is the fastest browser
in the world we still very happy we're very
good in these bench marks. So, actually Edge
stable currently beats Apple Jetstream, Google
Octane, and SunSpider and Firefox stable will
not stay like this for very long it's a good
thing I want Chrome to beat us on this because
this like the only browser war we can actually
all get behind it's the war for a better JavaScript
performance because that is a war where we
all win, so I say bring it on.
{applause}
So one thing I want to talk about is SIMD,
single instruction multi data it’s a very
technical things, it's a very cool thing this
is making it's way into browsers. So when
you run and add instruction on a CPU you give
it 2 parameters you give it a 5 or a 7, it
going to calculate sum of 5 and 7. Now what
SIMD is it's CPU instructions that operate
on vectors you can give an SIMD operation
8 values for example. The SIMD instruction
will actually compute the result of that in
one single instruction and often very few
cycles this critical for vector mathematics,
for 3D graphics it as a huge impact on performance
specially with games graphics heavy applications
we have worked with Intel, this also going
into other browsers, to implement SIMD extension
into Edge I am going to show you a very quick
demo of this, a demo
built by Intel actually and when I start this
you can see that this running at about 20
frames per second, it zooms in on the fractal
you can see the performance is degrading as
I zoom in when I enable SIMD or disable it
again you can see the performance increase
significantly all the mathematical operation
it can do it almost 4 times the speed. This
will be extremely helpful in writing scalable
and fast games in JavaScript graphics heavy
applications.
Now the other thing we're implement with Edge,
this both of these are by wait experimental.
We are also adding JZ support as you have
at in Firefox. As addin.js a sub-set of JavaScript
language it's basically you can run C++ application
in a JavaScript environment. What we can actually
do as add.js, we 
just treat it as any other JavaScript code
now we have a special code for it we can actually
compile it differently and run it at almost
native performance, I don't have a demo for
it I just want to show you this is also new
in Edge you can go to about flags, and if
scroll done there's setting for JavaScript
to enable new features, to enable addin.js
I also want to talk a bit about ECMAScript
2015, quick show of hand who here is excited
about ECMAScript 2015? Awesome. Excellent.
So ECMAScript 2015 is a really, really cool
thing, since I am running a bit out of time
I will show you this very, very briefly.
This is your typical JavaScript code, as you
would write it today, and you can see for
example in this case, there's an anonymous
function see the syntax for this is clunky
you have this problem where if you want to
use this, inside of an anonymous function
it often doesn't refer to what you think it
refers to in ECMAScript 2015 you can write
classes you have this arrow syntax is much
nicer way of specifying anonymous functions
there a tonne of other stuff I can't get into
I want to show you this real quick. We have
a tonne of support for UE 2015 you can see
here in Edge, that Edge 13 has 80% ECMAScript
2015 support we're ahead of all the other
browsers but what I am going to say I am going
to skip to another slide just to save sometime,
basically what we want to do is we don't want
to be the only one of the first one to implement
a specific standard because that is essentially
use less we want the web to work consistently
across all browsers. We need to make sure
that we all work together as browser vendors
to make that happen. One thing we did with
ECMAScript 2015 we already had such big support
for it we're sharing our test suite for ES
2015 with everybody. So everybody writing
ES 2015 implementation can run our test suite
to make sure their implementation adhere to
the standard which is also quite new from
Microsoft. I want to show you a bunch of things
but I will skip ahead of this so {laughter}
there ok let me show at least this one. {laughter}
So over the years IE has given us a tonne
of laughs, I think it's time to put an end
to this and to start working with a serious
browser, thank you very much go to dev.modern.ie.
{applause}</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>