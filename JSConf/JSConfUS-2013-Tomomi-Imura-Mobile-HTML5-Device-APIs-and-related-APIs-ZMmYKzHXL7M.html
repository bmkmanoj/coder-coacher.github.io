<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[JSConfUS 2013] Tomomi Imura: Mobile HTML5: Device APIs and related APIs | Coder Coacher - Coaching Coders</title><meta content="[JSConfUS 2013] Tomomi Imura: Mobile HTML5: Device APIs and related APIs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[JSConfUS 2013] Tomomi Imura: Mobile HTML5: Device APIs and related APIs</b></h2><h5 class="post__date">2013-09-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZMmYKzHXL7M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so again my name is to mommy and I think
people who know me know me as a little
girlie mag it's my twitter handle and
I'm mobile-focused front-end engineer
with the you like focus and currently
I'm working in nokia I've been working
Pinocchio i canna ear or so as a web
stunt or the open web advocate and the
before work in a nokia i've been working
full palm webos if you remember and yeah
I've been tickled oh gosh she was blood
all of sudden yeah I've been taking
charge of the UI a pole web OS platform
or and little in the palm pre phones and
touchpad and it previously i've been
working in yahoo mobile so basically
I've been working for mobile space for a
long time and also yeah besides mobile
I've also known as HTTP status cat lady
the reason it's you might not know me
but I think you might have seen those
stuff i have created that gave me some
accidental 15 minutes of fame and it was
totally unintentional but it went by a
role is kind of cool so yeah I can talk
about cats whole entire time but I'm not
going to so now I'm going to talk about
JavaScript since I'm on Jess comp in
html5 for mobile so again i'm going to
start talking about uri schemes so this
is nothing javascript actually and this
is some old school stuff it's nothing
new and defined by oma for XHTML MP
that's XHTML mobile profile so it's
being there and implementing the brass
of a long time and you probably already
know just like a male 2 but it's sort of
obscure things you might know so you can
just finish
the phone call by giving this a URL
scheme will PL tell to make a phone call
you know basically opens up for for my
app if you need advice heads form or you
can even text by using SMS this game and
there's something I recently heard about
like what WG hub whitelisted some other
URI scheme like Bitcoin lately I haven't
seen how it works and stuff but it'll be
kind of cool and also something like if
be like custom non-standard URI scheme
to open up facebook app if it's an iOS
and stuff but that's against non
standard so the UI actually UX it really
depends on OS you know which operating
system the browser its own so first
screenshot here is actually for mom
windows from eight so once you use a tap
the link of the phone phone number some
actually goes to this screen so the user
had a chance to edit before making a
phone call might have to add like you
know country code and stuff in the next
points on Android I don't remember if
this gradual is from Chrome or Firefox
or other browsers the basically a cozy
you know goodson same screen basically
it's open up the phone app and then it
is a way you know the browser never make
phone call an initiative phone call by
itself without the users knowledge you
always have to initiate a call so in
this case and of course you know nothing
happens until you set up just call
button so it's safe and another voice
for SMS not android is basically open up
the messaging app and again it doesn't
send a message by itself
in geo location is another thing I don't
really have to explain too much i'm
pretty sure everybody here already know
but it is you known as a way that you
can access hardware and there are more
than a few ways do because you know your
device doesn't necessarily have to have
GPS so you know it's easier and you're
detecting the users current location and
location by GPS satellite extra GPS or
sell IDs and assisted GPS is a
software-based or Wi-Fi base stations
and then it would basically this is
called snippet of you know how you get
the current positions once you get a
location coordinates get successful back
here and again this has access
permission for users as well so I mean
the developer can't steal information
about where you are at so always you
know ask the browser make it into ask
users to give it permission and this you
I really depends on browser so you
probably haven't seen those before
because these screen shots are taken
from the first one is from webos and
another one's me go so you probably
haven't seen it and then the next one is
action not from geolocation this is full
okay use immediate formations again get
used get user media never takes your
father also you know open up the webcam
without your permission so this is safe
for users
another cool feature some of the you
know thing you can do is JavaScript this
device orientation events so there's a
freedom event to get the information
about physical orientation movement of
the device and the information the basic
information can get a gyro collimator
and comb pass and this is actually this
diagram comes from a developer website I
took it from there and I should read
it's pretty good informative web page
and this explains how the device
orientation paint works so it has
basically the motion of the device and
you know which way rotates so alpha beta
and gamma and alpha is a one it's
actually works at compass so it detects
in north south and west east ended oh
yeah and the device motion it's like the
accelerator I mean so it basically tells
how fast you know device throttles maybe
I would stay always say if you'll
driving with your phone or more likely
you have a phone in car and how you can
tell I mean by using this ben de can
pretty much tell how fast your device is
traveling with you are and kompis needs'
calibration it's the exactly what is
there the company's calculation it gives
the supposed to give a UI of a you know
the a figure or maybe infinity or
whatever but I don't think it's working
I mean it's being employment in any
process yet I haven't seen it's working
so this is a quick demo I wrote it's
really so use a diversity orientation
events basically used with css3 you know
transform to just move it is a try and
load it with the movement over this
device and when you put the person flat
surface it keeps the answer but then
recently my friend told me about the
diss github for full page
well i justjust it it's not morning so
this page is kind of cute you know I
have a parallax effect and that's when
you move the mouse it moves in the
background moves and apparently that use
the device orientation events do so when
you hit this bitch extent to hit 44 and
your tablet or something you know it
moves around as you move it's kind of
silly but it's cute oh now I don't know
how to get back
so it is his actual code code snippet
from the demo I just wrote so basically
just using you know listening event and
the device on the best orientation
events there and get the info from the
alpha beta gamma and using the CSS and
the sorry keep stepping on something the
browser support it's okay you know it's
been supporting the most of mobile
browsers here and when actually had to
tell you about when I'm talking about
this browser compatibility here I'm
talking about mobile so you might say
it's like oh it's been supported by from
such that even in earlier and such but
I'm just talking about mobile here so
when I'm talking back from today here
I'm talking about crumpled Android so
the earliest version of the Cronin of
all android is 18 so basically when I
say a team is it's been working since
the first version and same thing for
firefox so I'm not talking about Firefox
for desktop talk about Firefox for
Android and unfortunately i don't have
firefox OS device yet so i haven't
tested any so when I talk about Firefox
it's only for Android and the Opera it's
not it's not the webkit-based Albert's
bristol-based offer and Judes over 12
and yeah it's a blackberry time and the
last item has a Python so I actually
just got place and device last week so i
have tested a little bit this weekend so
i don't know much about this device I
mean the browser yet but anyway I tested
and it's working fine and that the
ladies ties in browser a bit by the way
I Tizen it's a WebKit the WebKit to base
browser and a use case is hopeful use
cases photos API they just mentioned
above it's a this iOS app called pizza
compaq actually I don't really use iOS
so
I haven't really used this Apple myself
but I read about it so basically what it
does is for user at the compa so this
pizza compass tells you where you are in
the location and it just gives you an
earless pizza place I like yeah you know
what I think I can do that with
JavaScript pretty easy right so
basically what you have to do is you
know use a navigator geolocation to get
use a location and use a user comparison
device orientation events with the Alpha
get informational by alpha get cold fast
and just you know use some API it's maps
and local businesses api's from
somewhere and just get that you know the
grab from phone numbers or make a phone
call by using this up tell you are a
scheme so should be able to do it the
camera access so yet no you can you know
access the device native a camera by
using javascript and one of those is a
WebRTC oven it's a part of the web RTC
Piccadilly and using it using media and
the mobile browser support for
getusermedia it's not quite yeah so
looks like operas really paeonia like a
first one is supported but again that's
not a web kiddo WebKit opera I tested it
with latest opera you know with
webkit-based not blink yet for the for
mobile I think it's a 14 is a webkit
based and it wasn't working sadly and
chrome 26 I put star there because this
is you still need a Miss Webb get
extension i mean the vendor prefix but
yeah this is I think the newest column
now it's 27 but it just happened
recently it wasn't working before it
just started supporting I think and
other the browsers like Firefox and pie
then it looks like it's being Paula
minted because you know the feature
detection but
feature detection lie so it doesn't mean
it works so I didn't make it to work
maybe I did wrong I don't know so that's
actual photo i took from my android
phone obvious a little silly demo not
that one I made it for Responsible well
demo so again yeah has a user permission
so you never use a you know webcam with
the formation it's not really working
yeah basically a has a fish in
JavaScript Fisher detection to make my
favorite spongebob it's a little slow
it's not right going maybe because i'm
not looking at the camera mmhmm yeah it
works on the phone you know you know
android Oh still okay all right I don't
oh my gosh it's funny okay
again so that's actually tested in them
nexus 4 but another things and that
there's another way to you know access
the native camera and this is something
extra my favorite the HTML media capture
this is different from you and get user
media it's not using I mean it you see
there's no JavaScript involves there
right it's just a mock-up so you see
this is nothing with an input here right
input element it's the file type type
its file so this is just like a file
upload but the difference is so now we
have a the two attributes yet except and
capture so basically specified accept
images in a caption camera and this is
this is all implementation allows their
old specifications but this is what it
currently browser support and a new spec
is captured says the boolean because
when you specified image it's obviously
you try to get the camera these are
other things like the recording can
record our microphones in a video as
well so you don't have to specify its
camera it is pennyweights this is new
and then i don't think any browsers have
supported yet so currently um chrome
android blackberry 10 and ties and
support is just fine and i'm testing iOS
firefox on android and I eat as well but
the the reason I put star that the
partial support is some well you can
still access cameras but the breath of
heaven implemented this correctly that
means that the capture attribute is not
working so basically when you try text
access or try to use this the browser
asks if you want to take camera or
choose pictures from your hard drive
somewhere like album something that's
fine but it's still wrong so bugs me
wild ie10
that's another thing a future detection
life so appears to be supported but it
doesn't work so I asked the guys and
Microsoft and apparently this is
disabled for mobile when I'm used in the
windows 8 even windows RT at least it
supports partially but it just doesn't
do anything for mobile phones and it's
pretty bad experience and this is the
demo of actual app I wrote this step is
web app and it's called Cuomo camera and
this is entirely written in JavaScript
so basically what it does Oh miss koala
does it's a tap the button and take the
photo and apply the filter you save it
this I 7 locally in a browser or send it
to the server and you may have seen app
like this before somewhere I'm not
trying to select somebody for 1 billion
but it's open source at it for free
so yeah you might have seen similar
interface somewhere
so again I brought entirely in
JavaScript and use the HTML media
capture while I explain quickly
I actually have done like entire
presentation about this app it has so
much to talk about actually
so again yeah idea that I html5 you
sched talk before in a different
conferences because i want to show you
know actually how you can use html5
features to write apps so fold a
particular app what i did is taking a
photo with the native camera by using
HTML video capture and it's a camera
returns the picture as a file object and
as you can get from file reader then
dump the whole dinner pictures into
canvas using the draw image method to
the draw the image object on campus then
it's going to get image data to get the
whole pixel data from the you know
contain copy of that pixel data from the
context then I just manipulate those
pixels you know the giving give-give
like grayscale filters or you know the
CP ER and kind of stuff then and use a
we are using a canvas too blob method to
store the blog and to a store locally in
it with you using index TV then finally
you can and let you use the upload photo
by using xhr and course actually index
DB it's a tricky one I put stars because
I say blob store the blahblah XD be but
only five of supports joining blobbin
index DB that's a whole other big topics
and I have time to talk about but
anyways for Chrome another browser
that's what I did was just storing
base64 string but huge string so it's
really not a good idea to do so I think
anyways so it's not a github it's open
sourced it's not done yet but oh it's
working and okay so move on to a better
study say PA so another things you can
do with javascript it's detecting how
much juice left in your form or you know
even you can detect a few phones being
charged or not what are you using those
events and charging change the level
change events and you will the browser
support it's still not great it's only
supported by Firefox enticing
and so far and if we're Tizen you need a
web get a prefix and for Firefox I think
you can provide safe to drop now yeah i
think the firefox guys dropped the
prefix after version 16 and this is
actual code I wrote I mean just damn
quick demo on it actual photos so you
can see this is charged so he knows it's
been charged and other ones not charged
but note that the pilot that's a
sixty-seven percent left and vibration
api's and other things you can do this
so yeah it is something called a vibrate
at the navigator object I'm navigate a
vibrant is just used you need a prefix
as well well basically what it does it
by radiophone I oh you know what I don't
think you can hear I have a it's button
now thank you yeah I expected to have
extra mic so you can hear but anyways I
don't have a good use case so this so
just demo and another cool stuff is you
can access the light sensor in the
device and it is used yeah that's easy
the device light event so the value
gives actual brightness of the
environment around the form in the unit
of lux so basically gives numbers like a
400 oh this is actually observation from
my galaxy nexus one so I'm not sure
about accuracy of this little bit yeah
but basically when you are in an
indoor/outdoor well then daylight it
gives an you know different valleys and
I live in San Francisco and it's foggy
so I couldn't really get tested for over
thousand actually and I should test it
here on
time and in sunny Claudia but
unfortunately my galaxy nexus phones get
stolen while ago so now I have a nexus 4
but I think light sensor of this bones
somehow not right i mean i don't get its
supposed to give it a value in double
but i always get integer value and it's
really low so i'm not sure if it's the
light sensors working and other things
SSO I just said the value is in double
but then as a new specifications ikea
that's really confusing why don't you
give just a you know string value C
easier to understand and damn no more
bright and maybe the good idea it's too
new and I know browser supported yet I
had to go quick oh it yeah it's demo but
just some you know try to create a
shadow on phone geez just to see the
number changes i know i should write a
better demo but yeah I
and proximately events as something
similar so you can sit approximately
sensor the device so you can tell if the
object is nearby or far maybe ears
touching the phone will not but it's
still this is too new i guess none of
the browser support it but I'm hoping
it's going to be supported soon and
there are more AP eyes I really don't
have time to even explain but there's a
bunch of other more ap is maybe some
birds is already about it maybe not one
particularly interesting for me is a
clipboard API has cut and copy and paste
that will be cool and network discovery
it's like universal plug play multimedia
device like you can you know operates
the other devices and as well and
hostname maybe it's supported already
and gamepad API and push notifications
and there's some aps or not i'm not sure
but like contact api's and calendar api
is a actually there specify the based on
the web intents but apparently google
ditched web intents so I don't know what
happens to those API but I had just keep
on because now we see mozillas doing
something new called web activities I'm
not sure if that's going to replace the
web in 10 so something I don't know so
that's about it and thank you very much
in and my website girl max calm and my
twitter is girly mac and the score mac
it's kind of confusing has under school
or not and my github that happens sorry
and i had to talk really quick oh my
gosh really already run at a time but
thank you and if you have a questions
just just talk to me</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>