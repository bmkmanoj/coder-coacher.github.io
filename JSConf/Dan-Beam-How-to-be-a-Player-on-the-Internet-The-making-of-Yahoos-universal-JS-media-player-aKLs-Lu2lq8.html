<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Dan Beam: How to be a Player (on the Internet). The making of Yahoos universal JS media player. | Coder Coacher - Coaching Coders</title><meta content="Dan Beam: How to be a Player (on the Internet). The making of Yahoos universal JS media player. - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Dan Beam: How to be a Player (on the Internet). The making of Yahoos universal JS media player.</b></h2><h5 class="post__date">2013-01-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aKLs-Lu2lq8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Dan beam I just wanted to put
out there pre-eminently I'm sorry for
all the pooping earlier I didn't mean
anything by it if you want to come and
poopin me feel free my tour will be open
to anybody that feels like they want
retribution come on over again I'm sorry
but uh on to my presentation this is a
how to be a player on the internet the
making of a Yahoo's universal j/s media
player and as you can tell by the purple
and from yahoo so what what is Yahoo
media player well obviously it's
Universal j/s media player so I thought
it best explained in jas with the
appending of one script your page goes
from cool to awesome I find the code
example pretty self-explanatory so I
wanted to show you guys real quick a
demonstration of the actual product
because i'm pretty sure i have a few of
you that have never seen it so here's a
quick demo of what it does and what it
can do for you I promise I'll get into
more engineering stuff real soon so this
is a band we allow independent blog
owners and publishers mainly like bands
and stuff to to use our player so they
throw the one script tag and they'll get
an experience similar to something like
this as a user when I scroll down the
page I notice a play button next to this
particular link it will automatically
play the video right in context while I
continue to read so I can see this is a
great love song still verses in other
embeds it's it's a little harder to read
because if you wanted to continue
reading the video would also move
there's a lot of other reasons too but
we also play a audio as well which also
allows you to continue reading and
doesn't really wreck your experience if
I want to find this audio on my page all
I have to simply do is click this
handy-dandy scroll to button so these
are just a couple of the features that
we have
and so let's get into now what you as a
developer can do to customize an
experience like this if you're not quite
satisfied with what this does or if you
just want to make something on your own
and you know why because we love
developers so our API has a lot of
public methods it's all on one global
yahoo dot media player in the style of
Yui to when this was originally created
you can also set global environment
variables that control auto-playing
album are all kinds of cool stuff so
this allows you to create custom
experiences so say for instance I didn't
want the same experience that's just
being able to play in line in the page I
could also do something kind of like
this so i made this as a real quick hat
it all it does is it pulls the top five
hits off of GData API for YouTube so I'm
going to look up a keyboard cat and all
it does is it plays let me see if I can
actually get audio working so it will
display the first five of the top hits
on YouTube for about five seconds each
and this is using this is using our API
to be able to just have a more custom
experience it's real simple code it's
not not a lot add some content add
tracks just using a convenient Dom node
API you just have to add the container
it parses all the links for you and then
you play and send an interval to
continue going another level of
customization would be skinning we want
you to be able to skin and hover you
want this is how Yahoo search made
theirs look it's pretty easy to scan
it's going to be a lot easier in the
next super-secret awesome cool version
and there will also be a preset theme
roller and chooser real soon so our
goals our goals as yahoo media player
would be like i mentioned easy to
install one script should rule them all
you should be able to take your page
from a page to a playlist like i
mentioned you
you can be able to just add in line pay
in line play buttons easily and you
should be able to mix audio and video
because that adds a really cool
experience and just makes overall like a
dry page of text into a much richer
experience for all your users keeps them
on the site longer makes you more money
so like I mentioned we want to work on
any page in any browser device with any
media or service and let's get into how
we actually do that yeah so we support
every browser you can think of except
iceweasel and and kind of opera because
of Yui is grated browser support we do
support it but we're not really required
to so the first way we go about actually
supporting a lot of browsers and a lot
of formats oh I should mention the
format's we play a lot of stuff mp3 WMA
m4a flv youtube yahoo movies a lot of
stuff so on the first thing we do is we
have a clear separation we lose couple
all of our stuff we have a ton of code
without some type of organization you
would be totally lost so one thing we
make a heavy use of is the adapter
pattern which works super well for
engines if you'll notice here this is
our inheritance kind of tree we have
just a base engine which does event
publishing and subscription which goes
down more specifically to engine in
audio and video engines and has all the
engines we currently support with the
future ones we plan to using html5 audio
and video it should be coming soon and
we also allow this adapter pattern by
the way it allows you to just create a
common API right each each engine will
have something like play pause next stop
stuff like that real easy but we can
tame those quirks and there's a ton of
quirks media engines suck they are
they're not great so we contain those
quirks at any level including one
specifically for a certain engine or the
entire way up the chain so another cool
thing that a flexible architecture does
for you and this adapter pattern Nimrod
is a fellow developer smart dude not a
Nimrod anyways um he we we use graceful
back in a sense that if you happen to be
on something like Windows without flash
well know instantly that we can go to
Windows Media Player QuickTime
relatively easily based on the fact that
we know windows media player is better
for your particular less same with OSX
we can go to quicktime and other things
like that we have a large complicated
fallback chain we use any possible way
to play the media that we can get
basically and like i said many more
engines come another cool feature that
we have is a the ability to kind of just
link to movies and then we will
automatically find a trailer for you
using YQL to hit yahoo movies and then
if that doesn't happen to have a trailer
for that movie we will go back to 2g
data with youtube and we basically just
take care of all the the glue code and
the effort it takes to require or to
find the trailer you want so but enough
about us on to you how do we peacefully
coexist with your page unless your pages
on gopher so for CSS we we heavily
namespace everything we've come into
issues before but so we namespace all of
our classes we we use no IDs as their
global and we do a lot of interesting
things we filter chain which is just
like glorified search and replace on Yui
3 widget CSS at Build time just changing
it and adding our own CSS prefix we also
do a lot of contextual CSS resetting
which is really cool so yeah just our
player can be able to be reset similarly
the way that you would be able to reset
an entire HTML page but just
contextually within ours to not affect
you as well as we do a little more
aggressive resets to be able to override
cool myspace hacks like cursor crosshair
and all that other fun stuff while
you're mousing in our player we also
coexist peacefully or attempt to with
javascript as well we have minimal
included dependencies we will never
conflict with the library or any of your
Global's or natives on the page we we
also use an async loader will get that
to that insect we use one URL you have
the same URL forever you always
constantly get our updated versions we
push out versions
a lot you get this you'll always get the
latest version as long as you're using
our loader we host the entire thing
ourselves you don't have to pay a cent
for bandwidth the full player is cash
forever regardless of which page you
happen to load it on whether it's you
know Yahoo movie page or a blog you
happen to see for an artist yeah we only
introduced one semi global if you didn't
already have yahoo has one so let's get
on to performance so obviously in
performance when it comes HTTP requests
less is more we have an interesting hack
we've done where we build CSS into our
JavaScript we minify it with Yui
compressor and we build it into the
JavaScript just in a string literal and
inject it after we're on the page itself
so that pipelines all the HTTP
connections for CSS required into one
javascript file we do this at Build time
with aunt and aunt templates it's real
cool and then we also use a heavily use
CSS spriting we only have one image that
I think that that is from us it's a
large bright for all the UI of all the
player it's pretty cool and right now
we're investigating in lining data your
eyes into the CSS for the sprite as well
as any type of engines code that we need
in lining that into the script as well
for browsers that support it IE 8 and
above and everything else not
surprisingly so more on performance we
do dham caching and delegation pretty de
facto standard these days we only query
your Dom once and we do it relatively
after we found the containers we cash
every reference we delegate all of our
events to make sure that you don't have
a lot of memory blow from handlers as
well as we catch any extraneous events
that we don't want propagating up to
your page all this is so we can coexist
did not affect the performance of your
page because that's obviously something
we want to consider and last like I
mentioned a little bit async laziness
this is for Ryan of Yui law cats we are
non-blocking like I mentioned the only
part that blocks on your page is a small
loader that decides whether or not to
inject itself if
mine's media links we lazy load anything
we can like for instance a YouTube
player like I showed you we lazy load
all the metadata for all the items if we
need to get more we do it only when you
play the items you're not paying
anything for all that and then we do a
bit more cool stuff with YQL you've
heard it mentioned a couple times yahoo
query language we do we do server-side
processing with javascript which is
which is pretty sweet j/s conf I know
you care so we do server-side JavaScript
with rhino and and execute which which
you allows you to do any processing
manipulation and only send back just the
small subset of data that you need so I
mean a lot of api's expose a lot of data
if you ever looked at any of Google or
Yahoo api's they have a ton of stuff you
usually only need a couple things send
only what you need over the wire cash it
intelligently with yql and and also had
some really cool aspects of access
control when you have an API key with
YQL you're able to actually create three
multiple keys that would be able to
allow users to execute read or write
your table this is really useful when
you're a client-side widget because
there's basically no security when
you're completely on the client side so
this allows us to hide API keys hostname
information all that fun stuff and only
expose that executes key to everyone
that uses the plugin so now to the
future I've mentioned a couple times you
know we have some future plans and the
one that I've been working on for a
little while and it's due to come out
the soonest is the new UI it's about as
sexy as mr. Hasselhoff here maybe even
more but it is sexier faster more
skinnable I'm sorry if you have to look
away okay but that's it that's a mock
right there a little different looking
from our previous Rev as you can tell
it's a lot sleeker this is uh this
happens to be on a yahoo movie blog that
we're already injected in so looks
pretty sweet it's gonna have a lot more
features come talk to me afterwards if
you're interested in hearing about them
and sorry I didn't mean to do that just
want to check my spot
what up I did not but I can if you want
so like I said we're going to add more
engines like audio and video because
this allows a lot more things for us any
codecs that we didn't previously support
and anything that we we wouldn't be able
to play easily with uh with that with
more engines you can just do natively in
the browser that's really cool we're
kind of just waiting for it to stabilize
out just a tiny bit more and then we're
going to drop that into our flexible
architecture like i mentioned we're
really interested in supporting mobile
and tablet we kind of accidentally work
on android already because of the the
headless Swift that i mentioned earlier
that plays some of the audio but the
rest we've been getting a lot of
requests for iOS devices and we're going
to we're planning on supporting that
really soon so you'll be able to
literally work on almost anything and
then we're also playing on adding more
video and audio services and publishers
if you have recommendations were come
talk to me afterwards there we have a
tech group or you can have my email just
let us know we're kind of categorizing
we have quite a few ideas we just want
to prioritize which ones and we're
adding a social features say you you
thought that the the keyboard cat video
is awesome and you did think that
actually some of your friends don't
happen to know about it you'd be able to
share it or tweet about it something
like that right from the player so we're
integrating those aspects real soon too
and much much more there's the sales
pitch so thank you again for listening
my name is Dan I hope Batman doesn't
come arrest me right now so and then
here's credits for all those photos
flickr rocks
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>