<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[JSConfEU 2010] Rostislav Hristov: The Art of Deep Linking and AJAX Crawling | Coder Coacher - Coaching Coders</title><meta content="[JSConfEU 2010] Rostislav Hristov: The Art of Deep Linking and AJAX Crawling - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[JSConfEU 2010] Rostislav Hristov: The Art of Deep Linking and AJAX Crawling</b></h2><h5 class="post__date">2013-06-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6tHWSxcS9Fg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everybody thank you for being here
this will talk with a little bit more
practical less no Jess and stuff like
this okay but there will be some anyway
this talk will be about addresses that
look like this with a hashtag or a
little bit more crawlable if we put an
exclamation mark in the beginning of the
fact that hash fragment or the URL can
be simply perfect if there is no hash at
all okay a little bit of history how
this whole thing started you know
probably ten years ago everything from
the web was about multimedia
interactivity the years were flash gains
ground and the first information on this
subject was published by Kevin Lynch who
is now a CTO of Adobe at that time a
city of macromedia and he was the first
guy that showcased how the address can
be manipulated using plain JavaScript
back in 2004 so later if you have heard
of really simple history a year later in
2005 this was one of the first libraries
that enabled such behavior in the
browser at that time I was interested in
that subject and a year later
I released this library it was primarily
targeted for a flash websites because
the flash website web sites also has
such problems with linking to specific
sub pages of a website or an application
and this really has became the standard
for deep linking in the flash world and
later it was used also on variety of
Ajax powered websites so nowadays dis
functionalities provided out of the box
by many frameworks so you can probably
very easily start using it and really
lots of clients need such functionality
and in case you use jQuery I believe
most of you do nowadays these are the
the best plugins that enable such
functionality in jQuery ok I'd like to
show you a few examples of what is this
actually doing so here is a showcase of
the suite of websites that use the
swiffer dress project these are
primarily flash websites I hope that in
the near future we'll see lots of gee's
rich experience websites implemented
using canvas and some more hardware
accelerated features of html5 but
basically these are websites created by
large agencies and and they have really
provided me with a lots of quality
feedback how this solution actually
works for them a typical website that
needs such a functionalities like
converse
so you can do a search they
automatically change the address I'm not
sure how exactly they keep the state
because the deep link here does not
contain the exact query string but you
can go jump and select a model select
the color and you always have a unique
link in the address bar also the back
button is working as it should and you
get a real experience typical for the
standard web pages ok I after this sweet
address project I have developed jquery
plugin that basically enables the same
functionality for jquery a typical
example of such functionality is needed
by image galleries so here the Guardian
website uses this for this library for
their image galleries and there can be
some funny things I will try to show you
but let's see if the site of science is
good and also this funny website by a
Swedish webpage enci using different
keys you can create some sort of loops
and each of these key braces generates
an address change so you can then copy
this in the new tab and your recording
will be played automatically
no it was justice so basically you can
use the the address bar as a place to
store some sort of state for or for your
website or application okay so do you
really need a dedicated to library for
this many people find it really easy to
manipulate the vocation hash manually so
they are really there are really hard
times detecting this behavior in every
browser historically you may see that
there are different cases even for
browsers like Safari to that you may not
want support today but if it's doable
why why not so Internet Explorer was
typically using a hidden iframe to
detect the pressing of the back and
forward buttons this was monitored in
Firefox one two three safari opera using
constant interval that runs each 50
seconds later we had the unhatched
change event introduced by Internet
Explorer 8 and now there is a new
feature in html5 on touch state and you
event a new kind of functionality that
we'll talk a little bit more
so in addition to this browser
obstruction a dedicated solution can can
provide a lot of different features for
example you can have sort of query kind
of parameters in the address and you can
easily set and force them you can have
special events because usually this kind
of events come from the back and forward
button you can enter something manually
in indy address it's one type of event
and a lower type of event give the user
interface or the website is manually
clicked or some kind of other
interaction has happened so you may want
to track these kind of virtual pages
using google analytics and the projects
i'm developing are automatically doing
this for you you can have a fallback for
some modern features that you may not
want to support you may want to support
both browsers you can disable the
history if you want so you just can
generate deep links without enabling the
but the back button functionality and
sometimes there are some scrolling
issues because these hashtags they
correspond to IDS of HTML tags and so
that the page can jump up and down if
there is a lot of content
so one of the common misunderstanding
that people that are new to this here I
have provided some jQuery code most of
the people are used to this approach of
where they they have they have an event
bounced to the on click of a link for
example and they start directly with
making come Ajax requests that load some
dynamic content and then they try to use
for example the address plug-in to
change the address value and they don't
know what to do with the event of the
plugin that gets fired there is a change
event that gets fired each time when the
address is changed so when you want to
develop something like this you need to
forget about this manual interaction
keys click events because you need to
make your website work like a restful
application like a restful protocol
because all the information you need to
render the specific state is a part of
the address so all these Ajax loading
and stuff like this should be moved into
the change event so that the Ajax can be
loaded even if the page is directly
loaded using a specific address the
forward of the hash fragment also
matters and there are libraries and
plugins that you some really strange
formats for serializing data into the
cash part of the address and it's really
better to use something like the second
format which is very typical for the web
as we have it today also lots of people
find it really easier to directly really
wrecked to something like a home hash
tag because they find it easier to deal
with a cache that has a value rather
that than a one that is just named and
this usually leads to one history
entering the book in the browser because
if you when you open food com if you
directly jump to food com hash home you
end up with a history entering the
browser that is not desirable for
example one of the one of the samples
that we have that
sorry
here is a sample that utilizes the
jQuery UI taps widget and in order to to
add this functionality to this widget it
was mandatory to have the overview cash
automatically insert it the first time
when the page is opened so but it's done
in a way that when you hit the back
button you don't end up on the same page
without the cash part and it's doable
it's just something like you have to you
must have him in mind because it's a bad
practice you can use the location
replace method to insert the home cash
without generating history entry and if
you want to end up with something that
can be crawled by search engine BOTS you
need to think about progressive
enhancement and how the links that you
have in the website can be followed by
clients that don't have JavaScript
support so especially for flash websites
it's a huge problem with search engine
indexing indexing and the same applies
to more rich Ajax powered websites so
one of the key approach I was using for
four years and it was working just give
me a moment to find it okay so the age
example that we this sample is deployed
for about two years and the pages that
are in there are successfully
indexed by the three major search
engines but it's not the best solution
because here the address here does not
contain the hash symbol and when you
open the website it's automatically
replaced with the hash part of the
address and the problem in general with
the with the hash part if the address is
that it's not sent to the server and you
cannot render the website like this
using conserver site technology because
you don't have access to the hash part
which is only available in to the
browser so there are different tricks
you making this possible with URL
rewriting which can be considered as
cloaking by Google because they have
strict policies regarding this and
alternatively it can be done using
javascript redirection and you have to
guess that the search engine won't
execute this particular JavaScript
another bad thing is that if somebody
goes to this website and copies the
address from the address bar and inserts
it into his website just to provide the
link to your content such a such a link
won't be fall properly by the search
engine because the search engine will
always see and crawl the real part of
the address not the hash fragrant
fragment in in addition in this specific
sample there is a copy link to clipboard
here link and it copies the address
without the hash but it's not a perfect
solution
if you want to do search engine
optimization the sitemap XML is an
important helper for making your URLs
visible to search engines because now
it's supported and adopted by it was
originally invented by Google and then
both Yahoo and Microsoft adopted it and
you can submit a sitemap to these search
engines you can easily generate it
dynamically with not that much piece of
code and they are generated available
for various CMS systems so recently
google introduced a new approach
you
that has some age of content
but because this this part is not
visible to the server they will actually
fall for this they will actually think
your server with this second request
that contains a query parameter called
escaped fragment it's it's a solution
its kind of solution kind of a solution
to the problem the best thing is that
it's still not officially adopted by any
other major vendor and I don't know
hopefully it just may change or this
will be probably not the right way to
achieve this so this was proposed by the
GWT probably I have there this is the
website of the specification and this is
G the showcase their example that
showcases how the address here is change
in a way that it can be crawled the best
thing is that if you open it here the
the javascript is disabled in this
browser with GWT you you see this it's
basically not friendly if you have
javascript disabled what what what we
did in our sample to support this is to
to make it work even if even if
javascript is disabled so when the
javascript is disabled the whole address
is changed like this we'd escaped
fragment in there and when when you see
the website you know JavaScript enabled
browser he addresses change using their
convention okay so it's definitely
something to check to check out but I'm
not that confident in in the future of
this approach with html5 we have the
yunkish change event which was
introduced in explorer eight and it
really helps the detection of hash
fragment changes it was in it was also
added to Firefox and to Safari and
WebKit chrome and it's it works fine it
basically eliminates the need of
intervals or hidden iframes or solution
like this but the real deal is basically
the what was introduced later the push
state and replaced it and on pop state
additions to the html5 specification
because this is how a push state samples
looks like I just took it from the
Mozilla documentation this will be
introduced in Firefox 4 and it's already
available in WebKit browsers so when I
develop such things i want to do them
stateless as much as possible and
basically for such deep linking you
don't need the first parameter the
actual state because if you want to keep
the whole state as a part of the address
you basically need this part here the
last one and when you have
such think in a bolt okay I'll have a
have a sample a sample developed in in
old GS because this is cool you know G
address is now changed without any hash
part in the address and it's like a real
address so the bad thing here is that
you need student need to support all
browsers and when you enter this in a
firefox 3 dot 6 this technique is not
this API still not available and you
still get the address here on the server
the actual note GS coat looks like this
it was this whole thing is developed
using Express the Express framework and
which maps you to every request made to
the server and now you see these objects
part of the URL the contact part you can
directly handle it on the server side
and directly output the content if the
two but non JavaScript enabled clients
and in search engine BOTS even here if i
disable the JavaScript
if it's disabled this whole thing works
and it will be followed by a search
engine BOTS and hopefully this may be
may get introduced in ie9 and the whole
drama about making a jock scrollable is
going to end thank
No
ok
okay not sure not sure sounds like you
will break the whole dome of the page if
you open it and start writing to it
haven't tried it but for IE especially
there is a document domain think that
it's pretty dangerous if you want
cross-domain interaction using
subdomains there i have used document
open but is just in initialization phase
not at such a later stage okay thanks
again have a good time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>