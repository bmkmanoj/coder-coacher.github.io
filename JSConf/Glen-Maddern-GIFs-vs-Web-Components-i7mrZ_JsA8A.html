<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Glen Maddern: GIFs vs Web Components | Coder Coacher - Coaching Coders</title><meta content="Glen Maddern: GIFs vs Web Components - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Glen Maddern: GIFs vs Web Components</b></h2><h5 class="post__date">2014-10-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/i7mrZ_JsA8A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you very much my name is Glen I'm
gonna talk to you a bit today about
gifts because that's incredibly
important I'm gonna start by introducing
myself a little bit though because the
other half of my talks about web
components and I'm not like a web
component developer right I nobody's
paying me to write web components I
don't do them for client work I'm a
freelancer I've kind of just come to
them out of passion and so you know this
is a basically a story of how I came to
know anything about web components and I
have gifts to thank for it but I think
the most important thing that you need
to know about me is that I particularly
like gifts so gifts I find as being an
incredibly good way of conveying an
emotion so this gift in particular would
convey the emotion of almost disturbing
levels of enthusiasm the kind of
enthusiasm that doesn't really exist in
real life only exists in sort of 80s
movies from America but thanks to a
thanks to Ben yesterday I also have
another gift that I can use which is the
Top Gun high five and I'll show that one
more and now that's you know that's
shorter conveys the same thing so that's
an improvement but basically I'm a big
fan of gifts that's an incredibly
flexible file format despite being
incredibly inflexible in implementation
you'll notice that I'm from Australia so
I am pronouncing the hard G I pronounced
a gif but most of you it would be from
Europe so you would also pronounce it
gif interestingly I was in America
recently and they also pronounced a gift
because that's the only way anyone
pronounces it okay
so here's another gift this is an artist
called hate plow here's a tumbler he
makes interesting mashups of photography
and computer graphics basically this
these couple of gifts are trying to
convey that gifts aren't just about
funny animal pictures but they still can
be
I think there's something incredibly
interesting about a format that can
support both legitimate artistic work
and deal with it gifts anyway my story
about web components and gifts starts
for me with an idea and the idea started
when I was looking for more gifts came
across a website called vast image and
that's by a project by Brian Tamiko it
was basically a full-screen gif like
I've been showing you press command I
get a new full screen gif it had a
fairly significant problem which is that
the gifts that would show you would be
from an unmoderated set of gifts that
anyone could contribute to and this is
the internet and we know where that
leads
so me and some friends including Ben who
introduced me we built a thing called
gif City and that will basically scrape
a tumblr because we knew that tumblr was
full of interesting people doing
interesting gifts so I've got if the
Internet holds up you can have a look
yourself and I'll demonstrate a few here
so this is an artist called Matthew
DeVito and basically this is static
program that just scrapes that person's
tumblr looks for all the gifts will show
one after another every ten seconds or
so and what's cool about that is that
tumblr well basically for anything there
is a tumblr full of gifts of that thing
on the internet and this is one I
particularly like because I've never
been able to skate but this is a
somebody's collection of thousands of
cool skating tricks in gif form as we
can put this on and you can watch it for
a while and it's pretty cool and I
encourage you to check it out that's
where it lives and that was a kind of
project where we got started when we
kind of got that ready we were really
excited about it right I look this is me
for like a year right
because I kept finding new gifts new
tumblers full of gifts and while the
other guys weren't involved were you
know kind of satisfied with that I
started to get a little bit more
obsessed about the gifts right I started
to get a bit intense and wanting to do
okay so he'd written a little bit of
JavaScript we had having a lot of fun
what's the next thing and it took a
while but then I eventually came across
something that really astonished it and
it was the idea of synchronizing gifts
to music because occasionally a gift
would be just the right length and the
music would you you know be the same
kind of mood and they would sync up and
it was awesome it was so cool that I
decided to off my own project
called DJ gif which will launch at one
point but that's a separate talk and
basically the idea was to automatically
synchronize gifts to music and to do
that I had to do a couple of interesting
things getting the beats out of music
I'm not going to talk about today but I
am going to talk about speeding up and
slowing down gifts which you would need
to do to synchronize gifts and music
because this is all I knew about gifts
right you can either use the J us or the
HTML API and you can put the gap cats in
the in the page and that's all you've
got and I was thinking maybe there's
some way of doing different playback or
something but there isn't so I looked at
it for a long time that's surprisingly
long time until it occurred to me that
animation is a series of frames and
potentially if I get the frames out of a
gift and I know enough CSS to to play
them back so that's kind of what I
that's where the project took me I
started to look into what gifts are you
just do minutes in a little bit and so I
read this specification this is actually
not the original specification but it's
a very good summary I mean gets
complicated right I don't want to do all
this so I didn't
the key thing in a gif is that this this
diagram of the top the kind of
architecture of gif which I've
reproduced with my html5 presentation
framework this is what I call a diagram
basically a header followed by a series
of frames followed by a footer if you
take the header and the footer and wrap
it around each frame you get a series of
well it animated gifs but they only have
one frame so they don't move but they're
all valid gifts and it turns out you can
do that pretty efficiently in JavaScript
I was surprised when I finished just how
kind of smaller code was like this is
the entirety of it and if you were
trying to decode the gif itself it would
be a huge amount code I mean I looked at
porting things but it would be a massive
amount of code but I didn't need to
because all I needed to do is rearrange
the pieces of the gif and then I could
have then I could have the frames so
that's all up there as well on the line
and once you have the frames you put
them in the Dom like that you put them
next to each other in a parent frame you
then can use CSS to sort of stack them
on top of each other and then depending
on the data attribute of the frame you
hide and show one of them and then to
play back the gift all you need to do is
just show the next frame at a particular
time and I use requestanimationframe
here so basically it doesn't matter what
I'm trying to do with the gif I could be
trying to play it back as fast as
possible I can play it back at its
native speed I could be playing it
backwards the only thing I need to
change in this screen is the result of
calculate frame at any moment in time so
that was kind of cool because it was
like the the realization that all of
this work and all this complexity was
now hidden and that all the strategies I
wanted to use to play back a gif
synchronized to something could come
under one entry point and so that's why
I thought I should release a component
so I want to take a very brief aside and
talk about dream code because it's
something I learned about the way the
hoodie project started
they're kind of philosophy or the
philosophy of dream code is to start
with the best possible representation of
your idea even if you don't know how to
implement it just come up with the best
well from my face the best possible gift
tag that I could come up with was the
replication of image tag and I didn't
know how to build it at that point I
actually didn't even know if it was
possible but creepy history guy he said
it was so that's all right so I got on a
plane and I loaded up the polymer
document documentation and I tried to
extract it into a polymer component
which was a huge success actually I'll
show you what it looks like now actually
so this is a gif a particularly good one
of the node popped up octopus you know
no ping itself but this isn't a gift
this is an ex gift so if I inspect this
element you can see each of these frames
are actually blobs that I've extracted
myself there's a oh that's really small
isn't it there's a a wrapper or a frame
that is counting through the frames
playing it back and that all sits inside
shadow root inside a custom element
called X gif and then it was a matter of
like what do I want to do with this
flexible component now I can't sadly
make that gift change to yes yes yes yes
yes as it comes back so it's just
reversing back and forward but I use it
a fair bit actually in presentations to
be able to play a gift once and stop
because I find playing a gift too many
times can be distracting unless it well
actually just gifts in general are
pretty distracting but otherwise I
wouldn't fill up 25 minutes all right um
the the speed is another thing that you
can change right so now he really gets
quite quick and then you can slow them
down as well but the stuff that I was
more interested in is things like the
beats per minute so here we have two
gifts on the page and they're
synchronized to the same BPM so if you
have say a whole page full of gifts this
will synchronize them all to the same
beat so that it's not as kind of chaotic
but I did one more little thing which is
that as you speed things up the bottom
one is like with this snapper tribute is
blindly following this beat no matter
how fast it goes and the top one is
looking at the speed of the gif and the
speed of the beat and trying to find the
best match so it's actually spanning
several beats because it's kind of a
longer gif and that kind of that I'm
really happy with because if you put
this into your page and you say hey I
want every gift on this page to be at
BPM 60 or BPM 120 they all find their
natural rhythm and it'll be you know
kind of good but the thing I was trying
to do in the first place which I which I
will demonstrate although I'll use a
different gift because I like it
it's synchronizing to audio so hopefully
this will work so the top one there is
spanning every second beat
and the bottom one is hitting every bait
and as I change things this was breaking
before so just kind of the console
if I change the speed above thee of the
audio the beat still synchronize and the
gift will no matter what for do you
throw it at what gives you throw at you
will always stick to me
so that's what eggs gift was for that's
why I built it and now I guess the story
is oh well here's the kind of full spec
this is the oh it's been a fair bit of
time trying to think about what would be
the best way to express this thing but I
launched this back in March and it was
it was pretty successful and so the rest
of the presentation is a bit more about
what happened after because got a lot of
attention right at the beginning and I
was thinking this open source stuff is
pretty cool I'm pretty cool
by extension but I wasn't super happy
happy with like it got a lot of
attention but not a lot of people put it
into their own page and I looked at what
I released which was you know in a rush
first time I'd ever done any polymer
stuff and I had seven files in this
directory because I didn't really
understand what I was doing and it was
not any 1k of data just together I mean
I know that gifts are like five and a
half Meg this presentation is 46 Meg but
um like 91k just seems like a bit too
far right the multi file problem can be
solved with a tool called vulcanize
which set up polymer team that's named
after a gladiator from the old
Australian nineties showed gladiators
who was also called Vulcan so I it's an
obscure reference but I'm glad that they
did it anyway Volcom will sorry
vulcanize will if you want in line this
sort of tree of dependencies for a
polymer or web component and build it up
into a single payload so I got it down
to two requests platform and and
vulcanized X gif and didn't say much
space still 84k but at least it got rid
of that first one but that wasn't enough
kind of for me to feel really satisfied
with what I'd released because I mean if
polymer just didn't feel like it would
fit for what I've done it's really a
framework it has opinions about how to
build applications but I'm not building
applications I'm building you know
something so much more important and
so all of its all of its kind of work
and it's um it's very smart ideas
weren't really applicable I thought and
the other thing was people wanted it
well I wanted it to work with whatever
framework they're already using why
would if you're using an angular project
that you gift lover like I why would you
put polymer on your page as well they
all can do custom web elements and they
actually provide common functionality
that I need to see use libraries in
polymer for so why wouldn't I use them
why wouldn't I take the core of X gif
which everybody agreed was fantastic and
adapt it to all of the frameworks that
are out there
keep the component API which I was
really proud of and just do the plumbing
and it looks like it should work and in
fact I thought that my talk would be
this is how you do it this is how you
adapt it you have some components you
want to release it this is how you adapt
it to all of them but it doesn't it
doesn't work or didn't work for me and
there are a few problems but basically
these frameworks which are written very
very cleverly are concentrating on
solving application development not
interoperability nor should they be
right there yeah they're just it's just
not part of their concern for example
when I came to doing playback inside the
actual element itself I have to change a
data attribute you know 60 times a
second potentially and so I just grabbed
the almond itself I keep a caged
reference to that element
I changed the data attribute react
doesn't really want me to do that so
when I was building the react version
I'm like okay well I have to kind of
abstract this out and because react will
give me a state that I can update and if
I'm using polymer and I've got the
shadow Dom I can just update it directly
and I mean it's okay if someone was
paying me to build this that's probably
what I would do but um it just kind of
felt like premature generalization and
I've been a Java developer and I you
know this this is a side project I
wanted to follow it where
the interest led me and this felt too
much like work and so I kind of stopped
on the project for a bit I was really
kind of you know I'd released the
polymer version and it was fine
but I wasn't getting motivated to
release other versions and it took a
long time before I realized what it was
that was different about polymer at that
time with everything else and it's the
shadow Dom the shadow Dom is the one
thing the crucial thing that the other
ones didn't have even though I could
convert it to angular very easily and
actually did missing the shadow Dom the
shadow Dom just gives you a place to
work and if you're building a component
having a space free from anything else
is really kind of it allows you to take
shortcuts and for me I wanted to take
all the shortcuts so anyway I stopped
working the project for a little while
and I wasn't really sure like I could
only see one solution which was released
this for every framework but thankfully
after a while I found another solution
so a couple months ago chrome 36 came
out and I'm not a big chrome fanboy in
any means but it was kind of important
for one particular reason a lot of
people talked about at the time people I
don't know have maybe not talked about
as much since but we've had full not
behind a flag no polyfills necessary
support for web components for the four
major specs and that's kind of that's
kind of cool because it meant that the
promise of web components is at least
possible in one browser and a major
browser that I looked into a bit more
and I was kind of ashamed to admit I
didn't realize that polymer and web
components aren't the same and polymers
built on top of web components not
possible without it but the web
component spec is something different so
I started looking into what it would
look like if X gift was a web component
and what did it feel like maybe more
importantly and a lot of the changes are
kind of superficial I'm using the es6
class inherit
thing which you should use to read and
that's the future of JavaScript so some
of the some of the changes are a bit
more annoying like polymer gives you
nice little callbacks for like hey
somebody changed the source of this gif
so I go and fetch the new gif whereas
I've got to do my own dispatch
if I'm doing a native web component
other things are a little bit more
difficult to get your head around if
you're writing a polymer component you
get this little nice little polymer
element tag with attributes and stuff
there's lots of documentation about how
to do that there's not as much around
doing it kind of vanilla but they've you
know they're very similar when you do
your own you have to setup your own
shadow Dom you have to find the template
element you have to throw all that stuff
in again sounds like work but this is
actually I just copy pasted this I mean
I didn't have to change this much from
the other examples I was seeing but
after all that the thing that you can do
is just import X gif it's one file
inline the JavaScript inline the CSS is
14 K and then every X gift tag is a real
tag on your page it works just like the
others except it's better and polymer
you know as I looked into a polymer
includes this thing called platform.js
which is basically a shim for the web
components features that are missing on
whatever browser goes down to ia 9 and
so I wrote a little thing to basically
detect if you've got full web component
support and inject platform itself and
so I realized actually this kind of
feels different to releasing a polymer
component this kind of feels yeah at a
different level and you might be
thinking that it's the same code doing
the same job and it's the same API so
what is the difference but the key thing
for me is that now I'm extending someone
else's browser I've written code and I'm
shipped it kind of under their radar and
I don't care if they're using react and
they don't want me to touch that part of
the Dom because I got my own shadow Dom
I don't care if they're using ember and
you know all right I don't care what
they're using I'm changing their browser
and that's kind of fun because
everything has to talk HTML so if you
want to talk to X gif you just talk H do
you know
so anyway that was that's kind of my
that's my webcomponent story I thought
I'd end with a couple of closing little
remarks which is this is like one
I should really reorder these points
this is one component that is much more
an image tag than it is anything else
you probably will be writing components
that are much more integrated into your
application and in that case you
probably want a framework but if you can
get a really nice HTML API and you
targeting as browsers start to support
this stuff natively then you're actually
doing something different to what you've
been doing before and you're actually
now being able to customize the runtime
that you've usually just been building
on top of and I think that's pretty
exciting because this is all changed in
the last few months and if Carl Sagan
says that it's awesome then it must be
that's</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>