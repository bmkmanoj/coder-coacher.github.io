<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Peter van der Zee: Visual statical analysis tool | Coder Coacher - Coaching Coders</title><meta content="Peter van der Zee: Visual statical analysis tool - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Peter van der Zee: Visual statical analysis tool</b></h2><h5 class="post__date">2013-01-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3mY03wGxByg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so um yeah I'm gonna present my
aesthetical statically analysis tool
alright whatever I'm Dutch so that's my
excuse my name is Peter I'm also known
as cue files or q folks depending on
which context it's kind of confusing for
some people so I work at uz boo actually
this is my first day today excuse ebu so
it's kind of cool alright so i built a
first i built a JavaScript parser and a
JavaScript parser is actually it's not
that easy to do I guess at least at
first it seemed like really difficult
but it was fun I really learned a lot
and it gave me a foundation for the tool
that i built and it's really a challenge
you know i i'd like to solve puzzles and
this was a huge one the big problem here
is regular expressions at least for me
it was when do you know when to parse a
division opposed to a regular expression
it's not it wasn't that obvious for me
it turned out later it was quite easy
but this is the main problem what do you
see here is this valid
another number that's correct it's a
it's a regular expression / regular
expression right so my first result was
a sea of G portrayed uses the grammar
it's best specified in specification it
uses that as a source so I didn't have
to bother myself with defining whether
whether I was parsing a regular
expression or not and so I kind of
cheated that way for myself it put out a
concrete parse tree which was really
cool and it's really it gives you a good
insight into the language but it was
slow it's really slow i did jquery at 46
k in about 24 seconds that's not usable
i mean it's it's cool as a you know as a
learning tool but it's useless as a
let's see the new resolution kind of
screw things up but this is like the
result that the concrete par-3 did is a
treatable so it will give you every step
that the specification would would you
know would would do if you would build
up the tree according to it but it's
used with you you don't need all that
information I mean it has for more
information i actually need so the tool
in the end is it's a nice learning
school if you want to know more about
specification but it's not useful as a
foundation to do anything at all so then
a colleague at my at my previous company
said that help told me that parsing is a
salt problem it's not actually solved
but for intentions and purposes this
purpose it was solved it you could do it
in linear time which means it must be
going much faster than my 24-second for
jquery so then at some point i changed
and i started from scratch and i wrote a
handwritten parser which just means i go
literally a character by character i
created tokenizer to build a you know to
find my my tokens my identifiers my plus
my minus whatever that's only one week
of course that was one week after i
build the other parts which took me
about a month or two but the new parts
took me about a week it doesn't use a
grammar
read all so it's it has the problem of
of doing extra it accepts it over it's
over accepting so I have a lot of more
education to catch soda partially became
the foundation for well you know its
foundation for several tools and the
tool that's the tool I'm coming two
percent right now I'm going to show you
it does what's index highlighting is I
guess pretty basic everybody has that
written nowadays it does a sort of form
of editing I you know I only did a tip
of the iceberg on in terms of editing I
you know there's code mirror there's a
cloud nine whatever they do much more
than that I only did the simple basic
stuff that I needed to work with the
application there's ferry will look up
jslint kind of messages error warnings
and what type checking it's in the
browser and like I said it's yeah that's
not so easy to do because you don't have
assumed the things that should be simple
you know stuff like carrots when does a
carrot move you'll have to pull
throughout every time it's really
annoying and well I didn't want to
bother without myself so the layout of
the application is the top is a text
area which is invisible that allows me
to you know get the copy paste for free
undo whatever I don't sleep all of it
with that I know there are also
implementations that use text areas that
are off screen and so they have to do
the pasting copy basing themselves so
the bottom is then the content layer
which actually has the syntax
highlighting it's actually what you see
and in between is a carrot layer which
simulates where the carrot would be
otherwise you'll go crazy because well I
i discovered that it's really annoying
not to have a carrot you have no no
orientation whatsoever and then below
that is a marker which you will well
will we become a parent yeah want to
help myself here another annoying part
which is not that apparent at first is
orientation of the carrot it's really
difficult to find your location your
location in terms of an editor because
you have
and these tabs they're usually you know
eight spaces or four spaces whatever but
in the browser they're always eight
spaces except it's not really the case
because if you start with a space the
remainder of the tab becomes seven
spaces and that's I don't know I had a
hard time dealing with that on top of
that you know browsers do wrapping they
do styling they do whatever if you do a
fun both found in Firefox your entire
the entire text Scrolls down like half a
pixel there's all kinds of these things
you have to take account that was really
annoying and it wasn't you know it
wasn't really part of my my application
I just wanted to create an editor but
the problem is you need to sync the text
editor on top of what you're seeing the
text that you're actually working on so
that needs to be perfect in perfect sync
and so these little nuances you know
they became apparent the code is a
various levels of insight it shows you
where you're missing you semicolons
which is something I'm not seeing in
most editors you know it some will give
you a warning like on the left hand side
but they're not explicitly telling you
where you're missing some ice when or
when or how you have used variables if
you duplicate them have you not use them
at all implicit global stuff like that
typing is that what it's it's it's an
implementation right now I have a better
idea on how to do it for next iteration
and and highlighting well I'll show you
in a few seconds it also does types of
properties so it will resolve every
whenever you have a variable and you use
a certain type of property on it it will
show you a list of properties and it has
resolved at some point so we will try to
match that it's not perfect and it
obviously has bugs and it's easy well I
can easily take that out properties have
types too so it does actually infer the
type of a property if it can it's I know
it's doing all kind of stuff out let's
see ya there are there's a few tools in
there like a mini far beautify it shows
you the entire forest or if you would
want to
and there's a problem navigator which is
a small menu so let me just get to the
meat of things this is basically the
tool which is crap alright so here you
see what's actually happening and that's
why I open unity so here you see an
undefined variable you you get the D you
on top of it which goes on a marker
layer here's a variable that's been
double defined the error up is the ETH
lend her a message that you should
always declare your variables on top
that's the years of prior usage so
you're using it before you're actually
defining it so you get a warning for
that and a shadow is no problem and
you'll see that it actually doesn't
recognize them as being the same
variable scope look up def depth it will
tell you if you're using like a high
scope so it gets you two three four etc
up to 9 app 10 point you have a bigger
problem in I think so there's a tracking
object it will track every variable by a
generic a little globe global object and
so every time when your carrot is over
it it will highlight all the other
instances I guess not that fancy but
here's your demonstration of typing so
whenever you assign like a number or a
string it will know for sure for certain
that at that point it is in fact that's
that type I mean it must be there is no
other choice so it can infer that of
course I mean using the same variable
over so it will tell you all the types
that it encountered but at this point in
the code it must be this type there is
no other way it also does complex well
or complex
as expressions and 4 plus is a rather
complex one because it can either be a
string concatenation or a edition which
is a problem by itself let's see there
is a it does properties in properties so
you know this property has also is an
object because you're trying to use the
data on it so it's very likely to be an
object of some kind and it has the
property of object which is I guess a
silly name but let's see a pro raised
skype fusing because it's it can either
be an object or an array and it doesn't
handle that very well it will lock the
array part but it will also do the
object part because you're using the dot
here it will do constructors in a well
somewhat limited level it will if you're
using new or if you using prototype it
will show you that you're using a
constructor so it will try to do that
but that's actually what I'm working on
right now this is not that perfect yet
same thing here it's a constructor yay
it does some dead code will show you the
as call n bones sign if you dead code it
twice to determine whether you're
throwing or breaking or returning or
continuing anywhere and if you are then
the remaining code must be dead code so
it's really simple one it doesn't do
through or false yet so you know if
you're using your through literal and it
doesn't know that the remaining code
only of the other branch might be false
might not never be used so this would be
15 it wouldn't detect the fact that this
never get reached
it also handles labels which is actually
quite difficult i never knew that labels
were dead complex but you can you can
break through basically anything if as
long as you use a label you can just
break back to any statement i didn't
know that it so that that became quite
complex here's some jslint warnings i
basically copied pretty much any of them
any way i could find anyways some are
really hard to decipher because all i
had was the warning messages here you
see some errors so these are the errors
of the parser actually took and we'll
show you clearly that those who are
errors that simply can can't be parsed
by the parser and assignment to a call
for instance is obviously illegal oh
sorry I can't do right thank you so it's
basically that's that's what it is and
then over here you have a navigator is
that readable so on the right hand side
you see how many times is a certain
error or a certain type of error
occurred on the left side you can
navigate through and on top you'll see
what kind of error there might have been
there the blue circle is an indicator of
where you currently are trying to look
at so I'm try I try to make the four
errors as as you know as a semantic as
possible so no generic you're missing
this or that I whenever I see an error
and I can refine it I try to which is
it's not always that easy but you know
sometimes it really just is and djs
linds errors are just kind of cryptic
but usually it's it's kind of clear
what's what the problem might be there's
a min of fire which is really a basic
one it does does variable reduction but
not beyond that it doesn't reformat or
it doesn't reduce code when it can so it
doesn't use new expressions your code
range the same
is there it has a beautifier which
apparently it doesn't like this code so
of course a live demo as always I know
something like that you can toggle
certain certain problems or warnings or
whatever which was a been working on
that so it's not complete yet but I do
mean to make it you know as complete as
possible and you can see the parse tree
if you would want to but it's a big you
know just a big plane parse tree so
that's basically it um you can find the
tool as you and jay has a calm and you
it's actually bookmarklet and you can
drag it into your browser and then turn
basically any text area in a website
into a world xeon and that's it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>