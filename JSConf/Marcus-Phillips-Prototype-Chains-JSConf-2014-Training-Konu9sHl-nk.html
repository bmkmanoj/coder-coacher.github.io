<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Marcus Phillips: Prototype Chains [JSConf 2014 Training] | Coder Coacher - Coaching Coders</title><meta content="Marcus Phillips: Prototype Chains [JSConf 2014 Training] - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Marcus Phillips: Prototype Chains [JSConf 2014 Training]</b></h2><h5 class="post__date">2014-07-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Konu9sHl-nk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so brother Ted change this is the whole
rule uh prototype chains it's one of
those you could get up and leave noun
type lectures this sentence encapsulate
basically everything through a lot
brother pen chains about prototype
delegation relationships it goes like
this
when eighty lookup fails on an object
the look I was delegated to that object
prototype
what is eighteen look yes you access a
property absolutely what does they
failed key look up a black shirt what
does a failed Keeler so if you look at
well as the property access that's okay
I'm never amazing what do you think that
when you hear fail he look up on an
option well that's what is return
but what describe to me the events of a
failed kilo
not to go but yes it looks in the object
it looks in the collection of properties
trying to find something that has that
team and it fails because the object
does not have something properly for the
key like the one you're talking about
I've stuff missing property name is a
failed lookout because based on the name
of the property it sounds like that
object doesn't happen so whenever that
happens you go and you look at an object
and it fails to find a property before
it truly fails and return time to find
it defers that look up to its prototype
it works kind of like this what's your
name froggen if I delegate my failed
lookups to program and somebody asks me
a question that I don't know the answer
to I'm going to just consult with it
quietly in the background and then if
you tells me an answer I get to pass it
off as it might plead nolo missing
properties it seemed like like you
worked at a law firm found at one point
you know mana keys I'm sorry
so let's is sailing you look like you
might sail coughing what do you what do
you work on every company ok analytics
analytics and statistical modeling great
somebody asked me a quest a question
pertaining to business analytics you in
the back
sorry hang on SEC god here's a web
address bubble from health so in this
world where I don't know anything about
how to compute you know important
statistical questions about the
analytics for businesses luckily I
delegate to someone who does know that
now someone asked me a question about
ask me a question about something simple
like you know what's a simple topic but
I definitely found enough to motor with
that colors ask me about colored signals
yes what is the difference between CMYK
and RGB CMYK is to do with additive
color whereas RGB is to do with subtract
so because I know the answer to that the
I was able to provide that answer
without delegating a lot of people ask
questions like well you know what
happens if something something about
questions that I do know the answer to
when a key lookup failed on an object
this relationship was not even engaged
in the instance where I knew the answer
it's very much when played with an
object in these properties if an object
has a property locally and you can sense
by the answer it does not consult with
it front of it but if you ask a question
and the object if you look for a
property and the object doesn't have the
property locally it secretly sent me in
the back
the first to its prototype object and
then passes off the results as if it was
its own now it's entirely possible for
the key look up to fail
further up the prototype chain at which
point Braga
would do what do you think what do you
think probably would just he didn't have
that key either what's that
bail out huge well so what would that
look like what would he get back to
what's that perhaps an exception but in
JavaScript when he acts as a property
that isn't available or that object
instead of throwing an error which would
be a perfectly reasonable thing it gives
you undefined so he could notice if he
doesn't have that property either and
give me undefined and then I'll cast off
undefined which is kind of what you'd
expect if there was no delegate
relationship I don't have it apparently
secretly silently my change of prototype
doesn't happen so I use a say undefined
if neither those insisting lame probably
had the opportunity to delegate the film
look up to his prototype it goes all the
way up the chain stops at some top-level
thing that doesn't have a prototype at
all probably the object prototype just
to sort of like brand any object of all
objects so all the truth you need is
contained in the sentence but we should
probably just explain explore the
situation a little bit does anybody have
any questions before we move up you
trying to access the property the
property is either available on that
object directly or it's not if it's not
the object doesn't immediately give up
it asks the prototype object and then
passes off whatever the prototype
do i yes I have a little example imagine
there's an object that represents the
president and the precedent you set me
up
Oh baby if the president knows important
stuff like what our strategy is right
like we're going to look to him for for
stuff about other countries supposed to
work that'll be great because nobody
knew to the president were like ain't
president some of the strategy 10-piece
suite and will not watch those things
that's if you have one president and you
interact directly with it but the
president maybe is overworked and we
want someone kind of like handling all
of the nonsense that the president does
speak to worry about the president
doesn't want to remember where his
favorite sailors shop is what the phone
number is he just wants somebody when
when queried to be like oh yeah he
really liked saying this just from you
know down the street right let's say we
hire someone to stand in the way of the
president and sort of be the firt the
buffer of information so that the
president is queried as seldom as
possible
here's the president this strategy is
peace and here's now how is just some
guy right and I go to have a look at
look it out I'll delegate to the
president what do you think with the
goatee some reason I love calling on
people who are I don't know why it's
sadistic he probably was really very
important but for some reason he just
stands out with a point what does fucked
up what do you think out of the gates to
the object prototype yes al has not been
specified to have any relationship with
the president of so ever we certainly
wouldn't want it to be the case that
every new object that comes into
existence delegates to the first one we
put in
let us make any sense our program should
allow us to specify objects that don't
delegate to other objects and these
object literals here these two curly
braces that's what they do so Alice is a
person there is no properties at all if
I ask if I set out to know what the
White House addresses and there's that
property on now then when I query out
about the White House you can say oh
it's at 1600 but when I carry out the
strategy how does it know I was like I
don't know I mean I don't know the
president personally so I can't really
speak for right this is gonna return on
the vine this season these with the
rules that you expect it to be the case
right but what if instead of Al being a
vanilla object what if instead that
created him in such a way that he would
delegate I would delegate to the
president there is a function that you
can run it will generate this
relationship or even called object
created so instead of two curly braces
we're going to
we're going to call I think that created
I'm gonna take this off the screen for a
second to give you an analogy that's
gonna be easier to understand
right here this box is they call it a
transmogrifier if we put something in
the box then we get something out the
delegates to that bit this is gonna get
ridiculous yes
all right so this is the transmogrifier
you put something in the top and on the
side sale this side you put something at
the top and out the side come something
that delegates to it how many objects
are we talking about in total in this
system two objects all right plus three
objects we have a machine you pass an
input object into this machine and out
comes a thing
three absolutely all right here we go so
pass something in and out comes a brand
new thing if you point to your what eww
- so I am the input and here's the thing
that delegates to me but this machine
this transmogrifier generates new
objects so if you pass me in again you
stay out there someone else would pop
out and they're beat down to things I
want
there'd be two things pointing to me I
wish I had another thing confusing so
now you can imagine I need two objects
both pointing to this thing that we
passed into the transmogrifier twice
this little pantomime is super important
to your ability to reason about the
system everybody gets these three
objects confused so in this world al
went for me the vanilla object to one
that we get out of this transmogrifier
we passed the president in to the
transmogrifier and this transmogrifying
function gave us a brand new object out
that delegates to the input object does
that make sense
are there any questions about what this
transmogrifier problem promises good
question
what's the difference if you just say
new president you are asking what the
difference is between this and another
language construct that we haven't yet
explored the keyword new your your
sample code fundamentally misuses the
keyword new in a way that I would go
into a lot of detail about at the
lecture tomorrow morning tomorrow
morning we examine the key word new and
how it works and how it doesn't work and
how people think it works and the very
simple rule as to what it does but right
now I would I would ask that you guys
table your consideration of the keyword
new completely for fear that we will
lose this conversation with things that
aren't necessarily needed so here's one
major realization we had in the
curriculum attack reactor is what it's
what allows us to teach the fundamentals
of JavaScript people learn it in the
first four days and the first four days
it teach people what to be the better
part of a year maybe a little over and
one of the main realizations we had was
that the key word this can be understood
completely in isolation of any other
object-oriented count starts in the
language and so we teach the key word of
this first and when people bring up you
were new or prototype chains you say ah
let's get to that minute let's just set
this in stone because it's an
independent concept we then stacked on
prototype chains which we're doing now
during which we do not need to think
about the keyword new adorned and fully
and completely understand
lastly we think about the keyword new
which requires us to understand the
first two so these concepts are stacking
and we're gonna get a lot of value out
of not having to consider that he were
doing well we're considering that
changes great question we have a
function called object.extend which you
know intuitively should copy the
president object and make a brand new
object that has all the same properties
but notice this transmogrifier did not
produce a replica of me right it
produced a new object that delegates to
me and this is slightly but importantly
different one important difference is
with mark standing here and me standing
here
I was manhood he was the output if I
have olive over time they look up stood
in will had an up-to-date version of my
information because he's going to
delegate them to me for the rest of his
life he is going to remember who to
consult when he's worried about
something he doesn't
understand but if this was if if instead
we passed me into a copying machine we
were gonna duplicate of my current state
that copy time and as I changed mark
would know nothing about the output
would know nothing about I think that
extent would create a duplicate method
for that moment in time and then no
relationship between the two objects
other than their intense similarity at
one moment in time they would evolve
independently but a delegation
relationship means that the two objects
will have a relationship for their
lifetime as long as object to is in
existence that the gem al belong the now
is in existence
he will delegate all his failed lookups
to the president in this case
you would end up with two objects that
share all the exact properties that the
original president at that moment in
time interrogating the two objects would
look quite similar but as the president
object changes the two techniques would
look very different one is a delegation
relationship that follows this rule the
other ISM ISM is an imagined copying
procedure and it does what you would
expect a photocopy to do if I put notes
on my original book the photocopy
doesn't change that's what a copy is
whereas a delegating object report
references the original every time
you've interacted it's like a delegating
object
what is your something something and
it's like well I need to know that or I
don't if I don't want to check with my
with my offspring
yes
absolutely so here we have this is the
entire in-memory model here al has this
lump property but he delegated to
president without this other property so
in my ass alum of the White House
he says it's at sixteen hundred of the
address if I ask al about strategy it's
gonna fail here fall through to the
delegate and be passed off as his own
pop quiz what what happens if we say
president dot White House no sorry
he doesn't know he delegate swear yeah
the object prototype nowhere
particularly interesting and so when we
asked him about the White House he
certainly isn't going to call al be like
it's very embarrassing right he's just
gonna he's gonna loan out he's gonna be
like you know what I'm the president but
I don't know a few details unless you
have questions details delegate to the
creator was Hakim decorate or knew he
would do is gonna be explained in detail
Imam delicate objects also delegated
plumbing their own chain proto not be
prototypes that we've covered all of
this for method calls we use the rules
we already learned look to the left of
the dot but it was there is what the key
where this will be bound to even if it's
found up the chain so if you call mark
dot jump amazingly and jump amazingly as
found as a property of me then mark will
jump amazingly because he was to the
left of the dot marked up jump amazingly
right does that make sense the keyword
this will be found using the rules we
already learned if it's a method call
you look to the left of the dot it
doesn't
that fall through happened and I
ultimately satisfied
I had the property locally if I have the
gem amazingly method and he tried to
access it on mark he's to the left of
the valley all-time mark dot jump
amazing we use the method invocation
binding Pat thumbs
keyword this bounds of the thing on the
left top still okay the back
Wow
and you change that whatever
yes extend works very much like a
photocopier you're building a brand new
duplicate that looks almost identical it
is an identity gender identity identical
the two objects would not triple equals
each other because they're different
objects just like Al and the president
are different people even if they have
all the same information available in
their minds it's a photocopy and so the
two do not track over time with one
another but delegation relationship is a
bit different for the lifetime of the of
the created object it will always
delegate field lookups to the target
I think it might have been following the
precedent of a few libraries I know that
jQuery had already implemented extend it
I think it is not exactly it is not
exactly a copy operation by some
definitions
one automated multiple right another
infant interesting thing about extends
that you can say extend some target
object with objects with all the
properties from from tart from source
object ABCDE yes all right
the extended operation is even more
general don't be very proud when you can
think of a thing anything so moving
right along so there's no antennas or an
access and optics prototype there's no
way for you to know who I was delegating
to now in newer versions of the language
this is less less difficult to get
access to and in some engines they
preemptively implemented ways for you to
find out what a prototype of an object
is but believe it or not if I give you a
random object there is no problem like
browser compatible way to tell me
exactly what that object prototype is
just go right off the map no cross
browser does that make sense
can I get a show of hands be brave here
if you are now or were don't until a
couple sentences ago under the
impression that al dot prototype was
present a lot prototype is that
president did you think maybe a women
just reason gonna make you feel better I
thought
okay now if you thought that was the
case and a few of you the recipes
wouldn't fit most people seem to think
that a given object dot prototype
property refers to whatever it's going
to delegate to that's not the case and I
would like you to imagine for the moment
that there is no way for you to access
the target that the object is going to
delegate to
so given mark you would have no way of
establishing that he's delegating
directly to me you certainly don't have
a way to change that association I knew
these things impossible now as I said
this is evolving and at a certain point
in time we're going to be able to do
this there's a there's a medium under
under proto under
academic in the chrome demography yeah
right
so chrome is one of those interpreters
that shows that gives you access and in
fact do anything to debug you can from a
problem you can programmatically read
the under under program under under
property and you can even write to it
but by the standards is no way to get
access to it and there's no way to
change those are the old six new
standards I think still doing a lot of
changing it but may allow us about
finding out what it is you actually have
it believe it or not you have never seen
code that says object up prototype
equals another object you will only see
code where you change to be dot
prototype property of a function which
is the whole construct will explore
tomorrow that I'd like you to pretend
you've ever seen trust me that can't be
done two objects it can only be done to
functions and it means something very
different than anything we've discussed
it's very confusing and it's easier if
we evaluate how that works with regard
to some other top when we understand
that on the topic it'll make a lot of
sense i right now pretend as though
there was no such thing as a dumb
prototype property in the whole language
panel so you can't get access to an
object's prototype in some browsers they
expose it at top under hundred proto
under honor
and we don't need to go over this I
would rather you guys have time to play
with to play with the exercises there
are some basically memory racism some
classic reasons that you would want to
do this but it wasn't something so
please go if you haven't already flown
this repo start following through the
read beat will pick up where you left
off on their EP and RTA's will be
circulating and helping you get on
stocks with any things you can stock up
cool
oh sorry about the lectures tomorrow yes
I can't find anything on those oh I keep
saying tomorrow is it my brain that's
what it is
right so it's turning at 9:30 we'll be
talking about asynchronous execution and
event systems then we'll talk about
those sharing techniques and I'm
probably going to stick something in the
little schedule here but stay tuned
alright lastly if you were joining this
today we'll be able to hang out with us
on Friday it's cool we have a lot of fun
you're more than welcome to talk to me
or anyone from the team if you're is the
student finding out more about the
classes that we do in San Francisco we
do this exact curriculum over and over
again every seven weeks we have
people coming in for an immersive class
to learn you know JavaScript techniques
and they come out the other side
extremely effective to the software
engineering stuff so it was kind of like
the foundation that we pour so that we
can talk about more advanced concepts
like the nuances of oo versus functional
programming various design patterns and
architecture patterns so that's that's
where we come from and I want having to
talk to you more about it or give you a
flyer for a time alright some teams if
you can wander around and see if
everybody's doing all right
we will link so that you guys can make
progress on the exercise</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>