<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>John Hann: Introducing RaveJS - Zero-config JavaScript applications [JSConf2014] | Coder Coacher - Coaching Coders</title><meta content="John Hann: Introducing RaveJS - Zero-config JavaScript applications [JSConf2014] - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>John Hann: Introducing RaveJS - Zero-config JavaScript applications [JSConf2014]</b></h2><h5 class="post__date">2014-07-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4XX9pAPBjA8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everybody thank you any questions I'll
be available later um my name is John
Han I work for a company called pivotal
you probably know us for some product or
some service or some division of us
somewhere I am the resident JavaScript
barbarian figure out what that means on
your own actually I work for pivotal
frameworks in runtimes department one of
the many departments and these are some
of the projects that we work on within
the frameworks and runtimes department
I'm very proud of these all open source
lots of other ones private source
private products and whatnot and
specifically what I work on a day-to-day
basis is the couch ojs toolkit so you
may have encountered one of these in
your travels or in your programming
endeavors so but anyways I'm not here to
talk about any of that stuff i'm here to
talk about javascript of course because
javascript is awesome and that's why
we're all here and actually javascript
has become incredibly sophisticated I'm
we all know that's why we're here today
you know we're doing all sorts of crazy
things that a couple years ago nobody
thought we were going to be doing you
know we're doing aop we do dependency
inversion inversion of control we don't
have all sorts of crazy architectures
we're doing things with other languages
trance piling to them integrating with
things like you know obviously if it's a
multi language environment in the
browser we got HTML CSS all this stuff
we've got package managers now you know
we got minim fires optimizers bill
you know which really was a WTF for me
but anyways with this sophistication you
know comes more complexity and of course
more machinery you got to set up all
this stuff you've got to configure all
this stuff and when you can figure all
this stuff now you've got a maintenance
task you've got a whole new sub project
just to have a javascript-based project
and this is what I mean when I realized
that that the good old days are gone and
we can't just you know add a script tag
to a minimal HTML file you know and now
we have to actually you know build stuff
in order to have an application that was
a big WTF so what happened to the good
old days what happened when we could
just do this we could just add a script
tag maybe a stylesheet just get started
coding you know if you want to do a
quick prototype you know this is what
you did you just took you just quickly
create an HTML page created a JavaScript
page linked them together and then just
started coding right so now if you
actually want to do that in order to do
that you kind of have to write crappy
code that's my opinion of course you
know but but if you really wanted to
prototype something and you want to do
it in an architectural e sound way you
want to do it with your favorite
framework or you would just want to
incorporate some you know of the the
current best practices you can't just
get started like that anymore so in
order to do it the right way you either
have to have lots of boilerplate lots of
configuration lots of machinery and and
it's just too much work in general and
in my day job you know we were we were
encountering countering this problem
trying to create tutorials one part of
my part of my job description is to
create tutorials so that the job of
folks out there can learn how to use
JavaScript and that's as an impossible
task on its own but then on top of that
if you have to you know you have to
explain to them okay first you have to
set up your your grunt file your gulp
file and then oh yeah if you want to use
AMD you know I had set up AMD config and
stuff it's just it's just way too much
stuff you can't you can't quickly you
know you can't get someone to the meat
of the problem quick enough now because
configuration is too too complex so
here's just a quick example this is an
actual project that I was asked to
consult for they started out with a 500
line grunt file and we said whoa whoa
whoa this is way too
much you guys have to be doing something
wrong right so we went in there and we
looked at first thing we said ah you
know you guys need to choose a module
system all this global stuff you know
number one you shouldn't be using
Global's anymore and B this is going to
cut out so much your grunt file and only
cut out a hundred lines of the grunt
file and then of course they ended up
having to have an AMD config file which
was 70 lines of code so so here's the
grunt file right here yeah so this is
this is a grub file and this is all you
know they did the research this is the
best practices stuff you know their mana
fiying all the things you know that
they're they're using less and
preprocessing it you know here's their
you know main DJ s so that they can they
can have AMD modules in the browser and
then there can you know the testing
config you know then they had to have
testing the fig and this is actually the
pared-down testing config that they had
so so can we simplify this mess and my
answer is yes we need to and if you've
been coding in java recently I know if
anybody has but you know this this code
that I'm showing up here reminds me a
lot of you know maven code or XML files
all the stuff that you used to have to
do in Java and I say used to because
this is a new projects out there one of
them from pivotal spring boot which
eliminates all of it so you basically
have no more XML no more you know
configuration you just get started and
so you know my boss has come to me and
say what the hell why do we have to do
this stuff in JavaScript still so so now
my job is to to try to eliminate all
this configuration mess that we have to
do in javascript so that's where rave
comes in so what is rave I'll tell you
right now it's not a new framework
you're not a rave global you're going to
code to you don't have to require rave
in your code actually we're not going to
touch your code at all so it's not
another loader it's not not an AMD
loader but it does have a loader built
in actually it has an es6 style loader
and it uses a shim built by guy bedford
who's here somewhere so pat him on the
back next time you see them he's doing
an excellent job on an es6 loader shim
so that you it's built for the future
you can load things like AMD you can
load common j
pretty soon you'll be able to load es6
and rave and you can load other things
to a lot of things you're used to
loading if you're using AMD now you can
load CSS text Jason whatever but
unfortunately it's not ready for
production yet you know you can play
with it now and we have again probably
about a third of the way to where we
want to be and at about two thirds of
the way we're going to say yes this is
ready for you to use so probably about
another four to six weeks I'm going to
try to get it in less than that but
let's see and we want your feedback
that's why I'm here today I want
feedback I want you guys to come tell me
and say this sucks you know this is not
the way we want to do things and and
we're going to try to accommodate you
and a comment people that maybe love it
so okay so what are we trying to do and
three bullets provide a default you know
instantly out-of-the-box configuration
you install rave bag you've got
something to run you've got a nap it's a
simple app it just it's basically a
hello world app but you've got something
and you can just immediately start start
doing something make it easy then to get
sophisticated you know start doing
things like the advanced testing install
your favorite favorite framework start
doing trance piling and that kind of
stuff makes it brain dead easy to start
doing that and then make it easy to
assert your own opinion again we don't
want to you know we have to impose some
opinion but we want that to be extremely
minimal so one of the ways to get a
default you know runnable configuration
is through something called a rave
starter and basically it's just a repo
on github you just go and you you
download it and you just you know follow
the instructions it's very simple
instructions just then launch a favorite
browser open up a favor editor ready and
you get started but there's also a way
to start from scratch and if I have some
time i'm going to show you both methods
actually how to start from scratch just
by typing in npm in it or bower in it
and starting from there so the way this
works the reason is no build step is
because the runtime by default is
responsive to the environment and
actually auto you know auto configs
based off things that can find through
the browser and so you get your in this
mode and if you used to require jsam
you just write code reload you know
repeat you know write some code reload
rights Cove reload there's no build
steps in the default AMD configuration
so we've reproduced that but in a much
more sophisticated way so that if you
want to get sophisticated we want it to
be a one-liner very easy to move over to
now you're building and then you know of
course when you're building now you've
got file Watchers you've got pre
processes you get transpires you've got
you've got you know bundlers and
builders and all the sophisticated stuff
and that comes with source maps and all
this all these things that could go
wrong so so we want it easy to go back
again and and and you'll be able to go
back and forth and back and forth into
whatever mode you want to and still zero
configuration and then of course tests
we want it to be brain dead easy to
start test we're not going to write your
tests for you yet but but obviously you
know testing its got to be an important
part of the strategy so when you want to
assert your opinion of course we're not
going to tell you what to write one like
we're not going to write your app code
for you that's up to you but if you
decide that you want to use angular we
want you to be able to just bang one
line you're starting to use angular if
you want to do something crazy like this
I don't know if something like this
exists but you want to use knockout and
backbone together I don't know if that
could even happen but if you wanted to
we wanted to make possible for someone
out there to create what we're calling a
rave integration package to allow
someone who's figured out how to make it
work to just push that out onto the web
and then you can pull that down and use
it so then if you want to add other
capabilities like browser capabilities
you want to start using web components
or you want to you know start loading
using the loader to load things that
besides just modules you can do that as
well and of course we want this to work
in multiple environments so spring and
rails are the ones that internally we
need to get working so okay so how can
this possibly work and the answer is to
metadata so we're going to by default if
you install a starter we're going to
provide a minimal amount of metadata for
you're ready and this metadata is going
to be in bar Jason or package Jason and
then if you knew it or not you're
already generating metadata so for
instance every
I mean you you do a bower install you
pulled some more data metadata down with
that package or anytime you do NPM
install you're pulling down additional
metadata and all I have to do is include
the dash dash save if I everybody look
at the dash dash safe okay do we see the
dashed a safe if as long as you that
you've pulled the metadata in a way
that's now discoverable and it's
discoverable without searching your file
system so that's very important for you
know for rave to be able to autodiscover
you know that the referred to be
responsive to the environment and then
as I mentioned before people be able to
create these integration packets so you
could just do Bower install or NPM
install my favorite integration package
that pulls this this and this together
and install it and that comes with
additional metadata and actually there's
an opportunity to pull an additional
glue code as well at that point so other
wave extensions we actually have a
number of extensions out there already
we've got 12 or 14 extensions out on on
NPM and Bauer at the moment so you know
of course you'd be able to you know
install some crazy integration package
we have we have a rave angular package
out there already we've got we actually
started working on a polymer package and
actually most of the ones on the screen
don't exist yet but they will soon so
then you know what's the easiest way to
allow a developer what is the one liner
that someone needs to type in order to
make this work so we're thinking okay so
we could create a rave CLI and that's
that's an interesting idea the rave CLI
we can remove the guesswork we can we
can do a lot of intelligent things
because right now you know if if you're
mixing NPM and Bauer which is possible
with rave you know you can get yourself
with these really nasty situations so
we're thinking about a rave CLI and you
know that's one way to do it but we also
at the same time we you know we don't
want to get in your way we don't want
you to have yet another CLI if you don't
want it so anything we do will also be
possible with the command lines are used
to NPM gulp grunt
and Bauer okay so this is the part where
I'm going to attempt to do a little bit
of coding and show you what this is like
okay and my cheat sheet has disappeared
okay
okay all right so just to try and
illustrate how simple this is supposed
to be can everybody see that fine that
the terminal window do I need to update
how's that is that good all right so I'm
going to make a directory and I'm going
to CD into it okay so this is this is
the bootstrap case where you're just
going to start from scratch so I'm just
going to type npm in it and I'm going to
accept just about all of this so what
was happened now I've created a package
Jason simple enough okay so I've already
generated some metadata they're just
from doing NPM in it so what I'm going
to do now is I'm going to install rave
of course that's i'm going to do and cho
not bad everybody stopped checking text
messages okay all right and for fun i'm
going to install an additional rave
extension that allows you to load text
through the module loader all right and
let's see okay so I'm just opening up my
favorite editor and you can see that you
know I've generated some metadata here
rave and rave load text are now in here
and neither these are now discoverable
by rave okay and i'm going to quickly
create an index dot HTML and i'm going
to give it a one-liner ok so that's it
and i'm going to create a main bjs if
you noticed very quickly i typed in main
DJ s when i was doing NP in it and asked
me what the name of the main entry point
would be so i'm creating something there
and now if I I am just going to serve
this folder under port 8080 too that's
what I'm going to do
and and it did not work of course all
right let me just see what's going on
here I have a feeling that chrome is
lying to me here let's try this 83 I'm
used to yes I'm used to an editor that I
lied this is not my favorite editor I'm
used to an editor that auto-saves okay
all right so console and yes we have a
yay ignore those four fours for now i'll
show you how to get rid of those okay
alright so not that interesting but
that's that's the startup experience
i'll show you a more sophisticated
application let's see okay so and let's
see i am going to attempt to pull
something down as tar file here let's
see how this goes
and it worked all right so I'm going to
stall a start a package here okay so if
you're watching this is installing a few
things I installed a rave aguilar
starter package so and if we look here
you can see that we've installed couple
things our angular and rave load Jason
but you can also see that we've got some
other things that transitively got
installed and we've got a minimal index
dot HTML here and the minimal boot j/s
file which is just a boot loader and
minimal main which is this is a common
J's formatted file that is actually
bootstrapping angular and if I come over
to the browser here and let's see do
this on port 8080 to the reason I'm
using different ports is because I had
some problems with with chrome caching
aggressively and or my web server ID and
figured out which one it is okay
let's try this one
here we go okay so now we have an
angular application running and you're
going to switch over to one more
application here and this application is
definitely more sophisticated than the
other ones it's currently running on
port 8080 one so it's right here it's
just simple to do the application I can
add some to do's it's communicating with
over web sockets to another port on on
this machine but let's take a look at it
and there's an index dot HTML here and
let's say you know I've got a you know
just quickly look here it's just it's
just a very simple MVC type application
but let's say I decide that I want to
incorporate CSS into my build process so
I'm going to stop using link elements
and instead I'm going to pull that in
through through my build and in and
build bundle that actually into the
JavaScript so I can do that but because
I've installed this rave load CSS rave
extension and now I can do things like
require my CSS a zipper or module and so
I just just switched over to that let's
see remember to save again and I reload
over here and so now take a look at the
elements here and you see that this is
commented out but we still have the CSS
because the CSS get injected at runtime
and and this all gets so the CSS would
actually get bundled into the javascript
in this case and so that's just an
example of one way that you can extend
the loader extend the capabilities just
by installing a package so
so basically it's right here because
because I installed it and I did Bower
install dash dash save it's available
there and and and rave can discover and
just know what to do with it okay so so
where is rave today right now we're able
to load Bauer look use Bower and mpm to
pull down packages we're able to load
AMD style or node style you know common
Jas packages we can we can load txt
files through the loader CSS Jason we've
got a whole suite of Cujo j/s extensions
out there and we're very close to having
the no configuration build story working
as well I said probably about four to
six weeks and that will be done I'm also
coming very soon es6 module syntax be
able to write you know in a very clean
import export type module syntax it's
probably still early because you know
the until browsers have implemented that
it's subject to change but will be a
will be offering it anyways for you dare
devils and then you know we're working
on some other things like angular and
integration even deeper that's actually
we are actually actually have that
started to so so I'm going to cut it off
there I've got plenty more to show you
guys if anybody's interested come see me
I can I can definitely show you some
more stuff and any questions right now I
think we have a time for a question or
two if anybody has question anyone yes
sorry
yes it will integrate integrate with
grails and/or spring how that works how
much is that that is in rave and how
much that of that goes into Grails and
spring I'm not obviously okay so so so
it's a good question you know like
Grails people aren't going to want to
they're not going to understand why do I
have to go install node in order to
build an app right so so that's a choice
and we've been thinking about about that
a lot actually and it's it becomes more
obvious when you think of the front end
as a separate application right but
that's why I'm also saying that you know
we also might incorporate some of that
into the the spring and the Grail side
as well so what for spring web jars came
up but the way the web jars is
implemented it can't work with this
sophisticated level of stuff was really
meant for for browser Global's and
there's some real nasty hacks and
therefore require jas but we're also
thinking about talking to them to see if
they can overhaul web jars but
right
right so use Grails instead of node and
so yeah definitely interested in that
that's that it feels like a larger task
right now because like I said we want to
leverage gulp and grunt first and used
to use the tools that JavaScript
developers are using instead of just you
know instead of what Grails guys are
using so but but definitely we've been
talking about it a lot and so we do want
to do it it's just not going to be the
first thing all right thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>