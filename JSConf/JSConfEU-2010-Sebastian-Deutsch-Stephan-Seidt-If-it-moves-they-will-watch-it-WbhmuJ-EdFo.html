<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[JSConfEU 2010] Sebastian Deutsch &amp; Stephan Seidt: If it moves they will watch it | Coder Coacher - Coaching Coders</title><meta content="[JSConfEU 2010] Sebastian Deutsch &amp; Stephan Seidt: If it moves they will watch it - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[JSConfEU 2010] Sebastian Deutsch &amp; Stephan Seidt: If it moves they will watch it</b></h2><h5 class="post__date">2013-06-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WbhmuJ-EdFo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Sebastian Deutsch and yeah hi
I'm Stefan I'm we're both working
foreign elements so today we're going to
think a little bit about animations in
the web browser so and how we can
achieve them we have several emerging
technologies as you heard in the talk
before in the new AP ice JavaScript API
s you get what you can do is like you
can use canvas to draw things you can
have scalable vector graphics for vector
animations and you can use the new css3
transitions to to do like Dom element
movements there are other low-level
techniques like WebGL or 3d which we
don't cover in this talk but they do
exist and if you have questions feel
free to ask them after the talk the
company we're working that elements got
quite popular when we released an HTML
canvas demo like two years ago and it's
funny because like we're a software
company which has a strong focus on
design but we are software company it's
like suddenly all people news for like
are you the company with the dots we
said yeah we're doing sovereigns like no
you'd accompany with Dawson now we
accept this life yes with the company
with it with dots and we've connection
of 5 yeah and that's cool please let's
open the demo no less knowledge
praying to the Wi-Fi got internets well
sure and we can skip it let's just go on
with okay can you close it yeah maybe it
starts yeah so let me just do a quick
recap of canvas I think some of you have
work you have done some camera stuff so
who submitted something to json' k to
the competition only one of you guys so
I mean basically that's just basic stuff
you have like a Dom element a canvas tag
in your HTML and then in the JavaScript
so that's actually coffeescript because
it looks way nicer and slides it just
get the element and get the 2d drawing
context out of that and then you can go
any just go apeshit you can do like you
can draw rectangles arbitrary paths you
can draw quadratic curves and stuff like
that I mean you can you can go
everything with canvas so let's do
animations with canvas how does it work
so animations in canvas at first it's a
little bit I don't know I was I was kind
of surprised so you have to do
everything manually you have like one
big draw loop in which you clear the
canvas like you fill it with the
background color which actually is a
very computing extensive operation
because you have to fill so many pixels
at least on most neck browsers I think
then you calculate positions of your
objects and you can wait so it's not
working may just take this demo that
should be should be fun I asked where
there's another canvas demo which is
offline as well on conferences
no actually it's nothing is working
since which one are we using chip work
oh it's our learnings like we open it
let's try this again and then we just
continue with it which the slides are
not working unless it was the evil cable
so so what we what we doing here it's
like we when we going into the demo
we're going to obtain the canvas here as
depicted here and oh yeah sure let me do
that and there it is and increase the
size a little bit right
you read it okay can you really okay so
what we're going to do is like we get
the canvas then we get a context which
is actually the the the instrument the
API where we can like draws the things
then we're going to define interval
handler where we like call a function
every every 30 / no times per second
yeah 70 sounds a second and we're going
to clear the canvas with with a fixed
width and the fixed wide and then we're
going to set the context like we have
like some particles we define some
objects and we fill them with a
particular color and then we're going to
draw a circle this is the arc function
canvas doesn't have a native circle
function so we're going to draw it and
it looks like this and we added some
movement so if you click your mouse then
they're going to move move there and all
that computation where you want to move
them what do you want to do you have to
do it manually you have to compute it by
yourself yeah so basically um I just
shortcut through the because I wanted to
show you I think now that the internet
is working it would be pretty rare to
show you the initial demo how about this
off I all session click the Sun City far
away
we had that one
you
there it is
so actually that was our first
experience with canvas you know it's
like getting data from Twitter like
tweets containing the word html5 then we
kind of visualize those on the black
background and do these random kind of
movements and actually that was that
became quite popular which kind of made
us go further than to that direction
because it's quite a lot of fun to do
animations using that stuff so let's go
back to the presentation so did like
there's another important thing if you
if you do like drawing on the on the web
so what about interaction so you cannot
like bind click handlers to elements in
the canvas because there are no Dom
elements in a canvas you are drawing
everything manually so what you actually
have to do is you get the XY position
from click events and then you have to
calculate kind of which element has been
clicked by yourself so that's that's
kind of tedious sometimes but if you do
it right it should work just as well and
actually there are libraries which
simplify that task so if you want to go
into canvas I recommend checking those
two out so the cool thing about canvas
is it's very flexible you have you can
do pixel level manipulations and it's
very fast for some some things and if
you if you draw something later on you
can just export it to an image and store
it and it also got some drawbacks
actually is resolution dependent because
you're always pushing pixel values so
unless you're using a framework where
you kind of have a way to multiply well
use into a bigger or smaller space you
are going you might have a problem but
actually if you scale up a canvass you
get this nice pixel retro effect and I
think yeah we have some some demos that
you already seen we have another one
Roger click here which we implemented
for a client who who has to visualize
communication between computer knots and
we were like thinking in the first place
if we do in with canvas or if we do it
with SVG and the task for the client was
like to create an visualization which
can handle up to 5000 notes and with SVG
it will be pretty pretty slow so we've
chosen canvas which is slow as well but
it's acceptable and we created that map
where you can can zoom in zoom out and
you can see if a node is online offline
you can click and as Jeff unset like
it's very most very tedious work to
create all the event listeners
introduced manually I mean basically if
you so what you're what you've just seen
is like hover effect so you have to
recalculate whether your mouse position
is on top of some object in your canvas
and when you click you have to do the
same thing okay this is another demo you
just you can draw shapes with canvas
like rectangles or circles but you can
do draw images or whatever bitmaps as
well and we created some some nice
control which is not like when you see
it you see okay this is flash but it's
more flashes canvas and you can click
images as well and you can highlight
similar results and they're going to be
focused and all those computations are
done manually this is downside but i
think the performances is pretty good
it's pretty comparable what you what you
can do with flash right now okay let's
come to the to the second technique to
two graphics which is a scalable vector
graphics test as we also mentioned is
the problem is that canvases resolution
dependent so if you take your browser
and you're going to zoom in the images
get very blurry so with SVG you don't
have that problem you have that and if
you if you're going to zoom in there it
doesn't get blurry at all because it's
vectors and so how do you do it SVG is
an xml substandard and it's a language
to define two-dimensional graphics take
it in a declarative way you can do as
well filters animations or even sounds
and one of the cool things is that is
its dom based so this is an example how
to draw a circle on a surface you see
the xml element for a circle the SVG
container and you see some attributes
like CX CY for Santa extent of Y R
stands for radios you have a fill color
and a stroke are you familiar what's
with Phil and strokes what it is ok this
is a more complex example where we're
going to define a gradient in in the SVG
definitions and then we're going to draw
an ellipse and animate the attributes in
it you can define the attribute the
animations natively with it but it's
rather complicated to do with Aneesa Mel
it's not it doesn't feel very yeah I
think it's tedious it's like you want to
say too and you say one plus one minus
one plus one minus one plus one to get
to two it's like very much noise very
little information so yeah you know I
think you know that yeah this is the
report from the nokogiri documentation
which is an XML parser it says like XML
is like violence but if it does not
solve your problems you don't use enough
of it luckily there's a very very nice
javascript library which is called
rafael des and this is the point where
javascript comes in it abstracts the
whole XML to nice JavaScript functions
where you just say circle or rectangle
and you can put as many objects as you
want on a on a paper which is equivalent
the SVG equivalent to canvas and it has
also some very cool animation functions
and it has also a vmail for fall back
for the internets
and it really works in the in the really
filthy process if you know what I mean
interaction with SVG is pretty easy you
can use the browser's native
capabilities because XML SVG is XML and
it it lifts in the dome you're going to
add an ID to your to your XML elements
and you say get element by ID and your
add an event listener for click for
mouse over or whatever and you have
basic interaction this is pretty easy so
the pros for refugee is that is reducing
resolution independent event handling is
a piece of cake and since it 6 ml you
can also spice it with Aria attributes
to medic made it accessible but you
can't do any pixel manipulation with
this a few if you want to display many
objects many pixels or you want to
transform something from color image to
grayscale image then SVG is not for you
usually it's slower than canvas canvas
this really depends them on the on the
browser implementation and it definitely
needs Rafael for if you like want to
support all all browsers we use it in a
client's work where the the goal has to
be to create something which which works
in most browsers and almost this stuff
you can see here the pie chart is done
you can like create some shares and you
can have some funding round for your
startup and sit in Rafael yeah actually
it's done with Raphael a giraffe I'll
ride yes it's a plugin on top of rough
l0l where we have like very nice
interactions and even this little icons
here are done with with rivera as well
so they scale very nice it's pretty cool
so
so another example we really like those
dots and yeah it's your company with the
dots over yeah lighting the way we
decided to stick with that so yeah so I
think the what kind of emerged is the
most awesome way to do animations in the
last year or so is css3 so I don't know
if you know this side I mean it has
nothing to do with animations but I
think that's a lot of box shadow you see
a glow so those rays are glowing so if
you if you're trying to do animations on
this thing so here basically those are
all lives those are all lives with box
shadow and they are rapke transformed
into place so if you animate them no
matter the browser it doesn't work
because it's so much not hardware
accelerated filter stuff going on
there's no way you can get above 1 FPS
or something so yeah so we implemented
the same thing again and actually it
runs not that fast in chrome because
chrome is not hardware accelerated but
if you run it in safari on iphone the
ipad you can run it and so far here but
we go no yeah maybe this is what we're
going to show you on the iPads like we
implemented the whole three dot thing
you're going to release it after the
talk on github so you can see the source
code for yourself and we implemented the
first thing in canvas which is pretty
slow on the iPad it works but it's it
looks it does not look so nice we have a
SVG version which is slight far sir but
not that fast as well and we have a
hidden champion at that point it's like
a version with CSS transitions and these
are almost like run at full frame rate
so it's very very interesting things to
use to use and abuse CSS transitions to
create animations
so quickly pick a quick recap again so
how do you do effects how can you move
elements and transformed and oh actually
that is the process a WebKit transform
sorry so and the second thing how do you
and how do you do animations well you
use the transition or the animation
attributes so just a very quick recap
you have like these four parameter value
to set where you say which value you
want to animate for how long given a
timing function so there's an extra
slide for that in a second and you can
like set an initial delay so if you want
to delay it transition or an animation
you can do that so timing yeah we dig a
little into into some timing functions
if you do animations you can do you have
several possibilities possibilities to
add a tyrant function its linear is is
in is out is an out and cubic z function
and we try to explain it visionless like
move the object from a to be at the in
the same same time with the same
velocity easing means start with the
higher velocity and and then do
celebrate decelerate in the end even is
it decelerates in the beginning and then
gets faster is out is the same like ease
ease it out is like having balls
deceleration in the beginning in the end
and cubic busy is the possibility to add
your own spline function to have like
like a bounce or something you can
create very interesting stuff with this
one yeah so basically you have for for
transform up operations you can push
into most browsers so you can translate
stuff which means moving it you can
scale it you can rotate it and there's
this nice metrics attribute where you
can basically you can feed it your own
metrics which might be pre-calculated
which my
come from a native iphone clients so
diamond mo coming up so and what makes
so css3 animations super useful well we
already said it so the problem with
canvas and SVG is it's not hardware
accelerated in most devices I think by
now I 9 is the only browser accelerating
canvas it's a true know which one it was
well Mozilla yeah for that's awesome so
well and of course interaction is also
native because you just animate Dom
elements and old story so okay on iOS it
is super powers but on androids little
sets like all the nice transitions you
do on iphone which one like at full
frame rate they look they don't run a
full frame rate on Android sadly and
unknown WebKit it looks more like this
yeah luckily Firefox 4 implements
transitions funny thing if you do a
translation of an object and Firefox for
its slower to do it with with with the
transform properties with the matrix and
transitions rather than set your own set
interval and use margin-top and margin
left but they implemented it and they're
going to improve it and one day it's
going to be fast enough to do everything
you want to do with this okay so I'll
basically put to wrap it up a little and
you have to decide which one you're
going to use to solve your problem and
there is no best solution but here's
some advice so you kind of know when you
have to solve your problem you think
about okay does it run on mobile does it
run on on the desktop so that's a white
rule of thumb if you go mobile you
should go for css3 transitions and stuff
like that because that works really
really well you also have like when an
animation or if
addition is finished you get WebKit you
get Tommy whence being fired so you can
change or gather animations it's a bit
limited at the moment but it's working
quite alright and yeah so yeah so first
you look at the device and then you look
at the problem you're trying to solve so
you've seen the network map if you have
like a huge can with canvas with many
notes you shouldn't put that into the
dorm you just draw it so if you wanted
to run in all browsers in the most
process possible you use SVG but you
have to keep an eye on performance if
you want your super mobile solution then
go with CSS transitions if you if you
know that your target audience is going
to be iphone users iPad users then go
with CSS transitions so I'm trying to
access the last demo on the iPad so this
is I'm going to access it here oh by the
way that's a that's a cool canvas game i
think is it cameras yeah it's canvas the
game was just a created out of curiosity
what you can do with canvas and it also
has sound yellow we're running away from
ie6 trying to eat us yeah it is never we
have just one level finished because we
had no time if we first iteration was
like man that's so awesome like now make
it super super awesome and then we know
you know how project goes sometimes you
have client work to do and so that was
before I 9 we wouldn't have done that
now so yeah okay all right thank you
very much
any questions no yet is it not yet the
source for the game this game was
created by some interns at night
elements so the source is pretty
undocumented pretty buggy and we always
wanted to clean it up and then release
it but we we do not have time until like
mid-2011 and maybe we're going to
release it for the sake of it and then
 it and clean it up yeah okay all
right thanks objective-c client running
on here capturing the gyroscope theta
and it's connecting to a node which is
running on some server in Germany I
don't know where and so the the web
client is connecting to the note why a
WebSocket and if i turn my iphone like
that I get like yeah it's like yeah it's
pretty rad it's not normalized so if I
hold it like this it's it's up
but I could like subtract the rotation
value from some initial starting point
and you could also hook up WebGL to that
so this could be like a virtual kind of
object you could turn and look at which
wich might be very interesting so it's a
little bit going into the I went to
trial the reality direction I guess</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>