<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JSConf 2015   Kyle Tyacke | Coder Coacher - Coaching Coders</title><meta content="JSConf 2015   Kyle Tyacke - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JSConf 2015   Kyle Tyacke</b></h2><h5 class="post__date">2015-09-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wjpix0VCeoE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so as you mentioned my name is Kyle
kayak the divide alup it's talk is
communicate all the things what that
means we're going to talk about web
communications and more specifically
about the capabilities that you now have
access to as front-end developers to do
communications on the web so well we're
kind of late and last couple people to
get in if you guys want to follow along
this is a live deck it should update
automatically if you just head to this
URL it's goo GL / AP capital j capital f
capital N and the number 7 that'll be
important later we'll do some demos and
I'd love to actually get some audience
interaction will try doing a video call
and maybe a little screen share so if
you guys want to go ahead and hit that
URL will run that throughout the session
here all right so everybody ready let's
do this thing so what we're going to
talk about today we're going to take a
look at WebRTC sort of what it is what
it allows you to do is devs what the
spec looks like how it functions I don't
talk a little bit of our spoke company I
work with what that framework allows you
to do how it simplifies your lives a bit
and we'll look at some code samples some
implementations of WebRTC using response
Crean sharing talk about messaging a bit
and if we have time at the end we'll get
into QA this is a bit of a short session
30 minutes isn't a ton of time so we're
actually going to kind of cruise through
this rather quickly um if you guys can
just hold questions till the end that'd
be great too so Who am I and why should
you actually listen to anything I have
to say like you mentioned my name is
Kyle taya I'm a flash and web developer
it's been about 10 years is a flash
freelancer doing ton of ActionScript
work which kind of led the foundation
for where I found myself today with web
communications flash did a lot of
peer-to-peer stuff video streaming audio
I mean sort of laid the foundation work
for where javascript is now coming up to
speed with this communication stuff then
I got back into front ends and now as i
mentioned i'm a developer evangelist for
smoke coming out to conferences like
this and talking to great folks like you
about web communications i'm also a huge
beer geek so if we have any home brewers
in the audience find me at the karaoke
party tonight or at the beach tomorrow
I'd love to talk beer and talk about
that fall day
so what the heck is web RTC it's defined
by the Mozilla Foundation as a free open
project that enables web browsers with
real-time communications it's the RTC
portion capabilities via simple
JavaScript API so what does that mean
exactly free it's free you can use it
it's built into the browser it's part of
the html5 spec or is at least being
proposed to be part of the html5 spec
meaning you just have access to it for
free you don't have to buy a license you
can just play around with it open its
open sourced into the BSD license so if
you're one of those crafty developers it
likes to contribute to projects and i
highly recommend all of you do on you
can actually add your own features into
this and make contributions to the spec
and might actually see them go live
real-time communications this is sort of
the the meat of it all it's audio and
video and data in real time so basically
what WebRTC does is to figure out how to
connect to browsers and create a peer to
peer connection between them so if you
think about kind of how the WebSockets
work but you take that middle layer out
and just connect the browsers directly
one to one that's what period of your
communications does and the real-time
portion of it is real time so think
about video and audio in real time the
way you talk to somebody on the phone
that's a real time conversation the same
communications capabilities are coming
to the web browser so if you think a
Skype or Google Hangouts those are kind
of good examples of this type of
technology being utilized today and
JavaScript API is as I mentioned it's
built into the browser it's part of the
html5 spec so it's stuff that you can
just access natively with the JavaScript
you know and love today and I'm assuming
I have a very large audience of j/s
developers in this room given the
conference yeah all right so this would
be a stuff that you guys can easily work
with you don't need to know anything new
you don't need to learn anything new
other than the api's and you can just
start working with it using javascript
the contributors Google Mozilla and
opera are the big ones IE is kind of
Microsoft working on their own
implementation of RTC which sort of
mimics WebRTC with a few tweaks of
course no shock there but they're
actually also contributing back to the
main spec so there is some back and
forth going on between google and
mozilla and ie which is good because the
hope is that one day when they finalize
a spec and things firm up and sort of
they decide on and how everything is
going to really look and we're
uh that everyone will implement one
version of this spec again that's that's
a hope it's maybe a dream but things are
actually looking like they might go in
that direction so WebRTC in the wild
what are people doing with this stuff
already you guys may have seen Amazon
made a some time ago the Kindle Fire X
was launched updating and we have our
first demo issue here wow that's awesome
alright guys bear with me i'm going to
go go a little bit rogue on this oh
we're up alright so Amazon Mayday when
Kindle launched they added this new
feature called the Mayday button
basically allowed you to click a button
and be immediately connected with a
sport rep at Amazon who would then be
able to access your screen circle the
mail button to show you how to use email
apparently given this example um and
then shut you know with a video with a
shiny happy support rep from amazon i
have tests of the service this is not
the person you talked to i can tell you
that very plainly they were very helpful
but not nearly as shiny or happy as
portrayed in their marketing campaigns
that being said it's a really cool use
case right you've got live video
conversation happening with the support
representative you're getting immediate
feedback it beats the heck out of the
you know the existing kind of chat
support or even the worse and more
standard phone support that you get for
most companies and they built this using
WebRTC implemented on top of their
existing phone systems so they used web
RTC for the video portion at least from
what we can tell and then the existing
stuff went through their their normal
phone support line that they already had
in place one you guys might have seen a
little bit more is google hangouts this
is one that i'm guessing most people in
this room have used at some point you
may have noticed in the past you had to
download a plug-in to use google
hangouts no longer as of about six or
eight months ago they rolled it over to
officially use WebRTC so kind of eaten
their own dog food there to do the
functionality for things like the data
transfers and the live video
conversations as well as messaging i
believe so a good example kind of
showcasing a lot of the functionality
built into WebRTC apollo is actually a
chat client we built it respond we
didn't like hangouts for specific
reasons so we built our own
we used our own tools to roll our own
version of a communications out this
actually has things like screen sharing
file sharing group messaging phone
conversations you can dialect somebody's
phone or you can dial them directly over
the web using a video call and again it
was just something that we built a
custom tailor a solution for what we
needed as a remote team pure CDN this is
actually a really cool implementation
these guys built it's essentially a CDN
on your website so what you do is drop
in a JavaScript library and it scrubs
your web your website for static assets
so things like PDFs large video files
images anything that's static that you
would normally just have every user
download from your web server and what
it does is to look and see if anybody
else currently on the site has those
files already if it does it creates a
peer to peer connection between the new
user and the user with the files and
actually sends the files directly across
that peer-to-peer channel and what
that's doing is saving you a ton of
bandwidth costs so instead of everyone
in this room going to a website and
downloading every single file thus
charging us a bunch of bandwidth they're
actually creating a network around the
people in the room and streaming those
files when possible directly from person
to person so kind of akin to a bit
torrent client in a way and again then
with savings can be really huge on that
especially when you think about things
like large video files that you might
want to share you know 10 10 megs at a
time through a bunch of users could cost
you a lot of money in bandwidth cube
slam this was an example Google built to
kind of there we go to kind of showcase
the gaming potential for WebRTC so they
actually take advantage of that peer to
peer connection to stream JSON objects
with live game updates so if you think
about normally how you'd set up a game
online you have some sort of a gaming
server in between all the data would go
from one user up to the gaming server
and out to the rest in this
implementation they built a sort of a
pong style game where they're using
video to actually show you the user
you're playing against and audio so you
can talk back and forth and then using
that same channel to just send simple
JSON objects with the game data so as
updates are happening in the game the
position of your paddle the position of
the puck it's sending all that stuff
across using just just json through the
the data channel some more altruistic
examples that I think are actually
really cool speak
exchange is one that I was just recently
shown this is basically connecting
elderly retirees or folks in retirement
homes in the US with non-native English
speakers or students in Brazil and what
it does is to connect them via video
chat to allow them to practice their
English so it's taking folks that are
rather lonely and just looking for
somebody to talk to you with kids that
are trying to learn English and bringing
them together via just a simple web chat
built on top of WebRTC and again all
they need to do this is to go into the
browsers that support WebRTC so Chrome
and Firefox are the big ones and they're
able to have this video communication
happen there's no plugins there's no
software to download that's kind of a
big thing and again as speaking exchange
building this they're not paying all
these huge bandwidth bills to host a
server and actually stream all that
video data through that server and
another one that's a personal favorite
of mine is be my eyes these guys came up
with a concept to build an app that
would allow site challenge people or
blind folks to actually dial into this
app and request help so imagine you're
blind and you're in your apartment and
you need to know if the milk is spoiled
right or you're on a subway and they
don't have a Braille system you just
need to know which track you need to be
standing by this app actually allows you
to open up the app request help from a
sighted person they then connect via
WebRTC over a video chat you can show
them what it is you're looking at or
trying to look at and they can explain
it to you or describe what it is you're
seeing or read the text that isn't in
Braille so again kind of a cool way to
look at you know use or potentially use
for this type of technology so it's just
giving developers like ourselves a new
way to to work with communications in
the existing stuff that we know so in
JavaScript in our language we don't to
go out and learn actionscript or use god
I even suggested flash to accomplish
something like this we can just do this
stuff using javascript so how does it
work kind of like this everybody
remembers the old tin cans and strings
as a kid right you got a tin can on one
in a tin can on the other end you've got
a big string in between well if you
place the tin cans with a browser and a
string with that peer-to-peer channel
that we were talking about this is kind
of how WebRTC works you've got two
people that want to connect WebRTC
figures out how to make that connection
happen and then once you have that
channel open you can send whatever you
want to cross it whether it's video it's
audio data it all streams directly
across so to kind of bring this example
home a little bit more we're gonna talk
about Bob and Alice Bob and Alice met
an online dating site like many of us
today and we're using the example of
caveman date calm I wanted to use paleo
date calm but apparently that site
actually exists for paleo eating folks
that want to date so if you're really
into meat and nuts and you want to meet
a you know another person that's into
that same thing check out paleo date but
caveman date calm is our example for
today so Bob and Alice Medicaid mandate
and doing the smart thing in the world
we live in today they wanted to have a
video chat and kind of test the waters
before they went out on their first date
so in an ideal world the browser would
update quickly enough that I could
actually talk to it it would look
something like this Bob and Alice would
exchange some information through a
process known as signaling and what
signaling does is to basically say hey
I've got the capabilities to share a
webcam I've got the capabilities to
share my microphone and here's some
information about how to access me so my
local IP address of my port then share
that stuff back and forth and from that
they would be able to establish this
peer to peer connection we've been
talking about but as we all know the
real world isn't so much I deal in the
real world we have NAT which is the
network address translation which is
what allows us to have these vast
networks that we have today so things
like your your router at home or maybe a
firewall at your workplace these are the
things that both allow us to have the
networks and connections that we have
existing today but also block us from
connecting to one another fortunately
there's a thing called ice this is a
technique used by WebRTC to sort of
traverse that network translation issues
so around that it basically figures out
regardless of your network topology how
to make those browsers talk to one
another so if alice is at work browsing
online dating and Bob's at home or at a
coffee shop somewhere public let's say
Alice has a big firewall in place and
Bob's wide open Bob's going to try to
figure out okay how do I talk to Alice
he's not actually doing this is what's
happening sort of on the back end
through WebRTC in the browser but he's
going to use a thing called a stun
server and what the stun server does
it's got one role and it's essentially
just to say you know how do you look to
the public so when Bob wants to talk to
Alice first thing he's going to do is
send a little packet to the stun server
the stun server is going to say hey Bob
you're wide open here's your IP address
here's a port I can access you at you're
good to go buddy Bob's going to get that
little bit of information back he's
going to
send that over to alice alice is going
to receive it then she's going to say
okay well now how do i connect to Bob
well alice is at work right so there's a
big fire wall in place she can't really
be accessed publicly so she's going to
send a packet out to the stun server
they're gonna say well Alice I don't I
don't really know what you look like
you're behind a firewall I can't get
right at you so that's where this third
piece this turn server comes in that you
see here basically that's a way to relay
around nap so normally in an ideal world
and this is about eighty-six percent of
the time given statistics Bob and Alice
would both be open enough that they
could connect straight away so they both
get their IP addresses they both get
their ports they'd connect and
everything would be done we'd have that
peer to peer connection but given the
case of the firewall which is that odd
fourteen percent time where there is
something preventing that from happening
the turn server is going to come in and
basically act as a relay so alice is
going to send some information back to
Bob saying hey here's the turn server
this is how you're going to get access
to me Bob sent Alice the public IP and
port when Bob sends information over to
Alice it's actually going to go from Bob
to that turn server and then down to
Alice when Alice sends information to
Bob it's going to go straight across so
in an ideal world what we're hoping to
accomplish is you're going to have a
peer to peer connection where the data
goes directly across and both in both
both directions but in the case of you
know network issues or something like a
firewall you're going to reuse that
relay server that turn server is sort of
a backup so what this ends up giving you
is a hundred percent coverage or 99.9
I'm guessing it's probably some weird
scenario out there that won't work still
but the the piece of takeaway from this
is through this technique known as ice
we have the capability to connect pretty
much everyone peer-to-peer so that small
percentage of the time you're going to
go through that relay server you're
still going to pay some bandwidth there
but the rest of the time you're
basically going directly across that
channel and hopefully saving a ton of
money on bandwidth so the complete
connection would look something like
this Bob and Alice would exchange
information ideally they'd share stuff
across that period if your channel in
non perfect worlds they'd share some
stuff through the turn server and the
rest would go across directly simple
right you guys ready to run out there
today spin up a couple servers configure
them learn all about the api's and start
playing with this stuff that's kind of
where we spoke comes in so resposta
bella purrs the ability to easily add
real-time communication
so their app the key being easy it's
sort of like WebRTC but we wrap
everything up for you guys so the turns
server the stun server all that
signaling process the whole connection
piece you don't have to worry about that
you can just focus on doing what you do
which is developing applications so if
you remember Bob and Alice the signaling
process is done server the turn server
with your spoke it looks something more
like this you connect out to respond
that whole handshaking process for you
figure out how to connect you up and
then all you have to worry about as a
dev is really creating the application
and how they're going to connect so
whether they're going to have a video
call or they're going to have an audio
call or they're going to share some data
back and forth that's really all you got
to worry about so we take care of kind
of the the harder bits for you good old
Billy banks my homie but wait there's
more there's a few features that we've
added to kind of round out the stack so
you might be wondering well ki could
still go and turn out those servers
myself what's the value here one it's
open source our javascript libraries are
at least that you can edit and add
features to yourself cross browser
supports so all of those nights prefixes
that we love and hate so much we're
taking care of those for you concepts
like endpoint discovery and this is kind
of a big one that's not taken care of by
WebRTC so how do you find people within
the network right how do you find people
within your application framework that
you want to talk to you that stuff
doesn't really exist natively in WebRTC
so you have to sort of bake it out
yourself we add capabilities and methods
to handle that stuff for you concepts
like groups messaging features so if you
want to send messages out to a group or
to a single individual we added those
capabilities as well things like
presence whether or not you're online
offline available we had capabilities
for that and a really cool one phone
system support so if you want to have
your mobile or web app talk out to the
traditional phone network so you wanted
to have a button on your site that
allows you to call up somebody else's
phone or vice versa you want to have a
phone call into your web app we added
that support as well and there's also
mobile SDKs WebRTC is currently not
supported in most if not almost all
mobile devices so we added the
capabilities to do those as native
applications and tie them into your
existing web apps all right let's get
down to the good stuff the code first
thing you want to do if you want to play
around with remote for a mark to set
over torr spoke that I oh and get a free
developer account start playing around
plug their getting connected to sort of
the first
and I'm going to actually switch this
out to show some code view here so
sublime text a little easier is that big
enough for everybody not sure we're
going to get everybody all the way in
the back but thumbs up thumbs down up
all right I see pretty far back there
sorry bud you're gonna have to come a
little closer um okay so getting started
with this how it all works it's just a
JavaScript library so you dumped in and
include and you're off and running
getting connected like I said it's kind
of the first part that whole signaling
portion we talked about exchanging
information how we connect two browsers
together that's going to happen during
this connection phase and to do that
you're going to have an app ID this is
kind of how you identify yourself within
their spokes and how you identify your
application it acts as a container of
sorts so anything that connects users
into that app ID is going to be sort of
your container for all your users so if
you guys all connected under this app ID
here we'd be able to find each other
everybody in this room if we split half
of the room into one app ID and half on
the other it would split that the group
down so the half on the left wouldn't
know about the half on the right so your
app idea is basically your container for
your application there's concepts you'll
hear me to mention endpoints and peers
those are basically just users or
browsers so an endpoint is somebody that
you're trying to connect to so the first
step is creating an instance of the
client object to do that with respond
respond yet client we're going to pass
in that application ID and then there's
a key piece here called development mode
we're gonna set that to true basically
what this does is handle all the token
authentication for you so in a
production application like most
frameworks you're going to have to take
care of token off indication and
management of user privileges with
development mode we're just like leave
that wide open so you can just connect
in play with all the different AP is all
users have access to everything it makes
it a lot easier to get up and running
and start doing proof-of-concept work
once you're ready to go into production
you're going to have some simple stuff
you plug in using a node library maybe
to handle token authentication so once
we get that client object we can start
calling some listeners on it and calling
some methods the listener we're going to
add here is connect and that's basically
the event saying hey you're connected in
the framework start playing around your
video
calls are ready to rock your you're
ready to start going and then to
actually get connected we're going to
call client connect and pass through an
endpoint ID and in this case it would be
the idea that I wanted to connect us so
if i connect it in his Kyle I'd pass in
the username Kyle or an email address or
a grid however you store your users in
your database it's up to you as the dev
tough to pass that stuff through but the
endpoint ID'd the takeaway from that is
that's how you're going to find people
within the system so if I login is Kyle
you guys can look me up by Kyle so
that's going to connect us the kinect
event will fire off and we'll be ready
to roll jump back over here for a second
so yeah is it a little bit of glitch
here
alright so messaging given the time here
we're going to just look at the code for
this so messaging very simple you
connect up once you're connected you can
start accessing the methods available to
you in the framework so a messaging
would be I want to send a message to
another user this is an example of
point-to-point messaging so me to one
other person and to do that you would
call client listen for a message event
that's when you receive a message from
someone and you just get back an event
containing the message data and all that
is is a simple JSON object just
JavaScript object so you can access you
see here event message message that's
going to be the message value of what
you've received to send a message you're
going to first get the ID of the person
you want to talk to you so in this case
we're talking about remote ID and this
is just some jQuery I've used here to
access some inputs endpoint that's the
person you want to talk to you so we're
going to call client get endpoint
passing in the ID of the person we'd
like to talk to so in this case if it
was John I'd passing the idea of John
and once I have access to that end point
i can start communicating with that
person so I'm going to call n points n
message here with the object containing
a message property and the value of the
message I want to send to that person
and that's really it for sending
messages so you could get a simple chat
application going with that pretty
quickly so group messaging will actually
look at a quick demo on this one so if
anybody's following along out there if I
get a couple people to click on that
link the DN XV you see link there and
that should open up the group messaging
window you'll see here I've got not
connected to respond out connected to
the group so what's going to happen here
is I'm going to put in a user name i'm
just going to use kyle hit connect it's
going to call out to her spoke go
through that connections process that we
talked about and then it's actually
going to automatically join a group
called foo and we'll look at how we did
that in a second you can see I am typing
things that's an awesome message Rutgers
so you can see here it's just really
simple but it's sending messages out to
an entire group of people and the UI is
purposefully dumb it's meant to be just
for for showcasing here so to look at
the code for that it's very similar to
the code we had in the original except
we
some functionality to create a group so
we're going to listen for that connect
event again and when the kinect event
actually happens we're going to join
this group I passing a group ID and
there's on success in a non message
handler inside the group so on success
I'm just going to store that group as a
variable on message I'm actually going
to pass the message out to that
unordered list that I'm showing in the
window there and then to send a message
to a group it's the same as sending your
message to a single person or an
endpoint which is called group Sun
message we pass through the value that
we want to send out so pretty simple
stuff there to send messaging to a group
you know 10 15 lines of code you can get
group messaging work for a chat type
application so to get into something a
little bit more interesting take a look
at video and pray to the demo gods that
this all works perfectly if somebody
could go ahead and just click on this
link that's falling along there and then
just give me a little hands up that
you're you're going to participate here
in the demo please all right if you just
let me know the name that you actually
logged in with Rob all lowercase ok so
I'm connecting in this Kyle you can see
there the whole connection process
happen and then i'm going to call out to
connect to rob so I'm just typing in
Rob's name here it's kind of tiny and
I'm going to hit call first thing you're
going to see happen here is this little
pop-up it's asking me to allow access to
my camera and microphone that's a
security feature once I click allow Rob
should see the same thing on his end
we'll see my video clicks in here and
now hopefully we're going to see Rob's
nice hmm
so you're live on camera all right so
this is actually a hell of a lot simpler
than you might expect and this is kind
of the cool stuff with WebRTC use I'm
able to start up a video call using
nothing but a couple dibs gives some
simple jQuery and the remark library so
looking at this example here we've got a
couple new things here we did the whole
connection process and I'm not showing
that here just keep the code simple but
you've got this div / remote video
source in the Dib for the local video
source if we jump back here there's your
remote there's your local once we get
past that we've got some call options
here and this is just an object that
passes through constraints constraints
are basically what I want to allow
access to so I as the developer or I as
the user so if you wanted to add you
know some sort of a UI feature that
allowed users to turn off the microphone
or to turn off their web camera and
choose which one they wanted to share
out this is where you would update those
properties so in this case i'm sharing
out audio and video meaning we're going
to go share everything and have a full
video call with Rob then we've got
methods here for on local media which is
when my video becomes available and on
connect which is when Rob's video became
available so these handler methods here
basically say you know what I want to do
when that becomes available to me what
you're going to get back in that event
is actually a video element so we hand
that back we wrap up the the binary
stream or the raw stream of video data
in a video element pass it back to you
and then all you have to do is attach it
to a dip and I did that by calling this
set video method and all this really
does is take the dip that I want to
attach the stream 2 and then passes out
the element so you can see here I'm
calling event element that's going to be
the actual video element that's getting
returned and local video source was the
damn that I wanted to access so then
we're listening for a call event this is
what's going to listen for when an
incoming call is happening so here you
can see I'm calling active call equals
event call that's going to be the call
object that's gets passed back from that
call and that's how you interact with
things like video calls or audio calls
and then when doing a simple check here
for active call caller that's going to
say whether or not I'm the one that
initiated this call I don't want to
answer myself obviously so this little
check here takes care of that and then
to answer a call we're going to SiC an
active called out answer so when I
placed a call to rob his browser checked
for this he says
okay I'm not the guy that made this call
I'm going to call active called out
answer and pass through those call
options that we supplied and then he's
going to accident add a listener for a
hang-up event hang-up is basically when
any disconnect occurs and to actually
make the call happen we're going to get
access to that end point the same way we
did for messaging by calling client get
endpoint passing through the recipient
idea of the person we want to talk to so
Rob in this case once I have access to
that end point i'm going to call start
video call on and pass through those
call options so as the person initiating
the call all i have to do to kick things
off is call endpoint start video call
pass through those few options which was
just a simple JavaScript object and then
wait for the call to come back and from
there here's my set video method I
mention all I'm doing is using just
straight-up JavaScript you in document
document by ID clearing out anything
that's already existing and appending
the video element that I pass through I
got back from the event and that's
really all there is to start a video
call you know we're looking at 55 lines
of code here with some some fluff for
the jquery stuff and the UI so pretty
simple yeah so we'll go ahead and kill
this one so you're up and we'll look at
something very similar which is screen
sharing this actually functions almost
exactly the same I'm going to pick on
Rob and ask for his help again you don't
mind following along there I'm going to
hit connect connect up the same way we
hit in the other examples and then once
I get the thumbs-up from Rob that he's
connected I'm going to go ahead and call
it to rob only this time instead of
sharing my web camera is the video
stream source it's going to actually
take capture of my desktop so you're
going to see here this little pop-up
this is very familiar to anybody that's
used screen sharing and Google Hangouts
it's the exact same UI I can choose
which screen i want to share out so if i
want to share my whole screen or maybe
just sublime text i'm going to hit share
and it's going to bump me over to the
app that i shared out and then you can
see here this is actually my screen
being shared out and Rob should be
seeing the same thing on his end sounds
interesting for the rest of you out in
the audience I'm sorry this is a one to
one screen sharing demo but the screen
should share out he should be able to
see any updates on making on my side and
I'm hoping for a thumbs up rub
want want demo problems is there any
sort of allow that came up or anything
so what should happen when the demo
works properly is that Rob should shade
of screen so we'll just push past that
it's probably a simple fix of something
with the security going on there but I
want to show you guys the code that's
the the more interesting part of this ok
so again we've got a video element for
local we've got a video element for
remote similar stuff that we did in the
video screen example of the video
sharing example the only main difference
here is that we've got to install small
plugging this is sort of a polyfill for
Chrome right now and tell screen sharing
gets rolled into the new release of
chrome once that happens you won't have
to do this plugin mess anymore I
mentioned this stuff doesn't require
plugins the only time it required
plugins is when you're on the bleeding
edge and the features haven't been fully
rolled out into the browser yet so this
code here is basically handling a check
to say hey do they have the chrome
extension yet if not we're going to go
ahead and let them install it luckily
it's an inline installation meaning they
don't have to leave your page they don't
have to go out to another website to
download the plugin we can download it
all right in that one page so it's
actually go out find the plugin for me
install it for the user if they don't
have it give me a notification it's
already rock and then we're going to
move on so once this extension excel
success happens or if I already have the
extension which was my case which is why
you did not see any sort of installation
process happening and probably stop
sharing my screen too we're going to get
into the start screen share portion
which is the same thing we saw our video
sharing so I'm going to get access to
that client endpoint and try to talk to
rob here I'm going to get access to the
local in the video element and then i'm
going to call endpoint start screen
share passing in the video element here
this is a little bit different than the
video example in that I'm actually just
going to pass the local and remote video
elements objects into the the method
here and they're actually going to
attach the video for me automatically
this is just sort of a helper feature
that was built in as part of the
framework so you have options and how
you actually connect things out
depending on how you want to interact
with that with that code so if you need
more more access do you want to do some
some more UI updates in between you can
get that actual element back and edit it
yourself if you want it just to
automatically connect to a div and start
screening you
do it this way as well but basically to
start a screen share it's the same way
you just call endpoint start screen
share instead of endpoint start video
call you get the same thing back you get
a video element return and it's just
going to use your your screen as the
source of sharing or screen video
streaming as opposed to your webcam and
then there's a handling method here at
the bottom for if the extension fails to
install properly so that's screen
sharing docks and additional examples
there's more stuff up on Doc's Tetris
poke that I owe you can check out kind
of how all this stuff functions and play
around with it so to kind of wrap up a
little bit i mean what's all this stuff
mean what's the point of WebRTC why is
it valuable why should you guys care a
framework lycra spoke ads faster
development so there's kind of a key
takeaway there it's better user
experience this is a really big one for
me I like to harp on this this one
specific point how many people in this
room have gone to a website in the last
couple months where they've been logged
in people on the website they know who
you are your session identifies you your
account information maybe you're on your
cell phone site or trying to pay a bill
for utility or something they know
everything about you basically they know
the page you're looking at it's all
there in the session but then when you
need help you have to go dig up an 800
number somewhere buried on their site
that they don't want you to find you
have to dial that number and you have to
enter your account information and
probably some other personal
identification stuff to your security
then you get somebody on the phone if
you're lucky who then asks you for your
account information and your mother's
maiden name and all this identifying
info all over again we've all been
through that process it's painful it's
usually ends up and getting hung up on a
few times it takes an hour to get any
kind of information you might want I'd
like to propose that as developers we
kind of have the power to change that
given these tools in that same scenario
there could simply be a button on the
website that says click to call write or
just call so you click the button it
pops up a video chat you take all that
session information that we already have
access to through J us wrap it up in a
simple j/s object and pass it across
that channel to the support
representative on the other end you can
decrypt that information put it into a
UI and give all the info access to that
support rep that they need so they know
who they're talking to they know what
account information you have they know
what page you're looking at and they can
more readily help you with your problem
so I just
like to challenge you guys to start
thinking about things in new ways I mean
we haven't really had access to things
like the microphone the camera and
streaming media in JavaScript until
recently and we just we have a chance to
change the way things work with that so
happy boss's yeah you build some cool
app makes you guys a million dollars
they're going to be pretty stoked but
happy users it's kind of the bigger take
away from me you know we have a chance
to connect people you look at be my eyes
you look at speaking exchange right
there's a really a chance to you to
change lives with the code you're
creating and these tools are going to
give you a chance to do that so the
thing I'd like to leave you with
communication should be a feature not a
product I'd like to again challenge you
to think about how communications could
be built into your app instead of asking
your users to go and open up skype or go
jump over to Google hangout so we can
have a call if you're on a remote team
this is hugely important i mentioned
that Apollo app that we built internally
to use that was part of the driver for
it is we wanted communications to happen
in a seamless fashion and we wanted
multiple ways to do it in very specific
use cases so we built that tool out
another thing I played around with as a
demo is a technical interview
application I'll give you a white
boarding and code challenges and screen
sharing all live over a video with a
video chat in the background you know
it's all stuff you can build so if you
see use cases out there I mean there's
ton of nails this is kind of the new
hammer right so look at ways that you
can start building communications into
your applications as features rather
than creating separate products for
that's it for me again my name is Kyle
tyack Kate I ever spoke do you can catch
me on the twitters at geek gone nomad
and if you guys want to play around with
this stuff we spoke that IO are the
holes example and source is all
available to at that github URL at the
bottom if you can't read it feel free to
come up and I'll open it up to questions
if we have time if not no questions no
questions all right well then just find
me afterwards I also brought a bunch of
koozies for you guys if anybody wants a
beer koozie for their cold drinks at the
event come in stop up front thanks
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>