<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Chris Lilley: WebFonts - Level Up! - CSSConf.Asia 2015 | Coder Coacher - Coaching Coders</title><meta content="Chris Lilley: WebFonts - Level Up! - CSSConf.Asia 2015 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Chris Lilley: WebFonts - Level Up! - CSSConf.Asia 2015</b></h2><h5 class="post__date">2015-12-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Mho5DIT6MWM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so yeah I'm Chris sv Jesus on Twitter
this is a nickname given me a SVG
conferences I totally hated it and then
eventually I needed a Twitter handle so
I thought okay why not
so as has already been mentioned I'm
technical director at the World Wide Web
Consortium w3c I work for Tim
berners-lee who invented the web
I started SVG in the sense that I wrote
the requirements document for it and got
the people together to who were all
competitors and convinced them that it
was better if they worked together on
something that would be open and
royalty-free rather than something that
would be proprietary like flash or
something like that
obviously that was mixed success for a
long time but there we are
and I also chaired the working group
that did that for the first few years of
his life before going to w3c actually I
was one of the causes of PNG when the
pattern thing came out on gif I was
incensed and joined some other people we
never met for years but we created this
format which seems to have been
successful and also in the CSS working
group I was the first chair of that I
was the editor or co-editor of CSS 2
which is where our font face came from
actually that was where he got dumped in
afterwards I was actually working on web
fonts before that and more recently css3
color co-editor and CSS for color as
well
web fonts I was the chair of an
ill-fated group that tried to get web
fonts going it failed because we
couldn't get agreement on a format we
could describe a syntax but basically
one company wanted their thing for
portable font resources to be their
format and other people wanted open site
which was brand new and wasn't really
guaranteed to succeed at that point and
we couldn't we couldn't get agreement
which basically meant that it failed
because you needed both parts more
recently I was involved in wofe one oh
and WAFF 2.0 which is still ongoing and
also chromatic fonts the idea of having
multicolored fonts on the web which is
the thing that you have in print we
don't have on the web and I want it
you'll be hearing more about that later
ok so that's me what am I going to talk
about
my talk is gonna be in four sections so
firstly some basics I want to make sure
that everyone's on the same page here
everyone knows what we're talking about
how many people here use web fonts on
their own their own site how many people
avoid them with all costs no excellent
that's quite interesting there was a
survey done by Google like the top
hundred thousand websites or something
and they found that 10 years ago
something like 2 percent of those
websites used web fonts in 2015 that's
risen to 50 we could do the cent deal
the second thing I'm going to talk about
is open type features and CSS how you
can use them so it's fine you can
download the font and use it but to use
it properly to use it well then a bit
about performance not too much
performance has been dealt with very
well by the speakers here and lastly
some crystal gazing on the future not
totally speculative stuff I'm involved
with stuff I think is going to be good
not stuff you can use yet but you will
soon I hope and of course the more
people clamor for it and say we want
this to be implemented the more the
browser's are likely to actually do
something about it in a reasonable
timeframe so basics and by the way this
picture here did people know what this
is the metal box yes what is it yes
that's right it's metal blocks that we
use to actually print on paper and
that's where the idea of an M Square
comes from you had all your letters on
an actual block of metal and the size of
it determined the overall layout of you
type we still have that concept in
digital fonts so first obvious thing is
what is a character what is it and it's
a number
it's a code pointer unicode code point
not just a code point though it also has
some properties so for example a is 65
but it's also the property of not a
number and not punctuation and has a
different case form things like that so
these are properties of characters
characters can be used without rendering
they can use for example in searching
they can be used in text-to-speech all
sorts of things like that
and then a glyph a glyph is the visual
representation of the character when
it's what you actually see on the page
are on print now I say character or
characters because there isn't a
one-to-one mapping that often is and
it's often enough that people tend to
assume that's always the case but it's
not especially in languages other than
English or in well set English actually
so hit quick test what are we looking at
here is this the character or is it a
glyph lift good yes how many characters
are there - and how many glyphs correct
excellent here's another one if this is
a glyph how many characters one any
advance on one two good both correct it
could be a pre complete it could be a
pre composed a acute or it could be an e
with an combining acute accent and
they'll be put together but either way
you'll get a single glyph which is the
thing laid out correctly so it's one
glyph and it could use two fonts
actually uncommon ly but it is possible
the next thing I want to introduce is
the idea of a font family and a font
face so here we've got myriad Pro which
is a font family and we've got some
examples of faces in that family alight
different weights but also an italic
actually in this case it's a oblique but
anyway and condensed and expanded forms
as well and I've got a second example of
Baskerville which again has various
different weights you notice that these
all have different names so the sort of
normal one it might be called book or it
might be called normal or it might be
called Deming Bolt or whatever it does
various there's no standardization on
these things at all which is why CSS
uses a bunch of numbers between 100 and
900 to represent weights ok next thing
properties and descriptors this is a CSS
conference I don't have to ask if you
know
property is but how many people if put
on the spot could tell me what a
descriptor is yes anyone willing to say
I could I won't ask you to just pretend
no okay so if you look on this code
sample we've got font weights twice both
times it says bold one of those is a
property and one of them is a descriptor
those are the descriptors on the app
font face I'm sorry about the name by
the way I was kind of stuck and I
couldn't think of a thing and I needed
something I wasn't property and it was
describing the properties were font and
I came up with descriptor and I really
didn't like it but we never never came
up with anything better so so a
descriptor is something that tells you
about an individual font face its weight
it's the range of characters it has
available things like that and a
property is a request for styling it's
something that goes on to some text on
to some elements on your page and asks
for something so basically one is a
question and one is an answer you see
yeah I can do that can I have this yes I
can do it
font stacks so you okay obviously you
all know that you can give not just a
single font but you can give multiple
fonts in a list and you probably know
that they the first one that actually
exists this is used right well actually
it's not it's the first one that has
glyphs that are needed which is used
which means you can have the second or
the third or the fourth on actually use
because the first one does exist but it
doesn't have what's needed
so here's an example this used to be
really common in email especially but
also on websites you get some text in
English it's been sent to you by someone
that speaks Japanese and he looks so
ugly why because they've set either
because of encoding the views or
whatever but they sent it in a font
which has got really good coverage of
Japanese obviously because they speak
Japanese and Latin glyphs frankly suck
so how can we use font stacks to avoid
that well quite easily you put the latin
one first and then you put the Japanese
one second and you get the nice laughing
glyphs and this worked well for a number
of years until people started saying you
know font designers Oh she'd add stuff
for European languages we should add
stuff for this and that and then they
went ah all those Japanese and Chinese
lives it's so big it's so hard oh but
they got these things called kana
they're quite nice and it's not very
many of them I'll add these to my fault
suddenly you're using the sucky can
athon runs from latin but you can't put
them both first you can't do that just
by ordering because you need something
else use something else do people know
what the something else is that gets you
around that problem good things on my
next slide then
unicode range how many people use
unicode range how many people have
looked at it and gone yeah it tells you
which range of unicode characters our
font is allowed to use so it's a
descriptor and you are allowed to lie
okay if you say it supports this range
of characters there's no you're not
making a promise that supports all of
them just that it has some within that
range and more importantly the font the
rendering system is not allowed to use
the ones that are outside that range so
you can block off things that you don't
want used you can effectively without
having to go to the trouble of
subsetting the font you can decide which
portions of it you wish to use but it's
very useful here's an example what we've
done here we've got a nice Japanese font
and we have subsided we want to have
this range of characters looking at
these numbers you can obviously tell
that the first one is yen the next one
is kanji the next one is katakana and
the next one is hiragana obviously from
the numbers right yes for something for
some things I mean like Greek or Turkish
or it's fairly easy you know Cyrillic
you can use this broad range of unicode
characters that correspond to a
particular thing but fathers this
scattered all over the place and this
really isn't a very good a very good
thing
I'm really sorry okay once again we
needed to make up syntax Unicode was new
everyone was using it with this u+ and I
thought well a bit of wild cards here
and some assumptions about leading zeros
and they'll be fine and it's really
horrible and I'm sorry I apologize it's
one of those mistakes that lives with
you three decades okay so let's see what
can you use Unicode range for you can
have a really small range and the
character to six is an ampersand for
example and you look at this and you see
I've got this and that and that's quite
nice I've got a sort of blocky swamp
serif and then I've got a curly curly
ampersand and you would probably be
tempted to say oh stick a span on that
put a clasp on the spine off we go no no
no no we don't have to do that at all so
here's the example let's see if we can
live code this without tears
this font was pulled Rockwell's that's
quite light by one and then lastly the
Unicode range of course it can be either
a capital u or a lowercase it doesn't
matter if I tend to just use uppercase
okay
nothing happened oh because we haven't
added the actual font into our font
stack so let's go ahead and do that
well it worked two minutes ago gee
I don't think it needs quotes actually I
was doing it happily without quotes
quotes I need it if you have spaces and
in particular if you have multiple
spaces I don't think I need that so I
don't know what okay well it honestly
did work and they worked multiple times
now I'm using Firefox here and I should
point out that I had to do something
special you have to sorry it's not
Rockwell right that's right if you helps
if you type the right actual name thank
you
yes so I did actually have to do
something special with this in any other
browser this would work just fine in
Firefox there is a seven-year-old bug
about Unicode range which they have
since fixed and marked as fixed and
which they have shipped behind a flag
which you have to switch on
but yeah it's coming it will be there
but just to point out that I did have to
cheat slightly and switch on a flag to
make that work okay moving swiftly on
the past my inability to oh yeah that's
what I meant to show you if you look at
the source of that you can see there's
no markup around the amp design I didn't
have to do anything I'm just using
Unicode range to select it so the
ampersand gets the first font and
everything else well there's only an
ampersand in there so they all get the
second fun okay good
so OpenType features here's some
examples of OpenType features you can
see this is using all sorts of fancy
ligatures and stuff like that so there
are optional stylistic features which
you can control with CSS I should point
out that fonts do vary in the features
they provide and this was always a
problem you don't know what in the days
when you had to depend on the fonts
being on the user's machine you didn't
know what features they had so you
couldn't really reliably use them well
once you have reliable font download
then you know what features are there
because you actually provided the font
yourself so I should also point out that
I'm using the syntax here in these demos
called font variant which obviously came
in in CSS too but has been much extended
in css3 fonts it's the better syntax
it's more understandable it's also
poorly supported and if you follow that
link there it goes - can I use basically
that currently means Firefox
there's also front feature settings
which are cryptic they use four letter
codes like SN P L they're very low-level
they're supported everywhere font
variant is merely a color it's merely
syntactic sugar for these things so why
the browser's don't just get on and do
it I don't know they've already got the
stuff they just need to hook it up and
you know it would help the poor
developers actually quite a lot if they
would do font variants so if you have a
bug tracker for a browser you like and
you tend to chase them up do you suggest
that they support fun variant because
they do listen to people complaining
repeatedly
okay so here's an example we've got some
text here and upper case text and some
numbers and you can see that the numbers
line up with the text quite nicely but
when we've got lower case tax which is
ascenders and descenders it doesn't line
up so well but we can fix that by
changing that to old-style numbers which
also have ascenders and descenders and
obviously you'd want to not do it like
globally like I've done here but you
would want to actually switch that
depending on what sort of takes your
hand so if you have your heading set in
capitals you set it to lining numbers
and
so on next fractions now I've got some
fractions here like a half and these
sorts of things there are code points
for that there's a code point for a half
and you might be tempted to use that but
it doesn't make searching very easy and
you're not going to find a code point
for 86 480 Thirds obviously so what you
actually want is to have your text set
with a slash and then you want to use an
OpenType feature called value nor
fractions just one property you're done
you obviously have to check that the
font has that feature increasingly now
when you look on font sites the
designers are promoting what features
they've taken the trouble to provide
here's another one this a table of
numbers you'll probably want to compare
the different numbers and looking along
the left-hand side you'll see there's
something that starts with a 1 and
something that starts with the 8 so you
might guess that the number starting
with H is probably a bigger one because
they eats bigger than one and they kind
of line up except they don't line up and
the colors don't line up because okay I
could fix this by setting this in a
monospaced font but then all the text
would look ugly well actually want is
proportional font for our text and
non-proportional numbers which I get
like this tabular numbers which means
they all line up in columns
here's another example I showed you this
font earlier so you notice I have a
little FL ligature which is quite nice
and apart from that it looks fairly
boring and if I switch on discretionary
ligatures then they got all this weird
nice stuff like that
the other value I can set is none which
switches off all ligatures it switches
off mandatory ones common ones and
discretionary ones basically do not ever
use this value unless you really want
that because you may break I mean Arabic
for example you have a laminate early if
you have to combine them in ligature is
required by the writing system switch it
off with that and people won't be able
to read your text so just remember that
the initial value is not none okay
font synthesis in an age where we can
make our websites use downloadable fonts
make sure you provide at least a couple
of waits an italic this sort of thing if
you don't the browser will synthesize
this for you it will slant your omen
over to make an italic sorry audience
slant your omen over to make an italic
it will make a fake bold this looks this
basically sucks and looks horrible so
what this property does is it tells the
browser when it's allowed to synthesize
and when it isn't because you may decide
that it's better to just use the Roman
wait everywhere
rather than have sucky born sake italic
so this is the initial value which is
the as usual with an initial value for
something that's added later
do what you do currently even if that's
not a good idea but we can set it to
wait like that so it's allowed to do
wait but not allowed to do italics we
can set it to style so it's allowed to
do italics were not allowed to do wait
oh wait it is doing wait why is it doing
wait that's because Firefox doesn't
follow the spec thank you and none which
is fine means done synthesize anything
and we can change that to different
different fonts and see what they do
what does this one do this is an
interesting one because it only has a
single weight and it's a bold yeah
anyway basically as things improve we
should see less and less of this
synthetic bold and synthetic obliques I
tell the key stuff which will be a good
thing for everyone I'm turning the
OpenType specification says that by
default kerning should be applied on all
texts quite a few browsers including all
the WebKit ones Safari and Chrome ignore
that and use a fast rendering path where
they ignore kerning whereas Firefox for
example and opera when that still
existed dude do the kerning now why is
that a problem
well two reasons firstly because you
don't know what you're gonna get you're
going to get different things on
different browsers and secondly you this
is the variability you want to actually
know what you're getting you want new
users to have consistent thing it will
cause different reflows even on the same
page the same width the same exact
dimensions so the default value for
Fanconi is auto which means do whatever
you do and I don't know what that is but
you can have a much more normal why is
it called normal it should be called do
what you're supposed to be doing but
don't really as something like this
anyway so on firefox this doesn't have
any effect but if i set it to none then
suddenly the things now don't confuse
kerning with letter-spacing do people
understand what the differences letter
spacing is the same an increment applied
to all the letters
whereas kerning means that the font
designer has said well I've got
something like this and something like
this so I can stick a little bit closer
together I've got two things that point
out so I need to push them further apart
it's so that the optical distance
between the letters between the glyphs
remains the same so let's play with the
let's play with the kerning a bit and
the letter spacing so yeah change the
letter spacing and that makes everything
go like that did you notice you can
those negative values and Goliath
don't do this in production code okay so
that was open type features a quick word
about performance the first and most
obvious thing you can do to Inc so first
of all don't do any of this unless you
need to right if your site is replete
with streaming video and huge images and
stuff like that
fonts are probably the last thing you
should be looking at that on a more lean
website and depending on the range of
languages you're supporting you can
easily find you've got a huge font that
you're downloading and it's taking a lot
of time so wherever you get your fonts
from and this is an example from font
squirrel but other signs have different
things there's an online tool and you're
selecting the font and you're
downloading it locally it's same for
google fonts or whatever
there'll be subset options choose wisely
they try to shield you a bit from making
obvious mistakes so they group things by
language because obviously you can
subset part of the language you can say
just use the ascii range you know which
is great until you have you say well
they'd seek my science in english why do
I need anything else than ascii and then
someone with the French thing comes
along and they're eeeh cute comes from a
different font and it looks ugly don't
do that okay so subsets wisely but
getting rid of lists that you're not
using especially if there's a loss of
them in a big font really has the
largest impact on the file size so yeah
glyphs big savings open cite tables some
browsers as I mentioned don't do kerning
so you might want to get rid of the
kerning tables and you can save a little
bit of space and you'd be ill-advised to
do so why firstly because you can force
it to do the kerning as I just showed
you
secondly because nowadays kerning isn't
done in a current able but it's done
using character classes in the Jeep a
stable and G paws table is also used for
things like other writing systems that
need special positioning like Indic
vowels that split apart and go around
the consonants and things like that so
if you drop the G paws table and a G sub
table then suddenly you'll break some
writing
systems so don't do that without
thinking about it and I gave some links
to few things I mean font squirrel type
yet and the last one is two thing called
font tools which is kind of a generic
names I said who's developing that
better dad it's a very good it's a thing
you can use from Python you can do all
sorts of cool things including
subsetting fonts second thing you can do
is use a compressed font format wofe was
developed specifically for that well not
just that but for that so what does wofe
do it adds a header which basically says
where all the tables are and the option
the answer metadata at the end now you
might think I'm supposed to be trying to
make this smaller why would I want to
add stuff and the reason is how often do
you go to someone else's website and
have a look at their CSS right you do
that a lot and sometimes it will depend
on particular fonts and you'll have a
look at those and you'll download those
too and can you use them or not you
don't know because obviously the font
may have been purchased it may have been
whatever it probably came in a zip file
complete with the license thing which
then didn't get uploaded onto the server
because why would you but if you have it
if you have some metadata that has a
link in the font to the license or to
the terms and conditions then you can
just follow it know whether you can use
it or not you find whether it's a free
font or what the conditions are so we
found that the foundries the font
founders are very happy with this idea
they didn't actually want digital rights
management or anything like that on
fonts they just wanted people to have
access to the information to know where
they can use or not if you're using an
you're not allowed to us between your
lawyers and their lawyers the browser
doesn't have to get involved and then
what wofe does is it's it's each table
gzip the tables are done individually
which with gzip happens to work quite
well but the overall result because it's
not a very specific type of compression
it's just generic compression it's not
all that great it helps gzip is used
because it's already in the browser it's
already used in the PNG format it's sort
of using the HTTP so we might as well
reuse it
one soif was established we then went on
to phase 2 which is doing it properly so
off to compression it's a lot more
complex the first thing it does is it's
split so open type is designed really
for ease of use for an application so
the stuff is laid out in memory with
lots of padding and stuff and things are
duplicated in multiple places the same
information is given in multiple ways
depending on what applications want to
use then that means a lot of it can
actually be recalculated you can throw
some of it away and then we calculate it
you can also there's different types of
data and if you put all the similar
types together it compresses better and
lastly if you use a compression
algorithm that's specifically designed
for fonts has been tuned for that you
get much better results apart from that
is the same as what fun so when I say
much better results the hundred percent
is the typical well that'sthat's your
uncompressed font rough one will take
that down to forty five percent of the
size and woth two will take it down to
32 percent for a true type font I'll
explain what I mean by that later so you
can see that yeah you you're grinding it
down you're getting your general a third
of the size so it's definitely worth
doing so off to with true type glyphs
which is the most common sort on the web
currently although that's changing gives
you 68 percent compression which is 25
percent better than wofe one if however
you have a postscript glyphs cff glyphs
you get mass good compression that's
because the the font specific
compression is able to do more with the
true time format it can rearrange data
and make it more compressible but it's
still worth doing it's still better than
what one I should point out that it's
not a free lunch there's a very talented
compression team that work on the
broccoli compression which is used in
wofe too and they're always saying oh I
got this a new improvement guy next to
naught point five percent it's like
keeping going keeping on it's great but
at some point someone said how long does
it take to decompress now this is
already an asymmetric compression which
means it's fast to decompress and slow
to compress which is fine because you
can press it once and shove it on the
server and millions of people hopefully
download it and they all decompress it
so you want that but what we found was
the last one or two percent squeezing
that down could double the decompression
size so you're making the font
fractionally smaller but not small
enough to really impact the download
time but then your pages hang in there
while all these fonts are decompressing
and actually if you would back off the
performance a little bit it's already
back off the compression a little bit
then you'd get a much faster page rate
over time this is more a note for us
rather than a note for you because the
the way that wofe is done there'll be
some command-line tweaks and stuff where
basically the default settings should
avoid this situation since I mentioned
performance on the mobile should also
say that we tested the memory use for
decompression and it's much the same as
well slightly larger but not enough to
worry about okay so if you have fonts
used on your site then you may find that
they're not loaded because you hadn't
got any text that uses them and then
when people enter text that uses them
there will be a lag because suddenly the
browser will say oh I need to download
that after all no Goffin get it which is
the point at which you step away from
CSS into the world of JavaScript and
force it to download the thing you know
you're going to be using so just to show
this isn't scary here's an app font face
rule which you cannot see and understand
and you know what it's doing and here is
a new font face object which as you can
see is basically the same thing and it's
declaring the font and saying I'm going
to be using this once you've done that
you can trigger it to download and you
get events which are promises you can
get one about when it bloating has
started when loading has finished or
when the loading has ended with an error
and what can you do with that well
you can then stick a little handler on
it when the promised returns use the
value and basically add a class to say
okay I'm going to use this font which
means if it fails you don't ever add the
class and it doesn't you try to use the
font that doesn't exist so this does
give you a lot more flexibility to do
things like that this is fairly new it's
supported in Chrome and opera and
Android it's not supported in the others
yet but it will be because this is
pretty useful stuff but I've put it here
because it is it's it's kind of new and
you might not know about it okay the
future the crystal ball the know I can't
use this yet stuff so the first thing I
wanted to talk about is colored fonts or
color type in general since this is
obviously isn't font this was
hand-painted by monks probably taking
years but illuminated manuscripts is one
driver
okay it's not driver nobody cares about
eliminating manuscripts it's just a nice
historical example the actual driver and
the real use case of course is emoji
which everyone wanted to use and at
first these were just little crappy
raster images and then people said no
works use a fond technology to do this
we're going to have to extend font okay
let's do that because we really want to
do these properly and have nice vector
effects for our emoji and let's get rid
of that you will thank me by the way if
you go to this page is a really
irritating soundtrack as well which I
had the thought to mute and here's the
third use case I saw a fascinating talk
at one of the international typography
conferences a type I there was a chap
who went around India talking to sign
painters because when people in a shock
like a fruit store something wants to
have a banner advertising themselves
they hire someone to paint the letters
on clasp and this is a photo I mean
these things are huge right and they
paint all the big doors hand-painted
signage and he asked them to design
fonts for him which they did and they
provided them on pieces of cloth in
multiple colors because that's what text
looks like right
and these are gorgeous these are
beautiful unfortunately these people are
going out of business because they're
getting replaced by you know a PC in a
laser printer or a vinyl printer but and
interestingly as well I mean this is
from India but also I was a couple of
months ago I was in Brazil another
typography conference and there was a
woman there who'd gone down the Amazon
and equally their assigned painters for
boats and things which have it also a
tradition of multicolored type so this
is an interesting thing it's a useful
thing to revive let's have a quick look
at how we might do this so here's an
example this looks quite nice doesn't it
it's multi this is actually that same
thing that I just showed you on the
clasp but but done here on the webpage
and you might think well okay great you
can do it what's the problem and that's
the problem this is nine different fonts
all with different colors slapped
together using absolute positioning and
that also means that when you look at
the goods the markup you've got the same
text multiple times the same text
multiple times the same text multiple
times and that's really going to hurt
your search you actually might get
science blocking this because you've got
repeated text and they'll think you're
trying to spoof SEO and you just don't
want to do that at all so this is where
how we're doing for time nine minutes
sure okay quick poll shall I live
dangerously or shiny not this will take
about 90 seconds to two minutes
dangerous okay let's go for it
right so here R is the fonts that I was
using you can see this ten of them I'm
going to open this one up in trance type
then what I'm going to do is drop the
other ones also into trance type then
I'm going to select them all
and then I'm going to pick an effect
called overlay fonts and now I'm going
to pick some colors that don't suck and
I'm doing this quickly so actually they
will suck that's fine
basically the design of this is is
having four colors for the top and four
for the boss and this is really hideous
isn't it I'm sorry there we go that that
will do well do and say okay and change
the family name to something more
sensible and export and let's put it
there for doom okay so let's see what
we've got
there's my fonts directory that I'm
using there's the kafeel now I don't
want it there stupid thing and it has
produced four different fonts why four
because there are four different ways of
doing this there's the way that Google
does it which involves using PNG images
all different sizes which kind of sucks
there's the way Apple does it which is
called s fix which is an undocumented
thing which also uses raster images and
it's also not very good and there's the
way that Microsoft do it which is using
stacked TrueType outlines and then
there's the SVG glyphs and OpenType
which is what I was telling you about
earlier okay so we have these four
things let us see if this doesn't work
then it's okay because I do actually
have a backup
quick look what did I do for this yeah
that looks what right doesn't it
okay and
okay let's quickly recover from that as
they say in cooking programs here the
ones I prepared earlier
yes really do thank you
okay so this is the first format that is
useful it uses a an open type table
called color which holds a stack of true
type outlines the first one will be used
as a fallback if you eat color fonts are
not supported and then there's another
one called pal see pal which holds the
palettes so you have you saw me
selecting the colors there those colors
go into the font itself and there's the
white actually that's the ones I picked
last time owners practicing this demo so
okay that works and this is just you
know it's a single line of text we have
got multiple lines or anything like that
so it's pretty good right it's working
well can anyone see a problem with it
yes the color property yeah exactly in
fact how do i style any of this we've
lost something haven't we where did the
styling go they have colors are now
baked into the font which is fine if
you're making your own fonts but if
you're buying them or something that's
really not very helpful is it so let's
have another option so SVG so you've
heard of SVG fonts right I didn't
mention them earlier but you've heard of
SVG fonts and you know that you
shouldn't use them ever okay good he was
a hottie was a temporary hack at a time
when we didn't have reliable
downloadable fonts okay it served its
purpose it had really terrible
internationalization it was only ever
intended as a throw away temporary
stopgap so don't use them they're
terrible so it's much the same you have
an SVG table which contains some SVG
which can do anything so I mean that's
the problem with the the previous thing
each each overlay is a solid color
that's all you can have is a solid color
fill and then you've got C pal
optionally to have these palettes and
then you use CSS variables to alter the
palette so this is the neat this is one
of the other ones this is the SVG one
that I exported looks much the same I
mean here it's not using the SVG it's
not using gradients or doing anything
fancy it's just overlaid solid text
but let's see how we can do this so I've
used different colors here let's pick
something and make it really hideous
let's change the hue there and change
the hue there and maybe the saturation
and let's change that white to yellow
and yeah okay so we can using CSS
variables and these are pre these are
predefined in the spec it says you must
have them called color zero two color N
and they will correspond to entries in
the palette and you can therefore style
and the SVG ones themselves
you can't style the other ones though
the the TrueType ones they're not style
like that which is a shame but okay at
least this one works so it's now I've
been telling you about css3 fonts let's
talk about CSS for fonts which is
basically about two pages long and full
of jotted down ideas on the back of an
envelope one of which is a thing called
font palette so you can have multiple
palettes in these fonts you can have for
example one that's designed for text set
on the dark background and one on light
background so this lets you select
between available palettes also an app
palette entries function which lets you
override specific palette entries so
instead of relying on using CSS
variables and having the SVG actually
have var functions to call up those
instead it says no let's just override
the power directly just just override
individual palette entries and that's
how you would do that using app palette
entries lastly I mentioned font
synthesis already and said you can
switch off fake bold and you can switch
off fake italic there is another
abomination waiting to be killed which
is fake small caps and you do fake small
caps by taking a capital and squashing
it down and making it smaller which
means it's in there and lighter than it
should be compared to the other glyphs
that looks kind of ugly so this will be
a way to disable that too and lastly you
know about the font families you know
the serif and sans serif and and
to see has anyone ever used generic font
family fantasy in a production website
ever no I have no idea why we have that
one is such a stupid idea anyway there
will be some more there will be emoji
there will be math and Fang song which I
don't speak Chinese so I'm not quite
sure this is but apparently there is a
distinction which is relevant for you
does anyone actually speak Chinese and
can tell me what this means okay thank
you
actually if you could mail me afterwards
with a longer explanation that would be
great because I really do want to
understand that okay so I think that's
pretty much it yes indeed that's me as a
reminder again these slides are up on my
github so if you want to have a look at
them then they are and I guess we still
have a little a minute for questions in
the declarations you're using you are
limiting the fonts available to certain
subsets are there yeah
any API that scene with the requests or
is limited on the client side is it okay
but yeah that that day is not affecting
the request now you can do that yourself
okay what you can do is subset the font
that you're using so it's called foo you
can make food Chinese and food Thai and
foo Arabic and whatever and then you can
have multiple app font face declarations
all of which have the same font family
and all which has the same weight and so
on but you use Unicode range and then
what will happen is when the browser
needs to fetch one of these it will and
the ones that it doesn't need to it
won't fact so depending on what the
content is on your page you can it's
effectively you can do your own sub
setting and but still combine them into
the same font family so on your actual
CSS you just give the font family name
and also if you combine that with font
loading API you can force the ones that
you know you're about to use to load
earlier and these other ones as backup
in case you know someone times in their
name and it's in Turkish or something
like that so that that is a good way to
do it but yes it's not it's not it's not
talking to the server and saying
download subset this font for me and
then then give it to me the Google Fonts
API does that
if you look what it does a and that's
import you'll see that the URLs got a
query part with basically which which
ranges of stuff to use bear in mind
though if you use that you're doing two
HTTP requests the first one is actually
getting in our font face in a stylesheet
and the sixth line stylesheet and the
second one is actually getting the fonts
referred to from that but I believe
Google is actually subsetting those on
the fly when you do that does answer the
question good yeah yeah I know
ie seeks implemented the ad font face
well all that all those years ago
yeah um dude why did why did things sort
of stall out for a long time with at one
place okay that's a good question yes ie
I think five point five even implemented
at font face so at the time in even that
meeting before okay so at the time this
was at the time the browser Wars there
were two browsers Internet Explorer and
Netscape and they basically did
everything the opposite way to each
other so Netscape at that time hated
style sheets they said they would never
implement style sheets they used the
link tag in the HTML which linked
directly to a font and they would only
accept one format which is called pfr
portable font resource which was a
proprietary technology from bitstream
they rapidly gave her up when they
morphed into being mozilla because then
they had to open-source their stuff and
they couldn't have all this code that
was using proprietary things so they
just dropped it meanwhile Microsoft did
the the w3c standard way without font
face but they were the only browser to
do so so people kinda didn't care and it
was using another proprietary thing
called embedded open type which was
using a font compression license from AG
for monotype which was proprietary and
protected by patents so nobody would
touch either of them and that's why I
failed because there wasn't an effective
Universal download mechanism for the
font there wasn't a format we had a
syntax but only one browsers using it
and we didn't have a format it was SVG
fonts the reason they took off is
because they use the same syntax but we
also mandated in the SVG spec you can
support any font format what you want
but you have to support SVG fonts and
SVG fonts use the exact same
path syntax as SVG does so the
incremental cost to implement was small
and so people people would do that and
they worked for a while its stock gapped
us he was okay I mean at that time
especially on phones if you had SVG on a
phone they often had no access to the
fonts they were on the platform they
would kind of sandboxed so you had to
send down a font with it and so that
worked but that was just on phones on
feature phones and stuff this was before
you know the the good phones before
smart phones and on the desktop things
languished until we had an operation
people said we have to have a single
font format that everyone supports and
we people got behind that the foundries
got behind her it was incredible about
2006 or so I still have a really ratty
t-shirt from a 2006 fun thing which I
took because people getting up on stage
and saying we are the last generation of
typographers the web will kill us all we
were will be selling peanuts on the
streets etc two years later these same
people were saying our entire font
library is now available both the web
and for print you can buy it on the web
you can buy on print you'll require two
different licenses we get to sell the
same font to people twice this is great
that's what it took I mean there was a
lot of suspicion between the browser
people and the font developers and
getting them talking to each other was
which is the sort of thing that w3c does
getting competing industries to talk to
each other and agree on a standard that
was what it took actually all right
thank you Chris I'm sure you could fill
a whole other conference with all of
those thank you so much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>