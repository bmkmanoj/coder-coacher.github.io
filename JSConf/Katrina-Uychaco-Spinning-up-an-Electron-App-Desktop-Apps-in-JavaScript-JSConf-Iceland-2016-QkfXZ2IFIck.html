<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Katrina Uychaco: Spinning up an Electron App - Desktop Apps in JavaScript - JSConf Iceland 2016 | Coder Coacher - Coaching Coders</title><meta content="Katrina Uychaco: Spinning up an Electron App - Desktop Apps in JavaScript - JSConf Iceland 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Katrina Uychaco: Spinning up an Electron App - Desktop Apps in JavaScript - JSConf Iceland 2016</b></h2><h5 class="post__date">2016-09-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QkfXZ2IFIck" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you can everybody hear me okay
okay great um thank you all for coming I
hope you had a nice lunch um so again my
name is Katrina Chaco and I'm an
engineer at github and I work on Adam
github free and open source text editor
but today I'm here to talk to you about
electron and so can I get a quick raise
of hands before we start how many of you
before hearing about this talk had
already heard of electron awesome and
how many of you have tried building
something using electron also awesome
any chance anyone here in the audience
has tried to use electron to control a
robot yeah we have one person okay this
is what we're going to do today I
brought my trusty assistant bb-8 Sphero
robot here and he is going to help
demonstrate some of the fun and
interesting things that we can do with
electron but first we're going to talk
about what electron is and how it came
to be so electron is a library that
allows you to build cross-platform
desktop apps using web technologies
javascript HTML and CSS and it was born
out of github desire to build Adam it's
free and open source text editor and
again this is what I have the pleasure
working on and github decided to build
Adam using web technologies because the
dream was to build the ultimate tool for
writing software so something that was
highly customizable and hackable much
like Emacs and vim but packaged in a
nice beautiful easy-to-use GUI so no
matter where you're at whether it's your
first day writing code or you're an
experienced hacker Adam is designed to
be a tool suited to your needs thus Adam
was written in languages of the web and
because while native desktop UI
technologies come and go with time the
web is a standard that becomes more
capable and
buddhist with each passing year so it
made sense to write adam in a technology
that was approachable and accessible to
many and it would adam was written in
web technologies and open source so that
anyone could hack on it and get have
realized that the technology used to
enable adam to be built in HTML
Javascript would be useful to other
developers so electron was extracted
from adam khor and open source does its
own library made available to the public
so um electron so electron is a library
that combines chromium which is the main
part of the chrome web browser and
nodejs to allow you to build desktop
apps that run across Mac Windows and
Linux and it's a library that and it
aims to make the hard parts of desktop
app development easy like managing
automatic updates dealing with native
operating system menus and dialogues
handling crash reporting and profiling
and debugging and if your web developer
you're probably familiar with the pain
of dealing with cross-browser
compatibility but with electron all you
need to do is develop for Chrome and you
have an application that works across
platforms and electron is kept very up
to date with the latest versions of
chromium so whenever there is a new
version of chromium the electronic team
works hard to release a new version of
electron that uses it within a couple
months or so so you get access to all of
the latest and greatest chromium
features you can use most of the es6
features and you also have CSS variables
and source maps they come right out of
the box
and since each electron app window is
just a chrome page you have access to
Chrome's powerful debugging tools so
this is Adam and you can see that on the
bottom we have devtools open you can use
the timeline take heap snapshots you can
do interactive debugging and these are
all extremely helpful while building
desktop apps just as they are while
building web apps so as I mentioned
electron is free and open source and
it's being used to build a variety of
different types of apps there are
several editors in addition to Adam a
brave web browser chat client it's being
used at companies like Microsoft
Facebook slack and docker and so now
let's talk a bit about how electron
works we're going to talk about it in
the context of the app that we're going
to walk through today so um like I
mentioned today we're going to build an
app that we will use to control bb-8
here and when we start the app the
process that is started is known as the
main process you can think of this as a
typical node process but with additional
electron api's that allow you to control
components of your operating systems you
I so we can do things like add a an icon
to our menu bar and when we click on
this icon the main process will then
create a browser window and thus browser
window will have an associated renderer
process and you can think of the render
process as basically a typical chrome
page but with note integrations built
right into it and you also have other
electron a P is available to you in the
renderer process you can create as many
renderer processes as you like and you
can even create an invisible renderer
process that just execute JavaScript in
the background and doesn't affect
performance of your application and in
our app today our main process will also
be connecting with bb-8 through
bluetooth and so now let's take a closer
look at all of these processes like I
mentioned the renderer process is
associated with the UI of our app and
we're just going to have a few buttons
it's going to be a menu bar app and when
you click the button then bb-8 is going
to do something fun and entertain us a
bit and so the question is how do the
two processes or the main process and
all the renderer processes interact well
all the process our processes are
completely isolated so the only way to
communicate between them is through IPC
or inter process communication so when
we click on the button that tells bb-8
to do a dance we're going to send an IPC
message over to the main process from
the renderer process and then the main
process is going to communicate with
bb-8 over bluetooth and have them do a
little dance for us okay so it's time to
look at some code and first off I want
to mention that all of the code is
already up on github it's a repo under
my user name KO Chaco and you can feel
free to take a look at this and you can
look at the commit history to see how
the progression of how the app was built
and use it as a way to familiarize
yourself with electron maybe help you
get started with building your own fun
electron apps so I've got Adam fired up
and for the sake of time I'm going to be
checking out commits that I've tagged
and we're going to be taking a look at
the code I've aliased my get check out
is GC oh we're going to start out with
hello a commit tagged hello and we start
out as we would any node program with a
package.json and we've got some
dependencies that i've already installed
and a start script that runs the elect
the bundled electron binary and we pass
it the path
of this project and when electron starts
it looks in your package.json to figure
out what the entry point of your app is
an arse is file called mange is so it
takes this code and it runs it in the
main process and our main GS code right
now is pretty simple it's the simplest
electron app that you can conceive of
your typical hello world type of app you
can see that we're using es6 here no
trans piling we just get it right out of
the box because we're using the latest
version of chromium and so we've got
known and we've also got electron api's
and so the app module controls the
applications event lifecycle and you
emits a ready event one the app when
electron has finished initializing so
when the app is ready we're going to
create a window and we're going to use
the browser window API and specify the
dimensions that we want the window to be
and load our HTML so here we've created
a renderer process from our brows render
process from our main process and if we
look at that index dot HTML it simply
says hello world for now and we're
printing out versions of node and
chromium and electron that we're using
and you'll notice that embedded in our
HTML we have node we have access to all
of nodes built in modules and AP is we
also have access to any module that's up
any of the 330,000 packages that are up
on NPM and this is really powerful if we
look at what's in renderer j/s right now
simply console.log that says hello from
the dev tools we're going to start up
this app with mm p.m. start then we have
it we have a simple desktop app and you
can pop up in the dev tools we see our
hello from the dev tools and and you can
see that
with very little we've got an electron
app up and running if you already are
familiar with web technologies and node
you can get to this point really quickly
so the next step is we're going to turn
this into a menu bar app and I'm going
to check out another commit and now in
our main process code we're also going
to use a tray module provided by
electron and this this module will place
an icon in our menu bar so on Mac it's
going to be on the top right if I was on
a Windows machine it would be on the
bottom right and we're going to use this
electron positioner module to place our
browser window right underneath the icon
what I want to point out about this is
this is actually a third-party module is
created by someone out in the community
it's not created by an electron team
member and like Adam is open sourced and
has a thriving open source community
electron does as well and there are a
lot of great packages out there electron
actually has over 400 open-source
contributors at this point so we're
going to use this awesome module I think
it's made by yawns and Sweden and now
when our app is ready we're instead of
creating window we're going to create a
tray icon will pass the path to the icon
and when we click on the the icon we're
going to toggle the visibility of our
window an electron provides us the tray
bounds so that we know exactly where on
the screen the icon is and we can
position our window accordingly so we'll
pass those through down to show window
and use the positioner module to
calculate the position to set our main
window at and then we'll show the window
and focus it and now when we create our
window in addition to specifying the
dimensions we're also going to indicate
that we want it to be hidden at first
and we want it to be frameless and we
won't be allowing the user to fullscreen
the window
or resize it and when we click away from
the window and we get the blur event
we're going to hide it and lastly we're
going to hide the dock icon that would
normally appear on a Mac so let's start
this up again and you can see now we
have a little bb-8 icon up in our menu
bar and we can click on him to toggle
the visibility and still the dev tools
so you'll notice that i restarted the
app entirely and one thing to recognize
is when you're working with electron
apps if you change any of the code in
your main process code you're going to
need to restart the app entirely this is
because that code is loaded into memory
upon initialization when you first start
electron or as if we'd only changed code
in the renderer process then all we
would need to do is refresh to see those
changes as is the case with any web page
so now we have a menu bar app it's
pretty plain so we're going to throw
some styles at it and I'll check out
another commit and now when we click on
the app will see that we've turned our
hello world app into a Hello bb-8 app so
we want to do bb-8 justice here okay so
now the exciting part we're going to
hook everything up so that when we click
a button on our UI that ultimately ends
up and bb-8 here doing a little dance so
and if you recall we communicate between
processes through IPC so now we've added
a button in our index dot HTML and has
an ID of dance and in our render process
code we add a listener that uses the IPC
renderer module that we get from
electron and we send a dance message
over to the main process
and in our main process code once the
app is ready now we're going to use the
APC main module from electron and when
we receive the dance message will have
bb-8 do a dance so now the question is
how do we hook up bb-8 and for that
we'll check out another commit so bb-8
here is built by Sphero and Sphero has a
handy node module that we use it uses a
bluetooth library called noble and all
we need to do is pass the UID of bb-8
and we have this bb-8 object that we can
use to control the robot I've also
created a separate file bb-8 commands
that has all the commands that will be
using today and now when the app is
ready we're going to connect to bb-8 and
put something to console and have them
change a random color just so that we
know he's awake and now when we get the
dance message we're going to call our
dance command and we'll take a look at
that so it's pretty simple it just sets
a couple of intervals and has bb-8 role
in a random for random distance in a
random direction and change a random
color and we also want to play some
music for bb-8 to dance to so we're
going to use the Audio API and we're
going to send a sound message to our
render process and the name of the file
the sound file that we want to play so
again we're using IPC sending sound to
the main process or the renderer process
and when we receive that message and the
name of our audio file we're going to
play the song okay so now comes the
moment of truth see if we can get bb-8
to dance for us but first since bb-8 is
so small I brought a webcam so that
everyone can get a better
you of his dance moves and I have
another menu bar app that was created
specifically for this presentation it's
another electron app that uses WebRTC to
display the feed from a given webcam so
hopefully y'all can see you bb-8 better
now and I'll stick this down here okay
now for the moment of truth pray to the
demo gods but this works wait for bb-8
to connect and there we go and we see
he's turned a pretty blue and he's ready
for some dance moves okay so now let's
we see that we have our dance button and
when we click it
thank you haha all right so you can see
that pretty quickly we were able to
throw some code together and control
bb-8 here and we can have them do more
than just dance so check out another
commits and start the app so we can also
turn bb-8 into a disco bb-8 ball have
them change some pretty colors and spin
around for us
and we can also use bb-8 as a magic bb-8
ball and for those of you who aren't
familiar with magic eight balls they're
basically these toys they're kind of for
fortune-telling and you can ask them
simple yes or no questions and shake
them and they'll give you a response so
we can ask bb-8 questions like BBA do
you think that will have any luck seeing
the northern lights tonight and see if
he says yes or no oh hello okay he's not
very optimistic um but we can be helpful
let's see a let's ask him bb-8 are you
having fun today oh hello huh um okay
maybe after this next portion you'll be
having fun let's see if we can get him
to say yes because I want you to hear
that yeah okay um so magic bb-8 ball and
lastly there's a way for you all to
interact with bb-8 by tweeting at him
and I'll let you I'll tell you exactly
how if you want to take out your phones
tweet out of him one lucky tweeter is
going to get a free github shirt so a
little extra incentive there and we're
going to take a look at this code before
we do this so we're going to be using
the twitter api we have it's a twitter
npm module and i have code that will get
me a random tweet and if you tweet at
bb-8 will be looking for tweets with a
hashtag bb-8 electron all one word
lowercase so tweet at bb-8 and you can
either ask them to dance or disco and
once we get a tweet with a hit he will
do the thing that was said and will also
be displaying a desktop notification
that says the name or the user name of
the person that tweeted and shows their
profile picture and so go ahead
tweet now we'll give it a bit because it
does take some time for the tweets to
come through and I'll get the webcam
back up so we can still see bb-8 okay so
I'm going to click the button now it's
going to give another like 10 seconds so
you still have time and actually first
I'm going to turn my notifications back
on otherwise we will not see the
notification that comes through oh also
let's take a look there so the way that
we display the notification is we use
the html5 notification API which we only
have access to in the renderer process
so what we need to do is from our main
process code send the information about
the tweet to the renderer process and
when we get this tweet found message
we're going to use the notification API
so another instance of IPC alright so I
think we have some tweets in and let's
see what we get a little bit more time
so more time to get treats in if you
want
and the winner is Ehlert's mari that's a
disco all right and there we go um so I
will get you all tweet back at you and
let you know how you get your free
github t-shirt so that's it for the bb-8
show today thank you all for coming and
i'll throw another slide up with the
resources with a list of resources in
case you want to get started with
electron and learn more and here we go
my contact information is on the bottom
right if you have any questions and
thank you all for coming I hope you had
fun with bb-8 and good luck building
your own electron apps
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>