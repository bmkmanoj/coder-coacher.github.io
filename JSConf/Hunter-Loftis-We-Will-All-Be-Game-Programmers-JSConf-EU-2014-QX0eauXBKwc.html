<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hunter Loftis: We Will All Be Game Programmers | JSConf EU 2014 | Coder Coacher - Coaching Coders</title><meta content="Hunter Loftis: We Will All Be Game Programmers | JSConf EU 2014 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hunter Loftis: We Will All Be Game Programmers | JSConf EU 2014</b></h2><h5 class="post__date">2014-11-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QX0eauXBKwc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good Morgan so I'm here with good news
because we will all be game programmers
very soon so I'm sure a lot of you like
like myself kind of got into programming
in the first place because you wanted to
build the next Mario and the decades
since then it turns out I build a lot
more banking apps than Mario but I'm
excited that javascript is heading in a
direction where we're all going to be
able to integrate a couple of things
from video games into all over apps very
soon so not only do i think these
techniques are useful that we can get
from game development patterns I
actually think they're inevitable so no
matter what you do you're going to end
up integrating at least a few of these
things in the next couple of years so
this might make a little bit more sense
if I explain my double life during the
day I'm the new guy at Heroku right so
whenever any of you like file a no
ticket at Heroku it goes to me and
whenever the build pack doesn't work I
get yelled at and whenever people are
confused about the dev center
documentation that's also my fault so
I'm sorry and this is sort of like my
serious work this is the work that I do
that people's livelihoods depend on and
so it's kind of the scary slow
development work that I do from nine to
five but it's also really interesting
because it's the first role that I've
had where there are literally thousands
of Production apps that that people are
you know earning a living with that I
can look at and I can i can compare like
how how people are following different
patterns and how some companies are
successful what some aren't there's
actually a really interesting talk later
today about how toyota at europe is
going to be is running right now on
Heroku and that's x rayed mcdermott you
should check it out so anyway I've
gotten sort of a
nique insight into how people are
building JavaScript apps these days
because I see so many of them every day
and that's that's my day job at night I
work in a less serious way I work on
something I like to call playful
JavaScript right it's JavaScript that
doesn't really have a purpose or a point
it's a JavaScript that's JavaScript
techniques that aren't going to help you
pass questions when you're interviewing
for a job right it's nothing that people
teach at university but it's the stuff
that I've been interested in since I was
a kid right it's like games graphics
audio I played with things like
procedural generation i play with stuff
like old-school 3d rendering techniques
right um and then occasionally very
occasionally some crazy company will pay
me to build a game in html5 and this is
becoming a bigger and bigger thing right
a couple years ago this would never
never have happened nobody would ever
reach out say hey can you build me a
game in JavaScript so I'm really excited
about this and I think this is just
going to keep on accelerating so um I
wanted to just highlight that because
this is the basis for the talk and I'm
not an expert right so I just play with
things at night I am an expert at like
node and running production no taps but
this is just my hobby and I'm not a game
developer by trade but I love this stuff
and I think that more of us are actually
going to become game developers by trade
over the next couple of years and even
if not it's fun to learn right and it's
something that I think everybody should
try at least once so first why should
JavaScript developers even care about
what game developers do right like it
seems like we're worlds apart they write
things in C++ while we write an
interpreted language they're writing on
bare metal whereas we're trapped in a
browser and they're concerned with
players while we're concerned with users
right so it doesn't seem like there's a
whole lot of overlap here to answer that
question let me take you way way back to
two thousand eight that was back when
jquery was also still new and popular
with everybody and this is google maps
in 2008 as usual google is pushing the
limits of JavaScript so
was a cutting-edge app but from our
current perspective you can see that it
was just a little bit better than
mapquest right it's still two
dimensional it's still very simple
there's not a lot of interactivity here
now here's 2008's Grand Theft Auto the
exact same year but a very different
piece of software right instead of a 2d
top-down camera you've got a 3d moving
camera you have full textures and full
of shadows and even the geometric detail
on the buildings is sort of incredible
it's a far cry from the google maps of
the same era okay but four years later
google released an update to Google Maps
and in this new version you have the 3d
textures the geometric detail the
dynamic shadows right and that that
brings me to the question if you had to
put some money on which one of these
three apps is most similar which two of
them have the most similar architectures
which would you bet on you know my money
would be on these two so even though
it's the same app the google maps of
2013 is a lot closer to a video game
Grand Theft Auto of 2008 than it is to
its predecessor similarly in 2004
Nintendo's DS touch was a big hit early
developers for the platform kind of
pioneered what touch can do as a core
interaction element and then in 2007 the
ipod touch was also a big hit and you
know Apple is clearly responsible for
the fact that nobody younger than me
even knows how to use a screen that you
can't you know touch and drag things on
but even though Apple is responsible for
making it your bic watase touch was
really pioneered in the games industry
and do any of you remember moon patrol
really all right what well
congratulations because I was one year
old when this came out so I don't
remember moving patrol but according to
wikipedia it was the game that pioneered
parallax right so as you moved the
backgrounds actually scroll
the different speeds relative to each
other to give you an illusion of depth
so this was the first game at least
according to wikipedia to use that and
now you can't go anywhere without seeing
parallax on some website you can't throw
a stone without hitting somebody who
stuck parallax on their site sometimes
for good sometimes for bed you know who
you are and and I just think it's
incredible though that something you
know decades ago that became prevalent
in games is just now gaining popularity
and the web and this is sort of a trend
that we see over and over and over that
that games sort of lead all other
technologies and kind of push boundaries
that we then come in and get to fill
once it's easier to do so today's game
experience leads to tomorrow's appt
experience and this is as important
because that means that if you want to
know how to build the apps of tomorrow
you should be looking at what games of
today are doing and how they're working
and what kind of technologies are
employing and how they're training users
to expect interfaces to behave right so
you can see a lot of other examples I've
given several but every time you use
Google Docs here you're now sharing an
interactive virtual environment with
other users and this is some of the
games we've been doing for decades but
now now document services are starting
to it and it's it's like a big deal
right so it's important for everybody to
learn of course I'm not the first person
to realize that we can learn a lot from
game developers if any of you have been
getting spammed by famous like I have
you know all about it but it's it's
basically a game engine that allows you
to run apps on top of it right so they
just chucked all the regular MVC
framework stuff out the window and they
were like we're going to build I think
they called it a crappy game engine
right and and that's what people are
running really interesting interactive
apps on top of with great success and
this is my favorite example of how sort
of games and apps are colliding at least
in JavaScript this is the architecture
for dhoom 3 so the important part is
actually the second and third step the
second step the scene I are this is
where doom actually builds a description
of the scene it figures out what you're
looking at what you can see what's in
the frame what's local to your character
and then the fourth step is where it
actually
ender's in this is the expensive step
right rendering something in 3d costs a
lot and the operation order and which
operations you choose to render are
actually really really important they
can make your frame rate faster they can
make it slow and so in dhoom 3 they
actually figured out exactly which
operations they needed to pass to the
renderer before they rendered anything
to make the application run as quickly
as possible and this is what I think is
really cool react Jas of the
library that you guys might have seen
from Facebook actually works the exact
same way the architecture is identical
right and so instead of OpenGL though
their bottleneck is the DOM and so they
build sort of a scene they do like a
full scene builder before they run to
the DOM and that way they're seen
builder can compute exactly which Dom
operations would be fastest to render so
there you know the polling ideas
straight out of the world of game
development so it's inevitable you're
probably already using some of this
stuff today and if you're not then I
guarantee it you will be so I think that
this is a great opportunity to sort of
become familiar with some of the
patterns that game developers have been
using for decades so that when you're
building your next apps you can you can
at least have them in your tool set
that's the argument for using game
techniques inside of apps but of course
the other reason you might want to know
about game dev is because you just want
to build a game in JavaScript right I've
got great news for you there has never
been a better time to build games with
JavaScript finally we have all the basic
primitives we need in the form of web AP
is in order to start competing
toe-to-toe with real native experiences
that the gap between JavaScript and
native capabilities is closing rapidly
I'm really excited about this so the
begs the question why isn't everybody
doing this well some people are trying
some early pioneers are getting out
there this is this is a game called
Polly craft to really polished 3d game
built in JavaScript and then of course
you've probably seen Cutler rope which
is which is probably the most well-known
html5 game to date there's not a whole
lot of examples and there's not a whole
lot of success stories and the reason is
because that we lack familiarity tooling
and a marketplace game game developers
have a huge tool set and they have
miliary with how games are built they
also have marketplaces with which to
ship games we don't have any of these
things and certainly I can't address all
these today what I'm going to try to do
is is provide a little familiarity to a
group of JavaScript developers who might
be interested in building a game someday
so with that we're going to start
looking at a couple of very basic game
dev techniques and these are the things
that you're going to use anytime that
you're going to build a game in any
language we're going to look at it
specifically in JavaScript and all these
techniques can also be applied to apps
these days which is really neat it
usually takes a little more creativity
to do that but they can push things
forward so the first pattern to look at
whenever you're getting into game
development is the game loop this is the
basic core fundamental idea behind any
game that's ever been written and since
games word since video games were
staying right and it's the sort of code
that you probably would not get through
code review at most shops right it's
just a while loop that never stops and
it has some conditionals in it and
you're just doing everything in like
this sort of waterfall pattern but this
is what's powering every game that
you've ever used and the reason for that
is because it makes time explicit right
the issue with traditional event based
architectures that we're all using on
our games not where you have an event
like a click event and that event
triggers some kind of reaction like
maybe you close the window or you move
to the next screen is the time is
implicit in that right like an event
happened and then you give a response
and so you know that the response
happened after the event but you know
you never elevate time to a first class
citizen you never you never measure time
to the point where you could actually
put it into a variable and that's what
an event loop or that's what a game loop
gives you it lets you measure time
between different iterations of your
loop and store time into a variable the
other thing that lets you do is keep
moving without user input right so if
you don't have a game loop if you're
just responding to events then you're
dependent entirely on the user to push
your game forward and to push any
elements on the screen forward and with
a game loop you can actually respond to
time and start it to the user so you
don't just have to have an action and
reaction sort of pattern and I actually
have to
that I hope will work to sort of
illustrate this so so let's go here so
this is a version of a small simple game
I hope it doesn't blow anybody's Eirias
let's get a little quieter there's a
small simple game without an event loop
right so this is this is a game that
that only runs with a there's no loop
here it's just listening to my input and
then it's responding to the input right
so like if I start pressing keys then
it'll like start doing things right and
I can move around and I can jump and and
whatever but then as soon as I stop
nothing happens right so I could i get
be in the middle of a jump and it's just
just there right so if you tried to
build the game using MVC if you try to
use backbone to build a game like this
is basically what would happen right so
you you're entirely dependent on the
user for everything in this environment
right so as soon as the user stops doing
anything your game is sort of pointless
right and this is not just true with
games this is also true with anything
that requires physics in motion beyond
something that you're responding to
write any time that you see like a
bounce effect or a nice physical
scroller when you flick an icon and it
moves with momentum right it's got the
same problem so that's without an event
loop and then if you go with an event
loop this is the exact same game but
it's just going to keep running no
matter wat right so i can i can stop
doing anything and everything still
works i'll still fall everything behaves
the environment still going to be alive
right and this is one hundred percent
due to the event loop there's literally
no other difference between these two
games i copied and pasted so
so that's how important an event loop is
too rich interactive dynamic
applications so you kill that so the
music stops and then cool so once you've
got a game loop you quickly run into a
problem and the problem is that you're
starting to pack all of the logic and
stuff for your game into this one loop
right you can imagine how that gets
really hairy once you have more than one
or two different entities that you're
trying to update with time they start to
sort of get conflated you've got this
like enormous you know thousand lion
loop and you don't know where anything
is so in almost every game that's ever
been created there's an event there's an
update pattern right and this is where
you make your game entities or even just
your graphical entities autonomous you
teach them how to how to handle their
own changes through time right and you
can see here it's it's just an
organizational pattern you're not really
doing anything differently you're just
organizing it in a sane way and this is
important because that way your player
can know how to walk and how far he
needs to walk depending on how much time
is past your clouds can move with the
wind and when you flick an icon right
that icon knows how to how to keep
sliding across the screen without any
sort of direction from the main game
loop and so you know we all know the
decoupling is a good idea and this is
one of the ways one of the primary ways
that decoupling is done in games I have
to respond to time and not just to the
user the other cool thing about it is
it's sort of like a light form of
dependency injection because you don't
have to just pass time to these things
you can also pass other arguments that
they may depend on and then the final
thing that you need to know if you're
going to just ship a game tomorrow is
you need to understand what a time
buffer is a time buffer is an extension
to the traditional game loop and update
cycles and what it does is instead of
treating time in each loop as an
individual entity that you respond to
actually every time you get a new
instance of the loop you add time to a
buffer you just keep packing it into a
buffer and then whenever that buffer
overflows a certain amount which is your
frame time you render a frame right so
you just keep on adding to the buffer
and whenever the buffer is bigger than a
certain
set amount that you decided on initially
you render a frame and you clear that
time out of the buffer this sounds like
you might be over complicating things
right because you've already got a game
loop that will that will let you process
time this is important for a couple key
reasons the first is that it keeps
physics models stable if you don't do
this most physical integration methods
from the ones that you see on your
iPhone when you pull down the drawer so
the ones that you see in a 3d video game
will sort of start to feel weird and
wonky because the rendering at different
time intervals so sometimes you're
moving a character really far and
sometimes you're not moving it far
enough so it's really important for
anything that has physics involved but
it's also important because it did
couple stimulating and rendering and
this is critical for JavaScript
developers because you're going to want
to use requestanimationframe anytime
you're building anything that you want
to be responsive on the web and with the
requestanimationframe you know that the
browser's are ready to rerender the dom
but that might happen at 30 frames per
second on one machine and 60 on a
different machine but you want those
machines to be able to simulate the
exact same thing at the exact same speed
a time buffer will allow you to do this
at I'm buffer will make sure that both
of those machines called the update
method with the same amount of time over
and over and over and and the output the
result of both machines will be the same
even if they render a different number
of frames this is kind of hard to
explain so I've put together a little
demo of it one of the stupid side
projects I work on is called Newton and
it's a physics engine that no one should
ever use because I just wrote it to
learn how physics engines work and one
of the things that I discovered was that
it's really cool when you can replicate
time based behavior and that's what a
that's what a time buffer allows you to
do no matter how many times I rerun the
same physical simulation it'll it'll
happen the exact same way every time
which means that you can write automated
tests about it and this is this is
really important when you're trying to
use game techniques in a nap because you
obviously want to write automated tests
for your app so let me open up this
example so this is Newton it's a little
embarrassing because uh what I was
trying to do in this particular version
of Newton was just to make a stable box
like that was the whole goal it's
literally just to make a box that
doesn't implode on
so for whatever right and this was
version probably like five hundred of
that attempt because I really suck at
math and what's what kind of sucks but
what's also cool is that when it first
starts the box seems to be stable but
then something happens to it's my
favorite bug that I've ever created in
any software ever so so all right here
we go I'm gonna I'm gonna refresh it and
you'll see what happens if the internet
works come on there we go all right now
watch so I'm gonna cafe scratching my
head like what the hell like I couldn't
build this if you ask me to write hey so
and then that's the crazy part it
becomes a box right stabilize it will
never do that again ever it'll say that
you can run it as long as you want trust
me I've tried and it'll just keep on
bouncing back and forth back and forth
so um what's really cool about this
right is that because it's using a time
buffer I can refresh this as many times
as I want and every single time it will
behave exactly the same way there will
be no difference right you could even
compare the different frames and they
would be identical and it doesn't matter
what computer I ran it on you can run
this on an iPhone and you can put it
beside a computer and it'll run at the
exact same speed right and this is this
is due to the combination of the game
loop and the time buffer so in this case
it lets me reproduce a bug but it does
other more useful things like just I
love this bug it's okay all right so I
don't want to keep you guys too long
let's put a little bit of this together
so that the game that I showed you
earlier the one that looks like a really
shitty version of Minecraft this is the
event loop for that game i just copied
and pasted it straight out right so it's
not complicated that's that's a full
published game you can finish it it has
music and audio and upgrades and
everything but like this is the full
event loop right so um it can keep
things like tight and simple and one of
the nicest things that I think about an
event loop is after building all sorts
of sort of backbone spaghetti apps over
the years I love that an event loop
lexically and code shows you like what
you're doing over and over and over and
over it lets you it really like
highlights the hot spots in your code
for you usually if something's going
wrong or going slow it's because of
something inside of deep inside of your
event loop so so here you can see the
game loop the time buffer and the update
method all working together right the
whole function is the loop this frame is
just called over and over and over and
over with requestanimationframe that
time buffer is just a bit at the top I
wrote a little clock system that they
just implements a time buffer and does
what I said ads time to it and whenever
it overflows a certain amount it just
extracts that amount out over and over
and over nothing special and then you
see a bunch of update method to it right
it's updating controls it's updating the
player it's updating the music
and like that's that's the whole thing
that's all you really need to make a
game and so where do you go next right I
obviously just showed you the very very
basics of building a game but I hope
that some of you guys will go home and
join one of these 48 hour competitions
and try throwing something together and
these are some really good resources if
I were going to put together any game
right now with JavaScript these are the
things that are simple short mature fun
well documented right that you can
actually rely on to build things like 2d
graphics 3d graphics and physics you can
use my company Heroku and the ws module
and notable really awesome multiplayer
stuff and if you ever want to talk about
any of this nerdy video game stuff with
me I'm hunter leftist on Twitter I'm
hunter a heroku com and I really
appreciate everybody getting up this
morning to come listen to all this game
nerd stuff so thank you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>