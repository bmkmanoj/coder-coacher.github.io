<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Pam Selle: OMG Streams! - JSConf US Last Call | Coder Coacher - Coaching Coders</title><meta content="Pam Selle: OMG Streams! - JSConf US Last Call - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Pam Selle: OMG Streams! - JSConf US Last Call</b></h2><h5 class="post__date">2016-03-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/OJbfqknBcdU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to OMG streams I am Pam you can
find me on the internet at pama sore and
my also somewhat dinosaur-themed website
the web before com and so the thesis
today they're going to talk about is
that streams are the most awesome data
structure that you don't know enough
about so the goal today is that you are
going to leave here as excited about
streams data structure as I am so step
one streams streams streams so I'm going
to start with some history so I wanted
to find out when I became interested in
the streams data structure where the
first instance of what the stream data
structure looks like was and as far as I
could tell it seems to be unix and so ah
ah wrong window hold please excellent so
all glory to the pipe operator so if you
do something like this in UNIX so if
you've opened your terminal then cat
lets you send that the value from best
animals text into the grep I command so
the output from the first man is piped
to the second command is how you would
say that and so that looks like just you
know because we can soak at best animals
so that's that come in by itself and
then if we had the pipe operator called
a pipe because it looks like a stick but
also you can think of it because data is
flowing through it and so we grew up so
globally search case-insensitive for
cats because cats around the internet
and so we can you know so if you've
opened the terminal you've been using
streams and that's actually where the
first instance that I can find started
without even probably knowing that
that's a stream stash structure what are
streams so streams are an abstract data
structure that means that when you see a
stream like in UNIX it won't necessarily
be called a stream so as abstract so you
can have multiple flavors of them you
might see them come in different forms
but ultimately they're still streams so
a real world demo I'm going to have my
buddy Joe come up here
we have a real-life experiment to
demonstrate how streams work but we're
going to take water and it needs to go
from this first cup through the through
the second cup and into the third cup
because reasons so this is the task that
we on you know on the assembly line have
to do here's one way to do it all right
now with some highly specialized
modifications to the second cup we can
make it more like a stream data
structure so let's pretend let's swap
these so this is now cup one cool all
right so now we're going to do this
operation with streams are you ready all
right all right thank you Joe that you
can keep that you're welcome so the
streams data structure is basically it
lets us flow through rather than having
to make you know stops at every stage
and that ends up being really powerful
so I'm going to bring up sicp because
this is kind of a canonical texts ossep
is structure interpretation computer
programs if you have a computer science
degree you might have read it if you
have a computer science degree and you
have not read it you probably feel
guilty about it so it's the canonical
texting computer science and it what it
defines as streams are their delay list
well what does that exactly mean so a
delay list means that you can treat them
like a list structure but you don't have
to have all the values at once that's
really tricky and really really cool so
why would we want streams why we want
these this delayed list structure well
you can't or don't want to hold
everything in memory and you bandwidth
is expensive so as we progress in
computing you know the facts change
constantly some facts that are still
true is we don't want to waste memory
and we also bandwidth continues to be
expensive it's not you know it's not
free so we want to use streams to limit
the use of those resources
so streams and why you should be extra
excited about them so streams being a
delayed list structure let you represent
possibly infinite data infinite data
making you a wizard because you can
represent infinity in data which is
really really fascinating really really
cool so what are some things that don't
even you said infinity that doesn't
actually exist wrong some things that
don't have an end just a few examples
and natural numbers you can always get a
new natural number by adding one to any
natural number that you have whether
natural phenomena for a lot of you I
people keystrokes events in the browser
you don't know when the end large data
sets your heartbeat these have stars
because I definitely have an end you
just don't know what it is so you
operate under the assumption that you
don't have you don't have to care when
the end is and that's what streams let
you do they let you not have to care
about when it ends so why I brought as I
cp's partially so I could bring this up
is that stream processing lets us model
systems that have state without ever
using assignment or mutable data that is
really awesome so let's look at it again
so awesome so stream processing let you
model systems with state but you don't
have to incur the cost of assignment or
mutable data so you can move faster
because you aren't storing things in
memory and you aren't mutating data
which is something that we're talking
about a lot today these days so really
really cool and you should be really
excited by streams especially how
they're able to represent how we move
through the world that is we move
through large data sets we move through
real-time data we move through things
where we don't know when they end and
streams are the data structure that let
us do that so streams abstract a
structure that means it can come in
multiple flavors in general actually
kind of splits into two standard flavors
so there's push streams and pull streams
so Bush dreams are like the fire hose so
a push stream is it you can think of it
like the fire hose like if you have your
at the end of the fire hose and you just
open it up and then it's just pushing
water out and so
you can deal with that in computing
there will you know has as positives and
has this negative so you think you're
using a push stream when you see things
like callbacks so there's someone
standing at the end of the hallway
getting the firehose sermon at them
they're doing something about it when
they get the water third of them I don't
know non-blocking so once the stream is
open it doesn't stop flowing it just
goes so that's the push stream and the
downside because there's cost any any
structure is that possible overload so
if you stood you know 10 feet in front
of a fire hose that probably wouldn't go
so well in the same way if you are a
consumer so in stream processing we
talked about producers and consumers or
sources and subscribers but they all
kind of mean similar things so if you
have a producer and a consumer and the
consumer can be overloaded by a push
stream from the producer then that's a
problem so you have to use push streams
in an environment where you're
protecting against that so the other
flavor is pull streams so pull strings
rather than having the data thrown at
you just you know I can handle whatever
data you throw at me pull streams are
more like a leak like a data leak lake
of calm data and when you want data you
have to you know get your bucket that
holds data and walk to the lake go get
some data and walk back and while you
are walking to the lake you cannot do
anything else so in computing that means
that we tend to see this in the form of
iterators so walking to the lake and
back that's an iterator it's also
blocking when you're walking to the lake
and back you can't do anything else so
you also want to the costume curve that
is the timeout so you also want to never
ever block forever the one of my you
know should be on a t-shirt that when
you have pull streams you don't want to
block you don't want to send someone
from you know from the village to the
try to the lake and then you know feel
like okay well I guess I'll come back
and then like ten days later you still
haven't got any water I don't do that so
similarly with pull streams all right so
what do streams at the data structure
look like in JavaScript so as your data
structure lots
different instances of streams like
structures so node streams kamini named
they are pushed streams so no streams
this is the classic example from sub
stack who has a ton of awesome stream
examples so here is a very simple server
that reads a file and then sent the two
response here's the important bait so
what it's actually doing is this take
the final system reads the file into
memory and then it sends the response
out the data out to the response so
that's one way to do it just like porn
the water into the cup and into the
other cup is a one way to do it so
storing things memory there's another
way to do it so great thing about node
streams I really appreciate that it uses
the word stream number one and two it
also uses a word pipe just like we saw
in UNIX our good old buddy UNIX and so
the important bit is that the file
system we create a readable stream and
then we from the stream we pipe that to
their spot so we take the output from
the first thing that was happening and
pipe it to the other thing that we want
to happen so we're pride being rather
than using memory no streams are awesome
they're great generators generators are
a newer feature there in es2015 they are
reusable and possible functions or are
they pull streams indeed I would say
that because the way you operate on a
generator is that you asked for more
when you want more also known as pull
streams so you know it's a generator
when you see these kinds of indicators
that this might be a dinner so function
star and a yield if you see those in a
business that's going to be a generator
so here's a very simple generator it's a
reusable and possible function so this
does not do anything however if you
create an instance of a something so s
equals of something next next being that
keyword that call us to the next yield
through the instance of the generator
then it's actually doing something so I
have some some simple demos to show what
generators look like so some fun with
generators
alright we want to open up the console
all right look at actually I'm going to
tack it to the right all right so we're
going to generate so generator done
false and we've have something over here
mmm all right something else something
else entirely okay so say and then now
our generators done and if we continue
to click it's always done so our
instance of the generator is always
finished so if we look at what that
looks like in the simple generator so
our simple dinner we see that function
star and that yield those symptoms that
we have a generator going on and so in
the first time we call it we run it when
we call next we run up to the first this
the next time we run up to that next
this and there's no more yields but the
next time we call it there's still code
to be executed so it executes the code
in the remainder of the generator it's a
great place to put finally and things
like that so now that you've seen the
code let's just look at it again just to
you know see it how it works and then
see it do the thing alright so let's
swap that out for a mildly less trivial
one so let's get rid it simple let's
change it to string breaker I'll see
what string rigger does alright so John
went to the store and said hey there to
the clerk so what does stream breaker do
string breaker so aptly named because it
is a reusable and possible function that
breaks a string into parts into words
anything separate by spaces except for
the case where things are enclosed in
quotes so you accumulate until you hit a
space unless you're in quotes and then
you wait for another space and so that's
what this generator is doing you can
feed a different strings to have it do
that behavior so what we're clicking the
button it's sending that value of next
into our paragraph so now that we see it
we're actually going to change the
behavior a little bit
and just uncomment something so what
we're doing here is we're changing from
going through the an instance of our
string breaker to using an iterator
which makes sense because remember full
streams often we use dead Raiders so we
use another es6 feature yes 2013 feature
four of which lets us walk through the
values of generator so we can actually
create the value create our instance our
January right there and assuming li-ion
come to correctly yep so John went to
the store and said hey there to the
clerk so that lets us walk through the
generator as a with an iterator so
pretty neat and so those s simple fun
with generators and there's definitely
more interesting things you can do with
them but hopefully gives you a sense of
some of the simple abilities so can you
use kind of you probably want a
transpiler like babel to polyfill that
the example in there is running native
at the browser so up to you but pretty
interesting alright so that's some some
things that exist now but what about
what's coming next the JavaScript
conference and we always talk about the
things that we don't have yet so I'm
going to talk about libraries and
emerging standards so some libraries
that you can use to work with streams
though not necessarily native
capabilities but let you model stream
model data in stream like structures so
you have bacon Highland at our xjs so
reactive extensions for JavaScript so
bacon is a library I've removed all the
scary parts and if you didn't get that
joke it's because it says functional
reactive programming but it's it's the
underscore of an event so if you
familiar with operations from underscore
then it gives you those operations on
events so it gives you Plus back up it
gives you list operations on events also
which are streams so events or streams
gives you list operations on those
Highland is another library that you
could use for this similar kind of task
it has a stream constructor emphasis
added because i like i like when the
words map to our mental models that's
nice so you can put in
many different kinds of values to get a
common interface so you can you don't
have to just use one thing you can use
arrays generators readdle streams and
they'll all if you use the Highline
constructor it'll give you access to all
those lists like operations so map
filter all those kinds of a good
goodness so our xjs I would I call our
exeis fan the reactive programming
library for JavaScript it is called
reactive extensions for javascript there
is a new flavor coming out soon so this
isn't interesting to pay attention to
because we have a current flavor and
then the next flavor which is there
under different repositories and it's
actually tracking against an upcoming
standard that I'll mention the
observable standard and this is also
being used in angular 2 so when angular
2 comes out you'll have access to these
kinds of reactive tooling so that you
can get streams of data and do list like
operations on them which is really
awesome that's essentially what reactive
programming is so some recommended so
use of reactive programming words here I
know they're somewhat scary but it also
has a really awesome long read and also
this now in videos on ahead for intro to
RX really great resource so some
emerging standard so there is a browser
stream standard so there's a it's not
implemented or but there's a standard
that is being written out that brings
things like node streams natively into
the browser the as far as I could tell
the node streams people are involved but
they don't want to bring the exact same
thing they want to do what makes the
most sense for the browser interesting
but we don't have anything to show for
it yet that's okay because the
interesting thing about this the fact
the browser stream standard is being
worked on is the fetch API so how many
of you have used the fetch API I'm
guessing a good number okay yeah so um
it's a really good thing to check out
it's basically the API that will let you
stop having to include jQuery because
you didn't feel like writing an xml
httprequest so fetch simplifies that
interface so much you just say fetch
some data and then
and then then you get that kind of nice
syntax going so what's really cool about
the fetch spec though is that eventually
instead of returning a promise like
object which is when you get one value
it should return a stream like object so
hopefully those browser streams and
what's really cool about that was means
that we're going to be able to do that
kind of thing so instead of promises
where we have to like stop at every
station like each cut like you have to
the water has to stop in each cup and
then only when you finish can you move
on to the next stage instead of that we
can start passing data through and the
implication that has for speed and
performance is really big like that's
gonna be a really big deal and it's
really exciting object out of the review
could consider a stream like interface
so object observe proposal for es7 but
there's been a good number of talks and
articles about it up here too now so you
observe an object in the browser and you
watch for changes or mutations as you
like and do something with them and the
one I'm really excited about the
observable type so object real dog
observe lets you watch stuff on the page
the observable type let you watch pretty
much anything so you can watch events
you can watch arrays you can watch
generators kind of kind of like it
sounds like the Highland constructor
right but isn't it would be a native
type that gives you a place to put the
data source that you can then subscribe
to so there's proposal for es7 and the
the RX j s next the next version of Ras
that's what this is tracking against so
if you use RX train us with our xjs
which is currently an alpha rj is five I
guess I so which is an alpha I its
tracking against this type so that's the
plan so you can that gives you access to
using the sort of thing now so I have
some small projects using some of these
tools the first being last week blogs
these are these are example so you can
see like ok so nice libraries but what
looks like when you actually use them so
last week blog so refresh this so last
week blog it'll take a minute because
like on asleep but so you can see how
that rendered to the page not all at
once but kind of cascaded because it's
rendering to the page before it has all
the data so i was actually happening in
last great blog is I'm getting there's a
setup where I have friends and my
friends don't blog enough so I had to
include the new york times to get enough
post so you could see the visual but in
order to filter my friends RSS feeds for
things have been posted in the last week
so that is the idea so I get some RSS
data I pipe it to something to
understand RSS data and then I can you I
use Thailand here to filter and map in
order to send that response to back to
the browser so i could operate on those
because there is really i turned them
into streams of data so rather than
saving them all and then letting the
server crunch away i'm sending the data
as i have it ready all right so another
one so the space-time app uses the fetch
API fetch API tisane extremes yet sad
face but it also uses I also update it
to use gulp which uses use of streams so
if you use go you've seen that you
define a source and then you pipe it to
different operations so that's one of
the reasons why gulp is so fast is that
is using stream stream objects so
space-time app is a visualization that
fetches star data and lets you drive
your delorean around and see how the
stars move over time so because the
stars look different than now so they
move our time I think it's correct plus
or minus like either ten or a hundred
thousand years
at which point relativity becomes an
issue um but it's pretty fun and so but
the fetch API is really that simple it's
such a stupid number of stars and then
do a bunch of stuff with them and render
them in a in 3gs in a 3d 3d space so
another one Millennials snake people a
popular chrome extension also there's
firefox add-on I maintain that one also
in safari users object observe to
appropriately update instance of the
word millennial with snake people such
as in New York Times thing people found
lazy or my personal favorite millennial
children is changed to sneak 'let's so
you know really really important stuff
happening but it's what it's doing is
it's looking at the body of the document
and watching for changes which is
streams those dealing with call back so
it's a what is a push stream because
just as data comes back from the
observer we deal with it with changing
things just make people so really really
important stuff there all right now
observable so using our SAS so this is
this is just kind of fun it's a silly
silly art so I'm observing where your
mouse is going and then you can plate
click to place straight shapes so I'm
actually operating on your click stream
and saying and and partitioning the
clickstream whether it's a single click
or a double click to or a multi click to
place different shapes so you can play
with it place different shapes just kind
of fun and the code for that looks like
this so we take our clickstream we
buffer the debounce to figure out
whether it's one click and then we
partitioned into two unfortunately since
I didn't include any polyfills I
couldn't do the beautiful array syntax
where you do you know think I'm a thing
equals the output of the array but I had
to use actual rate indexing like a you
know
like the past yeah pretty fun all right
some interesting links so notes dreams
comedian t there's a website called no
dreams com so there you go RT have
somewhere to go and I did mention sub
stack so the stream handbook streams
adventure out of node school great
resources generators i get if i kyle has
it the you don't know java j/s book is
all free on github you can also buy it
with your money which is also great but
there's a really nice generator section
and axel has an awesome generators and
deaf he always had really good resources
for the new language standard so
definitely check those out reactor
programming libraries bacon highland RX
and our xjs next remember they are two
different repositories so and for what
it's worth the demo i showed was using
the alpha version but they should be
compatible eventually other cool
reactive things the reactive marbles
just wanted to show those super quickly
so this is interactive diagrams yours if
you're thinking okay well list
operations on streams of data well
that's kind of a big you know conceptual
leap the arch marbles let you look at
what some different things look like so
what happens when i merge two streams
this is it gives you so we call them
marble diagram so these are marbles you
can move the marbles around and see what
the output of the list operation would
be alright and so I include those links
because the slides are all online PS
Eliot I can't have a 0 / 0 ng streams
thank you so much find me on twitter at
pama sword chat with me in the hallway
web before turning in complete so Turing
cool is the podcast yeah thanks
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>