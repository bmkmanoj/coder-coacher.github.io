<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>hapiDay Oakland 2014 | John Brett: hapi Adoption at D4H | Coder Coacher - Coaching Coders</title><meta content="hapiDay Oakland 2014 | John Brett: hapi Adoption at D4H - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>hapiDay Oakland 2014 | John Brett: hapi Adoption at D4H</b></h2><h5 class="post__date">2015-01-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/x7nq3Q0xrEI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay sorry but those technical details
are difficulties ER and okay so that's
in black commute and yeah cool okay so
hi everyone and my name is John breath
has been mentioned and those no details
sort of our twitter and get off of
anyone once again touch me after this i
was curious about anything to talk about
and so about me i'm a lead engineer the
company called d 4-h technologies and
we've recently adopted happy and what I
want to talk today was about how that
adoption is gone and how we actually
came to use it in some of the design
decisions we made around it and yeah so
I'm pretty sure no no no one has ever
heard of d fresh technologies were small
company based at a Dublin and so just a
real quick intro on what we do just say
you've sort of context and so basically
okay the resolution is great there but
those are our customers we work in the
emergency services and response team
industry so what we do is provide
software to help these guys do their
jobs which is save lives and they range
from anywhere from charity search and
rescue teams to public fire service or
city hazmat teams and alder up to a
private island gas and unsafe
pharmaceuticals and so we give team
software tools to help them do her job
to the best rivoli so when it comes to
tracking equipment so inspections
repairs my engine inventories their
personnel who's qualified who's I am
trained who's on call and we give them
like structured incident reporting sort
of federal analytics and integrate with
like lost lost person data bases around
the world and so with the goal of like
giving them the right date of when
things go wrong and I'm you do that all
from here so that's actually a light i
was on the coast of dublin and taken
from an irish coast guard helicopter so
it's a pretty cool place to work on
happy yeah and so we're going to talk
today was basically about how we came to
use happy in her stock and some design
choices we made an her first venture wit
node went all together and the part
happy played in that and so voy happy so
talk to you down sir that I have to
start with why node I'm up until about
six months ago
we were actually a fully PHP company and
so typical Lance taco base a large
monolithic server side rendering and
then a custom frame work on top and but
year we wanted to build a public API so
for mobile apps and customer
integrations and you know improved
development for ourselves and so try to
move forward with the code base and
trying to build that API and it's clear
is going to slow us down in the long run
in terms like maintainability and things
and so we looked elsewhere he would
order PHP frameworks like improve the
situation moving forward and then we
also investigated other languages and
obviously landed on node it's like
seeing all the success stories of like
Walmart and paypal and their adoption
stories and so we build a prototype to
compare with like the pH vapi prototype
we had and we did originally and Express
actually but and even without like the
PHP code reuse for problems we solved
already and we're able to replicate the
PHP API concept pretty quickly and in
much less no code but I think that's
what everyone finds the hood n p.m. in
the node ecosystem able to do things
pretty quick and so obviously notice way
forward and we wanted before with that
so and the prototype was prototyping
best as there's a lot learned but
there's a huge went wrong with it that
was going to cost us moving forward and
so the next step is to look at our
choice of frameworks and see what would
scale first I think expressed is a great
framework put some design aspects that
we weren't convinced with suit like a
larger scale API in project and unless
we built extra infrastructure and we
didn't have the resources or experience
to do that and some design issues what
expressed you're not into like the
router and like the flexibility it
offers is great but I'm like not being
able to guarantee your handler call
order and so far out and we've seen some
companies get burned without recently
and I'm it always felt like we're
working against it to try keep things
modular and so we spent some time
evaluating other options and there
looked at loads of great frameworks a
note and I could spend a talk like
talking about how they compare with
happy but you just have to trust me when
I say we looked extensively and found
the happy was the one that met our needs
the best and so happy is a lot of
bragging rights but I wanted to talk
about what influenced our decision to
choose it
and a first of all the routing was like
deterministic and which is brilliant
like for larger scale projects and it's
kind of essential them because you don't
always get to know the project as a
whole and the enterprise grades like one
hundred percent test coverage and
streaks ember adherence like we can't
afford to make mistakes in the industry
were in so the the robustus was a like a
first priority for us and the plugin api
is premiering favorite feature and happy
and it provided the infrastructure i
felt was missing other frameworks and
trying to keep coal-based clean and
scale well and gives all your cold
contacts and i talked about that in a
minute and a few examples i'm they let
you focus on building business value
instead of rebuilding the same
infrastructure every time and the
ecosystem is great all the plugins / the
happy team and other people but i won't
go into that I think simulator speakers
are going to cover some of those and I'm
I definitely what I mentioned the
community and its really inclusive and
encouraging to beginners and my first no
module was a happy module and this is my
first conference talk it's you can
probably tell from nerves but I'm and
that's a result like like guys like
behind in the mentoring and a system to
got in there and so some of the design
choices we made you're unhappy and there
are heavily influenced by the MPN and
they're like fostered service toil and
so happy CLI like in how we structured I
building this application and so after a
few different attempts and like trying
to structure things so that they would
scale quite well because we expected
this API to go pretty big our platforms
pretty big and the range of features we
offer and so so one of the problems
we're going to pep hates i have about
like a lot of node applications is like
500 line index file we've like huge
amounts code with no context and it's
hard to grasp at a first attempt alright
so you wanted to keep that clean from
start and so first I anything that
wasn't config or like plugin
registration into a plugin and so it
gives you a nice neat starting place and
then everything inside the plugin gives
a context and then the plugins were
ready to divide it into a service or a
feature so like a service plugin will be
like catering from some sort of service
like database access
are you know authentication or and stuff
like that and the feature was the
business logic that would be offering
customers like your membership sir
equipment just management or something
like that and they would contain the
model functionality as well as the root
and logic and then they would expose
their own functionality for another
plug-in to consume I'll explain that in
minocqua code I am and and they could
consume an order if needed I know
everything else we said we pushed into
node modulus not this would be excellent
we'll have loads of node modules to my
name and the D 4-h name and all but
there was surprisingly few and I think
that says a lot about the nobody
consistent and the happy ecosystem is
all and so sure what that looks like and
so this is a new happy eight syntax and
that's pretty straightforward you'd
require a happy module create your
server taking some config and you got a
connection this is new top eh so it's
basically a listener and we just sees a
clear yet I am you pass the report I
won't go into that everything's going to
talk about some of the happy eight
features later and then we just add in
our plug-in registration so you can see
pretty clearly like all your code is
context now you can understand what it
does not this big giant index file to
Troy digest and what it would you like
I'm not used to production code looking
at clean and so I'd show you what like a
sample feature plugin would look like
and since we are we generally like our
member plugin and such as the normal
plugin registration tree parameters
plugins like a server a li so anything
you can do it server you can do in a
plug-in but some sound box features
which are pretty cool the options to be
passed in when you're registering and
next just returns the control flow back
to the server and this is an example of
consuming one of the plugins so we're
consuming some database access here nice
clean API to do and it will fail the
compile time if there's any issue so
you're not testing things at runtime and
then we are in our model functionality
don't like come from an ORM or something
you're older self and we passed in the
database area so i made testing easier
when we're testing her at a model logic
and this is how we expose the
functionality so another plugin could
consume it so pretty straight forward
again
and there's a route so sorry just a lot
of code at once for there and so that
that's a standard route definition there
and like I think it's pretty self
documenting and I won't go into
validation I think someone's going to
talk about joy specifically later but
and you can see here like the the query
parameter pretty like self documenting
and free hunter gets called next Frank
you know checks we might want to do but
I think handler needs to be like
highlighted for how simple it is to read
and what it does and we use promises and
I don't they work for us for her
handling i think is always a debate
around and calibrate was on the modules
roll ourselves like gives her uniform
jason outputs it worked pretty cool
because and a if there was a Boomer it
would just return that it is but if not
it would wrap it and so we'd always have
a sinner output and then over past year
to like New Relic or monitoring tool so
if there was ever a problem that would
just really no return 500 s with the
server would crash and that's one of the
cool things about happy and descriptions
are straightforward and so just one more
feature to show then like on top of that
we're back to a server example and we
have one extra plugin and this is happy
swagger so it's kind of like light would
be so self documenting and but but it
actually traits fog or documentation
which is pretty interactive for anyone
not familiar with saira it generates
documentation that looks like this and
so generates a jason specification is
API enables interactive documentation
generation on the page and then a
sandbox there for anyone to test and
this was huge for customers and had like
when trying to build integrations with
us and it even goes one step further you
can actually have your client generate
or your client SDKs generated from this
in like Java or PHP or java script and
so it's pretty cool that were one root
definition you've got your documentation
on client SDKs generated a compile-time
with no bill stuff so that was huge for
us moving forward so and saw results and
with an API in production and we started
in the summer with naveen production
supporting our first mobile app also in
production and some cool parts with you
know
regular handling input validations were
usable and reliable and no manual docs
maintain or client api's codes modular
scales quite well and and it's changed
our approach development now so new
Filch new features a built API first
we've actually seen customers now start
building their own API or their own apps
over which is pretty cool c and c ya
things to take away and load adoption
can work even with small teams and small
resources I prototype a small use case
first I would just throw error code base
that we have and enjoy your place with
one and when you do definitely use happy
it worked great for us and I don't think
we were to move forward and we're gonna
get our framework is the same pace and
uncertainty funny ones using happy
definitely talk to me curious to see how
you build things with it or if you
different design approaches and so I'm
done all finished with another picture
of our lighthouse and thanks very much
for the happy team for inviting me over
to speak on this and I thanks everyone
for listen</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>