<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Adam Baldwin: Node Security | NodeConf ONE-SHOT | JSFest Oakland 2014 | Coder Coacher - Coaching Coders</title><meta content="Adam Baldwin: Node Security | NodeConf ONE-SHOT | JSFest Oakland 2014 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Adam Baldwin: Node Security | NodeConf ONE-SHOT | JSFest Oakland 2014</b></h2><h5 class="post__date">2014-12-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rjzpPlY5Kck" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright a security carol it is near the
holidays so I thought we would do
something a little bit different than
the traditional boring security talk so
gather round friends and I shall tell
you a tale it was a bleak december morn
one year ago today that i was visited by
three spectres but these were not the
ghost of some Yuletide holiday what with
their message of goodwill for all
mankind and all that good stuff this
story isn't going to end with me
flipping sub stack a Bitcoin and having
him buy us all at Christmas goose Plus
no Tiny Tim sorry that being said I I
totally was visited by three
otherworldly messengers at night the
ghosts of security past present and
future so press close friends for the
night is dark ignore the fact that it's
like 2pm and even now I can sense their
ghastly presence roaming these halls I
was a different man then I bore little
mind as I was a puppet to security needs
I was pissing the night away playing
everquest uh and the cold wind swept
through my office the chill went up my
spine along with a sense of foreboding
but I talked it all up to a bit of
underdone potato and a bad can of
redbull I said a bad can not a big can
but as soon as I rose and shut the door
a ghastly countenance unknown to me swam
up from the dark ebenezer Baldwin it
said to me Sony I mean Sonny I gasped is
that you yes Baldwin I've come to warn
you about the grim consequences of your
actions for you have not dedicated
yourself to security you will end up
like me completely owned and dragging
your volatiles around with you for all
eternity three ghosts will visit you
tonight heed their words oh you mean
like a Christmas carol ah more like
Scrooged but keep an eye out anyway and
he was gone
so sometime later I scarcely return to
my Labor's when the window blew open and
the first spectral visitor floated in on
the breeze on his feet he wore roller
blades and from his belt dangled a
jingling nest of lockpicks ignore the
fact that that's alignments hand said
Baldwin he said I am the ghost of
security past I've come to warn you not
to forget the lessons you have learned
from hackers past confidentiality
integrity integrity availability and
non-repudiation mind you Baldwin the
air-gapped the air-gap least some fool
gank your laptop and pretend to be you
hit the bricks ghost eyes told him I
already I already know that 99% of all
security issues that you're going to run
into have been solved in other languages
already the ghost looked shocked even
though even through his otherworldly
pallor what seriously he asked yeah
check it out I said so at this point I
decided to pontificate to set date
Murphy from hackers ghost many problems
in security have already been solved one
you know we're standing on the shoulder
of giants in node we are a very young
community and language and platform and
sometimes I like to go back I actually
have a book that I forgot to bring up
here it's like the fundamentals of
computer security from 1994 and it
basically has all the cool shit in it
that we talked about in security every
day like and you know it's been going on
forever this principle sort of have
existed so I'd like to just kind of
remember that what those fundamentals
are and then the fact is that when you
go to implement things in your
application chances are you're going to
be looking at or are using these these
these concepts or building off of these
wrote these building blocks and they may
seem simplistic but they're they're
they're rather important the first one
is confidentiality right confidentiality
the security of data in transit and at
rest and it's something that that yeah
TLS we all know TLS is broken in
whatever but anyway so security of data
in transit and at rest but I like to
think what about in use what about in
memory and and one thing about
confidentiality that we have to remember
is that sometimes we're running in a
shared environment and we do have where
we have a sandbox environment Iran is
something interesting that just after
everyone familiar with heart bleed when
that can always shit yes so it had a
logo in like a website and that's why
all you know about it so that's cool uh
so after heartbleed I was like how does
this how does this impact note what's
with some interesting patterns no and I
was like new buffer and so I was like
cool buffers aren't zero filled when you
when you say new buffer you say new
buffer and a link that like you just get
some you some cool random data back and
I was like John and I were talking after
that I was like I want to see this
pattern in real life so I started
looking at note core know they kind of
truncated things and couldn't find any
things were but things were being leaked
a while back we had a client engagement
we actually ran into this in a sandbox
environment where you could run new
buffer you just run buffer and just get
backed in and you could leak out all
kinds of memory and it was fantastic so
I've actually seen this so it's
something to know about sub-zero filling
buffers if you're not is cool so that's
you know confidentiality of data sort of
in use the next one being integrity
right so integrity of data being read or
written to by a subject who you're how
many how many integrity formal integrity
models do you think exists everyone from
one where is your hand to 33 Matthews
right there's probably more but there's
there's three this this that are sort of
like the famous ones there's a model
called the bib amodel and the bell la
Padula model in the Clark Wilson
integrity model there's freaking
mathematical models about integrity that
exist that have existed for years and
years and years about about applying
integrity to your application a subject
and identified subject that you can
proof is an authenticated subject it
there's there's rules for reading or
writing depending on a higher and
level or lower integrity level if you
need to go implement these things those
models already exist and now you know
about them and I'm not going explain
them anymore you can look them up and
there's math so one thing with integrity
that we find and something we're finding
a lot in the engagements that we're
doing in the modules that we're testing
and assessing is it input validation is
just you know sort of crap and there's a
good module there's joy joins a great
module it's the best long-term that i
found i think to do just input
validations for for typing what oh joy
alright so I the other thing the other
thing that I've had a kind of a struggle
with with the note security project with
like input validation is let's say you
build a tiny composable little module
that that takes in some input and then
does a child process exec is that is
that vulnerable to command injection yes
depends on the context and so do we
report that as a as a vulnerability to
that that project or an advisory on the
site or not it all bitch devout the
input should be validator it should be
reusing like exact file or something but
something it's just something to think
about if I haven't mentioned this sort
of going to be just random musings from
the security guy so availability the
last last sort of of the triad that the
security industry likes to tout as being
the big three availability this is the
most a sort of heartfelt aspect of
security like when shits down you feel
it when something isn't available or 500
you feel it and we have a you know in
node we are the you know this async
thing just like in the first talk was
mentioned like like you know that's like
the note the node way right well we
still have this event loop that we can
block and if you if you say you know
call process next tick recursively a
whole bunch of times that you're going
to get the event loop blocked of you if
you call if you have n number of
elements that are passing like a sink
parallel you should use a parallel limit
instead right you're going to you're
going to end up with with availability
problems and that's why it streams are
so wonderful and
as cool because it can just chug on
stuff and never quit but yeah
availability is like like it's just
something to think about when you're
when you're designing the systems that
you're building and there's there's
there's others to like non-repudiation
where you can prove that a message was
from a person and there's there's these
there are these sort of core concepts
good resources of course shameless plug
from the security project but Orr has a
lot of good stuff however when you go
there you're going to see you be like
this is PHP wow this is Java why your
flip the table and you like this has
nothing to do a node well this you can
ignore that fact and try to apply those
patterns in node if you do write African
blog posts and tell us about it and will
link it so that we start having these
patterns showing up in node so with that
said we now move on to the ghost of
security present after i finished my
master class on the subject of those who
cannot remember the past are doomed to
repeat it the first ghost disappeared
but i had no sooner return to my task
that a great cacophony announced the
arrival of another ghost he piled
straight into the door frame which would
have hurt if he had been corporal
because he was too busy frantically
swiping this laptop he wore a gray
hoodie and a paint expression uh hey he
said I'm supposed to be here to warn you
about the dream necessities of security
present and all that but I I really have
no idea what damn problem is or what I'm
doing here dude I said glancing laptop I
see your problem already you need to
actively monitor self-report
vulnerabilities and keep up with the
community in general you're the ghost of
security present right I'm supposed to
be he said forlornly well then listen
I'll tell you about it and why it's so
important so this is where I go off
about the note core security project all
right notes good note core security
process I submitted and I would love
people to put comments on here this
particular pull request and ask why it
hasn't been adopted in core yet this
pull request is six months old I asked
court to adopt a security process
in which it basically communicated to
you how you would know about when
security releases were published and you
know maybe how they were going to deal
with like new v8 vulnerabilities and how
they're going to pull them in so into
how all that was going to be
communicated and executed and and so we
wouldn't have issues there well there's
nothing official I'm hopeful for I ojs
personally given the goals that they've
set forth on that which I will be
contributing the same damn thing to that
repository as well and you'll respond he
promises right there so this is this is
talking about security presence so we
talked about past and that and we and so
so once you've learned sort of you your
your past things and you you're coming
to present you this is all about keeping
up this is all about understanding
what's going on in the community and one
thing that I wanted to mention with
permission is that what NPM is doing mpm
is a huge part of our ecosystem and note
right like the majority of like no
course cool and everything but like the
majority of the happenings are like it's
like the modules the eighty percent of
what you're building is is is all
somebody else's modules somebody else
code and it runs on this infrastructure
by and p.m. and I think just like pile
of them are here so that's cool and they
actually like you may not know it
they've written some blog posts about it
they care a very great deal about the
security of the infrastructure of that
from in terms of availability security
ever since we started working with them
even when it was no just just an open
source project years ago they've taken a
great sort of pains to respond well take
action be accountable for security and
that's been through the whole process of
how they've built in design stuff
through the new the new npm dub dub dub
that's gone through extensive auditing
and testing from third parties and as
well as the new sort of the new registry
stuff coming up they care
I deal to make that happen and I think
that I guess they should be applauded
for that that's that's sort of
unprecedented I think so Wow yeah there
you go okay so the other thing when
you're talking about keeping up with
security present you're talking about
also known vulnerabilities this is sort
of the shameless plug for like the node
security project and like understanding
like whose code you're running in
production and is that bad or not if
you're not familiar with the note
security project there's basically this
tool called nsp that you can install run
against package file a shrink wrap file
it'll tell you if there's known known
sort of blacklisted modules if there's
things that like this version has a
known vulnerability of course you may
not have the vulnerable because you're
using it differently but it's still this
is a good idea right to know about
what's what's going on there there's
another one I didn't put in here that
I'll mention call retire j/s that keeps
track of like your client side code abs
is your angular version out of date
using some stupid helper that's
vulnerable those things that's really
good another way that I personally keep
up with things going on with my
dependencies my dependencies happen to
be the entire module base that's an NPM
because of the note security project I
wrote an app basically to keep track of
all of the issues in github and check
them for keywords so keep up on your
projects know when security-related
issues are opened we do this and
constantly monitor it so we so we get
feedback so that's that's some things to
just sort of keep up on the community
things that are going out on the
community with security so after the
ghost of security present take me friend
departed I began to grow anxious after
all I'd seen this movie before and I
knew what was coming next the room
darkened and a mist like a Kirby gantu
drift across the floor a figure who
looked not altogether unlike myself
although it looks more like a Mel Gibson
Sifford emerged from the shadows his
face shadowed by a great hood in
handheld sit sighs he intoned gliding
towards me in an unearthly gate
don'tdon't uh-huh I've comfort with fell
tidings no matter what you do no matter
how you could try to prepare for the
unexpected you can't for every seven
layers of security you set up eight will
be hacked for every vulnerability find
10 more shall spring up in their place
lament mortal for there's no way to
prepare for the unprepared ball yeah
that's kind of bullshit I said so yea
thou shalt wait what so it's true you
can you can't prepare for everything but
security necessarily isn't about that
you can't it's not just going to happen
when you try to predict everything it's
more about doing everything you can to
set people up for success uh here listen
so the ghost says the ghost says you
can't you know keep up with with
security you can't predict the future
that's true like you can do all of these
great things in security and you're
still going to make a mistake we're
still human uh that's fine that's that's
that's that's what it's about security
is a process it's not a destination it's
that the Penrose stairs where you're
just going to kind of keep climbing and
climbing climbing climbing climbing
forever and just incrementally get
better that's what it's all about it's
about applying security and every single
one of these steps in your design phase
your build phase you deploy phase and
your test phase your production and
monitoring if you're if you're if the
only thing you're doing is hiring a
company to do pen testing and catching
your security bugs in production you're
doing it wrong sure I love the business
but no you're doing it wrong you have to
push if to take that advice and start
pushing it back towards the developers
pushing it back towards the the the
front end of your cycle the other thing
I'm going to harp on is audit logging
it's not done well enough I don't think
in the majority of applications and
settings and traditionally what I hear
in larger enterprises out here that's an
ops problem let ops worry about
monitoring and detection we just built
an app they run it
that's bullshit right what you have to
enable them as a developer you have to
give them the who did what when and what
was the result you have to enable them
to have the tool they have the data to
make the to make the decisions if you're
going to put that burden onto them and
lastly run fire drills that one of the
biggest things you can do is just sit
down and have that that sort of silly
theoretical discussion that fire drill
of what happened if this was abused what
would happen if this was unavailable
what would happen if this was hacked how
would we respond to clients what logs
would we need what would we have to
access how would we respond if you do
that you're going to stop trying to
predict the future and you're going to
start implementing those controls back
now and have an ability sort of to
respond to those future events I'll use
the word future proof I guess so with
that the last ghost departed and
although I had imparted knowledge unto
each of them I felt that I learned a
great lesson myself about what's
important and what's not when it comes
to the great mystery that is security
the end Mike Spiegel wrote all that
Jamie rofls Robles did all the art and
Ben hacker did puppet thingies so thanks
Ben</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>