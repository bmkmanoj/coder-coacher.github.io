<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Thomas Fuchs: Nano? Pico? Femto? Atto? Zepto! | Coder Coacher - Coaching Coders</title><meta content="Thomas Fuchs: Nano? Pico? Femto? Atto? Zepto! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Thomas Fuchs: Nano? Pico? Femto? Atto? Zepto!</b></h2><h5 class="post__date">2013-01-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YPKNbY40pCE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so my talk is about septo mobile
JavaScript framework that's jquery api
compatible not all of it but most of it
and i will also talk about micro
frameworks in general and why i think
they are good idea so first of this is a
real computer right so what does a real
computer have that a mobile device
hasn't any ideas lots of memory a hard
drive for spinning out actually don't
have a spinning hard drive in my
computer full-size keyboard so that is a
lot of differences I think the main
differences are it has a fast and stable
network connection most of the time
especially a chase comp because crème
force and team has done a really great
job if the Wi-Fi so a round of applause
for them please it's really hard to get
this right and it's pretty amazing
anyway you have lots of storage lots and
lots and lots of storage and you have
fast multi-core CPUs you also have
multi-core CPUs coming up in mobile
devices but there even if it's a
multi-course if you it's still much much
slower than anything you have in like a
real computer and of course you have
hardware accelerated graphics most
browsers these days support like some
form or other of hardware accelerated
graphics even if they do not composite
themselves in the heart of accelerated
way like use textures to rain delay term
elements they do use the operating
system provided like low-level hardware
accelerated methods to render their
stuff so
what about the mobile devices so what do
they have all right what do that don't
not have any ideas battery life pooping
restrictions right I mean actually the
iPad I mean it's probably used most
often by pooping I think not talking
about my experience here by the way so
so they have a slow and unstable network
connection most of the time if you if
you have like an AT&amp;amp;T mobile phone like
my phone is it has a slow and unstable
network connection it it doesn't happen
much to like so much to do with like the
phone itself or the technology itself
it's just that in the real world like
other people use it like the same
connections that we use or you're in
like the shadow of a building and the
connection doesn't get through to you
blah blah blah the end result is it's
unreliable you're also have limited
storage you have slowed CPUs and
hardware acceleration right now for
browser stuff at least it's only
available on iOS the other browsers have
all the adult devices all use software
rendering and compositing so it's kind
of slow there's an interesting thing
about this like all major JavaScript
libraries first came out when we had
phones that look like this phone you may
have had it so many ericsson t610 i
think i had this phone for a long time
before i had the first iphone i think
this phone came out in two thousand free
or something but most phones from like
the middle of the first decade of the
21st century I like this like color
screen lots of buttons really awful web
browsers if they even is a web browser
on there so JavaScript libraries really
rare written with the real computers in
mind and now because we have mobile
browsers that too so much more and
almost like desktop browsers we used
javascript libraries on the mobile only
mobile devices and maybe it's sometimes
not the best choice like the movie that
i will show now will demonstrate what
happens if something's not the best
choice
recognizing
David
I think they really tried hard to make
it really awesome but something will
really went wrong
so this is a little video it proves two
things I think the first thing is this
nothing that doesn't exist on the
internet the other thing is that don't
just use something because it's popular
don't I don't know use david has love in
your code because he's popular I don't
know to be at argument anyway use things
that are the right tool for the job use
the right actors for the movie or use
the right frameworks or the right codes
for you codes so again this a
commonality between those devices here
each of those devices actually uses
webkit in their browsers there is like
Firefox now if I Android but all of
these devices come with a browser that's
based on webkit and it's very
interesting and we had some talks
earlier a chase account that talked a
little bit about this it's very
interesting that WebKit has a lot of
proprietary features it's it's like the
new ie6 right but actually ie6 came with
a lot of features they were really
awesome asics and the IES before ie6
actually and I think people don't
realize that enough anyway proprietary
features actually mostly adoption of
features from various JavaScript
frameworks and that's why it's so
important that we have awesome
JavaScript frameworks and that's why
it's also important that we have a
diversity of JavaScript frameworks it's
not good to have a monoculture it's not
good to have just one framework that
rules them all it's good to have a
perverse landscape of frameworks for
various uses like feels chick we're a go
with that if you need Toto go with that
it's like use what you like best however
for mobile there are a lot of
restrictions in this anime proprietor if
awesome really awesome so here are some
of those features that you might not
find in a desktop browser if first
feature CSS selectors then mention it
during his talk documented query
selector all that's awesome it's
basically this one line of code replaces
about like six kilobytes of gzipped and
minified select CSI select the code that
you would need with a classical library
of course it doesn't do exactly the same
thing but it does the same thing for
most intents and purposes it's full
features is as free selectors that are
just built into any web kit can just use
this and to get like a node list out of
the call Nautilus is a JavaScript array
like structure you can convert it to an
actual array if you call a rated slice
that apply or array dot prototype dot
slice that apply or just you create an
empty array say taught slice and it's
it's more or less doing the same thing
that like sizzled us right and there's
other JavaScript pastes CSS selector
engines actually so clear select all
full features CSS selectors most
importantly it's not that it's full
feature CSS selectors it's really
important that you complete any
javascript libraries to use that it's
just there it's also important that it's
faster then any javascript libraries can
ever be because it's just c code it's
pretty optimized because it basically
really uses the same coated WebKit users
to style the page and to parse the CSS
and stuff so it's just there sits there
it's just an Dom API interface to that
engines is a select engine that's
already infected anyway next feature
Jason native chase on support also if if
you have to support like older browsers
on desktop the thing is you have to have
some external library that provides this
functionality that's the chasing stuff
from Douglas Crockford you can use it
but however on WebKit
only mobile devices is just there so
just use it json.parse same thing it
actually has a lot of advantages to use
this native stuff because first of all
like all the security problems that you
would have life like eval like taking
care of and if you use like normal
JavaScript code to pass json you have to
run it for like a series of regular
expressions which is let's say not the
fastest way to deal with that so if you
just use the native implementation it's
faster shorter less code don't have to
download anything so it's you just been
by using this and this stuff is it's not
only about Dom API sand and palm
proprietary features it's also about
JavaScript features of course and WebKit
supports a lot of the newer JavaScript
features like the for each iteration of
an array if you haven't done that array
be free numbers for each is a native
function on the race it's taking a
function argument and so if I feed it
alert it will just call window dot alert
which will do this it's it's very easy
to understand the innumerable AP is have
a lot of advantages there's not only for
each there's also filter MapReduce other
AP is that you can use which would
normally in a browser require an
external library like prototype chase
for example supplies a lot of these
innumerable functions or can use
underscore which is basically an
extraction of the prototype chase
goodness to be used with any javascript
library or with no javascript library at
all if you want it so if i combine this
stuff so I take the results from the
document of query selector alcohol and
like stuff it into the for each loop you
can say that I you can see that I
combine can combine the Dom API in a
improvements instead
language improvements of course so a
reiteration array iteration has a lot of
advantages as I said among them are you
no longer need any for loops I really
don't like four loops and the other
advantages are as you can see really it
makes it so much easier to read the code
write the code it's just a good thing so
from mobile JavaScript framework as I
explained there's a lot of stuff that's
in WebKit already but there's some other
reasons I think that's not say that you
should probably not use prototype jquery
or dojo or whatever like to speak
frameworks that are around and some
quite interesting reasons like one
reason is that not all of the
functionality in this libraries is a
meaningful on a mobile device for
example a mobile device it does not
resize its windows because it's always
full screen however it does something
else it has an orientation change event
so you can see the even photo like base
libraries like jQuery or prototype I'm
not really like completely designed with
with like a desktop browser in mind they
do have some assumptions in place that
are just not valid on a mobile device
there's some other things like for
example on iOS in the iOS browser if you
focus a form element the keyboard will
automatically like flip up on the screen
at all times and that's one thing that
this is just there which is a surprising
side effect of using a mobile device
like you focus on element but at the
same time focusing in an element means
that half of your screen is gone
suddenly so and that maybe the browser
eating like scrolls around your page so
that you don't have that on a desktop
computer of course more code causes
longer download and initialization
the download times especially our
problem if you have like a slow edge
connection maybe somewhere if you
download check very a prototype both
levers are pretty much the same in size
like about 30 kilobytes gzipped and
magnified that can take like 10 seconds
on a slower connection that's 10 seconds
the user stands there like in the rain
waiting for the cap like getting pissed
off about your website try to
accommodate the user and try to make
your site as load as fast as possible
the thing is that most of the download
code isn't even used on the mobile
device like lucky lucky us there is no I
a six on mobile phones the hope there
are no plans for that from anyone that
will kill them personally it yeah you
laugh but there's actually this company
who makes like a plug-in for how's this
going it's a plug-in for newer IES to
run the IE six engine to support like
legacy applications it's just horrible I
mean it's like it's really really weird
anyway a lot of the code is also
duplicate in features that are actually
directly available as a native
implementations like the CSS selector
engine like maybe like array in our
mobile functions any like polyfills you
have actually maybe not necessary
because all that kids on the mobile
devices support a certain set of lichen
amables function javascript stuff and
Dom API enhancements so just don't roll
it out to your mobile clients so what
would be the goals for a mobile
JavaScript framework the first goal is
that it's optimized for short code size
because the most important factor in
this is that it's loads as fast as
possible the initialization times are
also interesting the less code your hair
the less code has to be evaluated when
it's actually finally made it through
the buyer to the mobile browser the more
positive valence cold initializes
everything maybe applies polyfills for
example there's something like
differences between iOS free and iOS
four you need to fetch some stuff up
there but if you keep the short you page
the load faster the the JavaScript
engines on mobile devices are not yet as
fast as JavaScript engines on a test of
computer it's quite optimized already
Apple was was just releasing with 4.3
with like a lot of optimizations for the
JavaScript engine in Safari like it runs
twice as fast or something but still
it's it's a long way to go so the
shorter the codes debater and finally
another goal would be that you have an
easy-to-use API in your mobile framework
for example by emulating jQuery because
developers already know it and like it
it's a good API photomanipulation so why
not use that as there's no reason to
reinvent the wheel for this the mobile
device is still HTML and Tom notes and
CSS stuff do you'll need to
approximately the same stuff and you
want it to be easy to extend customers
able again jquery has very easy to use
concept for plugins it's often abused
but often it's it's really useful and we
want to support it too and finally you
want a fallback mechanism basically if
you run your mobile web browser a mobile
website or app on a mobile browser
that's not WebKit you can should just be
able to include like jquery proper
because it provides the same api and it
will make sure it runs there however
their users will have to download much
more code so it's really not
important what's there but what's not
there in the cold so meet septal if you
haven't used it before some kids up
github.com / metro bae / acepto i met
Robbie and get up for historical reasons
it's weird so it has a target size of 5k
it's minified and cheesy but I think 5k
is a good size you can still transfer
fast even with a slow connection it's
very catchable there's no problems if
any like caching limits like all the iOS
versions at least if like really weird
caching limitations it has a check very
compatible API it doesn't mean that it
covers all of jQuery but it covers a lot
of jQuery it uses mobile that kit
features whenever it's possible it that
part is important that that means that
it for example doesn't really work on
firefox ain't it's easily replaceable
with jquery proper if you need to do
that to give you an idea of the size
difference this is jQuery 16 it says 31
point 33 k gzip them minified i did this
just yesterday with a graph ijs and the
command line gzip compression tool on
the highest setting so it's a fair
comparison I think of course mind that
septo does not cover all the features
that jquery has it covers a lot of
features but you can see that that it's
a lot less to transfer to click to the
client that's the whole goal of the
deceptive framework to show some code to
this is the main like dollar selector
function in sep so just ignore all the
stuff that's up there it's lots of
special cases because check the check
your api defines a lot of special cases
depending on like what thing you stick
into the dollar function if it's like a
string it has to check on certain things
and do certain stuff if it's a sceptre
object itself it just behave differently
if it's a selector string it will
eventually call the selector engine down
here so there's a total internal
function in scepter that's the document
selector signature so in intense talk
you mentioned it in there Jas has this
feature where you can just swap out a
selector engine it has the same call
signature so even if you you say I want
to use scepter but I need a pedestal
extra engine because I want to use this
advanced features that i do in jquery
whatever you could just stick in cislo
and connected to this function and
you're good again it's really pretty
simple the query selector alcohol with
the selector and it's converted to an
array and this saves about 6k of
selector engine code depending on what
selector engine you use there's several
selector engines actually in JavaScript
with various feature sets there's one
engine that's about 1k in size but it
only supports this s 1 and 2 and most of
the Ancients that support css3 are like
4 to 6 k 4 28 k in size minified and
cheese it so here's an instance where
scepter uses something that's kind of
that kid specifically at least
non-standard I mean this would also work
in firefox this thing so what it does
here it's it's setting the proto the
underscore underscore provo underscore
underscore property of the object so
this is done so the query selector
alcohol returns a node list and we
converted into an array with the array
dot slice call and however we do want an
array-like object but we want it to have
all the stuff that's in polar FN so what
we do it I just swap out the prototype
of the array like under its s basically
and
end up with an a with an object it looks
like an array there's a length property
and it has all the other elements that
we found earlier so it has a 0 1 2 3
property etc but it gets all the
prototype the stuff from the set dot
prototype thing which is identical to
dollar taught function so without
copying anything around it's just
switching this out and this is pretty
efficient yeah the setup program is just
pointing to dollar the live in são
Paulo the Levin if you use jQuery you
know you can just sick stuff in there it
will appear on all your results this
works fine with septa to a side effect
of this is that you can reuse array
methods because it looks like an array
so yeah basically get all these methods
for free on any sceptre object it's
still a sceptre object but they kind of
abuse these array provided functions
works fine with the scepter object to
that this inside of the scepter object
in inside a function call this is the
implementation of the is API call that
you might know from from jQuery that
this inside the function corresponds to
the current sceptre object and you can
index the results they're like 0 1 2 3
etc or distal length returns the number
of nodes found in the scepter object but
you can also directly call these
functions on stuff to one instance
that's interesting is the implementation
of before and after begin before sorry
pains prepend before and after because
this uses something that's actually
proprietary to Internet Explorer and
Firefox does not support this but it
also works on WebKit so epic it for some
reason at some point they decided to
implement this IE only api and it
it works fine it works really great it's
a in the end it's it's it's less code
then I would have used if I implemented
that with like the document fragments
API stuff so it's one point where I II
actually provide some cool value to
mobile stuff so scepter again since I
select the store manipulation it has
full HX support including cross-domain
JSONP just events including some touch
event support and guesstures it has some
polyfills Pali Hills are awesome for all
the bad kids that don't support certain
JavaScript API functions it's very
modular so you can just include the core
of scepter and which is about half of
this 5k target if you just want it on
manipulation if you don't need events
for example or if you don't need to HX
you can just leave that out etc etc it's
a WebKit only it s rested because I
constantly get emails when bills after
work on ie so answer to that is it it's
never or when ie uses webkit as it's
rendering engine so never but I mean the
question makes sense but it's it's
really restricted to that and that's why
it's so small if you want to support
other browsers just use jQuery that easy
so some examples of people that use
scepter right now the most prominent
example probably is Space Camp mobile
they use a an actually really
interesting combination of they took tip
first of all the used CoffeeScript to
develop everything but they use some
external libraries so they use septo and
I think they use backbone and they also
use some other stuff they wrote
themselves which is not open sourced yet
but I think they they will open source
it so that's pretty cool and you can see
it works across all of these devices
have web kit browsers another example
that we saw earlier today is then
you mobile website from suppose also
pretty cool i hear that ebay and cheese
I Commerce will base their mobile
versions on septa cheese I commerce is a
pretty big provider of e-commerce
software for example they do that toys r
us stuff the mobile checkers website use
a scepter right now really wants me to
eat a burger right now burger please and
of course your project could your septum
this is a project from a Swedish
bird-watching occasion thing like I
think it's a social network for
birdwatchers for mobile devices so you
can say I saw this bird here and here
it's kind of cool it's like I mean it's
not my thing that I don't like to sit in
the bush for five hours to but it's
awesome and that said it brings me to my
maybe the main point in my talk actually
so step two is cool but scepters really
only a subset of jQuery with some less
code that's it it's really that simple
and I couldn't help it so I think we saw
a lot of the time so and now it's it's a
little bit of time to nerd out so we
have all these amazing frameworks right
like script calculus the prototype Jess
right jquery maybe mootools right so and
I I really think it's it's time to give
like the micro frameworks a little bit
of room in everyone's like toolkit and
micro frameworks are awesome so the
micro frameworks basically like ebooks
a kind of thumb but useful like they
can't kill stormtroopers pretty
efficiently so you're the rebels right
and you have your ebooks I mean micro
frameworks to slay the evil empire which
are the users no just joking and about
Star Wars make this slide it has nothing
to do with my talk of course it's kind
of true so classic frameworks try to do
all things and do it kind of okayish
they have drawbacks like for example
performance sighs and stuff classic
frameworks also force you into an API if
you use jQuery a prototype the force you
basically force you to use the API
everywhere right it might not be modular
not material but why does it say not
modular not model I enough I've no idea
like prototype for example is completely
not mother jquery this is not model our
mootools is for example so some
classical frameworks are modular they
have in common that they have like 25 k
or even much more minified in gzip
that's the size of those libraries if
you use jquery or prototype or mootools
i don't know about mootools actually a
lot of these classical libraries are
much larger than this of course and the
problem is as we have seen a lot of the
stuff that they implement I actually
know is actually not part of the Domo
JavaScript or the WebKit browsers or
Firefox or whatever because the
browser's adopted the features from
those libraries so it doesn't make sense
for the libraries to push it out to
clients anymore we can remove this stuff
from the libraries and this is where the
micro frameworks come into play they are
awesome so micro frameworks in my
definition is they do one thing and to
do it really well it should be smaller
than 5k that's like a completely made up
number so if you Mike refer
umber k7k don't shoot yourself please
some people would say micro frameworks
cannot be larger than 2k you're on the
extreme like extremist side somehow you
can use them directly or loosely coupled
the micro frameworks a micro framework
should not have dependencies on anything
of course that can be micro frameworks
that are written specifically for some
other framework it's like in that kind
of sense like many jQuery plugins could
be considered a micro framework I don't
consider them that I consider them
plugins because they are it's a lot dif
differentiation to make small is
beautiful right easy easier to
understand code and to forge the code
the few lines of code you have in your
micro framework it's like every line of
code that you save makes it easier for
other people to understand your code
most of the time I mean you can also
like submit your entries to chase 1k no
one will ever understand your code but
that's like an extreme example every
line you save in your code will probably
make your code download and run faster
every line of code you save leads to
fewer bugs because few less code is
equals fewer bugs because they just
cannot not as much things can go wrong
if your code if you have fewer lines of
code and plus you will understand how
JavaScript really works because if you
write a framework with no help from
other frameworks you will be forced to
understand JavaScript which i think is a
good thing because we all should
understand JavaScript really well I mean
they are chase cone so here's some
examples masters with 1.5 k in size it's
awesome lawn chair stuke a lawn chair is
pretty awesome actually you should check
it out backbone it's about 3.9 k there's
also several other implementations of
similar MVC client-side frameworks
personally I am really not a big fan of
NBC client-side stuff but I think it's
in a lot of cases it's it's not the
right choice to use but there are cases
where you need it and there's several
options so the problem is how do you
know what is out there how do you
discover what micro frameworks are
available like you cannot like check
through every github account right and
that's why I'm announcing today I'm
launching a website called micro chase
so you can go there right now micro
chase com it's a really dumb list of
awesome amazing micro frameworks which
has sable you want up there and then it
will show you micro frameworks that
might fit your needs and you can fork
the project at github com met Robbie
micro chase.com that your L vehicle life
after my talk and you can test like a
data file it's really simple it's two
files index dot HTML there are no images
or anything so CSS free goodness ain't
as a theta to chase file where you can
just add your library if you want to use
it that's it any questions so the
question is I extend my object with
array functions the reasons the reason
why i don't use like a check if it's
already existing right that's the
question no
if the property would be inherited from
the array project so the thing is that
because I swap out the prototype like
the array stuff is gone so only the
properties of the object is still there
but none of the properties from the
prototype it had earlier so all the
array stuff is gone so I just need to
add it back in okay so you're asking why
I don't just add all of the arraignment
right the reason why is because some of
the jQuery API names are clashing with
the API functions for example filter so
I need to manually select what I copy
over so Brandon's question is why the
hell am I using underscore underscore
proto underscore and let's go so it yes
it helps in code size I think it helps
in speed because it will not have to
manually copy copy like stuff around so
just because they already have an array
and I want an array-like a structure
later so I just swap out the prototype
it works fine works really really
efficient also the okay Brian also says
the insert a Jason element is coming in
Firefox so soon it will be firefox
mobile compatible I hope so so i think
yes i would take patches to make it work
in firefox however i will problem it
would be good to provide it like as an
add-on so in case you don't need to
support like firefox mobile or whatever
you can just use the basically i think
there's already a pitch in there
somewhere it's it's a it's like a
polyfill for firefox to support the
proprietary feature from IE the insert
adjacent HTML or element function so
that would be a good like add-on for it
but i don't think most people that use
it actually need to do that you know
what i mean it's it's really the lights
are extremely bright if you stand up
here it's kind of crazy any more
questions
nope that's it thank you happy trails to
you until we meet again</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>