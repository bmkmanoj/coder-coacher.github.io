<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mauricio Palma: CSS Variables A New Hope | CSSConf Budapest 2017 | Coder Coacher - Coaching Coders</title><meta content="Mauricio Palma: CSS Variables A New Hope | CSSConf Budapest 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mauricio Palma: CSS Variables A New Hope | CSSConf Budapest 2017</b></h2><h5 class="post__date">2018-03-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kSpIK6nx-XA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well I hope you enjoyed lunch you're
probably tired by now but I would
appreciate if you stay with me now and
give me your attention I appreciate that
very much I think first of all I would
like to thank this users comes Budapest
team for making this amazing event
I think they deserved if you give it up
for them one time they feel great so my
deepest thanks to them for having me and
thanks to you too my name is Mauricio
Palma and I was born and raised in Costa
Rica and living in the beautiful city of
Hamburg for the past 11 years
I'm also UI developer a syn Estrada
working with a colorful range of clients
mostly the big brands out there and I
must admit we're doing a lot of exciting
projects nowadays I'm also co-founder of
would like ocean that would like ocean
with craft swimmer out of ocean
recovered fishing nets and together with
several organizations and divers were
collecting ghost fishing nets to use
them in our products so to be quite
honest with you I think I'm one of those
polo kids of the web even though I'm 36
years old and what I mean with that is I
start developing sides I started for six
years
my first sites and apps for the web so I
was not around in 1991 when Tim
berners-lee announced HTML at the time
there was no method for styling web
pages neither was I around in 1996 when
Haakon V Lee first introduced the first
official specification of CSS level 1
which is the same year in which
Macromedia introduced flash
so it was pretty much at the same time
when Brendan eyes developed JavaScript
in just 10 days going through a lot of
corporate and marketing reinventions
like mocha and life spray so not I was
not around during this exciting and
turbulent times of the wild wild web I
could enjoy working with html5 css3 es5
harmony and all the amazing api's that
the browser provide for us today so life
has been good to me at least I thought
so when I started out and as a journal
after gathering some years of experience
I realized I was not quite right I spent
countless hours trying to find
performing techniques to manipulate the
quickness of the Dom researching all
kind of techniques to generate smooth
animations trying desperately to get CSS
to work smoothly with JavaScript
second
so time goes by and you gather some
experience within your possibilities and
try to work yourself around all these
things and don't get me wrong I love
doing what I do and it's the same laughs
I have since day one and just like you
just heard speaking is something
relatively new to me and as you probably
noticed my first stalk ever I think I
have three stalks in my life and this is
a real special one it is my first one
and it all started with my friend Gregor
Adams also known with the handle picks
alas who actually invited me to co-host
a CSS variables talk at an internal
singer strata technical off-site and
this is how I started experimenting
playing around and actually using CSS
variables and I must say it changed the
way I write my CSS today so it's been a
busy exciting journey and I would like
in a very humble way to inspire you from
what I have learned in this journey
hopefully at the end of this talk you
will take back one or two techniques
that you could use at your own work that
would be the best so it is we should be
looking some little stars in the
background but anyways we're getting
into that it is this desire to find
hidden information that will allow us to
change the way we work today the way we
write our CSS today to be always hungry
for more information so in the screen
there is a hidden message oh and let's
find out what it is
so we're using the spotlight
a new hope and that's the name of this
talk that I prepared for you and
hopefully I can demonstrate how elegant
and powerful CSS variables can be
so I'm using SVG's for this example so
let's go through the example see how we
made that and decided to create the
animation like I said with an SVG and
CSS variables the new hope' headline is
an SVG path and to achieve this
spotlight effect I'm using four
different SVG circles using custom
properties to define their positioning
within the SVG view box as you can see
property names are prefixed with a - -
annotation and it contains a value that
can be reused these are the custom
properties if we take a look at the
values we see we have the radius pretty
much the size of the circle we have a CX
custom property which is the positioning
in the x-axis and the same goes for C Y
by using the VAR function we can access
the values we previously assign at root
level this would be the positioning of
all circles using the conceal spot class
and all of them are currently positioned
in the middle so we can only see one
circle so we're selling all four circles
they're stacked behind each other but if
we reflect for a moment and think about
the custom property spec you'll find
something like custom properties are
ordinary CSS properties and what that
means is that they are resolved with the
same inheritance and cascade rules so if
we take this information toward oh one
second
okay by using this information to our
advantage
we can make all circles visible given
them a new position and but instead of
overriding the rule declaration we can
reassign the custom property with a new
value in an element with the higher
specificity that's a hard work but it
kind of work out right now so in that
case yep in this case we can use the
none type pseudo class element to
recursively reassign the new value
leading us into this result so there is
one last thing we knew in our CSS to
achieve the spotlight effect so we will
be using the clip path property
referring to the for SVG click path
elements what these four elements
contain are the extractives
letter sections of the new hope headline
this will be the clip regions of each
circle leading us to this effect and now
it's time for magic but not the kind of
magic when you know why code is behaving
in a certain way not that so in my
opinion this is one of the most powerful
features of CSS variables custom
properties are available at runtime
making them accessible at all times in
JavaScript to JavaScript and every time
I say that I get so excited think about
it for a minute
did you reflect that on that I hope so
it is very important in order to
simplify the explanation of what is
going on in JavaScript I will focus only
in the custom properties if you want to
take a look at what different techniques
I'm using in JavaScript you can take a
look at the code things that there will
be available and I also prepared a
little a code pen collection for this
conference and you can see what's going
on under the hood so for now we'll be
listening to the mousemove event read
and calculate values in relation to the
SVG view box and the real fun is
happening on that update function by
just using the set property method we're
able to write and update the custom
property values at the root of the
document so we can take a look at the
effect one more time
and this is how we achieve that effect
thanks to custom properties we can do
that
yes so I close my eyes to all ends and
open my heart to new beginnings
oops
Oh No
so I don't think I get tired of
repeating these but custom properties
being available at run time opened a
whole new world of possibilities and in
my pursuit to illustrate this for you I
prepared this galaxy animation using
HTML CSS in just a bit of JavaScript for
no it's not after a while you cannot
hear the sound it gets really annoying
so what I want to do is create an
animation for every single star
something like a circular sensation from
the X and C axis so if we take a look at
that this is what we want to do with
this single star and for this I'm
actually running a timeline from 0 to 1
and this is my actual counter and if you
can look at the button by including this
in mine sine and cosine custom
properties I can achieve this wished
circular transition and it's a little
bit Yankee and I've been having problems
with my speaker notes at slides if
somebody knows the reason of it can tell
me about later it's been a pain so you
have to trust me it's actually more
smooth but anyways I emphasize in the
word transition because such animations
we want to focus on hitting the 60
frames per second mark and we don't want
to retrieve a repaint at first of all
the reason for this is that today's
devices refresh their screens 60 times
per second that means that if there's a
transition running the browser needs to
match the device refresh rate refresh
rate and that's what you should always
achieve to
but hearing 60 frames-per-second marked
with one element it is not that hard now
in order to dip it to demonstrate the
differences I did two examples and the
first one would be without CSS variables
I think the way you should you would
normally do it and it looks like
something like this we spread the stars
are the elements across the x axis and
the z axis with sorry the x axis and the
y axis with position:absolute we're
achieving depth by using the translate C
and because we want to animate the Stars
using transform I have to iterate over
250 elements retrieve their CSS
translate Z value and save it in an
array that is reference with the name
z-axis list so I have to iterate one
more time map the values of the
translate C or our array and write the
new translation all of it in the endless
60 times requestanimationframe loop and
it already sounds so expensive so if we
take a look
and
we check out the frames per second
can you see it no so I will have to read
it for you I cannot even see it myself
but something 24:22 and you see it is
Genki so it's a lot of operations for
the browser to do so let's close this
and continue
now I want to create the same animation
using CSS variables and with CSS
variables it is much more elegant and
intuitive I don't have to iterate over
the Dom I don't have to retrieve any
values from the Dom at the end I just
need to update and write the values from
my sine and cosine variables that's it
it's pretty pretty simple our CSS
remains in our CSS and not as inline
Styles inline Styles in our Dom and this
is one of the reasons I love custom
properties or CSS variables so much but
like in any journey I encounter some
difficulties and I will not lie to you
it was not all sunshine and rainbows
with the CSS variables inclement ation
at first I was not hitting the 60 frames
per second mark and I started freaking
out like I'm here talking to you about
fuses variables and performance and Adam
even achieving or reaching my own
expectations
so as it turns out pseudo elements with
filter C use this filter like blur and
brightness are super expensive to
animate so I had to change my styling
strategy now the stars are not looking
so good as originally but like in life
you have to make sometimes compromises
so let's take a look at the example
since a little jacket I will close my
speaker notes because I want you to
experience to be of animation so give me
one second I don't know if it's going to
be good in you
and it's not bad
we'll check the frames per second
and we are 758 almost there you should
always try to keep the 60
frames-per-second heart now we will
close this
and we continue
so I started wondering what if we try
the new stars tragedy with the first
demo without ceases variables and not so
surprisingly I was able to actually hit
the 60 frames per second mark
so I actually realized the browser is
actually so powerful that you can
animate all these divs all these
elements in the DOM and still can reach
a 60 frames per second animation so
let's take a look at that
and we are 58 59
almost at 58 almost there but always
looking for 60 very important now this
is what I love the most about CSS
variables beyond anything else that's
what I think is the most powerful
feature and is their ability and
elegance to interact with web devices
api's in a declarative manner UI
development is changing and develop it's
changing at a rapid pace so when we
speak about responsive we're speaking
more about an interface interacting to
the user user context more than just the
layout composition adapting to a
viewport width that's what actually
responsive should be meaning today so if
we take this animated galaxy interface
how could we contextualize our current
showcase and maybe we could move the
perspective of the galaxy according to
our device orientation and then give us
this look that we're on a spaceship it
sounded like a good example for me so
let's give it a try so with the
assistance of a little WebSocket server
and client I will be able to give you
the same mobile experience on the screen
and maybe with a little bit of latency
we will have to see so for now we will
listen to the device orientation event
for us there are only two values that
are relevant at the moment and device
orientation actually returns four
different values but we will focus on
two for now the alpha alpha is pretty
much the movement of the device in the C
axis it is tempered the perpendicular to
the ground and you can imagine it like
line that goes to the middle of the
earth it returns the value around 300
around zero and 360 degrees beta on the
other way returns to degree value from
minus 180 to 180 degrees and for our CSS
this is all what we will need for it to
work so let's give it a try need a
second to actually start my server
this is not for real I just
when a second I hope I can show you this
not this would be really sad one second
please
so one second if it doesn't work we just
leave it for now I'll try it one more
time
okay that's great so we're ready to go
so we have the server running now we'll
connect to the server with my own mobile
device
unfortunately you cannot see it really
good but like I said all the examples
are important and so if you want to take
a look at it now I'm moving my device
and it's having happen
so now I'm actually moving the device
little Latin see but as you can see one
can use in the declarant declarative
manner use our CSS to actually interact
with it
I closed that before we all go crazy
with the music and let's continue so
this this stop is reaching to an end but
I have one last showcase I hope it works
because we did like in the last minute
for you or maybe for me so I'm not sure
about it so I think lightly with
contextualizing interfaces and I thought
what if we contextualize the result of
this presentation so I prepared an emoji
happy meter and it's using the Audio API
I'm using CSS variables and SVG's and
this is how it works so the result
completely depends on you so if you like
let's take a look if you like what you
just heard you have to give it up and
you have to give it up real loud so come
let's try it
okay I'll make this smile that's right
again one more time
so thanks thank you very much I would
say that went really well for your first
off congratulations</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>