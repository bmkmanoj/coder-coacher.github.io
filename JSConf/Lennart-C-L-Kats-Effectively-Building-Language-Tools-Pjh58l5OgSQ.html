<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lennart C. L. Kats: Effectively Building Language Tools | Coder Coacher - Coaching Coders</title><meta content="Lennart C. L. Kats: Effectively Building Language Tools - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lennart C. L. Kats: Effectively Building Language Tools</b></h2><h5 class="post__date">2012-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Pjh58l5OgSQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so today I'll be talking about
effectively building language tooling or
alternatively how come you remix our
language tooling so the company I work
for is cloud nine ID so we built tooling
we built IDEs on the web in the clouds
so we're a company based on startup
capital let me start this very company
based on venture capital we're a
start-up we have about 30 employees now
we're quickly growing we have two
offices one MCM one in San Francisco and
well the main language we focus on with
our tooling is JavaScript and I mean
JavaScript as a language has a long
history I mean back when I first used it
was in a do cities era I used to make
some pop-ups and I think many of you did
that and it was a while before I look
back but I mean things have changed I
mean no longer do we have these under
construction signs of our page
javascript has changed the weapons
changed I mean javascript is big now I
mean it's the very front end of the
browser war or JavaScript the reins
javascript is in databases it's on
servers I mean javascript is everywhere
I mean javascript is a big language and
that cloud nine we used in a big way
mean for our products EF about three
hundred thousand lines of JavaScript
codes I mean three hundred thousand
lines of JavaScript so I mean the last
audience I showed this figure to date
they were shocks they were a pulse they
were also not JavaScript programmers I
mean you can use javascript in a big way
you can make it to do you can use it to
make application skill JavaScript's but
to do that I think tooling really
matters tooling can do so much for
language like Java scripts I mean it's
not the easiest language that's out
there I mean sure it's easy to learn
it's actually master
it's to know all the little pitfalls to
know what not to do thanks for practice
and to do that in a team setting in a
big application is even harder so
tooling really matters especially for
language like Java Script and I think
when many people think of tooling they
think of these ites deaths are used in a
c-sharp and c++ and java community I
mean the FT's very luxury extensive two
suites that does all these things and
sometimes they do more than we want them
to do I mean what we really want is a
nice editor and getting some feedback on
our code so i mean that's our focus
really aiming putting out a great editor
and giving you direct feedback on your
coat so let's look at some Java scripts
I mean this is a function process I
don't know who wrote this but there's
there are some mistakes in this so are
there any JavaScript airs in the
audience that can point out so I sure
have to be fine p indeed anything else
length yeah length is misspelled all
right i mean if you look at an example
like this i mean there are so many
things that you can do wrong i mean at
first sight it looks okay and I mean
sure you can say these are beginner
mistakes but every one of us has made
these mistakes and every now and then
they pop up again or you find them in
codes written by your team and having
good tooling to point out those mistakes
can really help so yeah I mean good
tooling use it for JavaScript so if you
look at an example program again and
then put it into an ID that that's worth
its salt it will tell you about these
mistakes it will put little markers on
every of these errors if we actually
tell you that you're iterating they're
using and in declaring I mean
if you do it like this it's a global and
that's really likely not like he wanted
to do it will also tell you that there's
this and there I mean it's a call back
you're using a dish this is a very very
well known javascript problem and I mean
it gets me every time I move around some
code and certainly it's in a different
context and I have to replace all the
dishes by something else so if you have
a tool that can just mark these things
as an error that this can be really
helpful so Andy test pointed out that
the last mistake here was length Smith
felt so other things that tooling can do
for you is called completion it can help
you write your code so if you write
something with no Jas again a good idea
will tell you that hey there's a request
parameter and a result program internet
to go back you're making I know the
types of these things I know that result
has these methods i can give you the no
GS documentation and I mean that can be
really helpful I mean you don't have to
keep all that in your head you don't
have to look at the no GS documentation
website it's just right there and ID so
tooling can really help write JavaScript
code so another area where tooling can
help is complex refactorings I mean if
you have big JavaScript and you want to
make big changes your stoolie so at
cloud nine you do these things in the
clouds we built IDs in the cloud and
there's really two reasons for doing
that I mean the first reason is I mean
why would anyone do anything in the
clouds I mean your job scriptures we
built applications online so anyone can
access them anywhere anytime so the
other reason I mean it's a great
metaphor immediate makes for nice
pictures so i mean its cloud 9 wherein
is nice place of fluffy clouds and
everything but javascript is a very
vivid environment in things keep
changing all the time i mean new
libraries are introduced new ways of
using the language
and new platforms ranging from databases
to mobile phones to whatever new they
think of and so that the very latest
thing that happened in the JavaScript
ropes is typescript so I think many of
you have heard of to dive trips if not
the main there's talk on this tomorrow
go see it and so typescript is like
JavaScript it's the JavaScript language
with some additions so that the basic
three editions they provide or type
annotations modules and classes and we
type annotations that's really the main
feature there you can actually declare
in your code hey this is a string and an
end as a Dueling guy i like that i mean
i can improve my tooling with that
knowledge so let me see show you how
that works so this is a type skate
program it adds two numbers and returns
the result it's also a JavaScript
program the main timescape is a superset
of javascript so what you can do in
typescript is you can annotate these
number parameters with the types you can
say that they actually intended them to
be numbers so if you're going to pass me
something else that will be wrong so if
someone calls your ads function with a
number one and a boolean and if you look
at those types that's wrong so you're
tooling can actually tell you that
that's wrong you cannot do that so again
I mean as a tooling guy I like this I
mean I can improve my tooling even
beyond the point did that we have now
but of course it been there's been a lot
of controversy about this language I
mean it's yet another compile to
JavaScript language it will make
debugging harder yada yada so I mean
there are these issues but I mean if you
want to use typescript if you if it
makes you more productive I mean we want
to make we want to support that so by
the immortal words of my colleague Garon
our motto is make out not war I mean
we're going to support I've tapes and we
are supporting type scripts so I mean
how long do you think it took us to
support dive trips I mean touch kid was
announced this week and it took us one
day to support it I mean one day after
the Microsoft announcements we made an
announcement a we support etiquette now
in cloud nine so like you let me show
you what you can do with it and I can
show you part in the ID and part of line
since i haven't actually registered to
the internet here yet all right so this
is local copy of cloud nine not quite in
the cloud it's my own private little
logo cloud and there's type grips and I
mean type trip is very much like
JavaScript so the main trick in getting
type scripting cloud nine is realizing
that and extending the syntax
highlighter for typescript fit for
javascript without great support I mean
there's only these very little things
that are added and once you do that you
have def get support I mean it's a start
but beyond that you want to actually be
able to run type script to compile type
to use typescript in cloud nine so it
turns out we already provide facilities
for that I mean you can actually as a
user install NPM packages you can
install typescript on your own personal
terminal for cloud nine so you do NPM
install minor C type scripts it installs
type script on your def instance from
that point you can call tsc to compile
your template file you get either some
errors or a javascript file and then you
can run it so I mean looking at that I
mean we did two things I mean used ace
which is a highly extensible coding
editor you can just use in
returns to extend the JavaScript syntax
the other thing is to use 10pm I mean by
providing mpm access to our users they
are empowered to install these kinds of
packages themselves and I mean this is
principal empowering users to do things
that's what we will be extending now so
I mean cloud nine has been around for a
while and I think now we're at the point
where the community can start making
awesome tools so as of today we're
opening up cloud nine and making it
possible for third parties to extend it
with drone plugins so the online cloud
hosted cloud nine you can extend it with
your own plugins and i'll show you how
to do that so what we want to do is
really make this this fill our situation
for any language and and it would be
great to do that from a perspective of
these compilers to actually build these
compilers like taxi compiler with the
idea in mind of using it in an ID so I
mean there's a lot of these compilers
around already I mean there's types get
on fire there's a coxcomb compiler and
if you can reuse them in our 80's in
some way to extend our ID that would be
really nice so I mean what we would
really like to do is remix our language
tooling I mean we provides a cloud-based
platform we have a nice editor timescape
guys have a nice compiler that can give
you semantic errors can we just remix
those things it may invite what we have
to re-implement that kind of complicated
stuff in our IDE so we'd like to take
these compilers apart and use them in
our tooling and to improve our tooling
to prove improve any kind of tooling and
I mean looking back at the terminal I
mean in the terminal situation things
are simple I mean with one simple
commands you can install type scripts on
a machine just MPM install minor detail
script and you have typed it and again
with one simple command you
can actually run typescript compiler and
get error messages so that gives you
useful information so I mean this
interface is mean drop that simple I
mean if we could use that kind of
interface to extend our ID that would be
great and I'll show you how you can do
something like that so as an example i
made a new typescript plugin for cloud
nine it hosted on github and i'll show
you what it looks like so again this is
a local copy but I mean use my github
page here's cloud nine hosting this
plug-in and so this plug-in has one main
file it declares itself says hey I am
the cloud nine daisuke plugin I'm
written by a Jackson org and I mean the
main thing it does it registers a new
language handler so treasure search
something that handles the tablet
language and this is a worker I mean
these kind of things were working web
workers so if you look at the extra
limitation of the worker it's actually
quite simple I mean I use the typescript
compiler that runs on server so as a
first step to using that compiler that
runs on the server I do npm install
minus d tufflips i mean i do this in
this plugin then as a next step actually
analyze a source code file and get
errors that are inert source code file i
can run type caps tsc run some fancy
regular expressions after that i get
error messages reported in my editor so
there's a tricky bit here are really in
the
that will end all the client-server
communication everything but I mean the
main point is that with just three
things I mean installation bringing the
compiler and regular expressions I have
an interface over this type get compiler
so I mean let me show you how you can
use it so like I said I have this on
github so i mean if i had internet
connection I could like copy paste this
URL instead of copy paste a local URL go
to cloud nine I say tools extension
manager paste this link I'm adding it
and now I have all of a sudden and
editor that actually marks errors in my
type fleet code so this this example
type skate program that a colleague of
mine sent turns out to have all kinds of
errors I mean there's an animal class
and it has the name property I mean
animals don't have names there's a horse
here with something got a number I don't
know where that is and there's some
salmon off okay so I mean this client i
plug in it just costs the surfer runs TC
TC will get some give some errors back
and those are shown in the editor so I
mean this is a very simple principle but
it allows me to reuse an existing
compiler tool to extend my own tooling
so I have a client-side plugin I mean an
extension of cloud nine let's just
hosted on github and it actually does
some server side stuff and I think
that's pretty amazing I mean that's
really powerful I mean you can do about
client-side and server-side things like
that now I mean of course this is a
proof of concept I mean TRC is written
in typescript hosted on JavaScript I
could use it run that in the client in
this proof-of-concept I'm just doing it
on the server side just because it's out
drop that simple to run it from the
command line and I mean there's all
kinds of languages with linters that you
can invoke in a similar way
there's language with compilers with
that you can invoke in a similar way so
I applied the same principle of running
type script on the server to some other
languages I mean I applied it to PHP so
I ran the built in PHP linter on the
server and all of the sudden in my
editor i get errors for PSP I run
confident like this and i also do i get
new errors for coffee script so I mean
how can it be that it's so simple to
invoke a command-line tool and get
results in your editor and and F out of
certain more extensive tool supports I
mean if you if you look at it from a
distance I mean a command-line tool
there's this really three things to it I
mean first you tell it what to do you
give it some input you give it a source
text and it returns a result so I mean
what you have there really is a
functional interface I mean it's a
function that you give some input and
its resident eaters and outputs you
don't care how it does that you don't
care about all the internals how how
they implemented the type of kid
compiler so I mean functional interface
are great I mean again talk tomorrow
about functional interfaces but
functional programming and functional
interfaces allow you to think of
components as a black box you don't care
what happens inside you don't allow them
to mutate any data you just give them
some input source text and it will
return output results so we can use this
to call compilers on the server and get
some errors but we'd like to extend this
to other things so this is why we
designed a functional interface for
extensions for language components and
if you look closely at the example I
gave for of this type get broken there's
a couple of key functions to it I mean
one of the main function is the handles
language function it gets a language
name and returns a boolean so it will
tell you just this plug-in handle
this language there's other functions
like parse it will get a program text in
it returns a tree data structure there's
functions like analyze and show an
outline and complete I mean these are
all functions so I mean the key idea
here is that every surface every
component is described by a single
function and these functions and flee
interface that technology agnostic so we
don't care what you use in your black
box we don't care what kind of partner
technology use now it's actually a great
academic paper written on this topic at
oopsla a couple years ago by pop yer
Philip Charles and others like that you
should read up alone if you want to know
more about this stuff so I want to give
you a sort of overview of how you can
implement one of these functions I want
to give up go into details here but I
want to give you some pointers so I mean
the main thing you have to realize it's
compilers consists of many components
but if you want to provide re tooling
the most important components are
departure and the analyzer so what the
parser does it gets some source code
text and it returns in FX index 3 so do
turns in structured representation of
source code text what the analyzer does
it gets this f6 index 3 distribute
reputation and it gives you some kind of
feedback so this feedback can be in
terms of errors I mean there's an error
here in your program it can also be in
terms of hey your cursor is here and I
can provide you these completion
suggestions so there are analyzer
components that can do all these kinds
of edit or things and I mean if you go
about implementing something like this
my advice is really to reuse existing
tueller tooling wherever you can
bali staff so that's exactly what we did
for cloud nine to support javascript we
didn't go about write their own
JavaScript parser I mean we looked
around what people wrote to write
JavaScript and it turned out there were
already plenty of the African partners
so we did some performance benchmarks at
the time we came to okla phi j s i think
right now the most performance
JavaScript parts where is s prima but I
mean we didn't fight around parser I
mean we just use these existing
components it's open source and we
remixed it in our tooling so another
piece of advice try not to build these
things with your hands I mean there's
tooling for building these kinds of
components there are libraries for
making parsers for making analyzers use
them so the interesting thing about this
particular picture is that about right
hands that's useful so there's reusable
language tooling I mean there are
existing parts out there that you can
use their part is written in JavaScript
for many languages there are partial
generators out there there are so many
already that target JavaScript that you
can give a language description and they
will make a parser written in JavaScript
other in our analysis frameworks that
you can use I mean using these
components to build your own language
tooling can help you so much make you be
so much for more productive I mean don't
do this from scratch so one particular
component to use a cloud nine is called
treehugger GA s so treehugger Jas is a
library used to make these kinds of
analyzers I mean it gets an input AST
from any partial it doesn't really care
about the format but it will help you
write analyses on these asds so I mean
next time you write one of these
compilers you can use these kinds of
components
and make your life simpler and I think
if I look at a time scale vampire it's
really an excellent piece of engineering
work if you look at CoffeeScript I mean
there's nowadays Kickstarter projects of
someone who says now let's start off
with JavaScript and redo it with proper
compiler and sneering techniques in that
may help anyway so my message is
described each of these surfaces each of
these components in capara very single
function that will make it much easier
to implement it to integrate it into all
kinds of tooling and for tooling vendors
main support these kinds of functional
interfaces to make it easier to
integrate other components into your
tooling another part of my message I
mean we're opening a cloud nine we're
allowing you to host your plugins on
github and put them in the extension
manager next year we'll have a nice
extension store UI for that right now
we're opening it to up to developers who
want to experiment with this and I'll
build a community around this so I mean
this was remade sure language tooling
and Leonard cuts i remixed my own name
into things like github and Twitter and
the interwebs so any questions first of
all maybe its first of all round of
applause lessons
any questions yes so you told us that
your analyzer used abstract syntax tree
to give advice which you also told your
curses at this position so does it mean
that the analyzer also gets the current
context or the editor house they make
possible so the main thing we try to do
is be technology agnostic so we cannot
we do not want to know too much about
particular partially use but from an IT
perspective we do know the cursor is at
this position so we can call a function
that tells us at this position what kind
of ast node is there it will give us an
AC note which is a no prob we actually
don't know anything about that via
technology agnostic and we pass that to
the analyzer and then the analyzer can
tell us what completions are at that
node any other questions all right
thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>