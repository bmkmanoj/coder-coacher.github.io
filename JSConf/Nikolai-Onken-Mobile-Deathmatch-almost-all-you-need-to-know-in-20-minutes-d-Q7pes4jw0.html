<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Nikolai Onken: Mobile Deathmatch - (almost) all you need to know in 20 minutes | Coder Coacher - Coaching Coders</title><meta content="Nikolai Onken: Mobile Deathmatch - (almost) all you need to know in 20 minutes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Nikolai Onken: Mobile Deathmatch - (almost) all you need to know in 20 minutes</b></h2><h5 class="post__date">2013-01-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/d-Q7pes4jw0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm going to talk about three very
specific use cases or like problem areas
which are really well addressable in the
mobile space but of course also in
normal desktop browsers and everything
but first of all my name is Nicola
lankan this is my twitter handle and I
write JavaScript every day I'm from the
company's evil we beer based in Germany
I live in Amsterdam we do javascript
mobile for two years now and yeah the
mobile space is pretty pretty
interesting and there's a lot of stuff
happening so I really just can recommend
to anyone who writes JavaScript to check
out as much as possible over there I
mean just the fact that you can write
with new browsers and just the fact that
the browser lifetime is so much shorter
than we used to it's argument enough to
just say okay I'm going to check that
out so I guess the the most important
thing I think is the fact that because
we're in mobile we can actually you know
throw away all the baggage we have and
really really start thinking about new
patterns and better ways of writing
mobile apps so this is something I'm
going to look at now in these three
really specific use cases and the first
point is that i'm going to use mix-ins
i'm i'm personally coming from the dojo
background and you know we are all used
to do object-oriented inheritance and
you know fighting really nested code and
all that kind of stuff so i'm going to
show a couple of examples how you can
use mix-ins in a really really useful
way so the first problem you see a lot
of times when writing mobile apps and
apps of course in general is how do you
communicate between objects so if my
state in one object state changes how to
reflect that state in a different object
or how do I react to that state and
different JavaScript libraries provide
different ways of doing that for example
daughter allows you to do to use Total
Connect but the thing is with using
something like those who connect you
don't really understand what's happening
in the or behind the scenes and there's
happening a lot and in mobile I'm not
sure if you really want to do that so
we're going to look at how to use a
different approach on communicating
between objects this
thing which is really I guess something
everybody has to address on a daily base
is how do I reflect the state of my
object in the Dom what do I do if my
object property changes and how do I
reflect that within the Dom which is
something i think really almost browsers
should just support in some way or the
other anyways but right now you see all
kinds of libraries just working around
dead and I'm going I'm going to show one
way which might inspire you to use a
similar way to communicate between
object state or using object state and
reflecting changes of that state within
the DOM and then the last thing I'm
going to show you is how i can use Tom
events and reflect and map these two two
methods on objects so stephanie was
sitting over there I've been hacking
with 74 for a while on a really really
little library called delegate and
basically this is exactly what it's
trying to do it starting to allow you to
communicate between between different
objects and the first first thing and
the important thing is different than
you know traditional event handling as
we know it in the inner javascript
libraries we use then the implementation
is very very simple I think it's about
20 lines of code it's it's just a very
very short snippet it's almost a stupid
which you could just fight yourself and
then have a helper method which allows
you or mixing which allows you to
communicate between objects there's
definitely definitely definitely less
overhead than the overhead which you
have when you use Total Connect because
connect allows you to handle Dom events
but also allows you to connect to method
calls and in a way it's more explicit
than pops up pops up is it's very close
to this kind of concept but with pops up
you never know where your topic or your
your published topic comes from and this
also sort of includes a lot of dangers
when you use pops up because your code
can get really really undie bugaboo you
just don't know where all these topics
get fired from you can check the code at
this address github et vous delegate and
I'm going to just start showing you a
very simple example
so let's look at the source code okay so
this is the the entire source code
basically delegated to mix in so we can
mix that in into object instances and we
have two methods delegate and emit so
when I say object one delegate I pass
another object into that method call and
then I can map the functions or the
methods within the object one onto the
same named methods of the object to does
it make sense so whenever whenever I
call for instance object one show the
method object to dot show will be called
as well so let's take a look this is I
mean it's a really really simple example
so here I have a ticket ocker which
basically you see the consoler it's it's
a clock ticking and tocking it's amazing
and I can change the interval now it's
faster make it store again that's going
to take too long let's take a look at
the source
so what you see here is I've I have a
ticker constructor and most importantly
a method called tick when I call the
constructor I'm setting a default
interval of one second or thousand
milliseconds and then this line of code
here emits the ticked event it's it's a
synthetic event so after one second I'm
emitting the ticked event then here i
have the talker which is the constructor
again same it's basically the exact same
thing and whenever whenever I call talk
after the interval I'm emitting the
talked synthetic event and then I have a
tuner the tuner is basically reading the
value of the text input and now all i do
is i instantiate or I call the
constructor so I have a thicker instance
and a talker instance and then i
delegate the event of the ticker to the
talker so whenever a ticked gets called
talk of the other one gets called and
then I do the other way around whenever
talked got that called I call take on
the other one so you see I mean I'm
having a very few lines of code here the
mix in itself is as I said 20 lines of
code and I'm just doing this year I'm
mixing in the delegate into the
constructor and then I'm incensed rating
the tuner which is basically listening
to the text input whenever the text
input changes i'm setting the interval
on both instances so again i'm just
emitting events and it's a super simple
way to communicate between objects the
next next example is a little bit more
interesting it's a it's a use case we
use basically all the time and where we
kind of tend to use flash components
it's file uploading so when you upload a
large file we really like to have a
progress event so let me show you some
code here
okay i'm going to skip a couple of lines
here because the most important thing
here are the event emitters basically so
i implemented the file uploader using
dojo I oh I frame to actually upload the
file content and then I'm pulling the
server to retrieve the status of the
file upload so I know how far my file
upload gold and when went and whenever
whenever I have an update I'm going to
omit the progress event
and I'll basically what i say i know my
file uploader is emitting these certain
types of events so I'm uploaded I'm
emitting progress starred complete and
then you see the the third last line i'm
seeing uploaded a delegate and I'm
basically delegating all the events
happening in the file uploader to a
visual component so binding the state of
the visual component to the status of
the file uploader is super easy it's
just one line of code and I mean you
know it's a standard example but
basically you select the file we load
that are there we are and the upload is
complete if you would use a larger file
then we would actually see the upload
state reflect in the UI component of the
part so I have a sort of low-level file
uploader it just emits synthetic events
and whenever these events are emitted to
delegate the delegates methods will be
called and that way that way i don't use
stuff like daughter connect on a method
and have a really really lightweight
object to object communication channel
do you have a question so far you can
use it in isolation the only only reason
why I'm using daughter here is because I
want to use hitch and for each and kind
of you know keep costs browser compliant
in a way but I mean if you really think
about it for each you can use in most
browsers anyways already hitch you can
build yourself in a couple of lines so
it is completely agnostic and it's kind
of also the also a really important part
of this that you know when writing for
mobile I I mean I don't want to say you
should write everything from scratch
again but at the other at the other hand
you really have to watch out for the
libraries you use and the overhead they
bring you know with using them
right so the next thing is data by data
binding so how do i bind object state to
the dom and basically what i'm doing
here is i'm using again delegate so you
have to imagine you have some kind of
model or object and whenever a property
of that object changes I'm just emitting
the change event and therefore i can
easily bind the change event to a dom
node the other thing it's which I kind
of found interesting to think about is
the fact that it's you don't really need
to use a templating language anymore and
I think templating languages are
something really difficult a lot of
times because either the language
doesn't support enough things you need
or it just supports so much that the
overhead is just too big again and and
that you again you know deliver a lot of
code and at the same time probably a
templating language will still not
support exactly what you need so let's
take a look at some source there so what
I did here I took the jas Khan website
stored the speaker events in a JSON file
let's just take a look at the source i
think it's going to be easier so you can
find this also on github
so what a built here is basically I've
I've my lip directory where I have the
delegate jas a couple of helpers the
DOJ's which again you don't really need
only for real i only use it for stuff
like for each and mix and hitch so you
definitely can just exchange it with
another library then i have something
called the models folder which is really
a very very basic model representation
and the in part the important thing here
is it's just pseudocode really but my
model instance has a couple of methods
such a safe set up date get refresh or
whatever you can also do push and pull
and which I think I like more but
whatever and when whenever the update
happens you omit the event changed so in
my little application i will show you
the app first so it's really really a
simple list of all the talks basically i
mean nothing fancy about it will close
this
well the kind of gets interesting in the
views part so we have the JSON the jason
has all the speaker events in there and
I have two views the page view which
basically is the entire the entire page
and then I have an item view and the
item view is one single item of the
application and if you look at the
source code here I'm only using mix-ins
in this case and it's I think if I think
when you look at the code it's really
really easy to understand so the first
thing I'm mixing in is a template helper
the only thing the template help it does
is it basically renders the template
into the Dom node which you specify so
nothing really really fancy the next
thing I mix in is the data max mixin
which basically provides the method to
bind the object to the DOM and then
another thing i'm going to call i'm
going to talk about in a little bit as
the events mix in so now if you look at
the bind object to dom method when
instantiate the item i actually get a
item instance of that of that model
passed into the constructor and then
here I'm doing bind object to DOM and as
the first parameter I pass the model and
it's a second I pass the properties of
the model which I want to render into
the DOM and the bind object to DOM
method basically queries the Dom node
bike last name so if i say title Tyler
Lee reflects actually the adjacent
property of the of the events Jason and
at the same time queries where is it
queries that Dom snippet for the title
class so whenever my object emits the
change event I'm calling this into dot
HTML helper method which basically sets
in inner HTML if you have formed values
or input inputs you could have into dot
value and just you know right a little
helper which does exactly what you need
for that case so what is it here I bound
basically the title time and speaker to
the DOM and now whenever I change the
property of that object it gets
reflected within the Dom
does it make sense so I have an example
here I'm going to explain it in a second
but basically i'm i'm attaching a Dom
event when whenever the Dom event gets
fired I'm calling the change method and
here I'm changing the property speaker
to dude and then i'm updating the item
so when i open the example i can just
click here and it updates the Dom on the
fly without rear ndering everything it
just has that exact download it uses in
HTML in that case depending on your
helper again which you can write and
replaces the value with a new value so a
really really simple way of you know
reflecting object stayed within the Dom
and the last thing which we also have to
which I think we always address every
time we write mobile or desktop apps is
how do we find Dom events to objects so
I mean again you can use something like
Total Connect and then you say which
download and what event and then you can
define an object and the method which
gets called but what we did here is
another really really lightweight mix in
the events mix in and I mean it really
doesn't do anything else but it carries
the Dom for the speaker class and
whenever the click event gets fired it
calls the change method of the object
and that's what you just saw here
so I mean that's that's already kind of
everything you just can really see that
you can write a lot of functionality
with a couple of mix-ins the code base
is very very small you don't need to
rely on any major JavaScript library or
include any big like big library really
again as I said the dojo Jas is just
there because for because of convenience
I was just too lazy to you know write
these methods myself but it's a very
very lightweight approach to fighting
basically a very simple model view sort
of controller and then the last thing I
mean you can just push that on github
build it using a build service like
operator dial or built up fungus from
Capcom and I I just actually built was
building it and I mean it runs on the
phone it's super fast it's a very very
simple app but it really took like I
don't know max an hour to write the
whole thing and if you compare the two
you know what we have here is we have
object to DOM binding which is something
not really simple all the time we have
event bindings and we have a very simple
templating sort of it's a really
templating language but it's just a way
to you know define it HTML snippet and
put it at a very specific location in
your in your DOM questions anyone nope
well thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>