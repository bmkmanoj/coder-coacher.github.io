<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ritesh Angural: Lightning Branches - A Way to Supercharge Your Feature Delivery - JSConf.Asia 2014 | Coder Coacher - Coaching Coders</title><meta content="Ritesh Angural: Lightning Branches - A Way to Supercharge Your Feature Delivery - JSConf.Asia 2014 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ritesh Angural: Lightning Branches - A Way to Supercharge Your Feature Delivery - JSConf.Asia 2014</b></h2><h5 class="post__date">2014-12-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/D9iFalfG9H8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">i turn my camera on I keep my fingers
away I'm ritesh that's me in the arrow
right there all right here okay I work
at a red mark and I do front end and
DevOps so red mark where we think we're
the leading or online grocer in
Singapore we're really building the next
generation ecommerce platform called
everything from erp warehouse transport
logistics we even have robotic trolleys
and we do all that in house we're more
than just website and API but on top of
all that we actually a startup so today
I want to talk about how we really
develop features at red matte I like to
think that we have a workflow that
really gets code into production fast to
do this we really have like a no top of
action approach I mean I now I now I
realize that this is a real bad slide to
have when you're actually giving a talk
but really what I'm trying to say is
that we try to encourage lesser meetings
with this workflow and improve
productivity and I want to share a
little bit about that hopefully with
this top you can apply some of this work
flows voice for your own team but if not
then anything else at least you'll get
to hear about a real world development
workflow of a scaling startup right so
cool let's get started raise of hands
how many you guys have seen this site
all right cool I mean I think it's
pretty cool like especially the CSS
animations stuff like people you know in
Singapore they will go like dem paola
and I I mean I totally dig it and now
let's see let's see if we can replicate
it on red Mile all right let's try and
do that and bear with me I think the
more challenging part here will be me
switching around the displace rather
than actually doing the deployment
so on this on this site as you guys have
been going to every single day this
fancy animation is really cool and we
have this page on red mark let me see if
you scroll down all the way to the
bottom and click on this link we have a
human's foul and I want to like have
this kind of fancy stuff happening on
this page as well so let's see if we can
if we can do that okay so i actually
went in and cheated a little bit
obviously looked at the code and stuff
and they have a key frame of smash let's
add that
ok but
and she can say that before that I what
I want to do is really i want to start
developing this feature so what i'm
going to do is within my repository i'm
going to do get flow feature start GS
conf oops alright cool i'm already there
all right actually what let me just copy
the whole damn thing and we have a grunt
task obviously running in the background
and it looks to be okay or what I'm
going to do is see whether that works
hmm what happened to this guy office
goes wrong when you are in front of
people
okay so
so what I'm going to do okay let's just
imagine that worked okay and what I'm
going to do is push it so get push
alright
and then what we're going to go what
that happens is like the whole build
process will kick in and if you go into
here
you are because I created a branch a
feature branch of juice corn cheat it's
automatically deployed to this server
and then any so anybody can basically
access it and there you go
so then what I'll do it I'll just ask
one of my colleagues here to help me
merge this request
major panic and automatically you can
see like because the build process has
passed it lets us know that you know
this is a safe this is safe too much oh
wait I'm sorry it's still building and
pause it looks good are you going to
merge that I don't want to be
responsible no just kidding okay so well
well give me a yay so while well my
colleague goes ahead and add much is
that we'll get back to it
yeah the deployment side is going to
take like a minute or two so I look
right back but basically that's done
like and howdy and what do we what just
happened like I spent really more time
figuring out about the projector stuff
and panicking about coding but
essentially you're able to deploy a
feature into production really really
fast and I know I mean you're thinking
this was it staged it wasn't really a
feature it was just like some fancy CSS
stuff but I'd say I still think it was
pretty cool where's my applause team and
in case you're still not convinced let
me tell you like a little bit of a story
and why why it's specifically cool about
Redman and it's about this thing product
market fit and I know you're wondering
like what's this douche talking about
product market fit energy as cold like
seriously what's up with this guy but
just like bear with me okay because I
think many of us here are working at
startups and and for me personally I'm
quite fascinated on how business &amp;amp;
Company dynamics impact you know the
developers because like really company
scale bro and if and if you're lucky and
people start using your product and a
trademark we count ourselves fortunate
that we are one of those companies
you're going to scale from like ten
202,000 to 10,000 like users orders
messages whatever I mean whatever the
scale of your measure is and as a result
I mean you're going to raise money you
more awesome people are going to join
your team and to sustain the growth and
sustain the users you want to be
developing a lot more features and
what's going to happen is you're going
to have you're going to have a lot of
developers working on a lot of multiple
features at the same time and we know
when we do that it's going to result in
a lot of merge hell's a lot of
dependency issues a lot of versioning
problems and that gets magnified
with more people that join I mean like
with a few people it's it's ok but as
and more people join that the problem
gets amplified and we really need to
tackle that but not only are they like
developer issues we also have like other
stakeholders other people they join you
know it's not just developers and I
think it's more specifically more the
case for red month because we really
have a lot of multiple systems like the
ERP warehouse automation transport
logistics which we all build software
software for in-house I'm not saying
that we have the most complex systems
obviously we just were just a start-up
but even if our systems are not the same
and it's different but the issue of
communicating changes effectively and
efficiently it still applies to I think
everyone because I mean as the team
skills you really realize that like
huddling around developers really
doesn't work anymore I mean so many of
us have had that experience where you
know there's somebody carding over your
shoulder trying to get some update and
you know it's just like is this done or
and looking at the code I mean they
might just think like you know most of
them they just think like it's a matrix
and it looks really fancy and they're
entertained by that but really it's
freaking annoying and what still is like
when somebody's looking over and like
you know can you change the hex code of
that to that and like no man I mean it's
not productive it's like total waste of
my time and on the other hand like
instead of them coming to you you go
over to them all the time and you bring
your laptop over every now and then that
doesn't scale either because we really
can use our time more efficiently and
this is super important because if we
don't take care of this we don't figure
out what's an efficient way to get stuff
out and communicated we're going to end
up with spending a lot of more times in
meetings and writing less code and that
is really depressing I mean it's like in
fact it's so depressing that we actually
come up with the theory you know this
guy right famous pretty much came up
with this a mass energy equation we have
another theory and we call it actually
we don't even have a name for
we'll just call it the thought area or
the lightning theory whatever and this
basically means that the environment
that developers love or productive
environment is directly proportionate to
the cold code that they write per day
and inversely proportional to the
meetings that they attend per day and
this is true like this is totally true
thank you thank you that's totally my
rig audience but I appreciate it anyway
so just quickly recap company scale
usually results in more meetings more
branch mess we need to fight that
empowering developers to work on as many
features as possible at once so that
they can write more code and not have to
spend too much time communicating to so
that we can reduce meetings in select is
very important but how do we do that how
do we empower multi feature development
by multiple developers at the same time
and the answer released for us at least
it starts with get flow and most of you
know I mean you probably know what gate
flow is and again like bear with me okay
and for the for the sake of those who
don't I just want to do a quick repack
recap and give that get flow is
basically a branching model it's a
convention that everybody and your team
will adopt and just helps to ensure same
branching state for our purposes the
fundamental block is really the feature
branches feature branches are basically
where you write all your code it's based
off the developed branch you work on
this every single day for example in the
feature 4gs conf you would do a feature
flow get flow features comp and what
this does is just basically takes
develop and creates a new branch and
checks it out automatically for you once
you're done with the feature you
basically merge it back in to develop
and that's why the develop branch is the
integration branch it's where all your
features get much into ones they've
finished like for example when you
finish off the GS con feature you just
do a feature floor finish and what this
does
it checks out develop it merges GS count
back in to develop and deletes this
feature branch release branch there's
another one where you want where you
want to combine a set of features this
is particularly useful has been useful
for us when you want to stage completed
features that you want to deploy later
like for example you worked on feature
ABC you're done you're integrated it
you've integrated into a develop branch
and then you want to release it a week
later but at the same time you're going
to start on D and E at that point it's
probably good to get developed merged
into release and then not touch it until
it's actually out in production and of
course you can probably guess at this
point that you know master branch it
contains the official release history
anything that is in master branches
production and in case of like you know
when shit really hits the fence you have
hotfix branches which are pretty much
similar to feature branches but they're
based off the master branch instead of
the develop branch so really get flow
helps maintain the sanity of our
branches for us and from what I went
through just now you'll notice that
there's like three branches which are
kind of like gatekeepers so like develop
release and master and it makes kind of
like a common sense decision in terms of
code review that we do it there so
anytime you want to put code in to
develop release or master it has to go
through like a pull request and a proper
code review process kind of like the
pseudo one that we did just now so get
flow helps but for us of oats help as
well we specifically has this have these
commit and feature branch only commit
and push often in fact like we we make
it a point that every single logical
improvement to the code is committed and
pushed we also merge develop into
feature branches every day just because
somebody else would be working on other
features and they may have merged alien
to develop and merge features only in
the developed never
ever ever do master only have pull
requests to master and as long as we use
get flow and stick to our odds we are
really able to work on really as many
features that we want at least at this
point but obviously just having
branching is really not enough we still
have if just just by having branches we
still have to bring our laptops
everywhere we need to get we actually
now need to get them deployed and to
that I want to talk a little bit about
our environments of which we have four
and again you'll see how like get flow
is really the starting point for our
environments as well the first one is
local I mean this is really
straightforward it's the developers
laptop yeah done we jump to the third
one I'll get back to the second but this
is basically this hosts the staging
arrahman hosts basically the developed
branch or the release branch and the
reason why it could be both is because
we may not have a release branch all the
time if we do then it serves the release
branch otherwise it always serves the
develop branch and obviously we have the
production environment which you run
which runs everything that's in the
master branch everything that's in
master branch goes into production and
you think actually that this is probably
the most important branch but to us the
development branch is actually the most
important it's where the features are
deploy it's where the real stuff happens
and we and we invest in that so
basically when you deploy something to a
develop branch it automatically goes to
alpha no red mercom if you deploy
something to a feature branch it
automatically goes to a feature URL
something like this which would which is
what we saw just now when I did a push I
was deployed although I cheated but it's
still deployed at GS conf alpha to read
more calm so anybody can go in and
access it and provide feedback and the
commander deploy basically is is the
ever so loved git push right it just
figures out like depending on which
branch you deploy to which branch you
push it
it gets deployed by CI automatically so
you really don't have to worry about
anything else but just working about
your code and working in Game four the
CI process basically I mean we use
Travis you could use Jenkins circle CIO
whatever but basically the point is this
that once you do a push the CI process
Travis picks up the branch and because
it knows it obviously knows what branch
you push too so by translation in those
which environment and by that it knows
exactly which service to deploy to as
well so it runs the test it builds it
creates the artifacts by me but by that
i mean like it compresses minify zip set
up and then actually transfers them to
the right server and starts the
application we use grunt for this so
every one of our application has a CI
directory which has a particular grunt
file that is responsible for like
compressing zipping and transferring all
the artifacts to the correct server and
in case you prefer to look at flow shots
but basically it's pretty much the same
developer pushes within Travis you do a
build if it fills it we notify people
and slack if it passes you create
artifacts you zip them up compress them
we also upload them to s3 in case of
roll backs and then we get the
particular service transfer the
artifacts to dr. buss and then start the
application on those service and all
this part is done by grunt task and that
just means like they don't the powerful
thing about that is we just get to
deploy with git commands I mean it
doesn't it doesn't mess with the
developer workflow because that's you're
so familiar with get I mean we love get
and the cool thing also is now that
communication also becomes part of this
workflow so we never ever changed the
developer workflow that is the central
part of everything so every time we
create a new feature we have a new
channel and snack and the slack and who
all the bills for those features are
automatically populated to their channel
so that you know every time a commit
is is is pushed it's automatically
deployed just like in the case with the
GS con for example so we know we really
no longer have to bring our laptops to
show anything and any and anybody who
wants to get involved or wants to keep
updated just just need to follow that
channel yeah and basically what that
means is like we we are now able to
communicate every incremental change and
we communicate it in the best way
possible which is just the right code
and obviously I mean not showing code to
whoever wants to be who wants to be
notified but giving them something that
is that works and they can play around
and interact with let every single
comment another as a result of that we
really do have a lot less meetings when
we spend the time instead playing more
foosball Tim turns out like this was a
probably the biggest realization for me
is that everybody hates meetings I
thought actually it was just the
developers that hate them and everybody
else just uses me things to kind of like
do do stuff but turns out it's not the
case so back to my lightning slide
because I love it so much what exactly
is lightning branches so actually it's
really nothing but what we think of as a
considered investment in the development
environment every logical improvement
every single commit is important not
just the final deployment that you go
into staging or to production every
single one of those commits that is
important and it's important to get
feedback on that and get it quickly so
to be able to deploy every single one of
them in separate feature branches is
really awesome and it also inculcates
the habit of really pushing small and
increment incremental changes very fast
and getting feedback so in case like
I've been putting you guys to sleep or
anything if you wanted to listen
to just this part this is pretty much
the crux of it like how do we actually
deploy the feature branches which i
think is simple but pretty neat and the
answer is like we use nginx I mean it's
really good at routing so why not and
our single page applications are really
good at being lightweight and just about
being able to run anywhere like you put
it on s3 you put it you know anyway it
just runs so all you really need is this
like a server block in internet set a
white list of you know a domain set a
default feature we usually use develop
make sense and then based on the host
you change the feature so if which is
just a simple reg reg ex and says that
if it's jas confidence that if it's GS
condo Alfred or in macomb then the
feature is GS conf and we will serve
that at a path of path to features last
year's conf and then it's really really
simple it's just a simple matter of you
know transferring your bill artifacts to
the correct path to the correct server
and it just works like we don't have to
create a new server you just need to
deploy to the correct place with this
really neat configuration and you guys
might be thinking like what really
that's it it's that simple yeah it's
kind of that simple I mean actually
there's a lot more we do use a lot of
Chef a lot of Ruby to do a lot of the
automation but I kind of like a value my
life I don't want to talk about it here
in gs conf but in case there's any one
of you who want to talk about it and are
not loaded with a gun or something come
and share with me yeah thank you thank
you refinish
maybe just one question for a dÃ©jÃ 
especially for those of you who are
involved in large-scale applications and
need to build features all right all
right yes one Steve hi yep I'm just a
question how many times your push to
production every day I mean obviously
this is not i think is more devops top
but yeah just wondering it depends on
which project but for the front end i
would say at least once or twice once or
twice because i feel for get for get
floor i might not be yes I mean it's
actually quite complicated and the
teacher or your developers on direct
might be something that is more suited
is I think most of our long releases so
it's actually quite as puzzle when you
say you'll use it for my pusher
production like quite fast no i mean we
actually use it like for the simple CSS
hack yeah that I did we do that all the
time because feature branches are like
super super cheap have your consider
like maybe like github flow way all you
just do is from master to feature branch
and then back to master so that
simplifies you don't even have the
release and you know stuff like that we
wanted to do this so that we can have
the ability to have pull requests you
also can have pork rest you know just to
master I mean in a sense yeah I mean
just a taller because I mean looking at
this thing for over a year now it's okay
cool yeah it's chatter yeah yeah their
various ways of doing it I think Jews
what suits for your team get a floor get
flow thank you page thank you thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>