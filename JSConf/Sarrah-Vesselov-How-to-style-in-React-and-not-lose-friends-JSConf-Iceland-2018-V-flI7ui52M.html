<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Sarrah Vesselov: How to style in React and not lose friends | JSConf Iceland 2018 | Coder Coacher - Coaching Coders</title><meta content="Sarrah Vesselov: How to style in React and not lose friends | JSConf Iceland 2018 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Sarrah Vesselov: How to style in React and not lose friends | JSConf Iceland 2018</b></h2><h5 class="post__date">2018-04-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/V-flI7ui52M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right good morning
so had some snafus with some fonts and
some notes so bear with me a little bit
but thank you for coming this early so
as you can probably tell from the title
of my talk it's based on some pretty
painful personal experience
and I wanted to start today by sharing
that experience with you so in 2015 I
worked at a small Tampa startup as a
senior UI developer on a product team
and my main role was to build scalable
maintainable CSS architectures the team
and I had worked for months on a
proof-of-concept looked a lot like a
real app but it was essentially
vaporware we done well there was a lot
of buzz and we'd snagged her first
client so it's time to get down to
business and begin writing production
quality code it was an exciting
opportunity to build an app from scratch
and we decided we were gonna do it and
react it was just one problem
there weren't any best practices for
styling and react at that time and this
was really where the trouble started for
me up until now the team had been happy
to take care of all the styles to have
me take care of all the style.css less
sass they really didn't care as long as
it looked good but this all changed with
react all of a sudden my ten plus years
of experience styling applications meant
absolutely nothing in fact it meant that
I was a dinosaur and this was because in
2014 an engineer at Facebook gave a talk
that changed everything his talk made
the case for putting CSS in your Jas and
this really represented a shift from
traditional MVC architectures to a more
component based architecture and that
shift changed the way we viewed styling
in relationship to the rest of the
codebase so the next few months honestly
were some of the worst of my career
every presentation every conversation
became a confrontation every
conversation became a confrontation and
it was meant to shame and bully once
the other into seeing the error of their
ways and by the end of it all none of us
were friends anymore so if this sounds
crazy it was and if it sounds familiar
really sorry but it didn't have to end
this way
the team imploded not because of bad
technology choices in reality most of
the styling choices we tried would have
worked if we just stuck with it the
problem was us and the way we approached
the problem
we'd made things far more complicated
and personal than they needed to be if
we've been asking the right questions
and really listening to each other we
could have avoided the whole mess that
was two years ago
a lot has changed but the debate really
hasn't and this is a local recent Google
search I did just for CSS so I see the
same arguments being made today that we
were having two years ago so I want to
talk about that today and take a look at
both sides of that argument and then
look at the pros and cons of each way
that you really can style and react so
to look at both sides of debate starting
with the gripes against CSS we all know
CSS is broken right CSS uses global
scope by default that is a no-no in
JavaScript why are we doing it in
styles.css dependencies and inheritance
make style collision and overriding just
inevitable you're looking at separation
of concerns all wrong on the CSS side
right we look at CSS separation of
concerns as a separation of technologies
and in CSS and j/s it's really a
separation of components and what each
piece is doing and then the Cascade of
course causes thousands of lines of dead
code and doesn't work with CSS at scale
so you have this dead code problem but
there are equally strong gripes against
CSS and Jas CSS isn't broken you just
don't know how to use it using
JavaScript to create CSS
is excessive and unnecessary why are we
reinventing the wheel CSS works just
fine on its own CSS should be separate
from your market markup the Cascade is
your friend if you know how to use it
and of course Oh apologies there the
Cascade is your friend if you know how
to use it and of course inline styles
are a hack so both sides CSS and Jas and
the CSS side have some pretty serious
concerns about what the other side is
doing so now that we've heard the two
sides let's look at the options you can
break down styling into four basic
categories each one with its own sets of
pros and cons I'm going to start with
the basics
standardization methods otherwise known
as naming things intelligently there are
a lot of methods out there common thread
among all of them is to eliminate style
collision by lowering specificity and
encouraging modularity so
standardization methods work with CSS
sass blast
you name it and in 2015 Ben was a
standardization the CSS camp on the team
is rooting for and BEM stands for block
element modifier rules are really really
simple
everything has a class everything
elements should never be directly styled
no nesting of styles and choose clear
naming conventions and of course you
must follow the syntax religiously so in
this example I have my friend component
friend is a block it's a standalone
entity that has its own meaning and
identity any Dom node in my friend block
is an element of that block they are
semantically tied to that block and have
no meaning on their own so you would
never use friend image or friend name or
friend description anywhere else in your
codebase it should always live with
inside that friend block
and modifier is just an extra class name
that can be added to blocks and elements
to change its appearance or behavior
modifiers should only modify the block
never replace it in terms of component
structure
here's a simple component folder
structure to start with and I'm lino
means telling you this is the way to do
it this is just one way that you can do
it I think component folder structure
and structure in general is very
personalized from project to project but
here we've got the simple structure each
component should do one thing and do it
well and notice that each folder
contains the JSC SS and test files in
this example components have been broken
out into two categories we've got our
container components and just our
components the components folder
represents our presentational components
they're simply their state lists and
they simply take props the container
components are stateful they make API
calls etc etc there's a lot of benefits
to this approach you get better but
different type of separation of concerns
and you get reusability and other
projects if that's something you're
concerned with the presentational
components also can be worked on by the
design team without concern that it's
going to affect the apps logic so
there's a lot of pros to them and
standardization methods in general I
think they're a natural fit for building
components
there's no configuration compiler etc so
we're using just straight CSS nothing to
configure nothing to setup and put
together using BEM and presentational
components each component can be used
over and over again in other projects
and single class names make collisions
impossible and easier to rework as long
as everyone's following that syntax
rendering engines evaluate CSS selectors
right to left so the less there is to
evaluate the faster it's going to render
and I think that BEM structure lends
itself perfectly to linting so you can
make sure that every style that is added
conforms to the same standards but there
are some cons let's face it naming
things is really hard it's probably one
of the hardest things that we do it
sounds crazy to anyone that doesn't do
this for a living but I think most of my
time building CSS architectures has been
figuring out what to name something so
someone else knows what I'm talking
about
the rigid structure of them is what
makes it work but it's also I think what
makes it difficult to write at first it
feels really weird it it doesn't feel
natural and when something doesn't feel
natural it takes longer so it can be
really frustrating to do something that
you think you could do a lot faster
another way but you're being forced into
this syntax and into this this
particular method so you got to get team
buy-in in order for this system to work
and losing the benefit of the Cascade
can be seen as a pro or con depending on
which side of the debate you fall on the
Cascade can keep things dry when used
correctly or can result in a bloated
codebase
when Styles are repeatedly overridden
and hacked it's possible to use them for
theming but I would say that there are
far better methods out there if theming
is something that's important to you in
and the work that you're doing and it
may not be a serious Condor scores and
the dashes when you first work them it
feels really really ugly
and again I think it goes back to
writing something that's that's
difficult or doesn't come naturally can
make things a lot slower so next I want
to look at preprocessors we're turning
this into that so CSS preprocessor takes
a language and outputs it as CSS syntax
is usually more readable than plain CSS
and allows you to write dry code faster
gain a lot of helpful features like
variables operations mix-ins you name it
I think sass is probably one of the most
well-known extension languages and so
that's the one I'm just gonna touch upon
here in this talk so the bad news about
sass or any preprocessor is that you
still need to name things so in this
example I'm continuing to use the BEM
naming convention for our friend
component the friend component will look
exactly the same as in the last example
nothing changes here the component
itself is set the difference here is
that instead of having to write out each
class in its entirety or nesting using
the ampersand to assemble each class we
have variables in here and there's a lot
of ways that I could dry this up even
further
once compiled the CSS output is going to
be exactly the same as in our original
example and again with the folder
structure nothing has really changed
we're still approaching each component
as a whole entity we're no longer
separating HTML CSS and j/s and instead
we're separating based on presentational
components and container components and
in this example I actually have the sass
outputting to an individual CSS file
that lives within the component however
you can do it a number of different ways
you could compile this into one
stylesheet and load that whole
stylesheet instead so pros there's a lot
of pros to pre-processors sass gives you
the power obviously of variables mix-ins
nestings it's got a lot of really
helpful features i think a lot of us
have grown dependent on
and in general you can dry up your code
quite a bit using these features I also
think a lot of them are really easy to
pick up if you already know CSS there's
there's no real overhead to jumping in
and working with sass you can really do
it straightaway without much help and
similar to a first setup each
presentation component is modular each
sass file can be compiled into one sheet
or can be exported into one single CSS
sheet that lives with that component so
it really lends itself to working for
your team and for the project the way
you need it to there are some cons so to
use sass in your project you'll need to
add some configuration in dependencies
it isn't really a big con considering
what we already do with web pack and
other things in react but it's something
to keep in mind it's just one more layer
nesting can can get out of control very
very quickly
I've seen some some devs new to sass
nests themselves I mean like straight to
hell there's look they're like 10 deep
and they can't figure out how that
possibly happened so you've got to be
really careful with sass and nesting
having said that I would argue that the
the component composition of reactant
general reduces the need for mix-ins and
nesting you shouldn't be building these
really big components that do a lot of
things they should be very very small
they should be very very concentrated
and the amount of styling you need
should be relatively small so you may
not even need those things and you have
to name a lot of things right we just
don't want to do this it seems to be a
really popular refrain so now I want to
talk about inline styles and inline
styles are not the same as CSS and Jas
and I'm gonna get to that in a minute
and the first two methods that we just
talked about have been standard for
quite a long time adding CSS Styles
inline goes back even further but in
2015 the idea of using them to style
your entire application seemed kind of
crazy
so just like it sounds
inline Styles attach your styles in line
to the actual Dom node and again they're
not the same thing as CSS and JSI I will
get to that but this is a same frame
component it's a simple example of
inline Styles and this was the first
example that the CSS and J's folks on
the team brought to us in 2015 and I
gotta say we were horrified when we saw
this and to be fair this is not how most
people are using inline Styles most are
using style objects it's much more
maintainable than the first example it's
also the way react native handles
styling most will take it one step
further and place the style objects in a
separate document and then import that
into the component sounds familiar
should so at the time the thought for
many of us was seriously you want us to
style an entire application like this
the very thought of styling an entire
app by injecting Styles seemed laughable
at the time because a big argument right
had been working with CSS at scale and
from the perspective of the CSS folks
this was not scalable the font size
color palette of the application had
changed several times in just a few
months that we were working on the proof
of concept how are we ever gonna manage
monumental style changes like that with
inline Styles surely there was an
obvious need for global Styles to handle
things like font sizing vertical rhythm
and color palette even more distressing
at the time was learning what it
couldn't do the main difference between
inline Styles and CSS and Jas so inline
Styles only supports a subset of CSS CSS
and j/s on the other hand allows you to
use all the power of CSS because it
generates actual CSS and we're gonna get
to those in a minute I know I keep
saying that but we're almost there so
while in stein law in blind styles are
lacking quite a bit I think there are
some positives to them inline Styles
really forces
you to change your mental model and see
each component as its own entity and
this was something that it really did
for me I will admit that I was not
against the idea of CSS and Jas but it
did go against everything that I had
learned my years and years of best
practice and it really put my hackles up
but sitting down and writing a component
and using inline Styles really changed
my view on that I was able to see the
component as its own concern and see the
value in being able to localize those
Styles and obviously inline styles are
of the trump card and specificity right
there's no way someone's gonna
accidentally override them or leave
unused Styles hanging around and if you
intend to stick with react long-term to
go react native your styles are still
gonna work it's gonna be much easier to
move those over so the cons list is a
bit longer so you need to depend on a
library to access basic CSS features and
this was one of the big arguments from
the CSS side at the time was we're just
adding all these things that CSS does
does naturally why why would we do this
and if you're not losing using a library
it's necessary to program jeaious
workarounds to address media queries
pseudo selectors all of the things that
CSS gives you just out of the box and
then again depending on which side of
the debate you're on you lose the
Cascade so you're not able to make
global style changes using the Cascade
every component would need to be touched
if the changes were going to be to go
across all the components and I got to
say it was really difficult to debug in
the Dom I did most of my work in the
inspector and when you're not using
mapping class names to the elements it's
really difficult to tell what you're
looking at even when you know what
you're looking at it's difficult to tell
what you're looking at because the
styles are jammed in with the rest of
your your elements
and interestingly enough the components
themselves don't really lend themselves
to outside use and other code bases
because you're placing these Styles
directly in line you'd have to go in and
reconfigure basically every single one
by hand in order to use it somewhere
else and another interesting thing that
we found was that performance was not
very good not page full of inline Styles
where each tag needs to be parsed is
gonna be less performant than loading a
single stylesheet so CSS and j/s is
pretty hot right now but in 2015 it was
on fire and in 2015 there weren't a lot
of CSS and J's libraries aside from
radium CSS modules and I think at the
time that we were developing like
aphrodite had just come out many of the
cons that were plaguing inline j:s could
also be applied to libraries available
at that time
I think it's evolved quite a bit
so style components weren't around in
2015 but I think that they represent a
giant leap forward in CSS and J's
library so I'm going to talk about that
today so here we have our same friend
component should be very familiar with
this component by now but there's a big
difference in the way we're putting this
together so style components actually
utilize this tag tagged template
literals to use real CSS and create
normal react components so as you can
see we're importing styled from style
components so we're using that we're
importing that library and then we're
able to construct a wrapper component
that applies the styles to a section tag
so wrapper equals style dot section in
the Dom that's actually going to
generate a section tag with a mapped
class name that maps to those Styles so
it's a big difference in the way that
you handle inline Styles it is not
inline it's actually generating a CSS
style sheet so at runtime it's actually
loading that into the head section of
your document and then applying the
class name to the Styles so I would say
that how you structure your component
folder is going to be a team decision
and in most cases should be decided
before you ever touch the Styles in this
example I've actually broken that
component down even further here the way
we've broken it down is we've
constructed each piece and then I'm just
building in my render each piece of that
component here I've actually broken out
each one is its own separate entity and
I'm bringing them in to my index file
and that way I can use these over and
over again and other components and
other areas and build like a bunch of
Lego blocks really so this allows more
flexibility and scalability long-term as
you can easily move those smaller pieces
around to construct larger components
so I think style components have a lot
going for them and CSS and Jas libraries
in general do they allow you to write
real CSS without contact shifting
between JavaScript and a set of style
sheets and it also enforces CSS based
best practices by removing that mapping
between the HTML and the CSS because
you're building small purely
presentational components they're
independent and reusable and single use
class names make there we go
single use class names make naming
easier with no chance of collision and
of course you have your containers and
components so your separate separating
out your presentational from your logic
style components actually has basic sass
support so you can do things with
variables nesting mix-ins there's a lot
of really cool features there it even
has a native native mobile support and
steam support so there are some cons
choosing CSS and jus as an approach
means choosing a framework so it's one
choice followed by another choice
glamour style components aphrodite CSS
modules there are many flavors of CSS
and j/s out there and at the end of this
deck I actually have a resource that
takes you to an entire list of all the
possible CSS and J's choices you have
and it's yet another library to use
which i think is something to keep in
mind because things change so quickly
relying on a library that's the hot new
thing today might be a problem later on
so and it's also something that needs to
be understood by the entire team
and I think a solid case could be made
for the complexity this introduces many
teams have designers and implementing
styles and design patterns and CSS so
while a developer might be able to jump
right in and feel very comfortable
because this utilizes so much of what's
already there in JavaScript it could be
difficult for others on the team so the
question is what should I use it depends
I know you were looking for one answer
today but there really is no one answer
I think it really does depend there are
a lot of choices out there I think you
need to start by asking the right
questions so what are the mental models
on the team a mental model is based on
belief not facts
it's a model of what users think then or
what users know or think they know about
a system and understanding each person's
mental model of styling can help clear
up misunderstandings and foster
productive conversations I think really
having a good idea of how each person
sees styling so that you can speak to
their view on it a little bit better can
help you in those conversations and I
think it's also important to acknowledge
the different skill levels on the team
so if there's a mixture of skill levels
as I said a lot of times you have
designers that are implementing your CSS
and may not be as comfortable in
JavaScript simplicity and clarity can
really help everyone stay together and
if you're a group of highly skilled devs
then I think introducing complexity or
new technologies probably won't pose
that much of a problem and then what do
you need to build make sure you
understand what you actually need to
build there's a lot of pressure in our
industry to know the latest framework
the latest language or whatever tech is
making the rounds today and it can be
really tempting to jump on the latest
technology so before adding libraries
and building complex styling systems to
accommodate theming and reusability make
sure there's something you actually need
startled as simply as possible and build
from there and then how do you plan on
structuring your project react is not
opinionated about project structure so
understanding how you want to structure
your project is going to help you
determine the style method that's going
to work best for you and the rest of
your team will contain our components
live separately from presentational
components are they going to be kept
together will you have the need for
access to global Styles is that
something that you anticipate having to
have and these are just a couple of
considerations so think about these
things before you jump into making that
styling decision even more importantly I
think is to create the right environment
building things successfully requires
more than the right technology it really
does require the right environment and I
think there are four ingredients to
making that happen
first avoid dogma at all costs taking
extreme positions on a subject creates
tension and defensiveness before
conversations even get started
build trust taking risks is really hard
to do and it's even harder if you don't
trust the people you're doing it with I
think you need to embrace change
whenever you feel the urge to push back
on something lean in instead and you'll
be surprised at what you'll learn and
how many friends are gonna make along
the way I think lastly you need to be
vulnerable it's ok to say you don't
understand something or that you don't
see the benefit in it being honest
builds trust and opens the opportunity
up for greater understanding for
everyone on the team and I think it's
also important to to remember I love
this quote having a thoughtful
understanding of CSS to begin with
is going to help you build greater
things so whether you do it using CSS
sass less or CSS and GIS understanding
what you're what you're building and and
how to use it is very important
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>