<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Martin Naumann: Multiplayer WebVR - JSConf US Last Call | Coder Coacher - Coaching Coders</title><meta content="Martin Naumann: Multiplayer WebVR - JSConf US Last Call - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Martin Naumann: Multiplayer WebVR - JSConf US Last Call</b></h2><h5 class="post__date">2016-03-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WDUJ0hW5TCQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what you want to do is you want to get
this thing that is in your swag bag
assembled if you are like me and
basically incapable of using your
fingers for anything but typing and
holding food in Switzerland that's
really handy to be able to hold food
traditions and stuff anyway so you can
assemble it right now or you're going to
assemble it later when I assemble it in
front of you so gather around kits if
you need some help tinkering right um
with that out of the way so how does
that this begin and I'd like to sort of
as this is the last call I'd like to
sort of go back in history of it so in
2011 was so a very very small meetup
group in effort which is eastern Germany
where i lived at the time for studies
invited me to speak about some random
stuff i think it was html5 as a flesh
replacement or something and that was
brilliant and that got me into sort of
in delete this entire community thing
and then in November I think I got an
email with the headline Jace conv us
last call speaker invitation and I was
in public but that didn't prevent me
going full bananas about that so thank
you so much for putting up this one and
I like to take this opportunity to thank
all the communities that I got to visit
over the last couple of years and all
the people I met and all the fun we had
and all the the tough decisions and
chats we had and right with this one
we're going to dive in into the actual
topic so we're going to talk about
virtual reality and here are two
examples the the woman has fun and it's
pretty astound because she thinks she
stands right below a chopper over some
random city and then there's this other
guy who walks through an apartment that
doesn't even exist yet so you can see
from the actions at least of the lady
the guy is a Swiss guy so he has zero
facial expressions just like me that
true anyway so it's really amazing and
it actually gets it sun sets it set free
a lot of emotions and feelings because
it tricks a very low level of our brain
activity to think that we are in a place
that we actually aren't and originally
this demo was designed for a small
number of people because I thought who's
gonna have a cardboard I mean come on a
lot of people haven't even heard about
that so I tested with six people and it
was working nicely and like ah I'm done
so i can just you know pack for
cardboards and have a little live demo
with a few selected volunteers now the
situation is slightly different and
let's hope it doesn't end like it ended
in the movie right so without much more
other talking here is how you assemble
this one pull it from the cover it's
going to be a bit like these airport
airline dance right you pull it out of
the cover you can put the cover away for
later reuse of the cardboard device open
up the lib that wasn't so smooth right
and get this flap over fold it over fix
it with the velcro to both sides take
your phone go to that web address and I
really hope it doesn't crash or we
satisfy saturate the entire uplink and
now we get this so if you can't use your
phone or if it doesn't work with your
cardboard device you can check it out
here as well so we click to start the
demo which connects us to the server
that then goes into loading forever
because we do that it will saturate the
the upload oh god there's a lot of
people already and you put in the the
phone in here and you can pick it up
like that and ladies and gentlemen a
moment of silence I'm going in
and as all the horses oh my god and you
can move like me so let's see wow that's
a ton of people horse jas multi-user hi
there how's it going some people are
having trouble moving I guess or we ask
me screwing up the network ah alright
that was it um no have fun but please so
that has been at least 20 people Wow
right so this slide is a bit nice and it
doesn't have this like so voila if it
would have crashed i would have gone
like sorry so it's really nice because
this photo is pretty much multipurpose
alright so what what is in there what is
behind that demo well first of all we
have to get 3d content on screen and
we're going to use WebGL for that
because it's the perfect technology for
putting 3d content on screen and then we
have to get this entire sensor thing
working it also works with the oculus
rift in certain browsers actually it
will probably work with other hardware
as well it works with the gear VR
theoretically I haven't ever seen that
practically working and we use we're
going to use web PR for it which is a
standards proposal or spec draft that is
in development right now we also need
high speed networking in the browser and
WebRTC kinda comes in handy ly here so
let's talk about WebGL what is WebGL
well first of all everything that we're
going to draw on screen is made of
pixels in WebGL because we like to
invent new words we invented the word
verdicts and multiple things are
vertices because irregular
worlds are fun for non-native speakers
so here we see four points these four
points are not just 2d points but
actually have a set coordinate that can
go into the screen or out of the screen
so it's a 3d point if you wish and we
have four of them now drawing points by
themselves isn't very terribly
interesting and actually making surfaces
from them it's very very inefficient if
you do it in JavaScript so we have a
thing that's called faces and faces are
basically just vertices connected to
form certain well shapes can be quads or
can be triangles triangles are handy
because you can pretty much approximate
every shape with triangles so we have
these two and we put them into two typed
arrays float32 so that we have a bit of
precision and we have two lists one is
what all our points and the other one is
with our faces and now what well now
we're going to put them on to what's
called the GPU or the graphics card in
your device that doesn't have to be one
of these bulky cards it can actually be
just the chip that you have in your
phone so we see blue boxes here we see
green boxes here and we see red box one
red box the colors mean the blue ones
are actually running on the cpu and are
in JavaScript but the first thing we're
going to do is we take these two arrays
and put them into what's called a GL
buffer which is nothing else than a
bunch of memory on the graphics card
that's what the greenboxes mean we are
now crossing the border towards the
graphics card we can also use this to
mine bitcoins I mean do other
interesting things actually you can't
mine bitcoins I heard I know that I
tried but apparently there's
blacklisting going on when you try to do
that and then it goes into these buffers
then go into what's called a vertex
trader what does this thing do well a
vertex shader is basically a program
that runs on the GPU and its really
really fast and pushes these points
around if needed so for instance if this
point is there and my camera is turning
the point has to sort of move right so
that's what the vertex shader can do for
us that generates what's called
rasterized fragment so actually that
goes into a rest
which rested into fragments so that's
more or less the actual pixels that
we're going to color in later on now how
do we going to color them in right we
have to sort of know that well that's
what a fragment shader does it's another
piece of program on the GPU that colors
in every single pixel using images or
using some sort of math and it's also
really fast because it's highly parallel
and that generates this textured piece
off of concrete wall as a knock on brick
wall and now the last question the
question remaining might be what is then
this shader code thing it is code that
we can write and upload to the GPU but
we can't write it in JavaScript
unfortunately we have to write it in GL
slang which is glsl GL shader language
it's AC dialect that's used in WebGL and
OpenGL and then we can actually
influence this program in this program
and write our own Bitcoin mining right
but this is pretty birdie and pretty
verbose so there's libraries on top of
it one as we'd like to sort of push
Microsoft's open source strategy so
Babylon Jas is a brilliant library and
engine on top of WebGL that runs in the
browser quite nicely and is primarily
aimed at games but you can do other
things with it as well I think they
build a flight simulator in it and then
another one that's popular it's 3gs so
this is what three.js does 3j is pretty
much is having the concept of what you
would do when you would try to shoot a
movie you have it seen which is
basically just an empty stage you have a
camera that films this stage hi camera
and then you just put people on to other
things onto the stage and then you have
to sort of move them around and stuff so
this is more or less what we are doing
here we have a scene we have a camera we
have a renderer this doesn't quite fit
the metaphor but ignore that and then we
have a box which is a mesh which
basically is a bunch of faces and
vertices and textures and stuff put
together put that onto the scene render
it do it in a request animation frame
and you should get 60 frames per second
if you do it right a lot of people do it
wrong including me
sometimes so besides that the next thing
then would be to go into web PR and
there's a bevy r dot info has a bunch of
resources on what you can do with web PR
and how the specification currently
stands it also links to resources on how
you can get started and let's go a bit
back ends in time why am I so
enthusiastic about web PR or virtual
reality in general virtual reality isn't
a new thing it I think the first one
that I found was the first research was
published in 1962 that was long before I
was born and probably some of you as
well and in 1968 we got the thing on the
on the slide which is called the demo
class sort and I find that a very very
well coined term because it's kind of
cool but on the other hand look at it
and no I wouldn't try that one
especially because you can't just I mean
every one of us nowadays I mean this is
1968 everyone has one of those at home
right no you don't first of all it takes
a lot of space in a second it's freaking
creepy if I might say it looks a bit
like they would be shooting something
into his head with yeah whatever it's
horrible but it was really really cool
and it was the first head mounted
display for virtual reality 1968 then
this happened a couple of years ago the
oculus rift this is the dk2 which is
currently available soon to be replaced
by the customer version one in q1 2016
so this one as you might might wonder
about it this is multi thousand dollars
right this is really really expensive
this one is I think 250 or 350 right now
but oculus actually published the
specifications like the requirements and
hardware that you gotta have and they
are really really beefy most computers
won't be able to you can't run it on a
macbook you can't run it off your imac
because they are not going
for Mac OS X right now they do kinda run
it on Linux which pisses me off and
Debian can do everything but not vr like
well I actually it works fun fact it
works out of the box ish if you know the
right you know current options anyway so
this is three hundred fifty dollars plus
approximately a thousand dollars in
hardware that you have to get specific
for this purpose obviously you can use
it for other games and stuff as well but
it's kind of specific still but then
this happened and I don't mean today
right so when I ordered my first
cardboard from China it cost me
including shipping which was free
shipping to Switzerland that is two
dollars to I get 0.75 espresso in Zurich
for that so espresso or cardboard and I
said I cardboard and I never regret that
so that's pretty cool obviously it's
it's kind of cheating because you have
to have a phone that is capable of
running 3d content so it's not really
that cheap but on the other hand if you
look at it how many people do have a
more or less recent smartphone how many
people do have a dedicated gamer pc
right so yeah it's it's a thing and
actually we saw it working with working
reasonably well with iphone 3g so that's
alright dish it's not the same
experience as with the oculus the oculus
comes with a motion tracker as well so
you can literally have the motion
tracker set up like this and then go
around things and sort of bow down or
try to get up on your toes you can't
really do that with a cardboard because
it doesn't have any sense of where in
space you are but to be honest ninety
percent of the times it doesn't matter
right you can do a lot of mind-blowing
things without that and that is amazing
and that's accessible as well and
there's a personal story for me behind
the cardboard which is I have a family
member
who is unfortunately suffering a pretty
extreme case of social anxiety so he
really doesn't get out of the house much
and that's particularly annoying for him
because he sees how everyone in the
family sort of gets around the world and
gets to see nice places and and has all
these memories and all we can do is we
can bring them back as photos or videos
but the problem with videos or photos is
like this one you stand in front of a
flat thing that's more or less static it
doesn't react to you it doesn't give you
the same feelings it doesn't give you
the same experience I'm not saying that
virtual reality and particularly the
cardboard does give you the same but
it's a pretty pretty good substitute
right if you can't have this particular
thing for whatever reason physical
disability mental disability or just
because I'm pretty sure time travel
isn't going to be around for another
five years probably so ancient Rome hard
to get there Pompeii before it was
destroyed by the vesuvio how to get
there even actually the train connection
to Pompeii is really really bad if you
ever plan on going there so even getting
there today is pretty hard that aside
this opens up this possibility and I
gave him a cardboard and I took a photo
sphere so that's basically a panorama
image but you also do it up and down so
you get a full sphere covering the space
around you of a place in Zurich one on
the mountain while Swiss people will
kill me now on a hill 500 meters as
opposed I walk that home and and swim it
back anyway um
I'm not even kidding i figured this one
out this summer like it's so hot i don't
want to get into the bus you don't have
to you can float down the river yeah and
i did and and one day I didn't get out
in time and I was there in the stream
I'm like oh this is so nice what where r
waves coming from in a river and while I
was thinking about that the answer made
itself very clear if you don't get it
yourself stones very close to the
surface is the answer in strong current
so yeah that was fun and and he got on
this he put on the the google cardboard
and you should have seen the facial
expressions and it was a pure joy and
that got pretty close to my heart and
that's why I really really really like
where this is going right with that
other way Bev pro3 Jas is not that hard
actually other library is not a hot not
that hard as well but you would have to
probably roll your own until the library
sketchup i'm not sure if Bobby long has
already done the work for VR but
probably they have already so you get a
V artifact you put in the renderer that
you got beforehand you have the are
controls that read the sensor data from
your phone or the euless position
sensor you update these on each frame
and you render again on each frame voila
that's it and the cool thing about web
we are especially is like VR is a thing
for native apps right now and for
Windows applications and there's the
oculus demo where you can meet with a
friend virtually and check out netflix
like Netflix and chill remotely Netflix
and chill as a service if you wish and
which is the thing probably 4 2016 but
both both platforms like the cardboard
and the oculus rift share the same API
alright not don't but the browser's make
sure that you have one API that you've
got to address and you get pretty much
all the heart we're done so it's
abstract away the hardware it's already
available in Firefox nightly builds and
it's available as a very secure
the distributed chromium built on a
Google Drive so yeah I'm the person who
destroys everyone's idea of security
downloaded from Google Drive it's really
low cost to get into it so we are
actually using it at work and have
paying customers for it which is cool
and the community behind it is amazing
there is a slap channel that's open for
invites there's a lot of people on
Twitter the website I are actually
earlier has a lot of resources on how to
get in touch with them there's mailing
lists as well and the spec is being
proposed and drafted on github and as I
say it allows you to reach people in a
very very deep level because it goes far
below what we consciously feel and see
and think I've been in a demo where I
was on the bottom of the ocean and then
someone asked me to make a step forward
but there was just an abbess in front of
me and seriously I couldn't step forward
I'm like my brain kept telling me like
yeah you know you are in the room and
nothing's going to happen but then
another part of the brain that I
couldn't control when old golem and were
like no don't kill us so I obeyed and
didn't step forward so that's really
cool and the last thing that we're going
to touch is the third ingredient why
does it say to then write whatever the
third ingredient AKA 2 because 2 is the
new 3 WebRTC so WebRTC is quite nice
because we don't need a server right
well except for signaling theoretically
you can do it without a server but you
sort of still have to have a server so
but still WebRTC is pretty cool right ah
except you want to do mobile so yeah I
would have to build a sort of fall back
and as the only fallback option I would
have really have web sockets so while
WebRTC are quite nice and sort of give
themselves to this particular issue
because they allow me to pick reliable
or unreliable which is more sensible
actually unreliable is more sensible for
this case because if a package with
information of where you look and where
you are in 3d space gets lost it doesn't
really matter because there's another
one because you're pretty much
still moving most of the time and if
you're not then there's only a very
small Delta between the two web sockets
on the other hand are kind of TCP ish
and because they hijack the connection
you already have to the web server HTTP
connection and they are reliable but
that makes them slower I guess and you
have to have a central server is that
doesn't make any sense to you don't
worry about it the only important kate
key takeaway is it doesn't really matter
that much for this particular case but
actually if you want something that's
really really really quick and
decentralized WebRTC is the way to go
unless you have to support browsers that
don't play nicely so how much data do we
actually get on the wire because for
this to matter we have to figure out how
much data we're transferring so we're
transferring positions and orientations
basically right so where is the paid
person looking at and where are they in
space so that's x y&amp;amp;z and rotations
around these three axes so that's for
instance these randomly picked six
floating-point numbers so that's six
times a float 32 variable because that's
what type arrays give us so that's 192
bits and we run with 60 frames per
second hopefully and that makes up for
11.5 kilobit per second I guess we're
safe right so how about latency and
speed so I measured this one will round
trip times and I figure out web sockets
are actually quite slow ish in this
particular work quite so sure on this
particular Wi-Fi that I was on versus
web RTC which was really fast because it
wasn't really going that that far out
over the Wi-Fi so now I proposed to talk
that set multiply of a PR virtual
reality using oculus rift and Google
cardboard and web RTC we got virtual
reality we got oculus rift and Google
cardboard mmm and I would have to build
a sort of WebRTC implementation
including a fallback to web sockets yeah
sorry I lied it turned out that web
sockets are actually fast enough for
this so what you've seen is actually not
using web
but it's on github so feel free to you
know fork it and make FR DC and you get
swiss chocolates sent from me probably
over WebRTC obviously so how does the
code then actually look like well the
server doesn't do that much it has to do
two things really it has to manage the
list of players that are available and
their state which means position and
rotation so that it can send this
information to the other players and
then the player send updates and the
server basically just broadcast them to
all the other players and that means we
have more or less for different messages
we have the player moving so a player is
moving and we're just going to broadcast
that to the other players we have a
player that just joined the game so we
have a connect message and we have a
player disconnect so a player player has
closed the website or has failed to
connect or something like that so that's
pretty much it actually there's a fourth
message now because I know that there's
we're going to see why there's a limit
to the number of players in this game
and I'm like yeah I have these four
people up here and it's going to be fine
and then this happened and I had to
actually use the the fourth one to say
so I service for try again later on the
next J is called maybe and the product
called for efficiency shall be binary
because I don't want to waste space on
the wire so to make it as small as
possible we do a bit of binary packing
so here we have our message format it
has three informations one is the header
which tells what kind of info what kind
of message this is and what player this
message sent originally the player has
to be identifiable so that the other
players can then update the right player
in the world and I figure out so we have
four message types I'm going to use to
bits but the smallest thing I can get in
as a type array is an 8-bit you and
eight so I got a packet a bit and just
use six bits for player ID now do the
math six pit means I have maximum thick
64 players plenty right has ample
players hi more than sixty four people
um so yeah that's why we have this
additional message that says unused here
so and then we have a position
information and we have a rotation
information we might not fill these in
if it's a disconnect you don't really
have to send a position and orientation
so we just leave them empty but that's
more or less that's what it boils down
to so we have six float float 32 s and
11 you and eight that means we have not
too much data but actually there's
there's more on the wire so this is the
WebSocket protocol and I couldn't be
arsed to actually figure out what these
mean but they are on the wire right so
that's 16 bit on the wire that sort of
pad around our actual message our actual
message is 200 bits long that means we
have two hundred sixteen bits on the
wire that's 27 bytes in total per
package that's not too bad so let's look
at how that looks in code right so can
you read that okay sweet I wasn't sure
so I zoomed in a bit and the server is
quite boring yeah here this is this is
what surprises like this do to you so
this is an express application to serve
the actual web content like the client
application as well and then it creates
a WebSocket server here and inside there
it loads a couple of modules it creates
the server on top of the HTTP server
because how WebSocket works is you have
an HTTP connection the client asks like
hey shall we upgrade to web socket and
then the server goes yeah and web socket
magic happens and we have a a player
state this object whole is basically a
dictionary holding all the players that
are in the game and a global counter of
how many players we have to assign them
an ID this one just kids gets a random
position in 3d space always on the
ground starting on the ground this one
makes the actual packet that's a bit
more interesting so if we don't pass in
a position or rotation we're going to
create a default one just 20 everything
out and then we use an array buffer and
the data view of that array buffer the
array buffer because they are a buffer
is a
did platform-specific and how things are
getting ordered but the data view is in
the data view is actually consistent and
we're going to use the data view to put
things in so first of all at position 0
which is the beginning of the package
we're going to put in the header at
position 1 which is one bite we're going
to put in the X and then it five bites
by five bites well I float32 is 32 bits
32 / 8 is 4 so 4 byte per each of those
four floats and then we're going to put
in position all the three components of
position or the three components of
rotation and we're done and we have a a
buffer that we can send over the network
this one is a closer that generates a
broadcast handler for this particular
socket which is a player and the player
object associated to it and it goes
through pretty much all the others so
this is where broadcasting happens so
basically a socket that's associated
with a player sends us some data since
awesome message and then we go through
all the players that we are having and
if it happens to be that the socket of
this particular player happens to be the
socket that sent this message we're just
not going to send it back because it
doesn't make sense to relay the messages
that i send to me right that's
additional network traffic that we can
avoid and then this one actually sends
to the socket a message which gets
passed in here in binary and that's
pretty much all that we have here's an
initial announcement so if a player gets
I don't know even sure what this one
does but the comment says what it does
it announces a player to another is okay
obviously we don't announce the player
to the player itself doesn't make sense
because the player already knows that he
had stored the game we send a packet
which means here we have a connect
message which is just this binary
message type that we saw in the slides
which stands for Kinect shift that by
six bit making it the most significant
bits the first two bits of this on the
highest order and then we send oh
it wraps badly we send the position and
we send that into binary so this is the
initial message that we're going to have
to make that says like this player has
joined this now here
right and then we send to the 2d player
that has just connected we send all the
other players connection positions so
that initializes the game and then this
is the actual beef of the application so
if whenever someone connects to the
server we check if we already have 63
players if that is the case then sorry
we can't accommodate you and we send a
message with ty project to this
particular play and say bye close the
connection so that he can't bother us
anymore and end of story if that doesn't
happen then we we go to the get get the
current ID increment the ID for the next
player and here we set up the player
object for woopsy first with a socket
that we got and the we could generate a
random position so the position gets
generated by the server not by the
client when it joins we sent that we get
a broadcast hander so whenever this new
player sends us a message we're going to
broadcast this to all the others kind of
makes sense and yeah if it actually the
socket closes which means the player has
disconnected we sent the disconnect
message to all the other players so they
know that this player has been just
going to remove them from the game world
then we announce the the players to each
other that's pretty much it and then we
just start the web server and listen and
done so that's a bit more than 100 lines
but if you would compress that that's
much less there's a lot of white space
and blah so that's the server side of
things
Wow right yeah it has to load because it
never saw this before Google slides you
are so weird sometimes so on the client
which is the last bit that's left we got
to have to do a bit more first of all we
have to initialize everything that's
rendering related right we have to
render that we have to load the textures
we have to load the horse 3d model we
have to do the actual render loop we
have to receive messages from the server
and we have to send messages to the
server whenever we are having enough
motion or hours and because it does make
sense to continuously send a message if
I haven't moved why would I send a
message and that looks like this how am
i doing what time I have no idea I'm
probably going to have a couple more
minutes client and the clients main
logic is a good question is in jayus
exactly a bunch of smaller modules and
here what we're doing is primarily there
is a parameter because you might have an
older cardboard where you don't have a
button so you can select a different
thing and then you actually get all to
move which means you constantly move
around which is quite handy and nice for
people who have the cheaper version of
the cardboard then we initialize the
game world which does all the the
rendering initialization which returns
promised once we're done with that we
initialize the network which opens up
the socket and does all the the
messaging there and whenever we're
getting a emotion event from this game
world module that's that's written and
that's a custom module basically that
just tracks if the VR controls have
updated the position or if I have
pressed the button so i move if that
happens i send a local update with my
position over the network all right and
then we have this overlay that you saw
that says tap to start it requests full
screen it locks the orientation because
that's that's actually an annoying thing
so if you don't lock the orientation and
go like this then it might automatically
rotate and look and you vomit to
avoid that you were laughing but it's
it's not that much of well you can say
it's a bucket full of fun
but it's not that cool so I lock the
orientation to prevent that and allow
you to sort of do these things where you
go into portrait mode as well which is a
bit browser specific but hey that's what
you get and then we just start moving if
you have to move because you can't press
a button and then there's some event
handlers and that's it for here so
that's not very interesting so what's
going on in this game world then and
that's where the virtual reality things
go on if you're interested in networking
cool check out networking guess I'd like
to dive in into this one I wrote a
wrapper around three J's because I'm
really really lazy I mean efficient so I
don't have to deal with most of the
things internally and what I do is I and
we're going to go through the code as it
flows in in it this one is a little
longer we initialize a world and put the
camera in the middle which is the
coordinate origin at zero which is the
set distance we put up a certain
distance until which we were going to
render and then we have a render
callback that does the actual rendering
we put a light in so that it's not dark
makes sense and we put a box which is
this j/s box that you might have seen if
you were around that one or floating
around the world which uses the JSP and
G file as a texture which is why I
looked like a J's logo as a box then we
have a sphere which is sort of the the
aura around that box and it's
transparent and it has a pink color
because JavaScript and Pink's sort of go
together or yellow really but yeah
yellow is boring then we have the ground
which is just a plain plain shape that
stretches everything and then we have a
box with a bunch of images around and
that was the sky in the horizon you were
seeing we are faking that it's not
really sort of like there's clouds now
screw that that would drop your iPhone's
frame rate so we're going to skip that a
bit and yeah then we just put it into
the world we get a camera we load the
wonderful horse look at my horse my
horse is amazing it's in virtual reality
hmm so I can fly around with it and then
we just initialize the VR controls and
the Uwharrie effect I had more or less
it and in the render loop scroll Scroll
scroll the render Luke we're checking if
we are going very imaginative name and
if we happen to be and if we're going
out of bounds then we sort of make sure
that you can't get out of bounds and we
update the the rotator the orientation
of you and we rotate the power up so
that it spins a bit and we render the
scene and if we happen to be actually
moving enough for it to be visible and
we're moving then we sort of sending
that information on calling this this
event listener and the network actually
actually sends it over and yeah check
out the code it's quite fun you can
extend it whatever you wish and we did
it
you can totally wire me the money on my
Swiss bank account later so what's next
well very quickly first of all you can
do it via web RTC implementation of that
you can actually build game mechanics
into it because right now it's just fun
to fly around with a horse but not that
much like scoring or something you can
use the gamepad API which is quite fun
as well particularly with oculus rift
and there's things like the leap motion
of my which allow you to actually use
your hands and virtual reality which
gives a better feeling of presence
that's it thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>