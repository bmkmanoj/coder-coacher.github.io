<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[Reject.JS 2013] Gustaf Nilsson Kotte - HTML Hypermedia APIs and Adaptive Web Design | Coder Coacher - Coaching Coders</title><meta content="[Reject.JS 2013] Gustaf Nilsson Kotte - HTML Hypermedia APIs and Adaptive Web Design - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[Reject.JS 2013] Gustaf Nilsson Kotte - HTML Hypermedia APIs and Adaptive Web Design</b></h2><h5 class="post__date">2013-09-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aErQxv6zCPc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you very much yeah my name is
gastonia cincotta and i work
company called a way in Sweden where's a
consulting company and always looking
out for new talents and we're hiring so
please let me know if you're interested
but it's in Malmo Sweden so it's a bit
far for me and like roughly one year ago
I started to get interested in two
different topics one was hype meet AP
ice and briefly speaking it's about
avoiding putting application logic in
your API clients and then adaptive web
design I also started to get really
interested in and briefly it's about
coping with the multi-device web in a
good way I think what I found out was
that these two solutions to problems
were actually or of course independent
solutions to the different problems they
were kind of working together in a nice
way and I've thought like hey maybe you
can combine these two in in some form ok
so I'm going to demo a Kanban board for
you written with so which is on HTML
have media API and it's using adaptive
web design at the same time so it's both
a web and then API and there are some
rules attached to this Cameron board the
first rule is that you are only allowed
to move one state at a time and another
rule is that you're from the downstate
you are only allowed to go back to the
working state so simple but a few rules
so let's fire up yep so this is probably
what you expect so I'm not a great
designer but anyway so you can move this
tasks to different states and yeah
that's about it but it I think it's also
nice to accept having this overview
being able to focus more on just doing
one thing like I want to work on things
and then I then I can verify that our
market has done so I can be in focused
in this in just a working state and then
I can pull
more work to that I work on and yeah
it's verified so and still I have a
read-only view of of the board so that I
know what I'm doing so let's see how
this thing works with our JavaScript
enabled so as you can see there's a lot
of JavaScript going on here for example
the navigation isn't loaded and the
board is not there but I can still pull
some items and work with them so this is
just to demonstrate what's going on with
JavaScript and what's not so this page
is also a mobile web page using former
responsive web design and of course it's
looking huge here but on a cell phone
it's actually quite looking quite okay
and the board here is yeah just a list
of all the states this is particular not
particular interesting perhaps but if i
take the exact same same view as this
but on the api pissed api perspective we
see that yeah maybe you don't see that
but it's it's exactly the same thing
being rendered almost exactly so this is
an HTML have media API and you can move
things here interact with with yet it as
a regular HTML just strip the sea
systems and script tags and if you go to
the source you can read a bit about the
media type that I've used a documented
the media type kind of boring text with
some important classes that you should
know about some names and some
relationships how what
some forms mean semantically and I have
implemented a tiny Ruby client like ADA
lines of code that consume this this
hypermedia API in HTML so I can move
things for example from the working
state to the backlog the kind of simple
interface and move them back and forth
okay so how am i doing in time here
eight minutes yeah okay so what's going
on so first let me back up a few levels
if you have this kind of rules like
business rules application rules what
allowed items can go to different states
depending on which state you're in or
perhaps if you have a different user
roles for example admins can do more
than regular users or so what are they
allowed to see and do and perhaps you
have some different rules depending on
both the items state and the user state
then I think it makes sense to not have
this kind of application logic on all
your clients because then you will have
duplicated code and that's regular bad
so it might be a risk that you have
actually different applications deployed
because they have you have missed some
you have a bug in some some part of the
workflow and one client and that's not
good also it's hard when you deploy you
have to have a synchronized deployed
because you don't want applications are
be different you know this is important
stuff business-centric stuff probably
what allowed States and and user
authentication and authorization the
thing that should be in the API
centralized but then we have another
problem and that is how do is how can we
like Express like we tell the clients
about these workflows and rules in a
good way and the only way I know of is
to use rest and more specifically rest
level three hypermedia controls so let's
talk a bit about hide media api's so
what is the
the hypermedia constraint in roy
Fielding's restful architecture style
there's a bigger paragraph written by
roy fielding but you're more put severe
LM alliant ly by saying you do stuff by
reading pages and then either follow
links or submit forms and if you think
about it it's exactly the same way as we
as human beings interact with the web we
see them something we follow a link or
submit the form and now the challenge is
just how to teach how to code both the
api's and the clients to kind of teach
the machines how to interpret this these
links and forms and meet the data and so
I really like using HTML as to as the
media type for my API and there's a lot
of reasons for this one reason is that
HTML is actually one of the most
competent media types it's the media
type of most hyper media controls it's
also very old it's like almost 20 years
old now it's been standardized over and
over again and I mean if you ask any
available like if you show them some
HTML they will like oh that is HTML hey
everybody knows about it right but it's
which is not something that we could say
about many days and based media types
also there's great tool in sport you
notice this thing called the browser
which allows you to visualize your media
type that it would take that for granted
but if you compare with Jason based
media types well yeah that would be a
bit harder right also on the service
side you have template engines you have
instant exhale adding more and more
advanced stuff which I think think is
really good fun thing I like with HTML
as a media type is it's great for
learning about hide media may be in
production for some reason you don't
want to use HTML but if you want are
interested in hive media that can
recommend you start with HTML since its
baked in from the beginning and it's
ubiquitous and you have all these tools
and knowledge
okay so just a quick interlude here I
think Jason is okay it's it's nice I
like Jason based media types I think
it's very exciting that all these new
media types are coming up all the time
basically based on Jason and I mean the
more the merrier it's just harder for us
to choose but that's that's a luxury
problem right now I really like HTML as
the media type for my API so and that's
maybe yeah you should try it at least
and see what you think but to be honest
I think I don't think that HTML vs jason
is a pretty big deal I think that the
real barrier to entry is actually
building and consuming on the clients
consuming hyper hyper media itself even
in Jason you have just kind of think in
a hypermedia aware way what are the
links for other forms how can I yet
program for this so yeah let's so you
need a way to expose the metadata of in
HTML you can't can I need a semantic
layer on top of HTML and that is
something i like to use is microformats
and a new version here come back forms
to as you see there's convention here
like one character and the dash
conveying that that there is this is
marquis format so it's nothing no no
other type of cloth so about topmost
here you see we have an item entity with
some properties name status descriptions
and then some forms and links and if we
drill down in the forms you see that we
have two forms here one form that will
move this item to the backlog it go and
go into that action that URL URL and
another one that will move this item to
Rivera Phi state and this is the next
primary state
remove an item this is the default state
this is this kind of metadata that you
would like to send to the clients so you
can change them in an easy way okay so
as I said in the beginning I saw some
kind of commonalities between HTML hide
media AP is an adaptive web design and
let me be more specific I saw some
commonalities between html5 media api's
and mobile first so both of them want to
kind of send as minimal data packages as
possible because as an API you young you
don't want to send a necessary stuff
will be angry clients done and also on
mobile you would like to be very careful
with sending lots and lots of data
because yet the two limited screens
screen size bandwidth and maybe the user
is paying for data but that's only like
one goal the another goal for both of
them is that you want to minimize the
number of round trips to achieve the end
users intent so say you don't want to
follow links like 10 links and have
really tiny packages so this kind of
these two are kind of working against
each other and you have to optimize that
in a way that's specific to your
application and your domain and I think
that this is common for both I've having
me day p ice and mobile first so let's
see how I'm doing in time so just super
briefly about mobile first you if you if
you go this this road with just loading
the most important thing first for a
mobile page and this is this kind of
taking the almost to the extreme but
like the most important thing for the
user was that well if it's a user follow
the link to an article that's the
article if the user want to tweet that's
the four-link the form of the tweets and
you know navigation is secondary it's
something that's set
gives one or two seconds later that's
not a primary content so you show the
thing here the primary content and then
you have links it's a lot of other stuff
and then using a technique called
aggressive enhancement you can kind of
load follow the links and with Ajax
pulling the content in and replacing the
link with the probably not the entire
page but at least a fragment and this
can be achieved also on the server side
to play and of course then it could be a
lot of Ajax requests and then you can
start to bundling the your quest making
sure the API and the clients like take
several alias aquest and sending their
number wire yeah and the server knows
about that bundling together sending
packing up yep so you can be effective
in that way and then you need to think
hard about different cache profiles for
different links okay just to be
transparent here what you can do then is
to to decide the same time around time
if what what those things you want to
include and eventually you will end up
with on a full screen and good bandwidth
and whatever a desktop web so building
from mobile first to a desktop web so
and so this is kind of a one technique
in a deputy web design aggressive
enhancement or conditional lazy loading
there's a lot of different things
different techniques and FD webassign be
responsive responsive web design being
perhaps the most popular of these
techniques and its really an umbrella
term of a lot of different techniques
that and it's being developed and
examined really really a lot of a lot
now which i think is really exciting but
all these techniques are built on a
single simple principle called
progressive enhancement which is
starting with something simple that
everybody can use and then optimize from
that and this principle is perhaps
something that some of you here might
like I might not like but I I think it's
a good idea and but not for all thing I
mean if you build a 3d shooter game in
JavaScript come on it's it's impossible
to do that but forgets of announcement
and that's of course a gray zone where
you don't really know if it's an app or
if it's more content based web but I
think we are yeah and some some apps
should be content based web and some
content based web should be apps but I
think this is a nice principle to use so
but I'm so what I fine fine found out
and what I've been trying to tell you
here is that html5 media AP ice and
adapt and mobile first there can they
are friends there are kind of the same
thing they optimizing for two things to
minimize the data and minimize the
number of round trips and then mobile
first is friends with all other web
browsers all the web web experience
because you can use adaptive web design
to make better experience for better
browsers so this means that HTML have
media api's since all of my of your
friends or my friends that you can use
HTML at midday p ice and mobile first
and all web browsers and devices with
adaptive web design so you can combine
these two and the api in the web can be
the same thing so what something
important to think about if you combine
these two the web and api you need to
have an exit strategy because if you for
some reason would like to split in a
half year one year or three years from
now it would be kind of stupid if all
you both your api clients and your web
browsers went to the dub dub dub site
so you have some can't you have to have
some some separation on your your eye
level maybe you can have some duplicated
dns entry or you can have two
deployments point it to the same
database or yeah it's up to you there
are some other things that you should
think about and I've been time to cover
them during this presentation but if you
had you can see if you have the same
code base for your web and a pie you
should as a previously just just you
have to separate your eyes first that's
a simple thing to do then you optimize
the response sizes the package sizes and
the number of RAM trips both for your
API and your mobile web and you might be
surprised to see that well oh there's
notice you have a summary site summary
page on my work mobile web but I don't
have that in my API and then you might
SSS ok why don't we have that in our API
maybe that would be a good thing to
present for any client right and then so
it's the kind of helping each other also
in the in the design process and you can
use microphones to as the semantic layer
but there's also other other ways of
doing that for example using our EF a or
our if a light and then you can use
aggressive enhancement to make the
mobile first page b-but be better to
pull in more content with Ajax if you
have a bigger screen size for example or
based on some other parameters and you
should use other adaptive web design
techniques for example responsive web
design or yeah you have a bunch to
choose from and it's yeah like I said
it's a huge topic and then you can
optimize the api api like i did i can
show you if you don't remember this is
just it has not no script script
includes no no script tags know CSS
includes and if you look at this you see
that
there's old oh there's just the
microformats class information so in the
here I have some more classes for
styling but those you can strip away in
your templates so so now I want to make
a quick demo again how you can do if you
want to change your application so what
I want to do is that I want to add an
archive state after done that you can
you can move back and forth between the
done and archive so let's go into the
here maybe that's better so this is of
course prepared in the routing and the
controller actions but so
so make a transition from down to
archive and my my convention is that the
last thing here in the list is the
primary action just something that I
that it shows and from archive you can
go back to them okay let's see how the
consultant reacts on this one oh there's
a little thing from the past how
embarrassing but I can move this anyway
i can move things from the verify to the
done from the dom to the to the archive
and then I can move it back to done like
that so this was a thing that that I
didn't have to change one line of line
of code in my Ruby client and of course
the the web will also be enhanced with
the archive and you can move things back
and forth here okay and so if you think
about it if I wanted to make this change
on for example on iphone android on the
web and different clients i had to like
do this do a split and like hand out
different user stories four different
teams or persons and they we have to
synchronize and we have to deploy this
and in a synchronized way but here i
could just add one line of code and the
changes it's done so
okay so just a quick summary I think
that and and this is perhaps the center
of my talk that html5 media api's and
mobile first are really very much in
common and then other other persons have
showed that mobile first and all the
rest of the web browsers are really
friends because you said after web
design techniques to make it's just one
web right so and this means that html5
me AP ice and the web can be the same
thing and you can have the same code
base for your web and your API so
there's some good books on hypermedia
and on adaptive webassign this is just a
few of these geo goes there's also some
links online good slide decks
presentations and there's a good site
called the resource oriented client
architecture by a guy called step step
until Cove and two other guys that I
really recommend you to to read actually
if you follow one one of these links you
should go to the research on to client
architecture I think it's really great
and his I guess is from Berlin at least
his German Stefan tylko so thank you
very much for listening to me here's my
Twitter the code is available on github
the demo is actually running right now
on Heroku deployed both esta at Ft web
design site and as an API and I kind of
blocked it so you can't add items but
you can change and do whatever you want
and then the slides are available here
at the bottom so and I'll happy to ask
questions to answer questions later
perhaps during lunch and thank you so
much for inviting me and for having an
often awesome conference so far
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>