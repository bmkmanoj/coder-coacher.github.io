<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Luke Bonaccorsi: How I ended up automating my curtains ... | JSConf Budapest 2017 | Coder Coacher - Coaching Coders</title><meta content="Luke Bonaccorsi: How I ended up automating my curtains ... | JSConf Budapest 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Luke Bonaccorsi: How I ended up automating my curtains ... | JSConf Budapest 2017</b></h2><h5 class="post__date">2017-12-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dAqKa3waNx8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">[Laughter]
so yeah I'm Luke bonaccorsi I'm a
software engineer at sky betting and
gaming which is a online gambling
company based in Leeds in the north of
England
I'm also the organiser of the local
JavaScript me up in Leeds Leeds yes I've
been building stuff since I was about 12
for the web which is like over 15 years
and I just found it so cool that you
could put stuff on the internet cuz like
that was 2001 2002 when it was kind of
broadband was just starting to become a
thing and yeah it was super cool you
could put stuff on the internet and I've
been hooked on it ever since and yeah
I'm here to talk about how I in the
report and make my curtains and shouting
on my laptop so I'm lazy if there's a
way I can not do something I won't do it
and because of that automations an
amazing thing I can just automate the
boring stuff away and every day we're
surrounded by automation and we probably
don't realize it so there's stuff like
traffic lights automatic doors motion
sensing lights automatic hand dryers
cash machines and that's just stuff I
noticed and paid attention to today and
it shows how prevalent is in our
everyday lives and as consumers we're
embracing it more and more in our homes
there's heating with the Nest's
thermostat and lighting like Charlie
mentioned with the philips hue and even
though you're getting in the game now
with really really cheap smart light
bulbs and then there's access control
with things like smart door locks and
these things usually have api so you can
hook them up and interact with them
however you want so you can do like a
node scripts and run it from the command
line if you want to do that for some
reason or you can create a node service
and have a dashboard and hook all your
different bits of home automation
together so you've got like your lights
and your heating and your door and it's
all in one place and you just know I go
here and this is
it is and as developers we use
automation to make our lives easier and
more efficient and their stuff like
build tooling so you can run a single
command and it does a chain of things
like linting running your tests
transpiling pulling it through a web
pack and there's also automated tests so
you've got functional tests where it'll
run in a headless browser and check
things and see how they behave and how
they look and make sure it's right and
then there's unit tests so you're
checking your input and your output and
making sure that it's what you want and
you're not having to go through and
check that manually every time you make
a change and even infrastructure
configuration so you can build up a
server just with a set of scripts using
something like chef or ansible but as
interesting as that stuff can be I'm not
here to talk about that over the past
couple years there's been a bot up
rising I'm calling it that anyway
they're quickly becoming a bigger and
bigger part of our lives and helping us
with everyday things it's stuff like my
work we have a release token it's a
really really really simple bot you send
it message and then it adds you to a
queue when it's your turn it sends you a
message back saying hey Luke it's your
go you do your release you test it you
do whatever you need to do and then drop
the token in messages the next person in
the queue but it makes that stuff more
efficient someone isn't having to
monitor who's doing what it's dealt with
by the bots and then CNN have a Facebook
Bob that it can give you headlines when
stuff happens that you're interested in
you can subscribe to it by sending a
message saying I want to know about this
topic and it'll send you stuff about
that as it goes on and even Domino's
have got a bot that you can message to
order pizza and that's excellent because
making it easier to get pizzas even
better and these things can be hooked
directly into a chat system so you can
create something really quick and simple
with node modules for stuff like slack
and Facebook and they have great
examples for these things as well and it
means that in an afternoon or less you
can even spin up a bot that has a single
task and pull it into your workflow and
then there are frameworks that make it
easy to do these things as well so you
can have a bot that has multiple
functionalities and hooks into multiple
chat systems and there's stuff like
Microsoft's bot framework and one called
bot kit as well and then there's github
Hugh bot they call get Hugh bot the
hardest-working github er because it
does absolutely everything
it sits throughout their organization
and just does everything so there's
stuff like they can use it to deploy
codes they send a message it updates the
code that's running live or provisioning
Hardware so they send a message it
installs the operating system it
configures it does a test with a burnin
puts the live code on it adds it to the
library infrastructure and then it's
done or even visitors so when a visitor
walks in there's an iPad and they tap
their name into the iPads and then it
just sends a message to whoever they're
supposed to be meeting saying hey your
guests here even controls the music they
have a system throughout their offices
where music is just shared and employees
can control it by sending messages to
like cue and skip tracks and it does
simple things like that and it makes
their lives easier and we've now got
virtual assistants
so that's stuff like Siri and Alexa and
Google assistant and they're basically
box but a bit smarter and you can get
them on your phone through the web and
they're built into the OS of things like
Windows 10 and Chrome OS and there are
in our homes with stuff like the Google
home and the Amazon echo and they help
us out with things like reading reading
you out news that you're interested in
and playing music and buying things even
if that doesn't necessarily go well when
the news reads out a report
some of that going bad and again it's
quite easy to add your own abilities to
these things you can just write a node
service for it
glitch comm which is an amazing website
which is a collaborative editor and it
has a load of templates and it has help
functionality they have templates for
google home and alexa and it took me an
evening to add a basic one that just
pulls quotes from rick wikiquote and
reads them out to you and yeah it's
amazing that you can get hooking to
these things within evening and the
operating is only just beginning
BOTS and assistants that we're going to
become far more common and far more
prevalent so in mid 2014 I started
working on my own chat bot and it all
makes things for me so it's called
Woodhouse it's named after the butler on
the TV show Archer I was going to call
it Jarvis and then how to think about it
and realized it's over done and it
wasn't gonna be anywhere as near as good
as Jarvis would be so I picked a worse
Butler and picked Woodhouse so it's much
more extensible it's got a core which is
just some common functionality like
routing broadcasting scheduling and some
preference storage stuff as well as a
few other bits and then it's got a
couple of types of modules so that you
can get it to do stuff so there's
plugins which do whatever you want they
handle the heavy lifting so you can get
it to reply with texts or connect to an
API or interface with a piece of
hardware and then there's interfaces
which ways to communicate with it which
is usually a chat system so that's like
Google Hangouts or facebook chat or
slack or hip chat and if so if there's a
way you can connect it you can probably
connect it a lot of these things as I
mentioned earlier have a NPM
or for it it's all open source and
JavaScript's it runs on node it sits on
a Raspberry Pi behind my TV in my living
room and it's all MIT license because
why the hell not and I might change that
after Boyles talked earlier and then yes
all up and github it there's the link at
the ends and you can all have a look and
poke and delete and whatever you want
and have a try so yeah in the beginning
I only wanted to download movies so I
was sat at my previous company with one
of my co-workers waiting for a meeting
start and he had his iPads he was
connected by VPN into his Raspberry Pi
at home was just sat queuing up movies
to downloads and I thought that seemed
like a lot of effort I knew of software
that could download movies I knew it had
an API I just wanted to be able to send
a message it to send me an IND be linked
say is this the film you meant I go yeah
cool it just goes and downloads but
before I managed to do that I can't
remember how but I am managed to
automate my lamps instead so this is a
sending message
the lamps go off send another message
and then the lamps come back on and to
me that's amazing because as developers
we don't get as JavaScript developers we
generally don't get a real-world effect
of our codes so I was just sat there
typing the messages and hitting Enter
and as the lights were going off on off
and on just giggling to myself because
yes it's amazing and then so this is the
hardware for it it's a cheap Wi-Fi plug
that I got from China for about 15 euros
and because it's got the Chinese plug on
the back I have to use an adapter which
means it's super safe
and then by just like poking around at
the network connection for it I found
that it had telnet exposed and you could
drop into it through that and then I
found a Google group which they'd been
exploring and they'd found the SSH
password and it runs open wrt which is a
small Linux distribution for routers and
it's got a web server on it so that
means that we can put scripts on it and
make it do stuff when you hear a page so
I've got it so that you hit a page with
the certain parameter and it turns the
relay on hit it with a different
parameter it turns the relay off and
then another page to request the status
so you can tell if it's on or off and
then there's also script on there that
broadcasts the name the IP and some tags
so that I can group it into certain
sections every two minutes so that
Woodhouse can pick up the plug and then
a page configure those items as well and
I use this every day so as I get off the
bus after work I'll send a message and
it'll have my lamps on or if I'm driving
I will shout to my phone and use Google
now to tell it to send a message to
Woodhouse and turn the lamps on which
means that I get home the lights are on
I'm not stepping on anything that's been
put through the door I'm not looking
around for the light switch I just walk
in and do I'm gonna be doing it makes my
life easier and then I began adding
other little bits I eventually got round
to using to doing the TV and film
downloaders but I never actually used
them because streaming became popular
and easy with stuff like Netflix by
added like reminders so that I couldn't
put a pizza in the oven and then send a
message to tell it to remind me to get
the pizza out the oven because burnt
Pete's is terrible and I can check if
websites are up by sending it a message
saying Woodhouse is Google calm up
and it'll tell me yes or no using
something like down for everyone I'll
just me and then gift searches because
gifts are excellent who doesn't want
random gifts sent to their phone and I
started having all these random ideas of
stuff I could get its control like
everything but instead I started to
rewrite it because the old code was a
mess and I just been sort of chucking
things at it as I was getting really
excited about building it and it got to
a point that if I was doing a refactor
of anything or trying to build up a new
feature it would take way too long
because I'd have to untangle all this
stuff and figure out what he was doing
and why I did it like that and then
break things so I knew how it works and
I could structure it well and split up
into nice modules and I could use the s6
because noted advanced at that point
I've got to use all the nice stuff that
came with that and because it was node
it just worked and so I gave this talk
the first time in November last year and
I wanted to do something new so I ought
made my curtains so you send a message
and they open and it's really loud and
kind of creepy looking and send another
message and they'll close
and again it's a bit I can't imagine
what it looks like from the outside
so yeah the parts for that were pretty
basic we've got a plastic box that I
bought from a supermarket to hold
everything in a servo some string some
plastic wheels and some stuff to attach
it to curtain pole I've just realized
that sounds like I'm on a kids TV show
the explaining what you need to build
something and yeah the string just sits
in a loop with the curtains attached to
them by zip ties and whichever way the
cut the string rotates depends whether
they open or close and it's kind of
rubbish but it works and for the hard
for the actual hardware part of it is an
esp8266 which is a microcontroller like
an Arduino but it's got Wi-Fi and it
costs a couple of euros from China and
you can get this firmware called
Mongoose OS which means you can write
JavaScript in haven't instead of having
to do C I don't know C I just know
JavaScript and for getting it to control
my curtains and to configure it and
stuff like that I had 75 lines
it's got end points for opening closing
and to give me the status I can
configure it with some tags and a name
and how long the duration for the open
and close should be and also
broadcasting so that Woodhouse can pick
it up again and that's in 75 lines of of
hardware and there's so much cool stuff
for doing JavaScript and hardware
together so I've mentioned Mongoose
already but there's like johnny-five and
Cylon jeaious which they work on Arduino
and Raspberry Pi and then there's
development boards that have JavaScript
running on them like s Perino's and
tehsils
and they're a little bit more expensive
than nes ph 266 and loading mongoose or
on a mongoose arrest on it yourself but
they're a bit better supported and you
can use like MPM to run stuff on the
tehsil at least I know that
and that there's plenty more on the web
for this stuff as well like people like
hacking around at this stuff because
it's interesting it's fun and it makes
it easy to dive in and just get started
even if you have no experience with
hardware I have zero experience with
hardware and eventually I got boards
over Christmas and started shouting in
my laptop and it wasn't like code wasn't
working and being frustrated it was
generally to get boys controlled house
turn off lamps chair a lamp has been
turned off TV lamp has been turned off
couch lamp has been turned off Woodhouse
turn on lamps chair lamp has been turned
on TV lamp has been turned on couch lamp
has been turned on so yeah it's got the
worst reply voice ever but that's the
default in festival which is a
text-to-speech library on us speech
program on Linux and I'm sure if you've
run it unlike a Mac or some quiet that
it'll sound awesome but yes so the hot
word of shouting would house is offline
which there are no there's a lot of
privacy concerns for the Alexis stuff
where it's constantly recording you and
sending its Amazon service and that's
using the library called snowboy and you
train the model by going to their
website and saying whatever you want
you're hot were to be three times and
then for the main part of it I use
google speech API because they have a
ton more data than I will ever have and
it just makes it a lot easier you get 60
minutes free a month chunks into 15
second blocks but you could use
something like Amazon or Assurance ted's
but that's just literally when you want
it to actually do something because it's
triggered by the offline hot word and
the way this works is that I have or I
will have raspberry PI's scattered
around my house with a microphone and a
speaker and they deal with all that and
then just send
the actual converted texts turd the
central hub of Woodhouse why have a
central thing dealing with all the sort
of state and everything happening so
yeah that's the story of my strange home
automation stuff so far but it's only
just beginning I have so much stuff I
want to do with it like I want to add
the third module type of data providers
so that it can have like light sensors
and temperature sensors and have that
feeding and module subscribe to it stuff
like that
and then a recipe system like I have
triple T so that I don't even have to
send a message I just connect to my
network and it's dark outside and it
turns on my lamps and closes my curtains
so I can be even lazier and even like
natural language processing so I'm not
having to in the demo of the voice
control I barked a specific command that
didn't sound natural because it was wood
house turn off lounge lamps which feels
wrong it'd be nice to be able to say
wood house turn off of the lounge lamps
it feels a bit more conversational so
I'd love to get a bit more natural
language processing in there and even
have a unit in my car so that I can do
stuff like controlling the music and
contact the main hub to do stuff like
turning off my lamps so that it's easier
and I'm definitely don't want it to
control my car because that would be a
terrible idea and even more Hardware
stuff because I've really enjoyed having
a play with hardware and getting a
physical experience out of something
that we don't normally so stuff like
I've thought of how I could do a door
lock or light switches or even
controlling my thermostat my manager
told me how he does his with an Arduino
and a server it just like it's one of
those dial ones where it just rotates it
to the point that it needs to turn on or
off and that seems great and I kind of
want to do that now and I'm genuinely
terrified at the prospect of home
ownership not because of having a
mortgage or being growing up but recover
because I'll probably burn the house
down
so yeah the stylist talked I said I was
lazy
I want to correct that I'm the stupid
kinda lazy where I spend hundreds and
hundreds of hours making things so that
I don't have to do simple little tasks
like turning on my lamps and closing my
curtains but it goes further than that
I'm not here just to show off the cool
stuff I've built or at least I think
it's called I want to inspire you to
build some cool interesting things and
show you that you can do some different
things with JavaScript it's not just for
building like server runtimes and api's
or the front-end and I've learnt so much
whilst doing this stuff I've learned a
ton about JavaScript itself I've learned
about es6 whilst doing it I've learned
some stuff about UDP and some stuff
about hardware and I kept going down the
rabbit hole every time I came to
something new I'd find that ton more
stuff that I wanted to learn and I'd go
cold I'm gonna make a note of all this
and then just keep going and because I
found it interesting it was fun I would
keep going I even got a 3d printer
because of it I'm planning his second
version of the curtain opener that's way
better designed and like has a tension
system and stuff and I'll use the 3d
printer for that and have a load of
other stuff that I want to try and build
with the 3d printer and I realized a
great parallel when I was working on
this talk that one of my other big
passions is cooking in food and if you
were learning to cook you would learn by
cooking stuff that you want to eat it's
kind of wasteful if you're not
interested in it you're not gonna eat it
learning how to cook it it's even
difficult if you're not gonna eat it to
taste it and know that it's actually
done well and in a similar vein that
when you're learning stuff build
something that's weird and interesting
to you it'll keep you invested it will
keep you coming back and wanting to keep
going and building more you can hack it
you can cut corners you can refactor it
is you're learning and playing around
and being invested in it you're building
it for yourself it doesn't have to be
perfect you don't have to share it but
people will probably be
interested so thank you very much
and come and say hello and chat if you
see me around oh and there's the links
for</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>