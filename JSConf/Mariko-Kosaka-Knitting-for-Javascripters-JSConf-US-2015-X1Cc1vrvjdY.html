<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mariko Kosaka: Knitting for Javascripters | JSConf US 2015 | Coder Coacher - Coaching Coders</title><meta content="Mariko Kosaka: Knitting for Javascripters | JSConf US 2015 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mariko Kosaka: Knitting for Javascripters | JSConf US 2015</b></h2><h5 class="post__date">2015-06-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/X1Cc1vrvjdY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi I'm super excited to be here and
speaking of joyous comp
my name is Mariko and that's my twitter
handle
I should be automatically tweeting this
slide link through this slide so here
were in the back and you want to see
that you can find it there I will be
joining company cause clip so next week
which I am super excited about that but
today I am NOT going to talk about like
software engineering I'm gonna talk
about knitting and just in case you're
wondering like you were at the wrong
conference I was sure that I will have
enough math and code example for you to
be interested just for the guideline I
have a visualization down on the slide
so that blue dots are indication that
the slide has some kind of math
reference computer science reference
radius of the circle is how many scooper
sized ice cream I served myself after I
figured that out but yellow dots are
some random Jeff animation because why
not
so I like meaning I've been doing
knitting for quite a while I think my
first time I doing it was 7 years old
that's something I've always done like
once a year come winter I need a scarf
or mitten or something very simple and
nothing crazy like having an Etsy store
anything so here's a few of my project
that I've done in the lease and years
one winter I think three years ago was
very special winter for me because I
learned to JavaScript while I was also
working on this green scarf project and
I started to notice that like the
interesting paulo between computer
programming and the process of knitting
so for example when you get started like
if you never knit something knitting
looks like might look like this like
seven-year-old me was like I'm never
gonna be able to figure out this thing
that mom and grandma is doing so
intimidating my experience is
programming for the first time was like
just installing NPM install on the
terminal was like so confusing I was
like Wars flying around and like it's my
left of being hacked and like what's
going on
but we all know that once you've done it
once and no like what is exactly it's
doing you know it's not so scary at all
the other thing that computer
programming is very binary that we think
knitting is very binary the atomic unit
the smallest unit that you can do is a
two stitches which is knit stitch and
purl stitch knit stitch is the stitch
that you pull the yarn from the back of
the loop and purl stitch is the yarn you
push the yarn from in front of thus the
loop and those two stitches create a two
distinct face of fabric and the
combination of those two much like we
say like oh like programming is a ones
and zeros creates a pattern in the
fabric so the the green side of the
fabric which is 2x2 ribbing which is
commonly used for the calf of your
sweater or the neckline of your sweater
it's basically to knit stitch to purl
stitch alternating each other and then
just going row below the other side of
the pattern is the one I took from my
sweater which was a little more
intricate making my kind of diagonal
line and looks into me but if you look
closely it is just knit and purl stitch
just one stitch by once this is shifting
to the left to create a diagonal line
knitters have a github actually it's go
allow free and this is some more people
log in you put your patterns you could
sell your patterns you can start
somebody's projects and log share the
photos and it is really a central
repository of knowledge that you do most
knitting and in speaking of like a
central repository code for knitting
that knitting pattern looks like this
and I thought this was totally look like
code because there is like some letters
that's kind of leap eating and like
maybe kind of like a valuable that's
like you know accessing the same
information again and again and there's
more explicit of loop indication like
knit until two stitches remaining orally
pro12 four four ten times this brings me
to I could pseudo knit and JavaScript
so I took this code which was a scarf
bottom very simple scarf pattern put it
into 30 line of JavaScript to visualize
what this would look like virtually and
this is what I came out you know it is
it turned out it's only using a knit
stitch it's not the purl stitch so it's
okay and it's knit a scarf so making
triangle shape which is alright I can
understand that
so I actually knit that pattern myself
and I have it here but turns out it
didn't quite became triangle instead it
became on like a arc so in my code those
yellow stripes should be straight flat
line but and it became the arc and I was
like this is only 39 of JavaScript and I
like JavaScript professionally like
where's my bag like I can't figure that
out so I have it here where my full
stitches started here like two inch or
so and then I need it down and if I
force the fabric to see it you could say
that this was like straight line but in
fact it ended up being arc of a scarf so
why I did a little bit of research and
found out that what I was discovering
was something called hyperbolic geometry
in math and I was like okay in knitting
we call it ruffles
so I did a for Somali search and there's
a three kinds of geometry to describe
and they both use a one perfectly
straight line the one we are familiar is
Euclidean space which you have a
baseline and then parallel to that you
have another line that will never meet
the baseline again so it's like very 2d
the other one is filling all our space
where the straight lines are on the
sphere so however like however you place
it it will always need each other and
the third one is a hyperbolic space
which there is a base line and the
straight line infinite number of
straight line is can be drawn and turns
out this hyperbolic geometry is a hard
problem to solve in computer graphics
because it's hard to model researcher at
Cornell actually created a physical
model of hyperbolic geometry in knitted
fabric in her case created in the closet
and here's her paper about how he clear
how she created the hyperbolic plane so
when I discovered this like I just
stumbled upon like problem making
muffles but when I discovered this is
actual math problem behind my Lefou I
was like this is great I want to do more
of this I want to discover more about
pattern making and I want to do this the
problem was that knitting is very slow
process like this scarf itself took
maybe five days on like solid work so
like eight hours a day and if you think
about like software engineers sorry this
is very expensive piece of scarf so I
did furthermore research about how can I
test out my patterns and stumbled upon
this thing called knitting machine which
I have never knew that this existed but
apparently it existed for home use
available to your house since ninety
1890 and this is ad from that era and
furthermore interesting as a native
Japanese was that knitting machine was
very popular piece of things to own in
household in seventies and eighties
Japan and you know people were offering
local classes people own the kneading
machine like you own a sewing machine I
found a one TV commercial on YouTube
about this knitting machine from 1979
McGraw original Nick don't scare
so I am as confused as your to see this
TV commercial for one different listen
the song that was on the background the
lyrics said that like creating a special
like original pattern yet where is like
sending a secret love letters to your
loved one and I thought that was kind of
creepy but apparently things to do in
70s I lived in New York City when I
discovered this so I couldn't really go
down to your local classes so I don't
even know if that's offered in Tokyo now
but I you know made a short trip to ebay
spend a couple of hundred dollars to buy
this machine and I got it I set it up
and I was like okay I'm going to set
this up and local mall like create all
the patterns and I'm going to be awesome
and clearance sweaters turns out
operating the machine even before going
into creating a pattern was a lot of
work the machine was made in 80s it was
sitting in somebody's closet for a long
time it was missing the manuals so I
ended up next two months just
researching all kinds of stuff on
Japanese blog post about machine
knitting possibly watch every single
YouTube video about knitting machine
getting that's posted many of them were
Japanese occasional trip to a free
preview version of Google Books
because I couldn't just go down to a
Japanese book store down the street from
my parents house and pick up the book I
could actually I couldn't I never
thanked myself enough to be able to
speak Japanese because all of the stuff
great stuff was available in Japanese
and I just get so angry when software
only offers a documentation in English
because certain things I could not
understand and but in getting like at
least I got my turn to just do things in
Japanese on top of figuring out how to
operate a machine I actually needed to
fix the machine so I figured that out
how to operate this machine moving
carriage back and forth but it wasn't
knitting quite right
something was missing and basically I
flipped the carrier's looking at
examining what exactly supposed to do
and what this each path is doing and
after looking at maybe four hours of
like mechanics of things I found out
that that one piece of thing was stuck
in there and just to go it worked
perfectly and so finally I got to knit a
fabric out of the machine and I was like
this is great one thing about this
machine is known for is something called
jacquard knit or fair I'll knit or
pattern it if you're familiar with those
terms and if you've studied a textile
before the word jacquard directly comes
from jacquard loom which is a different
type of machine that creates a patterned
fabric and use a punch card as an input
to the input of the data and this punch
card system that the punch card loom
became based of the modern computer
which is I thought this was great
discovery when I did the research and
learned about it I was so excited so you
so the machine is based on that and you
see on the cemani sod the machine
actually had a punch card feeder so you
create your own punch card and then feed
it into punch card feeder and then that
will translate the pattern for you my
machine is coming from 80s so it is a
lecture on it it's actually the name of
the model it's called electro net and
what does that mean is that it no longer
has a feeder for punch card but it has a
motherboard and chip and a magnetic
strip use electromagnetic to a move push
and pull the needles automatically it a
lot it's a lot like dot matrix pointing
if you are familiar with matrix printer
one pixel becomes one stitch so in this
machine's case I feed it a yellow and
blue yarns the the needle that's pushed
forward is grabbing a contrasting color
which is blue and
then the needle that was left on the
behind is grabbing a base color which is
yellow and that's how they create a
pattern so that means I can create some
kind of gothic anything in this case yes
Tom's logo and then put it into a
knitted fabric and I was like I found
out how to operate this machine I fix
this machine
this shouldn't be problem I'm gonna do
this turns out it was not that easy
not even so there was so many things
that you needed to figure out which is
indicated in that blue dots even before
you actually put the data into the
machine so first question was like how
do I even make bitmap image because if
you're using Photoshop you just use load
the colored photo in selectively scale
and then select the bitmap method and
then it's just like Oh mommy could you
feed it out the bit before you but like
I needed to do this in code so like how
do i programmatically do that well let's
start with just you know learning about
image and loading that the image I used
a library called graphics magic and then
NPM package GM which wraps that library
I actually started by using phantom Jas
creating a canvas in phantom and loading
the image and using the canvas API to
extract all of the data which works fine
but it was very slow and GM was
suggested to me as a faster alternative
and it worked perfectly
so when you load a file into GM as a
text file this is what you get XY
coordinates of the pixel LGV value of
the color and then also the hex value
for that color so all you do is a handy
dandy reg extinct and create a la
overlays for each pixels so now I have
our CV color for each pixel
let's get you know get on it and make it
grayscale but how do i grayscale and
I spent like two hours just looking at
the single Wikipedia page about grey
scaling and it has all the math formula
I think I found out I could figure that
out and the engineer from Adobe
confirmed that that's okay so I'm more
confident about like my explanation here
you have all GV value for each color in
this case pink and green there you find
a highest value in each color in the
Pink's case red is the highest value
green case clean is the highest value
you repeat that number three times over
the all TV value again and then you get
a grayscale the color so now you load
the image in GM you get all of the color
and you you know three color all GV
value la you just find the max value out
of that
la and then you have a lay of just a max
value and you can use that to create a
grayscale image so I was like this is
 for photography so I can just
load it in because it's black and white
but you know the grayscale image is
actually black and white and many shades
of gray in between and my machine only
has two colors so it has to be just two
colors nothing in the shades of gray so
my first upload was to split it in half
and you think that's closer to white
side gets white and anything closer to
black side gets black and turns out like
this like something like what came out
of fax machine I wasn't really happy
with that so I was like this is my
favorite game when I grew up when I was
growing up and this only used like black
and white and it's like operated
beautifully in my tiny Apple computer so
I literally Google like cost me Cosmo
graphics and I incur not a need to do
something called dithering which at the
time I let the Wikipedia articles saying
internally intentionally applied form of
noise and I'm like I don't really
understand but okay GM has a built in
methods for it so I did that it turns
out better without my method but still
somewhere around the area is missing a
definition and I wasn't quite happy with
it
I didn't furthermore research and
something discover that the things that
I needed to do was something go
order dithering or half Don's clinging
which is used for newspapers to
translate that picture into a newspaper
which is just a one color of ink so you
have a base image which you extracted
the value for the grayscale and then you
have this noise matrix part you laid it
over you compare the overlapping pixels
and if the base image has lower value
than your noise matrix then it gets zero
if it's over then it gets one and that's
how you make it into two color image and
of course if it's like one and two you
can put it into you know ones and zeros
matrix here's a few example of that
noise matrix and a lot of people explore
their own matrix to create a better
bigger image I ended up using Bayer
because I like the output most so now I
loaded the jsf logo and outputted it as
a ones and zero pictures and if I
replace a zero of is no value and then
one with asterisk you can see something
like this and starting to look like
something on the knitted fabric so I was
like okay great I got files let's just
put it into the Machine and just knit so
let's make you knit pattern files the
file format for this is something called
dot dat which I think stands for digital
audio tape I have no idea if you open it
in sublime it's like a bunch of zeros
and I was like okay great it's like
binary file like just put my ones in
zero matrix we place it and then go in
and in but I found out that if the
pattern is in there it's actually hex so
I was like there something needs to be
done in between my ones and zero matrix
into this file what do I do
there is one guy Steve Conklin who is
lighting a same kind of project in
Python so I studied his code and
discovered this line and at the time I
was a newbie Python
and developer so I was learning Python
and I was like what's this like I just
went through like python tutorial
nothing mentioned about bitwise operator
like how could I not ever heard of this
I just went through training and I felt
like this I I just I I also found out
that the bitwise operator exists in
JavaScript and I let I'm D an article
and still couldn't really get what it is
so what I concluded after like two days
of like you know throwing bowls against
you know wolf was that this is like
magic and this is my interpretation of
what bitwise operator and bits shifting
is so I'm gonna give you two example
with two operations that I use for this
machine one is a bitwise left shift left
shift is a guy or fella whose push you
to the left and he's a magician because
it's bitwise operator so he has a magic
card so let's do this the a is a decimal
1 the value of 1 and the CH bit shift 4
to the left so the representation of
this mole 1 is that and this left shift
guy comes in pusher 4 times to the left
and because he is a magician he makes it
to 16 like how what how could that
happen i okay and the bitwise or
operator the same thing this person
favors 1 over 0 and he's also magician
so let's do a bitwise or between this
small one and five representation of
this more one and five is that first
compares ones in 1 there's only one so
he choose one there's 0 in 0 so there's
no 1 so ok 0 and next one is 1 sin 0 so
ok 1 and because it's magic it stayed as
5 even though you just did something but
it stays a 5
so I needed to do a whole bit shifting
and feel interested I'm happy to share
the code but my ones in zero matrix
shift it into one set of this more value
lay shifted again became one number and
then turned that this small number to
hex and I can finally put it into my
knitting machine so now I have five
prepared I plus the same is file
prepared and put it into the machine and
now I want to demo the machine okay so I
just turn it in I CLE loaded file this
morning I use USB to serial port cable
which the tutorial of how to make is
available online and just select the
nine you may not be able to see it but
what I'm selecting a custom pattern that
I created it says 1 times the stitch of
90 okay start I change the fitting make
sure this thing is ok now something
interesting
see these needles are pushed forward
this means that this carriage use the
magnetics to pull those needles and then
now these needles that's pushed forward
is picking up this blue yarn all right
now that the pattern is done I can just
discharge this take this Oh actually
just leave it there um you may not be
able to see it from the front but it
actually printed our Jes Kampf 2015 logo
and after that I'll finish this scarf
and I can show it to you in person if
you're interested so going into this
project I had no idea what I was doing I
just wanted to do knitting and I
discovered that knitting and JavaScript
is kind of related that turn into like
you know finding out about this machine
and like I wanted to do this I had no
laser vision about like trying to sound
smart this wasn't my job so like you
know whenever I go into problem I just
weed out or send the emails about it and
so many people just like jump right in
send their me call samples and giving me
encouragement and all that so I just
want to give a shout out thank you and
most of the code will be available on
electronic Lippo which is right now is
empty but I promise I will put it up and
subset from that project the the part I
was doing the calamus i was super
interested in it and i added more
feature about translation between color
spaces and
a small library for you to when you call
it explore the color on the client line
and that's available on the color mixer
Lippo or NPM module so thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>