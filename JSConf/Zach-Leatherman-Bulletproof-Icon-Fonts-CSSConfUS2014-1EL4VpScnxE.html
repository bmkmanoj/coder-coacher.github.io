<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Zach Leatherman: Bulletproof Icon Fonts [CSSConfUS2014] | Coder Coacher - Coaching Coders</title><meta content="Zach Leatherman: Bulletproof Icon Fonts [CSSConfUS2014] - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JSConf/">JSConf</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Zach Leatherman: Bulletproof Icon Fonts [CSSConfUS2014]</b></h2><h5 class="post__date">2014-07-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1EL4VpScnxE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so yeah both of I can't walk nice little
animation well really this talk could
have might as well been a title let's
learn everything we know or we can about
font face so as Jen said I'm Zach
Leatherman I live in omaha nebraska
anybody from Nebraska hey one guy I know
him but I work for filmer group and our
tagline kind of is we want to make the
web work for everybody and so we kind of
took this brooch when we're thinking
about how to implement fine icons but
Carl Sagan once said if you wish to make
a phone icon from scratch you have to
first invent the universe for any cosmos
fans out there so this is kind of the
agenda that we're going to go through
today we're going to do a little bit
about font face I'm going to go over
unicode how fonts look when they load
one weird trick that we can use to fix
all our phone icon problems and then
i'll go through a little bit of my
magazine subscription preferences Sarah
wasn't a cat person but I am so you guys
get a suffer through that all right so
font face was first introduced in the
super modern year of 1997 it was in
netscape for you can believe that which
was only two years after the font tag
was introduced in HTML 3.2 you if you
guys don't remember the font tag that's
okay because pepperidge farm remembers
how about back to font face was first
introduced in CSS two and then removed
in CSS 2.1 a lot of people don't know
that and then re-added and css3 just to
go over the syntax really quickly you
have a font family at the top you don't
need quotes in there a lot of people say
you need quotes but if you just have
white space in between your font family
name you don't need quotes then a list
of URLs pointing to your font formats so
the most common the most simplified
version just has two different formats
there's a lot of them formats you can
choose from
and if you ever feel like you're
drowning in the sea of different font
format so you can just ask our good
friend David Hasselhoff he'll tell you
what format to use so this is the can i
use layout for browser support for the
wha format really good modern browsers
have work but if we used woof and only
the wha format would be committing the
most common mistake in computer science
which is the waffle in error it's going
to get better I tell ya all right so
we're adding truetype support would be
our next our next type that gives us a
little bit better android android
support there and if we need i ate this
actually works for i 6 plus but we have
film a group we cut the mustard for IE 8
plus so this presentation is sort of
tailored for that we want to add the
embedded open type format and when
you're adding the opening embedded open
type format excuse me you want to use
this there's a URL parsing problem in
Internet Explorer so you want to include
this ? pound I you fixed to make it
parse the URL correctly so when you add
embedded opentype you get ie8 nice but
if you want chrome on windows you want
to add SVG now chrome on windows already
supports the wall format obviously but
it uses a an older text rendering engine
called GDI and they're currently in the
process of upgrading their text
rendering engine to direct right and
that upgrade is available in chrome 35
behind a flag so when you look at your
phone icons in windows all the way from
XP to Windows 8.1 it's not just an older
Windows problem the fonts will not look
as crisp as maybe you want them to look
and the way to get around that is to add
SVG and SVG font to our font stack oops
right and when you do that it also buys
us old iOS Safari which is basically not
used anymore and our lovely blackberry 6
if anybody tests on that a show of hands
who tests on black right 6 yeah that's
right that but okay so I've tested this
on blackberry 6 cool you don't have to
and you might think that you just plop
it at the end of your your source URL
list here but that would be a mistake
because chrome on windows obviously
support some of those other fonts and it
when it encounters a font format that it
knows it uses the first one that
understands so we get into some pretty
gnarly code we actually include a
completely separate font face block
inside of a media query that's WebKit
only which is not the nicest thing but
it solves our problem and if you
remember a little bit about blackberry 6
so we added this font face block to our
page and we bring it up in our
blackberry 6 browser this is what it
looks like not great right so blackberry
6 does support SVG fonts but not really
because if the text looks all jumbled up
so we can actually use another qualifier
on our media query block to sort of
qualified it that additionally so this
is the min resolution a little flowchart
for us and some learning to tile for the
flowchart up there so inner explorer and
firefox ivs don't sportman device pixel
ratio min resolution buys us only chrome
and opera and Safari Mobile Safari
android and blackberry don't support
that so that font face block has only
served at chrome and opera so we lose
old Iowa safarian and Blackberry there
but it solves the real problem that
we're trying to fix which was chrome and
what does all right so everybody take a
breath I was a lot we're going to go
over just
super quick review the top block is our
normal font face blog the bottom block
is the problem to fix chrome GDI on
Windows and we can remove that after a
chrome direct right goes to stable which
should be pretty soon that's in the next
couple versions probably all right so
yeah that was a lot I know so let's go
to our happy place luckily we're in
Florida right here so what happens when
I put this font face block on our web
page we look at in the devtools there's
no request captured if you just put a
font face block on your web page without
actually using it inside the page no
font will download so I tested this in a
bunch of different browsers again so you
guys don't have to this actually worked
in android 2.3 which was I was kind of
surprised but not a 98 so I able to
download everything but if you want your
font to download you use it on family
right or if you want to do it
dynamically later on you can just assign
a font family with JavaScript all right
we've made it through the first rock
let's go over a little bit bout Unicode
so basic Latin Unicode here's the
different you know fonts are kind of
made up of code points kind of like the
DNA of fonts so for example code point
hex 41 maps to uppercase a in basic
Latin and that's how we can kind of use
different fonts for its and content
right the content is assigned code
points when just substitute fonts tell
where we want and then the higher
Unicode ranges we get into more
interesting symbols like 2261 is the
triple bar mathematical symbol and we
also come lease it for hamburger menus
how many people have a hamburger menu on
their site all right cool but these
every single code point kind of has a
semantic meaning right so triple bar is
kind of expected to be triple bar no
matter what font you font family you use
then you get even into higher ranges you
get into something called emoji so moche
is kind of this it was first introduced
on on Japanese phones I think but it
gives you these bitmap characters that
are assigned to these higher Unicode
ranges but moji isn't necessarily
installed on cross browser either it's
not just an operating system level thing
you have to your browser has to support
it so for instance in Safari you might
see a pizza icon for that code point but
when you bring it up in chrome it
doesn't show anything this is kind of
what Jennifer Lawrence I think commented
on when she was interviewed a while back
and she said where's the pizza I told
you get better all right so like
Jennifer Lawrence we might start to
wonder how consistent are these glyphs
cross-platform cross browser luckily
friend of the internet john holt ripley
created this tool called unify and he's
gone through and tested each of these
unicode characters individually for us
so if you check out his site he has this
huge matrix and he puts the glyphs on
the left and then he tests them in a
bunch of different browsers and this
thing goes on probably I don't know
forever he tested a bunch of different
devices and browsers so if you if you're
going to use unicode on your site
definitely check out these glyphs to
make sure that they're cross-platform
cross-browser supported and just from an
accessibility perspective the Unicode
glyphs are maybe not read out loud like
you might want them to be so r instance
the triple bar the hamburger menu if you
go into a screen reader and encounters
that character will read it aloud as
identical to which probably is not what
you want when you're using it as a menu
icon but luckily unify is also tested in
screen readers as well so inside of
general ripley's tool he has all these
test results here that you can check out
and he tests in chromevox jaws NVDA and
voiceover so you don't have to test him
that easier either it's making super
easy for you guys
and I kind of mentioned that Unicode has
each one of those code points kind of
has its semantic meaning so there's a
section of Unicode called the private
use area and inside the private use area
there is it's kind of a free-for-all
there is there's no semantic the code
points inside of the private use area
and this is to avoid collision with
other defined character and because of
the kind of free-for-all nature of the
private use area you can get kind of
unpredictable results even with the same
browser on different platforms so for
example if I bring up the private use
area Unicode in Safari it shows these
black boxes for those code points but in
mobile safari it will show these weird
guess who character looking things but
typically fight on icon font authors
will use these to avoid overloading an
existing code point all right we went
over unicode now we're going to go over
a little bit about how fonts load so our
font face request goes out into the
world as to how does it look when it's
in flight so this is kind of the
quintessential font face problem right
when our font face is loading the font
is invisible it doesn't show fallback
text so that the top is there the top
section is using a local font the bottom
section is using a font face and while
the request is is is in progress nothing
is shown to the user
and much in the same way we might this
character from duck taxi would be the
text is invisible so this is the flasher
invisible text or the point I'm not
exactly sure how to pronounce that but
that's actually good for icon fonts
right because no fallback characters are
shown while the font face is being
requested while it's being loaded and
then once the font face successfully
completes our primary font family is
shown which reveals our icon but it's
bad for content fonts right because the
text might load after your images do so
it's not good for users if the user
wants to read your content as soon as
possible so what some browsers have
started to do and this is in Chrome
Canary currently in Firefox as they add
a timeout so after three seconds and it
will rear-ender the text using a
fallback font and then once the font
face completes successfully it will
we're under the text using the primary
font face so that's the that's the
primary one this is the flash of
unstyled text or fout great names for
these things but it's so a timeout is
really good for content fonts right
because we want huge paragraphs of text
to be usable to the user as soon as
possible but it's bad for icon fonts
because when the three seconds the 33
second timeout has been reached will
often show this fall back character
which is completely unintelligible to
the user right they have no idea what
that is and then once our font load
successfully that's when our icon then
switches from that fall back glyph to
the primary icon this is a real problem
right because i took the screenshots i'm
going to post a screenshot on twitter
and i took the i took that image that
they had shared and so get abuses icon
fonts currently and so someone i'm
pretty sure this was probably taken in
firefox because far i think this is the
default glyph that shows on firefox when
the
and those higher Unicode ranges so
someone took this after the timeout
after the three second timeout had had
passed they took their screen shot
before the font had successfully loaded
so if you can believe it I kind of agree
with how internet explorer does it right
because they show they don't show
invisible text at all they show the
fallback right from the beginning so the
content is immediately usable
immediately readable so plus 12 internet
explorer for that and this is this is
how it should be for content fronts
right we want our content to be as
quickly accessible to the user as
possible especially if they're on a
really slow connection or conference
Wi-Fi so i did some testing for cross
browser timeouts as well so I kind of
mentioned that chrome and Chrome Canary
and soup and firefox have a 30-second
timeout and explore doesn't matter
because they show fall back right in the
beginning and then all of these there
might be you see a unifying
characteristic of the browsers that are
on the right side they're all WebKit so
an interesting thing that I ran into was
that in Safari a mobile safari if the
font loads after 60 seconds it just
throws it away so you have this this
hidden text on your page the user can
interact with it they can't see anything
if your font successfully loads after 60
seconds it does nothing with it doesn't
show a fallback font it doesn't do
anything it's just white screen forever
so not the most user friendly thing and
also another consideration what happens
when these are hits the stop button so
the font faces in flight the font the
text is invisible the user might hit the
stop button I think maybe I want to read
the text maybe the text will show up
when i hit the step one but in all the
browsers i tested if the font or if the
text was invisible hitting the stop
button does nothing it doesn't show a
fallback fondant it does nothing if you
hit the stop button in chrome canary
after the three second time I has passed
and it's already showing the fallback
font then obviously the text will stay
visible on the screen but in most of the
other browsers
stop button basically doesn't it does
nothing to font face and whether or not
this is intentional this behavior is bad
for content fonts but it's good for icon
fonts right because we don't want the
fall backs to be showing all the time I
don't think that blingo really intended
this the baseball icon to be showing
right next to their login button or
maybe the lipstick at the bottom with
their flight finder I don't think that
was necessarily intentional all right so
how do we solve these problems so first
just a use case so I'm just going to
describe the simplest use case is a
decorative icon it's basically just a
span sitting next to some text that
describes what the icon actually does
and we use a separate element for our
icons because that's the best way to
hide them from screen readers right so
because we pair with descriptive text we
can hide the visual icon from screen
readers all together so they don't they
don't read that triple bar or identical
to that I mentioned earlier and so I
created this little library called off
font guard it's in the filament group
you love that okay yeah it's in the film
a group of repository on github you can
check that out and there's a little test
a little utility inside of that code for
fees on load and the only thing
phosphates on load does it gives you a
call back when your font face has
successfully completed so this is not
the same as like a moderniser feature
test because it will actually measure
the dimensions of the font changing and
it knows that the font has successfully
loaded actual font content and it will
give you a call back that you can
execute when your font faces loaded so
in this case I'm passing it up my icon
font font family I pass it a couple
glyphs that I know it can use to measure
the dimensions of it then a casa de
success callback and then inside that
success callback I add a CSS class to
the top level to the document so at that
point when my icon font exists then I
know that my font has loaded
successfully
and so this is the CSS we used to
implement this decorative icon we use
kind of that same like CSS class guard
like approach where we assign a class to
the top of the document so we know at
this point when this CSS is applied to
the page we know our font had
successfully loaded and we don't worry
about fallback fun so we assign our new
font family and we use CSS content to
show the glyph if you are using type
kits web font loader it will basically
do the same thing it's just a little bit
bigger so if you already have that on
your page and you're using it to load
your content fonts today you can use
this library to add the CSS garden class
to your document element as well another
promising native solution is the CSS
font loading module level 3 it's
currently going through the w3c and this
is the syntax for that uses the nice
promises spec it's basically the same
thing but it's it doesn't you it's
hooked into the actual font paste
requests going behind the scenes and we
don't do magic on JavaScript to
determine second hand when the phone is
loaded so we just pass it a size and a
font family and then we get we passed a
call back to the den function as
promises do and if you want more
information on that Bram Stein is has
cradle polyfill he's working on a
polyfill the spec changed and so he has
to completely I mean you had a working
solution but the spec chain so he has to
go back and change it so yeah if you
want more information on the native
solution definitely follow that follow
along with that but this my icon font
class that we add to our documental it
kind of solves all our problems right we
now control the floyd and the fout and
we don't have any more Unicode surprises
right we control all the fall backs we
don't have any more time out surprises
because we control if the font is loaded
successfully or not and there's no more
stop button surprises right
so on our decorative icon this is what
it looks like while it's loading it
doesn't take up any real estate on the
page that's where the fight would
normally take place and after three
seconds if the browser does have a
timeout nothing happens because we test
to make sure that the phone is lit
successfully and this is when the fout
was normally would normally take place
and then when font-face load comes back
that's when we assign our document class
and our CSS is applied so we don't show
there any fallback glyphs all right so
that was the one weird trick and so next
we're going to take a little bit fancier
magazines all right so here's another
use case right we want to transform
content or text into an icon while it's
loading we shall fall back text or a
fullback sentence and then after it
loads we replace that with the with an
icon not the most real estate friendly
solution but I'll go over some more
later for that so here's the giant block
of code for that I've actually divided
into the red is the red applies before
this font is loaded and the green
applies after the phone is loaded so it
makes a little bit easier we just hide
the icon before the font is loaded
successfully switch it to its William
line block and then we use an
accessibility hide feature that I think
probably everyone already knows about
it's built into html5 boilerplate I just
stole this one right now out of html5
boilerplate yeah so that our folic text
is still accessible to screen readers so
it will still be able to read that
facebook fallback text even though it's
not visible yeah so it's still screen
reader friendly so in other use cases
transforming a unicode lift to an icon
so the triple triple bar unicode 2261
hamburger menu icon not the most
intuitive thing a lot of people are
using it if you agree with the super
TechCrunch article that came out earlier
this week they kind of wanted to kill
the hamburger menu so I'm here to offer
you a few alternatives brought jank ferd
said that we should start adding text to
the bottom of our hamburger
calling it the hamburger helper you
could also use a hamburger emoji or a
veggie burger or a gluten-free hamburger
or Jed Smith schmitz man burger from
facebook or scott gels hungry man burger
meal just put the whole image on their
peers but so this is kind of the most
real estate friendly approach right so
while Devon is loading we show our
fallback font or a fallback glyph and
after the the fonts successfully
completes that's when we show our fancy
font face icon which is has the nice so
much better has the nice little rounded
yeah so here's the code to do that it's
a little bit not later than our last
approach but again I've divided it into
two different sections so we show our
icon or our default Unicode live right
up front to 261 hamburger menu we show
our default fallback text which I think
in this case was the Facebook text using
that same accessibility hiding feature
that I described it the last use case
and then when the font successfully
loads we switch the glyph we can use
whatever we want because we're switching
it in CSS content we use the new font
family and then we adjust our font size
and line height to size the icon as we
might want want it to be alright so the
thing I really want to communicate with
this presentation is that we kind of
different goals for icon fonts and
content fonts right since kind of tagged
icon fonts onto an existing mechanism
that we already used for content fonts
we need additional tools to handle them
separately and for right now that means
we have to use JavaScript someday we may
get at CSS only solution and I don't
think there is anything currently going
through the specs for that right now so
if you're interested can form a
community group
thank you that's all yeah</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>