<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>NextJS Custom Routing (P5D22) - Live Coding with Jesse | Coder Coacher - Coaching Coders</title><meta content="NextJS Custom Routing (P5D22) - Live Coding with Jesse - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/freeCodeCamp/">freeCodeCamp</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>NextJS Custom Routing (P5D22) - Live Coding with Jesse</b></h2><h5 class="post__date">2018-01-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HB28-QGlHjI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everybody sorry about that
I didn't realize the stream has started
and also sorry as a few minutes late I
was trying to adjust some settings I
don't know if you remember last week we
had some trouble with the video kind of
stopping in things and I realized that I
used to have a wired connection that was
obviously a lot faster than the the
Wi-Fi and I had we were troubleshooting
why I couldn't get into the database
that we've been working with they had me
unplug it and then somehow that allowed
me to to get in and then I never plugged
it back in so when I stream I'm gonna
try to keep it plugged in and I'll try
to do transfers from the database when
I'm not streaming if if that causes me
not to be able to get in
so hopefully the stream goes well if if
you all are having any trouble watching
it let me know and then I'll adjust the
settings some more today's gonna be a
short stream I have my first intern is
starting today and I'm gonna come in and
I'm gonna try to help him out you know
get him set up you just kind of walk
them through you know what how we do
things you know welcome through get you
know github about us from a pull request
and things like that it looks like you
get an audio-only all right let me
switch to my other screen get video
shows to buffering only hmm so it looks
like there may still be problems I
switched to a different view I don't
know why that would work but last time I
think some of you said that it helps
when I did that
if that doesn't help I'll stop the
stream and restart it because I think I
think that helped last time all right so
I guess the audio is fine so I'm gonna
still buffering huh
this weird the network is just not as
soon as it was I don't know what
happened with the network here but I
used to be able to run on these settings
easily all right so since you all can
hear me at least let me walk you through
what we're gonna do because the first
part I was just gonna explain it anyway
so that's fine let me wait and see like
lively and see 75 seconds all right all
right let me stop the stream quickly so
I can set turn the settings down a bit
and then that might help
all right let me know if it's any better
now or if it's still bad I did turn the
settings down a bit and I shut down a
lot of programs let's see alright right
now it's saying I'm not dropping frames
alright cool
I also shut down I was running the slack
desktop app the sequel studio app and
the Microsoft Office or the Microsoft
Outlook app as well so I don't know
maybe those could be draining things I
know I've always heard that electron
apps are resource intensive so you know
two of those three I know our electron
apps I don't think the the outlook app
is but and we're also running a couple
of Windows the Visual Studio code which
I'm not going to shut down so we're
gonna use it so that's it oh and I have
Spotify running so that could be it
so so the webcam is still dropping
frames but it's but it is better I'm
really gonna have to mess with the
settings at some point but as long as
you can see the code let me let me get
some code up here so let me know if this
is readable
all right some waiting for a response
let me see it there I know there was a
question up here Blake asks if he should
go with something like Shopify or
WooCommerce / WordPress I've never used
Shopify so I can't I can't really
comment on it I just know that I hear
about it a lot
it seems pretty popular I'd say for
WooCommerce if you don't plan on having
a lot of traffic to your site
WooCommerce would be fine it's pretty
easy to use but I have seen sites that
when they get a ton of traffic
WooCommerce seems to run really slow and
take up a lot of resources so that's
something to keep in mind but as I said
I think that's only really a problem if
you're gonna have a lot of traffic at
once and I just saw a site like that and
they would run sales some things and
whenever that happened their site was
really really slow
all right I should say this kind of
unwatchable alright let me see what else
I can shut down the code is readable
alright as soon as the code is readable
I'm gonna shut down more stuff let's
turn off everything
I shouldn't turn off and rock as well
let's turn off some closed eyes
we're not gonna use this today I
shouldn't say
all right so it looks like you all can
see the words which is fine you don't
really need to see my face anyway so as
long as that way as long as you can hear
me and you can see what I'm doing
then this should work and I will work
more on getting this to work like I said
I don't know I don't know what's up with
the Internet
so anyway hey everybody that's saying hi
on the live chat sorry for the the
weirdness again on the quality let's see
oh hey um if in the nikla norwood is
here I think I said your name wrong last
time so I think I said Bernie and I'm
pretty sure you told me at the November
conference it was for a Nikola let me
know which way is the right way to say
because I felt really bad I didn't
remember until after the stream that I'm
pretty sure I did the same thing when I
met you and and then I forgot again
all right Harshit says streams at 720p
not 1080 harshest has changing coding
settings
yet I can try to mess with the settings
more
it just is so weird that the the
settings that have been working for I'm
gonna the last eight months is not all
of a sudden do not work anymore
all right let's see
see
all right is it better when I don't have
the video there
all right
all right let me try to and you try to
work all right so here's the problem
that we need to fix oh we need to do it
in like less than 40 minutes I mean we
don't have to but I'd like to in the
stream so I have to sit yeah so right
now we have some routing setup so we
have our default routing through next J
s which
alright the stream status is good right
now I changed the output so let me know
hopefully this is good now I definitely
don't want to drop down to 720p all the
time but 10 I'd rather have 1080 for now
it's ok let me know Leonard says your
boss needs to sort out his priorities
it's definitely not up to my boss what
what my internet I have it's it's
definitely another department and higher
up than that alright cool so it's better
now I don't know maybe maybe something
was done to the internet that I'm not
aware of and I won't be able to stream
at the same quality as before I don't
know we'll see I hope that's not the
case but I mean 720p I guess this is
doable alright so it looks like the
stream status is staying good at least
from that's what YouTube is telling me
ok alright let's let's do this now
but I really really sorry that we've
taken up this much time on technical
difficulties ok so here's what I want to
do in order to keep the URLs the same
what I need to do is instead of like a
top-level your like for instance if we
were to type in right now the way this
is set up if I were to type in something
like Franciscan dot University's slash
about it would route to a page named
about here we will render that page but
what I wanted to do
if someone were to type in slash about I
want it to send all the traffic for that
to a one-component
but that's not what it's the only thing
that's gonna happen
I want multiple routes to be sent to
that one component and I want to pass in
some data just like we're doing here and
that's gonna determine what data gets
rendered there so you see it's these are
no longer gonna be like single pages
so we're basically kind of like
overriding the default behavior for for
next but I don't really see another way
I discuss some of these in the latest
issue in this repository if you want to
read more about why and what I'm trying
to do you can check that out the
possible solution I gave there I don't
think is the best I thought about it
more and I think the one that I've come
up with now is better so you can see so
my idea here in my comments I'm gonna
route each page individually to one
component like majors and then pass in
the correct slug manually it's the ID
and then we're also gonna have a proper
row so we're gonna have one route that
matches the old routing system which I
don't think is is organized properly
then we're gonna have the new routes
what's that that is going to end up
having two different pages with the same
content which is not great for SEO but
we got to do it because we want a more
reasonable routing sister URL structure
but then we also don't want to break
links so I'll take my chances with the
SEO so here's what we're gonna do and
this is very much gonna be like a test
of whether or not this even works so
I've thought about it it should work but
I haven't tried it yet okay so let's do
this down here
we let's see we pasted yeah let's put
that there
let's see here we go alright so we're
gonna work first with majors no no it's
not there so let's work with the oh I
know theology is a right now there's a
theology is like a I'm gonna say like a
top level in in the hierarchy of our
URLs and let's route this to the
component called major so what I want to
happen is let's see id is theology
string there we are so what I want to
happen then is to have several of these
and let's go nursing and this also be
Nursing All Right see this might be a
little bit easier to understand so we're
gonna have to manually put in these and
then pass in what we want to major
that's more work and I wanted to do but
the alternative would be and this is the
alternative that I had in the issue that
I open the alternative I was thinking
would be that everything we basically
put an ID right here and then pass in
whatever that string is here and the the
problem is then we won't be we can't use
custom post types for everything
everything in WordPress would have to be
a page or let's say a blog post I
probably do it as a page because it
would make more sense to people
but then you'd have a bunch of different
stuff in there together so like all your
majors would be in there but then you'd
have like your privacy policy in there
and you know everything that's that top
level in the hierarchy of the URL would
all have to be in there so it would be a
mess to to keep up to date so I think
I'd rather have a bit of a mess here in
the code and that way I only have to
deal with it and then the people who are
going to edit things in WordPress will
have things looking a lot more neat and
organized and it made it make sense for
me to be able to do this is going to be
a pain now but it's not going to be that
much of a pain later because these
aren't going to change like ever but
we'll have you know students student
workers editing these things and you
know people that don't have necessarily
that much experience so it'd be easier
if things were more straightforward for
them so that's why I've decided to do it
this way instead of the other way it's
gonna make our file here a lot bigger
but I just I don't really see any way
around that right now all right so let's
give this a test here so let's see
nursing so we already have this data in
yeah I think we have this data and I'll
have to check on the slugs and make sure
we have the proper slugs but we should
be able to pull some of this in so let's
go into our hope let's bring this back
and let's make a component now called
major all right so we make this
component called major and I did a test
component a little while ago
I think I can just copy this and paste
it in a major and it should work
for what we don't want to do now we
gonna need a new query yeah we're gonna
need a new query as well but this should
work we ID this props alright so this
was just showing the ID that's getting
passed in so I want more than that I
think what I'll need is what are you
doing for news here yeah we'll want
something like this
all right unless it's not gonna be news
it's gonna be major and we're gonna have
to change this query this would be major
major major clearly I suck I used to
find it never used I well let's get rid
of it all right so with this query and
let's change it here major all right so
now let's go to where we have our
queries let's make one called major so
I'm trying to go more quickly than I
usually do because it has to be a short
stream I will get back to the lot chat
answer some questions before the stream
is over I just want to get something I
want to least do one test of this before
the streams over did we make ours called
major but I did oh well okay let's try
I do you need that one and news yeah
so basically need the same thing as the
news query but we're gonna put it in
major and we'll name this major query
I'm gonna double-check directory alright
maybe we maybe we need this to be plural
majors when I details content I don't
think we're gonna have an excerpt to
this I don't think we brought it in and
I don't care about the date okay that's
this is I think all we care about right
now all right so we have our query ready
we have our page ready our component I
don't care about console logging this
and let's see and we're ringing the
right thing in here alright let's see
see if we can get this to work oh I know
we need to check our our slugs to see if
they match up in WordPress so I have
WordPress open here I need to log in
again but we should be able to check so
I guess I'll search I didn't bring
theology in whatever again
this room says
all right we'll just have to change what
we're sending in business all right did
this come in as maybe physics classes
so I guess this came in differently than
I expected let's see if this one is more
what I'm expecting
mmm-hmm Thanks
all right let's change our slugs in
oops let's give this so I miss clicking
let's go to our screen options and slug
so I can see it and I just wanted to say
economics and we probably should double
check that
I'll let that load this can take a la
economics and let's change this one to
counting
let's check this go to undergraduate
academics I think that's where we want
to be all right we're okay on time not
too bad
and our major programs economics and
accounting we should have yep
okay so economics and accounting yet
they have the URL structure that I
expected them to have and good all right
so we're trying to pool I suppose this
content I'm not worried about this
content it's basically just this that I
want to pull right for right now
then all have to decide with my boss how
much of this we want to keep or we even
what format we want to keep it in all
right so now we have the right slugs I
just need to change up the slugs in our
code to match so let's go back to our
server and we'll change
theology to economics and will change
nursing to accounting for those of you
who really love alphabetic order sorry
about that
all right so let's see if this works I
wonder I don't know if I have to restart
the server for this to work we'll find
out in a second
I'm on here we go local I was giving a
refresh and let's try Co economics
okay I might I'm gonna have to refresh
this
does anybody have the location stuff
activated on Facebook where it tells you
when nearby people are around so some of
my co-workers have it activated and it
always tells me when I'm sitting my
office like say hi to this person
they're nearby and he's like of course
they're nearby they work in the same
office as me I guess I should turn it
off Tommy property edges have undefined
all right so it looks like we weren't
getting the data that we wanted yeah
all right let's check out what we did my
passing the right thing yeah I'm passing
economics I'm passing accounting all
right and then within our component yeah
we're trying we're grabbing the ID it
should return the ID so our ID should be
in frogs and then we're passing this ID
to our query
oops I forgot to change the name of this
component major major oh so simple it's
easy to forget uh let's see
guess it didn't matter much
yeah it didn't even matter at all right
because it was still going here let's
see I see there's some questions in the
live chat I will get the live chat soon
okay ver Niq thank you for correcting me
I don't know why I thought it was it was
different
anyway I just I'm glad that I got it
right and thanks thanks again anyway
thanks for watching - I hope
everything's going well with you alright
data major edges maybe it's majors let's
try that out
yeah that was it I just needed to put
majors yeah alright cool so we have
economics courses and then we'll have
we're gonna have here accounting
accounting great we have a counseling
now let's try to go to a page that we
have with our next router the way I've
done this it should work our next router
should still work for anything we've set
up as its own paid so this test graph QL
page should work still
okay cool I'm assuming that's what we
wanted to do here yeah we did we
hard-coded that in great all right so so
far this is working well not an ideal
situation because I'm gonna have to put
a lot of these in the only other thing
that I wanted to do is to do something
like this and we can test this out very
easily is I want to say if we have major
economics I wanted to do the same thing
basically so let's save that and restart
this and then
awesome and that works as well let's
just verify that the the first way works
- cool I was actually I majored well
actually the school I went to you
couldn't major in economics you it was
like a triple thing all put together but
economics is one of the things I studied
alright cool so hopefully you can see
how some of that worked now we will be
able to keep the old URLs working but
still have our new URL structures so the
URL structure that has like major and in
economics that one is going to be what
we use for all the navigation in the
site and then for any old links this
will still work I think I don't know
it's it's a way that works I can just
move forward and just grind out all this
you know just play some music and just
start copying and pasting and changing
things and I should be able to get it
all finished you know in an hour or less
yeah make it work made your ID
oh yeah hard thank you we could
just put in the major ID so yeah let me
do that now that's yeah that's actually
a lot better so just like we're doing up
here with a News ID instead of passing
in economics manually we're going to
pass in these params from here and let's
save that and test it actually let's
test that with accounting right now I
sort of verify that I do in fact have to
stop and start the server when I do that
david says remind yourself Jesse
overconfidence is a slow and insidious
killer they could I think David didn't
you say the same thing in the last
stream I do think it was the last stream
I mean it's good advice all right
awesome so it does work excellent
economics yay all right great
Wow can't believe I got that Harsha all
sisters might remove that extra heading
in the component yeah yeah we'll remove
that too that was just for some testing
I was doing earlier so we won't we won't
have this heading this was just to
verify I don't even remember cuz I was
obviously wasn't testing this component
I pasted it over from a different one so
I was testing something and I left it in
there because it was a component that
was never gonna be used I was just going
to delete the whole thing all right so
let me now go to the chat I'm gonna
answer as many questions as I can before
my new intern shows up and so it if the
intern shows up and I'm not done yet
then I might not get to all the
questions about do my best
three-one says when tech experts have
problems it makes me feel better it
makes me feel good that that that
implies that I'm a tech expert but I
really don't consider myself a tech
expert but it still feels good to have
that imply
John Hanson says famous words have been
spoken this should work yes sometimes
when I say this should work it doesn't
work but in our case it actually worked
exactly like I I thought it was gonna
work so does not happen all the time but
it happened today which is great we
didn't have that much time for
troubleshooting Brooke asked if there
was a stream yesterday there was not a
stream yesterday I was I did a little
bit of work from home yesterday I wasn't
feeling well over the weekend I'm not
sure if I had food poisoning or the flu
just in case it was the flu I didn't
want to come in here and get everybody
sick so I thought I better just used to
work from home
her heart said can't believe that date
is well-formatted the old style sheets
is working fine in here - yeah can you I
it's amazing I mean this this formatting
is really good like no I mean this is
compare if you hadn't seen some of the
stuff we brought in earlier it might not
look really good to you right now but
for sure compared to the other data that
we brought in this this looks great
which is good these this I think is one
of the things that we're going to be
able to just bring it all in and just
let it go as is at first and this will
be adequate and then we can add on to it
as if we get everything else finished or
even after we launches we had half time
yeah so that's going to be the idea for
every page except for the home page the
home page we're going to put as you know
a lot more effort into because you know
way more people are going to see the
home page than any interior page so we
want that to look nice and if you go
into an interior page you want info so
as long as we have the information there
I'm okay with that we can always add
something that looks nice a little bit
nicer later on roller roller since I
just got here what are you making all
right so just a quick recap I was using
next Jas with reacts next comes with a
built-in router but I needed to do some
things with the URL structure because
we're migrating from an old site and
need to keep the old links working I
needed to do some things that next
doesn't do by default but we already
kind of had some we had some custom
parameterised routing set up anyway so
we just kind of extended that and was
able to we were able to keep the old
URLs route them to where we needed
and so that's pretty much it it didn't
it didn't even take us that long now I
did give it some some thought beforehand
and as to how I would do it but it all
worked out
John Hanson says is it possible to pull
the IDS needed for the page routes so
you need to only write one function I've
been thinking about that so here's what
I
all right here's what I thought and I
think I explained this a little bit
before but I didn't really do a great
job so let's say I just did this and had
let's say I D what would happen then I
mean it assumed I have the right stuff
here as well but what would happen then
is this would make the the next routing
it would overwrite everything
none of the routing and next would work
so what I would need to do then is make
sure that every page that needs every
page that a user would go to that would
have a URL that would just be slash and
then something and no slash after that
would need to exist as the same post
type in WordPress
you can't currently search for a string
in multiple post types at the same time
with the WPE graph QL plug-in there was
an issue open about it it's something
that would be nice to have but right now
it's something that would take a lot of
work so instead of trying to do PHP
which I'm not great with and somehow
make that happen with the plug-in we're
using this is easier it's gonna be lets
say uglier when you read the code but
it's definitely going to be an easier
solution a faster solution ideally what
I would like to be able to do is do this
and then search but as I said before
that is gonna make things messy in the
admin panel for WordPress so I brought
in you know so right now we have things
separated out a post
we'd end up having is a lot of stuff in
here as like pages and it would query
whatever the string is that gets passed
into the as the ID from the URL it would
query that and it would look in all the
pages for that slug so we would just
have a lot of different pages and I
don't even know how many pages use this
but I'm pretty sure like the privacy
policy so all the majors have it the
contact us privacy for policy directions
non-discrimination I don't know this it
consumer information see it's not even
consistent so we have consumer
information has it but then also we have
page within consumer information so
basically what would happen you know
this sites been added on to over the
years so we just have a lot of variety
so I think this way is gonna still let
us keep the custom post types as much as
possible but still give us a way to time
manipulate the URLs a bit when we need
to pretty easily
so anyway alright John John said I get
it you got to do what you gotta do yeah
this is definitely one of those you got
to do what you got to do situations here
met with my boss last week and he was he
said no we got to keep those URLs and I
just said okay I'll figure it out
so I didn't work I didn't really work
this weekend but I was thinking about it
all weekend so I guess I've come up with
a solution I just it's a trade-off I
came up with several solutions and they
all involve trade-offs this one seems
like it will work out the best
considering everybody that's going to be
working on the project and what our
needs are alright
so I think I got through all the
comments questions so I'm right on time
here and yeah so I will be back tomorrow
I guess maybe a Friday you back around
1:00 I don't know if 12:00 is a better
better time maybe I'll try to do 12 12
normally like my lunch break but I could
always take a lunch break like earlier
or later not a big deal to me but I will
be back and hopefully I'll have any
issues sorted out with my streaming so
we don't have you know the craziness
that we had today let's see if anybody
if anybody's really knowledgeable about
OBS which I'm using for streaming and
you had or if you know of any articles
or anything that can help out without
with that let me know I'm gonna try to
look up some stuff test out some
different things okay
all right it looks like 12 is is a good
time for some of your saying that in the
live chat okay alright maybe I'll try
for 12 then yeah you know there's
there's actually way less of a chance of
me having a meeting at 12 since it's
normally everybody's lunch hour so maybe
it's not such a bad time okay I'm gonna
wrap things up here thank you so much
for your patience with all the technical
difficulties we have the beginning of
the stream and thank you for your your
help as well in the live chat and it's
just it's really cool everybody being
here especially all of you that stuck
through all that stuff at the beginning
it was like almost half the stream I
think was just taken up with you know
trying to get the stream working
properly
alright that's it for me I'll be back
tomorrow and until then have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>