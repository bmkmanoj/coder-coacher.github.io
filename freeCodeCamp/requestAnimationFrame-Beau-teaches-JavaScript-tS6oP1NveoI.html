<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>requestAnimationFrame() - Beau teaches JavaScript | Coder Coacher - Coaching Coders</title><meta content="requestAnimationFrame() - Beau teaches JavaScript - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/freeCodeCamp/">freeCodeCamp</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>requestAnimationFrame() - Beau teaches JavaScript</b></h2><h5 class="post__date">2017-05-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tS6oP1NveoI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in my last video on animation I
demonstrated how to create an animation
using set interval and element animate
in this video I will demonstrate another
way called request animation frame this
way of animating is similar to set
interval but is more optimized for
animation the benefits of request
animation frame over set interval are
the browser can optimize it so
animations will be smoother animations
and inactive tabs will stop allowing the
CPU to chill and it's more battery
friendly the element anime method
discussed in my last video is simpler
and has better performance than
requestanimationframe however it's not
as widely supported yet so let's see
what this cars gonna do if you look on
the side you'll see what happens when I
hit the toggle button it starts this
animation and I see it just repeats but
if I hit the toggle button again it
stops the animation and then I can press
it again to start it again or stop it
again so it's all happening because of
this window that requestanimationframe
this method tells the browser that you
wish to perform the animation and
request that the browser call a specific
function to update an animation before
the next repaint so in this example it's
calling the step method and the number
of callbacks is usually 60 times per
second but will generally match the
display refresh rate in most web
browsers and you can see in the step
method right here
the callback it method is passed a
timestamp which is the time the callback
begins to run so let's actually go
through the whole thing you can see up
here we have the button toggle animation
and it's going to run this function down
here toggle animation so this is either
choosing to start the animation or stop
the animation so if that toggles off
then we're going to set it true and then
we're going to run the animation window
that requestanimationframe and then
we're going to call the step function so
that's how the step function initially
starts however if it's already running
we are going to else we're going to set
the toggle to equals false and we're
going to cancel animation
frame so if you call this method cancel
animation frame and then put in a stop
ID it's just going to stop the animation
so this stop ID comes from up here
whenever you call window dot
requestanimationframe it's going to
return an ID and then if you call cancel
animation frame on the ID it stops the
animation so let's go back up to the
step function like I said it's going to
take a timestamp and then you can see
some of these in the variables were
initialized up here if start has not
been assigned yet or the progress is
more than 4-hundred start is going to
equal timestamp so progress this is how
we're going to determine what pixel we
want the square to be at on the screen
so we're just going to take the
timestamp that was passed in minus start
and you know the times that will always
be increasing so when we do timestamp -
the start which was the first time stamp
it's going to slowly be increasing as
the timestamp increases now that's going
to be milliseconds so if we divide that
by 10 it will equal the number of pixels
we want and we're going to add 50 just
because we don't want the square to top
start at the very top of the page we
want it to be below the button and then
we're just going to set element that
style at top to equal
progress + px' so the number of pixels
that we've gotten from this progress
variable and then at the end of the step
function we call it again with the
window that requestanimationframe and
passing step so this is just going to
keep calling over and over again and
every time it's called it's going to
pass in a new timestamp and that's
what's going to increase the number in
the progress which will increase the the
top style and will slowly make it go
with the square go down so let's see
that again C is just going down and then
when we toggle it it's going to call
this cancel animation with the stop ID
and it's going to stop well thanks for
watching that's request animation frame
don't forget to subscribe and remember
use your code for good</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>