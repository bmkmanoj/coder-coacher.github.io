<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ionic Caching Service | Coder Coacher - Coaching Coders</title><meta content="Ionic Caching Service - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ionic Caching Service</b></h2><h5 class="post__date">2017-06-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zIE8aSw40eY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone what's up the assignment
from this tactic and the ionic academy
in this quick win I will show you how to
set up caching for your ionic app pretty
easily because in general your app
doesn't come with caching out of the box
so we have to use a little package but
it's really quite simple to use it and
I've already started a blank new app I
haven't changed anything so far so let's
go ahead and add our package which is
ionic cache and it also uses ionic
storage so if ionic storage is not yet
installed for Europe make sure to also
install ionic storage but what most apps
currently ionic storage is already
shipped out of the box so we don't need
to change anything first of all we need
to put to import to our app module
because we want to make HTTP requests so
of course we need angular HTTP and then
we also need our cache module perhaps
the auto import is working for me today
so add HTTP module and now also add the
cache module now of course it's not
forward so this means we also have to
add another import which comes from
ionic cache okay so this is i-4
including it to our app nothing has
changed so far now we can use a few
different options of our caching so the
first is to set some global caching
using the cache service so again from
ionic cache well come on
okay whatever we put it into our
constructor and now we can use it
perhaps use it inside the platform ready
because if you also install the SQLite
tag in the cache service
we'll use ionic storage and ionic
storage we'll use SQLite and it will
only be ready once our platform is ready
so make a short story long story short
put it into a platform ready so now we
could for example set our default time
to live which means how long will our
cache response eval it for example this
would be one hour if you multiply it by
12 you get cash read aloud for half a
day you can always change this for
specific requests later but it's a good
idea to also set a general caching
policy up here something that also quite
interesting is set offline invalidate
and we set this to false and this means
if we have a cached response and our
devices offline
we won't invalidate it so this means we
can actually use our app offline and we
will still be able to get the results
from our cache even if they are perhaps
invalid already because the time to live
is over but we can then use this result
in the offline case which is really
quite amazing actually
okay so these are some settings you can
make at the top level and now we will
build a simple view to load and display
some data and experiment with the
different options we get so we need two
buttons in our example
I'm full and the first button will load
some films and we will use the Star Wars
API perhaps you know it from my crash
course the second button will be used to
invalidate our cache so we can actually
see how it works later in the Lee date
cache and of course this needs the color
danger because it's dangerous and below
a list nothing really special here and
we will iterate over an array of items
and it will be observable so we use the
I think pipe and just print out film
dodge and I think it's title later
additional we add an ion refresher so we
can use pull-to-refresh
and on ion refresh we will call for
reload so the event and inside we put
the ion refresher I think its content
and the refreshing text if you like to
reload from API okay I am refresh our
content closed I are refresh our clothes
and our absolute look like this we can
use it but of course we haven't defined
any functions by now
so now we can go to our home TS you can
close this and add the functions we
already created inside the view so we
got four three load we got load films
and we also get invalidate kit okay fine
first of all we need to put some import
here so we need HTTP because we make
HTTP requests always wrong
but I will use it like this okay then we
need our cash of course
cash which is the cash service and we
also want toast to be displayed once we
load from the API so this is just for
our own debugging so we at the toast
controller which is from ionic angular
all right so two more variables so our
films will be inside observable but type
any whatever it will be and make sure to
import observable as well from whatever
rxjs solvable I think and now we get to
something we need for our caching so we
define a fund key this is optional but I
will show you how to use this in the st.
so once we want to load our films we
first of all need to specify our URL so
this should be HTTP swappi don't Co
slash API slash fills then we need to
construct our request so that is still
pretty much the standard which we are
used to and we also need to map our data
and we will return to jason and also we
need to access the result array directly
here and now we also put in a toast
message here so we know that now we have
actually loaded data from our HTTP
requests and not from the cache so we
add
a message and it will say new data from
API loaded
perhaps for a duration of flag I don't
know two seconds so now we will see once
we load from the API and once we are
doing it now and now we make use of our
caching and just like normal we could
use it like this I think it should
already work now let's see because this
is just the standard way and we load
films and we see the title of our films
of course we should call toast dot
present so we know that we've load data
from the API and most of your requests
will look something like this so we
loaded new data loader from API if I hit
it again it will always reload our data
and now we want to add caching so we
don't set it to our request now but we
use our cache service and call load from
observe the law and we can pass in some
parameters the first two are mandatory
the second to our optional so first of
all this is the key under which the
response will be stored and a good idea
is to use just our URL here second be
observable this is the actual request
and now we already kept cashing in place
so this is really super simple I call it
once new data loaded never hit it again
it's immediately reloaded and we don't
get this again and we can go to our
index dB and wait a second come on
give me a second
I can clear my sight data once and now
it should work perhaps if i refresh so
let's see we load films and it should
reload I don't know somehow this
debugging tool is sometimes not working
like I want to but now we got it and
that we can see that another key of our
URL
we got expired key we got non-group key
we'll data type and we got the actual
value from the Star Wars API and this is
start inside our ionic storage now so
all the time it will be just load from
there without really doing anything
besides using our package okay let's go
to the next step and we add our film's
key now so we use this dub films key and
once we hit invalidate cache we call
this dot cache dot click group of this
dot films key so now we are able to
force unload or clear our storage let me
do it once again open it and come on
it's not working like I don't know why
it's not refreshing you so the index TV
should be refreshed now but it's not
showing anything I don't know so we see
we got the object we're loading it from
the storage all the time and if we hit
invalidate cache and refresh we see the
entry is gone and if we hit reload no we
see we made a new request to the API and
it's back in our storage so by using
this group key we are able to directly
change or invalidate our cache because
now the entry got the group
and we can clear specific elements of
our cache by using create group with a
key defined at the time we load the
observable and put it to our cache and
then we can remove it later okay more
we've specified our time to live to be
12 hours and perhaps you say I don't
trust you so this is not nice but I can
understand so let's set our time to live
to 3 seconds and we can pass it in as
the last parameter here so I think we
need to clear all storage once again
let's wait for it and we load the films
it's loaded again all the time cached
but now you see three seconds are over
and it makes the request again so we can
overwrite the general settings to have
specific time to live for our own
request that might perhaps need less or
more caching now the final part is once
we use our pull-to-refresh
we want to make a force reload of our
API call so for this we will put in
refresher here and once we call for a
reload we will call load films and pet
in the refresher because for once then
we know we need to false refresh and
also we need to call the refresher
complete method once we are done
so if refresher is set we need to do
something and force reload and otherwise
when you just make this request I have
you tried to implement forced to reload
with kiya group and calling them and
making the request again but the result
was not really working that well
some alien Cronus tasks inside the cash
was not perfectly working for me so if
you encounter any problems that your
cash is not cleared or the new Lu is not
written something like this make sure to
check the as in Cronus stuff here and if
there are any problem so back to our if
block we want now to make a force reload
and therefore we set the delay type to
all okay then say really anything but
now we assign something different and
it's not a lot observable but load from
delayed observable and we will pass in
almost the same stuff like before again
we can use our film key if we like to
now it is we can use the custom time to
live and finally we can add a delay type
as a string and we use our delay type
and the delay type all means we will
always reload or make the request again
even if we already get the data inside
power in a cache and this means that in
this case we always make the HTTP
request and catch the result afterwards
now we only need to subscribe to our
observable here we don't need the data
but what we need is to call our
refreshes to complete so in that case we
are then done back to our app again load
films making a request load films again
no requests invalidate kiss and Lourdes
films requests no cached and now pull to
refresh and request was made and it will
happen all the time
once you use the pull to refresh and it
will be written new to our storage and
it's then cached for later
so I hope this gave you quick
understanding how you can implement
caching for your ionic app using the
ionic cache make sure to check out the
github package also for more information
so there are a few more options on to
catch different result of your calls but
these are the basic functions you need
to catch something to false reload it or
to clear it and if you like the quick
wit make sure to subscribe to my channel
and also go ahead and check out the
ionic academy comm for more ionic
training and everything you need to get
started with ionic and build your apps I
hope to see you next time
have a great day and enjoy your coat
goodbye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>