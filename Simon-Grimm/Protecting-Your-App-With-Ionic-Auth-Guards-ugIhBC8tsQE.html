<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Protecting Your App With Ionic Auth Guards | Coder Coacher - Coaching Coders</title><meta content="Protecting Your App With Ionic Auth Guards - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Protecting Your App With Ionic Auth Guards</b></h2><h5 class="post__date">2017-04-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ugIhBC8tsQE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone what's up to the Simon from
deaf tech tech today we will take a look
at something quite interesting to
protect your ionic app without guards so
first of all I have already created a
blank ionic app you can do the same it's
pretty much simply running ionic start -
- me - off guard at blank so you got a
new blank we will take a look at
lifecycle events today so these are
events fired from the class for example
once your view is loaded once it enters
once it wants to leave there are
different events and we will take a look
especially at these two or especially
the first one which is ion View can
enter an ion view can leave so from
angular 2 there's this concept of nav
cards which are there to protect your
pages from accessing them and we can use
this concept right inside our ionic app
to forbid access to specific pages based
on let's say the authentication state of
a user so we got the app ready let's
open the code editor and dive right into
it first of all we see we have only one
home page and we need some more stuff
right here so go ahead and create these
first of all we create a second page
where we can navigate to and then we
will also generate a provider which we
call auth service but we're not actually
using a real back-end here or we can
still fake this pretty good so after
creating those two files you have to
make sure to add them inside your app
module so go ahead and add the second
page right here
sorry what's wrong okay yes well okay
that should work and then we also need
our off service so put it to the
providers and make sure to import it up
here all right now we can go ahead to
our servers and implement the basic
functions that we need first of all we
don't need any of this we're not making
HTTP coils right here and this can go
away as well so we need three functions
first of all we need a simple login
function then we need a private variable
which will hold the state of our users
so is locked in and in the beginning
this is simply false
if we lock in we say that our state of
logged in is now true and moralists the
same is lock out but in this case we set
it to false very simple if you have a
real back-end of course these are spots
to make your call to the backend check
if the user is verified get the response
and only then set them to true and
finally we also implement a function
which can check the state so
authenticated and this will just return
our locked-in state all right
there's nothing really special here it's
just a mock implementation of our
service but it's a good starting point
for your app now let's move on to our
home HTML which is the first thing we
will see so let's first of all display a
head up so we can see
if the user is authenticated and we will
implement the function soon we want to
Center it and in this case is the user
logged in the second is just the
opposite
just leave it user is not logged in okay
this is just for us to see the current
state more clearly now we need a few
buttons so go ahead and create some ion
buttons and the first one will have the
primary color and on the click event we
want to look in our user and we need two
more of them and this one is a bit
dangerous so this is them lock out user
and finally we want to actually see our
enough guards in action and this is why
we need the third button which will push
the next page if possible now let's see
yeah of course if I've dedicated is not
yet implemented in our home tears so we
go ahead and create this function right
inside our home ts and it's
authenticated needs our authentication
service so we put it to our constructor
import the off service and now we can
just return this dot all service dot
authenticated and perhaps let's see it
might be already loading now okay that's
a different kind of error
now let's implement our three functions
so we had a login user and we also had a
logout user and again here we can only
use our author of this thing called the
Lockean function and same year but now
log out now the interesting part comes
now now we want to push the next page
which is the second page so we got the
function and we say this does not
controller dot push the second page and
this is just like always but now we want
to actually catch an event that might
occur here and in case of error we will
display an alert view okay we need to
import the alert controller as well from
ionic Angela and we will put it here
alert control controller now we can
create an alert we need to use this dot
alert controller to create and we pass
some information like a title which will
say you cannot entry this page and
subtitle which might say you shall not
pass and of course the user will have no
other options in this case then to say
okay I seem to have no access here
alright so let's see why ii is not
working okay so I investigated a bit
because just before this video my ionic
CLI changed to Version three so there
are some minor changes
in case you're still on ionic to make
sure to import your created second page
in the declarations and entry components
but if you're also already on the third
CLI you don't have to import it anyway
here and your second page will look a
bit different and we'll have this second
module and also there was a tiny back in
here so initially it was ionic module
but we had to change it to your ionic
page module to work alright if you are
still on the old CLI it will look a bit
different this file won't be here and
inside your home component you would
push the second page but with ionic
three actually you just specify a string
and the magic underneath will grab the
name of this class and display this
class alright so let's get back to why
we are here this is our app users not
logged in users logged in users not
logged in okay we can change that it
works perfectly next page pushes our
second page which is exactly what we
want
now we come actually to the naff guard
okay so what we were here for is
protecting our second page so we just
want to allow people to visit this page
if they are actually authenticated and
therefore let's go ahead and import our
off service again and we don't need the
ion viewdidload but we need a different
life cycle called
ion view can enter now and this life
cycle event
specifies whether people can enter this
page or not very simple and if we return
simply true everyone can enter if we
return false nobody can enter so what
we're going to do is we return the off
status of our thermos
so this means only if you're currently
authenticated you can enter this page
and if you're not logged in you see you
fail to navigate now let's log in and we
can get to the same page actually there
should be let's see okay well actually
this okay yeah of course we should also
call alert present to show the alert now
let's load it again and once it's there
first of all we are not locked in we
want to push and we get the error
because we are not allowed to access
this page we log in and we can access it
and back logout not a lot okay so this
is quite a simple and not often talked
about a life cycle event but it's
actually pretty powerful to protect
access to your page so once you're in
this page you can now be sure that
you're authenticated and make all the
stuff and display everything
authenticated members can see but if not
you already check it before actually the
stuff in this page is loading so from
your home page you can catch this event
and do whatever you like to do it's set
in the beginning you could also use the
can leave event which is quite the
opposite so once a page wants to leave
you can do the same as I on you can
enter but this is more for let's say you
have a forum and some fields need to be
filled out but I am you can enter is
perfectly for building some
authentication all right if you enjoyed
this video make sure to subscribe to my
channel or join the ionic academy for in
the courses videos and community so stay
tuned until next time and have a great
day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>