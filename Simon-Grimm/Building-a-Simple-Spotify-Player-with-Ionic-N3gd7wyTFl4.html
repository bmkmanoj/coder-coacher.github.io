<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a Simple Spotify Player with Ionic | Coder Coacher - Coaching Coders</title><meta content="Building a Simple Spotify Player with Ionic - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building a Simple Spotify Player with Ionic</b></h2><h5 class="post__date">2015-08-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/N3gd7wyTFl4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone what's up this assignment
from deaf tactic today I will show you
how to integrate Spotify inside your
ionic framework app so let's start with
a blank ionic app once our app is
completely initiated we will have to
install ng Cordova which we will use to
perform the OAuth process with Spotify
and also an angularjs prepa for the
Spotify REST API so this will give us
everything we need and also you can
start to create your own app on the
Spotify developer portal so go to your
applications and create your app and
what you have to take care of at this
point is you want to add localhost
callback as a redirect to our e ok so
once you've done this you only need the
client ID inside your app but we will
come to this later
alright so our app is ready let's open
it and also let's install ng Cordova and
also angular Spotify as I said this is a
wrapper for the Spotify Web API and
there are a ton of useful useful
endpoints you can use it also offers a
login but this one was not working for
me with inside the ionic app so that's
why I just used ng Cordova because ng
car
makes life a lot easier and it's easy to
use ok so inside your fjs you can also
start let's give it the right name this
is the my Spotify and next to ionic we
want ng Cordova we want Spotify and we
will also have a file with our
controllers so let's already import that
one you can create that file inside your
J's folder so create the controller's
j/s and we come to this point later
alright
also inside your index J s make sure to
load the control SJ s and also above the
Cordova line make sure to load ng
Cordova and it should be yes this ng
Cordova j s and also the angular part if
I also this should be yes so the ng
Cordova j s and also the angular Spotify
min joyous and the controllers j s
alright so make sure to create your
Spotify app because very soon we will
need that key but first of all let's go
to our FJ s our app will consist of two
states so we need a simple config for
our state's
so go ahead at the estate provider as a
dependency and also the URL root of
provider all right so you should always
have this fallback state so if no root
matches just go to slash and the state
provider config as I said consists of
two states the first is the list state
this will be our basic state so the URL
of this will be slash so default one it
will have a template we will install or
we will create this in a second and also
it will have have a controller so this
will control our Spotify lists in
general the second state is for a
specific playlist so this is the
playlist state and inside this state
again we have a URL but this time the
URL is a bit more complicated so let's
give it playlist and we also need three
parameters we need to pass to this stage
so one is the list ID of the selected
list one is the current user ID so we
could use the root scope or any service
for this but for now we will just pass
it here and also the name of the list
but this is very straightforward as well
again we will use a template file
and also a controller okay that's
everything for all app J's so let's go
to our index remove all of that stuff
and make sure to give it the name of
your app and inside it's very simple
because at this point we only need the
navbar which has simple styling let's
give it the Spotify green and also
inside the navbar we obviously want to
have enough back button
so once we go to a player's we
automatically will get this back button
you know from iOS or Android all right
that's the navbar and our views will
just get rendered inside this ion nephew
so there's nothing more we need to do
inside this view but we could start to
also add our needed files so we need
templates folder and inside the
templates folder we need the list HTML
and we also need the playlists HTML
alright yes so it's not playlists it
should be playlists because this is a
specific list playlist HTML perfect now
let's go to our controller
first of all find the module so my
Spotify dot controllers one we've
imported inside our fjs and an MTA
dependencies array also we will make a
dummy implementation for the playlist
controller or again this should be the
playlist controller I'm sorry this is
just for one playlist okay
and just do what we need at this point
so we don't get any arrows but the
second one is more important one right
now so this will be the lists controller
now it's plural and inside this
controller we need to login to Spotify
grab the top and make a request to get
the playlist of a user so what we need
inside this controller is the scope we
also need the ionic platform to catch
the ready event we need Cordova or ours
and finally we need Spotify which is
from angular Spotify so first of all
make sure to define your client ID here
I will paste mine in a second and also
we will have a scope array of playlists
which is empty at this point okay so
what we want to do is once the ionic
platform is ready which means we can use
the Cordova plugins we want to check if
we got any star token so we try the
local storage get item and let's say it
might be under Spotify totin so if this
star token
that somehow exists we want to use this
totin and also update the playlist info
in the other case we just want to
perform our login and this is what will
happen once we start the app the first
time so this is the perform login
function and this is the one we're going
to call if we don't have any start own
we will come to this point in this thing
so inside perform login we need to call
Cordova or dot Spotify and we need to
pass the client ID and also an array of
permissions we want so there are a lot
you can find them in the developer
console or area or whatever for now we
want just to read the private data of
the user and we also want to read the
private playlist of a user and once this
is ready
we get some result hopefully and at this
point we can say window Dutch local
storage set item for the Spotify total
and what we want to set is the result
dot excess total so this will store our
earth tone in the local storage for now
this is just a simple use case so yeah
don't blame me for this please alright
so this is now the first time we use the
angularjs prepa for the Spotify app here
and we call set off token and again this
is result dot access token so this will
tell the API
what's our Oh Elton and from this point
we can use it and have fun with the API
also let's catch an arrow
we never know
so just in case something happens or
goes wrong all right so okay yeah I can
copy this so if we can get this totin
from the local storage we obviously also
want to tell Spotify what's our total
right now and now we need to call the
API and update the info okay so what
will this do
inside update info we will just call
Spotify get current user to get some
more information about the current user
because we need the user ID later on to
get access to a specific list of a
specific user so we just call get
current user and we will also handle the
arrow here oh okay so if we can't get
the current user which means maybe
something went wrong we're not locked in
anymore
we should try to perform the OAuth login
again at this point and also we want to
update the info once we have set the
auto for the spotify RP which is up here
so when we get it from the local storage
or when we've just looked in the first
time all right once we got the data from
the user we want to get a user or get
all of the user playlists
and at this point we need the user ID so
inside the gate current user promise we
call scope cake user playlist with the
data and user dot ID so finally inside
get user playlist we only need to call
Spotify get user playlist I really like
this API it's really easy to use or this
wrapper in general so thanks to the
person who developed it alright we want
to get the user playlist for a specific
user ID and we get some data back and at
this point we can use our playlist array
and just set it to the items of this
array so the last thing we need to do
right now is open the lists HTML and
craft a little view around what we have
just gotten from the API so as I said
these will be my playlists or the
playlists of the user
and inside this view very
straightforward ion content with some
head up heading and also inside an ion
list this is this code completion
doesn't work at all I'm not the way I
wanted to work if you can point me to
any good code completion for atom yeah
let me know so as I said we got a ion
list and we got iron items and we want
to repeat over every list in our
playlists
and we just want to print the name of
the list this will be enough at this
point okay so we obviously also want to
click on a list and come to the tricks
of that list so we need the UAS Rev
which will make us go to a state and we
want to go to the playlist state
playlist as it is defined here and we
need to pass those parameters so list ID
user ID and list name and how we can do
this very simple we make an object and
all we have to do is set those
parameters inside this object and we can
get all those information from the
current list object we got and the name
of the list the list name all right so
at this point you should be able to run
your app so make sure to paste your
client ID inside here so for whatever
reason perform log in and update info
should be before this ionic platform
ready because at this point I got some
undefined error also what I needed to
install was the in-app browser plugin I
thought this was already included but
just make sure to add the Cordova plugin
for the inner browser okay so there have
been minor problems so make sure your
name of your scope variable is correct
at this point and also make sure to just
get data ID not data dot user ID I'm not
sure once I tried this it was correct
but somehow this might change so make
sure to only use this one
all right so and when you start your app
the first time you will see the Spotify
out login dialog so insert your
credentials and once you're done you
should see all of your current playlists
and when you click on them nothing
happens so let's work on that and for
this we need to go to our playlists
controller and add some functions but
first of all let's fill the dependency
array we need scope and we need the
state params to get the past parameters
and again we need the Spotify wrapper so
how can we get the list ID and all those
parameters it's very simple we can just
use the state params dot list ID so if
we've specified those parameters here
like list ID user ID and list name we
can just get them through the state
params so as I said now we can just use
the rest of it and also we want to store
the list name in the scope variable
because we can show the name in our
header bar later on
okay as I said we also want to play some
audio at this point this is limited to
30 seconds through the Spotify Web API
but you can take a look at my post and
recommendations for what you can do else
so there's already a Cordova wrapper for
and Spotify SDK and with that you should
be able to really stream their complete
songs but for now we will be happy with
a list of tracks and also a 30-second
preview and so at the top we create this
audio variable and we will later set the
source of it and just start playing it
and also we obviously need the tracklist
which is an empty array at this point so
once we come to our controller we
obviously want to get the tracks of a
playlist so first of all we want to call
get playlists and at this point we need
the user ID and also the list ID and
with that data we can fill our tracks
array I hope data the tricks dot items
is correct now if not we all see it and
also we need some more functions to play
a track and this will be very
straightforward once we click on the
trick we get the track info and we will
set the source for our scope audio to
the track info dot track dot preview URL
and also just call scope audio dot play
and this should start playing the music
we also want
stop function so just in case we try or
we check if our scope audio source is
set and if that's the case we want to
pause the audio all right all right all
right
and yes we also need once we've stopped
the preview we need to play it again
from button so this is just the same
like stop but the reverse and finally
one more thing we also want to have the
possibility to open the trick directly
in Spotify because the API gives us the
correct link to or a deep link to the
Spotify app so with this link we can use
the in-app browser and pass the link and
say we want to have a blank view inside
our app so this will open the in-app
browser and you will see how this works
in a second so the most important part
is up here where we get the playlist and
set our scope tricks to this information
so finally let's go to the playlist HTML
and I'm gonna copy a bit of this I'm a
bit lazy now so the name is list name we
defined this as a scope variable and we
also got the ion list and we got I own
item but now we got the item in tracks
and we don't need this clickable link
but we want to have a cool list card
optic so inside this eye on item
we first want to have a simple tiny
image of a top image of the album and
this is very simple so all of this
information is inside this item you can
check what's inside but at this point
you have to trust me
yeah bit crazy but that's just what the
source is and also we want obviously the
name of the track and a bit smaller well
just say this is an array but we will
just take the first artist I'm so sorry
for the third the second and the first
artist is the best you know alright so
this is the avatar for our card and then
we got the bottom area we don't have a
real body of this card but we don't need
this at all so we just have these tabs
at the bottom of every card and inside
we will have two of them so a bit more
of styling
sorry so as I said we want to start a
track and we passed all the information
of this track at this point we also have
a simple icon this is all styling you
don't have to do this but I like when
apps look well not like at the
first time so this is our play preview
button come on no play preview URL yes
perfect
and as I said we want to have two of
them so the second one should call the
opens body five function inside and what
we need to pass is item track external
URLs dot spotty file so this is a
specific Spotify D playing and let's
give it a share I can and also say open
ends but if I all right this might be
enough at this point hopefully it's
working so again I mixed up playlists
and list obviously we only want to get
one playlist at this point and also we
forgot about one very important aspect
and this is right below the ion content
we want to add a footer bar Oh God
well whatever this is fine for now and
we only want to show this bar when our
audio sauce is set
so inside I'll remove this and remove
that yes yes I own food about yes this
is the food about and some styling and
we need this food to bar because we want
to control our simple player so we want
to call the play and stop function from
the Futaba so this is play and this is a
stop and obviously we need the ng-click
event so this will call play and the
second one guess what we'll call stop
and also we want to have a tiny icon
inside
sorry so play for play and for stop
guess what stop oh sorry
close this one all right
now it should be finished again let's
build so I hope you know how to use this
Spotify wrapper and how to use Cordova
or with the Spotify API and how to read
some data from the REST API at this
point because that's exactly what you
should have learned after this video so
let's give you the last try
I hope this is the last one we need
right now and maybe you have not done
that many arrows like I did because
you're clever so here are our playlists
let's go to discover weekly we can go
back we can go in so let's go to my
little training playlist and let's play
a preview of this song yeah that's
obviously the preview of this song
we can continue it we can stop it
and let's try the last function we want
to open it in Spotify and this page
appears and this gives us the option to
directly play this song inside the
Spotify app so this is the specific D
playing and that's exactly how you
contact the Spotify REST API how to grab
data and how to play a song preview
inside your Ione framework app so if you
like this tutorial come to my blog
subscribe to my channel and yeah leave
me a comment if you like</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>