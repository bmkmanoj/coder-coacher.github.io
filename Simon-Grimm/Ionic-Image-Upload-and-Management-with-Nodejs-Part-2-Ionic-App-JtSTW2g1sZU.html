<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ionic Image Upload and Management with Node.js – Part 2: Ionic App | Coder Coacher - Coaching Coders</title><meta content="Ionic Image Upload and Management with Node.js – Part 2: Ionic App - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Ionic Image Upload and Management with Node.js – Part 2: Ionic App</b></h2><h5 class="post__date">2017-10-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JtSTW2g1sZU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone what's up this assignment
from deaf tactic and the ioniq Academy
this is the second part of a two-part
series on ionic image upload with a
back-end so in the first part we've
developed a simple node.js back-end and
if you haven't gone through that you
should do it now the link will be below
the video and also make sure your
servers running so you should be able to
make requests like this to our back-end
and receive some images from the backend
now let's continue with our actual app
I've already started a blank new ionic
app and we need to install a few things
and generate some stuff so let's go
ahead first of all we need a provider
which will take care of all the backend
interaction we have then we need a page
I will generate the home page as well
because normally the home page comes
without a module file and now it should
have a module then we need also an
upload model so when we capture an image
we will show the preview to the user and
allow to add a description and finally
we need another one which is used to
show an image in full-screen now to
capture images we also of course need
some Cordova plugins so first of all the
Cordova plug-in camera to use our camera
and then we also need the file transfer
plug-in which will help us to upload our
image file to a back-end so install the
Cordova plugin file transfer as well
once this is done we just need to
install the NPM packages from ionic
native so install the camera package in
the file transfer package form ionic
native and then we're finally ready to
start our app
I will open it in a second but we can
continue already so let's continue by
changing this to homepage so we make use
of lazy loading remove the references
for homepage here as well and then let's
see where's the app there it is and
everything is fine so far next step is
to import the stuff we already got the
images provider but we need a few things
more so we need the HTTP module from an
angular HTTP and this goes right to our
import so we can actually make HTTP
requests then we need the camera from
ionic native camera and we also need
file transfer from at ionic native file
transfer finally add those to your
providers array and then we're fine here
now we've created a provider so let's
start with that one
remove this sorry and the provider
should take care of our back-end
interactions so we just need to import
the file transfer stuff works
automatically nice private friends for
file transfer and this can be removed as
well
so our current API URL is if you started
locally localhost 3000 if your back-end
is running somewhere else
of course change this URL and we need a
few functions first of all we need to
get a list of all our images and this is
quite easy
making a get request to our API URL plus
images alright let's see here we got the
routes so this will make a get request
to images again if you have the server
code you can see it in there as well
then map the result to jason and here
good the second one which is super
simple is delete image and this will
again make use of our route but this
time call delete on images we also don't
need the map actually and also two
images we need to append the image ID
which should be an image dot ID now the
actual hard stuff is to upload an image
with a given image and description so
our upload image let's start easy and
create the URL they start API URL plus
images so we're making a post request or
upload to this URL and then the target
path actually we don't need the target
path I think we can leave this out the
target path is our actual image then we
need another options object which is
file upload options ok so this one is
not automatically imported so let's edit
to the import and we can specify some
options one of the most important things
is the file key so our file key is image
and this is because for our post route
the multiple a kin is looking for
exactly this key to find the file and
that's why we use the file key image and
we can say stuff like chunk mode folds
perhaps not needed here mimetype this
should be multi-part form data just like
we did with postman and then you can
have some additional parameters and this
is where our description object goes so
the description will then be in the body
of the request and on the backend side
everything will be used fine now create
a new file transfer this transfer create
and then return this one file transfer
calling upload and then we need the file
URL which is our image we need the URL
and finally it the options so this is
actually all we need to do to transfer
our file to the backend now for we of
course need to make sure to get the
image capture read and pass the link to
you the upload image function but you
will see that this is super simple now
let's continue with our home ts again
this can be removed we start with the
function reload images and this will
also be called in the constructor so
here we need our just created image
providin or images provider yes there
are this an inside reload images we
simply call the images provider get
images subscribe to the result and once
we get data back we set our images array
to the data we get back from the back
end
okay so nothing special in here let's
implement the easy stuff first delete
image for an image is also more or less
the same call delete image with the
image subscribe to the data and then
perhaps call again reload images because
this is not firebase we need to manually
really reload the page to open the
full-screen image we need motor control
go ahead no import for me today whatever
so this will be open open image with an
image and this will create a new model
page so go ahead use the controller to
call create we don't need this but we
need the string which is preview a
little page and pass the image to that
page so we can use it on that page make
sure to call present otherwise your
screen won't show anything okay next
when we want to capture an image we
first of all show an action sheet to the
user because we want to allow to use
images from the photo library or also
capture images we need the action sheet
controller action sheet to control again
from ionic angular and then we can
create a new action sheet by using the
action sheet controller called create
and now
stuff so title select image source and
buttons will be an array ok first button
is text load from library and the
handler which handles the click event on
this button will then call our next
function take picture with a source type
okay so in a second you see how this
works so we call this dot take picture
if we want to use a picture from the
library and pass in from the camera
which we of course need as well oh this
is working come on never mind so this
dot camera and then picture source type
and now use photo library so this will
pass the photo library to type to this
take picture function where we'll
actually use the camera then we need a
second button of course it's copy this
use camera and this time not photo
library but camera alright okay so let's
see finally call action sheet present
and then we're good perhaps at another
one or cancel
chancel all right whoo
so we're very close to it inside this
function we need a little options object
which will then be passed to the camera
when we call get picture
so this expects some camera options
which we will pass in our options first
of all you could set quality I will make
this 100 the destination type okay yeah
this team nation type in this case this
dot camera that destination type and we
will use file URI which will resolve
your local URL on your device but this
is fine the source type is the one the
user has selected before and then you
could say something like safe to photo
album fault and correct orientation so
this should fix it back for Android I
hope okay so in the promise we will get
back an image path for the actual file
and we're not directly uploading this
but creating a new mobile page where the
user can then enter some stuff like a
description for the image part you have
a different use case something else but
this is very usual so we open an upload
modal page and as that we pass the image
path we call present and also what we
want to do is on the dismiss we want to
check when this model page was dismissed
if we have passed some data back and
if data contains reload so we will later
set this in our page when we
successfully uploaded something so now
our page knows it should reload the
images that's it here perhaps what is
wrong come on if there's some error you
might want to lock this out and of
course you can only use the upload on a
device this is not working in a browser
so yeah within our app you will actually
not see anything by now but it should
load no compound for homepage let's see
oh come on there's no home page no H no
home page here's the home page and
perhaps just restart the ionic lab
command so we can continue with a view
for our list and I promise after this
next step it will get a lot easier
perhaps let's see yes okay seems like no
have I quit this is my API not running I
think it should run
we will see in a second let's continue
with this so color let's make it primary
always looks good images so inside our
page okay to add something as a fallback
which is hidden if images length is not
0 no images found so this ball yes so
because we don't have any images this
looks very strange ok this should fix
the problem and now this should actually
be gone because we already have images
we just can't see them at the moment so
we will present them in an ion list and
we will put all of this into a sliding
item for all the images of our images
array and then we can craft the actual
ion item which is capable and on click
we call open image with our image so
this is the item and below the item we
can add an eye on item options button
the side right so we can swipe our
delete button in ion button I can only
cover most of the time danger and the
click event is delete image or the image
all right ion I can name trash trash yes
and that's it imagine sliding I on this
okay so back to the item we have an
image so let's show this and a little
thumbnail at the left side so items
start and here we can simply use the URL
which is inside the object remember
if you have seen the first part we set
this URL to be already correct
so nothing else is needed right here and
we got the description and perhaps also
a button to indicate some more action oh
come on
clear I can only item end whatever so
now it should be at the end of the
button I can name arrow forward and
that's it so yes there it already is so
this is just like we've seen here if we
would copy this URL in a new tab and
open it we see that we get this image
and we also see the description on click
we open them yeah
preview but it doesn't show anything so
we need to implement this preview
function and of course we need our
upload function and we will indicate
this with a tab button which is floating
above our content
on-click we will call the present action
sheet function right and we will give it
an icon perhaps I don't know camera
looks good so now we could upload an
image you see the action sheet is coming
we can select the image source but of
course load from library or use camera
is not working here in our browser so we
need to do this later on a device but
for now let's finish the other stuff we
have so we still got two files we got
the upload mol and let's continue with
that so this page will get something
right this will get data which is the
image path from this page so this means
we will have some image data here and
the user should be able to enter a
description let's use the view
controller which is from ionic angular
and then we need our images provider
images yes okay first of all in the
constructor we can set our image data
which we get through the nav params so
called get data okay this will already
set this object which we can then show
inside the view of that page two
functions are needed save image of
course and a simple dismiss which will
just use our view controller and call
dismiss remember if we would pass some
parameters back our page but reload if
we passed the reload parameter but in
this case for simple this
we're not reloading we're not uploading
so we only use this here because here we
use the images provider and upload image
and now we need the image which is of
course image data and the description is
also already here the promise from on
the upload you could check if this was
successful or not perhaps can also add
an error block in that case we can also
just call this miss but in the success
case we use this miss and pass reload
true
so our page knows that it should reload
now now in this view there's not much we
need to do we could have skipped this
completely but I wanted to show how you
can easily add a preview view like this
where the user can add some stuff as
well so no this goes to enough barb and
then I'll button start a button to close
this one so I can only and unclick we
call this miss I can in this case closed
and that's it title perhaps upload image
and that's it inside the content we
first of all again display our image the
user can't really change it but if you
like to you could add a Twitter and
Twitter but Instagram feature here like
adding a filter
perhaps so this is left as an exercise
for the reader
maybe you achieve it let us know
definitely
so then the input field whatever my
awesome image so the user can add a
little caption or text to this image if
you're building an image sharing app you
know putting some text along is always
needed
finally the button I am fountain full I
can left looks good and unclick safe
image or upload image it's almost you
know it's doing both we are uploading
and we're saving something to the
database so yeah we could call it save
and upload image the problem is we're
not getting to this page right from here
so you have to trust me on this but the
last thing I wanted to show you can be
implemented from our apps so this is the
preview model this will be called with
an image so it's a bit like what we did
before but yeah again an image and using
the Neff params to set this image now it
image I think and perhaps close to close
this view as well
now it works they start view control
dismiss and that's it nothing else is
needed here
but inside the HTML and CSS for this
page because we're getting a bit tricky
here we want to have no head our just
ion content and inside we will write
everything in a dip which we will call
image dial and transparent so this will
result in a transparent view and also I
am item which we will give the class
'close fake so whenever we press the
background of this page click it we will
call the close event to magically close
this no this is actually not the one
let's see whatever but we can close it
with this ion icon and name should be
close okay so we just got the close
button I forgot about that one but we
will add it to the image as well the
image source again can be simply used by
using the URL of the image and some more
CSS which we will add soon we want to
make this full screen image and also
transparent and also on click close the
 finally oh it's getting hot in here
we need the ion card content so it's not
getting like dirty hot in here it's like
I don't know 30 degrees here in Germany
and I have to close all windows and shut
all doors to get a silent environment to
record the image the video which is by
now I don't know
almost half an hour come on I'm talking
for half an hour with nobody I hope
you're listening if you coming to this
point perhaps be so nice and leave me a
comment that you can understand how hard
it is to record a video with this
temperature anyway we're not yet
finished we want to show the description
of the image inside a little I own card
content again the CSS class will be
added soon and we wrap this right here
so it looks like person has said this
about the video below we can also
actually use the timestamp of the image
which is automatically created on the
backend side so I can kill ender item
left and only show this if we actually
have created at time and then image
create it in which create it let's see
there's something wrong created should
look like this image created and then
the date pipe just with short should be
enough close close close and we're good
so further CSS let me just copy it in
because the videos already long enough
where's my mouse okay we have some
padding background and especially for
iOS and Android we make this a bit
transparent background of the page our
fake is also with the transparent
background so the I own item has no
background a bit bigger font size so the
icon is a bit bigger and the description
text is also a bit bigger so let's see
yes this looks good so our image with a
transparent background we got
clothes fake up here and we got my epic
description with the date and the icon
below so for the last missing piece let
me show you this app on device okay so
after half an hour our app is finally
running on my iOS simulator we got this
one image but we wanted to try this
other functions so let's use an epic
image from library the preview comes up
and actually I think we perhaps
up in the upload modal yes which should
be image data but anyways we add a
caption so let's call it one an epic
tutorial hit save and upload and there
it is what an epic tutorial just created
5 p.m. and also if we use postman we see
that there is a new entry on this site
and also let's see no not here
perhaps here yeah that's a new file
anyway it's not displayed now but now
you could of course upload whatever you
like prep you again
just fix it upload it and there is so I
hope you enjoyed this little series on
image upload where we've built the full
experience so full snake back-end
development with no tree as front end
with ionic and I think it's always a
good idea if your experience with both
sides so you're basically ready to be
your own startup and come build your
full solutions if you understand both
sides nodejs is pretty exciting and very
easy to learn it's a lot of fun and you
don't always need
fire base if you can do it on your own
if you enjoyed this video and the series
please leave me a comment and also maybe
share it or subscribe to this channel
for the other ionic videos that are here
and also make sure to check out the
ionic academy calm if you're interested
in ionic learning with video courses
community projects and more okay I hope
you enjoyed this I will see you in the
next video have a great day and take
care
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>