<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Increase Ionic Scroll Performance with Virtual Scroll &amp; Infinite Scroll | Coder Coacher - Coaching Coders</title><meta content="Increase Ionic Scroll Performance with Virtual Scroll &amp; Infinite Scroll - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Increase Ionic Scroll Performance with Virtual Scroll &amp; Infinite Scroll</b></h2><h5 class="post__date">2018-02-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FnTKqDT0e5A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone what's up the sign from
detective in this tutorial I will show
you the difference between ionic virtual
scroll and infinite scroll so you might
know about the regular list ng4
iteration with all the items but if you
have an API and a lot of data it's most
of the time useful to use one of those
two and we will see how we can use both
of them inside our app so I've started a
blank new ionic app and we go ahead and
first of all set up some basic stuff
because we need the HTTP client module
to make some requests for testings so
this is angular common HTTP and then
edit to your imports so that's all for
the setup of our app alright let's start
with the infinite scroll so ionic
infinite scroll is a pattern where we
have a list of items and at the bottom
and an infinite scroll component that
will be triggered when the user Scrolls
to the end of the list
perhaps we start with the view because
it's quite simple
perhaps some color just to make it look
a bit nicer and then remove all of the
stuff from the ion content now let's
take a look at how it looks
infinite Scrolls so we got the list and
we then got this infinite scroll we can
already add this to the button and call
this load more so we will implement this
later what you can do also is add
something like a loading spinner of a
specific type our name or a trash hole
when this should be triggered but for
now we can keep it like this then you
need your iteration above and I will
make this
any cards with an NG for like user of
users and then craft a little card I on
item avatar item start and the avatar
image is in this case user picture that
medium so we will see this from the API
response in a second as well also
perhaps a to capitalize so nice little
CSS utilities as well use it a name
first and use a name last so this gives
us the name of the user and then perhaps
I on card content just the email
whatever doesn't really matter in this
example so this is all we need from the
view side so let's take a look at the
controller of course we need the private
HTTP client HTTP client from I think
it's only like this I had problems
before with the import solid add load
users function and inside the function
we use the HTTP client to make a get
request and then let me copy in the
snippet okay so it could look like this
perhaps I can also open this inside the
browser
so calling it with the results 20 will
give us 20 results and we can also
append a page and of course we then need
a little variable here called page and
you might already see that this means we
have a sort or type of page a nation so
we can call this with page 0 page 1 page
2 we will always get 20 results but they
are different from page to page
this is like pagination on other sites
you might have seen and this is exactly
what we need and what the infinite
scrolling is for so the results are not
yet usable we need to use first of all
we need the results of this so we need
risk results like this and also we don't
want to set this to our array but we
want to add it to the array and
therefore we will use this dot users
concat which combines two or more arrays
so we combine our empty array in the
beginning with the new results and later
on the new results will also be appended
now if we edit like this we got our
initial uses array and we should see a
list of users hopefully if I added no
bugs okay so we got a list of 20 users
but at the bottom you see a lot more is
not a function so let's implement a lot
more function this will get the infinite
scroll component right pass through and
at this point we should increase our
page because the users at the bottom so
we need to load the next page and then
we can call load users and we will also
test this through make it optional so
this will call our infinite scroll and
then we should add a new block in here
if infinite squirrel is set we need to
call infinite scroll dot complete which
marks the component back to its normal
state and hides the loading stuff and
all of this and also I added something
called maximum pages so we don't get a
page count from this API but normally
you would get this with the result of
your first call and then set your
maximum pages to the number of pages the
API gives you but in our case you can
check if this dot page is equal to
maximum pages or perhaps lower equal
whatever you like anyway then we can set
infinite scroll and able to fold so no
more infinite loading takes place
so let's look how it this works now we
got the list we get to the bottom and
you saw the little spinner for a while
and we got 20 more results we approach
the end of the list and again new users
are read it we approach it again and I
think now we've reached the maximum okay
you see no more loading takes place when
we now get to the bottom because we've
hit the maximum pages and this is
already how the infinite scroll works so
when should you use the infinite scroll
if you have an API that supports
pagination if you can get page results
smaller chunks you can use the infinite
scroll to get a response faster because
the initial response only 20 uses and
only when the user Scrolls to the bottom
new users will be eventually edit new
users will be added not sure what's
wrong now perhaps my connection is not
that good at the moment I don't know but
you see the infinite scroll is for
pagination and displaying the data a lot
faster if you can integrate this with
your API
so this is the first part now let's look
at the virtual scroll therefore we will
comment this out or perhaps not really
commend it out but let's make it a bit
different all of this and now we will
set the result directly to this and we
don't need the page anymore and we will
set the results to something like 200 so
this means it's a quite big JSON
response but a lot of data 200 is
already quite big so this is a good test
so now let's see the API and the app I
see we got an info we got quite a bit of
loading in the beginning but this is
normal and in the browser it works kind
of good but if you get a lot more
results and you run this on a real
device you will run into trouble and
performance issues at this point and
there is why we can use the virtual
Scrolls so let's go to the home HTML bag
and we don't need this anymore but we
wrap it now into an ion list and say
virtual scroll and we have to pass in
the initial array which is users and
what we also can do is set something
like proximate item hate you can also
set the width so this helps to give
ionic and idear how big those items will
be and the rendering will be a lot
smoother if you have the right size here
already let's copy this in here but now
we don't need the
before here we just need to say my
virtual item for the iteration is user
of users so it's a bit different pattern
in here then we still get the I on item
it's still fine we can leave it like
this
I think interest can also stay exactly
like it is so let's see how this looks
now now we don't get the infinite
loading of course because we already got
all the information but when we now
scroll you can see a little bit of
loading there especially if I'm faster
and you see that sometimes they're a bit
moving perhaps 88 was not the right hate
can also make it to 20 I think then we
should see so I only things they hate is
20 but in the end they will be bigger so
we got a little issue there also this on
a device runs now a lot smoother and the
question is why so I only will only
render the views we can see plus
additional I don't know how many at the
bottom at the top you can also specify
how many it should preload and when you
scroll it will reuse the view components
with a new data at that position so you
don't have like 200 or 1k view objects
but only 60 perhaps or 30 I don't know
at the same time inside your view which
gives us a lot smoother performance for
the view one thing to note is that let
me bring this in as well right there is
this eye on image and the virtual scroll
advises that you should use images
within virtuals Grove with this eye on
image tech to manage HTTP requests but
apparently there are a few open issues
and
and this is not really working as
expected so it will look like this
and let's see and for me exactly this
was one of the problems that the image
is not really loading later on I don't
know if this will be fixed or with ionic
version 4 but at the moment this is not
really usable for us so we need to rely
on the standard image but anyway the
virtual scroll is implemented and you
can see we only needed a few tiny
changes in the syntax and the structure
of our HTML to achieve this virtual
scroll so as you know or as you now know
about this pattern there's no more
excuse to not use either the infinite
scroll or the virtual scroll to increase
your list performance so yes lists can
still have a bad performance but if you
use one of those patterns you are set up
for a better performance definitely if
you have a lot of data to be displayed
if you have any questions about those
two patterns just let me know or comment
on the article on dev tactic and I hope
you enjoyed this video make sure to
subscribe to the channel and I will see
you inside the next video
have a great day and take care</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>