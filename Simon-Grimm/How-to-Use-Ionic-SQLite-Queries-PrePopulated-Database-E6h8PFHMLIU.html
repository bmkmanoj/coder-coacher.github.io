<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Use Ionic SQLite Queries &amp; Pre-Populated Database | Coder Coacher - Coaching Coders</title><meta content="How to Use Ionic SQLite Queries &amp; Pre-Populated Database - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Use Ionic SQLite Queries &amp; Pre-Populated Database</b></h2><h5 class="post__date">2017-06-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/E6h8PFHMLIU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone what's up an assignment
from the tactic MP ionic Academy in this
video I will show you how to use the
SQLite plug-in from Cordova with a
pre-populated database so we can make
real SQL interactions with our database
so I've already started a blank new app
and I also edit to our assets folder one
file called dummy dump SQL and as you
can see inside this file I just have a
few statements that I would like to
execute once we start our app perhaps
only the first time so we create a new
table developer and we enter 3
developers into our database but the
names skill and years of experience so
of course this is just some dummy data I
don't know about the real values here
first of all we need to create a few
things so we need one provider for our
database interactions so go ahead and
run provider database and then we got a
few plugins we need to install so first
of all we need this plugin which is the
SQLite portal and this plug-in will
allow us to import this dump right into
our database otherwise we could only
execute one line all the time and it
would have to be in a specific format so
this helps us to make this more or less
batch import then of course we need the
SQLite storage plug-in and finally we
need to install the ionic native
packages for the SQLite Porter and B
SQLite when we develop this we will not
be able to test this inside our browser
any more later
we can start now to see if the Epis in
general working and if we have any
problems but later on we will have to
deploy it to a device as we're using
Kodava plugin so first of all our
database provider was already imported
and what we need as well is the ionic
storage module for root because we will
not only use the SQLite database but we
will use it through the ionic storage as
well so this is from ionic storage and
then we also need to load our local file
and as far as I know we need the HTTP
module as well so if this one as well
and angular HTTP okay we got those two
we got our database provider which was
already added here and now we also need
to include the two Cordova plugins so
SQLite portal from it
ionic native there this
and finally SQLite from at ionic native
SQLite and we need to add both of them
to our provided array as well ok so now
we are ready yep should still compile
and we will continue with our provider
for the database interaction so all of
our interactions will run through this
provider and first of all we need a
connection to the database and this will
be an SQLite object of course we need to
import a few things here as well perhaps
we can do it as we go
perhaps
perhaps some will be automatically added
so we need the sqlite object and then
something I edit which I call database
ready and this will be a behavior
subject so perhaps you have heard about
this or seen it in one of my other
videos about dynamic theming so this
behavior subject will help us because
our view can subscribe to this it's more
or less an observable once we return it
I can already add this
so get database state and this will
return database ready that is observable
perhaps I need a few more imports here I
think this should be your really nice if
my autocomplete would work a bit better
but I think I'm telling you this in
every video so the behavior subject can
be subscribed to and we can call next on
it and every subscriber will then your
subject what's wrong okay and every
subscriber will then get notified and we
will use this year because we need to
open our database and if our database
like this and if our database is not yet
ready we can't make any commands on it
so otherwise we would run into some race
conditions or whatever therefore we will
we will use it with this behavior
subject you will see how it works in a
second so we need the ionics almost but
ionic storage
and inside our constructor we need a few
things so we need the SQLite Porter but
the variable should be like this and
then we got the storage and what do we
need as well I'm not completely sure we
see
we need the SQLite I think we already
got Angela right yes what is this
it's barking and then we also need the
platform because first of all we need to
wait for the general platform already
event from ionic and Cordova because
otherwise we shouldn't make any
interactions so let's go back and our
database ready state is first of all
false so this is also something new with
the behavior subject we can add an
initial value and also strivers will
immediately get false back so we will
know that we're not yet ready so then we
go ahead and use the platform ready
function and once our platform is ready
we can go ahead and create or open our
database and we use SQLite that create
and this will open or create a SQLite
database file inside we can specify if
we want stuff like name so let's name it
developers DB and you could also specify
different locations example would be
default you can check out all those on
the github page of the plug-in
in general default should work so once
this is done we can also go ahead with a
deadlock again and this time we got an F
Q light object so you see that this is
already pretty good for us because now
we can set our database to this TV and
now something a bit more strong yeah I
think it should be just storage like
this so now our database is either
created or open and what we're going to
do now is we use the storage
besides our other database and we check
for if the database is already filled
and once we got this value so if the
database is already filled we don't have
to insert anything else and our database
is ready the platform is ready so this
means we can notify our subscribers that
they can now use the database so we call
this the database ready dot next and now
we omit the value true so all
subscribers will know that okay yes now
it's ready and we can make our
interactions with the SQL database
otherwise we would have to fill our
database somehow so this means it's the
first startup and we need to import our
SQL done so to fill our database now we
call our HTTP and call get to get our
dummy dump dot SQL we need to map this
response because otherwise it's like an
HTTP response and we need just the text
which is the body as the string
just like we're normally mapping it to
JSON data when we get it from a REST API
after our map block we can now subscribe
to our big SQL statement and we can call
our SQLite Porter and here we got a few
options so we got export two times to
export something and to import and wipe
so we could either import a JSON
structure or we could simply execute a
set of SQL statements in our case we
will pick import SQL two DB we need two
parameters so the first is our database
and the second is the SQL string which
is exactly what we just got from our
HTTP request to a resource once we have
done again we're at this stage where we
can notify our subscribers that they can
use the database and also now we can
make sure that we set our sorry our
variable database field and to true so
we're not executing this dump again of
course we could make sure that the dump
is safe and will not overwrite anything
but I didn't like this so if you want
you can also add a catch block but of
course there won't be error any errors
for us okay so now our database will be
open once it's ready we will check if we
have already inserted data and otherwise
fill our database with some data using
the SQLite Porter and our prepared SQL
down to the database in both cases our
subscribers will be notified once the
database is ready and now we just need
two more functions here
because we actually also want to perform
some SQL queries on our open database so
to add a developer we create a new
function and then we also got get all
developers which will return all of our
current developers so I think at
developers a bit simpler so we create a
new data object named skill in here and
now we can return this third database
and there it is execute SQL so we are
now able to perform any SQL statement on
our database so we type insert into
developer which is our database these
are the columns we want to enter and
then we get values which are defined
behind the statement as the parents
let's check ok can also name address
whatever and then we can return the best
perhaps somebody wants it could also
catch it with a narrow black box we
leave it out for now
so simply run any SQL statement on your
database whenever you want of course you
could also add some select statements or
Union whatever I'm not the SQL pro but I
guess you are if you're watching this
video but now back to the last one get
all developers and this will return
again this sort database execute SQL and
now we call select star from developer
so this means we will get all developer
data in
the database and now we need to map this
data a bit so we can use it on better
inside our view
so if data dot rose that length so if we
get some rows back actually we will
iterate through them equals 0 theta
roles dot length and plus plus so in
that case we will push a new object to
our developers array at this point you
could use some interface or whatever
data structure I will keep it very
simple and just create this item so data
rows item at position right dot name and
now we need this two more times for
skill and put it last field again alkane
yes yes oh come on there it was he
hopefully no titles because debugging
this is a bit harder as we will run it
on a device but I think we're fine after
we've finished simply return our D
developers array okay and then otherwise
perhaps here we could need an arrow blog
and which could return then an empty
array if there's sub problem and of
course we could also look out the arrow
okay a lot of code and we haven't
actually changed anything in a side our
app but now we got this cute little
database provider which helps us to open
fill a database to get all data from the
database and also to add some data to
our database so now it's time to put
this interaction so if we start with the
home HTML view inside this view we want
to add a few items because we need
fields to import the data for our
developers so we add a label what is
your name and then we got an eye on
input which will be connected with an NG
model inside our class so this will be
developed for that name go it and now we
need two more of these so the signal one
should be what is your special skill and
this is developer that skill and finally
how long have you been working and this
is years of eggs-perience
come on okay finally a button to submit
the fun full looks good here and this
will call it developer but of course the
main action takes place inside the
database provider in the end so this is
our little form and below we craft an
ion list we will display the ion items
which will come hopefully from our
database so with the developers
actually it's not a drink so we don't
need the other pipe we will of course
this call it a drink but in the end we
will just set our data to it and that's
it then we got def name and below we got
if that years of experience years of
death dot skill experience okay so
that's all four of you and said before
yeah of course we cannot read that
property because we haven't created it
yet so let's finish with our Claire
we got the developers array and we got
the e developer which is just an object
and then we got our private database
provider of the type database provider
and now we see our behaviors subject and
edit action because we call get database
state which is not servable so we can
subscribe and we will get back true or
false and of course only if we are true
we can call load developer data from the
backend from the database oh come on
like this okay because otherwise we
would perhaps wait for the platform
ready event here but this platform ready
event would not mean that our database
is created or prefilled so at this point
once this is ready we can be sure that
our batch import is run or the databases
ready but in any way we can make a
request that will actually get us data
back so at this point we can call get
all developer data
and we are sure that now we will
actually get something useful back so
now we can set our development to this
data and finally we got at developer and
again we simply use the database
provider all of the logic is there
however you just takes care of for the
connection between this stuff so we got
name
we got skill and we finally get my
favorite string years of experience
okay this times right and then we got
some data back but actually we're not
really using this but we can set or we
can call now again developer data
because this is not a real-time update
database like firebase this is just SQL
and we need to execute this of course
again I'm not sure if DFS actually is
still running or yeah Cordova not
available of course but if we comment
this out it's perhaps running so we
haven't made any errors that would be a
good site for us let's see of course
with loading this come on don't load
anything here and now
you need to add the iOS or Android
platform okay so this is good
and once we call this cannot read
property SQL of an e5 of course make
sense because we don't have called over
inside our browser so now you would need
to go here with ionic cordova platform
at iOS or Android and then ionic cordova
build iOS or Android and let's see this
app on a device now
so before launching actually make sure
two more fixes so we need to add parts
in here because our years of experience
is a string and the database expects the
number so make sure this is a number and
also I got a little typo in here so I
missed this closing record so now we can
observe our data on the device so we got
three entries which is our pre-populated
data and now we add something else so
Josh with the Yannick skill also I don't
know four years and if we add the
developer info you see that Josh is
directly added to the bottom of our list
with all his entries and of course you
could now go ahead and implement some
delete to delete a data and some
filtering to only select developers with
some specific skills or years or
whatever but basically if this database
provider now is enough to go ahead with
your prefilled database for some more
SQL queries I hope you enjoyed this
video if you do make sure to subscribe
to my channel for more ionic videos in
the next time they're already quite a
few but there will come more and of
course go ahead to the ionic Academy
comm which is my online platform to
learn ionic together with you with
courses projects videos and a great
community we got there so make sure to
check it out and I will see you next
time have a great day and good bye
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>