<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Dynamic Components with Ionic &amp; Angular ComponentFactoryResolver | Coder Coacher - Coaching Coders</title><meta content="Dynamic Components with Ionic &amp; Angular ComponentFactoryResolver - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Dynamic Components with Ionic &amp; Angular ComponentFactoryResolver</b></h2><h5 class="post__date">2018-04-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XY__2PX_BZQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone what's up the Simon from
deaf tactic in this tutorial I will show
you how you can dynamically create
components so this is a bit more
advanced some more angular stuff but we
will get through it so first of all I've
created a blank new ionic app and now we
need a few things so first a file I will
create a provider because let's imagine
we get some data from an API and we want
to translate that data to steps
so perhaps users can configure different
steps of a process in some web
application or whatever and then your
app receives those steps and we need to
transform those steps into the right
components so we got the provider and
then we need three components so let's
say step one step two and of course step
three all right and we need to load them
in a different way so I only creates
this components module file but we can
delete it as we don't need it
also we need two more files which will
be an interface and a class so one is
process dot t-- s and another one
process item dot TS i will also go ahead
and run ionic already and then we can go
to the add module and as i said we need
to import them differently so we need to
add them to the declarations and entry
components of our app as well he is also
the preview so go ahead step one
component step two component
and step three component actually my
imports are they right or wrong let's
see more or less I think this should
work and also they need to go to the
entry components as well it's like we're
not using lazy loading here and save it
and hopefully we don't get any errors by
now
great alright um let's start with the
interface for a process component and
therefore we can simply say export
interface process component and we just
defined it so we get some typescript
completion for our stuff also all of our
components needs some stuff so we've
defined that each component will have a
data object so we can create the data as
an input so normally you would set this
input in your HTML but we will do it
through our code and also make sure that
this one implements process component
yes and you can see now we get already
the typescript error because the
property data is missing so if you type
it or spell it correctly this works and
now go to the two other steps as well
implement process component come on no
completion of course import process
component and then sorry
we got the input with data as well in
here and then no more complaining only
the inputs and finally for the last one
of course as well
all of it input the import and
implements process components so this
one is more or less optional just now we
can get some typescript
reporting and then for the HTML view we
will simply craft this into ions slides
so each process step will be one eye on
slide and therefore go to the other ones
as well so make sure all the three HTML
files of the components are the same and
if you want to of course you could say
something like the background I don't
know just so we see a little difference
there between our three steps beautiful
colors right okay so that's enough for
the setup we now got three different
components we could use and now we
continue with our process provider which
will in general or if you think about it
receive some form of JSON data from the
API which is the order of some steps so
I've created a little dummy Jason here
response so this response might contain
an area of items with the steps in some
order perhaps even some sub steps so one
step could have as many children steps
and again just like they want and we now
need to transform this response into a
view crafted of the different step
components and first of all also let's
define another class inside the process
item file so this will be a class and
again this is more or less optional just
we get some more typing information
so a process item will consist of a
component which is our component then
later type any and as well a little
description public description which is
a string and then whatever component of
type any this should be actually angular
core and then it works so by making the
items inside the construct that the
class has these items so we can access
them later now let's go to the provider
once again first of all one outside
function will be called get process
steps and this one will return an array
of process items hopefully so this is
the one we will call from outside and
then we got two more functions inside
the provider get page order from some
steps so this will resolve adjacent
response or whatever you get into the
according process item steps and also we
need one to resolve component name for a
given step and this function will
actually translate a string or ID or
whatever to our component so we need
some form of mapping to those components
we can't simply create something based
on just the plain name so if the step is
1 we return
step 1 component and the same for the
other one as well
so 2 more L Tiff's if the step is to we
return the step 2 component and here we
return the step 3 component imports
look fine so this means this
we'll resolve it now you might think
this is not so flexible but actually if
you have dedicated teams you just need
to add some information to this provider
different teams can work on different
components the back-end team can work on
its stuff and you simply need to add the
mapping in one place and that's all to
resolve the information ok back to the
original function this is the one called
from outside and this will then call our
get page order with this dummy Jason
that items so I crafted it so you can
make this actually write to your needs
this would of course be your Jason
response and your mapping here this
function will also return an array of
processed items so let's start with the
result which would be of the type
process item again and in the beginning
empty array and finally we return the
result so now we've already fixed all
the typescript errors now we need to
process the information we get from the
API into an array of process items so we
iterate that item of steps simple
iteration through all the steps and then
if the item has another array of sub
items we need some special stuff and if
the item is just one process that we say
let new component this resolved
components name for item dot step so
item dot step one two three whatever and
the component would then meet one two or
three component and then we can create a
new item as we've created on the
interface of process item and a process
item consists of a component so for
component and then of the item
description perhaps some text which
would be inside that and then simply say
results.push our new item so in the end
we get result array of process items now
if we get some child items I wanted to
make this a bit more complex because
this can happen of course in that case
we simply say our result is the current
result and we come cut it with a new
array and this would be again our own
function so a bit tricky here we're
calling our own function and whenever
there's a new array it will be added
here so this is how we could handle the
array of children okay now this function
will return us a nice little array so
let's go to our home page and add I on
view did load and first of all let's say
let's steps equals this dot of course we
need to import it private process
provider process process provider where
is it process provided that only one
function we've made the other one
private so only this one is public and
in your case this would make perhaps the
request return the mapping and then if
we lock out the steps now we could
already see hopefully that I've imported
something wrong somewhere
let's see directives who is importing
this stuff process item process app
module who the is doing this come
on
I so what the just import it from
angular core come on
I guess it's wrong everywhere things so
my automatic import is sometimes a bit
wrong I don't know exactly why so make
sure you got all of this right and then
we see we got five process items all of
them contain a component and the
description so now we just need to
transform that information into our view
so inside the view let's say color
primary and he always say dynamic
templates and inside our ion content we
now add ion slides and as you remember
each component is one slide so we just
need a hosting element which we will
call process container and all the
slides will be rendered in this process
con toner so we can access it using the
view child and this is again wrong just
import from angular core come on by the
name process container and we also want
to read it you container reference so
one of more views can be attached to
this container and we need to attach our
components to this container so now we
got the steps and now the last missing
piece of the tutorial we iterate the
step of steps
and for each of the steps we need one
victory and this is the what's it again
come on the reso ler it was in the title
resolver of component factory reseller
okay I hope this import works doesn't
look that good actually this should be
from far as well and this should work
and now we can use this resolver by
creating a new factory this resolved
resolved component factory and passing
in our own component and this gives us a
new if we type it right and also we see
that we get the type completion here
which is pretty good if we're working
with some more complex stuff like this
okay we got the factory now we create
component reference to the new component
and we directly created on our container
this will add the component to our
container if we say this dot container
create component with the factory we
just have to pass in the factory and all
of the rest will be handled by angular
and the final step this would already be
enough to set the components but we also
want to be able to set the input so we
know those are of the type process
component so we can say process
component component Ref so we cast it
and use the instance and then we get the
code completion right here for our
process component again and can use the
description of one single step
yeah I thought so just make sure to
import the view container ref should be
right from angular core and there we are
so our Jason looked like this first step
second step and the third step
containing the third and the first and
then another second so let's see we got
the first step we got the second step
then we got the third step and now the
first should come again and the second
so everything works as expected
let's take a look again what we've done
so this one resolved imaginary JSON
response to our components we only
iterated create a factory using the
factory we attach the component to our
view child container and then using the
cast on our new object we can also set
the input of our steps which is
available by using the interface and as
you can see all of those are added to
our of U which simply contains this
hosting element process container the
home page has no idea about the
components and dynamically creates the
component using this pattern of course
it's not 100% dynamics so we need this
mapping somewhere we need to know which
component angular needs to create but we
only need this in one place we can
update it here and then we could handle
a JSON response or whatever you got
which was dynamically perhaps created by
a user to create the components then
later on in whatever file you want on
the fly so this was a bit more into
detail and more angular stuff than the
other tutorials I hope you enjoyed this
if you have any questions for your free
to ask it's not
perhaps not super clear immediately and
of course if you want more videos like
this make sure to subscribe to my
channel so you don't miss the latest
stuff and I'll see you inside the next
video have a great day and take care</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>