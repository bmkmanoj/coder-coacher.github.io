<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Store Files on Firebase Storage with Ionic | Coder Coacher - Coaching Coders</title><meta content="How to Store Files on Firebase Storage with Ionic - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Store Files on Firebase Storage with Ionic</b></h2><h5 class="post__date">2018-01-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Pi6AtssyaNw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone what's up this assignment
from deaf tactic today I will show you
how you can easily integrate the
firebase storage option into your ionic
app using angularfire so you might know
about firebase database which is the
real time database helps to sync all
your data immediately it works pretty
awesome but you can also upload files to
the storage and that's what we will do
in this tutorial so I've created a blank
new ionic app and we go ahead and
install both firebase and angular fire
so at the time of creating this I have
to use the release candidate number 5
and also the next attribute so that we
can use the connection to the storage
through firebase a few angularfire
and also firebase in this version but
perhaps you're on the later version
already in the future what we need as
well is the Cordova plug-in for the
in-app browser because we will add a few
text files and we will open them through
the net browser
so once the Cordova plug-in is added we
of course also have to at the ionic
native package for the in-app browser
like always and then we will also create
a new page and call it my files and also
an additional provider called data once
you get all of this we're basically
ready we can remove the home folder and
also open the app component and switch
out this for my files page so now we use
the lazy loading and make sure to remove
all references to the home page as well
if you remove it of course you also need
a firebase account it's free and also a
new project so I
created this project and for the
database in this tutorial we need some
simple rules which allow read and write
access to the database because we won't
use authentication in this example then
you can go ahead and check out at
firebase to your web app and this will
bring up a configuration object which
you can copy to your app module and this
works pretty great so let's call it
firebase conflict perhaps and then we
need to import a few things let's see if
my auto import works nope of course not
so let's get back and do it manually so
what we need in this tutorial is first
of all the angular fire module this is
the base module which will be
initialized with the information we can
see below and we need two more imports
but the second one is the angular fire
database module and this comes from
angularfire 2 slash database and finally
the storage module coming from storage
so yes you can see they're separated
into different packages if we had
authentication as well this would be
another module but for now we got only
those three so add them to your imports
and also for the angular of sorry
angular fire module we can call
initialized app and pass in our firebase
config from above so this will establish
the connection to firebase through our
parameters no need to copy them I will
delete the app after this video so make
sure to use your owns own values or it
won't work okay so that's enough for the
setup now we can continue with our data
provider
we can remove some stuff which is not
really needed but we need to import
other things so we need a connection to
the database so angular fire database
and also AF storage angular fire storage
like this that's enough for now and now
we come to the actual function so we
want to be able to display a list of
files so we need a CAD files function we
want to upload to the storage some
information which will then return an
angular fire upload task okay will you
read for now then we want to store the
info to the database you will see why
later and finally we need a function to
delete a file like this so this is the
basic structure for our provider and
let's dive into the different functions
get files perhaps the most easy one here
we simply use a reference to a list in
the database and we save files it
doesn't matter if the file node is not
yet existing it will be created once
this is used the first time we can
already return this and it would be a
list but there wouldn't be the keys of
the object and therefore we need a
little bit special syntax with the
snapshot changes we map the changes so
for all the changes that roll in we met
them to a special object where we
extract the key from the payload and add
all the rest of the values to a new
object so therefore when we call this
and it's still an observable it is still
an array but we also get access to the
key property there so to upload to
storage it's also pretty easy let's
create a new name because you don't want
to store everything under the same name
of course let's use this index and just
create a new date get time dot txt so we
will store simple text files which we
can write to firebase you can of course
also upload images more information on
this is inside the ionic Academy where
we got a complete course on image upload
and sharing through firebase storage but
for now we use this of course if you
have multiple users you want to make
this even more unique perhaps a random
string or the user ID but as I am only
the only person using this right now I
can be sure that I can only upload one
text file at a time so then when you got
the new name you can use our angular
fire storage reference and also just
like before we can specify a reference
so let's say all the files should be
moved to files slash new name so this
means we will be inside storage and then
there will be a full of files and inside
the files folder all the files will be
contained
now finally we have to write something
to that location in the storage and then
we can use the put string with the
information and that's all we need and
it's done now when you upload something
new storage you get some information
back but it's not easy to retrieve like
a list of files in a specific folder and
therefore we will keep a track of those
information with a database so once this
will return some meteor information we
will call our second function to store
this information to the database
so if you create an object like this
whatever you can extract information as
much as you want from the meter
information I just put time created the
actual URL the full path which you can
open in the browser so you get passed to
the storage file perhaps also the
content type and now just like your
perhaps already used to call this
database list which gives us the list at
the key files and then we call push
which will create the unique ID inside
the database for our new object and then
have the right Center and everything
works okay we're almost done with a
provider and the real functions let's
add delete file we need to retrieve the
key and we also need the storage path
which are both inside our object that
will be passed to this function now with
those two information it's really easy
to delete it get the reference or do it
in one doesn't really matter this
database list add files and then call
remove with a key so this removes
removes entry from database and then we
need to clean our storage as well we can
return this then so return this
angularfire storage reference to the
exact storage path we've extracted up
here and then call delete so one is
removed one has delete no big difference
here but this will remove
file from storage so that's a difference
in here okay
providers ready I will already bring up
ionic surf or ionic lab whatever as we
get closer to our finish
so perhaps start with a typescript
implementation of my files we have
created all important functions so this
is how the app looks like as you can see
not much going on yet inside the
constructor we first of all need our
data provider okay import works fine and
then we need an array of files which is
of the type observable and this will be
in any array okay and now once the app
starts we call the data provider get
files which returns an observable and
assign this to our own files which we
can then use inside our view so perhaps
we let's stay here and finish this also
we got a few functions in here come on
what's going on outside I'm recording a
video quiet please
so we need add file upload information
and also delete file okay and finally
view file so again a few functions but
don't worry we got this what we need as
well I just noticed is both the alert
controller from ionic and also the toast
controller to display a little toast
message once we've done a successful
request so to add a file we use this
code we create an alert view with a
title and especially one input so we
have a simple text input with a name
info which is taken care of by the
handler of the store button which will
then call our new function so perhaps we
can already add this part to the view so
we see what's going on let's remove this
and make it primary my files we don't
need any pitting and we add a floating
buttons right button and then button I
on try memory I think we don't need this
and then click Add file which will bring
up the dialog and I can name whatever
cloud upload whatever you like and then
we should be able to already see the
button and also see some error locks if
anything goes wrong of course know where
is it of course I forgot input alert at
present so now we got this little alert
we can input the information and then
click storm and the information will be
handled to the
next function so at this point we now
make the upload and storage so first of
all let's create the upload by calling
this dot data provider upload to storage
our text and I make this in two
variables so we can use this now because
we want the promise of this event and
then upload to the database and this
looks at the point of writing this a bit
tricky because we have to call the then
function on the upload to receive a
promise so then we can only use the
promise so you can see it looks a bit
tricky I'm not sure if this is meant to
be perhaps it's already different when
you use this but anyhow this means we
are finished with the upload and now we
can use the data provider store
information to database and this is in
the result of meta data perhaps I will
look at this result I was for once ok
and when this is finished finally we can
display a little toast to the user if we
like to so simple tows new file edit and
presented yeah let's let's give this a
try okay we haven't crafted the list
actually ok so let's finish this the
intended row sorry
delete a file again using the data
provider delete file and then the file
subscribes so this is observable not a
promise and I think we can use more or
less the same toast notification just
it's now file removed and finally view
file we can
private in a browser in app or is it
I think I forgot it in here so import in
a browser from and ionic native in a
browser and add provided to your array
and now this one should also know about
the inner product and then we file we
can use this in a browser create with
the URL and then we go to go okay all
functions are finished this means we can
heat over to the view and wrap up the
tutorial with the implementation of the
list so the list will be an NG for let
file of files and this and observable so
we use the async pipe in here to
automatically receive all updates I own
card header file dot created and make
this little date that's some information
but not a lot in there so not many
options here but of course feel free to
create whatever you like to you and then
add a few buttons I can left outline and
on click view file and this file dot URL
perhaps an icon if you want to let's say
the I it's not the Eye of Sauron so
don't be afraid
and if you want to simply some
information for us it doesn't look so
lonely second one delete file and we
passed in only the file I guess right
and also color dangerous so this action
is really really dangerous trash and
then I think we more or less got it
right perhaps make this icon only now
let's see how the app looks okay we
don't have any files so put the storage
for once to the side and then we upload
epic information secret whatever we
store it and we see new file edit so
from the upside everything works we got
the new entry
we got the metadata so download URL path
time sighs even whatever you can use all
of this and then we also immediately saw
inside the database our new information
with the past inside the storage so it's
in files / this name and also from the
URL let's try and copy this you can see
that a new file will be downloaded it
contains exactly the information you can
also go to the storage and see a new
folder is created and there is our file
you can download it it contains still
the same information so more info store
another one and we got a second one you
can renew move this one and what will be
removed the database reflects the
changes a bit better if you add
something you immediately see the new
entry edit and if you change or delete
it it will become red and removed and
also if you want to view the file with
the in-app browser a new text file again
is edit and there is my information so
now you are able to make a connection
from your ionic app to firebase upload
files to the storage connect the storage
with your database to get the
information and I think you're ready to
build an awesome app so if you've built
anything of course let me know I always
love to see apps inspired by my
tutorials and also if you want more
information on ionic + firebase
especially something like image upload
with firebase authentication and all of
that make sure to check out the ionic
Academy which contains a lot of videos
courses and a great community and it
doesn't load what I want to bring it up
so check it out hope you enjoyed this
tutorial make sure to check out the
other videos and of course have a great
day and take care
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>