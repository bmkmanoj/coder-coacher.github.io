<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ionic Image Loading and Caching | Coder Coacher - Coaching Coders</title><meta content="Ionic Image Loading and Caching - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ionic Image Loading and Caching</b></h2><h5 class="post__date">2018-03-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BPI6426c4ZU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone what's up this assignment
from the ionic academy back with a new
quick win so this time we will use a
cool plugin which is called ionic image
loader and this component takes care of
loading images in a background thread
and cashing them so this comes really
handy if you want to display images from
an API or any external source and
therefore let's go ahead and first of
all install the ionic image loader at
the time of writing this I had to use
the 4.2.1 version because the latest
version had issues with the new wk
webview on iOS so perhaps you can also
try a later words and if you watch this
video at a later time then we need to
install the ionic native according
packages for both file and file transfer
so file transfer is still used in the
version 4 of the plug-in therefore we
have to edit and also the according
Cordova plugins as the image loader
component uses those native Cordova
plugins under the hood to make the
request and download the files so once
the first plugin is edit ok there it is
at the second one for the file so
Cordova plug-in file transfer and
Cordova plug-in file also of course if
we use those Cordova plugins we will not
be able to test the behavior of the
image loader in the browser but still I
will bring it up so we can see if we
edit any issues to our app but in the
end we have to run the app on our device
to test the full functionality ok so if
you have installed all the packages go
to your app module and first of all
import the HTTP client module
and angular common HTTP and at the
client module to your imports and also
we need to import the ionic image loader
from ionic image loader surprise
surprise so add this to your input as
well and then say for root on the image
loader plug-in so it will be initialized
for our app okay that's all for this
integration part now if you want to
configure some special settings for the
plug-in you could simply add private
image loader config right here of the
type image loader config and the import
magically right this time so what you
could say are a few things so you can
specify the background behavior the
directory
how many images should be loaded at the
same time you could set the mix cache
size hate there quite a few options so
just let's try views so we will enable
the debug mode to get some more
information what the plug-in is doing
then we say enable fallback is
placeholder true so this means normally
there's a spinner on the loading image
but if we do it like this
we can set a fallback URL simply to our
assets folders so as its images logo
which would be the ionic logo and we
will see this very briefly if inside our
app finally perhaps set maximum cache
age so if you want to make it one day 24
hour 60 minutes 60 seconds and
JavaScript
so milliseconds to seconds then we got
all the configurations so simply check
out the plugin and that's a great
overview about all the things you could
set on the plug-in
alright let's heat over to our home HTML
ionic image loading and add some
functionalities to the app so iron
buttons and and on click we will load
the data for our app inside the iron
content let's add a refresher but I
always spell it wrong
so simply pull to refresh which will
clear out our cache so of course this is
also included with a component then a
list of items for this example I will
use again the random user API great API
support the creators definitely so we
iterate over our users and then we will
use the avatar of ionic and we leave
this open for now finish user email all
right and now we're making use of the
actual image loader component so this is
an own tech we can set the source just
like we used with regular images I will
use the Elvis operate just to make sure
we don't run into any errors if the user
picture is not set also you can specify
that it's not only in this element but
it creates and I am the element I don't
know I think it is needed for I don't
have a task so try it out or leave it
out and you could even subscribe to the
load event so on
load do whatever you want with the event
and then close it like this of course
now finally we need some data but the
hard part is already over so HTTP client
client ok yes there it is might work
perhaps and then we will have a user's
array and also we will start the JSON
information to try some different cases
out so our load data function will check
if we already got JSON data and if we
don't we use our HTTP client to make a
get request to the random user API this
will give us 100 results which look like
this more or less and that's the result
array which we need the data from so
subscribe a result and then set our
users to rest at the key result and also
I will save this JSON response for later
because if we make this request again we
will get back different data and I want
that so in the health case we will set
our users to an empty array so if we
reload more or less the data we fake
this a bit we set a little timeout and
once the timeout is finished let's say
one second
we then set our users again to the data
and we will see how this behavior looks
on the browser and how this looks with
plug-in installed on a device so now we
still got the clear cache event from the
refresher
so in that case we need to add private
image loader image loader import looks
good and then simply say image loader
clear cache and that's it your cache
will be cleared set the refresher to
complete if you use it and finally we
edit the on image load event as well so
if you want to make any specific action
here we don't do it I will just log out
image ready alright so let's see this
inside the browser hopefully it works of
course I knew this import was bullshit
ok let's refresh and we should see first
of all an empty list and if we now hit
the load we see we make a request to get
100 results and we let use of users what
did I do wrong
subscribe result hello
I think it's actually results not result
so my bed so one more time load request
and then we see one request for all the
images and we can clear this load again
and we don't see any requests again
strange but okay we got some console.log
in here as well so if we add load we get
this image load a warning because we're
running not with Cordova but on a
browser and I see that for some reason I
on palette okay
I turn start it looked a bit different
than it should but now it should look
better right so normally this makes a
request every time and if we make a
refresh this has no effect in the
browser because we've only implemented
the mechanism for our device perhaps my
brother has now also stored caching
disable cache I don't know looks a bit
strange because normally it makes the
request again and again even if you use
JSON data you had locally but anyway we
see that the app is working for now so
let's see how this looks on a device all
right to the left we can see the app and
to the right I opened the Safari
debugging tools so let's hit load inside
the app and then we see that our
debugger is not working like it should
work because I've connected my quick
time anyway normally you would see all
the requests again just like we had in
the browser and if you hit load one more
time you will see that the images
immediately come up it's
also what you can see right now so
whenever I hit load it makes no other
requests and all the images are taken
from our local device because the plugin
will whenever an image request comes
download the file in a background thread
and start on the device so you can
actually inspect the container of the
application using Xcode and see that the
files are downloaded to this container
and also right now there's nsurl caching
also active so this will also try to
catch stuff but anyway it's a bit hard
to debug and see the effect of this
plugin also the images are rather small
so give it a try it's quite easy to
integrate just at the image loader for
root perhaps at some configuration
settings for your app more again on the
github page and then add the image
loader to your HTML perhaps attach a
reload event check if you need to use
image or not and then load your API data
and images and be happy that your files
are now cached for the user and can be
used later on if you enjoyed this quick
win make sure to check out the ionic
academy.com
and also subscribe to this channel for
more videos I'll catch you the next time
have a great day and take care</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>