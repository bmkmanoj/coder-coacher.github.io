<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make REST API Calls and Parse JSON with Swift | Coder Coacher - Coaching Coders</title><meta content="How to Make REST API Calls and Parse JSON with Swift - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make REST API Calls and Parse JSON with Swift</b></h2><h5 class="post__date">2015-03-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YX9vK11oX-E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up this I'm from deaf
tactic today with a video tutorial on
Swift and how to make REST API calls and
parse JSON responses and so so why do we
do this and the general JSON response is
okay but if you have to work with it in
Swift it will end up like this
you have to parse it and yeah you see
you have to make three or four objects
cast them as NS dictionary to finally
get anything from it so today I will
show you how to use this swifty jason
helper and we will make a simple demo
application so i already created a new
single view application and i need to
mention you need to have the Xcode 6.3
beta or whatever is new when you are
watching this and have Swift 1.2 because
we're using some functions from there so
make sure you have the correct version
of Xcode so I will start with dragging
in the swifty JSON file to our project
you can also include it with Kokua pods
or Kitaj whatever i had some problems
doing that so for now I will just drag
it in here and the next thing we're
going to do is add a new file it's a
swift file and this will be our REST API
miniature so this class will somehow act
as a per se to the rest api and this
class should make all the calls and
return the JSON object from the NS data
so first of all we make type alias which
will be jason and an optional in this
arrow and point this is yeah this is an
optional part but it makes returning
stuff a bit easier so our class is the
REST API manager and this will be an NS
object so this first one this static
variable is the reason why we need swift
1.2 because this was first introduced
then so we make a shared instance which
is our REST API manager and this line
will help us to use this class as a
single later on which i think is very
useful for our REST API manager so base
or L in our example will be the API dot
random user
so this is just to grab some data from
anywhere you can paste it here and see
you're getting a result which has an
array of user objects with names and
email and whatever just some dummy data
we can grab so that will be our base yl
next our get random user function which
will just have a completion block which
will return a jason and point so yeah we
can yeah we don't have to make any
changes here let's just skip that for
now because we have to implement the
core function we will use and this will
would be used in every call if you have
another API or whatever we choose just
use it once so we want to make an HTTP
GET request and we have to give a path
and also on completion we will have
service response so
come on as you can see this writing is a
bit bit easier than always typing this
but our end users should not return any
optional error whatever it should just
return Jason so I just use the service
response here and that's fine for now so
we start with a request which will be an
NS mutable URL request made from your l
NS l with a string which is our path
okay so that's our we quest next we have
to create an nsurl session
so that's the Swift style of talking to
whatever on the internet and find what's
this problem I don't know
and what is your problem yes well
whatever okay so finally we have our
task which will be the session data task
with request and the completion Handler
so we have our request object and here
we have our completion handler so inside
our completion handler we can modify
this a bit to look a lot better so just
say data response error yes even this
can be removed I think swiftest so if
just very cool with removing all those
useless stuff
so we got our NS data response object
here and now we can just make a self a
JSON object from exactly that data I
hope I know fine but that yeah so this
will call the swifty JSON file and
created JSON object format so no worries
about anything and now we need to call
our completion and just give it the JSON
object and the arrow so oh that way and
the last thing we need to do is say
tasks with you to perform all the action
so our random user or get random user is
now a very simple function which will
make HTTP GET request to the base URL
and on completion call itself on
completion and it will say jason or i
don't know if he knows that yeah I
thought we might say as Jason but Swift
is a clever boy okay so that's the final
REST API manager so you can make more
functions like this and you would always
use this core function or make HTTP POST
request or whatever but in general you
have just to make more of those
functions and change your URL or you
could add a body with some data or
whatever
but that should be the general core of
some kind of manager okay so next go to
your view controller as we need to show
our data somehow and we will display
everything inside a table view and for a
table view we have to have some items
which will be an NS mutable array okay
so we can already subscribe to the UI
tableview datasource and UI tableview
delegate and for them we have two you
add oh come on sighs four Oh No what's
the name of that again table view it'll
view number of rows in section needs to
be implemented I guess or is it number
frozen section which will return items
count and we also have to implement cell
for row at index path which is still
okay so yes whatever I don't know what
we want to return here EUI tell review
so we will come to that later for now
it's just Wessex prattle you a table
view delegate so I'll remove this for
now and we will use the view will appear
and now comes some basic framing stuff
okay so we create a new table view with
our frame and now we have to connect the
data source and we have to connect the
delegate and we have to edit as a
subview okay so that's our table view we
also need a button to call our function
and perform the dummy user adding so
make a button which will be what ever
position and the hate is whatever 50 or
so
just whatever that's fine so the button
will okay yes some optional and the
button will just have some beautiful
background color so I prefer to have the
beautiful UI color see on color but I
don't know what's your favorite color
you can save me in the comment so we set
the tile add new dummy for the UI
controls date normal and we also have to
add a target will be cell at the dummy
data URI control events touch up inside
and finally save
you add sup you the button okay
so now we just need to implement our
function at dummy data which will be
called when we click on the button
mm-hmm sorry and add dummy data will now
simply call our REST API image shared
incidents get random use them and we
have this completion block here so we
can simply say let results equal Jason
result so you might remind it we have
results and here's an array of results
inside currently we only get one object
but you could also make a request to get
more objects so here we get this array -
yeah to be prepared for every case if
you want to extend our demo and also I'm
going to show you this because it's
pretty cool
how to iterate over our object so we can
just make sub jason and we can go over
all the user objects inside so we can
start with we say it's any object
because he don't like say otherwise so
from the sub J's we want to get the user
object and we want to have it as an
object so now we can just add this user
to our items and we will expand what's
inside in our self row at index path so
for here just edit to our items and as
well in the completion block of an other
Chronos call we need to dispatch our
event dispatch I think come on yes hear
this pitch and get minkyu okay so we
need to dispatch what we want to do on
the main cube because we want to read
yeah now my auto completions broken
swift is not complete supported I think
yes thanks Obama
so whatever table view reload later I
don't know why it's sometimes crashes I
have no idea and this is completely fine
here
and what is this I don't need this yes
okay so now it's fine so as we want to
reload our table view data which means
we need to update our user interface we
need to dispatch it to the main queue
otherwise we will wait some settings
until our until our table view gets
updated so keep that in mind if you want
to update your UI in the completion
block of something from the rest manager
okay so number of rows and section is
already implemented that's fine for here
the last thing we need to do is
cellforrowatindexpath
classic UI tableview delegate so create
a cell which will be the table view dirt
whatever and name cell s UI tableview
cell i think yeah so if so now we need
to create a new cell with your cells
style UI tableview cell style where is
it style whatever and we give in the
views I didn't say like we've already
used it so that's not interesting here
the interesting part comes now when we
grab our user object which is still a
JSON object
we make it that way because we get
served our items and index pass dot roll
so we just get the object from our items
array and create a JSON object from it
because we're pretty much sure we edit
in JSON object so we can create a JSON
object from it so we got our user and
now we can get some information from the
user so we can just say user which is a
JSON object give me the picture and
inside the picture give me the medium
one and finally make it a string so this
would be real pain-in-the-ass if you
would just do it with with all the
casting and whatever it's no fun
so here we can just access all that
inside the JSON array in a single line
so that's perfect
really and we can say with the URL be in
its URL just the picture URL and oh
maybe that might be
better so here we just grab picture of
dummy user just for ya to show you a bit
what we can do here okay and we can also
set the text label of the cell and this
is again very easy just say you say give
me your user name and make a string from
it I think if we use string value we
might even not wrap it so that's also
cool or whatever what's his problem
oh no it's not condenser file it should
be contents of your L of your steam okay
so hope is happy with that and finally
we set the image view of our cell which
will obviously be UI image created from
the data we got from the image URL and
now we can return the real set so let's
start it oh there's an arrow we
obviously can't start it yes that's
be done there and
at this point our cell should be come on
that's the problem in here
I hate those Swift error messages that
just useless I think okay where's your
problem in mind the bra X code here so
there was no real problem I don't know I
copied the swifty jason file new inside
my project and i don't know if there are
any changes or well if you encounter any
problems just leave me a comment or
tweet me something we will get this
working so don't hang up on the hood but
I found another error because somehow I
don't know why the outer completion
inside the completion block is not
really good at the moment so when we
create a JSON object from NS data we
have to say data data otherwise it won't
be created so now everything's connected
we should get the user name into picture
in all rows and we should be able to add
some dummy users so let's try it out
okay so in the beginning everything's
empty let's try to add a user and there
it is mrs. green cat 15 and now we can
just grab more and more and more from
the random user API so as you can see
everything's working perfectly we have a
view controller which talks to the REST
API manager which is a single
and we get those days and objects we can
easily grab the data from which would
other we buy otherwise be very hard
inside this result which have an array
which has object and object and that
would be a real pain so I hope you
enjoyed the tutorial and I would be very
happy if you follow my channel or come
to my blog and leave me a comment and
ever nice day see you the next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>