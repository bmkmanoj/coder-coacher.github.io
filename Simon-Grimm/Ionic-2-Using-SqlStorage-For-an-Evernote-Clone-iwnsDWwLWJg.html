<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ionic 2: Using SqlStorage For an Evernote Clone | Coder Coacher - Coaching Coders</title><meta content="Ionic 2: Using SqlStorage For an Evernote Clone - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ionic 2: Using SqlStorage For an Evernote Clone</b></h2><h5 class="post__date">2016-05-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/iwnsDWwLWJg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone what's up to the sign from
deaf tactic and today I'm back with a
new video tutorial on ionic 2 already so
we're gonna develop a simple Evernote
clone well a very light version of
Evernote indeed but we will use ionic 2
and we will also use typescript because
this is a lot better and angular 2 will
also use typescript so why not start
with it now so without further
information
let's start our app using ionic start
and the blank template and we also
specify v2 so this will be in ionic 2
project and - - typescript so let's
start and wait for the blank app to be
finished after our app is ready let's
navigate to our folder and we need to do
three things so first of all we use the
new generator of the ionic CLI to
generate a page we call it note detail
you will see it later why so this will
be a detailed page for a specific note
and the page is just a simple component
in angular 2 but we will see this inside
the code so additionally also we want to
generate a provider this is a lot like
service of factory with angular 1 and we
will also call this just note service so
this will class this class will handle
the loading and storing of our notes
inside our database and finally we want
to add the Cordova plugin for Cordova
SQLite storage ok
so I guess this will throw up an arrow
and I can already tell you something
about this yeah here it is
so if we use ionic serve we can use this
SQLite without problems because we have
a web SQL inside the browser if we want
to build this app for iOS or Android we
will have a problem because we will fall
back to use this web SQL and this can
get erased from time to time
so make sure to really add this plugin
and maybe go to my blog I will post a
solution for this in general and you can
also google it you just have to install
a specific iOS or Android or in my case
I am on a Mac so this is a wrong iOS
version of this but this is not really a
problem so as I said let's open the code
and also let's already run it what is it
I think it like this so first of all the
code yes well thanks for the mail ok
yeah
so this serving takes a bit longer than
with what we knew before ok so I was
wrong I can use my Google because our
classes are in typescript and this needs
to be compiled so this can take a bit
longer than usual so there was one thing
after we created our low detail page and
this was don't forget to you at
and import so let's do this
right now go to AB theme EPCOR and right
below this insert our no detail page
okay so I've created the app and here it
is so let's move it to the side
yes thanks well maybe a bit big let's
move with it make it a bit smaller okay
might look like a device whatever so
here we are with our project we got the
providers folder and the pages folder
inside the app folder never money fade
modify the www folders so this is
auto-generated on building our app on
the Taipings for typescript we got some
resources plugins those are pretty
standard from ionic one already so let's
go back to what we actually need to do
we got our app and make it yes look like
JavaScript better so this is the
starting point for our app the basic app
TS you already see that we have a
template for the basic root page and the
root page is our home page this was
already generated but we want to add an
import for our node service class which
we will create very soon we can maybe
already go in there so it should be
right here come on
okay a lot better we will have not that
much inside here but export class notes
service is important and we will delete
some stuff up here
I think we
only need the HTTP do we need this no we
need in injectable right and this will
also look a bit different but anyways we
got our node service and that's exactly
what we want to import here so slash
provide us slash no oh come on not cool
not service slash node service this is
our file and we import it so we can add
it as a provider to our complete app
like this so this will already trigger
the constructor I think and initialize
the connection to our database later on
so there's not much we need to do here
the constructor well we can leave it
like this our root page is the home page
we already created which is inside pages
home home HTML and types good but for
now the more interesting part is the
node service so let's save this and heat
onto our node service so inside our node
service we need to first of all import
the storage and also the SQL storage so
add another import storage and SQL
storage and this is from ionic angular
okay let's go to our note service so we
will have a variable storage which is of
the type storage which we import and
initially this will be just now so
inside our constructor we will now
initialize our storage so this dot
storage is equal to new storage and for
the options we just specify SQL storage
so this will create a new connection to
our storage and the first thing we're
gonna do is create a simple query to
create a table inside our database so
let me just copy this for now because I
don't want a typo in this okay come on
okay so there we have it
you don't need to be in SQL master but
create table if not exists notes so we
create a notes table with an primary key
auto increment and we have a title of
the type text and we also have a text
inside which should obviously also be of
the type text all right so this will
create our database notes if it doesn't
exist by now so now let's just add the
standard methods we need so first of all
get notes should return this third
storage very and pretty straightforward
select star from notes so this will
simply return all the notes in our
database
another one we need is obviously save a
note and here we pass a note of the type
note and just to make things a bit
easier we create some note class up here
we could obviously have another file but
I'm a bit lazy for this so just created
inside here and this will consists of a
title a text and also the ID of the note
and also the constructor which should
take the title text and an ID and
finally I think I need you to look for
some code completion or generation tools
because this is a bit boring I'm sorry
for this so whatever we're done with it
and this is all a little note class so
if we want to save a note we first of
all create our SQL statement we want to
insert into notes and we want to insert
the title and the text and therefore we
will have two values which we want to
specify in the next step
so although we save a note we can return
promise or no it's no promise anymore
sorry for this it's just as an Kronus
call and we can subscribe to the event
whatever we will see it in action later
so we will return this dot storage query
again and we pass our SQL statement and
for the variables we pass note that
title as well as note that text from our
note object alright
this is the safe function we need two
more functions let's start with remove
note which again gets a note and this
time while we can use this dot storage
query delete from nodes where ID equals
and now it's a bit complicated but hold
on Oh like this oh no not like this like
that
alright delete from notes where ID
equals note ID the syntax might look a
bit strange but everything's right in
here and this deletes a note from our
database all right finally the last one
we need is to update a node and this is
a bit more well not that tricky but a
little bit longer so let me copy this
again because makes no sense if I have a
typo no and also this starts storage dot
query with our SQL statement so update
notes we set the title to the node title
we set the text to the node text where
the ID is equal to our ID and this is
the statement to update a node so we
save it and I'm not sure why he still
not finding our node service a beautiful
note service is right here
we cannot find module notes service what
have I done wrong
mmm that provide us note service note
service I'm not sure I will start it
again
maybe you find it now otherwise yeah I
think everything's right
not sure what's the problem right here
oh come on cannot find notes else do you
like it like this mmm
cannot find mud you will come on my what
is wrong with my spelling here it's
everything right any angular providers
not sure the
just a sec toll on
interesting so now we have a problem in
the node service which says we can't
find number mmm I don't think so why
should this be a problem
okay so ID should equal ID well this is
indeed something pretty cool about
typescript so we get those little arrows
here up front which we would have gotten
with ionic one a lot later and a lot
more hidden so I'm really happy to have
these locks ok so we got our class ready
let's heat a now over to our home
finally this is again JavaScript come on
you can do this so first of all we need
to import some stuff while we need the
page we also need enough controller
because we're going to push a details
page later on we have three more import
statements let me copy them because I
will make a for sure an arrow so we copy
we import our node service and note I
think I might even leave this out I'm
not completely sure we import our node
detail page which is this one which is
also JavaScript oh come on yeah there's
a no detail page and finally we import
this truncate
we can actually create this file and
this should be inside your app folder
another folder and let's call it pipes
so a pipe is like directive in angular 1
and you can use a pipe well you will see
it just like an angular 1 a directive
and create this file on the pipes
truncate dot TS so now we can also
import it here maybe I need to write
some code for our truncate TS so we need
to import the pipe
from angular 2 core and if I can get
JavaScript highlighting yes I love it so
pretty much the same syntax but we
specify a name and call it trunk aid for
our pipe and the actual implementation
well we can do this later for now just
say export class truncate so we don't
get any compile errors yeah back to our
home TS so as i said we have all the
imports we have the add page which uses
a specific template URL which is the
HTML view and at this point we can also
specify pipes we want to use in that
view which will be trunking hmm at this
point we don't need this line anymore
because we already have it in our root
component in the app so that's a good
thing now let's go to our home page we
obviously want just like an angular 1
scope variable an array of nodes inside
our class and our constructor
we'll hold a reference to the Neff
controller and also to our note service
in the beginning I had some problems
with this because just by typing public
navnav controller this enough variable
is available to your complete class home
page now a bit strange if you come from
other languages where we need a variable
here and would now say this dot nav
equals enough but that's just like it
works now
so this is our constructor and the first
thing we want to do is let's make it
private this is on page did enter so
this will call then the page enters we
want to load our notes ok and let's make
this public
ok so once we call low notes first of
all we set our notes to an empty area
and afterwards we use our notes service
to call get notes so as you know this
will return all of our notes from the
database and we use it with then not
with subscribe in this example like a
promise and we can use come on this
nodes well no we don't need this at this
point
but we need to check if the result rose
length is greater than zero so only in
that case we have gotten some data and
in that case we make a simple loop over
the length of our data okay just like
this and inside wow this is a bit too
much I think
mm okay we can use it like this okay
so in that case for every item we get at
this point
we create a new node first of all we
grab the data which will be a data rest
rows item at the position of our loop
and then we call this nodes push with a
new node object which should obviously
have the title the text and maybe an ID
whoo quite a lot of code but I think
this is pretty straightforward we just
get the notes we iterate over our result
set and just add not the raw data but
clean structured objects to our nodes
array which is typed as an array of
nodes okay trust me this was one of the
most complicated functions so everything
now will get a lot easier let's start
with public at node you can guess what
this does well in fact you can't
because we're not actually adding the
note here but we will push new details
page to our NOC controller why do we do
this yes very good question we simply
push an empty no detail page to our view
where we can then enter the title and
text this is just like an Evernote
creating a new note you just start with
a blank note also we need a method like
note selected in which we also pass the
note and the selected note again we call
this enough push with our no detail page
but in this case we also pass an object
containing our note we will see how this
works
later one more thing
public remove note with a note also
pretty easy so we call our note service
again and say please remove the note
note so as you can see our note service
makes life really easy we can simply use
the functions we created in the first
step of this tutorial now we also want
to remove it from the current array so
use this dot nodes
the next of the note we want to remove
and if this index is greater than let's
say minus one we call this notes splice
starting the index and splicing one
element so this is the complete home
class we actually need to implement the
home HTML as well because otherwise we
won't see a lot in here so let's do this
right now we keep the enough but let's
say it's primary just looks better my
notes and after the title we got eye on
buttons and we want to have them on the
right side so that's why we pass end and
make sure to close it all right inside
we have a simple button with the new
syntax for the click event and the click
event will obviously call at node just
like we've implemented and inside the
button let's say we have an eye on icon
so these are iron icons you can find
them inside the documentation of ionic
and finally close the button so this
should already change the appearance a
bit hopefully
okay what is there a problem in line 42
okay yes so again as I said a great
error and we find the problem instantly
remove no does not exist on node service
yes that is true this should be called
remove node so all of these problems
that pop up would have gotten me in a
lot of trouble with ionic and angular 1
and now I just get them inside my luck
and can be pretty happy about it I'm not
sure why the view not really looks like
it should look but whatever let's keep
going so we got our ion content well the
view actually should update no or am I
in the beyondblue you something seems to
be wrong let's start again no problem we
can already go inside our ion content
and start with a list of our notes and
inside this list sorry
we will have ion items and those will be
already sliding items sorry so we can
slide them to the side to remove our
node all right there is our app and we
got our button we got the primary bar
let's go on we will use an NG repeat
which is now an NG 4 and we iterate over
every item of our notes array
and inside okay I missed one thing so we
will have a button right inside the eye
on item sliding which we'll call the e
come on the note selected event right
with the item of our ng for so we will
put everything here inside the button
this just makes it a bit smoother I have
tried it and this is what worked best
for me
so inside button we now have eye on item
content because I wanted to you have a
title and text otherwise it would be a
bit easier but not with me not today
we're here to explore our ionic - okay I
on I to my own content
alright pretty simple the syntax is
still the same so we have the title of
the element and inside here we have now
in the item dot text well yeah we will
use our pipe at this point but not now I
on item closed I unbutton close so as I
said we will have sliding option to
slide an item to the side so add I on
item options
and inside I on item options we have a
button again which is B which will be
red and the click event will be
obviously to remove the note well close
the button I have item options and
there's something missing yeah you need
to close this one as well and also
inside the button inside the button we
will have simple icon again which will
be the trash I can pretty standard and
close the ion icon and let's also give
it a name delete just for people who
don't understand the button okay so as I
said we want to use a pipe here and this
will go like this as I said no it's not
like a directive I'm not sorry it's like
a filter in angular 1 so let's go to our
truncate and inside we simply have to
specify a transform method which takes
value and an array of arguments so what
we want to do is we want to show three
dots if the text lengths pass the value
we specify so I want after 20 characters
I want to have three dots so first of
all let's grab this
limit which will be at the first
position and what we want to return is
if the length of our string is greater
than the limit then we will return a
substring from zero to the limit plus
three dots otherwise we can simply
return high value so this is our little
pipe and we will see it in action later
so the last thing we need right now is
the detailed page because currently well
the neat day page is empty so let's go
to node detail type script and let's
change this class inside the note detail
page we want to show as I said the
details for a node or a blank node if we
just start out so beside the page enough
controller we also need enough params we
passed to this page and we want to show
a toast once we save our or not
additionally we want to import our node
service and note come on from somewhere
over the rainbow I don't know where it
is it should be in providers note
service again node service yes right
there
we have our template URL and export last
no detail page so first of all every
node detail page will have a node which
is initially not our constructor will be
a bit longer so we need enough params
but those don't need to be public
we just need them here mmm sorry
so as I said we need enough params but
we also need a public note service of
the type note service and we also need
well indeed that's everything we need I
think so inside the constructor we first
of all want to try to grab the note that
was passed inside the knife params so we
call get which is what we specified here
as an object so if we can actually grab
this note and it's unequal to any file
in this case we can simply start using
this passed note otherwise we have a
little problem in that case we create a
new note which won't have a lot
information and also no ID and we call
this safe note so your question now
should be what is this safe note
the answer is in this functional public
safe node and we also add a parameter
shell-bed or well it's actually details
but whatever and by default this is
false we don't always want to show a
batch but we want to show it sometimes
the implementation follows first of all
also add on page will unload so when the
once the page gets removed or unloaded
we will also call this that safe node
and in this case we say true because
when once we leave this page and we want
to show the user that the page has been
saved so let's go to our safe node there
are two options the first one is that
this dot note that ID is not so we've
just created a blank node and the idea
is still now in this case we first of
all need to call our node service and
say hey please save the node this dot
node
and then we can use data we get and say
our notes ID is no theater press insert
ID so this comes directly from the not
service the ID is auto-generated
increment primary key and we can use
this as our ID so this is the case once
we enter with no information if we
already have information which means we
also have an ID it's a lot simpler
because we can use our another function
on note service which is update node
with this node so in this case we
already know the ID and can simply
update the database entry now finally if
we specify show bitch we want to show a
little toastin message
that's why we've imported toast up here
don't we call toaster
create and let's say message note saved
for maybe three seconds should be enough
I think so in this case we say this
enough prisoned our toast please alright
we are almost finished the last part
missing is the view for no detail so
after this everything inside the app
will makes sense again let's use a
primary bar looks cooler the int a title
will now be the notes title so initially
it will be empty and we start the nav
bar inside the ion content
I'm not sure why it's the class note I
think it should be details because this
is some specific ionic stuff and inside
our ion list we make it a list because
we have two inputs and well it just
looked a bit better now actually we have
our first input field for the title
inside this list so it is a simple ion
item inside the ion list in this ion
item will hold an ion input of the type
'text the value will be empty specify a
place all like my awesome node and now
we use a bit strange syntax for
specifying the ng model this was a bit
easier there's nothing syntax but by
using this we get the two-way
data-binding
you know from ionic or angular 1 so the
node title object is now bind to this
input field and will get updated so this
is office input field and the second one
after our list is actually a text area
let's give it like 15 rows a placeholder
Oh what is this like this will be
awesome
yes and yes this is not cool but we
specify it here I don't want to use
anything else right now so we make it a
hundred percent with without any border
and what we also need again is the ng
model which in this case will be note
that text close the text area Tech and
if we have done everything right our app
will now work so as you can see it
doesn't work that's no problem
okay so inside truncate oh yes again
thanks for this information here you
cannot find no detail yes again things
oh I love it
I really love it yes that we have our
view and so let's start this is my new
note you can see the title up here and
my epic text let's simply go back and we
got the toast message our note is saved
what's not happening right here is it's
not really start or is it okay so for
some reason
our note service safe note function does
not what it should do so let me take a
look so I actually had three little or
two little arrows for first of all my
syntax here was incorrect
so the basic table was not created and
also at the remove node function we have
to pass the item so with that changes
you can find all the code on my block as
usual and let's try out our app this is
our epic text for the new node as you
can see the node is saved we have our
node and we have the spoiler of our text
let's go inside and add some more text
she passed 20 characters let's go back
and what we see is after 20 characters
it gets cut so this is what truncate and
our pepti so the last missing thing we
have a sliding option button which is a
danger button with delete at the trash
let's use it and our node is gone
alright so let me show you the last
thing test so the interesting thing also
inside the debug area is that where is
it inside the resources we have the web
SQL and there we have the ionic storage
with our nodes table so this is how you
can debug your stuff you actually need
to remove it on another way just google
it it's no problem but this is just to
show the web SQL storage here alright
friends so this has been the tutorial
this is it
I hope you like this subscribe to my
channels because there will be more
ionic 2 tutorials in the next time and
also go to my blog and subscribe to my
list to get updates about new tutorials
and the complete code for this tutorial
thanks for watching and have a great day
good</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>