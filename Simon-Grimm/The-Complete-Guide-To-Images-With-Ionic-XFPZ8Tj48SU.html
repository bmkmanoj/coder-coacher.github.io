<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Complete Guide To Images With Ionic | Coder Coacher - Coaching Coders</title><meta content="The Complete Guide To Images With Ionic - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simon-Grimm/">Simon Grimm</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Complete Guide To Images With Ionic</b></h2><h5 class="post__date">2015-05-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XFPZ8Tj48SU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up this is Simon from
deaf tactic today we will see how to
gather images with ionic how to take
them life or load them from your library
and we will load them into our app we
will store them into our local storage
we will present them and finally we will
try to send out those media files by
email so let's get started with a blank
ionic app we will need some Cordova
plugins so after our blank app is ready
we need to install first of all ng
Cordova and we also need some plugins I
already got them here so I'm a bit lazy
today so we need the camera plugin
obviously we need the file plug-in and
finally we need the email composer
plug-in which is of this smart guy and
this will help us to open a simple email
client
finally I'm going to add the iOS
platform because I'm on a Mac and I can
build for iOS so if you're not on a Mac
mind that you can't build for iOS ok
let's get started with some code ok we
first of all include the scripts we need
so before Cordova j/s we need to include
lip ng Cordova dis ng Cordova Jas and we
will have some more files later in this
tutorial so I'm gonna already add them
here because otherwise I will forget
about them so we will have some
controllers and we will have services
for our images and files ok we can
already add those files so at the
controllers j/s and also add the
services Jas ok perfect so next we will
go to our app j/s and we will include
the dependency to ng cordova ok so now
we can use it and our app is ready to
get implemented before we come to the
real hard stuff let's implement a simple
view so I'm gonna get rid of this and I
will have an eye on
and it can has header and some padding
and the ng-controller will be the image
controller inside our view we will just
have two buttons and the first button
let's use some styling button full and
let's make it energized and the ng click
event for this button we'll call it
media
okay that's our first button the second
one let's make it positive because this
the positive videos so it's sent our
email and obviously this one will send
the mail okay so the button for our
action is ready now one cool thing I
used in one of my apps
it's a ion scroll with horizontal
scrolling so we need some custom styling
at this point so give it a hate I'm not
completely sure which of those we really
need but I guess we need them all I I
might try it
so overflow scroll
white-space:nowrap okay
close it and inside our ion scroll is an
ng-repeat of images which will repeat
over our scope images which we will see
later and for every image we will just
get the file name of the media so we're
gonna call a function URL for image for
every image to get the complete pass so
our image gets drawn correctly and
additionally we have some more styling
here
okay
I don't think we need more at this point
and can close it there so that's a very
simple view for our we don't need very
much we just need those two buttons and
the array - you have to display our
images we have taken or loaded from the
library okay save it and let's go to our
services obviously this file should also
be inside our module and the first thing
we make here is file service
which as not many okay whatever
not many things to do but you will have
an array of images and this one will be
the image storage key set it to whatever
you like it's just forgetting something
and this service will return the
function store image which we'll call
that we will implement it soon and also
images which returns some images not
very hard at this point so our file
service is just to store and retrieve
the files we have taken or saved okay so
the first function let's make it get
images to start from the beginning so
first of all we try to load an area from
the local storage for the image storage
key and if this exists we will have to
set our local array to the image array
we just load it from the local storage
we need to parse it because we store it
in a specific way so you will see why
later on if we can't get any images from
the local storage we will just have an
empty array at this point so this
function will always return an image
okay somehow my indentation got
up
I'm not sure why well whatever I don't
mind that this yeah okay now it's fine
perfect so the second function we need
to implement is the add image function
so when we've taken an image we will
pass it or the reference or the name or
whatever to this function and this will
just push the image through the array of
image names which our service already
has and also we will call the local
storage to set an item for the image
storage key which will be json stringify
our images array so you can see when we
add an image we add it to the array and
store it and when we want to get all the
images we will get them from the local
storage or an empty array if we don't
have anything right now so that's the
very clean file service for our images
the next section Factory will be the
image service which takes care of
everything to take images and handle all
the stuff so for this one we will have
some dependencies so we need the Cordova
camera and also we need the file service
we just created we will return a promise
and we need Cordova file to store the
image files okay let's start with a
return statement because this one will
be very very simple
so we just want to call handle media
dialogue on this Factory and this
function will take care of the rest so
we are very happy to use this Factory
you can copy it or go to my blog for the
source code and it's very clean
implementation okay so we pass the
variable type because we can take an
image from the camera or we can open the
photo library so we will offer this
option to the user later this function
will return a promise and this one will
be resolved or rejected and for all the
options we need we will create another
function which will give us the right
options dictionary for come on stop
those arrows
so the options for type is very simple
you might have seen it someone one of my
other tutorials about images we will
just have a simple switch statement and
inside we will have the case where the
type is zero so we set the source to
camera dot pitch Sora sky camera and if
the type is one we will set the source
to photo library yeah I hope that's
correct okay so after our switch
statement we can return our object which
needs some more parameters like
destination type
this line is important because we will
get file URI and not a base64 object or
whatever you can get at that point and
this is the source we just said we don't
want to allow to edit the image this is
not needed right now we take JPEG
encoding and we have the standard camera
pop of our options and finally we can
say if we want to save to photo album
but we don't want this at this point
okay so back to our initial function
save media we will get our options now
and now we can call cordova camera get
picture based on the options we just
created and
if it returns anything opaline imageurl
we need to proceed with some more
reactions first of all we need the name
of the image so we need to create a
substring from image URL last index of
slash plus 1 so this will just be the
name of the file okay
let's copy it now we need the pass which
will be substring from 0 to the last
index of this maybe we could also have
it in array and take the person the last
one but for now we leave it and finally
we will have a new name which will call
a function you might know make ID last
name just to have a unique name for our
file okay so as I'm a bit lazy here's
our make ID function
I hope it's formatted correctly now
obviously not
so I hope you're happy now yes okay so
this will return a unique name and when
we have this name we can finally call
Padova file at this point this is a bit
different to the last explanation I had
for this image copying and stuff but I
think this one is much much much more
easy so please take Cordova file this is
just too simple and we need two paths to
pass the path and also the name of the
file we want to copy and now we have to
provide a file system which will be
Cordova file the data directory you can
take a look at the ng Cordova
documentation on what's all about you
can copy images or whatever files to
other folders but this is the private
data folder of your app I guess that's
also a problem and that's why it doesn't
work that good on Android but for now we
copy it to our apps folder and give it
the new name so when this is completed
we call another function which can now
call our file service and say please
store the image we just created at that
point
and also we can resolve our promise at
this point you can also have some arrow
handling so if anything goes wrong we
can reject the promise so what we do
when we call this handle media dialogue
with a type we open the picker with the
camera or with the photo library we get
this image we create a new name for it
and we copy it from his old directory
into our apps directory into a new name
and finally store it to our images array
and local storage so just by calling
this function we have achieved a lot so
I hope this is a very clear service and
easy structure for you to handle okay
now the last part our controller
our controller well in fact has some
dependencies so let's start with scope
okay maybe we don't need all of them I'm
not completely sure but not okay we need
them go to a device we need Cordova file
again we need the ionic platform we need
the Cordova email composer and we need
ionic action sheet and sure if we need
obviously we need our image service and
finally the file service
okay so we had two functions inside our
view so let's start with the most simple
one the edge media function come on and
this one we'll call our ionic action
sheet which is a pretty cool way to
offer I'm so lazy today sorry for this
so inside our action sheet we will have
an array of two buttons and first one
will be to take photo and the second one
will simply be the photo from a library
so if you don't know what this looks
like you will see it when we launch the
app every soon so we can give it a title
name say add images additionally we can
also give it a cancel text
and finally if a button was clicked
we call scope and image based on the
index press okay not very out at this
point
let's eat to the next one which was head
image and at this point we already have
the type we used in the last part so we
call hide sheet to hide our sheet
obviously and now we can call the image
service and say no typos at this point
and let media dialogue based on the type
we just selected and as this returns a
promise
we hope to get a result and we apply
those changes to update our view ok so
right now this would already work quite
fine but there's one more thing we want
to show those images already when we
start our app and we need to wait for
the iana Golic platform ready function
because at this point we can be sure
that all those plugins already we want
to use so if we try to load the images
from the local storage before we will
not have any fun and won't get any good
results so wait for the ready function
and at this point say file service
images to get all the images we have
stored or not stored
okay and one thing we have forgotten is
the URL for image function because
currently or in this implementation I
just stored the name of the file so
that's fine but we need to make sure to
add the complete path which is called
OVA file data directory if you reminded
Plus the image name so okay I'm a hero I
can also return it just okay so all of
you should get all the correct URLs for
the images now and we have the add media
and image function and now we come to
the last path which is sending out email
I'm a bit mad at this point because I
got the implementation for iOS in like
10 minutes
and then there was Android and I was on
this for about 4 of 6 hours and I nearly
got mad because it just sucked so much
so let's make a long story short the
email plug-in cannot access the images
from the folder where we have copied our
images to so this Apfel I'm not sure why
this is on Android maybe you can leave a
comment or tweet me why this is I always
thought
Android was very open for things like
this but obviously this is a problem for
Android and that's why I needed a little
ugly fix at some point because I was not
able to get it working in any way
so you will see the ugly heck very soon
but let's start with the basics if we
have some images in our array we want to
send them out so we take the scope
images be currently I already open up
the device switch at this point and if
it's Android we need to perform some
 stuff so just to show you how
fast it was for iOS it's just like this
it already makes me again said when I
type this
okay and that's all we need for iOS very
sad very sad okay so finally yeah to do
please shut up okay finally I invented
another function which is open email
composer with our images array and this
one come on this will finally open the
email composer and do stuff well we
might already not okay let's go back to
Android because it's so much fun okay so
as I said I had to find a solution and
the solution I have is to copy all the
files from our app directory to a
directory which can be accessed by the
email composer and finally when the mail
gets sent out we delete those files okay
call me an idiot call me whatever this
was the solution I got for this if you
have a better plan please let me know I
hope there's some other way out there
oh this I'm going to copy it
so the name is again the image URL and
the name path is again zero to this
point okay so happy happy
let's go cordova file copy file and in
the name path of the name and we use now
the cordova file external root directory
so this is your external card inside
your android device if you have one if
you don't have one like I did then you
might see the file appearing inside your
root folder it's not very cool but as it
gets deleted afterwards I think we're
fine maybe you should make sure when you
delete those files that you don't delete
well anything of your root directory
which you don't want to delete so
finally
okay so this will just take the image at
the first position because it's an
isochronous
task to copy it and I don't want to yeah
to explode the size of this article to
have a loop for other crona's tasks and
wait - or finish them so that's left to
you guys so if you found a solution for
that I would be happy if you let me know
so in that case I would include them
into my tutorial on dev tactic okay so
the last thing we need to do is open our
email composer you may compose okay
whatever
and pass the mail images which at this
point will obviously be only one image
but well whatever that's like okay at
this point I could also
Oh what am i doing
I don't know Rach again okay so when
there we have copied this file through
the external directory or the root or
whatever we can push the new path
through the mail images and call the
email composer now finally this one is
very standard you might have seen it in
the other tutorial I had about this so
we can give in some HTML if you like to
it's obviously optional and now we have
our email we have to whatever some email
comm you can include many more things
just take a look at the plugin on github
and we will have our attachments we can
give it a subject like Dec take images
we can pass our body text and finally
say is HTML true at this point some of
you had problems because they are
written like this I don't know if this
might be a problem on Linux or something
like that but on a Mac you're fine with
this so the last thing we need to do now
is call the cord over email composer I
hopefully have no typos and call the
open function for the email we just
created and we call back the glory comes
to its end
so at this point we need to make sure to
delete all the files we have just copy
it so get the name
and get last innings again and again and
finally call Cordova file remove file or
maybe there's a security mechanism which
prevents from deleting your root
directory
I hope eras and so when the email
composer is done we go through all our
attachments and we get the true name and
try to remove the file at the position
we copied it to so I'm not very proud of
this solution but well it works so we
have done a lot we have created a simple
view with two buttons and an array and
horizontal scrolling we have this
beautiful file service which stores and
retrieves our images and we have this
huge image service which handled just
everything we need to be handled and
finally the controller so I'm a bit set
I can not show you the email
functionality but ok so there's a
problem ok so finally it might be
working now let's take a beautiful
picture and here it is well perfect
let's take another one yeah so we got
this very cool horizontal slider which
is just a nice bonus for you inside this
video tutorial so I'm sorry I cannot
send a mail because the cordova plugin
is not working in the simulator I
recommend you take a look at my
because at the preview image there's a
picture of the email composer and I
tried this tutorial on iOS and on
Android so please make sure you have no
typos like me at some stupid positions
and yeah well I hope you enjoyed this
video tutorial and you can now create
your own app with image handling and if
you have any more to say or if you want
to leave a feedback or implement one of
those function we talked about I would
be very happy to hear of you so stay
tuned follow my channel for more
JavaScript angular I uh make mobile
whatever tutorials and I hope I'll see
you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>