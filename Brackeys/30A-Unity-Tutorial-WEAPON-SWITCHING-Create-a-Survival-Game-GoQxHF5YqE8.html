<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>30A. Unity Tutorial, WEAPON SWITCHING - Create a Survival Game | Coder Coacher - Coaching Coders</title><meta content="30A. Unity Tutorial, WEAPON SWITCHING - Create a Survival Game - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>30A. Unity Tutorial, WEAPON SWITCHING - Create a Survival Game</b></h2><h5 class="post__date">2013-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GoQxHF5YqE8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone number comes some video
number 13 our survival game series done
by practice I'm the CEO of Black Keys
and in this video we're going to take a
look at a much much better method for
doing weapon switching than the one we
had before so we are basically going to
create a whole new script which is going
to take care of stuff like being able to
switch weapons using the scroll wheel
and also the different numbers on the
keyboard and so we can have more than
just two weapons that will toggle on and
off so that's really exciting and let me
just quickly show you this drawing I
made just to show the basic
functionality of the script we are going
to be making so it's basically split up
into two parts the right-hand side
inside of the square here and the
left-hand side I know here we're going
to be changing a variable and this is
just going to be changing a number and
we're going to do that depending on the
scroll wheel and the button or the
number buttons and over in the left hand
side we are going to our enable and
disable different weapons depending on
that variable okay so let's go through
this rather quickly
um the variable everything is depending
on is the current weapon and that's
going to range from zero to the max
weapons so the maximum number of weapons
we want to carry so if we set the max
weapons to two they're going to be able
to carry a carry three weapons because
the current weapon will go from zero to
one and two two and we're going to be
able to add on to that or subtract from
that using the scroll wheel up and down
input or we are going to be using the
input gate key down one equals zero 2
equals 1 3 equals two and so on if this
is not clear to you yet it hopefully
will be
it's a little bit confusing confusing
with all the numbers and so okay so once
we have this current weapon variable
under our control we will send it over
to another function called select weapon
and this will basically find the
children of our melee object so find all
of the different weapons parented to
that object and then it's going to
assign numbers to each weapon so the
first one is going to be 0 the next one
is going to be 1 and so on then it's
going to search through and disable all
the weapons that doesn't have a number
that matches the current weapon once it
finds the weapon with the number that
matches the current weapon then it's
going to enable it then it's going to
check if the weapon is actually a weapon
or if it's just fists and so if it's
just a fists weapon so you don't want
the the animation to play a swing
animation but instead instead wanted to
play a punch or this could also be the
case for different kinds of weapons if
you want decorous to have some sorts of
animations and sorts to have others then
you can check here whether or not it's a
sword when that's it's a dagger and if
it is it's going to enable the weapon on
meaning that we are going to play swing
animations and if it's not a weapon
they're going to disable the weapon on
and so it will play punch animations and
you can have the principle going with
different kinds of weapons but to keep
the symbol we'll just have the weapon or
not weapon ok so as always I've opened
RB unity and you can see we have our
arms set up here as always and under the
player can find them under our main
camera and there we have the arms o 5
and if we just go through the rig or the
armature we will find the empty game
object holding all of our web
soand our arm armature go to master
inner arm right and again you don't need
this complete rig you can of course get
it from our website for free but you can
also just have any kind of empty game
object and parent weapons to that but in
our case we have it inside of this rig
since we wanted to follow the animation
of our arms okay so under the hand right
the whole ride and then the melee we
have our different weapons so this is
where we want to create the new script
so go to add component and then call and
then new script and let's call this
weapon switching zero two and whoops
I've already done that I'm just going to
do tests after that but in the assets
pack it will be called zero two and the
language is going to be JavaScript now
hit the create an Add button and we can
double click it to open it up in
monodevelop here we go
okay so we are going to rename the
function start to function awake and we
are going to use that later so for now
we can just keep that but I will space
out the bracket keys I just like it this
way I think it keeps it more organized
okay so let's first declare some
variables and - you know we are going to
be needing are the current weapon and
the number of weapons so let's type var
current weapon equals zero by default
then a new one
var let's call this max weapons and it's
going to be equal to two by default and
remember whenever this is - the maximum
number of weapons we are going to be
Cary be able to carry is going to be 3
because we count the serial
okay great we are also going to need one
last variable though and this is going
to be the animator and that's because we
want to access our animator controller
if you have one we have for this series
and we want to be able to set the
controller to the controller that we
have a weapon equipped or that we don't
and so we want the animator so type void
the animator of type and you mater with
the capital there we go
actually let's make that one D
capitalized great so now in the function
update we want to create the pod where
we change the current weapon so inside
the function update will write if input
that get axis oops
get axis and then open parentheses mouse
scroll wheel like that
remember the capital letters it's very
important close parentheses is less than
1 or is 0 sorry it's less than 0 then we
want something to happen what we want to
happen is we want to say if current
weapon plus 1 is less than or equal to
max' weapons
like that then we want something to
happen again
so there and that is current weapon plus
plus so the current weapon should be one
more than it already is we could also
say plus equals one if the current
weapon plus one is is less than or equal
to max' weapons we want to add one to
the current weapon if not so else we
want the current weapon to be zero
current weapon equals zero and then a
semicolon and undo here we will type our
whoops let me just make sure I get this
right so undo the else statement we want
to type select weapon current weapon and
this light weapon is the name of our
function where we will actually select
the weapon and disable all the others
and we want to send with it the current
weapon variable so all of this is not
something I'm going to go into too much
detail about because it's really hard to
explain but basically we are just making
sure that when we bump up the scroll
wheel it will add one and when we bump
it down it will subtract one and it's
going to do this as long as it's inside
the max weapons range
and so so under this if statement we'd
want to type else F input that get axis
mouse scroll wheel is bigger than zero
so if we are scrolling the other way we
want to do something else and here we
want to check if current weapon minus
one so we are really just reversing the
process it's bigger than or equal to
zero open up the bracket keys current
weapon - - semicolon so that if the if
we don't get the if the mouse scroll
wheel is less than zero we want to add
on to it and if it's if it's more than
zero we want to subtract from it and so
we are so if the current weapon - one is
less than or or is more than or equal to
zero we want to subtract else so here
we're just making sure that it won't go
below zero else
the current weapon
equals max weapons so it will loop that
way so whenever we get below zero it
will jump up to the maximum amount and
so we can just keep on scrolling through
and I used to my : okay so if this was
confusing you it's completely
understandable it was confusing me when
I just started out making this type of
logic but I just thought that we should
put this in our game because it's really
really a much much better way to do
things so after the else statement a
statement we type selects weapon again
we're calling the function current
weapon there okay so that's it for the
scroll wheel part of things now we are
going to make sure that it will do
correctly and so so after the else if
you're going to type if current weapon
is equal to max weapons plus one ND
parentheses and inside of the bracket
keys you're going to type current weapon
equals zero so if the current weapon is
one bigger than max weapons it should be
zero so if it exceeds the max weapons
amount we'll loop it back to serial and
we can keep on scrolling if it and then
we're going to type another if statement
so if
current weapon is equal to minus 1 and
then the bracket keys then we are going
to type current weapon equals max
weapons so if it gets below zero it will
loop back to the max weapons amount ok
so that's all we're going to do for
looping and so on now we should actually
be able to play this and have it work
except we just need to add the function
but for now we'll just have no logic
inside it just to test if things are
working so go down type function and
we're going to type let's call the
Select weapon so select weapon and we
are taking some input and let's just
call this input index let's just stand
that name for the phone and input number
and it's going to be a type integer and
now we can just close off the bracket
keys not typing in any logic yet so say
that let's head into unity and see if we
get any errors it looks like we are
error free and we have some new
variables here so if we hit play now and
scroll up the variable will start
changing and if we scroll down it will
change the other way so we can scroll
and it will loop just like we wanted to
and you can of course reverse the mouse
scroll wheel by just changing this sign
so if we change this to bigger than and
this true
smaller than then we have reversed the
scrolling effect so if we had play now
and I scrolled the other way oops
selected the wrong objects here he'll
play now and scroll the other way now
when I scroll up it goes to two so it
adds on and when I scroll down it
subtracts okay great so now let's go
back in here and let's create the
function that will allow us to just
press buttons in order to press to
change weapons so make some more space
in the update function and let's type if
and this is really much more simple
let's type if input that get key down
and then open up parentheses key code
dot alpha one and the alpha one is
basically just the numbers that are not
on the keypad on the keypad on your
keyboard so just the basic numbers on
top of all of the letters and we want
the alpha one and not the Alpha zero
because that's just standard for
shooters so remember that
okay so let's close the those off and
open up some bracket keys whoops I'm
making a lot of typos but I can't see
the keyboard because of the huge
microphone shoved in my face so I'm
sorry about that but we'll continue on
so if we press the 1 key we want the
current weapon to be equal to zero and
we want the Select weapon to be called
with the current weapon variable else we
will only change the number and not call
the function to actually change the
weapons and remember you have to create
as many of these if statements as the
maximum number of weapons you want so if
you want three weapons to be the max
you'll have to
change these if statements so create if
statements for that number
so if input dot get key down get keep
down their key code dot alpha to close
it off then we want the current weapon
equal to be equal to one and we again
want to call the Select weapon with the
current weapon also and now you can just
go it ahead and duplicate this down
below adjust it to so it fits this
should be alpha 3 and this should be two
and now we should be good to go so let's
go inside of unity and see if this is
working so I hit play and when I hit the
when I hit the two key it changes to 1
when I hit the three key it changes to
two and when I hit 1 it changes back to
zero and I can again still adjust this
using the scroll wheel which is what I'm
doing now and so you can really get some
nice results and have the player use the
method he wants ok awesome so now we
want to actually call the weapon
switching stuff but I can see that this
is turning out to be quite a long video
so I'm going to cut it up off here and
we'll take care of that in the next
video so I hope you guys enjoyed it I
know this was quite difficult stuff but
I'm sure you will understand as we go
forward so thanks for watching and I'll
see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>