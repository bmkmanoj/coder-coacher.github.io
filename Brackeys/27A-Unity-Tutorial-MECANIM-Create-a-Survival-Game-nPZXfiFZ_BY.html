<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>27A. Unity Tutorial, MECANIM - Create a Survival Game | Coder Coacher - Coaching Coders</title><meta content="27A. Unity Tutorial, MECANIM - Create a Survival Game - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>27A. Unity Tutorial, MECANIM - Create a Survival Game</b></h2><h5 class="post__date">2013-06-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nPZXfiFZ_BY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and welcome to video
number 27 in our survival game series
done by Brad keys I am the CEO of Black
Keys and in this video we are going to
take into mecanim so Meccan 'm was
launched with unity 4 and it's basically
the animation system of unity so making
them is is really powerful and you can
do a lot of things with this but make
sure you have your unity updated or else
you won't be able to do these things so
we are going to look at a pretty basic
making them setup and and here we have
the a picture I just quickly threw
together
which explains kind of the setup we are
going to use this is not the exact blend
tree we are going to be using but it's
just to show you how you could set
things together so on our player we have
our main camera and under our main
camera we have our arms on them we have
the animated component starring a
controller and that's really what we are
going to focus on in this video if you
want to know how to set up these arms
and import them correctly watch tutorial
number 25 I believe where we do just
that that's two videos ago but basically
the controller the Meccan m controller
is what allows us to add animation and
blend between them depending on
variables which we can then declare in a
script and that's a really long sentence
and you might not understand this yet
but I will explain explain a lot of
things so don't worry about that okay so
this is basically how a making them
controller could look and it stores
different animations in here we have
three different animation we have
standing we have jump and we have punch
so if we just see
in on this might be able to yeah so we
have the standing we have the jump and
we have the punch and from the different
animations to the other we have
transitions and these transitions do
several things they store information
about how we want to blend between
animations so how they should physically
move between and and how long of a
fading time that should have and so on
but they also store information about
when to to transition so for example if
we would determine whether or not we are
running we would do this depending on a
speed variable or if if we want to
determine whether or not we're jumping
we would do it using a boolean which is
a true or false okay so let's now
actually dig into unity and apply this
so here we have our arms and if we go
under our and find them in our project
pane there you can see we have the
animations set up so they are working
just fine and now we want to apply them
in game last video we or the last video
where we made animation we covered how
to add the controller so this is how our
controller looks so far and this is just
basically one single state which is the
idle using the idle motion or the idle
animation clip and it's playing with the
speed of one and the reason why this is
Orange is because because it's the
default clip it's going to play so if we
right click on it and hit the make set
as default we can make this the default
clip so so that's really useful and
that's usual the idle animation you want
to be set as default next up we have
this and this is just included in any
controller in making them by default
this is called the any state and this
allows us to just blend into animations
no matter what state we are in so
normally you have you make transitions
from States to states but this will
allow us to blend into an animation from
any state meaning that if we would for
example want to include an animation
where we die so if our player dies we
want to be able to do that rather not he
is running or hitting something or
idling whatever we want to be able to go
to the dying and so we will have an
animation set from the in estate it's
really important though that you
remember to make and if on the
transition so that it won't just die all
the time okay but that's not what we are
going to focus on now I am getting ahead
of myself so let's just really focus on
that so let's add in some more animation
clips and the next one I want to make is
the whether the idle animation so we
could go under our arms and then select
our animation clip and just drag it in
so let's do that so under our arms
expand that and then have the idle with
weapon select selected and then just
drag it in and here we see it so let's
just move these over here so we can have
a good view so basically we want to play
the idol by default but if we then equip
the weapon we want this to be playing
let's just turn off the foot okay and
let's make a transition and you do this
by right clicking from where you want to
transition hitting make transition and
then clicking to where you want to
transition and let's now hit click on
this transition and so you can see we
have quite a few things going on this up
here is not what something we want to
focus on so we can just ignore that we
want to term turn off the atomic here
then we want to set a condition
so the condition is the if-statement
basic basically so this will allow us to
have making them check whether or not
something is true before actually
transitioning so let's make a new one so
let's make a plus actually let's just
change this one by default you have the
condition called exit time and this
allows you to just transition back
whenever the animation is done playing
so if you want to just transition back
when you have played it once for example
in an attack animation you can use the
exit time but before we can make a
condition we want to add a parameter and
a parameter is basically a variable so
hit the plus down under the parameters
and then select the boolean we want to
call this weapon is on and or we could
call it equipped let's just leave it at
on so we don't have to type all that
much and now we can click bang it back
on the transition go under conditions
change it to weapon asan and then true
so if we put on our weapon it will
transition to the idle with weapon and
this is a time line so here you can
scrub through your animation and you
will see it changing in your preview so
if we just expand on this just a bit we
can see it playing here whenever we
change the slider and so we can go in
and zoom in here and use all to navigate
around and then we can go to this point
where the idle with weapon starts and we
can see that it's fading down here so
let's just hit play and see if this is
fitting I want that to be just a bit
quicker the closing of the hands so what
we can do is we can zoom it in even more
so now we can really see the transition
and then we can take the end of the
transition
and just close that in or you could take
the start and close that in but we are
just going to go with the end use so
bring in the end a bit there we go and
if you want this Idol with weapons to
start right at the transition you can
just drag it all the way to the right
and it will snap back now let's hit play
and the fingers close closest really
fast so hit play and that looks great so
that's how it will blend and when we're
satisfied with that I am now we can go
ahead and make the transition back again
to the idols so hit on Idol with with
weapon then hit make transition and go
back to the Idol and so now under the
conditions we want weapon is on to be
false and if we zoom in we can adjust
the transitioning here so let's hit play
and that's really too slow again so
let's just drag this in that's a bit too
fast this is really a matter of
preference that's really great so you
could have an animation that will
actually pick up or switch the animation
here so so we could have him pick it up
from the back or from the ground but for
now we are going to go with the simplest
so just have it open and close and then
the weapon will later just spawn in on
his hand
but that's something we're going to
cover again the inventory system is on
its way
okay great so next next up let's create
just a state for running so under the
parameters here we can have the speed
variable and for now let's just set it
to something like 3 so under here the
parameters hit the plus sign make this a
float change this to speed and let's
just have that a default at 0 actually
let's just start out by having this a
boolean so we can quickly test it out so
make that a boolean instead call it
speed
and now we can just or is running let's
call it that so it's running and now we
can just have a state with the running
so now we can just quickly test it out
and then later in the script we will
have it be a float so that we can
determine the speed inside of making it
if you didn't get that that's alright
but let's drag in the run animation onto
making them and hit the foot okay turn
that off and the run animation is
basically something we want to be able
to shift to from both the idle and the
idle with with weapon we don't want it
in the any state because we don't want
to switch to run while while hitting
something you could do that some games
do that but I don't want this game to do
that
so now let's hit the idle hit the make
transition and then click on run now
select the transition and the condition
should be changed to is running and that
should be true
and now let's go down to where it fades
zoom in on this childhood play and that
actually looks pretty good
yeah I'm satisfied with that we could
make it just a bit slower yeah like that
and now let's make the transition back
again so run make transition then idle
and let's again set the condition to is
running equals false and let's zoom in
on the transitioning the play and that
looks great already I think sweet now
let's do the same with idle with weapon
so make transition and then click on run
the condition should be is running
equals true let's have a look at how it
behaves so I play that's pretty great a
little bit of sudden movement maybe we
could have this extended just a bit
that's really great that was maybe a bit
too much that's perfect and now let's
make the transition back again and and
that said this too is running equals
false and let's see if this works that
looks great
yeah okay so on you might think that
this would work though we have one
problem with the setup we have now and
that is if we take a look at our
transitioning back from the run so the
two back transitions here to the idle
and to the idle with with weapon they
have the exact same conditions and so
this would make run confused whether or
not it should transition to the Idol or
the Idol with weapon if it's no longer
running so on this we want to add
another condition so from the run to the
idols like the transition hit plus and
then say weapon is on equals false so we
want to transition back to the Idol if
the running is false and the weapon is
on is false then select the other
transition from the run to the Idol with
weapon add another condition weapon is
on should be true so if it's not running
but it has the weapon equipped it should
transition back to the idol with with
weapon let's see if this is working so
we could drag down our animator to our
project pain maybe drag it up a bit so
this is how it looks let's select the
game and hit play remember that whenever
we don't see something animating down
here all we have to do is select our
arms and then hit the apply root mouth
motion you really just have to turn this
on and off it's a buck with unity and
something I haven't found out how to
solve yet but let's hit the play now and
we can see it animating we can see the
little
bar down here and now you can go down to
the makin em vendor window and we can
hit the weapon asan and now it changes
and the loops perfectly now we could
change to is running so we see the arms
running if we then unequipped our weapon
while we are running so changed from the
weapon asan to false and then turn off
the is running it goes back to the idle
animation and so we can play around with
these things to see how they transition
back and forth and this looks overall
really fluent and it's a great setup so
far so that's it for this part of this
video I am sorry I have to split it up a
little so I would go just ramble along
for too long I think but in the next one
we are going to set up hitting so we are
going to get in our animation clips with
the swing animations and the punch
animations and that's going to be really
awesome after that we'll take a look at
inventory systems weapon switching and
so on and so forth I hope you enjoyed
the video guys and I'll see you in the
next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>