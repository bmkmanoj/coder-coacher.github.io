<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>15. How to make a 2D Platformer - ENEMIES - Unity Tutorial | Coder Coacher - Coaching Coders</title><meta content="15. How to make a 2D Platformer - ENEMIES - Unity Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>15. How to make a 2D Platformer - ENEMIES - Unity Tutorial</b></h2><h5 class="post__date">2015-03-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eVbfgSt7hAQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thanks for tuning in at brakus hello
Anna welcome to video number 15 in the
how to make a 2d platformer course in
today's video we are going to make our
enemy search for our player whenever he
dies so that it will continue chasing
him when he spawns back in we are also
going to make on the first part at least
of the central enemy component which is
going to store health and other stats
and functionality for destroying this
enemy and maybe making it spawn or
something we'll see about that
I've planned some of this tutorial out
completely in my head but I've also left
some of it for us to figure out together
because I think that it's it's good for
you to see how to kind of figure some of
these things out as we go instead of
just knowing it already so without
further ado I'll just do one quick plug
here because I've just released UPA to
kid version 2 and this new version it's
not backwards compatible because it
features a lot and lot of changes it's
much better now I've used a new method
for serialization of your images it
introduces a layer system it's just
generally much better structured so
really check it out it's it's totally
awesome if you want to make pixel art in
unity for free cool so as always if you
have any questions go to the forums and
let's just stick right into it so as you
can see I have done nothing since we
left our scene last time here you can
see we have our enemy AI script and our
alien spaceship right here and what I
want to do with this is just drag it
under the prefabs folder so we can spawn
multiple enemies later like that and you
can see when I hit play it will chase
after and if you enable gizmos up here
and select the spaceship we should also
be able to see if we open up the seeker
script here we should
be able to see the path that it draws to
our player so that's just a bit useful
when debugging cool but the issue as is
is that when we jump down we die and we
hear this respawning sound I'm just
going to disable my monitors here you
can see that the enemy doesn't chase us
it just has this a point that goes down
here but it's stationary so the way to
fix this is sticking into the enemy AI
script so double click that to open it
up in monodevelop here I'm just going to
zoom in a bit on this maximize it so
it's easier for you to read and you can
see that we have a few checks here
checking if our target is equal to null
and currently we just panic we do the
same in the fixed update function and in
the update path enumerated method so and
what we do here is instead of just
returning each time we want to now start
looking for the player so let's first
off make a private boolean that is going
to tell us whether we are looking for
the player or not so searching for
player it's good to give keep these long
descriptive names you're going to thank
yourself later if your script gets
script gets really long and we're just
going to default that to false then
inside of our start function here we can
write out kind of what we want to happen
if our target equals no we don't want to
panic instead what we want to do is we
want to check if we are searching for
the player because if we are already
doing that then we don't want to do
anything in here so we're going to say
if we are not searching for the player
and then we can do some functionality
inside of this like this and what we
then want to do is we first off want to
sit searching for play to true and then
we want to actually search and in doing
this what I want to do is pay
sigelei call a method more specifically
and I enumerate a method that we can
then do all our searching lock logic in
and then it's going to call itself with
some delay if we haven't found what we
were looking for so it's going to search
maybe each second or two times a second
or something like that so we don't do
our searching every frame because
looking through a bunch of game objects
especially if you have a large scene can
be pretty taxing that's no reason to do
such a large search every frame so in
order to do this what I want to do is I
want to say start co-routine and in here
we can call the method that is going to
do our searching and we're just going to
call this search for player and remember
the open and close parentheses there so
I think this should be good we're going
to say that we are starting to search
for our player and we're going to call
the a search for player method then down
here maybe above the update path
ienumerator you can put it wherever you
want we're going to type I in numerator
search for player and this should stop
being read in a second and then open and
close our parentheses and then put in
some brackets and now you can see that
it stops being read up there because now
it can find on the method inside of the
script then what we do inside of this
method is first off we arm we want to do
a game object dot find so we do a game
object whoops
game object dot find game object with
tag and make sure this is singular and
then in here we can put whatever tag you
want I'm just going to put in player if
you want the different enemies to search
for different things you can of course
make this a variable just a symbol
string and then you can
in put it in the hierarchy or in the
inspector I mean I'm just going to
hard-coded here but you might be better
off doing something else cool but we
want to store this in a temporary a
variable called game object of type game
object I mean we're going to call this s
result for search result the reason why
we don't just directly equal target to
this variable or to this value here is
that this is going to return a game
object so in order for this to be valid
we would have to do dot transform and we
can't access the transform parameter if
this doesn't find anything so first we
store it in a variable then we check if
that variable as that is is equal to
null or not and then we can assign it to
the target so now we say if search
result is equal to null then we can stop
searching so if we if this or then we
can I'm sorry then we can continue
searching and we do this by calling
again
the search for player method but with a
short delay so let's type in yield
return new waitforseconds remember we've
done this down here and then we're going
to put in and you could do an update
rate again I'm just going to hard code
this to 0.5 F seconds that's how much
it's going to be between each update and
then down here we can then start a code
routine and this is going to be the same
code teen that we're currently in so
search for player and that way we're
simply going to loop so what we have yet
is that if our target is equal to null
and we are not searching for the player
we're going to start searching for the
player and make sure that we store this
in a variable then it's going to jump
down here it's going to find the results
for game object with tag player it's
going to store it in a temporary
valuable we're going to check if it's
found something
and if it hasn't we're going to rate for
half a second and then we're going to
repeat the searching if it has found
something so else if it has found
something what we want to do is we want
to first off say that we have found what
we were looking for so we don't want to
search anymore so searching for player
equals false we also want to set our
target equal to s result dot transform
and we also want to return and remember
whenever you're inside an enumerator in
order to return we need to put in some
kind of boolean value I'm just going to
put in false and then lastly we want to
start updating our path again because
down here what we do when our target is
equal to null is we return and whenever
you return out of an eye enumerator or
any other method that isn't called again
it's going to stop going so our update
path here is simply going to start
stopped updating so we wanted to or we
want to tell it that it should start
updating again so we're going to type in
star curl routine update path remember
the parenthesis and a semicolon and this
way we loop back into the update path
method now we can take this are checking
this if statement block up here and we
can simply copy this and we can replace
this one with that and we can replace
this one with that now when we hit save
hopefully we don't get any errors we do
let's see here an object of type
convertible to build is required for the
return statement as we are and we forgot
anything here so here we're going to
return false
again this is an eye enumerator and down
here we are simply going to return so
that should fix it
indeed it did let's try this out so hit
the play button it's going to look for
us and it's going to work just fine then
when we jump down it's going to stop
doing anything when we spawn back in
it's going to search for us again and
you see the delay there of half a second
is not something that you would ever
notice you might even bump that down to
one second if you are really optimizing
your game maybe if you're doing mobile
or anything like that cool so that was
the first and most important part of
this tutorial sort of say this fixed the
most apparent bug and I'm just going to
close down this enemy AI here and moving
into the scripts folder because it's no
longer needed and now we can continue on
to the stuff that I haven't quite
planned out but which should be pretty
fun which is actually writing out an
enemy component that is going to be
central for any enemy that we have so
let's hit add component new script and
you can see I've already typed their
enemy and it's going to be of type C
sharp then we hit create an ad
double-click it to open it up in
monodevelop here and what I want to do
here is basically copy a lot of the
functionality that we have within our
player script because they they're going
to be fairly similar so we can simply
take all of the stuff inside of the
class here copied in here then we can
simply rename player stats to enemy
stats we're still going to have a health
then we can rename this here also to fit
enemy stats here and it's going to be a
new enemy stands there and then I
actually don't want to do a player stats
I think stats this is quite ok and then
down here simply do stats rename that to
stats we can delete the update function
and the fault boundary
and down here if we don't want this
method to be called damage player we
want this to be called damage enemy and
then in here we don't want to kill the
player whenever our health it goes below
zero
we want it to kill an enemy so we need
to go into the game master script and do
a kill enemy method so we're going to do
game master dot kill enemy and we're
going to give it this and then we're
going to put in a semicolon save that
now we can go back into or into and find
the game master script double click that
and you can see here oops that we have a
bunch of convenience methods sort of say
that handle all of the respawning the
player and the killing of the player
separately from the player itself and I
want to do the same here with the enemy
because it's just better to have this
central game master that does all of the
respawning and all that so you don't
have to reference yourself and do weird
things when you want to do things after
the object has been destroyed such as
doing a sound or whatever so what we
want to do in here is first of all just
kill off the alien spaceship we simply
want to call a destroy method and we do
this by making a new method here you're
going to call it a public static void
I'm going to call it kill enemy you're
going to take in an enemy which we're
going to call enemy and then inside of
the curly brackets here we're simply
going to call a destroy method and give
it as the input the enemy dot game
object this is very simply a similar to
the kill player method up there so let's
see if this works we're going to save
this out our errors disappear and then
looks like it looks like it's working
but currently we have no way of damaging
ie and spaceship because we actually
have a damaged enemy method available
but we're not calling it anywhere so as
you can see right now when we hit play
and click there
oops lots of paths here it's quite
annoying I know you can disable these
but first off I just want to see here we
hit a in space spaceship and did ten
damage we call out these debug log
statements but we are not actually doing
any damage so if we double click that
it'll take us right to the point in I
weapons es script which sits on our
players somewhere on that player on the
arm on the pistol here you can see the
script sits right here an inside of this
we are not currently doing any damage we
assembly are calling a debug lock so
what we want to do in here is maybe we
can keep the debug deadlock for now it's
it's nice to have but we can also check
if hit dot actually let's do it this way
we are going to store an enemy component
call this enemy and we're going to equal
that to hit dot getcomponent oops hits
that game objects some reason this is
not really doing what I wanted to hit
that Collider dart game object or get
component yeah we can do a get component
directly on that and we're going to get
the component side above enemy and we're
going to simply close that off and then
we're going to check if enemy it's not
equal to null so if we have actually hit
an enemy we're going to damage it so
we're going to say enemy dot damaged
enemy and we're going to give it the
damage amount of damage so say that and
then in here we can
make this debug deadlock statement a
exclusive to the enemy so we are only
going to call that whenever we actually
damage something so now let's close that
down clear out the logs here and we can
see we have some kind of error I'm going
to bring the console log down here so
it's easier to read it has some invalid
arguments are we for some reason doing a
damage variable of type float here yes
indeed we are so let's make that into an
integer let's see if that gives us
another error no that just clears it out
and let's hit play so now you can see
I'm just going to pause here so now you
can see that whoops
actually I want to maximize this now you
can see that when we are hitting our
enemy enough times that in health its
health goes down it will just destroy
itself so that's super cool currently we
have our alien over here and it stats is
set to a hundred health and our pistol
is set to do ten damage so let's see if
if that is that is indeed correct
currently we are shooting really really
quickly I'm just going to set that fire
rate back down to zero so we only so we
need to click each time I'm going to
click one two three four five six seven
eight nine ten and then it curves down
so it's this is a really cool system
because we have the stats isolated we
have the weapon isolated we have the
destroying isolated in the game master
script and so this is really flexible
and allows us to easily add components
such as a enemy health bar which I would
very much like to do assume so that was
pretty much all I had to show for this
tutorial I hope that you were able to
follow even though I haven't
I had not quite planned out everything
step by step but I just thought it was
really important to sometimes show you
the actual process of figuring these
things out so again thanks for watching
I hope you enjoyed it and I'll see you
in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>