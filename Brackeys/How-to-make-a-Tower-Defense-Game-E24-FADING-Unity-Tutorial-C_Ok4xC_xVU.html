<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to make a Tower Defense Game (E24 FADING) - Unity Tutorial | Coder Coacher - Coaching Coders</title><meta content="How to make a Tower Defense Game (E24 FADING) - Unity Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to make a Tower Defense Game (E24 FADING) - Unity Tutorial</b></h2><h5 class="post__date">2016-11-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/C_Ok4xC_xVU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thanks for tuning in at brakus hello
everyone and welcome to this video in
creating a tower defense game in unity
today we are going to be fading between
scenes something a lot of you guys have
been requesting me to do and so finally
we're going to do it so let's just jump
right into unity here and I basically
just want to create and start by
creating some very very simple UI that
we can animate on and off whenever we
want to fade so let's just go in here
and right-click on the UI and select
canvas let's drag this to the top of our
level and we already have a lot of
different canvases in here but it's
going to make it a lot easier if we just
have this sit on a separate one let's
right-click on this canvas go UI and
select image and basically what I want
to do is to stretch this image to fit
the entire screen so we'll go over here
we'll hold on down alt and we'll click
in the bottom right corner to make sure
it will always stretch to fit the screen
so this is our source image and this is
basically what we'll be animating on and
off in order to create this fading
behavior in our case I want this to be
black so I'll just set the color to
black here and I'll set the Alpha to
zero but what you can do is choose any
kind of color and you can even go in
here and specify an image preferably
something that fits the entire screen if
we go in here and select the laser beam
err that looks kind of weird but we
could essentially animate that on and
off in case you want to create kind of a
loading graphic but in our case again
we'll just go with the standard fade to
blank so what we'll do now is to go to
our canvas and remove the graphic
raycast err this will just make sure
that whenever we play the game and try
and select other UI elements it will not
block our rays so that we are actually
still able to interact with UI that
would just be really annoying that if
some invisible image was blocking our
ability to interact with the UI and yeah
everything else looks pretty good one
thing I will do is just rename this to
something like maybe just flag actually
or fade image or whatever awesome so now
let's go ahead and create a script that
will control the alpha channel for our
black image and we could just put this
on the game
strain that would definitely make sense
but I want to go ahead and create it on
a separate object so that we can turn
this object into a prefab that we can
just drag into any scene that we want to
have fading in so let's just create an
empty object reset the transform and
let's name this something like scene
fader let's also add a component called
scene fader
of type C sharp we can then drag this
object to the top here and drag our
canvas as a child of that scene fader
object now let's double click to on the
scene fader to open it up in visual
studio and let's have a look at actually
scripting this out so the pace of what
we're going to be doing today is
actually fairly similar I mean we are
just going to animate a single number
which is the Alpha Channel on our image
over time but because we are dealing
with kind of doing things after a
certain amount of seconds say fading out
and then loading in the new scene and
having those kind of timings in there
it's much easier if we use co-routines
and corrode teams are a bit weird syntax
wise so just stick with me here and try
and absorb everything you can and some
things remember you just have to learn
by doing and try and get it in there and
see if it works and then you can always
get caught up on how everything is
actually working behind the scenes at a
later point so up here we're going to be
using a lot of name space of course we
are going to be using Unity engine we're
also going to be using systems our
collections for allowing us to do Co
routines the ienumerator stuff we'll
also be using unity engine dot UI
because we want a reference to our image
and unity engine dot scene management
because we want to be able to change
scenes so the base of what we want here
is is just a reference to our image so
let's create a public variable of type
image and let's call this one just image
let's just save this right away and jump
into unity and reference it so let's
just select our scene fader and let's
find our black image and drag it into
this slot this way we won't forget we'll
also want some kind of
function that will fade in and another
one for fading out and we want these to
be of type I in numerator so instead of
writing board here we write I in
numerator which is the scary word and
then we write something like fade in and
everything else is just like a normal
function then what we do is we think a
bit about what do we actually want to
happen well when we fade in that means
we want to go from black to seeing our
scene and that means that we'll have to
animate our image from being having an
alpha of 1 and then slowly down to zero
which means that it slowly disappears
and underneath our scene is revealed and
so it's fading in so when we fade in we
actually want to make a Mach number
smaller and the way that we do this is
by first having an idea of time so let's
create a variable here of type float
which we called T and we set that equal
to we can set it equal to zero by
default or we could set it equal to one
because we want to animate from 1 to 0
so let's just do that and then we'd say
while T is greater than zero then we
want to do something so we want to keep
on animating until our T value here our
time value reaches zero and so every
time we actually go through this we want
to decrease our time value so we'll do t
minus equals time Delta time and right
now you might think well why are we
using time that Delta time when we are
not inside of the update method and
that's a totally valid question to ask
because if we just looked at this like a
normal function we would think that this
would T would just decrease on in like a
single frame and we wouldn't notice a
thing but this is the power of using an
enumerator we can go in here and we can
control exactly when we want it to
actually skip a frame or wait a frame or
wait a certain amount of seconds and
that's what we'll do so every time we
decrease our Teva there
we also want to go in here and say yield
return zero and what you'll return zero
means is basically just skip to the next
frame so just wait a frame and then
continue so basically what we have here
now is a function that when we call it
creates a variable called T and say that
sets it equal to the value 1 then we say
that while T is larger than 0 within
which it definitely is in the beginning
we want to decrease it by a tiny bit of
time and then we want to wait until the
next frame and it's still not less than
or it's still bigger than 0 so we want
to decrease it again wait a single frame
and we keep on going until it reaches 0
and then we go then we get down here
okay so we have this loop that will
animate slowly over time in the at the
same rate as our update loop would until
it reaches a certain point at which
point we can then we'll say load is seen
or do something else but in our case
we're fading in so we don't want to load
anything basically we don't want
anything to happen here so um yeah
that's awesome but we are displaying our
T value anywhere what we want to do is
of course have this be displayed on the
Alpha channel and we could very easily
just go in here and say that image dot
color dot alpha should be equal to our T
value and actually we can't do that
directly because we can't modify alpha
on its own we can only modify the entire
color which means that we have to input
both red green blue and the Alpha at
once so what we can do instead is we can
create a new color and we can give it a
value of zero zero zero if you want it
to be black like me and then I'm not
black but I wanted to be blank that was
a weird sentence and we can continue so
and then we can input our alpha here
which is going to be our value T so in
this case it's going to just animate
from zero to one over one second
so and you could of course multiply a
speed onto this if you wanted to we
could just go in
here and decrease with time that delta
time multiplied with some speed value
that could be one if you want to it to
be from zero to one and one second to if
you want it to be from zero to one in a
half a second or 0.5 if you want there
to go two seconds so you can of course
add that in there but I'm going to show
you something much cooler so this is of
course going to work except of course we
have to call the function
so let's now create a start method so as
soon as we start the game we want to
call this fade in function and remember
again when we have to do with kuroh
teams we of course don't just call the
function that would be way too easy what
we do instead is we go start co-routine
and then we input the function into that
start corroding method so that's how we
call a KO routine instead of an ordinary
function so let's save that and we
should see now that if we just pause the
game hit play and then and you can see
something is wrong with the way we're
drawing things here we'll fix that in
just a moment but you can see here that
if I now unpause it it's going to
animate slowly and fade in so that's
awesome so let me just fix that small
error there and that is because I mess
up the sword order if for some reason
did I change it and something else I
have no idea what I did maybe it just
didn't save so let's just go in here and
bump up this sword order there we go and
now you should see my point that we are
able to yeah it influences all UI
elements so we already have fading in
but one thing that we could do that's a
lot cooler is give ourselves ultimate
control over how the fading occurs
because one a lot of movies and also
games do is they don't have a linear
fading they have kind of a curve with
different kind of properties to it they
might have like a positive swing on the
curve they might have a negative swing
on the curve I'm just gonna show you
what you can do with this stuff and
unity has a really really cool way
of easily implementing these kind of
curves it's called the animation curve
so let's just create a new public
animation curve here and let's call this
our fade curve or maybe just curve we
can save that and we can just head into
unity and see what that looks like and
you might have seen this before
when it comes to doing animation so this
gives us this curve and they have some
presets here so you can see the linear
one would be the exact same as we just
had if we use this it's just going to
slowly go linearly from zero to one we
could also use this one which gives it a
kind of the negative curve here you can
see that slowly increases and then it
goes faster and faster we can also use
this one where it very quickly increases
and then it kind of slows down until the
very end a lot of movies actually use
this some use this and of course some
use linear transitions or you could go
completely crazy and make your own
curves in here which I'm gonna show you
how looks in a second did this will
actually kind of fade it in and then
fade it out and then fade it back in so
let's use this curve so basically in
order to apply the curve what we do is
we instead of just inputting our T value
here we apply an extra step so let's
create a float a for the Alpha value and
we set that equal to and then we use the
T value here the time value as the input
for our curves so basically this down
here will be our T value so say our T
value is 0.3 in our case the curve would
give us a value of about 0.1 if it was
0.6 it would give us a value of around I
believe that something like 0.35 and and
you get the idea
so basically what we'll do is just go in
here and say that we want a to be equal
to curve dot evaluate and then we give
it the T time awesome so in our case of
course because we're going from 1 to 0
it's going to animate from the top here
and then all the way down
so that would look something like this
it looks really nice and just to show
you that this is actually different than
before let me just try to give you a
really weird looking curve and just just
to show you and you wouldn't probably
have this in your game what you can
actually do with this so let me just
whoops let me show you what that looks
like so it's a play here and you can
that wasn't too apparent let's try that
one more time I believe it should work
now so that said play here and oh I know
why we need to input the a here awesome
so now we have we should have it
actually working of course we need to
input the Alpha and not the T so now you
should see this crazy curve working so
here you can see it fades back so we can
actually totally control how the fading
occurs I just thought that was a really
really neat detail awesome so basically
what we need to do now is just create a
another version of this function that
fades out and then we need to of course
actually play these functions at
appropriate times so let's just
duplicate this entire method and let's
paste it down here and we'll call this
one fade out we'll have our T start at
zero and we'll have it animate until
it's no longer less than one and instead
of decreasing it every time every frame
we want to increase it so now we need to
of course call this method and instead
of just calling it directly from other
scripts let's create kind of a helper
method that's easier to call than ocurro
T so let's just create a public void up
here public void and let's call this
something like faith too and we also
want to be able to specify what scene we
want it to actually fade to I mean
currently we're just fading to black and
fading back in but we also want to
actually change scenes so let's just
specify as a string here the UM scene
that we should transition to and what we
do then is just called
fade out as ocurro teams of star
co-routine start co-routine and teen and
decoding we want to start his fade out
and of course we need to pass the scene
onto a fade-out co-routine so what we'll
do is just add this as a parameter down
here as well so string scene and we'll
pass this scene onto there so it goes
down here and we can use it at the very
bottom so when we're done fading we've
faded to black and we're done with our
animation we reach this part of our code
and then we can go scene manager that
loads scene and we can just input the
scene that we just specified awesome
so that should pretty much be all we
need to do in code so what we can do now
is of course call this because well we
do need to call it from somewhere but um
what I want to do is just package up the
scene fader object into a prefab so
let's just expand our prefabs folder
let's drag it in there and now we should
be able to easily add it to our main
menu as well so let's jump into our main
menu let's drag our scene fader back in
and now when we make a change in one
place it's very easy to update on all of
the other places by simply hitting apply
so let me just demonstrate how this
works let's say use our main menu so
inside of our main menu we currently
have a play button and if we press this
button it calls a load scene on the
scene manager with the level 2 load in
our case we want to reference to a scene
fader instead and you could very easily
just go in here and say fine object of
type scene fader
and then you could do something like dot
fade - and input arm level to load and
this would work just fine but of course
fine object of type does require a bit
of computation so what we'll do instead
is just add a direct reference to our
scene fader which will called scene
fader and then instead of finding it
we'll simply use that reference so scene
fader dot fate - level - load and then
of course we just need to remember that
we have to drag in our scene fader into
the slot in order for that to
but that should actually mean that now
when we're play it fades in we'll play
it fades out and it fades into the next
scene and it looks awesome so all we
need to really do now is just add this
to a retry button as well
you can see it always always fades in
but we also have to make it fade out
turn menu we haven't really done that
transition yet and to our game over
screen so let's just very quickly go
through it and in case you aren't using
this for the tower-defense course you
can just go and add it to the places
that you would want it to fade in your
game so let's now go through our main
level here and let's find first of all
our overlay canvas where we have our
pause menu and our past menu of course
uses the script on the game master
called pause menu let's just double
click this so we have a function called
retry where you can see we currently use
our scene manager to reload are
currently active scene well instead
let's first off create let's create a
public scene fader let's just call this
scene fader much in the same way we did
before and then we just go scene failure
dot fade - and we input our scene which
is going to be the currently active
scene so in this case we use scene
manager dot get active scene dot name
and we don't use spilled index because
we've only implemented it with the name
but if you just as easily create a
version of the function that used the
build index instead and of course we
also want to transition to our menu so
here we just want to go scene fader dot
fade - and then we input something like
main menu but instead of hard-coding
this in it's always better to create a
variable for it
so we'll do that as well so we create a
public string main or something like
menu scene name and we'll set that equal
to main menu by default and we'll put
that down there instead so save that as
well
and then inside of our main menu that is
fine
at last we have our game over screen
which is right here and we have a few
things that we want to edit about this
as well so let's open our game
over menu and just before I forget under
a past menu we also want to toggle we
also want to toggle our past menu if we
go to the main menu Orioles the game is
still going to be hung up and it's going
to look weird with the fading and all
that you always want to disable that so
just to make sure to call charcoal on
there as well but inside of our game
mode where we should now be able to do
the same to a retry so we'll go up here
create a preference public scene fader
scene fader and we'll go down here we'll
say scene fader dot fate - it's the
exact same piece of code we want to we
want to fade to the same existing scene
so get active scene dot name there we go
you can just copy this code even and
inside of our menu we go scene fader dot
fade - and then we want some variable
for our main menu again you can just
hard code it or you can create a public
string called the on menu scene name
which we call main menu by default and
then boom I believe we're done
awesome so just save all of that it's
just inserting this code a few places a
few places in order to get this to work
and I believe now that things should
actually be working so one thing I'll
just very quickly do is take our enemy
prefab here and just bump up this part
the start speed so that we can quickly
more quickly run through a level here so
now when I hit escape and the pause menu
comes up I hit retry we get a null
reference of course we need to set all
the references up inside of unity as
well so let's go in there over there
canvas let's find out game over menu we
need to drag in our scene fader we need
to do the same thing for our game master
under the pause script we need to drag
in our scene fader and again you won't
get that problem if you use something
like game object that fine or fine
object of type but this way is faster so
if you just remember to do that on and
are able to do that definitely - so it's
just it's just better on the computer
it's going to make your end-users are a
lot more happy so
now we can hit escape retry fates out
fates in looks awesome we can hit menu
fits outfits in the menu hit play goes
back to the original scene let's just
try running out of time here as well or
running out of lives so our guy goes
through here completes the level and we
run out of lives
it says game over and we can hit menu
for example it's going to work just fine
and the same thing with the retry button
so that was basically all I wanted to
show you for this video I'm just gonna
reset our enemy while I still remember
to do so I hope you enjoyed this kind of
very specific UI fading thing I
definitely think that using the curves
here really give you a lot of control
over exactly how you want stuff to
happen and yeah I just thought it was a
pretty cool fairly unexplored approach
so yeah hope you enjoyed it thanks for
watching and I will see you in the next
video thanks to all of the awesome
patreon supporters who donated in
October and a special thanks to Sultan l
should've Facebook mera Phi and James
Calhoun become a supporter at
patreon.com slash breakfast</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>