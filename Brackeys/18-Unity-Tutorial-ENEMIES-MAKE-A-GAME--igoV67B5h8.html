<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>18. Unity Tutorial, ENEMIES - MAKE A GAME | Coder Coacher - Coaching Coders</title><meta content="18. Unity Tutorial, ENEMIES - MAKE A GAME - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>18. Unity Tutorial, ENEMIES - MAKE A GAME</b></h2><h5 class="post__date">2015-01-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-igoV67B5h8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thanks for tuning in at brackets hello
and welcome to video number 18 and make
a game a closed series on making a video
game in unity in today's video we are
going to expand on our game by making
our first enemy this means that we'll be
able to collect points whenever we kill
this enemy not only from collecting the
coins that are scattered around the
level and we'll also be able to die not
only from falling down but also if these
enemies actually get us so we might not
be able to do everything in this one
video but we'll definitely get started
and do the most important stuff so just
before we get started here I want to
quickly mention that I've made a new
asset on the unity asset store it's now
freely available and it's called unity
pixel art tool kit or UPA toolkit for
short and what it does is it allows you
to create pixel art inside of unity so
you don't even need Photoshop or learn
any advanced software you can just
download this for free and it's it's a
very quick and small download and you
can just start painting and it's very
seamlessly integrated with unity and the
new t2d features so if you want to make
a 2-d game this is definitely the place
to start now that I've done enough
self-promotion I just quickly also
quickly want to mention that on the
forums from top bracket com is where you
want to find answers that is where you
have the highest chance of getting an
answer actually pretty much anyone does
cool so without further ado let's open
up a unity and let's browse into level 1
our main main a level here and this is
looks like a pretty good place to place
our enemy and he's going to be wondering
just like in a Mario from a 1 check
point to another and then back again but
for the movement we are going to be
using the animation system which means
that you can very easily get more
creative than that and maybe
make him go in circles or follow a path
or why something so he's not going to be
actually tracking our movement if that's
something you're interested in I suggest
you check out the 2d platformer tutorial
where I just did a three-part inside of
that course on AI and pathfinding but
that's in c-sharp and it's a bit more
advanced so I thought I would just keep
it simple here and it's pretty fun I
mean Mario's one of the most popular
games everyone and that uses just this
technique cool so let's get started
let's go to game object 3d object cube
to spawn in a cube on our world we're
going to be using some placeholder
graphics for now I have a good friend of
mine called sameen I've been working on
some nicer ones then we can press ctrl
shift n or command shift then if you're
on a Mac to create an empty object you
can also find it under create in MT here
and then we are going to reset the
transform on that reset the transform on
the cube Center on it by hitting F then
we can rename the game object here to
enemy center then we can rename the cube
here to graphics then we can create
another empty object again reset the
transform it's very important that all
of these are at 0 0 0 and then we rename
this to enemy we drag the enemy under
enemy center drag graphics under enemy
and now we have this hierarchy that you
see here and you might be thinking right
now this seems all kinds of complex why
did we do this with multiple empty
objects inside the others and I am going
to show you why so let's take the enemy
center here and you want to be very
careful that every time you move this
object it's the enemy center that you
move not the enemy or the graphics then
we can move this over here just drag it
over here somewhere in the center here
that looks pretty fine
then we can just drag it down a bit so
it floats just above the surface
something like that and you can see that
this cube already looks very nice in our
game of course make sure to see the
value is zero because we follow the 0s
z-axis okay so the reason for doing this
hierarchy is that we are going to have
him again move from one point to another
but whenever using the animation system
inside of unity what will happen if you
key frame danam a shinto let's say here
and then make him go over here and then
move the object over here maybe because
you would let the CM hero but because
you would have another enemy over here
or for some reason just you want to move
this guy then what happens is the second
that you press play it just jumps back
and that's not really something we are
interested in we want the movement to be
relative to our starting point so to do
this we don't an animate the enemies
center but we use this as the starting
point of position and then the enemy
inside of this all the movement here
will be relative to the enemy center you
can see if we select our enemy that it
currently has a position of zero zero
zero and that's because that's relative
to our enemies Center which you see is
currently right if we press pivot on
that is currently right here so you can
see that relative position cool so
that's really awesome and to further
illustrate this what I want to do is I
want to create a label just like this
one up here for the enemy Center so I'm
simply going to press down on this one
and maybe select a red one because this
is of course a dangerous enemy so now
you can see that when we move our enemy
out the enemies center state also under
the enemy I have one for graphics we're
going to delete the Box Collider on this
one this is simply going to be our 3d
model once we get it imported that has
all of the animation
inside of it all of the actual cute
animations that are going to be here
hopefully and then right beside this we
are going to have objects for the
colliders this way of splitting it up
makes it very easily to adjust colliders
and on that on its own and graphics on
and on their own and keeping those two
things separate it's a really good idea
because what we can then do is say if we
want to make the enemy passive we can
just turn off the colliders if we want
to maybe make him disappear we can just
turn off the graphics and we don't have
to let delete the entire game object
every time we want to manipulate
something or find components or anything
like that
so that was quite a lot of rambling
let's get on to animating this guy so
select the enemy Center it's very
important that it's the enemy center you
have selected go to window animation or
press control 6 and let's just dock this
down here then we can go ahead and
record a new animation so press this
record button here and quite a few
things will happen as soon as we do this
first off we get this dialog where we
can save our animation I'm going to drag
it into the animations folder in a sec
first off I just want to save it here so
I can show you what happens I want to
save this as maybe enemy move one
because you can have multiple enemy move
or maybe just enemy move side to side I
don't know I'm just going to call this
one however descriptive you want to be
it's up to you so now let's hit save and
quite a few things happened here first
off you'll notice that our play pause
and frame by frame button up here turned
red there also appeared a new component
over here this button here the record
button is now red and if we go into our
project panel you can see the two new
files I here so first off let's just
disable the recording here so all of
this doesn't get read and this turns
back on and all that and let's just have
a
look at what these two files actually
are so this one is maybe the most
central one it's part of the amazing
animation system that is inside of unity
and this is called an animator
controller what an animator controller
does is it basically controls the
relationship between different
animations it's basically the brains of
any kind of animator you have in the
scene so let's say you had a character
that could both shoot walk and jump you
want to have animations for on that well
this is hand is what handles the
relationship between those how it blends
between them when it can transition from
one to another and all that
it sounds really complicated but it's
laid out in a really cool way so if we
double click this it will open it up in
the animator and inside of this animator
notice that it's not called animation
that's why you do your animation the
animator is where you build
relationships between animations but
inside of the animator you will note
note that we have two nodes and as the
these are chords they are called
animation nodes and one is any state
that's just a default one that we can
ignore and the other one is this orange
one code enemy move one the reason why
is it's orange is because this is the
default animation this is what we'll
play whenever we hit the play button and
you can see that it's currently selected
as the motion the animation that we just
created which is this one so that is the
difference between these two this is the
brain that says that we want to play
this it's a very complicated thing for
what the kind of animation that we're
going to be having here because the
enemy will mostly just play the enemy
move animation but if we had again
something like a player this is very
very awesome because then we can drag
multiple animations in here maybe we can
drag this in again and we can make
transitions between them and sit and all
of that but for now I'm simply going to
delete
and stick with this if you then say
wanted to make different versions of
this enemy move let's say we want to
make one that goes up and down and one
that goes left to right what we want to
do is create the different animations
inside of here you can make a new
animation by going create a new clip
here and then create a another enemy or
another brain basically so we can just
duplicate this brain go in here and then
drag in another animation here and then
on the object that you want to have this
other animation all you need to do is go
under the enemy Center and select the
animator here and then simply drag in
the new brain so this is where you
select the controller or the brain that
you want to have for this object I hope
you I haven't confused you too much I
just try to keep this kind of let's say
elaborate so that you could get an
understanding of how this actually works
but now let's do the animation let's
actually turn back on the animation here
you can see these are red again that's
because we're currently animating now
select the enemy not the enemy Center
and drag this over and you can see that
we've made some keyframes so I think
we're just going to start somewhere
around there and then we can go further
in in time so you can scroll zoom out by
using the scroll wheel and we can zoom
out to maybe two seconds and then we can
drag it over here and you can see that
it automatically creates a new keyframe
whenever we move it so you can see we
have our position here on the x y&amp;amp;z you
can see that the y&amp;amp;z stays the same but
the X animates over time
and what we can then do maybe I want to
do the exact same movement to the right
as I do on the left actually so let's do
if this is negative three point four
five will make this positive three point
four five like that and then we can
simply copy the frames over here go
forward to the four second back and
paste them and this way when we hit play
now we have an enemy that moves from one
frame to another you will notice however
that the looping currently looks at a
bit weird if you want this to be very
smooth simply select all of the key
frames right click and hit flat if we go
into curve mode here select all of these
and hit F you can see that it's now and
very nice smooth curve here so if we hit
play you can see that it's smooth this
out do you start and stop or if you want
to do full Mario style you can select
all of the keyframes right click them do
both tangents and then select linear and
you can see now that it's very linear
motion that we get so we have this very
harsh starting step motion or you can go
in and maybe animate this yourself if we
stop this if we then select all of the
keyframes here I'm going to do that in
here right click go to a free smooth go
on the curves and then you can now
animate this yourself but I would like
it to be this very silly Mario style
again so I'm going to right click both
tangents and choose linear for now at
least then we can turn off the recording
and we can now make this into a prefab
and I scatter it around I've seen so
let's drag the enemy center into our
prefabs folder let's also drag the two
animation the animation and the
controller inside of animation
folder and we can now duplicate this
enemy Center maybe move it over here
also and you can see that when I hit
play they both move just like that so
that's super cool but what we can also
do is you can mess around with this
animation any way you want to so if we
want to say make it a bit more fancy if
you wanted to move up also you can just
do this or maybe make another keyframe
right does that so we can make it move
up here so we can make it go in a
triangle like this it's completely up to
you but you can play around with it
freely just to make it suit your
preference I'm simply going to check my
time here yeah we are running out of
time here so what I will do now is I
will very quickly show you how to kill
our player whenever we actually let
let's do the killing of the enemy first
so I'll show you how to kill our enemy
when we jump on him so go into the enemy
here and we'll go under the enemy object
again create an empty game object drag
it under the enemy zero the transform
it's very important hit add component
then to a box Collider here make sure
it's a box Collider not a 2d particle
either then we can scale this or drag
this down a bit scale it outputs maybe
tiny bit something like this and maybe
scale it a bit down on the Y and drag it
down again here that looks pretty nice
the the thing that we're going to be
doing with this Collider is whenever our
ball hits this it's our ball that's
going to die and then we're going to
create another Collider up here that
whenever we hit that our enemy will die
so what we're going to call this is
maybe kill box
and then we can duplicate this and call
this one hitbox we can then make this a
lot smaller a bit taller and drag it up
so whenever we jump on this thing up
here is where I is when our enemy will
die that looks pretty nice it doesn't
have to be too big make sure you don't
make it too big so that it's only when
we actually hit it on the top that it's
going to die something like that looks
pretty good and what you want to do is
you want to select both of these objects
it is trigger that's very important at
that zone
because else we're going to be actually
colliding with it and we cannot do the
functionality that we want to then under
the hitbox we can add a new script so
let's hit a new script and we can call
this die on hit like that then on the
enemy Center we'll do add component new
script and then we're going to call this
enemy so we have the central component
for the enemy and then we have this die
on hit on the collider then later we can
have a kill on hit for the kill box but
we're not going to be doing that today
and then what we want to do is we want
to select both of these colliders and we
want to make sure that the only thing
that they are going to register
colliding with is the player so a nice
way to do this is using the physics
layer system so up here in the right
hand corner you can see that we can
select the layer we're going to add a
new layer and we're going to call this
player collision so we're going to have
a layer for everything that needs to
only collide with the player the
we can simply click on that layer here
assign that layer to both of them then
we need to have a layer for the player
so we can select the ball here go on the
layer hit add layer we're going to make
this the player layer we can select the
ball again and assign the layer to him
player layer and hit apply and now we
can go and edit project settings physics
and here is the layer collision matrix
and this allows us to control what every
layer can collide with what layer so the
player collision doesn't collide with
default or transparent effects or ignore
raycast water UI or player collision but
player collision does collide with
player so we'll simply keep that on
there so you can see that player and
play a collision meet here that means
that they will collide and that's the
only thing that our player collision
should meet with cool if that's a bit
confusing just follow me here and what
we can do is we can now go and open our
scripts so let's double click on the die
on hit and on the enemy and it will open
them up in monodevelop
there's the enemy script oops it made
two instances of monodevelop that's not
quiet but I want it let's see if we can
make it open it up in the same instance
oh it's bugged out for some reason okay
I'll just switch between the fatuity
between the two instances then so inside
of our enemy here what we want to do is
create a function for whenever we want
our enemy to die so we are simply going
to call this function die it's very dark
and the curly brackets here and for now
we are simply going to say destroy and
put in the game object key so whenever
we call this function we are simply
going to destroy the game object later
we are going to add a particle system to
this maybe some sound effects may be a
death animation there's plenty of things
we can put inside of here and then of
course make sure that we are add to our
score but for now let's just destroy the
game object hit save on that and then on
the inside of the die on hit we're going
to have a function called and this is
very a it's very necessary that you make
that you call it exactly this it's going
to be called on trigger enter it's very
important that that's your exact naming
because it's else it's not going to work
and this is because it's a function that
unity will call whenever something
enters our trigger inside of this
function what we are going to type is
simply first off we need to find our
enemy component so we make a new
variable called and call this enemy with
a small e then we equal this to
transform dot find oops dot get
component in children or in parent and
then inside of this research for our
enemy
and then down here we say enemy dot die
like this so if we save this let's see
if we have any errors we do a component
dark a component parent for was not
found by enemy that oh yeah of course
transform dark a component and parent
enemy is this game object to take a
component parent no some reason get
component in parent is not working with
the string then we can simply input our
enemy so recently going to type enemy
like this and it should work code so
what we are actually doing here is
whenever something collides with our
object we create a new variable and call
it enemy we then set it to the enemy
component that we have attached to our
enemy Center so it's going to look
through all of its parents first it's
going to look on itself there is no
enemy then it's going to look on the
enemy there's no enemy and then on the
enemies century which is where our enemy
component is then on that component we
call the function died so inside of this
script over here we call the function
died which will then destroy our game
object so that's a very nice example of
how you can communicate between
different scripts we simply collect it
and call a function which will then be
called over here if we try this out hit
play you can see that whenever we jump
on our cube here
I'm going to try healing this nope I'm
going to try that again
this is embarrassing okay there you see
I didn't actually hit it from the top
but the reason why is that we currently
can't collide with the sides but you can
see that when I hit it from the top
it works too a way to get rid of this
annoying bug way you can hit it from the
sides too we could go ahead and actually
bring back the collider on the graphics
here or make a separate object file that
again if you if you want to just to make
sure that we can roll in from the side
and collide with it you can see that
this should work and indeed it does on
there if we jump up we can then hit it
we might want to make the collider a bit
smaller like this and maybe bring it
down a bit let's try it out again see if
it's a bit better and this is something
that you can play around with until it
works just the way you wanted to now
looks very nice to me whoops that's a
bug we need to get rid of - you don't
leave any spaces where we can't fall
down the jumping is actually really
really hard here so I do suggest making
him go a bit slower or whatever you want
to do - to balance it you can see that
we hit him on the tab but he didn't
quite die so maybe a bit bigger again
again this is simply balancing you get
the technique it's there I'm simply
going to go into the animation - and
make it go a bit slower something Li
drag this out so with the four second
mark and make this go back to eight it's
nuts twice as slow and you can see just
how easy it is to tweak using the system
so now it's it's much lower and actually
looks some but much more like something
that would be inside a slow paced game
like this
and you can see that if we hit on top
the enemy dies so that was basically it
make sure you apply our changes on the
prefab you can experiment with this and
then in the next video will actually
make the player or make the enemies kill
our player our ball and we can maybe
also make some more advanced effects so
thanks for watching this video I hope
you enjoyed it and I'll see you in the
next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>