<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>8B. How to make a 2D Platformer - SHOOTING - Unity Tutorial | Coder Coacher - Coaching Coders</title><meta content="8B. How to make a 2D Platformer - SHOOTING - Unity Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>8B. How to make a 2D Platformer - SHOOTING - Unity Tutorial</b></h2><h5 class="post__date">2014-07-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4ivFemmpYus" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">actual shooting function so let's go
ahead and do void shoot and we're going
to open up the curly brackets here and
inside of the shoot function we're going
to be doing a bunch of stuff with ray
casting and bear with me you might be a
bit confused along the way with all of
the calculations and there are some
longer lines but it's it's actually not
too difficult and it's something that
you can't just memorize and then do but
I'll do my best to explain it for you
so I'm first off let's just go ahead and
check if everything is working let's not
get our head ahead of ourselves let's
just make a test debug that legs log
statement here to see if our fire rate
is working so when we hit play now we
should get a debug deadlock saying test
when we click and indeed we do so you
can see here now we are getting some
test logs let's go ahead and change the
fire rate to five now and see if we hold
this down oops let's bring it up here we
are getting the five tests per second
cool so let's go ahead and make that
zero again and now we can go ahead and
put some actual code in here so let's do
vector two and let's call this mouse
position so here we're going to store
our mouse position as a vector two and
we're going to set this equal to a new
vector two and just make sure to open up
some parentheses and inside of these
we're going to type camera dot Maine dot
screen to weld point
and we are going to give it the input
dot mouse position and then we're going
to do dot X outside of the parentheses
there oops
we are missing a parenthesis and then we
are going to do comma and then we're
going to do camera dad main dot screen
oops screen to wall point and again
input dot Mouse position close it off
and then do dot Y so that's the whole
line it's a long one but basically what
we're doing is we're creating a new
vector to called Mouse position and we
are assigning it the screen to world
point of our mouse positions X and the
screen to world point of our mouse
position Y this way we will get we will
translate the position of the mouse from
screen coordinates into the position in
the world and therefore we can actually
use it to do a ray cast we wouldn't be
able to do this with screen coordinates
because they are very different from the
system that we use in the actual world
for the transform that's what we're
doing there whoops let's bring it back
up here okay so what we're going to do
now is we're going to go ahead and make
another variable and we account again
kind of make a vector two and let's call
this fire point position you're going to
set this to be equal to a new vector to
inside of the parentheses you're going
to say fire point dot position dot X
comma fire point dot position dot Y so
here we're simply taking the fire point
which is the point on
are the tip of our gun here and we are
starring that position as the victor -
then next up we are going to go ahead
and actually make the raycast so we're
going to say raycast hit 2d and we're
going to call it hit and we're going to
equal it to physics 2d dud ray cast now
we are casting out the Ray and this is
going to take some arguments so let's do
fire point position it's the first one
that's the beginning position that's
where we're going to cast the rate from
which is our fire point position and
then we're going to give it a direction
so what you don't want to do here is
just type mouth position because it's
not from and - it's from and direction
as you can see here the static public
static Rick's ray ray cast hit function
called ray cast takes two arguments the
first one is the origin and the second
one is the direction so how to return
the mouse position into a direction well
we do this by taking point a or point B
and subtracting it with point a so this
is point a so now we're going to take
mouse position and subtract fire point
position from that and now we actually
have the direction and then we can do
comma and here we have the ability to
either make a distance so you can input
a float here to say how long out is this
Reagan stretch if you want some weapons
to only hit inside a certain distance we
could go ahead and set this to something
reasonable maybe a hundred it's just
going to continue infinitely let's
actually go ahead and do that
so let's do 100 and then also we can
give it a layer mask so remember we
created a layer mask up here with what
not to hit well we are simply going to
input that here so we can just going to
say not to hit there so that was it for
the actual ray casting we are pretty
much done with the hot pan here now we
can just go ahead and show it because
none of this is visible so for now we're
just going to be using debug draw line
which will not actually appear in game
but we're going to be do a bit of
trickery to make it appear while we're
testing so now we can go ahead and do
debug dodge draw line and this is super
useful and then you're going to give it
the starting point unlike the the
raycast this just takes a start and an
end not a origin and a direction so we
are just going to give it the starting
point which is our fire point position
and then we are going to give it um we
could just put our mouse position here
but instead let's just make it stretch
out infinitely so we can really get a
sense of the direction I mean you could
just go ahead and do this and now hit
bag in-game and we should see oh yeah we
need to do enable gizmos this was the
trigger II I was talking about so up in
the right-hand corner you need to select
gizmos in order for this to work and you
can see now that when I click the mouse
it actually draws array out to the mouse
point and actually while we are testing
this let's go ahead and make it just
shoot all the time so in the top of the
update function we're just going to type
shoot so we can really see the line here
now I'm just going to shoot all the time
to my mouse and you can see that this is
actually working but what I want to do
is I just want to make sure that this
just continues on infinitely and to do
this we take the direction we find the
direction vector and we just multiply
with a value so so we're going to say
Mouse position - fire point position
just like up here now we get the
direction vector and then we can just
multiply it by x let's say a hundred -
just make it go on really long you could
do two hundred or whatever so now when
we hit play
we're simply multiplying the direction
to make the line continue on so there's
a bit of a delay but that's not to worry
about yet cool and what we can also do
is we can give it a pretty color so we
can do our comma and then say ah
let's do color dot sign it's pretty one
and then we can go ahead and actually
check if we hit something so we can say
if hit dot Collider is not equal to null
then let's open up some brackets so if
we actually hit something then we can do
another debug draw line that we're just
going to put on top of the other one
we're going to but we are going to make
this one red and only extend on to what
we hit that's going to make sense in a
second so we're just going to put this
between the fire point position and the
hit dot point and we're going to make
this red so this is actually going to
show us what it's hitting so when we hit
something over here you can see whoops
no it's not something is not working
here let's see if hit that Collider is
not equal to null which it shouldn't be
because it was just hitting something
fire point position hit that point color
red hmm this should be working is this
even being called so let's do a debug
like test is the screen cold he'll play
oops
we have an error a passing error what is
going on here we are not oh oh I missed
I see I missed a a curly bracket up here
stupid okay so we can go ahead and
delete the debug lock again there you
were probably shaking your head all
along okay so now you can see that once
we hit this it's still not working okay
so I'm just going to go ahead and pause
the video here and see if I can get this
working and then I'll come back in a sec
okay so I'm back so I figured out the
problem and it was actually pretty
Elementary so what I did wrong here was
I thought of the layer mask on the wrong
way I remember that as being what you
have selected will is what the array
will not hit but actually it's what you
have selected is the only thing that the
railroad will hit so let's just rename
this to what to hit instead of what not
to hit and let's put it down there also
save it and hit back into unity and now
under the what to hit we're going to
select everything and then we are going
to exclude the player and the ignore ray
cast sorry for lying there and now we
can go ahead and hit play and you can
see once we hit something that the part
of the line that stretches from the hit
point to our fire fire point is now red
just to see where it hits and and what
it's doing behind the scenes cool so
that was a bit on graphics and some
useful ways of thinking of these lines
and and how you can extend them and
directions and starting and ending
points and the last thing we can go
ahead and do is of course remove this
shoot up here so we're not constantly
shooting and then we can make a debug
log statement that will say what we hit
and how much damage we did and then
later when we add enemies we can
actually add that damage and make it do
something
let's do debug deadlock and we're going
to say we hit and then we're going to do
plus hit dot Collider dot name plus and
did plus damage plus damage like this so
sounded weird but there it is and that's
going to write out a pretty normal
sentence I think so if we hit play here
and we let's say point towards the
platform for over here and click you can
see that it says we hit platform 4 and
did 10 damage and you can see that it
also draws array and we can of course go
ahead and play around with the fire rate
if we bump this up we can get lots of
rays oh it's spamming and yeah so that's
how you make shooting and the cool thing
about this here is that the weapon
script we can put on pretty much any
weapon that we are going to need so far
so we can just tweak the damage and the
fire rate and we have all kinds of
weapons available to us already so what
I'm going to go ahead and do is I'm
going to drag down the pistol into the
project pane to make out to make a
prefab out of it and I'm just going to
keep it on the player for now because
shooting is always fun to see so that's
pretty much it for today's video thanks
for watching and of course if you wanna
support brachiosaur just generally be a
bigger part of the Bronchos community
you should totally head over to the
forum break is calm and become a member
it's really so you can sign it up with
both both twitter facebook or just
normal filling out some boxes and
hitting join and there are lots of
useful resources or places to get
answers here you don't even have to to
make threats or be active or make an
account you can just sit here and read
or find cool assets which i've certainly
done so well thanks
again for watching and I'll see you in
the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>