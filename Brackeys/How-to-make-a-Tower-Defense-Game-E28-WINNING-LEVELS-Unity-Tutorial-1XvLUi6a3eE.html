<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to make a Tower Defense Game (E28 WINNING LEVELS) - Unity Tutorial | Coder Coacher - Coaching Coders</title><meta content="How to make a Tower Defense Game (E28 WINNING LEVELS) - Unity Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to make a Tower Defense Game (E28 WINNING LEVELS) - Unity Tutorial</b></h2><h5 class="post__date">2016-12-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1XvLUi6a3eE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to this video in
creating a tower defense game in unity
today we are going to create some cool
UI that will display whenever we finish
a level so when we kill the last wave
it's going to animate on to the screen
in some cool way display the amount of
rounds that we completed and then have a
few buttons for going to the next level
it's going to look something like this
so let's just go ahead and get started
so as you can see I'm here in level 1
and we're going to be editing the UI so
let's go to the scene here and let's
open up our overlay canvas and instead
of creating everything from scratch
let's reuse some of the parts that we
created in an earlier video
more specifically the video on creating
a game over screen so if you haven't
watched that I recommend you do that
first or if you feel like you know unity
a bit better you can definitely just do
everything on your own so let's just
duplicate the game over menu here and
let's open it up to see what we're
working with
so this basically has a background a
text saying game over which we're going
to change in a second it's going to show
the amount of grounds that we just
completed or you survived and we are
also going to have a couple of buttons
in this case we have a retry and a menu
button we are going to change that to
continue and a menu button on the
GAMEOVER object itself we have a game
over script that changes the ramp text
to display the actual amount of rounds
that we completed as well as hooking up
some of the buttons to actually do
something when we press them we also
have an animator so if we go ahead and
hit play it's just going to animate in
very smoothly and that looks pretty nice
so let's just keep that on there as well
so let's begin by changing the name of
this object to something like complete
level and let's also remove the game
over script let's now go to the game
over text and rename this to something
like our level 1 text and we'll change
the actual text to level 1 as well we
might even put an exclamation mark in
there now it doesn't look good and we
can also change the font here to be
Roboto black I want this to really have
an impact so the round survived we can
pretty much leave as is but I do want to
mess around with the buttons here a
little bit so let me start by selecting
the retry button and just scaling this
up to fit the entirety of the two
buttons so if we disabled our menu now
we've just made that twice as big and I
think we can go ahead and change the
text here to continue I really want the
user to press this button so it's going
to be very large and let's just rename
it in the hierarchy as well
we're not going to be hooking it up to
an on-click event just yet but we'll do
that very soon next up I also want to
maybe highlight this button a tiny bit
more whenever we hover over it so I'm
just going to change the highlighted
color to be a bit more gray that will
just look a bit better because whenever
you have bigger buttons you also want
bigger highlight arm animations that's a
good rule of thumb so now we can take
our continue and maybe move it up a tiny
bit I'm holding down shift totally move
move it on the y-axis let's also take
around survived and just move that up a
tiny bit as well I think that looks a
bit better we can maybe even move up our
continue button a tiny bit more because
what I want to do with our menu button
here it's actually placed this right
beneath and I want to go ahead and
disable our image and just have the text
here that's a pretty new thing to do but
it's done a lot especially on Android
and smartphones and stuff like that to
use text as a button so let's make this
white and let's also make it a Roboto
thin and we can definitely scale down
the font to something like 20 we want it
to be pretty small let's take the entire
button here and scale down as well and
just place that right under our continue
button so you can see you can definitely
click there but it's not going to be
very clear and we definitely draw more
attention to the click or to the
continue button so now for a menu here
we can go ahead and change the
highlighted color as well
just to make that more apparent as well
and we don't want to have the menu image
as our target graphic instead we want to
have our text so now when we hit play we
should actually see this menu working
already and you can see it has a nice
fade in and all that that working and we
also can hover our two buttons and click
on them but nothing yet happens and a
round survived do not change so what I
thought since we both have an amount of
round survived under our complete level
screen and under our game over screen is
maybe separate that piece of code out
into a separate script that we can then
put on the actual text object around
here in order to change it so let's go
into our
over script let's double click that to
open it up in Visual Studio and we can
maybe just extract that piece of code so
Visual Studio is opening here there it
is and let's go in here and first off we
need to take the round text we also need
to change this function so let's create
a new script that we placed on our round
survived let's do it on the complete
level first and let's actually go into
our round text object just to make
things as simple as possible and let's
call this one the rounds survived and we
can just double click that to open it up
as well and hit reload and what we'll do
here is just move in all of the
necessary parts of code so let's go into
our game over script let's take our
round text and let's copy that in here
let's do the same thing with our unity
engine GUI we need to include that
namespace or else it's not going to work
awesome and let's also take up void
enable and move that in here as well so
right now we're just setting the text
equal to the amount of rounds that we
have survived and we do that instantly
what I wanted to do was kind of do a
count up animation to really make that
feel cooler than it really is so let's
save our changes to the game over menu
and let's have a look at how we can do
that but first inside of unity let's
just make sure that we link this up
properly so a run survived here will
drag in our text and we'll also do the
same thing for a game over so let's find
our rounds let's add the round survived
and let's drag in text so now it's going
to work for both without having to
duplicate any code that's just a lot
better so what I thought we would do
here is inside of our round survive
script is create a armed I enumerator
that means that we're creating a KO
routine and remember kuroh teams are
just weird when it comes to syntax we
write ienumerator instead of void and
then we write the name of our function
and in our case we can just put
something like
made text and everything else is like a
normal function so what a co routine of
course allows us to do whenever we write
I enumerated here instead of Boyd we
basically able to pause our code
execution and then continue it at a
later time and that's awesome for us
because we want to count up with a small
pause between each iteration when we
count so in our case what we could do is
maybe keep track of what round we're
currently displaying so we're going to
do an integer round and it's going to
start at zero and then slowly count up
towards the amount of rounds that we've
survived and let's also begin by setting
our rounds text text equal to zero so
that we're sure that our text will start
at zero and that our variable is not
only going to start at zero but we
actually display that on the text object
then we're going to write while round
it's less than and then we're going to
write player stats rounds the same way
we do up here that's the amount of
browns that we've survived so as long as
Rand is less than player stats just
rounds well then we want to count up
with so we're going to say round plus
plus we're going to increase that by one
then we are going to display the text
with a with an increase of one so we set
rounds text at texts equal two round dot
to string so basically what this code
currently does is it sets our text equal
to zero and creates a variable that's
equal to zero as well and we call that
round then we say while round is less
than three which in the first place it
is we're going to increase round by one
so in this case round is going to be one
and we are going to set our text equal
to one then we're going to go through
again and say round is still less than
three so we're going to increase that by
one again so now it's equal to two and
we're going to set our text equal to two
and we do that one last time because
round is that is equal to two and that's
less than three we increase it by one
and it's going to set the text equal to
three so that's how this basically works
however between each time that we sent
our text here and that we increase
around we want to delay a tiny bit we
want to wait a fraction of a second so
that it's actually going to be visible
and not just happen faster than we can
see it so in order to do that we're
going to type yield return new and then
wait four seconds and we've done this
before but it's just very weird syntax
wise I know and this is where we input
the amount of seconds that we want to
wait in our case I would like to weight
point zero five seconds I think that's
going to be pretty decent and that's
pretty much all we need to do except for
one thing and that is if we want this
looking really good we of course want to
wait until a text is visible before we
start counting upwards and since we kind
of fade everything in at the beginning
we'll have to input just a small delay
at the very beginning of our script or
actually we should do that before the
while loop but after we set our text
equal to zero so let's say yield return
new waitforseconds let's just input
something like point seven seconds here
so before we can play this in unity we
of course need to also call the method
and remember whenever we are calling a
kuroh teen we can't just say and made
text and unclose it instead we need to
wrap that in a start co-routine call so
we write start co-routine and then we
input our animate text into that so if
we save that we should actually see this
working and remember right now we are
using three instead of the actual amount
of rounds which is going to be zero in
the beginning but that's fine that that
will just allow us to see what's going
on in fact I want to bump this up to
something higher so that we can really
see what it's doing so let's bump it up
to something like 17 so now when we hit
play we should see that everything
animates on and then it counts upwards
that's awesome so that works just fine
and we can now change this back to be
player stats dot rounds so that it will
actually change to the amount of rounds
that we've survived so now we want to
determine what happens whenever
we press one of these buttons so if we
go into unity we can have a look at
exactly how we want to link this up for
our game over object we also have a game
over script that takes care of retrying
and going to the menu so let's create a
new separate script that sits on a
complete level called wall complete
level so we need this to work the exact
same way that our game over script
currently does so let's jump in there
and see what we're doing we have a
reference to the scene fader so that we
can nicely call the fade to method and
as input we use the menu scene name
which is just equal to main menu and we
need to wrap all that in a nice public
method so let's just do that inside of
here as well so let's create a public
scene fader called scene fader let's
also create a public string which is
going to be our menu scene name I will
default that to main menu and we can go
down here delete these two functions and
instead write public void menu and then
here we simply go scene fader dot fade -
and then we input the menu scene name
however we also need another method and
that's what we need to do whenever we
want to continue let's create a public
void continue and basically what we want
to do here is the exact same thing that
we did in the previous video we want to
bump up our maximum level reached so
that we will keep proper track of what
level we are currently on and also we
want of course transition to the next
scene so to do that let's go into our
game manager that takes care of all that
for us currently and let's go in here
and find our public string next level
and the public int level to unlock and
we can just move that inside of our
complete level instead so here we're
going to have our and I actually want to
move it up I think we're going to have
our next level and our level to unlock
and we also need to go down to where we
actually call this so we are
player prefs set end level reached let
me also fade to the next level so let's
just copy all of this code and I'm just
going to copy the arm I'm just going to
remove the debug block so we'll just cut
that and paste it in here and that means
that inside of our game manager and this
should actually work right away
inside of our game manager we can now
remove the scene fader because we don't
need to do any level transitioning in
here however when we win the level what
we want to do is display our complete
level screen so we'll wait to do all of
this until we press the continue button
but we still have to display the
continue button and the menu button and
all the other stuff that we've created
when we win the level and so inside of
our game manager when our win level arm
function is called we want to display
that and we'll do that the exact same
way we do with the game / UI we want to
create a reference a public game object
not game manager game object called
complete level and then UI and we simply
go down here and say complete level you
I said active and we input true we
probably also want to set game is over
equal to qu the same way that we do when
we end the game just to make sure that
our camera will stop moving and any
other scripts that are currently using
this that variable to figure out if it
should be active will respond
accordingly so just make sure to set
that to true so now we should actually
be able to go into unity and link all
this stuff up and there are a few things
that we need to drag around first off
under our complete level we should
actually see three values appearing and
there they are we have the menu scene
name that's going to be the same the
next level that's exactly right the
level to unlock is red as well
we just need to drag in the scene fader
and there we go then under our game over
we should see that that's just fine as
well and onto our game master some
variables here have disappeared but
instead we have the complete level UI
and we just want to drag in that entire
object so now we can disable our
complete level UI
and this should actually be working now
however I discovered a bug that is after
we did a fix when it came to counting
down how many enemies were left and then
transitioning to the next wave and maybe
even transitioning to the next scene we
are also kind of missed some other
things that were going on that part is
actually still a big glitched and I
figured out that two things were going
wrong the first one is that under our
enemy
whenever our enemy takes damage and his
health reaches zero we die so we call
the die method and what happens inside
of the die method is that we get some
money we instantiate an effect we
destroy the game object and we add some
ore we subtract one from the enemies
alive
however destroying a game object is not
a very immediate thing unity sometimes
takes a bit of time before it destroys a
game object it might even call update
once more before destroying their game
object and it definitely it's going to
call update on other objects sometimes
before doing it so what would happen is
we would have an enemy that reaches on
zero on its health dies and then right
after and not the turret shoots it it
takes on more damage its health reaches
zero as well and we die again and so
it's just going to keep dying a few
times then therefore not only do we get
more money than we should we also
subtract more than we should from the
enemies alive so what we are doing here
is a very very simple fix we'll create a
private boolean variable called is dead
and will default that to false then when
we die we said is that equal to true and
then up here we simply say that if our
health is less than or equal to zero and
we are not dead well then we can go
ahead and die very simple fix but it is
going to take care of the problem also
inside of a way spawner currently
whenever we are spawn a wave and we go
through spawning on the end
means we check if a wave index is equal
to the amount of waves and if it is
we've just won the level because there
are no more waves of course we don't
want to check for this just after we
finish spawning we want to check for
this in the update loop in case there
are no more enemies alive so under the
enemies alive check we're going to go in
here and check if we've just reached the
end of our level and in if we have then
we can go ahead and win so again just a
few bug fixes there but I thought I
would just clear that up in the video
because there's nothing more annoying
than bugs like this on that are
sometimes hard to reproduce but just
gives weird results so now we should be
able to go in here hit play and let's
just play through our game here so let's
start by creating some laser turrets and
I'm actually just going to go totally
overboard with these so that we can very
quickly go through the game let's also
create a couple of standard turrets and
maybe some missile launchers down here
just for fun and these should be able to
take care of it so this is our next to
last off and this is our final wave and
you can see that when the last enemy is
killed it's going to say level 1 it
disables our camera because we remember
to set game is over it counts up to 5
the amount of rounds that we survived
and we have two buttons we have the menu
which I'm just going to promise you
works and we have the continue button
which we can go ahead and click and it
does not oh yeah so that's the final
thing that we forgot to link up and that
means the menu button actually doesn't
work as well what we need to do is go
into our overlay canvas complete level
and then we can select or continue and
in here we of course need to reference
the onclick event you guys were probably
sitting there oh no he doesn't know what
he's doing he hasn't he forgotten to and
yes I had so let's just drag in our
complete level let's go under the
complete level script and let's select
the continue function and also under the
our menu let's drag in our complete
level going on to the complete level
script and selecting the menu function
cool so that should actually make
everything work so let's just again
quickly run through this I'm never going
to get
I love play testing this game it's just
it's I think it's really fun we really
nailed some of the mechanics here of
course we might need some balancing but
that's a whole nother topic so let's
just run through it here so this is the
second-to-last level and the final level
is going to spawn now and when we run
through and kill off our last opponent
level one everything counts up awesome
we can hit continue and it's going to
transition directly to the next level
let's pretty much it for this video I
hope you liked it and I really hope you
like the series in general if you do you
should consider visiting my patreon page
pitching is a way for you to support me
with a monthly donation and in return I
offer some humble rewards and in general
it's what keeps this channel going and
growing so yeah
consider supporting me there it's of
course totally optional and regardless
of if you do I will see you in the next
video thanks to have the awesome patreon
supporters who donated in November and a
special thanks to sultan al sharif
faisal arrow fire james Calhoun and
Robert Bonham become a patron yourself
at patreon.com slash practice</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>