<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How many Rigidbodies can Unity support? | Coder Coacher - Coaching Coders</title><meta content="How many Rigidbodies can Unity support? - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How many Rigidbodies can Unity support?</b></h2><h5 class="post__date">2017-12-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8zo5a_QvJtk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">before I got into game development I
used to watch crisis physics tests in
these wonderful videos people would
spend hours carefully placing thousands
of barrels only to knock them over and
blow them up that's just something oddly
satisfying about watching crazy amounts
of game objects colliding anyone who's
ever discovered the rigidbody component
knows this
I remember adding my first with your
body to the test cube and watching it
fall as I marvelled at my creation
I thought the possibilities with this
are endless but are they let's put unity
to test and see just how many rigid
bodies it can handle before slowing down
I started by putting a few cubes in a
simple scene with default settings one
directional light real-time shadows and
50 cubes each with a rigidbody a cube
Collider and a mesh renderer to no
surprise the scene ran smoothly but how
smooth I went to the asset store and
downloaded mini profiler with this I
could track my framerate over time
without running the heavy building unity
profiler also made sure to disable vsync
under graphical settings and I could now
see the scene running at a glorious 160
frames per second with this in place it
was time to add more cubes so I tried
with 500 then 1500 things were still
running smoothly
of course my framerate was dropping but
it was still around the 100 mark I began
to feel like I could keep increasing
this number infinitely the 3,000 cubes
my framerate started falling below 30
but I couldn't stop there I increased
the total amount of cubes to just over
6000 and the result was well with an
average FPS of 2 there was room for
improvement so I started by increasing
the fixed time step this value
determines the amount of time between
physics calculations so naturally if we
increase it the rate of these
calculations will be reduced and so
unity will spend less time on physics
each second this led to some very clear
improvements just increasing it from the
default point o2 to 0.04 effectively
tripled my frame rate setting it to 0.06
we sold it in an average FPS of 14 and
going all the way up to 0.1 gave a
reasonable average frame rate of 24 the
problem with raising the fixed time step
too much it's that you start to be able
to see each physics update which makes
our collisions look laggy again a fixed
time step of 0.1 means 10 physics
updates per second which is definitely
noticeable and on top of that I was
still seeing massive frame drops
next I turned to graphics quality if it
would spend less time on graphics we
might be able to allocate more time to
physics so tune the render settings all
the way down and disabled the scene
light this definitely helped but it
didn't make us big an impact as I was
hoping if we look at the profiler it's
pretty clear why actually rendering the
scene only took up around 10 percent of
the processing time so making the scene
easier to render wouldn't make too much
of a difference finally I turned to the
physics settings
I tried adjusting all the values but
nothing seemed to work except for when
it turned on adaptive force adaptive
force is a special technique in physics
that compensates for numerical errors
when dealing with the stack of objects
since we are stacking 6000 cubes on top
of each other I think it applies here
and just as predicted my average frame
rate went from 24 to 33 and more
importantly instead of dropping all the
way down to 3 FPS when things got the
most tough it will now stay above 16 but
before we start pressing this setting
there's something we have to take into
consideration
look at these two simulations notice
anything different
well adaptive force made everything run
smoother it also slowed down the
collapse of the building which in turn
put less pressure on the processor but
still better frame rates means more
freedom so I decided to leave it on for
now next I started adjusting settings on
the rigid bodies to see if this could
make things more performant at ride with
interpolation extrapolation collision
detection modes and different amounts of
drag also created the spreadsheet to
help track my results unfortunately no
matter what I did it only seemed to make
things worse and just as my optimization
mission seemed most hopeless I got an
idea
it wasn't genius in fact I don't know
why I didn't think of it before what if
we just built the game the unity editor
itself comes with a bit of overhead
running as a standalone might make
things significantly better and it did
in fact it took my average FPS from 33
to almost 50 with this I could once
again decrease the fixed time step
turnoff adaptive voice and enjoy a close
to smooth simulation of 6000 cubes with
only a bit of started towards the very
end but why stop there
I created a simple script that would
take in a mesh and spawn a cube on each
vertex this way I could create models in
blender import them into unity and then
watch the mayhem unfold this led to some
pretty interesting results finally I
tried using the particle system to see
if it could handle
cubes of course the unity particle
system doesn't have support for inter
collision which definitely made it less
exciting but it did run ten thousand
cubes as smooth as butter and that
marked the end of my journey I do
however encourage you to try it out on
your own of course the results are going
to depend completely on the hardware
that you're using here's my bill to
those of you interested it's a pretty
standard setup apart from the fact that
I used two CPUs of course however I did
also run a few tests on some pretty
standard gaming rigs and the frame rates
were pretty similar that's pretty much
it for this video thanks for watching
and I will see you in the next one
thanks all of the awesome patreon
supporters who donated in November and
especially thanks dude oh man I mean
arou C hands off tune cyber Kumiko
Cabral Dan Evans John Perot guard
Superman the great James P Thomas Wally
Jason the Tito dark heaps Kirk Chaisson
Murphy Rob fern James Rogers Alex
rickets key man Alice Oh March</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>