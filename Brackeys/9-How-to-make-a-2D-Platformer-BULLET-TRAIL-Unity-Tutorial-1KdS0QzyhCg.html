<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>9. How to make a 2D Platformer - BULLET TRAIL - Unity Tutorial | Coder Coacher - Coaching Coders</title><meta content="9. How to make a 2D Platformer - BULLET TRAIL - Unity Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>9. How to make a 2D Platformer - BULLET TRAIL - Unity Tutorial</b></h2><h5 class="post__date">2014-08-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1KdS0QzyhCg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thanks for tuning in at brakus hello and
welcome to video number nine in the how
to make a 2d platformer course today
we're going to be taking a look at
something really fun which is making the
effect whenever we shoot our gun so more
specifically we're going to take a look
at creating a bullet trail and this is
going to be achieved by first making a
trail prefab using the line renderer you
could also do a a trail renderer
attached to some kind of moving object
but I find that you often get more
control with the trail wind renderer
then we are going to spawn it through
code at the right time at the right
place and then we're going to move the
trail in the direction we've shot and
then finally we're going to destroy the
prefab out of after X amount of seconds
we are also going to set a spawn limit
so if we have a very high frame rate we
are not going to be our fire rate we're
not going to be spawning maybe 60 of
these prefabs a second we instead going
to limit it so it might only spawn at
max 20 so cool that's the the to do list
for today but I just quickly want to
mention that the forum has now hit over
500 members and it's just a great place
to go ahead and get answers I still see
a lot of you contacting me on different
media and really if you just have a look
at the amount of replies on each thread
here it's almost difficult to find a
thread that doesn't have multiple
replies on it so people are really
active here and would like to help you
with whatever problem you might want to
get solved and I'm active on here too so
it's a great place to go so please visit
firmed up brackets to come for questions
or discussions and all that it's it's
it's great cool so let's open up unity
and get started with today's tutorial so
the first thing we're going to do is of
course create the prefab as you see
right here so to do this we're going to
go ahead and create an empty game object
and you can do this by pressing ctrl
shift n and that's command on a max of
course and then we're going to read
name this - let's do pull it trail let
let's then just zero out the position
and let's find it in the scene here so
there let's just drag it up so we can
see it right here then we're going to go
ahead and attach component so go to add
component effect and then choose the
line renderer then in here we are going
to leave the shadows as is and as the
material we're going to go ahead and
select the sprites default or we could
go ahead and make one ourselves actually
I almost want to go ahead and make one
ourselves let's go ahead and do that so
let's go ahead and right click in the
project panel he creates the material
and here let's just call this the bullet
trail mat and in here we are going to
select as the shader the particles
additive that just gives it a great look
and then we can play around with the
particle texture we could go ahead and
select something like default particle
texture in order to give it a smooth
look but I'm actually going to show you
something I I like even more so for now
I'm just going to select this so you can
see how that looks
and then we're going to go ahead and
apply my technique after that so let's
again select the bullet trail let's drag
in the material light light probes we
just want that off then the positioning
we want this to have a size of two
because we don't want it to bend in the
middle for element zero we are going to
set that that to maybe minus three and
the reason why we're sending this to
negative three is because then if we
have some kind of a a smooth out a trail
the first part of the trail is going to
be almost invincible or invisible so we
want that to be a bit closer to the
player in order for it to look like it's
not spawning like two meters in front of
so you can go ahead and play around with
that in order to make it look like it's
actually spawning from the pistol so
that's the value one change also you
notice that right now our trail is down
here instead about up at where our
cursor is and the reason why is because
we are currently using world space so
this is one something we want to disable
so click disable there and then the
element one we want to set the x
position here to something like five
then we can go ahead and maybe minus
three was a bit too much
let's do minus one to begin out with and
then we can go ahead and change the
start with and end with and I'm going to
set this to zero point one and zero
point one so now you can see we get this
very squished down
sprite that actually looks pretty good
when it's traveling really fast it
almost looks like it has motion blur
cool so now go ahead and select the
bullet trail again and you might notice
that it has in a start and an end color
and you can go ahead and tweak this if
you want to color parts of your trail or
make parts of is it invisible so you can
change the Alpha that you but that's
actually the basic setup of our bullet
trail and I find this kind of bullet
trail to look pretty nice but what I
like even more is if we disable this
particle texture here and then we go in
to select the tint color and then we
bring the Alpha down quite a bit so that
even the front part here is a bit
see-through you can put it over
something like the mountains here see
what of an effect it has we can also
color it a bit but keep in mind that
when this is an additive blend mode the
color doesn't always look the way you
want it to and depends on what it what
it's in table of so you might might want
to try it on different things so move it
around a bit cool and then the start
color we're gonna
select that and then bump down the alpha
all the way and now when you see this it
actually looks a little bit more like a
bullet trade a bullet trail because it's
so hard in the beginning but then it
slowly fades out almost as if there was
a bullet right here and of course if you
want you can go ahead and put a bullet
right here just make a a black square
and put it there and then just parent
both to a parent game object just an
empty one but I'm not going to do that
for simplicity's sake and also because I
think that this looks actually quite
nice so you can see how that looks in
the game view you can of course go ahead
and adjust it I might want to go ahead
and bring down the with even more to
something like 0.05 like there and you
can see now it's it's really squished
down but again play play around with
that until you get something that looks
nice so now that we have that in our
place we can go ahead and drag this down
to the project panel to make a prefab
prefab out of it and we can delete it
in-game so now we are ready to go ahead
and spawn it through code so in order to
do this we are going to find our pistol
we can double-click on our weapon to
open it up in monodevelop just wait for
it here and there it appears on my other
screen cool and we can go ahead and add
a bit of code that will spawn our effect
so the first thing we want to do is we
want to create a variable for our
particle prefab so we're going to make a
public transform called line prefab or
let's do bullet trail prefab yeah let's
do prefab and then just a semicolon and
then we also want no let's ha let's wait
with that
until they do because that's optional
cool
so then down here right below the
raycast hit to the head here where we
collect the hit data this is where we
want to call a separate function called
effect so let's just call it whoops
let's start out by calling it here I
know it doesn't exist yet so mono bit a
behavior will all monodevelop will
behave a little weirdly when typing it
out and it will be read but we are going
to create it now so that won't matter so
what we can go ahead and do now is
actually create the effect function so
we'll go down here and we'll type in
void because we don't want to return
anything you're going to call this
effect and then we're going to open and
close the parentheses and then open and
close the the brackets then in here
we're going to type instantiate to spawn
something which are we called
instantiate function then inside of this
we are going to give it three arguments
firstly what we want to spawn and that
is going to be our bullet trail prefab
then next we are going to type in the
position of what we want of where we
want to spawn it and that's going to be
our fire point dot position and then we
type in the rotation and that's just
going to be fire point dot rotation
because the way we have set it up it's
going to be correctly rotated as soon if
we just set it to the fire points
rotation so now when we save this it
will actually go ahead and spawn it
correctly so if we select our our pistol
here you will see the bullet trail
prefab appearing as an empty slot and we
can drag in the polar trail now and when
we go ahead and hit play and make sure
to disable gizmo so it will show the
line renderer or it will show the debug
draw line is what I mean then we can go
in and hit play and you can see that it
spawns our trail but our trail is not
really move
so what we can go ahead and and do about
this here is we can go ahead and stop
this from playing and then we can make a
separate script to put on the prefab
that will use the transform translate
function so now we have gonna move the
trail so to do this we're going to
select the bullet trail you're going to
hit add component new script and let's
call this move trail then let's double
click this to open it up in monodevelop
oops that is and we can go ahead and
delete the start function actually the
only thing we're going to be needing is
the update and in here we are going to
type transform dot translate transform
that translate is used for moving
objects over time and it's really great
because you're it's a way of moving
things without using a rigidbody a
rigidbody really takes a lot of
calculations in order for it to work and
ever whenever we want to move something
in just one single direction without
ever colliding with something or
changing directions or calculating
gravity or velocity but just moving in a
straight line a rigid by this way to
overkill so instead we use this
transform to translate and what it
really does is it takes it can only take
it can take two arguments the first one
is the direction and the next one is the
space spatial orientation but since the
spatial orientation is a default set to
self we're not going to be adjusting
that and I know that what I just said
might sound weird but basically whenever
it comes to navigating in 3d you are
normally talk about two different spaces
you talk about the global space and the
local space
so if it's a default set to local the
direction will be from the local
orientation of your objects and global
the direction will be from the zero
point zero point zero point what I can
don't worry about that it's going to be
set correctly at default so now we're
going to type as a direction vector
three dot right we're going to multiply
it with time.deltatime in order for this
to not be affected by framerate and now
we're going to set a a movement speed
and we can go ahead and make this a
variable so type in public float
actually let's just do an integer
because this number is going to be so
big anyways and let's call this move
speed and we're going to default this to
maybe two hundred and thirty so down
here we're going to type multiply it
with move speed and now this script
should actually work so when we save
this head into unity and click you can
see that our line actually shoots out in
the direction we are pointing and you
can see that it completely lines up with
our cursor cool so the next thing you
will do is if you notice when we play
right now and click a couple of times
the hierarchy very quickly gets filled
with a bunch of bullet trails and
especially if we have a low fire rate
and just hold down the mouse button and
these objects are constantly living in
the scene and not only that when they
get off screen they're still moving
they're still calling the update
function and translating through space
so we just want to put an end timer on
that so that we don't have too many
objects just not visible but just moving
and moving and moving so in order for us
to do this we're going to type destroy
and then as in a parameter
going to type game object because we
just want to destroy this game object
you could also do actually I think it's
this that game object to explicitly
declare that the object that this is
sitting on is what we're going to
destroy but that's not necessary and
then we're going to give it a time for
it to destroy so we got just going to do
comma and then maybe a one so after one
second the game object is going to
self-destruct so now when we save this
and head into unity hit play and just
click three times you can see the bullet
trails disappearing again so that's
really an important thing to do
whenever you're instantiating objects
that you want be needing all the time
especially when they have something like
an update function sitting on them
awesome so that was basically it for the
move trail script let's go ahead and see
what the next thing we're going to do is
so now we're going to destroy we've
already done that we're going to set a
spawn limit and this is really just a
handy thing to do because if we have a
let very load low fire or very high fire
rate let's say we fire sixty times a
second that's probably too many prefabs
to spawn because the instantiation
method or function actually requires
quite some time to execute so doing that
many many many many times a frame or a
second will slowed down your game quite
noticeably one solution to this is was
what's called object pooling so if you
want to have a lot of of prefab spawned
in a short amount of time you should
really take a serious look at object
pooling which is spelled like this so
just go ahead and google it and there
are plenty of ways to set that up in
unity but a very simple way for
do this is simply limit the amount of
trails that we can get at maximum so to
do this and we're just going to go into
the weapon script here and just like
when we are checking when we are going
to shoot we are also going to put a
check to see when we can spawn our next
effect so if we scroll all the way up we
are going to make a new float called not
time to fire but time to spawn effect
here we go default this to zero like
this then down here inside the shoot
function right before our effect you're
going to type if and then inside of the
if statement here we are going to type
if time dot time is larger than or equal
to time to spawn effect so if the time
has passed or is equal to the time to
spawn the effect then we're going to
call this code and the code we're going
to call this this effect go ahead spawn
our effect and then we're going to set
the time to spawn woops and spell that
correctly type to spawn effect we're
going to set that to time that time and
then plus whatever you want here so
we're just going to do one one / and
then up here let's make a new variable
called float effect spawn rate and we're
going to equal this to maybe 10 by
default let's make that public so it's
available inside of the unity inside
view the unity inspector and then right
down here we're going to do 1 / time to
spawn effect or no that's am what did I
call this the effect spawn rate so /
effect spawn rate and close that off
with a semicolon and then we can just
delete the effect down here now we only
call it inside the if statement
again if I went over this too quickly
please go ahead and go back to a
previous video the shooting video where
I explain the fire rate and how all of
that actually works it's exactly the
same technique I've applied to the
effect here so now when we head back
into unity we actually don't get any
errors that's almost too good to be true
then we can head into the pistol here
and you can see that you can change the
effect spawn rate depending on each
weapon so you can have it be different
for each weapon and what we can do here
is if we set the fire rate to 60 hit
play you can see that we are only
spawning ten effects a second not 60 if
we bump this up to 60 you can see it's
going pretty crazy but I don't find it
necessary to spawn that many actually I
think that 10 even though it's it's
going really really fast is plenty for a
machine gun now whatever you want to
make cool so that was pretty much it for
today's video I'm just going to maximize
this so we can really enjoy the effect
at work here so that's it for spawning
bullet trails and moving them through
air and controlling the amount of trails
that we have active in the scene I hope
you enjoyed this video and in the next
one I think we'll go ahead and create
some particles to come out of our gun to
make the shooting effect even better so
thanks for watching and I'll see you in
the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>