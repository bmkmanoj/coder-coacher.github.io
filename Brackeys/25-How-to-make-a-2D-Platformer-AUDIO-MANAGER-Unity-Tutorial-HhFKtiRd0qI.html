<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>25. How to make a 2D Platformer - AUDIO MANAGER - Unity Tutorial | Coder Coacher - Coaching Coders</title><meta content="25. How to make a 2D Platformer - AUDIO MANAGER - Unity Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>25. How to make a 2D Platformer - AUDIO MANAGER - Unity Tutorial</b></h2><h5 class="post__date">2016-01-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HhFKtiRd0qI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thanks for tuning in at brakus hello
everyone and welcome to video number 25
in the how to make a 2d platformer
course in today's video we're gonna be
making an audio manager for our game
that means we're going to be creating
this central script that is going to
store a list full of all of the
different audio files that we want to
play during our game and then we're
going to have an very easy to use
function called play sound where we
simply insert a string storing the name
of the file and it's then going to play
it for us with some different sound
variants so we're gonna have it pitch
randomness and a volume when randomness
and that kind of stuff it's going to
make it very easy for us to add new
sounds to her game so that's awesome so
without further ado let's go ahead and
get started
so you can see here that I'm in the
project as I left it the last time and
well basically nothing's changed here I
simply move the script we created in the
last video under the scripts folder and
we should be pretty much ready to create
a new one so under the add component
simply type Audio Manager and the new
script and make it of type C sharp so
let's hit create an ad and let's double
click this to open it up in visual
studio I'm on a developer whatever you
are using
so this script is actually going to be
fairly simple in nature but it's going
to be very very effective for the stuff
that we want to do so first off I want
to get rid of the using system tanked
collections namespace we're not going to
be needing that whatsoever
and we want this to derive from
monobehaviour
but before we actually go and model out
what we want in our audio manager class
I want to create a different class I
want to create an a custom class up here
and this is going to be a public class
and this class is going to be called
sound so I want to kind of model out the
idea of the sound object so if we're
going to have a sound that we can play
in our game well it's going to be
needing some different properties one of
these is a string which is going to
store the name of our sound so we can
very easily refer to the sound or
set to play simply using a name as
identification then next up we are going
to have a public audio clip we want to
actually associate an audio file so this
is simply going to be the let's just
call this the clip and finally we want
some kind of reference to an object in
the game that can play this clip so if
we think go into unity here you can see
that so far when we've been playing a
respawn countdown audio file here
we've been simply attaching an audio
source to whatever your object this is
the TM object and we simply add in an
audio clip from the in from the project
here into this slot and the audio source
will actually play this with some
different settings however what we want
to do is we want to create this Audio
Manager where we drag in all of our
different clips and do some settings in
here and then when we play the game in
the start method we're going to
instantiate a bunch of objects which
will which will lie under the GM object
and each one is going to have an audio
source associated we could also put all
of this on one single object but that's
really no reason to so we're going to
have these different objects and with
each their audio source and then we want
when we want to play the clip we simply
have a reference to that audio source
and to play so that's kind of the idea
if you and therefore we want to be able
to reference an audio source and we want
this reference to be well private
because we don't want to be able to
change it instead we're going to be
creating a method to access this so
we're going to have a private audio
source you can just leave out the
private here if you want to and we are
simply going to call this source then we
are going to have a public method that
is going to be a void called set source
and in here we're going to feed in it an
audio source reference underscore source
and the method assembly is going to say
that source
on the score source and I believe that's
all we're going to do yeah cool so now
that we have that in there we can also
go ahead and create this idea of playing
a clip so let's say that we have a
public void called play and well
basically what do we want to do whenever
we play this clip oh yeah in here we can
also add to our source the clip so we
can say source that clip equals clip
there we go because we don't need to do
this each time we would play because we
know that the audio clip is not going to
change throughout the game so when this
method here is called the clip is going
to be called oh we're set with it okay
so my phone went off there for a second
but we'll just continue good so we
simply insert the clip there then in our
play method we could very simply go
ahead and say source dot play and it
would play the clip associated which is
the clip that we've inserted up here
however I think that there are some more
awesome stuff that we can do with this
we can add some randomness to how the
sound plays now definitely think that
that's something that we should do so
let's think about this for a moment we
have these variables up here well we
could start by adding a public float
which is going to store the volume a
public float which is going to store the
pitch so now we have those two settings
but those are kind of static and we
could just set those directly down here
which we're going to start out by doing
so we're going to say that source that
volume should equal actually that give
these up here's some default values and
let's just add that bank in there so
let's just set that to a default value
of 0.7 and this to a default value of 1
and you can see that we can simply add
these in here so that's going to be
equal to volume and we could do source
start pitch and set that equal to pitch
and then it's going to be just fine and
maybe we should see if this is showing
up
the inspector and actually let's go
ahead and test that now so we can go in
here and we can define a sound array and
this is simply going to be a list or an
array of sounds so that's going to store
all of our sounds and we want this to be
editable in the inspector but not
accessible through script so we'll make
this a serialize field however this is
not going to work you can see if I save
this now and head into unity and wait
for it to recompile here you can see
that the audio manager still has no
fields showing up you can actually see
this array and the reason why is because
this class is not marked as a
serializable class so again we need to
go up here and add systems that
serializable and now this should work so
if we save that and head back in here
you can see it's showing up and then we
can add however many elements that we
want to add but I'm just going to begin
with one we can add a name to it and
this is going to be the respawn and we
can drag in an audio clip and you can
see that we have this volume and pitch
values right here however this kind of
sucks
instead of changing this value here
which is kind of an arbitrary value well
we don't want our volume to ever go
above 1 or below zero we could add some
kind of restriction to this and we do
that using a slider and to add a slider
we simply use an attribute here called
range and in this we give it a minimum
value of fast
zero and a maximum of one so that's
simply going to clamp this volume
between zero and one in the inspector we
can do the same with the pitch here
that's going to be clamped between 0.5
and 1.5 let's say you can put in
whatever values you want here so now
when we save that and head back in here
it's just gonna feel a lot more a lot
nicer so now we can set our volume here
to 0.7 and a pitch here to 1 and you can
see that we can simply adjust
these however we want to so that's very
easy and and looks much nicer
next up the randomness so we can
actually go ahead and create two more
fields we can make a public float which
is going to be the volume randomness
volume variance random volume whatever
you want to do I'm just gonna do random
volume here and this is going to be a
multiplier so I'm going to default that
to zero point one so that means that if
our volume was let's say if our pitch
had a random pitch of 0.1 the pitch
could vary between
0.9 and 1.1 because it's simply a
multiplication however with the zero
point seven here it would be zero point
one it would be serpent's seven times
one plus the random volume but I'm going
to show you that in a second so public
flowed random pitch and again to fold
that to zero point one and it's very
good to have these random values in the
game to make it sound not repetitive so
we're going to give this a range also
and it's going to go between 0 and 0.5
maybe I think that's actually the volume
that's going to be fine
and we're going to do with the do the
same with the pitch here and then down
here they want to set it equal to volume
multiplied with 1 + random range and
remember to put a parentheses here
random that range and this is going to
go between negative random volume
divided by 2 to positive random volume
divided by 2 so this is what it's going
to look like and we're going to do the
exact same thing with the pitch only now
we change this to pitch and random
pitch here and there so that's going to
give our sound some variants and of
course you can see why this works
because we multiply it with one if we
have no randomness whatsoever then this
is going to go from zero to zero and the
random number between zero and zero is
well zero and therefore this is just
going to return one and when multiplied
by one this is simply going to be the
volume if we go between 0.1 or if we
have a randomness of syrup on one this
is going to go from negative 0.05 to
positive 0.05 which is going to be an a
range of 0.1 and then we add that onto
the 1 so this could either be zero point
nine five or one point zero five and
then we multiply that with the volume so
you can see how that works good so let's
delete this now and I think this is
pretty much all we need to do inside of
our sound class next up which is just
adding some methods to actually make
this work within unity very easily so we
can just go in here and check that all
of these settings are working so just
wait for unity to reload here and you
can see that they both both defaulted to
0.1 and how we can drag these around as
we want for example the respawn count
down here is not something that I want
any variance on since it is basically
just my voice and that doesn't get too
repetitive if it's only played like
every time you fall down it's not a very
repetitive sound like a machine gun or a
dying effect or anything like that so
we're going to be just fine with that
cool and yeah so inside of our audio
manager class we're ready to add some
different functions first off let's make
in the start function we can basically
loop through all of our different sounds
and add an object for each one of them
so make a for statement whoops a for
statement and this is going to be I and
it's going to be sound
that length so for every sound in the
sound array we are going to add a new
game object and we're going to store
reference to this so it's going to be
game object on the score Co equals new
game object and we're going to give it a
name and the name that we want to give
this is well that's prefix it by sound
underscore and then the number of the
sound so let's just do the index here
plus another your underscore plus and
then the name of the sound so let's do
let's do you sound too I dot name that's
how it can be cool and for now it's of
course only going to spawn one object
but when we add more this is going to be
made to make it very easy to find the
correct sounds and see the settings and
if they've been applied correctly and
all of that and next up we are going to
actually add a component to this which
is going to be the audio source
component because this is going to spawn
without anything attitude only a
transform component and so we simply go
underscore code dot add component of
type and then audio source there we go
and then we can call on the sound so
sounds incremented by I dot set source
and we want to set the source to the
newly added audio source this is just
the same as reference it reference ring
said sing it up here so if we do audio
source here and call this underscore
source equals that that is the X and
then putting in the source here that's
the exact same as simply doing this
except this is not going to store
anything in the variable and so it's not
going to be cleaned up with the garbage
collector because it's never really
added so this is going to be as a tiny
bit faster cool so now that we have that
in place let me just think what we need
to do
we are setting the source and all of
that is perfect then we can go ahead and
create a method for playing a sound so
I'm going to make a public void here
called play sound and this is the audio
manager so later we can do some special
things for music if that's something
that we want to do but we'll we'll see
and this is going to take in a string
which is going to be the name of the
sound and it's simply going to loop
through all of the sounds so I'm
creating the same loop as we had up here
and there are more effective way of
finding a specific sound all that I know
but this is going to be just fine and
it's very easy syntax I mean you
understand why this is working so don't
worry unless you're going to be having
hundreds of thousands of sounds this is
going to be fine
and then we check if sounds make an if
statement here if sounds - I third name
is equal to underscore name then we
found the correct song the sound and
we're just gonna play the first sound
that comes up with that name if they're
multiple the other ones are going to be
skipped we could just loop through all
of them and they let it play all of them
that would be just fine but I think it's
it's alright if we only play one so we
are going to now play that sound by
doing sounds - I dot play there we go so
once we found it we call play on the
sound and then we want to return so
there we go we exit out of the loop and
everything is fine and if we reach this
place down here well then it's because
it has has not found any sound with that
name so no sound with name and then we
are ready to throw some kind of debug
that log statement it's not going to
crash or anything but we definitely want
to let ourselves know because then we
are calling something
that doesn't need to be caught so we're
just gonna throw warning here saying
that audio manager sound not found in in
sounds ray or in lists and then we
specify the name of the sound here so
not found in this + and then we do
underscore name alright so I'm just
gonna do a comment there instead looks
cleaner cool and that's basically all we
need there's only one thing with this
and that is we need a reference to this
on your manager and instead of getting
that by dragging in as a component or
whatever we're going to be using a kind
of TD single term as we've done before
so again let's create a static reference
and then set that through the awake
method so here we're going to create a
public static audio manager and this is
going to be the instance and in the void
start or void awake we simply want to
set instance equal to this and we can
just check if there are multiple things
and then throw an error so if instance
is not equal to null debug our error
more than one audio manager in the scene
there we go and this is just going to be
an else
cool and I believe that was all we
referenced that we go down here and just
for a quick testing we can call the
audio to play method through here let's
just go and do that so we'll just play a
sound here so we'll say play sound and
the sound we want to try playing is the
respawn sound just to see if this is
working and let me just turn on my audio
here so I can listen in on whether or
not this is working and let's try
responding 3 2 so that's actually
working and you can see under the GM
object that we okay so this sound is
right here and we probably want to
parent it to the GM object I forgot that
part but you can see that the volume is
randomized the pitch is randomized
within the boundary we've set and yeah
that's all really perfect and you can
see it's named correctly and all that so
just to make this a bit cleaner we're
simply going to go into this game object
and say go Don transformed on set parent
and we want to set it to this don't
transform there we go and that's just
gonna look a lot better so if we hit
play now it's going to play the sound
responding and you can see that it now
appears under the GM object we can of
course create a sub object for this you
can do whatever you want with this in
order to organize it but this is going
to be the very basics so let's just try
and implement this let's remove this
play sound cold right there let's
instead open up our game master and we
can now delete this audio source right
here it's not needed let's create a
reference to our audio manager from
within this game master so let's create
down here let's create it down here a
privates audio manager so we'll just do
all of a caching here cache private
audio manager and let's just call this
the Audio Manager and in the stop method
we'll set
we do all of this and then we cash we'll
simply set Audio Manager oops
Audio Manager equal to Audio Manager dot
instance cool and we can of course check
if this is null we should probably do
that so if audio manager is equal to
null and then we throw a debug log error
saying that freak out the no audio
manager found in the scene there we go
and then under the respawn player where
we find our audio source source and play
this sound instead what we want to do is
we want to say Audio Manager dot play
sound and then we give it the name here
so respawn and instead of hard-coding
this we could add it as a variable up
here which I think we are going to do so
we already have all of this spawning
stuff so let's do a whoops is to a
public string and this is of course
going to be the spawn sound name and
we're simply going to feed this down
here okay save that remember when we go
back into unity to change this variable
there we go to respawn now hit apply
collapse that collapse that clear that
perhaps that and that and that okay we
want to watch that and now hit play and
hopefully it's not gonna play right away
but it's added here now
you can see that the volume and pitch is
defaulted to one but this should change
as soon as we actually respond so when I
jump down now responding it changes to
you and the sound actually plays so you
can see here
that the volume just bumped down to 0.3
67 that might be correct but I actually
only wanted it okay so it starts at 0.7
so that's why and that's just fine so
you can see that this is now working
just as intended we have the variance
and I want to disable this from for that
there we go and he'll apply to that and
you can go ahead and add all of the
different sounds that you want by simply
following this very simple pattern of
getting a reference to the audio manager
and then calling the play sound you
don't even need to cache it if it's not
something you want to do you can just
call it directly it's not gonna hurt
your performance too much so that was
basically all I wanted to show you in
this video I hope you enjoyed it and
I'll see you in the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>