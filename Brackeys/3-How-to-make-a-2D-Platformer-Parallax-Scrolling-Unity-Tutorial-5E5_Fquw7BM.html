<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>3. How to make a 2D Platformer - Parallax Scrolling - Unity Tutorial | Coder Coacher - Coaching Coders</title><meta content="3. How to make a 2D Platformer - Parallax Scrolling - Unity Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>3. How to make a 2D Platformer - Parallax Scrolling - Unity Tutorial</b></h2><h5 class="post__date">2014-05-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5E5_Fquw7BM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thanks for tuning in at brakus hello
Anna welcome to the third video in the
how to make a 2d platformer course today
we're going to be taking a look at how
to achieve the parallaxing effect that
you see in most modern 2d games so
parallaxing basically means that the
foreground and the background will
scroll at different speeds which will
allow us to create depth in our game and
one when I say depth many people get
confused because they say well it's a
2-d game how can you have depth and it's
true that we aren't actually creating
depth because we're using an auto
graphic camera which before it renders
stuff will align everything on this on
the same point on an axis but it will
allow us to cheat a bit when we see them
scroll at different speeds in relation
to the camera so please bear with me I
once you see it working it shouldn't be
that difficult to comprehend awesome
before I get started I just want to
quickly say that I'm looking for someone
to do the character design because I'm
not that great with drawing I mean the
environment in itself was was
challenging enough so if you are good
with a pen in any way or just up for a
challenge please write to me the email
and subject line is on the screen or
reach out to me at twitter i Braca
street or on my personal facebook which
is in the description cool so that was
the longest intro yet I think that's now
get started so as always I've opened up
unity and right now when we hit play you
will notice that everything moves in the
same speed and this is not really
something that we would like so let's go
ahead and change this with the script so
this is going to be our first script in
this series and please note that this is
not the easiest script if you have never
coded before maybe check out the mega
game course or the going to d1 so we're
going to go ahead
create a new game object it's going to
be an empty game object so let's press
control-shift
N and let's rename this to underscore GM
the underscore will make sure that it's
always at the top of the hierarchy and
then GM for game master I like to Center
this just so we know where it is and now
let's hit add component new script and
then change the type to c-sharp and
let's rename this to UM parallaxing yeah
so now we create an ad and now we can
double-click it to open it up in mono
develop so monodevelop is unities
built-in
script editor but I feel free to use
anything you want whoops let's try and
open this up again there we go it's unit
is building script editor monodevelop
does a lot of other stuff it's great for
c-sharp I find especially with the new
version it's also gotten a lot prettier
with unity for but you can also use
stuff like notepad plus plus or Visual
Studio yeah so feel free to choose
whatever you need cool so now let's go
ahead and first off declare some
variables so and we're going to keep the
stat and the update functions because
we're going to need them in just a sec
so first let's create a an array that
will store all of the elements that we
need to apply parallaxing to so we're
not going to apply parallaxing to the
middle where our platforms are going to
be and where we're going to have all the
gameplay stuff that would be way too
complicated we're only going to apply
parallaxing to the background and the
foreground so now let's create a public
transform and to make an array meaning a
list of objects instead of just one
single object we're going to do
and open and close square brackets and
now we can name it so now we can just do
let's just do backgrounds for short and
close it with a semicolon this is also
going to store four grounds but L say we
would have to do elements and yeah
background is just simpler so this is
our array meaning a list of all the back
and four grounds to be paralyzed awesome
now let's create a private float and
this is also going to be an array that
are going to store all of the parallax
scales meaning the value the proportion
of the cameras movement to move the
background spy and we're going to
automate this so that we don't have to
apply a value for each one of these
elements but we can simply just move
them back and forth and on the z-axis
and then the script will take care of
everything for us so we don't have to
like guess how far it's going to back
it's going to be we can simply move it
on the z-axis so to do this we are going
to have a list of the object object
scales so let's call this parallax
scales you could also call it amount of
parallaxing or whatever you want I'm
going to call that skills and this is
again the proportion of the cameras
movement to move the backgrounds by
awesome just under this we are going to
do public float and this is just a
symbol float value not an array and
we're going to call this smoothing you
could also call it parallaxing amount
because it's pretty much what is it does
in reality but in theory what it does is
smooth it
so this is how smooth the parallax is
going to be make sure just to set this
above zero or the parallax and effect
will not work so by default let's set
this to maybe one just to make the
effect really apparent cool so that was
it for our top variable declarations now
let's do a private transform and we're
going to call this can and this is
simply just a reference to the main
cameras transform this it's it's general
good practice to store this and a
variable because it will it will first
of all be faster and also it's just
easier in writing to just read through
it when you when you have a short name
for it cool and then we're going to do a
private vector3 meaning a to plat
meaning you know a x y&amp;amp;z value and we
call going to call this previous cam
position and this is going to store the
position of the camera in the previous
frame and this is what we're going to
use to do the calculation of parallaxing
and the calculation itself is not neat
something you need to understand it can
be hard to wrap your head around but
please just write this after me and and
we'll look into understanding it further
later or you can always look up the
effect um cool so now let's create a
void awake function oops
awake and let's open up some square
brackets here
oh not some square brackets curly
brackets I mean they're cool and the
reason why we have both in a wake and a
start function is because I wanted to
explain to you the difference of the two
so the awake is called before start and
what it does is is it will call all the
logic before the start function but
after all the game objects are set up
this means that it's great for assigning
variables like the camera here so just
assigning references between scripts and
between objects so great for references
awesome I try to comment out a lot of
the code I write both so you can read it
afterwards and also just so you can
quickly look back if you don't get my
verbal explanation so I hope that's okay
now we are going to set up the reference
the camera reference refer runs set up
camera reference and we do this by
writing cam equals camera main dot
transform we could of course just make
this a public transform and then drag in
the camera inside of unity but this way
we just select the main camera much more
easily and we make sure that we always
remember to do this because we don't
have to awesome so the start is used for
initialization and that's what we're
going to do we're going to initialize
our different variables so first off
we're going to say we are going to store
the previous frame so the previous oops
previous frame had the current frames
camera position so we are going to do
previous campus equals cam dot position
so this way we assign the cam
previous can position to the position of
the camera just when starting out and
again please just ignore this that's
just something we have to do and then
what we're going to do now is we're
going to loop through meaning that we're
going to take the backgrounds list here
it's technically an array but I will
call it list and we will take every
element in it we'll say hey you're an
element and then we will assign that
element a parallax scale so basically
what we'll do is we'll say that the
parallax scales list is going to be just
as long as the backgrounds and then
we're going to loop through all of the
backgrounds and assign their Z value to
the parallax scales so we're going to do
this in the start function and what
we're going to do is we're going to type
parallax parallax scales what is this
not working let's try this again
parallax
scales equals hmm ever written
yeah I forgot to write this with two L's
so let's try this again you were
probably thinking this all along
parallax scales equals new float and
remember the two square brackets and
then a semicolon and inside these grab
brackets we can declare a length so what
we're doing here is we're assembling
saying that the parallax scales should
be an array of this length and the
length is just going to be backgrounds
length awesome so whatever we we set the
backgrounds to be we are going to get
the length here and then we are going to
loop through them so for int I equals 0
I is less than backgrounds dot length I
plus plus and then open up this graph
brackets or I keep on saying square
brackets stuff of course mean the curly
brackets call so what we're doing here
is we are using a for statement to
iterate through and what we do is we
make a variable called I and we set this
equal to zero and we say that as long as
I is less than the length of the
backgrounds we're going to keep on going
and every time we have looped through
this we are going to set I we are going
to increment I by one so this will allow
so this will be called as many times as
the background that length is long and
what we can do in here is we can set the
parallax parallax scales and then inside
the curly brackets we're going to do I
equals backgrounds and then inside the
curly brackets we're gonna do I again
dot position
dot Z and then we're going to do x minus
one just because that something we need
to do don't you don't need to worry
about that just make sure that the x
minus one is in here or we're going to
get the opposite effect of what we want
so what we're doing here again in some
right to summarize it is we are making
sure that our parallax scales list is
just as long as the backgrounds then we
are going through each background and we
are assigning that background set
position to the corresponding parallax
scale awesome so that was basically it
and again you don't need to get all of
it right away but I'll just say here
that what we're doing is we are
assigning corresponding
parallax scales call then in the update
function we are going to get to write
the actual logic here so what we are
going to do is we are going to write
another for statement so for each
background we are going to do this so
for I I'm sorry int I equals 0 I is less
than backgrounds dot length I plus plus
so that's the exact same statement as up
here we simply moving through the
backgrounds and then the curly brackets
and then here we're going to first
offset us say that the parallax is the
opposite of the camera movement because
the previous the previous frame
multiplied by the scale so we are saying
float parallax equals previous can
position X minus cam dot position dot X
times the parallax scales I enclose it
off so what we're doing here is we are
saying that the parallax in effect
should be the difference between what
our cameras position is now and what it
was before meaning how much is moved and
then we are going to time this by the
amount we want the parallaxing to be so
does that value of the background that's
basically all we're doing we are taking
the movement and we are applying it to a
value and multiplying it by the scale
awesome so what we can do now is we can
here we can set a target x position
which is the current position plus the
parallax multiplied let's just forget
that plus the parallax awesome so we're
going to do float background target
position X so we are making a new
variable here equals backgrounds of Y of
I dot position dot X plus parallax so we
are just saying that the new we are
taking the parallaxing and we applying
it to a actual position so we are
storing the background target position X
in this variable we are storing the
position of the background plus the
parallaxing that's all we are doing and
then next up we can create a target
position with the actual x position and
the actual Y position so we can create a
vector3 here so let's do create a target
position which is the backgrounds
current position with its target X
position so we are doing vector three
backgrounds a target position equals new
vector3
background target position X for the x
value and then we're just setting it to
the Y and the Z of the background so
backgrounds I dot position dad why and
backgrounds I dot position dud Z so
basically all we're doing here is first
off we are making a variable for the x
value and then we are adding this to the
target position which is just a vector 3
so it's just going to assign the
background target position on the X and
then take the same Y and the same Z as
it had before we could also do this on
the Y but since we are not going to be
moving too much up and down I think that
we will leave this out so far and then
may be added in later that's a challenge
for you if you can figure this out on
yourself please go ahead and try it out
but it's not something that we are going
to add right now I think this is more
than plenty and I know that this is
maybe too difficult for some of you but
please note that that you can of course
get this script from brackish calm
should you be lost and and definitely
not all of the coding that we are doing
is going to be this hard this is pretty
much the peak
I hope code so then we assembly going to
loop meaning fate between the
backgrounds position and the new target
position so fade between current
position and the target position using
what is called lurk and we do this by
saying backgrounds of I dud position
equals vector 3 dot lie
so vector3 has an automatic as the lab
function built-in allowing us to fake
between positions and that's really
awesome so inside of this you're going
to fade between the backgrounds i dot
positions are our current position and
the background target position and we
are going to do this using the smoothing
effect times time Delta time and time
that the time is hard for some to
understand but basically all you need to
know is it converts frames to seconds so
instead of doing this by frames meaning
that if you're completely computer was
running this really well the background
effect would be all kinds of crazy that
we're doing this in seconds since that
so we're going to round this off and
yeah cool then at last when we get out
of this for statement we are going to
set the previous can position to the
campus camera position at the end of the
frame so we're going to set the previous
campus to the cameras position at the
end of the frame and we do this by
previous can position equals Camden
position just as we did in the start
function that was all okay so if
anyone's still watching that was
basically it so now we're going to hit
save and we're going to take care of all
the errors this I this might be the
first time in tutorial history that
anyone has done parallaxing without
errors
something has got to be wrong but let's
try this out so what we can do now is we
can actually set this up and if you've
downloaded the script this is where you
should tune in because now we're going
to actually achieve this effect so let
me just check
how long we've been recording here Wow
okay so this sure was a long one might
need to split this up cool so now on
this parallaxing script you can see that
we have a an array here which we can
adjust the size of we're going to set
this to 3 because we want both the
background mountains blue and purple and
the foreground dirt so now we have three
elements in here and please note them
whenever you are setting the background
size unity will sometimes not allow you
to do this if you put in a number and
then click out it will just cancel so
right 3 and then press Enter the
smoothing we are going to just leave
this at 1 for now to just see how the
effect works and then we're going to
tune it down a bit later because it this
is going to be a bit too crazy
I believe awesome so now let's just add
the different elements and it doesn't
really matter which order they're in so
just drag in the background mountains
purple the background Mountains blue and
the foreground dirt and we're going to
hit play and you're going to notice that
this is not at all working and that's
because we have to also adjust just that
position and this is the really cool
thing about doing it this way with all
the erase and stuff is that we can
actually just select the different
elements and then move them back in
relation to each other so you're going
to remove this almost as far back as the
blue background just in front of that
and we're going to take the purple one
and we're going to move it also pretty
far back but a little less so something
like this I believe would look pretty
nice and then we're going to take the
foreground dirt and let's just see why
it's our camera it's there you can of
course view this from the left side if
needed I'm going to do that and we are
going to just move this over if you
click on this cube we are going to
change well that's not going to work
nevermind okay so let's just move this
over so it's not
behind the camera it will not appear but
just in front and let's hit play and see
how it works so now when we move the
layers will move accordingly and this
actually looks really cool I think this
gives it a really nice effect you can
see that our foreground is moving faster
than the middle here and the background
is of course moving slower so that's
awesome and we still have a little bit
of parallaxing occurring between the two
background layers which is pretty
awesome so I might go ahead and bump
this effect down a bit and might even
see if we select the camera here how far
we can push this now this is as fight as
it's going to get that's that's of
course the only thing that might be
annoying about this technique but is
that you you have to still be inside the
range of the camera but in order to
change this you can just change the
smoothing and then simply adjust them
afterwards so let's try setting the
smoothing to ten just to see how it
looks and this is going to be pretty
extreme you can see this is what
parallaxing does when it's way too high
that this loop doesn't look nice at all
but maybe something like let's try to
0.5 now that's too subtle let's actually
try maybe two and again just play around
with this until you find something that
works this is too extreme I think I'm
just going to do go with one for now and
then we can always change it later but
that just added some real nice depth to
the game so I hoped I hope that you're
pleased with the results we still have
some things to take care of for example
the looping of the ground here right now
it's is cutting off when you get too far
to the right we have to adjust some
colliders there's no player thing plenty
of stuff to do it's all going to be much
easier than this hopefully and yeah
thank you for watching and I'll see you
in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>