<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>12th. Unity Tutorial, Enemy AI - Create a Survival Game | Coder Coacher - Coaching Coders</title><meta content="12th. Unity Tutorial, Enemy AI - Create a Survival Game - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>12th. Unity Tutorial, Enemy AI - Create a Survival Game</b></h2><h5 class="post__date">2013-03-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aGX64eXs9e0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and welcome to the
twelfth video in our survival game
series done by Brad keys I am the CEO of
brakus and today we are going to take a
look at something a lot of you have
requested enemy AI subscripting enemies
this is a very difficult subject and
it's also difficult for me to explain it
can be very cryptic and there can be a
lot of different aspects to it that you
have to customize to whatever kind of
game you're making but I think I have
come up with something that works pretty
well and something that is pretty
somewhat easy to explain and understand
for you guys I have decided to split it
up into two parts though the part that
this video is going to be showing is the
simple AI scripting this is the script
we are going to be making and I've
written it out beforehand just to make
sure that I don't make any errors but
this is what we are going to be making
today and I'm gonna explain everything
and I definitely do not expect you to
understand everything in the script
it is hard then we have the AI script
this is a lot more advanced no not a lot
more advanced but it takes care of stuff
like physic interaction and also some
logic with the enemy being attacked he
will get more angry and therefore chased
you the player more persistent so there
are some pretty cool aspects to this
door 1 included in this tutorial because
I think it's too early for you guys to
to learn yet so but I will include it in
the assets pack though which you can go
ahead and download from our website so
let's go ahead and make a new window
here so I can quickly show you where you
can get them because people have asked
me oh went over so if you go ahead
and open up your browser and type in
brackish com
you'll get to our website and the second
banner here the unity tutorials just
click that and you can just download the
assets here it will be in a raw file and
I will include both of these even though
I will only show you this one alright so
let's get started that was a long intro
okay so as always I have to open up
unity and today we are going to take a
look at this guy before we get into that
I want to make one quick adjustment to
our player because our player currently
is a little short and compared to a
human being so I want to make him longer
and instead of just scaling him in the Y
um
I want to scale the different parts
separately else we are going to scale
everything that is parented to it which
means repens armory
and things will start looking weird so
and if you're still using this default
do as I tell you here so first of all in
the character controller they collide
you here I'm going to change the height
from two to three that's a little more
realistic so you can see is now taller
and if we go ahead and open up the
player and go on to the graphics let's
make sure that we can see this change in
the graphics also so we can go ahead and
scale the graphics up to something like
through 0.75 and now you can see that
the colliders and the collider in the
graphics match up and at last I want to
move the main camera up there you go
so if we go into the game view you can
see our character is now a lot looking a
lot better and I can see that I've made
a little error in the positioning of
this camera you're going to have to play
around with this looks like I have to
drag it down yeah that looks
you okay so the Vanara enemy is really
short this won't matter in in what we're
doing here well of course you can just
go ahead and scale him up all right so
let's create the scripts the enemy
scripts so on for now it's going to be
in a separate script from the enemy
logic and I just want to go ahead and
rename the enemy logic so click it and
you will thereby open it automatically
in the project and you can go ahead and
right click rename and just click the
name and I'm going to call this health
enemy health because that is not all the
logic ok so again click the player click
Add component a new script I'm you're
going to call this mmm a I simple create
an ADD double-click it to open it up in
monodevelop
this video might be split up into
separate even more parts i'll see if
that is necessary depends on how long
this is going to take I really want to
go in depth with this because I think
most of the tutorials out there just
give you a non complete script and
doesn't even explain
probably properly how it functions no
offense to anyone there are good
tutorials too alright so let's start by
making a variable and this variable is
going to be called distance and you can
just go ahead and make a semicolon right
after no one I'll make it capitalized so
and this is because the type is
something we are going to declare later
so let's make another one this is going
to be the target what we are going to be
chasing in this case the play and this
is going to be a transform then we are
going to create another variable and we
are going to call this look at distance
look at
distance and it's going to be I would
say equals 15 point
Oh seems like a good number now you know
what let's make this even bigger let's
make it 25 point girl I did some testing
earlier and that turned out to be pretty
good offer value a new variable attacks
range and this is going to be equal to
15 point out and get another one call
this move speed and this is going to be
5.0 and last one this is going to be
damping and this is going to be equal to
six
Pando all right so on quite a few
variables I now trust me I'll just
explain what the individual virtual
variables are going to do for us as we
come along so I just wanted to write
everything out so you can see what we
are going to use now let's create the
update function I went ahead and deleted
it but then you can always just make it
again so function update then the two
semicolons and the bracket keys okay so
now we're going to type distance equals
weight vector vector vector 3 dot
distance open a semi code no parenthesis
and I think I make that mistake before
too I'm sorry about that target dot
position comma transform dot position
okay so basically what we're doing here
is we are making the distance a line
we're making we're making it so the
variable distance is what's called a
vector three and a vector 3 is a line in
3d space if you have
we had some more advanced mathematics
you have used it there too so basically
vectors you use for line calculation in
a 3d space and so we want to draw in the
line between the target position the one
we are chasing after and our position
and so we can measure the distance from
us there or sorry from the the enemy to
what it's chasing in this case s alright
so on I've made some spaces and uh let's
go ahead and type if distance is smaller
than look at distance brackets renderer
dot material dot color equals color dot
yellow right so what we're doing here is
we're simply saying that we're simply
making a a vector so we are measuring
the distance between the enemy and us we
are seeing if this distance is smaller
than the variable look at distance if it
is we want the enemy to shift its color
to yellow all right so let's continue
now we will write if oh sorry
I missed something now before we close
off the if statement completely will
write one more thing in here will call
the function we call the function look
at so what we're doing now with this is
state if statement we're changing its
material to see what state in its in the
is just a help for us so we can see
whether or not it's just looking at us
frightened by us or it's chasing us or
it's completely ignoring us so if the
distance is smaller than the look at
distance it won't be ignoring us we want
the enemy to start looking at us it has
now detected that we are nearby and we
want it to notice us so it will rotate
to us so look let's go ahead and make
the function that will make that happen
so you can see how we are calling a
function let's make that function
function look at and this is of course
outside of the update brackets open and
close parentheses open and close
brackets and inside those brackets we
want to make this we want to type var
rotation equals quaternion and
quaternion is quite a frightening word
it's not past complicated as it sounds
it's basically rotation not not all the
time but um for this it's basically
rotation that look rotation target dot
post position minus transform dot
position close the parentheses and end
up with a semicolon so this is going to
be creating a new variable called
rotation I'm just going to store the
quaternion that look rotation target dot
position
- transform that position I know this
sounds cried a lot and I won't be
explaining this too much as it's a
little too hard to understand for some
at this point that's alright I sure
didn't
stand this when I was when I had watched
on the 11 videos assuming that I'm the
only person you watch on YouTube but
anyway and so that will store a rotation
and now we want to type transform that
rotation equals quaternion dot slope
transform dark rotation rotation comma
rotate the variable we have just no
rotation again the variable we just
created comma time dot delta time space
times damping the variable and created
earlier called damping alright so let me
try to explain this line to you
we want our kind rotation and by our I
mean the enemies so transform that
rotation because this script is attached
to the enemy that will be the enemy's
rotation it's now equal to quaternion
touch slope catonian just that slope
will slowly turn when we apply the
damping so this means that we want to
shift from the transform that rotation
our rotation or the current rotation of
the enemy I should say to pointing
towards us and it should do this in the
timbre of time to Delta time x damping
damping is a value made by us and it
will basically smooth out the smooth in
the animation or the movement the
rotation of the enemy
and time.deltatime that's just going to
make sure that no matter how many frames
you're running at the rotation is always
going to be the same so this basically
rotates the enemy towards us as smooth
and as you will like it to be based on
the rotation we got right before with
this line okay so now let's go back into
the function update and let's type F
distance is greater than that should be
capitalized it's greater than look at
distance so now the enemy is a longer
distance from us than the look at
distance that means that we want him
want him to ignore us
so the renderer o-type out
the renderer on that material that
caller should now be able be equal to
the color green all right so now we have
two instances either the enemy is within
the range those are the enemy's target
is within the range that we have set and
then it will be looking at it or it's
not within the range and it will be
ignoring with the color green
I'll just space out this a little more
let's create yet another if statement so
now we are going to be typing if
the distance is smaller than attack
range again the variable we created
earlier then we want something to happen
and again I've stored this in a function
and I've called it attack
all right so close it out with the
semicolon and we also wanted to change
color of course so let's go ahead and
write just above that renderer cut
material dot color you can almost guess
it by now equals color color dot red now
he's aggressive now he wanna killers so
I'm let's end up by making the attack
function all right
so type function attack the parentheses
the two brackets and inside them
we're gonna type transform dot translate
open parentheses vector three again the
line that forward this time we're just
using the vector three as a direction x
move speed times Delta time and remember
time.deltatime is only there to make
sure that frame rates doesn't affect
anything all right so on what we are we
have happening here is that we have our
transform that translate vector three
forward x move speed times Delta time
this means that the current transform
is going to is going to be affected by
these so we want the enemy to move
forward back to 3.5 by the move speed
that we have set and not be affected by
frame rate let's go ahead and see if we
have any errors I can see we have oh so
I forgot to close out I'll close it off
with a parenthesis so I'll just make
that right before the semicolon and we
have more errors okay so I found out
what was making our errors and if we go
ahead and head back to the script I
forgot to delete out the prac Maastricht
that should fix most of most of it but
we have one left and that's because the
typed render not render run so now that
that is fixed fixed let's go ahead and
go back into unity and try out a game
how of course we have to assign the
target variable so we are going to drag
our player into the target variable slot
under the AI symbol script let's also go
ahead and move away the enemy move him
over there now we have some space space
to go on so as you can see first of all
it changes the shader so that he now
looks green and when we get closer
he'll shift to a yellow color and when
we get and now he's looking at us and
when we get even closer he'll turn red
and he will start chasing us so this is
the most basic AI you could just make a
simple if statement if you are a little
impatient that when the distance is
lower than
and hits a hit variable that could be
like about three then he should call out
a damaging function on the player or
just destroy a player but we'll
definitely be calling that in future
tutorials let me just go ahead and
quickly demonstrate the difference
between this script and the more
advanced in the more advanced stuff like
this is fixed so if I can just run a
little faster Oh see he can't fly that's
that's one thing for sure and also he
can't go through walls you can see him
here clipping through walls and if I was
fast enough to actually um run past him
I would also be able to show you him
going directly through any kind of wall
or terrain which also means that he can
be lost inside the terrain and you
definitely do not want that to happen in
a nay future game that you're going to
put out it's one thing I didn't want to
code in the kill pill game we made I was
a little lazy there but okay so I just
want to tweak the variables so I'm going
to tweak the look at distance 2:25 the
attack range 215 the move speed is maybe
a little dramatic but we'll start with
this and then go ahead and try to play
it again and there he noticed me that's
pretty good distance and then he goes to
attack me yeah that was a I scripting I
hope you enjoyed it
and
I'll see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>