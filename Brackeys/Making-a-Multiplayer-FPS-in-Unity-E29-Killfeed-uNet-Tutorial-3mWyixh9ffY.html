<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Making a Multiplayer FPS in Unity (E29. Killfeed) - uNet Tutorial | Coder Coacher - Coaching Coders</title><meta content="Making a Multiplayer FPS in Unity (E29. Killfeed) - uNet Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Making a Multiplayer FPS in Unity (E29. Killfeed) - uNet Tutorial</b></h2><h5 class="post__date">2016-10-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3mWyixh9ffY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this video is brought to you by our own
Metta thank you so much for donating if
you want to support breakage yourself
you can go to patreon.com/scishow cheese
thanks for tuning in at brac ease hello
everyone and welcome to this video in
creating a multi-player face in unity
today we'll be making a kill feed which
basically means that whenever a player
kills another player it that will
display in the top right corner of all
of the different clients connected so
that you will be notified whenever
something happens in the game you can
also easily turn this into a more
generic notification system that also
says whenever a player dies joins
disconnect and even at chat
functionality but for now we'll just
keep it simple with a kill feed so we'll
be building a simple UI for doing that
for spawning in these UI pieces and then
deleting them after a certain amount of
seconds and we'll also be doing a bit of
back end integration so that we have an
easy way of keeping track of whenever a
player is killed and sending on a
username of the player and a username of
whoever killed him so without further
ado let's just jump right into it so you
can see I'm here in unity and what I
want to begin with is just navigating
over to our main level so we have
something to build our UI on top of and
I want of course to integrate this into
our prefab called the player UI which is
spawned into the game automatically for
us so inside of this we can go ahead and
create a UI panel there we go the panel
there and let's make this anchor to the
top right and let's definitely size this
down something like that and I also want
to drag it out a bit from the corner
something like that looks pretty decent
and actually they don't want the
background here in the game but for now
I'll just keep it so we can easily see
what's going on and I'm going to rename
this one to our kill feed you could also
do notifications chat whatever for now
this is gonna be our kill feed and what
I want to do is add a separate component
to this called kill feed and this is
going to be a script that will create in
a second well I just want to go ahead
and add it for now and under this object
is where we will have our
elements for the actual little pieces of
information so in here we will have a
well a kill or a death or some kind of
notification so we'll have a separate
panel for that because I want to give
that a background and now you can see
that the panel here is overlaid on top
of the background of our kill feed and I
don't want that I want this to first of
all be black there we go and I also want
this panel here to have its own height
so I wanted to definitely our size on
the width here a stretch on the width
but I wanted to have a separate height
so let's go in here and create a
vertical layout group and we've done
this before and you can see we don't
want this to expand on the height
instead we want to go into a panel here
and define a layered layout element with
a preferred height of say 35 so this is
going to be one killin we can duplicate
these along and I definitely want to up
the spacing to something like five and
Apple is being annoying so let's remove
that and yeah that looks pretty good so
let's delete the other ones again and
this one here is going to be our kill
feed item so this is going to be a
single item on the kill feed and under
this we can create a UI text object as
well which is going to display some
information about that item so in our
place we can say in our case we can say
something like player 1 killed
player 2 and I'll show you something
really cool you can do with styling this
in a second so let's make this totally
white let's make it normal let's bump up
the font size to something like 18 at
least and let's also make sure that this
text object is stretched to fit our kill
feed items so let's just go up here hold
down alt and press in the bottom right
corner there we go
let's also Center this on the vertical
axis it's at least and you can also
Center it here but I would actually like
to snap it to the right I believe I
don't know you can also just make it
totally centered
actually on the left might not be too
bad and then what we can do is just move
in the text a tiny bit here actually
kind of like that so if we create
another item here just to see what it
looks like and maybe just shorten this a
bit I actually really like the look at
that so that's what we're gonna go with
cool but again spend more time on the UI
than I do that's always so now we can go
ahead and remove the background image
here you can remove the component I'd
like to keep it there just disable it
and you can see this already looks
pretty decent but one thing that a lot
of games aren't do is either substitute
this killed ah name here or string or
text with some kind of icon or maybe say
a scroll or maybe an icon for the weapon
that killed the player and you can
definitely throw that in there what you
would do is just create another layout
group but this time a horizontal one and
just have a text object here the first
one then next you'll have an icon which
is just an image and then a third text
object as well that's super easy to do
but since I don't have an icon we won't
be doing that today and really it's not
necessary it's just one of those UI
things that you can have fun with on
your own and another thing that a lot of
games do is that they highlight the
player that killed the other player or
maybe throw different colors in there to
make it easier to see so what I want to
show you now is that you can actually
insert this text component you can use
some basic HTML tags so if you've done a
bit of HTML or or whatever you can see
that if we write a B like this for bold
and then close it off
that is indeed going to be marked as
bold and you can also do a italic with
an eye here so let's make the last
player there italic or you could even do
colors so let's make this a color equals
then we can just do red or you could do
some hex a hexadecimal color like that
but we're just gonna do red and then
slash color down here and
you can see that we've now made that
player read so that is something that
you can very easily add if you don't
want to split this up into several ones
and if you want it to be depending on
the player so you can associate a color
to each player or whatever so this is
just what we're going to be doing for
now I want to highlight the player that
killed the other player and I want to
make him italic so /i there iam cool so
I think that looks pretty good so what
we can do now is actually add a separate
script to the kill feed item as well the
same way that we had a separate script
for the room list and then a room list
item so let's find here our room list
item there we go and we have a separate
script I don't remember what it's called
now for our listing those items so we
have a kill feed and we have a kill feed
item so let's go ahead and separate this
out the kill feed item is going to be
its own separate prefab just like we
have a room they slide them down here
let's drag that into our prefabs folder
in there now remove it and let's also
save these changes to our player you I
so let's go to player UI and hit apply
awesome so how do we want to do this
well what I thought we would do is
utilize the fact that in all games we
have a game object that is shared by all
the objects who join called the game
manager it sits right here so what we
could do with this game manager is
simply add a callback method some kind
of delegate for whenever a player dies
so in here we'll add in here we'll add a
public delegate void called on player
killed callback and this is going to
take in a string with the player killed
and a string with the source of the
damage and this might be a player or it
might be say fall damage or whatever you
could put anything in there
and we could even put in an action we
could make it something else like
instead of on player kill we can just do
on event or something and then we could
put in an action here so that it would
be um source did action on player and
then you can put a sentence very easily
together but for now we'll just do this
and then we'll have a public on player
killed callback because this here is
defining the type the type on player
killed callback and then we want to
actually create that in a variable and
we want to also just call that on player
killed callback but now with a
non-capital oh there and just close that
up so again remember what we use coal
banks for is whenever we want to call
multiple methods are from one place so
basically what we are able to do here is
have different objects subscribed to
this callback so they say on whenever
this event happens you should call this
function and you should call this
function and all of our different
objects can do that that as they join
more specifically when our player joins
the room we want his UI
to subscribe to this callback saying
that whenever this happens you should
display something on this UI using this
function and then what we can do is not
worry about all of the different UI
elements when we are actually calling it
so we know that they've subscribed to
this method themselves and so when we
actually when a player dies and we want
to call this calling it's called
invoking the methods we don't have to
have a reference to them we only need a
reference to this that's the cool thing
about this so what this allows us to do
is now head into our head into our
player code here wherever you have a
function called die and this is called
through an RPC so we have a function
called die here and you can see we said
is that to true we increase the kills of
our source player the one that kills us
and we increase our deaths well in here
we could just as well - game manager dot
instance
we do need an instance here because this
is not static I don't know about static
boys we won't get into that
so that instance and um then we do dot
what did we call it we call it on player
killed call back and then we do dot
invoke
so this is going to call all of the
functions subscribe to that and then we
pass in our username so our username is
just the one on that we have declared
somewhere up here there is to use the
name so that is loaded in and we also
feed it the source so this source here
is source player dot username and
because we're using source player I only
want to do this in case source player is
not equal to null again the reason why
we have this if statement is to be a bit
safe or secure and that's a good idea
and it's also to make sure that we allow
for other ways to damage players in case
there wasn't a source player maybe it
was just full damage well then you can
just instead of sending over the sauce
player dot username then you could do
down here in L statement saying that
this source was well gravity that's a
very normal thing to do in these kind of
killfeed situations so but for now we'll
just leave this in here because we don't
have any fault damage the only way to
die is from other players and um that
should indeed invoke the method so now
all we need to do is subscribe to that
event um so in order to do this that's
actually build out our kill feed so our
kill feed here what this is going to do
is in the start method it's going to
call something on the game manager it's
going to go game manager dot instance
and dot on on player kill callback and
it's going to add on to that another
function that will create now so on kill
and we can go ahead and create this
method right away and we need it to be
public because it's going to be called
from the game manager whenever you're
doing these callback things just make
everything public it's much easier that
way
so public void on kill and we need the
appropriate parameters here so that is
going to be a or arguments it's going to
be a string with our player username the
player and a string with the source and
then all we do is well for now we could
just throw out a debug deadlock
statement but yeah let's just do that
so we throw out debug deadlock and then
we can say um source plus killed plus um
the player there we go so it's that
simple to do and this should in fact
work right away I mean it's not gonna
display on the UI and should just throw
out a debug that large statement but we
can see in here that whenever the player
spawns whenever the player spawns he
also creates a prefab called the player
UI and part of the player UI is to kill
feed that has this script that means
that we are going to register with the
game manager that whenever on player
killed our callback is invoked we want
that to call this function using the
correct information and then inside of
our player whenever we die we want to
call that in fact fine in that that
function we invoke all of them and that
is going to point back over here and
this is going to be cold so this should
in fact work right away and we should be
able to test it out so let's just do a
very quick test here before we build the
last thing with just just properly
integrating it with the UI and then
we're then we're done so let's just
build out the player here and there we
go oops it's a tall player there that's
better
and let me just talk that over here
while we log in and of course we want to
log in using a login menu here let's do
things the proper way so test one two
three test one two three login let's do
the same here test one two three four uh
test
one two three four login there we go so
this one is locked in let's create a
test room
and there we go we're inside and let's
do the same thing here and it's just
gonna wait to join here we've done this
a million times and whenever it's joined
there we go we should be able to now
kill this player and see that it says
test one two three four killed test one
two three and if we go the other way
around so kill test one two three four
it says test one two three killed test
one two three four so it flipped
correctly and it's reporting it on all
the clients and in fact I have a cool
way to show you how to see this inside
inside and look who is joining us here
so it's a everyone's favorite cat at
least she's mine except for the other
one
they're equally favorite it's not
politically correct to favor one and I
don't anyways so you can see here um
that we can't see debug messages inside
of our standalone build so what we'll do
instead is just close down this build
here so leave the room and close out
there and we'll close this that one down
as well to check whether or not these
are console messages actually appeared
what we can do is find the place that we
built declined to and in our case that's
under our projects member to play FPS
tutorial multiplayer yes builds windows
and inside of here if we go into the
data folder and under the output log and
I know this is quite a pain to go
through and I'm just gonna edit this
with the notepad here and scroll down
scroll down you will see that we have
all of our debug dead log messages here
and if we go down to where did the
player - has zero health we can see that
test123 killed test one two three four
awesome so it's it's actually reporting
it back here as well so that's awesome
so what we can do now is just integrate
this into the UI so in order to do this
we take our kill feet and actually we
lets build out our kill feed items so
what we want here is just a reference to
our
texts so we want a serialized field and
we want to also be using unity engine
dot UI and this is going to be a
reference again to our text so it text
here and we'll just call this one text
and then we can do a public public void
set up and it's going to take in a
player and a string source just passing
along the information and then here we
set text text equal to and then we can
format this correctly so we'll do a
beginning bold sign plus player plus
actually this is the source of course
source plus and then end bold sign and
these are called tax HTML tags and then
we do plus killed plus and then the
beginning italic sign plus the player
plus the end italic sign all right I
believe that was it's kind of confusing
to look at but if I just skim through
this everything looks correct so let's
try that out
and then inside of our kill feed what we
do in here is we instantiate that object
so let's create a reference to it so
let's you can make this a serialize
field and this is just going to be a
game object and we'll call this one our
kill feed item prefab there we go and
then down here we instantiate we
instantiate a kill feed item prefab and
we said this as a parent so this dot
transform and this is not necessary I'm
just stressing it and we have a game
object here and we call that Geo so we
make a temporary variable containing the
object that we just instantiate it which
was a kill feed item prefab and then we
of course get a component so go get
component in order to get our kill feed
item component
and then what we can do is just do dot
setup and we put in here the player and
the source boom there we go I believe
that was all so let's make sure to set
everything up here so if you find our
prefab we find I'll play you IP prefab
go on to the kill feed we need to drag
in our kill feed item prefab so let's
find that as well kill feed item drag
that in there and also select the kill
feed item and drag in our text there we
go so that should be it so if we now hit
save on this and hit build as well and
to build this into a standalone
and first let's test this with just on
two players in the scene and then we'll
open up a third one as well just to see
if it's working so you can see that we
have a multi player yes here it's
loading up there we go let's boot this
up as well let's do test one two three
test one two three login to the same
here test one two three four test one
two three four login and we can create a
test room and we can join that test room
over here and we'll wait for it to join
and see nothing appears right away
because we don't have any UI elements to
show but as soon as I kill this guy you
can see that it appears up here and even
with the bold and italic formatting and
you can see it appears over here as well
so if we now now kill the other guy here
we should see that working - and you can
see it disappears while you're in the
scene view because the player UI is not
active there but if you really want it
to be active that you can make it carry
over but actually I don't really want it
to be there I think it should only be
inside when you're really playing but
again you don't necessarily need to make
this that integrated into the play UI
you can do that however you wanted to be
so the only thing that you will notice
right now and don't worry about this
area that's because I just go out of the
editor here it's not gonna be an issue
whatsoever
the only reason here is that our UI
doesn't disappear again
so this is a very easy fix all we need
to do is go into our kill feed item
create a start method actually no we
don't need to do that either we can just
do kill feed we can do it in here or we
could do it inside of a start method
under the kill feed item you could in
here you could go destroy after actually
I want this to be inside of the kill
feed so let's do destroy here and we can
do that what we want to destroy its the
game object and we want to do that after
say four seconds there we go and that
should actually take care of it what you
could also do and then in that case I
would recommend doing it in here is have
some kind of Kuro teen or some kind of
timer that you use and then after a
certain amount of seconds you are going
to play an animation that makes it fade
out and when it's done doing that
animation you can remove it that's just
gonna make it look a bit more pretty but
really there's no difference to the two
so because there's no difference we're
just gonna do it this way so I believe
that was all we needed to do so what we
can do now is just build this one last
time to see it working and we should be
able to get it up and running here so
let's run that and run this and I will
show you one last kind of UI specific
thing that you can of course change if
you want to so test one two three four
test one two three four hit login here
so let's create a room test and create
and join that room over here on the
thing that I want to show you is the
order in which on these these
notifications appear so normally when
you do a kill feed the newest piece of
information will be pushed to the very
top and the ones at the bottom will
disappear first however I believe with
the way that we've set it up right now
it's going to be the opposite way around
so new kill feed things will appear at
the bottom so what you can do to change
this is
just force your object higher up in the
hierarchy you could do that by renaming
and I actually think that unity has a
built-in function for reordering that as
well if you want that functionality
inside of your game you can easily just
Google for changing object order in
unity in the hierarchy and you will
definitely be good to go or changing
order for items in list using unit or
using you GUI and there's plenty of
information on that kind of stuff but
it's just one of those again one of
those UI specific things that I don't
want to spend too much time on so now we
can kill this player it's gonna appear
up there and after just a few seconds
here you can see that it disappears from
both clients so now let's just for fun
again find our projects folder find on
multiplayer yes there we go and it
builds windows and we can actually go
ahead and create or open up and not a
version of this client just so we can
see this working with three players I
think that could be kind of exciting so
I'll just pause that and I've actually
set up a test player here test one two
three five test one two three five hit
login there and I shouldn't have chosen
this similar names when the European
Nikhil fee but that's alright so we can
see now that he's joining and once he's
joined let's try killing two you two
players very quickly here so you can see
that that indeed shows up and we can do
the same thing over here and everything
is working so there we go we killed on
test one two three four and we could
test one two three and you can see that
I was correct in assuming that the order
would be a little off but again you can
definitely fix that very quickly and you
can see that they are on top of the same
spawn point here so let's just go ahead
and kill those these spawns are even
worse than call of duty and I can't
believe I just said that so those are
definitely going to need to be worked on
at some point alright so that was pretty
much all for this video I hope you
enjoyed it I thought it was a really a
fun little thing to do something that's
pretty essential for any kind of shooter
because it's well it's in pretty
all of them these days and people are
going to be asking for them if they are
not there so that was pretty much it I
hope you enjoyed it and I will see you
in the next video thank you so much to
all of the awesome people who donated in
September and especially thanks to our
own Metta Robert Roach James Calhoun Kim
Rose cuccos Pao and Antoine and Dixon P
thank you so much for donating you guys
are awesome
if you want to support practice yourself
you could go to patreon.com/crashcourse</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>