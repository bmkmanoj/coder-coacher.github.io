<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>15th. Unity Tutorial, Advanced AI - Create a Survival Game | Coder Coacher - Coaching Coders</title><meta content="15th. Unity Tutorial, Advanced AI - Create a Survival Game - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Brackeys/">Brackeys</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>15th. Unity Tutorial, Advanced AI - Create a Survival Game</b></h2><h5 class="post__date">2013-04-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Lhh2tQDYdbs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone welcome to the 15th video
in our create a survival game series
done by practice I am the CEO of Black
Keys and today we are going to be taking
a look at advanced AI subscripting more
advanced enemy functionality it's going
to be awesome and it's going to be
difficult so if this is too much for you
at any point you can always just go
ahead and download the script from our
website or simply go with the AI simple
version which is also available for
download and which I have made in a
video on earlier but that's it for the
intro as always I have opened up unity
and let me just quickly clean up from
the last tutorial I did which was
actually not titled as a part of this
series it was more like a standalone
video where I showed how to create a gun
and create some shooting mechanics and
that we made this script this raycast
shooting so I'm just going to go ahead
and drag that under the scripts and this
bullet hit which was a particle with
some sparks emitting and I'm just going
to drag that under the prefabs except
that nothing has changed if we go under
the play the main camera the melee you
can see that there is now a gun object
which is just just an empty game object
with the raycast shooting script so
that's pretty much it now let's go ahead
and get started so select the enemy
which I have dragged over to the town so
we can test some stuff with them without
having to run a whole lot let's go ahead
and disable the AI symbol I'll just keep
it for now and let's hit the add
component and new scripts and call this
you could do AI you could do advanced AI
I'm going to type advanced AI so
advanced AI it's going to be a type
JavaScript as always and there we go one
thing to keep in mind though with the
scripts we are not going to be
using the capsule Collider we are going
to be using some more advanced movement
where we can apply gravity and some
forces so that our enemy will actually
be able to fall to the ground
fall down different places and collide
with Rahl once and such instead of just
going through them so we'll disable the
capsule Collider by right-clicking
remove component and hit the add
component button go to physics and now
changed it to the character controller
this gives us a whole lot more different
possibilities and settings and scripting
functionality that we can play around
with now let's go ahead and actually
create the advanced AI script and the
way I want to do this is simply use what
we made in the last tutorial with the
simple AI and modify it a bit so let's
go ahead and double click the advanced
AI to open it up in monodevelop
and there it is and we can just go ahead
in under the simple AI under the scripts
folder and open that as well that is and
let's just go ahead for now and copy all
of this over to our advanced AI and
delete the proc maastricht and so now
they look also very similar and alright
let's go ahead and adding some stuff now
first of all I want to create a bunch of
variables because currently we have it
set up so when ever our object chases
something it is done in the function
called attack I would want to change
this name to chase and so also when we
called it in the if distance we want
this to be changed chase and we are
going to change the name of this attack
range to chase
change and add yet another variable up
here called chase range which is going
to be 15 and the attack range is now
going to be a whole lot less we could
try something like 1.5 because our our
melee distance is about one point five
five that's what I have set it up to be
and so that's it for changing the change
rate a chase range just to make it
everything a little more clear now we
can go ahead and add some more stuff
let's add a a actual attack function so
function attack new parenthesis and so
we just type that in there and then in a
second we'll add some logic too but
first I want to change how the how the
enemy actually behaves and moves because
at the moment the enemy behaves through
a transform position so it simply draws
a line and moves in the direction of
that line and that line will always
point towards the player but that
doesn't enable stuff like collision and
gravity so we actually want to use the
building function in the character
controller to take care of the movement
so this is done by making some new
variables so let's make a new variable
and let's call this let me see let's
call this the controller so just
actually let's just call the controller
and it's going to be a type character
controller
like that and let's also make another
variable called gravity just making some
space variable gravity and sub gravity
and let's set this to a type float and
it's going to be equal to by default I
would say 20 is a very good amount so
just type 20 then we are going to make a
private variable called move direction
move direction and it's going to be a
type vector3 and it's going to be equal
to vector 3 equals now vector 3.0 so
this is simply a 3d coordinate and it's
just going to be 0 0 0 and we have the
gravity it's pretty much
self-explanatory and the variable
controller is just that we can actually
call the movement through the
controllers look let's go ahead into
unity and see the controller now
appearing and what you're going to do
here is just simply going to grab this
component and drag it under the
character controller also let's remember
to assign the player to a target and
these two things can always be done
through scripting in the start function
for example or if you have the player
spawning in the during the game you can
have a function assigning the two
variables using the game object find and
the get component so let's go ahead and
open up the script again and let's
now start implementing some stuff so
under the chase let me see where do we
have it there under our chase we now
want to write some different things so
first of all I would like the renderer
that material that color to go down
under the actual chase function so I'll
just quickly move that down here I just
like it better that way
oops and delete these spaces and we
could go ahead and do the same with the
look distance I don't know I'm here at
the look at we'll just move that under
the actual look at function so and in
the chase here it's this line we want to
change because as you can see it it is
translating it is moving in the forward
position with a certain speed and we
want this to be done through the
character controller and I won't explain
exactly how it works but just know that
you can create realistic movement this
way so let's type move Direction equals
transform that forward new line move
Direction x equals move speed and new
section move Direction actually I'll
also make a section between the renderer
and the move Direction stuff move
Direction at Y minus equals gravity
times time dot delta time and if you
can't remember time that delta time
simply handles the time scaling and
framerate problems that you might app
and right below this line you're going
to write controller the variable
starting of the controller dot move in
the move Direction times time time dot
delta time all right so this pretty much
takes care of the new movement
functionality let's take a look at
what's actually happening here so first
off we want the move direction to be
equal to the forward movement so we want
the direction that it should move to be
forward then we want the move speed to
influence the move direction so that we
can tell it how fast it should move then
we want the move direction to Y meaning
the up-and-down to be influenced by the
gravity variable and then at last we
want to actually move the controller so
let's go into our game and see if this
works so I open up unity here and let's
go ahead and hit play
and you can see the character control
the character is not looking at us and
indeed it starts moving once we get
close enough and I don't know if you can
see this but it actually stays on the
ground and we should also be able to
show that it collides with walls so if I
drag it on into the town and hit play it
actually stops on the other side of the
wall so that's it for making it collide
and move more realistically now we have
a few more things to add because we also
want this to attack and we wanted to
rotate a bit different or maybe no we'll
save that for another tutorial for now
we just want to create the attacking
also so to do this let's create some
functionality in the attack function and
let's also make sure that the attack
function is being called let's first
make sure that it's being cold so here
on the D if distance is it's less than
the trait chase range then it should
chase I want to create a new if step
statement right above that so if
distance
it's less than attack range then we
wanted to open up the brackets attack so
called the attack function now if I just
do it like this then our enemy won't
actually stop whenever it's attacking so
now if I hit play it will just keep on
chasing me and it can bug out in the
positioning and push me which is not
something we want even though it's
trying to attack me so we wanted to stop
in a somewhat fair range and then start
attacking and if I then get out of its
attack range we wanted to start changing
chasing again and this is done by making
this if statement into an else--if so
this if that statement says if the
distance is like this then attack range
so if the enemy is able to attack then
it should attack but then it should also
stop chasing so if that is not the case
else so if these requirements isn't met
then we want it to check if the distance
is under the chase range and then chase
us so if we do it this way and hit play
even though we don't have any logic
inside of a attack function once it gets
inside of that range it stops and we can
easily increase the range by going into
our enemy by selecting our enemy and
going under the advanced AI script and
taking the attack range and bumping it
up so let's say let's try out with a
three and wait
maximize the wrong window there we go so
now it should actually attack and there
you go in the distance are three units
it stops so let's just change that back
to 1.5 and make some attack
functionality so go under the function
attack and inside of this we want to do
quite a few things we want to type the
debug dot lock attack and the debug Lak
dad Lak is useful for many things I like
to use it is for bug fixing if I am not
sure what is being called off its just
simply telling myself that I need to
place some logic here so for now we
won't actually be scripting the damaging
of the player and the dying of the
player but we will be scripting
everything except that so we will be
making everything that handles when the
player should lose damage and maybe even
how much but we won't be scripting what
actually happens so this could be I
could name this insert attack here so
that could be an animation or some other
logic so let's see what actually happens
here a Depot bug that lock will be color
will be shown inside of the console
window so when I hit play and the enemy
goes near and starts attacking you can
see a whole lot of debug logs start up
here inside of the console window this
is of course way too much at s is the
the enemy is attacking us every frame so
that's really not what we want we want
it to be attacking with a interval of
about one to two seconds so let's script
that now this can be a little hard to
understand but
let's start out by making some variables
in the top so under the damping we want
to type var attack repeat time equals
one make some more space
private var attack time it's going to be
a type float I'm going to explain all of
this in one second now let's just write
it out another variable called attack
now it's going to be equal to true and
you could make this private I'm going to
go ahead and do that all right so I just
got interrupted but we'll continue where
we left off I'm sorry about this and one
thing I noticed is that we don't
actually need the attack now since we
are calling the attack through a
function and not an if statement so I
will just leave that or we'll just
delete that and let me go ahead and
quickly explain what these two variables
are going to do for us the variable
attack repeat time is the amount of
seconds that will pass by between every
attack so the enemy hits us and the a
peck attack repeat time is the interval
between every hit and the private var
attack time is going to store the time
time and time that time can be a little
difficult to understand but let's don't
just quickly go ahead and store it so
function start we want to store it in
the start function because time that
time cannot be stored inside of the
variable declaration we have to do this
when the game actually start so we're
going to type function start and inside
of the function start we're going to
type attack time equals time dot time
and I semicolon alright so this will
help us in counting out the interval so
now let's go down to the function attack
and actually create the code so in the
function attack we're going to type if
time that time is greater than attack
time and open up the brackets we want
the debug log statement to be inside of
these brackets like that and under the
attacking itself under the insert attack
here we want to type attack time equals
time dot time plus attack repeat time
tag repeat time and so what we are doing
here is we are basically checking if we
can attack again using the current time
and the which we are storing in a
variable and then adding up with the
attack repeat time which is the
intervals so that's basically it for the
spacing out of the attacking so let's go
ahead and try to hit play go under the
console so we can see what happens
so our enemy gets near it attacks it
attacks and you can slowly see the
different attack locks start appearing
in the console just like they should so
on and this variable can of course be
tweaked inside of the enemy so you can
just go ahead and read increase or
reduce the attack repeat time depending
on which kind of weapon the enemy is
wielding
and how strong he is and different
factories so that's it for that now
let's go back into the script because I
want to create one more thing to make
our enemy a little more realistic and
this is a function that simply makes it
so that whenever we hit the enemy the
enemy gets more mad at us and therefore
will change chase us longer will move
faster because now he's running after us
he's furious and also he will look more
after so the look at distance will also
be increased and because we have already
made a system where we send out a
function or send out a message to
whatever we hit that the function apply
damage should be called we can just make
a function called apply damage and open
up the brackets and inside of here write
whatever we want to happen when the
enemy gets hit and in this case I want
the change
chase range to be increased by 30 I also
want the move speed to be increased by
two and I want to look at distance to be
increased by 40 and therefore whenever
we go into unity again and hit play and
select our enemy and the hierarchy and
take a look at the right hand side at
the different variables here so we hit
play you can see that right now they
look at distance is at 25 the chase
range is at 15 and the move speed is at
5 when I hit it everything goes up and
now it's harder to escape the rage of
the enemy so that is it for the advanced
part of this AI tutorial
I hope you enjoyed it and I know that
some things I did not explain all the
way through
but that's because this is mostly a
beginners tutorial and therefore I don't
expect you to understand everything at
the moment but there you go now you have
some pretty damn decent enemy AI which
you can implement into pretty much any
game of this type and thank you for
watching I'll see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>