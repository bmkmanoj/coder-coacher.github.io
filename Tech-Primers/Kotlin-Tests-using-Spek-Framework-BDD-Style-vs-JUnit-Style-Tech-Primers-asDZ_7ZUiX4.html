<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Kotlin - Tests using Spek Framework - BDD Style vs JUnit Style | Tech Primers | Coder Coacher - Coaching Coders</title><meta content="Kotlin - Tests using Spek Framework - BDD Style vs JUnit Style | Tech Primers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-Primers/">Tech Primers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Kotlin - Tests using Spek Framework - BDD Style vs JUnit Style | Tech Primers</b></h2><h5 class="post__date">2017-06-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/asDZ_7ZUiX4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to tech primers in this video we
are going to see what is spec and how
can we use back in Cortland to write
test cases which are similar to BDD beta
T style of approach right so if you are
familiar about BDD behemot it is
behavior and development so there are
lots of frameworks in Java and iku
khumba and stuff so which with which you
can write some behavior driven test
cases so for court length there is a
frame of call spec okay so you can write
J units in the form of BDD so that is
what we are going to see here so
sparkers aspect is nothing but framework
created by JetBrains it is open source
so you can use that as a library and
then you can write your test cases okay
so that is what we are going to see so I
have opened a test project for us okay
it's a maven project so I have created a
maven project with all the dependencies
so the dependency which we need for spec
is we need the spec API okay this is
coming from or JetBrains and spec you
have the spec API okay and then also you
need the spec j-unit platform engine so
spec runs on J unit 5 so you might need
these J unit platform engine and also
unity platform J Lloyd platform run so
if you see the J unit 5j you note 5 has
been split into lots of chunks like you
Peter
platform and stuff like that so we need
those dependencies ok so what we are
going to see here is we are going to
write a program for a game called
fizzbuzz ok if you are familiar with
this game so there will be children will
be seated a citizen in circles so there
will be counting numbers from 1 to
whatever numbers they like okay so there
will be like 1 2 or 3
whatever ok every child has to tell a
number so whenever a child who's
supposed to tell a number is divisible
by 3 they have to sell say filled
instead of the number ok so if let's say
I am the third kid if it is my turn I
have to say sis instead of the number
and also the kid who is going to be
telling
number five has to say but so it's
basically like the numbers which are
divisible by three and five needs to be
converted into fifth and buzz
respectively okay if there are other
numbers they have to just say the number
okay so that is the program which we are
going to write so we can it's simple
enough right
I don't want to write Fibonacci series
or something like that which we had been
writing throughout out yet right so that
is why I chose this fizzbuzz example
okay so let me write a his bus classwork
okay so meanwhile I am a fan of
interfaces ie write interfaces wherever
I feel like I need to write so I am just
writing an interface okay so I am just
going to say function calculate okay
this is going to calculate whether it is
a phase or a buzz or a number okay
and also I am just going to say nom and
I'm going to pass an integer right so I
need to pass an integer so if I give a
number then that particular piece was
class should give me whether it exceeds
or a buzz or a number right so I just
wrote that so now we need to use this
particular interface here so I'm just
using this interface now until it is
going to complain me with saying okay
use the implement so I am just saying
implement my class okay so what do we
need to do here so we need to return
actually we didn't write the return type
here if I the return type would be
string right so you give a number but
you need a string so I am just going to
say a return return meter number itself
so by default I am just going to say
return me the number and then just
convert into a string okay so this is
just complaining because my return type
is not there so if either direct unpack
here so I'm just returning so if you
notice here what I am doing is I'm just
returning the number by converting it
into a string that's it so let's go
ahead and write a test case for it okay
I'm just going to say create test so I
am just writing a Ju notify test okay so
what am I going to do is I'm just going
to say
not only did internal so I'm just gonna
implement spec okay so this bag is
complaint coming from the spec ABA okay
so what I need to do is I need to write
the whole test inside aspect so I don't
have to write stuff here instead I need
to write it inside the spec so spec
expects the lambda expression so I just
need to write it this way so it's like
passing the whole test case to the spec
ABI okay so that is why you need to do
that so if you see here I just open the
argument and then inside that I am
writing a test so how do I write a test
now so what we need basically is we need
to create a physical object right so I
am just saying his birth his birth is of
type what is it it's a type interface
and I'm going to say I'm just going to
create a new instance of this is birth
right that's it so we are set now how do
I write the test case so how do I
describe so you know if you take a
typical BDD test case right you right
you start writing this crap so if you
are familiar with jasmine for writing
test cases in JavaScript so it is
similar to that you can write describe
eat and stuff like that so I'm just
going to describe this test cases
calculate phase buzz logic okay
so again this expects a lambda
expression now again okay
now again I'm going to write start
writing test case so the describe is
something similar to saying that okay
these are a group of test cases which
are describing this functionality or the
behavior basically okay so that is why
we it's a BDD standard so this is going
to tell us a behavior of this particular
is bus so we are saying that okay
calculate D this has this since bus
logic okay so now for what do we need to
know now first we need to do it for a
number so I am just typing number you
can write whatever text you want so I'm
just typing number for simplicity so we
need to check whether the fizzbuzz the
number or not right so I'm just going to
call face buzz and I'm going to say
calculate and this one going to fast one
okay so on let's a third this right
and I'm going to say 1/3 1/3 equals so
let's use equals okay I'm just going to
check if this is returning one okay that
is that is my assertion so let's run
this test case okay so what do I expect
so when I give a number which is 1 it is
not divisible by either 3 or 5 each
wrote on the same number right so that
is what I expect so it should return the
same number and this should go to
success so let's see if it goes to
success yeah it has gone to success okay
now what do I need to do I need to check
if it is fizz all right I'll just say
check for okay so I'm going to again
write the same thing also thought about
equals is buzz dot calculate and in this
case I'm going to pass 3 and I am going
to expect why do I expect three so the
three will pass but I need a fizz right
so let's run the test case and see if it
passes no obviously it will not pass
right because we have not written that
logic here right so let me write this
vertically so that I can show the test
case in value okay so this is the test
code in the left side and the main code
is here okay so if you notice here the
test has failed saying that okay
expected three but it was faced and if
you notice here this is how it shows in
the left side okay so now I need to
write the logic for three right so what
do I need you just need to check if the
number is divisible by 3 then what do I
do
I just say return is okay I'm just doing
that so let's run the test case again
it will pass right yeah it has passed so
that basically means this is working now
what do we need to do next
we need to do the buzz so I am just
writing another test case so it D eat
are all similar to J no test cases so
well I will just
show you how to write J units as well I
will just show you in the same video
itself I will just show you how j DD
sorry J units are generally different
from this BDD type all right so I am
just saying bus
okay it fails obviously because it is
going to return five so I just need to
put another logic called Phi and then I
just say it buzzed right I am just
running it yeah all my test cases are
past if I run it with coverage I
generally have a practice of running
test cases with covering sure that I am
confident that okay all my branch
branches are covered basically okay so
if you see it is showing green for
everything so that basically means
everything is covered so yeah but that's
what I expect - this is how you write a
test case inside a spec so which is
basically showing us the BDD style of
writing J innards okay so if I had
written this in a J in style right if I
had written this in the J unit for style
let's say you can say J ended five but I
can start writing chain for like so
let's say J unit nothing so what we
would have done do I would go on here it
would have say that test right save it
overturn this fizzbuzz actually I'm just
start writing java code if you notice
public void and all those things so we
don't have to move that in Kotlin so you
just save function and then they start
renting it so this is what happens that
when you are learning two languages when
you're working on tool for languages so
that is how you write a test in Scotland
so what I'm going to say I'm going to
say let's say I'm going to say variable
this is but write equal to
since but I'm just creating the object
and I am just going to do the same thing
so assertions are all saying right so
basically I will just copy that from
there okay so if I run this class so
this should also do the same thing but
the only difference is this is the BDT
style approach so if you notice here
there is no difference here and in a
JUnit test with the PTT test but the
only thing is if I read this particular
gene you noticed I don't make a sense of
it I just say test-tube fizzbuzz but I
am not doing anything so I have to read
the code literally and I have to
understand the core literally to see
what it is doing but if you take a spec
test write basically a specification tip
so spec is a specification right
so you have a specification return here
so if you see I say describe calculate
those bus logic okay and then I am
saying check if it is a number so I can
make it meaningful but I just made it
check number but if you read this you
will be able to understand what each
test case does okay check number as a
check number check page check but so
this is how BDD differs from a typical
jail right so this is how you can write
tests using spec so if you are working
in cot length you can use this spec
framework so which is created by
JetBrains for making our like simple in
order to write BDD style of test cases
okay and also the see spec is all open
so so the project spec is under of agent
Raimes it have a positive you can take a
look at that they also have some samples
they have a sample for calculating the
logic using calculator something similar
to what I wrote but yeah they have it so
one more thing I wanted to show so I
forgot that so if you notice here the
variables which I am creating okay it is
all common right so this is created only
once however there is an option to run
everything before each test case so I
can just say before each test okay and I
can assign that this was variable here
okay and I can create the object here
so basically this will work okay so what
it HAP what happens is every time you
run a test case this creates an object
here so you can do that as well I just
wanted to cover that I miss that part
but yeah and you can do that okay so if
I remove this what happens when you're
going to remove can you get what happens
when I remove so if you notice here
there is an compiler error saying that
variable must be initialized so if I
initialize this tunnel can I initialize
this turn-off
now right you can't initialize this to
not because in Cortland you know to
mention this special keyword right this
question mark basically you are telling
the compiler that okay this particular
variable can be none and I am assigning
all directly here but I can even assign
it was also it will not complain right
so for simplicity a mazanik null but I
need to handle those null in the
implementation part so if you notice
here it is complaining here saying okay
only say for non null assertions calls
are alert so in that case what do we
need to do is we have to do this way
again so you are just casting it as a
typeface check right so if even if the
fizzbuzz is null this will not throw a
null point exception instead it will
throw a none it will just return enough
it will not throw any exception so yeah
if I run this case it just case again so
it should work that's what my
expectation is so for every test case it
creates a new instance so you know you
want to do that I sometimes when you
write test cases you want to do
something every for every test case same
way there is an after each so if you see
that is kills a path so that is an after
each test group so you can do whatever
you want so you can a can die even or
end up every time you can just wanna
nullify that so you can do that as well
right so it is similar to June you know
if you are writing a JUnit test if I I
just showed the gene it's right in jail
you know to what you would have done is
you would have written before and test
or before class whatever annotations are
there in jail so you will start doing
that right so it is similar to that so
specs provide specs provides all those
functionalities the only discipline
but in spec and the J in it is it is a
BTD style of work so you can you can
draw a write test in the form of BDD
style like you can subscribe the
behavior of the test and start writing
tests for it so you can also even use a
given on and it so in this example I
have show described on it you can even
say given you can do the same thing
basically it's just another style of we
DT so you can do given on and it or
described on it so I I prefer described
on it so that is why I show the
described on it example so that's it for
this particular video if you like to the
video go ahead and hit the like button
if you like my channel go ahead and
subscribe it if you want to get frequent
updates go and get the bell icon so you
will get the updates frequently so
that's it for this video
meet you again in the next video thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>