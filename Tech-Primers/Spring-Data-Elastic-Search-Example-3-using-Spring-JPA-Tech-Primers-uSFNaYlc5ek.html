<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Spring Data Elastic Search Example #3 using Spring JPA | Tech Primers | Coder Coacher - Coaching Coders</title><meta content="Spring Data Elastic Search Example #3 using Spring JPA | Tech Primers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-Primers/">Tech Primers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Spring Data Elastic Search Example #3 using Spring JPA | Tech Primers</b></h2><h5 class="post__date">2017-03-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uSFNaYlc5ek" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is against protects Prime in this
video we are going to see how to load
the data into elasticsearch from the
database so for example we are going to
use the spring JPA to get the data from
h2 database get that particular data and
load it into elasticsearch so if you see
the example number one there we created
the data manually and then we had
inserted that into elasticsearch
supposedly using the elasticsearch
repository provided by Sting data now we
are going to load the data from the
database using the spring JPA and get
that data and insert into elasticsearch
so one of the viewer had requested how
to do that so I am going to show that
from the example once so if you see here
this is the github link where I had
uploaded the example one so you can use
that so you can clone that so what I
have done is I have already cloned that
repository which ever be used for
example one so what we are going to do
is we are going to modify that to load
the data or get the data from the h2
database so for that what we need is the
h2 dependency which we you have already
added so if you see here I had already
added it previously the example one so I
have h2 data is already there so what we
need to do is we need to write a new
repository so let me create a new
package called ap a repository so you
can see here the repository has already
users repository that is the spring data
elasticsearch repository you see here
this be spring elasticsearch repository
now we need to write as ap a repository
so I will create a new class called
users KP a repository so it is nothing
but an interface so we need to extend
from the JPA the positing so we already
have the user's model so I'm going to
use the same users model and long is the
primary so in order to make it work so
we need to add the Jaypee so we already
have enabled the elasticsearch
repository so we need to enable the JPA
repository ourselves so we need to add
the annotation that enable tapir
repository and we have to provide the
base package
so based packages calm Tech's primal dot
elastic dot jba the positive that's it
okay so now this spring boon application
will now know that this particular app
has JP repository and the elasticsearch
repository so that is done so our
interface is done now we need to modify
the model to make it work with the JP so
if you see here this was specifically
written for the elasticsearch which
document annotation all now we need to
make it work within spring JP so we need
to wanna date date but entity so if you
had used the hibernate you would have
known about these entity so you would
have added the JPA entity so now we need
to add the primary key right so we need
to annotate it still siding
one of the will let us say we generate
this value on the plan so i'm just
generating list as generated value so
this will by default generate it will
Auto generate D values for each entry ok
so now let's go to the loader so you can
see the loaders this is where we were
manually getting the data so what I'm
going to do here is I'm going to use
this data to be inserted into h2
database and then we will use the JPA
repository to get the data from the h2
and insert it into elastic so so what I
am doing is I got the data here so I
need to use the JPA repository which we
created I am going to use the depository
so what I'm doing is I'm auto wiring the
JPA repository and I am going to say
that use BJP repository to save this
data so what this line does this same
should eat exclude it a bit ok so now
from the issue database we need to now
get these data right so here we can use
the query find one so this will
internally get converted into a select
start some and we are going to get the
data here ok so what I'm going to say is
get T users list so this data we got
from the database so this is literally
like getting the data from the database
ok
this is like get from DB and what we are
going to do is we are going to use this
particular list to be saved so instead
of the data which is which we created
manually so now we are using the same
data which we got from the JPA
repository to save it to elastic search
ok starting thats all we need so we let
you have enabled the DPA repository we
have added the require annotation to the
users I think that's it we can start T
Ringwood application so let me run this
so let this thing would application come
up so that then we can Hindi through
folks which we have already created so I
have already created a user's red slash
search slash on which will query the
elasticsearch repository for all these
users which are there so the loaders
what the loader does is get the data
saves it into the issue database using
the Java API repository itself and using
the same JPA repository it gets all the
data from the h2 database and it loads
into the elasticsearch performances so
if you see here this disk loads into the
alas Victor ok and this particular
command gets from these they showed it a
bit
so our elasticsearch application is
coming up so no data is completed single
box so it's up let's go to these respect
so I have a red flag first at all so
this should return all the data which we
have included if you see here a j70 or
this so that is what we have added here
so we have got those data so this is how
we can load the data from this thing JP
a repository into the elastic source
repository
so make your brain in the next video
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>