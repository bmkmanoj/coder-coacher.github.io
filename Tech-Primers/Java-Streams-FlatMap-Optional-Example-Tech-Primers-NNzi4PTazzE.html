<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Java Streams | FlatMap &amp; Optional Example | Tech Primers | Coder Coacher - Coaching Coders</title><meta content="Java Streams | FlatMap &amp; Optional Example | Tech Primers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-Primers/">Tech Primers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Java Streams | FlatMap &amp; Optional Example | Tech Primers</b></h2><h5 class="post__date">2017-07-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NNzi4PTazzE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to tech primers in this video we
are going to see how to use flat maps
inside the streams so in the previous
examples in the series you would have
seen filters Maps Manto in in this
particular example we are going to see
how to use flat map and when to use fat
maps
ok so I'm just going to copy the same
example so that we can develop from that
so I'm just going to create a new class
called flat map and and also this
particular example is there in the
github so you can directly get it from
there
so all these functional programming
project is available in github so the
link for that is in the description
below so you can just directly go ahead
and use it ok so what I'm going to do is
I'm going to create a POJO I think I
already did one here so we use this
class let me delete that so create a
flat map
okay so I'm going to convert this user
and let's see you have
list of phone number okay
we'll change this to a constructor you
let all the concept of be there and I
think it doesn't matter okay but I'm
gonna wasn't one of the movies because
I'm gonna use the usual because I'm
going to say you user off let's say beta
his ages let's say 20 and also we need
to give the list of phone numbers right
so for simplicity what I'll do is I'll
just say one two okay so I'm going to
create something similar so right in
okay
so I will just make up some number three
four five six seven eight okay
so what we have here is the users list
okay
so internally it has a POJO and then
internally inside that they have a list
of phone numbers so what we need to do
is let us say b1 to identify the phone
numbers which are matching for a
particular user and his phone number is
five so that is what we are going to do
here so we are going to iterate this
particular user so we are going to use
the streams here so I'm going to say
streams and what we need to do is we
need to identify whose phone number is
five okay so what we need to do is we
need to iterate it and identify right so
how will be I tried so in case of the
mappers or the filters you saw that okay
you were able to add either a tit Tildy
user's level and then we found out but
in our case it is at a much lower level
right so what we need to do is we are
going to use map initially okay so what
we are going to do is we are going to
iterate each and every users and then we
are going to give the array list to the
flat flat map okay so let's see what we
need to do so map as you know it expects
you to give a function okay so what I am
going to do is I'm going to get a
function and then I'm going to create
give a object so I'll just say okay so
what I am going to do here is user dot
get phone number so that's what I'm
going to do I am going to return only
that okay so I'm going to convert this
into lambda right so let me remove this
not required okay and this is going to
return a stream so if you notice here
this is going to return a list and we
need to return a stream so once we
return a string now we will be able to
do slack
for it so basically from a single stream
you are getting another stream so from
the users stream we are getting a stream
of phone numbers so that is what we are
doing here so if you notice here here we
are getting these phone numbers okay so
let's see what stream expect stream
expects the palak map expects the
function but the input for that
particular function is a stream as an
output can be another stream module so
what we are doing to do here is we are
going to use the string for example
string stream is the name and now I need
to identify whose phone number is five
right so I need to do a filter basic
right so I'll do a filter so I will just
say phone number and phone number dot
equals of five so this is going to
return a string basically if you notice
here this filter is going to again
return a stream and the output of the
flat map is always a stream okay it gets
a stream and gives us in so now over
this team we can do something else so
what I'm going to do is I'm going to use
find any so I'm going to show you how to
use optional as well so along with the
flat map so I'm going to say find any so
find any another stream API there if it
finds a single value okay if it finds
any value it will just stop the string
okay so if it finds the phone number
five it's going to stop my string so
that is what we are doing here so let me
replace this with a lambda expression
I'll just remove this that's it now if
you notice here find any is going to
return a value and we are not storing
into anywhere so I am going to store it
into a local variable called string
options so if you notice here this find
any has returned a type of object called
optional so option is the final class if
you notice here optional is like a
wrapper class okay which is coming
inside Java 8 okay you can use that for
wrapping your different objects and you
can use it for null save checks or
something like that so for example here
you didn't find any but there could be
chances that there was no phone numbers
which are matching that particular
criteria right so in that case optional
will not have any value so inside option
if you notice here if I do a dot
optional is like a stream so you can do
whatever you want you can do a filter
you can do flat map you can do all the
things which you did in filter like most
of them for example map as a however
there is an option to say if present so
if the value was present then you can
process that value so for example if the
value was present the phone number you
are going to say print my phone number
okay so what we are doing here is we are
printing it only if the object is
present so if I run this particular
program okay this is going to run me
letter me only 5 right because it is it
has a return the phone number 5 because
that is what we did here so we said that
okay filter this and then find any
particular object okay it is going to
return me that particular object okay so
that is what we are going to see here so
if you notice yes the output is 5 and if
let's say I have put some other value
let's say I put in which we don't have
it if I run this this optional is not
going to return anything so it's not
going to find any value so this if
present will never be hid so if you
notice here the output is not showing
this particular line so that basically
this code never got executed so option
is just wrapping it and it's not
allowing you to go inside so if
previously in the Java 7 till Chavez and
what we used to do is be used to check
if it if the variable is null or if the
object is null or if the collection is
not empty or stuff like that right so we
don't have to do that with optional so
optional is like a wrapper class which
we can use for null safe check ok
and also same hold it so that is the
usage of option so if you want to stream
over that you can stream as well like
you want to map it to some other object
you can do that in this particular
example I just shown in its presence
okay that is the usage of option so and
if you notice your flat maps was
expecting
if you notice what we did here in the
map here is we got the string and gave
it to the flat map and that particular
stream it converted into another stream
okay that is what a flat map done so
plat maps converts one type to another
so one stream of one type to another so
if you notice here it converted the
stream it did a filter and then it
converted into another stream so that is
where you will be using flat maps and
also we saw what is optional so optional
is a wrapper class around the object and
mostly it is used inside the stream to
four types a check and if you see here
they have predefined APN which you use
you don't have to do null checks and
stuff like this or or else what you have
to do is you have to and I'll check and
stuff like that also you can do
something like this if you you can use
optional outside as well so you can say
optional dot off nullable or off so if
there are null values inside a
particular stream of objects you can use
often a label if you don't have null
objects and you have like only specific
set then you can do if you have if you
are expecting the object to be null then
you can use like off nala bill if you
are expecting the object to never be
none then you can use off okay and then
you over that object you can do whatever
you want filter or you want to do a map
or you want to find anything so you can
do isn't it okay so that is what
optional does so optional just trash
your object into a type texting and then
you can do it-- right over it and it
provides all the api which you have at
em streams okay so that's it for this
particular video meteo get in the next
video
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>