<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mock Service in RestController and Writing JUnits for POST with MockMvc | Tech Primers | Coder Coacher - Coaching Coders</title><meta content="Mock Service in RestController and Writing JUnits for POST with MockMvc | Tech Primers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-Primers/">Tech Primers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mock Service in RestController and Writing JUnits for POST with MockMvc | Tech Primers</b></h2><h5 class="post__date">2017-08-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ijj5RLSAcYw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">press the bell icon on the YouTube app
and never miss any updates from tech
timers welcome to tech primers in this
video we are going to use the same
example which we saw in the previous
video and we are going to do some more
things over that particular resource so
you guys requested me to do some videos
on specific topics in the same example
so I am going to do that right now
so the first thing is mocking the
service call so let's say there is a
service call from the resource so how do
i mock it right so what I'm going to do
is I'm going to quickly create a service
so I'll just create a hello service
and this hello service I just need to
instantiate so I am doing auto wiring so
I am doing construction constructor
injection okay so here what I am going
to do I am going to use the service to
retrieve the data okay so I'm going to
say this method and that method is going
to return me hello world right so this
is basically a service call isn't it so
imagine that that is a service and you
are doing a database call from the
resource and you are using service to
call then or basically you are using the
service to delegate the database call
right so that is what we are doing here
so how do we mock this particular hello
or resource right hello service so good
let's go to the test case which you
wrote is today so the only thing we need
to do is we need to mock that particular
object site so we need to add this
annotation act mark okay so we need to
add the annotation mock and say hello
service so this will automatically
create a mock and this inject mocks will
inject all the mocks which we created
into the sources so this particular
fellow servants will be injected into
the constructor of the hello resource
automatically and when we write the test
case here so in this particular test
case we had it right so we need to use
the maquiladora Dwain to annotate that
particular service so we to mock that
particular service basically so I am
going to say if somebody is calling
hello then returns them with hello okay
so this is basically going to return
hello so let us remove this and this
particular test case should pass now all
right so we are hitting the slash hello
or a standpoint and we are expecting the
status should be okay and the string
should be hello and we are mocking the
service call here so if you notice here
as a service is the call is successful
now I am going to say mockito dot verify
so I need to confirm that
then got called it so whenever you have
a vent in your test case you should add
a verifies for that wind so that you
know that the event got triggered so I'm
going to say hello so so this will
verify this particular hello service has
been called
so let's rerun this so that we will know
this has been called we can remove these
and then make it much better okay we
notice here the verify also is exceeded
that means this particular service call
is getting mocked here so whatever we
mocked here is getting mocked because
inside the service I had a hello world
but in the test case if you notice I am
returning on the hello so that hello is
getting returned here as they okay so
this is how you can mock a server so if
you have a database service or any any
different service you can mock that
using the add more connotation okay and
then you can use the eject box to
automatically inject this particular
service into the constructor for the
resource and then you can use the bin to
mock the calls so whenever you have a
call to the service you can mock back
and then return some value here you can
return objects whatever this by
particular method is returning and then
you finally need to verify after the
then part is completed okay so that is
that is how your mocker service call so
the next one is how do I test post rate
so we I showed the testing the mokomichi
forget now how do I test post trick so
some people have asked me to do videos
so I'm going to create the post method
here so I'm going to create one more
restrain point called post so I am going
to basically reuse this itself so
whatever we created here I'm going to
just say post okay and this is also
going to consume Jason
right this is going to consume Jason and
it's going to be a force nothing and
here I need to get the records boarded
it and in this case I'm going to get the
hello
Hojo itself as a Equus polish and I am
going to return the same back
okay and I need to make this as a just
make this public static so that the JSON
message is use and I'll also add a empty
constructor so that this can be used by
the request body the string basically
okay so what I have done here is I just
created a post method and I am expecting
the POJO of type hello
and then I am returning that back again
I am saying that consume the JSON
message and then produce it produces
Jason residential okay let's write the
test case for this so in the test I am
just saying that it is a post right it
is a post and my content is of type
Jason okay I'll just say it you do face
think I should use one just right so
yeah it's a value right so the content
is of type Jason and actually the
content type is they have to do a
content type it is not the content
basically so content type is what we
have it as JSON I am the content in
itself so what is the content in itself
basically it is the body right so we
need a JSON message correct so we need
to create the station message so what
I'm going to do I'm just going to create
a basic string JSON message so I am
going to create a string message which
will be like adjacent so what I'm going
to do I am just going to use the
IntelliJ feature to create a Jason here
X so I'm just gonna say title as
greeting
and the value is going to be hello word
right so there is a Jason now we have
the Jason message here right and we got
the post here and then we are finally
getting the response which is going to
be okay and then finally we are
asserting if it is all good so what is
it we are expecting greetings and
Rivonia so this should succeed now let's
try and test this
yeah if you notice here the test case
got succeeded so just to check if it is
working it hearing I'll just zoom or one
board so that you can check how it is
checking yeah it's not as your test case
failed saying the JSON path dollar value
the value should be hello word but it is
a hello world okay so this is how we can
test a post method and you can pass the
JSON here directly and you just need to
say the content type of JSON and you can
pass the JSON with is a string so that
spring will automatically convert this
into a JSON message and then push it to
the resource here this is how you can
test the spring MVC resource for post
hope you found that useful and also I
just showed you how to mock the service
from a resource so you can is the ven
and the verified using that we can mock
the hello resource up there the hello
service basically the add smoke
annotation will help you in mocking that
particular source and inject marks will
inject this particular mock service or
the objects into the destination
classiest so in the hello resource we
are mockingly hello service and using
the ven and verify we are confirming
that the marks are working okay so
that's it for this particular video hope
you found it interesting if you want me
to do any video on any specific topic go
ahead and put that in the comment
section below if you liked the video go
ahead and like it if you haven't
subscribed to the channel go ahead and
subscribe to it will do again in the
next video thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>