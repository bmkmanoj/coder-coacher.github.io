<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Reactive Spring | Spring WebCient in Spring WebFlux | Tech Primers | Coder Coacher - Coaching Coders</title><meta content="Reactive Spring | Spring WebCient in Spring WebFlux | Tech Primers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-Primers/">Tech Primers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Reactive Spring | Spring WebCient in Spring WebFlux | Tech Primers</b></h2><h5 class="post__date">2017-08-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WeMPkxGXXaM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to tech primers in this video we
are going to create a web client for the
server processing of reactive Spring
which we wrote in the previous example
so we I had created two different videos
on how to create reactive spring using
router functions and a spring MVC is
time now from the client side we are
going to access that stream API and then
we are going to process that using the
web client so web client is a new what
we call a new class or a utility
provided by this spring framework so we
are going to see what is that so let's
go and create a client side project so I
already have the server side project
running here so if you haven't checked
out that project you can use that from
the github link from the description
below so I have checked out the same
thing which I did as a part of the
example so I have also already started
that so we have to play the server side
we have created the server side we have
to create the client side now so I'm
going to create that from the started
string dot IO so it is going to be
ComTech ravers reactive and I'm going to
say this as so we named this as we have
to move our example so I will just say
this is a client right so we have two
Mongo client right and the dependencies
we need are the web flux so we need the
spring wave flux so the dependency is
the reactive web so this is going to
bring the string the flux we don't need
anything else we're just going to use
the string web flux client so we are
going to use a web client from the
spring API so I just hit the generate
button ok so this is going to save me in
downloads let me quickly save it
I'll just unzip it and open in IntelliJ
so let me um zip it so this is court
unserved now let me go to IntelliJ and
open that project so what did we name it
layup to move client so I opened it so
if we go if we go to the palm product
symbol you can see only one dependency
which is the springboard startup efflux
so this is going to bring the spring web
and the spring the flux dependency okay
so let's quickly go and start our client
so what I'm going to do is I'm going to
just write a simple web client which is
going to pull the data right so what I'm
gonna do is I'm just not going to write
any new class or something I'll just use
the same existing string boat
application main class and I'm able to
use the command line runner to run this
particular piece of information piece of
code right so that when the process
comes up so when my client comes up it
should automatically go to the server
and pull the data so I'm going to use
the command line runner so command line
runner as you guys know is an interface
which you can use for running anything
so you can use it for you can use it
like a typical runner right so I'm going
to use the return into same strings okay
so now we need the web client right so
web client is the new API which spring
has introduced which is similar to the
rest client so if you know about rest
client so spring has now implemented web
client which is similar to the Riske
line but it is web client can do this
ping processing so the spring reactive
processing and also it is now like a
builder pattern functional style builder
pattern okay I need to inject this web
client right so applied is nothing but a
interface so we need to create a website
before we do right so I'm going to
create a web client what I'm going to do
I'm going to say webclient dot create
and I can give the base URL so the base
URL is going to be localhost and that
particular process is running in 80-82
right let's meet weekly check yeah 882
so this is going to run in 80 82 and
let's change hours to 80 83 okay so this
is going to run in 80 82 and also the
rest endpoint is going to be rest lash
employee right so let's quickly check
that yeah it can be read slash employee
so I will just put that here and I'm
just creating it that's it so I don't
have to do anything I just need to
create the applied once so using the web
client now what I am going to do inside
the command rain runner I need to get E
and you're on the gate okay using the
gate and I'm not going to do anything I
am just I'm not going to do URI
I am not passing anything now I need to
do a retreat so this is going to do a
retreat so this is going to get a
response and I need to convert this into
a flux object okay because if you see a
red slash
alright so what I need to do is I think
the URL should be all because I need the
alright because I have created red slash
employees slash all right instead of
empty so I am just going to give all so
URI will be all for the URI on I am
going to retrieve all the data and I am
going to convert it into a flux of type
employee all right so I don't have the
employee class on the client side so
what I'm going to do is I am going to
blindly copy that for now so let me copy
this
right I'll just copy this closet sir and
I'm going to paste this here I don't
need the document because the those
we're useful for the MongoDB so I'm not
going to use that so I just greater the
employee class so yeah looks like it is
good now okay so now I got the employee
clock right so Maya and now what I have
here is a list of employees and it got
converted automatically right now from
this if you notice here this is the flux
okay so it is like a stream now so you
can do lots of things in the spread in
the flux so you can use filters you can
use flat maps you can use maps you can
use subscribe you can see here all these
are there so what I am going to do is I
am going to filter out the employee
whose name is filter Peter ok so I'm
going to say P filter and I am saying
employee give me the employee dot name
and I am checking if it is equal to
Peter so I'm going to get the employee
whose name is Peter only ok that's what
I'm going to do here then what I am
going to go into too so after I got the
name Peter I need to now do some
processing right so I'm going to use
Peters ID and I am going to call the
next API which is called the events
right so I have the another API or as a
rest endpoint called employee / ID right
/ event I'm going to use that event and
pull that using your flux because that
is going to return a flux I'd whatever
we are using node slash on is going to
return a model and whatever we are going
to use as even those are going to return
flux right so I'm going to use that to
retrieve again so what I am going to do
is it's like a nested corn so I am going
to do a nested corn here so I'm going to
use flatmap for that okay so why flatmap
because we are going to stream it
against it because the response of that
is another flux so I'm going to use flat
map so I'm saying employee okay here
again we have to use the web client
because we need to do again another
contact so I am going to call this as
the client dot cat again
and then I need to do a URI again so in
this case the URL should be the ID slash
even so this is what is going to return
the flux now for the ID we have to pass
the value of the ID so I am going to say
employ gate ID so this is going to
return me the employee ID now again we
have to do a retrieve like how we did
here so once it is retrieved we get the
response from the body now we have to
convert into a flux right so I am going
to convert this into a flux and this
time it is going to be a employee event
right that is what the class we created
so I have to create the employee bed
class as well so I am just copying that
class one here right ok so we got that
here now after the body is received we
are going to return this itself right so
because this is the flux if you see the
body is returning a flux and flatmap
would expect a flux flux to be written
so I am just going to return this flux
here so once I return a return from a
flux how do we need how do you retrieve
the data right you have to subscribe to
it isn't it so we have to subscribe so
we just say subscribe and then we get
the data from the flux so you can get
the data you can consume the data from
the flux so what we have is a employee
event because that is what we returned
from the flat map the employee event is
what getting returned ok from the
employee event we have to now do
something right so I'm going to say
string dot out dot println I am going to
just print the employee object that's it
so I am NOT going to do anything select
me check in the employee event I have a
two string so I don't have a two string
here so what I'm going to do is I'm
going to generate the two strings so
that we can see the data in the employee
I think I should have a two string here
it is there alright so that's it so what
we did here is so what we did here is
inside the command line runner we use
the web client we first said ok get me
the URL which has slash all under this
particular work line which we created
and retrieve them and convert into a
flux of type employee and from the
employee flux I am going to do filter
I'm going to filter out all the
employees whose name is Peter and from
that I'm going to use flatmap to call
again the that client right so to call
again the web client so let me do cursor
to call again the web client and using
the URL ID slash even and I am passing
the ID of the employee so this will now
retrieve us a stream of flux okay and
from that flux I'm converting it into a
employee event object that is what the
object is and finally do using the
subscribe I am just going to turn this
particular event employee event okay
that is what we are doing let me run
this particular program so so when this
comes up when string board application
comes up this command line runner should
run before this the web client would be
initialized so we are going to see how
this works so this particular ID slash
even is going to return the data every
two seconds so we need to see the data
every two seconds here in that line
sight and this is not a blocking in
section so the major advantage of
reactive streams is there is no blocking
count so if you see here this is the
functional style and the call which is
going to arrive is not blocking yeah so
if your notice here in the command
prompt the data is getting steamed every
two seconds right so that is what the
web client is doing so the web client is
streaming the data and getting the
getting the data and converting into a
stream okay and then printing it and if
you notice here this is not a blocking
call okay so if I write some code after
this it is going to get executed so this
is literally not a blocking call okay it
is going to be in a synchronous call for
example in order to prove that what I
can do is I can use a blocking statement
here so that I can show you so what I
will do here is I'll just to print some
thousand so I'll just print the blocking
call which I have here and here I will
do a thread out sleep so that I can show
you whether it has got procedure or not
so every one second I am going to print
this okay
so let me restart this spring boot up
and what I expect here the depth line
should still receive the data and also
it should have proceeded to this
particular loop where we have a blocking
instruction so if you notice here the
blocking one blocking one is coming here
so I think as you know put I but that's
fine you get the point rate so the
blocking this is the blocking statement
because it is a for loop and I am doing
a thread here however if you notice here
the even stream is still getting pushed
right so which basically means this is
also running and this is also running
right so that is what the advantage of
the reactive stream is it is going to
run in the separate thread and that is
pushing or pulling the data from the
back end because it's a flux okay so
that is how you create a client-side
flux processing using the web client so
you cannot use the rest client in this
case because rest client does not
support flux out of the bus now we have
to use web client which is a replacement
for the risk template for the flux for
the stream processing so this is used
for the reactive see so in the previous
examples we wrote the server-side coding
and in the in the current example we
wrote a client-side coding I will just
reiterate what we did we created a
simple web client using the web client
we just created with a URL of the server
side so then we did a get and you can do
the URI of what question point you have
to hit and then we need to do a retrieve
so once we return e we get the body so
from the body we you need to convert
into a flux of type something for
example here with suppose o of employee
and then we need to do some steam
processing we can do directly a map or a
flat map or even you can do a subscribe
button or in my case I'm just doing a
filter I am just doing a filter of Peter
and getting Peters information from
Peters information and using again out
of the web client to get some even
stream so this is going to be the flux
flux even stream and I am converting
that into an employee vent object and
this is going to run every time the flux
is pushed to the client side ok finally
I do is subscribe once this is
successful I get the subscribe and that
gets printed
so whatever employee even got push it
gets printed so that is what we saw in
this particular example so I will push
this code into the gaiter repository you
can get it from there for reference how
it was done
the server-side code is already there
and get up as example1 example2 I make
this as Mongo client example so that you
can reference it from there okay so
that's it for this particular video hope
you guys enjoyed the video if you
haven't subscribed to the channel go
ahead and subscribe to it if you liked
the video go ahead and like it if you
want me to do videos on any particular
topic to let me know in the comment
section below so I will be able to do
that for you so that is for this
particular video wait again in the next
video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>