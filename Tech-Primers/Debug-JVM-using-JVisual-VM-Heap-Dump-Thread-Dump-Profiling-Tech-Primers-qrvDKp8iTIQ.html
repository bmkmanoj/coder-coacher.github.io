<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Debug JVM using JVisual VM | Heap Dump | Thread Dump | Profiling | Tech Primers | Coder Coacher - Coaching Coders</title><meta content="Debug JVM using JVisual VM | Heap Dump | Thread Dump | Profiling | Tech Primers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-Primers/">Tech Primers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Debug JVM using JVisual VM | Heap Dump | Thread Dump | Profiling | Tech Primers</b></h2><h5 class="post__date">2017-09-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qrvDKp8iTIQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">press the bell icon on the YouTube app
and never miss any update from tech
primers welcome to tech primers in this
particular video we are going to see how
to use J visual VM to D bang your JVM
and let's see what are the features
which Java provides by default the JVM
will be let's get started so I'm going
to open my terminal I'm on T in the JVM
bin part what I'm gonna do is I'm just
gonna run the process called J visual V
so if you see in even in Windows by
default there is a software called J
visual VM you can try that so let's see
what happens right when I start the J
which you'll be so if you have any JDK
version you should have this installed
by default in your JDK so irrespective
of any JVM right from Java 6 to Java 9
you can use the J which will be so I use
most of the time to debug how the JVM
looks like how the snapshot of Liam is
currently what are the threads which are
running right so if you notice here
there is one JVM which is already
running here I want to see the stats for
that particular JVM so what I did is I
just double click that particular JVM
and it connected to that JVM and showing
me all the properties here red for
example these are just the parts of what
JVM it is running on and what portrait
is running on over what is the process
ID and stuff like that there is one more
tab called monitor so let me maximize it
so that we can ignore the other stuff so
if you see there is a tab called monitor
so monitor has the different stats about
the JVM so you have a CPU utilization
for the JVM if you notice a richer it
shows how much CPU the JVM uses and then
there is a heap space and meta space so
these are just to identify how much
memory the JVM is consuming there is one
called classes so this shows how much
classes are loaded into the JVM
right now if you see they're up ten
thousand one thirty four classes which
are loaded in the GBA right and the
final one is the thread count so this
shows how many threads are live which
are running so if you notice here there
is a there are 29 light threads and the
peak was 30 at 1.30 got Creator and then
right now only 29 is there all right so
this is just the monitor so if there is
any unusual activity in the heap memory
then you can notice up here so it might
go up and down and stuff like that all
right so the next step is the threads so
if you go to the threads you can see
what are the different threads which are
running in the JVM so if you had named a
thread with a particular name then you
can easily see that to the thread here
directly so when you debug it it will be
very useful so that is the major reason
we always name the thread pool so that
we can easily identify that okay that
cut fold belongs to us right so that is
the thread here there is a thread dump
option so we will see that later the
next one is a sampling so you can do
either memory something or the CPU
sampling if we go to the CPU something
it shows how much time each of the
running thread or the method if you
notice here there are my sequel database
connections Tomcat and subsidized time
it took the CPU to process the
particular transaction right the next
one is the memory so if I go to memory
it shows how many objects are there and
how much size the those objects compute
it so that is what it shows if you
notice here it shows all the different
types of objects and how many bytes they
consume and then how many instances are
there so for example if you see a
character array is this many the 36
person age of the heap space is full of
character waving right and there are
sixty eight thousand instances of
character are they running all right
amazing the last one is the profiler so
you can do say P over the memory
profiling like takes a while to do some
profiling so it just connects to the JVM
and then it has some profile run right
so it shows up the profiling details
it takes a while though that's why it is
ABC here it is just loading it
sameen where we can see the other
options so if you click on the jvm
option here there are a bunch of options
here so if you do a threat dump this
takes a thread dump at this particular
instance for the JB mine shows how much
threads are there so for example this
thread is time waiting there is one
thread waiting here there is one thread
waiting there are some threads which are
in runnable state so it shows the thread
dump so this is how this thread dump
looks like if you take a thread term
from the JVM this is how it looks like
so it shows exactly where the thread is
stuck or there the threads are right now
at this particular time right so if
something is getting processed it shows
at what line it is getting processed so
that is the thread dump option the next
one is the heat duct so you can do a
heap dump as well so heap dump shows the
different heap options so if you see
here it shows the classes at this
particular point so whatever we saw in
the sampler and the threads it takes a
heap count and it creates a snapshot if
you notice here the size is not
increasing because it has taken a
snapshot add that particular instance so
several instances you can see the
difference options I think that's it
what other things are the applications
are felt I think it shows the it's the
same thing the monitor on the threads
right okay so that's good for profiling
and see yeah I don't know what happened
to the profiler so if you notice here
yeah the profiler is doing it did the
profiling and then if you see here the
results are showing that there are two
thread pools right three thread for zero
today so there is a JDBC connection and
then there is some other blocking queue
so that is what is there and I think it
is getting loaded one by one so this is
how you can debug JVM using the
chebyshev vm and this j visual museum is
free and it comes along with the JVM so
I'm not sure how many of you know this
already but if you if you are hearing
this for the first time utilize this
particular tool you don't have to
install any external tool to do some
monitoring you can use a visual VM to do
some monitoring if you are stuck with
performance issues or you want to see
where the thread is darker what
inside the TV you can just use this tool
if you want pitch act locally and if you
have to do remote connections there is
an option you can connect to a remote
JBM but the only thing is you have to
expose JMX port in order to connect to
the remote JVM so when you had that
start of the JVM you should have given
the jmx both number so that sorry so
that this particular J visual VM can
connect to that JVM using the same port
but if it is local you don't have to
enable anything it just by default
identifies what are the different JVM is
running inside this local machine so if
I had open intelligent it will show
IntelliJ as well because that also runs
on the JVM so all those get showed up
here take a look at that give it a shot
you can you can just play with this
particular tool and then see whatever is
useful for you and then you can use it
for debugging your application where for
identifying any code leaks or memory
leaks or code smells so you can you can
just use this particular tool okay I
hope you and you got to know or you
learn something new today using the
visual VM you can do monitoring and then
you can even check the snapshot of a JVM
at that particular instance hope you
found it interesting if you liked the
video go ahead and like it if you
haven't subscribed to the channel go
ahead and subscribe to it meet again in
the next video thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>