<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Spring Security using OAuth2 in Spring Boot | Tech Primers | Coder Coacher - Coaching Coders</title><meta content="Spring Security using OAuth2 in Spring Boot | Tech Primers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-Primers/">Tech Primers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Spring Security using OAuth2 in Spring Boot | Tech Primers</b></h2><h5 class="post__date">2017-09-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Dbxzw0cpxBU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">press the bell icon on the YouTube app
and never miss any update from tech
primers welcome to tech primers in this
video we are going to see how to create
a springboard application with spring
security enabled using oauth2 in my
previous videos you would have seen how
we can use spring security with
different variety of authentication
systems like JWT
or the direct database interaction in
this particular video we are going to
see how to use or two inside spring
security in a springboard application so
before going into the details of
creating the application so we need to
understand what we need to create so
what I will be doing is I will be
creating an authorization server and
embedding the is a resource server
inside the authorization server so I'll
be creating two different services one
will be an authorization server along
with a resource server and the other one
will be the client with which we will be
accessing this server so the
authorization server will have the
tokens generated and the resource server
will validate these token so I just
wanted to create only two applications
so from the source application we are
going to query the authorization server
get the token back and then query the
resource server which is also inside the
same server but the resource server will
validate the application right with a
tokens so we are going to create two
services one is the authorization server
along with the resource server the other
one is the client with which we are
going to access the so the authorization
and their source service right so let's
go through the start or Spring dot IO
where we generally create our project so
I'm going to create Tom tech primers
security so let's name the application
as spring security
-
observer right so I named that as a hot
server so the name the dependencies
which we require are the web the oauth2
right and what else do we need
I think that's it so we don't need
anything else for the odds over so I'll
just create this next is the client
client right so I'm going to create a
task lined spring secure declined the
dependencies which we need our web and
the water now along with that we are
going to use time leaf for the UI so I'm
not going to use the simple angular or
anything I'm just going to use timely
few hi so to show the login screen right
so I'm going to create this project as
well so we have generated the both the
projects let's unzip these projects so
that we can use it in IntelliJ
so if you go through the form dot XML
entry which we have created right so if
you notice that we have the earth - we
have the time leaf and we have the start
of it there might be time leaf extras
which we require as well but we'll add
that later right so for now let the
dependencies get downloaded I think it
will take a few more minutes so that all
the dependencies are downloaded let me
check the other one I think in the odds
over the dependencies are already
downloaded right okay so let's go and
get started with the odds over so the
two dependencies which we have in the
odds over are the clouds are over than
the springboard shutter clip right
because the server the resource server
requires the rest endpoint with which we
carry are going to access the rest
endpoint right that's why we have out of
the spring wave there cool so now we
need to add some configurations
basically spring is all about
configuration so we need to create some
configuration so what we are going to do
is we are going to create a
configuration for the resource server
now so I'll just create a package now
called config and inside that I'm going
to create a Java class so let's call it
as a resource conflict right because we
need to add these configurations for the
resource server specifically right
so we need to enable this with enable
resource server so I'm just adding that
annotation and I need to enable this
with configuration so that this is
loaded by spring boot by default we need
to override the web security configure a
doctor so it's a class now we need to
override that web security configure
adapter right so we need to override
some methods because we need to add some
security to the resource rest in points
right we are going to create some
restrain point for the resource so we
need to enable the security for that
right so that is why we need this so
what we are going to do here is we are
going to create the override for the
which method do we need to override
right so there is a configure method
which will accept the HTTP security so
we are going to override that right and
instead of the super dot configure we
are going to say HTTP I need to match
the URLs so we're going to say request
matures right and match the URLs using
the ant matches let's say the last end
point is called login all right and also
some both right so what let's say what
slash authorized is the rest endpoint
which I have so I'm going to say that
match these two and also authorize this
request so what we are telling spring
security is match these two logins and
then authorize them right for any
request which comes to these right and
then make them authenticated so this
will other was to do authentication
right and what else do we need so we
need to also show the login page right
so I'm going to say login form login so
this will enable the login page
so and finally I'm saying for the forum
login just allow everybody to use the
forum login so that will allow the forum
login to be used by anybody
right so apart from this what we need to
override we need to override the other
configure which is using the
authentication builder if you notice
here there is a authentication builder
so we are going to override that as well
and we are going to give the
authentication manager so I'm gonna say
whatever the authentication manager
right and here I'm going to use this
particular authentication manager inside
the authentication builder so using the
authentication builder we need to say
the parent authentication manager as the
authentication manager which we have
right which we just author wired and
then I'm not going to do any database
validation for now in this particular
example so I'm going to do in memory
authentication in the next example I
will show you how to do databases on
occasion the only thing is you will be
using user detail service which we have
seen in the other spring security
examples however for simplicity I want
to concentrate more on the oauth2
example then we can shift to the
authentication using the database right
so for now I will just use the in-memory
authentication with some username and
password so I'm gonna use Peter and
Peter has the password lowercase Peter
has a password right I'm going to assign
some role to Peter I'm going to assign
the role of admin to Peter ok that's it
so what we have done here in this
particular configuration is we have
created authentication manager and then
we are providing it to the Builder
saying use the in-memory authentication
using these details because when you
authenticate you need to provide a
username and password and we need to get
the roles right so this Peter username
is going to return the roll
that mint for now so this is just going
to be an in-memory authentication so it
will not use any database for
authentication and also to allow the
URLs we are just saying spring security
that okay allow these particular URLs so
enable a form login as well so that user
can see a login screen where they can
enter the Piter Piter details whatever
the user name and password right so that
is what we have done in this particular
configuration okay
now we can move to the authorization
server configuration so I need to create
a authorization server config right this
particular conflict needs to be
annotated with enable open position
server and also we need to add it to add
the configuration so that spring boot
can load it and in this particular
example for the authorization server we
need to extend the authorization server
configure adapter so in the previous
configuration we overrode the web
configured after here we have to
override the authorization configure
adapter so that we here we can modify
the authorization server which spring
provides into the way we wanted so that
is what we are doing here so we are
overriding the authorization server
which spring already has and we are
going to override some methods here so
there is a configure method so similar
way how we did there we are going to use
the method which has the authorization
server security configure so where is
that authorization security configure
yeah so here so we need to all use this
particular security and then we need to
secure this particular authorization
server so I'm going to use security dot
token key access so here I'm going to
say who all can access the token keys so
for now I'm going to say allow everybody
so I'm just saying per meter and we need
to validate this token right so in order
to validate this token we can say
whether this valid a token is
authenticated or something before this
talk
generated unity check if it is
authenticated right that is why we wrote
this particular config so here we do the
alternative authentication and here we
do the authorization so authentication
is where you just check whether you have
the you you your username and password
is present or you have the access to
login authorization is where you just
check if you have the relevant roles for
authorizing for accessing that
particular resource or something like
that so that is the authorization server
alright so that is it for this so one
more configuration which we need to
override is the the configure adapter
which has the client details right so we
are going to use again the e we are
going to use the same clients similar
way we need to override some in memory
stuff so we are going to say that I'm
going to use in memory I'm not going to
use any database or something because
the SSO details or the oauth2 details
needs to be stored somewhere right the
authorization server needs to validate
the data from somewhere right for now
I'm going to use the in memory again
so same like how we use the username and
password so here also we have some
information so for example with client
so we need to provide the client ID with
which the user will be accessing the
server so I'm gonna say just client ID
I'm just not giving anything else I'm
just giving a simple text client ID and
there is a secret which we need to give
it which we need to give as well so I'm
not going to do anything there I'm just
going to say secret right as an example
and we need to provide what type of
grants we need to give right so in this
particular example I'm going to use the
authorization code as the grant right
that is one of the type of grants so and
also I'm going to say what type what is
the scope of my particular authorization
so I am saying it's user underscore info
so it's going to be user information
which we have right and also finally
I'll just do a auto approve
so that the tokens are generated right
you can also have tokens validation set
I'm not going to do any anything right
now so we can see that in the next
example next complex example but for now
I'm just going to create a simple spring
security application with which they can
use OAuth 2 to authenticate it alright
the next one is the last override which
we have right the endpoint override so
we need to override this red endpoint
with the authentication manager which we
auto by right in the previous example so
same way we have to use endpoints and
then we are going to say use my
authentication manager I think I haven't
taught over it here as I thought over
here
right that's it so all the
configurations are done both for the
authorization server and the resource
server right so now what else do we need
so now we need to create the resource
right exactly
the resource needs to be accessed by the
resource server so I'm going to create a
hello resource so that we can access
that particular resource this is simply
going to be a spring MVC applications
spring MVC controller so I'm just going
to say rez controller I'm adding a
request mapping and I'm gonna say rest
/hello right and let's do the gate
mapping here if somebody access rest
lash hello we should be able to return
them a string saying hello world right
so this is our ultimate goal so the
client needs to access this particular
rest endpoint cauldre /hello in order to
access this particular resistant point
he needs to do the authentication and
authorization and provide the token that
is when the spring security will allow
him to access this particular rest
endpoint that is our ultimate cool so
that is why we are adding these
authentication server configurations and
authorizations over configuration right
so the next step is to add some property
right so the port number in which I want
to start this particular process is 8 0
8 1 let's say right ok and also I want
to have this whole server have a path
slash auth or something like that so
that I know that this is authentication
server right so I'm going to just give a
slash auth as the default path so this
all the rest endpoint will have this
slash auth as the context so that is why
I am just using the server or context or
path this will override the default path
for every every every rest endpoint also
I'm going to disable the basic security
because we already have our security
enabled using the authorization server
so I am going to enable the springs
basic security ok so that is what this
is all about right so I think our server
is done let's go to the client part
where is our client yeah so the client
is here so in the client part we need to
create some configurations for the OAuth
2 right because the client is where we
will decide what authentication it needs
you so that is where we are going to say
what to should be used so we need to
create some configuration there in the
client part so I'm going to create a
folder called config as usual and I'm
going to create that class called Oh
confit right and this is where we are
going to enable the OAuth 2
okay so we need to enable the annotation
called earth - SSO and I'm gonna enable
the ad configuration as usual for this
again we need to extend the web security
configure a doctor security configure
another adapter so because we need to
override some URLs right we need to
allow some URLs so we need to tell
spring security what we need to Allah so
that is why we are overriding web
security configurator and the one which
we are going to allow is the same HTTP
security and here what do we need we
need to do some add matches again so we
need to say and match sure
so in this particular case I'm gonna say
allow all my URLs right hello all my
URLs to be authorized so I'm saying that
authorize all those requests and I'm
saying give me some specific URL right
which is having login so I'm saying that
okay give me access to only the slash
login URL right because I need to access
that right so anybody should be able to
access the login URL so I'm saying that
okay allow anyone to do the access to
the login apart from the other apart
from the login and they wrote right so
this is nothing but root so whenever you
first initially hit it will go to slash
shake where you load your index dot HTML
or any other default page so that is
this root and then you have a login
slash login so I'm just saying spring
security that allow only these two URLs
apart from that the rest all URLs should
be authorized so I'm just saying permit
all and I'm saying any other requests
should be authenticated all right that's
it
so we are just allowing only these two
URLs to be access to by anybody else
that's it so that is why we have over it
in the spring security configurator
okay now apart from this so we have no
enable the configuration we need to
enable the spring web MVC security okay
so in order to do that because we need
to add the we need to add the UI into
the web right so we need to add the
thyme leaf whatever I mentioned right so
we need to add the thyme leaf web pages
onto the Springwood application so in
order to do that we need to override the
configuration called the BEM vc
configure adapter so this is nothing but
web security configurator which will
allow us to control the spring security
framework but in order to have our UI
integrated into the spring MVC framework
we need to override Eve ever MVC
configure our adapter so I'm going to
create something called web config so
that we have our enable web MVC so this
will enable our UI so I'm going to say
add configuration we need to extend our
web MVC configure adapter right and we
need to override some methods here as
usual so we are going to override the
default one first
configure default servlet so what I'm
gonna do here is I'm just gonna say
configure dot enable it so I'm gonna by
default enable the configure a servlet
handling right so I'm going to enable
the saying okay use the default servlet
handling' so that I will allow you to
control the webpage you are going to get
the next one is the the view controller
right so that is where we will be
pushing our Renu Y right our HTML page
so I'm going to use the super and along
with that super we are going to use the
registry to register some of our you
eyes right so you can say add view
controller and then you can say that URL
here so for example I'm gonna say in the
route give that particular name and then
forward it to a different URL right for
example if you hit a slash you need to
forward it to the index page
so I'm going to say just forward this to
the page called index right type so that
I have the default pages index which is
loaded the next one I wanted to add as
the index again alright and also I need
to add some other page which I need to
have it secured right so I will just say
secure so let's say there are two pages
one is the index and one is the secure
where if you want to access security you
should be logged in right so that is why
I'm accessing I'm just saying the spring
MVC that il-38 two pages one called
index one called secure and I'm adding
that to the controller here right so
next one the final thing would be bear
will these be present right so where
should be tea speed present so there is
a resource address or handlers so here
we are going to register those registry
and say where these will be present so
these will be generally present in the
resource of the directory all these
static files right the HTML files so we
need to give the path here that is what
I'm doing here so we need to provide the
handlers and the locations for the these
handlers so I'm just going to say
resource was slash right that's it so
these are nothing but configurations so
these are configurations which you
require for setting up your client and
apart from this we need to also have the
property resource placeholder configure
because we need to provide a we need to
create a bean and we need to inject this
when the springboard loops right so I'm
gonna say property
place holder configuring and when we
just provide a new property so that
spring boat uses this particular
property resources placeholder because
we have created some properties here the
resources right so these need to be
loaded into these configured actors so
that is why we are manually creating it
or our Springwood will not know it
right so I think we are done with our
setup here apart from this we also need
to create the request context listener
because we are creating these view
controllers right so we need to provide
the beam which we need for the servlet
right for the Tomcat basically so we
need to overwrite the request context
listener and we need to provide the new
instance of it so that springboard can
use this particular instance okay so I
think that is it now we need to create
the configurations which we need so the
application properties or the the HTML
files right so I'll create the
application yarman in this case because
I need to load some of them before even
the application the properties is loaded
that is where I need the application
Yama
so I'll just say my default port is 88
to a week 881 right so I'll just create
a 282 and also the context path for this
I can make it as /ui there we add a
slash auth to know that that is an
authorization server and we need to add
some session cookies so I'm going to say
my session cookie name should be
something like UI session right you can
give any name I am just giving a UI
session because people use UI session
and we need to disable the basic
security which we did in the same in the
server side right because we have
already overridden these the other
security which we need to take care is
the OAuth 2 right 4 or 3 we need to now
add the configurations right so for
example the client we added something in
the server side right so in the server
side what did we do we add yeah the
client ID has client ID secret and all
these things so these need to be
provided from the client side so for the
client I need to have the client ID so
what is the client ID the client idea in
does client ID itself then there is a
secret right it's called client secret
and that's called secret now we need to
give the access token URL right so this
is where the worth to client will go and
access so this should be the URL of the
server the authentication or the
authorization server right so it will be
HTTP cool and localhost colon 8080 one
right here colon 8080 on and the
contacts path we had given as auth and
then we will have earth slash token so
this is the default URL which will be
created by the OAuth server and the next
one will be the user access so now once
you create the token unit now access the
the user needs to access it right so
there is an endpoint called you to user
authorization URI that you need to
provide again it will be almost similar
but the endpoint will be slightly
different this is the authorized so this
we already I had created here if you
notice here the authorize we created it
in Greece was configure yeah see it was
like this is for the resource where the
user can access that particular
resistant point I think that's it for
Earth - for the client right next one is
the resource server so the resource
server needs to be accessed it so we
need to give the URL for the resource
server so which is nothing but our hello
resource right so which is nothing but
slash slash hello so we need to have the
URL mentioned here so the URL will be
user info URI it I'm just gonna add one
config all user info so which is going
to be same as HTTP localhost colon 8080
one / or / is / hello right so that is
the URL which we are going to hit and
finally we need to do something for a
time leaf so
I'm gonna use time leaf cash to be
disabled
okay I think these are the
configurations which you require that's
it
so these are the configurations which we
require for the client side so that the
client side can access the server side
um okay so next thing would be the HTML
pages so we need to create some index
dot HTML we just add those two in the
view controller now we need to add index
dot HTML and secure dot HTML right okay
so in the index dot HTML we need to add
some basic stuff so I'm gonna add HTML
and I'm gonna add some meta right so the
metal should he be equivalent should be
content type I want the content type to
be take slash HTML because it's gonna be
HTML page and also I need to give some
care set right beauty of acne
okay I need to give some title here as
well so I gave the title explain
security Oh
example
wait and we'll have some body
inside the body we can have some do come
on or we don't even need it we just say
h1 it's a spring security right now we
need to provide a link to the login page
from here so what they can do is they
can just say it's rough what will be a
link rate it's nothing but secure page
right to the secure dot HTML so we can
say login here right that's it okay so
that is it from the login page we will
show just that click on the secure HTML
so that from the secure page we will be
doing all the logins here so sick after
you click on the secure page it will be
redirecting all your information to the
secure page so that secure page can
display all the information right so I'm
going to use the same template here and
use the same I'm not going to change
anything else except for the place we're
doing this right
so I'm just gonna add secure so that I
know what this is a different page right
so here I'm gonna say welcome to tech
primers and I'm gonna add that
particular text which I'll be getting
from the rest hello so I'm gonna had
some hello world so it's basically going
to return some mail over so th is
nothing but the the time leaf text right
th not the timely sorry
it's the XHTML the time leaf is what the
value will be having so which will be
nothing but dollar dollar authentication
dot name so this name will be provided
by the user from there mostly it will be
I think it's just the authentication
right because it's going to be a string
so let's see what it returns when I'm
not sure Oh date returns so this should
be returning hello world but I just
wanted to see what yeah this
authentication should return d hello
world directly right I think we are done
let's start
process before that we need to provide
the time leaf dependency for there is a
time leave dependency for the extras so
those extras are the compatibility for
these playing security for so the
dependency artifact would be time I fund
extra second spring security for I guess
let's see it is good
th why them a leaf dot next rose
meanwhile the same yeah it's good now so
we need to add this also to the server
not additive so the input of this
overall so begin meanwhile we can start
the server
you can start body service
I'm just double-checking my ram usage
it's a bit of old computer so I'm just
cleaning it up now to save some space so
that we can use it for our processes
because we have started two processes
right now so there will be two literally
there it is the client and the server
both running here
so let it come up
yep the clientís I think come up now
8:02 and the server
I think server has got an exception
because I think this is Java night
I should have change this Java 8 let me
change it to John
so if we are not having any
authorization server they can use any
authorization server which is already
available like Facebook or even the
github one or even the Google API so
interrupts the same authorization server
which we created here this particular
server we can use any third party which
will be providing us the authorization
details and you can trace the resource
server so the resource server will now
be in our control and the authorization
server will be from a trusted source
right so yeah the server is also up now
so the client is also up let's go and
hit the rest endpoint I mean the verb
February is it
so we had created this 80 under 80 82
right yeah if you notice here the web
page is now showing up this what has
happening here is
the web.config be added something here
right the forwarder so this the view
controller is now forwarding all the
slash requests to the index dot HTML so
we created a index.html with what
content we see and that is how this web
config is working now and if you click
on the log in to your earth here if you
notice here in the below it goes to the
secure page you figure if I click on it
it should now take us to the login page
right so if you notice here this is now
it has taken to the odd slash login if
you notice this is nothing but the login
page from the server side so we didn't
do anything here if you notice in the
client side what did we do here in the
secure dot HTML we didn't do anything
right we didn't do anything because the
or two is taking care of all the web
config whatever we did here is secure
the OAuth 2 is directly redirecting as
to the server side so from here using
the application toriyama changes which
we did here right if you notice here
whatever changes we did here it is now
taking us directly to the odd slash
login right here so it's directly taking
from the client to the server side so if
you notice the server side this
possessiveness has been hit so it is
that URL here
what slash sure if you notice that the
server is what has auth right so that is
why it has gone to odd slash login so
this is it shows like a client but it
indirectly it is going to go also all
right so we are going to provide the
username and password to the odd server
not to the client so this page which is
showing up it is not even the client it
is just the server and we need to
provide the detail which we created
right in the server side so what did we
create we create Peter and Peter is the
password here right I'm just going to do
a login now so once I log in if you
notice here it is saying unauthorized
could not obtain user details from the
token so there is an authentication
failure error and if you notice here
there is a code which gives some state
and all those things right
so we so it looks like this
authentication is now failing so let me
go and check why so if I go and do the
UI again it should now show me I guess
right but looks like it is using the
same token enticing it's unauthorized
because I think I haven't enabled my
watch here right I think I didn't even
give any access here so it is not even
going to the slash login now I mean /
well if I just see they should not work
now see if you notice here in the URL it
has gone to the watch / what authorize
the client ID and then just given the
username and it needs to give the log in
where it should get redirected right so
that is what it has done
it should be 80 82 if I click on it it
has already could not obtain usual
details from the token why is it not
able to get the user details did I do
anything wrong so in the authorization
server we did a permit call is the
spelling right commit all is
authenticated straight only then we had
the client ID yes and then we said user
on the screen for that is what we need
and also the what authorization code and
the secret is secret 930 is client I
caps okay did I have the same client ID
here yeah crying daddy same and also the
secret is also same right so then why
didn't it did it screw up in this
particular place let me change user user
authorization URI which is correct only
and then we have done authorize you tha
to route to Touro right and also RS 10
point is you should EPA 8080 and it's
called user info you re right which is
also right
but why he is not able to access so this
is underscore code only right here what
the organization endoscope is
authenticated lots of fun it all looks
good
grant a possible education did up
security adapter to putting anything
okay what our eyes we did the same it
authorizes for the most item which under
overt and then strange authorized and
then you have a dog in where you are
saying authorized a course and then we
are saying any other request should be
done and inform login there promoting
everybody correct
and then we are providing a username and
password
and I think the role should be used
because we have done a userinfo right I
think that could be a problem
maybe we can restart and shine
the right it is up now let me you why
you why I just to a login again cannot
desert stay this again and again me
instance of the browser I think it's
told us in the token right we just say
to cookie store it as a key so I'll just
log in with the p2p still the petered
you don't have access you I slash login
do to treat okay this is the hello solo
speaking let me start this main one and
also do the same URL I'm also changing
of indication
biggest fear off in the application
application one man who is a 4/4 from
text on decision
client under that we have every service
fine before you see any spelling
mistakes you Stephanie Warren then we
have spring only cash flows so far now I
have just redirected there's to the best
/ principal but - you can do so disabled
they should have because everything is
it working I think the problem is with
it is also around you
looking out on the cable and then find
the time nice user
now let's access this
it should I wait to slash to come with
Vito Vito so this should provide aha
now there you go so the problem is
within your role which is nothing but
you loser
and also I think we need to provide the
principle because that is what we need
right if you see Peter had come welcome
to tech primers Peter
because the only thing which I have
changed here is I have added one more
restrain point which is there in the
hello resource here so if you notice
here I just added one more uh standpoint
called principle and the principle is
what is going to return me the name and
if you notice here in the mystery M
alright the secured at HTML I just use
use the name so inside the principle you
will have different values so I'm just
using the authentication dot name so
that will give me the value of T Peter
okay so that is what has returned now
okay so if you see what we have done
I'll just summarize what we did so if
you notice here if I don't login and if
I directly use this particular URL
impose it won't allow me I directly
redirects me to the login page so if you
see here I just pasted or the secured
page but still it cried ax me to be
authentication servers login and once I
log into that it will now redirect me to
the login page okay it's asking me that
and then it is directly taking me to the
location cool so what is working now so
if we see the if we need to see where is
the tokens and stuff so I can show you
that if I do an inspector
you can adjust or maximize this with
this so if you see here this is the
token so we created a cookie right we
created a cookie called the if you
notice here we created a cookie called
UI session right that is this cookie and
this cookie is now set in the URL if you
delete this cookie right then the login
will not work so the login is working
because we have the cookie set that is
how it is working and we don't have any
expiration date set right now that is
why the cookie is working but if we
let's say if I open it in an incognito
window head so I will show it in the
incognito window let me do a inspect
here so that I can show you this I think
since I only have one incognito window
open this is again using the same let me
close this again I'll open again so that
the cookies are new
right so if you see here right now there
is nothing in the login so in the login
there is no header so in the header
there is a cookie called J station ID
there is nothing at a else apart from
that right generation ID is coming from
our Tomcat so now it's asking me to
login I am just over login now here the
username and password once I log in if
you see here the cookie will be set here
yeah the UN session cookie is set and
that is all we are able to access our
secure you are so what happened in the
background is nothing but these worth to
offspring
did all our heavy lifting right so it
queried first it gave the redirected URL
and then it authenticated once it is
authenticated it sent a request to the
hello URL whatever the rest / hello /
principal and then it got it
the that's what we can't figure right so
roughly what we configured in the
application Yaman here yeah the user
info so that is how it is working okay
so this user info is nothing but the one
which we have given in the configuration
where in this let's go right so let me
summarize what we did in the client part
we created a web page we created a web
page using timely if we go to the index
page we just said URL to the secure page
and the security page will have a secure
URL using the authentication dot name
which is nothing but coming from the
principle which we have configured using
the authentication which spring boot
internally users right so every which is
which we have added depends upon birth
dependency here which is nothing but the
oauth2 dependency here this one right
apart from that we need to add some
configurations to enable the OAuth 2 so
for example this add enable or two we
have done and we have added some
configuration saying allow the URLs
slash login and slash so that everyone
can access that apart from that any
other subsequent ones should be
authenticated once it sees authenticated
it will redirect to the authentication
server okay that is my neck traitor to
the authentication server and there you
show up the login page that is whenever
we hit slash Sakuni Despres that is
directly to be or the negations servers
login page the next one would be the web
config so the web config is required you
know how to have the timely pages the
HTML pages configured into the spring
MVC framework and we directly get the
index.html right that is why we have an
ad at the ad enabled where the MLS MVC
and then we have overwritten the web MVC
configure an adapter we just will enable
the servlet handling and then we have
gone and over it in the view controllers
with our pages which we have manually
added here that is what we have gone
there and also the resources where we
are having them that is what we have
ever done
okay and also we have enabled the Lycos
context listener which is required to
know these so that is that in the client
side in the server side the server side
in our case we have carry for the custom
authentication server but you don't have
to do that if you have Facebook or
github API ends you can go and register
in github or Facebook you have to give
all these details what we did here in
the client side we have to give all
these details access token you are right
the client ID the client secret the user
authentication you are in all these we
have to give in the authorization server
which is like Facebook or but we have
done that here we have Auto configured
that here so by overriding the
authorization server configuration we
have enabled the authorization server
and we have overwritten some
configurations there here the default
configurations we for now we have made
it that's in memory so that I have a
hard-coded here if you have any data
base you cannot configure the database
here right so for the resource server
that is for the authorization server
authorization server is what
authorizes and creates the token
resource server is where we redirect our
request to after the authorizations
successful so once Facebook is done
authenticating your token then it
redirects to the saw server so resource
server is there we we tell the server
that
tell the client that okay I need to go
here or I need to go there so you know
to enable the resource over we have
overwritten the web security configure
and we have enabled the URLs where the
request will merit by default coming so
for example this Roth authorize is where
the request from the authentication
server will redirect to here
and from there we just take it forward
and in order to authorize the the
security we are using the Peter login
here the in-memory authentication so the
login page which we saw that uses this
particular login right
once it's all successful it gets
redirected to the rest endpoint here so
we have created a Harriston point
constant circle there and then it gets
redirected you there okay so that's it
for this particular video I hope you
guys understood how to works so how I'll
upload this particular example into the
github repository you can take take it
from there and then use it as a
reference project you can just download
and then running the same way I have run
now and sure so in the subsequent videos
I will make a complex use case of this
particular organ spring authentication
so if you want me to do any specific use
things on or - you can drop that in the
comment section below or if you want me
to do any other video or any other topic
dude let me know in the comment section
below if you liked the video go ahead
and like it if you haven't subscribed to
the channel go ahead and subscribe to me
meet you again in the next video thank
you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>