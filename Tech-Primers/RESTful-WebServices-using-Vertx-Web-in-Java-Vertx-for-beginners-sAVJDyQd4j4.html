<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>RESTful WebServices using Vertx Web in Java | Vertx for beginners | Coder Coacher - Coaching Coders</title><meta content="RESTful WebServices using Vertx Web in Java | Vertx for beginners - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-Primers/">Tech Primers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>RESTful WebServices using Vertx Web in Java | Vertx for beginners</b></h2><h5 class="post__date">2018-02-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sAVJDyQd4j4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">press the bell liken on the YouTube app
and never miss any update from tech
famous in this video we are going to see
how to create restful web services using
vertex if you're not familiar with what
is vertex take a look at my video on
what is vertex and I have compared it
with spring boot but just for the
briefing part vertex is a library which
is used for creating or building
reactive applications on the JVM it can
be run on the JVM or you can create node
application you can create Ruby
application you can use Ruby or Scala or
Kotlin or even Java so vertex is a
library with which you can build
reactive applications for different
purposes so let's try creating a restful
web service on vertex and see how simple
it is I have my IntelliJ open here and
I'm just going to create a simple maven
project if you're familiar with Gradle
you can use Gradle as well so I'm just
going to use maven I'll just select the
quick starter QuickStart here the group
ID which we are going to use is comm
tech primers dot vertex and the artifact
will be a vertex example
I'll just name it as vortex - example
and I will give finish
so the archetype has completed the
generation of the project here we do
have the skeleton as well so we have a
file called app which is under our
package comm tech primers vertex and you
can see that it is just printing hello
world currently so right now it's not
doing anything else and if we go to the
poor maximal we have only the J unit
dependency apart from that nothing else
is there we are going to use vertex in
this project we are going to use the
latest version of vertex which is 3.5
dot 1 and I'm going to use vertex trim
which by default uses vertex core so
let's use the vertex dependency the
artifact for vertex verb is vertex - web
and the group ID is IO dot vertex and if
you know vertex is under the Eclipse
umbrella now so vertex is now funded by
the Eclipse Foundation
I'll do a import project so this is the
only dependency which we need to add we
don't have any initializer like we have
in the spring boot that's why we
manually created the maven project and
we how added the dependency manually but
if there is a kickstart or if there is a
spring initializer kind of UI where we
can just mention the dependencies and
the project gets created out of the box
that would be much simpler
unlike spring boot you won't see any
annotations in vertex because vertex
uses functional style so we are going to
see how to create the HTTP server using
vertex I'll just make it clean here I'll
just remove the hello world command by
default which got added as a part of the
maven archetype creation so I think we
have set right so in order to use vertex
how do we create a vertex instance or
how do we tell vertex that I need to
create a HTTP server we can't do this we
need to create a object of type vertex
and how we can do that is there is a
static block or a default implementation
if you go to the vertex this is a
default implementation or the static
implementation which can be used which
will create a vertex factory see that
there is an implementation created from
the vertex factory so that's what we are
going to do here so we will get an
instance of the vertex from this
particular method now the next step is
to create the HTTP server in order to do
that we can use the methods from the
vertex interface if you go to vertex
there are tons of interfaces there are
tons of methods which we can use it is
not opinionated like spring boot as I
said earlier you don't have to do it in
a single way you can do it in multiple
ways and you can do it in a flexible way
with which you can write code with
vertex we are going to create a HTTP
server that's what we are going to do
here I'll just do a simple HTTP server
create and let's create a object here so
this will hold the instance of the HTTP
server so vertex creates a HTTP server
using the create method
and it hosts the instance using this
instance we can now do whatever we want
the first thing what we will do is we
will assign a port to it because it
needs to run on a port right what we
will be doing is we will assign the port
let's say 8 0 9 1 as the port so this is
the port where we will be listening to
so that we can get records from the
browser or from different web service
and we can process that now we need to
create routers with the vertex web we
can now user use the api's to connect to
the vertex core and we don't have to
manually handcraft how like how we used
to do previously so we can use the
vertex web api so in order to do that
there is something called router so
router is something similar to the
controller which we use in the rest or
the spring MVC world we can create
routers which will be useful in creating
these rest mappings or rest resources so
we can use this option router or router
and we need to provide the vertex
instance and we will just provide this
vertex instance directly here so we
created a router using the vertex
instance by using router dot router now
in the router we can register different
stuff you just need to add different
routes so I'll just add a route for
example I'll just say route and on that
route you can have some different
handlers so we can have request handlers
and response handlers without the wave
api using vertex core now we are using
the web api so you will be using a
handler the handler gets the context so
routing context is the context which we
will have here so this is of type
routing context and let's see what is
there inside routing context right so
routing context will have the request
and the response analyst so you see that
we have the
spondylus here because this is going to
be called when we are going to route
messages so we can do routing context
dot response and this is going to give
the response object let's create a
variable right
so using this response object we can now
add some stuff so that we can push it
back to the UI so this is going to be
the response which we are going to send
it send the user back so on the response
object we can add some headers right so
I'll just add some header information
saying content type as plain text for
now you can have JSON messages you can
have application Jason you can do that
in spring we used to do interceptors or
you have annotations to in order to add
headers to the response however here we
can directly handcraft this and finally
we can end this response by sending a
message back so this ending the response
with a message will be the message which
will be streamed to the UI part or the
caller for now I'm just going to say
response dot end as high tech primers so
that is the message which is going to be
pushed to the UI right so that's all we
are done so this is like the API which
would be called for every request so we
didn't add any loot right so we did not
if you notice here we did not have any
route here
so this basically means any requested
endpoint you hit on this particular
server is going to go and fetch hi tech
primers so let's see that before that we
need to register this particular route
or the router to the HTTP server because
we created this router but we did not do
anything right we need to register this
with the breakfast which we will be
selling correct because this is a
request which needs to be registered as
a response so we need to use the request
Handler and provide this router so we
can use a router except because we need
to
the HTTP server again with the router
you know to add it into the router so we
can use it like this so what we did is
we registered the request Handler here
and we are registering the port where we
are going to listen so this will star
the webserver so let's try starting this
now it should be starting in the port a
zero nine one and the default message
which we are going to get is high tech
primers because we did not add any other
path here it's just basically a routing
which gets redirected to this particular
router every time so this is how we can
create HTTP server in vertex so let's go
and see so the vertex server is up I'll
just hit a localhost a zero nine one
unknown you can notice that it is
returning high tech primers now we need
to add some specific path right I wanted
to see how we can add some path so in
spring we used to add some annotations
or if we are using Jersey you used to
use annotations right how we can do that
in the vertex fold in order to do in
order to register this particular
message to a path we can add it in the
route itself so we can add some route
here let's say hello so this will
register the message to the hello path
so let's restart the server and see what
happened so we created a route
previously without any path that
basically means all the routes will be
redirected to that particular path now
we have assigned a specific path let's
see what happens now
so if i refresh this this was not found
because there is no route isn't it we
have created something called hello if I
hit this hello this should return high
tech primers see that it has returned
high tech primers that basically means
our resources getting hit right we can
even add a logging statements who got
came to hello so that we know it is
hitting here right so this is how you
create a route and you can create a path
to that route and you can use it so this
is like a simple fetch or a request and
response style if you want to have
multiple routes you can do that we can
have multiple routes in fact we can have
multiple message Processing's
for the same route so you can even
register another route with the same
path and then once this particular route
is executed the rest of the routes will
be executed in order to do that you need
to have a different way of doing it
because these are not request responses
right because you need to push the
messages every now one then in order to
do that what we can use is we can use
something called chunk so chunk will
enable the responses so that you can
execute multiple handlers and you can
push the messages back to the UI so this
is make a request and response now if I
want to have multiple routes let's see
right using the response we can set
something called set chunk and make it
as true this is going to stream the data
like your reactive applications where
you we will be pushing the data from the
server to the UI so I have just monthly
set chunker's true
and I'll remove these part because I
don't want to end the response because
if I do a end response it will end
instead what we can do is we can do a
write we can just write into the stream
and still stay I'll just remove these
two
and I'm going to add one more routing
context information what I'm going to do
is I'm going to use the vertex and I am
going to add a scheduler to identify is
there anything else to match so I'm not
going to immediately call the next
router I'm just going to add the vertex
code to say that after this particular
router allow me to go to the next one
so this is like adding filters and going
through one going through a chaining
process right so that's what we are
going to do here
we are using the routing context get the
vertex API or the vertex instance and we
are going to add some timer information
we can add let's say five seconds we can
add a timer of five seconds with a delay
and what we are going to do is we are
going to use the routing context to go
to the next router so this basically
does the search for the next router with
the same name because we have we are
going to create multiple routers right
that's what this is going to do so it is
going to create one more route for us to
be use so let's do that let's create a
name for this particular route handler
let's say handler one the same thing I'm
just going to do
but for a handle it - because I need a
different handler right so came - hello
- I'll just keep the path as same so
that we have the path retain but I'll
just print the messages in a different
fashion and we don't have to have their
response as tion - because already we
chunked it here we don't have to do that
again i attack primers from hello - so
this way it will go to the next router
same way I can create one more
as handle it three as I say call to
handle a three and then I will just do
this but however now I don't want to
proceed right that's what I decide in
that case I can just end it so I can do
a end response like how we can do so I'm
just going to say end end my stuff and
I'll just say ended so I just push a
message say ended
so this basically means I trigger only
one particular URL hello
internally it can go to multiple routes
so you can have multiple rounds and you
can change it using this way so where I
am delaying it for every five seconds
and I am saying that the response is
chunked basically I will send
information in different stream so let's
see what happens when I restart this now
since we have already registered the
router here we don't have to leave edge
astir because these are different routes
or handlers
I hate the same again see that we got
high-tech Primus after five seconds we
are going to get more information from
the server saying hi see this right we
got high tech primers too and also we
got high frequency and me it got ended
within the next five second five seconds
because we have added a response as five
seconds that's what happened so after
five seconds from here it was called
here and since we reuse the existing
vertex set timer it just immediately
called the next one so that's what
happened here so the next thing is how
do I create get and post methods right
so let's try removing all these because
let's not use these I want only one know
how do i do get or how do I know which
is post or which is put right by default
since we did not assign any HTTP method
type it is going to accept everything so
irrespective of whatever type of method
you are going to trigger it is going to
give a response however in order to use
the specific HTTP methods and you want
to have different handlers for each of
them you can directly do that in the
router here we can just add a gate and
we can add like this so you just say
that I don't want to route everything I
just use the gate here so we are doing a
gate if I need a post I can do a post as
well
I'll just create one more handler and I
will just say post
came to post I take primers from post
I just hired some backslash-n so that it
balloons in the next line
right yeah the router is already
registered so this is the gate and this
is the post
let's try restarting it meanwhile I'll
also open postman so that I can show you
the post
you
so the server is up let's do a get now
it should return the gate
saying high-tech Primus
yeah it is high tech primers resource
not founder we did not end right I
really should have ended that is a
mistake which I did right I will just do
the end because I don't want it to go
any further
it was just finding out the next
available router but it was not
available let me restart it
so that we have a clean code there and
also same way in the poster I think we
have again the routing again I'll just
do in here as well
all right cool so server is up already
so the unlike spring boot where spring
boot takes lots of time to load
everything on onto the memory and it has
lots of stuff but vertex doesn't do that
because it's just a library it's not a
framework as such I'll hit the get
option again yeah we are getting the
high tech primers we need to do a post
in order to do that I will use the
postman here let's use a 8:09 one slash
hello this is going to do a post we
should be seen yeah high tech - from
post see the router which was present
here high tech primers from post cut
trigger so we hit both the hello and the
post so this is how you can
differentiate get and post if I do a put
it is going to give me an error because
we did not add any router see this
resource not found because it is not
there right so this is how you can
define different mappings the HTTP
method mappings using vertex now how do
I pass variables to this particular path
and I want to print that right I can do
this I can just pass it as hello and
then I can pass a name to it so similar
to how we use to pass it in spring or
any rest path right we can pass it in
the path and you can use the routing
context which we have here because we
are getting the response from there
right now we will be getting it from the
request as I said earlier this routing
context as acts like an application
context in the spring world with which
you can use the request and response
let's do the routing context dot get
gone dot request dot getparameter we
need to get the parameter called name
that's what we added here right and
let's try naming it as name and I will
pillow print out the name as well here
so hi I'll just add that name
so we should be able to get the name let
me restart this guy
the server is up now if i refresh it
should not work because it is expecting
a path and that path is nothing but name
so let's path past Peter yeah it says hi
Peter if I part Pazza
tech primers it should say hi tech
primers yeah so this is how you can pass
the path parameters if you want to pass
any Jason you can do that as well if you
notice here we created a router and be
assigned the router with different HTTP
methods however if you want to restrict
the HTTP a router to allow only one type
of method we can do that we can use the
method here
we can use the route and then say method
and we can restrict it to a specific
method for example let's say get we can
do this we can route it to a specific
method if we don't want to allow every
one to use the same router and use
different HTTP mappings so you we can do
that as well
there are also regex options available
in the path here we can have reg X here
we can have a reg X pattern matching and
we can have a single implementation for
the handler for different paths before
ending the video I just will show you
how we can consume Jason messages from
this like in the post we can have a
consumes option here like how we do the
annotations in spring we can have like
different methods inside the API because
the API is so rich that it provides
everything in a functional style so if
you see here we are writing everything
in the functional style it makes sense
right to read it
unlike spring where we don't know what's
happening under the hood here we are
telling the vertex API or the vertex
engine to say do these for me so I'm
going to add the consumes option as
let's say star slash Jason I'll just add
it as Jason this basically means it is
going to consume messages of type Jason
so I need to push a JSON message to this
particular server let's restart this and
see what happens now
I was pushing a text message there and
we'll see how it works now right so let
me go to post I'll go to post and in the
header
I have application Jason if I trigger
the Jason it should work because it is
expecting Jason see that it worked
if I pass something else right let's say
I pass text slash HTML if I pass this it
should not work see that the vertex API
or the vertex server is now not allowing
me to trigger text HTML because my
consumption part is defined as
application type as JSON so you can push
JSON messages from here right so this is
how you can write a restful server using
vertex C that right it is very simple
iidon't how to get to know any
annotations as such the only thing is it
is not opinionated and you can have
methods so you will have lots of methods
under the rich API provided by vertex
and vertex is very fast as you have seen
whenever I tried restarting it it came
up very quickly because there is no
framework which is running like spring
boot which is doing annotation
processing or which is consuming or
which is doing a component scan of all
your jars there is nothing like that all
right so this is how you can use vertex
to create a restful web service what I
will do is I will just push this code
into a github repository you can take it
from there for reference if you liked
the video go ahead and like it if you
haven't subscribed to the channel go
ahead and subscribe to it meet you again
in the next video thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>