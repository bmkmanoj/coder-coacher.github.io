<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Reactive Spring | Router Functions in Spring WebFlux using Spring Reactive Mongo | Tech Primers | Coder Coacher - Coaching Coders</title><meta content="Reactive Spring | Router Functions in Spring WebFlux using Spring Reactive Mongo | Tech Primers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-Primers/">Tech Primers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Reactive Spring | Router Functions in Spring WebFlux using Spring Reactive Mongo | Tech Primers</b></h2><h5 class="post__date">2017-08-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QsgSpFcUUec" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to tech grandmas this is the
continuation video from the previous
example which we saw with respect to
spring reactive programming so if you
haven't seen that particular video go
ahead and see that because this is just
a continuation video from the previous
video so you might not understand any of
it if you are starting with this
particular building so I would strongly
recommend you to see the spring reactor
first video where we created a project
with employee employee band employee
positi and I can see here this is the
project structure so you can get the
code from the github repository so I
have pushed that to the github
repository you can check out the course
from there as it if you haven't
succeeded in creating the previous
example you can check out from there and
then you can continue with it so what
I'm going to show is I'm going to eyeb
it's the spring MVC framework of how we
created a rest endpoint here how we
merge stuff here right so I'm going to
dismiss bring em easy way of pushing the
data using the resource instead I'm
going to use the new style which is
going to be the router function style so
that is what spring has creating the
spring 5 really so in the spring file
famous curved spring has created
something called router functions ok I
am going to use that to index and data
so what I'm going to do is I'm going to
create a new config file type so I'm
going to create a config folder I just
remove these also there so let's do that
so I'm going to say reactor
console right and I'm going to rotate it
with configuration so that spring board
by default loads this so inside this I
can create a number of beams so I'm
going to say beam and this beam should
be of type a router functions so router
functions are the new interfaces or the
new implementation inside the spring 5
frame book so if you see here outer
function is a new interface ok so let's
go and check out a function in seawater
cough so you have lots of matters here
and the object which
browser function expects is effect
server response this server response is
the interface from the spring web
reactive project where you have a
function styrofoam O's for building your
responses so you don't have to go behind
the imperative style where we had been
doing lots of coding on imperative
approach so now spring has come up with
your reactive approach for returning
using the server response so we are
going to return we are going to have a
rotor function and we need to create
some routes right we need to create some
routes so in order to do that what we
need to do is we need to create some
routes so using the routers function if
I see here there are two things one is a
router function and there is a router
functions okay
the router functions are nothing but
abstract classes which are like there
are similar functional abstract classes
where you can use that for as a helper
function basically so these are just
helper functions where you can use these
for doing some operation so I am going
to use the router function because in
that you can't add the alt so I'm going
to add a route and what kind of round so
a route is going to be it is going to
have the implementation of the of the
rest endpoint so I'm going to add the
rest endpoint so in spring MVC what we
did is we add the Wreckers mapping or
the gate mapping to add it so here we
are going to use something called access
predicate okay Dec word square decades
is another abstract class then you just
say I need to do a get ok or a post or a
put you can do so in our case we are
just having cater method so I'm just
going to say get and I'll add the routes
like this so I'm just going to say rest
employee slash all right and the second
argument is nothing but e data which we
pushed right so what we are going to do
is we are going to create a separate or
you call a class ok we are going to
create some separate class called a
router handler so that using that class
they can get some data here so I'm going
to say router handler start all
right I'm just going to do this so that
we can get the data directly right so
I'm going to create this class here so
this is going to be some service classes
or a component we can have anything I
just created all sacred and I'm going to
annotate it with add component so that
this gets injected before and Ottawa
works out of the box right so what do we
need is here right so we need to create
a gate method
so I'm going to create the method call
get on okay and this needs to return an
object of type mana so if you go inside
this route it is going to expect
something called a predicate and a
handler function right because that is
what we are going to write so we are
writing a handler function or the
implementation basically that we need to
handle this right so I'm going to create
some implementation so let's go and set
all and this needs to return home on oh
right and the mono should be of type
server response because that is what
that they expect okay
so just having some mono okay and this
get your breakfast which is called this
server exists because that is what comes
to escape so from the server of course
we have to get the data because the ID
is not faster see all or the argument is
not passed at all right we need to get
the arguments and the value so that so
we get it so we get the request and the
response so we got the request and we
are going to send the response so in
order to send the response we have to
create a response object right so server
response is an abstract class right
sorry it's an interface and it has lots
of default method so now I frankly like
it's very confusing now between the
interfaces and abstract classes because
there are so many utility methods inside
interfaces if you notice here I got just
got confused with the okay right so for
example if I see this it looks like an
interface or a utility method but it is
an interface
it looks like an abstract class or a
chelating method but it's an interface
it's very confusing within a mr. Java
style right so and Java nine is it's
getting more convenient so so let's
let's not talk about that here so I'm
going to create a server response at ok
right and we need to send a response
back right so the response is going to
be inside the body isn't it right so
what do we need to send in the body so
what kind of message we need we need to
return an object and and let's say and
this point will be not and also what is
the type of object so I'm going to say
employee that is the type of object
which we need to return right and we
need to create the data right so we need
to have the repository here the word
employee repository because that is
where we need to get the data from dot
find all right so because we this is an
all so I need to cater find on so this
is going to return a data of all the
employees and what we need to do what
else we need to do so we just need to
return this particular thing so I'm just
saying find all body and how do I close
it and this is it essentially the same
but it is a semicolon here right ok
there is an unnecessary braces here
because this is an argument to the body
so if notice here this particular what
we are doing here and they get all this
we are using the server response and we
are doing a functional cell so this is
the Builder style again so you just say
server response not OK
once it is OK which is going to return
200 so one thing is ok I am going to
return a body what is the body going to
have it is going to have all the
employee details ok
using this find all I'm just getting the
mono and then I am converting into
object of type employee and then I am
just pushing it as a mana because that
is going to be the response ok so this
is how we push the response back and if
you notice here here you can directly
use these response because this here we
are going to have the
server requests okay and that server
request is now going to get handled the
light beam that was here so okay so that
is what is going to happen here right
so instead we can even do this way so
you don't have provide things lambda
expressions complexing I'm just going to
say a router handlers : : get all right
and I will return the return and then
give you these things okay and this is
going to be comma
what else do I need it is going to be a
sampling or I need to return this guy
directly okay so if you notice here this
is one group which way and created I'll
just move this inside here okay so this
is one route which we have created here
right so we need to create multiple
groups right so what I'm going to do is
I'm going to add some more rules so I'm
going to say add some more rules so that
I can work on it so I have great a
wonder standpoint now I'm going to add
some more rules so this is as I said
this is going to be a builder type of
pattern so I need to add something
called an group okay and we can now
start doing the same thing so we can
just say request predicate dot get right
Andres slash employee - ID so this is
this the fun begin so how will I pass
this ID now right so I'm going to say
again through handlers and then I'm
going to say it ID that's it right so I
need to create this gate ID method so
I'm going to create another do so and
this is going to be written Amano
if you notice here it is all of the
automatically created until it is
creating it for me now we need to do a
employee repository door find by
actually if I have if I had written a
service
I could have reused that service inside
here but I feel lazy in the previous
video but now it's just showing off way
and just writing the same code again
reduces of news but yeah so yeah cool
it's just for the example so don't write
coding like this in your production rate
so what I'm going to do is I'm going to
get the variables from the servlet
request or the server access so if you
notice here what I have done here
sorry so what I have done here is I just
created a path variable random and just
saying it's called employee ID and I
need to pass this employee ID right so
that's what I am doing there okay
this is going to be the employee ID so
now we need to create a server response
right I'm just going to say I'll just
come this particular link so I'm going
to say the similar kind of thing which
would be lot you wrote here so server
response dot okay I am okay now
I need to give the body okay inside the
body now I need to do the same thing so
employee without fine by ID okay H n n
PI ID now I need to return this of type
employee okay that's it so that is it so
I can notice here it's all good so we
wrote the second test in point so this
is how we write the resources like how
we did in the spring MVC this is a way
to inside the router functions or the
router handlers basically so that outer
function if you see this is a how we are
adding the routes here okay and I'm
going to add one more route
okay that is going to return the events
for us okay I am going to say get even
and let's create the matter same same
stuff I'm not going to do anything so
it's just going to I'm just going to
copy this guy same way right but I did
some more things you're right instead of
writing this guy we set up just writing
the fine by ID period lots of stuff in
the resource ID necessary so if you see
here in the resource what we did is we
did lots of stuff here I'm going to just
work operate this code so I should have
done this ever serving so that I could
have reused it but for simplicity I'm
just going to reuse the same coffee I'm
not going to do anything here all right
you see this is gone to eternity
so this is gone to a ton of flux right
instead what we can do is I can do
something or to say what is a certain
it's expecting something right the thing
to tank statements always do are its own
right
and this is of type employee event that
gee it's not an employee that is an
employee event isn't it
yeah so that was Apollo code so let's
get another bowl of records spaces okay
so see here there are two fluxes which
we saw in the previous video so we are
creating a artificial intelligence in
delay so that we can see how the streams
are working and we just copy cancel the
same for nothing else just that the type
is the employee event so that is what I
have gone over up here so that is it so
this is how we write a router handler
which can be used inside a router
function so if you see here this is how
we write a router function right so this
is newly introduced inside the spring Pi
framework if you notice in this wing
size there are router functions there
are HTTP handlers
there are there is more on flux which is
coming over the box that are much more
features as well but yeah these are the
major ones so this is how we have to
write the router function so let's go
through the resource and then just
comment it quickly okay I just come in
this fourth class right I just commented
this whole class and then I am going to
run this particular program so I already
have the MongoDB running because in the
previous video we created a friend we
just started running it so I haven't
stopped it yet since I recorded it
continuing and continuing as a
continuation so I can stop it so that is
why I haven't gone and started it right
so that said the process is coming up so
if you notice here I just reacted what
we did in the router function so we had
to create a router function of type
whatever it is because we do not know
what type it is because we have two
different types one is going to return
employee the other is going to return
employee event okay so and then we are
creating a class called router function
router handlers so that it is like a
service class and from that service
class we are using their methods so that
we can use them inside of the functions
and this methods are going to return the
server response from vericsson and it is
going to use the function of time we are
for example if it is get all we are just
saying okay and body type and whatever
and same before gate ID we have to do
ah stuff here I can notice here I forgot
something similar as well here so in the
resource they created a content type
here right which produces media of type
event stream so we have to do the same
thing here access so which I forgot now
I just remembered so we have to add
explicitly the content type so we can
have to add a content type here I'm just
going to say media type dot text even
string value okay so whatever we had
here I think we have to do this way it's
going to be a stream like so it's just
going to say text even string right so
we have to add a content type
and we have got it because this is going
to be the protein specific let me read
we started so what we start need right
so I am just having the same code which
we had in the resource ok just that the
way of defining the rest endpoints are
completely different
using router functions you have to
define like this you have to define
using rotor function if you want to get
the path variable you ought to get it
manually so I just said a path variable
and make water click so this is how you
have to get it okay somebody without the
functions so if you note in here with
the server has come up let's quickly go
through the standpoint and see if it is
good
so localhost 8 8 0 2 because that's the
same resting point which we had employee
slash all so this should return all the
employee but why is it not let's see
what is the application of properties 8
0 it - sorry it is 8 0 80 right so yeah
we got the data so I'm going to use the
ID to get the ID type in Yoda say this
is working the router functions are
working they had disability resource so
here is the resource and they show you
once so resources commented if you
notice here the source class is
commanded and nothing is working so we
are getting the data via the router
function and if I just do this it should
get Peters data and if I say even this
should give the given string so
hopefully if I even seen books we know
that the data is pushed as a part of
stream so if we note again this is using
the reactive streams and pushing the
even Steve I haven't refreshed the page
the response was successful and we are
getting the data for every event read
for every two seconds so that is what we
did as part of pushing this events get
events right so this is how we use the
reactive stream to create some events in
the server side so that is what I wanted
to cover and in this particular video
you would have seen how to create your
route router function so how to create
router function using the new router
style so this is the router Stein Vegas
Lee swing was using this thing in
business and if you don't like the
string mbz style you can go ahead with
this you can create routes by this kind
of style where you can just add some
route handlers and then tag it to them
via the coast whatever they receive and
from that request you can just create
the response using the build a pattern
and you can stuff the data into the body
and then push it back to the router
right so that is what we add the rows so
you can add route so this way you can
see all the roads in a single place it
is slightly different on the spring mvz
sense because the string and way these
are all like an addiction base but this
is not annotation base it's all purely
functional style it's all purely
function based so you don't have to
worry about annotations and processing
those annotations and stuff like that ok
so that is the new stuff which cut out
again spring file in the previous video
feed what is mono so mono is like a
single data stream if you want to just
have a data which is going to respond
only once back you know that it's going
to be a single data you can use mono if
you want to have multiple data to be
strained you use flux in our case it's
going to be mono only but it is going to
be a server response which is going to
return a flux of data okay so that is
what server is doing here if you see
here it is still pushing the data so
this is going to be the server side so
this is how you create a server side
reactive thing is inking string reactive
with flux the flux is the ER dependency
if you have seen the for maximum so that
is the job dependency which we have the
other clock the string boat start of FX
which is nothing but spring that flux it
is going to give all these reactive one
big one on the flux capabilities inside
the springboard application ok so as
usual this code will
in the city have repository so I will
add this as an example to and the other
previous one as an example one you can
go over and check it out so if you want
the ring it is in the description below
and it will be popping up individualism
you can if you want directly go through
the link you can just check it out in
the description and you can check out
and then fry it up make sure the MongoDB
is started and also check it the port
number is the default one or if it is
not default or word and change it okay
so if you liked the video go ahead and
like it if you haven't subscribe to the
channel go ahead and subscribe so if you
want me to make any similar video or any
particular video on any topic code and
suggest that in the comment section
below I'll just check that and then I
will try to do some videos on that topic
whatever you have suggested so in the
next video what we will be seeing is
going to be creating some client-side
handling for these reactivation so what
we did now will be just great to the
server and then it will just seeing the
data right so in order to handle that in
the client-side I will be handing it so
that is what we are going to see in the
next video so how you can handle the
screen values in the client-side using
this spring reactive client okay
that's the for this particular video
meet you again in the next video thank
you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>