<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Distributed log tracing in Microservices using Spring Cloud Sleuth | Tech Primers | Coder Coacher - Coaching Coders</title><meta content="Distributed log tracing in Microservices using Spring Cloud Sleuth | Tech Primers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-Primers/">Tech Primers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Distributed log tracing in Microservices using Spring Cloud Sleuth | Tech Primers</b></h2><h5 class="post__date">2017-04-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VHTli6KQO54" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to tech primers in this video we
are going to see what a spring cloud
sleuth so sprinkler sleuth is an
implementation of distributed tracing
solution which spring cloud provides so
if you are familiar with the
micro-services design pattern right so
it is very difficult to trace the logs
across microservices so spring this
solve a third solution using the spring
cloud sleuth so if you are familiar with
Zipkin hedge trays or dapper so it is
almost similar to that the only
advantage which spring cloud sleuth
provides is you don't have to write any
code for it you just need to add the
dependencies into your code and it takes
care of the traceability automatically
so I'll show you a demo of how this
works and in the next video we can see
how to implement that using the code so
let's see the pivotal Cloud Foundry so
this is my deployment so I use the
pivotal web services for the deployment
so if you are not familiar with pivotal
cloud foundry deployments so you can
check my other videos I have already
done some videos on that so I have two
applications one is called the user's
client one is called the user server so
the user service is going to be having
the data so user client will do a call
to the user service and get the data
back ok right now I don't have any data
so it will be empty so I'm going to see
I'm going to show you how to see the
logs across these micro sources ok so I
have two consoles here so this is the
console for the user's client and this
is the control for the user service so
these two or three logs so I don't have
any central place where the logs are
streamed right now I am using the
pivotal slog aggregator so that is what
you see here so I am going to show in
two different tabs so what I'm going to
do is I'm going to hit the URL called
users slash all it is going to this URL
is going to hit the user service and get
the response back so let's see what
happens so it got empty response so when
we heat the user slash all so it did a
call if you see here this is the
client-side logs so it acts something
called trace ID and this pan ID so if
you see here this is DJ ID standard
is also the same let's go to the service
side
they use a service and see get race ID
is doesn't so if you see here the
Treasury has come here so the same trace
ID is present in both the services
however there is something else called
span ID so I'll cover that a little bit
later so if you see here so the client
has got the trace ID the same trace ID
is now passed on to the server side of
them so that you can trace across the
micro services so string close the
sleuth uses the concept of trace ID and
pan ID so trace IDs for tracing a
particular request from end to end
literally you're traversing through four
or five microservices so in that case
the trace ID will be input however
sanity will be helpful when you are when
you are tracing across a particular
record so across the microscope so this
panel you will be specific to a micro
service so if you want to trace the logs
in that particular micro service span ID
will be used and if you want to trace
the logs across micro services then this
panel is a trace head you will be useful
so span ID is within the Microsoft trace
ideas across micro services okay so that
is how spring cloud sleuth uses it so
how does it send the trace ID and panel
ease it sets t straight ID and span ID
in the header so if you see in the log
you can set you can see the trace
audience panel D being set so you can
see here this is how it is set so so
that the logs can just pull that and
then displayed so that is our spring
closed flute does the distributed
tracing okay so same way you if you go
to so how do you add how do you add the
dependencies you just add the dependency
call sleuth so it takes care of adding
these span ID and trace ID automatically
so that way you will see in the next
video so that's it for this video
meet you again in the next video thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>