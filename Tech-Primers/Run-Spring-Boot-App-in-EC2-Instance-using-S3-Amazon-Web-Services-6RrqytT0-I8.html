<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Run Spring Boot App in EC2 Instance using S3 | Amazon Web Services | Coder Coacher - Coaching Coders</title><meta content="Run Spring Boot App in EC2 Instance using S3 | Amazon Web Services - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-Primers/">Tech Primers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Run Spring Boot App in EC2 Instance using S3 | Amazon Web Services</b></h2><h5 class="post__date">2018-03-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6RrqytT0-I8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in the last video we saw how to create a
ec2 instance from the console inside AWS
in this video we are going to see how to
deploy a Springwood application into the
ec2 instance which we created using a
window image
press the bell icon on the YouTube app
and never miss any update from tech
primers as you know this is the AWS
management console where we can navigate
to different services right now if you
see if I go to the ec2 instance in the
previous video we terminated a easy to
instance and if you now go to this
particular instance you can't see that
instance because the terminated instance
will be now hard pushed from our UI now
we can create a new ec2 instance and get
it started
meanwhile I'll just show you what
application we will be deploying so this
is a small spring boot application it
doesn't do any fancy stuff it just has a
ch2 database as a dependency and it uses
spring JPA
to add some users into the database so
this is the schema for the users the
users table has ID which is an
auto-generated value it has name team
name and salary and I have a controller
here the rest controller which is having
three different end points one is called
all under users one is called a slash
name you can provide a name and you can
get the value of that particular user
the users of that particular user detail
of that particular user and finally we
have a post mapping with which we load
the data basically it will create a user
when we provider Jason with he uses
schema ideally it should have been named
as user I don't know that time I had
create it as users so I'm just reusing
this project which I had created
initially for some other video I'm just
reusing this project what I had done is
I had just created a create this project
opened this project and I did a maven
build so if you see here I just did the
maven build now and it has created a
file so it has created a jar file here
if you see here it has created the jar
file and this is the jar file we will be
running in the AWS instance in order to
bring the spring boot apllication
up so we are going to push this jar into
the ec2 instance let's see how we can do
that so before going into the ec2
creation we can go to s3 so s3 is like a
storage space where we can store some
stuff
so I'll be storing the file inside the
s3 storage so you can create a bucket I
already had created a bucket called tech
primers you just need to click on the
create option and then it just asks for
basic information I just said non-public
for now for this particular folder and I
already had a jar if you see here what
I'll do is I'll just delete this
you
there is the option to delete I can do
delete here right I'll just delete this
object because I just tried previously
by uploading it to the s3 object store
and I try downloading it it from the s3
on my ec2 instance so that is how I
tried previously now I will just upload
it again so that we can see I'll just
click on the upload option we can just
copy this jar directly
so I have the spring boot demo project
and the target is where I have the jar
file I'll just
right I don't this I just maximize this
let's say next once I click on the next
option it just asks me to provide access
to the file which we uploaded so I'm not
going to add any access right now what
I'll do is I'm just going to concentrate
on deploying my application onto them
ec2 instance so I'll just give public
access right now I will just say give it
a public access grant public read access
to this object so that way we will be
able to download this object directly
from the ec2 instance without giving any
key or credentials so we will see that
in the later video so let me do the next
option and then we can upload this if
you click on the upload option it will
just start uploading the jar file which
we created so if you see here it's just
getting uploaded so meanwhile what we
can do is we can create a ec2 instance
what I will do is I will just fast over
this video so you can see me create it
but I'll just fast forward this video so
that it is faster than we can get it
quickly
you
one thing about the images we are going
to use the Ubuntu image but if you are
using Amazon image by default it
provides Java Ruby Perl PHP my sequel
post we sequel all these are included by
default and also the AWS SDK so all
these are included in the Amazon Linux
but I am going to use the Ubuntu Linux
and show you how we can download Java
into that particular machine because we
need the Java Runtime right to run the
spring bootie application so that is why
we need to install Java right now it
doesn't have Java Ubuntu just is a plain
Linux version so I'm going to use that
you
meanwhile the s3 object store has
uploaded a jar file which we just pushed
so we have the jar file already in the
s3 object store we can now access this
from the ec2 instance by just
downloading so if you use this
particular URL even you can download it
if you are trying this program what you
can do is you can reuse it so I'll leave
this link right
you can Lee you can use this link to
download it directly and then try it out
so you can directly you download this
file onto your s3 instance and then you
can just bring up the application and
see whether you are able to do it or not
so meanwhile are easy to instance is
running if you see here it is showing as
running and let's try connecting to this
instance from the local I already have
the certificate downloaded based on
yesterday's video and just reusing the
same certificate in the same data center
so let's go through the terminal client
so I have the certificate already here I
just have the certificate here so I'm
just going to connect to the ec2
instance using the SSH command so I'll
say yes so this is a new ec2 instance
but with the same certificate we can
connect to the instance so we are now
into the machine so what I'm going to do
is I'm just gonna say clear now that we
are logged into the ec2 instance we need
to download the Java version because by
default I won't be having Java if I do a
Java - version this doesn't have Java
and you can see that the sudo command
says please use the default Java version
or any other Java version which is
present here so we can use any of these
but what I will do is I will use the
Java default JRE version but since this
is the first time we have logged into
the Linux machine what I will do is I
will update the package manager
so I'll just say apt update so this will
just update the
with the latest version of Ubuntu and
the respective software's which it
requests so I'm just doing that I'm not
doing anything else and now what we can
do is we can directly download the
default JRE version which was mentioned
so we can do a sudo so in order to be
clear I'll just do it clear we should do
sudo apt-get instant and we need the
default je version this will
automatically download the default JRE
version which is coming from the Ubuntu
image it is customized for the Ubuntu
Linux machine so will be directly doing
a why and this should be installing Java
in our machine so if you see here all
the packages are getting downloaded and
this should be installing Java into our
machine in in the next few minutes
installation is completed let's try and
see if the Java version command works
now yep so the Java version which has
got installed is open JDK and the
version of Java is 1.8 151 patch so this
is the version which got installed
currently and that is the default JRE
version which is provided for the Ubuntu
Linux right you can see that this is the
version we just built for the Ubuntu VM
so that is what has been instant and we
are in the Ubuntu VM which is a 64-bit
server so now what we have to do is we
have to download the jar version which
we uploaded to the s3 right so what we
can do is we can copy this link you can
also use the same link you can also same
use the same command
so I'll just exposes a it has public
until that particular VM or until I
delete that file later on I don't know
when I'll delete but still you can use
that I'll do a w get W it is like
pulling a file from a URL so you can do
a W gate and then I just give the URL
and then I just say put it in the same
folder so this should download the file
and you can see that it caught
downloaded already and you can see the
file under my home slash Ubuntu you can
store this file anywhere you can write
custom scripts to bring this particular
JVM up what I'm going to do is I'm just
going to use the Java basic command Java
- jar and I'm not going to do anything
fancy so let's so I'm just going to use
Java
- jar and the name of the jar so this is
going to bring up the spring boot
application automatically right because
it has the embedded Tomcat this is going
to bring up the web server
under the port 8080 because we have not
overwritten the port so it should be by
default 8080 so let's wait for the
spring good application to come up and
let's see what happens and it notice
that this is already inside the Amazon
infrastructure this is not running
anywhere outside we are inside the ec2
instance and we are starting the
Springwood application now the JVM is
sucked up finally in 19 seconds and it
is by default hosted in the port eight
zero eight zero now how do we access
this part
our web service we can go to the ec2
instance and we can get that name of
thee so so if you see here the name of
the server is here and we can connect to
this particular URL with the port 8080
with which we just started this over now
when I hit it should show some error
page yep this is the error page which
comes from spring boot and you can see
the spring boot logo let's go to the
code and let's see what are the
different restrain points we added right
so we added a user's we just added one
called users and then there is a alt
which will query the data from the
database and show us let's try that now
first because there is nothing right
it's a in-memory database so there
should be nothing I just hit the user
slash on and this is returning me an
empty response see that there is an
empty response and if I pass Peter then
also I should not have any data it's
empty now I need to load some data in
order to load it I need to do a post
mapping so I already have the postman
here I just opened postman here I'll do
a post I'll just select post and now I
need to get the URL right so I have the
URL I just paste the URL here it is
going to be HTTP slash and the port
number is colon 8080 slash users so that
is where we will be loading the data
right so that is the path which is
mentioned here so it is under users and
nothing under that so we can directly
load the users here and what are the
fields which are there inside the user
schema it is named team name and salary
ID will be automatically generated so I
will not provide that so let's go to the
body and I'll just enter the raw and
I'll mention it as JSON type so that we
can type a jason here the first one is
name so I'll add the name as Peter the
next one is team name let's say Peter is
from the development team and his salary
is of type integer so let's take it as
12,000 now this request needs to be sent
to the ec2 instance the ec2 URL you can
also try
accessing this URL if at all if it is up
I think mostly I will just stop it so
that I can save some money for the rest
of the year because whenever you are
running an instance you have to pay for
every hire so you will be charged on a
Harney basis so I'll just keep it
stopped when I am not using it so I'll
just stop it later on so don't try this
particular you are so I'll do a send now
once I do a send this request will be
going to the spring good application but
unfortunately if you see it says nothing
is there okay this is HTTP I think I
have only HTTP in my yeah it is HTTP
instance it's not HTTP so I'll just
remove the HTTP
and let me trigger yup so the response
is with the ID generated so what we did
is we just queried the database again
for the particular user and then we
provided the response back
so this basically confirms that my data
got inserted however let's do that from
the browser and confirm if Peters
information is getting displayed see I
already have the user slash Peter here
I'll just refresh it now Peters
information should come up I got it here
so this is specific to the user so if I
do all this should provide all the users
which are currently there so right now
only Peter is there let's try adding Sam
and Sam is from the operations
and his salary let's say is ten thousand
I'll just hit it again now if I go to
the URL again and refresh it this should
return me Sam's data as well so this is
coming from the ec2 instance and this is
from the instance which is there here
see here there are some logs here there
are some error because I think we
provided some wrong HTTP instance we
just provided HTTP but it was HTTP so
that was this error stack and you can
see that before hitting find all be
everything find all right so yeah this
is some long which we have added in the
user controller so that is what is
getting printed so this is from the ec2
instance and we are querying the ec2
instance and this is a small Springwood
application similar where you can deploy
your application as well to the ec2
instance note that the space which is
there in the instance is temporary so if
you have something here in this machine
and if you terminate this particular ec2
instance these files are gone now and
you will have to copy it again from s3
bucket so s3 is a place where you can
store all the files and then you can get
it downloaded to any of the easy Tunes
and so if I create a new ec2 instance I
can do that
there as well I can just download it
there and then just pawned the
Springwood application all right so I'll
just summarize what we did what we did
as a part of this video is we went into
the s3 console the AWS console and
created a s3 bucket and we uploaded the
jar which we already created which is a
spring boot application which has some
basic functionality of adding and
deleting and retrieving users from the
h2 database inside that spring boot
application we just uploaded that jar to
the s3 object store inside Amazon we
just did it from this UI and we went to
ec2 and we created a ec2 instance for us
be connected to the ec2 instance from
the terminal here and we downloaded that
jar which we upload to the s3 using the
W gate we downloaded it meanwhile we
installed the java version inside this
particular linux image so inside the ec2
instance we install java and we
downloaded the jar file and then we did
a java jar the third project
fella and the spring good application
came up once it came up what we did was
we used postman to added some data so we
just added using the post once we added
it we were able to retrieve it using the
user slash on under it retrieve the user
information here so this is how you can
deploy a spring boot application into
AWS I hope you guys understood how we
can do that if you have any queries do
let me know in the comment section below
and if you want me to make any video on
any specific topic do let me know in the
comment section below if you liked the
video go ahead and like it if you
haven't subscribed to the channel go
ahead and subscribe to it meet you again
in the next video thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>