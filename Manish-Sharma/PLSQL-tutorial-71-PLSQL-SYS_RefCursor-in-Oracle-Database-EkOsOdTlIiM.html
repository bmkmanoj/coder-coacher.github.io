<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PL/SQL tutorial 71: PL/SQL SYS_RefCursor in Oracle Database | Coder Coacher - Coaching Coders</title><meta content="PL/SQL tutorial 71: PL/SQL SYS_RefCursor in Oracle Database - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Manish-Sharma/">Manish Sharma</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>PL/SQL tutorial 71: PL/SQL SYS_RefCursor in Oracle Database</b></h2><h5 class="post__date">2017-10-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EkOsOdTlIiM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">A ref cursor which has fixed return type is
called a strong ref cursor and the one that
doesn’t have fixed return type is called
a weak ref cursor.
We have discussed both these types in the
previous tutorials.
Apart from these two types, we have one more
type that is SYS_RefCursor.
We are going to learn about it in today’s
tutorial.
What’s up internet?
I am Manish from RebellionRider.com and I
am back once again with another PL/SQL tutorial.
In today’s tutorial we will learn about
PL/SQL Sys_Refcursor in Oracle Database.
So without wasting much of your time let’s
start the tutorial.
Sys Ref cursor is a predefined weak ref cursor
which comes built-in with the Oracle database
software.
As we saw in the previous tutorial that creating
a weak ref cursor is a two-step process.
First you have to create the weak ref cursor
type and then you have to create a cursor
variable using that ref cursor.
Sys ref cursor can save you from all this
hard work.
When using sys ref cursor, you just have to
create a cursor variable and nothing else.
Sys ref cursor completely minimizes the first
step where you create the weak ref cursor
type.
Let’s do an example and try to learn how
to create PL/SQL sys ref cursor in oracle
database.
We will do the same example which we did in
the last tutorial but this time we will be
using the sys ref cursor instead of weak ref
cursor.
Let’s do it then.
SET SERVEROUTPUT ON;
DECLARE
cur_var SYS_REFCURSOR;
f_name employees.first_name%TYPE;
emp_sal employees.salary%TYPE;
Here we are.
If you compare this declaration section with
the one we created in the last tutorial, you
will notice that everything is same except
for the missing weak ref cursor declaration.
And that is because of the sys ref cursor.
As said above sys ref cursor is a predefined
weak ref cursor.
Which means it is already defined in a standard
package in your Oracle Database software.
You don’t need to declare it in your code.
You simply have to write the name of your
cursor variable.
It can be anything you like.
Followed by the reserved phrase “SYS_REFCURSOR”
and then the semicolon for ending the statement.
In our case the name of our cursor variable
is “Cur_Var” This variable will work in
the same way as any other cursor variable
of weak ref cursor type.
One more thing, I have seen people doing this
mistake so I think it’s worth mentioning
here.
There is no space between ref and cursor.
It is a single word “RefCursor”.
So make sure to write it as it is shown to
you on your screen otherwise you will get
an error.
Now that we are done with the declaration
section.
Let’s write the execution section.
BEGIN
OPEN cur_var FOR SELECT first_name, Salary
FROM employees WHERE employee_id = 100;
FETCH cur_var INTO f_name, emp_sal;
CLOSE cur_var;
DBMS_OUTPUT.PUT_LINE(f_name ||' '||emp_sal);
END;
/
Here it is.
This execution section is exactly the same
as that we wrote in the example of the last
video.
Anyways, let me quickly explain it to those
of you who haven’t watched the last tutorial.
This section has 4 statements.
First statement is the OPEN-FOR statement
using which we are opening our cursor for
the SELECT statement which is returning the
first name and the salary of the employee
whose employee id is 100 from the employees
table of HR user.
Next, the second statement is a FETCH statement.
In this statement we are fetching the data
from the cursor into the variable f name and
emp sal.
The third statement is the CLOSE statement
which will close the cursor and relinquish
all the resources held by it.
And the fourth statement is an output statement.
This statement is displaying back the first
name and the salary of the employee which
we fetched using our cursor0.
That’s all we have in this section.
So, if we compare this code with the one we
saw in the last tutorial, everything is same
except, here we didn’t declare any weak
ref cursor.
Let’s execute and see the result.
But, before that I request you to give this
video a thumbs up, and subscribe to the channel
for more interesting videos, if you haven’t
already.
That being said now let’s execute and see
the result.
Here we are.
Now you must be wondering, why we need a weak
ref cursor when we have a sys ref cursor?
Go ahead and check out the blog whose link
is in the description to find out the answer.
That is the tutorial on how to create PL/SQL
sys refcursor in Oracle Database.
Thanks for watching.
This is Manish from RebellionRider.com.</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>