<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PL/SQL tutorial 73: Bulk Collect with SELECT-INTO statement in Oracle Database | Coder Coacher - Coaching Coders</title><meta content="PL/SQL tutorial 73: Bulk Collect with SELECT-INTO statement in Oracle Database - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Manish-Sharma/">Manish Sharma</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PL/SQL tutorial 73: Bulk Collect with SELECT-INTO statement in Oracle Database</b></h2><h5 class="post__date">2017-11-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HPVzFBluM_Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up Internet welcome back once
again i am manish from
rebellionrider.com now that we are done
with the introduction to bulk collect
it's time to take a step ahead and learn
how to use pl/sql bulk collect Clause
with select into a statement in Oracle
database so far we learned that bulk
collect is all about reducing the
overhead caused by the context switches
to increase the efficiency of the query
let's try to understand what does that
mean here we have a pl/sql program the
execution section of this program
consists of a SQL operation and that SQL
operation is a select statement this
select statement is retrieving all the
data from the column first name of the
employees table and storing it into the
collection which we created in the
declaration section of the same program
in my case there are 107 records in the
employees table it may be different in
your case when we will execute this
program pl/sql runtime engine will
execute all the pl/sql statements but as
soon as it will come across as any SQL
operation it will transfer the control
to the SQL runtime engine SQL engine
will then process the statement and
return the result back to the pl/sql
engine in our case that SQL operation is
the Select statement which is retrieving
all the first names from the employees
table and as I mentioned earlier there
are total 107 records in my employees
table which means the control will jump
107 times from pl/sql engine to SQL
engine and 107 times from SQL engine to
pl/sql engine in total there will be 214
control terms between pl/sql and SQL
runtime engines
as we have learned in previous tutorial
the higher the hopping of controls the
greater will be the overhead which in
turn will decrease the performance this
means that we need to find an option
which can reduce those control jumps
between the engines that option is the
bulk collect clause bulk collect Clause
compresses multiple switches into a
single contact switch which in turn
improves the performance of the query so
let's move ahead and modify this code
and learn how to use bulk collect clause
with select into statement before that
let me clear one thing this is a dummy
code which on execution will raise an
error because we cannot use locally
created collection with a SQL statement
as we are doing here I have used this
code just to make you all understand
what is context switching and how it
works
now we will modify this code and make it
work and that to with bulk collect
Clause let's do that
here is our completely modified as well
as optimized pl/sql bulk collect code i
also show you that this time it will
work but before executing it let's first
see what we did here that declaration
section is still the same it contains
only a local pl/sql collection which is
a nested table and a corresponding
collection variable of our nested table
type you can refer to my pl/sql tutorial
51 to learn how to work with pl/sql
nested table in oracle database all the
links are in the description then we
have the execution section inside this
section we have a select into statement
this statement is again retrieving all
the records from the first name column
of the employees table but this time
right before the into keyword we have
specified the bulk collect clause which
completely changes the game here this
single Clause alone changes the whole
execution process of this code let me
tell you how on the execution of this
program when pl/sql engine comes across
the SQL operation it will Club all the
107 context switches together into one
single context switch and send it to the
SQL engine in a single go instead of
transferring them individually to the
SQL engine and vice versa it means this
time instead of 214 switches we will
only have two contacts two switches one
from pl/sql to SQL and one from SQL to
pl/sql engine and all this thanks to the
mighty bulk collect Clause let's also
add a loop which will print the data
which it is select into statement is
fetching from the employees table and
storing into the collection ante
underscore F name so that we can see how
many records we have retrieved from the
table
here we have our for loop which will be
printing all the elements which we just
felt into the collection now let's
execute this code and see the output
but before that I'll take a quick second
to ask you to hit that thumbs up button
and like this video your every single
light keeps me motivated for creating
more such interesting tutorial also to
make sure to subscribe as many such
videos are yet to come that being said
let's go ahead and execute this pl/sql
program here is a result as you can see
we have successfully retrieved 107
records from the employees table we can
further fine-tune this code with the
help of cursors which gives us a strong
control on our query that we will cover
in the next tutorial so stay tuned as in
the next tutorial we will learn how to
use bulk collect with pl/sql cursor to
optimize the performance of the query
that is it for today hope this tutorial
helped you in learning how context
switches occur and what is their impact
on the performance of the query also how
we can use bulk collect to overcome the
overhead caused by the context switch
and unhealthy performance of the pl/sql
query this is the tutorial on bulk
collect clause with select into
statement
thanks for watching this is Manish from
rebellion writer calm</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>