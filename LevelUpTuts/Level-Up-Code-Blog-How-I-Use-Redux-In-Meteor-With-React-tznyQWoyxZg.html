<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Level Up Code Blog - How I Use Redux In Meteor With React | Coder Coacher - Coaching Coders</title><meta content="Level Up Code Blog - How I Use Redux In Meteor With React - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Level Up Code Blog - How I Use Redux In Meteor With React</b></h2><h5 class="post__date">2017-11-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tznyQWoyxZg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey you what's up this is Scott with
level up tutorials and in this video I'm
going to be just showing you a little
bit of how I am using redux in my meteor
and react app I want to kind of do these
these code blogs a little bit more often
here where I sort of just show you how
I'm working with something but in
particular on my site here without going
into too much detail and since I've just
started to integrate Redux in a major
way in to level up tutorials I thought
this would be a really cool topic
because honestly there isn't a ton of
great information on how to do that in
fact if I'm doing this in any sort of
weird way that is like just not what you
would expect
hit me up let me know if you have better
techniques I'm not using any specific
meteor middlewares or anything like that
I'm just I guess this is in middlewares
and middleware I don't know if that
matters but so what I'm going to be
doing here is basically showing you two
examples one of which is using tracker
with Redux where I'm actually
subscribing the data like normal and
another is where I'm using a meteor
method to get that data maybe why you
would want to do one or the other I'm
currently writing a reducer and
basically integrating Redux into the
store right now it just so happens that
I released a new series last week called
react 16 for everyone so good time to
plug it plug in it right now react 16
for every 129 bucks check it out or
become a subscriber you get to learn a
lot of great stuff about react
it's excellent in my opinion you can
even watch a little preview now because
I added this little preview window and
this should have cursor:pointer on it
nut this text cursor I'll have to update
that so you know you can click on this
okay so let's talk a little bit about
this Redux stuff you can see I'm having
some actions going on over here these
are Redux dev tools I'm not going to go
into Redux on a whole but really the one
main reason I wanted to add it here was
to take advantage of better stuff with
server-side rendering in
it's just a little bit easier to get
going that direction and not to mention
even though the society is built on
meteor and I love meteor and I love
working on this platform Redux is
definitely a more universal skill so if
I have Redux in here and eventually I
want to pull it off meteor at some point
that instantly becomes easier than it
would have been if I would have like
just kept this very very meteor so the
more I can make this Universal the
easier will be in case I ever need to
move it elsewhere
right and not having to rewrite the
whole thing seems like a nice little
thing so let's talk about my my data
here and I have my state and yeah so
what am i what am i exposing via tracker
and what am i loading via methods while
I'm loading the playlists via methods so
all of the playlists you see here are
loaded via methods and the user
information is all being loaded via
tracker so you can see I have no user
it's just an empty object when I go to
sign-in I now have more information in
fact I had let's see state 4 is loaded
is login open logging in and user so
between those four things I pretty much
get any information they need about the
user so let's look a little bit about
how I'm actually doing this stuff and
why so let's start with the hell first
and then I'll get into the why
let me change my font size on this go to
preferences and I have this workspace
set to 16 so let's bring this up to 24
just for this video so you can see
things a little bit better eh okay
so check it out that's what do we want
to get into first here I think the first
example I want to show is the basic
usage of tracker in redux and so I have
my user object being loaded
and action let's go to auth and under
actions I'm actually gonna be moving
these they're an in actions folder right
now but I'm gonna be moving these into
feature folders sort of stuff instead of
actions and reducers folder a little bit
organization needing to go on but as you
can see here I have well one action to
action three action basically a logout a
toggle login window and the load user
the load user is the most important one
because the logout is just running
meteor doubt logout now the load user
one is interesting because we're using
tracker notice I'm importing tracker in
here again I'm not using any middleware
to do anything here and I'm simply just
this is checking the login status this
is the one that actually loads and
subscribes the user so I'm wrapping a
dispatch in a tracker dot auto run okay
so basically tracker is going to look
for this information to update and then
dispatch the user data with the meteor
dot user object as the information if
you're not logged in this is not going
to be giving you the user if you're
logged in it's going to be giving you
that user I also have the subscription
here within tracker so tracker knows to
watch the subscription and the user I
subscribe to my publication just like
normally and when this data is ready
then I get access to that data so then
it runs my reducer and it's user data
auth which is simply just this is the
user data one I'm simply just saying hey
it's either user data or an empty object
that's it and the reason I have this or
statement is even though I have an
initial state of an empty object at some
point in the login process data die user
was returning a believe undefined and
that was temporarily setting the user to
undefined even though it would go object
undefined and then the user data so now
if this is undefined
it's going to be setting it to an empty
object and next I have is loaded which
is simply just returning the
subscription ready so this is going to
be a true or false if the subscriptions
ready then as loaded is going to be true
and therefore my data is going to be
there so that's really nothing crazy
right the only thing that's interesting
or sort of odd about any of this is this
tracker auto run which is going to watch
this collection for updates and you can
see I'm using this info in header am I
using this in header I might be using
this in main nav I'm using this in main
nav simply just with connect I'm using
the decorator because I like decorators
a lot of people don't love people do but
nothing really nothing crazy here I'm
just mapping state to props I'm grabbing
the user from state dot user and I am
importing it directly into my component
so again none of this stuff is out out
there for Redux lands unless you have
this tracker so that's pretty much it
right binding actually yeah fine action
creators I'm bringing in my actions tog
toggle login window logout and i'm
assigning them or i'm binding them to
dispatch whatever yeah we all good here
so yeah let me know if there's anything
weird here or something you're seeing
but this is pretty much it for the
tracker example so again if you're
learning Redux and meteor just wrapping
your dispatch inside of your action here
just tracker auto run this works nicely
if you object to this method of this let
me know why and I will update but so far
the only other examples I've seen have
either a middleware or don't use tracker
so this is the example that I have here
and now let's check out the actual
product action and see how I'm doing
this with the method I guess it's not
project it's the playlist so if we go
actions playlist
okay so again if anything looks weird
here or you have experience with redux
and meteor let me know if I'm doing
something stupid I don't I don't think
any of this is stupid but
obviously like I said there's not a ton
of great resources out there for
learning this stuff so maybe I'll have
to add my own at some point now what we
have here is just my action for playlist
which is simply just returning my
playlist which you've seen all been
loaded here with the correct information
that we want which is simply just the ID
the title the tags the thumbnails the
slug and whether or not it's premium
that's all the information I need here
so that's all I'm gonna get now what's
cool about this is I'm simply having a
load playlist action where I'm returning
an asynchronous function and I have
assigning constant variable playlists
while I await a meteor method now this
meteor method is using call promise
which I'll show you that in a minute
here but I'm basically saying hey wait
on get active playlists using call
promise and that's bringing in all my
playlists and then once that has come in
I'm going to just dispatch the get
playlists with my data the reducer for
this is exactly what you would expect
reducers where I'm simply just saying
get playlists playlist is now equal to
the data that came in the initial state
is an empty array okay so if you want to
copy or use any of this code just pause
the video at any given point I'm gonna
try to maybe do a blog post I know level
up tutorials doesn't necessarily have a
blog but I have some ideas about how to
have like code posts that you can check
out and stuff like that
so either way here we have our reducer
now let's take a look at that method
because this is actually pretty
interesting to me
not get product let's go to methods
under playlists and we're going to get
single and I think it's down here at the
bottom though these are all YouTube API
so get active playlists right here this
is our method that we're calling what
I'm doing is I simply saying hey
validate null I'm not there's there's no
reason to pass
in here so if you have a better way of
doing this I have like a double blink
object for the validation before and I
just didn't like it so I'm just not
validating at all I'm using validated
methods which is a meteor package
validated method from meteor developer
group and here you can see I am using a
mixin on this validated method which is
called promise you saw in our action I
returned that call promise this call
promise method so by using the mixin
call promise mixin which is packaged you
could just look for it called promise
mixin it allows you to instead of say
you know method call - method call
promise where it returns a promise
instead of having to use callbacks okay
so nothing crazy there but definitely
nice if you want to work with promises
rather than callbacks next I'm saying if
this is not a simulation aka
don't even try to run this on the client
because I don't have a subscription this
data is not going to be available so
only return this data from the server
next I'm saying find me all of the
playlists with a status equals true
that's just the playlists that are
active on level up tutorials I have a
whole like these the API brings an every
single playlist from YouTube and I don't
want every single playlist to be
available here maybe I'm retiring them
or maybe they're preview playlist or
something like that either way I don't
want to so I have a status equals true
to filter out the ones then I don't want
to show up next I sort them by their
order and then I say hey just give me
these fields and I do a dot fetch to not
return a cursor and return the array
itself so absolutely nothing crazy here
the coolest thing about this is
returning a promise vehicle promise
mixin and obviously not running this on
the client-side so other than that yeah
we're just waiting for our data calling
a method so let's talk a little bit
about why I did both of these things
well the user data I'm not necessarily
sold on keeping that in tracker and I
might move it to a different way but
right now it's nice and tracker because
when you log out it does the stuff it's
supposed to do for instance
automatically reg
stirs that these are exclusives and if I
log in here you'll see these badges go
away and that's because of tracker
because it's updating my user roles and
stuff and not just I like that now let's
see why would you use a validated method
with this to get data well I'm the doing
command option you and should I don't
know why here maybe it's because I
changed pages and I didn't load this
from fresh yeah let me reload this from
fresh command option you head here and
bingo check it out because I'm using a
method and I'm not using tracker I'm not
actually waiting for the data and stuff
like that I'm actually being able to
server-side render all of my stuff so
this data is coming in via method onload
and it gets to be server-side rendered
now I'm not necessarily gonna go into
how I've set up server-side rendering
into this but the reality of it is is
that the new SSR and it the new meteor
server render on page load right here
I'm just basically using this new
server-side rendering and I can do
another code blog on how I'm using
server-side rendering as well but I'm
basically saying hey load all my
playlists on initial load and because of
that it's able to have them here now you
might be wondering well why are you
loading all of your playlists if you hit
up this page like why I should have the
playlist be loaded it's an optimization
I'm going to make in the future but
right now you know the playlists are
some of the main attraction of this site
so having this page always be available
with data and I know to be honest I
don't see any huge data lag here or
anything like that because of that
loading if I did I would pull that so
it's just an optimization I'm gonna make
down the line but right now I'm just
loading all of this data as it goes so
this is pretty much it I mean nothing
crazy here but like I said there wasn't
a ton of good examples on this stuff and
I wanted to give you guys an opportunity
to see how I'm doing this stuff here we
have this like I said our methods
hopefully you can see everything here
and yeah if you want to see a look
blog post kind of thing on this content
let me know and I can make some of this
code available because as you know the
site is an open source store anything so
let me know what you think about that
let me know if you think I'm doing
anything stupid always want to hear
about that and that's it hope you found
this useful and hope this has saved you
some headache and time when getting your
site set up with meteor redux and react
thanks thanks so much for watching and
I'll see you in the next one however one
more quick plug at my react 16 for
everyone series where you can learn all
this fancy fancy stuff and build a
really really interesting app from the
ground up with just react and learn the
absolute latest and greatest syntax so
you can do cool stuff like you know
setting aesthetic props and using inline
conditionals and using styled components
and really neat animations just latest
in greatest sort of stuff here</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>