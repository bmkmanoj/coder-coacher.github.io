<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>User Accounts in Meteor #4 - Form Configuration &amp; Form Action Hooks | Coder Coacher - Coaching Coders</title><meta content="User Accounts in Meteor #4 - Form Configuration &amp; Form Action Hooks - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>User Accounts in Meteor #4 - Form Configuration &amp; Form Action Hooks</b></h2><h5 class="post__date">2016-04-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/r59f-gffzD0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up this is Scott with level
up tutorials and in this video I'm gonna
be showing you all of the configuration
options you have available to you with
the accounts package now this includes
hooks for when you're logging in logging
out creating a user the created user has
been created and now there's another
hook on the server side that allows you
to the access to all that information so
this is gonna be extremely useful for
let's say if somebody signs up they
check a box that says that they want to
be on your newsletter then you can check
that value send their email to your
newsletter and do it all on your server
so let's get started right now so in
addition to what everything that we went
over in the last video there's also this
form fields configuration section of the
guide here if you go through here we
actually looked at a lot of these but
there are hard ton more so I mean you
can have lowercase or uppercase or
transforming your value in a certain way
before it's submitted so definitely
don't skimp out on checking out this
easier accounts guide because the stuff
in here is absolutely invaluable and
it's going to give you just the options
to do it you need to do without having
to write from scratch
so let's actually come up here and let's
check out some of the more options that
we have including just a general
configuration that we're given I mean if
you scroll up you can see just how many
things we can configure and you can see
that we have the accounts templates that
configure so let's go ahead and use this
accounts templates that configure by
coming in we can have this in our
accounts that j/s file and we can say
accounts templates that configure now
this is essentially just going to be we
have a function inside of that we have
an object and wrap it all off with a
semicolon at the end now inside of this
object is really as you can see here
just key values based on different
configuration options and let's take a
look at some of these so we have the
option of a confirming password which is
set to true by default you'll notice in
our application it has to confirm your
password if you don't want that you can
always just say
confirm your password false at this
point it's not going to ask for that
second password field on the
registration let's just click register
and as you can see it's not just asking
email password first name profession so
again this is a one-liner
confirm password false and that removes
that entire bit of functionality again
we have enabled password change which
you could turn that off so they couldn't
even change their password through this
kind of form obviously that's something
you probably don't want to do but at
least there's the option there in case
you wanted to write your own password
changing functionality here you can
force the user name to be lowercase we
can turn off things like labels or
placeholders you can give URLs for the
privacy policy go ahead and say privacy
URL in here and check out that let's get
rid of there so now the privacy policy
URL is going to be available at forward
slash privacy and now you see by
clicking register you agree to our
privacy policy with a link to a page
that doesn't exist right now but
obviously you could make it exist in the
edition we could add something like this
Terms of Use URL now a privacy policy in
the terms of use are great things to
have so it's nice to see that you can
easily build these options directly into
the account registration process we can
also add a redirect and you'll see that
there's hooks so on logout hook my
logout function on a submit hook my
submit function so let's actually do
something here where we have an on
logout hook so let's come in here and we
can say comma on log out hook my logout
function and so we have my log out
function now let's go ahead and actually
make this function here so what we can
say is VAR my log out func
and this is going to be equal to a
function and we can simply council the
log
hello now this point this isn't going to
work but it's not going to work for a
very specific reason if you were using
the accounts UI package and you had
written your own then we would have no
problems here because that's going to be
using the correct logout function but if
we come to ours and let's come here we
sign in and log out you almost we're not
getting any sort of counsel look let's
actually figure out why in our header I
believe let's go to partials and
actually we want our main nav guess
where we're actually calling our logout
so when we click logout
we're running meteor dot logout but what
we actually want to run here is accounts
templates that log out this is going to
do the same thing but it's using the
account templates in that way
the hook is aware here so we have
accounts at templates dot logout let's
check this out now and we'll sign in
click logout and now you can see we are
successfully hitting that hook so this
could be a really cool thing let's say
let's sign in and let's go to the
dashboard now we want to actually in our
accounts that Jas when this function
runs instead of doing something stupid
like a council log let's go ahead and
actually have a rerouting here so we can
say so if you're on the dashboard here
or really any page and you sign out
let's go ahead and redirect them so
let's go and say flow router go and we
can say inside of a string here just the
/url now you could always obviously you
probably don't want to reroute them if
they're already on this page so you
could write some sort of if but for this
example it's totally fine we're logged
in here make sure that this is all on
the latest versions of everything nice
and refreshed here what we can do is go
ahead and select logout and boom it's
taken us directly to the home page here
in addition it had the modal window was
still up let's go ahead and figure out
so we had a session variable toggling
that open window
login if you go to em you'll see nav
toggle is set to open let's go ahead and
not set that to open we can also just do
a really simple session that's set and
we can say I believe it was Nev - toggle
and we could just pass it a blank string
here because all we're doing is checking
to see if it's open but as you can see
here what we're going to now do is
you'll see that our session variable and
they have toggle is set to open
when I click logout it resets that so
the nav toggle is no longer open and
we're redirected to the home page so
this is pretty powerful I mean we wrote
this hook in no time it's redirecting
our users my logout function we're
saying accounts templates on logout run
this function so if you're wondering if
logout is the only function that exists
no we actually have tons of other hooks
on logout hook on submit hook pre sign
up hook post sign up hook this is a
really interesting one it could be
something that you could use a lot to be
honest let's say we had a checkbox that
was checking to see if somebody was on
or they wanted to be in a mailing list
so you could say check here to be in our
mailing list now that value is going to
be passed along through this info so if
you were using something like MailChimp
you could always pass along the users
info along to your mailing list as long
as they checked that box and notice this
does say it's called server-side only so
if we do actually write this post signup
hook I'm going to copy that just to have
it in my clipboard if we do write that
post signup we can't do it in our
accounts jeaious that's living right now
on the client if we had this in a
location that was for either kleiner
server we could definitely wrap that in
a server let's actually go ahead and
just have a server client folder so I'm
gonna have a new folder and it could
just be server I'm surprised there isn't
a server folder already but we haven't
done much work yet on the server and
let's have a new file and this is just
going to be account CAS again and I'm
gonna head back to my client accounts
copy I'll
stuff paste it in here I'm gonna delete
all of this stuff okay
and so my logout this is going to be now
post sign up like so let's get rid of
this stuff in here and let's go ahead
and add some configuration options if we
head back here the post signup hook is
post sign up hook all in camelcase and
from here we can say use post signup
this function right here notice how
we're on the server so this should run
no problem if we head back to the dock
so notice we get access to the user ID
and the info so let's go ahead and say
user ID comma info now we can Council
log both of those so console dot log
user ID and we can council log info this
is going to be so awesome because you're
going to see all of this information get
printed on our Council I mean we can
really do anything with this info like I
said you could sign them up to a mailing
list as long as they opted in for that
so let's go back and let's come to our
page here let's make sure everything is
at its latest version I'll check my
command line okay everything's restarted
let's go ahead and click log in and sign
up let's register I'm just going to mess
with this email so I can create a new
user account
let's click register so as you can see
we're logged in obviously there's
nothing going on in our client-side
Council we head to our server council we
get the user ID and we get an object
that includes the email and includes the
hash password with the algorithm and we
get the profile object including first
name and profession so like I said if
they had the opt-in you know sign up for
newsletter equals true or whatever you
could write that function and you could
call that sign up directly from your
server-side code so as you can see here
you don't need custom accounts to have
that sort of functionality and you don't
even need another package it's not like
you need a package to
that for you that's all pretty simple I
mean we managed to get all of that
information with less than 10 lines of
code here and it would be even less
without these council lines right so
without these council lugs we could put
in our signup form whatever in here and
yeah now have access to post to signup
hooks so as you can see the user
accounts package is very full-featured
in the next video we're gonna be
overriding some text and labels and
things of that sort with more
configuration so as always this is Scott
with level up tutorials if you want to
hit me up at Twitter or Facebook or
leave a comment in the video I would
love it thanks for watching and I'll see
you the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>