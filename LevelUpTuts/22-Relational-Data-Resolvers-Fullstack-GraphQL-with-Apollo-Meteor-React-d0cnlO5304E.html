<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>#22 Relational Data Resolvers - Full-stack GraphQL with Apollo, Meteor &amp; React | Coder Coacher - Coaching Coders</title><meta content="#22 Relational Data Resolvers - Full-stack GraphQL with Apollo, Meteor &amp; React - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>#22 Relational Data Resolvers - Full-stack GraphQL with Apollo, Meteor &amp; React</b></h2><h5 class="post__date">2018-01-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/d0cnlO5304E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I hope you are still with us after
that marathon of a last video I don't
know if that was a marathon or a sprint
but we went to town and made a whole
bunch of new files and I mentioned it
was fast and furious seven but we
basically we added in and we
successfully added in a new mutation to
create a goal now the thing is is we
never had any query to output a
near-vertical so we can never say like
goals or goal or whatever give me this
or that we can't because it doesn't
exist we never made that query and we
don't need to make that query cuz we're
not going to use our goals on their own
in fact we're only going to use them in
the context of resolutions and so that
should give you some clues here about
we're gonna do we're going to head to
our resolutions dot graph QL file and
we're going to go ahead and create a new
type or not a new type but a new
definition on the type of resolver which
we have ID and name and we're going to
have goals
now goals is going to be an array of a
goal check it out so we're going to have
an array of individual goals which we
defined as its own thing here and we're
defining it here this is the first time
we've done this kind of thing the
closest that we've done to this kind of
thing was to have an email field which
did not exist on the user and then we
wrote our own custom resolver to output
the emails or the email itself now in
this case we're saying hey we already
have this goal schema defined now give
me an array of what something that
matches those goals and output them as
goals themselves now I'm gonna give you
a second here to attempt to think about
this what is a good way for us to
actually write this resolver in fact I'm
going to give you a chance to write at
least the root of the Ruiz
right now so if you like challenges like
this go ahead and pause the video this
is a great time to challenge yourself to
say hey I'm gonna I'm gonna write a
resolver for this okay so pause the
video and try to do that I'm gonna
actually get rid of this comment that we
had a top here a long time ago and now
this schema is a little bit more
complete and I'm also going to head to
my register API file and update this
file by just adding to this comment I
have here this is the dumbest thing ever
I hope this gets resolved soon again if
you're just checking in I have a comment
here which is Rhian all of these things
to bust are cash on resolution or on
them on our dot graph QL files it
shouldn't have to happen and it's
probably getting fixed but just so you
know you got to do it okay so okay no no
error servers again if you are
attempting to do that on your own
welcome back what we're gonna be doing
is heading to our resolvers file and
this is going to be the resolvers that
lives inside of resolutions okay an
inside of resolutions here we had a
query type of a resolution we had a
mutation type of resolution and in
between those two I'm going to have a
new one and you might be able to guess
what this one is in fact this one is
going to be in line with exactly what we
decided in our schema here which was
goals so let's consult our user resolver
file as well and you remember we had it
as user so the type needs to be the type
of the schema which isn't goals or it
isn't user whatever its resolution right
because we're resolving something on
this type so we're going to resolve from
resolution sorry I need a colon here and
a comma here just like that and the
field that we're going to resolve is
once again going to be a property on an
object and in this case it's goals
now goals again is a property that has a
function here and I will clean this up
afterwards
but the parentheses inside of this
function is going to have our individual
resolution so answer me this how can we
get an array of goals where we just have
a resolution entire resolution object
here well if you thought about this we
have access to the resolution ID so if
we do resolution dot underscore ID let's
go ahead and just counsel log this out
here and a my graphical I'm going to
head to my graphical here and I'm going
to say resolutions give me the goals and
hey give me their IDs sure why not the
goals gonna give me no because we're
obviously not returning anything yet but
if you had your command line boom we're
getting an ID and this is a resolution
ID if you remember back to the last
video in our mutation we assigned a
resolution ID to an individual goal so
we should be able to query the database
with a find using that resolution ID
it's awesome so let's go ahead and first
import goals Capitol goals from dot dot
backslash goals forward slash goals next
let's gonna come down here and we're
going to do a find
so goals dot find and we're going to say
hey give me all of them with a
resolution ID equal to resolution dot I
D then we're gonna do dot fetch okay
then we're gonna return this and this is
gonna blow your mind at just how simple
incredible this is to do relations
resolution ID sorry thank you or if you
saw that spelling mistake here
let's go erase that and again we could
actually clean this up I'll clean this
up in a second here so you can see
what's going on but again this goals is
resolving this okay and this expects an
array of goals and sure enough we're
doing a find using the
I D that we just got and we're gonna be
returning an array of goals so therefore
our graphical our graphical editor
should now actually work mmm keep my
fingers crossed and hit go and boom just
like that we have an array of IDs and we
can do name check it out do ten
handstands this is super duper amazing
and check it out I mean this is just so
cool because well goals isn't even part
of resolutions and resolutions isn't
even storing goal IDs anywhere there's
not an array of goal IDs this allows you
to not worry about how the data is
stored in the database and just worry
about how to grab it out of the database
now granted you would in a production
application want to make sure that
things like resolution ID are an index
in the database I haven't even touched
on that kind of stuff yet for
performance so if you are yelling at me
about that do not I mean I understand
that anything you're finding on and in
Mongo you're gonna want to make sure is
an index
but for now this is pretty darn sweet
ways we can clean this up well we can
remove these two brackets and we can
remove this return signed and bump this
up like this and remove this fetch just
like this this cleans it up a little bit
although I don't know if this reads is
nice it depends on what kind of style
you like for your stuff I don't mind
this at all but if you do you can feel
free to have it any sort of way that you
like the only thing that matters is
we're returning the result of this goals
dot find now any sort of additional one
we add here let's say we want to do 30
seconds submit head to our graphical
let's hit this query again we're still
getting all of them it's so super cool
and also let's go ahead and ask if
they've been completed or not pleaded
completed let's go let's see it false
they've neither of them have been
completed you can get any property that
exists on the entire goals object now
again I mentioned this on level up
tutorials but you could just grab things
left and right I could say hey give me
this tutorial then give me it's a
tags then give me all of the tutorials
that share those same tags and then give
me those tutorials tags themselves I
mean you could just keep going and going
and going I mean the possibilities are
seriously endless now you might be
screaming about performance and stuff
like that and there are certainly ways
to check to make sure your queries
aren't a definite time sink but doing
something basic like this where you're
simply grabbing IDs and then hitting
your database shouldn't be a huge deal
if you only have a few IDs now you might
also be thinking well it could be a
better idea to have the goal IDs
actually stored on the resolutions that
way you could do one database find like
find in with those IDs that's definitely
a possibility as well again this isn't
necessarily database schema design 101
or something like that this series is
mostly to show some of these features so
check it out we now wrote a really
awesome custom resolver that's hopefully
blowing your mind because not only do we
have access to all of our goals but we
have access to any sort of field on our
goal through the resolutions schema
itself without even have its own goals
query or anything like that
so these last couple of videos have been
a complete whirlwind I apologize if you
got behind or us talking too fast again
follow the code in the repo here I
wanted to instill some of these ideas
and then what we're going to be doing
next is actually writing the UI for this
so in the next few videos we're gonna be
writing the user interface and we're
gonna be improving that significantly
but now that we have that out of the way
you have some of you have nailed down
some of the most important concepts in a
graph QL and you should probably be John
the floor right now about how cool some
of this stuff is so as always this is
Scott with level of tutorials again if
you want to help support level up
tutorials head on over to level of
tutorials comm forward slash store and
you can purchase anything I got there or
you can become a LevelUp pro subscribe
and get access to fancy fancy premium
content every single month so thank you
so much for watching and I'll see you in
the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>