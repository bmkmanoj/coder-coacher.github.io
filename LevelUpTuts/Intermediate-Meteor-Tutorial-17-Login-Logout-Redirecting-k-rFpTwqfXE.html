<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Intermediate Meteor Tutorial #17 - Login &amp; Logout Redirecting | Coder Coacher - Coaching Coders</title><meta content="Intermediate Meteor Tutorial #17 - Login &amp; Logout Redirecting - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Intermediate Meteor Tutorial #17 - Login &amp; Logout Redirecting</b></h2><h5 class="post__date">2015-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/k-rFpTwqfXE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up this is Godwin love love
tutorials and in this video we're going
to fix the other problem that I talked
about at the beginning of the previous
video where when the user logs in
they're not automatically redirected to
their recipe book so in this video upon
login and logout they're going to have
some automatic redirects that are going
to take them where they need to go so
let's get going on that right now
okay so at the end of the last video we
saw that when you click sign in here we
can enter our login information and when
I sign in I'm held on to this page if I
were to refresh sure it's gonna take me
to the recipe book but that's not really
what our users want to want to see when
using the site so what we need to do is
add some callbacks now luckily we
already added this package or at least
you should have if you copied the
package list if you don't the package
we're going to be using is this gwendal
auth - client - callbacks so check your
meteor folder and your packages file to
make sure that you have this auth client
callbacks package in your project or
else this tutorial will not work for you
cool so let's head to our routes file
and we're going to be using these
callbacks now flow router recommends
that you handle the stuff at a template
level however personally I prefer to
keep all of my templates or layout sort
of clear that kind of stuff and have
that being taken place in the router you
can do this based on your own preference
however in this example we're going to
be showing you what exactly this takes
to make this happen at the routing level
okay so now with the routing level what
we can do is come to the top of our
router and what we can add is some code
that's going to be checking for the log
in and log out so what we can now with
that package is we can say accounts dot
on login now we're going to be passing
in a function here now this function
isn't going to necessarily contain
anything it's just going to have our
curly brackets here now this is going to
get called when the user is logged in so
obviously what we want to do here is we
want to move the user when they're
logged in to their recipe book page so
I'm going to copy this line from down
here that says flow router go recipe
book I'm going to paste it in up here on
login because at the moment that the
user is logged in we want them to
redirect to the recipe book so let's
head back to our page let's log out here
and let's go to the home page
and let's sign in so now upon signing in
we should be able to see that I'm
automatically redirected so as you can
see the moment I hit login
I was taken to the recipe book page
which is really great because obviously
that's what the user would want to see
happen they don't want to sign in and
then just sort of wonder what's going on
now in addition we want the same thing
in Reverse to happen with the logout
state so let's head back to the routing
code and let's copy this line here
exactly
paste it in and as you would expect we
have accounts that I'll log in but we
also have a counts dot log out now keep
in mind that these methods are only
available with that package so make sure
you have that package that we discussed
earlier in your packages file so that
way that you can use these correctly now
we have FlowRider dot go recipe book now
let's go ahead and change this to home
when you log out we want to send you
home instantly so here's our final code
it's looking pretty good let's go ahead
and check out our page so now when we
refresh our page you're gonna be greeted
with an error so there's no method on
logout now what we need here is because
this code needs to run purely client
side and our routes dot J's file is
inside of our Lib and not inside of our
client folder if we were to put this
code inside of a file inside of our
clients folder then this would have been
fine however what we want to do is
because to me this fits more with the
routing code and that's maybe where I
would look for it I mean this is a
personal preference thing at this point
what we're going to need to do is to
wrap this in and is client so I meant
tab it over one and I'm going to do the
if and then parentheses meteor dot is
client okay
now let's go ahead and bracket that off
like so so now this on log N and on
logout as within the client code here so
it's within this is if meteor is client
and now when we head back to our page
and refresh we should be able to see
this actually working how we wanted it
to work so you can see we're logged in
at this point we're on our recipe we're
on our menu whatever these links don't
exist yet but when we click will sign
out here
we're immediately taken to the home page
which is exactly what we wanted to see
cool so we now have this working we log
in we're redirected to the right place
we log out and we're redirected to the
right place you can see upon logging in
once more yep redirected back and now
likewise because of the last video if we
try to visit a page like the home page
we're redirected to where we want to go
cool so this should make your
application feel a bit better for your
users and and direct their attention to
where it needs to be directed in the
next few videos we're gonna talk about
our menu and our shopping list and we're
gonna get this thing going so as always
this is Scott with level up tutorials if
you have any questions or comments
become in the video hit me up a Twitter
or Facebook at level up tutorials I'd
love to hear from you if you want to
help support level up tutorials check
out store level up tutorials there are
digital series to download there are
t-shirts there are stickers I would love
it if you would help support and keep
these tutorials free so as always this
is Scott Olinsky and thanks for watching
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>