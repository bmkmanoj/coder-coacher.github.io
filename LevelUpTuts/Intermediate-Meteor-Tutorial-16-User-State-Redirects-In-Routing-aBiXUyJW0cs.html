<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Intermediate Meteor Tutorial #16 - User State Redirects In Routing | Coder Coacher - Coaching Coders</title><meta content="Intermediate Meteor Tutorial #16 - User State Redirects In Routing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Intermediate Meteor Tutorial #16 - User State Redirects In Routing</b></h2><h5 class="post__date">2015-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aBiXUyJW0cs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up this is Scott with level
up tutorials and in this video we're
gonna be fixing some problems in the
current user flow of our project for
instance upon logging out and logging in
the user isn't correctly redirected
where they need to be as well as they're
able to access pages that they shouldn't
be able to access for instance the
recipe book when they're logged in so
this video we're going to take care of
that second one and we're going to make
sure that when the user is not logged in
that they see the home page and when
they are logged and they see their own
recipe book so this is going on there
right now okay so you might have noticed
some things like for instance when we
log into the site we're locked in
we're stuff this landing page that's
organized your meals it's sort of going
to be like a introductory billboard to
the site and we would rather have this
if you're logged into the site to have
it automatically transfer you to the
recipe page so let's talk about how we
can accomplish that and likewise if
we're not logged in let's open up a new
incognito window here we don't want to
see this page because we shouldn't be
able to add things unless we're logged
in right so what are some ways that we
can accommodate for those situations
well let's head to our routing code and
see you can see we have our routes here
now let's go ahead and add some things
what we want to go ahead and do is add a
trigger on route enter what we're going
to do here is check to see if they are
logged in and if they are logged in upon
trying to hit the home page we're going
to redirect them to the recipe book page
now it's really easy to do that inside
of our action so inside of our action
right now we just have this page view
code and then we have this render layout
well what we actually want to do is put
an if statement in here so we can say if
meteor dot user ID and that's a function
if meteor user ID as an if the user ID
exists this method will return true
if the users logged in like we've seen
before well we can now use as a flow
router method called flow router dot go
and then we can pass in the name of our
route in this case it's recipe book I'm
going to just copy them paste this in
here like so so as you can see what
we're going to be saying is if the users
logged in go to do the recipe book
otherwise you can register this as a
page view and render at the blaze layout
okay
so let's head to our site so in this
window we're logged in I'm gonna try to
go to the Home route and as you can see
we have some issues well in a previous
video we actually had the name listed as
recipe book twice and that's incorrect
so what we can have this be is simply
just recipe here and then this route
should be recipe book so you don't want
to have a name that's the same for
different routes so in this case we have
a name is going to be identifying each
of these routes that way when we say go
to the recipe book and let's go ahead
and re browse to our home page it's
actually gonna know the correct route
which is something that obviously is
important so now we have the home page
automatically redirect during to your
recipe book that way when anybody comes
to your site and they're logged in they
don't have to spend time going to the
home page itself but get right into the
action of the stuff they're actually
looking for ok so now let's check out
the opposite case scenario we're not
logged in in this incognito window and
I'm still able to access the recipe book
which is something I don't want to do so
let's go ahead and add a trigger for any
of the routes we want to say at the top
of our route file flow router dot
triggers dot enter so when a route is
being entered and inside of here inside
of the parentheses here we have we have
flat brackets and we can say function
now inside of the function we take a
context and comma redirect
okay now we can have our curly brackets
here because this is a function finish
it all off with a semicolon you have
curly brackets then flat brackets then a
parenthesis all in one here just so
that's not confusing now what we can say
is if meteor dot user ID and we can wrap
that off and we can have our function
here but we want to be checking as if
the user doesn't exist so exclamation
point so if meteor die user ID returns
false we want it to find what's inside
of this if statement and what we can do
is a redirect by simply saying flow
router dot go and then we can say go
home so basically if there is no user
here then go home okay so check it out
we can come in here and the best part
about meteor is stuff like this
I just tabbed over to the page here this
is the incognito window and it's already
redirected me to the home page in fact
if we try to visit recipe book I'm going
to try it right now it's gonna say nope
not today not not letting you do that so
we now have these redirects set up in
our routing so that the user is actually
going where they would want to be going
cool now in the next video we're gonna
be solving another problem with the same
scenario let's think about this we're on
a page here like this
Scott I level up Tut so I'm gonna sign
out I signed out but here I am at the
recipe book and let's likewise forward
slash sign-in I'm gonna sign in with my
username and password and Here I am I'm
signed in but I'm still in the home page
so what we're going to take care of in
the next video is this redirect after
sign in so as always this is Scott with
level up tutorials if you have any
questions or comments to become in the
video hit me up at Twitter or Facebook I
level up tutorials if you want to help
support level up tutorials check out
store dot level up tutorials calm there
are digital series to download as well
as t-shirts and stickers so thanks for
watching and I'll see in the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>