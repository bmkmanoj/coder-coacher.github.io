<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Meteor &amp; React For Everyone #4 - Inserting Into Our Database | Coder Coacher - Coaching Coders</title><meta content="Meteor &amp; React For Everyone #4 - Inserting Into Our Database - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Meteor &amp; React For Everyone #4 - Inserting Into Our Database</b></h2><h5 class="post__date">2016-03-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gbXHlGexX24" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up this is Scott with level
up tutorials and in this video I'm going
to be showing you how you can insert
something into the database using both
react and meteor so let's get going
right now okay so what we want to do now
is add an insert form now before we do
this I'm gonna go ahead and add a new
package to our application here I'm just
head to our packages file that's in
sublime text and in that dot meteor we
can head to packages and let's scroll
all the way to the bottom here and let's
add a new package this is going to be a
package that I use on pretty much every
project and I definitely have to
recommend it what we want is meteor toys
we can type in meaty or toys : all
things all things is a package by meteor
toys which contains all of the meteor
toys now these things allow us some
pretty cool stuff we can see that this
package is in fact working on our site
by heading back to our site and hitting
a control-m wait for this to reload okay
so now we can hit control m and as you
see we now have jetsedder which treks
our meteor session variables and mangal
which actually tracks our subscription
our database information so if we were
to add a user account or add a new
collection into our MongoDB we would
actually be able to see that being added
right here and mangal the best part is
is you can always hit ctrl M to hide
them I use this all the time just to
even know what's being published
obviously because we have these packages
right now we have in packages auto
publish and insecure in here these are
two prototyping packages we don't have
to worry too much about publications
just yet but we'll be getting to that
later in this series so now let's head
it to our application in app dot J s you
can see we have our hello world and
let's go ahead and first thing we want
to do is create a new collection now a
collection is going to be basically
where we're storing our data in our
database and we can do that through
resolutions which is going to be the
of our collection is going to equal a
new Mongo dot collection now this is
going to be in quotes we're going to
have resolutions okay so our new
collection is going to be resolutions
now if we head back to our app we do
command M obviously we don't have any
resolution so we don't see anything yet
so let's go ahead and write a form now
this is going to change a little bit
like I said this app dot JSX isn't
totally correct right now we're going to
be doing some work with a new package
called tracker react to be able to bring
in our actual data but as you can see
right now we have resolutions to find as
a new Mongo collection let's go ahead
and inside of our react component let's
go ahead and make first let's add a div
around this hello world just because we
need a wrapper okay and let's wrap that
div off like so and now what we need is
we need a form we have this hello world
which we want to change to something
like let's have hello world that now be
my resolutions okay so we have my
resolutions and we want a form now so we
can say form and let's close this form
off and really what we need to do is
have a class name on the form which is
going to be new resolution now keep in
mind I have styles for these I'll be
able to give you those in a another
video here so don't worry about this
looking terrible right now it's going to
look much better and then we're going to
have inside of here we're going to have
just an input text box where we can say
input type is equal to text and we're
going to have what's called a ref our EF
now ref is going to be how we're going
to be able to refer to this input box so
we can just add this simply as a
resolution and now let's go
and at a placeholder I'm gonna actually
add some put these on a new line here
this is just sort of a code style thing
once you get a few of these properties
deep it sort of becomes annoying to have
them just be a long chain especially
when I have the text size bumped up here
so we can now have a placeholder be
equal to something like finish react
meteor series now let's go ahead and
wrap this up with a forward slash and
then a greater then to close out that
input tag remember you need the forward
slash or else react is going to complain
so let's head to our page and as you can
see we have my resolutions and we have
this form here obviously nothing happens
if we type into this and hit enter
refreshes the page but other than that
nothing obviously what we want this to
do is submit this into our database so
when we hit something like ctrl M we
will see this populate our resolutions
what's interesting now is that after a
refresh an actual hard refresh here
resolutions does appear in our Mongo
you'll notice when I click it it opens
this up nice and big we can actually
insert and edit documents directly in
here from our database so one of the
reasons why meteor tools is amazing but
so as you can see resolutions now exists
as a collection in our database although
we didn't do anything with the form to
make that happen it was really the new
Mongo collection that made that happen
ok so now what we need is a on submit
because what you're going to do is
you're going to type in this form you're
going to hit enter and this data needs
to do something now let's go ahead and
come in here and we can say on submit
and we'll pass this in equals and the
equals is going to be two brackets so
for this on submit we're equaling two
and whenever you use brackets inside of
JSX it's sort of saying like hey this is
JavaScript so although you're using XML
HTML here if you see two brackets it
means that it's actually going to be
sort of straight JavaScript so what we
want to do is say this
dot add resolution and now we need to
type dot bind and then inside of quotes
this so we're going to be passing this
in to add resolution let's come back and
save this now you might be wondering Oh
what is this add resolution function
does this exist no it doesn't currently
exist in our application at all but how
do we have access to that well in our
component here underneath our initial
creation of our component but above the
render function you can create your own
functions here such as add resolution
with parentheses like that and this is
now going to be referred to as this dot
add resolution now let's go ahead and
first pass in here event and let's say
event dot prevent default now the events
that prevent default is going to stop
this page from reloading every single
time we add enter obviously we don't on
our application when it submits a form
to reload the page which is the default
functionality for a form so now we can
say console dot log and inside of here
let's console.log this okay
so let's head back to our application
let's come in here let's type some stuff
in here it doesn't really matter and
let's head enter now you'll see not only
do the page not refresh but we now have
something out put on our council if we
open this up we have an object now in
case you didn't know this at this point
refers to the entire component and if
you remember we defined our Ref as
resolutions and you'll see inside of
this object which is this is refs if we
open this up you'll see refs resolution
resolution that input and if we open
this up we can see if we scroll down
let's keep scrolling down
we'll see eventually value which is the
actual text that we had
put here now to make sure we remove any
sort of a break space and stuff like
that what we're gonna want to do is
we're gonna want to trim this value but
we can come in through this entire
object here which if you remember was
this then dot Refs
dot resolution dot value so let's go
ahead and in here we can save our text
is equal to this refs dot resolution dot
value and then we can say dot trim now
trim is basically just going to remove
any of the break space so now let's go
ahead and counsel Lugg text and make
sure that this is all working correctly
and we're grabbing the correct text from
this box so now when we come to our page
we can type in here hit enter and you
can see on the site below and terror
every time we hit it we're getting that
council log now because we have the
insecure and auto published packages in
here we can submit things to our
database directly from client side now
obviously this isn't something you're
going to want to do in production but
for prototyping in this example it's
going to be really nice all we have to
do is say resolutions dot insert and
then we can have parentheses brackets
inside of these brackets is an object
now this object is going to be the
fields of our database entry so for
instance let's say our resolutions text
is going to be equal to text right so
it's going to be equal to whatever is in
the text box now in addition I'm going
to have a complete as in this resolution
is incomplete so it's going to be
default to set to false we'll be able to
update that later and created at is
going to be equal to new date which is
just a date function here which is going
to pull in two days date the current
moment right now so as you can see
resolutions dot insert text complete
okay so now we should be able to
actually insert something into our
database now this should be auto
reloaded here so let's actually try to
do this keep an eye down here on
resolutions and let's
say Finnish react meteor series enter
now boom even though it's counsel
logging here because we didn't remove
that counsel ugh well now see we have
one record in our Mongo which is our
database and beautiful we now have text
complete false created ad and it has an
ID now we can't access this data yet for
reasons that are going to be a little
bit confusing right now but really react
and media need a nice way to talk and
that's where tracker react comes in so
that is going to be the topic of the
next videos getting our data out of our
database but for right now let's
actually check out one more small issue
after we added this in here finished out
react that meteor series whatever is
still in the text box obviously if we're
adding resolutions you don't want that
text to remain in the text box after
you've submitted so let's head back
let's say this whole little bit here
let's get rid of the trim part so this
dot refs dot resolution dot value and
let's set this to an empty string so
just a totally empty string and I'm
gonna get rid of this Council log text
just because we don't need it at this
point so as you can see they're a total
add resolution function here we're going
to be clicking it we're passing an event
we're saying hey don't reload this form
we're gonna be grabbing the data from
the form trimming it then inserting it
into our database and then setting it to
blank so let's try it let's add a new
thing let's pull up in command M it
looks like we have two resolutions in
here looks like I accidentally entered a
blank one so let's go ahead so let's
minimize this and we'll be looking for
number three which will be finish react
native next level series enter and now
we have three it's cleared our input box
back to normal and we can add another
one like dance in my office
which is something that I don't need to
be told to do and as you can see I now
have four resolutions and everything
saved in our database perfect
we now have a form we have a connection
to the Mongo database and we wrote a lot
of new things for the first time for
instance our form we now have an on
submit where we're passing in this ad
resolution and we're binding this if you
don't bind this you won't have access to
the correct to this and then we have our
input and we've used ref for the first
time and everything else other than like
that should be basic HTML like you're
used to cool so in the next video we're
gonna be working hard to get this data
to output then after we get that going
we're gonna get working on adding our
Styles thinking in sort of how you build
components as a react app location and
how that's sort of different from
templates in a blaze website or even
like an angular website and then we're
going to talk a little bit about project
structure we're going to learn how to
update our resolutions we're gonna add
some deletes and stuff like that we're
going to get into some fancier JSX stuff
error messages deploying we're going to
remove those prototyping packages really
this series is going to get you off the
ground with meteor and react so as
always if you want these videos before
the release head to store that level up
tutorials com subscribe to be a LevelUp
pro or purchase the series for digital
download and get access to the special
server-side rendering video that only
exists through the downloadable package
in addition there's also going to be
exclusive download only videos that show
you how to deploy this application on a
digital ocean droplet so between all
that there's going to be some really
nice extra content if you want to
purchase this series and help support
the creation of these free tutorials on
YouTube as always this is Scott with
level up tutorials thanks for watching
and I'll see you in the next one bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>