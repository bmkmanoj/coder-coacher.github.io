<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Meteor For Everyone Tutorial #18 - Authorized Content Publishing &amp; Methods Part 2 | Coder Coacher - Coaching Coders</title><meta content="Meteor For Everyone Tutorial #18 - Authorized Content Publishing &amp; Methods Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Meteor For Everyone Tutorial #18 - Authorized Content Publishing &amp; Methods Part 2</b></h2><h5 class="post__date">2015-04-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pmgtPyCzcVc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so picking up where we left off we
have this meteor dot publish resolutions
here and we now need to modify this
return resolutions find so we're not
giving all of the content from
resolutions we want to restrict what
they have access to specifically we
don't want to give any resolutions where
the current owner is not owning the
content and private is set to true so if
it's private we don't want anybody else
to see it but more importantly we don't
want to have anybody else to have access
to it on the server side
so in this return resolutions that find
we can now pass in some options right so
let's have a bracket here snow inside of
this fund we're gonna be using an
advanced Mongo query and to do that we
want to have a dollar sign or and then
colon and then bracket okay this is not
the curly bracket this is the flat
bracket
okay so inside of here what we need to
do is pass in a couple of conditions so
this is only going to return in two
types of cases when the resolution is
not equal to private so to say that is
we want to say private : and then we
want to have another curly bracket using
the dollar sign any so not equal to :
true okay so when private is anything
other than true and then let's have a
comma here and or we want to include it
if it is the owner so if if you own the
resolution always show it or if it's
public then you can show it as well so
we can say owner :
now this dot user ID so we now have this
Mongo query that's looking for content
that's private to do not equal to true
or owner that's a to this dot user ID so
let's come to our document here
and you can refresh you see we have a
public and private are showing up here
what happens if we check this out as a
user who's not logged in I'm gonna just
put this in a incognito window and you
can see the only one that we have access
to is the one that's set to public and
what's cool about this is if we come
here and we click on this public button
and make read more private as well let's
tab back you'll see it's already gone so
we've made that private and hit it
immediately from anybody else who
currently might be browsing the site we
can toggle back either these public
private and you can see they're now back
for our non logged in users okay so
we're almost there we have this public
private thing going it's pretty cool
you now have a little bit more
information about how to use publish and
subscribe so instead of just publishing
every single resolution we can now have
conditions on which resolutions the
application has access to at any given
instance okay so let's go ahead and
let's come back to our methods we have
these delete resolutions we have update
resolutions we have add resolutions add
resolutions should be able to be done
essentially by anybody however a delete
and update these really should only be
done by people who have the access to
modify their own content right so you
don't want some just random logged in
user being able to delete or modify your
resolution so just the same way we did
this before we first found one with the
ID so let's come in here let's do delete
resolutions first we're gonna do
resolutions dot find one dot ID exactly
as it was and we're going to say if the
owner if you're not the owner you can't
delete it so just like we had before the
resolutions find one if the current
resolution owner is not equal to the
current logged in user don't allow them
to do it okay and once again we're gonna
have the same exact thing is that to
update so I'm really just going to copy
these lines right here and paste
just above our resolution stuff update
right here and if all goes well I'm
gonna have my counsel log open on this
one-handed incognito window let me do
that okay let's inspect element we'll
get our council the giant font size on
this is kind of ruining inspect element
but that's okay we just want to see this
error okay so now let's see what happens
when we click remove we get error delete
resolution not authorized
let's click update we get error invoking
update resolution not authorized so even
though this checkbox exists at something
you may even want to just straight-up
hide these buttons in fact that's
something I would definitely do but not
only that if they were somehow able to
get into your council and start typing
away the server would reject their
request and not just the fact that
you're hiding the functionality for them
to do it
so now that the server is blocking it
let's go ahead and just add this is
owner and let's wrap the is owner just
around this checkbox and let's go ahead
and add another is owner around this
delete button
cool okay so now now they can just see
their resolutions right and the logged
in user has all this sort of access cool
so we've now done a lot with security
we're hiding methods we're preventing
the server from doing certain things we
have a pretty good application I mean it
could use some some CSS it could use a
little bit of shuffling around and stuff
like that but it works really well and
it's a good start
so in the next video we're going to talk
more about project and layout structure
and then we're going to get into
deploying a really simple meteor to
meteor zone hosting server so as always
this is Scott with level up tutorial so
if you have any questions or comments or
you could come in the video we're gonna
set that Twitter or Facebook at level up
tutorials we love to hear from you
thanks for watching and we'll see in the
next one
right</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>