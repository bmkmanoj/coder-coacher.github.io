<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Intermediate Meteor Tutorial #13 - Template Level Subscriptions | Coder Coacher - Coaching Coders</title><meta content="Intermediate Meteor Tutorial #13 - Template Level Subscriptions - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Intermediate Meteor Tutorial #13 - Template Level Subscriptions</b></h2><h5 class="post__date">2015-11-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MCoOTYNKX8A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up this is Scott with level
up tutorials and in this video we're
gonna show you how you can set up a
template level subscriptions using
meteor now we're have our flow router
going and we have our individual
templates for our recipe book now we
want to set up a subscription so that
we're only subscribing to the recipes
that we need when we're on the recipe
book page so let's get going on that
right now
okay so in the last video we set up our
partials we are iterating over our Fresa
Peas and we have each one of our recipes
here now what we want to do is we want
to actually have these recipes being
subscribed at the template level instead
of at just sort of this generic client
level like what we have right now if you
head to recipes jsn our client's recipes
you see we just have this really sort of
blanket meteor dot subscribe recipes
outside of anything but inside of the
client code let's go ahead and comment
this out for a second we save this head
back to our HTML and upon refresh you're
gonna see all of our recipes go away
because we're no longer subscribing to
the data that's being published there is
no data essentially so subscriptions are
an important part of performance in your
application because you want to only
subscribe and publish what you need to
be using at that given time for instance
if you were to have a site with like
10,000 recipes over maybe a hundred
different users right you would only
want the current users recipes to ever
make it to the front end code so you
would only want to publish the current
users recipes and things like that so
subscription management is an important
part of having a performative
application so we're going to be doing
optimizations as we go and one of these
optimizations is going to be using
template level subscriptions this sort
of keeps the subscribe at the template
itself once the templates loaded then
we're going to subscribe to the correct
data so one thing we want to do is in
our recipes the client file we want to
say template dot recipes dot on created
unless the first time we're seeing on
created what we can have in here is now
a function like so and now inside of
here what we want to do is set up this
auto run so we can say first of our self
is equal to this okay now we want to say
self dot
autorun now we want to say inside of a
function here now don't worry about this
self dot autorun essentially what this
is going to do is unsubscribe us from
any sort of old subscriptions that way
maybe in the future once we're on a
specific recipe with an ID that we're
getting from a URL when we go to the
next recipe we're not still subscribed
to the previous one okay so we can now
say self dot subscribe now we can
subscribe to our recipes here so we can
say recipes and of course I need to make
sure I spell things correctly
okay so recipes in self dot subscribe
now if we head back to our page you'll
see that we once again have all of our
recipes being at it so this is really
super great they all just showed up here
no big deal and we're now subscribing to
this at the template level that way if
we want to reuse this template ever
right if we ever want to reuse the
recipes template anywhere else that
subscriptions not going to be tied to
the route and it's not going to be tied
to anything but the template itself okay
so now that we have our template level
subscription setup let's go ahead and
delete this commented out code is no
good and let's head to our recipes HTML
we now have access to something that's
pretty cool what we can now say is
bracket bracket if template dot sub
script shuns and bready and camelcase
here
so if template dot subscriptions ready
make sure there are no spelling errors
there we can now wrap this entire
section and an if or we can actually
wrap in just the looping recipe so let's
actually go ahead and do that
so we can put these inside of the
section here that way we can still
maintain these styles of this okay so we
are now iterating over those what's cool
is that you don't have to end this if
here you can say else and then we can
just simply out put in a paragraph let's
just simply say loading okay now we can
end this with an if like so so now what
we're going to get is while this is
loading our recipes it's going to say
loading and then once they're loaded
it's going to then replace that data now
the thing is here is that this
information is going to load pretty
quickly one we're on a local host a
local database and there's not a ton of
data so we might not even see that
loading text in here at all however it's
a nice thing to have maybe you could
throw like a spinner or some other
loading animation or anything like that
it's sort of common practice if you have
seen sites that are loading a large
amount of data so we now have our
subscriptions set up on the template
we're using if templates that
subscriptions ready to make sure our
content is loaded and we are good to go
here so in the next video we're gonna
show you how you can get data out of the
URL parameters and that we can use that
to land on a very specific recipes
individual page so as always this is
Scott would level out tutorials if you
have any questions or comments leave a
comment the video or hit me up at
Twitter or Facebook at level up
tutorials I love to hear from you thanks
for watching and I'll see you in the
next one bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>