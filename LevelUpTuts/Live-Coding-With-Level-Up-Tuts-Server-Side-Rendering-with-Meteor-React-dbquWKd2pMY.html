<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Live Coding With Level Up Tuts - Server Side Rendering with Meteor &amp; React | Coder Coacher - Coaching Coders</title><meta content="Live Coding With Level Up Tuts - Server Side Rendering with Meteor &amp; React - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Live Coding With Level Up Tuts - Server Side Rendering with Meteor &amp; React</b></h2><h5 class="post__date">2017-06-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dbquWKd2pMY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello
hello hello hello
is everybody getting good audio here
does this audio sound good don't want to
have a issue like last time
if you notice anything weird sounding
audio-visual whatever let me know I'll
try to have these comments open so what
I'm going to be doing today is hopefully
adding SSR server-side rendering to the
level up store there's a number of
issues getting in the way of that first
and foremost all of my components are
currently living instead of the client
directory which is not ideal for this
it's not going to work so I need to move
everything essentially to imports and
have the app restructured so it's going
to be a little bit different it might
take me some time here I've done
server-side rendering with reactor
before but I am NOT going to promise
that this is going to work because these
things are your little annoying kind of
complex and I haven't found it to be
super turnkey so to say so let me close
some of these tabs here first and
foremost I'm going to be using a SSR
package this is going to be SSR WPO SSR
and this is pretty much a standard I
think for doing this kind of thing here
so what I want to do is head down to
usage and you'll notice there's a
massive amount of dependencies to add
now I haven't necessarily found all of
these dependencies to be necessary this
might be one of those things where I had
all these and remove some as needed me
go ahead and copy that head to my
terminal like I said I have done
server-side rendering before on a react
site with reactor out of 4 but that does
not mean that this is going to be smooth
in any regard that's part of the cool
thing about these live coatings is that
I can just hack away and mess up and
whatever yeah so here we are adding a
whole bunch of dependencies I'm planning
on doing more meteor tutorials more like
more structured meteor tutorials so they
will be coming
I wanted 1.5 to come out I wanted to be
able to spend some time with 1.5 before
I dove into recording it but that is on
the way here also we just recorded our
third episode of the syntax podcast
today none of them are available yet but
they will be soon so west boss and I
have started a podcast you can find out
more at Syntex fm I don't believe
there's a site you can just follow us on
Twitter right now at syntax fm either
way keep your eyes open for that it's
going to be in all things web dev
podcast and we're both really excited
about it so far we've recorded three
episodes and they have all turned out
excellent ok ok so check it out just
installed a whole bunch of dependencies
now I'm going to install the actual
server side routing package itself
meteor add SSR okay WP o : SSR now
although this is all kind of doing its
thing here
I should plug in my computer because the
battery is going to die hold on one
second
I am NOT on 1080 I should be on 1080 if
I'm not it's maybe your internet
connection
I need to check the dashboard it says
medium health I'm not I'm not
downgrading the streaming quality in
here so there is no intention for this
not to be HD if it's streaming not yeah
no it should be 1280 can you change your
stream settings itself quality 1040 yeah
it looks like 1040 is the highest weird
I'm not telling it to be 1240 and I use
the exact same settings as I used last
time so well that's great
see stream options yes I get that it's
480p I'm seeing this yeah I'm trying to
figure out why that is
where do you see I have it scaled on
what screen here yeah I see that 480
East that it is 40 but I don't see where
that setting is set anywhere in fact
video capture preset 1280 streaming
yeah hold on I don't know why there
would be ice I just had this hold on
second let me stop record okay
okay good let me extend this out here
there's always something it's weird I
didn't change any settings from last
time so I have no idea why it's deciding
to be a baby right now okay okay finally
done with technical no I don't want to
close this okay back to SSR okay let me
make sure my site is up and running what
I want to do here is I want to move
everything over everything that is a
inside of the client folder needs to be
test test test test test
yeah I don't know I'm wondering if this
computer is just struggling through this
like I said I didn't change the settings
from this time to last time so I'm
wondering if it's my network computer
what's going on here yeah it looks like
it's my network so yeah let me bump this
down
test test test test it says health is
good so let's hopefully this is good
here I actually don't have the best
internet signal to be honest that's just
how it is so hopefully we'll make this
work
I had technical issues obviously are no
fun so
so I want to start moving stuff over I
have this whole client directory I feel
like most things in here can be moved
over
I kind of want to be careful with how
I'm doing this I guess because this is a
decently large site so first and
foremost really the the main part of
this SSR if you look at this one I
already have done is we basically just
have two index files we have index file
on the server this is just this example
is a little sloppy here I'm just using
this as a thing but really what we're
doing is we're importing this create
router in from the create router in from
this meteor package is SSR package and
because of that we're able to use it and
we don't have to do this sort of on
startup thing that we're used to doing
just
and so sorry about that just trying to
get things situated here okay so
basically instead of having that meteor
on startup that we would typically do I
wonder if I have this commented out
somewhere here no it looks like all we
really are doing are passing in an
object in this create router method and
then we need to pass in a prop or a
component we need to pass in a component
to this main app prop in the create
router method here so main layout in
this particular case is really all it is
and then we're using their lager to let
you know that the lager has started when
that's all set up this example is above
basic as it gets and I'm hoping that I
can just simply use this kind of thing
in the level up store so we're going to
see just how you know how rocky this
gets so I'm not promising that SSR will
be working by the end of this video or
anything but I'm going to attempt to
just get it up and going like I said
stuff never any fun and I definitely
know it can be a giant pain sometimes so
let's go ahead start moving stuff over
and the idea will be to get this working
without SSR with the same setup that it
has so where is my meteor start up stuff
is all within routes here so this file
is going to stay well now I'll have the
meteor start up on client loading up
this stuff like I said this is going to
be a bit of a struggle through just like
last time which is a-okay with me it's
how I like to work so we have our
imports folder which has a client folder
which has a bunch of stuff in it which
is just UI actions in charge I'm going
to make a new folder that's just UI for
the whole user interface side of things
and I'm going to go ahead and grab
everything that's in client and toss it
into UI literally everything and I'll be
maybe moving some stuff back and
obviously this is going to cause this
whole thing to break maybe open up my
counsel now we can have a
ton of errors here
hey sorry I swear I thought it was
organized but all my stuff's dying
everything's running out of battery ok
so as you can see here there's clearly
some issues the site has no idea what to
do it's still building the build process
takes really super long because of the
streaming so last time you may have
noticed that that the build process took
a long time and unfortunately it's going
to be that way again until I am able to
get a new laptop which should hopefully
be sometime this year oh yeah come on
it's taken a long time
yeah I would go Linux I have a triple
boot on my hackintosh that does Linux
I've installed Mint on my macbook air
I've done a whole bunch of that stuff
but the end of the day there's too much
software that I use for Mac right now
although we'll see who knows okay it
looks like that finally finished
building so obviously we're not going to
get anything working here because I just
moved all the files and none of the
paths are correct but I'm definitely
like a f you know put things up get a
bunch of errors fix the errors kind of
person so
and our client I do want to have some
sort of an it file with a meteor startup
I guess I can just copy this one let me
move this one back in there into the
client folder imports move our an it
back into client
now let's see on this client
initializing I guess I kind of want to
one I want to tweak this a little bit
there we go so I want this to actually
render reactants start up but since I'm
already using the SSR package I think I
can do so with just by passing this
entirely and head straight to importing
our main routes file here I have this
whole router scroll to top app sort of
stuff I'm going to ignore this startup
stuff right here I'm going to comment
this out I haven't done this kind of
conversion before like I said so this is
going to be a bit of a struggle but I'm
going to make it work
I also need to export this app because
this is probably the first thing the
main thing I'm going to be using here
export
and in Mayan it js4 client I can leave
this I don't know what this is oh if you
use okay yeah
I'm gonna leave this stuff as it is I'm
just not going to touch it simply and
I'm going to in my in it or index
whatever and let's see how much this
stuff I actually want right now let's
grab it all
and obviously we don't have a main
layout here let's get rid of that I do
have as an app so I want to import app
from let's go imports and I believe this
is in layouts nope totally wrong oh it's
in the routes file
yikes what okay that should just be its
own file again just like last time
there's this is a like I said this is
one of the first react sites that I
built so while I am definitely steadily
updating this code you'll see a lot of
differences if you watch the last live
stream I've since removed tracker react
completely in favor of using decorators
for bringing in all of my meteor data
and stuff like that there is still
certainly some weird legacy code like
having the app component inside of this
routes file for some reason I've seen a
lot of red here app is defined but not
used okay yeah these things are defined
but not used defined than I use depend
of a night okay cool cool cool cool cool
this a theme is material design I really
like this one and yeah cool okay
again these live coding videos that I'm
doing aren't necessarily meant to be me
showing you the definitive way to do
things this is me struggling through
things that I've never done or have done
once before in a different context and
just stuff I need to do anyway so might
as well see how somebody works and
there's a lot of different working
styles people do a lot of things very
differently so I'm happy to hear anyone
else's style or if it's something is
weird or whatever you know shout it out
no Biggie's okay
so I've seen it a lot of red here that's
okay but I need to run this create
router the app needs to start up at some
point too it's like actually working
somehow and I'm not quite sure why to be
honest
I really wonder why this is working at
all it is always good vs code is my main
text editor I like it because in large
large projects it stays SuperDuper fast
I was using atom a lot and atom bummed
me out because of its performance for a
long time and then you know it got
better sort of it got a little bit
better and then my project started
getting bigger and it got very worse it
was just like painful slogging through
using atom so a vs code is a lot like
sublime text to me in terms of speed but
in addition has some awesome get
features and stuff like that of which
you can check out in the vs code
tutorials that I have in this channel so
I just pasted in this create router
where I'm setting the main app which is
the property that this server-side
rendering package needs and then I'm
using app for my imports into our routes
and then it's logging router has started
now keep in mind this should just be
client-side at least uh we will see if
this works
so this works I am getting some errors
type is invalid forgot to likely to
export a component register target
container is not a Dom element I don't
know necessarily where these errors are
coming for but again I'm not but wasn't
necessarily anticipating this to
actually work at this point so obviously
there is no server-side rendering like
if I'm showing here we're still just
where's our div either way we're still
just have this body there's like nothing
in it or appending our stuff to it what
I want to do is let's go ahead and I'm
gonna temporarily comment out this
index.html that I have in here just dot
index study HTML so hopefully it doesn't
find it I'm going to make sure also that
there's nothing causing this to work
that I'm not expecting as in like this
startup code is commented out so this
should just straight up not be doing
anything so there's really nothing on
the client side of this app telling it
to work other than the server-side great
router code here let's actually do an
experiment here like I said I wasn't
expecting this to work at this
particular moment even client-side even
with errors I was expecting this to just
give me a white screen so after this
actually compiles I'm gonna head over
here I'm going to comment this create
router out and see if it breaks because
I'm expecting it to break okay either
way it looks like it says container down
okay it looks like it's breaking now I
wonder if that was like a caching thing
where I was just showing it because it
was cache before
okay so yeah I'm getting just total
white screen I'm getting a body with
nothing in it no idea why that was
actually working before or whatever
whatever see so basically all we have in
this package is you need this client
type call and you need the server side
call I actually don't know if you can
have one without the other and have them
both working so let me go ahead and
start to get this server side one up and
going because it's like very very super
similar I'm going to copy nearly all of
this stuff to paste in this init down
here it's not a total of necessity here
okay so this is kind of ugly the way I'm
doing this right now but we're getting
it up and running and then I'll fix it
later this is the server side init file
which is basically just a server-side
file being loaded it's not being fired
on startup or anything like that notice
how I have meteor on startup there's a
lot better ways that you can organize
this stuff by basically having a single
server init file that then loads
whichever server files you would like
them to from your import server folder
as you can see I'm not doing that here I
have just a whole bunch of server files
in here it's not a great way to
structure your code its legacy stuff
like it says when I first react meteor
projects and I'm just now starting to
update a whole bunch of ways how much
programming experience do I have total I
don't know quite a bit I started as a I
went to college for music I was a music
student and started doing programming
music stuff so I was creating
synthesizers I was programming video
editing software and stuff like that and
that led me into web stuff which so at a
college I worked as a whole bunch of hot
jobs while I was trying to get a web dev
job so all of you people who are
struggling looking for web dev work or
if you're just getting into it know that
it would took me years of just like
practicing and practicing and practicing
and local shop took a chance on me when
I wasn't super good dev and I had done a
whole bunch of odd jobs and just grew my
career from there so it's been a while
my first web dev job was in 2011 so six
years but I've been building websites
for since high school so you know
professionally I've had a professional
job since 2011 but it takes a little
while you know if you want to get good
at this stuff okay so here check it out
on in my an it server file again we'll
see if this works I'm bringing in the
routes file from imports which
essentially just has an app component
the app component is a functional
stateless component that is essentially
just a switch which has three of my main
routes one for the checkout one for the
receipts and one for the everything else
and we're going to see if this continues
to work or actually starts to work
if I get this error again I'm going to
google it I have no idea or I'll just
hand the issue queue already the name of
the theme is like it's the material
theme it's something material purple
something color theme color theme is
material theme pale Knight if you look
for it under material theme it's one of
the options that exists there I'm also
on the insiders build a vyas code which
isn't really that different but it's
these updates all the time so yeah
that's that and I'm still waiting on a
big old loading right over here
even though this is done compiling we
will see what that means I should
actually call these like live struggling
through coding rather than live coding
because I'm not really picking topics
here that I know super well so this will
give me a chance again to once to
mention our podcast that West's boss and
I are recording syntax head out to
Twitter look at the syntax fm we just
recorded our third and second episode
today they're going to be out very soon
a lot of great web dev stuff talking
about react talking about CSS
preprocessors talking about general
JavaScript stuff and we're hoping to
make it fun and all the time weekly
thing so keep your eyes open for that
doing some minor advertising here while
I wait for this to load I have no idea
why this is taking so long
compilation stuff oh it is rebuilding
itself I should have checked this okay
can I find module import clients actions
state actions now that makes a whole ton
of sense so
it cannot find this on the server side
because this is a client-side file now I
need to just move this out of this
client folder it's can't find this
inside of here I have a client folder
where I have an actions folder and a
state actions I'm going to just drop in
these yeah I'm just going to drop in
these actions in here I'm also going to
drop in chart over here I'm not using
chart right now just to get it out of
this client folder eventually I need to
be non-client stuff we'll see if that
finds this now oh no it's not going to
find it obviously because the path is
wrong so let's look for any place I have
actions
I don't think I'm importing this that
often so it's not just I should look for
this whole string here find and replace
it it might only exist once
okay so client actions are now just
actions the only actions I really have
are triggering let the main nav
triggering the login screen okay so this
is loading up here you're going to see
if I can actually get server side
rendering working again in theory this
should be easy
according to these Doc's we simply just
have these two functions one of which
runs on a server side one of them runs
on client side you have the option of
passing in a whole bunch of stuff like
your your reducers your middleware your
that sort of stuff the I 18 n platform
transformers I'm not using any of this
stuff I'm not using Redux I'm just using
meteor direct so I simply need to pass
it in this optional store subscription
are not optional stores I'm sorry these
main app or the wrong thing either way
this package is pretty darn dope it's
deep there's a lot of stuff to it does
everything you need to do but also at
the same time has proven to be very
simple to me in the past but it was a
simple project this is a less simple
project
if I had to guess once this even gets up
and running I'm going to be seeing
surfer errors about particular packages
that don't work on server side or maybe
I'm referencing the down window or
something like that so we'll see it
we'll see what happens here again
apologize for the slow build times this
streaming is just killing this computer
so while we're waiting for this to
actually start up does anyone have any
questions comments for me or anything
like that that can answer while I'm just
sitting here
he cannot find import state client
actions you know I don't know why you
can't find that because I change the
path so I am using a sure KSM 32 I want
to look at this thing maybe let you know
it's the sure KSM it's one of the mics
they use an NPR good buddy of mine who's
an audio engineer picked it up for me
now why can't you find this import
client to action state actions there's
this this path should not be loaded
anywhere I'm not telling this to load
anywhere okay now I'm getting a
different error that's good cannot read
properly then of undefined in the knit
on server of line 19 so a knit server
the website is going to be syntax dot F
M but we haven't made it yet so right
now the best course of action would just
be to follow us on Twitter at syntax F M
it has a yellow and black logo that just
says syntax
I think Wes and I both tweeted out about
if you had to Twitter so uh it says it's
not finding the then of undefined so fun
here let's get rid of some of this stuff
I'm going to get rid of having my
account email templates stuff just going
to save this good good time to confirm
that app is in path here and let's see
so head back
imports yet it should be fine
my biggest project so far has been a web
app called atcha it's not done but it's
pretty massive get at calm you can head
there and mess around if you want like I
said not done but uh definitely a
massive project sorry this is still
loading that's why I'm uh
and thusly loading endlessly loading so
this project get hecho comm is also
running very slowly because everything
is running slowly but it's a essentially
you could think of it as like a creative
surfaces booking application where
instead of just looking for people to
book you are also able to share like
hair inspiration it's sort of like
Instagram meets booking cool cool cool
little app but it's absolutely massive
there's chats there's notifications
there's accounts stuff there's just more
you know social media kind of stuff than
you can possibly imagine in here and I
would the solo dev on it the thing is
crazy
like I said still in development so if
you find stuff that's not working that's
probably accurate ok I'm still getting
this cannot read property then of
undefined server into it and then line
19 let's figure out why the heck that
could be cannot read property then of
and it's referring to this create router
right here obviously this changes I'm
making are not going to change this
they're just presentational
i museu this is meteor this is
JavaScript I don't need to react in this
import I don't need router down in this
import I really just need this create
router and logger wonder if that helps
it all God these build times are kind of
killing my vibe here
this would be a good time to plug my
courses so that I can afford to buy a
new laptop head of restored a level of
tutorials comm check out I have a bunch
new series up for sale there and that
would help me out have a smoother live
stream because this thing is struggling
cannot read property then line 15 yeah
yeah yeah
why Cannot you read light why it's
saying it's saying this is undefined and
it doesn't make any sense here create
routers defined app is defined main app
is being set to app this is the exact
same setup I have going over here that's
working see actually there might and no
oh yeah okay that's a little small
difference here check this out this is
interesting
so in the climb this isn't a working
example I have by the way this is a much
simpler site if you're just watching now
the client-side version I'm using a
promise to get when the logger has
started in the server side version of
this code I wasn't I'm not quite sure
why not
let's see if that's how their Doc's are
as well they're ducks have a dot then
and their server side they don't ok so
maybe just the client-side is returning
a promise here I did no idea it makes
sense I thought it that actually kind of
bugs me because it's like a you know
extremely similar right it seems like if
you're going to keep it similar and if I
don't know whatever whatever if it if it
works it works we'll see if this works
oh yeah that's a lot of errors cool okay
so the good thing is we have a bunch of
different errors now meteor dot
subscribe is not a function on imports
containers current user yeah it's
letting us know that dot subscribe is
not a function on the server side of
things yes SSR is server-side rendering
so that way that when we open this
webpage up in a view source you actually
get the HTML output instead of blankness
it also allows for better caching and
better load times server-side rendering
can speed up your loading pretty quickly
okay me your dot subscribe is not a
function on a container that's being
loaded on the server side you know it
makes me wonder like what is the
strategy for this and if we just google
meteor dot subscribe is not a function
I'm guessing that somebody will have a
have an answer here as to how they
approach using meteor subscriptions on
the server side like I said done this
before without like iron right or
another one of these as it's our
packages
you
if anyone has done meteor and react SSR
server-side rendering before and I've
worked with meteor data let me know how
you got around the subscriptions being
loaded on the server-side let's see this
hmm so I would have to assume that see
store subscription object containing
your applications reducers the problem
is I'm not using redux here I'm not
using reducers
and because of that I believe their demo
version or their demo project might not
be super applicable here see
imports store yet hmm and see
let's think about this for a second
hmm how are you getting yeah coding is a
significant amount of googling so like
yeah the issue here that we're running
into is it's looking for meteor dot
subscribe on the server side of things
and it's saying that subscribe is not a
function on the server side so if anyone
like I said has any ideas about how we
get around this let me know otherwise
I'm going to keep searching around here
so thinking out loud as well
do
let's do sub scribe see if they have
anything
you
okay think about this I mean you're dead
subscribe is not a function current user
I wonder if it's just hitting current
user because that's the very first
decorator it's hitting let's see it
loads up my app loads of app app is
declared in routes routes is hitting
this main layout one and main layout I
believe looks for current user
I can't air flare I would really like to
air flare by the way whoever said can
you air flare
I actually I throw really terrible air
flares in my backyard all the time
so this is funny it's not where is it
actually even loading up this and my PHP
and header and header let's see
yeah with current user so it's hitting
this container current user which is
located in the current directory
containers yeah current user it's not
able to find current user dot subscribe
on the server side
I swear how did how do people solve this
before I use flow router SSR and I
didn't have to do any of this so that's
where I'm kind of tripping up
I'm checking in to see how flow rudder
is it necessary to import meteor yeah I
don't know it's one of those consistency
things right if you want to if you want
to have a like consistency with your
imports then yeah you want to import it
here but if I delete this line will this
application still work you betcha it
will still work so it's one of those
things it's like well do you want it I
have that extra bit of typing and be
consistent or do you I don't know
so you'll see some files that certainly
do not have meteor being imported and I
guess inconsistency is consistent it's
consistently inconsistent yeah
life coding is tough you're trying to
think you're trying to think all the
time like I said I'm trying to pick
topics of stuff that I'm like super good
at or have done before because I mean
what's the fun in that I could just be
doing a actual recorded tutorial in that
case let's see how SS are for flow
router handles subscriptions um let's
see it's important to note that in order
to simulate the client state on the
server available collection that you
subscribe to so this actually leads me
to what could be an issue here because
float about our SSR is handling the
subscriptions for us but but this is not
handling our subscriptions for us in any
way that I can necessarily tell their
example uses Redux so that's what's
causing the rift here is that there's
let's see let's see if I can just simply
find someone else using this without
redux
that might actually
I believe that you need the brackets
when you're importing meteor here this
is how you import any sort of meteor
package is it's not a default from
meteor - era slash meteor just like
we're importing with data here as far as
I know meteor is not the default export
could be this is just how I've always
seen it and I haven't ever tried it
without it the brackets right because I
just thought it was a we could try that
once this gets working I just delete the
brackets and see if there is a default
export for meteor but I don't know if
there is okay back to this SSR let's go
ahead and without Redux let's go
I don't know if meteors the next big
thing it's a certainly thing I really
like and I think if people use it they
can see why people like it it takes care
of a lot of simple things for you and
I've heard a lot of good things about
next is next is a kind of similar in
some ways takes care of like the build
process for you it just takes care of
routing that sort of thing I created
github our Tompkins
ah this is great so let's see though
let's see
rewind I'm not getting any sort of
errors obviously I don't even know this
style components issue is obviously not
something that's going to be what I'm
looking for
I just I'm hoping to find some other
examples of this this library and the
action be sweet if there was like a
listing where you could see like open
source projects that are using this
particular meteor package
so the brackets on an import in an
export are really just to denote whether
it's a default export or not if you look
at something like this main nav if I
scroll down here you can see I'm
exporting default to main now and then
when you're importing this you do not
have to use the brackets however if it
was simply just export bracket Main Ave
then you would when you're importing the
reason why you do that is if you were
exporting more than one thing from a
particular file you would not use the
default export if you have one thing
that you're exporting use the default
export because it's nice yeah I don't
know if necessarily miss media missed
the mark it's still really super good
right and it keeps getting better
religion 1.54 meteor has all these great
dynamic importing and code splitting
stuff to reduce bundle size it's a
really great platform that continues to
improve I think people are always
willing to jump on the next big thing
but like to me meteor is still super
duper viable to build a platform on
really the only problem with it is that
you're stuck with MongoDB and to be
honest I haven't had any projects where
I've like not needed MongoDB MongoDB has
been absolutely fine for me so but I can
see that being a reason why people would
be turned off of meteor but if I'm going
to be building this or maybe like an
Express Express stack app I would just
fire our meteor if I'm using bongo I'm
using meteor that's pretty much just the
way it is
and you know what like some of this
stuff I could avoid right I don't have
to subscribe to this data but I don't
want to kill my subscriptions because
like in this current user with data
where I'm getting my data I could simply
chest be using pulling this data
directly from the database with a meteor
method or something like that then I
wouldn't have all these issues with it
being able to find subscribe on the
server side about no SSR SSR no SSR
package for react
I shoulda known that typing in no SSR
was not well actually did no good let's
see if this works
the users collection is oh the users
collection is created server-side it's
actually not server-side it's both right
now all of them are both all the
collections are both so that shouldn't
be an issue of that there's this great
package here that I used before with
FlowRider that is by arunoda
which allows you to use rect component
for Don SSR friendly components the only
thing I don't know is if this is flow
router specific there's a chance that
this is like flow router specific or mmm
let's check out the source here let's
see what this package actually does does
because I've used this before but I've
never dove into it so really what we're
just simply doing here
children on SSR defaults asar can render
the state
so it looks like if it can't be
server-side rendering its rendering a
span but it's determining that via a
prop which is can render in the state
now I have a family like this is going
to be flow router only but we will see
well it doesn't say flow writer I don't
know let's try this out let's try if
this gets rid of this error then this
could help me out here at least
temporarily until I can figure out
what's going on with subscriptions and
that way you can at least get
server-side rendering working in some
regard and that this whole thing won't
be a total waste of time
so let's come in here I'm going to add
this package yarn at react no SSR like I
said this is essentially just a a
container wrapper component that allows
you to say hey you don't render this
server-side which could potentially save
us some stuff here with this meteor dot
subscribe is not a function if it
obviously isn't looking forward media
dot subscribe it won't be able to find
it as not a function so header is the
one thing where I'm subscribing calling
header and main layout let's import this
they're going to see this works with a
non flow router set up here the code
example or the code itself didn't lead
me to believe it would but the repo
literally says nothing about SSR or flow
router only so we're going to see this
is still it's taking a long time to
download so let's give it a second here
I'll answer some questions well this is
all getting download to set up whatever
yeah you know I like vs code a lot more
Adam as much as I love aspects of Adam
it is slow envious code is fast in
particular doing a find and replace over
you know a giant project if you're doing
a find and replace or finding files is
one of the areas where vs code really
really shines because not only is the
interface way better but it's SuperDuper
fast where that was a huge huge concern
of mine with the atom ok so what we're
not seeing is we're not seeing a giant
wall of pink errors which is a cool
thing to refresh this localhost page
okay so we're now getting another one of
these errors but the great news about
this is it's now saying that products
list is meteor dot subscribed as a
function which is great for us because
that means this is no SSR is certainly
working which means that I can
incremental II add SSR so as I figure
out what to do with these subscriptions
and how to do that I can then add SSR
briefly to those pages whatever and if I
really really wanted to I could come in
here and wrap this switch in a no SSR
and that will like instantly fix
everything the only thing that's not
going to do is have a lot of the key
stuff that we actually want displayed
server-side rendered so instead of that
let's dive into home here let's wrap a
products list in this no SSR and let's
continue to move
I would not say VIN is greater than
these things there's like nothing that
makes me less productive than VIN it's
one of those things that like I think I
don't know I don't know why people like
it so much it's great but like it's
really not intuitive at all it takes a
long time to get good at
I don't want an application that I have
to learn like the piano or something I
want an application that I can just fire
up and start using I prefer having an
interface I prefer being able to click
around yeah them just doesn't do it for
me I know that sacrilege but like I not
a fan not a fan of vim or Emacs or any
those and but you I mean the whole thing
is you can become a hotkey junkie
envious code and you can become a hotkey
junkie in any of these platforms and not
have to go through this intense period
of growing pains where you're trying to
figure out how to actually use the thing
just personal opinions don't begin I'm
going to definitely use whatever makes
you most productive kind of person and
vim does not make me more productive so
I don't use it but more power to you if
you do
okay so I just added no SSR tags to this
car Trapper and we're going to see right
now I'm basically going down the line
I'm just trying to get this homepage
server side rendering side something to
show at the end of this live stream but
really what we're hitting is not knowing
how to get work with meteor data and
meteor subscriptions on the server side
of things here so I'm pulling in all of
my data using decorators and I don't
know if that has anything to do with it
I never had issues with these kind of
things before okay now this is actually
a fun one meteor code must always run in
a fiber try wrapping callbacks non
meteor libraries the famous fiber error
here you've probably gotten this error
if you tried to do anything in meteor it
looks like it has some issue with action
menu the action menu is being called
right here now the action menu is pretty
simple the action menu is what's shown
on mobile on the LevelUp site I guess I
am using a decorator to grab this user
but I'm wondering if the issue overall
here with this data stuff is that I am
using these decorators Mike it could
very well be I'm not quite sure to be
honest this is my favorite way to get
meteor data is that this with data
passes in used whatever you're giving
this as a prop yeah I know some people
don't like decorators but I really like
decorators uh for a lot of reasons all
right and scroll down here I'm right now
like I said I'm wrapping all this stuff
and no SSR which is like defeating the
entire purpose of doing server-side
rendering in the first place right like
why would you do server-side rendering
if you're not actually getting
server-side rendering well like I said I
want to have something to show here so I
want to get this at least working in
some regard with server-side rendering
and then I can go through and fix each
of these individually off camera maybe
and give maybe like a talk about why it
wasn't working how to fix it sort of
thing but live coding all the stuff sort
of
right to think about and do at the same
time talk I also have done a lot of
talking today we like I said we recorded
two episodes of our podcast so I've been
talking all day for the person wondering
uh what I'm doing I'm adding server-side
rendering to the level up store now I've
done so using a package SS r WP o /s s
are low inception okay session is now
not defined i'm cart overlay so once
again man i'm just adding on all this
stuff here i'm telling all this stuff
not to server-side this card overlay to
be honest though like doesn't need to be
server-side rendered anyways it doesn't
even show up typically but I'm using a
meteor session variable to have it be on
or off
yeah I need a definitely refer I have a
giant boot that I drink from I wonder if
that will make an appearance at some
point it's like it's a Das Boot it's
like this giant 2-liter glass boot i
trick water ah - I've been chugging
boots all day okay
admin toolbar I'm guessing admin toolbar
is going to complain too but we'll see
pretty sure I'm checking here yeah with
current user so my prediction I'm going
to get some complaints about the next
thing on the list by the end of this I
swear there's going to be like two
things that our server said rendered but
I'm still going to declare to victory so
this is how you learn how to develop
stuff and how you have fun with it right
I'm not my favorite things about this
stuff is problem solving so you you have
the ability to just come in here and fix
all bunch of problems and in that
process sometimes that process is more
valuable than just simply knowing what
to do all of the time right knowing how
to scramble and fix things and then you
know figure out what wasn't working and
why it wasn't working later
okay
no SSR let's move this down here yeah
the best way to learn is to make tons
and tons of mistakes absolutely and in
my opinion it's it's fun to make a ton
of mistakes on projects that are fun
rather than projects that are like I'm
super important so and carve yourself
out a fun project that is like the
stakes aren't so high because it's last
thing that it's fun to do is learn while
you have deadlines and people really
demanding your work could be done so
make something fun like these sites
these lava webstore the level up Ted
site I have a few other sites my
personal site I use these things as just
playgrounds to learn new techniques and
to mess around and learn new packages
and for instance nothing's ever easy as
they kind of claim it is right so this
project shows like a two liner of code
to get this thing working and obviously
as we're all seeing here it's not so
simple because we have to think about a
lot of other stuff yeah so the the
errors are basically that we're not
having access to subscriptions on the
server side
now in other SSR packages such as flow
router SSR it handles that for you but I
there's no examples or docks in this one
that shows you how to do that so check
it out our sites up and running and if I
do command shift or option command you
check it out yeah okay so if we head
here you can see the site loaded it took
a long time it's not because it's
supposed to be a long time it's because
this computer is struggling while I'm
streaming videos here but if we head to
the source this is what our code looks
like we're no longer a whole bunch of
imports and a whole bunch of blah blah
blah a whole bunch of blank stuff we're
actually getting real HTML and although
it's minified so it's hard to see here I
have some very real
even my meta tags are all rendered in
here
here's a div with the billboard with our
h2 in our title next level tutorials so
just like that I have the home page
being server-side rendered now the one
thing you'll notice is that we told the
header not to server-side render we told
the featured products not to server-side
render we told the car to overlay not to
server-side render but they're all still
here they're all still here because
check this out when i refresh you're
going to see a flash of stuff that's not
working so this part a pop here is white
right now not working not server-side
rendering but it's loaded all this other
stuff so quickly you can see the
immediate benefits of server-side
rendering obviously this is like an
really drawn-out
example because this is taking so long
to load locally here but you can see
that this stuff that was server-side
rendering loaded up almost instantly
because of caching and now that it's
loading up everything else is loading up
the client-side stuff the products come
in the header comes in and we're all
good now on this header there's some
things that could be changed I'm using
that decorator to bring in the let's
pull this up I'm bringing in some things
like the current user right so on the
header I'm bringing up the with current
user and I have a decorator to grab a
session variable for the nav toggle
these two things don't have to be in the
header you could scope these down for
instance I don't even need this session
header open in desktop at all so you
know really I could put that on the menu
in the main nav whatever and likewise
the with current data the only place or
with current user the only place I'm
using the current user is to check
permissions right to say hey if the user
is a pro then don't show them that Pro
link now that's not even that necessary
so that link itself should be a
component and that decorator can contain
that component itself so boom just like
that it worked and you'll notice now
because we're all running client-side
right we change pay
ages the page opens up fine but if I
were to refresh this we're going to get
a whole host of subscription error skin
yeah there we go meteor subscribe is not
a function for same reasons as before so
in between this video and the next time
I see you just like in between last time
and this time when I was struggling to
get react writer for all going I'll be
fixing these errors and I'll be
reporting back one of the big things
this is now that we have server-side
rendering working in some regard is that
I was trying to figure out how to have
this cart if you remember triggered by a
route and then we were doing it
basically by parsing a route and it
worked but it wasn't like perfect the
solution is is that this is react this
cart is an individual component I just
set up another route which is simply
just forward slash checkout if you come
to the site at forward slash checkout
you're hitting the cart but notice I
also have this cart right here flying in
as an overlay and these are the exact
same component ones just in an overlay
that flies in controlled by a session
variable the other one it has its own
page same component beauty of react you
just reuse that stuff by dropping it in
like LEGO pieces cool okay so we got
server-side rendering up and running
which is great news because at some
point in this talk I did not think that
that was actually going to work so now
next up for me is to figure out the
subscription piece start wrapping other
things you know maybe making the
decorators that I have a little less
specific so I can render the header and
everything ahead of time but other than
that it's just going to be enhancements
from here on out to go over the code I
simply just use this package and
installed everything that they said to
have here right
this is SSR WP o /s s R right and then
we have all of our files all of our
components are not in a client or a
server folder but are just in imports
now you should probably put these a
little bit more organized and like I
made this UI folder and that I never put
anything in there so chances are I'll be
putting my UI components in the UI
folder
I'll have my actions outside of it I'll
have my containers outside of it but as
you can see here all of your components
are able to be rendered to client or
server side on the client side init code
I don't need the startup stuff whatever
but I am using this create router
passing an app okay and then on the
server side code I'm doing nearly the
exact same thing without the promise and
I say create router main app okay log
your info so this is cruising I love it
I love it it's working I'm going to
continue to improve this in the next
live coding episode we're going to
actually continue working on this site
because you know I don't want to bore
you while getting everything up and
going just repeating it stuff that we
did so I'm going to get this finished
with the server-side rendering and then
next week sometime we're going to dive
into send meteor 1.5 features such as
conditional module loading with react so
we can take this bundle side down we can
take this bundle size down considerably
because right now the bundle includes a
whole bunch of admin pages and admin
components that the user is never ever
going to see so if you I can use
conditional module loading to break the
admin section into its own stuff then
then we're going to be able to just drop
the file size down
we're also be talking about the
visualizer tool that came out with
meteor 1.5 and we're going to be showing
you how how how you import things can
reduce the file size and where we can go
to reduce the bundle file size overall
so conditional loading file size is
going to be the focus of the next one
well hopefully we'll have no technical
issues getting started considering I
first had audio technical issues in the
first one then video technical issues in
this one no technical issues in the
third one I just can't imagine and that
will happen again and again and yes I
will mix up the projects I will mix up
lots of projects because I have some
really fun stuff that I'm working on
I'll show it off and I built an app for
breakdancers to
use their moves and a whole bunch of
tools and stuff it's an app I'm actively
working on which I have some cool stuff
I want to show off in that okay let me
answer some questions if what extensions
am I using am using a lot of extensions
and see let me show my extension showed
installed into extensions here I'm for
hosting the level up Ted sites I'm
hoping hosting them on digitalocean I'm
using mop X to deploy them and I don't
love it I host a lot of other stuff on
Heroku with meteor and to be honest it's
a dream the only thing that's stopping
me from hosting everything there is
pricing because I already have servers
at digitalocean someday I will just move
it all over to Heroku which is nice
because they have a lot of nice features
and I kind of hate running my own server
all the time so my packages here I have
some things like a line a whole bunch of
themes a Babel I have beautify can I use
color highlighter debugger for Chrome
yes lint obviously you gotta have es
lint which is you'll probably see some
of my code changing while I'm typing get
history as a git log or line history
which is super nice let's see if I can
show that one off we do get you can uh
is it the line history yeah so view line
history prefer particular file is this
what I'm looking for there was an error
get Oh Oh for some reason it didn't like
that let's see if one of these other one
works good line history yeah this is
crashing I'm on um via Skoda insiders so
some of these might not be working I've
typically been working on a normal one
but yeah JSX JS snippets stylus language
the stylus supremacy a meteor meteor
snippet
it's a whole bunch of fun stuff nothing
really crazy you know I don't I don't
get too crazy with it I have all bunch
of stylish packages I have no idea why I
have so many because I bet they all do
the same thing and then style lint for
linting stylus react.js code snippets
though some of the react code snippets
that I like the most are getting up and
running with like a new file so let's
make a new file and you can do RCC seven
which is like a react oh it's not going
to autocomplete that but RCC are CC 7 is
a react component enter and check it out
it gives you everything where you can
use the static default props declaration
static prop types declaration this is I
like to make components right here so
yeah that's it nothing fancy okay in the
next video like I said yeah I'm going to
get bundle size down I'm going to do
conditional module loading and we're
going to dive into some of these awesome
new meteor features so check it out
thanks so much for watching I don't use
it dobby products anymore so I probably
won't be diving into Photoshop I just
don't like them that's not a popular
opinion I just don't like them I use
sketch I use an app called figma if you
aren't familiar with figma check it out
f IgM a it's basically for illustrator
syncs in over the cloud and stuff like
that and for photo editing I use
affinity photo
I like affinity photo it's really nice
but yeah last question how do I use a
different syntax color and JSX to
highlight you just want to make sure you
have the language javascript' react and
if your package is in JavaScript react
or if your code language is in
JavaScript react like mine is it'll look
nice that's it
cool so thanks so much for watching I
will see you in the next one I will have
more free tutorials up on vs code I'm
going to be doing some other stuff that
I have planned on how to become a better
JavaScript programmer take you from like
super basic to intermediate and I'll be
doing another livestream like I said so
check it out also remember a head over
to store dot level up tutorials comm I
have a new series on react native I have
a new series on sketch both are brand
new and super super cool I've been
working really really hard and as you
seen here at my computer is struggling
so stored out level up tutorials calm
always help it out next streaming will
probably be next Monday again barring
changes to my schedule but I will be
tweeting and posting on Facebook prior
to its start a little bit more so thank
you so so much for watching and I'll see
you in the next one bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>