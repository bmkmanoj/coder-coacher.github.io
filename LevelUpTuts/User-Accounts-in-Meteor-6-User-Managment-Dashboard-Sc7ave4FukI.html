<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>User Accounts in Meteor #6 - User Managment Dashboard | Coder Coacher - Coaching Coders</title><meta content="User Accounts in Meteor #6 - User Managment Dashboard - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>User Accounts in Meteor #6 - User Managment Dashboard</b></h2><h5 class="post__date">2016-04-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Sc7ave4FukI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up this is Scott with level
up tutorials and in this video we're
going to be building a user management
dashboard now we've already started with
the roles what we're going to do is take
it to the next level by actually
building out a user administrative page
where we can upgrade roles change users
and all sorts of stuff like that so
that's it going on that right now so
where we left off we have this not
authorized let's go ahead and hit ctrl M
open up our meteor tools and add to our
roles we just want to add admin just so
we can get to the dashboard because what
we're going to be doing in this vid is
building a user management dashboard so
we could say admin ok and at the center
facism the best for modifying these but
it works so we can do ctrl M and as you
can see we now have a dashboard as well
as user management and dashboard I
already had this users management in
here but as you can see the link takes
you nowhere
so let's go ahead and jump into our app
nav which is listed into our partials so
app Nev and I'm gonna change this path
to forward slash admin forward slash
users okay let's go ahead I'm gonna copy
this path and now we're gonna head to
our routes because obviously we need to
build a route so routes J s we have our
routes and let's go ahead and the first
thing I actually want to do here is
create a flow router group routing now
the cool thing about groups's allows us
to define a whole bunch of different
paths and layouts that are going to be
using the same prefix or route of the
URL so we can go ahead and say bar admin
routes is equal to flow router dot group
now this is going to be a method here
that takes an object instead of this
object we want to give this a path
prefix so prefix is going to be equal to
admin and not just admin but forward
slash
edmond okay so the prefix of forward
slash admin means every single route
that is part of the admin routes is now
going to be /add men slash something
else for instance what we want admin
slash users so this is gonna be really
nice because we can have our routes
totally group together in a way where
all of the URLs are going to stay with
the same prefix now we can go ahead and
have this a comma and say name is equal
to admin ok
and that's all we really need to define
our group here now the next thing we can
do is define a new route by admin routes
now we now have access to the route
method where we can say admin routes and
then inside of here we want to pass this
the actual route which is forward slash
users ok so the forward slash users
route is comma going to get and then now
this is just going to be like any other
float router route once we have defined
the group this really functions just
like this up here so we can really let's
just copy all this stuff from here so we
don't have to type this all the name is
going to be users and the action is
going to be render inside of a playout
users ok
so now we had our page which was
dashboard dot HTML let's copy this whole
page and let's make a new file named
users let's actually capitalized this
users HTML paste this in here you can
give this a name of users and again if
the user is an admin users otherwise
give them this nut oxer not authorized
we can head to our page let's go ahead
and head to dashboard now let's come to
users management so admin slash users
and you can see we now have the users
heading so what were you actually want
here is we want a table of every single
user on this site now obviously we hit
ctrl M right now you can see the only
user in the users object we have is the
currently logged in user that's because
we have the prototyping packages removed
from this if we head to packages you'll
see that there is no prototyping
packages so auto publish and insecure
are noted be found so that's fine
because what we need to do is let's go
ahead and publish all the user data but
of course this time we want to do so
with our newfound power of roles cool so
let's go ahead and head to our server
and we don't have any sort of publishing
it all right now because we haven't
really worked with any data so let's go
ahead and serve our new file and we'll
just have this be publish dot J s now
inside of here we can have a meteor dot
publish and we want to publish all users
okay so we're going to be publishing all
users and this is going to be a function
and inside of here what we want really
is we want a query to return meteor that
users dot find ok and we want to grab
every user so this is just going to be a
blank object okay so check this out this
might be a little interesting here I'm
gonna do this on purpose for a reason
you might be seeing this line right now
and already be noticing something but to
illustrate this I'm going to go ahead
and do it anyway so let's go ahead we
have all users let's set up a template
level subscription so on our users dot
HTML let's go ahead and create a user
dot JavaScript so in that same pages
file we have users dot J s now keep in
mind I'm going to be cleaning up this
pages file at some point here so if
you're noticing that it's getting a
little unwieldy don't worry about it so
let's go ahead and do a template dot
user with an S on created
and then we're going to have a function
now inside of this method what we want
to have is a function which let me just
type this here function now we're going
to have brackets like this now what we
want to do is say this dot Auto run and
now we're going to use an arrow function
you might be wondering why an arrow
function well I'll show you in just one
second we can have parenthesis equals
greater than brackets like this if you
don't know about the arrow function
check it out what the arrow function
does is it's not a shorthand what it
does is it actually preserves this so
now we can say this dot sub scribe and
then we can say all users if we were
having this be a normal function here we
would have to do this like var that
equals this and have that subscribe
before it to find the right subscribe
but since we use the arrow function here
we can say this dot autorun parenthesis
function then this dot subscribe okay so
check it out now when we head back to
our page you can see we have no issues
and if we hit ctrl M we now see
something very interesting
instead of having one user we have six
users now word of warning here you'll
notice we have all this information we
have the email whether the address was
verified we have the ID created at we
even have the encrypted password here as
well as the token information so this is
information that you are going to really
want to keep secure and right now even
though this page is limited to logged in
users let's say we come to here we're
going to get a not authorized
let's do ctrl M you can still see that
this object is is getting published here
the user has access to this information
so let's go ahead and let's go ahead and
have a bit of privacy here in this
subscription we obviously only ever want
all the users to be published to anyone
if they're in
admin so let's go ahead and use our new
ability and say if and we can say if the
roles that user is in role and you might
remember this or you might not remember
this this is a method here but in
meteors publish we can access meteor
user we need to access it with this dot
user ID
so if user is enroll for this that user
ID and we're gonna say admin then and
only then is this going to be published
so let's head to our page here and I'm
going to tab over I'm just gonna do a
solid refresh here even though the
standard one should be just fine here
you can hit control them see that the
users yep
users still exist I'm logged in I'm an
admin now let's head to our page here
can do control M and now you can see
after control MA the access for users is
completely blank now this is super
important because now if they're not
logged in I mean even if they had any
sort of access to any sort of
information on our site what they're not
going to see is all of the users now
what happens if they are a user but
they're not an admin let's go ahead and
create a new account register test at
gmail.com registered so I've now a new
email and what's cool here is that we
have access to my information but what I
don't have is I don't have the encrypted
password I just have emails I have the
profile and I have the roles and that's
it so I'm still not authorized I can't
see any data but my own and even then
it's not even a sensitive data when I'm
not logged in at all I see nothing but
now as a user who's an admin I have
access to all of the users cool so we
now have the correct information
published to the correct people so in
the next video we're going to take that
information we're going to build upon
our users
EML template inserted build out our user
administration dashboard which of course
we're going to be able to use to manage
upgrade and change your users so as
always this is Scott with level up
tutorials if you have any questions or
comments they become in the video when
you have a Twitter or Facebook I level
up tutorials I've recorded over 850 free
tutorials on YouTube and I plan on doing
at least 300 more this year I'm
dedicated to recording as many high
quality free tutorials as possible so if
you like this work and you like the free
tutorials please head over to Store that
level up tutorials calm and purchase
something from the store there's premium
series there are t-shirts and stickers
available for purchase lots of cool
stuff and it's always updating with new
stuff so check it out as always this is
Scott thanks for watching and I'll see
you the next one right</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>