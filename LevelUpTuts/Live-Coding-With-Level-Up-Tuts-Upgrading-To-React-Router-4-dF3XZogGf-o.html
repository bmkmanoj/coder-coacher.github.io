<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Live Coding With Level Up Tuts - Upgrading To React Router 4 | Coder Coacher - Coaching Coders</title><meta content="Live Coding With Level Up Tuts - Upgrading To React Router 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Live Coding With Level Up Tuts - Upgrading To React Router 4</b></h2><h5 class="post__date">2017-06-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dF3XZogGf-o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">just check-in everything's good here
okay okay so yeah so what we're doing
here is basically if the audio or
anything is isn't isn't going well just
let me know I'll try to monitor the chat
here on like I said I haven't streamed
before so I'll be trying to monitor this
as best as possible let me know if
something is going wekki so basically
really what I want to do is basically
take the level up store which exists
right now with the reactor router 3 and
just basically upgraded to react router
4 which is considerably different now
this is live streaming so if like I said
if the audio is messed up or something
you can't hear let me know likewise I
have a newborn and a dog that barks a
lot so if you hear dog barking baby
crying that's probably going to happen
but another thing to get out of the way
is I'm using vs code here I'm using the
material design theme I'm not sure which
one of them there's like a whole bunch
of them either way one of the new ones
this purple variation of it looks nice
the font size is nice and bumped up but
I'm not quite I should be pretty good
here for the font size so really this is
the wrong project open up the right
project okay and I'm also using ES lint
to lint the code here so if you see sort
of things adjusting then we know that
it's es lint taking care of it so this
is pretty much the project here so my
laptop is struggling and it's it's it's
a it was one of the first react sites I
built heads using react and meteor the
meteor component shouldn't matter too
much but because it's one of the first
react sides I ever built there might be
some wonky things here and there and if
you notice them you know you can always
shut it out or just let me know but you
know this is one of those life sort of
projects that's constantly being updated
only left channel is working huh let me
see if I can tweak that properties
Oh is there no way okay hmm
wait turn this off of being mono
yeah I'm trying to get this up to Mono
but I'm not sure if there's any way I
can do that directly in the capture
device not seeing it here give me one
second
yeah I'm not getting any options for
mono here
we try the internal micro does this
sound alright or does this sound
terrible how's it sounding to people
good good
can you hear
okay I'll use I'll use the internal mic
I don't know why there's there's no
switch to hear mono or something like
that so uh yeah I guess that's how it
goes right okay so here we are again
I'll be trying to monitor this again
tell me shout out if it's going audios
now great but here we are we have the
level up store nothing too crazy here
it's a meteor site and the structure of
the site is really just standard what
you're used to with any sort of routing
setup right you have your routes page on
meteor start up I'm rendering and then
essentially this whole tree of routes
right I have some some routes for
receipts I have routes for products
individual products have one for a very
specific product and it's you know this
conversion it's kind of going from react
rider through to react router for can be
totally different in it's nice to have a
place to start off and what I usually
like to do here I've done a couple of
these conversions right now is to really
just comment all this stuff out start
with a white screen here and then sort
of work back from there I mean reactor
outer four has all of the components
only see a fifth of the screen great
okay
where is OBS what's going on here
yes I'm trying to change the screen
thing but uh OBS is like not showing up
give me a second I'm going to pause this
right back
ah
oh yeah so this shows that there's no
crop I don't know why let me do manual
and see if that helps crop to left okay
of course yeah this uh OBS thing is not
not working so hot let me remove display
capture re-edit see if that helps yeah
this is how it goes right exactly this
is how you you struggle through
something here
let's go crop to window see if that
doesn't say vs code where's B s code
best code
oh yeah I'm trying to add the whole
screen capture if you click this it
shows you the whole screen right
look at this it's showing the whole
screen within this and then the moment I
go and click okay this is a currently on
a real laptop
I typically record on my hackintosh but
I wanted to great great great
oh the good news is it looks like I can
use my microphone again
test test so is this a mono no audio
mono okay cool
now I've got to figure out the resize
yeah click the element preview window
reset
yeah it's weird because it shows in
display capture here it shows the full
screen obviously I'm not sure what's
going on here I will can I continue to
answer questions yes crop to window
yeah I don't understand
yeah it's showing that it's I'm not
cropping this at all no crop the pop-up
window shows it correctly the main wind
you yeah I get that the I get that the
main window doesn't show quickly but I
don't know why I can drag this but oh
you could resize this here ah beauty
look at that alright professional this
is professional okay no I don't want to
exit okay things are looking good right
cool
here's code code everything looking good
yeah okay yeah agreed awesome cool so
basically there's nothing crazy about
this routing setup right there's a
couple of just nested routes and as
we're going to go here you're going to
see I have some layouts like admin
layout home layout receipt layout that
sort of stuff and these right now are
not totally essentially optimized right
you're going to see things like default
helmet that that's not dry at all and
there's certainly work to be done there
and also I'm occasionally it was using
server-side rendering on this so I had
this no SSR component in here I'm no
longer using server-side rendering
however that will be a topic of another
one of these helpful live streams as I
can after I get this upgraded I'm going
to be moving it into server-side so the
first thing I want to do is I want to
upgrade my react router so had to check
out my packages file and see what
version I'm even on packages dot JSON
and see so I'm on version 3.0 point one
which is super old at this point and I
want to be upgrading it I'm using yarn
I think the yarn command for that is
something like why is it so small okay
I think the yarn command for something
like that is yarn upgrade yeah so yarn
upgrade and then react is it react -
router yep react - router and this will
hopefully give me the episode latest
version as far as what I know with this
command
okay so it looks like I'm at version
4.1.10 point 1.1 and obviously
everything is going to be totally
breaking from this point forward so this
is like a computer is having a hard time
let's see okay so basically either way
you know things aren't working here
there's just a total white screen the
white screen exists right now because
there's obviously nothing being rendered
at all and if we were to come in here
and we were to redo this meteor dot
startup startup which it's just an arrow
function and inside of here we're simply
just calling the render function from
react dumb now we're importing up top
here and we're simply just going to say
render and then what we're rendering and
I believe it's just what is it as just
comma after that I'm rendering it
directly to the reactor route route
route okay sorry that goes inside of
this render so basically what we're
going to have here is some sort of route
component and then we would have a comma
and then where it is rendering to now
what is actually going on within this
render function or at least for right
now well react router four is going to
function quite a bit differently than
react router three and reactor three
you'll remember we had to import router
index route route browser history from
react router and that's really no longer
the case and when we upgraded it to the
latest version of react router we no
longer essentially are importing stuff
directly from react router
the time but often react down router so
for instance the first thing we want to
do instead of importing all this stuff
is get rid of it and we're going to be
importing and we're going to import
browser router so it's browser router
from or I'm sorry browser router as
router so basically react router has the
options to be used in a whole bunch of
different context from on the browser to
native to even in VR and all sorts of
stuff because of that you're not just
always using a router or whatever you
want to be using the one specifically
for the dumb which is the browser router
but I don't want to always type out
browser router so using AZ router allows
you to sort of have it look like what
you'd expect and we're doing that from
react router dumb okay and this is just
going to allow us to bring in our router
now essentially what we want to do here
in our render function is have a router
component and inside of our router
component in the past we had to do this
history browser history this sort of
stuff we don't have to do we don't have
to pass in history or anything like that
anymore and then we would have a route
component which is essentially being
home layout now the idea the way you
want to think about react router is a
little bit different right instead of
having essentially route layouts I want
to think about maybe a component that
acts as sort of like a filter whether
you're going into the home lay out the
static layout the reciept layout that
sort of stuff and I want to do that
through what could be an app component
now this app component can sort of live
anywhere it could live right down here
if I wanted it to and I could just say
Const app is equal to
okay and here I can return and this will
just be div could say hi and basically I
want this router to render the app
component you know it's es lint just
undid all that stuff I did that's cool
too
let's move this comma up a line move
this down a line okay I like the way
this looks a little bit better but
basically on meteor startup we're
rendering the router component which
inside of that is just the app the app
component is simply just an arrow
function with a div that returns hi
make sure you mess anything up here
sorry this reloading is struggling I'm
not sure if it's because I'm
live-streaming as well and if there's
anything I can cut out oh yeah
okay rookie move here I did not ever
install react to DOM router we imported
react dumb router up top here or browser
router from react down router never
installed it yarn add react dumb router
sorry about that make sure I grab that
and if I would have looked at my council
it would have told me that but I didn't
okay what we should see here when I get
a refresh actually is to actually see
this render that div that says hi okay
so you can't see it it's tiny it says hi
up here in the top left and that's nice
because it means essentially that well
our router even as sort of dumb as it is
is working now let's actually get sort
of a first quarter sort of component
working and the easiest way to do that
would may be to take a look at my home
component and then home layout so in the
past when you're converting these things
I like to do it sort of maybe one small
chunk at a time get that hundred percent
working and then a sort of a blanket
apply that to the rest so for instance
we have this div here and a nap but
obviously this app component is going to
function more as like a router in fact
we won't necessarily even need it but I
sometimes like to break it out for
various reasons so it's okay to have it
outside of here for now even if it looks
like it's sort of useless just in case
for like future growth or something like
that so in my app component I want to
talk about some of these new components
in react router so if we come up top
here we always it we already imported
browser router from react router dumb I
want to import let's see I want to
import
route I want to import switch and I want
to import with router okay actually now
I don't need with router right now but I
might need with router eventually and
I'll explain that a little bit it has to
do with using decorators to grab data
for meteor which is a little bit of an
issue with a react writer for but easily
solved okay so I'm going to say from and
then from is just going to be actually
these are all from react rather dumb I
don't know what I was thinking here so
import route and switch as well as
browser router as router from react
router dumb now route is essentially
going to be very similar to what you
would expect in another route component
in the old version of react router the
switch acts like a JavaScript switch
statement so really inside of our app
code right here we could throw in a
switch so we could say switch no not an
actual literal switch oh come on
and it what are you doing so typically
and they would complete this for me but
of course during a live stream it's
choosing not to and so I have a switch
and instead of our switch statement is
going to be a route statement now or a
component that is well why would you use
the switch well this which is sort of
like a the way it functions in
JavaScript right when you have a switch
statement sort of goes down the line and
matches the first thing and executes
that and this switch component works the
same way now when react router for came
out it wasn't totally psyched about the
name switch for this component but I
mean it is a switch statement it makes
sense so what we want to do here is now
we simply want to just have a route and
this route is going to say for let's say
for the path or the path is just a
forward slash or the path is just a
forward slash what we want to do is
simply just render
we want to render and this accepts a
component so no actually I'm sorry I've
used render a lot typically because
render allows you to do a little bit
more here but what we want to do is have
a property called component not render
itself
my apologies there so simply just
component and this Auto completion is
killing me and inside of here come
ponent okay yeah basically all we need
to do is pass in our home layout now
we're already importing home layout so I
don't have to import it or anything and
this is going to cause some errors for a
number of reasons when we head back here
if this ever you know it's taking its
sweet time to recompile here for some
reason but as you can see here we're
erroring out and that's because if we
take a look at home layout home layout
is accepting as a it's a stateless
function here right and it's accepting
basically children and if we were to
look at this there's obviously no
children to the home layout we're just
we're just giving this home layout so
take it this even non broken let's go
ahead and simply just comment this out
for a second I'm just deleting this
vertical rhythm thing I have going on
here just to get out of the way and
let's see this actually render our home
layout
the theme the theme is it's a material
theme I'm not quite sure also this is
using meteor 1.4 it's not a 1.5 yet but
that could also be something that I
could do here
okay no errors here where we add on the
client side it looks like expected a
string for built-in component types okay
check the render method of header so
something weird going on in header
comment that out for now I simply want
to just get this up and running so I
don't need to import component here and
so somebody mentioned saying they were
missing a return because this is the way
this arrow function works right here
there's no brackets here and because I
don't have anything additional going on
inside of here right if I were to have
brackets then I would need a return
statement
but you'll notice the semicolon after
here this syntax is actually valid and
es lint will say it's cool okay so as
you can see here I'm still getting some
errors here we'll work on those in a
minute and that's the way this sort of
process goes right you're going to make
small little changes here and there
you're going to get errors you're going
to fix them but either way the the idea
here is that in our routes file we're
rendering app app is coming into our
main switch which sort of acts like this
sort of area down here but it will be
much less like that in a minute and then
we're hitting the home layout if the
path is simply just forward slash now
from home layout is where it gets a
little bit more interesting for instance
in our our routes right here we used to
have this index route component home and
this was nested inside of our router
which you would think maybe hey I'm
going to throw it inside of app right
because this is sort of analogous here
but it's really not that that way and
this is sort of the brilliance of react
router for which at first glance is sort
of it's it's a little off-putting right
it's a little weird but what we want to
do is actually bring in another switch
statement into our home layout entirely
so if we were to come to home layout
we'll want to import some of the same
stuff I'm going to copy this head to
home layout from inside of here
I no longer need a browser router as
router but I do want switch and route
its uncomment main and let's go ahead
and have a switch statement in here so
what you're doing with reactor 4 is it's
much less of you having one central
route and more or less the routes being
defined as you drill down into your
project and you'll see in a minute here
why this helps for some code reusability
so we can have a route route with a path
of now I want this to be forward slash
now I also want this to be basically the
way react way react router works is like
the switch statement right so the first
condition that it finds to be true it
executes and if we were to have
something where say hey the path is
forward slash it might execute that when
we aren't expecting it to execute it you
know when it doesn't match it exactly
for instance the only time that this
home page load was when the path forward
slash is exact so we want to say yes
exact when this path is exactly forward
slash nothing then we want to go ahead
and load the component of course we want
a low ok let's go ahead and load the
component and now this component well it
could be anything but we want it to be
the home component which currently is
not being imported right we imported it
up here in our routes and here it is
it's in pages home I'm going to cut this
out of here and I'm going to re-import
this but I think it's a dot dot pages
home I think I'm in a layouts folder and
we double check layouts yes ok
so now I'm importing the home component
and instead of defining this and loading
it in a routes file we can just do so
directly in our home layout and as we
should see in a second our home
component should start showing up
II okay sorry trying to try to pull up
the chat here just so I can always have
to chat up on my phone or something that
way I could actually communicate it okay
ah looks like I'm getting an error check
the render method of home check the
render method of home let's check it out
and sometimes just actually you get this
error because things aren't exported or
imported correctly in fact let me just
let me get this back to this state over
here so that it does in fact a little
bit easier to read okay and it ok es Lin
just did it for me anyways okay whatever
so let me check this out see what's
going on here I'll start just commenting
stuff out it's a good strategy
oh I changed the color of the activity
bar in vyas code because it's it's you
can do that now but only some themes
support it so I'm on the insiders build
of vias code but that's not why it's
doing that yeah some kids a weird stuff
I'm getting some similar hairs in like
the admin toolbar so I'll comment that
out like I said it's one of these things
where you get errors and you adjust it
so I commented a whole bunch of stuff
out of my home component to see sort of
what's going on it could just be a
missing props here for instance I'd left
the Billboard uncommented and it's
showing up just fine so now I can let's
do the products list which I suspect
might be the culprit we will see here
hey yeah this is an ecommerce site built
from scratch if you see any like
exploits anywhere which I can't imagine
I'll be getting into any of that stuff
but let's say you see an exploit or
something let me know and I'll fix it
yeah so it looks like the the issue I'm
having his from within featured products
and that is most likely having to do
with how I'm bringing in data for meteor
so let's go ahead and potentially just
remove the products list for now
you're rid of one of these errors to see
packages know if this is a meteor
package or not I have SS our package in
here I'm not using it so yes this is the
one react route or SS are not using that
package right now it's causing a bunch
of errors down here I'm going to get rid
of it
sorry stick that I think the the fact
that I'm live-streaming on this laptop
is like causing it to have really really
long build times I don't know what it's
got to be the CPU ear or something is
next time I might have to do this on my
hackintosh yeah and I will set this to
public even though things are being a
little difficult
I'll definitely set it to public here
one thing I can do is start cleaning out
some of this stuff it's a nice to have
you can sort of basically use your old
route file as a checklist for instance
we are still using import home layout by
not using the home component anymore
from here and I cut it out of here but I
can also come down here to my old route
and just simply delete it from here I
know that's kind of stupid but it's a
great way to keep track of which routes
in fact your you're working on or are
getting out of your routing file this
code is react and meteor it's
essentially just react code though the
meteor stuff we haven't even looked at
yet so far I'm hitting the router I'm
hitting the switch statement I'm loading
the home layout and then inside of home
layout let's get rid of this children
here not using it we're essentially just
having another switch statement where we
have a route which allows it to load up
the home component and my compiler is
taking forever this is not part of a
series this is the basically this is the
level up store this is a site that I
build myself entirely on react and
meteor and basically I needed to upgrade
it to react router for and thought it
would be cool to show you while I did it
alrights clearly having like some issues
here with various aspects I'm going to
start because the let's take each of
these as they come we were having an
issue with the header component right if
notice I'm just say commenting
everything out right now it's better to
get this to error-free and sort of take
each error as they come and this you
know this process can be really smooth
or it can be not really smooth
I think the meteor component of this
does add some complexity when when in
how you're pulling in data
I will not be doing any dynamic
importing today but it's definitely
something I will be doing so I haven't
had the chance to like analyze and dive
into that for what that means for this
particular project okay we have a clean
slate here no errors okay let's go ahead
and let's load up the header obviously
last time it was giving me some issues
saying that something was going on in
the header and it's most likely because
we have some of these decorators up top
here which I'll talk about which do
cause some issues believe it or not
within react router but we're going to
see if that's exactly what's going on
so it's obviously an issue with these
decorators and we had in the same issue
in home in our switch and the products
list it was giving a whole bunch of
errors and in header we're loading up
with current user to grab the current
user I'm loading up with data to grab a
session variable and I'm grabbing this
auto bind if you haven't used the
decorators before it's basically a
function that wraps stuff so in this
case it's wrapping a class and I'm using
three of them the auto bind one simply
just makes it so you don't have to do
dot bind this on every single react
action this with data is pulling in a
meteor session variable but what it is
essentially doing is acting for tracker
where every single time that the session
variable changes it's going to make sure
the prop updates and now the with
current user is also a current user
container which is essentially just
subscribing to the user subscription and
pulling in the current user data the
only reason I need this is really
because it's nice to make sure your
subscriptions done and everything before
you get going now am I using any of
these well if we come down here I
definitely am using well at least
checking the role right I'm checking to
see if the user is within the role of
pro now if your subscription was not
complete by the time this is checking I
might give you maybe a false positive or
negative but other than that I'm passing
in let's see where I'm even using
current user I'm not sure I am using
current user unless I'm passing it in
dot through dot props or this probs it's
kind of wild here I thought I was using
the user subscription at some point and
maybe I was just waiting on the
subscription itself so I think that
might be a good place to start is simply
pulling out this with current user
because it's obviously having some
issues now one of the things that I was
able to solve at another project they
used meteor and react router and use
these decorators to bring in data
I used a with router component but I
shouldn't I don't think that is going to
solve my issues in this particular case
I think it's just angry let me check it
out this is a joys of life doing
anything though right you are always
going to hit little snags and want to
troubleshoot them
see
let me just go ahead and remove I'll
remove both of these decorators I don't
the I can't imagine that the with data
one here is causing any major issues but
it's possible I'm not using redux now I
haven't necessarily found a need for it
in a project of this size a little bit
of extra overhead my only like major
state management is you know triggering
a nav on and off or something like that
change the import link from reactor dumb
a and then actually be wait it might
actually be what's causing all of the
issues you're right
yeah I'm sorry my compilers taking so
long right now it's taking forever
yeah and I'll change it in a home
component as well but homes not
currently loading so it shouldn't be
causing any errors
who are we at here okay so something
going on to Main Ave which actually yeah
is probably another issue of importing
from the wrong spot so in this kind of
case right I can do a find and replace
over the whole project so let me find
every single yep there's a whole bunch
of them so every single time we have
this I'm going to replace it with from
react router dumb and let's see if just
the replace all yes let's replace all
there we go okay so that's one of the
things I really like about vs code is
how fast some of the stuff is I don't
know why it's making me resave all of
these files I must have hit a unexpected
keyboard shortcut or something
oh my god okay save them all come on
come on
okay and here we have the header yeah
okay cool so again we have an unknown
prop active class name on an anchor tag
which is probably happening all over the
place as well or is our active class
name active class name I actually don't
know what the active class comparison is
unreacted or for active let's Google
that active class I often just like type
a whole bunch of stuff into Google and
let the search bar figure out what I was
actually trying to type so we have
active style active class name then I
have here active class name active class
name yes so why is it complaining about
active class name unless it's actually
on an anchor tag import nav link instead
of nav
activeclass name on the nav link import
nav link but wait why might a blink
instead of link
right but like God why-why-why daslink I
guess I'm not I'm confused about wine
and fling right I get that but I mean
that's not going to make the active
class name not complain which is just
what I'm trying to do right now
okay so well important to have link here
but I don't understand why the the docs
say that the Ducks just had active
classname working on a standard link so
I guess that's maybe where I'm confused
unless of course those we're like
outdated ducks then now that should be
the logo Kent
I'm going to use navilet here too just
because these are navigation links I
suppose just find it replace link and
replace every place on
yeah that's wrong that's not what I want
to do
and did I do that over here - no I did
not I messed up okay
yeah react router 4 is like this I know
it for me you know when you learn new
things like this or your converting
stuff like this it is just like a grind
of having a bug and fixing a bug having
a bug fixing a bug you know and that's
just that's just how it is
yeah no I'm definitely I'm sort of I'm
not letting necessarily the most um I
don't know what the best word for that
not careful but I'm definitely a the
type of developer who just starts
clicking around and typing around and
tries to break things and then fixes
them more so than a let me plan it all
out sort of first kind of thing in that
maybe that's you know a good thing for
some people for me that's how I learn
best is to really struggle through
something
I don't have the benefit of being able
to edit everything all the time all
right Main Ave line 28 another issue kid
I also doesn't help that I can I can't
really see my keyboard because there's a
mic in front of it
so let's see line 28 yeah that'll do it
right here I'll definitely do it
sidebar how do I change the color the
sidebar like a here this is just
whatever theme I'm on the latest version
of vs code and there are a handful of
themes that take advantage of the new
theming system in vs code not all of
them I believe the one I'm using is for
the Preferences color theme I'm using
material pale night you'll see some of
these like lighter whatever they change
it and then you get into some of these
other ones like material night 80s they
don't change it it's just based on you
know who's who's currently keeping their
stuff updated
okay no errors so far and we have our
header component loaded up here so
things are going a little bit nicely
really like I was mentioning before with
react router for it comes down to
basically we hit these different sort of
situations in which basically we're sort
of drilling down through components and
that's going to help us reduce a whole
bunch of sort of boilerplate code now I
can have my auto bind on here again I
had a width data that was pulling in a
when I was that pulling in that was
pulling in a let me check my history get
history view file history view file
contents yeah here we go I want to bring
in my decorators so wasn't the
decorators after all that's good select
my decorators
Pacey's in here back in here cool yeah
this is my third conversion from react
rudder for two or three to four and I
did not know about nav link until you
said that so thank you for that one so
we have with current user with the
session variable and just simply with
the auto bind now you know like it might
be wondering why I'm not using something
like redux or other state management but
not honesty for things like toggling a
menu or something like that and meteor
session variables I think they get
overlooked a little too much because
it's really nice and easy
to simply just have maybe an action that
sets a session variable and then I can
just have a decorator that it grabs the
session variable it's just really super
easy and like I said this project isn't
big enough or it needs major state
management or anything
that okay so the header is now good to
go no errors everything looks nice
and now we want to head back to the home
layout where we can then load up some of
our stuff again I'm going to get the
add-on admin toolbar loaded up here
because I was getting some errors with
that as well and I am very confident
those errors were definitely the link
component being imported from react
router and not reactive router dumb ok
the admin toolbar is here this is a nice
little thing I have for myself basically
it stays out of the way I have the
couponer the data Iser made some nice
little admin tools for myself because
this is a totally custom platform you
don't have any of the benefit of having
all that good stuff like you know
default order listing and stuff like
that so here we go here let's go ahead
and add the sewage staining back in and
hopefully things go a little bit
smoother now that we have the correct
link yeah and this is my first live
stream so thank you for watching and I
will I will try to do more stuff like
this definitely have maybe a little bit
of anxiety about doing live streams so
because I eat I lean pretty heavily on
editing I'm not going to lie ok so we
have our home layout we have our route
which loads up the home component
instead of our home component should be
able to have everything working as
expected
eh here we go here's the level up store
it looks like this looks like this is
loading up correctly yeah so we have our
this is a billboard component this is a
featured products component which is the
products layout and this is the stickers
thing become a pro mailing list and
footer I mean this is all here the home
page is is all here working correctly
now I also have two car trapper
components
which I honestly I could probably
approach these differently like I said
this is one my first react project so
things definitely were you know
potentially they could be done better
for instance we have the mini cart when
you well let me log out because I'm a
pro I'm getting download links refresh
this yes the manage user Iser
actually think I have like a lot of my
components that are admin tools and in
Iser x' even if even if it isn't say
that way on the start so Add to Cart
yeah it's the mini card up here cool so
that's all working goes away when you
scroll nice now the next thing I want to
do is head back to my routes file where
I can check it out and say like hey
what's next well the pro sign up product
page is definitely something that I want
to have going here so we're going to
load up essentially the next component
down the line and like I said here we're
not using a lot of these it's nice to
when you're doing this pull it out
cut it out here and head to your home
layout which is now where this route is
now going to be determined so know by
the way in vs code shift and option and
the up or down arrow key copies and move
something down in case you did not know
so that's if you just hold the option
key it moves a line but if you hold
option and shift it copies and moves it
yeah
writing test for meteor and react yes
really writing test for media and react
is something I need to do for this side
anyways could be a good topic I have a
very large meteor and react project that
has a whole bunch of test stuff going on
so certainly have some examples to pull
from there okay so the route for this is
simply just going to be just products
forward slash Pro and then the component
is the pro sign up so prod
Pro this is just going to be Pro sign up
okay let's see if this is all good now
so we have the first probable working
route here and it works just fine okay
Prasanna page is in now you know I could
just keep going and sort of doing these
as they go we have a couple of I don't
know if there's anything really crazy
going on here maybe once we get into
some of this static layout stuff but
let's talk about maybe some of the
things that are going to be on every
page now we don't have literally
everything on every page in fact we have
our home layout has the default helmet
it has the header it has the footer and
it has the admin toolbar now the admin
toolbar the footer the header and the
default helmet are going to appear on a
ton of stuff but what they're not going
to appear on is the it's they're not
going to appear on the what is that I'm
trying to think of the receipt layout
right they're going to appear on the the
static layout and they're going to
appear on the home layout but they're
not going to appear on the receipt
layout so in the current version of this
there is definitely not like there's
definitely opportunity to make this code
more Drive right like there's no reason
why I should be using the default helmet
on both home layout and you know the
admin layout so we can actually break
this up a little bit more and we have
this home layout component oh yeah I
should update yes so I keep checking the
comments every now and then yeah Rob
that duplicate line comment that saves
my life 100 times a day so yeah again
option shift yeah okay super cool yeah
so we hit this home layout component
which is where I sort of going with that
and you know we have this routes I want
to load this home layout but I thinking
about it maybe changing the way I'm
doing this for instance if
have a receipt it will go to Ricci
layout but maybe let's have this be
instead of home layout let's have this
be main layout I'm going to change this
top here and I'll even change the file
name because you got to do that
layouts home layout rename main layout
here we go
now in the main layout file change name
from home layout to Mela why am I doing
this you ask
well because I'm no longer going to have
a home layout of static layout a admin
layout and a receipt layout I'm just
simply going to have a receipt layout
and a main layout the color scheme I'm
using is just once again color theme I
should just like plaster the summer
material theme pale Knight it's under
material theme nvs code the font i'm
using is fira code fira i have a video
of that on the channel cool so we have
main layout which has a page wrapper it
has a default helmet it has this header
and it has the switch statement and now
i can actually include my admin stuff i
can include all of my admin layout stuff
exactly in this main layout i don't have
to I no longer have to have an admin
layout in fact the only thing the admin
layout is really doing differently than
the home layout other than having a
class name of admin layout that's not
even doing anything is it's checking to
make sure the current user is an admin
and if it is an admin that's allowing
them to go through but yeah that's
that's going to save me a little bit of
a component here where I don't need one
ok next step let's go ahead and grab a
product page let's see next one
yeah products type you know none of the
stuff is too crazy now that we have
essentially our things going on here
because there's not a lot of nesting
going on where this path
products and then the type this is using
basically none of the same stuff from
any of these other pages so it's not
like we could really simplify this all
that much so I'm going to import product
page but one of the nice things that
react router or having to do such a may
be substantial rewrite of your your
routing system allows you to do is
really like cut the fat and find out
situations where you're not being as
optimized as you can you know so the
switch statement is acting like a switch
statement in JavaScript it's matching
these what would be the path as the
statement so hey is this path equal to
forward slash sure but is it the exact
path no next one is the path equal to
this no okay next one is the path equal
to this sure load up this component the
switch statement basically means that
only one of these will be loaded at a
time if you were using I think the route
I think you can just use these you can
just use these route components without
a switch and if it matches it's going to
load it the switch statement functions a
little bit more like the router that
you're used to okay so at this point I
have a product slash type which would be
tutorials right get an error let's see
can I read product property type of
undefined product page line 9 product
page
I'm guessing this has to do with using
parameterised routes product pages their
component name product page
product page okay there is no no I
wasn't finding that okay so obviously
there's some sort of weird issue here
where it's saying can I read property of
a type of undefined which means that
params
is currently undefined let's go ahead
and find out what is defined here I can
do so simply by just commenting this out
and then reloading this up and checking
out my react dev tools you know you
could head to the docs and I could do it
this way but it's a good opportunity to
learn something if you dive into exactly
the component so I'm using the reactive
tools here there we go and I'm going to
look at the product page product page
and see that I'm getting inside of here
I'm getting a history right I'm getting
a location I'm getting a match now match
is exactly what we're looking for
because it's out of match has params
which is what we want here so instead of
just straight-up params we're going to
be looking at the match prep so I can
import or I can access the map
prop through syntax here and change
these to match params type and match
params type into product listing now
this totally unnecessary comment down
here the product page component template
uses home layout great don't need that
sometimes I write these uh these
comments in my code than I think in are
going to be really helpful than just
being totally totally unnecessary
again prop types I don't even know why
there we go match type of object now a
lot of people don't like using prop
types type of object this is pretty
inconsequential right now so I could
change that but
okay let's check this out also I am
using prop types okay hmm okay we now
have our tutorials loaded t-shirts there
are none but it shows t-shirts up there
stickers yep this isn't using the real
database obviously these product
information like I don't have a product
named hello obviously but yeah there we
go next step I want to get natural
product loaded so you do that nice
little option shift down and let's go
ahead and grab the next thing we want
the actual product to be loaded from our
products it's almost like you're moving
your routes file into essentially just
different different files here it's you
know I like the system a lot to be
honest and once we get react to router
going with server-side rendering in
meteor eel you'll get it it's really
super nice okay let me load up this now
next route is going to be simply just
forward slash products type and then
skew now you could even do it where you
had maybe like a products component that
took care of this path and then you
maybe looked for the type and then maybe
you look for the SKU inside of another
switch statement or something like that
and that might keep things organized
instead of having a giant switch
statement here but for now it's nice to
do sort of get this up and running and
working and you can always sort of tweak
it later when to use export default
class and when to use export default at
the bottom yeah so here is the deal with
that basically you cannot export a
default Const or variable you can export
a default class in assignment but you
can't do so with a a constant variable I
forget the exact technical reason it has
to do with when they're created but if
you are using a constant variable when
the functional stateless component
you'll want to do export default down
here
now what would work is export right but
not export default so I like to just use
export defaults all over the place in
fact yours only like two places in this
app you'll see that I'm not using export
default and that's just because I'm need
to change them I have not done that yet
now don't forget exact on product type
you are correct yeah I mean the exact is
definitely a nice thing to have here let
me see if this loads up next
okay I cannot read property skew of
undefined so it's the same thing we're
having before so to the product page
where instead of basically using this
props params will this components kind
of a mess like I said this one my first
react project so if you see stuff in
here that's not great it's most likely
just because it's old code that I
haven't had a chance to go and update
okay so this is looks like the only
place I'm using params so this dot props
match dot forums is this using tracker
react oh okay yeah so in this when I
first built this site I was using
tracker react I actually wonder how many
components are using tracker rec because
I'm not totally psyched about that yikes
a lot of these are still using tracker
react so I guess I need to go in and
change how I'm fetching data on all of
these one thing I can do is show you
that right now even though this is
mostly about react router for let's head
to containers you can see I have all
these containers here so for instance if
I want to grab a single product I'm
using this container where I'm
subscribing grabbing the product ID I'm
getting that single product waiting for
it to be ready and then I'm just
outputting
that single product and I think this I'm
using the product subscription is this
the same a single product actually
wonder what the differences between the
subscriptions the products find one and
I'm really just looking for the SKU okay
nothing crazy yeah that's not a great
subscription I'm guessing this is
subscribing to all of the products
completely which is totally unnecessary
for an individual product load like I
said this is one of my first sites I did
with meteor well not only meteor and
react together but meteor itself I mean
react itself so there are definitely
certain things in this codebase that
need a lot of updating
so let's go ahead and use this single
product here but instead of a product ID
I'm going to grab the SKU of the product
maybe that is yeah because I don't need
the ID so let's zoom new file go product
I can just single product SKU I guess no
is the best at naming things but here we
go
basically so how I'm grabbing data for
meteor in this is I'm using this meteor
Orion soft react meteor data which is
really a light lightweight package that
turns into thee that turns in basically
the standard way of getting data and
meteor basically just turns it into the
ability to use a decorator really easily
and it also makes it really super nice
to grab data from meteor methods and not
just publications so we can say let's
say single product SKU I know this is
kind of okay there we go
and again we're going to be looking at
match and instead of here we're going to
say actually is that product I yeah okay
we're going to say match match duh yes
this how I want to do this see I guess
the live coding thing is tough because
usually might think a little bit more
about before making these decisions
okay yeah we just do we could bring in
match here and we can say match that
params I don't like this but because
this is assuming that this single
product SKU will always be I'm also
editing the wrong file wow this is a
great string of action here okay yeah so
really the the bummer about this is that
well here here's the answer the answer
is that I'm not going to use a reusable
data container so with this with data
thing you can build essentially reusable
data containers really easily and have
them available but in this particular
instance like I don't need to reuse this
data container so we can come in here we
can get rid of this tracker react
business I'm going to get rid of this
subscription I'm going to rid of the
whole constructor don't need it get rid
of the component we'll unmount don't
need it I'm going to get rid of the
product here but I'm going to keep this
because I want this okay I get rid of
all that stuff and obviously this debts
data subscription product ready business
is no longer going to be working at all
and I essentially want to do an at with
data and I believe this just accepts an
arrow function to do this without
checking because I'm confident that it
might work um let me confirm that that
is going to work because I am NOT
confident yeah so I just returned an
object okay so instead of here basically
the way this works is with data allows
you to pull exactly from meteor data
like you would and then return two
things here so we could have a product
which is going to be equal to
essentially finding a product as well as
a product sub or a product subscription
here and we can grab in honestly just
two
save time here I'm going to clean this
up later but just this to save time just
let me get rid of this just to save time
I'm going to use the same subscription
which I believe with just subscribe to
products so we can say let well now this
is a Const so constant variable product
subscription so scription is equal to
meteor dot subscribe no autocomplete
does the wackiest stuff sometimes right
okay I know man what are you doing okay
like I it told me it was going to just
complete this subscribe thing and then
it went on to not do that at all so I'm
just going to subscribe to again I
shouldn't I shouldn't be subscribing to
all their products right now but like I
said I'm I don't want to get into my
subscription stuff just yet so product
sub ready and with data you can pull in
props the same way you could we can say
match so I can access my props as
they're coming into this with data
that's where I get this match from so
match comes from the route mesh type
params dot SKU grips the SKU from the
parameters and it finds me a product now
instead of this dot state dot
subscription dot product ready return
loading I can actually just well in my
render statement first and foremost I
can say Const and I can get access to
the product as well as the product sub
and this can be equal I always type from
there instead of equals because the
import syntax is so similar this dot
props
yes the with data is basically the same
as the create container basically it
just allows us the thing I like about
this with data is not necessarily using
it like this but more or less creating
these reusable containers right with the
current user and then for instance in
the header if I need that current users
information and I want that I can just
use with current user like that's easy
these reusable data containers are
really nice and simple that way yes okay
so this syntax here if you haven't seen
this before let me explain a little bit
basically your have this dot props which
is an object and inside of there there's
a whole bunch of other objects now
instead of wanting to have to type this
dot props dot product or this dot props
at products sub every single every
single time right it's nice to just
declare these variables so you're
declaring product and product sub by
pulling them directly out of the stop
props now for instance instead of having
to check to see if the subscriptions
ready with this whole big line of stuff
here I can delete all that and just say
if product sub is not ready if the
subscriptions returning false then I can
return loader now this is taking this
into a little one-liner here so I don't
know what's going on where am I here we
go
so basically checking the subscription
of the subscription has not loaded
then this straight up return the loader
now I'm using this set attribute data
name to disturb product names I don't
know why wouldn't be doing that with the
react helmet if I'm already using react
helmet we're going to be getting some
errors because how I change the prop
structure of this quite a bit you can
see line 33 is basically giving me an
error saying this dot product doesn't
exist obviously it doesn't exist because
it got rid of it
so product so what I want to do
not find and replace a cross file sorry
about that
all right what I want to do here is I
want to look for this stop product and I
want to replace it with just simply
product let me make sure all of these
look all right first man I don't know
what I'm doing here like I said uh this
particular app was created a few years
ago here when I was learning react and
meteor together so like some of this
stuff like yeah I guess here I'm
creating a bunch of image paths because
I don't have them saved in a database
the images aren't saved in the database
so that's basically the issue here in a
smart way I would just have this upload
the images and save it all in the
database and then I wouldn't have to
generate these image paths for each one
because I have different device size for
image paths but that is for another time
now another thing I have this playlist
data's variable which I'm just simply
using down here am I using it down down
here to also I have this giant if-else
statement with a ton of reused code if
the product SKU is next level low one I
see what's going on here
I should essentially be having a
separate component this should be route
based the issue is that I sort of did
this kind of hacky to get this up a long
time ago here basically what I wanted
was the page the next level if we had to
store that level of tutorials calm I
basically wanted to have if the product
was the a next level product in
specifically next level number one I
wanted some things to happen here and
what things are those well I don't
really know how this code is that
different I have a lot of the same stuff
here this is going to bug me a lot
first things first though I think I can
go through and just delete all of this
stuff what is different here yeah I mean
this is something I would want to maybe
do a different or something dad to check
out what's different but just simply
looking at this I don't think this is
what I want to be doing here in fact I'm
confident enough that I can just delete
that whole thing delete that whole
business there you know there's
something really cathartic it's maybe a
right word for about like coming in here
and deleting tons of lines of code big
fan of the leading lines of code I've
been figuring it out later
okay so check it out some things here we
have an edit button the edit button is
just being loaded as a variable down
here now at the time I liked this syntax
of pulling everything out into constant
variables but I don't really like to do
that anymore like look at this I have I
could move this edit button stuff and I
could paste this in here and sure enough
I have a ternary operator here to say is
this if this person is an admin right
then go ahead and show this link
otherwise just show an empty string like
I shouldn't have this so there's an easy
way to get rid of this if you are using
some sort of inline conditionals and
react you can simply say ampersand
ampersand get rid of this business and
then you won't have to worry about any
of this stuff basically what this is
saying now is if the meteor user is an
admin if this is true then just show
this stuff otherwise it's going to
return false and it's not going to
output anything so as you'll be able to
see here in a second when we head to our
individual product page we have hello
here we go
we don't have an edit button on this
because I'm not logged in if I log in
sign in you can see
you should have an edit button where's
it at let me reload this page
oh it's it's not showing up for variety
of other reasons
one of the reasons is somehow I'm
getting away with using an HR F on a
link tag keep in mind I use this edit
button all the time on the live site and
I have no idea how that's worked ever
without having a - property because I
seriously use it all the time yeah this
this little this little ampersand
ampersand thing here in exchange for
like a ternary operator or anything like
that or even can out like a conditional
a you have to define somewhere else I
think some people might not like it some
people might think it looks a little
iffy but honestly it's clean and if you
put this on a second line here like I
have here where you have brackets here's
your conditional and here as long as
it's not too crazy to me this looks
nicer than having a variable playlist
datas up here again I'm using the same
ternary operator thing let's pull this
out pull it out throw it in here there
we go Tupac going okay here we go let's
get rid of this change the double
ampersand here yeah that's clean now or
at least it is to me and that's what
matters some other interesting things
here I'm using this dangerously set
inner HTML because I'm just using markup
that's pretty much it
I have this these products saved the
descriptions as markup okay now the last
one with price which apparently I need
to if there is a sales price then show
the sales price if there's not a sales
price then just show a price again I can
take this even though it's a ternary
operator I don't want to change that I
can take this and just put it directly
in the component I'm more of a fan of
that to be honest I know some people
aren't but to me I would rather have my
conditionals inline it I think if it
just stems from using angular a lot or
just PHP and stuff like that
so yeah as you can see here this is in
my mind this is significantly cleaner
you can read this if you know if there's
a sales price I'll put those otherwise
show that ok where else are things going
wrong and scroll down you can see my
edit button is officially in here so I
now have an edit button working
hey thinks things met from the
Netherlands I always wanted to go there
yeah I'm trying to I'm trying to
basically just give more more
interesting content I guess things that
I'm interested and that's always where
level up has always been for me so I'm
happy to be recording significantly more
right now I was a basically I was coding
for a startup and just coding coding
coding coding coding non-stop and it's
nice to be able to have a little bit of
a breather here cool okay so yeah
everything's everything's looking really
nice here if the product subscription
comes in we're all good you know show
the loader again I could remove this
body set attribute and don't know why
that's here exactly but again I don't
want to just start deleting stuff and
then we have nothing really crazy going
on the Add to Cart button should work
although I'm signed in as a pro so I'm
getting a download button and that
actually should be reactive which it's
not so I could always take a look at why
that's not reactive but one of the best
parts about react is here I'm changing
the whole routing structure of
everything I add to cart' button still
works no matter what without me doing
anything
I'm actually surprised I'm not losing my
voice at all now the next thing we have
here is I'm not going to touch on in
this video because it's just sort of too
out there maybe want to spend some time
to rethink about it but basically I have
a very specific product layout for a
product that I'm actually pulling from
the store right now anyways so maybe I
just won't code it on here the next
level react native series is being
replaced and that was actually one of my
favorite things about the store overall
like check out this little animation
here whew this page has a very unique
layout to it it has a completely
different layout to it than any other
page on the site essentially but like I
said I'm pulling this product in favor
of the new react native for everyone
series which is not only a whole ton
cheaper but it's a little bit more
streamlined this is like more of a
basics right I'm going to get into
intermediate and advanced stuff later
but I think this series approaches
things a little bit better the problem
with the react native series before was
really that it was just too much right
it was of eight chapters of videos and
if the moment one thing gets invalidated
it's difficult to keep up the rest so
these are a little bit more bite-sized
they're going to be working a little bit
more like the meteor for everyone series
okay so let's check out what else I have
of course I just quit chrome I don't
know how many times other people do that
but I hit
command Q instead of command W like once
a day I think I just I have fat finger
so like the you Polly knows that
sometimes I'm typing I'm just hitting
the wrong things entirely that is a
symptom of that as well accidentally
quitting your browser okay so I'm not
going to bring in this product at all
deciding that right now making some hard
choices but it's and next thing I have
is this checkout page and the checkout
page is bugging bugging me quite a bit
because it's a checkout route right but
what it isn't is it's not any sort of
its own page right when you hit check
out this is really a window on top of
the home page like this is the home page
you hit this check out here and this is
just sitting on top of it
it's not even animated anymore so that
like totally loses that effect that I
had I don't know why it's not animating
probably something that I changed some
given point but like I said this page
here I want to do it as a route but I
want to think about it differently and
it's one of the things that react router
here is going to help with so we have
our path check out and all I'm doing is
setting a prop on the home page to check
out open and instead here what I can do
is bypass sort of this stuff and use
react router to do this business for me
on the home page but why on the home
page it seems to me that it would be
better to do this on the main layout
that way you could open the cart and
have a drop in from anywhere while still
maintaining the route which this is gets
interesting here because this is one of
those things that react router four will
do very nicely for us
everybody maybe hang tight for a minute
here I'm going to take a break I'm going
to think about this for a second and get
right back at this so hang tight I'm
going to pause the stream but I'll be
right right back
I take that back I don't have no idea
how to pause this chick no idea how to
pause this dream is this is my first
stream so just hang tight I'm gonna
leave it right in here I'm gonna leave
it on some code my routes page or
something like that or even main layout
is a little bit more exciting all right
hang tight I'll be back in a sec
okay back here I think what we're going
to do here is get some sort of checkout
thing going on here and like I said in
the last little bit I have the it's on
home I have essentially the cart wrapper
full here which is the big old cart and
that cart and again you know I know this
is react router and there's so many
things I would like to do to this cart
component to change it but basically
it's accepting a type which determines
whether it's the fullscreen or the mini
cart now I did that to reduce some sort
of code reusability but to be honest the
cart small and the cart full components
are so different I'm not quite sure why
I needed one wrapper for both of them
other than just to bring in the data and
at this point that would have worked
better with a reusable data container
yeah it's one of those things right so
I'm going to pull out car wrapper from
home I'm going to put it in main layout
and I'm assuming I can put it anywhere
like I said it's been a little bit since
I've modified some of this stuff so I'm
making assumptions
that things are going to work the way I
expect make sure I import cart wrapper
now in this case it's accepting here's
another good tip I don't know if this is
a like if hyperlinking in vs code is on
by default it might be a package but if
you hold command you can hover over a
component name click it and it'll open
that component yeah and this is another
component that I'm kind of upset at
right now because it's using tracker
react I have an empty constructor each
is really just not great I think I could
redo this really really quickly all I'm
doing with tracker react is essentially
grabbing a session
variable and preparing the cart which
again I'm gonna look at some of this
code I'm pushing I'm not using like
filter or map I'm not using that sort of
stuff so again this this code is I'm
using a low - each I guess this is
before I knew very much about es6 stuff
when I first started writing this site
was a while ago
so this thing is kind of one of those
things that works well and you don't
want to touch it because it's working
well I might I might just have to
totally nuke this off camera because I
don't really feel like doing it right
now but really I get through all this
bad stuff over here the basically the
only thing I'm looking at is well if the
prop is full now what's going on here
okay if it's full type then go ahead and
use the cart component otherwise the
mini card component like I said this
would have been way better off with a
data container if I have the sense to do
it at that point but in addition the
cart component essentially is accepting
a whole bunch of props but none of the
ones I'm really needing right now the
one I'm looking for is basically what
triggers the cart to turn on again
another JSX component I'm not super
psyched about some of the stuff I might
have to
I might have to rewrite considerable
portions it's a big old component see
you can see some of my class names are
really nice you have a class name of
Deng right here if your cards been
declined sometimes I don't know let's
see check out class this is I think what
I'm looking for right here
check out class basically if this props
dot check out I believe if this is going
to be equal to true then we're going to
and where is this dot props to check out
though what is that supposed to be and
obviously I don't have a prop types for
some reason because this is an older
component like I mentioned yeah so where
is that being set it's a great question
I'm looking for this stuff props that
check out in cart wrapper I don't think
we make this a little bit easier to read
here at keys okay this stuff props out
check out is being set directly by this
prop stuck out which is entirely
unnecessary considering imarti have this
dot props
okay it's annoying so in home-home was
just passing cart at checkout oh I'm
sorry
yeah that was being set from the route
right here which is the one thing that I
was trying to do okay so the value here
was just simply open and there's no
reason that should ever be a string but
I'm just setting it directly to be a
class like there's no reason this
shouldn't be a boolean you know there's
some times you look back at your code
that you wrote a couple years ago and
you just have no idea what you were
thinking but and that's how it goes
right okay so we have on our main layout
cart wrapper is going to be equal to
type full whatever and I'm simply just
going to say well I can I can leave that
this table props because I don't want to
mess it up I really don't know what's in
there I'm going to say checkout is equal
to and just a string of open right now
and then that way this hangs out cart
wrapper is always going to be turned on
hopefully let's see we should hit the
main layout here and cart wrappers
should be on I'm going to be using react
router for and all of its dope nests in
a second here props is not defined yeah
it's not to find you right I just said I
don't want props in here I just don't
want it okay
okay so as you can see here the cart is
loaded even though I'm on on the
homepage right nothing special here it's
being loaded because I'm forcing this
property checkout to say open and like I
said that's working within the system I
had made on the assumption before that I
would want to turn it off and on via
prop like this or just be a class
because the class is really just making
it appear all of it could have been done
so much better now what I want to do
here is I want to go ahead and well I
want to make sure that this route works
anytime that a check out is appended to
the end of the route that way you could
open them down any single page and part
of the beauty of react routers that you
can have a whole bunch of routes so I'm
thinking if this is going to work or not
somebody stop me if this is a terrible
idea but we can come in here get rid of
this exact we can say instead of forward
slash we can say check out and then for
component instead of having a component
we can render again like I said stop me
if this is turning out to be a bad idea
I have not personally used react router
in this way before you gotta have
another closing bracket
yes lint is doing some stuff and this is
not returning anything check it out
simplify this I don't know why I did in
the first place we go okay so now the
route basically the path check out
render car trap or fallen open you'll
see nothing hear nothing you nothin yet
that is by nothing I mean nothing coming
here
hello compile-time is taking a long time
okay click this which basically just
hits a checkout route and I don't think
that did anything that I was expecting
it to do I might need to consult the
docs on this one really what I was
thinking that was going to do was it was
going to say hey check out is in the
path therefore you should render this
stat not something that happens I feel
like that is something that happens
direct head to the docks
I need regex for that do you need regex
for that no I don't want to have need
regex for that I swear they have
something where they have an example
here and maybe not the recursive paths
example let's see oh yeah there's the
match only person that match name in and
just where am I looking for this
see now I don't need a custom link
so route if the route path
how do you give it a any valid path to
read X understands you know what I
thought this would have worked just by
saying oh you you have NPM package yeah
you're right so maybe I am just needing
reg X here and just saying it needs to
contain it needs to contain the check
out word in the path see some examples
here I don't know if you need to have
the package path to regex installed
because I'm thinking that's just saying
the react writer said any path that this
would understand
you
zero or more modified parameters named
parameters
yeah I haven't tried forward-slash check
out because that will work but what I'm
hope I guess what I was hoping
let's see I was hoping that basically
what would happen here is that I could
make this dynamic right like you could
be on tutorials and have this B slash
check out and have this load up the
check out correctly and it's not going
to find this route and then instead of
like the clothes where the clothes would
just take you back to the homepage it
would essentially and I know there's a
way to do this they showed an example of
it in the initial react router chat
Michael Jackson showed it off I feel
like there has to be an example of this
somewhere
I mean this is kind of what I'm looking
for right here
you person is essentially matching
siding gotcha
I see I see kind of what's going on here
they're using match URL and that is
going to work yeah okay
cool so this is how you do it so
basically I'm going to be using string
interpolation here backticks
and then I'm going to be having a
forward slash and now I'm going to get
to use the match prop and say match URL
this is going to grab the entire current
path yes so the entire current path plus
the check out although I'm not importing
or bringing in match let's do that up
top here this is going to work so
basically the current URL with check out
at the end will in fact load up the cart
wrapper and I'm hoping this is going to
work eh okay it seems like it should to
me
okay I don't know why this compilers
taken so long right now I'm guessing
it's because the live strumming I'm
going to do the next time I'm going to
do a live stream I'm doing it on my
desktop the only reason I wanted to do
it on my laptop is because this is
primarily where I code so my tool set is
all nice and setup for me here
rather than on my desktop I changed a
lot due to do to just whatever I'm
working on and of course you know some
fun stuffs going on
tutorials product Oh what is doing is
it's seeing this as the program because
I don't have an exact path on the SKU
here now that's actually kind of a
tricky one I'm wondering because this is
hitting this route and it's thinking
that check out is a per ampere and more
fun stuff with routes well that's
something I want to think about maybe
I'm not quite sure how to get around
that one other than just making a check
to see yeah I guess that's what I do
okay so either way I have a path I had
check out to the end of it it's in the
main layout this should load up the
check out and if it doesn't I'm going to
be upset
come on compiler you can do it you can
do it come on
ugh okay didn't work let's find out why
it didn't work it for some reason thinks
that the current path is forward slash
forward slash forward slash what's up at
that main layout match path is just
forward slash no it's not that's oh yeah
you're right I might have to change the
path but so this is happening for a very
specific reason here that is not a
reason I'm super excited about let's
check this out right I'm going to show
something here and I'm going to see if
we can struggle through fixing it
because this is totally unrelated like
this is as unrelated as it gets but I'm
pretty sure it's the issue if we check
out our browser router and we head to
our router whatever anyway we can see
the match we look at match says path is
forward slash now in any given situation
I would head to tutorials it should tell
me that the path is forward slash
tutorials but you will notice that it's
not and it's not for a very stupid
reason involving decorators and vulvas
and react router 4 so how do I solve
this I solve this with with router I
think I'm gonna say I think because I'm
pretty sure that this will fix this and
if it doesn't I'm not going to know what
fixes this to be honest so we're going
to say with router which comes from
react router dumb with router what's
happening here is that because of the
data container it's it's angry basically
I have my app here
it's not passing the right props it's
not updating our props into main layout
you can see that here even into our
switch into our route main layout match
is not updated properly and we want to
do that with an app here yeah so Rob you
are right and that's how it should work
it's not working that way because match
to RL is currently turning up as an
empty string it's currently turning up
as an empty string because of these data
containers and I'm going to convert this
app from a stateless component here into
class app extends let's see we're going
to see if this works if this doesn't
work I'm going to be a little concerned
here okay well let me return
I had this issue on another site and
this solved it so at this point I'm
using this decorator with router I'm
wrapping app in with router and we're
going to see if this works
yeah Rob so this will this route
component and reactor out or force or
takes care of that for you basically
this this route component takes care of
that if it is basically if this path
matches the whole URL then check out
then go ahead and render this stuff so
that is the conditional right here is
simply using the route component and I
could do that check if I could do I
could do that that way honestly I'm just
trying to work in within the router
within the reactor outer for system here
I think that would be I think a totally
valid way of doing it I think this just
sort of does that for you as far as
passing the props from app to route
that's not I don't think necessary here
I'm pretty sure that the this issue is
specifically because no no second guess
all you want I don't need to know what
I'm doing I am I am struggling through
this so let's see component is not
defined of course it's not
when the hardest parts about working by
yourself is that you have no one to
scrutinize your work thank you you you
don't always have the idea of what
you're doing is dumb or not okay now
things seem to be ok let's check the app
checkout match match has the URL and
it's still not updated what about main
layout is main layout updated yeah so
this is so annoying it's telling me that
the current URL path is just forward
slash right it's not giving the entire
URL path although the path name and
location seems to be working fine so why
is Matt wrong params is empty - wait
what's up with that params is empty
inside of here trying to think about how
I solved this before so our main layout
am I using anything funky I could be
needing to wrap main layout with a width
router the issue was the last time due
to the fact that props were not being
updated because of how react for rect
Reder handles this
I'm hoping this does it I did see an
issue because people were having the
same issue with mob X is use decorators
all over the place in mob X and
basically the solution was to drop in a
with router anywhere you are using a
switch statement ugh ugh ugh ugh so why
in the world would match not be updated
what's interesting here is that I'm
using params dot the name here to get
the params and if you open up here is
that this let's see
it's the product page have the correct
match that product page has the correct
match so why does the product bridge
page have the correct match but blargh
let's think about this for a minute the
product page what's different about
product page product page has match
correctly getting the correct props but
main layout for some reason does not I
am so confident this is a similar issue
to what I was having with this other app
where I needed to just use with router
and everything was good but why but why
let's see
hmm
yeah I would do if location is pathname
but I know that the I know that the
match prop should be cascading downwards
and I should be having that updated
correctly there's no reason why match
should have the correct value within
here and not it's all within the router
component I have checked the docks but
it's not super clear let me check
something else out here I have another
project in an alternate window that
works fine I'm using router passing app
epoch stends I guess
oof let me think
yeah I don't know if it does rob but
it's sort of what I'm doing right by
having that match or by having that
entire URL in front of there you're
almost sort of saying like as long as
it's at the end of whatever URL bandit
then it works I mean that I think you
probably could do it reg XE some way to
but which what's weird is just that it's
flat-out not getting the props
I mean app dot the props for app should
have match at the correct path there's
no way around it it has location correct
it doesn't have match correct params is
an empty object
hmm
yeah what is it it looks like that
updates for like a brief second it does
update and then it's empty not to
mention it's saying that is exact is
false when is exact is definitely true
right
I mean I'm requiring it to be exact
so let's check out this with routers to
make sure they're both in here with
router sure match
now it'd be different if like let's
think if the route has a match like if
this switch had this route match being
correct or accurate then I feel like I
could I would know what to do I could
just get those props right the fact that
the match is just not accurate to what
the actual path is is kind of tripped me
up
you can access
right so basically show the location
match yes yes yes
as with rudder being loaded incorrectly
is that the issue here am i I'm no I'm
using with router from react rudder dumb
in another project and it's working fine
so I can't imagine that the fact that
I'm loading what's rather from react
routers the issue on this should be
1080p and I swear I had that settings
but
who knows my internet connection at this
point could be the issue ugh ugh ugh ugh
okay I'm trying to think here this is
tough let's see
mm yeah
well I'm pretty sure the issue here
isn't necessarily the match match stuff
the issue is that the the props aren't
updated right the props aren't going
along down they're not cascading down
downward I here's here's a here's a
little exercise here and my app I'm
simply just going to remove this route
I'm going to have say div in here this
is high okay and then if this app
extends component gets the correct path
then that should tell us something here
so we have high browser router router
with router sure whatever route app
location is right path is path is wrong
still Yanks this is driving me nuts
I'm gonna fire up maybe another project
here and see exactly what I did
all right ho hang tight here what I'm
going to do is I'm gonna fire up another
project let's cut this out
I need to see exactly what's going on
new this is an issue I might face but I
was sort of expecting the solution to be
pretty easy let's go ahead and dig in
here so while this is firing up I might
as well plug some stuff head over to
store that level up to Torrez comm if
you want to help support this channel
well my things are loading I'm going to
advertise here I have a new series react
native for everyone just react native
basics it just came out this week it's
well it came out last week but it's
super super good it basically everything
you need to know to get started with
react and react native and by the end of
it you end up being able to export an
app I mean I have a an apk that I threw
up on Google Drive and installed
directly on my phone so the end of this
series you learn a lot about both react
and react native to build real native
apps check it out ok see so this is a
site I built see if it's basically this
is a site I built for breaking
breakdancing I use it to keep a track of
my moves I have some tools on here
either way it's a nice little thing that
I built for the breaking community but I
recently updated it to react router 4
and if we head to the darn router and we
head to the state ok
Oh interesting new path is just forward
slash ok well that is a little
encouraging the route path here is also
just forward slash interesting and match
here app path is this now that's wild
because I am certainly using the same
match in this project
I mean I'm using it so at what point is
the match object actually correct main
layout
still not correct react meteor data my
moves match is now officially correct so
what's so special about my moves let me
open up this app in vs code and see
what's so special about my move that it
is in fact getting that route
I could just be straight-up dumb I'm
thinking about this right now and the
route path that it's matching is in fact
just forward slash so the reason why my
moves is working correctly in this other
example is because say home layout no
not home lat main layout main land the
main layout moves my Louvre exact path
one about so this is the first point
that it's deriving from just a
straight-up forward path yeah that's it
I mean the the route is matching this
path and that's why I match yeah okay so
that makes way too much sense that makes
way too much sense okay so if you are
just now getting to this point you
haven't been following along I'm having
some issues here where I'm basically
just trying to match a path and I'm
trying to match that path in the react
router sort of trying to match a path at
a more surface level of the app and I'm
doing that okay thank you for letting me
know that the material icon theme okay
whatever I'm doing that by using this
match that URL this match tie URL is
only giving me a blank forward slash
because at this point that's all it's
matched it's giving me a more than that
inside of these other routes and that's
specifically why match that URL is not
giving me the actual URL yeah okay so
what's a good solution for that
let's think let's think let's think
let's think so the compilers taking a
long time also welcome from Romania
Morocco and the Netherlands and where
everyone is it's pretty amazing I'm
broadcasting here from Denver Colorado
and it's like a hundred degrees out of
here today so my computer being superhot
is not helping and Bulgaria dang okay
it's amazing to me that you can
broadcast ill blown away by modern
technology all the time okay here we go
here we go here we go
giving me some cookie tossing stuff yeah
regex is still a good solution it would
still work I just wanted to do it this
way I don't know why I got Tesla's idea
and Germany Wow
I'm gonna get rid of some of those
without with with router stuff I think
it was just sort of complicating things
I want to get the current path I guess
what I guess what is the current path
right what is the current path yeah
the current path is just path name from
the props so within main layout
obviously match got it I get my matches
that way now I can use location dot path
name yeah that's the answer I don't need
to use regex location and if I seems
like I'm just hostile towards regex it's
just because it's I don't like regex
I don't I use it all the time I use it
frequently and I just hate it
okay since this already has a forward
slash on I think I can just do this this
hopefully is finally going to be the
solution where I'm getting the current
path location dot path name a pending
check out to it and then the car trapper
is going to just load up awesome
somebody from Australia Ireland geez and
I don't think anyone here is from the US
is there anyone from the US right now
see a e ok this is sort of loaded up
Papa there is no framework here this is
all 100% code from scratch well super
meteor and react I'm using meteor and
react and stylus and that's it no CSS
framework no design framework none of
that stuff all custom and why well I
actually started building the site in
reaction commerce a oh yeah
Texas what's up Joey and I started
building the second reaction commerce
which is actually built on meteor and
react and I really liked it but there
would be one or two things that reaction
commerce couldn't do the exact way I
wanted it to do and it caused me to be
upset and just
um so there was like I think I spent a
good solid week being like well this
would be easier if I just built my own
and then I was thinking well building
your own is going to be a giant pain
well I guess I should just build my own
it was a hard tough decision okay again
I'm an idiot here I'm using path name
which includes the word checkout and I'm
checking to see if the word checkout is
on the end of it that why checkout is
never ever going to load so what you
could do is you could take the current
path name and remove checkout from it
entirely this is just seeming like it's
it's getting kind of outrageous at this
point right so let's think let's think I
mean like like Rob said I could always
just check to see if checkout is in
within location dot path name but then I
do I get the benefits of react router in
that case yeah I don't really see why I
wouldn't
so location dot path name dot I don't
index of or was it contains one does the
string contains string contains
JavaScript includes includes and that
contains that's what I'm looking for
okay dot includes
and if path name includes checkout then
we can actually have our this is like
the most roundabout way to get to this
solution that a bunch of you guys were
saying to just do in the first place
essentially but that's how it goes
right and look at that checkout is open
now likewise come to another page here
let's load this up come on tutorials
blah blah blah or slash checkout and
this should hopefully turn on the
checkout now you know the cool thing
about doing it this way rather than
doing it another way again I'm having
blog there's like non-stop issues with
this I can see what I just made check
out a route of itself in the first place
yeah I get it okay I get what's going on
let's go to product and I honestly I
should just do this I should check if I
return here's an interesting question if
I return null from the data container is
this just going to return novel overall
that's a good question
I'm thinking it won't but we are going
to see
yeah it didn't like that it didn't like
that
yeah so maybe this checkout routing
wasn't such a great idea I've gone down
like a total rabbit hole here
hug hug hug well the good news is is
that I'm not using the checkout route
like I'm still using the checkout route
like this so if you're clicking around
in the site like nothing broke here so
the good news is is that if I wanted to
continue to use the site as is it's
going to sort of work correctly now a
huge weird thing here is the carts no
longer showing up with data great great
great great but obviously the the
process of this is to use react router
or nut to fiddle around with meteor data
stuff
get rid of that returned all cuz it's
stupid
the actual the issue the reason why I
was crashing is because of the same
reason before it was seeing the products
/type /annot such product and instead of
getting like a no such product page
because I didn't make one on it was just
getting that there was an error because
I'm assuming that there's always going
to be a product
yeah I wanted to have that checkout
route like that so you could hit the hit
the checkout and have the checkout be
sort of a window appearing above the
code but have it also be managed by the
history state right being managed by the
routing history so that way you could
program with they just say hey go back a
route go forward a route I'm honestly
not sure if the benefits are worth the
pain that it's costing me
I would change the path to XQ but like I
really like my clean URL structure right
now adding another one in there isn't
exactly what I'm interested in but it's
not a bad idea
I mean that would solve the problem nope
no question okay
yeah so well really what I'm going to
just keep on doing is keep on fixing
some of these routes here so I have some
static layout stuff and what's in the
static layout does dent layout is not
within the home layout but I'm nearly
positive the static layout is just the
same stuff so this static layout does
not even need to exist so like for
instance the privacy policy terms of use
these because once again just stay
within the main layout
import terms I believe it's in static
pages okay yeah so I'm pretty sure that
at this point it's just going to be a
lot of copying and pasting you've seen
me struggle through some things get
things going get things working a little
bit but screen flick come on man I'm not
telling you to update at this point I
don't know how how worthwhile is to show
the rest of this process basically what
I'm going to be doing is moving actually
I know what would be useful instead of
just moving these links here because
right now I'm just moving a bunch of
static links right that's just going to
take time well is going to be useful is
having these administrative links for
instance I have a bunch of
administrative tools like adding a
product and stuff like that that only
show up when you're an admin but the
routes themselves aren't necessarily
protected by anything and they could be
you could do it sort of how I'm doing it
here let's check out a couple of ways
right for instance not orders this is
localhost let's go ahead product you
notice it's not showing anything right
now
on the livest or EDD product gives me my
new product form this lovely new product
form but I want that entire route to be
protected right now I have an admin see
you know what the way I'm actually doing
this is probably the best except for I
don't want to use an admin layout I want
to use the main layout because I need
the header and all that stuff but I want
to use an admin page so instead of admin
layout this can just be admin page but
the react rudder Doc's there's a really
nice way you can do off entik ated
routes if we come up top here we can say
you were our authenticated routes like
custom now custom link
you know so they made a private route
component let me see if I can bump this
up so they made a private route
component which basically loads the
component brings all your props in and
if you are authenticated it can load the
component otherwise you can do this
redirect to login and this would
certainly work out just fine right but
in all honesty I don't need add this
isn't like user-facing I don't need this
level of stuff and I want to wait for
the meteor subscription to go through so
you could make a private route and
everything like that but in at the end
of the day what I'm using right now
where I'm currently loading up and admin
layout waiting for the user stub waiting
for their credentials and then just
returning null this isn't user facing I
don't need to redirect them I'll just
give them total blank blank slate
so let's think about that right I have
all these these routes
I want another route that's for admin
stuff now this is going to reveal a
little secret I prefer not to use the
word admin or stuff like that because so
many places have admin but obviously I'm
live-streaming this so cats out of the
bag here I used something called a bang
just like admin like you're an admin but
you're an admin it's a stupid joke and
because of that all my routes are kind
of hidden through obscurity and now
they're no longer hidden through
obscurity I have an admin page so I'm
changing this admin layout to the admin
page I'm doing that for a fun reason
here we can import admin page
from this is going to be in layouts
which I'm already N and then page this
file doesn't exist so it's complaining
I'm going to change the name of admin
layout to be admin page get rid of an
importing up top here ok save this and
let's head to admin page just do some
work page and in layout is now admin
page I'm going to be doing the same
thing where I'm checking for the current
user the current sub you might be
wondering where these preps are coming
from I'm wrapping them right here in a
data container and basically if you
aren't any of this stuff then well don't
show anything here and instead of
children which I don't need anymore
get rid of that I'm once again going to
have a switch statement where I can put
in all of my other stuff and look at
this vanquishing lines of code here
that's what I like to do let's get rid
of all that stuff ok and then it's
import switch and route from here we go
and I'm just going to copy and paste a
little bit more because why not
okay so the way I have this working
right now is if you hit ad mang you're
going to the admin page now typically if
this path I think I can just use forward
slash here let's test this out the the
main admin route is ad products for some
reason something I'll probably want to
change but I have the IDI product
whereas my admin components new product
okay so I can import new product import
new product from new product I don't
know why it's not finding this file here
obviously just get rid of this dot JSX
on the name for one unresolved why are
you unresolved I'm currently in the
admin page I'm looking for back admin
let's try this again sometimes vs code
can help me out here admin from new
product just in case I mistyped
route path dollar sign location let's
see
I'm not sure Rob I could check that out
to be honest I'm sort of uh I think that
might might be able to work I'll try it
off-screen just I don't spend an
exorbitant amount of time trying to get
that stupid check out route thing
working the by the way though the you
know the version that we're head with
the include did work it just got hung up
on the what's it called
it gets hung up because of the skew for
the path so you don't need all that
extra stuff that you have in there the
this right here this works although I
guess you are saying to keep it within
the wrap route component yeah I don't
know I'll try that off-screen I let's
check this out here and then layout is
not defined Edmund lave it's not defined
because yes obviously I didn't define it
I'm exporting something that doesn't
exist ok so I'm going to I'm going to
put a wraps to this at four o'clock here
I just want to get this last admin sort
of stuff going because four o'clock is
in eight minutes for me let's see okay
so admin is loading let's check to see
if new product is its net switch route
path and that's actually just because
I'm saying forward slash path once more
we actually want to use match correctly
this time and you to match and say
forward slash say match that URL
however what is that URL this match that
you
okay match dot URL okay so I don't need
the forward slash everything's all good
save this basically index route right
here cool this my new product form let's
see if I can add a new product test new
product I can use sticks about ping
actually let's use our n pink because
instead of developing an image upload
system which should be totally trivial
right now I just decided to throw the
images in a folder and reference them
definitely a speed not a great idea sort
of perspective here okay let's see if
this will save weight okay write product
added and beauty just like that we have
a product in here works the download
link it shows up even though there's no
download file in the cause and error so
either way as we can see here I still
have a bunch of work to do and most of
it at this point is really just copying
and pasting you can see to recap this
marathon right to recap here basically
we have on startup we're rendering our
router we're bringing in as an app
component which has a switch statement
which is really totally unnecessary for
right now but eventually we'll be having
route path blank and this will be an ID
I think this is like order slash ID or
something and this is going to be the
receipt layout the reason why the
receipt layo is totally different
because it's basically a blank white
screen if you are ordering from the
story you'd see it but as you can see
here we have a switch statement which
drills you down into main layout which
has another switch statement which
drills you down into these others and
the cool thing about react router 4 is
that as you keep going you can keep
adding these even switch statements are
just simply using a route statement to
determine something right you could load
any given thing based on a route path so
yeah I will save the stream if I know
how I think YouTube does it for me and
I'll put it up you can watch me struggle
through converting this to react router
and making some bad decisions along the
way and occasionally making some good
decisions as well but either way check
it out thanks so much for watching if
you like this let me know I'll do more
live streams in the future and I promise
they will be much less painful because
I'll know the hardware and equipment a
little bit better but either way
yeah shoot me any questions any time let
me know if there's anything you want to
see I'm gonna get this all going with
here's what I'll do I'll get this all
going with react router and after all of
my routes are converted into react
router
I'll livestream another one as I add
server-side rendering that way we can
see server-side rendering within react
router for so as always the Scott level
up tutorials thanks so much for watching
and check it out Mortal by of streams in
the future as I get better and better at
them hopefully but yeah absolutely I'll
do more and I'll do more on this
codebase too there's obviously a lot of
stuff I want to update on this codebase
and we can talk about it together so
thanks so much for watching and yeah
I'll see you in the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>