<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GatsbyJS Tutorials #7 - Building An Index Page | Coder Coacher - Coaching Coders</title><meta content="GatsbyJS Tutorials #7 - Building An Index Page - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GatsbyJS Tutorials #7 - Building An Index Page</b></h2><h5 class="post__date">2017-09-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/LlTdcsEk6ko" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey you what's up this is Scott with
level up tutorials here and today I am
going to be completing this where we
actually build our blog index I
mentioned a little while ago that we're
going to do this and give you an
opportunity to build this yourself now
that opportunity might have been a
little bit too long and I apologize for
the any sort of delay between these
videos however today we are going to get
this query that we wrote and we're going
to throw it into graph QL in our actual
code and get this building out in index
so it's head to Visual Studio code we
have some blog posts and let's go ahead
and check out our index page and here we
just had this really super basic index
page which we can get to through our
just we click on our logo right here ok
it says hi people that's it now what we
want to do is really just sort of look
at what we did in our post page because
the post page is really the key to this
all so I gave you a challenge to do this
on your own and if you did I hope that
you tried to do it maybe even without
looking at the docs because what we have
already within this code enabled you to
do this the hints in this code are
within our posts template as well as
that original query that we wrote so
let's head to the post page and you can
see that we don't have a ton of crazy
stuff going on here we simply just have
a function where we have a template
where we're getting some data and we're
getting our posts from markdown remark
okay that's all great
right but what we don't have is anything
super fancy here the biggest thing is
that the wrapper is the post query where
we're exporting our post query so let's
head back to our index page and let's
take not this index page I want the
other index page okay here we go and
let's take this knowledge and build out
something what we want to do is we want
to export a constant page query okay
page query is going to be equal to just
like it was before graph QL and then we
have some backticks
okay now inside of
backticks is going to be our page query
where we can say not query query and
then we're going to just say and this is
where things get a little bit different
okay in our post query before we just
had blog posts by path okay this is just
the name of our query now what we
actually want is to give this a
different name so not blog post by path
we're and just do index query okay this
is going to be grabbing all of the
indexes now let's go ahead and have some
brackets now in here we get to do the
same kind of stuff we did in our actual
query and in fact we can head to our
graphical interface I'm going to copy
and paste this all markdown remark
notice I'm not copying these out
exterior brackets here and paste this
inside of this index query so what this
query looks like is we're saying all
markdown remark give me 10 okay
I'm not doing any sorting I'm not doing
any filtering I'm just simply getting
all 10 pages and then I'm going to
publish the edges the node okay inside
of that instead of the front matter I'm
gonna grab the path and title now you
could also grab some sort of date if you
had a date associated with each page but
if you're looking at this and thinking
that's it that's all I have to do then
you are absolutely correct because now
what we should have happen is if I save
this let's go ahead and open up our dev
tools into our actual site here and if
you don't have the reactive tools by now
and you're working in react you've got
to get the react dev tools they make
life so much so much better all right
let me blow this up here maybe not that
much blow it up enough to where you can
see it let me close this console or I
don't even know how to say counselor
anymore everyone critiques how I say
Council at this point so let's check out
our react code here and what we want to
do is look at the index page okay so
let's search just for index page let's
select it and you can see we have some
props and inside of here we have one of
these props as a data inside of that is
all markdown remark inside of that
is our edges and said if that is all of
our stuff so we now have all the tools
we need to build this right this is data
that came from markdown files is in
react and if you know react you should
be able to get this data out now let's
go ahead and just do it anyways
regardless I can use this object
properties here and get the data which
is the prop that we're getting which is
data as you can see here and inside of
data let's just go ahead I must do it
below here this site isn't going for any
sort of design awards or something like
that
feel like I say that all the time
perhaps I should just get good at
designing stuff okay so here we have our
data object and inside of data let's
take a look at the we have all markdown
remark we have edges 0 ok and then it's
pretty much in just an array inside of
edges so we just need to get two edges
and since we're doing this as a
functional stateless component and I'm
just returning the whole thing you could
do this as let me grab dot markdown
remark here we could do dot markdown
remark dot edges dot MAMP
okay and we're going to be iterating
over all of our edges and we can just
say post ok because why I call this an
edge when it's a post and we can say
post now instead of here I'm simply just
going to return so I got some standard
parentheses here I'm simply just going
to return an anchor tag you could have
this as obviously a component itself an
anchor tag with an href and this href
hyperlink reference and we could say
post dot path ok post dot path now let's
close this anchor tag off and inside of
here do a little bit of post dot title
and let me see if I have any sort of
unique ID here on these posts
well and you can see already I'm already
failing this because it's not just post
it's post node that frontmatter dot path
that title that sort of stuff okay we
don't have any ID here I'm gonna fix
that in a minute but let's go ahead and
actually change this node dot
frontmatter business first
so we could say dot node so we could say
dot node dot front matter dot path copy
this all paste it in here obviously like
I said you could do this a little bit
differently you could pass this data
into a component and then you could
further flesh out these properties and
these values in a different way
but for the sake of brevity I'm just
going to leave it here just like this
and let's check this out let's see if
this worked okay or let's see if it blew
up it's currently blown up can't read
property edges of undefined and if you
notice I did have a little bit of a
issue here I used from the post query
markdown remark which was used to grab a
single post right however we're grabbing
all markdown remark so obviously this
data object that comes back it's not
dated a markdown remark where it's data
dot all markdown remark and I should
have noticed that and if you did kudos
right okay
so data dot all markdown remark edges
dot map and here we're just taking each
post that's within there and we're just
simply outputting a link and we're using
the post dot no death frontmatter path
and post I know dot frontmatter dot
title so let's check this out it's gonna
give me an error about there not being a
key which obviously there is no key so
you know that's kind of hairy you're
gonna get let's check this out and here
sure enough we have both of our blog
posts and if we click on first blog post
you can see we've arrived at our first
blog post but as you can see here we now
have a little bit of an elite blog post
index now one last thing is that like I
mentioned before if we open up our
council my council wants to open
apparently doesn't if we were to go to
our council let's go over here we're
obviously going to get the unique key
issue now that's no big deal because if
we head to our graphical we can check
out that each node in addition to
frontmatter has an ID so if we hit play
you can see it's giving us an ID and
right now this idea is generated and
that generated ID is just the absolute
path of the file as a long string so if
we really wanted to we could publish
this ID into our query where we could
say ID just above frontmatter
and then we could use the key as equal
to all this stuff me now put this on new
lines so we can actually read okay and
we can say dot node that ID check it out
and let's head back to our Gatsby
default starter and you can see no
longer getting that error if I head to I
reactive tools and we were to go to the
index page we could see that we have
keys on these links now let's talk about
one enhancement that can be made here
for instance I use an anchor tag to go
to these pages if we want to keep this
in react we want to use this link tag so
obviously you'll want to change these
anchors to a link in addition to that we
could also add a a date a date stamp on
each of these posts and grab that date
and things like that perhaps we could
have a frontmatter that was in our
markdown maybe perhaps this frontmatter
is a draft right maybe this is a draft
and we could use that to filter our
posts so there's a lot of things we
could do to improve this one of which
was really easy some of which are a
little bit more complex here so in the
next video what we're going to do is
actually build out a little bit of a
drafting system where we can have a
draft on this post and we obviously
don't want to show any posts that are
drafts so that's where we're gonna take
this and we can continue to go from
there so again like last time I
challenged you to make this block index
and this time I'm going to challenge you
to make this draft system right and if
you think about it it shouldn't be too
hard however you might need to look up
some
during syntax for graph QL because we
have not talked about that but now you
have the tools to head to graphical and
play around with your queries and know
exactly what you're getting into before
you start just messing around with code
if you would like more premium content
head over to level up tutorials comm and
sign up to be a level up Pro I got a ton
of stuff coming up this month including
a new series on figma we're gonna be
doing some advanced meteor stuff and a
whole bunch of cool stuff I'm going to
dive into a little bit more graph QL and
some different ways I'm still working on
what exactly that is and at the release
of react 16 or as it's also known react
fiber I will be doing an entirely new
react series because the other one is
out of date so thanks so much for
watching and I'll see in the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>