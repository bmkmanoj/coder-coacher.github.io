<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Meteor 1.4 For Everyone #5 - Saving Collections | Coder Coacher - Coaching Coders</title><meta content="Meteor 1.4 For Everyone #5 - Saving Collections - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Meteor 1.4 For Everyone #5 - Saving Collections</b></h2><h5 class="post__date">2016-09-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/87itlujo8u0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up this is Scott with level
of tutorials and in this video we're
actually going to be saving data to our
MongoDB database by using collections so
let's get started with that now okay so
what we're making here is some sort of a
voting application right so you can
think of it like we have two things
right you say this or that and if you
select one then that one gets a plus one
okay so the reason I present this is
because we're going to be building this
database now there's a lot of different
ways you could model this database and
that's not really important for the
scope in course of this tutorial because
really what I want to show is just
collections overall and how we can use
them so by any means if you have a
better way of modeling this database
another way you would like to implement
go ahead and do that however I'm gonna
make this nice and crystal clear so what
we want to do is we want to go ahead and
create a new folder I'm going to hit I'm
going to open up my folders here the
sidebar and the inside of imports I'm
going to create a new folder now this is
going to be the first work we're doing
on the server so you'll get to
experiment a little bit there we're
gonna do is say API so the name of this
folder is the API and inside of here
we're gonna create a new file which is
simply just going to be items dot J s
now I'm calling this items I guess
there's not a lot of better words for
two things that you're voting between
two items I thought a little bit about
this but I guess two items two objects
two things they're all sort of
nondescript but two items works so let's
come here in two items J s and now let's
go ahead I'm gonna hide my folders here
and let's import Mongo so we can import
and then once again inside of brackets
Mongo
from and then inside of a string here we
could say meteor forward slash Mongo
okay and now we're going to be exporting
something
now we haven't exported anything before
and we could simply just say export
Const which means this is a constant non
changing variable so export Const and
that we're going to say items is equal
to a new Mongo dot collection
okay now Mongo collection is a method
here collection as a method of the Mongo
object and we can say this and this
method accepts a string of which the
title of this collection so we're going
to have done lower case items okay wrap
that all off with a semicolon like this
so we're exporting a constant variable
named items as a new Mongo collection
now let's go ahead and actually head to
our server side cogs if you remember
nothing's being imported by default
anymore so we want to head to our server
main j/s where we had this meteor dot
startup code and inside of here I'm
simply going to import our new API file
so we can say import and then as a
string dot dot forward slash imports API
forward slash tasks forward slash items
dot J s now this is just going to make
sure that this file runs server-side
okay nice and easy but it just makes
sure that our collection gets loaded
server-side now let's head to our body
dot j s now this is where we're going to
talk a little bit more about importing
statements I mentioned that things were
going to get different once we started
exporting
explain how right now what we want to do
is have access to the items variable so
you want to run mungo commands like find
to find all of your items but we can't
do that without items being defined just
like you can't say hamburger is equal to
cheese without first defining hamburger
somewhere and saying var or let
hamburger right you have to define your
variables before you use them and this
importing is a way essentially to do
that so we can import and then again
we'll have brackets here items from and
then we're going to go ahead and grab
those from our API so dot dot forward
slash API /i Timms dot j s which is the
name of the file now you'll notice
sometimes when we import things we don't
have these brackets around the item or
the thing you're importing and you might
be confused about when you use these
brackets and when you don't well that
all stems from this export statement
let's remove this export statement and
right down here say export default items
okay because what the brackets are doing
those are essentially just saying that
items is one of the things being
exported from this file but if you're
only exporting one thing or you have a
default you can say export default and
then the variable and then we don't have
to use these brackets here we can say
just like this and now items is the
default for what we're importing from
items J s you'll notice now that this is
here it's all good okay let's go ahead
now that we have that working let's go
ahead and delete our current helper
which is hello and add a new helper
which is going to be a function here and
we can say items parentheses and then
brackets like this and inside of here
we're going to return now we get to use
that variable that we're
porting items dot find and we can have
two curly brackets in here just like
this
and you'll notice that this is all
nothing's happening here well what's
funny here so we're now having items
which are going to bring in all of our
items that exist but we haven't added
any items yet so obviously nothing's
going to exist in this return here
nothing's gonna happen but let's say we
could add some items well let's go ahead
and add an item okay so we can do that
simply from the command line I'm gonna
hit of a new tab so inside of the root
directory of our application you can see
I'm here I can type meteor Mongo to
access the Mongo shell at this point I
can insert something into the database
simply by saying DB tasks duct insert
and we can have our insert here now I
have a couple of properties one of which
is going to be item one inside of item
one is going to be an object where we
have text and the text is going to be
hello and then we have a comma the next
one's going to be value value is going
to be a number of 0 ok close that off
here and we can then close off item
number 1 as well
comma and now we can have item 2 colon
and then we can have a bracket text is
going to be high we're gonna be doing a
comparison between high and hello comma
value is also going to be 0 wrap that
off of the bracket and then it wrap item
2 off with a bracket and then finish
this whole thing with a parenthesis here
or a semicolon so you'll see we have an
object of item 1 which includes as
values an object of text hello and a
value of 0
then we have a comma then we have item
two with a value of an object including
text of high-end value of zero from here
we can just hit enter so from the root
of our directory here we can have access
to our database and you'll see we can do
that simply by typing in meteor Mongo
and from here we can actually insert
something directly into our database we
can do so with DB that items dot insert
and this isn't going to be what the
object will really be like but we can
just say text : hello okay and then wrap
it off with the parentheses semicolon
okay so this is basically just
JavaScript DB items that insert we have
parentheses we have an object text and
instead of a string hello enter and we
now have one result inserted because we
have something inserted into our
database we can now head back to Adam
and like let's say we wanted to find all
of these items like we did here we can
now display these items using this
helper items now this is going to return
an array of items even though there's
only one it'll be on array with one item
so we can get all of those items out of
here with a very simple loop and we can
do that with these template tags here we
can say pound each and then you remember
our helper was items right here so we
can say items okay now inside of this
each we need to then close this each now
because we've started this each we'll
need to close this each and now we're
going to want to export the exact text I
believe we had it just as the text
property so because of this we're
looping over each item and other things
you might see something where we have
like item
text this isn't the case in this case we
can just simply say inside of double
brackets text and you can see it says
hello here just like that just popped up
so it we don't need to do item at each
items as item and then item text we sort
of just know that each inside of each of
these items were accessing this property
text and if we were to just come to our
MongoDB and let's insert another one
head back you could see it's instantly
being outputted as well it's one of the
really huge benefits of meteor and
things like angular you have this
two-way data-binding where you can text
and an input and have it instantly show
up with meteor it's sweet because what
you're doing is the moment something is
added to your database as long as it's
being published which we have Auto
publish on it's going to show up
directly on the front end of your site
so here simply by inserting something
into the database if we head to this
helper this functions being rerun it's
finding all of the items again it's
going to output them as the helper items
and it's going to be updated here on to
our page so just like that we have a new
helper and items here is now able to
have all each of our items displayed
directly right here now obviously in a
voting app we're need more information
than just a text we're gonna have
essentially two items and values for
each of those items but to be able to do
that we want to go ahead and add them
via a form in the last video we talked
about events and we created this
template body events and we had a click
event on a button and it did some stuff
in the next video we're gonna be talking
about a form and we can have a submit
event and we can grab values directly
from the form we can then submit them to
our database and have them show up in
here in real time like absolutely
nothing so as always this is Scott with
level up tutorials if you have any
questions or comments leave a comment
the video hurt me up at Twitter or
Facebook at level
tutorials following the completion of
this series I will be advancing on to an
intermediate meteor with 1.4 and we're
going to keep going into some advanced
topics and we're going to be doing a
meteor and react version of the same
series with the same exact code building
this and react and we're gonna take that
pretty far I'm going to do some image
uploading stuff it's gonna be really
super super cool we're gonna take this
voting app and and turn it into
something really super interesting so if
you are interested in learning all that
more ahead to store that level up
tutorials com become a LevelUp Pro get
early access to all of those series and
get exclusive access to the majority of
that content because a lot of it is not
going to be on YouTube for the first
time ever it's going to be only for pro
subscribers so make sure you're there at
stored I level up tutorials calm to
either purchase these series or become a
level up Pro and help support the
creation of the free content thanks so
much for watching and I'll see you in
the next one bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>