<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>#21 Our Goals Schema Resolvers &amp; Collection  - Full-stack GraphQL with Apollo, Meteor &amp; React | Coder Coacher - Coaching Coders</title><meta content="#21 Our Goals Schema Resolvers &amp; Collection  - Full-stack GraphQL with Apollo, Meteor &amp; React - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>#21 Our Goals Schema Resolvers &amp; Collection  - Full-stack GraphQL with Apollo, Meteor &amp; React</b></h2><h5 class="post__date">2018-01-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pV1FYuSRQZg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so in this video we're gonna get
started actually working on our goals so
in the last video we showed how you can
write a custom resolver and those are
gonna come in super handy when we're
doing this one now what I'm going to do
is create a new folder which is simply
just going to be goals okgo Oh ALS I'm
gonna have a few new files in here I'm
gonna have a resolver CAS I'm gonna have
let's see a new file that is goal dot
graph QL okay
did some graph QL schema going and I'm
gonna have another file which is going
to be goals all lowercase J s goals all
lowercase J s so let's start with goals
J s first thing I'm going to do is copy
the contents from resolutions J s
because well this is pretty much
everything we need just changing some
words I'm going to paste it into goals
and change the word resolutions which
you could do via Find and Replace if
you'd like resolutions to goals let's
replace all those make sure that this
goals in our collection is a lowercase G
although that's extremely important but
it's nice to keep some consistency so as
you can see here we're simply just
defining a new collection and exporting
it easy okay next we're gonna go ahead
and define a new type in our graph QL
file which is going to be a goal now
what are our goals going to have well
we're gonna have an ID which is a string
right that's kind of a given at this
point its underscore ID again now we're
going to have some text and what do we
actually call that in resolutions I
think we just called that a name let's
go ahead and have this be a name as well
just to keep it consistent so we have a
name now I'm not necessarily a master of
database design and but it doesn't
necessarily matter so much on the graph
queue all kinds of things because what
we're going to be doing in this video is
saving our goal and attaching it to an
ID of a resolution I
so does that mean we need a resolution
ID in here
no and I'm gonna tell you why the reason
being is we're not necessarily ever
going to output or need the resolution
ID in the side of the schema itself now
if that doesn't make any sense to you at
this point don't worry about it I'm
gonna nuke that out of there
next we're gonna have a completed which
is just going to be a boolean okay so on
each of our goals we're going to relate
to them to a resolution now there's a
lot of different ways we could do this
you could have an array of IDs on your
resolution I'm actually just simply
going to have a resolution ID on the
database property of goal again however
we don't need to do that yet so let's go
ahead and just have type goal which has
simply an ID a name and whether or not
it's been completed next thing I want to
do is define some resolvers again let's
head to our resolution resolvers and
let's copy a lot of this out of here
because really we can use so much of
this paste it into goals and again let's
do a find and replace and replace every
where it says resolutions with goals
we'll also need to make sure that this
goal is lowercase up top here
I don't know IV s code if it if there's
an extension for this or if I'm doing it
wrong I know Adam had a really nice way
that it would keep your case when you
define every place I haven't necessarily
found that same functionality in this
system so this is great however let's
look at this a little bit what are we
not necessarily going to be doing well
we're not going to be querying goals off
of a user ID so right now let's go ahead
and just simply return all of the goals
I say this because you'll see in a
little while about how we actually
return our goals in fact we don't even
need this query at all which might kind
of blow your mind here okay so let's go
ahead and delete that now next we are
going to have a
create method here and what we're going
to have in this create is we're going to
have instead of having a name in here
we're going to have a name and a
resolution ID every time we create a new
goal it's going to automatically be set
to completed false it's going to
automatically generate its ID we simply
just need a name for it and we need to
know which resolution it attaches to
next we also don't need this user ID we
can remove this business here and let me
change the Texas says create resolution
and changes to create goal ok so create
goal is going to take two arguments a
name and a resolution ID let's change
this constant property to goal ID goal
ID is going to be equal to goals dot
insert where we're simply going to have
the name equal the name and let's
actually have the resolution ID equal
the resolution ID in addition we're also
going to have you saw from here our
completed property completed is going to
be false so when we create this goal
initially it's always going to be
obviously not completed yet so check
this thing out this is our mutation and
what this is simply going to do is our
create goal we're going to create it
we're going to attach it to a resolution
by setting its resolution ID we're going
to give it a name and we're gonna make
it completed false then we're going to
return the results of a find one where
we find obviously not resolution ID but
goal ID if you want to just copy and
paste this that's cool too this is going
to be essentially everything we need to
insert a goal into our database so we
fast and furiously created so much stuff
just now let's go ahead and head to our
register API file I'm sorry if I breezed
through that stuff but like in reality
we've done it all a bunch before the fun
stuff is not coming just quite yet I'm
going to copy these couple lines here
and
the word resolutions to goal goals
schema goals schema I guess I don't know
this is not a lesson in naming things
but I'm doing it okay job here okay we
get new goals folder and note API goals
and then goals dot graph QL goal to
graph you all my bad goal dot graph QL
ok so check it out we have our goals
schema which now needs to be added to
our type deaths I like to have these
alphabetically mmm goals resolver which
can be now merged into our resolvers not
dot but comma here okay so every time
you were working with this stuff
remember that you need to add your type
definitions to the type deaths and you
need to add your resolvers and queries
to the resolvers here inside of your
make executable schema now before you
look at your terminal can you guess
which error we're going to get on our
command line right now because there's
going to be a very specific error if we
didn't you know mess up any sort of
syntax anywhere think hard long and hard
for a second about one step we did not
do we did not define our mutation inside
of our graph QL we defined it inside of
our resolvers but as you can see here
mutation dot create goal was not defined
in the schema so let's head back to our
graph QL and we can extend type mutation
and this is going to be now the name of
our mutation which if you remember was
create goal and if we consult our
resolutions dot graph QL file you'll
remember we need to have parentheses
which which properties it accepts and
colon and then what it returns okay so
the is going to be parentheses then
we're going to need to define what
properties except you remember it needs
a name with a string okay comma and i
have an exclamation point because it's
required and it also needs a resolution
ID which is also going to be a
string exclamation point then we can
have a colon and then it returns a
single goal
not cool goals what are you doing here
goal single goal I swear the command key
is so difficult to push down on these
new MacBook Pros that I just type s all
the time instead of command s okay let's
go ahead and now head to our register
API I'm going to just modify this file
slightly here so that our compiler knows
to restart and you can see we have our
server restarted again this has all been
kind of again Fast &amp;amp; Furious Fast &amp;amp;
Furious 7 her Fast &amp;amp; Furious 8 whichever
is the most recent one and I'm saying
that because we've done all of this
stuff before we've written a mutation
we've written graph QL schemas a whole
bunch now you don't need to see me you
know do this painstakingly slow the fun
stuff is going to be coming up in the
next video so what we're gonna do now
really quickly is again we're going to
head to our App j/s file and we're going
to take a look at this and say hey you
know what you really need is inside of
each of one of these resolutions we
should probably have like a goal form
just like we had resolutions form so in
our code and our UI you can actually
just copy the entire resolution in that
register form but the resolution form
file we're doing a ton of copying does
so much of the stuff is the same right
now so inside of UI let's go ahead and
make a new file named goal form dot J s
I'm going to paste this in here this is
the contents of resolution form so I'm
going to once again change a lot of the
word resolution to form to goal so I'm
going to say resolution and this time
I'm going to make it so that case does
matter just so I don't copy over the
lowercase ones like I've been doing
you've probably been pretty angry that
I've been doing that we can now replace
these create goals create goals create
goals okay
the only difference is apparently its
name to create goal and not create goals
the only place that's super important
let me go back here and our mutation
this is the only one that is super duper
important that it says create goal but
you might as well keep it consistent now
remember we needed a name which was
required but comma we also need a
resolution ID and just likewise just
like that we had name colon name we're
gonna have resolution ID colon dollar
sign resolution ID these are for all the
same reasons this mutation accepts a
string and a string it's gonna pass
those strings along to their given
property and it's gonna send them along
to their mutation again at this point
you should be a pro yeah because you've
done this once so check it out let's see
how this goes so far we have our
mutation here that we're now defined
that is being used in graph QL right
here now this again it says create goal
so let's change these to gold okay so we
now have a new function called creat
goal we don't need this refetch queries
anymore or at least kind of we don't
need it you'll see why in a minute here
right now we're just not going to bother
with it we'll come back here in a minute
and yeah that's looking pretty good now
next thing we need to do is scroll up
top here and we'll have our goals form
so goals form extends component we have
our submit form this function should be
called create goal which is what we
named it down here and apologize for our
let's create goals business and next
thing we have name coming in from this
done named add value which works fine
because this is all the same however we
also need a resolution ID it's required
so resolution ID should be coming in
from this dot props dot well let's
actually bring this in as a resolution
ID which we haven't done yet chem so I'm
gonna save this now let's head back to
our
Paige which is getting super bloated
mind you and again if you are falling
behind here for anything can salt the
code I want to just make sure I get to
all this stuff and we're going to bring
in our goals or our goal form I've
spelled it so many different ways at
this point goal form from goal form
pretty sure the components named at
goals form goal form that word is just
do mean anything to me anymore I'm sorry
getting rid of this last s here goal
form you should not see goals form
anywhere it should just be goal form
goal form it's now blended into its own
word goal form okay so check it out we
are importing goal farm and we're going
to now come into our list item and we're
going to have a goal form in our list
item down here like this and a
resolution ID is going to be equal to
resolution dot underscore ID boom so
we're passing in each individual
resolution we're passing its ID into the
goal form this is just basic react stuff
inside of our goal form we are then
having it just a basic text input with a
ref that assigns the name value to this
dot name we have a submit button the
submit button is going to run the submit
form which is going to call our mutation
which is this dot props dot create goal
it's going to set the variables name to
the form value this dot name dot value
and the resolution ID to the prop that
we passed in that is going to trigger
our mutation create goal which we
defined in our resolvers not these
resolvers but we defined as you know
inserting into the database now we did
all of this without even checking to see
if anything broke if you head to your
command line luckily nothing is broken i
refresh my page and something is broken
here from the ward I wrote the word
goals form somewhere
unbelievable on goal for nsj down here
at the bottom I exported goals farm
which didn't exist
yes lint where are you okay so check it
out this has been a long long video and
there's we have nothing to show for it
at the end of this we simply just have
another forum here but this forum should
be working right now if you if you did
your business correctly so let's go
ahead and have a new thing which is say
do ten and stands submit okay
nothing happens but if you check your
network tab in your chrome developer
tools and we head down here you can see
this one that just popped up which is a
graph QL fetch if we click it and we
click to preview you can see inside of
data we ran create goal and we did
actually return an i d-- ah if you
aren't getting any errors and there's no
redness here you should be able to see
this inside of your network tab again I
went to network then to graph QL in the
left column here the most recent one
then I selected preview and instead of
the data
I actually was returned an ID so again
if you are causing errors compare your
code to the one in the repo for this
video because as is right now this thing
is submitting to the database it is
working so in the next video what we're
going to be doing is actually getting
these to display using a custom resolver
and it's gonna blow your mind so as
always this is Scott with love
laboratorios thank you so much for
watching and i'll see in the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>