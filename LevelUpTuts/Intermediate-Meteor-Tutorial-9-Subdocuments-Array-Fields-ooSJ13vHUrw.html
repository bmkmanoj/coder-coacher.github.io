<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Intermediate Meteor Tutorial - #9 - Sub-documents &amp; Array Fields | Coder Coacher - Coaching Coders</title><meta content="Intermediate Meteor Tutorial - #9 - Sub-documents &amp; Array Fields - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Intermediate Meteor Tutorial - #9 - Sub-documents &amp; Array Fields</b></h2><h5 class="post__date">2015-10-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ooSJ13vHUrw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up this is Scott with level
up tutorials and in this video we are
going to finish filling out our schema
so that we can add a sub document and
show you how you could have an array as
a value inside of your schema and what
auto form automatically does with that
for you so let's get it going right now
so we now have our routes going we have
our form working and everything's going
pretty nice but like I mentioned before
in the last video the schema isn't
exactly complete so let's go ahead and
take some time to finish out that schema
and we can have some nice little sub
document tricks going on here so let's
head to our collections recipes file but
before we do that just like a commenter
pointed out in the last video we used
meteor dot collection here well that's
actually the old way of doing this you
actually want to have Mongo dot
collection here and if you'll notice
your site will refresh and everything
will be the exact same way it was and
you won't lose the data that you already
submitted the only difference is is that
meteor dot collection was the old way of
doing it as a version like 0.91 I
believe it changed to Mongo dot
collection so Mongo dot collection
instead of meteor collection not a huge
change just something to be aware of
just so your code is up-to-date ok so
right above here we're going to add a
new schema and this is going to be the
ingredients schema and we're gonna be
using this additional schema inside as a
sub document and auto form is just gonna
sort of know how to handle that so let's
go ahead and say in greedy --nt and this
is going to be equal to a new simple
schema just like we had before and let's
go ahead and have the function and the
object inside of the function here now
let's go ahead and define some
properties one of which is going to be a
name and this is going to be a type of
string okay
now you might be wondering why are we
doing this whole sub document thing well
if you'll notice the ingredient has its
own properties right an ingredient has a
name but we already have a recipe name
and so instead of having a separate
field that's like ingredient name this
is not only sort of namespacing this
name two ingredient but it's also
keeping this and the other properties we
apply to this such as comma amount this
is the amount of the ingredient that
you're going to be using this is keeping
this data together so when we create a
new ingredient with inside of our recipe
we're not having to deal with like
separate arrays of different properties
and stuff like that it's going to keep
it together now the reason I'm doing
this is a string is because I don't want
to deal with units that way you can
specify your own unit in this like we
could say ten pounds or you could say
one bushel or something who knows but
either way we just have the name and
amount here and so this is our
ingredient schema and now we want to go
ahead and actually use that in our
recipe schema itself so let's just head
down here and after description I'm
going to add another new field and this
is going to be ingredients okay and now
inside of this object this is gonna be
really super cool don't forget to put
your comma here this is really super
cool we can say type colon and then
inside of square brackets we can do the
simple schema that we defined before so
capital I ingredient like so so if we
want to check out what's going on here
let's head over to our application and
we can head to our recipe book route and
you'll now see that we have name
description and we have name and amount
now what's great about this is that you
may not have noticed something that we
did here if we were to simply just say
type is ingredient without the brackets
let's come back to our app
you would see we have ingredients name
and amount so what this is doing is we
have a name description and ingredients
it's keeping this as a sub document
right but it's only allowing us to have
one right but by simply putting this
ingredient in an array in our type it's
making this a field that automatically
has incrementing boxes so because we put
that in an array we can now plus or
minus and add or delete as many of these
values as we want now the reason why
this is so cool is because we didn't
have to do really anything special to
get it to work like this Auto form is
just totally helping you out and really
just making this easy on you so now you
can add as many or as few ingredients as
you'd like so for instance if we had a
new meal and that meal was named grilled
cheese you would want a it's a sandwich
okay you would want the name you'd want
bread we need two slices and you need
cheese
you just need lots of cheese right
because that's how you make a good
grilled cheese and then now if we click
Submit let's check out by hitting ctrl M
let's check out our Mongol and we can
see how that data is actually stored so
now we have ingredients and we have an
array with name and amount and name an
amount so when we want to get that data
to display it's gonna be really easy
because all we have to do is loop over
this ingredients array and then up with
the name and amount so of course you're
gonna see that in a little bit once we
actually get going on our listing and
stuff like that but it's just something
that's incredibly handy and incredibly
fast to do in meteor okay so let's head
back over to our code and now I have one
more property I'm going to be adding to
the schema and this is going to be
whether or not this is in the menu so
this property is going to be in menu now
this is going to be used
if we are saying that this particular
recipe is in this week's menu therefore
it's going to add all of the ingredients
to our shopping list and it's going to
add it to the list of recipes that are
on this week's menu that way you can
have this page that's your menu and all
it's going to be is the recipes that
you're making this week and of course
you'll be able to easily access the
ingredients that you need when you when
you go shopping so we can say type and
the type is going to be a boolean and so
we haven't really seen anything other
than type of string and date and now a
sub document type but we now have a type
of boolean which is just true or false
here and we want the default value to be
false in addition we want this field to
be optional true because when you're
filling out the form we don't want you
to have to have a value here because
it's just going to be defaulting to
false now we can say Auto form now an
auto form like we've seen that's just an
object and we're going to use a type of
hidden for this as well because we do
not want the user to see this and there
we go so now whenever we're adding a new
item it's going to be automatically not
added to the menu itself we can just say
so we can add a new meal let's just say
fish tacos now the description doesn't
really matter I'll just put the fish
tacos here again of course if this is
something you wanted to keep better
track of the style of fish tacos or
something now we need some sort of fish
we can just say it's going to be we can
just say it's gonna be tuna and the
amount is going to be one pound is what
we need that's a ton of tuna for making
fish tacos but that's alright and now we
can need some let's say mango and we can
just say one fruit fruit okay submit
this check out the record by control-m
once more we can head and we can now see
that we do have in menu false
no sweat if you'll notice we just you
know by adding things to the schema
it's just so easy we don't have to do
database migrations we don't have to
worry about the system not accepting the
value by just totally defining the
schema it serves as sort of like the
gatekeeper as to what data is going to
work and how it's going to work in your
application okay so we now have
ingredients we now have if the item is
in the menu this is a really good start
to our form so in the next couple of
videos I'm going to be showing you some
cool features we're gonna be dropping in
some CSS to actually get this looking
nice and we're just gonna continue work
on our application it's just too fleshed
out to be more of a real application
building up the navigation making sure
that when you're logged in you're
redirected to recipe book things like
that so as always this is Scott with
level up tutorials if you have any
questions or comments if it come in the
video or hit me up at Twitter or
Facebook I level up tutorials I'd love
to hear from you if you liked the meteor
for everyone series you can now download
a digital copy of it for 9.99 get all of
the course files and 22 HD mp4 videos
with that in addition we also have some
level up t-shirts so that you can help
support level up tutorials continue to
release excellent free tutorials so
thanks for watching and I'll see in the
next one bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>