<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Intermediate Meteor Tutorial #10 - Private &amp; Public Settings and Google Analytics | Coder Coacher - Coaching Coders</title><meta content="Intermediate Meteor Tutorial #10 - Private &amp; Public Settings and Google Analytics - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Intermediate Meteor Tutorial #10 - Private &amp; Public Settings and Google Analytics</b></h2><h5 class="post__date">2015-10-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/iH-Np5WuyUw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up this is Scott with level
up tutorials and in this video we're
gonna be showing you the Settings JSON
file which allows you to store public
and private variables that you can use
in your site maybe for storing API keys
typically things that you wouldn't want
to commit to your repo or anything like
that in the end of this video we're
gonna show you to a public setting to
add Google Analytics to your project so
let's get going on that right now okay
so in this video we're going to talk
about something that's really super
important to building advanced meteor
applications and that's the Settings
JSON file now the settings JSON file is
a file that you can make in the root
level of your project that allows for
totally private variables that you can
use on your server now this is something
if you're using version control that you
will not want to commit to your repo
because this is typically where you're
storing private information things like
private keys basically values that you
don't want other people to have many of
what you don't want to even be available
on the front end of your application so
to get started let's go ahead and create
a settings that variable file in the
root of our project so new file settings
dot JSON now we don't have to do
anything special in this file just make
an object and what we can do now is
define a property so we can just say oh
I'm just going to call this hello and
the value is going to be I'm private
okay so this is absolutely stupid but it
doesn't matter because this is just to
illustrate the settings file so we have
a settings that JSON we have the hello
item inside of it however we want to now
access this item but to do that we need
to tell our meteor application to use
settings JSON so I'm gonna hit ctrl C to
cancel and I'm going to do meteor
however this time I'm going to pass in a
flag here and this is - - settings with
- T
settings settings okay and now we're
going to pass it the settings JSON file
like so we can hit enter and now it's
going to start up our application while
using that settings file now you might
be wondering well how do I deploy an app
like this well we're going to get into
that once we talk about deploying to a
VPS and using things like meteor deploy
will actually take care of the settings
a file for you so okay we have meteor
settings settings JSON now from our
application let's go ahead and check it
out in our server code let's just go to
an it and let's counsel log something
we're going to just say meteor dot
settings so the settings that JSON file
allows for this meteor dot settings to
be accessed and we could say meteor dot
settings dot and then we're going to
access from here it's just our object so
from here we can say hello okay so now
when we save this it's at our command
line when our application starts up once
it's initialized it should counsel log
I'm private and we see that right here
that's really super cool and let's
verify that this is not in fact
accessible on the front end of our
website so in our client code just
recipes dot J s not the collection
recipes DOJ's but this one where we had
our SUBSCRIBE statement I'm also gonna
put a council login here okay and let's
open up our inspect element our Council
and you can see we're getting an
undefined error and it's basically
saying hey there's no such thing as
meteor dot settings so don't even try it
but that doesn't mean you can't define
settings in your meteor dot settings to
use on your public sometimes you have
public and private keys right and you
need public keys to be available on the
client part of your site I mean for
instance think about a Google Analytics
code would be a great thing to store in
your settings
and even some packages are going to
require you to store that in your
settings so let's go ahead and talk
about Google Analytics here we're going
to let's delete the statement really
quickly
well it's also delete the one in our net
j/s okay and let's head to our settings
JSON so we had this hello I'm private
but now we need a public variable so we
can create an actual public item here so
we can say public : and then have our
item here and now the Google Analytics
package that we're going to be using it
uses something called ga2 namespace it
and we have GA instead of the GA object
we're going to have account now account
is where you're going to pass in the
property value so it's you a hyphen and
then a bunch of numbers - and then a
number right so this is going to be our
Google Analytics account number I'm not
gonna post mine in here even though it's
publicly accessible so it's here in this
public GA account so let's go ahead and
try to add that now to our front-end
code and see that council logged we
should be able to see this you a council
logged I'm just gonna reinstate this
meteor dot settings however now we can
access the public area of our settings
just by saying public dot and then
though we can drill into our object like
normal GA and then account okay so now
I'm back on our page we get a refresh
going and you can see we are able to now
successfully console.log our public
variable so without putting a variable
you won't ever be Alexis of publicly now
it's a good practice to not just throw
the rest of your variables in here like
I mean we could have a comma and we
could have the hello back in here and
use this privately but it it makes more
sense and it's just a little bit nicer
to have private now this is like I said
it's not required but it's definitely
good practice now from here we could
have
all sorts of objects here maybe you have
stripe and you have a API private key or
something like that
so in here this is where you're going to
sort your server only variables now we
don't have any server only settings in
this site right now but we do have this
Google Analytics public and now we want
to make sure we want to add Google
Analytics to our routes what's great
about something like meteor is that you
don't have to have each route be a new
page load right sometimes a route is
going to change some of the display and
you don't necessarily think of it as a
page load so routing gives you full
control over what is registered as a
page load however let's first add the
analytics package to our site so the
package that we're going to be using for
Google Analytics is going to be data
riot : and then G and all it takes okay
make sure everything's spelling
correctly make sure the package is being
downloaded and installed there we go
now it's rebuilding so now that we have
our Google Analytics property value in
our settings we have our package in here
we're now able to start defining what's
a page view and we can do that simply in
our routes so come to Lib routes and
this is where it's super easy let's just
come to our action code and inside of
our action before the page is rendered
or baby you know even after the page is
rendered and so inside of our action
code we can say gee analytics page view
all in lower G analytics is sort of in
camel case Ed's not it's the G is
capitalized the A's capitalized as well
and then we could put that on a recipe
book as well now when you ever head to
any sort of page it's going to register
that as a page view in Google Analytics
so there are ways to define your page
view in your controller and things like
that but honestly this Google Analytics
page view in your route is really what I
found to be the easiest way to just drop
in whenever you want to have a page view
okay so you now know that you can have
public and private settings in your
settings JSON file and we now have
Google Analytics added to our site which
are two things we needed to accomplish
so great in the next video we're going
to sort of build out the navigation for
this site and we're gonna drop in our
CSS and see some tremendous changes in
the way this page is looking so as
always this is Scott with level up
tutorials if you have any questions or
comments leave a comment the video hit
me up at Twitter or Facebook I love love
tutorials I love to hear from you thanks
for watching and I'll see you in the
next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>