<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>#15 - Basic Meteor Accounts System - Full-stack GraphQL with Apollo, Meteor &amp; React | Coder Coacher - Coaching Coders</title><meta content="#15 - Basic Meteor Accounts System - Full-stack GraphQL with Apollo, Meteor &amp; React - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LevelUpTuts/">LevelUpTuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>#15 - Basic Meteor Accounts System - Full-stack GraphQL with Apollo, Meteor &amp; React</b></h2><h5 class="post__date">2018-01-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kX-0ErFEYpk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so in this video what we're gonna
be doing is actually hooking in to
meteors account system which is
obviously one of my favorite parts about
meteor because it makes something that
is pretty tedious something that is not
tedious at all what's really cool is
that we get access to some really nice
little methods or helper functions that
allow us to well it'll have a secure
login and register system without us
really having to do very much so
one way we can do that is by simply
adding a package which is accounts -
password you can come into your meteor
packages file to add this or you can
head to your terminal and do meteor add
and the package name is going to be
accounts - password okay
again this file is located in your
meteor folder and it's just right here
it's your packages file if you add
accounts - password and save this we can
watch as our terminal goes and finds the
packages our meteor build tools gonna
say hey hey this file has changed - go
ahead and grab these packages you can
see it added the accounts password the
email the NPM bcrypt package and again
we're gonna get this error here that's
meteor npm install save be correct this
is annoying but what you want to do is
just do exactly what this error says I
wish this error didn't exist but if you
just paste in meteor npm install bcrypt
and another tab it should go away okay
so we now have access to the meteor
accounts packages okay and what this
does is it gives us access to something
like let's head to our application and
if we were to simply just anywhere in
this file dual counsel log it gives us
access to the accounts package so if I
type in accounts in all caps here it's
globally going to be available to us
which that can some people write because
hey you know who wants this globally
available thing you can see accounts
exists right here
you can see we get all this great stuff
from accounts so simply by counsel
logging accounts you can see that this
global variable now exists because of
this package if you aren't into that
kind of thing and you would like to have
explicit imports we can always import
and then within brackets we can import
accounts from and then the package is
going to be meteor forward slash and
then accounts - base just like this and
this should work just the exact same as
if we were to not have this line at all
so it depends on what you're like if you
don't like having anything sort of
magically show up then you'll want to
import it if you like a little bit of
magic here and there go ahead and just
use this global variable okay so we have
access to the accounts object which you
may or may not know has access to a
whole bunch of cool stuff but the
important stuff for us right now is that
we simply want to be able to create a
user which you can see is a method of
the accounts package or well maybe
verify an email or log in as a user so
what we want to do here is set up a
quick and dirty form to go ahead and log
someone in I'm gonna go ahead and create
a new component and we'll just be this
will just say register form now keep in
mind that I just want to get logged in
accounts here I have a longer term
solution for accounts that I'm just
going to move into the code base the
purpose of this video isn't necessarily
to show meteors login system it's more
or less to show how you connect graph QL
but to current connect graph QL we first
need to actually get some sort of login
going so this register form is going to
be very very rough okay I'm going to go
ahead and copy some of these
dependencies I'm going to copy react and
we're going to essentially just create a
new component export default and then
this is going to be a component named
well we need class here I'm sorry this
is going to be register form and again
I'm going to completely really just
completely rewrite this component or
have a new one in here so
worry too much about the crappiness of
this so we're gonna have an export
default class for just your form extends
component ok nothing you haven't seen
before and we're going to have a render
function and inside of this render
function it's just going to be a form
let's not worry about the form action
and have an unsubmitted on submit and
this is going to be equal to this dot
register user now again don't get angry
at this code it's going to just be very
very basic we're going to have is simply
just an input and this is going to be
the type of text and it's going to be
actually I take that back it's not going
to be a type of text we're going to use
type of email because this is going to
be the users email and we're going to
have a ref on this which is going to be
equal to just a error function so input
is the ref is going to be setting the
input value to this dot email is going
to be equal to input okay if you haven't
seen this style of setting rest this is
sort of how they suggest you do it not
using string wraps basically we're
saying hey take the input itself and
assign it to this dot email will have
access to this email up above here okay
so cool we got an input here for email
let's go ahead and have one for password
which we can actually use type of
password which makes our life a little
bit easier this dot password okay and
then we're going to have a submit button
which is just going to be a button with
a type of submit and this is just going
to be register user okay nice and easy
easy peasy here now in our app dot J s
let's go ahead and cut out this import
accounts and remove this counsel log
here and move those over to the register
form
so we have access to accounts within our
register form in addition let's go ahead
and import our register form from and
then dot forward slash register form we
can now just throw this onto our react
app just like this and not have to worry
about it again you'll eventually want to
have a register and a sign-up and all
that stuff and like I said I'm gonna
drop some code in here so you don't have
to write that all from scratch or even
write it at all and next we want to
focus on well let's save this file first
and let's actually make sure this form
is appearing on their document and it
looks like I had an issue I didn't
return from my render function
I'm sure if you saw that you were
freaking out and good eyes on you I
don't know how I could have forgotten
that we need a return in our render
function as with every react component
in history and let's go ahead and you
can see we now have this sort of
register user okay it's because I'm on
my localhost it's sort of assuming that
I have a password in here which is fine
okay so let's go ahead and what I'm
gonna do I'm actually gonna clear this
out I don't want to use my password at
all here what I want to do here is head
up top and inside of our component here
we're gonna go ahead and have a new
register user method so we can say
register user is equal to an arrow
function okay just like that and the
next thing we want to do is basically
run a very very very helpful meteor
method which is simply just accounts dot
create user so accounts dot create user
how nice is that right we don't have to
sorry users camelcase we don't have to
actually do very much here this is going
to take care of everything and we simply
just need to get an email and a password
which we can get from our this dot email
dot value and we can get our password
from this this dot password dot value
so we're grabbing those that are
assigned from these inputs here and here
we just need an email and a password and
we're passing it into this very nice
accounts that create user now this
accounts that create user just like a
lot of things as a callback so we can
have a arrow function here and see if an
error is coming into this thing we can
always just do CLG error just for fun
here I'm gonna expand upon this area in
a minute here but because we're gonna
need to do some graph QL fun stuff but
as you can see here accounts that create
user email and password should be all
good and one more thing I want to do
since this is a form submission I'm
going to have an event available in here
with say e dot prevent default just to
prevent the page from Auto refreshing
when you submit this form okay okay now
what we're gonna want to do here is
actually give our form a shot right and
sure enough obviously you don't want a
registration form that exists after the
users already logged in but we're gonna
get to that what I want to do is just
simply register a new user and click
register user you should see that it
gets us undefined for our error we can
now we can now just simply type in
meteor user ID into our terminal hit
enter and see an ID of the user we just
created and logged in as this in fact
giving us definitive proof here that our
registration form did work now and now
I'm gonna go ahead and double up the
registration form here I'm going to just
duplicate this entire file simply by
copying the entire thing creating a new
file login form dot J s paste this in
here and we're going to say login login
form again this code is not dry so don't
worry about that the version of this
thing that I'm be giving you it'll be
much better and instead of accounts that
create user we actually want something
called meteor dot login with password
and this again is a
going to be a function but it functions
a little bit differently instead of
passing in an object here we're going to
just pass it in two properties the first
of which is the email the second of
which is the password and then let's go
ahead and get rid of this bracket here
and we're simply going to have a comma
will then have the call back so you can
see this form is very similar it's not
going to be registered user this is just
going to be login and we can then
reference that on this form as this dot
login and log in user okay
so as you can see here at this login
form is very very similar to our
register form just with some words
changed instead of a calling account
style register user we're using meteor
dot login with password instead of
passing in an object we're passing it
first a email value and then a password
value okay so let's go ahead and see
this thing in action by again adding it
to our app and with login form and login
form now you can make your own login
form as fancy as you'd like I have a
pretty fancy one that I work that I will
be making available in some context here
so let's go ahead and head back to our
app after using our new fancy login form
and even though we're already logged in
we can confirm that by type in meteor
user ID okay you're getting an ID back
let's go ahead and type meteor dot log
out undefined okay so now if we do again
meteor dot user ID will get null notice
I don't know this stuff changes it
doesn't care it doesn't even notice
what's going on because we're not
telling it to hide or show on anything
but we should now be able to see that
you can use your new username and
password with the login function and get
access to a fully functioning register
and login system built in absolutely no
time at all using this meteor awesome
logins so as you can see here we'd you
can run these commands in our
command-line user ID to see if we are in
fact logged in we can type with meteor
dot logout too
gout and login just worked absolutely
perfectly for me now we have this login
system and it is completely unaware of
graph QL and graph QL is completely
unaware of it
so therefore while showing and hiding
these user registration components might
sort of be a pain right we want to get
our queries and everything to go through
graph QL so we're gonna be doing in the
next video is making Apollo aware of
meteor we're gonna be making an aware of
meteor on the server so that way we can
add a little bit of security here and we
can do things like attaching to dues to
users automatically and maybe pulling in
those users to dues automatically as
well so as always this is Scott with
level up tutorials thank you so much for
watching and i'll see in the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>