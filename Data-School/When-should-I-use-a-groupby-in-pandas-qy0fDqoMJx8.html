<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>When should I use a &quot;groupby&quot; in pandas? | Coder Coacher - Coaching Coders</title><meta content="When should I use a &quot;groupby&quot; in pandas? - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Data-School/">Data School</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>When should I use a &quot;groupby&quot; in pandas?</b></h2><h5 class="post__date">2016-05-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qy0fDqoMJx8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome back to my QA video
series about the pandas library in
Python and the question for today is
when should I use a group buy in pandas
okay so let's jump right in and pull up
an example data set so we'll import
pandas as PD and then our data set is um
alcohol consumption by country
so we'll say drinks equals PD read CSV
and then we'll use the URL bitly drinks
by country okay so let's take a look at
this data frame and perhaps one our one
of our questions that we want to answer
is what is the average beer servings
across all countries okay so it's
actually pretty simple to answer that
question
all we would do is we would just say
drinks dot beer servings dot mean okay
and now we can see that across the
entire data set the average beer
servings is 106 now what if you wanted
to actually look at this look at beer
servings by continent in other words you
wanted to know how it varied from Asia
to Europe to Africa okay so this is
where a group buy is useful so what
we'll say is drinks dot group by
continent dot beer servings dot mean
okay
now all I did was added in a group by
continent right into here okay and what
this shows us that the average beer
servings for countries in Africa is
sixty one for Asia is thirty seven for
Europe is one-hundred and ninety three
and so on okay so if you're trying to
figure out how this actually
works um this might help
so let's um let's actually just filter
the data frame by Africa for a moment
so we'll say drinks with bracket
notation I'll say drinks dot continent
equals Africa okay
now by doing that we're now only looking
at the portion of the data frame that is
countries in Africa and all we have to
do from there is say dot beer servings
dot mean okay and we get this sixty one
number okay that we've seen here so all
the group by is doing is it's looking at
its filtering the data frame by
continent in this case okay and then
taking the beer servings and the mean
okay so this is really just an operation
that's repeated multiple times here's
Asia
here's Europe and so on okay so when
should you use a group I in general I
would say that the role of group I is
anytime you want to analyze some pandas
series by some category okay so in this
case the category is continent and I
want to analyze beer servings by
category so I find that um if you can
rephrase your question as for each then
that's a good candidate for a group by
so for example uh this I would phrase as
for each continent what is the mean beer
servings okay alright so I turns out
that mean is not the only aggregation
function you can use so for example you
can use the function mass
instead and this is showing me the max
beer servings by continent okay you
could even look the min the men beer
servings by continent okay so um that's
pretty cool I think but even more
powerful than that is there's this
function called dot AG okay and dot AG
allows us to specify multiple
aggregation functions at once so we can
say for instance count min Max and me
okay so when we run this the mean column
we've seen before we see that Africa 61
Asia 37 etc so this is mean beer
servings across the continents but
here's the min and the max as well and
here's the count so what's the number of
Records in in the data frame with
continent Africa in other words how many
countries are in Africa okay so as
always we're going to end with a bonus
and the bonus tip is pretty cool so
turns out that when writing a group by
you don't actually have to specify a
column like beer servings you can just
not specify it at all and it will
calculate on the mean in this case
across all of the numeric columns okay
now this isn't a great idea if you have
a lot of numeric columns but if you have
only for numeric columns this works
quite well and now I can see the mean
beer servings across continent that
means spirit servings mean wine servings
and total liters of pure alcohol okay
and the final tip for today is that I
can actually read
we easily display this in visual form
okay so if you're in the ipython
notebook I just need you to run percent
Matt plot lib in line okay you don't
have to run that if you're in another
Python IDE but I mean I Python notebook
this is what allows plots to appear in
the notebook okay and then here's what
you're going to do you're going to take
this line of code and you're going to
say dot plot kind equals bar and this
generates a side by side bar plot okay
so we can see for Africa their average
beer servings was some you know
something around 60 average spirit
servings was maybe 15 or 20 same thing
for wine servings and total liters was
you know just a couple okay so this is
just displaying this information as side
by side bar plots okay so it's not the
most amazing plot it could certainly use
some enhancements and we'll talk more
about plotting with pandas in a future
video but it's not bad I think for a
single line of code okay so that's it
for today thanks so much for joining me
please click Subscribe if you'd like to
see more videos like this and please go
to the comment section below and leave a
tip or a question and we can all help
each other to learn okay so thanks again
and I hope to see you again soon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>