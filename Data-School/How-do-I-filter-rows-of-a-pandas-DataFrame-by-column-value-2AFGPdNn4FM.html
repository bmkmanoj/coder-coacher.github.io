<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How do I filter rows of a pandas DataFrame by column value? | Coder Coacher - Coaching Coders</title><meta content="How do I filter rows of a pandas DataFrame by column value? - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Data-School/">Data School</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How do I filter rows of a pandas DataFrame by column value?</b></h2><h5 class="post__date">2016-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2AFGPdNn4FM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to my Q&amp;amp;A video series
about the pandas library in Python and
the question for today is how do I
filter rows of a panda's data frame by
column value great question let's jump
right in and as always we're going to
grab an example dataset to work with so
we'll first import pandas as PD and then
we'll create a data frame called movies
and we'll say PD read CSV and then we'll
pass it a URL where there's a data set
and you can follow along with this bit
li / IMDB ratings okay and this is a
data set of top rated movies from the
Internet Movie Database okay so let's
just take a look at the ahead the first
five rows and what we see is that each
row represents a movie and various
information about that movie and then if
we look at the shape we can see that the
movies data frame is 979 rows and six
columns
okay so let's pretend that we want to
only examine movies that are really long
maybe ones that are at least 200 minutes
long in other words we want to filter
this data frame so that we see all the
columns but we only see the rows in
which that row has a duration of at
least 200 okay so that's our goal now
this is actually pretty simple in pandas
but I'm going to build up to the line of
code you would normally use the simple
one I'm going to build up to it in a
multi-step process so that you can
understand how the process process works
and why and I think you'll be better off
as a fluent panda's user if you really
understand this code okay all right so
let's jump into that process there's one
other piece of terminology you need to
know and that term is boo lean and if
you've ever seen a special object like
true with a capital T and you check the
type it's a bool short for boo lean
same thing with false that's a boolean
okay so the reason you need to know that
is because here's what we're going to
create we are going to create a Python
list of boolean's that has the same
exact length as the data frame and the
boolean's will be true if a given row is
at least 200 minutes and false if it's
not in other words we want to create a
list of boolean's that starts out like
this false false true false false etc so
we're creating a Python list of
boolean's that is telling us which rows
match a given condition okay so we're
going to do this with a for loop a
regular Python for loop and I'll just go
ahead and write that so we're going to
create a list called boolean's started
empty and we're going to say for length
in movies dot duration now movies dr.
ation is just our pandas series and
pandas series are iterable just like a
list and then we'll write our condition
if length is greater than or equal to
200 we're going to append a true to the
boolean's list otherwise
will append a false okay so we'll go
ahead and run this code okay and let's
take a look at the first five elements
of boolean's and we'll see it starts
with false false true false false just
like we talked about before and let's
just check the length and we see it's
nine hundred and seventy nine which is
exactly the same as the length of the
data frame so we've created a list of
boolean's that has the same length of
the data frame and effectively tells us
which rows match the condition okay so
we've got two more steps to go to see
our result the first is I'm going to
convert the boolean's list to a pandas
series okay so I'm gonna create a series
called is long and it's going to be PD
dots series boolean's so what this does
is converts boolean's into a pandas
series okay it'll look very similar to
that list um as long as a pandas series
series have a head method just like data
frames so we're looking at the first
five elements of the is long series okay
so I took boolean's converted it okay
final step we're almost there okay so
I'm going to pass is long to it the data
frame movies using bracket notation okay
now normally bracket notation is used
for something like pulling out a given
column like if I said movies bracket
genre
I would see all the genres but that's
not what we're doing here were we passed
using bracket notation we passed a
series of trues and falses and look at
this look how pandas reacted it's
showing us a data frame with all columns
but it only shows rows in which the
duration was at least 200 minutes okay
so this is it may seem strange this is
just how pandas works okay so this was
the long way to get to our result but of
course you're not going to do this in
the real world you don't need to write
the for loop okay
so there's two things I'm going to show
you that indicate that are how we can
write this code more simply how can we
can get to this result more simply the
first is we don't have to write the for
loop instead and actually I'll just do
it right here instead we can say the
following is long equals movie's
duration is greater than or equal to 200
and look at the head okay so this little
piece of code right here completely
replaced our for loop okay because when
you do when you say series name and then
there's a comparison operator pandas
knows you don't want a single true or
false it knows like Python if I say five
is greater than or equal to three Python
knows okay I'm going to give you back a
single true or false pandas on the other
hand when you say series comparison it
knows you want to do this comparison
against each element in the series and
return a series of trues and falses
which were stole
boring as is long okay so in summary you
don't need to write a for loop to create
this logical series and this logical
series is what you pass to movies using
bracket notation to filter out the rows
you're looking for okay I want to show
you one more thing you can do to
simplify your code and you may have
already figured this out
instead of writing movies bracket is
long after creating an is long object--
you can just say movies bracket and then
instead of saying is long we're just
going to take this part and put it in
the brackets okay and let's run that and
you see that worked exactly the same as
this so if you arrived at this video
just hoping for the quick answer to your
question here is that answer here is the
code that allows you to select rows of a
panda's data frame by column values by
some condition okay now this is the way
people are going to write it generally
speaking so you need to get used to this
notation and hopefully the next time you
see a line of code like this you won't
be puzzled why movies is here twice and
why it uses this structure to the
command you'll remember that the inner
part is creating a series of boolean's
with the same length as the data frame
pandas nose oh you're telling me which
rows you want to select okay so that's
how this line of code works okay all
right
as always we're going to end with a
quick bonus tip and the bonus tip is as
follows let's pretend that not week not
only do we want to study long movie
is only these movies with at least 200
minutes let's pretend worse in
particular only studying the genre of
those movies so we don't actually care
about all the rest of the columns how do
we get just the genre okay
well this this whole statement actually
outputs a data frame and like all data
frames if you want to get a column out
of a data frame you can just use dot
notation dot genre and now we're just
pulling out the genre or if you prefer
bracket notation you can say bracket
genre okay so again this part outputs a
data frame and there are two ways to
select a series from a data frame okay
final point is that what I'm showing you
right here is sometimes not the best way
to do things um and it's a bit technical
so I will save it for a future video
okay this will usually work fine but
sometimes it will cause Schrage behavior
and if it does you should use kind of
the better what's considered the better
practice these days which is to use the
loke method dot loc okay so watch what
I've got right here I'm going to say dot
loke and then I'm going to replace this
with a comma so the way dot lok works is
i'm it's allowing you to select rows and
columns by label so this is me saying
here the rows I want
comma here here are the columns I want
okay loke is very powerful and we're
going to cover it in more depth in a
future video but I just wanted you to
see kind of the best practice way for
filtering a data frame by a
and then pulling out a particular column
from that result alright that's it for
today thanks so much for joining me as
always please feel free to click
Subscribe if you'd like to see more
videos like this if you have a tip or a
question please leave it in the comments
below and we can all each help each
other out and help each other to learn
and hopefully you'll get your question
answered ok so thanks again and I look
forward to seeing you again soon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>