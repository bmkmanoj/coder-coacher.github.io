<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>More of your pandas questions answered! | Coder Coacher - Coaching Coders</title><meta content="More of your pandas questions answered! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Data-School/">Data School</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>More of your pandas questions answered!</b></h2><h5 class="post__date">2016-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oH3wYKvwpJ8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome back to my Q&amp;amp;A video
series about the pandas library in
Python and today I'm just answering
questions from the YouTube comments and
I've done a video like this once before
and people seem to like it
so I am doing it again so first question
from Joshua question is I was wondering
if you can do a video to explain how to
read the pandas Docs okay so my first
tip with using the pandas documentation
is to get to the right page the usually
the easiest way is to google it and
rather than going to the pandas
documents and then searching that way so
that's how I do it so we're just gonna
go to Google and you should just type
pandas space the name of the function
okay so if we say pandas read read CSV
and hit enter your you'll see these
results and you'll want to make sure to
choose the one usually with the latest
version so right now it's 0.18 point one
but note that Google indexes previous
versions so you'll want to make sure to
get the one that's most current so we'll
go ahead and click on that and there's a
couple things I want to highlight about
this page first is that when you see the
name of the function and it just says
pandas dot read CSV this is telling you
that it's a top-level function such that
you to use it
you're gonna type if you've imported
pandas as PD you're gonna type PD dot
read CSV to run it okay so that's the
first thing I want you to notice the
second is it's got this definition that
tells you all the parameters and our
first parameter is a required parameter
which we know because there's no default
whereas the rest of these are our
optional parameters and it tells you the
default so the default set is comma the
default delimiter is none etc okay then
below this they will usually be a short
summary of the function sometimes with
links and below that it will describe
each one of the parameters and this is
super useful to read through and
understand okay so that's most of what I
do with the panis documents I want to
show you a couple other things about
them first and let's go back and do a
different Google search and let's search
for pandas drop and let's go to that
page and what I just want to highlight
here is that if you're on a page that
says pandas dataframe dot drop that is a
data frame method in other words to run
it let's say you have a data frame UFO
if you want to use the drop method
you're gonna say UFO dot drop okay not
PD drop you're gonna say UFO drop
because drop is a data frame method as
we can see here okay and we can contrast
that with a series method like let's do
value counts and search for that and
when we go to this page we'll see that
okay value counts is a series method
okay so the next thing I want to say
about the panas documents is about the
API reference pride the most useful page
in the documentation for me and there's
a link right here and you can also find
a link right here or you can just google
for pandas API reference but click on
that page and this is a list of
basically every function there is in
pandas and the things I use it for it's
really good for
our finding functions similar to
something you're already familiar with
so if I'm thinking well there's this
read CSV I wonder what the other readers
are in pandas I'll just do a ctrl F to
search and say read underscore and then
we'll find okay read excel read JSON
read HTML read hdf etc etc so that's one
thing I find useful and probably my
favorite thing on this API reference
page is the list of string methods I
kind of use it as an index to all the
string methods so to find those all I do
is I type STR period and I know I'll go
to this section string handling and I
can just click on it there and now and
we can close this but now I'm in this
section of string handling where I can
see every string method okay so you'll
notice there's actually a ton of things
in the left side bar here the what's new
once you've been using pandas for a
while I would encourage you to read
what's new either to catch up on the
past couple versions or every time a new
version is released so you know what has
changed and new functions you might be
interested in so I would do that once
you've got a bit of experience with
pandas the other thing of note is that
most of these they're quite long
tutorials essentially on different
topics like working with missing data or
group by or merge-join and concatenate
they tend to be really long and have a
lot of detail in them but if you take
the time to go through them you'll
actually learn a lot about that topic
and how to work with it in pandas okay
so on to the next question and the
question here it looks like UFO dot is
null and PD dot is null UFO has the same
result but one is calling a function of
the object in the
other is using the object as an argument
is this a special case because is null
takes the data set as an argument okay
let's let's actually use the pandas API
reference to help us investigate this
okay so UFO dot is null versus PD dot is
null UFO okay
so let's go to the API reference and
search for is null and what I've got
here is this this thing that says
top-level missing data and it says is
null obj so a top-level function means
that it's called by doing PD dot
something so this is PD is null and this
is telling us that we pass it in object
and it will detect missing values in
that object okay now there are other
entries in the API reference for is null
we can scroll down or go to the next
search result and we see that it's also
a series method
okay series that is no go down further
it's a data frame method is no okay so
there are different ways to use it one
is as a series method once it is a data
frame method and one is as a top-level
method and let's actually see this in
code to make sure we're clear on this so
I'm just going to import pandas as PD
and then we're gonna say UFO equals PD
read CSV bit dot Lee slash UFO reports
and let's just do the two commands that
he was asking about so PD dot is null
UFO and we'll just put that head on the
end so that's checking for missing
values and it was true for these ones
and false for the others and we can
we'll just take a look at the head
just so you can see this here the
missing values these five and let's
compare that with UFO dot is null dot
head and you'll see it produces the same
result so it's somewhat common in pandas
to be able to access a function as a
method of a data frame or a series or as
a top-level function you can use either
whatever you prefer I tend to use the
methods but either approach is fine okay
all right on to the next question and
Daniel asks it seems to me that the
pandas team is split between inclusive
ranges and exclusive ranges 0 : 4 is
different from Lok to I Lok do you know
what the reasoning is behind this ok
excellent question um here is what he is
talking about ok if we say UFO dot Lok
and we pass it the slice I want rows 0-3
for all columns
this is label based indexing and label
based indexing with Lok is inclusive on
both sides so it includes the zero and
it includes the four and then this is
just all columns okay whereas if you use
a low integer location meaning
positional based indexing and you say 0
colon 4 comma colon you will get 0 1 2 3
because I Lok with a slice is inclusive
on the left and exclusive on the right
so he's asking why is that the case and
I want to explain that to you okay so
pandas is built on top of numpy and
pandas whenever possible tries to follow
pi conventions so i'll oak is exclusive
on the right because that's how numpy
does it slicing so for instance it it
turns out that UFO dot value so it's a
data frame attribute values shows you
the underlying numpy array for a data
frame okay and if I slice that like this
calling for I get Rho 0 1 2 3 and all
columns so in other words I'll oak is
just copying what numpy uses for slicing
this is actually numpy syntax that
pandas reuses for i'll oak
okay so inclusive on the left exclusive
on the right now why does numpy do that
well i think that's because it's how
pythons range does it so if you say list
range 0 comma 4 you'll get 0 1 2 3
because range inclusive on the left
exclusive on the right okay so python
did it thus numpy did it
thus pandas did it with i look but if i
look works this way why doesn't lok do
the same thing why is lo conclusive on
both sides and let me show you why that
actually makes sense
let's do UFO dot head okay and let's say
that we want to use lok to select all
rows and columns city through state okay
so I would say UFO dot Lok and I want
all rows and I want city through state
okay and that works just as expected now
this tells us why slices are inclusive
on both sides for Lok and the answer is
this if it was inclusive on the left but
exclusive on the right we would have to
say city colon
time to get city through state because
it would exclude the last one but if
you've read that code you would be so
confused because the reader of the code
doesn't know that state comes before
time and I wanted city through state so
I wrote city through time it just makes
no sense when your index either your dot
index or columns are not consecutive
numbers okay so because of that it's
makes more sense for Lok for these
slices to be inclusive on both sides in
summary the logic for Lok and I Lok both
independently make sense for why they
invented it that way it's just a little
annoying as the commenter mentioned that
the logic between the two conflicts and
you just have to memorize the way the
logic works when you're doing slices
okay all right final question for today
from Giancarlo and he says could you do
a video about handling large CSV files
and pandas for example is there a
practical way to randomly sample rows
okay so I'm not going to talk about
dealing with large files in general with
this video I'll cover that in the future
but I will talk about random sampling so
this applies regardless of data frame
size let's say you want to take a random
sample okay so turns out there is a
dataframe method called small and I can
just say UFO
dot sample and I can say N equals three
and I will get three random rows now
note that every time you run this you
will get three different rows and if
you're doing this at home you'll see
three different rows than your than I'm
seeing okay but if you're familiar with
the concept of reproducibility you can
use the random state parameter for
reproducibility so we're just going to
say random state equals 42 and what
you'll notice when I use a random state
is that every time I run it and sorry
for the UH for the screen to move every
time but you'll notice that every time I
run it I'm getting the same exact
results now if you are running this
exact same line of code with random
state equals 42 you should be getting
the same thing as well so that's
reproducibility okay now you can also
let's say you don't want to set number
of rows but you want a fraction of rows
I can say UFO dot sample frac equals 0
0.75 and we'll say random state equals
99 okay and now I'm actually getting 75%
of the rows okay
and so that's super useful that you can
either specify the number of rows or the
fraction though you can't use those
together okay so as always I'm gonna end
with a bonus and the bonus is as follows
if you are someone who does machine
learning and is familiar with the
concept of train test split meaning I
want a certain percentage of rows in the
training set and the rest of the rows
not overlapping in the testing set I'm
going to show you how to do that with
pandas so let's go ahead and just store
this random sample of 75% as train
okay and the thing is you can't just say
Oh frack equals 0.25 and get the other
25% it doesn't work that way okay you
would just get a random 25% and you need
a non-overlapping
25% you need all the other rows for your
testing set so how do you do that
I'm going to show you the code we're
gonna say test equals UFO dot low and
then I'm gonna say what rows do I want
I'm going to type UFO dot index dot is
in train dot index colon and then in
front of this I'm gonna add this tilde
so what rows do I want I want these rows
and instead of telling you how this
works
I want you to think through this and
investigate it and figure it out and if
you're having trouble figuring out some
particular part of it I want you to let
me know in the comments and I'll help
you through but I want you to try to
figure out what is going on in this line
of code and I think you'll learn
something new just from doing that but
you will find that train contains 75% of
the rows and tests now contains 25% of
the rows and those 25% of the rows are
completely exclusive of the training set
okay so that is it for today thank you
so much for joining me as always please
click Subscribe if you'd like to see
more videos like this please leave me a
comment or question below and I'd love
to be of help but that's it thanks again
for joining me and I hope to see you
again soon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>