<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How do I apply multiple filter criteria to a pandas DataFrame? | Coder Coacher - Coaching Coders</title><meta content="How do I apply multiple filter criteria to a pandas DataFrame? - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Data-School/">Data School</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How do I apply multiple filter criteria to a pandas DataFrame?</b></h2><h5 class="post__date">2016-05-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YPItfQ87qjM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome back to my Q&amp;amp;A video
series about the pandas library in
Python the question for today is how do
I apply multiple filter criteria to a
panda's data frame great question so as
always we're going to start by importing
pandas and then read in an example data
set that we can work with and in this
case it's going to be a data set of
movies from the Internet Movie Database
so we'll use read CSV and pass it a URL
and you can do this two bit dot Lee
slash IMDB ratings alright and let's go
ahead and take a look at the first five
rows of the data frame and it is a data
frame of in which each row represents
one movie and some data about that movie
okay so a reminder from the previous
video if you are watching these videos
in order that last time we were trying
to filter the data frame such that we
saw all columns but we only saw the rows
in which the duration was at least 200
minutes so we'll do that how did we do
that we we used bracket notation and we
said movies bracket and then in the
brackets we said movies dot duration is
greater than or equal to 200 so let's
run that and we can see that there's
just about a dozen movies in the entire
data set that are at least 200 minutes
long and we see all of them here so what
we are trying to accomplish in this
video is to see how do we specify
another filter criteria so what if I
want to look at only long movies that
also are of the genre
drama okay so that's what we're trying
to do now to get there we just have to
talk briefly about logical operators
specifically and and/or okay so you may
know this already but like if you have
two conditions and one of them evaluates
to true and the other evaluates to false
and you put an or between them the
result will be true because the way the
or operator works is if either side is
true the whole the whole thing is true
so true or false is true true or true is
true but false or false is false okay so
that's how or the or operator works now
the and operator is a little different
it is only true if both sides are true
so if you say true and false you get
false but if you say true and true you
get true okay so that's how and in or
work so how can we use that to our
advantage
so I'm just going to copy and paste this
and move it down below and so here is
our original condition and I'm going to
write it out this isn't going to work
but I'm going to write it out
conceptually what we want to do because
originally we have this single condition
in the brackets and what we at want to
add is a second condition separated by
an and so we want to say I'm looking for
movies with a duration at least 200
minutes and I'm looking for ones where
movies dot shan r ax equals drama
okay so that's not going to work but
we're going to we're going to tweak this
to make it work okay
so the first thing we have to do is we
need to add in some parentheses to help
pandas understand what's called the
evaluation order it needs to know in
what order to evaluate all these
separate statements and by wrapping the
conditions in parentheses you're telling
it here's the order I want you to do
this thing and I want you to do this
thing and then combine them with an and
okay so that's the first thing we need
to do there's one other tweak we need to
make which is that um you can't actually
use the and operator you have to use an
ampersand which often in computer
science means the same thing as ant and
this will indeed work in pandas so now
we filtered the data frame by two
conditions the duration is at least 200
and the genre is drama okay now if you
had done an or condition you would have
gotten a much bigger data frame because
there are a lot of movies there are a
lot of dramas so this is a drama that's
not that that doesn't meet the duration
condition and this is not a drama but it
does meet the duration condition so
that's how the or condition works so in
summary when you're using multiple
filter criteria you need to put each
criterium in parentheses and you need to
separate them with either a ampersand
for and or a pipe character for or okay
so um just to make sure you're clear on
what's going on inside the brackets in
case you're confused about what
how does this this is working this like
before we're inside the brackets there's
a boolean series that is telling the
data frame which rows to display so if
we just run the inside of the bracket on
its own you'll see false true if we had
done the ampersand we would have gotten
the same thing except a lot less
throughs so there's a true here and just
two more throughs in the entire data
frame okay all right so that's it for
the main content as always we're going
to end with a bonus tip so um the tip I
want to talk about is what if we have a
bunch of or conditions on the same with
the same series so what I mean is let's
pretend we want to look at movies that
are either crime or drama or action for
their genre so what normally what you
might think to do is something like this
so movies dot shun r ax equals crime or
movies john r equals drama or we'll just
copy and paste this movie genre equals
action I think I said okay so that works
just fine and now we've got crime action
drama action drama great but that's very
very wordy okay so I want to show you a
neat trick to simplify multiple or
conditions like this and we're going to
use a series method called is in so what
we say is movies onra dot is in and then
to that method we pass a list so we can
say
I'm drama action okay so that just like
before generates a logical sorry a
boolean series and we can pass that
series to the data frame using bracket
notation so in summary this and let me
just paste it right here these two
things are identical the the first one
is it just a lot simpler to type and you
can imagine if you added in a bunch more
categories it would be a lot shorter to
write this than it would be to keep
writing these or conditions okay all
right that is all I've got for today
thanks as always for joining me you can
click Subscribe if you'd like to see
more videos like this and if you have a
pandas tip or a question feel free to
leave it in the comment section below
and I'll be checking that out regularly
and thanks again and I hope to see you
again soon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>