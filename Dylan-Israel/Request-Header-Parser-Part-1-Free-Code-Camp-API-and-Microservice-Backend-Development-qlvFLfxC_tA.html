<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Request Header Parser Part 1: Free Code Camp API and Microservice Backend Development | Coder Coacher - Coaching Coders</title><meta content="Request Header Parser Part 1: Free Code Camp API and Microservice Backend Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Dylan-Israel/">Dylan Israel</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Request Header Parser Part 1: Free Code Camp API and Microservice Backend Development</b></h2><h5 class="post__date">2017-03-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qlvFLfxC_tA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">cut everything alright guys we're back
in the back end development
certification doing the API and micro
service projects so what we're trying to
do is the request header parser micro
surface and what's big what's basically
happening is from this image here in
link brief oh I can't make it fullscreen
what we want to do is we want to get our
IP address or the clients IP address the
language that the browser is in as well
as some software details are they using
what Windows operating system if so and
what browser is what so for mine what we
want to do is basically just have a cult
get the IP address this would be our
localhost what language I put English us
and then I added the operating system
plus browser chrome so I just formatted
it slightly different I thought it was a
little bit cleaner now we're going to do
that all in in our application so let's
go ahead and jump right in and pull up
our visual studio code which is the IDE
I use get started open up a folder or
project I happen to have header parse or
YouTube is the name of mine to separate
the youtube version from the version I
did locally and the first thing that
we're going to need to do will start
fresh right is we want to jump into the
terminal and we want to install NPM if
you haven't already so we're going to
NPM an it for this we'll name it a app
will name it header parser that's like
crazy just kind of go oh you can't have
any any caps letter parser and I just
hit enter for awhile until you get done
and so here we'll have our package all
jason will see the name is header parser
now the next thing that we're going to
need is a this they have it at index
like Jeff I typically like to put at FJ
s
and so we'll create a new file here
called a PJs I think it's just a little
more intuitive some people call this
server Jas as well don't worry too much
about it but we're going to use for for
dependencies that we're going to install
right now but we're only uninstall the
first three till till we get to that
point later on the first one that we're
going to install is Express so that's
going to be NPM install - save let me
actually bring like this full screen or
quote - save and Express so that's going
to sell Express fornix which is going to
allow us to do things easier basically
that's really why you use Express and
then we're going to do body parser this
is going to help us out put stuff in
JSON and then we're going to also use
korres which will allow us to do things
in cross-origin request so let's go
ahead and do that and you know what
because I believe my webcam might be
blocking this a little bit we'll go
ahead and turn that off for this video
right now so NPM install - I saved we're
going to say favorite chord and then
body parser as well the same sort of
three items that we always import but I
always like going through all the steps
with everybody so that there's no
confusion especially if you're new right
you've only done this once or twice like
myself I'm still learning and I would
appreciate the one it's giving me a
tutorial not to skip any steps so NPM
install - I save and then we're going to
do body
- parser
all right cool so now that we do down we
turn the webcam back on so we don't miss
you guys don't miss me too much and we
are going to just basically import our
requirements I'll just copy and paste
this over same sort of thing that I
would normally do let's go ahead and
close this all we're basically doing is
saying hey those libraries that we
brought in make sure that make sure that
you are up did our node modules go in
their own wrong section yes they did
so where is our node modules
hmm
we should have a node module showing up
right here interesting interesting let's
let's see if this works it could just be
the IDE bugging out a little bit we'll
go ahead and close this real quick
4i we have our other ideal as well just
want to make sure that our node modules
are there and functioning properly
otherwise we have a bit of a headache as
we continue to do this so instead a
header parser I had a parser you tube
it's going to open this up and okay cool
so they are there our IDE was just our
text editor rather which is going a
little crazy but better check now then
later and so we have our we have
everything that we want to install and
while I'm at it I need to open up my
second one here file new window
folder
all right so we imported our three sort
of libraries basically saying let a
we're going to use express reuse body
parts and Reni's course the next thing
we're going to do is basically
instantiate our app it's going to throw
this comment in here and then we're
going to let's just remove our app is
equal to module dot exports is equal to
Express basically just creating our
Express app and then we're going to use
various we're going to take our app our
Express app and we're going to tell it
to use some of the libraries that's
basically what's going on here so JSON
and then it's going to be app dot use
cores we're just this is us importing
them to the application this is a
setting it to our app that's that's
really the the gist of it now what do we
need to do next well thing I always like
to do especially with working in with
back-end there's a lot of stuff going on
in the background you always want to
make sure that your code is functioning
properly so we at this app dot listen
with the three thousand for our
localhost and all it is is basically
saying when we hit this localhost go
ahead and run some self in this case
it's just going to console.log working
so what should happen now is when we go
in launch launch our node application
i'm using node mont which will autosave
update so that's something that you can
install as well but you'll see that we
have this working now if you don't have
that installed i highly suggest you do
but if you don't need to do node dot uh
and what did we name our header
underscore parser so node header hundred
for parser oops
couldn't find it Oh node fjf sorry there
we go so there's a little bit of brain
part just go ahead and exit that again I
really do encourage you use no daman and
that way it will update automatically so
let me launch that backup and so what we
have our server running now what we're
trying to do is a get call that's going
to return some information now I am to
start storing api's and variables API
URL and so we'll just because you I find
it a little bit more intuitive when you
start storing everything in a variables
and passing things in without even if
you're using it one time because you
never know when you're going to use it
again so our VAR API what we want to do
is create a link that's the path is API
slash Who am I to get the IP address the
language and the operating system for
the browser cool so we're going to have
our path here which is going to be slash
API slash to MI and then we're going to
do a git call to do a git cult
it's apt-get and then we're going to
pass in the URL location the URL and
then we're going to pass in a callback
function that the first parameter is
going to be the request second parameter
is going to be the response and then the
third parameter is next which will
basically allow us to chain it we're not
going to use that one but we're going to
include it all the same now the first
thing that we want to do is make sure
that this is working
always test man always test along the
way so you don't have to go back and
figure out 100 whatever we just want to
make sure that it's working so the app
this our server is running properly what
we need to do now is we have when we
click this API slash um I it's not going
to splay message here but in our console
it will actually say 100
so it did not say 100 and because of it
I am sad so we have to figure out why
that is the case
oh and I see right here our course we
forgot our brackets now let me go and
try this one more time I may have to
restart the server and now when we hit
Send again it is it's since 100 now this
is going to go for a while somewhere go
ahead and close it because we didn't
actually send a response so how do we
send how do we get the data that we want
now I highly encourage you to jump into
the Express documentation to do this
because this is all sort of expressed
and you'll you'll see in a second but
basically the gist of it is is we're
going to create three variables one's
going to be language one is going to be
software one is going to be IP address
now the the simplest one to see the IP
address the way that we do that is is
just by taking our our request basically
the the person who is sending us a
request is a new IP this will go and
give us our IP address now how do we see
that how do we output that in JSON our
response that's what the res is our
response JSON and we just output it so
in this case we're going to output an
object we'll go ahead and do this piece
like this we have our IP address IP
address and then we'll pass in our IP
address and so if everything is working
we should get a colon colon 1 for our
localhost let's go ahead and launch our
server one more time and let's pull up
our our postman and we do a send and
we'll see cool
so we have our IP address one third of
the way there basically now the next
part is you have to go and get the
language okay so going through the
Express document
you might find there's a couple
different ways because there we're going
Express for point X something so
originally when I did this I had
different ways of getting the language
but what we want to do is do rec that
accepts languages and pass that in so ok
let's see what this gives us so we get
rec or passing language and then we'll
pass them the language value that we
just sort alright cool cool let's do our
responsible Mart set do another cent
alright so that didn't work and it did
it work because this is a function it's
a little bit of a err right there so
we'll do another cent and when I do that
send you'll see that we get two
languages here all right we get we get
basically two different languages so we
have to decide do we want to include
both of these or do we want to include
one I only wanted to include this first
one right here en - us so to do that we
simply it's just an array right so we
can just go ahead and target the zero
index and save it jump back in here make
sure everything's working send it and
there we go we have our language as well
so last but not least we have to get the
user agent so this is a where I install
we talked about installing a fourth
dependency that uh I normally don't but
because of what we're doing you'll see
right now why so uh we're going to do a
wreck to get to user agent and you you
may not know like user agent when you're
talking about that's basically the users
information what operating systems are
using what browsers they have and using
and all that sort of stuff and you can
get that information in a couple
different ways you do it like this with
a get call and pass in user agent and
you can also get the header similar like
this I'll put it in a comment below I
couldn't tell you which one is
deprecated or not I just came across a
couple different ways of doing this and
I think it's important to note that and
so we're going to pass in software here
and we'll see how it comes out and why
we installed a fourth dependency
okay and we go and do a scent and see
here we get our software we get a what
system they're on we get what-what
browser versions they have installed
etcetera etc now this isn't what we want
right we just want this and we just want
our current current browser that we're
using now how can we fix that well you
could definitely write a regular
expression and do all this sort of
craziness or you could use someone who
are someone else's module that they
already created and use it because it's
that's what that's kind of the node
slash way of the world now right if
someone taken time to develop something
go ahead and use it
so we're going to use something called
Express - user agent which basically is
going to send us a JSON back but before
we do that we have to go ahead and
install that so let's go ahead and close
our server and then we'll do NPM -
install excusing install - go save that
save and that's going to be expressed
- user agent give it a second here this
is going to install our dependency so
first thing we have to do is install it
second thing we have to do is require it
and I'll put this little comment here
where we use for easy parsing of user
agent for response so that's why we're
using it Gove our user agent
so let's require it is required and then
pass in the name of the module
it's Express - user agent and now we
just have to kind of statute it to our
app so after app dot course we'll do app
use and in this case it's user agent dot
Express and this will allow it to use
that our application will allow it to
use that library now
let's go ahead and and you wouldn't know
this other than going through the
the documentation with github but to get
that information now for software
instead of getting they get like we had
before we are now going to use dot user
agent and you'll see that we get a whole
bunch of data back let's launch our
server one more time and bring up this
and so when we do our sent you see we
get this whole long string of text
everything that's in the user agent we
really only care about the browser and
the operating system so that's all we
really care about this is legitimately
and you can see this is the source right
so it has all this sort of stuff is it a
desktop true is it Windows true so you
can get all these sort of boolean values
about what uh what item the user is
using but all we really care about is
the browser and the operating system
from this point all we have to do is
take our software and concatenate a nice
string a string from it so we have
wrecked user agent so instead of wrecked
user agent what we want to do is just
change this a little bit will pass in an
OS :
space direct out user agent dot OS just
because the JSON one can target it like
this and we're just going to format this
job we wanted you could obviously do
whatever you want with it I'm just
giving you one way doing it for the
space plus and then it's going to be
wrecked on user agent dot browser let's
save this everything's updated and if I
didn't have a syntax mystic which ia
that'll be at first everything should
work and it looks like everything worked
just fine so at the end of it we have
completed our project request header
parser micro service to get the client's
IP address the language that their
browser is in as well as the software
that excuse me the operating system and
the browser that current current person
is using so I hope you guys found this
helpful in in doing this API project and
as always if you
like me and you want to support me you
can at patreon.com slash coding
tutorials 360 and don't forget to join
our Facebook group code tech and
caffeine the link is in description
below where we kind of try and keep
everybody motivated and share what's
going on in the coding world keep
everyone on track that's the point of
the group as well as the share funding
means so don't forget to join that as
well thanks for watching now see you
guys next project hey guys thanks for
watching the video if you're interested
in coding boot camp check out dev
Mountain com
where housing is included in your price
of tuition and don't forget to Like
comment subscribe and share and support
me on patreon I'll see you guys in the
next video thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>