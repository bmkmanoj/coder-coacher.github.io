<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>URL Shortner Microservice Part 1: APIs and Microservices Backend Certification Free Code Camp | Coder Coacher - Coaching Coders</title><meta content="URL Shortner Microservice Part 1: APIs and Microservices Backend Certification Free Code Camp - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Dylan-Israel/">Dylan Israel</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>URL Shortner Microservice Part 1: APIs and Microservices Backend Certification Free Code Camp</b></h2><h5 class="post__date">2017-04-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5T1YDRWaa3k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys today we're going to be
doing the free code camp URL shortener
microservice one thing to note is your
any node and install it on your computer
as well as MongoDB they're not as of
right now I have a plan to do a video on
that but hopefully you already have that
in Sault what we'll be making our
application here our back-end
microservice application is HTML CSS
javascript a little bit of angular if
you don't know any angular don't sweat
it it's literally one or two lines and
then we're also going to be doing a
front-end application of this work where
you can actually enter the URL this way
just click this to create it and we'll
be doing them Express and MongoDB a
mongoose if I didn't say that already so
what are we trying to make we're
essentially trying to make something
that when we go to plus one of my
favorite sites lick feels calm and we go
to you know what let's give a shout out
to the homie who helped to help me out
when I needed help
which is the best J Escom for Steven my
use tutoring site you'll see right here
we enter that in this will be our
original URL and I'll look at this
shorter URL this shorter URL when we
concatenate it here it's going to
redirect us to the best J s com
that's basically all we're going to do
where you can then go get tutoring and
things like that in front end and full
staff like web development so so let's
go ahead and get started start this bad
boy fresh all right so to get started go
ahead and open up your text editor your
IDE I'll be using Visual Studio code and
if you want to do the same that I'm
doing so we're in create a new project
I'm just going to go ahead and call this
new folder new folder this will be
something like URL YouTube this will be
where I have my project
there we go there so in in our project
here we're going to have a couple
different folders the first thing we're
going to create though is our fjs
actually we're going to install NPM so
poultry terminal if you're using Visual
Studio code you can do it like so and go
ahead and and jump over to the terminal
here and do NPM and knit and this is
going to install NPM to our pinch some
of this is going to be the pretty basic
set up so if you're if you're familiar
with all this you can go ahead and skip
through so URL short is what we're going
to call this URL underscore short will
be the name you'll notice if we try to
hit enter here we won't be able to
because you can't name things with caps
so we'll just go ahead and do URL short
here and this will be index up Jess I'm
actually going to name it after is some
people like server ejs I just happen to
like app so now that we have our package
JSON you'll notice that we don't have
any dependencies yet we're going to add
those in a second but first let's go
ahead and create our app Genesis is
basically going to be our node
application we're going to install a few
things we're going to install Express so
that's NPM install - just save Express
we're going to install cores we're going
to solve body parser course we'll help
us with cross-origin requests just so
that we don't have any issues with that
and then we're going to do body parser
which will basically allow us to return
a JSON object easily as we saw before
and then we're also going to be using
Mongoose which is a packaged basically
just allow us to work with MongoDB a lot
easier so we installed Express so we're
going to do the same thing this is a NPM
installed - just save and that destra
save is actually going to add it to our
package JSON here so that if someone
were to pull this file and if you're a
patreon member you'll have access all
the source code and
sort of stuff you'll be able to get this
so anyhow npm install' that's our save
cores give it a second
all right npm install - - save body -
parser and finally we are going to
install Mongoose and also if you don't
have node mount installed install that
as well I haven't installed globally so
I'm not going to run that command but I
highly encourage you use node Mon that's
n OD e Emma went and saw that globally
although it's not crucial it's going to
make your development time a lot easier
moving forward so you don't have to
close the server and keep relaunching it
alright so that was body parser and
we're going to do NPM install got just
safe Mongoose and that'll be the last
package that we install for this
application
Oh
it's going slowly but surely it's stuck
no there goes cool so that's all our
packages all our dependencies you can
see the four that are right here all
right
now in a pas we're basically going to
get require requirements essentially and
we're going to have these Kant's we're
basically have two variables one is
going to be called Express and this is
going to equal to require and what do we
want to require for our server our
Express app first we need to say hey
we're going to use Express same thing
with excuse me my mistake so we are
going to we have constant stress require
Express and then we're going to create
an app so the next thing that we're
going to do is create our application
here which is going to be equal to
Express basically just creating our
Express application at the end of the
day so the next thing we have to do is
do the same requirements for a body
parser we're going to set that equal to
require body - parser and we're going to
do the same thing for a month
but control su this we're going to save
different Mongoose and cores and that
will be close control su this paste that
in here all we're doing is basically all
the black magic voodoo voodoo as
engineer truth would say another common
word for setup so we're doing all the
setup right so the next thing next part
of the setup is we have to basically
tell our Express app to use remember we
are app here to use the packages or
parts of the packages that we're doing
so we're say hey make sure you use body
parser JSON and also app dot use
cores nice so now that we have that set
up the next thing that you typically
want to do is you want to make sure that
your node server is actually running
properly the way that we do this is we
can so get requirements and set
instances ok so that's the first section
the next section here we'll go ahead and
shut down the bottom a little bit is
listen to see if everything is working
and so the way that we do that is with
our Express app dot listen
and then you pass in a port number here
which is we'll do three thousand and
then we have our callback function if
you're not too familiar with es6 this is
the equivalent of a callback function
the es5 version would be something like
this function and then you'd put
whatever parameters in here in this case
we don't have any and then these
brackets it's a shorthand way and we'll
go ahead and put a es5 here is five and
below and so this is our es6 version
callback function something I'm trying
to get better at is doing more es6
syntax but let's go ahead and console
dot log out our everything is working
one thing I'm going to do right now a
put a little comment here is if you're
launching this on Heroku which I believe
the free code camp will have you do is
you want to use this process env port
and what's that's basically going to do
is if it runs on Heroku it's actually
going to go get the port number that's
associated with that instead of this
3,000 this 3,000 work locally because
this port here does not exist also
is four on Heroku so basically what's
happening here is the saying hey if this
exists set this as the value if it
doesn't send it to 3,000 that's all
that's going on here and we're doing
this in case you want to deploy to
Heroku and so that you don't have to go
back and change your application down
the road now let's go ahead and launch
our application again I'm using node Mon
so it's going to be as simple as typing
that in and if everything's set up
you'll see everything is working right
here so we have our node application up
and going Before we jump into the
Mongoose stuff I'm going to try to set
up as much as I can
elsewhere now I wanted to I wanted to
hear we're going to have to get calls
one is going to be apt-get this one will
be the one that creates the data base
entry and we're going to break this down
piece by piece so the way that I do it
is I just have it go to a relative URL
path that will do F dot get this should
actually probably be a post but right
now it really doesn't matter because
we're creating something new in the
database so we're posting to the
database so I can pull it look at my
example here
and so where do we want to get want to
get to this relative URL pass which is
new and then we have this parameter here
which is going to be URL to shorten now
we're going to pack on the end we're
going to have these little parentheses
here and this asterisk the reason that
this is being included here is because
later on we will run into an issue where
it's actually if it's a HTTP colon those
double slashes it's going to actually
think we're trying to go into a folder
subdirectory this is instead basically
going to say accept it all as part of
the string regardless of how its
formatted and we'll avoid that issue
because the way that we're going to be
creating this is that we're just going
to pass in a string that hits this slash
new and let's say HTTP colon slash slash
google.com and it's going to take that
parameter and it's going to add it to
the database and do what it does and we
don't want it to think that it's going
to a folder path that's basically what
this is doing saying except everything
that's part of here as part of the
stream that's all in the next again
we're going to be credit having callback
function this is going to be the request
a response and then next we're not going
to actually use that and then our
callback function like so so cool this
is our first function or not function
our first get call and we'll go ahead
and create a second get call which well
first let's go ahead and test this right
console dot log let's get the per am
right so to get the per amp we just have
to we can go ahead and store it in a
variable I like to do URL to shorten
this is equal to our request dot France
and we're going to go ahead and do some
es6 right now and use this i believe
it's called a Deconstructor and what
this is basically going to do is it's
just going to save us a little bit
typing so the es5 version of this would
be a VAR URL to shorten
is equal to rec prams dot URL to shorten
so obviously these little curly braces
will save us some typing time down the
road we have our URL to shorten here and
it just assumes what these curly braces
that that's what we're looking for if
it's the same name as the variable now
let's go ahead and console dot log URL
to shorten very nice everything is
working so our server is good so what
we're going to do now is go into our
browser we're going to go low close 3000
nothing's going to be here right so but
what we want to do is test new slash
excuse me flash new slash uh Dylan and
what we should get is it's actually
going to error out so that's my fault
but you'll see that we actually get the
response here the reason it's airing out
or it's good is that we never actually
return anything so I'm gonna go ahead
and turn off the server and then turn it
back on that's my fault
but you guys get the point there is that
this is all working properly though
which is great now what we can do before
we get into the real logic of things is
we are going to go ahead and create our
front end real quick now to create our
front end typically how you would do it
is you create this folder called public
now your notes AS application isn't
going to have access to index files or
anything like that unless you give it
access to it essentially and so let's go
ahead and just create our index.html and
in here we'll have you know all the
basic stuff so we'll have our doctype
HTML and then have our HTML tags
oops and then we'll have a header and
stuff like that to love our head tag
should and then we will have our body
tag slash body and in here we'll have
we'll just go ahead and throw a header
tag in here and in here we'll kind of
always think it's nice up front end for
your back-end application so you can
make as fancy as you want you saw
earlier mine's not super fancy but we'll
just throw it go ahead and throw an h3
tag in here and this will be URL
shortener micro-service and then below
that definitely you want to give a shout
out to free code camp I always try to
because I want people to know free code
okay I want people to know where they
can you know where I do these videos and
so they can go become fans of free free
code camp and it's going to wrap this in
an anchor tag some basic HTML this will
go to h3 a Spence's awesome w3 code and
calm
well guys at the target equal the blank
so it opens up in a new window close
that and okay let's just go to drop down
a little bit so it's a little bit more
readable so that opens up there and cuz
I wanna give shout out to myself I will
go ahead and I'm actually just going to
copy this in here
save us some time by now I'm sure all of
you know how all this stuff works but
I'll have an anchor tag to my channel as
well as my logo which I'm going to add
into a it's always good to have good
folder structure as well so if you have
this image file here that goes into
public and
and let's go get that logo image just
going to creep cloud files YouTube and
what was it logo white back PNG and
we'll go ahead and drag that into image
there we go cope so we have our image we
set a width of it to 250 and then we
have my YouTube channel here now one
thing I like to include in my projects
as well especially this is if you're
trying to build a portfolio is always
like to list what technologies we're
going to be using just so that people
can kind of see a quick synopsis of what
they're working with or what you worked
with so you'll see we're going to be
using node Express MongoDB mongoose
javascript HTML CSS and bootstrap and
i'm going to go ahead and copy over the
bootstrap tag
we're just using bootstrap 3 right now I
don't feel like jumping in to good job
for I'm not too familiar with bootstrap
for Ivan use it so
you're on here
is the going on there we go alright
excuse my language so let's go ahead and
add bootstrap the only reason I'm really
adding bootstrap is uh because I'm kind
of if I wanted to style it more I didn't
really do too much sign but just going
to add this class text Center so
everything is centered now if you're
you'll notice now that if we're going to
like if we were to actually go to locals
3000 we don't actually still get this we
get this cannot get because it's still
expecting a back-end of get call so what
we have to do is let's jump back into
our apt Jas is we have to basically tell
it hey we want you to use these files
for the front-end and the way to do it
so that it hits everything in this
public folder which is why it's in a
folder is we do app use and this is
Express dot static and then in here is
just underscore underscore during name
plus and then the name of that which is
excuse me public slash public so allows
no defined static content basically so
everything is working and now when we go
back to localhost 3000 we should get a
hastily made little page here and while
we're at it let's go ahead and add our
quick input as well because you remember
we have a little input
so jump back into the index on HTML so
in the header right below header create
a section slash section and in here
we're just going to have a an input and
we'll just go ahead and assign a
placeholder set this to enter URL and
then we'll all eventually assign some
angular and then why have an a class is
equal to BC NBK and s primary these are
just bootstrap classes to make our very
pretty application look pretty fresh a
and then we will get the short URL and
so I'll do a quick rundown of some
angular I'm an angular developer at work
so that's why we're using angular we're
going to need a script tag and this is
only if you want to do a front-end you
don't have to do a front-end but I'll
give you a quick rundown of angular so
the first thing you want to do is use
the script tag get your angular library
we're using one point six point one so
this is going to be angular one not
angular two or three or I believe
they're up to four now and the next
thing we're going to do is we're going
to create a JavaScript file in public
again good folder structure will save
you a lot of headaches and in here we're
going to create another file called fjs
this will be our angular application and
we're going to have basically three
lines here this is going to be var app
is equal to angular dot module and what
we're basically doing is creating our
angular applications and we're going to
name it right now we're going to call it
short URL app and then we have this
comma and then these empty brackets
these empty brackets are for any
dependencies in angular we don't have
any that's why they're empty and then
we're going to instantiate the
controller for it which is basically
going to be the way I like to explain
controllers is the logic for your app
for a certain section of the app right
so imagine that
your app is built up of four mini
applications each one of those
controllers is a mini application and so
you have your controllers it's a short
app controller so that's the name of
that controller it's going to be
associated with our app you'll only have
one app and you have as many controllers
as you want but only one app and then
we'll have this function and I will have
this parameter here called scope what
scope is is scope and since we're doing
es6 let's go ahead and do this scope is
what allows us to connect our HTML
variable or a javascript various HTML
variables basically and so if we do
something like this scope test we set
this equal to hello world and then we
jump into our index file and right above
this we go ahead and with these curly
braces two sets of them we put test and
we actually so same same name as this
not the scope though and then we can
actually in our input do ng - model and
this will give us we'll set this to test
as well better yet let's actually name
the variable what I'm going to name it
which was so we don't have to go back
URL to shorten so let's jump back into
here we have the scope dot URL to
shorten and then in here in our index
page our ng model all this is is
basically connecting the variable in the
HTML to that in the JavaScript so that
if our input changes which it will write
that's where we're going to put our URL
we're going to then do something with it
later but now if we jump over to our
index page we refresh this you'll see oh
and it's not working because we have to
actually connect the application so
before we do that let's go ahead and
create a script tag that takes the
source of where that's located and this
will be j/s
Oh CJ s / @ j s / FK s this file right
right here now let's close that save it
and now let's go ahead and refresh it
interests you so why is it not working
whoops stilling these guys so uh we have
to actually just instantiate our app
real quick the way that remember how we
named our application here short URL app
we just let's go ng app and kind of
showcase where we want our angular app
to run based off our tax we wanted to
run on everything that's within the HTML
tags so we have ng up short URL up and
then we have to define the controller
and we can go ahead and do that on this
section because that's the only place
that we need it to run so enter U
controller and we'll set that equal to
what did I name the controller I named
it short app controller there we go
and refresh this and I promise it will
work now so there we go hello world and
you'll notice that as we change this
we're actually dynamically changing it
as well so if we were to go wwe.com the
reason I have an input like this is all
we're going to do is we're going to take
this button and we're going to
concatenate it with our relative URL but
we're going to attach this on the end /
/ new / w Google for instance and it's
actually going to go open send us to the
endpoint that's going to create our
database entry so before we end this
first video here let's do that we can do
this in angular you don't have to again
this front-end is completely optional
but we're just going to use ng href
which is going to be slash new or
relative traffic / news / and we want it
to be this right here so URL to shorten
and so what's going to happen is when we
click that button are right now I
believe all we're going to have is this
VAR URL to shorten when we click it what
we want to do return is we'll just do an
object here to showcase this so it
doesn't
timeout URL to shorten our redstone so
it's a return a JSON object we're going
to show you how to do that real quick
where you want our response JSON and
then the object that we're trying to
pass in so in this case we can go ahead
and just have URL to shorten and pass it
in like that and this is some es6 so
because we are a parameter that we want
to set it equal to is the same as this
we don't actually need to set anything
and let's go ahead and refresh this and
now when we set hello world let's do W
google.com get short URL you'll see that
it goes down here in returns our value
that we set from the beginning so one
last thing is let's go ahead and remove
this binding and the initial value
before we move on to the next video here
so we're going to go ahead we're going
to get rid of that we don't actually
have to create the value it'll create it
in the in the view in index out HTML and
then we're actually get rid of it here
so in the next video what we're going to
do is we're going to start working with
the mongoose aspect of it and we're
going to connect to our database we are
then going to create our collection
which essentially is where we put our
mongoose a collection is kind of if
you're familiar with sequel databases
would be our table except they're kind
of our rows in our table and the
collection the collection itself is the
table and our documents are essentially
a row in that table and so we're going
to define the collection or the
structure of those documents and then
we're actually going to add to the
database so we're going to be doing a
lot
Mongoose in the next video as all these
guys thank you for watching the video
don't forget to comment like subscribe
and share and join our Facebook group co
tech and caffeine and if you want to
support me you can at patreon.com slash
coding tutorials 360 I appreciate you
guys watching I'll see you in the next
video hey guys thanks for watching the
video if you're interested in coding
boot camp check out dev Mountain com
where housing is included in your price
of tuition and don't forget to Like
comment subscribe and share and support
me on patreon I'll see you guys in the
next video thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>