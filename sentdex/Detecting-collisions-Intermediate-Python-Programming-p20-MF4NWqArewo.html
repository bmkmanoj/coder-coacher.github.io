<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Detecting collisions - Intermediate Python Programming p.20 | Coder Coacher - Coaching Coders</title><meta content="Detecting collisions - Intermediate Python Programming p.20 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Detecting collisions - Intermediate Python Programming p.20</b></h2><h5 class="post__date">2016-12-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MF4NWqArewo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up everybody welcome to part 20
of our intermediate Python series in
this video we're gonna be building on
the last video which we talked about how
we could do operator overloading create
our own dunder add method which would
allow us to let's just use these to you
know self is the object itself and then
other blob would be the second parameter
it'll allow us to basically do this self
plus other blob and it'll just work you
don't there's no parentheses here
there's no real typical you know passing
of parameters it just works
it's amazing it's incredible and now
that we have that we need to have some
sort of handling to know when to use it
so we need to know when two blobs are
touching each other so to do that mm-hmm
I mean it's not the easiest operation
ever but that's why this has its own
tutorial
so from blogged up hi we know that every
blob jekt
has its own X&amp;amp;Y which is the center of
that blob and then we know how big the
blob is with size and that size is
actually the radius I'm pretty sure of
that blob so what we could do is we can
calculate the distance between two blobs
what's that distance and then if that
distance is less than the radiuses of
those two blobs added together those two
blobs must be touching so that's how
we're gonna know if they're touching so
to do that we're going to use we're
gonna calculate the norm the norm is a
way of calculating distance between two
points on a plane also you might have
heard of feel like Euclidean distance or
something like that if you want to know
more about this I do actually have a
tutorial specifically on Euclidean
distance and using norm it's for the
machine learning series you don't
actually have to follow along that
series you can just straight into
Euclidean distance slash norm if you'd
like but it's not necessary we're gonna
import numpy as NP and then we're going
to come on down and above draw
environment we're gonna
new function or say define is touching
and it's gonna take two parameters B 1 B
2 for blob 1 and blob - and then we're
just gonna ask if NPL 4 linear algebra
dot norm for the norm if that of
basically and the word I say NP array of
V 1 X V 1 Y so these are the locations
of that blob and again this this is this
could be on an infinite dimensional
plane so you have three dimensions 15
dimensions or in our case just simple
two dimensions so it's Euclidean
distance but you could go further if you
wanted if you had 3d blobs for example
this would still work
let's see before I get myself lost you
want to take that it's the norm and when
you calculate the norm it'll be that -
basically the same thing only be - okay
if that is less than v1 dot size plus v2
dot size then we'll put spaces rather
plus because we're good little Pepe ders
if that's the case you know we want to
return true otherwise we would return
false but it's actually what we can do
is simplify this even further and just
do this right this will return true or
false make sure you get rid of a colon
at the end up but this will just return
from a false now most of time I'm kind
of against one-line functions but this
function will allow us to just have this
much text rather than this much text on
every time I want to compare two blondes
now in our case we're probably only
going to call this once anyway but it
makes sense to me so that's how we know
if they're touching now we still have to
actually iterate through all of our
blobs though and find out if they're
touching all right ask this question so
now we got to do that so now we're going
to have a new function and it's going to
be
define handle collisions and it's gonna
take whatever the list of blobs is hmm
and this is this pains me but we're
gonna do it this way reds or blues reds
greens equals blah lists so we're gonna
unpack them this is very much a local
function that you would not take to
anyone else because we're basically
hard-coding the order of this list but
we're gonna do that so we don't have to
know or pass the values of what colored
bolt nevermind
anyway I'm just gonna do it this way I'm
trying to think if there there's
probably a better way to do this I want
to carry on here but there's got to be a
fair way anyway
new blonde dips is gonna be an empty
list because blob lists is basically
were going to write a new blog list now
and in fact I think we're gonna use that
now we're gonna do is for blue ID I
should have prepared much better for
this I'm sorry Luna bullhog in blues dot
copy dot items so why might we be doing
this as soon as you see this we know
that blues for example blob list is a
list of these like this is the blob list
blues reds and greens it's a list of
dictionaries so we know blues is a
dictionary Reds is a dictionary greens
is a dictionary so when you see this for
something something in something copy
right we know what blues is is a
dictionary this is key value so as soon
as you see someone say copied item
there's really only one reason you would
ever copy the dictionary as you iterate
through it or a cop make a copy before
you iterate through it and that is
you're gonna modify it because you never
want to modify the thing that you're
iterating through especially because
there are going to be times where you'll
get away with it most of the time
it says dangerous so in this case we're
actually gonna make a copy rather than
going through the real one and then what
we're gonna say is for other blobs in
blues reds greens what are we gonna do
so what we're gonna say is for the other
blob ID other blob in other blobs copy
items what are we gonna do well if blue
blob equals other blob we're gonna pass
what's this basically we're asking is
this blob touching itself all right some
of that is so basically we're just
saying are we evaluating the exact blob
that we're evaluating right because we
don't because this will ring true for
every blob every blue blob as we iterate
through a copy of the blue blobs we're
gonna have one blob that it's gonna it's
gonna check against itself and if you
check against itself and you passed that
it's that blue blob as blob number one
and blob number two this would come back
as a true so we just want to make sure
that we don't do that so we're passing
here because otherwise it would always
come back true for that one blob else if
is touching blue if they're touching
we're just missing blue blob plus now we
could be done and if we were done at
this point we could say no I don't I
keep thinking of way better ways to do
this but I'm gonna keep going on if we
were done at this point we actually
wouldn't have needed to copy both of
these dictionaries but we what's gonna
happen is as was seen in the last video
sometimes when these two blocks come
together one blob gets to be worth zero
or less in size and when that happens
that blob should be dead we need to
remove it from the scenario otherwise
we're gonna be iterating through it
every time it might actually touch
another blob somehow and all kinds of
bugs could have karai's so what we need
to do is they give other blob that size
is less than or equal to zero at this
point after we've done that operation
we're gonna do other Balaam's other long
ID and then we're gonna say if blue blob
dot size is less than or equal to 0 del
blues perfect so now at the end of all
of this we return blues reds greens
beautiful now we'll save that and
basically all we need to do is come down
to draw environment we're gonna still
fill that green but we're gonna say now
we're gonna take this copy that blue
reds and greens paste that blue reds and
greens or say that's equal now to handle
collisions we passed that blob list that
was passed in to draw environment and
now draw environment is going to have to
output this so we're just gonna do
actually we'll just copy this line after
the update return blues reds and greens
so now you might must be guessing that
we have one more thing we're gonna have
to do coming down here you've got this
right blue blobs red blobs green blobs
those are coming from up here these
original ones
so actually what we need to say now is
just this list paste equals that mm-hmm
I'm gonna run it and then we'll run
through one more time what's happening
that's what I make sure I didn't have an
error that was
what the goal was haha less than or
equal to zero let's try again
handle collisions is not defined handle
collision collisions striking items
really where did I where's the other
copy there it is
items there's a lot of errors my my
friends
alright let's hopefully we can see one
if we don't darn this random let's ads
though there we go okay so that blue
blob just consumed actually that's off
the screen darn it okay that's okay
it happened for me you guys will have to
take my word for it actually not really
let's just rerun this one more time I
put these blobs up here let's see if we
can spot I'm just looking right now to
see if anybody's close no it's close to
doing anything maybe I'll just have to
restart it oh there we go this blue blob
just consumed that green one you can
scroll back if you want to see it but
anyways that happened I'm hoping to see
maybe these two combined or these two
maybe can you see me yes you can there
we go oh man just ate that blue blob
alright so we think everything's working
as intended at least visually it appears
that things are working come on guys
come into contact though this one just
ate something so anyway as you can kind
of see things are working it'll be
interesting to see what would happen
after you know a few hours or something
how these blobs would be handling each
other probably you would just have a
couple like really really big blobs
after a while anyway that's all for now
so I did say I would run through one
more time so let's go ahead and do that
just in case something was a little
confusing so basically we start with the
blobs that we have that we're just
basically just generated on random then
we get into this while true loop we're
passing those blob dictionaries and
they're just being passed to this draw
environment so we pop on up to draw
environment
which takes blood list which it took
here mm-hmm and we know it's gonna
return something back to these values
and then this loop just keeps going on
so we're let's go see what whatever
terms so I passed that blob list great
we take that blob list we do the same
things that we've always been doing and
then now we are newly returning the new
values because we are going to be it's
going to be a changing state from this
point because before it this never
changed it was always these blobs but
now they change so we take them and the
first thing that we do is we fill white
that's bothering me a lot of times
you're gonna actually probably separate
I mean this is not a game of high game
tutorial I need to redo my PI game
tutorial but a lot of times you actually
going to separate the drawing of the PI
game stuff from the processing stuff to
make PI game run as fast as possible so
actually you would not fill the display
with white and then run this operation
that would be dumb so we'll pull that
apart and eventually you would probably
run this in a separate process or
something but that's for another time so
anyway we passed this we handle
collisions all the Hana collisions does
basically runs through iterates through
all the blobs are they touching if they
are we use our lovely dunder add method
to change what needs to be changed
returned the new dictionaries and life
is good so that's what's happening here
so that's all for now
that's our operator overloading and
actually applying that operator
overloading to our blob world if you
have questions comments concerns leave
them below if you have a suggestion
especially for handle collisions I have
a couple ideas that I I almost applied
live on video and I just thought better
of it but this is almost certain to be
improvable so if someone comes up with a
really great way to improve it awesome
if you come up with a simpler way to
calculate the is touching let me know do
that'll be interesting so anyways leave
that stuff below - otherwise I will see
you in another tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>