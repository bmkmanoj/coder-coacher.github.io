<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Scikit Learn Machine Learning Tutorial with Python p. 7 | Coder Coacher - Coaching Coders</title><meta content="Scikit Learn Machine Learning Tutorial with Python p. 7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Scikit Learn Machine Learning Tutorial with Python p. 7</b></h2><h5 class="post__date">2014-12-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PMAwBh0nrds" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to
these seventh Python machine learning
with scikit-learn for investing or
whatever you want tutorial video in this
video we're gonna be building on the
last video and basically acquiring our
data so like I was saying this is the
hardest part getting the data and kind
of organizing the data so later you can
basically categorize all your data sets
as zeros and ones and then you know
creates classes or you know of 0 1 2 3 4
5 6 7 8 whatever
so for us we want to eventually get
everything down to the point where we
have you know a bunch of features so we
might have you know 30 features to each
company but at the end of the day either
that company is a 0 or a 1 and we'd say
maybe a 0 is a do not act a false a sell
and a 1 is a buy as in that's a good
company we want to buy that company we
think they'll do well the next decade so
so our data here basically what we've
got is we've got this output a table
that basically has you know date the
unix time seeing at the ticker and their
de ratio now to decide whether or not
that company is a good company to invest
in we want to compare it to some sort of
benchmark and generally the accepted
benchmark is the quote unquote market or
generally the S&amp;amp;P 500 or sometimes we
would compare against the Dow Jones but
I think that you know so we're going to
be using S&amp;amp;P 500 stocks so why not
compare it against all of the stocks in
the S&amp;amp;P 500 on use the SP 500 index so
to do that we're going to use we could
parse Yahoo and actually on on that data
set that we have there is about half of
the data is you know compared to the S&amp;amp;P
500 and then the other half of the data
is percent change relative to the S&amp;amp;P
500 so at some point Yahoo changed their
mind on how they wanted to like report
the difference and we we could you know
use our
things set up to the point before they
made the change and then from there
classify the other stuff or something
like that we could definitely do
something like that but I'd rather have
all of the data you know capable of
being a testing set and then have future
data we could actually make you know
investments based on this data and stuff
like that so anyways we're just gonna go
to an outside source and grab all the
S&amp;amp;P 500 data so for a lot of data set so
you can use this website cuando com it's
qu a nd L calm and we're going to just
search for S&amp;amp;P 500 and it'll search the
data also just while we're waiting you
can sign up for an account and you can
they have a really great API here and
you have a certain amount of API call
actually I think they're in unlimited
now if you make an account if you don't
have an account it's like 500 a day or
something that's crazy
anyway we want this one right here but
they have a really great and easy to use
API so if you want to use their website
to grab datasets you can do that via the
API and what's nice is their API follows
the same format as basically all their
datasets follow the same format so it's
really easy to work with their data
because it's a very simple format anyway
maybe I'll have some more videos on them
later but basically you'd want to
download a data set that's encompassing
between the era the year maybe 2000 i
think we don't think we have any data
prior to 2000 all the way up until you
can take current if you want and then so
this is our you know the sp500 that's
fine what we want to go ahead and do is
once you have that data just pop on over
here to download hit download and really
doesn't matter but for our purposes
we're gonna take it as a CSV so we
download that and once you have that
downloaded click and drag that and do
whatever directory the script is in
because that's how I'm going to code it
as if you've done that so now we're
ready to move my mic now ready to go
ahead and begin coding so we'll come
into key stats here and we'll come down
basically to here and let's go ahead and
define another data frame and that this
data frame is going to be S&amp;amp;P 500
underscore DF and that's gonna equal P D
data frame dot from underscore CSV and
then you specify the CSV name in our
case this is all caps here Yahoo - index
underscore GSPC
which is the typical you know letters
for the S&amp;amp;P 500 then dot CSV and boom
that's it that's that it's that easy to
load CSV into a data frame so we're done
there now we've got the S&amp;amp;P 500 loaded
into a data frame and basically every
step of the way we want to compare how
is the current stock price doing in
comparison to the sp500 index
so for each Durer that's fine we come
all the way down basically to right in
here where we grab the value of the
stock basically we'll just come right
here and we're gonna add another try and
accept recently people gave me a hard
time for all the try and accepts i right
I treat try and accept as if it's a bit
of logic and I use it as a fail-safe
sorry if you do not enjoy my trying to
accept usage anyway in this case we're
going to use it as both logic and a bit
of a fail safe because the S&amp;amp;P likes the
the data that we've pulled from Yahoo
that I've supplied to you guys that data
might have been pulled say on a Saturday
and if we go to Quon doll and this
cuando dump is not gonna have data for
the sp500 on a Saturday it's only gonna
have Monday Tuesday Wednesday Thursday
and Friday's so we're gonna have a
little bit of an issue there so I'm
gonna use trying to except to to solve
that and use it as you might use an if
statement so I'm sorry anyway try and
we're gonna say the sp500 underscore
date equals date/time dot from time
stamp and we're going to use the unix
time timestamp and convert it to a
string from
time and we're going to say we want this
timestamp to resemble : or % year - %
month this % day the reason why we're
doing this is this is the date format of
the data set that we just got so let me
pull this up real quick and notepad so
here it is so this is our data right so
it's you know your month day and then
this is the value and open high/low
close and adjusted close so actually
open high low close volume adjusted
close anyway that's the date that we're
gonna look for and then and then
basically what we want to do is we want
to find the row that contains that date
so we would just do something like this
row D equals SP 500 on our score DF and
then we're gonna say where so it's the
SP 500 data frame where the SP 500
underscore DF dot index since it'll be
indexed by date when we loaded it in up
above where the index equals S&amp;amp;P 500
underscore date so this data right here
so that'll be the row that we're
interested in and then finally we're
gonna say the SP 500 underscore value so
from that row is the float version of
row and then what value in row we're
looking for adjusted actually I don't
think it used an underscore let's pull
it up real quick yes so just adjusted
space close so that SP 500 value but
what if um you know our sheet is that we
pulled from Yahoo is pulled on a weekend
or something like that as a few of them
are well we have a slight issue there so
we're gonna say try and then if that
fails we're gonna run this exception
that basically is this exact code right
here so copy that paste instead of unix
time we're gonna take a prior stamp of
the S&amp;amp;P 500 value so we're just gonna
say 259 200 so for anyone who's curious
what that is
it's three days so every day have you
know every hour let's say or there's 60
seconds in a minute times 60 an hour
times 24 86400 and a day times three
days 259 200 seconds so that will
subtract three days that will get us out
of the weekend and then out of any
singular day holidays so hopefully that
will work that will cover pretty much
every every issue we would have that's
not the best logic but this logic right
here is a lot easier than the logic that
will determine whether or not it's a
weekday and if it or a weekend rather or
weekday and then if it needs to like
pick a different day so this is some
really easy easy form of that logic that
would be required so we have now the
sp500 information and now we need to
pull the stock price so the value here
that's all fine and dandy that's indeed
yeah the debt to equity ratio now we
want to actually pull the stock value so
we're gonna say stock underscore price
and stock price equals at least for now
we're gonna have to come back to this
most likely but the stock price well I
don't have it up right now but let me
pull it up
that was in backups fundamental intra
quarter key stat hey okay so we pulled
one up so here it is and the stock price
is this number right here it's this bold
number before the percent change and all
that so let's say that's the number we
want to parse from the website we would
copy that control U or right click the
review source told F find that thirty
three point six five and we see it's in
case between this you know slash small
big bold and then the closing so to
parse that really simply we would just
say stock price equals floats and then
source dot splits and we're going to
split by this small slash small big and
bold so we'll copy that want split by
that and we want the value that's on the
right hand side basically of that so
that would be one and then dot splits
again and this time we split where did I
do it here we go nope that's not what I
want what we're is what I want this
splits by say we split by this okay so
like this data right here and in fact
let's just split by this so copy that
then split by the closings basically and
we want the left hand side of that so
zero with element or the first element
there and that will be our stock price
now let's go ahead and print just to see
if we have any errors up to this point
stock price : stock whoops I price colon
comma stock price and then we'll do a
ticker some like that and we called this
literally ticker let's save and run that
really quick and just see what we got
we'll just stop that there so we can see
that were spitting out a bunch of stock
prices cool so close out of this we're
gonna
comment this out we don't really need to
be doing that anymore and now we want to
actually add this stuff to our data
frame so we come up here we've got D
ratio let's go ahead and add two more
things we've got D ratio
we've got price and then we've got the
sp500 so price and sp500 need to be
added so down here we've got DF dot
append we're gonna add all that stuff
and let's go ahead and be proactive here
and after every comma hit enter in this
list so enter there enter there enter
there and we're gonna add some more so
we add de ratio then we had price price
equals stock underscore price and then
we had SP 500 and that was equal to SP
500 underscore value so now that should
be really it we're already saving that
well so let's go ahead and run that I'm
just gonna go ahead and run it from you
know for each der in stock list Col one
two let's say 25 just so we don't waste
like a lot of time on video I you can
run the whole thing if you like we're
going to rerun this quite a few times
before we're actually completely done
and I'll let you know like when you
should run the full one so anyways
that's done that's saved in here we have
the basically the new CSV so here we've
got you know just a worthless index but
then the dates we've got the ticker
obviously UNIX timestamp we've got the D
ratio the price any compared to the S&amp;amp;P
500 so now we can compare percentage
change between the price and the S&amp;amp;P 500
index and that way we can kind of say
like is the stock meeting the market or
is it not meeting the market and then if
it is beating the market we treat that
de ratio as a class of being the market
and if not we treat it as not beating
the market I know I keep saying it but I
just want to keep stressing I really
don't think just alone debt-to-equity
ratio is a good way to value a company
because you need to take on debt to make
investments so we're just using this as
an example and I do promise we will add
more features but it's useful to have
one or two features so we can actually
graph it at first and then we can ditch
the graph once everyone understands what
you know the purpose of the graph is and
then we can have you know 20 features or
30 features or whatever and do some
action probably with some really cool
stuff I hope that we'll find something
interesting here anyway
that's it for this video I'm gonna cut
it off here in the next video we'll be
talking about you know right now we're
just we've catalogued a lot of the data
but then we want to actually begin to
compare price in the S&amp;amp;P 500 and do it
like a change there so we can actually
classify so that's it for this video if
you guys have any questions or comments
please feel free to leave them below
otherwise as always thanks for watching
thanks for allsports subscriptions and
donations until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>