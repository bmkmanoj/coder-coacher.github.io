<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Charting Stocks/Forex for Technical Analysis Part 7 - Basic Financial Graph | Coder Coacher - Coaching Coders</title><meta content="Python Charting Stocks/Forex for Technical Analysis Part 7 - Basic Financial Graph - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Charting Stocks/Forex for Technical Analysis Part 7 - Basic Financial Graph</b></h2><h5 class="post__date">2013-08-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EyCxm1Sg-Eo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome back
to another financial charting tutorial
in this video in the next few videos
we'll be going over how to actually
start graphing this stuff and charting
it up so it's going to be some pretty
exciting stuff and just to make sure
don't forget to make sure that you can
do the following two things import map
plot live and then import numpy and I
can't type it without any errors if you
get an error like this and it says
import or no module named you know
whatever you're trying to import then
you something has gone wrong with your
installation so as long as everything is
good let's go so the first thing that we
want to do is make sure we have all the
proper imports that we need so the first
one we want to import is time because
sometimes we want to add like timers to
our programs so I just like to always
have time imported next thing we're
going to use date time so we can
understand date stamps now what we're
going to need is a numpad want to import
numpy as NP just for a quick easy
shorthand then we're going to import
three things from matplotlib
specifically so we want to import a mat
slot Lib pie plot as P ot we want to
import mat plot live dot ticker as M
ticker and then we want to import mat
plot live dates as M dates so basically
this is going to do this so we can
actually plot the stuff this is so we
can do dates with the ticker and I
believe also share accesses involved in
this which I'll explain later and then M
date - so matplotlib charts understand
date formats right so you know if you
just wanted to plot like one you know X
and y is like one two then you wanted a
three and a four and then like a nine
and a seven or something like that it
understands it automatically but if you
try to throw dates at it it's got to
understand the dates so those are all
the
ports that we're going to need next
we're going to find a global variable
and that's going to each stock and in
here we're just going to make a list of
two just for ease here but you could
list out all of your stocks but in this
case we're going to let's do Tesla
everybody likes Tesla and I guess we'll
do Apple and we'll just put those two in
there you could list out all of the
stocks if you want and along those lines
I should mention real quick that the
stocks that were going to be graphing
this time around are the one-day open
high low close stocks so if we look this
these are the stocks that we're going to
use let me just open up like Tesla will
be using so let's open up Tesla let me
drag this down and we're going to be
using Tesla and you should open up yours
as well and make sure you're using the
right stuff because the the intraday
data has a different timestamp right
this one is kind of it
you you understand what it says like you
can look at this with your eyeballs and
see that it's you know where the
difference is like right this is year
2012 this is month 8 this is day 27 and
then we've got you know the actual price
data and the volume data but the
intraday data is a much first of all
it's an actual digit it's integer and
it's got it's a very large one that
starts with like 1 3 and so on so if
your data looks like that you're using
the wrong data we will eventually get to
plotting that intraday data but the
conversion of that unic stant to a date
stamp adds one more layer of complexity
that I don't want to throw at you just
yet we need to kind of get comfortable
with charting and really the
fundamentals of charting either that
data or this one day open high low close
data they're the same so there's no
there's not a good idea to start
throwing those extra layers at you just
yet but what I'm showing you here will
be applicable to that stuff soon and we
will get to actual charting that stuff
pretty quick where is mine there is so
let's go ahead and get in and just as a
quick aside I will probably be running
through this fairly at a fairly decent
pace I do have a full matplotlib
tutorial series what
err we started very very basic so if you
want to know more about Matt plot living
graphing within Python you can go there
if you want to learn it maybe with a
deeper understanding I will try to
explain everything as I go through it
here but yeah if you feel like you're
not quite
keeping up that's a good place to start
is that matplotlib playlists and just
doesn't exactly like the first I think
the first plot for that one is like
maybe like three lines of code or it's
really simple so anyways let's get
started so we're going to define our
function that's going to call it graph
data and or data and in the parameter
we're just have stock right yeah that
should be kind of familiar to the way
that we've set up our last function and
then in here we're going to have
everything in case in our typical try
and except loop
I shouldn't bind try and accept two like
some sort of key that just types this
out so I use this in like every program
so print out failed main loop and then
the string strung out version so now in
our try loop we're going to want to
define the stock file so the stock file
is going to equal a stock you know
whatever goes in here so in this case it
will first come out as T SL A plus dot
txt so that's the stock file right so
it'll be TSLA dot txt turn off and look
yes there it is
and which also means if this is not a
year whatever script were writing right
now is it has to be in the same
directory as the stock file but like
let's say Tesla was in backup what we
would do to change that is we would just
say stock file equals you know backup
slash plus stock dot txt something like
that but that's not the case here but if
you wanted to know that's how you would
do it so that's our stock file now we
want to define this numpy array and the
numpy array is just really really useful
and later on down the road it will
become even more useful numpy is just a
great great addition to Python but
anyway to do this we're going to find
multiple variables every variable within
our numpy array has to be obviously
defined so if we look at the stock
file we see that the file begins with a
date data everything is separated by a
comma and we the order of the data is
date closed high-low open and volume I
believe so
that is the order and the names of the
stuff and just just to be clear we're
going to call everything with a P right
for open high low close so it'll be date
then close P PI P low P and you know
mister syntax why are we doing that well
the reason we have to do that is for
this like if you type in open right
that's a command a Python and close
isn't necessarily but it can be so we're
not going to we're use the P because it
just it first of all everything is the
same now and we kind of have so open P
and then finally we ended with volume
and these variables are going to be
equal to NP which is how we noted none
by NP got load loud load text and what
text do we want to low what we want to
load that stock file the delimiter which
is the separator basically for that file
we already established was a comma
do we want to unpack it of course we
want to unpack it true oops true and
this is becoming a very long line so
let's just just hit enter once and this
kind of just helps us organize things
and then we're going to use converters
and what we're going to do here is
convert this ugly little timestamp to a
you know legible stamp for numpy to
actually understand what the heck is
going on and later on what we will also
do with this little stamp is we can use
that to make open high low close data
and stuff it'll be awesome so anyways
what element needs to be converted well
the zeroeth element does because that's
the date element now how are we going to
convert this we're going to use M dates
to do it told you we were going to use
that
and now we're going to say strip date to
numb and that is STR P dat eat number
two in um and then in the parentheses we
define like how it reads that date right
and what it's doing is it's taking that
date in converting it to a number format
that both matplotlib and actually numpy
will understand but you won't understand
it it's kind of like a UNIX stamp only
it's not running the same risk that UNIX
is to become outdated but we're not
talking about that right now
so anyways % uppercase Y and uppercase Y
denotes a full-year lowercase Y would
just be like a 12 uppercase Y for 2012
so that knocks that out then we've got a
month and then the day of the month and
four month data let's zoom over here and
as you can see the right next to each
other if they had like a - for example
you was just literally put the dash in
there but they don't so then percent
lower case M percent lower case day and
that is how we read this and just to
show you yes we have completed our load
text call there whoo okay so that's done
let me a zoom over a little bit so you
see the same thing I do and now what we
want to do is start building our actual
graph here so the way that we're going
to do that is going to say we're going
to say fig for figure equals plot dot
figure or PLT dot figure and then we
can't officially we'll probably put some
parameters in here but for now we'll
leave those empty now we're going to
find a x1 and that's just short for axis
one but you can call this anything you
wanted right you're defining a variable
here and this is going to be plot dot
sub fly and we're just going to do 1 1 1
and that's all we're going to do that's
just how you make a sub plot the numbers
in these parameters it basically says
like how much by how much and then what
number of that how much is this subplot
so I expect that makes absolutely no
sense to you so let me explain just a
little further let's say you did instead
of 1 1 1 you did a 2 by 3 right
I mean it's going to
make it two by three square and so that
means there's obviously six positions
that you can choose from so you can say
this is position three position for
position one etc in this case we're only
plotting one thing so it's a one by one
and then obviously it's number one right
am i right so anyway continuing on ax
one now what we want to do is start
plotting this stuff since we have an
open high low close line we're going to
plot all of that so date and then open P
and then a s1 dot plot
date let's just let me copy and paste
script three more things so copy and
then paste paste and then now we want to
do a high P low P close B okay so that
plots everything now what we want to do
is I think what I'll do real quick is
just let's just show you guys everybody
wants to see where they stand so far but
we won't cut off the video here we'll be
adding a couple of things before I cut
the video so we'll save that we'll run
it oh we have a syntax error plus oh
okay plus open and then put the period
so if you copy me exactly fix that
hopefully you guys want numbskulls I'm
copying you oh we haven't called okay so
run it we'll call graph data though this
would be really quick did you show you
guys but it's turning out nothing change
call AI went down at the bottom will
call for loop so we'll say for for stock
in each stock and then graph data stock
and then we're just going to add a sleep
function here save that now we'll run it
okay what effort so now you should have
this little chart pop up here and you
should see that everything is kind of
lining up but this doesn't make any
sense at all and this is obviously the
price and we've got a line that looks
like the Tesla price but we need to fix
this right so let's fix that so that's
where we stand now stand
what we want to do is add some date
information here until numpy and
matplotlib how to understand the date so
we want to do a x1 dot x axis dot set
underscore major underscore locator and
in here we want to say m ticker dot max
n L make sure you use the exact same
casing that I did so capital N and then
capital L for locator and ten what
that's saying is we're going to have a
maximum of ten date show up you can put
like fifty if you want it and a whole
bunch of show up but we don't want to do
that now the next thing we want to do is
say hey X 1 dot x axis dot set
underscore major underscore format and
then in parenthesis we do M dates dot
date formatter and then in here we
specify how we want that date to appear
it's very similar to what I was
explaining before and this time we want
it to appear a little better so we'll do
uppercase Y for the full year and we
want to see a - % m than a percent day
something like that so it's a little
easier on the eyes to understand now um
we'll save that let's run that and see
where we stand now and you can see that
okay we've got some dates here but if
it's you know if we stretch it out it
looks okay but what if we don't want to
stretch it out every time right like
that looks like junk so we kind of movie
nice we could just like maybe rotate
them a little bit so let's do that let's
close that out and let's rotate it and
then that'll be the last thing we do for
this video and so we're going to say for
label in a X 1 dot x axis get underscore
tick labels so for loop what we want to
do is label dot sit underscore rotation
and let's just put it like a 45 degree
angle right nice little 45 degree save
that now we run it and we have this
little chart here as you can see we're
kind of running off the edge here but
you can't you can click this like
configure subplot
but in I will also show you guys how to
code it in but if you wanted to just
absolutely fix it you can click on that
configure subplots and then for bottom
make it a larger number and now you'll
see that this stuff will fit but like I
said I'll be showing you guys how to
actually just code it in so it looks
good right on load but this video is
running a bit long and so I'm going to
close out of this graph and I'm also
going to cut the video here and we'll
continue on in the next video as always
thank you for watching thanks for your
support your subscriptions and until
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>