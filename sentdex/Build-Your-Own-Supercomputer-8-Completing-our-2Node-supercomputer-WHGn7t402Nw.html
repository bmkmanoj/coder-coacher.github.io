<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build Your Own Supercomputer 8 - Completing our 2-Node supercomputer | Coder Coacher - Coaching Coders</title><meta content="Build Your Own Supercomputer 8 - Completing our 2-Node supercomputer - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build Your Own Supercomputer 8 - Completing our 2-Node supercomputer</b></h2><h5 class="post__date">2014-02-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WHGn7t402Nw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in the last video we tied these pies
together completely so we won't have to
log into these pies every single time we
want to start up at the supercomputer so
now that we've done that we're actually
ready to demo our supercomputer so the
first thing that we need to do if you
recall we have that machine file where
we have the IP addresses of the machines
that we want to take part in the
supercomputing so that's the first thing
that we need to do is we need to go into
that machine file and edit it so just as
a quick note we are on the master node
right now so mine is 192 168 0 20 so
make sure you're on your master nodes
not your secondary node here so now what
we want to do is edit our machine file
and our machine file is located if you
follow along it's located CD pause well
I guess we're actually there probably so
yeah there's MPI testing so CD into MPI
testing if you don't recall we stored it
in home so it'll be like this
CDI MPI testing if you didn't you're not
in that directory at the moment so MPI
testing LS just to make sure and there
is indeed our machine file so now I want
a sudo nano machine file and now you can
see we've got the master node here and
now it's time that we add our second
node which is 192 168 0 and 21 for
myself different for you control X to
leave it and Y to save it and enter to
save it as the same file now the next
thing that we want to do is actually
let's execute our supercomputing script
so we'll use the same kind of C code as
before and what we're gonna want to do
is MPI exec and again just make sure you
can do this so type in which MPI exec
for example and you should have it
output this if it doesn't output
anything you've incorrectly added it to
your path or you maybe never added it to
your path so make sure you can do this
if you can't do this you need to edit
this profile and add this here to your
path anyway I'm going on I'm sorry let
me meet my speakers Skype no the next
thing we want to do now is again MPI
exec what's the file name that we want
to use here it's a machine file how many
nodes do we want to use for N and we
actually want to use two this time and
where are what do we want to actually
run and that's going to be M MPI CH
underscore build examples slash
calculate pi so CPI all set
hit enter hopefully that works for us it
sure enough did you see process 0 of 2
is on Raspberry Pi and process 1 of 2 is
on
raspberry pi PI is approximate law well
right now you're a little uncertain no
doubt if this really ran on two devices
or just one device because both devices
have the same name raspberry pi and
raspberry pi so either you can just take
my word for it or you can follow along
where we're gonna actually change our
host names so well it's changed node
twos host name so we know for sure that
we are indeed using another device so to
change the host name we can actually do
this we can change the host name of
another device on our master node
because we did indeed tie them together
anyways so what we can do is do ssh PI
at 192 one one source EA 0.21 right so
I'm on my master node and I'm
referencing the secondary node and then
what we want to do is sudo echo and
here's where you can put in the name of
your new PI what do you want the name to
be so in my case I'm just going to call
it node zero zero two okay and so now
we've got space to go all the way up to
999 nodes so we got plenty of room here
and then space bar and then do sudo
tea and then et Cie and hostname so
that's what we need to change basically
so now what we're gonna do oh we've got
this pseudo echo let me fix that I type
out that so it's supposed to be a
singular quote there so that singular
quote basically what it's doing is it's
SSH into this pi and then what's gonna
do is it's gonna go sudo echo and it's
gonna echo this and it's doing it with
this host name so anyway coming down
here so let me make sure I talk to
everything else right and didn't typo
that looks good so I'll hit enter and
that should be it
so now what we want to do is we have
renamed the other PI so let me switch
over to it here hit enter and you'll see
that it doesn't look like it's been
renamed so now what we need to do
actually is to log out and log back into
this pi so I'm gonna go ahead and do
that to log out again you can just hit
control D and that's just gonna close it
entirely so I'm gonna reopen it
where are you extra putty there we go
192 0 21 now your login information your
username is still PI right and your
password is still the same just your
host name that it will be changed ok I
guess the logout isn't gonna work so
instead let's go sudo shutdown - age or
actually shoot O's shutdown we're just
gonna reboot so do sudo shutdown - or
hit enter and that's just gonna reboot
my PI and your PI so we'll just wait for
it to boot up again and we'll try this
again so anyways when we're all done
with this and once we log in and once
this one's all started up again got to
wait for it to fully reboot we should
see that the name has changed so once
the name has changed what we're gonna do
is rerun what we just ran a second ago
so this is my master node so we can even
prepare it already
to run this again and you'll see that it
will actually change the host name here
in a minute
looks like my pie is up the lights are
blinking so let's try so we're gonna log
in to 102 168 0 21 again username won't
have changed login and there we go so pi
at node 0 0 - cool
I don't really think I need to use this
window anymore so I'm not gonna bother
fixing this window so I'm just gonna
minimize this one and now we're gonna
run the same command again so if you
don't know instead of retyping it out
again you can hit up arrow up arrow
actually we're lost so you hit up arrow
here and you can see where we change the
host name up arrow again up arrow up
arrow I'm not finding it now this is
annoying ok so ok this is all we need to
use right here MPI exec ok so we'll hit
running this again and this time you'll
see that the first process ran on just
Raspberry Pi which is the master node in
the second processor process 0 of 2 and
process 1 of 2 this one ran on node 0 0
2 so now you can see that the process is
did indeed run separately so just for
kicks let's do this
and we'll use one here run that and you
can see that it actually interestingly
enough literally took twice as long
right as you know somewhat expected that
it would take twice as long let's run
that one more time and again ok so you
see we're coming up with relatively just
just for more proof that we are indeed
using both processors here the clock
time is a pretty steady point zero zero
two three four ish but and when we're
only using one but then if we at change
the number to two hit enter it's wow
that took even longer that time let's do
it again
but actually it's taking much longer to
use both PI's now
so actually it's taking significantly
longer that one is we're now at the 0.01
five there could be a lot of reasons why
it would take a lot longer at least for
one it's got to communicate back and
forth considering the amount of
processing time actually required to
calculate pi going through it's got to
spend that time to go through the switch
and all of that so it's probably why
it's actually taking longer sadly at
first when I was reading I thought was
point zero zero zero nine or yeah zero
zero zero nine versus point zero zero
two but nope
so anyways so far we can see that this
machine or the supercomputer is not
actually faster it's probably paying a
price of latency here but anyways
regardless you did build your first
supercomputers so that is really
exciting I hope you do not build a
supercomputer just to calculate pi
because that's actually kind of
inefficient anyway so you want to answer
larger problems and at least spend a
little bit more time working in between
them but anyways you have now completed
your first supercomputer and if you
bought the raspberry PI's and all that
you probably built it for 80 to 120
dollars now it is only two nodes hardly
a real supercomputer or at least one
that you would imagine but it is
actually indeed a real supercomputer so
that's pretty cool
so say you wanted to expand this to four
nodes five six seven eight nine ten
sixty-four the way that you would do it
now is you would copy the worker node
the second node so in my case 192 168 0
21 you would take that SD card and you
would copy it to your computer and then
from your computer you would copy it to
every other every other disk and you
would just change the host name we're
using the same script that we used
already so you would access that IP a
change the host name and all that so you
want to just make sure that you're
copying the second
you know node 0 0 2 in my case you want
to make sure you're copying that as it's
got the right
setup verses like this is the masternode
and it's kind of it's the master of
everything under it basically so this is
what's under it and then anything else
so like this this node can communicate
very easily with this node and anything
that uses the same setup so that's gonna
conclude this video and the basic steps
to how to make your own supercomputer so
you can use MPI for all kinds of
different things and it just so happens
that there are MPI bindings for Python
so you can probably guess that that is
going to be the next step is using
Python there might be a little bit of a
hiatus between now and whenever I start
putting those videos out as I've got a
lot of things going on right now also
whenever we're done with that I will at
least show you guys a few examples of
using Python with MPI because that's
really exciting
also with Python and the raspberry pi
you can also do robotics so when you
mesh supercomputing and a couple of
raspberry PI's together plus some Python
in there you can do a lot of really
really cool things especially with
robotics which is really where the where
the Raspberry Pi is gonna shine as
compared to your typical GPU
supercomputer we're really that computer
is more focused on you know brute force
calculation not necessarily working in
unison with itself whereas well
obviously they're working in unison but
the end goal is is computing not
necessarily working together
whereas with robotics you can actually
use these things to work together and
that's the main target or the main goal
is actually working in unison so that's
what we're gonna be doing in the future
videos no idea when those will come out
just because I am getting pretty busy
but real exciting stuff to look forward
to nonetheless so hopefully you guys
enjoyed as always thanks for watching
thanks for the support and subscriptions
until next</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>