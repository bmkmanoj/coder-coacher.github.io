<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Raspberry pi with Python for Robotics 7 - Adding User Control | Coder Coacher - Coaching Coders</title><meta content="Raspberry pi with Python for Robotics 7 - Adding User Control - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Raspberry pi with Python for Robotics 7 - Adding User Control</b></h2><h5 class="post__date">2014-04-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7k5H5R-sHBE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right what is going on everybody and
welcome to yet another Python and
robotics tutorial video in this video
we're going to be building on the last
one and this time we're going to allow
key input from a user into our robot so
we can actually control our robot since
we don't have any actual sensors that
will allow us to make a robot autonomous
at this time so what you're gonna need
to do at this point is one of two things
either you're going to need to plug in a
mouse a wireless keyboard and an HDMI
monitor to your Raspberry Pi or you can
remote desktop in if you do not know how
to remote desktop and I do have a video
for that I will put a link to it in the
description so you can do that as well
anyway so let's go ahead and continue so
just as a reference of where we are
we're now in here the only reason I
really want to bring this up actually is
if you don't have remote desktop you
with you sudo apt-get install xrdp then
you can use remote desktop that's like
ain't built into your Windows PC so that
aside I'm actually not going to use that
right now because I coding an idle is
somewhat easier so we'll go into
accessories file manager and then up
here click on robotics that's the
directory we had and we've been working
on robot to go ahead and just copy that
and paste that I'm not sure if it's
thinking or maybe we not we didn't get a
good copiers and should work let's see
CDP okay
for whatever reason right-clicking
wasn't working but ctrl c ctrl P worked
and this time we'll call it robot 3 PI
rename now we have robot 3 PI so
right-click that for whatever reason
open with idle isn't here so I'm gonna
use open with and programming and idle
okay hmm
so wait a minute for that to open up let
me go ahead and edit edit this to be a
little bit larger so it's easier for
everyone to see Tony bold fly
all right there we go and I'll just make
it fullscreen so now we've got all of
this code and now what we want to do is
we actually want to program some sort of
way for us to enter input well the
problem with Python is it runs as a
script and in order to give input the
best thing we really have is input or
raw input natively anyways with Python
well you're going to have to do is start
implementing some use of either C or
Java and luckily Python actually works
with see very well naturally Python is
actually C Python and so we can use a
little bit of C and what we're gonna
have to do is kind of a hacky way around
it are about going about doing this and
you could probably do it easier in pure
Java or like JavaScript or something
like that but we like Python so we're
going to do it in Python so the first
thing that we want to do is we're going
to use tkinter and we also want I think
if we want yeah I think we'll takes we
might use system as well so let's go
ahead and do import sys for system and
then also we're going to import capital
T kinter as TK now we want to do is we
actually want to you know create this
window so let's go scroll down a little
bit we'll get rid of the pivot right we
don't need that anymore let's make some
more space and now what we want to have
is some way for us to register a keys
input so we're going to define key
underscore input and the parameter will
be event and then we're going to we're
going to run initiate initiate here
instead of in each of these so go ahead
and delete all of your initiate initiate
here here here and here
and here while we have more of these
functions and I thought we had and here
okay so make sure you get rid of all
your in it empty parms
because we're now we're gonna put in key
input and then what we're going to end
up doing is depending on the key input
we'll do something that might be go
forward go reverse whatever but each
time it's going to be something else so
anyway so that's what we've got going on
there now what we're going to do is
let's go ahead and print whatever key we
use event dot character and then now key
underscore press equals event dot
character and then sleep underscore time
is going to equal something let's do
zero point zero three zero and now we
actually want to start programming what
our keys are going to be so the arrow
keys are actually not too easy I'm not
sure what the special name for an arrow
key is so what we're going to end up
using is the WASD Q and E so W will be
forward s will be reverse a will be
turned left d will be turned right Q
will be pivot left or counterclockwise
an E right or clockwise so we're going
to use if key underscore press dot lower
just in case the user accidentally
leaves their caps lock on equals W then
we're going to do forward sleep time
so we can edit sleep time later and we
don't have to like edit all of the
versions of it so if that's the case
we're going to move forward l if key
press dot lower equals s well what did
we say s was well that's obviously
reverse reverse sleep time L if key
press dot lower equals a
that's a will be a turn left or sleep
time l if key press dot lower equals D
that will be a turn right for sleep time
and then we've done the WASD so now we
want to do the QE so L if key press dot
lower equals Q then we're going to use
pivot left for sleep time we should have
called sleep time like st and then LF
key press dot lower equals e pivot
underscore right for the sleep time okay
that should be everything for key input
now the next thing that we want to do is
scroll down a little bit and actually I
guess we have enough space really what
we're going to put in so I'll leave key
input there for anybody who wants to
pause now we're gonna say we'll call
this I guess hmm I don't know command
equals TK dot capital T underscore K so
command equals TK dokey TK then command
command dot binds and here what we want
to bind this is you have to type this
exactly key press we want to bind the
key press as key our key press key input
now we want to run command dot main loop
and that should be it so now what we're
going to get here is when we run this
we're going to get a little window that
pops up and as long as we're in that
window whatever key we press it's going
to log that key
and it's going to log that key for 0.030
seconds if anybody can give me a way to
know how to like log like when it's as
long as the key is down that would be
great
into like wait that long I'm not really
sure how how to get that to set up so
this just seems like an easy quick way
to show you guys so that's why I've gone
with it so anyway we'll save that and I
guess we could just run it via Idol even
though I promise idols idols so slow so
actually I don't really want to want to
run it through items once you start
pasting a bunch of stuff it'll slow down
so actually this is robots 3.5 so we'll
exit out of this and we saved our Idol
here so let's just bring this up and
let's CD into robotics
make sure it's there so there's a robot
3 up pi so now we can do sudo python
robot 3 dot pi hit enter and oh I guess
we did bind instead of blind let's let's
go back and look at what we've done
I think we just typo'd when we did
command up bind I probably typed blind
and I was too blind to miss or see it
let's go back down to the bottom yeah
show enough command up blowing okay mmm
so fix that save that hopefully no one
else typed it blind anyway coming back
over here let's try that one more time
and here's our little window so as we
press something like I'll press P well
it's very unhappy with P anyway Oh see
we've got a lot of lag going on in our
in my window here I think I'd rather use
well maybe if I put this down let's see
let's minimize this maybe maybe that'll
help
there we go that helped a little bit it
was having problems relaying the data
back to that screen anyway so minimize
it and just be in this window so I press
W and sure enough it goes forward and
I'm like kind of tapping it so so you
can like tap it or you can hold it and
it'll go now you can turn turn pivot
pivot backwards forwards now I wonder
though we do have a small problem if you
hit any other key it just does weird
things I think it just maybe runs with
the last thing was I'm not sure maybe
what we need to do though is go to the
bottom and where we have LFL
if/elif/else let's just run a pass let's
see if that'll work for us
so first let's close out of this TK
window and I guess we'll leave this up
just in case we need to do any more
editing let's bring this back up
and I'll run this again and in fact let
me let me if I make this window smaller
cause I just like to show you is at
least streaming the come on window
okay good now all right so we run it
here's our window double use forward so
a little laggy but not so bad just works
better if you dot see at least this is
like kind of streaming it like every you
know Oh point zero three seconds you
know I'm gonna minimize it now let's hit
another key yeah for some reason
whenever we hit another another key it
goes crazy but as long as you hit a key
that it is expecting doesn't do anything
maybe if I hit another key we could just
run cleanup or something trying to think
of how not really sure what's going on
there I'll have to look at it later feel
free to leave a comment if you want on
what you think is happening or why it's
running random stuff literally it goes
in Reverse now go forward yeah it seems
to want to do like whatever the last
whatever the last thing was so maybe we
should run like a cleanup or something
and I bet that would do it anyway that's
going to conclude the video we've got
our commands now so you should be able
to control your car you know do whatever
you want turn it and all this and what
I'm going to go ahead and do is I'll put
the top on the car and the next video
will go ahead and run the car somewhere
the motors are weak so as you can see
I've got carpet in this room but I do
have like some laminate floor in my
kitchen and I'll run it in there and we
can see how how this robot actually does
so hopefully you guys are enjoying if
you do have any questions or comments
feel free to leave those below as always
thanks for watching thanks for all the
support in the subscriptions and until
the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>