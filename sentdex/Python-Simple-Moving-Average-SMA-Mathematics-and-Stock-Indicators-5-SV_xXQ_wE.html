<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python: Simple Moving Average (SMA) Mathematics and Stock Indicators | Coder Coacher - Coaching Coders</title><meta content="Python: Simple Moving Average (SMA) Mathematics and Stock Indicators - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python: Simple Moving Average (SMA) Mathematics and Stock Indicators</b></h2><h5 class="post__date">2013-11-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5-SV_xXQ_wE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the second part of
mathematics stock indicator tutorial
series within Python hopefully you've
got everything installed and everything
running okay and if so you're at this
video ready to learn some awesome stuff
so let's go ahead and get started so the
first thing we want it we're going to
cover is a simple moving average so
that's actually the code and everything
is included in the script if you
downloaded it from our website but I
still want to run through and explain
everything that's there and same thing
with the exponential moving average just
so you guys are comfortable with it so
to start the only thing that we need to
do to calculate a moving average is
we're going to use numpy for this and so
we'll just go ahead and import numpy as
NP and then we're going to make up a
little data set here so we're going to
say data set equals and then you can
pretty much put whatever you want in
here I'm just going to put a bunch of
random numbers in here just to pad our
results basically and give us something
to work with
not 87 it was a weird answer anyway
that's good enough just put you know
1520 numbers in there and you'll be good
to go so the idea of a simple moving
average is to act as a method of
smoothing out lines that's pretty much
it right it doesn't have to be and isn't
just used for financial analysis it's
one of the few things that I'm going to
be showing you in this series that isn't
mainly used with financial analysis same
thing with the exponential moving
average calculation the main benefit for
or with using moving averages is that
they can you used to like show exactly
the trend that you're after right so
whether you want to see like a really
short term kind of trend of prices just
to smooth out version or you want to see
very long term trends the simple moving
average is a great way to go about it so
simple moving average if case you don't
know what it is it's exactly how it
sounds it's a moving average of a
predetermined a number of data points at
each point right so let's say you want
to do a three moving average well at
point one you can't really do it at
point two you can't really do it but at
point three you can start to do
a simple moving average so the simple
moving average at this point would be
this Plus this Plus this right so 7 plus
5 so you've got 12 plus 1 13 so the
simple moving average or a 3 simple
moving average at this point would yield
us a four point three repeating right
because this is a 13 divided by 3 so
this will be a four point three and then
the simple moving average at this point
would be 7 plus 2 9 plus 5 14 divided by
3 you're going to get a 4 point 6
repeating and so on so it's going to do
it each step of the way so here's how we
actually program that into Python so
we're gonna define moving average and
within here you have your going to put
parameters right so this is the
definition of a function and it always
ends in a colon and then you put
everything that you know the function
does down here so here in here you can
put any parameters and they act as a
sort of variable for your function and
so the parameter is going to be values
so what are the values that we're going
to throw into this moving average and
then what's the window so if you had a
three moving average for example your
window is 3 next what it also can be
called like you're know your weight so
we're going to say weight equals NP dot
repeat and this is it's a website just
type clear it's a function within numpy
so we use 1.0 and then the window
divided by window and maybe at a later
tutorial I'll explain what the numbers
there's a lot of really cool functions
but it's I think at least to keep this
video nice and basic we'll leave that
out for now so now the next thing we
want to do is we're just going to call
this SMAS for simple moving averages
equals MT convolve another lovely little
function for us values pretty much does
all the work for us
weights and then we want to throw in an
last parameter in here called valid and
what this is going to do for us is only
run the simple moving average on valid
points so say our moving average is a 3
it would be invalid to calculate a 3
moving average at this point or this
point
right because there aren't three data
set or data points to consider so like
the simple moving average at this point
would be a six divided by three so it
would be a two that's not really a good
representation of what we're after so if
you put valid it will only start
calculating at this point if you're not
comfortable with programming it's nice
to maybe put it with the other one as if
it's full or honestly can't remember
there's another one that you can put in
there I think if you you can just leave
it as the default and it will calculate
the full one that makes it nice if you
don't know how to like make your charts
look nice after doing that because you
can kind of run into problems but the
best way to do it the proper way to do
it would be with valid finally the last
thing we do is return the SMAS and this
is going to be returned in what's called
an umpire array which you can use the
numpy array very easily with matplotlib
to graph and all this stuff so let's
show the example now so we'll run moving
average on the data set with a window of
three okay and let's go ahead and print
out the results there so we'll save that
run it and here are are the results let
me just make sure this window fits so as
you can see as we expected four point
three four point six that's what we were
expecting as the return here but just to
show you if we did get rid of valid and
it ignores the point that doesn't have
enough data points to do the calculation
you will indeed see that it starts at
the first point right so one it divides
it by three right it's to the next point
and so on so the next point it gives us
a two and sure enough you know it's six
divided by three two and so on but
that's a improper way to do it so I
wouldn't suggest you do that we should
leave it as valid
so that's your simple moving average I'm
not going to show you the incorporation
of it into our graph simply because we
already have that in there so for
example let's run up Yahoo Will Gluck
graph that and as you can see we're
using simple moving averages already
this we've got a 10 simple moving
average that follows the price and a 50
simple moving average that follows the
price and if we edit the source code of
that file and scroll down one we will
see our moving average we'll see
exponential moving average which we'll
be covering in the next video and then
if we continue scrolling down we find
the one we want that's going to be right
here that's where we're actually
plotting it in and all you really are
doing is right here we're calling
average one average two it's moving
average of closed price close price
typically when you do stuff that
requires just one price you always use
the closed for it and then ma one and ma
two is just simply coming from what we
specified that we wanted those to be so
anyways if you're not following out
we're going to eventually plug these
into our chart don't worry about that
I'm just not going to cover it because
they are already cover it into our chart
so there's not really too much point to
stuff them in there and once you start
getting comfortable with plugging them
into the chart you should be able to
just look at the code and see how we how
we've done it but I will eventually like
on the other ones with signs the moving
average in the exponential moving
average the rest of them I will be
showing you how we're plugging them into
the chart so no worries anyway so that's
the basic a simple moving average it's
very integral to have this one down just
simply because it's used in a whole lot
of other formulas and calculations so
it's a good one to have around just
because we use it a lot same thing with
the exponential moving average which
we'll be getting into in the next video
so as always thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>