<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Compression in Python Programming Tutorial | Coder Coacher - Coaching Coders</title><meta content="Compression in Python Programming Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Compression in Python Programming Tutorial</b></h2><h5 class="post__date">2013-12-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VQ7ydeSqjS4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's going on welcome to
another Python tutorial this tutorial is
going to be covering compression in
Python so typically the purpose of
compression is is usually as simple as
somebody wanting to decrease the size of
data maybe on it on a hard drive that is
you like a backup data or something like
that or just storage right or even like
share large files you know if you're
going to send them over Skype or
something like that you'd compress it
first to save a lot of time and keep the
file size low but it can also be used
for higher complexity tasks or even used
for the same sort of reasoning that you
would compress something to send it over
Skype and you can do this within your
programs in Python right so people
usually are just using it for themselves
but don't really consider using it
within their own burdens and programs
right so a simple ish example would be
if you engage in any sort of like
automated backing up of your data for
example so you could backup your data
compress right you can compress it save
that right and then you know maybe
automatically either weekly or daily or
however often you run your backups you
just have a process that opens the
compressed file do you compresses it
appends the new data recompress is it
and and that's it and and also along
that same kind of thinking you can use
this actually as a way to borrow space
or memory that you don't actually have
so if you have a two gigabyte memory
limit and you've got a bunch of big
lists that you're reading in possibly
but you're not constantly using those
lists or there's never a time where you
need both lists at the exact moment yet
you don't want to spend too much time
reading them into memory and all that
you can just compress them and
decompress them when you need them again
so it really is going to depend on what
kind of factors and variables come into
play for you but that can also save you
a lot of time so another example why
this would be necessary is if if you're
doing any sort of networking or
supercomputing or anything like this
even if it's local right in the case of
most supercomputers or I don't even know
might not even be most supercomputers
are local depends how many botnets are
out there
you know even if it is local though
you're going to be consuming bandwidth
and dealing with latency so compression
becomes especially useful if you're if
you're doing any networking like with
remote servers from each other right so
it's in many cases going to take less
time for you to compress the file
locally send it you know send the
compressed file over and then decompress
it when you get it yet a lot of people
aren't really doing that but you can
save a ton of resources and if you're if
you're sending large enough files and
you've got a business here managing
that's large enough it can save a lot of
money obviously again just like the
other one there's a lot of factors and
variables that are going to come into
play usually it's just as simple as a
mathematical operation also I'll show
you guys some benchmarking of it at the
end of the video and just to see you
know is it actually worth your time and
and how because you can also vary how
how compressed quote unquote that you
want that stuff right so yeah so anyway
let's go ahead and get into it and so
I'll show you guys both you know to
compress and decompress via your just
rural memory right so just the stuff
that you're dealing with mid program but
then I can also show you guys how to do
it with something like a text file
because it is all slightly different so
because with files it's usually best to
use base64 and encode and decode around
the stuff that you're actually going to
compress so it's always best because you
could do it you know you could fix the
problem if you didn't do it but it's
always best to kind of do it the right
way going in so that's how I'll be
showing it so let's go ahead and get
started now and we're going to need to
import four things here the first one is
going to be Z live and this is basically
the library that allows us to compress
and decompress stuff the next thing that
we'll want is system so basically what
we're going to use that for is just to
grab the size of files for benchmarking
later on then we're going to import also
time so we can actually measure the
processing time again for benchmarking
and then finally we want base 64 and
this is to encode and decode our our
files if we want to save them to an
actual file
now the next part of either you can make
your own you know text file and just
like populate it with a bunch of data
you know just do something like this
basically okay and just copy and paste
it a bunch of times in your file and
just make it a decent size so but for me
I've just used this file it's about two
megabytes
it's just gbp/usd forex ratio data so
that's what I'm going to use as an
example but again you just just use
anything and make it you know hopefully
over a megabyte just for purposes if you
want to match me make it to about two
megabytes so it'll be open and for me
it's gbp/usd one-day dot txt if you've
done that there is a tutorial where we
use this file if you do have that file
you can just use yours and then we'll go
ahead and read into memory now we're
going to go ahead and print how big this
file is so we'll say something like raw
sighs :
and insist that get sizeof and that'll
tell us the size of the text like how
much memory is text using for us so that
I'll tell us that so now let's go ahead
and do a quick example of compression so
to do compression you would say we'll
say compressed equals Z Lib compress and
then you can put you put basically two
parameters through here the first ones
necessary and it's what are we
compressing it's going to be text and
then the next parameter you don't have
to use it but you can and it's basically
a number um it's going to be 0 through 9
is applicable I'm not sure why 0 is even
applicable Wow applicable and hopefully
it's even applicable because 0 means no
compression and then 1 is like the least
amount of compression possible and 9 is
the most so let's use 9 to start now
what we want to do is I guess we'll just
we'll just print out the compress size
so we'll say print 9 compressed size so
9 just referring to the max compression
right and then we'll say comma sysd it
size
of compressed and then and that's it for
now we'll add a few more subtleties
later on when we go to benchmark it so
we'll save that and that should be good
let's go ahead and run that now so the
dr the raw size of this was uh you know
1900
well 1909 kilobytes right so 1 million
nine hundred nine nine fifty seven bytes
and the compressed size is only two
hundred and thirteen thousand so
obviously a significant compression now
the next thing i want to do is like
let's say that we want to save this data
so compressed is that data so like let's
just see what happens when we save this
so save comp equals open and we'll just
make up a file name here o comp data dot
text with the intention to append and
then save comp dot right uh we'll just
write compressed and then we'll go ahead
and and have it closed even though we
don't need to really will do that so so
let's run that now and press saved it so
if i come over here let's see comp data
let's bring that comp data up and here
it is so um it's obviously quite ugly
right and this is why we have to encode
it if we want to save it into a file
because what we could do if we leave it
in memory so if i do this now it's
compressed the next thing that we would
do is decompress it so let's say
decompressed equals z lib dot d comm
press and we want to decompress
compressed and in fact let me just well
I'm just going to make another variable
here called text equals something and
I'm going to say this is a test so now
you've seen how how much
impression can help we don't really need
to use that massive file just yet and I
do want to show you guys the full
conversion so not only that but we'll
print compress down here so the original
text is this is great it compressed it
will print out the compression and then
it's going to decompress it and then
we'll print decompressed just for
example here so you can see it visually
happening within Python see it's okay to
compress it into this data then
decompress it no problem but what
happens when we instead well I guess
we'll actually leave this commented out
so that file still exists so I'll remove
this and let's just say decompressed
instead what we're going to do is
decompress another file so we'll say
comp file equals and we're going to open
up that comp data file so it's going to
be equal open comp data text with the
intention to read and let's read that
file so it's going to be that kind of
gibberish we were just looking at right
this stuff um so comp file so instead of
decompressing compressed let's
decompress comp file and print out
decompress so let's run that now see
what happens it's getting angry at me we
haven't defined text and it wants to
know something about well just let it
open this file just to waste y'all's
time anymore
run it
there we go so as you can see it
this was the decompression that
attempted to do right it attempt to open
it read it and then we say decompressed
equals you know this let's decompress
comp file and we in there incompatible
or truncated stream so how do we deal
with that with files well if you were
paying attention at the beginning I was
telling you guys that what we're going
to have to do is change up how we're
compressing the data so in the interest
of keeping it simple instead of using
gbp/usd text I am going to in fact let's
just clear out everything because this
is getting messy so let's clear this and
now this time we'll say text equals
compression example with encoding so now
what we're going to do is we're going to
say compressed equals base64 b64 encode
what do we want to encode well we want
to encode the Z Lib compression of text
and we'll give it a full nine
compression just for example so
compression is done we can actually
print compressed and then we'll actually
save it so output equals open and this
time we'll say encode comp dot text and
again with the intention and then we'll
say output dot write will write
compressed we'll do output dot close and
then we're going to decompress this so
how do we do that now it's pretty simple
we're going to go decompressed equals
and basically the idea is you're gonna
have to flip the idea of how we did this
you just kind of flip it around so so
what we do is Z live decompress and what
do we decompress the base64 dot b6 for
decode
um and we could do compressed but
actually since we want to open that file
let's say read file equals open and this
is encode comp dot txt with the
intention to read it and we'll go ahead
and read it in the memory so it will
decode read file so that's the same
thing we did before only this time we've
encoded it and then we want to decode it
so we encoded it up here as we saved it
right so we saved it with the encoding
and then we're going to decode it for
the compressor for decompression so
let's go ahead and run that and see if I
made any errors in my ways well the the
process worked but we didn't print it
out we printed compression right it's
not sprints decompress save that run it
again okay so now you can see that it
worked and obviously if you can't tell
the difference between this gobbledygook
and this is basically we're using ASCII
characters right and so if we come over
here
what was the file we did encode comp so
we can actually open this file and
here's our encoded compression and as
you can see yes it looks much better so
obviously it's easier to read now there
are ways around this right you could
read the compressed file of that other
one this ugly one you could do that so
if you ever came across something like
this it would just require some more it
would really require first the encoding
of this into utf-8 and then you would
decode it but we're not going to get
into that so anyway so that's that now
the last thing I want to show you guys
is the benchmarking of this and we're
not going to code it up already
programmed it so we don't take any time
there so let me pull it over what I've
got for the make sure this is what I
wanted
okay so basically the same idea here let
me pull this over now and this is the
code if you wanted to mimic it you can I
think I'll just copy and paste this code
right here into and then I'll add for
the text file stuff I'll just copy and
paste that into a web page on my website
but anyway so it's pulling the data and
basically what's going to happen here is
start time equals the current time write
the UNIX timestamp and then it's going
to go ahead and run the compression and
it's going to measure how long did it
take to run that compression then the
next thing it's going to do is
decompress it and then it's going to ask
how long did it take to do that entire
compression in decompression and just
keep in mind this is slightly flawed
because of this calculation here for the
comp time so if you didn't really want
if you want to know the real full
compression decompression time plus of
you know my few like nanoseconds or
something or just tiny nanosecond so you
could run just this one but that's not
totally necessary since we're measuring
all of these on the same scale then
after we're done it just says you know
this is a nine this is a seven a five a
three and then the lowest compression
possible of one and then at the end of
it we just say the size of that how long
did it take what the ratio is like how
big is the compressed file in relation
to the original and then finally the
full compression and decompression time
spit that out as well so with that let's
go ahead and run it and the Ross I try
to drag it fast enough but it couldn't
do it anyway
the raw size obviously that and now you
can see the times that it takes so the
full thick compression takes almost a
second right well pretty much point nine
seconds so and that in the compress size
is twenty one or two hundred thirteen
thousand bytes as opposed to this you
know to the degree of seven or a
compression is just slightly um in fact
wow it's actually
that's quite interesting the 7iz is
smaller than the 9 and took less time so
don't use 9 at all apparently but then
as you can see from 7 to 5 the file size
does indeed get larger but the time took
is significantly less so it got a little
larger but the time it took was not very
much in the original ratio so so yeah
like 7 to 5 it got you know if you
compare this number to this number it
did get slightly bigger but if you
actually compare the original ratio I
mean we're talking just you know pocket
change here and then for the time saved
I mean you pretty much you know four
times quicker to do this and then here
we notice very little time saved but
then from three to one we notice again a
very large time saves and again we're
only at you know 17 points 1/7 you know
it's like 17 percent of the original
size still a massive change even if you
use one very fast from this method and
then the other times you can see let's
go ahead and run it one more time just
to see if that first number was a fluke
because that was that's kind of weird
but we're seeing it again I'm pretty
surprised I'm not sure how that could
possibly be but it is um anyway again
here's the numbers fairly close to the
original pass that we did actually I at
least some of these are identical looks
like they're all identical pretty crazy
probably usually a processing time will
vary slightly anyway this video is
probably getting too long so that's the
video I'll put the link in the
description for the I'll put this on a
web page on the website so you guys can
play around with it and then I'll just
copy and paste the whole encode and
decode for saving two files for example
so anyways hopefully you guys learned
something new hopefully you guys enjoyed
as always thanks for watching thanks for
all the support the subscriptions and
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>