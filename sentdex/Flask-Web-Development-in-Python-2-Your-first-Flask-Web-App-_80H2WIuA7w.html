<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Flask Web Development in Python - 2 - Your first Flask Web App | Coder Coacher - Coaching Coders</title><meta content="Flask Web Development in Python - 2 - Your first Flask Web App - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Flask Web Development in Python - 2 - Your first Flask Web App</b></h2><h5 class="post__date">2014-09-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_80H2WIuA7w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everybody welcome back to our flash
tutorial videos series in the last video
we got our server we basically just got
started talked about our environment
that we're going to be using and that
was it now we need to actually set up
our server to host our flask application
so let's go ahead and get started there
and actually you will host your very
first flask web application in this
video so yay so let's go ahead and get
started so first of all you need we need
to install a few things here um and
you'll have to work with me here
all the commands there's quite a few
commands that we have to call in fact
let me reference one of my cheat sheets
alright ok so there's quite a long query
command here that we call so the first
command let me sudo apt-get install and
we want all these things we want to
patch you two we want well we don't need
PHP 5 but we're going to take my sequel
- client and my sequel - server so sudo
apt-get install apache2 my single client
client my sequel server I'll hit enter
there and basically is going to run
through all the things - that we just
asked it to download and wait for that
and since we're installing my sequel now
we're going to get this question about
configuring our server and I suppose
that's fine okay enter your password for
the my sequel root user now don't
confuse that this is the my sequel root
user and then you've got your root user
password which later on you should
definitely should really disable the
root user and create your own admin user
and all that but we'll talk about that
later as well
so anyway make those things mm-hmm and
wait for that to happen
in fact I suppose I should write down
these passwords because I there we go
okay so everything's done now we've
installed all those things and now um
the other things we need to get is we're
going to go ahead and get sudo apt-get
install live live a Pachi to - MA - WSGI
so we're going to be using a WSGI to run
our virtual environment flask
application so we're going to grab that
okay next thing we're going to do is
sudo a - and mod wsg i hit enter there
and okay it's already enabled we just
need to make sure basically and now
we're ready to kind of set up our
environment here so I'm going to go
ahead and do sudo actually we're going
to go CD bar www and are there and you
should be able to LS you've just got
your HTML file or folder rather and now
we want to go ahead and do is we're
going to a sudo make dur and you can
call this anything you want for
simplicity sake we're going to call this
flask app so if you happen to like
reference other flask tutorials a lot of
times they're going to use the flask app
as the name so I like to keep that the
same flap though is it got flap anyway
flask app so sudo make there flask app
and now I've got our flask app directory
so we're going to CD into flask app if
you guys aren't familiar with the SSH or
any terminal you can start to type
something like capital F L hit tab and
it finishes it for you so just so I
don't lose anybody
so CD flask app and now we need another
directory within that and that's going
to be our actual apps directory so
you've got flask app and it's going to
basically be your entire flask
application and you've really got your
flask web app within that
but we're just going to call it flask
app again so we're going to go sudo uh
make tur m'kay der last app hit enter
and that's done and then now we want to
CD into that new flask app and now what
we want to do is we want to sudo make
der static and then sudo make dirt
templates so now we can do the list here
we've got static and templates folders
there and then in this exact in this
directory so var www flask app / flask
app now we can go a sudo nano underscore
underscore ini t underscore underscore
dot PI and that's going to open up our
like a nano Python interpreter I hate
using Nana for this and that's why I'm
going to show you guys how we can use
your Python ID ID Elly instead but for
now we're just going to use this and to
do this this we need a few things first
we're going to say from from flask
import capital flask we do not have
flask yet we're going to have to
download it but we're just making this
file for now so from flask import flask
and then we're going to say app equals
capital flask and then in parentheses
underscore underscore name underscore
underscore and so we're just basically
defining our app that we're going to run
here and then now you go a @ sign and
this is for decorator functionality and
so we're going to say app dot root and
this is your URL map basically so if you
like familiar with little nevermind but
anyways this will be the URL that you
use to reach whatever it is you're about
to define down here so it'll make sense
a little more sense if I just finish
what I'm doing here so at a brew and
this is a function decorator so you use
decorators that go above the function
but they actually they're kind of
attributed to the function they come
right before and flask uses this
for your URL paths so f dot root means
what route are we going to do to reach
this function that we're about to define
and in this case what we're what we've
got going on here we still let me see
let's go to here kenzi.com we might have
the Apache nope nope
anyway what this means though what it
will mean soon enough is a flash or
slash rather means this right Harrison
calm area Kenzi calm slash by that same
token you could say you know a brute
slash hello or something like that and
that would be Harrison Kinsley calm
slash hello okay
so but for now we want to just do slash
so this will be like the homepage so to
speak so a peru slash and now what we're
going to do is define and we're just the
function name here it's not really that
big of a deal you can really call this
anything you want we're going to call
this homepage so we'll say define
homepage and then in the function
against what I like about Nano but one
two three four
we'll just indent ourselves here you say
return so this function is really simple
it's just a simple function that just
straight up returns hi there how are you
doing okay and that's it so when someone
references the just root directory
basically it's going to define this
function and this function just returns
this statement so it's kind of confusing
if you're coming from Python because if
you've learned much this only defines
the function but then what happens
though is coming down here as a flask
application as you're in it PI what
basically we can say is if underscore
underscore name underscore I'm short
equals double and then in quotes
underscore underscore main underscore
underscore what do we want to do well we
want to do
two three four and then app dot run now
couple of things I'm going to mention
real quick first of all flask comes with
a great debugging feature for whatever
reason I can't get it actually work for
me so if someone has a method for
getting this to work let me know I've
tried everything like app dot debug
equals true I've tried app dot run and
then in the parameters debug equals for
all this stuff I can never get debugging
to work I'll show you just in case you
can't get it to work
I'll show you what I do instead because
what you can do is you can come up here
and you can literally encase everything
in a try and except you can even encase
this and try and accept as well so just
keep that in mind so anyway we're going
to control X to save yes we save it as
in it dot PI and we're ready to rumble
now we still don't have flask it so
we're going to get that and we also want
to go ahead and get pip so we can do pip
install and all that so sudo apt - get
install Python - pip yes we want to do
that and wait that's all good oh that's
small yes this is a new server you might
as well get a sudo apt-get upgrade
actually let's run I guess we'll run
update first so sudo apt-get update and
then we're going to run an upgrade as
well
cool and then just two up so that was
update now we're going to do upgrade yes
and I want to say that we did we
successfully got a pip install or pip
but we did have a few missing packages
for some reason probably is fine but I'm
going to rerun that again one more time
if you have any issues installing things
you can also set a apt-get you can use
aptitude and sometimes that tries a
little bit harder to work around
problems but yeah we're going to be
talking a lot about various things like
that that's kind of why I don't really
necessarily like doing things on your
your home machine because if you're if
you create a website locally moving to
remote is like such a daunting thing it
gets pretty rough sometimes but anyway
so now let's run sudo apt-get install a
Python pip again and other thing you can
hit the up arrow and reference like
previous function or previous things
that you've said so we're going to run
this one more time make sure that that
works out so yes again hopefully this
time it installs so it looks like that
time I didn't normally it would be like
you already have this package so
hopefully that works can't imagine why
wait
we could always use app to get the
probably for all like it for flasks and
all that so yeah okay this one worked
out though so um apt-get upgrade and
update now we want to use we need to
install virtual environment and we're
going to use virtual environment to
actually run our because basically like
flask uses a Python environment to run
and we use like a virtual environment
for that so we're gonna go ahead and
grab that as well so sudo pip install
virtual and done and then now what we
want to do is sudo virtual then our
virtual and virtue gone crazy here and
then then and you can call then for
whatever you want
since it's a virtual environment I'm
just gonna leave it been so now we've
got a new Python executable in then and
so basically we can install packages to
that and use them an inner flask
application so we've got that and then
what you can do you can activate and
deactivate your virtual environment and
basically the only time you're ever
going to really do this is to install
flask inside of that virtual environment
but we have to do that so we're going to
go source them /bin slash activate and
that activates our virtual environment
you'll know it because you've got BEM in
parenthesis there and here what we're
going to want to do is we're going to go
sudo pip install flask with a capital F
and we install flask all set and you can
find out for sure if it's running by
going sudo python underscore underscore
in its underscore underscore hi
all right run that and you can see that
we're running on our local host on port
5,000 see our server was 162 243 50 94
so our server is definitely up and then
let's see if we can get away with this
nope I thought I might um anybody that's
it's running on our virtual virtual
server but we shouldn't be able to
access that anyways because it should
only be locally so now we want to do is
we need to configure our virtual
environment basically to run flask on
our on our server for us
so really Harrison kinsley comm
shouldn't resolve to anything but I
would have expected Harrison kinsley to
resolve to this page but for whatever
reason it doesn't want to anyway hit
control-c and then we're going to go
ahead and hit deactivate here to turn
off our virtual environment and now what
we want to do is we need to configure um
configure this our server here to host
our flask app so you're going to want to
do is sudo nano slash etc' slash Apache
to slash sites
- available available let's learn how to
type your slash flask app dot conf so
configuration hit enter and then in here
we have all of our settings basically
for our file and I'll just copy and
paste this so we don't really need to
type all this I'll put this link to this
stuff in the description probably put
this all the code up on Python
programming down it anyway so we'll just
do this and if I forget to post this
code when I post the video somebody's
holler at me and we will get this code
up so the server name is the website
that you're going to be hosting on in
our case that is in my case anyway not
yours
Harrison Kingsley comm and server admin
this is basically email that will be
that like will be posted on your 500
errors
stuff yo-yo at yo.com you put whatever
you want there doesn't really matter so
now that's basically it just make sure
you've got your domain name up here like
what you wanted control X Y s to save
enter done now we can enable this by
going sudo 8 - n 4 naval site and then
the name of that site that we just made
which was flask
Capcom hit enter and we need - lets do
service Apache to reload and I think we
are I think what the command was fine
but we'll just do that yeah ok so it's
already enabled but you just had to like
push it with this reload now we've got
to configure our WSGI so we're going to
CD into slash var slash slash flask app
and in there uh you should find your
just your singular flask app folder
there now we're going to want to do is
sudo nano flask app WSGI
and in here is where we put our WSGI
rules and first we're going to define
where python is with the shebang so
slash user slash bin slash Python and
just note the pound signed exclamation
mark space and then the location of our
Python now we're going to go ahead and
import sy s for system import logging
and then we're going to say logging dot
basic capital config config and then
stream equals sis TD err so again just
go for this line logging dot basic and
then capital C config um that and now
we're going to go sis dot path dot
insert
0 VAR whoops bar www last app slash and
then we're going to say from flask app
import app as application and then
application dot secret underscore key
and this is where your secret key is if
you happen to ever share your website
with anybody or you maybe you're making
an open-source website you want to
remove the secret key for now we'll just
do this as our secret key that'll it's a
really solid secret key but ya don't
show the secret key and there's a lot of
good ways you can generate good random
secret keys so keep that in mind for now
we'll keep this simple we can maybe talk
about secret keys later for the rest of
like what's written here um we don't
really worry you don't need to
understand what's happening here I don't
really even fully understand what's
happening this WSGI script here but
anyway we'll hit control X Y s to save
enter you should probably you should
never edit your tell us GI file again
unless you need to change your key or
hide your key or whatever so that's it
now let's go ahead and restart Apache
real quick sudo service Apache to
restart you're gonna find yourself doing
this very often with flash for whatever
weird reason flask caches it's not even
in your browser it's like on the server
for whatever reason you like caches the
websites and you have to like refresh it
to see your changes sometimes or like
sometimes you'll make a change and it
will be a change that will set your
server to be like unload a bowl
basically or set your website to not
load but you'll be able to load it
because of the cache
so like regress because it can't load it
and then you'll find out like 20 minutes
later that your website doesn't load and
you'll be like wait what yeah and it
turns out it was like something you did
a long time ago that you thought was ok
and it went well but it didn't so anyway
that's that
see if we can resolve Harrison kenzi.com
yet yay so now we can go to Harrison
Kenzie calm and we get hi there how you
doing so hopefully you can get to that
point and like I said I basically
changed the DNS and all that in line
with making this video we didn't really
pause it all so hopefully that happened
just as seamlessly for all of you guys
it should it should be a pretty quick
process but anyway so that's that and
we'll I'll stop the video here and we'll
kind of continue on in the next video
but I just want to come back to this so
CD flask app and LS and init dot pi is
basically our main file here so sudo
nano underscore underscore and tab enter
and here's our app so again you can do
like hi there how you doing um playa
hits whoops nuts
so you said using my other editor but
anyway ctrl X to say yes enter and now
if we come back to our website here hit
refresh and this time it worked but
sometimes I'm hoping to show you guys
what I mean by this caching nonsense
that it does sometimes let's do X right
now 5 plus X maybe even get away with
that that won't be a syntax error so
Patrol X yes Center hey there how you
doing playa and we go to like Harrison
Kinsley calm there we go you see how it
regressed to like an old version that
was once workable this website does not
work and you'll see maybe if we refresh
it enough now it's doing playa so it's
kind of like playing around with these
old caches and then we'll do service
Apache to restart or to start Apache and
now let's go ahead and refresh and you
get an internal server error that's what
I mean so every time you make like a
major change to your website you
definitely are going to want to do
service patch to our restore service
Apache to restart because sometimes
you'll make that change and you won't
notice that you that change isn't there
yet or whatever and you'll only find out
like 20 minutes later that whatever you
didn't work it's really irritating and
so some weird caching that goes on there
same thing with like making any edit
period just because it didn't bring your
website down the edit won't necessarily
show up until you do a restart
so anyway pretty long video here so I'm
going to cut it off but in the next
video we'll be talking about making a
little more complex of a website as well
as I'm not sure if we're getting it
templates in the next video but um also
using SCP I greatly prefer to use SCP so
if we go here and we come down to the
bar ww flask a flask app this is our
init dot pi fault folder now naturally
when you double-click on any dot PI it's
going to bring up like the text editor
for winscp
it'll show you guys how to get it to
bring up your Python and all of that so
anyway that's what I'll be doing in this
video stay tuned for that if you guys
have any questions or comments on this
video feel free to leave them below as
always thanks for watching thanks for
all the support and subscriptions and
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>