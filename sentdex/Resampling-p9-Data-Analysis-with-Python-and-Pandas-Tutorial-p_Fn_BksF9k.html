<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Resampling - p.9 Data Analysis with Python and Pandas Tutorial | Coder Coacher - Coaching Coders</title><meta content="Resampling - p.9 Data Analysis with Python and Pandas Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Resampling - p.9 Data Analysis with Python and Pandas Tutorial</b></h2><h5 class="post__date">2015-10-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/p_Fn_BksF9k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome to
part 9 of our data analysis with Python
and pandas tutorial series in this part
what we're going to be talking about is
we sample Aang so the idea of resampling
is that lets you change the sample rate
of the data that you're looking at so
you can either increase the sampling or
decrease sampling basically or increase
granularity or decrease now if you
decrease granularity that's fine if you
increase granularity you're not really
you're not going to retrieve the old
data that you used to have and I'll show
you what I mean by that probably if not
in this video in probably a few videos
when we actually utilize resampling in
our data now the idea of that is like
let's say like with stock prices for
example stock prices come in interest
second I mean these are like millisecond
you know trades that occur but not
everybody needs access to millisecond
data and not only that like what if you
try to graph you know five years of
millisecond data you're going to crash
every system you have your hands on
pretty much so instead what you do is
you resample that data so instead of you
know you've got millisecond data but
what you can do is you can either write
your own program to do it or use
something like pandas and what happens
is it's going to take let's say you've
got millisecond data but you resample it
to you know one day what it's going to
do is is going to take all the prices in
that day all those milliseconds add them
together average them usually you can do
other things I'll talk about that in a
moment
and then it'll give you that price so
that'll be the one-day price based on
all the prices that occurred that day
now you can also resample and instead of
doing an average of everything in that
time period you can do a sum and you can
also do an open high low close value so
that I'll tell you in that period what
was the highest price the lowest price
the starting price of that period in the
ending price of that period anyway let's
go ahead and jump in this is our
starting code just the same code from
the previous tutorial so you should
already have this code pretty much typed
out if you don't have it go and hit up
the tutorial part 9 here there should be
a link to it in the description head
there
and you can copy and paste the starting
code so if you're just trying to figure
out about reef sampling now check that
out so we've got this HPI data we're
going to go ahead and leave the
correlation stuff alone I mean we can
keep the correlation there but we don't
really need that right now
and in fact we don't need this either
and we are going to graph so we'll go
ahead and we can leave the benchmark
we're plotting the benchmark here let's
just uh
uncomment basically all this graph stuff
and we've got HPI data we don't really
need the benchmark we can keep plotting
HPI data and in fact actually we're not
going to apply HPI data let's plot each
guy data for the great state of Texas
okay so we'll plot that data but then
what we're going to do is we're going to
define a new column here and what we're
going to say is let's say see this data
is sampled at once a month at the end of
the month it's grabbing the housing
price index so what if we wanted to do
something like this we could say Texas
one year equals HP i underscore data
texas and then we do a dot resample and
then in here you throw the valuation for
the resample for example if you wanted
to resample hourly you could put an H
right or if you wanted to do and
actually big capital H if we wanted to
do daily capital D and so on although I
did is monthly so even if you did daily
it would just be a bunch of repeating
numbers so for yearly we can use a for
annual now you might be like okay well
how do we know all of these well just so
happens there is here on in pandas
documentation although this is really
hard to find Ashley had to use Google I
couldn't even find it on my own looking
through their documentation but I should
have a link to this either in the
description or it's linked in the text
version of this tutorial but these are
all of the shorthand version so as you
can see there's quite a bit right you've
got the month end you could do the
beginning of the month so with MS you
can do right
we're doing like yearly so this is your
end this is business year and but then
you could also do at the start of the
year if you wanted and so on you have a
lot of options for how you want to
resample data now we're just going to
resample annually in the default for a
resample is to use the mean but if you
wanted to change that the key word for
that is how and then you could do an
equals and then for now we'll say mean
but again you don't have to add that if
you want to resample by the mean because
that's the default but anyway we've got
tx1 year that's fine we'll print out the
head of that just to see it tx1 year dot
head now we're plotting this data here
let's go ahead and plot basically the
same thing only we're going to plot tx1
year instead of that so we're going to
graph both of these just so we can see
the difference here so let's go ahead
and save and run that this should pop up
a graph for us sure enough there it is
this was resampled by year now the the
red line would be the we could have
added labels and stuff here and if you
want to if you do the DF dot plot it'll
automatically add a legend and stuff for
you but if you plot one by one it's not
going to do that so what you can do is
like see how we have like this line
after this dot plot you can add a label
so we could say label equals monthly
monthly TX HPI and then down here we can
say the label equals yearly TX HPI and
then we removed legend let's just not
remove the legends add a legend
basically and there you go all these
it's in our way location for is usually
the bottom right I believe so you can
see this loke equals four for the legend
I'll move it out of the way hopefully
for us yeah so okay so you can see URI
is that red line and then the blue line
is the monthly now an interesting thing
first of all you might be like wow if we
re sample by year it looks like we have
a predictive
um assessment here right not quite so
this is my year in the year is probably
being marked right at the beginning of
the year so it's yes so like this is
January 1986 but the problem is it's
actually is your end
but anyway it's resampling with a lot of
bias when you do that if you resampled
like the current year would be lagging
basically and it it is so just keep that
in mind it's the the plot happens
basically after the years completely
over so you will never it won't actually
be a leading indicator so this is kind
of misleading anyway but as you can see
it follows very closely because it is
just a mean now one thing to note is you
don't get any of these little squiggles
now these squiggles are very interesting
so this will tell us something
interesting about the housing market so
for example let's zoom into some of
these squiggles and just hover over here
and if you hover over the peeps you can
look down at the lower right right down
here and you can see when these are
occurring that's uh occurring in June
2007 uh June 2008 June 2009 and so on
this this pattern continues pretty much
every peak occurs in June can you guess
where the troughs are occurring anyone
right January or December but generally
it's between December and January right
now but yes in January in December these
are what we would call a cycle for sure
and it's very interesting I mean the
entire housing market every state
follows these that rule pretty much
every year it's at its peak in June as
cheapest in December now why might that
be first of all you've got the winter
blues probably no one's really thinking
about moving but also the biggest thing
is most likely if you're moving and
you've got maybe kids and stuff like
that it's very difficult to move them in
the middle of the school year like that
whereas in the summertime we have a nice
break usually and we can get people
moved and stuff like that but anyway
very interesting to see that that's
happening also could be for tax purposes
too buying a new house in December
represents a little bit
risk sometimes but anyway a lot of
reasons for that I'm just kind of
guessing at a few I'm sure there's
plenty online this is clearly a trend
I'm sure you can find a lot of
information on it anyway
closing that out that's resampling I do
want to show you guys some of the other
resampling that we can do just real
quick instead of you know annual how me
you can do how OLC and then I will see
you plot we could plot it I think that
plot will work out actually the labels
going to throw us for a loop
we'll see if that plots I'm not sure but
I think it should yeah it did
the plots pretty ugly but basically it's
plotting the open the high the lone
closed for that exact period and sure
enough you can see that's occurring but
what's most interesting is is here right
so this this is the new resampling and
these are the open so these are all
percent changes so like here the lowest
percent change for that year is 52 the
highest is 75 that's a significant
change the low and the close as that
nuns him so really the high and the
closer identical side just means for the
year prices went up as opposed to if you
had the high was much higher than the
close it was like well during the year
let's say in the Prai in June the price
was as high as it's ever been
anyway so that's resampling here we were
resampling kind of up and generally
you're always going to resample to a
time frame as larger than what you
currently have because if you if you
down sample or some people want to call
this like super sampling you're not
going to somehow create more more data
like it's not going to go to just
magically create more data for you or
just guess somehow what the data would
have been in between so when you
resample generally you're you're
increasing but as you can see by looking
here I mean we've got resampling down to
nanoseconds okay so in microseconds but
nanoseconds I mean that's crazy so
depending on what kind of sensors you're
using maybe or what kind of data you're
dealing with you might actually find
that you resample down there but also if
you need your data to be perfectly
uniform I
II a measurement for every let's say
nanosecond this is a way that you could
kind of cheat the system and do that but
you can also use filling and stuff like
that but it is a way to take
unstructured you know data that you
really want it to be structured in a
timely manner and make that happen so
that's another way that you can do it
besides just simply trying to decrease
the size of your data without forfeiting
too much of the quality anyway that's it
for you sampling wound up using
resampling as a sort of hack in a couple
of scenarios here so you'll see what I
mean later on but resampling is really
useful for all kinds of reasons so it's
definitely something you must know for
doing work with data analysis and pandas
if you got any questions or comments
leave them below otherwise as always
thanks for watching things for all the
support and subscriptions until next
time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>