<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Direct Input - Python plays Grand Theft Auto 5 p.3 | Coder Coacher - Coaching Coders</title><meta content="Direct Input - Python plays Grand Theft Auto 5 p.3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Direct Input - Python plays Grand Theft Auto 5 p.3</b></h2><h5 class="post__date">2017-04-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tWqbl9IUdCg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I was pretty confident that we would
be able to just simply use PI Otto GUI I
thought surely what and so you don't
need to install PI out a GUI but in
poorer PI Otto GUI
I'm going to just comment all that out
and then what I'm going to do is we're
just going to run some PI out a gooey
stuff you could probably guess what's
about to happen but yeah so what I'm
going to do is I'm actually just going
to copy basis codes it's unnecessary for
us to waste time on it basically what it
does this is a brilliant countdown
script
it just counts down so we have time to
get to the game unpause the game and
accept input so let me go ahead and run
this should start printing many get
there goes so we're waiting for it it's
supposed to press W which should go
forward it doesn't and then it tries to
go up and it doesn't okay so obviously
it's nothing happened now what we can do
is run that one more time though and
then I'll just put my mouse here so this
is a key down so we can see a couple
things one is it pushes the key down but
what happens on your keyboard when you
actually push that key down right it
goes like that so we already know the
input is a little different but for
whatever reason it's definitely not
working on grand theft auto I spent a
long time trying to see like maybe it's
just too quick like maybe the impact was
like too fast so I tried to put like
mini key downs and then I tried well
maybe it's still too fast I'm not seeing
it but if you press like if you press
the turn keys the wheels will turn all
the way no matter how short you press
them so I thought okay let's try that so
send key a or whatever it just didn't
work so I did some research on that and
again we're just I'm able to cut this
time down just simply because I did this
prior but I did some research on that
and I came to many threads but this was
the one that I got an aunt a good answer
on this guy's trying to control like
half life in Minecraft and you just
simply can't do it you need
trying to use you know this code here
but then you can come down here actually
I see is it this one yes this one decade
anyway the main issue is you need to
send keys via right you you the solution
is to use scam codes instead of VKS
someone can post below what that is but
I don't know what that is but anyway
it's just a different way of I guess
sending the keys and the reason is from
my understanding is because games are
using DirectX so you need to send keys
how that expects the keys anyway
regardless take this code this is your
new code so we take this code copy this
code and then also just note there's the
scant the full scan codes are here so
because like this is a W you would never
know so so anyway take understand that's
a W so then we took I took that we you
guys aren't a part of this yet let me do
this and what I'm going to do is just
copy paste here
let's do direct keys and open direct
keys here and I need to recopy this
because I got that other thing you owe
you can't really see that I'm doing that
there we go I'm copying this whole thing
alright so we take that paste save and
then this just for the record and so is
actually some of this this was code that
I took from Stack Overflow so it's
actually a Creative Commons license
ought to update that on the stack
overflow as well anyway blank okay so
what we need to do is find where I just
pasted that where did that go direct key
that I closed it now I didn't close it
so probably you know you can keep this
but then we want to define some some
constants so some of the constants that
we have like that is basically for now
we just want WASD eventually we might
want quite a few more like mouse
movements or clicks rather pinky mouse
movements one day even in a car the
spacebar is the e brake so stuff like
that but for now let's just save a few
so W is equal to zero actually it should
be probably lower case zero X 11 a
equals 0 X 1 capital e s equals 0 X 1
capital F and G equals 0 X 20 this way
we can just import this and we don't
need to type those and it's a little
more clear and then we can use the send
key which is down here I'm sure you can
see that here we can literally use press
and release that's fine I'm going to
leave this here just for my notes but
I'm just gonna if just made it okay so
we'll say that fan tastic clothes will
come over here actually we can leave
we'll leave this code here we're no
longer going to be using peyote because
it failed us and now instead what we're
going to do is we're going to say from
your rect keys because we just just
called that script direct keys we're
going to import press key we should
press key let me think here actually
because I think we need two things again
I've already this won't be the case
always but I have already tested this
and I swear I didn't need to use release
key
hmm what's up look leave it there look
let's try just press keen and not
release key because I don't think I
needed it
anyway press key and then W a s d okay
and then rather than PI out a GUI
keydown and keyup we're just going to do
press key press key press key save that
and now let's run this one more time
hopefully we'll get all right what do we
not do s what do we do
or maybe we didn't save it no because
we've got W na let's go to direct keys
where are you
wao we lowercased it okay save let's try
again and I'm actually going to close
this so we can see the countdown so
everybody can see it for three well this
will only do it hmm
what what
and integer is right now this is
confusing like I said court dumbest but
why are you fooling with me right now oh
okay
Harrison come on man all right I didn't
make this mistake originally okay so I
use strings here these need to be hope
you can't see it glad I caught that
anyway haha sorry yeah that was press
key was in string W form what we
actually need is full upper case you
know W what we imported so it's that
little code dragon sort of work
oh he doesn't ever release that's weird
I swear I tried boy we're gonna be in
trouble soon um interesting um that's
really weird because I really like I
said I don't remember needing to do the
release key but clearly we do and that
makes sense but that's just weird that I
don't recall doing that but anyway so
yeah release key so instead we can
release key W and then we're basically
at the end of this tutorial I just want
to confirm that that works before we go
to the next one mm all right
board for three seconds and then these
hopefully stops release key not on do we
not even oh we didn't import it uh hairs
release key one more attempt surely this
will work a jefe just I'm just orienting
it okay
all right we're done okay so at this
point I'm just going to move at this
point we have confirmed that we can take
input well we haven't fully confirmed
but I mean we should be pretty confident
at this point I think what we can do is
come down here paste will cut this cut
this or oh you can't see what I'm doing
good anyway I'm moving the code that was
up here toe down here I cut the actual
movement stuff and I'm going to tab it
over so now this is hard hard to keep
all this stuff on one screen ah let me
do there we go that's there we alright
so process image I just moved this stuff
down here I've got this like little
countdown here the time starts and then
just down in here I'm pressing and
releasing the key and now we can confirm
that we can actually run this pressing
keys and doing the opencv obviously I
can't imagine a reason why this wouldn't
work but we just do kind of want to be a
hundred percent I suppose the only one
problem is that does bring up a good
question actually so good thing we ran
it one problem is with the time sleep
that we're throwing in here
it doesn't update the actual cv2 window
so when you press and release that key
you'd probably need to use some other
form of logic rather than sleep which is
totally fine
we would rather than just sleeping
randomly or logic would actually be
press key and then we would have some
sort of event that you know we're about
to cross the lane let's press this other
key once we're content that we've made
enough we release the key so you
wouldn't be using a time sleep anyway
but if you do throw in
sleeeeep it's obviously going to three
seconds every time you update that
window anyway cool in the next tutorial
we're probably going to leave the whole
keypresses behind and work on simply
trying to actually detect flames so that
we can create something that can at
least in a rudimentary form Drive or
some way of actually just automatically
detecting whether or not an AI that's
just simply exploring the world is
within the bounds of the lanes so um and
now we're kind of getting into something
that is completely unplanned at this
point if you have suggestions for
improvement or ideas or things you want
to test leave them below because this
can be totally shaped by you guys so
anyway that's it questions comments
concerns whatever feel free to leave
them below otherwise I will see you in
another tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>