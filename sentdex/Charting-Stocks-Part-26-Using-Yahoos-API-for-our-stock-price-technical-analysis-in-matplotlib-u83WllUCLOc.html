<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Charting Stocks Part 26 - Using Yahoo's API for our stock price technical analysis in matplotlib | Coder Coacher - Coaching Coders</title><meta content="Charting Stocks Part 26 - Using Yahoo's API for our stock price technical analysis in matplotlib - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Charting Stocks Part 26 - Using Yahoo's API for our stock price technical analysis in matplotlib</b></h2><h5 class="post__date">2013-09-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/u83WllUCLOc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the 26th financial
charting with Python and matplotlib
tutorial where we left off we were
generating this chart and in my opinion
I think this chart looks as good as it's
going to look so I think we're all done
with editing
you know the looks of the chart and all
that and now what I'd like to do is get
into dynamically plotting any stock you
want directly from the Yahoo API that
way you know with this data I mean we
can reference ten years of stock data if
you want straight from me on whose API
and you don't have to download any of
that data or have it on hand you could
pick any stock you wanted you know
there's like I don't know how many total
stock there are but it's like you know
over 3,000 for sure since we have the
Russell 3000 so and I think that covers
like 99% of companies so it's pretty
close I think so anyway we want to
reference the Yahoo API instead of you
know requiring that we have this data on
our computer so how would we actually do
that instead and so it turns out that
this is actually pretty easy because
most of our functionality you know if
you recall our data polar it was pulling
the data and then organizing the data
already so we can use a lot of the same
kind of logic to do it and just for the
sake of writing it out again I think
I'll still write it out but you could
also reference your data polar and just
kind of edit it if you wanted but it's
always good to go ahead and reaffirm in
your head how you do various things so
might as well do it it's not too many
lines of code so let's go ahead and get
started so close out of this and we'll
go all the way to the top and as you can
see immediately our data is eventually
being retrieved from stock file which
was you know that stock name dot txt so
really all we need to do is populate a
variable called stock file with an array
of data and that's all we really need to
do to make this work so it's actually
pretty my new
to change that we need to make so for
fold wonder delete stock file and I what
we'll do is first of all in case all
this in the try and accept and then
we'll say failed to pull Chrysler and in
our try here you think here so we'll
just say pronounced polling data on
comma stock whatever that stuff is then
we're gonna say URL to visit equals HTTP
colon slash last chart API dot finance
yahoo.com slash instrument slash make
sure I spell write 1.0 slash then you
add plus stock whatever that stock name
is then slash chart data semicolon then
you just specify a few more parameters
that's going to be type of data equals
quote semicolon range equals and let's
just say three years on all this data
and then slash CSV so that's our full
link the next thing we want to do is
specify an empty empty variable
stock five so we can populate it next we
want to do another try and accept
3e and this time if it does fail
organize data so here we're just gonna
organize it basically and source codes
will equal URL Lib - got URL open and
it's going to open up URL to visit and
read it then split by and then for each
line and split source we're gonna say
split line equals each line that's by
comma
now if when split line equals 6 if you
recall this was to avoid they need data
that we didn't want or an empty line and
then we also needed to check for if
values not in each line so the only line
that also had 6 pieces of data was
something that we didn't want and it
contains value so we just use that stock
file dot and each line and that will
populate stock file and then we'll come
down here and everything is the same so
now what we need to do is somehow define
stock right cuz nowhere we've actually
said hey this is the stock we want to
use so now we want to come down to the
bottom instead of for stock in each
stock we'll just say while true this tab
this over bring this up no more sleep
sleep is for the weak
anyway stock you their stock I don't
have to use equals raw underscore input
and this allows the user to just put
stuff in and we'll just say like
what's top stock to chart and then we'll
take this variable paste it right on in
there and now it should reference any
stock so let's go ahead and run it and
we do run it you should have on your
window here it's asking you know what
stock should we use so let's first start
with ebay since we've been looking at
eBay for a while
up shoot sure we made a typo scroll up
to the top there oops caps going on
there source code let's try again save
it run it type eBay and again okay so
here's eBay obviously looks very similar
to what we've been staring at for the
last like 20 videos let's put plot
something else so when you close it it
show automatically since we did a while
true loop ask you okay another stuff so
let's do one we haven't seen just do
ExxonMobil plots Exxon drag that over
sure enough here's Exxon Mobil awesome
and you know you could continue on so we
could say we want Apple so Apple awesome
there's Apple we got a lotta over by
here on Apple even some oversold as well
who who volume looks good as another
scenario where it's covering it but
you're not you know losing the data so
that's kind of nice it's pretty volatile
stock too over that time period let's do
one more let's do an a Groupon okay this
one's a funny-looking one for sure I
guess cuz it doesn't actually have three
years of data anyway but it does have a
lot of oversold here even that you can
see
and sure enough I mean let's zoom in on
the oversold point
and you can see that it came down and
then probably as we scroll over not too
much but it did come up and it continued
coming up for a little bit anyway anyway
you get the point you can graph you know
any stock you want and obviously if it
doesn't have enough you know like
Groupon was a good example where we
didn't even have three years or Groupon
and it was okay still plotted for us so
that's kind of cool to see make sure
we're actually pulling so isn't let's
see do we do we actually put three years
of data in there now my question we
didn't say three years or why it's not
giving us a full three years so I know
it I'm almost positive that it does go
back three years let's try ten years Wow
so yeah now it goes back to you know
this will go back to 2007 I wonder why
that three years wasn't going back three
years for me anyway
here we go with this stock here's a lot
of oversold points in its life or
overbought points I mean pretty
interesting and again it looks like it's
pretty accurate when it does say hey
watch out you this is risky cool anyway
so you guys get the point pretty cool so
now you can graph like any stock that
you wanted later on you could also you
know have it really doing everything
right you meet all of our functions have
the ability to be edited a little bit
right you can change the moving average
obviously you can also edit the time
frames for the RSI the MACD all that
stuff you can we've left kind of open to
be edited so you could do all kinds of
stuff and actually make a pretty darn
cool charting application with this
logic that we've just spent some time
building you know you put it up on a VPS
or whatever with the Python running in
the back
and actually do pretty good so anyway
I'm enjoyed doing this series hopefully
you guys have enjoyed the series and
have learned some useful information to
doing your own charting eventually might
get around to doing the lot art well not
live but I guess I haven't really said
anything about that but I do actually
have some programming knowledge about
making live charts within Python and
doing it with stocks and stuff so that's
pretty cool too there is some stuff like
built into Python to make live charts
but it just never worked for me for some
reason like I could never get it to work
so then I ended up just coding my own
live updating charts and so that was
kind of funny cuz there's a lot of
memory issues doing it but it finally
did work out so you could make live
charts based off of Yahoo's like
5-minute introduced acts on one monitor
you know and have them you know change
colors and stuff and so that's what I
had done a while ago so that's pretty
cool stuff so you can make all kinds of
you know app in theory kind of like
applications for stocks and that's kind
of like I was saying you know if you
learn to do your own programming for
financial data the possibilities of what
you can give yourself as far as an
application are concerned I mean it's
just endless possibilities right so it's
just definitely a really beneficial
skill to have so anyway that's going to
mark the end of at least doing it with
one day open up a high low close data I
think I might do a few extra videos here
and there maybe but that pretty much
concludes making a chart so anyway thank
you for watching thanks for your support
your subscriptions and until next time
guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>