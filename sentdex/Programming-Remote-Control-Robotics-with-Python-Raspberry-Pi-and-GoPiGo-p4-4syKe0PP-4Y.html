<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Programming Remote Control - Robotics with Python Raspberry Pi and GoPiGo p.4 | Coder Coacher - Coaching Coders</title><meta content="Programming Remote Control - Robotics with Python Raspberry Pi and GoPiGo p.4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Programming Remote Control - Robotics with Python Raspberry Pi and GoPiGo p.4</b></h2><h5 class="post__date">2015-08-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4syKe0PP-4Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to
part 4 of our robotics with the
Raspberry Pi tutorial series in this
part we're gonna build on our last
script our last script from tutorial 3
it was the following it just basically
moved our a robot forward and back we
can run that again real quick this is a
really simple script that just ran it
forward and backwards now what we're
gonna do is create a full kind of user
controlled scenario now in order to do
what I want to do we're gonna need
access to the kind of GUI desktop or
what's called X now there's a couple of
ways that we can do this but the way to
do it remotely is either with a VNC or
with something like X RDP which is sort
of a VNC but we can use that with
Windows so Windows isn't really the most
VNC friendly operating system but with
the remote desktop we can do it really
simply so if you're on Windows what you
might be able to do or get away with is
to do sudo apt-get install XR d MP
and run that now I already have that so
nothing's gonna happen if for some
reason it says you know I cannot find
this package or something's going wrong
make sure you run a sudo apt-get update
and also do a sudo apt-get upgrade and
that and then try to run it one more
time otherwise you you might not be
finding your packages for a different
reason now in this tutorial what we're
gonna do first is I'll wait for this
stuff to kind of go away but once you
once you add actually I can probably
connect now but my processor is probably
in use but anyway if you're on Windows
and even installed xrdp all you do is go
to your Start bar and go to remote
desktop connection if you don't if you
can't find it just literally search for
a remote desktop well click on that and
up pops this and then it here's where
you put your local IP address to the
Raspberry Pi now mine's on 192 wants to
say 0 109 so that's where I'm gonna
connect so I'll hit connect it might be
pretty slow again because the PI is
doing stuff but anyway you'll probably
get this little you know check thing to
see if you really want to connect to
that yes and then here you'll login you
already know your information PI
raspberry is probably your password and
then you'll kind of connect it might
take a second again for me because my
raspberry PI's is doing these updates
but this will load and then it basically
loads into the desktop version of the
Raspberry Pi so there we have it now you
might actually have a different
background than me I started with a
default raspbian image and I installed
the the go PI go software but if you
started with the there Dexter industries
go PI go image you probably have a
different background now once you get
here we're gonna go ahead and just set
this kind of aside for now but you need
to make sure you can actually achieve
this kind of desktop connection but I'm
gonna move it over for now and now what
I'm going to do is tutorial 3 right
click and I'm just going to duplicate it
you can do whatever you want but I'm
just doing that to make a new file and
we'll call it tutorial 4 dot PI yes
you'll probably enter your password
again I didn't I guess because I have it
saved anyway open up tutorial 4 and now
you're ready to rumble now what we're
gonna do is remove all this and we're
gonna need the following we're an import
t can turn capital T as TK and then from
go PI go import all again and in this
tutorial we're gonna cover going forward
backwards left/right rotate stop
grab the distance from the distance
sensor and also move the servo if you
don't have a distance sensor just don't
worry about it don't code that part
right if you don't have the servo don't
worry about it don't code that part and
everything else will work just fine so
first we're going to have a little bit
of a constant up here it'll be servo
range and that's going to equal a list
of values to
three four five six seven and eight I'll
explain that when we get there to the to
the actual code down at the bottom now
at the very very bottom we're going to
say command equals TK dot t-- k pay
attention to the casing there and then
we're gonna say command dot bind
underscore all and then in quotes here
key with those brackets and then key
underscore inputs okay and then finally
we run commands da main loop you know
all this does is it this is gonna open
up a basic tkinter window and then it's
gonna start tracking all the key presses
that we press and for every key press
that happens it's gonna run key input
with that key event so key input doesn't
exist yet so we're gonna write the key
input function now so we're going to
define key underscore input and the
event we'll just call that literally
event now to find out the key that was
pressed we're going to say key
underscore press equals event key sim
for key symbol dot lower just in case
camps comes into play and then we'll do
prints key press like that so we'll go
ahead and save that for now and let me
make it small let's make sure that went
over and then what we'll do is let's
bring over the remote desktop thing now
and let's double click on LX terminal
and when that pops up we need to
navigate our way into the the go PI go
local but I'm also gonna make my font
larger so everybody can see it really
well
awesome okay so now LS here CD into
desktop go PI go local list out the
stuff there's tutorial for so I'm gonna
go sudo python tutorial for dot pi hit
enter and hopefully yep there's our TK
noir window now as long as we're active
in this window
we'll click on that and I can press keys
right wsd ad space you or no I and so on
it's a very simple kind of single key at
a time logger
okay so we're that far that was
successful and now what we can do is
assign functions when various keys are
pressed so moving this aside well we'll
keep printing the key press just so we
can see it and that's down a little bit
so now that we've got that what we can
start asking is just a bunch of if
statement so we can say if key
underscore press equals W what do we
want to do well we want to run FWD
simple enough then we can go l if key
underscore press equals s what do we
want to do well if it's an S we want to
go backwards so bwd and then we'll keep
this going so I'm instead of typing Elif
and equals all the time I'm just gonna
pace pace pace pace pace paste a few in
there we might not I don't think will
use all of those but it'll save us some
time so we want to handle four WS a D Q
E and space and then the letter U and
we'll leave this one for now empty okay
so going back up WS and then a we want
that one not me backward a will be left
D will be right
q will be left rot for left rotate II
will be right rot for right rotate and
then the space key will be to stop
whoops
to stop the bot and then you will be for
the distance sensor so if you don't have
a distance sensor just get rid of this
right but if you have one will use you
and the U is just for ultrasonic
distance sensor that's gonna be the
following we'll just we'll just print it
out
for now this will just be the distance
so print and then us for ultrasonic
sensor disk and then you give the pin
number if you plugged in the ultrasonic
distance sensor by their instructions
the pin you plugged it into is probably
15 so there's that now what we're gonna
do is I think we'll just leave
everything now so that should do for all
the things that we need so we'll save
that we'll come down back to our GUI
bring that over here apparently I am
lost on here
I got like off the screen I guess there
we go
rerun that and then the tkinter window
should pop up there it is
and then now let's just try forward
command so you should see that the
wheels on mine are spinning and yours
should be spinning - let's try backwards
sure enough now it's going backwards
let's try a rotate so I'll hit Q and
then now they should be spinning in
opposite directions let's try e now they
should spin in the other opposite
direction now let's try stop this thing
space cool so now we can actually remote
control our lat our front laptop remote
control R go PI go with our keyboard now
before we go on to the next tutorial I
do want to show the servo as well so
what I will do and if you don't have a
servo then you can pretty much just jump
to the next tutorial but if you do have
a servo or you want to know how we're
gonna handle for the servo here's all we
would do it's pretty quick code so we're
gonna say L if ki underscore press dot
is digit because the key press is coming
through as a string but what you can do
to find out if a string is actually a
number that's in a string format you can
just ask is digit that it's boolean so
it comes through is either true or false
so if you've got if the did if the you
know the string is 5 and you say if v
dot is digit even though it's a string
it's gonna come back as a true because
yes 5 is a is a digit so if the key
press is a digit the next thing that
we're going to ask is if
if the integer value of the key press is
in our serve wall underscore range we're
gonna unable the servo cuz otherwise
it's not gonna be enabled and then we're
gonna go we're gonna say the servo and
then we basically want to set the servo
and you set it to a value and this value
is going to be the integer value of the
key press times 14 this just worked out
from my servo it just seemed like a good
number and basically this will be to the
point where five times fourteen so 70 is
the center point basically for the servo
about depends on how well you screw the
servo in mine was a little crooked so
your number might be a little different
but you do that and then two to eight
will be kind of sweeping motion and
again depending on how well you hooked
up your serve on how long your camera if
you have a camera on there my main issue
is that the camera cord basically is not
very long so if you rotate all the way
over in one direction you basically run
on a camera cord and you're pulling on
that cord and so I don't want to do that
but if you don't have a camera you can
actually rotate this thing around quite
a bit
anyway we set the server to that number
and then we'll go ahead and disable the
servo now yours might be a little
different I don't know but for some
reason I just enable the servo set the
servo and disable it because the servo
like it'll just keep kind of like
wiggling a little bit if you don't
disable it so I disabled it to shut it
up and stop it from wiggling so much but
I think part of that is because there's
a little bit of resistance that is
coming from that camera module so I
think that's why it's doing it so
disabling it seems to help a lot but
again yours might differ from mine so
anyways we'll save this and I'm actually
done there so I'm going to move that out
of the way and let's log my my key
anyway we're gonna close this and have
to rerun it so it's running the new
version of tutorial 4 okay so now it's
up we can go forward stop and then now
you can start pressing your cert or your
buttons for the servo range and you
should see that the servo actually moves
now we push it
added a slight time because now like
like this is two and then eight I'm
pressing eight but it takes a few
presses to get it over so actually maybe
what we might want to do is give it a
slight sleep maybe time not sleep one
let's just try that real quick I'm not
sure that it can't remember if the servo
will just keep running or not but we'll
find out in a moment
so that pops up let's try to yeah there
we go
so eight five now that yes so with that
one second that's enough time for it to
actually get to the point where it wants
to be and then you can actually I can
hear it you probably can't hear it on
the mic but I can hear it kind of
wiggling and then it's disabled and
shuts up
but anyway so now you can control the
servo position with your keyboard so
that's pretty cool
so anyways that's that for this tutorial
now we're able to control a robot and
move forward backward I pressed way too
many keys it's going crazy forward
backward rotate we never checked the
distance so I'll hit you and now you can
see the distance is 677 centimeters from
the point of fire which is going
basically all the way across my room so
yeah that makes a lot of sense so that's
it for the basic control of your cope I
go in the next tutorial we're going to
be talking about controlling the missile
launcher on our go PI goes so that'll be
very exciting if you have any questions
or comments up to this point please feel
free to leave them below otherwise as
always thanks for watching things for
all the support and subscriptions and
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>