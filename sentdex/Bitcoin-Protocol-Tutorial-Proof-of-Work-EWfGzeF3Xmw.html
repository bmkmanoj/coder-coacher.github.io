<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Bitcoin Protocol Tutorial: Proof of Work | Coder Coacher - Coaching Coders</title><meta content="Bitcoin Protocol Tutorial: Proof of Work - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Bitcoin Protocol Tutorial: Proof of Work</b></h2><h5 class="post__date">2014-02-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EWfGzeF3Xmw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and welcome to another
Bitcoin protocol explained video this
video is going to be covering the
proof-of-work section in the Bitcoin
paper the problem we have so far is we
have a way to identify the current and
previous owners of a coin but we have no
way of knowing whether or not they've
double spent that coin the solution to
this is to have a just this massive
timestamp server slash ledger that
literally logs everything and everyone
is made aware of this through
broadcasting it to each other
and the longest version of this is the
accepted one as its you know the longest
is the newest and it also will be the
one that supported by the most CPU power
slash nodes in network so with this
solution how do we stop people from
actually just editing that log and then
passing it along and you know maybe edit
it real quick and then pass along say
okay I've got this much coins or
whatever right or what's known as a
replay attack in networking so this is
where proof of work comes in now this
sections slightly more dense than the
other sections that we've covered so far
but don't worry
hopefully I'll be able to explain
everything real well and if you do have
any questions feel free to leave them
below so let's go ahead and begin with
the paper to implement a distributed
timestamp server on a peer-to-peer basis
we will need to use proof of work a
proof of work system similar to atom
backs hashcash rather than newspaper or
Usenet posts the proof of work involves
scanning for a value that when hashed
such as with sha-256 the hash begins
with a number of 0 bits the average work
required is exponential in the number of
0 bits required and can be verified by
executing a single hash now this paper
was you know mostly the proposition but
actually Bitcoin I would even go so far
to say is Bitcoin uses hash cash they
just make a few slight changes to hash
cash so because of this
we definitely want to discuss what
hashcash is because it's almost
identical to what bitcoin uses so hash
cash is the solution to the problem most
typically of either email spam or denial
of service attacks so it's basically the
solution to a problem of like a lot of
requests being sent basically and so the
names intention Hashcash write the names
intention is to literally convey the
idea that it uses hashing to introduce a
sort of quote-unquote charge for
something so the issues that with spam
filters write generally spam filters are
going to catch non-spam emails in their
nets and the result is loss of you know
legit emails so in a sense this is
similar to a you know seeing you know an
unavoidable amount of fraud as just
being you know part of the system right
so what Hashcash does is it introduces a
cpu cost like a processing cost to
engage something now generally again
this was mostly used in email or in DDoS
attacks so when an email is sent let's
say it must first solve a problem and
this costs a bit of CPU for the typical
user the difference is just absolutely
tiny and they probably don't even notice
that it's being done but to a spammer
however the difference is massively
compounded since uh you know spammer
might be able to natively send let's say
10,000 emails a minute now with hash
cash - becomes near impossible without
extremely high powered CPU right so by
that same token while the puzzle is
challenging and costly to the computer
that's being asked to solve the puzzle
the puzzle itself needs to also be very
quick to verify by the server right so
more on that in a minute here but
traditionally hash cache uses sha-1
where bitcoin uses sha-256 the only
reason for this is just shot chaw -
wasn't even out at the time when hash
cash was developed bitcoins
proof-of-work system also needs to allow
for a more fine-tuned version of hash
difficult
because Bitcoin actually modifies it
slightly and more on that a little bit
as well so we're hashcash the way
hashcash works is basically it's looking
for a number of X's and as you increase
the X's it goes in multiples of itself
so each time you you want to make it a
little bit more difficult you can't you
literally have to double the difficulty
so with Bitcoin difficulties there's a
built-in functionality that gauges how
quickly new blocks are being developed
and it will automatically make them more
difficult to develop if too many are
being made too quickly and so this is
how bitcoins coin count is you easily
projected over time and how Bitcoin as a
system manages its own inflation and
this is also why so many people call
Bitcoin deflationary since its
popularity is not identical to its
supply so no matter how many miners come
into play the supply will stay the same
and so this is why bitcoin is you know
called deflationary because popularity
has increased dramatically while and
really Bitcoin miners have increased
dramatically while supply is structured
so mining popularity goes up challenge
Rises and price rises because it's
costing people more money to mind
Bitcoin so let's discuss how Hashcash
actually works because the idea is
extremely simple yet super powerful and
I would even argue that the use for hash
cash is far more advanced than I think
most people are even realize
so hash cash works as follows you have a
server which presents a quote/unquote
challenge to the requesting computer the
requesting computer is then tasked with
taking that challenge and using it as a
starting point let's say and adding
characters to the end or appending them
to the end of the challenge string so
let's say the challenge string is a B Q
3 8 T the requesting computer is then
tasked with adding just random text like
numbers and letters to the end of this
and so let's say something like a BQ 380
Yui then the requesting computer
generates a cache of this
typically the hash hash cache uses sha-1
bitcoins using sha-256 so so with
Bitcoin a shot 256 hash is generated
with this random bit of text next to
solve the Challenger to say you've
solved this challenge the generated hash
with hash cash needs to start with X
number of zeros basically it's just a
matter of chance which increases as in
difficulty as the required number of
zeros increases so to solve the
challenge the best way to solve this
challenge is literally to do what's
called brute-force so here letters and
numbers are just randomly added to the
end of the string hashed and then
checked to see if if if they have the
required amount of zeros if not they
repeat the process and they do it over
and over and over until finally they've
they've achieved that the required
amount so so with hash cash it's in the
number of zeros so going from let's say
five zeroes to six zeros results in
double the work same thing if you wanted
to go from three to four that's double
the work now with Bitcoin is required
that there's a bit more granularity in
the ability to change so the difference
with Bitcoin is that the Bitcoin
protocol uses what are called fractional
bits so for example if you require four
hex zeros that would be 16 bits because
each hex digit is 4 bits
so aside from fractional bits Bitcoin
protocol also use it well one it uses
sha-256 rather than sha-1 but actually
also does what's called double sha-256
so what it does is takes a sha-256 hash
of a sha-256 hash of whatever you are
going to hash now the concept is really
the same and why it works is totally the
same but with fractional bits you're
basically going to um you're going from
looking for say you're looking for five
zeros at the beginning now you're
looking for a hash on that's valued at
less than 1/2 ^ you know however many
zeros are looking for so say you were
looking for five zeros in Bitcoin this
would be you're looking
perhaps one half literally one half to
the power of five in the end though it's
really just a very slight variant to
hashcash which is just simply there um
well the idea of hashcash or any proof
of work is to require a lot of CPU work
to find an answer to something that
takes a tiny fraction of that same power
to verify that it's correct so I will
break that down even further actually
but let's go ahead and finish up these
paragraphs so continuing on the paper
for a timestamp Network we implement the
proof of work by incrementing and notes
in the block Val or the block until a
value is found that gives the blocks
hash the required zero bits once the CPU
effort has been expanded to make it
satisfy the proof of work the block
can't be changed without redoing the
work as later blocks are chained after
it the work to change the block will
require redoing all of the blocks after
it okay so first off what is a notes
quite literally a nonce is a word that
is only used once in cryptography
basically announced is there to protect
against what I mentioned earlier are
called the replay attacks so a replay
attacks where an attacker will
retransmit you know good data with bad
data and basically good good good good
good bad and so what a nonce is usually
is just kind of arbitrary or it's random
and it's appended to the end of whatever
you intended to hash so if somebody
tries to reuse that same notes it's
going to result in failure because each
notes must be unique so this means that
each time you attempt something you've
used that notes it's it's done so if you
supply with the Bitcoin network
basically it's asking you for an answer
plus the notes that equals what you're
looking for
so with the Bitcoin network someone
wouldn't be able to take your answer to
that same question like if you try to
redo the blockchain you would be posed
the question and you wouldn't be able to
take all the previous blocks in and say
here's my answer
here's that notes that goes with that
answer because keep in mind when you
change the end and then you go to hash
it's going to it's going to reproduce a
completely new hash right as I showed
you guys in the abstract with like an
actual hashing function and showed you
guys that just even a tiny difference
makes a huge difference in the hash so
the notes is there to make sure that
every time someone like if someone
wanted to redo that block or fake that
block they would have to redo that work
and then any block after it they would
also have to completely redo that work
because they wouldn't be able to use the
same answer in the same notes because
the same notes would be rejected so the
only way to fake blocks that have
already been you know gone through would
be to redo all of the CPU work and this
is why is the chain grows it solidifies
the previous transactions and why three
confirmations on the network is thought
to be you know just absurd and that's
that's totally fine after we have three
were fine so if you did the math it
would cost literally billions of dollars
in computer equipment and about 400
million dollars per 10 minutes just to
fake the network okay so three
confirmations 1.2 billion in exhaustion
and 10 billion in you know computer
equipment that's pretty expensive Thanks
so continuing on in the paper the proof
of work also solves the problem of
determining representation in majority
decision-making if the majority were
based on one IP address one vote right
so if basically everyone got a vote per
IP address then it could be subverted by
anybody who was able to allocate many
IPS proof-of-work is essentially one CPU
one vote so you can think of it almost
in like gigahertz right CPUs are
measured in in megahertz or gigahertz so
the majority decision is represented by
the longest chain which has the greatest
proof-of-work effort invested in it
so if the majority of CPU power is
controlled by honest nodes they're
honest chain will grow the fastest and
outpace any competing chains to modify a
past block an attacker would have to
redo the proof-of-work
of the block and all the blocks after it
and then catch up and surpass the work
of all the honest nodes we will show
later that the probability of a slower
attacker catching up diminishes
exponentially as subsequent blocks are
added to compensate for increasing
hardware speed and varying interest in
running nodes over time the proof of
work difficulty is determined by a
moving average targeting an average
number of blocks per hour if they're
generated too fast the difficulty
increases now here the most important
point of this you know whole last thing
is basically the last two sentences
where Bitcoin inflation controls are
described so many people accuse Bitcoin
of being you know highly deflationary
and that this is so bad well the creator
of Bitcoin set into place rules that
Bitcoin would not go into any form of
hyperinflation even if Bitcoin became
extremely popular very fast or even in
the in the case of like computer
hardware becoming much more advanced
than anybody could ever predict so it's
really difficult I mean people can
predict somewhat how fast it can you
know the average computer might be in
ten years but it's still it's pretty
hard so instead it's actually not built
in new how much power is required it's
built in how many blocks can be achieved
per you know X amount of time so anyways
so if suddenly you know the number of
Bitcoin miners was to double or triple
the actual output of Bitcoin right in
the blocks you know mind would stay
exactly the same because the difficulty
of Bitcoin mining would increase to
match this so what ends up happening in
Bitcoin as Bitcoin difficulty goes up
CPU cost goes up and you know electric
cost and all that so either price will
come up to match it if demand is there
or miners won't be able to continue and
they will drop out and as they drop out
difficulty will fall this lowers costs
and justifies the mining this basically
insurer
that people will always be there not
only to mine and be incentivized to mine
but also be incentivized to be highly
efficient and competitive and so in all
of the parts to the Bitcoin protocol
this is the part that really just
astonishes me the most because it's just
plain brilliant because it's like forced
equilibrium that like even if like a
bunch of people started mining Bitcoin
the supply wouldn't come to much too
fast and just crush Bitcoin prices so
it's actually despite its volatility
it's actually not that risky as compared
to maybe some other things that you
might be able to invest in just purely
because it's it's like scheduled stuff
so anyway I find this just incredibly
brilliant because it acts it goes in you
know the amount of miners and then
people mining it's so it just ties right
in to the free market of Bitcoin and
it's just it's just incredible
to be honest but anyways now that I've
covered the concepts of proof of work I
wanted to go ahead and actually show you
guys a real example of proof of work and
I'm going to be doing that in the next
video so what I'm going to go ahead and
do in the next video is I'll actually
code from scratch a proof of work system
showing you guys how it actually works
and why it works and it'll be simple
enough for anybody to follow along if
you have no coding knowledge at all so
basically I won't do the whole notes
thing because that'll get really
confusing really quick and require like
a whole new function basically to
validate the notes and all this but
it'll be simple enough for anybody to
actually follow along and I can you know
show you the you know complexity and all
that as far as you know the number of
zeros and all of that so if you have no
coding knowledge at all you can still
follow along you don't even have to
program with me but if you wanted to you
could download Python 2 7 and follow
right along so I do encourage everybody
to watch it and I because I think it'll
drive home how proof of work actually
works and how it works very well so stay
tuned for that hopefully everybody is
still enjoying if you have any questions
or comments this one was there's a lot
of information being thrown at you and
possibly I skipped over something or
didn't really convey it very well so
feel free to leave any questions or
comments but
though as always thanks for watching
thanks for all the support of the
subscriptions until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>