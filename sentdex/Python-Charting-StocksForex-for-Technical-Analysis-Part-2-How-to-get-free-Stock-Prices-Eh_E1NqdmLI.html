<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Charting Stocks/Forex for Technical Analysis Part 2 - How to get free Stock Prices | Coder Coacher - Coaching Coders</title><meta content="Python Charting Stocks/Forex for Technical Analysis Part 2 - How to get free Stock Prices - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Charting Stocks/Forex for Technical Analysis Part 2 - How to get free Stock Prices</b></h2><h5 class="post__date">2013-08-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Eh_E1NqdmLI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody and welcome to part two
of our basic stock price acquisition
tutorial once you've installed Python if
you want to get to this window and you
don't know how go over to your Start bar
or whatever your bar is called and look
for idle just type in ideally if you're
on Windows and you'll click on that
program idle and you should see
something like this and what you're
gonna want to do is go to file new
window and then you can close out of
this window and you come over to this
new window and that should look a lot
like mine you could title it save it
whatever you want to do and you should
be able to follow along I will be going
pretty quick and not explaining how all
this stuff works if you don't understand
the Python programming language you can
either just follow along and copy
everything or you can learn about it if
you're really smart you could probably
just see it and understand what's going
on or you can learn more on my channel
so let's go ahead and get started the
two things that we're going to want to
import for this program one we're going
to be visiting a website so we're going
to need a URL Lib two and the other
thing we're going to do is we're going
to make a timer probably later on so if
you have say you want to do like 500
stocks you don't want to just pull those
back-to-back 500 in a row it's just good
practice especially when you're getting
free information from a website not to
just go crazy and overload the website
now this is Yahoo and I'm sure you can
do the 500 pull instantly if you really
wanted to but it's a good practice to
make a little bit of a timer so we're
going to do that now before we get into
our function we're going to define a
global variable and this is going to be
stuck to pull so I'm here and make a
string and this is going to be whatever
stock we want to pull information on and
in our case we're going to do all caps
AAPL for Apple so now let's go ahead and
define our function so define and then
we're going to call this function pull
data and it's going to have a parameter
and that parameter is going to be stock
right so like what's stock do we
whole data for and within here we're
going to have our try and accept loop so
it's good idea to do it and we're going
to track ception variable e print we
just want to say main loop that's where
it failed and then we want to print out
the string version of oops e yeah so we
know why we failed coming back up here
the try what we want to do is as you can
see here let me drag over the directory
so and here is our directory we have
database folder but then we've also got
you know this is my tutorial scripts
whatever you've got and wherever your
script is and we obviously have no file
yet so we need to you know define the
file name and then later on the file
will be created as needed but we're just
going to put the file in here you could
change the path if you wanted but for
the sake of keeping things very basic
we're not going to do with that right
now so the first thing we want to do is
we're just going to take the file line
and the file line is just going to be
kind of like a stringed out version of
strung out version of the stock so stock
which what we're going to be doing is in
this function when we call it I
shouldn't say pull data we're going to
throw this variable in it so it's going
to be pulling Apple but for the sake of
making this kind of like a future
forward script we're going to eventually
put multiple ones in here otherwise you
wouldn't even define a variable we would
have no parameter if the only one we
wanted was Apple but if you're not
understanding why we're doing it this
way I promise you we're not over
complicating it we're just doing it this
way because later on we'll pull multiple
stops so the file line will be stock so
that it'll be a string plus we want this
file just be a dot txt so that's the
file line next thing we want to define
is the URL that we want to visit so URL
to visit and that is going to equal and
it's maybe a string and I just type it
out with you guys I could copy and paste
it I'll be good so HTTP colon slash
slash chart API dot finance diyaa who
comm slash instrument
slash 1.0 slash and then we're going to
close this quotation so the quotes are
already closed but we're going to add
one more and then we're going to say
plus and then whatever that stock is so
again it'll be the string the strung out
version about AAPL and then on the other
side here we're going to continue on and
it's going to be another slash chart
data and then a semicolon type-4 type
and that's going to equal whoa and then
another semi colon and then range equals
one why for one year slash CSV now we
can put other stuff in here like you
could say like oh I want ten years but
then it won't be one day open high/low
close I think it's like three day open
high/low close or something like that
and so on so we're just going to go with
one year and then same thing like when
you do like ten days then it's you know
five-minute but as soon as you try to do
like ten months it's not going to be
five minutes so that depending on the
size you'll get a different granularity
anyway so you couldn't like set so you
couldn't do like 100 months all right
that won't work I mean it'll it'll work
but it'll give you kind of a poor
granularity so anyway one Y and then the
file type of CSV and then we want to
make sure we close off the parenthesis
so this is the full URL it's not fitting
on my windows kind of wanna make the
windows small enough so so that we can
see it easily in the video but I will
probably just copy and paste this link
and put it in the description just in
case you can follow so anyway continuing
on once we define that now we want to
define the way to visit this website so
next we want to find the source code so
how are we going to acquire that well
we're going to visit this URL and we're
going to view the source you know in
programming sense so then source code is
going to equal and it's URL Lib - dot
URL open and what we want to open we
want to open this URL -
is it and then we want to read it so
that's going to read all of the code
here and so it's going to give us that
code that we were looking at earlier um
then we want to split up this code so
we're in say split source and that's
going to equal a source code but split
and we want to split it by new line
which is denoted by a backslash n not
forward slash so now it's split up into
ever line so now let's do something with
those lines so we're going to say for
when I make for loop for each line in
split source we want to split up each
line now so we're going to say split
line let me pull it down just so you can
see here so what we're looking at is it
is here's the URL we'll be visiting and
as you can see there's data a new line
some more data a new lines more data and
we don't really want any of this stuff
yet but what we do want is this stuff
right one all of this data and so it
looks like it's pretty simple to do and
this data is split up by clearly commas
so that's how we're going to split it
and yeah well getting that and I'll
point out one more thing in a second so
each line in split source now we're
going to say split line equals each line
dots oh I can't tuck it all split and
then we want to split by a comma now the
next thing we want to do is as you can
see there is other stuff in here and
there's other stuff with comments like
this has a comma here and this has a
bunch of commas and but as we can see
this these this is what we want so we
kind of want to decide like okay what is
what is special or unique about this
line well if we split it by comma we see
we've got one two three four five six
pieces of data
if split by comma and nothing else here
has exactly six right well this looks
like it my let's see it's got one two
three four five six
what though so the only two things on
this page that have six pieces of data
is the data that we want and the data
that we don't want and it just so
happens the data that we don't want is
first of all there's no numbers at all
it's all characters but what we're going
to do is just say if it contains values
right if it contains the string values
we're going to take it so anyway that's
just my explanation of how we're going
to do this next part
so if lamb of split line equals six
exactly then we want to continue on if
values not in each line now we want to
do what we want to do so what we're
going to do here is going to say save
file equals open and what file we want
to open is that file from before right
so file line and we want to open it with
the intention to append because if you
open it with the intention to write
every time in this for loop it's going
to clear the file and write one line so
we don't want to do that we want to
append that file instead now again that
file doesn't exist yet but since if it
doesn't exist with the append function
it creates the file first so the file
will be created
same thing with right anyway append and
now what we want to do is we're going to
say we're going to define what we want
to write in this file so we're going to
say line two
right and that's going to be each campus
each line plus we want to go ahead and
write in a new line so what kind of
Orion or organizes our file for us just
a quick note though at the end of our
file we're going to have like this blank
line there's a couple of ways you can go
around having that happen but it's
really not a big deal I mean there's
like implying infinity ways to deal with
that so I'm not really too worried about
it I'll show you guys you know how we
work around that but anyway just a quick
warning
now save file dot write and what do we
right to that file while we want to
write lime - right right that's what we
just defined so now when we're all done
we want to get out of this for loop so
once that for loop completes we're going
to say print and what do we do we pull
and what did we pull stock whatever was
in this parameter and then we're going
to say print and we're going to sleep
and we're just going to sleep for like
five seconds so time die sleep is the
sleep functionality in five seconds and
then let's go ahead and pull this up
can't clean it up a little bit and
that's it we've defined our function now
we actually need to call the function so
we'll come down here we'll call pulled
data and what we're going to put in the
parameter to be stock is this stock to
pull so stock table and which is going
to reference Apple now you might be
thinking well like why don't we put you
know Apple in here and that's what I was
talking about earlier because eventually
what we're going to do is want to put
more stocks here because that's when it
really starts to save you time if you
only wanted one stock well you can do
this by hand and that won't be a problem
but what if you want like 50 stocks or
100 stocks well now you're going to want
to actually you know use a program to do
that for you so anyways that is the
entire script so let's save that and
hopefully everything checks out we'll
run the module and as you can see it
says pulled AAPL it's going to sleep for
5 seconds and then it should probably
cut out what you just did and so the
script is done so let's move this out of
the way and as we can see here is our
file now and if we edit it I've got
notepad plus plus which you could edit
it with notepad if you wanted you should
see that well here is indeed all of that
data and so now we can start doing
things with this data but before we do
that I'm actually going to be showing
you guys how to do multiple stocks so
anyway I'm going to include this video
here as always thanks for watching thank
you for your support your subscriptions
and stay tuned to the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>