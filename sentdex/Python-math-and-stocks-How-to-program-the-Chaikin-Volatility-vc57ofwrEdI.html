<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python math and stocks: How to program the Chaikin Volatility | Coder Coacher - Coaching Coders</title><meta content="Python math and stocks: How to program the Chaikin Volatility - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python math and stocks: How to program the Chaikin Volatility</b></h2><h5 class="post__date">2013-11-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vc57ofwrEdI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on guys welcome to the
second part of our shake and volatility
tutorial miniseries and our stock
indicators in mathematics series what
we're talking about today is the shaking
volatility and what we're gonna need for
this tutorial whoops is not this is if
you don't have the sample data go to the
link in the description for the sample
data also we want the sample code with
the empty slot for that bottom indicator
and that is going to be basically this
where it's just like an empty spot and
that code is down here again this link
is in the description so you can just
come here and copy and paste this code
so that's what I'm gonna go ahead and do
and you'll want this for the next video
but also what we're actually looking for
for the specific video is going to be
the exponential moving average
calculation so we'll want to go ahead
and take that with us and then we're
gonna want to go ahead and up here is
where we're going to define some stuff
if you've been following along in my
tutorial series as far as Python
charting star not charting stocks the
stock indicators series then you can use
that same top spot spot and if this is
your first one and you intend to
continue you might want to just like you
would just copy and paste this next
stuff that we're about to do over and
over
so anyway make sure you have the sample
data because that's what we're gonna be
hitting next let me go ahead and make
texts a bit bigger okay so we want to
import numpy numpy as MP import time and
then we're going to say sample data
equals open and this is the data that
you should save that's gonna be sample
data dot text with the intention to read
it read split data equal sample data dot
split by newline and this is just data
in the format from Yahoo's API so if you
also just want to use your own little
code that's connecting the Yahoo API if
you'd like followed so for my other two
you can do that as well so then it's
date closed P hi P lo P open P volume
and it has to be in that order so that's
the order that Yahoo spits it out equals
MP load text what text we want a little
split data
what's the delimiter of this text it is
a comma and then finally unpack equals
true so we can unpack it into these
variables as we want moving average we
are exponential moving average we've
already defined so that's good the other
thing that we're going to need for this
formula is percent change because if you
recall it's you know first it's high
minus low and it's an exponential moving
average of the high minus low then
finally it's a percent change of that
exponential moving average right so we
also need to define a percent change I
do have a tutorial video discussing the
surprisingly controversial percent
change formula so if you want to know
more about percent change you can you
can watch that tutorial luckily it's
only one line so if you don't care just
follow along with me otherwise you can
check out that tutorial if I recall if I
remember to I will put the link to that
also in the description so percent
change new masse old divided by the old
times 100 so you need to have the new
price and the old price old would be
star point
new will be current point and the
calculation of this is just going to be
return something and it's going to be
the float of the current point
- so float just converts it so if it's a
whole number it just gives it a decimal
point at the point zero so when we go to
use division it doesn't do you know
Python division nonsense with us so then
so new math the old so new current point
- the old start point and a star point
divided by the absolute value of star
points so you might see old divided by
the old but it's the absolute value of
the old again
if you want to know why I've done that
check the other
the actual tutorial video then that
whole operation is gonna be x 100 point
zero zero point zero zero and finally
what we're gonna go ahead and do is it's
got a beat well it doesn't have to be I
suppose but for the sake of being
correct we'll throw parentheses around
that operation so just returns you know
the data that we passed through that
percent change now let's go ahead and
actually begin the she shaken volatility
calculation so we're gonna say define
shaken ball calc and to do this it's
going to am a used and then periods ago
generally that'll be ten ten but since
you can't change it you will allow that
and then we're gonna have this this
function is going to return a shaking
volatility well right now it's empty
because we haven't populated it also
another empty array that we're gonna be
using heavily here's me a high minus low
so it's a high M low and that's gonna be
an empty array for now as well X will be
zero if you've been following my other
tutorials you probably guess where I'm
going
otherwise we're gonna say Y X is less
than the length of date could be any of
the values in this function or this
function these parameters here rikes
we're populating these variables with
then done by load txt function anyway uh
we're gonna say hm l for high minus low
equals that high P X X variable minus
low P X variable fancy-dancy stuff going
on high capital n low pen hmm X plus
equals one and we're done with that Wow
so now H and lower high minus low all
those values are now calculated so so
that's that now the next thing we want
to do
we're gonna say high and low e a equals
an exponential moving average of high
and low and then EMA use so here I am
low is what we've defined here that we
populated that array and then yeah we
may use is what we've defined up here
and asked it for also exponential moving
average I do have a tutorial on that so
if you want to know more about how this
is working you can check out that video
so and if I remember I'll put the link
in the description otherwise remind me
if you want me to put the link in the
description pretty quick responding to
comments so just from I mean I'll stuff
it in there next now that we populated
the high minus the low EMA what do we
have to do well we have to do the
percent change right but it's not a
simple percent change it's a moving
percent change right so we have to do
that so next we're going to say y equals
e ma used plus periods ago and so this
will be so we start at the point of this
Plus this so we can actually use all
valid data in the calculation so and if
it was ten ten it would be 10 plus 10 so
y equals 20 so then we're going to do a
similar thing that we've done before so
y y is less than the length of date and
again it could be any of these variables
they're all the same in this case it's
106 so while that is the case CBC for
shaking volatility calculation equals
percent change of what remember this is
a start point current point so the start
point would be the periods ago so let's
say we would be an H and lo EMA and then
Y minus periods ago so in theory it
would be like Y minus 10 let's say so if
the first one that we do is going to be
10 plus 10 so 20
I will equal 20 so this would be 20
minus 10 so this would be 10 to what why
and if Y is 20 so this would be high oh
nice little from the 10th to the 20th
part of that array and that's our oh
sorry I'm not thinking straight
that's what we want right so it's a so
if Y is e ma use plus periods ago so
it'd be why it was equal 20 so this
would be 10 it's like 20 minus 10 so
this would be the high minus low email a
period 10 and then so that's a starting
point the current point would just be
high and low e ma y
sorry that was to toe again doing all
these I usually do these videos like
right in the morning and I'm still like
drinking my coffee and waking up so
pretty slow shakin underscore volatility
gotta pens CBC so now CBS so we're now
filling out this alright ok and now we
just need to do y plus equals 1 and then
we're all done now we can actually
return date and then we want to do
basically the date array needs to be
kind of like our starting point of Y
right so we can literally just highlight
this copy this oops paste this make a
coal in there and just so it's totally
clear this is an array kind of idea I'm
going to do actually a list then finally
shaking volatility so it's going to
return a date the shaking volatility
both of these will be equal length and
the data will match up because of the
way we've done it now finally we're
gonna do
shaking ball cow 1010 and we haven't
actually done really anything let's go
ahead and just print shaken volatility
just so we can see it so we'll save and
run that just see if we had any like
major errors or any
like that and flip this around that on
it there we go okay so looks like valid
data points so now let's actually go
ahead and chart it up into matplotlib so
that's what we're going to be doing in
the next video so as always thanks for
watching things for the support in the
subscriptions and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>