<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Parse Twitter for Twitter Analysis: Part 4 | Coder Coacher - Coaching Coders</title><meta content="How to Parse Twitter for Twitter Analysis: Part 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Parse Twitter for Twitter Analysis: Part 4</b></h2><h5 class="post__date">2013-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/di5CSbmlR_8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome back to the Twitter
parsing tutorial series in this tutorial
we're covering how to parse Twitter and
then in this specific tutorial here
we're talking about how to make your
time between parsing a little bit more
intuitive or contingent on how much how
many new tweets were receiving right so
along with a lot of you know news
sources and Twitter and various topics
on Twitter as you can imagine at
different times of the day there's
different volumes of how many tweets
come in at per minute right especially
you know during the day like for example
on the topic that we're looking at it's
Obama the chances are like after
probably 11 p.m. Eastern or something
all the way until probably 4 a.m.
eastern there's very little chatter and
talk about Obama so he's kind of a waste
of your time by the same token you know
not every day is going to have the same
volume of Obama like say you've got bomb
I giving the state of the union address
or something like that chances are
there's gonna be a lot more tweets
containing Obama so we want to build
something that is a little more
contingent on the volume yet not
necessarily hard coded we want this this
program to react so what we had done is
made to really like probably the hot
highly reactive version of this
algorithm as possible it's just how
similar was the most recent update and
the more similar it was the longer the
wait time will be so we're taking that
number so if it was like fifty percent
similar it's going to be 0 point five
times 30 so it's going to wait 15
seconds before parsing again as opposed
to if it was you know hundred percent
similar it would wait a whole 30 seconds
so let's go ahead and expand this and
now what we're going to want to do is
the first thing that was kind of
problematic with this was the first run
with this script it parses immediately
again like back to back because the
first one
zero percent so that's 0 times the
number and then you're all most likely
to get a one hundred percent accuracy
you're very close and then you're going
to wait a long time span and it's going
to keep kind of whipsawing like that
until we can start to level out so the
best way to kind of compensate for this
just to go ahead and start with a house
similar value and but in our case we're
actually going to make an array and as I
said in the last video I mean you can
make this array 50 numbers you can make
it 10 numbers you can make it three
numbers you can even make it two numbers
but we decided we'll make it five
numbers now the less numbers that you
have the more reactive it's going to be
the more numbers you have the more
stable it's going to be in slow to
change now even five numbers you know
it's going to react within within a
minute or so it'll be back to you know
tracking the right speed whereas you
know if you put maybe 20 numbers it
might take a few minutes to catch up and
so it just really depends on what kind
of topic you think you're tracking and
how often you might worry about stuff
like that so anyway we're just going to
say we've got a list of a bunch of fifty
percent similarity now we're going to
come down here and what we're going to
want to do is once we have a how similar
value the next thing we're going to want
to do is well first of all let's see
since we're going to add a few more
values so let's change this to say this
selection is and then how Sam so it'll
be like this selection is X percent and
then we'll just say similar to the past
so that'll give us you know how similar
it was the next thing we want to do is
we want to append this similar value to
our array so the next thing we want to
do is go ahead and append it so we'll do
how sim a or a pen and we roll pen house
in to that now the next thing we have is
we want this raid not to grow otherwise
over time if our program runs for a
really long time as time goes on it's
going to be slower to react
so we want to keep this array the length
of five so what we're going to do is you
could say if the lane of how summer Rae
is greater than five remove the first or
the zeroth element but we already know
that every time the script runs through
first of all we're starting with five
it's going to add a sixth and we also
want to just go ahead and delete the
zeroth element so that's what we're
going to do next sorta see how same
array dot remove and we want to remove
house in array and we want to move the
zero the zero with element every time
because if we don't have a house in them
we're gonna have erred anyways so
there's no need for the if statement
there and also we're always one
nevermind anyways so the next thing we
want to do is we want to build something
that goes through this array and just
gives us the average of all of the
similarities because then later on we
use that similarity to be the multiplier
of time so we're going to use a quick
one line lambda function basically to do
this if you're not familiar with what
lambda is definitely check out I do have
a video it's i think that the title of
it is WTF is lambda so you could find
that i'll try to kind of explain it
through here but lambda is kind of a
tough one so definitely check out the
video if you're not familiar with lambda
so we're going to call our variable
weight multiplier I bet you can guess
what it's going to do now the next thing
we want to do is we use the reduce
function and the parameters here we're
going to use lambda x and y will be
lambdas parameters then we're going to
say x + y and then we're going to say we
want to apply this to the house am array
then once we're done we want to divide
that by the length of the house and
right right so because this is going to
do it to all the numbers in there and so
since we have five numbers we're going
to want to divide it by the length but
just in case it was ever the case that
it got bigger than five you know you
might lengths house in works but you
could also just hard code the five in
there
howson ray um so yeah that's it there
now let's just print a couple of things
for us we'll say print the current
current similarity ray just so we can
see it with our eyeballs will say house
right so you can print out that the next
thing we should print out is our our
current multiplier is and then wait
moult to flyer and then we'll just print
you know some closing pound signs the
next thing I guess we'll leave the
tweets here for now but eventually I
think we'll just delete the tweets from
appearing because really you'd probably
be saving them or you know in here a
tweet you'd probably you know processing
them or doing something what we'll get
to that probably what we'll do I think
what I'll probably do in the next video
is show you guys how to save it will
just save it to like a SQLite database
or something anyway continuing on let's
not get ahead of ourselves I believe
everything is good this is the same this
will be the same now the only thing
we're going to change it on here is
instead of how sim we're going to use
our weight multiplier that is being a
derived by pretty intense algorithm and
then instead of 30 let's do 45 probably
the perfect number would probably be 60
but I fear that we would have too many
zeros if we did 60 so we'll try out 45
and I think we're ready to run this bad
boy and find that the typos that I
inevitably typed let's run it over
business ok drag to the bottom current
similarity obviously 0 is compared to
anybody and so that tells us were
multipliers calculating correctly so
that's good and we'll wakes is going to
be 0 point four times of what we said 45
so that went through and it found the
selection is now 30
4.1 or whatever percent similar so
that's going to manipulate our
multiplier a little bit 20 point 36 way
when again and now you can see this this
selection got a lot more stuff and so
it's adding you know the selection was 0
point 0 95 so just almost missed a tweet
probably so this next one obviously went
a little bit quicker and then no doubt
because it went quicker it was forty-six
percent similar but if it if it was if
we were getting more tweets and we're
getting less similarity because of maybe
an explosion of tweets for example this
would have caught it so as you can see
that even this because of most likely
our only five deep array this is still
very highly reactive so it just really
depends what your goals are but anyway
so you can see now that we're you know
we're staying pretty good or similarity
hasn't been you know to to high we've
been mostly in the you know upper teens
and then low 30s for the most part of
similarity so yeah anyway so that's that
and so now so now we're actually you
know we built something to pull tweets
from Twitter but we still have obviously
a couple of issues let's see if I can
find one in this next here let's see
well for example &amp;amp; nbsp that's code here
we go I'm this is code for obviously an
apostrophe so we want to convert this
these code like what's next obviously
we're getting that so you know we could
we can run that either through and an
encoder of some sort or we could just it
looks like it's almost like that's the
only one that we're having problem with
is the apostrophe so really I would just
do a replace function in fact well we'll
get into that afterwards because then
we'll start saving it no I'm so so
here's a bad one anyway you guys get the
point we've done pretty good here's
another you know twenty eight percent of
accuracy was hoping I could find another
one here the other one was 27 just
barely saw it
and so anyways hopefully that's got you
guys off to a good start if Carson
Twitter as your goal like I was saying
before you can actually use this to
parse so far our logic really can be
used to even parse any RSS feed to
twitter feed anything any feed really
you can use this to parse so anyways
that's going to conclude this video as
always thanks for watching thank you for
your support your subscriptions and
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>