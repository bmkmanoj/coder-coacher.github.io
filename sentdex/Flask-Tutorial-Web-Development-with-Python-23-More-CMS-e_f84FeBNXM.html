<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Flask Tutorial Web Development with Python 23 - More CMS | Coder Coacher - Coaching Coders</title><meta content="Flask Tutorial Web Development with Python 23 - More CMS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Flask Tutorial Web Development with Python 23 - More CMS</b></h2><h5 class="post__date">2015-04-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/e_f84FeBNXM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody and welcome to part 23
of our practical flask web development
tutorial series in this video I'm going
to be talking about the actual dashboard
on Python per minute net how it works
how we do the percentage completed and
all that fun stuff
so let's go ahead and get started so
coming over to our dashboard you can
actually see the code for the dashboard
is relatively short all it's actually
doing and some of this code is not even
necessary but here at least for
dashboard first of all we do a try
except on accept writers editor okay and
this is just stringy exception again I
wouldn't really suggest you leave that
in any sort of this is for a development
I wouldn't suggest you leave string e
actually reporting on your real website
just keep that in mind
so anyways got trying except Ron except
Ron is up then we have the client name
Settings tracking and rank equals this
user information function so let's go
visit that user information so here is
our user information function slightly
longer um
spaced horribly pepp 8 for the win now
we got try the client name is just equal
to whatever our session username happens
to be if that works out guest is false
so we're going to try that except if we
can't figure that one out guest is just
true and client name will be guest so
any time we refer to the client we're
going to call them guests if not guest
what do we want to do well we're going
to need to connect to the database we're
going to select from users where that
username equals whatever the thwarted
version of the client name is now again
you have to be so careful with sequel
injection I'm by no means perfect but
here's a perfect example of where you
might consider well at this point right
because we go over here and we're saying
client name equals session username how
would they get a session username well
they have to login successfully right so
if they login successfully why do we
still need
or the client name because client name
is getting it from the successful login
which already thwarted the login or the
username right well yes and no because
session username it's it's possible to
fake a session it's possible to fake
cookies all that stuff is possible so
what someone could do is modify the
cookie to contain a sum a sequel
injection for each for the user name
even and especially when you're going to
post your code publicly like this code
is going to come out and people are
going to realize that ok so here in this
line he's doing you know getting this
username where's that coming from so I
can modify the session great so you have
to be really careful about that kind of
stuff and I wouldn't be too surprised if
by the time I post all this code up
someone's going to point out some
serious you know security flaw that's
just kind of what happens although I
still think open source is probably one
of the best security things you can do
because you find out what your problems
are rather than letting someone else
find them out secretly anyway so anyways
you want to thwart this because someone
could modify their session and their
cookies and all that and boom now you've
got an injection attempt right there so
anyways that's why we're thwarting it
then data equals C fetch one and then
here we've got some information here the
settings the user settings if they have
any right now they don't but if they did
there it is
tracking all the tutorials they've
completed ranked again I'm not you're
really using rank there's nothing
greater there's everyone has the same
account even myself included why would I
need an admin account when I have root
access
that's so anyway that and if if if they
are a guest right then we just return
this tracking settings all this stuff
zero at the end of that we return client
name now since we're here I guess we'll
talk about the update user tracking
function this function runs whenever the
user completes a web's web page so ooh I
apologize for any cuss words you might
see in my carpets yeah sometimes I get
relatively angry and write nasty words
so sorry about that this tutorial is for
ages 13 and up
maybe even 18 and up and some of my
comments off to remove them when I post
this code live anyway
uh so user tracking and let me actually
get rid of one of these lines I just saw
anyway coming back over so user tracking
does this I this was for debugging
purposes client name below that just
gets the e user information that we just
discussed up here then tracking nun
tracking equals completed that's from up
here then we make the connection so
update user tracking what it's going to
do is it's going to update tracking
based on the current tracking for that
user so this comes down here so right
here for example if completed not in
tracking tracking equals tracking plus
completed so that might be somewhat
confusing to you so we're going to pop
back down to the init are the actual
each pages description here in just a
second but then once we get that
completed information we update the
database to contain all of the new
tracking information and then at the end
of it we just we do all this one last
time to update those variables so coming
back down now to our let's just do a
page what what's happening here is let's
say this is basics this looks like you
know one of the basics tutorials like
let's just do this one so this is the
what will generate the tutorial page for
the basics tutorial the fourth one in
the series right so index of three
really means the fourth one what we do
at this point is we update the users
tracking and whatever way we need to and
then we also do completed percentages
equals topic completion percent all this
is doing is its comparing how many
completed topics does user have in
comparison to the total amount of topics
so well we can revisit this function
before we're done but what's happening
here is and actually here is when we
view this page we're allowing getting
post and update user tracking is going
to
reference that because update user
tracking if we go back to that define
update user tracking completed equals
this string version of request args
completed so that is what was the post
so if we come down here let's go to let
me just go to Python program net real
quick come here click on this and we go
to this while loop for loop and let's do
one more if statement you'll see that
the you this is the URL right and then
after that we've got this parameter this
yeah basic parameter and then the
parameter is completed equals and it
gives the URL of the last completed
tutorial so if we click that one more
time
we'll see completed equals if statements
Python three so do that and sure enough
completed equals if stain is Python
three so it takes that stores and goes
completed variable and then if completed
is in string topic dicta values so
obviously people might get the idea to
do another version of an injection so or
just screw around for whatever reason
but you can say completed equals rubber
Tubber are like that
obviously we don't want it to error okay
but we don't also we also don't really
want to do anything with that right so
if it's in that topic dick dot values
great if it is then what we're going to
do is either if tracking is none so
there's no tracking for whatever reason
this is actually old code that doesn't
that's not even possible anymore
else if completed is not already
existing in the tracking then we want to
go ahead and add it to it so tracking
legal tracking plus comma plus completed
this really actually not that necessary
it's just useful if you happen to look
at it with your eyes but it's actually
just one really long string orders
asking if the URL exists in that long
string so when we're done with that we
connected me updated so was the last
thing I want I came over what the other
thing was that I was going to show you
guys up let's go down to one of these
update user information Oh topic
completion percent so
the fine topic completion please so this
is how we calculate you know how much is
the user actually done so we come into
here client name bubble law Oh actually
I lied to you guys so the common we
actually do end up using the comma but
later on you could split by slash slash
or something and that would actually
that would work just as good so to get
the topic completion percent we pull the
user information which contains their
tracking we say tracking equals tracking
dot split by comma so we get all you
know each element of tracking if
tracking is none with just empty set
again that's not possible anymore we
were having some had problem with that
if you with it if it was like after a
lot like after you if you logged in
create an account you had no tracking I
forget where it was going wrong but it
was causing a huge problem so anyway and
then now let's see completed percentages
empty dict and then what we do is for
each topic in that topic dict
again this is why I have that topic dict
which topic dict if you forgotten
already is the result of loss now let's
go see is it this one no apparently I
don't even have it anymore I don't what
I did with that directory
topic dictating all we can reference
this one right here topic date comes
from the content management right
content topic Dixit returns topic dick
way at the bottom is too long for me to
scroll but anyway again you want to
change anything you just have to change
it in here and it's so much easier and
obviously if you wanted to add new
content you have to change in here and
then render I mean if you only add a one
page you can write the init code
yourself whoops
you can write in it code yourself and
then you can even do the HTML yourself
but if you added like a batch of
tutorials like for example this flask
tutorial series I'm going to just edit
content management add all of the titles
and the URLs that I want them to
correspond to and then I'll run both of
these and then I'll actually add in the
content when I'm done so anyway come
back over here just another example of
why the topic dict works out for me so
for each topic we basically are just
doing a simple we just keep adding one
and then we basically do a percentage
complete being
the int of the total complete over the
total that we convert it to an int just
simply to avoid really long decimals but
if you don't nevermind anyways we do
that so we don't have a bunch of
decimals and then what we do and this is
for each topic in topic dict
so what does that mean that's each of
like basics data manipulation all that
so it's the whole thing and then we just
have a big list of tracking basically so
that comes into here so completed
percentages is a dictionary the keys are
the topics the value is the percentage
complete at the end of that we return
completed percentages this is a try and
except therefore if we hit an exception
for whatever reason we're just saying
zero zero completed a zero point zero
return basically just that zero point
zero okay so so that way again if
something fails in here for whatever
reason it just you just don't get a
progress bar okay so it's not like a
detrimental thing and I'm trying to
think there's anything else really major
to show here I think I've shown
everything again this code by the time
you're viewing this should be available
either on Python program at MIT it'll
probably be on github and if you can't
find it or it doesn't exist let me know
and I'll put it up hopefully by this
last video I'll have everything up and
hosted on Python programming net so so
that's that if you have any questions or
comments feel free to let me know also
this I just want to say I think I
already brought it up before but you can
have multiple routes to get to the same
place okay and on well one of the things
I did was when I moved Python
programming net which was originally
WordPress to this website what I did was
in the 404 let's see let's just do
freaky I don't know what see if we can
get there yeah so this is your 404 error
here and what I go with what I did here
was I grabbed the URL so you can say
rule
Eagles request dot path and that gets
the
the URL that the user attempted to visit
and then what I went ahead and did is
saved that to just a little quick file
that I created for myself so every time
someone was served to 404 I logged that
error in that page so I was notified as
to what URLs were resulting in 404s
you can do this for any error you want
you can do it for every exception that's
ever triggered you can save it somewhere
if you wanted you can do it for 500
errors you can do it for any of the
errors that are actually hit right so a
lot of 500 errors will just result in a
500 error not your custom message but
certain 500s will result in your custom
message because some 500 errors are
literally your server is inaccessible
for whatever reason so obviously you
can't serve your code if that's the case
anyway so that's how it's handing the
404 is it's kind of a good idea I think
because if you've got dead links
somewhere that's just not good so I was
able to get 404 is for every four things
so again so when I go to like let's just
do dashboard dashboard like this these
are all well some of these were in a
sitemap so some of them are sitemap
things that I'm like working on so they
exist in the sitemap but you can tell
robots.txt just don't go to it but
that's I just decided leave it there but
in on WordPress I had a topics page
begin I'm not really sure why begin was
there I'm not sure when that came up but
it was a 404 then I've got Python
programming tutorials that's from
WordPress and then of course dashboard
which is the new version that's there so
I wanted all these links to go ahead and
just lead to dashboard and then as time
goes on you can obviously make new
functions for them and send them to
their own page uh so anyways that's that
this code yeah this code here might be a
key member if I cover this or not that
this was this is old code it actually
doesn't need to be there anymore
um well these for you actually is not
old code I need this here for my first
like ten users that signed up there was
a problem a problem there but otherwise
now this is not really necessary code so
if you were copying it you don't really
I can't imagine why anybody's directly
copying this website other than for mean
things huh so I guess that's it so I'll
probably add some more stuff as we go on
eventually I'd like to have like a
forgot my password or reset my password
functionality stuff like that luckily
this website I mean you might want to
keep your you keep your user name just
so you can track your progress and so
it's not like super detrimental if
anybody happens to lose their username
there's really nothing more to it but
you know you should have a forgot my
password in a reset password so maybe
something like that I'll add soon I
don't know but otherwise I mean that's
pretty much it I realized these last few
videos I just basically showed you what
I'm doing we didn't really code it as we
went I think this was the best way to do
it just simply because this is a highly
customized website straight from myself
and I didn't really want to do a
generalized website or use someone
else's module for general purposes I
wanted it to be strictly for my own uses
and I think that this is really what
makes flask powerful because you can
make your own back-end and really you
can do it it's not a lot of code right
it's not a lot of code it's not I mean
you could call it hacky but I don't
really even think it's that hacky
honestly it's most of its dynamic
automated it's easy and it gives me all
of the customization abilities that I
really wanted to have so the only
downside of course is if you had say if
you're running a news website and you've
got journalists right you're not going
to give them route X you're going to
give them server access right they need
to only be able to maybe post alright
it's not like that so it's obviously
depending on your your needs
things are going to change but if it's
just your personal website you already
have root access why would you need
anything different right the best ACP if
you ask me is right here I mean shoot
you go into here you go to your
templates your tutorials write your
pages whatever it's straight to server
no problem you can write all your code
here like it just makes sense or at
least it did to me but that's why I
didn't really want to spend too much
time because it makes sense to me but
maybe
on everyone else so I did just want to
show how I did it but not spend too long
or wasting too much time on on that in
the next tutorial we're going to be
talking about the cron tab which is
where we can schedule various tasks to
run this can either be scripts or actual
commands like you would enter them as if
you were entering them via the actual
shell so I'm going to stay tuned for
that as always thanks for watching
thanks for all the support and
subscriptions until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>