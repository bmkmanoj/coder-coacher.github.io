<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Charting Stocks/Forex for Technical Analysis Part 14 - Dynamic candlestick shadow color matplotlib | Coder Coacher - Coaching Coders</title><meta content="Charting Stocks/Forex for Technical Analysis Part 14 - Dynamic candlestick shadow color matplotlib - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Charting Stocks/Forex for Technical Analysis Part 14 - Dynamic candlestick shadow color matplotlib</b></h2><h5 class="post__date">2013-09-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Xje2By9D80Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so the first thing I'll show you is how
we could code it so that we could choose
the color every time right so what I
would do is it's this is just a function
right so if you're not familiar with
functions I have a tutorial on functions
but basically in the function this just
defined some variables now if you just
leave it empty it means this variable is
to be defined as in it must be defined
down here if you give it a ver or a
value it doesn't have to be defined it
like it has a default value and then if
the user defines it then it will have a
value but as you'll notice there is
nothing here for the v/line variable
that's defined later on just as a note
so so let's go ahead and do that so
let's add a variable and call it shadow
call for shadow color and let's define
the default variable as kay so so we
don't change anything in this script yet
then we'll come down here and we'll see
v-line and here's where it's given a
color so we can say color equals and
then we can just say shadow call oops
shadow call so now at that point once
we've done this when we run this script
if we don't define a shadow color like
let me move this over like we haven't
I'll shoot where is my candles well we
wait you can view these city lights of
Europe did I close out understand I
guess this is it here okay so let's come
in here candlestick right so it's a
anyway it's a variable that we can fill
so when we run it now it should be back
to black back to the boy right that's
how this song goes right nope anyway so
it's back to black now and I guess we
want to be right back into it
can't stay color down so now what we can
do is specify shadow shadow color equals
white so now we've edited the function
to say okay we can do white now and if
you look now it's white pretty awesome
right so now you can pick any color you
could have any background you can make
this color whatever you heck you want it
we can make it blue or something or or
another one I think C for Simon I think
will work that would might look
interesting yeah looks pretty lame on
this chart but kind of goes with the
fall key my kids anyway so you could do
all that kind of stuff if you want it
but what I'd rather show you is a much
better way to display it in a way that a
lot of people do display their data so
let's go ahead and delete this shadow
color variable and revisit or finance
soft key why for some epic news gosh
where is it
here it is okay so sometimes I like
having a bunch of monitors it's like
having a huge desk right then you get it
really messy and you lose where you're
like just placed up like a piece of
paper quote-unquote Hey okay anyway so
now what if what you know we don't we
already got rid of this and everything
so so if you if you're happy with that
shadow color variable go for it
but I think what I'm gonna show you this
time is a little superior and just make
sure to chart one step cooler so if we
scroll down here what I want to know is
so you've already defined color up and
color down right or it's given default
values but but we change those right
because you can change the default but
down here we'll see okay so when are
these color winds color up and color
down used so we come over here and we
see well if the close is greater than
open then we use color up otherwise we
use color down so what if then what we
could do for this V line because in
every cue light it's for for cue in
quotes so every time this is being
considered right because every every
plot that
being considered as either color up or
color down so we know that this this is
what's choosing the color every time for
each bit of data so awesome so what
we'll do is take the line so I should
have told you guys this before we
started editing finance dot py I'm
pretty comfortable editing it but if
you're not comfortable editing these
core files you should copy them right
like make it a backup of the file just
in case you get like utterly lost and
stuff isn't working anymore you can just
restore the old file and try again or
just throw up your hand and say f it I'm
done I'll just have this basic white
line or something like that right so
anyway just don't forget to do that
sometimes otherwise I mean if you forget
to do it you just delete matplotlib and
reinstall it anyway so what I'm going to
go ahead and do is first of all we want
to we're just going to comment this out
so it's still here in case we want to
like revert back to this later but we're
going to take this veal I'm definition
and we're gonna have to V line
definitions we're gonna have one if
closed is higher than open and then
we're gonna have one if and actually
there's one and then one otherwise so
now instead of color equal shadow color
let's say color equals color up right
and then color equals color down and
we'll save that and let's move this over
bring back our candlestick chart and run
it and now we are given a much more
attractive candlestick chart if you
can't see it yet now you can basically
now the shadow is the same color as the
entire candlestick so obviously in this
case we had a lot of dropping it opened
at the same price and it dropped even
further and then you know closes or
closes here in the low is here so it it
just kind of works right that the shadow
is the same color as the actual light
candlestick so
speak and you'll probably see a lot of
charts that do it this way and I can
tell you I don't see very many charts
that just have like this ugly white line
going through them you know saying it's
a so this is definitely the preferred
method in my opinion and I guess what
I'll do is let me close out of this
because that's pretty much it
where's my finance that py edit info
let's see right so this is the file
again up here you don't really you could
put whatever egg you wanted in here as
long as you assigned it a variable it
doesn't have to be defined down here but
if you don't assign it or if you don't
assign it a value like you don't have
signup value to the variable it must be
defined right so like axis you have to
define the axis that candlestick is you
know being used on right you have to
give it data right but you don't have to
give it a width you don't have to give
it colors and all this kind of stuff
like it'll do that automatically for you
but it can't just automatically provide
you with data right anyway so anyway
this was the code we just basically copy
and paste of the V line here and a V
line here and then the color is the
color of the entire candle as always
thank you for watching thank you for
your support in your subscriptions they
really do help and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>