<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Parse Twitter for Twitter Analysis: Part 1 | Coder Coacher - Coaching Coders</title><meta content="How to Parse Twitter for Twitter Analysis: Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Parse Twitter for Twitter Analysis: Part 1</b></h2><h5 class="post__date">2013-07-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-_26vpe-PGo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to my tutorial on how
to parse Twitter before we get into the
actual code there's a few things I want
to mention the first thing is Twitter
offers an API for developers if you
haven't checked that out definitely go
check it out
the downside to it of course is they
only offer one percent at random of the
full Twitter firehose and the fire hose
means 100% of Twitter data but still
worth checking out - there are official
data resellers there are only three of
them and they are the first one is nip
Jian IP this is the first official data
reseller for Twitter they offer you 10%
of the firehose as well as historical
data for a price starting at $500 a
month but heed the warning that it is
starting at just like car it goes up
significantly from there so there's that
there's also data sift they sell you the
data and they sell it to you by volume
right so nip is $500 a month for 10%
data sift is going to be 10 cents per
Mille of tweets so for every thousand
tweets it's 10 cents or for 10,000
tweets it's $1 so that's how that's
going to work and then also there's
Topsy I believe it's access to the
entire firehose and they also do some of
the processing for you and this is
starting at $12,000 a year so twice the
cost of nip yet I believe they're giving
you way more access to data so anyways
those are the resellers and the final
point I would like to make is this video
is purely for educational use only I'm
not responsible for how you use this
code or any problems that might arise if
you do use this code please keep in mind
that I don't believe you have the legal
right to parse Twitter and display the
actual data that you're parsing so if
you're parsing a tweet you can't make an
application that displays that tweet
somewhere else
I don't think you own the rights to that
data I'm not positive I'm not
or so I'm not going to speak on that
just know that whatever you plan to do
with this you're responsible for looking
up the legalities of it on your own with
that let's get started so anyway if we
come over here to Twitter here is
Twitter now you aren't going to need an
account for what we're about to do I'm
just going to be showing you and
normally if you come to Twitter they
don't give you like a search or anything
like that I'm not really sure why but
that's the way that they do it but what
we can do is we could just use a link
and let's just use a link real quick
unless just Twitter comm slash search
let's see how that works out yep so we
get this little search bar there's also
a search here let's say we want to
search Obama what does that look like
well that's not going to work hold on
let's do a bomb on Craigslist spell and
all that okay so you're given this
result page now generally depending on
what kind of a website that you're
attempting to parse usually if it has
any sort of parameters if you look at
the URL you'll find the parameters
really quick here we can see Q probably
short for query in there most likely to
be PHP or something like that this is
obviously what we queried and then
another variable here and this is the
VIP and it means another variable and
then this is SRC it's whatever they call
their variable I'm going to go ahead and
assume this means source equals and this
is the answer to that variable typ D I'm
going to also make another assumption
that this stands for typed as in the
user literally typed in Obama so like if
you use their search bar it's going to
throw that in as opposed to you could
just do Bhama and no longer is it types
you know and you're still getting the
same results but I'm sure that they're
switching something up and we're just
unbeknownst to it at the moment so
anyway there's that the next thing that
we'll notice right away is some of these
tweets normally you're going to land on
this page it's going to be top tweets
right so you're getting tweets this
guy's from 8 hours ago 26 minutes 42
minutes then you're starting to get into
the 1 hours and then slowly getting into
the 2
ours is you continue scrolling more and
more but even these this is not the full
this is definitely not the full thing
like if we keep scrolling where we're
seeing what I believe to be about 1% of
the data but it there is a way to get
more than that 1% and here is how to do
it so let's say we want to do Obama what
what they're doing is is is they're
going to treat you differently depending
on how you're using their site so if
you're using it kind of like a user
might they're going to treat you a
little bit differently and they do and
so like if we say let's instead of
saying and source type let's say and
source equals hash and this means we
clicked on a symbol like pound Obama
hashtag Obama let's hit enter here let's
see what we get
again we're greeted with this top post
here from 9 hours ago then we got the 27
minute 43 minute 1 hour and so on but if
we click all again we see that we arrive
at this page that says 17 seconds 19
seconds 20 seconds and so on and if we
continue to refresh this page now we're
again getting that same stuff so what
has changed well it's this real-time
that changed so we want to put real-time
into the link okay so it looks like at
the end of the day this is the link that
we really want to start parsing so let's
take this linker and we'll just copy and
paste it let's head over to our code now
and we're going to need a few imports
the first import that I'm going to go
ahead import is regular expressions so
import or e from re we want to import
sub because we're going to be using that
another thing we want to use oh really
we're going to import time we don't need
it I'm just going to use it for a timer
eventually you will need it when we
expand the program but we don't need it
just yet but we're going to import I
guess we don't really need date/time for
now we're going to import cookie lib and
from cook
we're going to import cookie jar and
then from URL to we're going to import
URL open and whoops we didn't import URL
live so it's off import URL Lib - and
then from there we're going to import
URL open now let's get into establishing
our browser and our cookie jar even
though when the website doesn't like
cookies I don't think that Twitter
storing any cookies especially if you're
not logging in it's always good to just
have the option there they decide to so
we're going to go ahead and specify that
cookie jar we're going to say opener
equals URL Lib to the build on our score
opener and we're going to open it with
URL Lib - HTTP cookie processor and for
this we're going to use what we just
defined as CGA if I'm going too fast for
you guys I do have another tutorial I
think so my sentiment analysis that I go
more into detail about it's like the
basic sentiment analysis tutorials I go
into more detail about how all this
stuff's working I don't really want to
keep repeating myself every time I have
like something visiting a webpage but
anyway now we're going to add the
headers reason you're adding headers is
because naturally the header of this I
think is like URL Lib Python and then
your Python version so when a website
doesn't want something parsing them
they'll just block anybody with that
breaks it's clearly a robot just so they
just automatically block those things
especially if their website that offers
an API so it's always a good idea to
change that so now we've specified our
opener now the next thing we want to do
just to make this a little bit dynamic
I'm just going to say keyword we're
going to say our keyword is Obama in
this case and then starting link is the
beginning link of what we want and we've
kind of already done this the beginning
right before we need to Obama's this
right because we're going to make this
be dynamic and then we'll add add source
equals hash at the end of it so what
the starting link and I never took the
starting line so let me grab it one more
time
copy it and pop over here this is our
starting link HTTP Twitter calm and so
on now let's begin coding our actual
program when we add some indents here so
okay there's some lines so now we're
going to make our main loop basically
it's very basic to do what we're about
to do so we're going to say to prime
name and I always do try and accept
within my loops except and we're going
to accept the exception we're going to
call that if there is one and then we
want to print the string doubt version
II and then if we do have an exceptional
let's go ahead and sleep for whenever we
have a loop that will just segment aired
and main try so we know we're weird now
within our try loop what we're going to
want to do is we're going to say source
code equals opener dot opener dot okay
and in fact since this will always stay
the same let's actually I will get rid
of starting like when I'm going to use
that probably so we're going to take
this and we'll throw it right in here
then what we're going to say plus
keyword plus and source equals hash and
then we're going to add marine so that's
going to spit out the source code of
this page so what did we not we didn't
close off something oh we didn't close
off this I did yeah so is that all and
now yes okay so now that we're back the
next thing that we're going to want to
do is split up the source code at the
moment we don't know how we're going to
split it so let's check that out so what
we're going to go ahead and do is let's
just do a quick quick print let's just
print out our source code
okay so we'll save that we'll run it pop
on over here
wait for it oh you know what we didn't
call Maine we might have been sitting
for a while all right or not
wait for it there we go all right so now
we have the source code
let us yes a huge mess okay so we're
just going to control a copy and so put
up a notepads probably the best way to
go about this so we come over here
paste all this nonsense into a notepad
file next thing that might be helpful
for us is if we can go quickly refresh
and let's look for something that's
probably in here wake up America
right so let's see if we can find that
tweet wake up America wake up America
wake up how about that
can't find wake up damn it oh all right
let's try let's see how long ago was
that wake up America probably too too
close Twitter I mean Obama gets a ton so
let's try Haas hospitals hospital let's
see if this is the right one hospital -
okay yeah there we go
okay so this is one of them hospital -
Obama's administration hey throw us a
bone here blah blah blah blah okay
clearly this is a tweet right if we look
right here we can see ok this is
paragraph class J s - tweet text space
tweet text close quotes close tag bubble
bubble the law and looks like tweet goes
all the way to this closing paragraph
tag obviously within here we have a
whole bunch of chunk that we don't
really want just yet but we'll get to
that but first thing we want to do is
definitely split by this this paragraph
of you know this stuff so with that
let's go ahead and we'll save that or
just leave this notepad plus plus open
we'll close out our shell here and let's
come back over here and the next thing
we want to do is okay now we know this
let's start splitting up the source code
the next thing we want to do is let's
say let's just call
split source equals and we're going to
do re dot find all we want to create an
array is what this is going to do and
we're use a regular expression for this
and within our regular expression we
want to use that that paragraph tag that
specific tag and that was this I'm
literally copying and pasting it from
the source code that was the beginning
right so we want that to be the
beginning of the regular expression and
then I'm the way trailer expressions
work if you're not familiar with regular
expressions I also have a tutorial upon
those oh my good news so you can either
check those out or just continue
following along so what we're going to
be looking for now is you put in
parentheses what we want we want a
period for any character besides newline
all that fun stuff followed by and we
want zero more repetitions of that and
then we want one or I mean zero or one
repetitions of that if that doesn't make
any sense to you it's just a regular
expression pattern that's going to work
for this scenario and again if you want
to learn more about regular expressions
I happen to have a regular expression
tutorial so I'm not going to talk too
much on that so then we so basically we
have that and then we have another
closing paragraph tag like we want to
pull all of that kind of stuff in
between these the specific paragraph
class and anything within this specific
paragraph has a class rather so once
we've done that the next thing we want
to say is for we're going to create a
for loop for this and we're going to say
for item in split source we want to
print item so let's see where we stand
and then I'm also going to add a quick
little sleeper here otherwise we'll just
print like a thousand of these items I
just want to see one item so we shall
wait
oops hold on let me just go back over
here first of all we aired in the main
try find all okay yeah okay see what
we've done
um the first thing we okay first of all
we want to stop printing out the source
code I don't want to do that anymore and
we didn't
here's our regular expression we just
like close it off takes two commands or
two parameters rather and the second
parameter is where you want to apply
this regular expression in this case we
want to apply its source code so again
save it we close off this so hopefully
we'll just print a single tweet see okay
so ant tie and then strong tag Obama and
it's using the strong tag because that's
what we're searching for right and so
later on you can use that to you know
find it but also if you already know
what your key word is you don't really
need those strong tags and we're going
I'm going to be showing you how to get
rid of that stuff in a bit but anyway
this is the the first tweet that we've
got so close out of that so that was a
success
so now just out of curiosity the answer
is 20 but just to show you and if you
want to make sure you're doing it right
a plant print the length of split source
so you know how many tweets we even have
so we'll pop back over here after we've
run it yeah so every time you visit this
URL it's going to display the most
recent 20 tweets and eventually this is
going to be really important because
you're not you're going to want to
maximize efficiency especially if you're
parsing a website like Twitter so anyway
this is working out pretty well for us
we're now parsing individual tweets
obviously remembering about help again
obviously the tweets are still really
really messy we've got you know all this
stuff and the spans and the titles all
this junk really but that's how you're
in a parse individual tweet so I'm going
to COFF the video Here I am going to
continue with a bit of a mini-series on
you know first we'll clean this up and
then I'll show you some other really
cool stuff for parsing Twitter and but
these this bare-bones bear basics and so
yeah as always thanks for watching stay
tuned to more videos thank you for your
support your subscriptions and until
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>