<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Graphing OHLC Candlestick - Tkinter tutorial Python 3.4 part 26 | Coder Coacher - Coaching Coders</title><meta content="Graphing OHLC Candlestick - Tkinter tutorial Python 3.4 part 26 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Graphing OHLC Candlestick - Tkinter tutorial Python 3.4 part 26</b></h2><h5 class="post__date">2014-12-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1O-ADMQUAZQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to
another tkinter tutorial video part of
our mega series making an actual trading
application for Bitcoin so in this video
what we're gonna be doing is actually
generating this candlestick graph the
basic one we don't actually have the
indicators or anything like that yet but
we're gonna be working on those in the
next few videos my dog just decided to
barge it and sorry about that anyway
let's go ahead and get started so we are
in our animate function we just wrote a
bunch of this code except exception ize
bubble blah so extra enter delete
deletes and you should be in line with
this elf here now
what we're going to do is we're going to
do sea sticks for kl6
and sea sticks is gonna equal candle
stick underscore ohlc and this will be
first of all what's subplot do you want
to plot that too we want to plot them in
subplot so it'll be just a then the data
itself and this is OLC and then it's
dates open high/low close
so you would say something like this
with a panda's data frame so ohlc
and then you would say inside of that a
list so it's a list within this data
frame and the first data would be MPL
dates comma then we will have open comma
pi comma lo comma close and then outside
of these brackets you do period values
so it's just the values of each of these
little bits now we're gonna say width
this is the width of the candlestick so
if you have a lot of data you want the
candlestick to be very narrow otherwise
they're gonna run over each other and if
you have very little data you want the
sticks to be kind of
so you can actually see them you know so
width equals candle wit which we set
long ago and then you can specify color
up and color down so these are like the
colors of the candlestick so if price
goes up for that candlestick the color
will be green in general and then if the
price goes down the color will be red
now we're using light and dark so we're
just gonna say color up equals light
color that's actually camel case so
light color like that and then color
down equals dark color so kind of a long
line but that's it so those are that's
how we actually plot our candlesticks
now any good graph has labels so we're
gonna do a dot set underscore Y label
and that is going to be price next up we
have a special question for hobbies and
slope is quite the troublemaker we're
gonna say if exchange equals will be a
to dot fill underscore between we're
gonna say volume data MPL MPO dates and
then starting point is zero and and oh
you know that we're making a mistake
here who OB does not have volume data
that is why we actually asked if
exchange does not equal who will be a to
dot fill between volume data and pl
dates between the zero because we should
not have negative volume then volume
data volume and then a face color face
color equals dark color and that is
going to be our
volume data and then we're gonna do a to
set underscore why label if we have it
and we're gonna set that as volume
that's if the exchange is not equal will
be and we've already predefined the a
two subplot so we don't really need to
throw anything else at this program so
now we're going to say a dot X axes dot
set underscore major underscore locator
and we're going to use M ticker dot max
n locator and we're just going to set
that to three for now we can change that
later on but three is good enough and
then we're gonna do the exact same thing
here only we're going to format our
dates so x-axis set underscore major
underscore formatter and that will be M
dates that date formatter and just like
before percent year - % m - percent day
and then we'll do space hours : % m and
we don't really need seconds this is not
tick data so there's really no point
minutes is even a little bit pushing it
but that's okay so now we're gonna do
PLT dot set P and then we're gonna say a
dot get X tick labels and then we're
gonna say visible equals false
and in theory that really needs to only
be the case if the exchange is not will
be otherwise we shouldn't be doing that
let's probably a glitch in my main code
but we'll see so then if the top
indicator does not equal none none not
known
PLT dot set P and then basically we
we're just deleting X labels here so
paste that stop indicator shouldn't be a
zero right now we're gonna do we'll just
copy this copy paste instead of top
it'll be bottom and instead of a two or
a zero it would be a two right yeah so a
zero is the actual top indicator and
we're removing its date but in this case
we're removing the date from volume and
we're leaving the dates on the bottom
indicator now we use X just I don't
think we're really actually well yeah I
guess we do uh-huh so never mind so
we're gonna use X x equals the length of
OLC and then we just pick a random
variable it doesn't really matter it's
the length of that minus one and this is
the data point right that'll be the most
recent data point in a list okay so the
length is it starts from one right and a
list starts at zero so that's why we do
negative one so that will be X will be
the value or X will be the elements ID
of the last element in the list so we
can get last price basically that's the
whole point of why we're doing that so
now we just asked if data pace equals
one D for example if that's the case
then we're gonna say our title equals
exchange that's the pretty exchange name
plus quotes space one-day data with
space plus oops end quotes plus
resample size plus quotes space bars and
then we're doing a new line so backslash
n that literally makes a new line on the
screen last price : then plus the string
version of ohlc closed with the element
of X and there it is people fancy so now
we're gonna do this copy and then paste
and paste so we've got 1 day 3 day 7 day
and eventually we'll add more and we'll
have to make this a little more dynamic
but that's okay so then we just need to
comment or edit that and that no problem
even if you did like 30 day you could
probably get away with that but then
anything greater you need to change this
text as well so we'll have to think
about the best way to incorporate that
as we move on but cool so enter enter
coming down if top indicator does not
equal none we need to throw the title on
top of it so we go eh-oh dot set
underscore title and we set the title to
what we just defined this title up here
and that's if top indicator is not none
but otherwise else
the the uppermost graph is going to be
the main graph so it would be just a dot
set title title ok so so that's that
then we will say we'll just we just
print here new graph we don't really
it's just to alert us that it's been
updated new graph and then dat counter
equals zero
and we have all this extra space let's
just pick up all this space failed in
the non-tech enemy that's fine and then
and if if all of that occurs we will say
dat counter equals 9000 so immediately
try to reset and then if we scroll up to
the very top of our animate function
that I'm now lost you'll see actually we
didn't if chart load I'm trying to think
of where our dad counter is supposed to
show itself
I suppose that counter is just let's see
let me count this now so that would be
here if dat counter is greater than
twelve and that is I just need to count
it so one two three four so now at the
very very bottom here after the
exception we have one two three four
else and then dat counter plus equals
one so that continues updating it and
when the graph updates that counter is
reset to zero and it will only read
eight that graph when dat counter is
greater than twelve wherever that is
here okay so now let me come down here
and go to the very bottom and where it
says an e equals animation change the
interval to 2000 the exchanges mostly
update their API information every 2000s
2000 seconds so we'll do that so
basically what we're saying is any any
graph that is not any graph that is not
a tick data graph update there 24
seconds right because we're doing 12 12
times 2 24 24 seconds and so later on we
can actually instead of using 12 we can
allow the user to set that so they can
update as frequently as every 2 seconds
and we can even change that as well
every 2 seconds if they want or every
minute 5 minutes hour whatever they want
and that's gonna be useful mostly for
automated trading otherwise it really
just doesn't matter cuz you're not gonna
expect you're not gonna spend any money
so it doesn't matter so let's get safe
and run this it has been a lot of code
since we've actually ran the the code
that we've been writing so I imagined we
would get an error but I guess that code
that we've written hasn't actually shown
itself yet so let's pick one day
data frame and it I cannot believe it
but it looks like we graphed it fabulous
okay so let's try a day then let's
really push it to the limit guys okay so
we've got the data updating we got a
pretty cool graph we've got last price
we've got a great open high/low close
we don't have top indicators the main
indicators in theory we just wrote we
did write but let's try it no failed
unsupported operand not slow down there
son I wish I knew
it's obviously trying to add an integer
in a string
let me see if I can solve this before we
balance out of this video
so that is wow that was too much
scrolling my finger hurts okay right
okay so so what we've done here is we
basically said the string version of
each ma 1 + s ma that was why I was
getting angry with us so add one more to
middle indicator and that's middle
indicator you know in our animation
function basically so if middle
indicator does not equal one add that
there and then add that again there and
that should do it
let's oh oh wait wait wait and this is
closing it off so we can just delete
that and let's try it out hmm so that
was with should have been both EMA's and
SMA so let's say we want a three day
time frame and let's do a middle
indicator here SMA and there's our SMA
so we've got man indicator us at EMA of
10 as well just because we're ballers so
now we have the SMA here we've got the
EMA is in blue and we're all set I think
so that's our graph graph page this
should be like dashboard we have like a
lot of updates to make here but
hopefully you're now kind of seeing this
application sort of coming them coming
together we don't have bottom indicators
and we don't have top indicator yet but
that's what we're gonna be doing in the
next videos but we should be able to I
believe even change like all of this
data so like we could pick 30-minute
bars hopefully so that updates the bars
we can even pick 3 hour bars this is
three day so this is a good time to
point out as well like this the
thickness of these bars that's what was
candlestick width five minute you can
see they're significantly thinner bars
now and all that's much higher
granularity data so anyways that's it
for this tutorial
hopefully that was somewhat reward
after quite a few videos of code and now
we've got a pretty sexy chart coming
along here we just need to add the top
and bottom indicators and we're all set
really then we needed any trading and
all of that so that'll be fun
but anyways hope you guys are enjoying
if you have any questions or comments
please feel free to leave them below
otherwise as always thanks for watching
thanks for all the support the
subscriptions and the donations and
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>