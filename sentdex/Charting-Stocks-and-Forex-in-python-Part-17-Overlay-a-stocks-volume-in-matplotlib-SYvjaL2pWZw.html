<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Charting Stocks and Forex in python Part 17 - Overlay a stock's volume in matplotlib | Coder Coacher - Coaching Coders</title><meta content="Charting Stocks and Forex in python Part 17 - Overlay a stock's volume in matplotlib - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Charting Stocks and Forex in python Part 17 - Overlay a stock's volume in matplotlib</b></h2><h5 class="post__date">2013-09-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SYvjaL2pWZw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody and welcome to the 17th
financial charting tutorial with Python
and matplotlib where we left off we
added this simple moving average or two
simple moving average lines of 12 and 26
I'm probably a little bit will change
those to something more like 20 and 200
just because this is a very long term
chart but in this video and probably the
next video we're going to be working on
adding the relative strength index to
our figure here the other thing I think
we'll do is move volume and overlay
volume onto the stock price chart and it
shouldn't be too big of an issue because
we will just set the Alpha here low
enough so we can actually see through it
to pricing data if it is overlapping so
that's what we're going to do and so
yeah let's get started so close out of
this and the first thing we really need
to do is come down to the axes and we
need to make room for this new chart so
the first thing we want to do is inside
you know ax 1 we're going to start this
at 1 0 not 0 0 and then the volume chart
for now let's just comment out volume so
let's do quote then again here and I
think that I'll cover x2 so let's make
sure that we you know set this up right
ok cool so now we've you know got rid of
volume and now we've got a spot up here
where we're going to put the RSI chart
and we also don't have dates yet on this
chart but that's ok we'll probably add
them but yeah we'll get to that in a
second so now what we want to do is and
I guess we should overlay volume first
so let's just I guess we'll go right
under this and do it eventually we will
just delete all of this but we'll leave
it here because we probably can copy and
paste some of it so I'm gonna call this
ax 1 V 4 X 1 volume
and it's gonna share the axis so
basically what you do is a x1 dot twin X
and that's it so it just shares that
axis so now what we want to do let's see
I think what we'll do we can take all of
this and we'll take that - okay we'll
just copy that paste it and then we need
to change you know the starting name so
we'll do that and just go through a page
and paste okay so now we've got that we
don't really need a grid on it or don't
want to grid on its that's good I think
we're all set let's grab this and see
how it looks the the data might be too
big
that's my only fear but let's graph and
see what happens yes and so it's a
little large but it's not the end of the
world you know you can change the size
I'll show you guys how to change the
size it looks cool but yeah sometimes it
can get annoying if it's over
overlapping stuff but as you can see you
know we don't really have any tick
parameters there X we got rid of them
and all that kind of stuff and really
volume you're really looking for like a
change of direction or amplitude you
don't really care very much about like
the actual digit but anyway you can see
it's overlapping here but if we zoom in
you know you can still see the lines so
it just kind of works out so yeah so now
we've got the volume overlaying now I
kind of think it's a little big on the
size wise like it's taking up a lot of
this chart but it does look cool so I
don't really know you can just kind of
decide how you want to do that and the
way that you can kind of dictate how
much space it's gonna take you can do
something like this so X 1 V dot set
underscore Y limit now obviously the
lowest it can be a zero and then the
highest it can be you can set this
number here now let me show you what
happens so let's say we use a 5
we'll say that we'll run it and now you
can see that it's much smaller right
and then let's say we do a - okay say
that we'll run it and you'll see that
it's actually bigger because we set a
smaller number and now what it's doing
is like think of it as the y-axis so
like if the y-axis goes to a hundred and
the highest data set is 50 it will take
up you know half of the chart if the
axis goes to two hundred and it's 50
it's only going to take up a quarter of
the chart you understand so like the
bigger that number the smaller this data
set will be and I guess we'll leave it
there as like a two that you can just
decide what you want to do with it but
anyway so that's how you we can handle
that
now the next thing we would want to do
right here we can just comment this out
later on we're gonna want it again when
we add like MACD for example settle go
below it but right now RSI is gonna go
above it it's there one thing that we do
kind of need to do is add the color
right I think it's there but it's
probably black at the moment as we load
them back so if you really wanted to fix
that again we are going to have
something go below it in just a few more
videos but just in case all you really
care about is the RSI you can change
this ax one tick params X what color you
want white and I think that would give
us the parameters yeah there they are
and then we can also
angle them if you want so I think we
actually have that data here so instead
of a x2 and now it's x1 of course one
get the tick labels save that run it
with our error well that's awkward
okay let's see here this oh good lord
okay we want the legend I'm sorry I got
kind of like lost in my quotes here so
really what we want to do keep this here
this here and then please work get lost
in my quotes alright there we go
cool so now we've got it you know the
dates looking right and then we've got
this open box here so now what we want
to do is actually add a box to put RSI
on and doing that's pretty simple and
we've done this quite a few times the
other thing I'm going to go ahead and do
is just I think we'll just delete this
because it's just wasting space next
we're never going to go back to that so
I'm gonna delete it if you really liked
it you could keep it there if you want
but I like the overlay better so now
what we're gonna want to do is add
another axis and what I'm gonna do since
it's gonna take like all of the same
stuff right like it's gonna look very
similar and I I guess we'll leave the
grid so it'll be it'll be an interesting
grid though I'll show you guys later but
so we'll just copy this and trying to
decide if I want to put it above in
theory it does kind of go above I guess
per nap for now we'll put it above but
it might end up being the case so we'll
have to put it below it but yeah so
we'll just put it right here so come
down here and we'll say ax 0 equals and
just before I lose my copy and paste I'm
just going to paste that stuff that we
copied so X 0 equals
PLT dot subplot to grid and this is
going to be a part of that same 5 by 4
grid that we had before it's going to
start this one will start at 0 0 right
and then rowspan it's only gonna span
one row column span it's gonna span four
columns axis background is going to be
that same background that we've been
using so I'm just going to copy and
paste it and close it up now the next
thing we want to do is copy and paste
all these taxes zero okay
we can get rid of this we definitely
want to get rid of the wide limit there
and then let's just go ahead and say PLT
I label in here we'll throw in RS
something like that okay let's see if
this each other wow I just keep getting
these airs what do we do probably didn't
close this off all the way let's see
there we go that should do it yes okay
so I bring this over and we see that
there's some date here that want to fix
that in a second or is it an accident I
think it's probably the date I'm not
sure why it's shown a zero there but yes
we'll get to that in a bit but anyway
the box is now there I don't see the RSI
probably cuz there's note that the color
isn't there or something
we'll deal with that in a bit but anyway
the box is there for us so let's close
out of this let's scroll down to the
bottom now because now this chart is
more than just stock price right so
let's get rid of this and now the title
will just straight up be stock color
yellow or white the next thing we want
to do is instead of a x1 let's just
delete this and say now we just don't
want anything on X 0 save that we'll run
this and here's our chart now the other
thing I won't mind doing is we could
prune the lower thing there so see if we
actually have
purring function already I think we
already did one right no I swear we've
already coded a prune but anyway so
we'll add that we'll just do that right
here so to prune it I really think we've
done this but guilty GCA was probably on
the volume thing that we just deleted so
PLT GCA
no parameters their y-axis set honor
score major underscore locator parameter
and ticker dot capital m ax in Elkader
and then what we want to actually do
here is prune the lower the other thing
you can do is like specify how many
ticks you want on the y axes there but
this will solve our problem at the
moment well sort of solve the problem
and that you know there's so kind of
kissing but what we're gonna end up
doing later is really there's only gonna
be two lines here the 70 and 34 the RSI
so that's not really gonna be an issue
so I'm not gonna go too hard on fixing
that but anyway that's how you would
make it look at least okay for now the
other thing our RSI isn't showing I
wonder if we see yeah we'll just copy
this down here ax 1 y axis label color
put that right here this won't really
matter either because we're gonna change
this as well later on probably but just
for the sake of teaching and to do it
might as well show it okay so I think
what we're gonna do now is I'm gonna cut
the video here and in the next video
we'll be talking about the actual
mathematics generating the RSI and
actually like plotting that RSI on here
there's a lot of really cool stuff that
we can do just by putting up the RSI
here so definitely someone look forward
to and stay tuned to the next video as
always thanks for watching thank you for
your support your subscriptions and
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>