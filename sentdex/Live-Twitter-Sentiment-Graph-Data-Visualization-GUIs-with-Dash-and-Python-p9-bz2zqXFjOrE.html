<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Live Twitter Sentiment Graph - Data Visualization GUIs with Dash and Python p.9 | Coder Coacher - Coaching Coders</title><meta content="Live Twitter Sentiment Graph - Data Visualization GUIs with Dash and Python p.9 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Live Twitter Sentiment Graph - Data Visualization GUIs with Dash and Python p.9</b></h2><h5 class="post__date">2018-03-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bz2zqXFjOrE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody and welcome to
another sentiment analysis application
streaming Twitter sentiment into Python
and then displaying it using - and
making up a unique name every time we
film a video tutorial series in this
tutorial what we're gonna do is display
this sentiment live as it comes in on
the term in this case will be Olympics
what I have here is the the code from
the live graphs with - tutorial so this
is what we were working with before and
now all we really need to do is come
through and change the X's and Y's and
that's basically all we have to do first
of all we won't need the day queue
anymore or actually well a deck is that
what it was called I can't remember what
it is now I think it's deck is is the
proper pronunciation I already forgot it
anyways so there's that now what we need
is we're gonna import SQLite 3 and then
we're going to import pandas as P D now
inside of our update graph scatter again
we don't need this to make our X&amp;amp;Y we're
going to make the x and y so we're gonna
say Conn equals SQLite 3 dot connect I
can hear some people mumbling in the
audience as I do this Twitter DB and
then we're gonna say C equals conduct
cursor so to the people mumbling so
what's happening here is don't forget
it's an interval that's happening every
one second and so every one second
establishing the connection object and
then the cursor and all that wouldn't it
be better send X if we did that up here
doesn't that make more sense and it
would except that when you do that
you're gonna hit an error because Dash
is using threads so if we tried to do
this and then access this cursor element
we could access the cursor but we can't
we can't do the actual operation because
SQLite does not support doing that so so
we're not gonna get away with it
so in
we have to do is give our connection
every time at least when I found this
hasn't caused any trouble but it does
make make one a little uncomfortable
there might be a better way and if you
know a better way let us know because I
don't like this
yeah but I'm probably not going to keep
using SQLite anyways so maybe it won't
be an issue before but I know that that
looks bad so continuing along we've got
the cursor now so then what we're going
to do is we're gonna build out the data
frame and I don't think I want to type
it so what I'm gonna do is just copy and
paste it again the tutorial is linked
anyways it's strangely tabbed over
further than this is tabbed is this
gonna have a try and except possibly it
is it is but for now let me just have it
over and explain it
so because pandas has a read SQL oh and
in fact we're not gonna make this
dynamic yes this is even this is more
simple than I thought so the su just
basically with the read SQL you pass the
query you pass the connection and you're
good to go so in this case we're just
populating this database we're gonna
sort by UNIX you've already seen this
we're going to generate the smooth
sentiment and we're gonna drop the nan
not in numbers so really nothing fancy
nothing new here that you have not seen
yet so other than that we need to create
the X's and Y's so what I'm going to say
is I'm going to say the X we would say
that is DF UNIX values and we don't want
to plot everything especially if it does
go out to a hundred so let's just do a
slice and say the last nut let's say not
up to a hundred up to the last 100 I
know up to now okay I should probably
stop very soon making these tutorials
okay buy the stuff for the day I mean
not permanently so X Y okay so negative
100 onwards so the last 100 values is
what we're gonna do for X and wine
obviously
shouldn't be UNIX this would be
sentiment smooth luckily I'm gonna copy
and paste this anyways after this okay
so that would be it but I am going to
encase in a try and accept and I will
explain why in a moment and actually
price should you slogging rather than
what I'm about to do but that's okay so
so yeah I just wrote out here two
popular topics that you could probably
find a lot of is like google olympics
trump as long as trump's president guns
or gun USA you could probably use like
twitter too would be a good one or
retweet our key or russia today I
suppose anyways continuing along I don't
think other than yes so the only other
thing I've done is added try and accept
and the reason why I did that is if you
hit an air in - because - is actually
running us a server the - code for the
same reason why you can't print anything
here and see it the - code what all the
output is going to that little server
wherever it is and I don't know how to
see that information so if anybody knows
how one could go about seeing that live
in your console let me know but in the
meantime all I did is made a little
error text file and all it does is if it
does happen to hitting there it's gonna
write a text file so we know like okay
what's going on so yeah now while the
the twitter sentiment has been running
this entire time so hopefully I can run
this not heading there and we'll be good
to go let's see what happens
because I'm actually running this on
Python 3 6 this time and a lot of lives
libs are not on there is it gonna work
come on I can't work that well right I
think it's working everybody let's see
if it updates the I don't see anything
updating yet
maybe I'll change the word it doesn't
appear to be updating it should but
Olympic might be might be old news at
this point let's try let me just throw
in USA just updated I took it off the
screen and it just updates that's okay
we we should actually be able to see it
update live if I change this so I'm
gonna go ahead and save this and then
pull this up there it goes okay so now
we've got information coming in for USA
and it looks like USA is a little more
popularly updated because it's coming in
quite quickly here as opposed to
Olympics which makes sense yesterday
Olympics was quite popular today
yesterday was the last day for the
Olympics today it's just kinda like
residual stuff so that's probably part
of the issue okay so at this point we've
got okay a decent app is forming and
this is the live sentiment right
smoothed out for us and everything
USA is kind of below average or below
neutral sentiment but it just popped
over into positivity so that's nice and
yeah so it's looking okay our UI is kind
of ugly at the moment but we're really
we're pretty far from from all the
functionality that we want so that the
very next thing that I would want to add
is well first there's a quite a few
things I would want to change first of
all our time stamps are really oh this
is interesting I didn't know we could
actually I guess I guess it makes sense
but every time it's gonna update yeah I
haven't really messed it all with these
graphics I keep making live graphs but
yeah every time you like zoom in it just
updates immediately I wonder if there's
a pause that's what they really need
with live grass is a way for us to pause
them that should definitely be an option
if if it's an animating graph with the
interval there should be a way I mean I
know there's definitely a way that we
could code it that should be in there
anyway okay so in the next tutorial what
I'd like us to do basically the main
functionality thing that we need to add
but we're gonna make a few changes
definitely in the next tutorial is we
need this to be dynamic so we ideally
like a little text field right here kind
of like what we do with stocks where we
just we type in the phrase that we want
to search this database for and then
boom live sentiment for whatever term we
want to type in and look for so that's
growing quite well so that's what we're
gonna start working on in the next
tutorial and then probably will be able
to cover some other like little
housekeeping items including a few
things that I've learned one of the
viewers pointed out that the graphs can
update much much quicker if you don't
animate them like this like it looks
nice when it animates over but that
appears to be very memory hogging I
don't think plotting 100 plots on a page
should be too complex but maybe like
shifting a hundred plots or something
there's just too much or something but
animating the graphs is very expensive
right now for what we're seeing it looks
okay but you'll see when we do the live
search it appears to be an expensive
operation so anyways that's what you
guys have to look forward to if you got
questions comments concerns or whatever
feel free to leave them below otherwise
I will see you in the next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>