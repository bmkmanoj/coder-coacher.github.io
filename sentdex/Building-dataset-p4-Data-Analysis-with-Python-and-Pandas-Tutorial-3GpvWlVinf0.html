<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building dataset - p.4 Data Analysis with Python and Pandas Tutorial | Coder Coacher - Coaching Coders</title><meta content="Building dataset - p.4 Data Analysis with Python and Pandas Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building dataset - p.4 Data Analysis with Python and Pandas Tutorial</b></h2><h5 class="post__date">2015-09-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3GpvWlVinf0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody and welcome to part 4 of
data analysis with Python and pandas in
this tutorial what we're going to be
doing is beginning to build our data set
for a real estate analysis so to start
we're going to come over here to quand
old and now you will need to sign up
make an account you don't actually need
to at this point but babe I the next
video you will and the codes going to
include code that will require an
account as well as we're going to need
the Kwan dole module so get the quanto
module you can either install it from
their website or again you can go pip
install Blondel simple as that once you
have quando you're able to use Kwan will
get and you can get in the use a little
ticker and boom you're done so let's say
we're looking for housing price index we
search we wait and we get this Freddie
Mac database and then in here you can
already see we've got house price index
for Alaska Alabama Arkansas and so on so
click more from this database and this
is the housing price index basically for
every state at first anyways and then
there's some other information here too
now what if we wanted to grab the
housing price index for every single
state because the idea is that the
housing markets are probably all going
to follow each other ok so there might
be some divergence and then there might
be some laggards and there might be some
leaders right but what ends up happening
is every time there's any divergence as
far as at least directionally we're
concerned we're almost pretty much
promised that we're going to get back to
the mean ok of the housing pricing index
so the idea first is to confirm that
hypothesis so the hypothesis is that all
housing markets follow the same path
they might have a different magnitude of
that path right so if one market goes up
they all go up or if most markets go up
a specific market is going to go up
maybe not by the same degree but it's
going to have to go up so here we're
saying they're definitely at least
correlated to some degree but we need to
be able to test that and find out if
that's even true we believe that to be
true but we want to make sure so we want
to pull every single housing price index
but we're not going to go through here
by hand
click Alaska download click Alabama
download and then we're also you know
right now fit we've got a list of 50
states that we would need to use and I
mean we could type them all out by hand
but that's going to be kind of annoying
so instead what we're going to do is
like let's click Alaska and we can
already see up here the it's HPI a K but
we can also see the quando code over
here F Mack HPI a K and you could also
click on Python and get the quando yet
now if we scroll down the other thing
you'll note that will kind of show later
on though is like let's say you don't
want all the way back to 1975 like you
could modify this to be 1999 okay and
then when you go to now that you've
changed that when you go to click python
it's going to add that trim and that
makes the data that it's returned to you
start at 1999 which is pretty nifty
anyway so we know this is the quanto
code and what we want to do is find a
list of the united states and just
automatically generate this quantal code
rather than typing it out by hand like
all the 50 states
so the first step we're going to come
over here and we're going to go ahead
and first import quantal that's the
quando module that we had had you
install right away and then of course
import pandas as PD now when you make an
account on quando you can go to your you
know your little name and then go to api
or something like that and it'll have
your api key there you can write your
API key in your script I'm just not
going to because I don't want everybody
to use my key so I'm just going to have
API key equals open and I put a little
file in here called quondam API key text
intention to read and then dolly and now
that's my API King again you don't need
to do that if you don't want to next I'm
going to say DF equals quantal done get
and we can throw in basically this right
here so we could say get F Mac HP I for
Alaska and then we'll do what I always
thought a k' was for Arkansas but I
guess I'm wrong if it's 8 ARFORGEN so
anyway boom
auth token equals API key and that's
that then we can print the F dot head
and we'll get a returned data frame in a
moment now you'll see that we have the
date here and it's already being treated
as the index which is pretty nifty if
you're using the quantal module you'll
have the automatic assignment there of
the index now I'm going to close out of
this and now we want is the list of the
50 states so let's just do 15 USA states
abbreviations or something like this and
then yeah so you come over here 50 US
states abbreviations and eventually you
find the Wikipedia page so we would
click on that and we're kind of like
looking around and here we go we've got
quite a few look in this is I'm trying
to think if this is the one that i
actually used list of this one's US
state abbreviations but the one I was
looking for is actually just the US
state so see it likes to use with the US
states I want that with simple maybe
this is it yeah there we go
so a list of u.s. states and it's just
nice table with the abbreviations in it
easy yeah a are for Arkansas had to
figure that one out anybody moving this
over so what we want to do is we want to
read the table from here so we could use
Python and regular expressions and split
out this table or we could use something
like beautiful soup or something but we
want a table and this is a pandas
tutorial and we actually happen to have
read HTML so let's do it
so moving this over we're going to say
fizzy states equals PD dot read
underscore HTML and we want to read this
link copy that over here paste now when
you read HTML this puts the information
into a list of data frames even though
there's only one table it's going to
make like multiple attempts at reading
this table it might also read this
little list here and it is probably read
this kind of table here so you think
like oh there's only one table here I
promise there's more than one table and
it's going to find it so 50 states will
be a list of data frames okay so we can
at first print vide States and I'm going
to go ahead and comment these two lines
out we don't need those two lines let's
see them to run that real quick yeah so
there you go you got a bunch or junk in
here and we can pretty much do stage
like you know this right here this is
the beginning of a list you see the
square brackets then you've got data
frame one would be here and then data
frame number two and so on so data frame
one would have the index value of a zero
so it looks like the first data frame is
the one that we want
that's index zero so we can close out of
this and we can say instead of fitty
States we can say we want 50 States 0
right so at the moment 50 states alone
and in fact let's just do this let's say
this this is a list then copy that paste
50 states zero this is a data frame
right so now we're going to print 50
state zero now if it is a zero is a data
frame of its own and then what are we
looking for well turns out we're looking
for column zero so that's a column which
will output to us basically a series so
let's copy this paste and again so now
we want column zero so zero this is a
column fantastic and now of column zero
we want everything from element one
onward because element zero is
abbreviation or you know index 0 is
abbreviation so what do we do now now we
say for a DVD for abbreviation what do
we want to do in fitty States 0 0 1 : we
are going to print and we're going to
just print it out just to see that we
got it right F Mac slash HP i underscore
+ string version should already be a
string but just in case ABB V okay so
now save and run that and here are all
of the basically I don't know what to
call it
ticker or whatever the API name that we
want to query for right so Alabama
Alaska Arizona Arkansas California
Colorado Connecticut and so on all the
way down the list so now we've got that
now all we need to do is create new data
frames based on these and begin kind of
adding them together so we've got a lot
of stuff that we're actually enough to
cover in order to add them together we
have to first learn how to actually
concatenate and combine data frames so
in the next tutorial we'll be talking
about how you go about combining data
frames whether they share an index or
not combining them on columns and all
kinds of stuff it's pretty there's a lot
of options that we
can do here obviously there's a lot of
ways you would combine data frames right
so anyways that's what we do in this
tutorial questions comments below
otherwise as always thanks for watching
thanks for all the support and
subscriptions and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>