<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Charting Stocks/Forex for Technical Analysis Part 11 - Candlestick and Volume Chart in Matplotlib | Coder Coacher - Coaching Coders</title><meta content="Charting Stocks/Forex for Technical Analysis Part 11 - Candlestick and Volume Chart in Matplotlib - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Charting Stocks/Forex for Technical Analysis Part 11 - Candlestick and Volume Chart in Matplotlib</b></h2><h5 class="post__date">2013-08-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bCRtqX2LdlM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right everybody and welcome to the
11th a financial charting tutorial with
Python and matplotlib where we left off
let me just bring up a chart to show you
guys where we stand at the moment this
is it
got a pretty respectable looking chart
we've got the line of open high low and
clothes line going on here and we've got
volume down here we managed to get rid
of the tick stuff on the top plots axis
but retain the bottom we've got the
labels on the side title and we've got
share axes so when we zoom into a
specific spot both of them will zoom in
including if you zoom in on maybe this
one instead you know and then same thing
if you were to move them around so now
that we've done that the next thing that
we want to do is talk about how to begin
analysis of the data so now that we've
you know we've learned how to plot the
data now we want to move into more
analysis now the most basic I guess
there's two really basic forms of
analysis one would be just moving
averages and the other is a candlestick
chart so what we're going to do the
first time is a candlestick chart since
that's actually probably the easiest
thing to do next and then after the
candlestick will move into doing just
simple moving averages so so let's close
out of this and talk about what we need
what changes we need to make for this
candlestick chart so if you're familiar
with Candlestick charts as you can
imagine there's a little bit of
functionality that's going to have to be
changed in order to do a candlestick
chart so the first thing we want to do
is actually import something from
matplotlib that allows us to do
candlestick charts luckily for you you
know they've done a lot of the
programming already for us so what we
want to do is from mat plot lib dot
finance import candle stick matplotlib
finance has two forms of Candlestick
charting one is candlestick one is
candlestick two
you might think candlestick to would
operate more easily with this but
actually at least I can't figure it out
so we're just can use the regular
candlestick plotting if someone knows
how we could use the straight-up
candlestick to and throw in these
parameters my problem is the date I
don't really know how we're supposed to
throw in the date to Candlestick - so
anyway we're going to use regular
candlestick and the way that we're going
to go around it is a little hacky but I
don't see any a better way so um so once
we have imported candlestick the next
thing that we're going to want to do is
engage in our little or way that we're
going to start building the candlestick
data so to do this what we need is a
line like the way candlestick is going
to work is you're going to tell it
you're going to literally write out
candlestick and then you'll have like
you'll say what axis is going to be
corresponding to and then you've got
like the data right and that's it and
then wit and you start specifying stuff
for the candlestick chart but data holds
with it a date and then in very specific
order it goes open cloves high-low you
have to put in that order otherwise it's
going to like look really weird so so we
need to create a data variable and then
put everything in that data variable
that has date comma open comma closed
comma high comma low comma and we can
throw a volume in there as well so we'll
do that so anyway that's how what we
need to do so let's start making that
and the best way I can think of to do
this is to use a while loop as a counter
and just build this array so that's what
we're going to do so first we're just
going to say x equals 0 y equals the
length of date so data rate you can also
do length of close P it doesn't really
matter now we're going to say data
I guess we'll call this candle array and
that's going to be an empty array for
now but then we're going to start
populating it in one moment so we're
going to say wow X is less than Y
I we're going to make upend the line
this is what we're going to attend to
this array it's going to be date and
then whatever X we're on followed by
open P followed with the X followed by
closed P X hi P X and lo P X followed by
volume X so that'll make our line now we
need to make this line dynamic well
actually first let's upend it so we'll
do candle array dot a pen and what we
want to append to is this line and now
let's make this a dynamic which is X
plus equal 1 so every time it runs
through this is going to add 1 to X and
we started with 0 so we start on the
zero with element of all these things
and we just keep adding 1 and it's going
to continue doing that until X is no
longer less than Y so that's how we're
going to build the array like I said
probably not the best way to go around
it or go about doing this but it's the
best least complex way that I could
think of doing it real quick and just
like before well probably the what we
would do if we wanted to clean this up a
little bit is instead of doing this
numpy array well let me explain why we
have to use the first we need to convert
this date variable it needs to be in the
days format so like unix is the number
of seconds after January 1st 1970 we
need this to be in the days format that
matplotlib and numpy will kind of
correspond with and I'm not too sure how
they calculate this days format but it
is I believe it's actually like a number
of days so it the number will increase
by one but I don't know where the days
are actually beginning in this this
thing so if anybody knows how they're
actually deriving like the starting
point where the starting point of these
days
feel free to let me know because then
you could actually convert from a eunuch
stamp to this you know day's format but
I don't know how to do it so anyway but
it is it's in like like each increment
of one is one day basically so anyway
continuing on so we want to use that
conversion to date and then we might as
well just use the rest of the stuff that
we've you know pulled so anyway that's
how we're doing it so now the next thing
that we want to do is make our
candlestick chart and because we're
doing that we don't no longer need any
of this stuff right here right so we can
just delete that and now let's specify a
candlestick like I was saying and the
parameters here are where are we doing
it and that's a x1 now what is the data
that we're going to use what we define
that as candle oops
handle array and then we want to say the
width of our open high/low or Cal stick
stuff for now we'll just say one you can
kind of mess with that it depends on
like the granularity of your data really
how wide you want that to be and then
you can start specifying color up and
color down so like if the if the chart
is you know increasing what color do you
want to be in if it's decreasing what
color do you want it to be now you can
do whatever you want you can even throw
like hex colors into here but just for
the sake of doing it like everyone does
it oops color up we're going to call
that green and color down we're going to
call that red that's just the way
everyone does it but you could make it
like a specific color of green and a
specific color of red with hex color
codes if you wanted but we're just going
to leave it like that for now so unless
I've missed something that is everything
we need to convert our graph to a
candlestick chart so let's go ahead and
save it and run it and see where we
stand let's see okay we type it up here
from oh okay save that run it and yes so
here we go
we've now converted it to a candlestick
chart and our wit looks to be about
right some of these are kind of
overlapping with each other but if we
you know exhume into a specific spot
they're actually decent-sized they are
kind of overlapping but that's okay so
you can make it like maybe 0.8 something
like that and obviously every you know
all of our parameters are still existing
we can still move this around and stuff
so so yeah we did it right we made our
chart and just for the sake let's let's
try and edit this width to a point just
point seven-five see if we can do that a
little better anyway you can mess with
that if you want but that is how you
make a candlestick chart so hopefully
you guys are making some cool
candlestick shirts now and you're
enjoying this as always thanks for
watching thank you for your support your
subscriptions and the feature I think
probably the next video what we'll do is
we'll customize this chart a little bit
more like I said before you make more
money if the chart looks like badass so
I think that's going to be the next
thing that we do is kind of make this
chart little cooler looking it's right
now it's just kind of pin so that's
probably what we'll do in the next
tutorial not sure when I'll put that out
but eventually I'll put it out
so anyway yep thanks for watching and
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>