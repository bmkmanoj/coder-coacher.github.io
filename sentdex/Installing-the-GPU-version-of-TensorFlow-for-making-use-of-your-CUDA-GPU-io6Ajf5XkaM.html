<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Installing the GPU version of TensorFlow for making use of your CUDA GPU | Coder Coacher - Coaching Coders</title><meta content="Installing the GPU version of TensorFlow for making use of your CUDA GPU - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Installing the GPU version of TensorFlow for making use of your CUDA GPU</b></h2><h5 class="post__date">2016-08-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/io6Ajf5XkaM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody and welcome
to part 9 of our deep learning with
neural networks tensorflow and python
tutorial series in this video what we're
going to be talking about is using the
GPU version of tensorflow
which allows us to use obviously our GP
or cuda enabled GPU so to start you're
obviously going to need a CUDA enabled
GPU now we'll just say in theory you can
continue following along with everything
that we do sort of in for the rest of
this series but honestly I wouldn't
because a lot of what we're going to be
doing now is going through example code
and actually running the example code
seeing what the output is and all that
so I mean yeah you can come to go
through the code with us and still like
pick up some things but really you're
gonna want to be able to run this stuff
so what you're going to need is a NVIDIA
GPU with a compute capability that is
greater than 3 also just as a warning I
suppose this video I'm just going to be
running through the process of getting
all this set up I'm not actually that's
really not even possible for me there
might be a way but it's really going to
be it would be very difficult for me to
film this process simply because a lot
of what we're doing here is installing
an operating system so filming that's
pretty difficult unless you're in like a
VirtualBox but then when you're trying
to do like the graphics card stuff in a
VirtualBox you can't do it there so I
can't film any of that so anyway I'm
just going to run through this you can
follow along either here in the
text-based version it's not going to
make a huge difference anyway you'd want
to pick up an NVIDIA GPU with a compute
capability greater than three go to the
text-based version if you need a list
and then we'll come down here and you
can use cuda enabled geforce products
these are like your desktop GPUs and
basically as long as you've got
something better or something equal to
or better than GTX 650 then you're
totally fine so to give you an idea like
a GeForce let's say GTX 650 you could
probably pick one of these up on eBay
for like $70 or something so I highly
highly highly recommend
that even if you don't currently have
one go get one because not not
necessarily 650i ideally you want to get
basically the you want to get the best
GPU the best single GPU that you can
whenever I first started working with
this stuff I was on a couple of gtx 980
s and I was running them in sli and I
that's when I found that SLI is not as
ideal as its marketed to be so so
anyways I have since upgraded myself to
a Titan X which is absolutely glorious I
would highly recommend a Titan X even
though Nvidia did not send me one for
free that was very rude of them anyways
moving along so make sure you get an
NVIDIA GPU compute capability greater
than three from there what you're going
to want to do is if you are on Windows
obviously if you're already on Linux or
if you're already on Mac OS you don't
need this step but if you're on Windows
what you need to do is dual boot into
Linux or I suppose you could build a new
computer and just put Linux on it but if
you're if you want to continue using
your main computer then you'll want to
dual boot Linux and windows so to do
that what you're going to want to do is
go down to your Start menu search for
create and format and basically you're
looking for Disk Management pull that up
and it'll look something like this and
what you'll do is you'll right-click on
the C Drive and then you can choose
shrink volume and then when you do that
you'll get a window kind of like this
one and basically what it tells you is
you know what this what's the size and
then how much shrinking you could
possibly do and then you decide okay how
much size do I want and however much you
shrink by is how large of a partition
you're giving to Ubuntu so do that and
when you hit shrink this is a plausibly
very long process like it could take
hours because what's happening
especially we have like an older hard
drive
you've got files that are stored all
over the place on that hard drive and in
order to to do what we want to do here
and make some unallocated space it needs
to be all one chunk so it has to move
everything aside to make room for that
one chunk so this is a very long process
on that same note
this is moving things and doing things
to your hard drive anytime that happens
you risk corruption so just this process
alone is relatively risky so back up
whatever you care about also don't stop
this process just because it's taking a
few hours get over it maybe do it
overnight while you sleep or something
if you have like a solid-state drive
it's actually pretty quick like you did
this within like a few minutes but I've
heard horror stories of people using
this on like regular hard drives and
it's not not great anyway moving along
once you've done that you'll want to
download an ISO of a boon to you if
you've been following along you might
actually already have an ISO of a boon
too
if not you can go to Abu to calm and
we'll just head there real quick
and then you can go to or down download
and I would just recommend that ok well
we're going to be developing in it so
you'd probably want to move to desktop
you don't necessarily have to have a
boon to desktop you could go for the
server but this stops what I'm choosing
and rather than downloading it from
their little site I would choose
alternative downloads and torrents and
download the torrent it'll be a lot
faster and use like utorrent or
something like that to download it so
once you have a boon to rather if you
follow along with like the VirtualBox we
were able to just like specify where the
ISO was it was super simple with an
actual installation so I'm going to work
you need an installation media like a CD
or you can use a USB Drive I use this
Universal USB installer um and obviously
don't click this download button you
would come down here probably and choose
this one anyway you can use a different
one if you want doesn't really matter
you just need something that's going to
create a boot media out of your USB
Drive once you've done that and put the
ISO on there what you're going to do is
restart your computer sometimes it'll
boot automatically into that boot media
but many times it won't usually in most
computers you press f11 on startup at
the same time you would press a delete
to enter BIOS do that choose your USB
Drive and bam you're installing Ubuntu
make sure you choose to install a boon
to along side of window
those do not replace windows unless
that's what you want to do once you have
a bun - and you're all installed this is
kind of where if you are on Mac OS or
otherwise on a bouns who already you
could you'd be picking back up and
basically we need to do these three
major steps we need to install the CUDA
toolkit kudi MN and then finally the GPU
version of tensorflow if you're
following my tutorial I'm doing CUDA
toolkit obviously 7.5 and kudiye and 4.0
there is I'm pretty sure CUDA toolkit 8
release candidate is available right now
where are you yeah so cool toolkit 8 is
you could go with that if you really
want Whipstaff windows let's see is this
not I don't think this is not sure how
to get to it but I'm obviously just
blind anyway somewhere you can download
the release candidate if you want about
probably many of you by the time you're
seeing this might be a later version go
ahead and download whatever the latest
versions are you probably won't be in
trouble but you can also go to
tensorflow org and just see like what
they say is supported by tensorflow
and right now that's 7.5 for CUDA
toolkit and then 4.0 kudi nn so so yeah
also another lovely thing is the for
whatever reason the CUDA toolkit only
supports up to a boon to 1504 you can
still use it on 1604 and I would highly
recommend you zip into 1604 not 1504 so
go ahead and use 1604 and there's really
only one thing that's majorly different
in the installation process so it's
super simple it took me a little bit to
figure it out though okay but anyway and
I saw some crazy there's there's a few
guides for doing it and they do all this
weird stuff when there was like just one
thing you have to do different anyway so
cool so you'll get to CUDA - okay this
is a run it's like a dot run file that
you're gonna want to get don't get the
dot Deb at least when I did it that was
it didn't have like a valid checksum so
yeah like it's using an outdated
encryption for the checksum so anyway
get the run file ku DNN is actually just
a bunch of files that you're going to
copy and paste into your cuda toolkit
directory so that's just a download and
extraction and then the GPU version of
tensorflow you're also going to go ahead
well that was like the very last step
also you're going to need your driver
for Nvidia I guess that I didn't mention
that as like a major step I guess it's
not really a a major step in this
process but anyway you'll also want to
get the latest Nvidia graphics drivers
for your GPU so there's a link for that
down here so once you have all of those
things like already downloaded then
you're going to want to enter into TTY
mode so this is another time when I
wouldn't be able to record so you press
ctrl alt f1 enter TTY I couldn't tell
you what that stands for but someone
comment below tell us what tty stands
for and then you're going to want to log
in and then run a sudo stoplight diem or
its sudo light diem stop just depends
anyway
run that and that kind of stops your I'm
pretty sure like and all your GUI stuff
from running or your graphic stuff and
running then you're going to navigate I
could just be blowing hot smoke I
actually don't know what light diem is
but I'm pretty sure that's what it does
anyway navigate to your downloads
directory and so this would be like home
whatever your user name is then
downloads and the first thing you're
going to do is install that graphics
driver so that would be and maybe you
wouldn't want to install as first I'll
explain a problem I hit later on but
this is the order that I did things in
anyways so um although I think I skipped
the chmod yeah so once you've done light
DM stop and you've navigated to that
downloads directory do a chmod plus X
and then do that against both of these
files whatever the Nvidia dot run file
is and then the CUDA 7.5 so this is your
graphics driver basically and then this
is the coudn't or CUDA toolkit for 7.5
so make sure your allow those both to be
executable once you've done both of
those things go ahead and install the
graphics driver it'll probably error
that you're not on like a 32-bit system
or something and that's totally fine
unless you're actually on a 32-bit
system anyway installed a great driver
and then install cool to a kit 7.5 when
you install coded tool kit 7.5 make sure
you use the
a ride parameter that is going to
override the check for whatever compiler
you're using so for whatever reason if
you let the CUDA toolkit check for the
compiler it wants an exact version and
not a greater than version for whatever
reason so I just use - - override and as
literally all you have to do to install
this on 1604 other than I suppose that
as as you after you run this command
it's gonna you'll go through a license
agreement you'll press a hold of
spacebar for like an hour and then it
has like some default like paths and
stuff but I think even before that at
some point it's going to ask you do you
want to install the graphics driver no
you don't want to install the air
graphics driver other than that
everything's defaults yes
congratulations when you're all done
once you've got if you haven't already
downloaded the KU DNN files you'll want
to make sure you grab those extract them
and then basically what you're going to
do is copy and paste them into that
official cuda directory so you'll change
directory into your downloads you'll do
this sudo CP command here that just kata
is going to take these includes and copy
and paste them into the CUDA the
official cuda directory includes your
going to take the Lib 64 stuff same
thing you're going to grant permissions
and then basically you're all dem done
but you're going to want to export some
paths real quick so you wanna you can
edit the edit this I use Nana if you
want to use something else go for it
anyway and then just add these two lines
at the very end this just gives you the
path basically to this CUDA and cout DNN
and all those fun things also if you
want to be able to use sudo alongside
like if you're going to say sudo python
some scripts that use this tensorflow
you'll want to actually also add these
to your etc' environment so make sure
you do that if that's all done then all
you need to do is install the GPU
version of tensorflow
these are just the same well sort of
I've added Python 3 and stuff but anyway
basically the same instructions as you
can find on tensorflow org go ahead and
install them export that binary you're
going to install it and then do Python 3
and your shell try to import tensorflow
and hopefully you see something like
this
and you just see a bunch of successful
E's right here okay so if you've done
that congratulations you got the GPU
version tons flow working and you're
done if you're having some sort of an
error with Lib qu DNN or really any of
these chance it but usually it's Lib qu
DN and honestly you probably didn't copy
and paste that stuff or something like
that whenever I was like first going
through the installation process
I don't I did not find it to be very
clear that what you were like you
download Lib qu DN in and it's like okay
what do I do with this like I don't know
instructions after that or at least I
could I did not see those instructions
so that took me a while also the first
time you run through this everything's
looking great and you're like awesome
and then you'll like run something
overnight morning will come everything's
great you'll maybe go back into Windows
and then later that night you're like
okay I'm gonna run another algorithm
tonight you boot up into Mbutu and then
suddenly you've got like an infinite
login loop or you've got some really
disorienting graphics going on on your
screen I did not know what was doing
this first time I just reinstalled
everything including the operating
system which sucked but then later I
found out all I really needed to do was
just reinstall the graphics drivers
that's why I saying like maybe after you
install like the CUDA toolkit and stuff
install your graphics driver but I don't
really see why that would be totally
necessary because we did not install
their graphics driver but anyways that
kept happening to me and like I said all
I really needed to do like if that
happens to you go back into TTY with
that controlled f1 sudo stoplight diem
or that pseudo light diem stop and then
go to downloads and reinstall the
graphics driver dot with that dot run
file anyway after you've done all that
you should hopefully be able to import
and if you've got this then now you can
actually use the GPU version of
tensorflow
and then you can have a lot more fun
with us as we do some of the more
bleeding-edge types of things that we
can do with neural networks so if you
have questions or something isn't going
right or whatever feel free to comment
below I'll do my best to help you out I
install the GPU version of tensorflow
now a handful of times so not an expert
but I've hit quite a few errors anyways
along the way also if you do hit errors
like you can Google the errors and
you'll find your answer almost certainly
but I'll do my best to help you out if
you can't figure it out otherwise
questions comments concerns whatever
leavin below until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>