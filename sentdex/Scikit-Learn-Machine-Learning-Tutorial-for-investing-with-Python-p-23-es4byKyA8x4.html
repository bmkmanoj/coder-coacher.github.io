<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Scikit Learn Machine Learning Tutorial for investing with Python p. 23 | Coder Coacher - Coaching Coders</title><meta content="Scikit Learn Machine Learning Tutorial for investing with Python p. 23 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Scikit Learn Machine Learning Tutorial for investing with Python p. 23</b></h2><h5 class="post__date">2015-01-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/es4byKyA8x4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let's go now everybody welcome to the
23rd scikit-learn with python for
machine learning with our investing
practical example tutorial video where
we left off we were we basically built
the data set that we want to kind of
predict against and we have our training
data set now so what we're ready to do
is see what we got
so first we're gonna do I'm gonna do
ctrl a and delete again you may want to
save this one this is a forward test
backup now so in theory now we might
have up to five total programming or
scripts rather so delete but you might
want to save that and now we're gonna
visit tutorial number twenty s code
which was the original training and
testing script so now we're gonna do
control a control C control B boom so
now with this script basically this now
our old data can be the testing and just
for the record we probably should train
and test all right I mean yeah train and
then forward test based on the exact
same kind of principles with it you know
no na or with na so just keep that in
mind so moving forward to here what we
want to do is analysis and then
basically at the very end you know here
is where we'll add some new stuff so
this was our you know training and
testing but now what we can do is we can
say data mm underscore DF equals okay PT
dot data frame ROM underscore CSV and
then we called this forward sample and
then trying to think what we did forward
sample I think and with an A or no na
and we're currently this script is a no
na script so we'll do
no underscore and a dot CSV then we'll
come down we'll say data DF equals data
underscored the f da place and we
replace all not available data with a
zero and then we
or replace function and we replace any
not a number data with a several so
moving right along we're gonna say now
capital X equals and if I think we can
maybe get by by at least doing this
because really we just have an X we
don't really need to calculate for y we
just need X and Z Z will be let's just
take all this and I'll deal with that in
a second come you pays the heck come on
down here and paste we'll get rid of Y
in the X pre-processing can stay the
value of C is also gonna change or Z
rather is also gonna change
so here features that stays the same we
make sure we actually did all caps
features here yes
okay so x equals numpy array data DF
features dot values X pre-processing
scale good Z is equal to data underscore
D F ticker dot values dot 2
this that should do okay
now what we want to do is we're gonna
say invest underscore list equals empty
as my dog is totally snoring over there
you know hopefully all can't hear that
good restless for I in range Len X so
basically for the length of X which
should be capitalized X what do we want
to do we're gonna say P for prediction
equals CL f dot predict capital X the
eyuth and then the zero it so that'll be
the prediction and then if P equals one
ie if we're predicting that it will out
per for and then let's go ahead and
print the Z the I thought Z and then
we're gonna say invest list up and the
eigth of Z and then finally at the very
end let's go ahead and print Lana
invest list we're just kind of curious
with the length the total length is at
the end and then just in case we forgot
we can rent invest list okay cool next
our training set we currently write
we're testing you know against all of
these we're training and then we're
testing against all the samples I'm
gonna call this one for now I don't want
to deal with minus zero at the moment so
we'll kind of ignore you know these
results and in fact just to further
ignore them will just stop printing out
junk from them because now we're just
interested in the predictions so this is
with no not available data let's save
and run that and see what we get get
anything
division by zero compared oh I see okay
hold on hold Oh
basically all this will just comment out
again okay yeah that was somewhat
expected so we have a list of companies
to invest in here we don't want that
many companies okay we're not interested
in that many companies to invest in so
the next thing that we might want to
consider doing well first of all let's
go ahead and we'll do with na with na
come up here with an A also I do want to
uh we're totally lost I want to know I
guess we can maybe find it let me do
something really quick here okay so just
for the record the total number of
stocks that were considering is 560 so
of the 560 companies in the S&amp;amp;P 500
we've chosen 288 so a little over half
so anyways closing that now we're with
not available and let's run that one
more time
and so we're finding that we most likely
have a list of companies to invest in
that is slightly slightly too big we're
not really wanting to necessary and this
one's even bigger my goodness hopefully
it's not the whole thing yeah it's
almost the whole friggin thing though so
yeah we're not the happiest with this
output so anyway this algo is very
bullish on the market okay so so now
what both of these kind of return to
list that is very large so what can we
do I mean yeah for one we could say that
well we're investing in the market we're
in theory investing in 500 companies so
if you know we're considering no n/a and
we're getting returned a list of half of
the S&amp;amp;P well not half but probably half
if we got rid of the cuz right now our
full list is 560 and we return to ATS so
in theory if we pulled against just the
SP 500 companies we could relatively
estimate that we're gonna get 250 back
so in theory we're saying okay well half
of the companies we think we'll these
are the half that we'll think will
outperform so also in theory if you just
think about it half of the companies in
the S&amp;amp;P 500 are likely to outperform the
S&amp;amp;P 500 and half of them are likely to
underperform the S&amp;amp;P 500 right that's
just statistics okay so obviously if one
company significantly outperforms it
might take the place of two or three
companies or something like that
but statistics wise probably half of the
companies outperforming half the
companies ought to perform right that's
just the way it has to be so in theory
we could be right on the mark and pick
the perfect half of companies unlikely
but we could but what if we want to
maybe see this is kind of a low risk
right cuz we're investing in a large
pool of companies so maybe that's what
you want but what if you'd rather have a
smaller list of companies you're
invested in you know maybe you'd rather
pay you'd like to pay more attention so
a lot of investors like to really go in
deep into the companies that they're
investing like this would be just the
starting point to finding a company and
then from there they might do more
research on that company so they want a
smaller handful of company
so what might we do now before I brought
up that well we could we could kind of
change our scale a bit right we can
organize companies but by you know match
the market and by match I mean perform
within let's say half of a percent or
within 1% so I mean match the market
then we could have outperforming market
anything from 1 to 5% our performance
that's outperform and then anything
greater than 5 significantly
outperforming the market and then same
thing on the other side underperform
significantly underperform so we could
do something like that but my argument
is that that's unnecessary we don't need
to do that because we're the only reason
why we would do that is to say ok we
only want to buy into these significant
out performers so what do we do to
handle that situation well we would go
back into our you know data compilation
basically and underperform or basic as
we convert underperform to zero and
outperform to 1 right that's what we end
up doing and in theory what we could do
is actually just from now on just call
stocks either is 0 or 1 0 is don't buy 1
is friggin buy and what we would do is
we would we would mark or label a
company and its features a 1 if it
outperforms the market by more than say
five or six percent so we can do that
and if it doesn't it's a zero we don't
care how badly it underperforms it's
just a zero so we can go through and do
that to our our list here because what
is it happening when you start adding
more and more categories first of all
accuracy is gonna go down I mean that's
that only makes sense because especially
when we're saying like significantly
outperform earnest outperform just that
kind of dichotomy there you're you're
far less likely to get that right you
know because now we're more of a scale
than anything else but so accuracy will
go down but that's not necessarily good
you know a bad thing it's just you have
more categories so you've got more
chances of being wrong and and really
then now we have to consider the degree
of incorrectness so that kind of stuff
ends up coming up but anyways we'll cut
it off here and we'll start talking
about in the next video is kind of
increasing our standards for companies
that were consider investing in and not
only can we increase the standards just
in general we would increase the
standards and we can test that we can
say okay well when we increase the
standards does that improve our
performance compared to market yes or no
and if it doesn't then we probably
shouldn't be increasing our standards we
shooting we should invest in 280 stocks
let's say but if it does improve then we
should consider doing that you know
right we should we should keep that up
and then invest in fewer companies and
then also we can also catch it we can
calculate risk generally risk it's hard
to calculate but you calculate risk by
what's called drawdown and so how often
do you have significant drawdown which
basically you know it's almost like a
calculation of volatility but also like
how often do we have stocks that take us
down and if you have a lot of stocks
that take you down yet you have a lot of
stocks that move you up even though it
might a ver Ajay and B okay you want to
get rid of instances where you have
drawdown and that's kind of actually
more even if if you even if over the
course of like a year you've got one guy
that has 15% outperformance
because he's got some good stocks and
bad stocks but his good stocks worked
out well really well but his bad stocks
were pretty bad but it didn't matter
averaged out to 15% but then you've got
another guy who averaged a 12% but over
market let's say if you have a 12-string
probably in an outperform let's say
another guy 12 percent but he didn't
have like any drawdown like all of his
companies outperformed over the course
of that year that would be more ideal
right because drawdown equals risk so
anyways
lots of topics to consider next video
what we'll be talking about is just
searching for significant out performers
so stay tuned for that you have any
questions or comments on this video
please feel free to leave them below
otherwise as always thanks for watching
thanks for all the supported
subscriptions and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>