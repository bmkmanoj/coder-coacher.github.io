<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Charting Stocks part 31 - Graphing live intra-day stock prices | Coder Coacher - Coaching Coders</title><meta content="Python Charting Stocks part 31 - Graphing live intra-day stock prices - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Charting Stocks part 31 - Graphing live intra-day stock prices</b></h2><h5 class="post__date">2013-11-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/O1ApWe_KIMM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on guys welcome to another
Python charting live tutorial in the
last video I was showing you guys how to
convert the old one day open high low
close chart or at least the one that
would require two date stamp to now it
allows for a UNIX stamp and that's where
we left off now we want to actually make
it a live chart so let's go ahead and do
that so if you remember before the
Animation ability just requires us to
pass a function through it and that
function that we passed through it just
needs a mega graph right so luckily for
us we already have that function it's
right here graph data and we're already
calling it way down here graph data
right down here right so that's all we
have to do right so um the only major
difference that we're going to need to
make is to move let me actually bring up
the old thing so here is the animation
right so comparing this to our graphing
functionality right now there's really
only a couple differences at all so the
plot show is done outside of the the
function and the figure is defined
outside of the function this is so the
figure itself isn't redrawn every time
and otherwise oh and the other other
thing is it's clearing the axes so in
this case we only had one axis and it's
clearing it we're going to need to clear
everything so we don't just go crazy on
the memory so we're going to do that and
but anyway so what we're going to do is
just kind of mesh these two things
together so what I'm going to want to do
now is let's scroll go to the bottom of
your script and this is where we're
going to add our animate function and
it's gonna be a pretty simple function
this is going to be defined animate I
simple simple simple and all we want to
do an animate eye is call this so I'm
going to just cut paste stock that's
going to remain the same now the other
thing I'm going to do is go to this old
graph
thing here and just copy ashes copy they
both of these so copy that
come down here paste paste or tab rather
not paste it uh and fig anim intervals
everything everything should be the same
there's no change there so okay the
other thing we need to do comment out
this plot show order doing that no need
to save it every time although just for
the record anybody that has followed my
Django tutorials with this plot or with
this figure thing what you can do is
using Java scripts on a website if you
if you did follow my Django tutorial you
can post up these images on to I showed
you guys how to post up images onto your
Django website with JavaScript you can
make those images update live
subsequently you can run this plot you
can save the figure to the same you know
figure name every time run a JavaScript
that's even like a JSON that feeds in
the image information really and have
that update live and you have a live
updating graph obviously it wouldn't be
interactive in any way it would just be
visually updating but you could you
could actually do that Django site just
for the record anyway comment that out
though for now cuz we're not actually
going to use that and the other thing we
need to do is we need to move the
definition of our figure out of this
where is the definition of our figure um
I have to do ctrl F or something I don't
know where our figure definition is here
we go finally okay so it was let's I
don't know 30 lines down right
underneath the definition at 81 82 SP
and then figure so just like highlight
that control X cut come all the way down
to the bottom and we'll just paste that
right here you put that anywhere outside
of a function doesn't really matter
where you stuff that have to move that
out though and the only other thing that
we need to do really is scroll to the
top of your script on this graph
and come down here and call fig dot CLF
empty parameters this is going to do is
clear the figure every time now because
the definition of figure is outside of a
function it will run and it will define
a figure before this is ever called so
you don't have to worry about it failing
at some point or whatever and I think
we're all set
let me just let's look through this one
last time make sure we're doing
everything the way that we want to do it
and I don't really need a one-second
interval that's for sure
well change it to three just in case we
have an error sometimes you have an
error in it like the chart goes crazy on
you anyway save and I guess we're ready
to run so let me run it stock to plot
and just for the record we can clean
this up in a little bit but keep in mind
this is a while true loop and the wild
true loop is going to run animation and
in animation
it runs graph data so every three
seconds it's going to run this function
this entire function so you're going to
get a lot of repeat like currently
pulling currently polling currently
polling and if you have any error it's
gonna be like error it's made a lot of
errors
so anyway sector plot Apple let's just
okay and it okay
I knew we were going to have to forget
something yeah anyway we need to import
that animation format plot lib so we'll
just come down here and we're going to
do a import Matt plot lived in animation
as animation save that run it again and
endure the error because you gave a
figure and you never showed it and makes
Python very angry when you do that at
least it does for me anyway Apple please
work cool all right so here is Apple we
are running it every three actually just
updated now that's kind of a bummer
hopefully you guys saw
that but anyway what I'm going to do now
is I'm just going to walk away from the
computer and do a few things and we
should get at least a few updates
showing so let me just do this make it
nice and pretty over here
whoo all right so I'm just going to let
it update for a little bit and I'll
speed it up in the video as it goes
you
all right so we've seen quite a few
updates and while I was gone I realized
that I wonder how delayed the Yahoo API
really is because again now the mark has
been open for an hour and a half we've
got you know this many minutes worth of
updates but we're dealing with a 50
simple moving average which means 50
plots won't even show and so again we're
an hour and a half into the market open
we've got a calm and pause well
accountant at the moment 39 so at one
more 40 that would mean we had a 130 or
rather sorry an hour and a half worth of
update the worth of updates right so
you'd have 60 plus 30 right so 90
updates so you'd have an hour and a half
so to be honest I don't even I'm not
positive I'm pretty sure the data is
delayed but we have an hour and a half
worth of data I don't know
so hit me it's real time but anyway as
you probably see in the video the chart
is updating real time so yeah I'm going
to close out of the chart now and that
pretty much covers the live updating
chart the there's a couple more things I
still want to do to this chart however I
want to get rid of empty time so like
like we were just looking at with the
three day how it has a massive gap
because of the weekend and then you've
also got overnight gaps so we want to
get rid of those gaps or at least I'll
show you guys how to get rid of them if
you want to the one day open high/low
close
I actually kind of if you're looking at
data with one day open high/low close in
mind I don't really think that you want
to get rid of the gaps I don't think
they make a big enough difference and
sometimes it's pretty beneficial to see
the gaps but in the scenario of what
we're doing here it's a huge deal like
if you want to look at three day open
high/low close it's just it's really
hard to look at the graph and not cry so
so I'll be showing that also what I want
to start doing is I'll show you guys how
to incorporate possibly the RSI maybe a
buy signal from the Rs
and then also our cell signal even or
you know a range of signals based on the
RSI we'll probably do that first
maybe the the MACD but we'll start with
the RSI and I'll show you guys how you
can dynamically change the spines of the
chart and if anybody isn't too positive
on what the spine of the chart is and
they pull up a Yahoo chart real quick
and actually along less so here's our
Yahoo chart the spines are like what's
blue here right so all of this is a
spine so it's obviously not integral
that these spines are blue they could be
anything right so we can not only we can
we can change the color of the spines we
can also change the color of all the
tick labels so what I've done in the
past is like like for right now it's
kind of the RSI let's say we're using as
an indicator it's kind of in the middle
so maybe leave it blue because it's it's
don't fish but if our RSI was maybe
crossing over into let's say this area
here so it's like over by like as it
gets closer to this line we might end up
changing the color of these spines more
to red or the tick labels to red and as
it lowers it's getting closer to green
and that way you can eventually not only
have Yahoo up here but you could have a
massive figure with like Yahoo here
Apple here Google here Microsoft here
and so on all the way down you can have
like 50 um 50 stocks on like one one
monitor basically just like this and you
have the MACD the RSI this actual price
they're all updating live and and I'm
starting to think that the Yahoo API is
live something must be wrong here I'm
not sure how it could possibly be live
I'm pretty sure they have to be delayed
but anyway near live prices anyways and
that way you can actually monitor all
these stocks at the same time and just
visually quickly see you really quickly
like look through the the actual
the RSI itself and see it it's really it
makes it really really easy when the
charts are like color-coded based on
either a buy or a sell signal and then I
can even start showing you guys how you
can begin to possibly incorporate maybe
RSI plus MACD right so you have some buy
and sell indications from the RSI you've
also got buy and sell indications that
come from the MACD you've also got buy
and sell indications based on these
moving averages so with all that you can
do a lot of really cool stuff and again
the whole purpose of the this series
with the charting was so you guys can do
it on your own so a lot of people many
people actually buy access access
conversion of axes and access buy access
to charting applications like this that
do stuff like this for them and it you
just you really don't have to do that
you can you can do pretty much
everything yourself and I'd like to
think that everybody that started this
series didn't really need any knowledge
in Python or matplotlib and can get to
this point so it's definitely useful
stuff to have so what anyways with that
I'm going to conclude this video I think
probably the next video will chop out
the gaps in the three day and then we'll
start working on the live updating
dynamic spines and stuff and we'll start
with just like a very simple just just
with the RSI and so on so anyways
hopefully you guys have enjoyed
hopefully you've had some sense of
accomplishment at the live updating
chart I really like my live updating
charts it took me a while to figure it
out and it's actually pretty basic I
don't know why that there's not more
information out there on how to make a
live updating chart but that's the way
it is so hopefully you guys have enjoyed
if you have any problems anything going
wrong please feel free to leave a
comment below I do get them and I
respond to them so with that as always
thanks for watching thank you for your
support your subscriptions and until
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>