<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Monte Carlo Simulation and Python 11 - Using Monte Carlo to find best multiple | Coder Coacher - Coaching Coders</title><meta content="Monte Carlo Simulation and Python 11 - Using Monte Carlo to find best multiple - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Monte Carlo Simulation and Python 11 - Using Monte Carlo to find best multiple</b></h2><h5 class="post__date">2014-03-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/48QPYiI1iXo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to
another Monte Carlo in Python tutorial
video in the last video we got the
variables for the you know comparison of
going bust versus making a profit
chances we did this between the simple
better and the double or better and the
next thing that we want to know though
is is there another multiple besides two
that is going to be a better multiple
and so that is the question and luckily
we can just brute force this with our
Monte Carlo simulation now this number
is something that will be pretty unique
but the numbers like wager size wager
count and starting funds but mostly
wager sizes starting funds those two
variables are probably linked very
closely to each other and should be
better thought of how much of a
percentage of your starting funds should
you wager rather than ten thousand and
one hundred right so the next thing that
we want to do here is we want to use
Monte Carlo simulator to tell us if we
can find a better variable to use rather
than two and then later on we can use
the Monte Carlo simulator to do even
more stuff but we want to keep it pretty
simple and basic for now and so at least
I will just mention there's one logical
flaw with only using the singular
variable and that logical flaw is the
following if right now we're only saying
either did you make a profit or did you
go bust we're not considering what about
the people that didn't go bust how much
money did they lose did they only lose
like 500 on average or do they lose you
know nine thousand on average and then
of the people that made a profit how
much profit did they make did they make
a billion dollars
or did they only make a very small
marginal amount so even if for example
if you right now the variable we're
going to use is our bust rate was thirty
one point two three five percent I did
it across 1 million scene
apples and then the profit sixty three
point two zero eight percent profited
with our doubler method now the question
though is of those sixty three percent
how much profit did they really make so
if a third of everyone's going bust and
our profit errs are only profiting one
thousand units on average then this is
not a good method because there's not
enough profit to offset the losses so
just keep that in mind we will get to
that soon and we will show some actual
figures of what's their actual profit or
loss and then actually maybe tying all
three of the variables together or I'm
and decided if I'm going to take it that
far or not so we'll see anyway let's go
ahead and get started so we go up here
and we're gonna set some variables that
we want to that we know we need to beat
so lower bus so we want to have a bust
rate that is lower than thirty one point
two three five and then we want to have
a higher profit right than sixty three
point two oh eight so those are the
variables that we want to be now let's
say our sample size we'll leave this all
we'll leave that all for now now what we
want is a multiples better and the
multiple better is going to be very
similar to our double or better trying
to think of I just want to copy and
paste our double or better if I want to
just type it in it might take a while to
type it in but I think we'll just type
it in so we don't miss anything
it'd be pretty easy to screw this one up
so define it's a pull underscore better
and at least we'll copy and paste some
stuff mmm we don't care about color
we're not gonna plot it right now so
paste those variables in their
parameters rather and just like we had
double or better have doubler bus and
doubler profits we're gonna do the same
thing these variables don't exist yet
but they will
so multiple busts not with a capital B
though and global
to mold to pull profits value starts off
as funds wager starts off as initial
wager WX + wy guess we're not really
going to be plotting this stuff but
let's have it there for now
current wager equals one previous wager
equals win and actually at this point we
are gonna copy and paste there's really
the only variable that's gonna change is
this doubler stuff and we'll just edit
those in alright that makes a whole lot
more sense so if some of you guys were
like no anyway and we don't need a plot
but I'll just at that in a second so
copy this so basically I'm going to
double or better starting at previous
wager amount highlighting all the way
down to the end copy and then we'll come
here paste okay so now what we want to
do is check everything
let's see cuz the at least we know
multiple bus and multiple profits so
we're looking let's look for doubler
first
so at least this I think this is really
all we have to do then multiple well
busts yeah so multiple busts mole pull
bus we have another bus somewhere there
we go
mold busts now we need a random multiple
hmm so right here we're doing two
instead we're gonna do a random multiple
and again same thing here
random multiple mold so that uses our
random multiple I believe that's the
only two spots that we really need that
and I think everything else here we can
leave we don't really need to be
appending all this stuff cuz we're not
gonna graph it but that's ok we'll just
comment that out that's just the
plotting that really adds to performance
leaching so anyway when we're all done
in here multiple wager multiple profit
its current wager plus equals one if
value I think what we want to do really
is something like I mean we can leave
this here a current wager plus equals
one really needs to be right under here
okay so that's good and then at the end
of the while loop current wager okay so
that's just at the very end it does this
so I guess there's just one last check
so I think everything's good now we'll
find out really quick I think so anyway
now what we want to do is we want to
come down here all the way and let's go
ahead and let's see you can get rid of
the scary this this needs to be multiple
multiple busts multiple busts and we'll
keep one of these will keep double or
better we'll get rid of this this will
get rid of and really all this will get
rid of okay so what we're left with is
the calling of this function X plus
equals one will will add or a while loop
in just a moment
I'm just wanted to clean away some of
that stuff that we don't need anymore so
x equals zero and what we want to do now
is we want to say wow X is less than you
know in fact why don't we just do this
while true we don't even need those
we'll just let this continue running so
we don't need any of that so we'll just
put this under here so if you're not
familiar while true just means it's an
infinite loop it will run forever
so we want multiple busts equals zero
point zero multiple profits equals zero
point zero now what we want to know
multiple samp
and we're gonna put this equal to we'll
say a hundred thousand so what what my
plan is is first we're going to set this
like this so the other
the previous the previous script what it
was doing was it was running a bunch of
examples and it gave us the mean of
everybody that did that exact same
strategy for that exact amount of time
and all of that so you get every or not
every but you get a decent sample size
so my goal is to pick a random number
and then check it across a hundred
thousand samples and if it gives a
better result than you know both of
these it must do better than lower bust
and higher profit if it does that let me
know what though that multiple was so
that's the plan so anyway continuing on
we're gonna do it we're gonna check for
a hundred thousand per random multiple
that we make up we're gonna currently
say the current sample equals one and
then we'll come down here and now we
need to generate just a random multiple
so we're gonna do random underscore
multiple equals random uniform and this
will give zero point one and will do
zero point one two ten point oh I don't
think a number larger than ten is going
to be the victor it's probably going to
be a number actually smaller than two so
oh that's why I just don't really see
the point of going any larger it's just
going to be a huge waste of time most
likely so that'll definitely encompass
what we want I think now the next thing
and feel free to pick different numbers
here if you want to put something else
in there
go ahead these are just the numbers I'm
going to pick so now we're going to do
is while current sample is less than or
equal to moult's pull Sam sighs what do
we do this is where we're gonna run not
doubler better
we're gonna run multiple better molten
pool but uh and multiple better random
multiple do we add veranda multiple up
here where's our multiple better
areas so we need to see and then we're
coming a random multiple I don't think
that we have our random multiple that we
need
I guess ran it because we're gonna edit
the variable so actually I don't really
we won't need to global it so as I was
random multiple so we'll run multiple
better and so basically what's gonna do
is well true it's just going to run
through all of this pick a random
multiple and it's gonna use random
multiple for that variable and multiple
better and what its gonna do is while
current sample is less than or equal to
multiple sample size so it's gonna do
this for a hundred thousand attempts
it's gonna save everything those
variables that we've put in there some
moult's multiple bus multiple prophets
and then current sample plus equals one
and then at the very end we want it to
alert us if we've had some sort of
success right so if we find something
that we really that's better than both
of those variables we want to know so
we're gonna make a really long if
statement and it's gonna go off the
screen so I'll try to code it kind of
slow so everybody can follow along so if
in the first if statement you're going
to want to put it in parenthesis here if
multiple underscore busts divided by
multiple loops I'd type owed multiple
samp size times 100 point 0 0 is less
than lower plus so if the bust rate is
less than lower bus which is the
variable we sent setup before now we
want to have an and so we're gonna want
to encase this entire statement in
parentheses and
just check to make sure that okay so
that it does closed off everything and
so if this is the case and the following
is the case so again multiple underscore
profits divided by molt sand size times
100 point 0 0 is greater than higher
profit and now we want to in case this
all in parentheses good :
enter now we're back underneath this
super long statement so if we have a
lower busts rate and a higher profit
rate what do we want to do well if we do
have that as the case then we'd like it
to you know report it to us so we're
gonna say print and just so I can see
the differences between everybody we're
gonna print that and we'll print that
again down here and now I'll actually
print the stuff that we care about we're
gonna say found a winner the multiple
was and this is gonna tell us what the
random multiple was then we're gonna say
pre lower bust to be able to say the
lower bust and print higher profit rate
to be
our profit and now what we're gonna do
is we're going to print bust rate and
our bus rate was multiple busts divided
by Mol's Sam they're actually it's
multiple sand-sized times 100 is your
zero and then finally we want to print
profit rate and profit rate is again
multiple bus divided by multiple samp
size times point zero zero and that's
everything so but when we're all done
that's the scenario now just for
debugging purposes I'd like to see the
else for now we will shut up the else
momentarily but we want to make sure
that we're seeing numbers that we
believe to be you know legitimate
numbers and we're actually running
everything right so for this part let's
copy and paste this down but we did not
find a winner we found a loser instead
and that's enough so at this point
that's all we really need so let's go
ahead and save and run
chances are there was a typo somewhere
at least so let's see what we get sure
enough v.y is not defined that came back
to bite us in the butt and we don't even
need it but V why I don't even know her
V why is who's got V Y V what Wow oh
it's supposed to be value Y so this is V
what
okay got it chicky chick okay so now
it's checking their animals pull found a
loser the multiple was eight point two
bust rate ninety-five percent of
everybody went bust profit rate
ninety-five percent made a Prag
can be right you know we're doing the
same math here let's go back down here
okay multiple prophets or multiple
prophet I can't remember which prophets
and multiple profits run idiot urban and
urban
okay these are the old ones up here
alright that's looking a little better
so here we go we found a loser
multiple was 5.5 91 percent of everybody
went bust only eight percent made a
profit here we have a two point six high
bus ray and a low profit rate of 39
seven point okay so you guys get the
point I'm gonna close this out and now
we're gonna just search for winners we
don't care about the losers that'll do
Oh save run and so I'll just let this
run for a little bit and we'll see if we
find any winners and if so where are
they not sure how we ran into this one
now but not before but anyways moulting
I guess cuz we only found losers we
found a winner and we'll never know what
it was because we typo'd molt samp sighs
so where are we multiple or at least I
thought we did let's see if okay so we
found one that was least better than
this but then it failed this one molten
pool okay so saving running and I'll
pause again hopefully we'll have actual
results soon all right everybody we've
got at least a few samples now so I'll
just bring them over let me make the
window</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>