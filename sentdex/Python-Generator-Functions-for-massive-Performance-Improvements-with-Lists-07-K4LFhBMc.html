<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Generator Functions for massive Performance Improvements with Lists | Coder Coacher - Coaching Coders</title><meta content="Python Generator Functions for massive Performance Improvements with Lists - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Generator Functions for massive Performance Improvements with Lists</b></h2><h5 class="post__date">2013-11-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/07-K4LFhBMc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome to
another Python tutorial video this video
is going to be covering a bit more of an
advanced topic and it's going to be
concerning generators within Python
first off what even is a generator the
idea of a generator is to generate the
specific item that you're looking for in
a list that you want to use and you're
like say you want to iterate through a
list the idea of the generators to
generate that item that you need right
at that moment then throw it away when
you're done it's also called like lazy
generation that kind of stuff and the
end result of this is a just drastic
improvement in processing time most of
the time it's going to be like a night
and day difference when it comes to
memory usage you might even find that
some of the tasks that were the most
memory using tasks that you were doing
suddenly are using no noticeable
difference in memory at all right or you
don't even notice that they're using
memory Rather's what I'm trying to say
it's a huge difference alongside that
you're also your processing time will
improve pretty significantly now
depending on the kind of operation
you're doing the processing time you
might not notice such a substantial
increase and sometimes your processing
time will improve but for that short
span where it's doing whatever it's
supposed to be doing your your actual
CPU usage will increase even though Ram
will in theory go down CPU usage might
go up for the most part though if you
use these correctly I mean it could be
the difference between like say you're
you're running you know some sort of web
app or something like that you're
processing costs are maybe $100 a month
like the difference between that is like
you might be using a hundred dollars a
month of processing and use this and it
changes to like a dollar I'm toward the
process and it's just huge differences
so knowing and understanding generators
and like the scenario where you might
get a generator is pretty useful so one
of the easiest ways to show this
is when you're considering a some sort
of a huge list and in this case we're
going to use a range function to
generate a massive list for ourselves um
you don't really need to import anything
to write your own generator I'm going to
import time simply because we're going
to be benchmarking some stuff so what
I'm going to call this variable start t4
start time and that's going to equal
whatever time that time is at at the
time and then we're going to say x
equals range and we're going to do the
range of 150 million to 300 million
um and then we're going to say we want
to print X 5 5 5 so the 550 6th a number
basically is with 5 5 5 will give us and
then we're going to say print time took
with time I just wanna say time normally
took will be current time time - start
time it's a little print out you know
how many seconds this process took to do
it now what I'm also going to do is I'll
bring over my processing here just for
the sense of benchmarking my processors
in i7 3930k overclocked about 40% and my
ram i have 16 gigs of ram so now let's
run this and see what happens with this
typical ring whoops wrong key anyway run
it pull this up and you can see my ram
way up to about fourteen point three or
fourteen point five ish see the CPU
usage went up a little bit at least but
that might be something that's going on
the background it's really what happens
is it just stores that list to memory so
we can come over here and we can see
that okay it did print the 556 so to
speak value which ended up being you
know 150 million 555 and the time it
took to do this was two point three one
seconds so we'll leave that there
I'll leave the processor there two or
all this stuff there and also while the
program is still running it's still
storing this range in the memory so we
couldn't very print X and it would print
out that range so it's all stored to ram
what you'll see as soon as I close out
of this as it dumps the memory it should
jump back down again or drop back down
again as you can see now it's 10.1
gigabytes so you can see both at
processing time and RAM usage either
even if you've dumped X like a theory
what you can do sometimes if you can't
use generators you could say X equals
this whenever you're all done and that
would dump X right so you could do that
but while it's calculating it's still
using that much RAM you know until you
dump X so a Python actual has built-in
function called X range which is very
similar to the typical range only you
just call it X range so literally going
to just copy this and paste it down here
and just jump jumble them together and
then we'll call this a generator took
and then the only thing is range you
just say X range and this specifies
Python generator function that does
basically the exact same thing that
range would do only it uses a generator
so now let's go ahead and benchmark this
stuff and I'll pull this over again
actually we should I should cancel the
one but then we'll compare them anyways
so you can see the the the time normally
took about one point eight seven seconds
whereas with the generator it took 1.1
seconds and the other thing I wouldn't
mind doing is let's go ahead and dump
this for now and then just display the
RAM usage here so CPU usage kind of
spiked a little bit otherwise nothing
much happened there and then you can
also see the generator actually this
time took point zero zero three nine
nine I know whatever so let me run that
again except more like the results I'm
looking for anyways yeah so you can see
it did it again could possibly be just
the
restore egde of X possibly I'm not quite
sure let's call this fly in Y and see if
that makes any noticeable change for us
there we go so the main issue there the
reason why at the first attempt it took
so long was we were using the same
variable so this was just replacing that
variable and I think that's what took it
so long so this is the drastic increase
that you should have been seeing so not
only in this specific scenario do we see
the massive not only time increase or
massive time decrease rather we also
could see although you know because we
didn't clear why we also saw when we
just ran the basic version he heard with
the range down here we also saw that I
mean there was like you didn't even
notice the the RAM so huge differences
as you can see and then also obviously
the same functionality so then the
question is you know okay cool you know
we can make large range functions you
know can we actually harness this power
for our own custom tasks right and the
answer that yes yes you can it's just a
syntactical change basically that you're
going to have to do so now let's
consider something and actually we won't
use well let me just show you so what
we're going to do here is we'll just
delete all of these for now and actually
we'll leave I'll leave the benchmarking
stuff there and so now the regular one
we're going to say for n in range of 1
million so we'll make a for loop we're
going to say x equals n plus n so it's
just going to add itself together
now since this is such a large digit or
a large number like for example I could
just do this ten and then we'll just say
print X for now and then all will go
back on this in just a moment
so now if we come down here and we said
we'd make this now a generator we'll
call this simple gen equals and then
we're going to do n plus and for n in
range so we're not even using X range
here and then we'll just do 10 right so
we'll do that and that as both of these
will end up this will iterate through
the list this will create a list that we
can't iterate through so then we would
say you know for n in simple gen print n
save that and this is ten that's ten
generator took so we can do that make
sure we did everything right let's go
ahead and run that now and just so you
guys can see that it's doing the same
thing we printed it out I don't want to
print it out but I just want to show you
the performance difference after this I
just want to show you the same thing so
for each number it's just adding it to
each other right and so this was
slightly quicker but we were using such
a small number that there's no you know
not surprisingly a huge noticeable
difference so now let's get rid of the
actual printing process so we could even
say for n in simple gen pass just to
make it the most fair calculation
possible so we could say so if 10 we
could go ten a thousand so I had just
three zeros and run it
and here you can see that the time
normally took you know point zero zero
five
this one was point zero zero three close
out of this let's add you know three
more zeros here run it again and then
again not the hugest production
difference there simply because we are
iterating through just a regular thing
but anyway you get the idea there and
now finally let's make an even another
function here so let's delete this and
delete this and this one we're going to
be we're going to find two functions
this will be defined add nums and then n
for the numbers that we want to add and
then we're going to say all n for all
numbers equals range and we're going to
say x equals zero current num equals
zero and then while X is less than
length of all n we want to do cur num
plus equal oops sorry plus equals x and
then X plus equals one finally when this
is all done we return turn on and what
this is going to do is just going to add
every number and the range of this so if
we put say 10 it's going to add 1 plus 2
Plus 3 plus 4 plus 5 and so on all the
way to 10 so that's what this function
is going to do now let's write a
function that does the exact same thing
and we'll do that down here so we'll say
I think here so it'll be defined we'll
do add nums Jen and so no difference
there and then we'll say curl um equals
zero and then here we do Wow her mom is
less than n we are going to yield
Colonel yield is used with their
generators is basically the same thing
as return only it's like return for
generators basically and next kur none
plus equals one
now let's come down generator took want
to go ahead and print it out so let's
come here and we'll say print add nums
and then we'll do ten one two three one
two three so ten million then I'll just
copy this just so we don't screw up and
then down here I'll do print ad noms Jen
and then again ten million and then
we'll save this and we'll run this one
bring it over here and we'll wait watch
profile shoot anyway uh did we not maybe
we didn't hold it yeah my bed uh we need
to print the sum of add nums generator
try again son close that and if I rerun
it and I try to pull up here there we go
of course
okay so anyway I just want to leave the
processes or the this up while they were
running and so here we can see that we
got the same result the first one took
over three seconds to do and the second
one took just over two seconds to do so
now again just as I was saying before
you know some what some variations of
using generators aren't necessarily
going to offer you know huge differences
but the difference between 2.0 nine
seconds and 3.1 seven seconds spanned
over the course of something like this
that repeats all day I mean we're
talking huge huge differences here so
anyway generators are great tool for
pretty much anyone that's operating in
any commercial environment or something
that's using a lot of processing
constantly definitely a good addition to
give to your scripts if you can so
anyway that's going to cover generators
kind of a long ish tutorial but I wanted
to show a lot of examples as many or at
least three examples that kind of
illustrate the idea of a generator
compared to a similar non generator
function so hopefully that was helpful
for some of you guys that get a request
for this one so I wanted to put this out
anyway hopefully you guys enjoyed as
always thanks for watching thanks for
the support and subscriptions and until
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>