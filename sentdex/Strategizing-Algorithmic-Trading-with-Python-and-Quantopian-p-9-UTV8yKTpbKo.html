<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Strategizing - Algorithmic Trading with Python and Quantopian p. 9 | Coder Coacher - Coaching Coders</title><meta content="Strategizing - Algorithmic Trading with Python and Quantopian p. 9 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Strategizing - Algorithmic Trading with Python and Quantopian p. 9</b></h2><h5 class="post__date">2017-02-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UTV8yKTpbKo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome back
to the quanto beam tutorial series this
is part 9 in the series of algorithmic
trading with Python quanto peein in the
tutorials leading up to this we learned
basically how to do just a single quick
pass through a typical kind of workflow
that you might use on quanto beam or
really you should use on Kalon sofiane
and now what we're going to do is now
that we kind of run through that once my
kind of at least the way I personally
like to learn things is ok let's just
get through it once and then let's see
let's simplify it try to make some sort
of skeleton to really go off of as we
continue through this process and let's
try to improve along the way so that's
that's really what I'm going to be
trying to do here in the next couple of
videos so again the best thing to do is
like let's let's go back to this post
looking here ok the workflow that we
went through universe selection again
that was just the Q 1500 really easy
just to liquid-liquid companies from
Kwan so peon we did the single alpha
factor modeling with sentiment we'll go
ahead and we're going to keep that alpha
factor we we're going to decide that's a
good alpha factor then we're going to in
this one really specifically do the
alpha combination so in the last one we
found a single alpha factor and I just
simply said in a real situation you
would combine alpha beckers but we
really just wanted to get through the
entire workflow and not try to
complicate it so now we're going to do
is actually do the alpha factor
combination risk modeling we're still
going to kind of I mean obviously with
risk probably the best thing to pay
attention to things like drawdown
volatility that sort of thing and when
we get to UM with risk modeling for
example some of the things you'll see in
the back tests is going to be like for
example the last back test that we did
you'll see like Sharpe ratio in the
Sortino value here this it may not know
what those mean and so in the last
tutorial series that I do with quant
opium I got a lot of questions from
people like how did you learn all this
stuff
and I'm like what books did you read to
learn on these names and stuff like that
I didn't read any books every time I saw
a name or something or term I didn't
understand I went and googled it for
example the Sharpe ratio right here is
just straight from Google a measure that
indicates the average return minus the
risk-free return
divided by the standard deviation of a
return on investment
now you might read this and all this
should make a lot of sense I'm assuming
you know these standard deviation is but
you might not know like okay - the
risk-free return what's that well you
could Google it I'll tell you what it is
but you could do the let me climb this
answer as well but generally the
risk-free return I mean there is no
investment that has risk-free return but
in general we treat like the Treasury
bond for example like a ten year
Treasury bond that's a risk-free
investment in theory right it's not
totally risk-free but that's that's what
you're kind of measuring against now the
Sortino ratio is very much like the
Sharpe ratio really the only difference
is like Sharpe ratio it's going to be
that measure basically it's the average
return minus the risk-free return
divided by standard deviation on an
investment basically there it's a close
measure of volatility whereas over here
the Sharpe ratio is going to be
basically penalizing up and down
volatility pretty much equally whereas
the Sortino ratio it aims to not
penalize us for upwards you know
positive good good volatility only bad
volatility just some quick examples
there but again just if you don't
understand something look it up and if
it has to do with quanto pean i'm going
to come back to this page but their
documentation quanto be calm slash help
there's so much great information in
there so anyways that's risk modeling
which we kind of talked about but mostly
this is just literally you just define
and you need to calculate your risk
factors there are some things in some
ways that you can perfectly set risk
values and stuff like you can say I
don't want to exceed one leverage or
something like that you can actually
code your algorithm to make sure you
don't do that
now port part five portfolio
construction this is another one we're
going to kind of talk about some
advanced techniques for portfolio
construction and the last one we just
evenly weighted everything and we just
said the out 50% long 50% short and in
those
at perfectly even investment per company
so then finally executions backtest
okay cool and then really part of
execution is also just analyzing through
something like PI folio so in this kind
of next batch what we're going to be
doing is working on alpha combination
talking about a slightly more advanced
version of portfolio construction and
then also just kind of doing another run
through working with alpha factors
because it's actually probably a lot
simpler than your you might be thinking
at this point I'll kind of show you what
I've been doing now the last thing I
want to do before we get into that is
talk about our last strategy and kind of
go over what's wrong here so first of
all let's zoom out a little bit so this
was the the best back test of all the
bat tests that we had and just for the
record you know if you go to the back
test you could get algorithm and that
will take you to your current version of
the algorithm that's not necessarily
algorithm that ran that back test so if
you go here you can actually get the
exact code that was used for that back
test by bu code here and this is the
exact code so a couple of things to note
is this was the back test where I said
okay I don't want to go in like we found
the Alpha factor using the quantiles
because that's the only way but really
the the smarter thing to do is to use
the actual sentiment value because it's
not always going to be the case that
these are perfectly weighted so in our
case we found that actually there's a
lot of negative sentiment because our
shorts are so much larger than our
Long's
unless there's some other error here but
anyway well we'll go with that reasoning
so so this was the best example but we
also had one that used school quantiles
and stuff like that but we but we know
that okay we we know that when we ran
this for example in a non-market neutral
because this is the neutral year of
basically 2015 when we run this in a non
totally neutral year we do we do all
right we made a profit but we didn't
come close to beating the market because
our shorts were just really weighing us
down so there's that also viewing the
code we here we have commission set to
be
you know 0.001 per trade so a very very
small percentage cost per trade rather
than a minimum fee per trade that you
might see on your typical retail
brokerage also you can just comment this
out I can't do it so it's not a real
interpreter but anyways this is the code
you can comment out the set Commission
and then your your on the default
Commission which is the default for
interactive brokers and if we do that if
we do say okay rather than saying we're
paying a sheep Commission what do we
what do we get if we run the vib you
know personal account brokerage fees you
can see here we do significantly worse
with a lot more drawdown I don't recall
what our volatility was we still don't
have that crazyville volatility but or
Sharpe ratio is very bad switching
that's very bad just for the record
numbers that you'd like to see short
break show you know really above 1 above
2 is just probably a good target
same thing with Sortino hopefully sorty
knows better than your short ratio since
it's not penalizing two forms of
volatility but anyway yeah the only
difference in this code is that still
using the same kind of bind cell it's
just simply set commissions as commented
out so we're just that's how much fees
alone is affecting us now generally when
you're going to run through an algorithm
you're going to want to remove all the
friction possible and then slowly add
back in the friction and see if you can
if you can withstand that so adding the
friction here we can see now we're not
making it so in this pass what we want
to do is we want to work on
can we add friction can we let's combine
some alpha factors and see what kind of
impact that's going to make for us
and then also tort at towards the end
when we actually go to run a backtest
how we can a little more complicated but
how we can better do a portfolio
construction so I think that's all I
really want to bring up here in the next
video we're going to go back to our our
notebooks and really front in like two
or three entries into our notebook is
all we're going to need
to kind of get into a good a good method
of just quickly testing for alpha
factors then we'll combine them test
them and then we'll put them into a
strategy will work on portfolio
construction they're due to back test
see that how much better we do then here
we're going to try to pull back to us on
the same exact date so we can also do a
full back test so for I did eventually
do and I think I showed it I think this
is the full back test from as far as we
can with syntax data so from 2013 to the
latest of 2016 that we could do again we
can see we're just significantly
underperforming the market most likely
again because of those the shorts that
we're making we're just wrong too often
because we had that variance in stuff so
we're going to see if combining factors
is if we can improve these scores
significantly also this back test of our
call right is not paying trading fees
let's check correct well it's paying
trading fees just very small fees the
other thing just to take note is like if
you want to do if you want to compete in
the competition I think you have to be
on the default fees but one thing to
consider is most likely if you get an
allocation I I would guess I don't know
but I would guess quant opium their
account doesn't pay the the default kind
of personal account trading fees because
it should be a very large account and I
know only very recently did that amount
increase significantly from point 72 so
so we'll see if that makes a huge
difference but anyways yes so with all
that said let's get into the next video
where we're going to go back to research
and see if we can't if we can't improve
these scores so if you have any
questions comments concerns whatever
feel free to leave those below otherwise
I'll see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>