<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Matplotlib Tutorial 16 - Live graphs | Coder Coacher - Coaching Coders</title><meta content="Matplotlib Tutorial 16 - Live graphs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Matplotlib Tutorial 16 - Live graphs</b></h2><h5 class="post__date">2015-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZmYPzESC5YY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome to
part 16 of our data visualization with
matplotlib and python tutorial series in
this video we're going to be talking
about live graphs with Python so if
you're following along linearly this is
the code that we're we've left off on
we're gonna go ahead and delete it but
if you're following along and you're
going to continue along in this series I
suggest you save this code somewhere
otherwise you can go ahead and head to
Python program net and like reget the
code so anyway I'm going to delete this
code and now what we're going to do is
just purely post code or write code here
that's applicable to this specific video
so first of all we want to import
matplotlib dot pi plot as PLT that
doesn't change we've been doing that
this whole time and really that'll never
change then what we want to go ahead and
do is we're going to bring in the
animation functionality so import mat
plot live dot animation as animation
then we're going to bring in one more
thing and that would be from matplotlib
import style so we've kind of covered
styles already we just use it to quickly
make our graph look a little more
appealing than it does naturally so
first we'll do styled I use and we're
going to say style that use will do that
538 that seems to be my favorite one
next what we're going to do is we're
going to say fig equals PLT dot figure
and then we'll add in access whoops
we'll fix this figure now we're going to
add an axis so we'll say a x1 equals fig
dot add underscore subplot and then
we'll do a one by one by one so add
subplot I don't think we've really
covered much of this we did subplot two
grid before neither of these we've
really talked about depth so really
don't worry about it but it this just
means it's a subplot that's on a
basically a grid sort of system that's a
one by one and this is plot number one
but we'll talk more about those later on
now what we're going to do is we're
going to say define animate and then
we'll pass one
parameter will be I and that'll be the
interval and then now what we're going
to say is we're going to call graph
underscore data and we're going to say
graph data is equal to open and then
we're going to create a sample file it
doesn't exist yet but we'll just say
sample file dot txt with the intention
to read and then we'll go ahead and read
it
now again we don't have that file yet so
let's go ahead and create it now so this
is where I'm coding all this this is the
actual script that we're writing right
now so just down here or actually we
already have an example file from the
previous tutorials so let's just use
this one actually so double click on
that just to bring it up basically it's
just 1 2 3 4 5 6 9 10 and then for those
are the X's then we've got some random
Y's it really doesn't matter you can put
in whatever coordinates you really want
these are just the ones I'm going to
work with so I'm going to leave this
file up I'm just going to put it over
here for now so this was example dot tex
so let's just change this to example dot
text save that so now we have the file
and then now what we're going to go
ahead and do is we'll say lines equals
graph underscore data dot split and
we're going to split this by the newline
okay so backslash n is the new line then
what we're going to do is we're going to
have the X's equals to an empty list and
the Y's equal to an empty list and then
what we're going to say is a four line
in lines what do we want to do well
we're gonna say if Len of line is
greater than one so sometimes you might
have like a line like an empty line at
the end of your files so I always like
to handle for this just check to make
sure that line is not totally empty it's
a really common thing people are asked
people asked like you know how do I trim
away that empty line and stuff well you
can just use them handling you can trim
away that empty line with some code or
you can just handle for hey if that line
is empty ignore it and this is usually
less less logic required so anyway so if
the length of the line is
then one we're going to say X comma Y is
equal to line dot split and we split by
a comma because our delimiter here in
our file was commas so we'll split by
comma and then we're going to say X's
dot append X Y Z pend Y and really
that's it so then what we're going to do
is after we'll get out of this for loop
and then now what we want to do is we
want to modify our axes so first of all
the plot we already know how to plot we
could do a X 1 dot plot and we plot the
X's and the Y's and that's all we have
to do in our animation function in
theory but the problem is if basically
this animation function is just going to
keep running it'll keep updating our
figure and every time we draw something
to the screen there's nothing to get rid
of that something that we've drawn
previously so we also want to call an ax
1 dot clear before we plot the new data
so that'll wipe the slate clean and then
redraw including new data if there is
new data or not it's a relatively
computationally light really the heavy
computation is the actual drawing of
anything and then the rendering of those
things so clearing everything out is
really doesn't cost us anything I mean
it cost a little bit but nothing much so
like some people kind of consider that
like you're like wasting or something
like you're clearing away and then
you're drawing like 99% of what you had
before but it really doesn't cost you
much it's the rendering that cost you
the most and having many many lines cost
you a lot so anyway
clear so that's our animation and
function here now we're going to do is
come outside of this function that we've
been writing and now we'll just do an e
or a ni for animate and we're going to
say that is equal to animation which is
in reference to this right here that
we've imported equals so animation dot
capital F func
animation so this is a method that
allows us to animate based on a function
if you can guess we're going to animate
based on this function here so func
animation and then the question is where
are we going to animate the
this function too well figure we've
defined that up here then what is the
function that we're going to animate
let's animate and then finally any
parameters that you're going to pass and
stuff we would do that and we're just
going to say interval equals a thousand
this is in milliseconds so a thousand
milliseconds is one second so every one
second this graph will update along
those same lines in order to this will
update in the background but we don't
have a PLT dot show so we need to call
that now so a PLT show and that's it so
now we'll save and run this and up pops
our current graph it is updating whether
or not you know it and we'll come over
here let's put the graph like right here
and then this is the the sample file
that we've been working on so I'm just
going to add I don't know 11 5 so 11
comma 5 ctrl s to save and there you
have it our graph is updated and I mean
we can keep going like 12 11 if we want
so you can see it just keeps updating 13
7 and so on so you can use this to
really have updating graphs anywhere
right like it just so happens that we're
pulling from a static text file that
only gets updates from us but as I've
already shown you guys we can pull
information for stocks offline for an
example there and so you could have
graphs pulling from some sort of stock
price API and the graph is actually
updating live on your screen
so that's pretty useful and also another
useful aspect people use live graphs for
is like sensors so people will use
matplotlib to display data from a sensor
but a lot of times that sensor data is
really live and it's coming in
constantly so they would use these this
animation function so I don't have to
keep like loading the graph over and
over or something like that anyway
that's it for this tutorial if you have
any questions or comments up to this
point please feel free to leave them
below otherwise as always thanks for
watching thanks for all the support and
subscriptions and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>