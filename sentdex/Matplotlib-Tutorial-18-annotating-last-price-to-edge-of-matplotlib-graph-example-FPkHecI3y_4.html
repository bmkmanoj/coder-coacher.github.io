<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Matplotlib Tutorial 18 - annotating last price to edge of matplotlib graph example | Coder Coacher - Coaching Coders</title><meta content="Matplotlib Tutorial 18 - annotating last price to edge of matplotlib graph example - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Matplotlib Tutorial 18 - annotating last price to edge of matplotlib graph example</b></h2><h5 class="post__date">2015-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FPkHecI3y_4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome to
part 18 of our matplotlib tutorial
series in this part what we're going to
talk about is an example of using
annotations to plot stock price outside
of the graph kind of so when we plot a
stock chart a lot of times it's it's
hard to see like you can look at price
on the left hand side there and you can
kind of see what you know the current
price is but a lot of times we care very
highly about what's like the current
last price so like with eBay for example
it's like I don't know what I know what
the current price is I mean I guess we
would go with the close and it's
probably here is the close or here is
the close but we really don't know and
that's anywhere between 61 and 61.5 so a
lot of times what people want to do is
they want to have an annotation of price
over to the right hand side so this
would be like an example of a graphing
application that's doing that I just
typed in like stock prices to Google
Images and found this so a lot of
graphing applications will do that
they'll annotate the price to the right
hand side mirror where that last price
is and then it moves so it's really easy
to find out hey what was the actual last
price so a lot of people were asking me
about this in my tkinter series and I
just never got around to adding it but
this is how you do it so we'll close out
of this and close out of this and let's
go ahead and add that now and so with
annotations it's it's really not too
much
on top of what we've already you won't
really won't learn anything new it's
just an example of you know putting this
to work so first I'm going to get rid of
these annotations here so I'm just gonna
highlight all of these and alt 3 that
comments them out and in fact actually
let's do let me just leave a note here
annotation example with arrow and then
down here this was our font dict example
and then finally
I don't know hard coded text okay and
then I'll go this and now all three this
okay so now what we're going to do is
we're going to place what we would do
like an annotations here so we would say
ax 1 dot a note 8 and what we would
annotate here is something like we would
do the string of close P minus 1 so
that's the like what is the text that we
want to annotate here well we want to
annotate whatever the last price was but
that's gonna mean int so we're actually
to float spoke we want to convert that
to a string so we're doing that first so
that's the last price then we have to
like what are we annotating basically
and so that would be like where is this
going to be located so we want to
annotate that and the annotate that it's
like you know basically pointing to is
date minus 1 and then close P minus 1
this one doesn't matter so much but it
you know it could it depends on how you
want to handle this but in our case it
really won't make too much of a
difference and then now we're gonna say
XY text and before remember we did this
as an axis for action well we're not
going to do that because we actually we
want this to kind of move dynamically
with the price so we would say XY text
equals date minus 1 so what was the last
date and then what we're gonna do is we
would add some to it because again this
is actually the if you pay attention you
can see here this would be your spine
and this would be your spine and the
annotation of price is usually like
off-the-charts so to speak it's it's off
of the graph so we want the same thing
so we're gonna say the last date that's
our x-axis so we're gonna say the last
date plus let's do for for now and so
that will hopefully move us over quite a
bit and then we're you know where is the
y that we want this well generally you
place that annotation dynamically up or
down in accordance to the price so for
us we wanted we want it to be exactly
where that
P is so we're gonna say close P minus
one and that really can be it but we can
add a little bit more so first let's
like bring this up and let's see how
that looks
non keyword argument what are we doing
here XY text so we forgot to put this in
parenthesis there let's try it one more
time I'm still getting invalid syntax
here what have we done so we I guess we
just totally forgot yeah the parenthesis
there so now we can see that at least we
have the price that we're running us we
don't really have the space here so we
can well fix that because we already
have the adjustments there so we have
the price there so we can see the last
price was sixty point nine nine so okay
we'll close this let's go to the bottom
here and on right currently it says
point nine four we'll change that to
point and I know and then what we're
gonna do is come back up to our
annotation here where are we there we go
and now we can kind of customize that so
if you if you can see here we've got so
we actually real cover something new
congratulations for those who didn't
leave right away so you've got like this
little box here right like we can we can
customize to handle for that kind of
situation so for example after we give
the XY text we can give one more
parameter here and we're gonna say B B
well B box equals B Box underscore props
and then we'll just add those props
right up here so now we're gonna say is
B Box underscore props equals so these
are just the box properties right so
props whenever you see that it's like
short for properties we like to give
nicknames through our things in Python
because we're cool and so P box props
will be the dict of and then in here
we're gonna say box style and you can
give a bunch of box styles so for those
of you don't know you can always like
like I've tried to kind of illustrate
before if there's something you're just
not you don't know on matplotlib or
really any module you go to google and
you type it in so for it in in this
example if you want to know more about
annotating
matplotlib what am I more of my options
you would type in matplotlib annotate
hit enter on Google and you find
yourself probably on this page and so
this gives us all the kind of examples
of annotations that we might might have
and then down here these are kind of
like the styles that are possible here
and then these are kind of like visual
examples of what those styles would look
like so either round or maybe round 4 or
the left arrow would be you know valid
choices here so let me move this over
again and so we're gonna say box style
that's what we were just looking at was
box styles we're gonna say box style
equals and we'll just do the round let's
choose that round option and then you
can add padding if you want we're just
gonna leave it alone for now and then
you've got face color and edge color
okay so face color we're gonna say the
face color is white and then the edge
color will make black which is K so W is
short for white K is black because B is
blue so anyway and then we can change
the line width if we wanted I think
we'll leave that for now we'll say line
width equals 1 just so you can change it
if you want but that's about it
so there are a bunch of parameters there
for our box here let's run it now and
see what we're looking at all right so
now you've got kind of like this box
here that has our price of course our
default load is still kind of man we
should kind of give ourselves some more
space on the bottom in the left so let's
go ahead and change that to for those of
you who are following linearly so bottom
will give it point two four and left
will give point 11 see how we do now
beautiful we need a little bit more
right though but anyway okay cool so
that's looking pretty good so you could
also do like that gives us the price but
you could also go with like the left
arrow for example so instead of round we
can do I think it was L arrow L arrow
like that find out yeah okay
so there's that I'm just not I'm not the
biggest fan of that little
arrow I kind of like you know the round
is probably my favorite but the arrow is
a little more explicit and like what
it's actually doing so you can feel free
to choose whatever you want I'm gonna go
with the round though I like that one
the best I think or maybe around four
whoops not round four round four that
one's kind of good too
I don't know you can go with whatever
you want I think I'm gonna go back to
round anyway that's it for this tutorial
if you have any questions or comments up
to this point feel free to leave them
below otherwise as always thanks for
watching thanks for all the support on
subscriptions until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>