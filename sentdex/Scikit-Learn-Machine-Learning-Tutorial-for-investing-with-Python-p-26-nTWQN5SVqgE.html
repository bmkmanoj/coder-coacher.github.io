<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Scikit Learn Machine Learning Tutorial for investing with Python p. 26 | Coder Coacher - Coaching Coders</title><meta content="Scikit Learn Machine Learning Tutorial for investing with Python p. 26 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Scikit Learn Machine Learning Tutorial for investing with Python p. 26</b></h2><h5 class="post__date">2015-01-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nTWQN5SVqgE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to the
26th scikit-learn with python for
machine learning with our investing
example tutorial video in this video
we're going to kind of pick a pick up
where we left off in the last video
we're gonna actually kind of make it a
little easier for us to increase or
decrease our standards for what kind of
company we're looking for so we saw that
we got a huge list of companies and it
was maybe a little too large for some
people's liking so why not kind of raise
the standards a little bit and lower the
amount of stocks that are get returned
you know we want the ones that we feel
the most confident about so to do that
that we can actually add a little bit of
code into this script so the same we've
been using to actually run the back
tests the training and really the
forward suggestions we can use that
exact same script as usual so this is
that script and we're gonna add an
underscore and danced here I forgot that
and then a previous video or something
anyway underscore enhanced with na want
to make sure those two line up but what
we can do is we can actually calculate
status where ever statuses we can
calculate that column all on our own so
won't be here if those are features but
anyways so first of all we want to have
is a variable at the very top we're
gonna call this how far how much how
much better and this will be how much
better are we wanting when we go through
our our training set we're basically
gonna label the training set before we
actually start training and what we're
gonna label a 0 or a 1 we're gonna say
if it's five percent better than market
then it's a 1 otherwise it's a zero but
then we can come through we can change
that to 15 percent and because pandas
works pretty quick making that change
will be very seamless and very fast so
if we want to be toying around with this
number here's how we can do that at a
quick pace so first we're going to need
a new function and that function is
gonna be just status calc so we're
here and we're gonna define status
underscore calc as the following so
we're gonna need to be returned the
stock percent change and then we're also
going to need to pass through the S&amp;amp;P
500 percent change then to calculate
we're just gonna say the difference
equals stock minus SP 500 that's really
simple then we just need to ask a
question if difference is greater than
how much better you know that
requirement then we want to return 1
else return 0 and that's really it
that's our status calc function right so
that's our logic for how we're going to
calculate the status column that way for
that calculation we just change this
variable up here this constant up here
and that's it so now what we need to do
is in our build data set column here we
we can do something like this we can
either one redefine the status column or
we could define a new column and use
that call it really does not matter but
we could do data underscore DF and we
can say data DF and then we'll will
actually say I can't remember if this
will actually iterate through or not so
we're gonna call this status to just
because if it does iterate through we
would hit an error for sure anyway and
this is equal to see if you're on Python
2 you can get away with this a lot
easier than you can in Python 3 so well
with Python 2 you have to do the list
version of the map of the various this
following function status underscore
calc with the variables of data
underscore DF and then that is stock
underscore PE underscore change and then
the other variable that we're passing
through the parameter that we're passing
through his data underscore D F and then
sp500 underscore P underscore change so
these are the things that we want to
basically pass through this calculation
here so now all we need to do is we've
got status to and then you know this can
remain it's not really a big deal but
um well we're interested what is
happening here let's let's get real
why is forward sample I'm not even sure
why that is even there I assumed that
was a copy and paste from something make
sure that I think that's okay I guess
that was somehow a copy and paste of
this anyway
Wow what that was doing there but we'll
just ignore that for now okay so this
defines status - and then we need to
come down here
okay so why is our status check here so
what we need to do I'm just coming up
here now
why is actually gonna equal instead of
just status it will be status - sorry I
had to go back through that code to
figure out that out anyway so that's it
right so now we would be returned the
whiff not available companies we should
do no n/a actually cuz at least last
time we got returned a zero suggestions
so we'll change this to no n/a and then
we come down here with another no na
although hey we got some suggestions now
look at us so gosh I think the with na
is a better example anyway so I guess
we'll stick with with it and now that's
work and apparently okay so we have
these a with an a we've got these
following suggestions apple ABC a nm now
interestingly enough let's run that what
we're done and we'll wait for it I
suppose this why I don't like this one
cuz it just takes too long it takes
forever to get the actual output that
we're waiting on here okay so we get the
output back and you can see that it's
relatively the same list but you'll see
that we have some differences so I'm
trying to look for something that exists
in this list but not the other list Gigi
mmm
okay so no okay just categorically a
shorter list let's see we go 16 and 14
something is missing from the list I'm
just not seeing it apparently about
Toyota Motors yeah okay so that's one
that's missing from the list
TM okay and there's one other somewhere
I'm just blind okay so there's two
things missing from this list so we
could take this actually a step further
now to make things go a little faster I
am gonna pass through no na here just
because I want to show you guys all the
options that you have at this point so
we can run hopefully quickly with no na
here right and we got 22 suggestions
okay and then if we come through and go
to the very top now and we say instead
of how much better we want 10% better in
before like 50 suggestions that would be
fine okay we only have one suggestion at
that point okay so so you can kind of
tweak these numbers to kind of get you
know if you're looking for 22 stocks
there you go if you're looking for one
stock there you go so in this case now
we got 20 stocks well we just ran this
number a second ago and we got 22 stocks
okay so there is a degree of randomness
to this and initially you might have
assumed it was because the test size was
a random sampling right because we did
shuffle the training set somewhere up
here and on the reindex here it is but
that's not actually what's happening
it's the the training that is actually
randomized slightly so what you could do
instead is instead of printing the
invest lists we we can comment this out
and we can comment this out
and comment this out and now we will
just return invest list like that and
now check it out so first we can say
final list equals empty we're gonna say
loops equals 5 and then we're gonna say
Forex and ring
loop's something like this stock list
equals analysis empty Parnes then we'll
go for e in stock list will say final
underscore list dot up hand and we
append e and my dog is probably going to
bother me in a second hopefully I can
finish this before he starts yapping at
me now we're in say x equals counter
which we're going to grab that and final
underscore list now at the very top of
our script we're gonna grab counter I
just held page up to get up there really
quick and where is a from collections
import counter now back to the very
bottom okay
so x equals the counter of that final
list now what we say is for each in X so
for each element in this x counter we
can do the following so we can do this
so print 15 x underscore this up makes
15 underscores so for each in X if X
each is greater than the loops and then
we'll say - I don't we just want
something here
bad dog over there - loops divided by 3
so just some sort of variations like so
we can allow for me like if we have 20
loops will allow for some give there
then print each okay something like that
so we're running 5 loops here let's run
8 loops so the running we're on three
four five
seven and eight and we finally get our
results of all of the stocks that kind
of came through very frequently so these
are all of the ones that you might
consider investing in that what ran
through several iterations and still
came through as good stocks so anyways
that's that if you guys have any
questions or comments please feel free
to leave them below otherwise as always
thanks for watching thanks for all the
support of subscriptions and the
donations ain't it - next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>