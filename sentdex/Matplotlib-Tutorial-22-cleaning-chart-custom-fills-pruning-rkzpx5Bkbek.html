<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Matplotlib Tutorial 22 - cleaning chart, custom fills, pruning | Coder Coacher - Coaching Coders</title><meta content="Matplotlib Tutorial 22 - cleaning chart, custom fills, pruning - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Matplotlib Tutorial 22 - cleaning chart, custom fills, pruning</b></h2><h5 class="post__date">2015-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rkzpx5Bkbek" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to
part 22 of our matplotlib tutorial
series in this part what we're going to
be doing is kind of cleaning up the
chart a little bit and doing some
customization to it we'll see how far we
get but let's go ahead and get started
so the first thing I wouldn't mind us
doing is like if we look at our chart
right now something I'd like to include
that we've talked about is fills so the
fill that makes the most sense is to
fill with our moving averages
so again even if you don't really know
why you would use a moving average at
all generally as the moving average like
this the blue one is the faster moving
average so when blues above red that's a
good thing we would say that's a time to
invest let's say so what if we wanted to
dynamically fill every time the the blue
line was above the red line we wanted to
make that a green fill and when it was
below the red line a red fill so that's
what we're gonna do first
and also these lines are too thick so
we're kind of making a little thinner so
we're gonna go ahead and close all this
and like I was saying before just
because you use a style it doesn't mean
you have to use everything in that style
you can go through later on and change
so that's what we're gonna do so we're
gonna come on down to where we're
plotting these moving averages and let's
go ahead and we're gonna set line width
here equal to one and we'll do the exact
same thing down here line width equals
one now we're gonna do some custom fill
betweens be a little long and thick here
but we'll get there we'll get there so
we're gonna say a x3 dot fill underscore
between and we want to fill between well
basically we always want to fill between
date and ma2 on both of these fill
betweens we're gonna end up doing that
so let's just copy this let's come down
here copy this fill between date and
then ma two and then we fill finally
between also em a1 - start
so really the feel between will take on
these parameters so far anyways oops the
cola needs to be in here and then the
first one will say we'll add this where
clause which we've already covered but
here's another example of it where and
then so what we were saying before is
like it's bad if ma 2 is greater than M
a 1 right the slow if ma 1 is well
actually let's just do it here we'll
just say where where m a1 - start so
take this copy where ma 1 is less than
and let's just paste again and changes
to M a - so where ma 1 is less than the
MA - what we want to do is we're gonna
say the face color is equal to red and
then we don't need to do it but we'll
just also say a edge color is equal to
red - okay and then we'll apply an alpha
equals 0.5 so that's kind of a long line
so what we can do is we'll do maybe this
and we should be able to get away with
that and then let's take this copy and
come down paste and then instead of this
we'll say where ma that's where ma one
was less than ma - now let's say where
it's greater we make it a green okay
so let's save and run that and what we
get are these fills although whoops I
think we just did the aged color right
so where ma one is faster yeah so G so a
face color G and an and edge color let's
get that fixed up there we go so now
we've got these little custom fills
going on so it's just kind of like a
nifty way to be like yay good times bad
times good times okay so we've done that
now what we want to do is I'm trying to
think well first of all we want to
change the date labels basically so
let's see this the
the moving average we want these to be
let's close this and close this so the
moving averages are a x3 so what we have
to do is we're gonna say let's go up to
the top here first of all we don't need
like when you have like a date as like
the the x-axis you don't really need a
label that says date that's kind of a
waste of space so we're gonna just
ignore doing that for now and then what
we're gonna do is let's come on down to
Skoda ax3
we're gonna set some plot stuff here I
think underneath a x3 let's do PLT dot
set P and what we do here is we're gonna
say a x1 dot get underscore X tick
labels and then we set them visible
equals false and then we're gonna do the
exact same thing to a x2 so take that
paste a x2 then what we're gonna do is
we're gonna come up to here if you
recall where we were setting information
for a x2 about the major formatter and
all that kind of stuff we're gonna cut
that we're gonna come down to a x3 paste
that and from a x2 change it just to a
x3 okay so now let's save and run that
cool so now what we have is we've got
the dates here they're running into each
other but we'll fix that in a moment so
we cut those dates running into each
other so we can them a little bit
but otherwise things are starting to
look a little better so let's close
everything here and let's fix that tilt
so if you recall the way that we do the
tilt is we go for and do we have that
still appear somewhere yeah we do so
let's just copy and paste that old one
so I can't - a x2 here where we were
doing for labeling ax to cut come on
down to a x3 paste change this to a x3
and now they're tilted the way that we
would want so this graph is already
looking quite a bit better than it was
initially so we're making good progress
here
the next thing that we might want to do
is right now we've got like price over
here but maybe we want to add like the
labels like people aren't gonna just
know in their heart of hearts like what
the heck is this up here and like what
is this down here right so let's add the
labels there so we'll go to the very top
here where we're defining our axes ax 1
we plotted the title there because we
wanted the title at the very top but now
what we can do is PLT dot y label this
is our high - a low so we'll just do
capital H - capital L and then ax 3 was
moving averages so PLT dot y label and
we'll add Mavs just like that so that
tells people those are moving averages
in fact let's do like that ok so once we
have that stuff the next thing that we
might want to do is if we look back at
this graph so we've got our labels here
but now we've got like all these little
jumbles right like that's pretty
annoying and ugly so what we can do to
handle for that is we can set we inside
a couple of things one we can set how
many we want so let's let's modify the
high minus low first so the way we're
we're doing that is ax 1 whereas our ax
1 stuff here we go so we don't really
have any customization for ax 1 up here
yet but we'll add some so we'll say for
ax 1 what we're gonna do is we're to say
a X 1 dot y-axis dot set underscore
major underscore locator and then what
we do here is we use M ticker dot Max
and L locator like we've done before and
now what we say in here is we say n bins
so again bins are like the containers
basically so we can say how many and
what this will dictate we'll say 5 this
will dictate how many labels we have
right on the y-axis and it it'll be no
more than that but it might be less than
that
but then so let's say n bins equals five
we'll just go with that for now let's
run that real quick see what we're
working with okay so we've got five and
that's pretty good it might still be a
little too many but but we still have
this like overlap right between this
this y-axis and this y-axis so the way
that we can handle for that overlap is
to prune one of the labels so the way
that we can do that is with prune so n
bins equals five comma and then we can
say prune and we can say which one we
want to prune in this case we won't
improve the lower one so it'll literally
just remove it it won't be in the way
anymore so as you can see it's it's gone
it's not running over this price the
price is still kind of conflicting a
little bit I would prune the upper price
and so that's what we'll do next we'll
start doing some more pruning and stuff
and we'll fix the moving averages down
here and we'll continue improving this
graph make it a little better but if you
have any questions or comments up to
this point do feel free to leave them
below otherwise as always thanks for
watching thanks for all the support and
subscriptions and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>