<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Twitter Sentiment Analysis - Natural Language Processing With Python and NLTK p.20 | Coder Coacher - Coaching Coders</title><meta content="Twitter Sentiment Analysis - Natural Language Processing With Python and NLTK p.20 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Twitter Sentiment Analysis - Natural Language Processing With Python and NLTK p.20</b></h2><h5 class="post__date">2015-05-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SB8ckgT8l9c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to
part 20 of our Python with ML TK for
natural language processing tutorial
video series in this video we're going
to be talking about doing some live
sentiment analysis now so what better
place to do live sentiment analysis then
Twitter because stuff is just coming
through pretty quick so the Twitter API
they have a streaming API and you can
connect to it for I think it's like one
percent of the Twitter firehose which is
actually a lot of tweets it's like
probably 500 million a day on average
now so maybe even more
but anyway so we're going to talk about
how to connect to that luckily I have
tutorial on that as well we're just
going to copy and paste the source code
from that but I do have a tutorial on it
and so we'll get that we'll get
connected will show how to connect our
module to that and we'll actually show a
decent example of streaming some
information so and judging sentiment on
it so let's go ahead and get started so
first of all you want to come to Python
programming net click on start learning
and we're going to look at you data
analysis possibly my sequel them get
tweets so there's that and then we're go
stream eat wheats from Twitter I'll try
to put this link in the description if I
forget I'll just just let me know and
I'll paste this whole link in the
description so y'all don't have to
navigate around trying to find this
specific tutorial but anyway coming down
here any stupid ads coming on down here
who put these ads on the site seriously
town what we're interested in is this
code right here so come to the very
bottom right before the end of the
dashboard and we're going to take all of
this here and let's just copy that come
over to a blank file and paste so this
is the source code required although
we're not going to be saving to a
my sequel database we don't need this
either and we don't need the username
we don't need conduct committee and we
don't need username tweet either we can
just print the tweet for now return true
that's fine and fix this for Python 3
and we aren't gonna need this my sequel
DB time I don't think we need that we'll
leave that there that might be in one of
the air no it's not there so we don't
need time and that's that so next up how
do you get your C key C secret a token a
C or all that stuff let's come back over
here and come on not to the top here is
the link to the Twitter apps it's kind
of annoying how to figure out how to get
there because if you go to like dev
Witter calm like dev twitter.com at
least last time it was like yeah it's
like this fabric stuff and you're like
ok how do I get to the Twitter apps
no it's anyway yo head to this apps
twitter.com create an app unfortunately
now you have to tie your phone to your
Twitter account if you do that if you
need access to the Twitter it streaming
API it's kind of silly but you have to
do it now I found that out yesterday
when I made a new key for this tutorial
but anyway you'll have to do that and
whenever you're done I suggest you go to
your Twitter profile and you uncheck
like everything every notification
otherwise I'm just going to blow up your
phone with texts so sorry
but that's just the way it is price you
gotta pay for the free streaming data
now moving on what we're going to do is
that should be that oh and when you
create it man I'm having a heart let me
think here well when you I just don't
want to show my keys let me let me go up
here let me go to apps Twitter comm or
am I
sorry cefotetan soft screen so I want to
show my stuff um so you'll come to apps
you'll hit create new app here we go and
you'll just name your app do whatever
you want to name it at give it a
description website you can do whatever
you want I'm gonna do HTTP colon slash
slash Python programming net Python
program that's fine you don't need a
callback URL agree to their terms of
service and create your application so
here's the application we're done I've
got this epic app name then you come
down here and let's see what are we
looking for we're looking for keys and
access tones I sort of changed it since
I looked at it like yesterday anyway so
here's my consumer key my consumer
secret and then we come down here and
then we want to create access tokens so
this is your again your C key and your C
secret for like right over here and then
you come down here and we click on
create my access token great come on
down here boom now I've got an access
token access secret fabulous I'm gonna
revoke those so you all don't use my
stuff and I just close this and you'll
fill those values all into here now I'm
not going to show my values because that
would be stupid but what I'm gonna do is
just do this from Twitter API stuff
import everything you do not do this ok
you're not gonna have this I just stored
these values in my own little Python
file and I'll just import them that way
I know one gets to see my stuff so once
you've done that now you're ready to
stream data so up to this point this
should connect
so first let's let's go ahead and stream
it let's we'll leave car that's fine uh
and that looks good so let's go ahead
and run this let's see what happens
there we go so okay so meet Craig Bohl
oh we started to get some tweets and
then we got disconnected
uh let me do true true let's do it time
sleep sure I'm not sure why we get
disconnected what's happening to me
yesterday it's really irritating it
might be because these special
characters maybe I don't know I'm mad
this is like the most annoying error to
see because it's like folks active
exception raised but we disconnected it
might just be my internet or something
I've never had this problem before
yesterday so hopefully it's not
happening to y'all but it's definitely
happening to me let's change this I
don't know Obama let's just pick a
different word maybe normally the
streams for a really long time I don't
know why this is happening to me so very
sad
hmm well the show must go on
so if this is happening to y'all let me
know and also if you know to fix for
this that would great streaming that pie
I just updated this package so I know it
can't be anything like that needs to be
updated but anyway we'll come over here
I'm guessing it's my internet cutting
out but I'm not positive the streaming
API takes up a ton of RAM and um yeah
mostly Ram but also processing this
streaming API is so heavy if you have to
like use like a VPS or something you
have to pay a lot of money because it's
just like this takes up so much anyway
let's go ahead and do import sent team
mod as s we'll bring that in and then
we're going to come on down to here and
remember that sentiment function now
returns to things it returns the
sentiment as positive or negative and it
returns the confidence so come on down
here we'll get rid of sleep Oh guess we
can keep praying this tweet I really
wish I knew what this error was there's
like nothing I don't know what to do
about no active exception to re-raise
resenting me come on um let's see if we
can see where it failed the event let's
see okay so it's failing at this point
I'll probably just watch like in case
everything in like one big ass trying to
accept or something like just pass these
exceptions anyway and on so at this
point we get the tweet so what do we
need to do well we just can do this we
can say basically sentiments value comma
a confidence summit value confidence
equals s dot sentiments and we want to
gather the sentiment on the tweet easy
enough so now we should have PA's neg or
or positive or negative and then also a
confidence level we have five algorithms
that we're using here so that would be
their 100% confidence eighty percent
confidence or sixty percent confidence
anything lower than that and the vote
than the other way so sir your only
choices so now what we can do is let's
go ahead and we'll actually let's keep
print tweet so we'll print this tweet
will print the tweet will print
sentiment value and then we'll print
confidence in that value and then let's
say if confidence is if that condense
times 100 rather confidence times 100 is
greater than or equal to 80 let's just
use that for now
great we're gonna say that's a good
tweet and now let's output the the value
so we'll save an output file so we'll
say output equals open we're going to
open Twitter out dot txt we're going to
open it with the intention to append and
then we're going to say output dot right
we want to write sentiment value we're
also going to do output dot right
newline and then we will do output dot
close okay so here well if the value is
if this if the confidence is greater
than 80 or greater than or equal to 80
so basically if there was four or more
votes in favor of the sentiment value
we're going to save that and say okay
that's a confidence good confidence and
we'll save that to our Twitter output
file and then in the next video we'll be
talking about how we can connect this
Twitter output file with some matplotlib
and graph this stuff live now still
really bummed about this disconnecting
nonsense
we shouldn't be happening I wish I could
I wish I knew why that's why I'm in Ryan
there we go I've got a full length oh
that was because we imported uh well at
least we're getting further than a few
it's probably the the time delay or
something anyway so this is pretty this
is at least longer than it was before so
yay
anyway so here we have a bunch of
ratings here it's streaming along so
everything looks to be hunky-dory
suppose
uh let me see Lucy on error print status
I don't even think that's even happening
really
hmm let's see what if I did
let's just encase this in a try except
except for charger um I shouldn't copy
that if you're having issues but I just
I haven't like looked too deeply into
the Twitter API or this Twitter tweet
pea module but I wonder if this will
solve our problem I'm guessing if it
returns false that's a bad thing but
we'll see anyway we'll cut it off here
hopefully you guys aren't having this
stupid disconnect issue I will say if
you are disconnecting a lot and
reconnecting with Twitter API they will
shut you down they do not appreciate
that because it's streaming API you're
not supposed to be reconnecting so keep
that in mind if you keep reconnecting if
you're having an error
you keep reconnecting like really really
fast they're gonna throw you an error I
forget what the error code is but just
know that that's a possibility anyway
that's that we're going to shut this
down now and stay tuned the next video
well I should be graphing this stuff so
that'll be excited questions or comments
below if you happen to know how to solve
that annoying error let me know although
we're not seeing it yet last time I said
that it popped up immediately so who
knows anyway stay tuned the next video
questacon's below as always thanks for
watching it until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>