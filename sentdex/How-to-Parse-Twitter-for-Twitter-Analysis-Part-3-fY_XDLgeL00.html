<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Parse Twitter for Twitter Analysis: Part 3 | Coder Coacher - Coaching Coders</title><meta content="How to Parse Twitter for Twitter Analysis: Part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Parse Twitter for Twitter Analysis: Part 3</b></h2><h5 class="post__date">2013-07-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fY_XDLgeL00" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody and welcome to the third
how to parse Twitter tutorial this
tutorial the two prior tutorials we've
already covered everything you need to
actually parse Twitter now we're gonna
aim to do in this video is either fully
explained or begin to explain and then
finish up in another video how to add a
little bit of logic to this parsing
unlike like an RSS feed or something
like that where typically you even like
the full Huffington Post feed or
something like that their updates aren't
super quick right they don't they're not
pushing articles you know really really
fast whereas with Twitter some of the
topics that you might be interested in
parsing are very high volume topics and
then other topics might be pretty low
volume except for specific days times
etc so you might want to vary your
parsing a great example of this is is it
works for news articles too but you look
like on Twitter if you're parsing stock
companies during the right before the
trading session and through the trading
session right after the trading session
volume is going to be quite high
sometimes even as much as 300 400 500
percent the volume that you get after
that time period so you wouldn't want to
be treating those time periods
identically ie you wouldn't want to be
pinging and pulling and parsing and
visiting Twitter as often as you might
during the trading hours now you could
set something up I suppose that if the
hour is this parse this month but
there's a much better way to do this and
that's what I'm going to show you so
with that what we've got going on right
here is this makes us an array basically
and gives us you know each individual
tweet now what we'd want to do or what
I'm going to be doing is saying how like
how often we visit the page is going to
be completely contingent on how many new
updates came since the last time we
visited right so if you visit the site
you wait like three seconds you visit
the site again and you've got a 78
percent similarity you probably slow
down the pings right you can kind of
slow down hitting the website and
parsing it if by the same token if you
have a zero percent well you probably
miss something or you got really close
to missing something so in that case you
might want to visit a little more often
and so anyway that's what we're going to
do so let's go ahead and get into it
though what I'm gonna do is build an
array out of this we're going to add
this to an array and then we're gonna
compare arrays and with that I'm going
to show you guys a simple way to compare
arrays within Python and I mean you
could say like for each item in the
array if you know identical and you
could build an you know like a ratio
basically and that's what this is going
to do for us but at the profit it's
gonna use less processing to go this way
so what you're gonna want to do let's
just just showing you an example here
we're gonna import diff lib and then
we're just gonna say we're just gonna
say r1 equals you guys can follow with
me if you want by the way or you can
just watch because we'll be coding out
this and a little bit not with the same
parameters of course and then two three
four five six right so in theory these
are 80% similar since arrays what never
mind anyway so the next thing we want to
do is we'll say compare equals in the
beginning to compare is going to be diff
Lib dot sequence matcher and then none
and then r1 r1 r2 and hit enter and then
finally we'll just say you would have
signed a variable this but we're just us
you should print it out compare a she oh
and this gives us a ratio so 0.8 right
so eighty percent similar which is
correct you know four out of five are
identical so that's basically div and
what diff Lib is doing so let's use that
and edit that into our Twitter parser
the first thing I wanted to do is let's
clean this up here it's uh yeah we don't
need to print the length anymore that
was just to kind of show you guys and
then what we'll do is we'll say instead
of saying print read saw we're gonna
call this a tweet so a tweet as our
variable name equals R sub then we're
gonna we can print out a tweet and then
what I want to do is let's come up here
to our variables and we're gonna say
we're gonna add some local variables old
twit equals an empty array new twit is
gonna equal an empty array for now and
then let's actually let's go ahead and
make an infinite while loop so while
like 1 is less than 2 for example we
want to perform the following ok so now
what we're going to want to do is I've
got lost year ok yeah we're down here
print a tweet so next thing we're going
to do is let's do new twit got a pen
oops don't capitalize a pan and we're
going to append a tweet to it and now
we're gonna start let's let's compare
the new tweet array to the old tweet
hombre obviously to start there's gonna
be no nothing you know it'll be a zero
percent comparison but then what we'll
end up doing what you'll see let's just
go through it so the next thing we want
to do is say comparison equals diff live
sequence match sure and again none and
then we want to compare a new Twitter
aid to the old twit array and that's it
there the next thing we want to do is
we'll make the variable house simpler
how similar and that's going to equal
comparison dot ratio and then let's
and then we want to just like let's
print another little separators it's
easy on our eyeballs it'll print house
in once we've done that what we're going
to want to do is we're gonna want to
make sure because only the first time
through here will old twit be an empty
array because what we're about to do is
we're about to populate the old Twitter
array so if we've already populated it
once we actually need to empty it before
we populate it so even though it's empty
right now we do need to consider what's
going to happen in the future and so
we're going to just go ahead and empty
it one more time and now what we want to
do is credit for loop and we'll just say
for each item in new twit so each part
of the array a new twit old twit dot
append each item so we'll just add each
thing to it then finally since we were
adding new things to new to it right
we're adding stuff after we've made the
comparison we also need to clean out new
to it right so now let's clean out new
to it equals and we'll just like none
and then we'll create a time dot sleep
and in here we'll just say five seconds
for now but we are going to change that
up in just a you know momentum so let's
save that and I believe we're ready to
run I hope so I don't think we've done
anything so let's go ahead and run it
and make sure we're spitting out us
improper from tires
I see okay we need to indent this okay
hopefully that'll do it let's try to pop
this over here new twit we didn't pop
properly capitalized new twit somewhere
let's find it it went pretty quick after
the first one so it right here twit go
save that I'm going to close it and
reopen it to rerun it so we're not
seeing that other stuff drag it over
here alright
darn it I don't think we imported this
live as well yeah okay we go to the top
and import diff live now we save it
hopefully third time's a charm
lucky oh my goodness
old twit was not defined this is just
driving me nuts old capital T yes okay
finally made it to the bottom obviously
the first comparison is nothing and
we'll sleep for 5 seconds visits again
now we see the second comparison is 57%
similar so we could probably have slowed
that down a little bit now we've got 70%
similarity and we'll go again 74 during
actually we definitely could slow this
down but how do we do that based on the
percent of similarity that way we'd have
to go through each topic and specify you
know it's specific wait time well since
we want to wait longer like the bigger
this number of similarity is the longer
one or wait right so why don't we
multnomah to multiply so I vote we say
time sleep equals house in times will do
if it was a hard present so I don't know
let's say like 8 or something like that
let's try that out
see how that works with this day
come over here zero percent similarity
it sleeps nothing should probably
thought about that next 71 so it's point
7 1 times 8 now we got point 6 1 so it's
gonna be tons 8 so obviously we want to
bring this number up a little bit higher
so let's make it times
let's try 15 it was really we have all
the way to go till close to 0 I would
say you wouldn't want to see numbers
like frequently under 10 so let's let's
say 15 as our wait time obviously 0 is
gonna go pretty darn quick and now we've
got 85 so 85 and we'll be sleeping for
15 or well point 8 5 times 15 so what
this is gonna do anyway while we wait it
now that's good 9.32 similarity and so
on so what it's going to continue doing
is kind of slowed us down a little bit
so I would even argue that really you
want to have something that the first
time it goes through its weight time
it'll be too much maybe but then at the
end of it you'd want maybe point 30
times so maybe you'd want your wait time
to be even like 30 percent right so now
this is gonna bump us down again because
it's pretty high so as soon as I see the
next one we'll do yes we definitely have
room to grow so will or to go down a
little bit so now we could say like 30
or something like that and probably the
best way to solve for this you know
inconsistency right because it's going
to keep going up and down right because
the next time see right now it's 95
percent so this is gonna wait a really
long time and then we'll see the next
time we hit it probably going to be
either maybe 0 or barely zero so we'll
see you let's wait
and we will
it was 15 there we go wow those look
almost perfect day oh man yeah the next
one's like ketchup yeah okay
so anyway II to the point now what I
would wager would be an even better idea
is instead of using how similar times
you know 30 what you might want to do is
use the average of maybe like the last
five how similarities to denote your
your current wait time that way you
don't because what's gonna happen here
is you're going to do a lot of
whipsawing back and forth and back and
forth and back and forth so instead you
might want to fix that now this in
theory I believe over time would stop
like like slowly stop whoops on you so
much but anyway so that's at least a
naive way to go about parsing Twitter
and having a little bit of a wait time
now in the next video I'm going to show
you guys I think what we'll do is we'll
build an array of we could just build
like a long long term array but I don't
think that's going to react fast enough
so you want something you know like this
is highly reactive right so if all of a
sudden there's a huge explosion you know
of new tweets you definitely want your
array to be very reactive but at the
same time not too reactive to the point
where it's reacting to itself right so
so the next one I think that's what
we'll do is we'll add a bit of an array
and then we'll work off the average of
all those numbers we'll need at least
three but I'm thinking of doing probably
five and then I'll help keep it pretty
stable so anyways as always thanks for
watching hopefully uh help you guys out
thank you for your support your
subscriptions and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>