<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Distance Sensor GPIO cont'd - Raspberry Pi and Python tutorials p.7 | Coder Coacher - Coaching Coders</title><meta content="Distance Sensor GPIO cont'd - Raspberry Pi and Python tutorials p.7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Distance Sensor GPIO cont'd - Raspberry Pi and Python tutorials p.7</b></h2><h5 class="post__date">2017-04-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kqJ8WYQu68w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody and welcome
to part 7 of the Raspberry Pi tutorial
series in this video what we're gonna be
doing is wiring up the distance sensor
now to do this we're going to need quite
a few things we're going to need a
actual distance sensor that's the HCS
ro4 and then we're going to need for
male to female jumper wires and then
we're going to need three 1k ohm
resistors or you could have a 1 2 K ohm
resistor and then one 1k or any way to
make 1k and 2k ohms so the VCC trigger
echo ground not sure how well you can
see that on camera it's try not focused
I turn off autofocus but anyways it says
right here on each of the pins what they
are so the VCC that's your that's your
power trigger is the sensor basically
it's going to shoot out
so basically when we trigger the trigger
it's going to shoot out some system
sound and then the echo is the input and
that measures when the input actually
occurs and then GND is ground so with
that let's go ahead and connect
everything alright once you've got
everything hooked up you've got the
Raspberry Pi turned on you're ready to
measure distance so let's go ahead and
CD into desktop and then let's nano
distance sensor PI and we're ready to
begin first we're going to just like
before import RP lowercase I dot all
caps GPIO adds all caps GPIO we're going
to import time GPIO dot set mode GPIO
woops
gbcm so we're going to define trig as
four and echo as 18 so the reason why
we're doing this is if you notice before
in the previous tutorial if you follow
along with the LED lights just
hard-coding each of the pin values every
single time can be pretty tedious if you
as you make a larger and larger program
it's going to get out of hand should you
ever need to change those pin numbers so
you probably just want to give them a
constant right at the beginning of the
script rather than typing it out so
that's why we're doing that next what
we're going to do is GPIO dot set up
we're going to set up the trigger pin to
be a GPIO dot out and then GPIO dot set
up the echo pin that's going to be a
GPIO dot in so the trigger sends out a
burst and then the echo takes it in
using the known constant that is the
speed of sound we can calculate how much
distance was traveled based on how long
did it take for that sound wave to go
out and come back so once you've got
that we can go ahead and begin that with
a GPIO dot output this weeks are better
done or did we note my mouse was in the
way I didn't see it anyway GPIO output a
trig true and then we're going to do a
time dot solely for 0.001 something like
that something good enough to just give
it a moment's rest
then GPIO or a moment to do it is do not
output trig false remember we're going
to do is we're going to save Wow
the GPIO dot input to the echo is equal
to false so so long as that's the case
we are going to say start equals time
time and then we're going to say
wow-wow GPIO dot input
oh my goodness there we go echo equals
true and the equal time that's up
then we're going to say the sick time is
going to be M minus the start and then
we're going to measure the distance now
for centimeters if you want inches you
can go to the text-based version on
break that one down there it's I can
also just say it as we put it up anyway
distance will be equal to the sick time
whatever that is divided by zero point
zero zero zero zero five eight so four
zeros after the decimal one if you
wanted to do inches inches inches would
have been zero point zero zero zero one
four eight then what we're going to do
is we're just going to print this since
cm dot format this is and then finally
when we're all done let's run a GPIO dot
clean up clean up our mix control X to
save yes that file now let's do Python
distance sensor hi and there we have a
distance if for whatever reason you get
some sort of error or it gives you a
warning just run it again and that
cleanup should solve your problem so
right now we're reading about a 102 and
then I'll put my hand in front of it
and now yes we've got a 21 centimeter
distance okay so now that we've done
that we've got the light we've got the
distance sensor what I'd like to do in
the next tutorial is kind of combine the
two things and create something a little
more complex and for that we're going to
make a sort of like one of those like
garage stop lights where basically as
you pull into the garage it's a green
light as you get closer closer to the
max distance you can pull forward it
turns yellow and then when it's time to
stop it turns red so we're going to make
something like that for the Raspberry Pi
although instead of using a car we'll
just use our hand as we approach and The
Closer that we get it'll turn yellow and
then finally red so that's we're going
to do in the next tutorial if you have
any questions comments concerns whatever
feel free to leave them below otherwise
I will see you in the next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>