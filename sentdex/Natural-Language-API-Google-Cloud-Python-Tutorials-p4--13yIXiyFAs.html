<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Natural Language API - Google Cloud Python Tutorials p.4 | Coder Coacher - Coaching Coders</title><meta content="Natural Language API - Google Cloud Python Tutorials p.4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Natural Language API - Google Cloud Python Tutorials p.4</b></h2><h5 class="post__date">2017-03-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-13yIXiyFAs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome everybody to part four of our
Google cloud tutorial series in this
video what we're doing is covering a new
API and that is going to be the natural
language API so what we need to do first
is since it's a new API we need to
enable that API to use it so we can type
language Google on natural language API
and one's actually already enabled so I
don't need to do anything but if yours
is not enabled go ahead and hit enable
and you're ready to go once you've done
that that's all we need to do in that
console so now what I'm going to do is
go ahead and change directories back one
and I'm going to go ahead and make derp
matt lang example cds now my example and
then now I'm going to nano I guess Matt
Lang examples dot pi okay so the first
thing I want to go ahead and do is we're
going to from Google's dot Cloud we're
going to import language and then just
like before if you want you could say
you know client equals language dot
client that looks very similar to the
vision API now let's go ahead make a
function of this so we're going to
define language analysis and language
analysis we'll just take some degree of
text it's really open to get away with
this 301 to four and the first thing
we're going to do is we're going to say
basically our text documents we're going
to say document equals client document
underscore underscore text or make sure
it doesn't run over my face and this
takes one parameter and that is the text
now we're going to say sense underscore
analysis for sentiment analysis is going
to be equal this is equal to document
dot analyze underscore sentiment and
then
just to show you what your options are
just going to do a guess in this case
watch it print it lets you print der
sense analysis and then we're going to
say is sentiment equals sense analysis
not sentiment so I'm just going to save
us time that's a one of the method now
what we're going to do next is we're in
state s for entity analysis equals
document under document dot channel
panel line with entities and then
finally any entities entities equals and
analysis that entities and then we'll
just return sentiments and entities so
basically the language API we can even
like we can look more into it too so
like let's see if I can find
documentation view the documentation
let's see if we can find maybe concepts
we'll have what I'm looking for
yes so this kind of tells you what all
your options are so you've got sentiment
analysis entity analysis and syntactic
analysis so analyze syntax would be your
other option I'm not going to do the
syntactic analysis they use they had
some pictures before but I'm not seeing
the beautiful pictures let's go to
product overview see if this has the
pretty pictures not seeing the pretty
pictures
maybe have to you guys I don't know
anyway
the things that are available to us our
SEM analysis ntpd analysis and that
syntactic analysis and basically well
the two that we're going to use here are
Senate analysis and entity analysis in
sentiment analysis will give us two
things it gives us sentiment and then
ilion's was it or magnitude I can't
remember what it is it's uh I think it's
magnitude and then entities will have
salience so sentiment will have the
sentiment score which is negative 1 to
positive 1 and then magnitude which is
unbounded and zero to infinity so it's
just how important is the sentiment you
know to overall and then with entities
you've got again the same thing it's
kind of like what's the entity and the
salience is like what is that in and
he's important basically that's that so
let's just look at a few examples so
cool so that's our language analysis so
now what we're going to say is let's
come up with some example text so
example underscore text equals is it not
obvious that Python is the best
programming language of them all that's
our example text and then what we're
going to say is let's go ahead and say
sentiment and teens equals language
analysis example text and then let's go
ahead and print we can confirm a score
for the actual sentiment itself and then
we can do sentiment magnitude and then
so that's just so sentiment is going to
be on the entire document right so
whatever text you pass through it's
going to return the sentiment so if you
want it to get sentiment per sentence or
something like that
you you would have to split the
sentences yourself now what we're going
to do is the entities that's going to be
something to iterate over you're going
to multiple
so 14 entities we're going to print this
has you've gotten it we've got quite a
few things but we're going to do name a
dot entity type so the name is just what
is the entity so basically from the tax
base it's going to be the touch name
entity type is going to be like what's
the classification of this entity
metadata which is pretty cool
metadata this will be again if there is
information on this entity it'll return
metadata to you and then e dot salience
basically the importance all right so
let's go ahead and save that yes let's
do mat line net I'm always forgetting
Python Natalie is example that by okay
so in the first one basically here's our
sentiment it's slightly positive and the
magnitude is also just gotten and I'm
not really sure I'd agree with that
return okay next we have basically the
entities so it's got Python author which
is the type this is your metadata so
this gives you the met which is actually
pretty cool because it actually detects
that this is the Python programming
language because I think we actually use
programming language in the actual text
but it so it realized oh this is not
Python the snake this is actually Python
the programming language which is pretty
nifty and it gives you the Wikipedia
page and then it tells you the salience
the importance well obviously it's very
important here and then here you've got
programming language which again is just
other no metadata on this one and then
the salience is just really not
important we're clearly talking about
Python here so yeah that's pretty pretty
darn cool so now let's work with like
maybe a little bit more text so I'm
going to come over here and let's go
ahead and just search for Python and
let's go to that Wikipedia page now
let's just take like these three
paragraphs here and let's just copy come
back to the terminal
edit this and now the example text I'm
just going to delete it all I'm gonna
say example text equals triple quote
right click triple quote beautiful save
that let's run that again and then now
what you can see is from all that text
and in fact let me just make some space
so I know I'm not running into the other
one there we go
so right out of the gate we've got
sentiment which is more positive than my
sentiment saying the Python is the best
language but alright maybe that Python
it recognizes this is an organization
first you've got Guido van Rossum being
noticed noted as a person who also has
his own Wikipedia URL pretty cool
you've got C Python which also has its
own Wikipedia so on it recognizes Java
C++ all these other things anyway a lot
of information your Python Software
Foundation too got that as an
organization and then you get all like
the importance so like for example this
one should be pretty darn important
right it's it's got probably the most
important so for all these others and if
I listed just take a quick guess here it
looks like these are sorted for you in
the order of that salience so yeah the
most important thing that it thinks is
at the top and then as you get down to
the bottom you get to the lesser
important things there's another kind of
interesting that Python software
foundations at the bottom of court in
Styles just don't matter interesting
okay so that's the natural language API
example I'm really there's not too much
for me more to talk about here but this
is actually really impressive so if
you're running impressed by the vision
API in the natural language API up to
this point I don't have to tell you but
this is actually pretty cool stuff
there's so much that's going into this
that's detecting the entities and if
you've ever worked with like NL TK for
example with named entity recognition
it's really difficult like it'll screw
up like with Python Software Foundation
it'll like detect pythons off
or foundation or just Python as also the
organization and it'll like you're not
going to get metadata that's for sure oh
it's just not going to be this good
and it's not going to detect ceilings
you're gonna have to figure that one out
on your own and then the other thing
with like sentiment sentiments really
challenging and the same thing but also
magnitude like these are really
challenging things and for this is just
boom it's just if you're not impressed
it's probably because it's so simple
like the API just makes it so frickin
simple and the other thing too is like
for example on this type of language
let's go to the language API no oh here
we already there that's assessment I
just want to go to prices let's see if I
can find prices here we go so if you're
only I guess units I'm not sure what
units is is that like text that you sent
through because I would think text that
you sent through for sentiment sure I
guess that's maybe fair but for entity
recognition should depend on what the
size is but anyway feature and now I
don't know if this is like per unit a
dollar premium I don't really know I
honestly don't know like if this is I'm
assuming this price is how much you
would pay for like the first million
units you just pay another dollar I'm
not positive on that I'm not really sure
I want to test it but if that's the
truth like if you're only paying a
dollar from what is this let's see limit
for 20 try to see if you pay per unit
because if you paid per unit and a unit
was let's say just each thing you
submitted that would be an asinine cost
but I think it's actually yeah I don't
know because this gets cheaper so does
it making sense so it has to be per unit
but the first 5,000 units are totally
free and then is this per unit I don't
know someone comment below if you know
Oh price per thousand units
[Laughter]
okay so anyway $1 per thousand units wow
that could get expensive quick if you're
in a million units but even even for
something like like said Dexcom which is
sentiment analysis and currently I do
that all on my own
you know that's I don't try to think of
how many updates a day that probably
runs through I'm trying to see all let's
see seven days probably like a million
updates or some type of something close
to that for like an entire article
so you'd be probably in this range and a
thousand I don't know it's probably
pretty expensive but at the same time I
don't know because you also have to
think about how much you know you
because you either have processes on
your own or on your server and in fact
let me just pause this real quick and I
want to do some math room real fast okay
yeah so I'm back now
so like for example if you wanted to run
like the full Twitter fire hose or
something get sentiment on each of those
it looks like that would cost you pride
about two thousand dollars a month just
running some quick numbers there so
that's pretty high actually for that one
but I'm going to find let me get one of
the elements since I was I'm I think
that I have a decision on I think the
vision when I was pretty impressed with
as far as cost was concerned at least
you can get up to five K units for free
that's pretty cheap let's go to any
documentation
what was the pricing I forget how I even
got to pricing on the other one pricing
just and loaded yet
yes like this one is interesting prices
per thousand units so like for label
detection and OCR stuff and all that
like for on image data like these prices
are really good that's I'm kind of
surprised that it would take an image
data like image data and natural
language data our price so similarly
like the process at least from what I've
done maybe I'm doing it wrong but the
product is an image and a train image
classifiers is totally different than
doing like a text text analysis like
text analysis is not anywhere near what
image analysis costs but anyway so the
image stuff is really good but yeah for
the for the text analysis I guess I just
I had looked at prices already for the
vision API but I haven't seen it for the
text analysis so the text analysis is
pretty darn impressive but if you're
trying to do big volume and you're going
to pay oh that might be they should work
on the pricing you ask me I know they're
asking me anyway
that's it on natural language if you
have any questions comments concerns
feel free to leave them them below
otherwise we're going to be moving on to
yet another API probably one of the last
ones I'll probably release in this this
one but it's going to be the translation
API which is another one that's like
super quick super easy super powerful
I'm not positive on the pricing I'll
look at the pricing but I think it's I
wonder if that one system are you let's
look at this you can feel free to close
out the window if you don't if you don't
care about this I'm not going to say
anything more important at this point
let's I hit the wrong button
API dots
if you want to hear my opinion on
Google's pricing models yeah it's kind
of weird $20 per say like this is on a
per character basis why is the
translation API on a per character basis
but the sentiment API is not like like
it should be on a character basis
especially because so many people are
trying to do sentiment analysis on like
tweets and stuff like that so but I mean
I guess if you're doing like document
sending that so I guess the sentiment
analysis or elect a natural language API
makes a lot of sense if you're doing it
on large documents like entire articles
or even more so like on
yeah like journalist types of things
like very long things like New York
Times posts let's just go for days and
days or like medium articles yeah so and
then this one's on a per character actor
there's their natural language API
should be on a per character basis
anyway 20 dollars per million characters
which that seems pretty fair you know
for a translation API I think that's
okay they don't have a free tier though
that's kind of a bummer price per
character sent to the API includes white
includes whitespace characters empty
queries charge for a character charges
per care on a per character basis even
if the character is multiple bytes
huh pro rata proportional and
incremental cool anyway yes that makes
sense
I'm not quite sure like I said Google if
you're listening why is the natural
language API not on a per character
basis okay anyway that's it like I said
it's nothing important see in the next
video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>