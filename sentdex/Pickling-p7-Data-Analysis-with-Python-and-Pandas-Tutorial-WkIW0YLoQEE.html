<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Pickling - p.7 Data Analysis with Python and Pandas Tutorial | Coder Coacher - Coaching Coders</title><meta content="Pickling - p.7 Data Analysis with Python and Pandas Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Pickling - p.7 Data Analysis with Python and Pandas Tutorial</b></h2><h5 class="post__date">2015-10-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WkIW0YLoQEE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome to
part 7 of our data analysis with Python
and pandas tutorial series in this video
what we're going to be talking about is
really building our data set but also
pickling will be kind of the subject of
this video so reverting back to the code
from Python 4 we're going to start with
that code if you have that code lying
around pick it up otherwise you can go
to the link in the description and there
will be your starting code for this
tutorial so I'm going to go ahead and
copy that code come over here paste
bring this up and this was the starting
code basically so if you don't recall
what this did was it visited the
Wikipedia page for the States in the
United States and automatically
generated that little ticker basically
that we need to query quando for the
data frame of the housing price index by
state so we're going to close this out
and we'll come over here and we don't
really need to necessarily print this
out we could do it just so we know where
we are along the list but it's not
necessary now what we're going to say is
instead of print that information we'll
just say that's the query so clearly
equals that then we're going to say the
data frame is equal to cuando dot get we
want to get that query and our auth
token will be equal to our API key now
what we're going to be doing here is
like we're saying in the previous
tutorial a really previous to the way
that we're going to combine all these
data frames into one big data frame is
with join so join makes the most sense
because these are coming these data
frames are coming through they have an
index already assigned it's the date
index and that is exactly what we want
to share all this data on
so using join makes the most sense in
this case so the way that we're going to
be able to do this is for every time we
have a data frame we join it with the
existing data frame
that has all the other information but
if we don't have an existing data frame
there's nothing to join to so first what
we want to do is we're going to add a
new variable here we're just going to
say name D F maybe F is going to be
equal to PD dot data frame it's just a
data frame there's really no information
in that data frame it's just an empty
data frame now what we're going to do is
we're going to say LLL main underscore D
F dot empty what this is is the boolean
and it's going to return a true or false
if the data frame is empty then what do
we want to do well let me say main dot
yep Eagles D F else we're going to say
main DF equals main underscore DF dot
Julie yeah so if it's empty I Eve is the
first data frame we're going to say okay
the main DF is equal the data frame
whatever that dinner frame is then if
it's not empty that means we already
have some housing price index values in
there what we're going to do is we're
going to do a dot join of the current
data frame easy enough now once we do
that cool at the very end of this we
will have a data frame so let's do print
unless you print main underscore D F dot
head let's just make sure that works so
we'll run that and whoops main
underscore DF not main dot DF my mistake
let's try again
we're not really printing out I wanted
to print out that the query at the point
so we knew where we were along the line
but we'll I guess wait a moment and
hopefully it'll come up while we wait
we'll be talking about um how can we get
around this wait time so with pandas
there's a few things we could do one we
could output the data frame to a CSV or
something to save it and then bring it
back into a data frame file loading a
CSV now this is a pandas tutorial so
that's totally I suppose acceptable but
this is also a data analysis tutorial
series and with data analysis you might
not always have the option
output to a CSV then input back from a
CSV into a data frame or whatever data
type you are using pause for a moment on
that note and here we have all of the
data we've truncated some of the columns
as we can see here but sure enough that
worked we've got everything it's indexed
by the same date and all that so
everything has worked to this point but
obviously that took about 30 seconds and
it might have taken you longer depending
on your internet internet connection as
well as sometimes I have seen quantal to
go down
so anyway closing this out um so what we
want to do is so with pandas yes we
could save that to a CSV and then
whenever we want to reference that data
in the future we could just import it
from the CSP but there's probably a
better option and that would be pickling
so pickling luckily for us there are two
ways that you can pickle with pandas one
is with the default Python in general
has a standard library pickle module so
that would be import pickle and then
also there is a pandas to pickle and
from pickle so we'll be talking about
well how those differ in a moment but
first we're going to show how to use
pickles so the idea of the pickle is to
save any Python object so that would be
a variable that would be a dictionary
that would be a list that would be a
panda's data frame that would be a
machine learning classifier okay all
kinds of stuff a trained machine
learning class parsing that's a lot of
stuff man
so you can you can pickle that what it
does is it serializes and saves the byte
stream basically the byte code and then
you can load it back in and it has all
of the attributes so if you pickle a
data frame when you load that data frame
back in you can still do you know the DF
head and all that kind of stuff the data
is there and everything so it's kind of
a way to save your objects that way you
don't have to run through this massive
list every time you want to have that
data now again I realize with pandas you
could save to CSV and then load from CSV
or txt or whatever you wanted to do but
like with a machine learning classifier
for example you can't really do
that is you're gonna have to save it
somehow and pickle is how we do it so
first let's show pickle let's just show
a real quick example of what we can do
with pickle but um before we do that
let's go ahead and kind of organize this
codes codes kind of a mess
so first let's do a define state
underscore list empty parameters here
and we'll do 50 states equals that and
then we'll just return will return 30
states and then we'll return 50 states
like this right so copy this paste we
return 50 states 0 0 1 colon so that's
all the states just returns the list of
states then what we're going to do is
we're going to define a new function
here and when I say defined grab
underscore initial underscore state
underscore data that's a new thing to
we'll take this tab it over and then
what we're going to say is leave that
main DF we're going to say States v
equals state underscore list
so there's your States for abbreviation
in States here we run through there and
we go ahead and at least we can print
them in EDF ahead if you want but what
we're going to do now is come down here
and we're going to say pickle underscore
Alpes equals open and we're going to
open diddy underscore States pickle with
the intention to write bytes so WB for
write bytes then we're going to do
pickle dump we're going to dump that
data frame to the pickled out file and
then of course we need to do pickle out
that close because it was opened and
we're and written too so there you have
how you even pickle the data so now
we'll just run this function once so
copy that paste will run that that'll
take it up you know about 30 seconds
again but this time that will be the
you know last time we we need to do that
because now it'll be serialized and then
we can just load in that pickled data so
when that's all done we can we can load
it in we won't actually have to run that
again in query cuando 50 times for the
data so now that's done when we pull
this over sure enough there's our 50
states that pickle now this is pretty
meaningless if you open this up and try
to look at it right it's byte code
information so it's not really going to
do anything for you close this out move
this over and now we're going to do is
we don't need to grab initial state data
you comment that out what we're going to
do now is we could say pickle underscore
in the equals open and we're going to
basically let's just copy and paste this
copy-paste set of right bytes green
bytes then we're going to say HPI
underscored data equals pickle dot load
and we want to load this pickle in now
we can print HPI oops HPI data like so
and there you go okay so there's your
data you have 462 rows and 50 columns
there's all your columns everything is
retained okay so you have all the
columns the column is by the state
ticker you know the state abbreviation
rather okay so that's how we were doing
that and that's that okay so so the data
is in and now we're we have that data
instantly so we have to load 30 seconds
every time now like I was saying pandas
has its own pickling methodology okay
and some people are curious as to why
pandas made their own little pickle
functionality apparently on a really big
data set it's faster if you use pandas
version never seen that be the case but
apparently but I will say that to pickle
in and out with with pant or pythons
default version basically you have to
have six lines right
so it's kind of lame you could of course
do I suppose like with open blah blah
blah is this and you could dump it but
either way and you could skip this you
can do it in four lines if you wrote
really nice code but those four lines
anyway but now it's height or width pam
is version what you can do is you can
basically do it
you can pickle out and back in in two
lines so what we'll do is we've already
saved this pickle we've loaded back in
the pickle as HPI data now with with
pandas version you could say HPI data
dot to underscore pickle and we'll just
save this out as I don't know pickle
pickle and that's it right that sends it
to the pickle okay then you can load it
back in with HPI underscore data tune
equals P agreed underscore pickle and
then you just specify that name and
we're going to bring in pickle pickle
and that's it right so you can output in
input with one line rather than three
lines or in theory you can try to do it
with two lines but anyway so at least
half of the lines and now we'll print
and there's supposedly it's faster this
way but like I said it's negligible for
sure depending unless you're doing maybe
you know astronomical data literally
you're doing astronomical data anyway
same thing okay so we obviously we
already printed it up here but that
works too so again that's pickling and
also aside from pickling also we grabbed
all the data frames we you know kind of
taught you pickling but also shoved in
creating a data set that now contains
the housing price index data for all 50
states with using join which we just
learned in the previous tutorial so
anyways uh that's that that's pickling
and as well as joining all this data
together in the next tutorial we're
going to talking about is some of the
statistics that we can do with pandas so
pan
comes action packed with tons of
calculations and kind of some basic data
analysis stuff that we can do better the
gate without really coding anything
ourselves so a nice tutorial we'll be
talking about correlation stuff like
that and we can see because like I was
saying with the housing price index in
general were kind of under the
assumption that all housing price
indexes will follow each other very
closely so in the next tutorial we'll
talk about how we can confirm or you
know basically prove false that theory
so that's what you guys have to look
forward to questions comments concerns
suggestions below otherwise as always
thanks for watching thanks for all the
support and subscriptions in it too next
time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>