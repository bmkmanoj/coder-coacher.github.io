<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Handling Missing Data - p.10 Data Analysis with Python and Pandas Tutorial | Coder Coacher - Coaching Coders</title><meta content="Handling Missing Data - p.10 Data Analysis with Python and Pandas Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Handling Missing Data - p.10 Data Analysis with Python and Pandas Tutorial</b></h2><h5 class="post__date">2015-10-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/O5v4NrSCw_A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome to
part 10 of our data analysis with Python
and pandas tutorial series in this part
what we're going to be talking about is
handling missing data you're going to
see this usually as any N or nan which
means not a number but generally all
missing data will be called not a number
regardless of whether or not it's
anything at all and you basically have a
lot of choices when it comes to handling
for missing data and each choice is
valid in its own right in various
circumstances but a lot of times the
choice that you make to handle missing
data could be the wrong one so there's a
little bit of philosophy that goes into
which option you may end up choosing so
when you have missing data
you basically have four major choices
okay you could ignore the data you could
just ignore the fact that there's
missing data right you you totally right
to do that then you could delete it okay
so you could delete and really deleting
it as there's two two options here but
for now we'll just say delete it so
remove the missing data okay then you've
got fill in the missing data so you
could take you know previous the
previous data point and just kind of
copy that into the the missing one right
now you could take the future data point
kind of push it backwards into the
missing data point okay so that's
filling and then finally you can replace
not a you know missing data with some
sort of static number or something like
that
so those are your four major choices and
we're going to be covering all four in
this tutorial and as well as kind of
covering why you might choose that
specific option and when you maybe
shouldn't use any of the options or
maybe not do anything and maybe ignore
it so the first option that we're going
to cover is ignore it right that's
really quick tutorial you do nothing so
the next option would be to delete it so
that's what we're going to cover second
I suppose so what we're going to do
instead of saying Texas one year equals
this we're gonna actually add this to
the data frame so we're going to say
HP i underscore data and we redefine and
call a new column or SAT x one year like
that that's fine then we're not going to
be I don't really need to plot anything
at the moment necessarily let me do this
and we're going to do this and we're
going to say we want to print HP I data
but we're going to print those the two
data sets they're so square brackets
square brackets and we're got Dec Texas
and then Texas one year that we want to
look at here
okay so then to plot we're going to plot
this exact same data set like this this
should be good um we can try to run that
I don't think that's going to work
though because we're going to have a lot
of not available yeah I mean I wasn't
expecting to see that interesting we may
not actually let's see so we did not
let's see HP I did TX one year equals
that resample print ah tears when you're
in two inches receivable how okay that's
our problem is this how open high low
close mean let's try that one more time
there we go okay so yeah so we got the
Texas Monthly but the TX one year is not
displaying the reason for that is
basically it's filled with not in
numbers but there are some valuations
here so after you get more than twelve
of them like let's do this you do
actually have values right because
they're ours
picked up once a year now but we have
all these missing numbers right not a
number not a number not an arm and then
finally we got a number okay so there's
a lot of options here we'll kill it
good so the first one that we were going
to say was to delete it so we have a
couple options when we go to delete data
there are first you can just drop any
existence of an odd number
okay so our first choice would be just
drop na so we can do something like this
we could say this has n A's um then what
we do is I can come over here and I can
go well actually we'll leave that first
one and then we'll print another one
we'll just do the head though and then
we'll do it again so we'll print two
heads and then what we'll say is HP i
underscore data that drop na and that's
all that'll drop the not avail not a
numbers and it will return a data frame
so again remember what happens when we
return data frames we have to say in
place equals true or redefine the data
frame one of those two options okay so
we're going to say drop na what this
does is any row that contains any amount
of numbers gets removed from our data so
we save and run that sure enough cool we
got the graph but then we also see that
not only did we get the graph but we
also the the regular Texas is all also
only sampled once every year okay and
you can see that happens down here so
this is the original where it was every
month basically and these are just not a
number because there's no number for
that and then here there's no more
numbers but that's because it's being
sampled every single every year so so
let's close this out now so that was
drop na and that would that's a scenario
where you drop at every row that
basically has any sort of missing data
now the next option you have is you can
say drop na but let's say you only want
to drop rows that are have all not a
numbers okay so so what you would do
here is you would say how equals all
in place true okay and so that's that's
when every not a number right so we
don't even get a graph now because not
every column here was not a number only
one column so it's only when everything
in that dataset is not a number that it
would be dropped so there you go there
is one more parameter it's called
threshold and the threshold you can set
the minimum so pandas actually pens drop
in a slip that up really quick move this
over so this is from the documentation
and you can see these are all your
options you can just ignore that how any
all default is any and then threshold
here this is the basically require that
many non not available values so if
there are that many non not available
values it won't be removed okay and then
in place equals room so moving this over
here so that would be how you can remove
by just drop all not in numbers and you
can kind of have give a lot of choices
you can drop if there's any if it's all
on a number or if it passes a certain
threshold of non two numbers we drop
those now another option here is to fill
not a number so instead of dropping a
let me just highlight this will come
down here paste instead of dropping a
and we'll leave in place equals true for
now our option could be filled n/a and
then with fill in a you have a method
and your method is one of two things you
might want to there's more but they
basically boil down at the same one
you've got forward fill or backward fill
so you could do F fill that means
forward fill you can think of this kind
of like a broom because it kind of goes
I don't know it's a little
counterintuitive to me at least
initially when I first learned it but
forward fill that means you're going to
take data and fill it forward okay so
that means it's actually going to take
data
from before right so to me when I hear I
would hear backfill and I would think
okay it fills from the previous data
maybe I don't know but anyway think of
it like a sweep you know or like a broom
you're kind of sweeping the data forward
so this will take previous values and
fill them in forward so we can run that
real quick and sure enough we get a
graph and there you go this is it you
got these little steps because it's like
it's taking all that this data filling
forward boom new data awesome fill four
boom new data go forward okay now you
have also you've got filled backwards so
that was forward fill but then you could
do back fill and that would be taking
data from really after and filling it
backwards so this one would be a little
more biased right and sure enough it it
kind of proceeds this line in every
aspect because it's taking data from
before or taking data from the future
and filling it backwards and that's also
why it fits this line apparently much
better so we'll close this out okay so
that's filling a and then before that
drop na okay but we also have another
version of fill na and that is we can
fill it with a value so we can say what
we want this value to be now in this
scenario it makes no sense but the
reason why you might fill na is you
could fill it with really anything you
want you could fill it with literally
the characters no you could also like
with machine learning for example a lot
of times people will take not I'm
missing data and fill it with like
negative 99999 something like that and
the machine learning classifier will
automatically see that as a significant
outlier and kind of treat it like junk
basically and kind of ignore it so you
might see something like that where
instead of method B fil you can fil na
with the value of and then we'll just do
negative 9 9 9 9 9 and then in place
equals true that's fine
do save and run that and then so you had
a graph like this um obviously that's
not it doesn't really work out for us
because we're doing negative men on and
on and so it's an ugly graph but in the
data you can see here where they were
not in numbers it's now filled with
negative 900 or negative 99999 now an
interesting one here is let me move this
over with fill in a you have this choice
of limit so this can help you kind of
keep a little bit of data integrity here
so if you have let's say you know a
dataset that has a hundred thousand rows
but fifty thousand of those rows is
going to be negative ninety nine
thousand nine hundred ninety nine uh
that might not be good enough for you
that might be a little too many that you
filled in so you can use you can take
this limit and apply that limit and say
I will only do this to say you know uh
100 rows or you know you can make it
dynamic and check the length of the data
frame and say okay if the if and set the
limit to be 50 percent of your data
frame or ten percent of the length of
your data frame and what happens is you
can if you apply this limit after you
apply that limit see pandas contains n a
I think it's a is n a is what you can
ask for and you can find out if the data
frame has any nada numbers within it so
and if you do what you would do is you
would run through your data frame you
would apply maybe replace you would set
your limit and then you after that after
you run that fill in a check to see if
there's any nada numbers in existence in
your data frame and then if there are
either you know stop doing calculations
or whatever now what I'm trying to find
is fix
in handes dataframe look that up because
I'm pretty like I've done that before
let's click go check this yeah so what
you can do is to check to see just for
the record Google is your friend what
you can say here is you could say print
D F dot is null dot values sung and
let's say value fill that and then we
could say limit equals ten okay and
let's run that real quick good fruit oh
dear huh
my bad let's do that D F doesn't exist
for us okay so we come over here and
sure enough we can see that we've got
four hundred and fourteen remaining not
in numbers here so that's our way of
checking so like after we do this fill
an A and we say hey we only want you
know ten percent of our data frame to
contain now two numbers you can run this
and if that this greater than zero you
know break or something like that stop
doing stuff send me an email and tell me
something's wrong anyway I think that's
good enough for handling of missing data
in the next tutorial I think what we'll
do is we'll be talking about rolling
statistics and stuff like that so you
can do some pretty cool stuff there and
then after that we'll talk about
handling erroneous data so anyways
that's what we're going to be doing the
next tutorial so stay tuned for that
questions comment suggestions whatever
you leave them below otherwise as always
thanks for watching thanks for all the
support subscriptions until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>