<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python math and stocks: How to program the Chande Momentum Oscillator | Coder Coacher - Coaching Coders</title><meta content="Python math and stocks: How to program the Chande Momentum Oscillator - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python math and stocks: How to program the Chande Momentum Oscillator</b></h2><h5 class="post__date">2013-12-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IGbwRgo5-1w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody welcome to the second
part of our Xiaomi momentum oscillator
tutorial video in last video I was just
telling you guys about the Xiaomi
momentum oscillator showing you an
example and in this video let's actually
get to programming it within Python this
video is going to assume you have the
sample data for this entire series if
you don't there is a link to it in the
description just visit that link in
there
get that sample data copy and paste it
into like a notepad file and save it in
the same directory as a script also the
first like one two three four five nine
like nine or ten lines of code you can
copy and paste each part of these video
series here so the calculation every
time starts with the following lines so
if you have it go ahead and copy and
paste reason otherwise follow me so
first one I want to import numpy as NP
then we want to import time now we want
to specify our sample data so our sample
data equals open and what we want to
open is that text file that I just told
you guys to save if you have it gonna be
sampled data texts with the intention to
read it then we're gonna go ahead and
have it read in any memory and split
data is going to be sampled data split
and that's going to be split by a new
one then we're gonna have date closed P
hi P low P open P and volume being equal
to NP load text and what we want to go
ahead and load is split data the
delimiter for that split data is going
to be a comma since there a comma
separated and unpack equals true so we
can unpack it into these variables now
we're going to go ahead and define CMO
and the parameters that we want to pass
through CMO are the prices that we want
to use and the timeframe that we want to
use
don't forget your call or your colon and
let's go ahead and make some space
so now the next thing we want to do is
we're going to go ahead and you know
this function is going to return an
array and we're at that array it's going
to return a CMO only it'll be populated
right now it is not then we're going to
say x equals time frame whatever that
time frame is and then while X is less
than the length of date or probably
better would be prices actually so this
is not dependent on that original so
while X is less than the length of
prices we're gonna say consideration
prices equals prices and then it's going
to be x minus TF all the way to X so
basically as we as I said in the
beginning each that you're considering
all the up moves for a time frame and
all the down moves for a time frame so
right now we're just defining that time
frame so all the prices that we're going
to consider basically into the name
consideration prices now we're gonna say
up sum equals zero and then down sum
equals zero so each time this while loop
runs is going to reset these to zero and
then what we're gonna go ahead and say
is y equals 1 since we have to start at
the first part or like the number 1 in
the element right so I sometimes I call
that the first if element since it's not
really the first element since the first
element would be the zeroeth element but
anyway so the first if element well we
have to start there because we want to
know whether or not that's a up move or
a down though so at the zero element you
can't make that call
right so Wow Y is less than the TF
whatever that is curve price equals and
it's going to be equals consideration
prices and then the Y element right and
then it's pre price previous price
equals consideration prices y -1 then
we're gonna go ahead and say and I let
me make some more space or I guess
already add some space if current price
is greater than and I'm gonna go ahead
and throw an equal sign in here just to
be totally safe
so either this one or the other one
needs to have a greater than or equal to
right so either it's a move up or it's a
move down but we there's really no
handling here for like if there's no
move so that's my handling for if there
is no move the formula doesn't
inherently have any handling for that
since that's probably a really rare
occasion so current price previous price
so if it's greater than or equal to the
previous price then we'd add something
to up some right so we add up some plus
equals the whatever the current price
minus the Creve price is so if this is
greater than this then what is the
difference and we just add that else we
don't really need to define anything for
else because if it's not greater than or
equal to then it must be less than so
we're just gonna say down sum plus
equals and this time the pre price must
be higher so minus the kerb price and
that will give us also a positive number
and then at the end of this we just do y
plus equals one so it's going to run
through all of the prices and do that
now when that's done the cur CML and
this is where we actually do the
equation that we saw before so let me
bring up that yes so now we actually
want to use these numbers so the sum of
the ups minus the sum of the downs
divided by the sum of the ups plus the
sum of the downs times 100 so now that
we want to do that the curt s mo is
gonna equal up some minus down some / up
some plus down some and since we're
doing division here week either from
future import division or we could just
go ahead and convert one of these
numbers to a float so it just so the
division will always work in the way
that we want it to then we want to
multiply this entire fraction right so
this should close the entire thing
yes times 100 point zero zero that's it
so that gives us the current CMO price
we're still in this grand while loop
here right so we have current CMO and
then we'll come down here we'll say CMO
dot append cur CMO then we'll call X
plus equals one since that responds here
so we can actually exhaust that while
loop then finally when that while loop
is exhausted we'll return date and date
will always start at whatever that time
frame is and then see them l so these
will be of equal length to each other
then finally we would do CMO close p10
and we can say let's just say like X bar
equals CMO close p10 print let's just
print Y since we don't really care about
the date so we'll save that we'll run
that
hopefully we don't have any hello uh
can't capitalize that Pete Laura case
beats and it again proved price
somewhere I type to prove here it is
should be pre price strike again all
right now we actually have our CMO right
and how do we know that how do our are
we confident that we actually have it
all of these numbers are in the range of
either negative 100 to a positive 100 so
that's how we know that we did what we
wanted so now let's go ahead and in the
next video what we're going to do is
just go ahead and put this into
matplotlib and also in that video I'll
show you guys how we can do the SMA line
as well so anyways thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>