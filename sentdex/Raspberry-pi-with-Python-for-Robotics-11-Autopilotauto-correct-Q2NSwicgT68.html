<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Raspberry pi with Python for Robotics 11 - Autopilot/auto correct | Coder Coacher - Coaching Coders</title><meta content="Raspberry pi with Python for Robotics 11 - Autopilot/auto correct - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Raspberry pi with Python for Robotics 11 - Autopilot/auto correct</b></h2><h5 class="post__date">2014-05-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Q2NSwicgT68" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome to
another robotics with Python in the
Raspberry Pi tutorial video in this
video we're going to just hoe the line
into autonomy so before we make the move
fully into autonomy we can make a
pit-stop into a sort of autopilot or
autocorrect Ignace we're starting to see
a lot of this today with cars where they
actually maybe they begin to apply the
brakes for you when you're getting too
close to the car in front of you or they
slightly the wheel of your car if
you're drifting out of your lane so you
go back into your lane we can do
something similar here where either we
decline in control because it's
dangerous or we can actually just take
over control entirely for a little bit
if we sense the driver is acting a fool
so with that let's go ahead and get
started so obviously to take over we
could we could say either one we can
just deny you know like let's say you're
trying to go forward and the sensor says
hey there's a wall in front of you it
can just ignore any forward command if
distance is less than let's say 10
centimeters on the flip side the other
thing it can do is as it gets close to
that wall instead of ignoring any
command it can just reverse it can just
reverse away from the wall so that's
what we're going to do we're going to do
reverse if you want to do nothing then
just do nothing instead of having it
reverse so for this we're going to be
using our desktop environment so you'll
have to login to your PI once you're
logged into your PI just double click on
LX terminal and bring that up so looks
like I've got a couple here anyway so
what we're going to want to do now is
let's go ahead and change directory into
robotics and in robotics we have sensor
pi and what we can do is we can actually
import sensor dot pi instead so let's go
ahead and we'll take a look at let's see
sudo nano robot 4.com
all right so robot Ford up highs what a
latest script was and just go to the top
of robot for dot pie and now we're going
to import or actually let's do from
sensor import distance so now we have
access to that distance function in our
sensor script so before I forget let's
go ahead and control X we do want to
save it but instead of robot for dot pi
let's save it as robot v dot PI enter
yes ooh okay back in let's do sudo nano
robot v dot pi and now we want to do
let's just go all the way to the bottom
where we have like our main loop here
and basically everything we want it to
remain the same the only thing we want
is after this else statement all the way
down here we want to do another thing so
one two three four and now we're going
to say Curtis for current distance and
that's going to equal distance in
centimeters and then we want to have
let's go ahead and have it print it out
just so we know that we're doing things
right so we'll say print Curtis is and
then just print out Curtis oops
actually need to make this Curtis
okay once you've done that we're ready
to just call a quick if statement so
we're going to say if her dis is less
than 20 what do we want to do well 1 2
before I lost count 1 2 3 4 1 2 okay we
want to run initiation and then 1 hey
and then we want to run reverse and
we'll run reverse for 2 seconds so this
creates some serious space for us so
this should be it
with this script so let's go ahead and
we'll save that yes same name and
hopefully that'll work so let's do sudo
python robot 5 hi hopefully everything
loads up for us it gives us our first
distance measurement which is 50 and
really that's going all the way to the
pot or the pie it's going all the way to
my main computer which is actually quite
a distance so we'll use something less
than 20 most likely but this is just for
testing so first let's make sure we can
go forward and we can and we get current
distance also just as a quick side the
sensor works best off of a I want to say
it's a 50 millisecond wait currently we
wait 30 milliseconds so we're almost at
half the recommended wait time and what
can happen is maybe we can get it to
fail apparently I can't get it to fail
before I've got it to fail no problem
but I can't seem to get it to fail for
us but the the sensor will just say
there's no value like no value came back
nothing will crash the code won't crash
that you've written it just won't give
you a value so so just note that
sometimes you might see it I just can't
believe I can't get it to crash it was I
was able to crash it plenty of times
earlier anyway just know that when you
see that that's why if we raise it to 50
milliseconds for a key presses our
wheels won't actually spin they'll just
kind of click away and the reason why
they're clicking right now is just
because we have this interface up but
anyway now that we've got that what we
can do is okay so forward works but now
what happens if we take a box
or like this it wants to reverse and now
it's doing the forward command because
it got logged up anyway
then it wants to reverse and if you're
holding the key down while it's doing
that it's gonna retain that by the way
let me minimize it so we don't have so
much lag so now we don't really seem to
have too much lag so we can turn all
that and again if we throw the box in
front it wants to back up on us and
pretty much keep backing up until you
move the box and it's done so anyway
that's our basic code and we got it to
at least reverse for us now again I'm
not really too interested in having like
you know autopilot take over and stuff
but I mean we can see you can like
YouTube people either crashing or you
know RC cars or even worse their quad
copters like into you know walls and
stuff so just some simple code and a
sensor would save you from that so it
can't be helpful but really I'm more
interested in autonomy so in the next
probably next video what we'll do is
we'll actually have this car just drive
itself randomly and if it senses
anything is in its way it'll try to like
get it out of the way now we only have
one sensor and there's no sensor in the
back so this code probably won't work
very well it'd be better to if we had
our sensor on some sort of like swivel
that would swivel the sensor around and
maybe take multiple measurements but if
you're on something like a quadcopter or
something like that you're going to be
moving so fast so you're going to need
multiple sensors so just keep that in
mind so anyways that's going to conclude
this tutorial video I think I'll
probably eventually buy a bunch more of
these sensors they're so cheap so might
as well buy a bunch but I'm running out
of Io boards but I think you can just
buy a breakout board so I'm going to
look into that and maybe buy some more
of these sensors so we can actually have
some some serious fun with this car
so anyway stay tuned in the next video
where we make this car just do random
stuff and watch out at least for the
front end so if you have any questions
or comments feel free to leave them
below as always thanks for watching
thanks for all the support and
subscriptions until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>