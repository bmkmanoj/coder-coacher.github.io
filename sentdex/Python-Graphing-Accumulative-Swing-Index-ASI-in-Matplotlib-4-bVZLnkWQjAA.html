<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python: Graphing Accumulative Swing Index (ASI) in Matplotlib 4 | Coder Coacher - Coaching Coders</title><meta content="Python: Graphing Accumulative Swing Index (ASI) in Matplotlib 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python: Graphing Accumulative Swing Index (ASI) in Matplotlib 4</b></h2><h5 class="post__date">2013-11-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bVZLnkWQjAA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you
what's going on everybody welcome back
to the swing index code video where we
left off we finished off the calculation
of K I am not sure what this 2.8 is
doing here I'm gonna go and delete that
anyway we finished the calculation of K
here and we've got now we've got L rnk
being calculated so now we are actually
ready to complete our swing index
function here and get an actual value of
Swing index so now let's go ahead and
get started and let's look back at the
picture and we have this formula as I
said initially we can't do like you know
a number in parentheses and expect
Python to multiply like that so we will
have to fix that but otherwise the rest
is going to work the same so what I
would suggest that we do is first we do
the calculations of this top fraction
here then we go ahead and do the
calculation of this entire part here
then we'll add the KL and the 50 and we
will still calculate this all in one
line but we'll take it one step at a
time so it's not too confusing otherwise
it's actually I mean not just confusing
but it's really easy to actually screw
up in the calculation so that top part
of the fraction we're just like a little
I'll just call it top rack for now right
that was equal to what it was equal to
c2 minus c1 plus and that was like point
five but we have to do it this way right
Oh point five times something and it was
actually a c2 minus 0 2 then it was plus
and then again it was a multiplication
of that parentheses there so we're going
to do this thing again and it was c 1
minus oh oops oh 10 that's it let's go
look at that one more time to make sure
that's exactly what we wanted see 20 20
yes and this was c2 minus e1 plus okay
so that's that's correct so now let's
add more to it and what do we know well
we do know that this top part was / are
so we can literally just do you know the
whole track the whole rack was equal to
you know this / what it was / are but we
need to throw this and you print the
scenes / are right then we know both
sides of this fraction we r multiplied
one side was by fifty the other side was
by K divided by L so now we can finish
this off with SW I and equals and we'll
just take this copy this paste it here
we know this side will throw all this in
parenthesis right that's the whole
fraction we know that was x 50 and then
on this side it was multiplied by K
divided by L so now we can delete this
no reason to recalculate that and
finally we can print I'm just going to
print it like a couple pound signs there
just to separate it from all the other
values and then print a swing so print
the swing index so we'll save that and
run it and hopefully no errors come over
here and we can see our swing index is a
negative 1.96 so it's giving a negative
sing signal and that's it cuz we only
have really one day of worth of data
finally really what we need to do is
since this is swinging index we actually
want it to return it can still print out
swing index if you want but really we
need to return a swing so that whatever
we could say swinging index equals and
we plug all the values in there that we
want to equal and it will return the
actual swing index so now for the next
part what I want to do is I'm just going
to delete everything that prints stuff
out because we don't need to do it
anymore we're confident that everything
is working mostly you just print for
debugging purposes so I'm going to go
ahead and delete all this
print out all these printouts rather
this one I think maybe we'll leave a
print out of the swing index just to be
safe come back that in here and I'll
just have it bring index um ok so now
now we've done all of that we are ready
to plug this into our graphing chart so
if you're interested in plugging the
graphing chart that showed you at the
beginning of this series continued on to
the next video otherwise if you want to
just move on to the next formula you can
do that as well it's very easy to plug
it into the chart and all the code is
already there for you so it's just one
last step step to see it visually for
yourself so anyways stay tuned to the
next video as always thanks for watching
thanks for the support and subscriptions
and until next time what's going on
everybody welcome to the last part of
the swing index python tutorial series
where we left off we completed the
calculation of our swing index here and
now we're ready to input it into the
graph so if you don't already have the
code for the graph it's right here on my
website sent text icon / starting point
pi don't forget to capitalize the p in
point i want to go control a copy move
this aside and i think i put it yet
under here and just paste that code
right in here now the next thing just to
show you guys let's go ahead and run it
and the code for the code for gold is
gcz 13 cm x and actually you know what
we're not going to be able to do
intraday with this hold on let me go
we're going to have to actually make a
few edits I live you guys this will be a
little bit more difficult let's see
go to the top where you've got the range
here this says range ten years actually
want the range to be will do 10 months
so we should be able to get away with
that and let's make sure that we can at
least plot ten months for a while or
first we have to make the changes so
what to make some changes this code real
quick and the reason we have to make
that change is this data won't be able
to get like one year's worth of pricing
data for the futures so what we'll have
to do is get intraday data and all the
intraday data is plotted from chart or
Yahoo Finance's API in unix time stamps
and for the most part of the these
tutorial videos we're not going to be
using the unix time stamps we're going
to be using it'll be long term data with
it'll have nicer than use date stamps so
anyway we're going to have to make some
changes here so the first thing you want
to come over here and change the quote
range to actually 10 months and that
comes right underneath like graph data
here you go to the first try and its URL
to visit change that to ten months the
next thing that we're going to have to
change is going to be scrolled down just
a little bit and where you see a split
line equals each line got split by comma
so we're just just barely down like a
few more lines down go ahead and hit
enter and type fix me equals each line
dots split and split it by a com oops
I'm sorry that's going to be each line
fix me equals a split line 0 that's
already there
they're so fixed me is going to be a
nice little value that we're going to
use right before we append each line so
that's going to correspond to that unix
timestamp then we're going to come down
here and convert that unix timestamp to
a date stamp so it works with the rest
of our script here so we're going to
make a very long line so just type with
me each line equals each line dot with
place what do we want to replace we're
going to fix me one place that where we
want to replace that thing it's going to
be in any the string version of date or
rather what do we want to fix more we
want to call it the string version of
date times i'm thinking of too many
things at once datetime datetime dot
from time stamp and then parentheses
here what is the time stamp that we
actually want to use what we're gonna
use ink fix me and the reason why we
have to use it it is because naturally
it's going to read that as a string
right so in fix me make sure you've got
to closing parenthesis their diet st r
ft I and II so it stands for string from
time and now we can specify what kind of
little stamp we want this data to have
so percent capital oops make sure you
put it in quotes here % capital y dash
percent lower case M dash percent or
case the space percent capital H colon
percent capital M colon percent capital
s and when we're all done you should
have three closing parenthesis at the
end if I remember to I'll throw this in
the description of the video just
because it's such a long line you can't
really get it all in one frame and I
want the text to be pretty big so it's
easy to read as well as we're going so
yeah now it will append that each line
here won't be an issue well last thing
that we need to do though is take this
stamp because later on we're using a
stamp so copy the stamp
here and we're going to come back over
and now scroll down just a little bit to
this converters where it has a high p
low p all that stuff over to your
converters and see this stamp replace
that paste that in there make sure you
don't too many there okay so now it
should chart it now just to be sure
we're going to go ahead and save it and
run it and i'll come over here now and
the actual name for this gold future
going to use gold december 13 is gcz gcz
13 cm x that's a little symbol let's see
here one second this is trying to bug
this possibly there's not enough data
there's not ten months worth of data
let's do a one month all right run that
again if you hit alt p that'll just type
in the same thing again nope still not
working let's try ten days then maybe it
doesn't even have a mark looks like
that's actually going to work for school
hopefully taking one there it goes oh
man inside of put you guys through the
ring actually what we want to do if you
saw that change that to one day and then
scroll over and scroll down a little bit
and after we've made all these changes i
highly suggest you keep this version of
the script on hand so you won't have to
do this again when we if we get to
another formula that's going to require
this and go to the part right underneath
you got wild why keep scrolling down
where we define ax one here and then go
to the spot where we say candlestick
right here and the width is point six
add three zeros that one two three run
it one more time and hopefully we have a
better looking futures chart here that's
so much more attractive okay so this is
what we got and where do we want to
stick the
accumulated a swing index is right down
here so we're going to go ahead and do
that even though we spent a long time
fixing this graph but that's okay so now
the next thing we want to do is add that
in so now go back over to where we made
it right we made it right here and what
we're going to do is just highlight the
entire thing all the way down to where
it returns the swing index copy that
come back over to this script just go up
to the top here and write it right here
just make some space and paste the
entire function in there once you've
done that scroll on down I made a little
comment section where we'll add the new
code it's right here just I got that
part going for you guys real nice and
easy and tab over and now we can begin
our script so because this data is
coming out as numpy and all this stuff
it's very difficult to modifying in
Empire raised so the easiest way I think
I can convey how we're going to do this
will be first we'll have a swing index
why a swine e equals empty parameters
and then want of a SW I and date d
equals empty parameters if you decide to
use my same kind of casing here just
make sure you know watch that for typos
and then we're going to say x equals 1 X
will just be our starting point and then
we're going to say wow x is less than
the length of date starting at the first
one value because we're also starting x
at one do the following and datejust
corresponds to the day way up here where
we're pulling the data from Yahoo's API
and we're just calling that first thing
a date just in case you follow that
tutorial and we have to start X at one
because we need not only today's value
but we need yesterday's quote-unquote
value even though this is one day's
worth of data the same kind of thing
applies right whenever you're working
with time series generally you call it
more something like one bar of data so
when you're reading formulas if they say
day or if they say minute or whatever
just really you can treat that as one
bar right doesn't matter with a time
series length is but anyway or the
timeframe
anyway continuing on we're going to
encase this in a try and accept loop
such me and if we hit an exception we're
just going to do X plus equals 1 now the
next thing that we want to do is try and
why write the Y variable the Y that
we're going to plot equals and hopefully
you guys are ready for a long line swing
index so we're calling that parent
function and now you've got open one
open to all that stuff how are we going
to do that well we've got open p which
corresponds that the open price from yon
whose data and it's going to be X minus
1 right open open one is yesterday's
right so we're treating X like X's today
now and then open p x then pi p x minus
one and then hi p x then lo p x minus
one then again low p just straight up x
then closed p x minus one then closed p
x then finally the limit move we're just
going to throw in the 75 there you could
eventually develop a function that finds
out the limit move for you but for now
we'll just throw it at 75 in there hit
enter we're done with that nice and then
we're going to go a swine why append why
so what kind of why do that and then
we'll also do a swine date dot append
whatever the date of X is since X is the
current date and then X minus one will
be the prior date and so on subsequently
will do X plus equals once we run
through all of the prices out of the API
finally the last thing that we have to
do is a x two dot plot
and swi and date right that's the x
variable Y value is going to be swine
why then we're just going to plot it
with a white line so i'll just put w and
then we'll say line with we're really
good just leave it one but we'll make it
kind of bold ish with a 1.5 okay so that
ought to work we will find out in one
moment so we'll go ahead and run that
come over here didn't get any syntax
errors let's see if we got any other
errors though run it and it's printing
out all the values for us we didn't have
to do that main loop x and y must have
the first are the same first dimension
let me see here let's check the day is
one coin ah we did actually have an
issue append is not a valid um thing so
or a pinned anyway so we were probably
hitting our exception every time let's
go ahead and print strength me of an
exception if we hit it we will hit it
probably on the last value anyways but
anyway well let's run that one more time
you might get this error because it drew
a graph and never got to show it come
back over here pulpy one last time price
should have stopped it from printing out
the we've got a lotta hair is there but
anyway move this over and now you can
see down here that we've got our actual
calculation it does you know hover
around zero we're fairly confident in
the calculation of that come over here I
let's zoom in to this point here you can
see where it has crashed and it you know
significantly went up for us it's been a
good spot here to zoom into this spot
here
another interesting thing that we could
do is we could like we did with the RSI
up here is draw you know where we've
marked only 70 and 30 or at least we
could draw a very distinct line a zero
line right so that's that's the idea is
like whenever it crosses over zero it's
either a bad thing or a good thing as
far as trend is concerned so yeah you
that in mind there so anyway there's a
lot of customization that you can do but
most I just wanted to show you guys the
calculation of it and then plot it up on
this chart and also really the the data
that we're using at least for this chart
from Yahoo's API I just wanted to keep
it as simple as possible so because we
were plugging into Yahoo's API initially
and I just wanted to show you guys
charting it the this is really more
meant for date one day data right that
was that's how he initially intended
this to be used so really you'd want to
use it with you know one day open high
low close data but anyway this is what
you get but you can plug any pretty much
any of your data through and if you
really wanted to do that you can if you
watch the series on how we actually
program this chart you should have no
problem at all doing that so just keep
that in mind so anyway that's going to
include this tutorial video on the
calculation of the swing index not
really my favorite indicator to be quite
honest but got to include it it's
somewhat popular indicator that people
like to use so that's the indicator as
always thanks for watching thanks for
the support the subscriptions and until
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>