<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python: Programming Center of Gravity Stock Indicator 2 | Coder Coacher - Coaching Coders</title><meta content="Python: Programming Center of Gravity Stock Indicator 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python: Programming Center of Gravity Stock Indicator 2</b></h2><h5 class="post__date">2013-11-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Tu_GsixAxVQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on guys welcome back to the
center of gravity tutorial within our
Python mathematics in stock indicators
tutorial series where we left off I was
just showing you guys the example of the
center of gravity here and now let's
actually work on calculating the center
of gravity if you don't already have the
sample data please visit cent Dexcom
slash sample data
pay attention to the camel casing
literally control a control C and save
that data into like a notepad file in
the same directory as your script if you
have been programming with us just take
that kind of top part where we import
numpy all the way down to where we do
the numpy load text and you won't have
to type with me awesome otherwise you
can type away to me we're going to need
import numpy and we're gonna import that
as NP we're also going to import time
just in case we need it
sample data is going to eat we'll open
and we're going to open that file that
we just downloaded data dot txt we're
gonna intend to read it and we're going
to just go ahead and read it then we're
gonna split it up and that's going to
equal a sample data and I'm this type of
that so something data dot split by line
then we're going to go ahead and define
all this substance we date closed P hi P
low P open P volume and then equals NP
load text what text do we want to load
be well load up split data the supposed
to be a comma the delimiter is also a
comma finally unpack needs to equal true
and that so we can split up data like
that now the next thing we want to go
ahead and do is define our center of
gravity function so to find cog and the
parameters that cog is going to require
is dates data and TF for time frame
generally time frame will be 10 but you
obviously want that to be variable so
you can choose whatever you want if it's
lower than 10 it's generally gonna be
very noisy and if it's higher than 10 it
will begin to lag usually 10 is what's
suggested so I would use 2
so now at the end we are gonna have a co
G for all the center of gravity numbers
then what we're gonna do is we're just
gonna say x equals TF if you've kind of
been following along the reason we want
to do that is X will be like where we
are in that array time frame that's just
where we're gonna start we need to start
at whatever that time frame is so
there's that many pieces of data prior
so what next thing we're gonna do is
we're gonna say well X is less than the
length of dates what do we do serves
well we need a consideration array so
we'll say consider equals data and what
we want to consider is that the starting
point of this will be X whatever X is at
the time - time frame so let's say X is
currently 50 so this would be 50 - a
time frame of 10 let's say so that
wouldn't mean X was 40 and then to what
point X so it'll be X minus 40 all the
way up to X so they give us the data
that we want now the multipliers like if
you recall them to bring that image back
over if you recall our multiplier is
that is the current number right so if
it's the tenth price then that would be
10 times p-1 right so the multiplier is
going to be something in a range right
Serena's multipliers equals a range of 1
- timeframe right but we must do time
frame plus 1 and I will show you real
quick just why we have to do time frame
plus 1 so let's say x equals a range of
1 to 10 let's just say that's the goal
we have you're gonna find that actually
print X it only goes to 9 because the
range works from the first number all
the way to this this number and so like
if you also said like you know some sort
of array and you said you know X to the
1 to 10 that's the same way arrays work
it would actually only go to the 9
element so what we need to do actually
is say if time
means 10 which it is we have to add one
and then it would be one to ten just so
everybody understands why we're adding
one there that's really the cater to the
programming language not the formula
next there's obviously a top fraction in
a bottom fraction right the top fraction
is just that numbers number in the in
the data and then the bottom fraction is
just that price right that we divide by
so pretty similar yet a little bit
different so we're going to go ahead and
make a top frac
and that top fraction is actually going
to end up being a number so we'll start
it at zero and then plot frac is also a
number that will start at zero and then
at the end we'll divide them so the next
thing that we want to do is because it's
data point one two three four or five
like one is today ten would be ten days
ago where but if we consider this time
frame of data it's going to be an order
of today as number ten in that array and
then you know the first day would be
number one so we want to kind of flip
that array and again I'll show you a an
if T little trick that we can do with
that I guess closed out of our prompt
there let me bring it back so let's say
you've got x equals and you've got one
two three four five six now what we can
say is river for reversed equals
reversed X now that actually it creates
what's called an iterable but what we
can do is iterate that into an array so
the way that we'll do that is you can do
something like this so like for each I
in River we can just we'll just print it
out for now you'll see it'll goes six
five four three two one
okay so as you can see it reversed it
and now we can just append it into an
array so that's what we're gonna do next
so reverse order equals reverse and
consider and then we're going to say
ordered I equals an empty array and
that's what we're going to append this
stuff to
and then we're going to go ahead and say
for each item in reverse order ordered
dot append each item so now we've done
that now we want to say for for each M
in multipliers it's like for each
multiplier basically in multipliers what
do we want to do well we want to say add
meet equals that multiplier so each M
times ordered which is the reordered
range of data basically so ordered each
M minus one so each multiplier we
started at one so really we could say x
equals a range of really zero at a time
frame that would have actually worked
then we wouldn't have had to do this but
since we've done that we'll just leave
it and then we'll say add me to equals
and so this will be what goes on the top
fraction add me to is just going to
equal ordered each M minus one so that
top frac is basically doing this write
the number in that array times the price
of that number in the array then we're
gonna divide that by the price of that
number in there right so now that we've
done that we want to say top track plus
equals add me and then baht frac plus
equals add me to so now we're going to
add all those together once we've done
all of that we're gonna say C of dirt
equals the negation of top track / ba
frac okay so you know just to be safe in
case somehow these numbers became a
whole number in some way we'll just make
this bottom on a float just to protect
ourselves from that now what we want to
do is say cog
and see of gravity and that's appending
that date data to this right so we're
now generating a list of center of
gravity's then we'll do X plus equals
one and then finally we're done there
and we're gonna want to return dates and
then wherever the time frames started
basically its center of gravity
finally if we run called date we want to
use the closing prices for that
generally when you do a any sort of
stock indicator that isn't using all
prices you to the close price so it's
like the closed price of the bar or so
if a bar is a day then that's that if
the bar is a one-minute bar it's the
close price of the open high low close
one minute now just for kicks let's go
ahead and print actually right now cog
and just see if we get data that we're
actually looking for generally it's well
it should be a negative and it's
probably going to be in the range of
about negative five or something as
we've been seeing okay so we hit run and
here we go we've got a bunch of negative
five point four nines basically to start
then it gets to 5.5 all that so looks
like the data that we were looking for
so now what we're going to do in the
next video is actually you know add this
to our chart and plot it up so that's
that that's what you have to look
forward to in the next video as always
thanks for watching thanks for the
support and subscriptions and until next
time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>