<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Pulling from Sea of BTC API - Tkinter tutorial Python 3.4 part 24 | Coder Coacher - Coaching Coders</title><meta content="Pulling from Sea of BTC API - Tkinter tutorial Python 3.4 part 24 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Pulling from Sea of BTC API - Tkinter tutorial Python 3.4 part 24</b></h2><h5 class="post__date">2014-12-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/LrhDIqxI9yM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everybody was going on welcome to yet
another tkinter mega series tutorial
video in this video we're gonna be
talking about how we're gonna acquire
the data as well as eventually start
plotting up the data on these subplots
that we've set up so with that let's go
ahead and get started so we've got the
subplots setup and then basically you're
gonna come down and we're still writing
basically underneath this try right here
but in line with else so basically at
the end of this you could hit enter
right and then you delete and then
delete one more time and now you're
where you want to actually begin to code
so first we need to acquire the data and
as I keep saying we're gonna be using
the CDC API and so that will normalize
all of the data for us so it makes it a
lot easier so anyways the data is gonna
be pulled from and we're gonna use URL
Lib dot request URL open and then we're
gonna open the following link HTTP colon
slash slash C of bbc.com
slash API slash basic slash price and
then our first parameter here so
question mark key equals one and so the
next parameter with the + sign here TF
for time frame equals and then we're
gonna do a plus data pace okay and then
plus and now we're going back into
string form here and where's the inside
and the exchange that we're interested
in is equaling and then we're gonna do
plus program program name so the name of
that exchange in our program and then
finally dot read so URL Lib dot URL or
your a live dot request out URL open
this basically this is all the URL so
for example
would be TF equals one day and exchange
equals btc-e
okay so this and then read those results
now just like before in my github code i
have not properly decoded so let's go
ahead and fix that right now so data
equals data dot decode and that is
better than what I was doing before and
now we're gonna say data equals json dot
load strings or loads data then our date
stamp of this data equals NP array of
what data 0 so the first if you know
it's a basically a list within the list
and then we're gonna say dot as type and
we're converting this to data date/time
64x okay so that's our date stamp and
now we're going to convert that to a
list so date stamp equals date stamp oh
my goodness to list okay so I'm just
going to condense these together now
we're ready to use our pandas dataframe
to manipulate all this so now what we're
going to do is when I say DF equals PD
dot data frame and then in the
parameters curly braces big time got
myself lost : date stamp now we're going
to define the columns here so the price
column Sophia price is equal to data one
okay DF volume is equal to data 2 so
that's why we were having volume on
Hobie even though there is no volume DF
just in case we support other other
forms of currency besides just Bitcoin
we could do like coin feathercoin
whatever but we'll say BDC USD for now
I'll just hard code it and then DF MPL
date now we have to create this so we'll
say NPL day equals DF date time dot
apply and there were to use a lambda
function against or lambda date : M
dates dot date - num and this will be
date dot to underscore PI date time let
me get all of that line into view if
you're behind a little bit can't show
okay so that's MP L date and then
finally we're gonna say DF equals d f
dot set underscore index and we're going
to set the index to that date time okay
now what we're gonna do is set up our
open high low close information now I
don't believe we've actually got open
high low close imported so it's good at
the very very top here and we do not so
shortly not in this video but in the
coming videos we're going to be plotting
using candlestick charts so the
traditional open high low close so to do
that we're gonna go from Matt plot live
dot finance import candlestick
underscore ohlc for open high low close
now that we have that let's get back to
work I'm doing a control if and then
typing an animate here enter scroll down
to where we are coding here and we're
ready to rumble so now we're going to
write some data to generate open high
low close so we're going to say ohlc
the equals D F price and what we're
gonna do here is do something called
resampling with with pandas and this is
something that's actually built in to
pandas and pandas functionalities so
what it allows you to do is take a data
set and resample that data set based on
your own parameters or some of the built
in parameters in pandas just so happens
that pandas actually covers open high
low close data so and has something
built in for us so it's really really
quite simple so open high low close
we're defining a new data frame
basically equals D F price dot re sample
and da tree sample and RiRi sample it
with the resample size you can see that
how equals we want to resample it with
open high low close
sorry sample size if you forget that is
what is defined by our date size right
so if we say our actual our window size
I guess so
we want 5-minute bars that is go
straight into this built-in pandas
functionality and it will resample our
data for open high low close based on
5-minute windows if we threw that to it
so unless you've got that we're going to
do open high low close dot or open high
low close equals open high low close dot
drop na and what that does is drop any
non numbers so not a number it is going
to drop those it gets them out of the
way they're very messy and they cost
problems so we're just gonna do that
next we're gonna say volume data equals
D F volume and then we're going to also
resample volume because we have to
resample volume to match the open high
low close bars that we have so whereas a
DF volume and we're gonna do dot
resample sample and then we're gonna
resample according to the resample size
and then the question is how how are we
going to resample these well how is the
best way to resample volume data
so with volume data sense we're using
open high/low close
would it be better to like push all that
data together and do an average or are
we actually you would want the full
number right so we want to take all of
the volume data for those five minutes
and we want to sum them together so when
you do how you say volume colon sum and
then we'll add all of the volume
together notably you can do all kinds of
stuff obviously you can do open outlook
closing we do average you can do all
kinds of crazy stuff with resampling so
anyway that's bowling day now we're
going to go ahead and say oh wait slow
clothes we're gonna make it I guess to
make a date copy here so say oh oh it's
so close date copy equals H low close
dot index and then we're gonna say Oh H
look close MPL dates so we can actually
plot this madness equals ohlc of dates
copy because we can't necessarily
apparently reference just the index dot
apply lambda and then date and then
basically this code that we've done
already before right here so let's just
go ahead and copy that paste and then
and then we're gonna get rid of that
date copy that we have we just don't
need it anymore so del Oh H low close
date copy then we basically need to do
the sustain same thing with volume data
okay so we have to do volume and in fact
let's go ahead and let's just copy this
highlight everything copy come down
paste and replace ohlc with volume data
take this copy
paste paste paste paste and that should
be satisfactory nice so now we're gonna
say price data equals ohlc close dot
apply float dot to list and in fact we
have not I don't think incorporated
price data into the right into our tick
data yet not really try think that's
really truly necessary but it's good to
have it there so let's copy that and
we're gonna go up to our tick data
really quick and we need to add that to
each of our exchange data sets so just
basically at the end of all of our data
sets we want to have price data equals
and then this will be D F price dot
apply float to list and then we're gonna
do the same thing with the other tick
data sets here so this paste the F price
okay and this one C this is D F price
we're saying D F price at camera views D
F or actually should be data should be
data for for the rest of these price
data
price scroll up now bitstamp paste and
then finally for BD c e paste so we're
pasting this price data we're not using
it yet but we are going to use it down
the road I'm not really sure we'll use
it for tick data but we might so that
they're coming back down where we've
defined now price data for the open high
low close information at this point
we're pretty much ready to plot or
really start throwing this throwing the
data at our graph so I think what I'll
do is I'll cough the video here and
we'll continue in the next video with
clearing and starting to write our
actual plotting codes now that we have
the data so if you guys have any
questions or comments on this video
please feel free to leave them below
otherwise as always thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>