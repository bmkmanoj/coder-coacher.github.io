<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python: Programming The Aroon Indicator - Mathematics and stock indicators 17 | Coder Coacher - Coaching Coders</title><meta content="Python: Programming The Aroon Indicator - Mathematics and stock indicators 17 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python: Programming The Aroon Indicator - Mathematics and stock indicators 17</b></h2><h5 class="post__date">2013-11-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FbNYNRjalEc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to the
second part of the Aroon tutorial video
where we left off we were just talking
about what the Aruna indicator actually
is now let's actually program this
within Python so to do this we're going
to need the same things that we've
usually needed and then we're going to
import numpy as NP and there were an
import time if you have been following
along you can really just copy and paste
the top part of where we're getting the
sample data date close high-low up and
all that you can just copy and paste
that also if you don't have the sample
data it is the following link I'm going
to drag it over here
syntax comm slash sample data that text
just do it you know ctrl a ctrl C open
up a text file and paste this data right
into that text file I'm calling that
text file sample date of that text so
sample data equals open sample data text
with the intention to read it we'll go
ahead and read it into memory there then
we'll do split data equal sample data
dot split by new line then we're going
to go ahead and call that number with a
date closed P hi P lo P open P volume
equals and pop and pop numpy or NP dot
load text and then here we're going to
what text we're gonna load split data
the delimiter is gonna be a comma and
unpack must equal true so we can
actually unpack it into these variables
so now what we want to do is let's go
ahead and define room and then the align
parameter for a room that we're gonna
give it is time frame or TF which stands
for time frame for us
now we're gonna find the raise that this
is going to return so we're gonna
process some stuff and we remember at
the end of this we're going to return
some arrays obviously they're gonna
start empty so a room up is gonna equal
an empire empty array and time array so
he's just saying numpy instead of numpy
I always look like we caught dumpy at
first so I'm like always just like none
and then yeah awry right anyway a room
down equals empty array and finally a
room date equals empty array X will
equal time frames X is where we want to
start right so let's say you know you're
considering a 50-day thing you have to
start X at the fiftieth part of that
array otherwise it's just literally
impossible to consider 50 days it's like
a moving average right you could again
just like moving average consider that
data and like alpha 3 if you're
considering a 50 day time frame and you
only have 10 days you only consider
those 10 days and that's you know okay
whatever but that's not really the best
way to go about it plus we are at least
an arm charting application using a 200
moving average so in that case it
doesn't really matter we could go all
the way up to a 200 day time frame and
still not really lose any data so and
like just like with the moving average
you know you're using these time frames
to give you you know smoothed out data
and so if you're if you don't if you
kind of ignore that and you still use
the data prior and like with less than
your time frame all the way up into that
time frame the data is all bad anyways
it's distorted compared to the rest
anyway so now what we want to do is
we're going to say while X is less than
the length of date we could use the
length of any of these variables we just
want to have that length what do we do
now due to the simplicity of this
indicator we're actually able to do this
all in one line so I forget which other
thing we did all in one line but what
I'm gonna go ahead and I think was like
the first one we did me was Average True
Range or something I can't Hollis can't
remember but we ended up doing that most
of that fraction and one line in this
room we can do the entire thing in one
line so I'm just going to take it kind
of slow and explain what we're doing so
first let's discuss the arune and we'll
call this a Brune underscore up equals
what now let's bring back that image so
we know what we're at
dealing with so the aruna this is what
it's calculated by so obviously you can
see it's very much in one line all right
so how can we do this within Python well
the time frame we've already got defined
but this how long since the last high
you might see this and be like well
that's going to require some
functionality all right so because not
only do we have to decide how long has
it been since the last high we really
need to know what was the last time so
we we need some logic to determine what
the last high was and then some logic to
determine how long since that last high
so it's not quite as simple as this
thing you know just spits it out at you
and you're like ok that's one line but
we actually can't do it one line if you
haven't told if you haven't been able to
figure it out I'm pretty proud of this
one-liner so the first thing we need to
do is let me I guess we'll explain how
we're going to do each part Libre that
image back again so how long since the
last high we can get last high and last
low by doing a minimum of a list let me
bring up a command line here and so
we're going to say example equals and
then we're going to do one two well that
we're gonna do this all right okay so
example he was that what we can do is
print max e.x and we get at six we can
also print min II X and we get a 1 right
the next thing that we can do is you can
also get well first of all numpy it
comes out in an umpire array you cannot
perform this action on an umpire array
luckily you can perform a dot two list
on an umpire array to convert it to a
list now the next thing that we can do
is for example with this six we found
six is the maximum right the next thing
we can do is we could print e X which
refers to this list dot index and then
the index of what we're gonna say six so
where is what index is six in here and
we get four
which is correct because the zeroeth
element is the one one two three four so
that's how we can get the index of this
array finally what we just need to do is
kind of flip flop this because in the
array like we get the index it's a four
but really if that's where we are in the
array it should be a zero right it's
been zero days since so then you take
the time frame say in this case it was a
the time frame is five days since we
have five elements here you would just
flip that minus one because an array
starts at zero so you've got four days
four minus four zero times since update
is zero then obviously to the rest why
are you divided by the time frame times
100 to get that kind of percent so it's
normalized and we do that but that's
this is the logic that we're going to
use so what we're going to be able to do
is convert that numpy array to an to a
list then index the maximum of that list
right and then we can do the rest but
you'll see what we're talking about
as we go so the first thing they wound
up would be we want to know what the max
hi max hi price of X is the time frame
but we can't just use time frame because
we're going to keep adding one to X but
we just want to use time frame as a
starting point just so we're clear so X
minus the time frame to X so that'll
give us what the highest number in the
highs is right then that's great but we
actually don't care about whatever that
number is right we actually want to know
what the index of that number is so
instead to do an index like I said
before the index is I'm just going to do
it on another line so it's real nice and
clear we really want to do high P X 2 or
X minus TF
to X and this is an umpire ray because
we've unpacked it in an umpire right so
we need to convert it to a list and that
is simple you just do two lists then
what we want to know really of this max
number is what is its index right so to
do that you do dot index that's stuff so
it turns out that really dot index what
we need to throw in here is this so just
cut and paste that right in there and
that's how we're going to do that now
the next thing we want to do is we want
to divide this by whatever the time
frame actually is so the next thing we
will really want to do is throw some
parentheses around this entire thing and
then we actually want to divide it by
the time for it
well as we know with Python if you do a
simple division such as let's open up
the command line a game and do 8/5 it's
gonna return a 1 because it's trying to
give us a whole number but if we do 8 /
5.0 it gives us the true number that
we're looking for also we can do 8 /
float 5 and it gives us the right number
so that's the idea that we're going to
use here so instead of just TF we're
gonna say / float
TF and then this entire operation here
we actually want to multiply it by a
hundred so again we'll throw one last
bit of parentheses around here and then
multiply by a hundred so lastly just to
make sure you did your parentheses
alright you can delete that last one add
it and as long as it like highlights the
whole thing that you want that to be a
part of the operation you did it right
so we've done that one right so now
let's go ahead and copy and paste that
one-liner
right here and if you have any questions
about that one liner feel free to post
them below but hopefully I've explained
it good enough so now irune down is
gonna be pretty much the same idea so I
am just going to
I like this copy this paste this and
change this to low P we want the minimum
and change this again to low P and the
rest is good it looks like so now we're
coming down here and the last thing we
need to do or not the last thing but we
need to actually append them to their us
their arrays right so we want to do a
room up dot append and we want to append
a room up to it then irune down
we want to append a room down and then
finally a run date we want to append
date and then whatever the X element of
date is then finally we need to do X
plus equals one to add one so this while
loop doesn't result in an infinite loop
now to check our logic it sometimes just
helps to print everything out so let's
go ahead and print out like some of our
output so we can decide whether or not
we're happy with our logic so print IP X
pretty
arune up and then we'll just print like
a quick little splitter here then three
low P X 3 and actually shoot we should
do this before the X plus equals one so
we'll move that in just a second print a
room down then we'll do this print then
at the end of this while loop we're
gonna go ahead and return around eight
irune up and around down so we can
actually just assign this function to a
variable are three variables so let me
move this X plus equals one down here so
we get the right numbers here uh
okay looks like we're good so now let's
do it a room 20 and check out sales so
save that run that and we have a oh okay
this needs to be a single quote save
that run that one more time so now when
we actually go to run this we can see
the output that we're giving me just
drag it over as it's spitting it out and
you can kind of check it to decide
whether or not you're happy with that
obviously this is the high price this is
you know in percentage-wise time since
last high so you can see like as an
example you know here was the probably a
new high not a new high still not a new
high and you can see our number is going
down down down yeah so so that's that
now what we're gonna actually do is go
ahead and graph this on our chart in the
next video so stay tuned to the next
video as always thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>