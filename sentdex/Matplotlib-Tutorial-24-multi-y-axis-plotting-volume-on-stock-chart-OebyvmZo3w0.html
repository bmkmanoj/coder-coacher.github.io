<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Matplotlib Tutorial 24 - multi y axis plotting volume on stock chart | Coder Coacher - Coaching Coders</title><meta content="Matplotlib Tutorial 24 - multi y axis plotting volume on stock chart - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Matplotlib Tutorial 24 - multi y axis plotting volume on stock chart</b></h2><h5 class="post__date">2015-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/OebyvmZo3w0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome to
part 24 over matplotlib tutorial series
in this part what we're gonna be talking
about is a multiple y-axes so up into
this point each little you know subplot
is its own subplots own special
butterfly where what we might want to do
from time to time though is have a
subplot that has two types of data on it
but maybe those two types of data aren't
normalized and what I mean by normalizes
there may be of a different scale
entirely so an example of this would be
price and volume so a lot of times price
and volume go really hand-in-hand but
there have two totally different scales
so volume might be you know we might be
trading hundred thousand shares of a
company a day where price might be 54
all right so this is where like plotting
volume comes in now volume the actual
number of volume and the fluctuation of
volume I said well the fluctuation is
important but the actual number of
volume isn't what people really care
about they care more about changes or
spikes in volume so this is an
interesting one to share and subplot
with and to do a multi y axes with so
that's what we're gonna go ahead and do
in this tutorial so let's go ahead and
close this out and talk about adding
that where is my mouse there it is
sometimes I lose my mouse I have a lot
of monitors and sometimes it just I
don't know it gets lost
so anyway closing this out what we're
gonna do now is up here's where we're
defining are all of our axes and what
we're going to do is to find another
axes and that will just will do that
underneath this little y label and we're
gonna do a X to V and that's just X to
volume basically and what that's going
to be is this is a little shorter
definition all you have to do is do a x2
dot
twin X oops twin X and that means we are
we share that we truly share that x-axis
I don't mean to be confusing with share
X here but this one is like a twin X
it's almost like to me they these like
names should switch places right a twin
means we have another one
it's just but we're separate but when
we're share X we should be the same but
for some reason share X means it just
has like the same attributes basically
it sounds like a twin to me and then we
have twin X we are actually sharing
truely sharing as in one thing belonging
to two things or multiple things the x
axis but this is what we have to work
with so twin x really means we're
sharing that same x axis and we have a
separate y axis so that's a X to V now
what we want to do is we're gonna come
down and basically here is where we're
doing all there were a X to stuff this
is annotations if you want to you notate
for whatever reason now we're gonna do a
a X to V and then this will be a fill so
we're gonna do X to V dot fill
underscore between and we want to fill
between whoops this date
let's just let's take this line here so
we just can work smart not hard paste
and instead of M a one we're gonna do
volume so we got volume a long long time
ago many many a tutorial ago and that
was up here so that's what we're we're
we're grabbing volume from just for the
record so now we're plotting we're
feeling between date volume and then and
actually what usually what you'll do is
something like this so we fill between
the zero mark and volume so we choose
zero we hard-coded in zero because
that's the least amount of volume
possible for a company would be zero so
we'll do that with zero and then what
we're gonna do we specify a face color
so comma face color equals and I mean we
can do really any color what's do we'll
just choose to do zero zero seven nine a
three okay so we've got a face color now
and then we can add a slight alpha so
because because of what's happening
we're gonna share it let's not add an
alpha first actually so you can see why
it's necessary so let's save and run
that real quick see how we do
so there we go we've got volume now
being plotted on top and the reason why
we would want to add an alpha is like
what if we zoom in to like here
right it's literally covering over our
stock price like in this point it's like
well what's the price of stock we don't
even know because silly volume is
getting in the way so first we would
want to add some sort of alpha to it so
we'll say alpha equals 0.4 so we can
start off with something like that and
that looks a little better now the next
thing that we noticed is like this it's
got two freakin grids here like we've
got one it's just really messy before
our grids were so nice and clean so so
what we'll do and we also have this lay
seven this is it's a french seven anyway
we'll close this and I crack myself up
what we'll do is first of all let's get
rid of the tick labels so the way we can
do that is ax to V dot axes Y axes dot
set underscore tick labels and we can
set them we can we can pick whatever
labels we want specifically we're gonna
say we want specifically nothing okay so
that's how we do that and then let's get
rid of that nasty grid x2v grid false so
now we'll save and run that and whoops
what why act let's see ax to V dot y
axes dot set tick labels we misspelled
labels labels again good okay so now a
few things one we don't have that nasty
grid messing things up
we also we've got the Alpha which we
already kind of knew about and we don't
have the labels over here again people
rarely care about like the the numerical
number two volume I mean some people
generate indicators and do analysis
based on volume but when it comes to
like plotting it on a chart people don't
care about like the numbers necessarily
some people do and you might want to
include the numbers and if that's you go
ahead
but we don't really care that much about
it plus you you can kind of hover it but
I guess that's really not gonna work
because we got rid of the labels and
stuff but anyway well we got rid of them
if you want them go ahead and have them
now the next thing I want us to cover at
least in the case of eBay it's not
really a problem
let's close a bay like let's try a
different company let's do goog for
Google and see how you're looking okay
so Google is a little better of an
example so cuz it doesn't have a a sharp
of a spike but this is kind of ugly like
if you recall the eBay one actually
looked kind of good right the reason why
this is ugly is because volume is taking
up too much space we don't want it to
take up that much space so the way that
we we can actually scale that y-axes
customly customly we can customize it
regardless of the proper grammar there
we can do this we can do ax whoops ax to
V dot set underscore Y Lim and we'll set
that between zero and three times the
volume dot max so let's first look at
that and we'll explain what's happening
there so now look at that we've really
restrained crazy volume over here and
it's just nice and small we can still
see the fluctuations and the spikes but
it's not taking up all of our space so
what is happening here
we're doing is we're setting the limits
of that this y axis and basically what
we're saying is we want the y axes
because like normally without setting
this matplotlib comes in and it sets the
limits right so with our stock price for
example because we don't have a price
going down to zero the the limit starts
at 480 and it goes to 580 and it doesn't
keep going but what we could say is we
could say hmm we want this pricing chart
to show between 300 and 800 okay and
that would create a lot of white space
and it would also take away from the it
would make it would make this graph look
less volatile as well so what we do with
volume is we're saying we want the
volume what we're willing to show a
volume
that's great that it goes to volume max
but actually what we want it to do is
wants it go to three times the volume
max so what if we did like I don't know
10 times the volume max this would make
volume much smaller okay so as you can
see volume as much squished down because
it's prepared to show up to ten times
what the maximum volume was so that
would be like right here two three four
five six seven eight nine 10 right so
that's what's happening there I 3 is a
pretty good one but you know somewhere
around three is is good enough just
enough to squish it down a little bit to
keep it from you know violating the rest
of our chart and our prices and stuff
and obviously there's going to be points
where they connect like low points where
volume spiked
yeah they overlap but that is what the
alphas is there for after all okay so
this chart is almost done the only thing
we're lacking on this chart is a good
legend so in the next tutorial we're
gonna start talking about legend izing
this that's a word trust me legend izing
this graph and we're gonna add basically
you know the price and volume maybe here
high minus low here and then the moving
average is here like right now this just
says moving averages but we have
literally whole freaking blue like okay
what kind of moving averages people want
to know like whatever the moving average
is being used that sort of thing
so we'll add that here and we've covered
how to do legends before but we did not
cover customizing legends at all
so that next tutorial that's mainly
what's going to be about is adding that
legend and making sure that legend is
not conflicting with you know other
numbers and stuff on here so with the
chart like this it's kind of it's kind
of hard so a lot of times what you could
do is you could make the legend outside
of the chart or something like that but
we outside of this chart we've got
another chart above this chart we've got
a chart below this chart we've got it
you guessed it chart so how to handle
for stuff like that and so on is what
we're going to be talking about in the
next tutorial and that'll really wrap up
the kind of graphing customization and
handling and share acts and all this
kind of crazy stuff that we can do with
matplotlib that is fairly common to be
required
so if you have questions or comments up
to this point please do feel free to
leave them below otherwise as always
thanks for watching thanks for all the
support and subscriptions and until next
time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>