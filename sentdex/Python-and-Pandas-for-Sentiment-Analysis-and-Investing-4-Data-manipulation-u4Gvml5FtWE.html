<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python and Pandas for Sentiment Analysis and Investing 4 - Data manipulation | Coder Coacher - Coaching Coders</title><meta content="Python and Pandas for Sentiment Analysis and Investing 4 - Data manipulation - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python and Pandas for Sentiment Analysis and Investing 4 - Data manipulation</b></h2><h5 class="post__date">2014-05-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/u4Gvml5FtWE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to
another Python panda's finance and
sentiment analysis tutorial video in the
last video we're just modifying or data
set since it was something we were gonna
always do this day to say it so we went
ahead and did that now what we want to
do is actually work with this data set
and start accessing specific data that
we might want to use so for now I'm
gonna go into delete modify data set we
don't want that really anymore and now
what I'm gonna do I suggest you kind of
save it just in case you want to cut out
things later on but I'm gonna delete it
from this code now we're gonna go ahead
and do is I'm gonna say define single
underscore stock and the parameter here
will be stock underscore name so what we
want single stocks to do is you know lot
up specific stocks price and sentiment
so go ahead and do it'll say D F for
data frame equals P D dari to underscore
CSV and the CSV that we're gonna read is
my X Drive sentiment and stocks stocks
sent Dax dates
full dot CSV that's a mouthful and then
we're gonna say come on enter just
because I'm running out of space index
call equals time and then finally parse
parse dates will equal true since we
have dates now let's go ahead and we
could print the header but we kind of
know we've got here so it's really no
reason for editor next thing I want to
go ahead and have us do is let's go
ahead and say the data frame equals D F
and this is how we're going to get
around just the specific stock okay so
in this file we have you know 600
different stocks so what do we want to
do well we just want to plot that stock
name whatever stock we've chosen so how
this is how we're going to do that so
we're gonna say DF now equals DF do you
have to have type so it equals DF where
do you have to at I
equals stop underscore name dot lower
okay so lower is just because if you
looked at the data set all of our stock
names are lowercase right not uppercase
and it would be kind of easy for someone
accidentally put an uppercase in here so
if they do that's covered so now that's
it
now underscore let's say 500 ma equals
PD doc rolling underscore mean and this
is how we can add our own moving
averages entirely so rolling mean DF
value right the value of that and then
500 okay
so this gives us a 500 moving average of
value now we actually already have 500
moving average all right we've got 100
250 500 5000 already in this data set so
we don't necessarily need to do this we
could just access it but this is how we
would you know make our own living an
average of it if we want it to next up
we're gonna say ax 1 equals P LT dots up
a lot this is gonna be a 2 by 1 Bible
and then number 1 and we're gonna say DF
close dot blots and the label will be
price and then we got to plot legend so
it shows up and then now we're gonna do
a x2 equals P I'll take that sub plot
this will be of course a 2 by 1 only 2
and again we're gonna share x equals ax
1 so when we fiddle with this and maybe
zoom in or zoom out or whatever
everything is you know with each other
now we're to underscore 500m a dot a lot
label is gonna equal 500 ma oops now
we're ready to plot legend and now we
can do PLT touch show okay so now this
will show a father moving average of the
sentiment that were actually generating
dynamically right now we're not using
the 500 moving
call them and it will that will be in
the secondary plot and the top plot will
show stock price at the time using the
clothes okay
so let's go ahead and call single
underscore stock and in fact let's go
ahead and use Bank of America so BAC
okay and okay we should be all set so
let's go ahead and save and run that
there isn't yeah I think we did that in
the first video to or I've got that
comma for sure X anyway it looks like
we're all set
we're running probably not to take a
couple minutes to load this up and I'm
thinking maybe we'll bring back that
modify data and get rid of those columns
that we don't mean I think we will just
dynamically generate these moving
averages so actually this didn't take
that long I guess modifying the data and
writing it over again is what took so
long
okay so here is our Bank of America here
at the top and both on the bottom we
have the 500 moving average of seven and
this is why we want to do share X so we
can tug it around and play with it and
it won't go crazy so for example when
you look here okay we're kind of happy
with his data you know it went up here
it looks like it beat you know price
there here it looks like it was about on
time with price there get it here as
well so you know we can look at this
visually and we can say hey that looks
like sentiment you know my precede price
but we're not yet confident in that yeah
you know it looks like it proceeded
there to in here and so we're happy
about that but we're not really sure you
know can we actually make a strategy on
this and trade on that strategy and be
successful okay
so that's what we're here to find out is
whether or not we can you know create a
strategy that will trade on this kind of
information and actually profit or not
so that is this was just Bank of America
but we have obviously a 600 other
companies and so it would be really a
long time just looking through your
visually at every single company they
decide that
also we have to generate a strategy and
test the strategy so that's what we're
gonna be doing in the next video is
start building up a strategy to test
test on here so anyways hopefully this
is what you're seeing again if you're
not using Styles it'll look a little
different but it'll be the same thing if
you guys have any questions or comments
feel free to leave those in the section
below as always thanks for watching
thanks for all the support and
subscriptions and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>