<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Loading Video Source - OpenCV with Python for Image and Video Analysis 2 | Coder Coacher - Coaching Coders</title><meta content="Loading Video Source - OpenCV with Python for Image and Video Analysis 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Loading Video Source - OpenCV with Python for Image and Video Analysis 2</b></h2><h5 class="post__date">2015-12-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Jvf5y21ZqtQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to
part 2 of our open CV with Python
tutorial series in this video we're
going to be talking about is interacting
with a webcam or a video file with an
open CV as I mentioned before doing
analysis on images versus analysis on
video is very very similar because video
breaks down to frames frames are just
like images so a lot of what we're going
to do in this series is actually going
to be working with a webcam feed but
again if you just if you don't have a
webcam or you don't have a video you
want to use you can just simply use an
image or something like that so let's go
ahead and get started
we're in order to work with video feed
we're going to go ahead and obviously
need CV 2 and then we're also going to
import numpy as NP and now we're going
to say it's cap equals C v2 dot video
capture 0 if you capture 0 this will be
the first webcam in your system you can
also capture by an you know one this
will be the second webcam I am going to
use the number one because the first
webcam you are watching right now there
is a second webcam ready to go so I'm
going to use one you should use 0 unless
you have to of course or 3 or whatever
so now what we're going to do is we're
just gonna have a while loop here while
true so should be an infinite loop going
on and on and on we're going to say the
returned in the frame is equal to cap
dot read what happens here is you're
going to get a true or false here and
then you'll get the frame so if there is
a feed to be had you'll get that
otherwise you'll read so later on like
if you wanted a video feed to eventually
die like if it was a video you can
actually define that this maybe up here
and then or you know while true this and
then check if returns false or something
like that anyway moving along not
important right now
what we can do is we can actually say CV
to em show em shoot em show and we can
show the frame and we'll give it a name
frame okay easy enough so this would be
the color frame and then we can just
since this is an infinite loop we need
some way to get out of the infinite loop
so then what we ask is if CB 2 dot wait
key 1 and and foremost this we're really
not gonna doesn't really matter you can
even say wait key 0 but here you can use
this so if the key is equal to Q whoops
Q we want to break the loop and then
what's going to happen is you want to
cap dot release this releases the
capture so the camera will be released
because if you try to use a camera
that's in use you're going to get an
error so think of it like saving a file
if you try to modify a file that's
already open somewhere else
you can run into problems so then see me
to destroy all windows good so we should
be set so let's go ahead and run that
really quick sure enough you get my
pretty face or your pretty face
hopefully you actually don't get my face
right here camera ah okay
if you press Q and I'm watching so so
that's how you can do just a simple
frame you can actually pull up multiple
at a time so pretty quickly what you're
going to do is you're going to start
modifying that frame so for example we
can say gray and gray is going to be
we're going to hat we're going to apply
a gray function to the frame so we're
going to say gray LCD to see vt4 convert
color what are we going to convert the
color of the frame what are we going to
convert it to cv to dot all caps here
color underscore BG are blue green red
to grey okay
so now we've got gray so then we'll do
another CV to M show
and gray now throughout this entire
tutorial I'm gonna there's going to be
times where I'll have like six of these
things going at the same time depending
what kind of compute like if you're on
like a netbook or something or maybe an
older computer that's gonna it's going
to be super laggy for you so just kind
of keep that in mind man you got
Harrison's all over the place here
anyway just keep that in mind that you
might only want to open up like one at a
time if you're lagging pretty hard but
anyway so there you have you got two
frames here so then what can happen is
like the frame on the the left is the
natural one and then on the right is the
one that you're applying all your you
know analysis to or whatever and you
know recognizing objects and all that so
you can kind of see both the original
and the modified version so anyway so
those are your uh that's how you can you
know kind of display and do analysis on
a video so basically all your analysis
will happen within this while true loop
now you may actually want to output the
file somewhere so the way that you can
do something like that is the following
so we can say the codec that we want to
use is CB 2 dot video writer underscore
codec and we're going to say we want it
to be
xvid and that should work for all
operating systems so correct me if i'm
wrong well this should that should do it
and then we're going to say the out file
is going to be equal to cv to video
writer my marriage might work on Mac I
don't know
anyway this your writer and then we'll
just call this output avi the codec that
we want to use and we can put in we'll
just put twenty point oh and then the
size of this will be 640 by 480 okay
then what we want to do is every time we
want we can write to that output so we
could say like out dot right will write
the frame and then once we finally
release this we need to out dot release
and that should save our actual file for
us so let's go ahead and
run that real quick what was writing the
frame so this should be a color video
that oops we misspelled for summer try
again
okay good alright let's exit out of this
maybe oh we've got an error when I tried
to exit video writer does not have a
real we type it again oh my goodness we
might actually have a problem there we
never released it I think if you at
least on Windows even if you don't
release the file when you by the time
you close the program that acts as a
release but we'll see so output it let's
just play it in VLC you see what happen
okay
I mean that worked so we got away with
it somehow
anyway uh where am I that's not what I
want this is what I want okay so anyways
so that's how you can view images or
view video basically and then also save
the video as well so in the next
tutorial what we're gonna be talking
about is how we can actually draw things
with OpenCV so you're showing the
previous video that you can use
matplotlib and sure you could you can
draw in matplotlib you can write in
matplotlib you can do all that map plot
lib but actually it turns out that
OpenCV has its own methods for drawing
things like rectangles and circles and
you can even draw various polygons stuff
like that so we're going to be talking
about that in next tutorial as well as
writing stuff like that if you have
questions or comments on this tutorial
having in a trouble or whatever feel
free to leave them below again just
don't forget that you're capturing
probably zero not one also if you want
to load in a video file you could load
in a video file like this okay and that
should be good enough so um a Maya
questions comments below otherwise stay
tuned the next video
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>