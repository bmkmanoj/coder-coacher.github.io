<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Charting Stocks/Forex for Technical Analysis Part 10 - Price and Volume Chart Matplotlib | Coder Coacher - Coaching Coders</title><meta content="Python Charting Stocks/Forex for Technical Analysis Part 10 - Price and Volume Chart Matplotlib - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Charting Stocks/Forex for Technical Analysis Part 10 - Price and Volume Chart Matplotlib</b></h2><h5 class="post__date">2013-08-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aCZO8hglETM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome back
to another financial graphing tutorial
and where we left off let me go ahead
and just bring it up we're plotting this
Tesla stock price as we can see you know
this data's kind of needs to be aligned
differently this is pretty ugly and I
think we mentioned last time we don't
need any of this data here for volume we
would want to move this up a little bit
but the main thing we want to do is kind
of make this chart look like the
conventional stock price and volume
chart where the volume chart is maybe
like a third of this size here and then
this you know takes up that extra space
now with how we have this set up that's
not really possible because when you do
these subplots it is it makes like these
dimensions right but you can't have a
plot take up more than the space that
you say it can I guess I'm trying I
think of how I would say that but like
what you could do theoretically right
like you could say this is a two by one
and this takes you know the first spot
and this could be like a four by one and
it's a four by one and this takes spot
one and you can get kind of close to
what you want it oops sorry the sixth
spot for too long right so you get this
but really I mean you've got all this
wasted space and you'd be like well wait
a minute we could play with the head
space right well that's not gonna help
very much because even at zero that's
where we stand so what do we you know
what can we do well have no fear
what we're gonna do is actually move off
of sub well at least this way of
defining subplots
and start defining some plots a
different way now the what we're gonna
do now is instead of just straight-up
subplot we're gonna use so plot two grid
and what this is gonna allow us to do is
specify a grid
and then specify the well basically
specify the dimensions of the grid
followed by the starting point of this
object followed by the size of the
object so if that sounds confusing don't
worry we're gonna go through it step by
step so here's our parameters now the
first parameter is the grid size it's
gonna be a four by four grid and what
we're gonna end up wanting to do is it
give me a 4 by 4 grid the stock price
will take up 4 by 3 of that and the or
rather a 3 by 4 I guess I don't know I'm
still bouncing that around in my head
okay anyway and you want it you know the
stock price is going to take up
basically 75% and then the the volume
will take up 25% so it's gonna be a four
by four grid the starting point of this
graph will be zero zero it's like right
in the top left corner the size of this
row span will be three and the column
span so it'll go like three rows down
and then the column span you know over
to the right basically will be four now
the next thing that we're gonna want to
do is kind of do the same thing down
here with a x2 let's see so again we'll
get rid of this here supply to grid and
again we're dealing with a four by four
grid we already know that this starting
point will be three so like down three
and over zero and then we want to still
have our share at share x axis with a x1
then we want a row span to be equal to
one and we want our column span to be B
now it goes over four basically so let's
save that and see what we're we're
working with at the moment
there we go so looking a little better
right like this is kind of small enough
still got this data issues to the volume
stuff but I mean as far as like you know
the fundamental part of this thing it's
looking pretty good and if we move
headspace we can see that sure enough we
can't actually connect this now and I
might even say instead of a four by four
we could do like a four by five maybe
and have the rowspan be four by four I
start this and four maybe let's try
something like that I'm sorry it's
actually a make it up five by four save
that run it and there we go
so even even smaller and that's probably
more more closely tied to what you're
used to seeing as far as dimensions are
concerned so then what we want to do is
that at the headspace now the other
thing that we notice is we got okay I
will have up set it already but we've
got the date the volume that we want to
move in the bottom so let's start
working on that stuff and get the rest
of this fixed up so let's see the first
thing that we should do is let's get rid
of the date stuff for a x1 the way that
we're going to do that there's a couple
of different ways that you can do things
to get rid of stuff without actually
getting rid of them you can do like
something like a x1 AXYZ dot y AK sees
that set underscore visible and then set
it to false and what that will do is
just make it disappear but since we're
sharing the axis that's not going to
work so when that doesn't work the other
thing that people will do sometimes is
instead of set visible you do set
underscore tick labels and then you just
specify an empty array but what that's
going to do is actually disappear the
well let's see I'll show it to you oh
whoops
let's see what did we do we did why do X
axes like that and the problem with this
is yes it did indeed disappear that data
but it also got rid for this data right
so that's not good enough either and so
a little known or a lesser known trick
to use whenever you're sharing the axis
is to get rid of this and instead we use
this set P or setup function or whatever
it is
plot set key and what we want to do is a
expense like a period get underscore X
tick labels and to quran's and then
visible a equals false it's kind of a
hacky way to go around it you can also
do it with a for loop but this is a
little cleaner single line function so
now when we scoot scoot this over we can
see that we've got our dates here volume
here and we've got like you know our
information down here in date format no
dates here awesome so now we've got this
le7 which is referring to this volume so
now the next thing we want to do is
let's get rid of that volume number
which is actually really easy to do so
ax 2 got axes and we kind of just
covered this Y axes dot set underscore
tick labels and what we're gonna do is
just best to find into your Ray so now
this chart comes up and now we are
starting to look like a pretty darn
clean sharp the only things that we have
left to do is get rid of the space here
we could maybe move this over a little
bit maybe move this over a little bit
maybe remove some of this space possibly
so didn't we already have one of these
type down thought we already have one
typed out I don't know what I do with it
I guess we cleared this or something I
can't remember now but I guess we'll
have to type it out again so let's go
right here so plot dot sub plots
underscore adjusts and let's say
equals point own i'm bottom equals point
18 right equals 29 4w space equals point
20 and h space equals 0 I think that's
all so I think we're all set now so
let's save that let's run it see what we
get it pretty tight fit we I guess we
kiddo see Oh top I guess we can move top
a little bit that we didn't specify top
here let's just mess with it right now
and see what we get
where's what we want to make the top
probably something like 94 95 or 94 I
will do 94 just to be safe the rest of
this looks pretty darn good so let's
just make top equals point save it we do
oh no comment save run that and okay so
now we have a pretty respectable looking
chart and one thing that you can do is
you can go to save a figure and you can
like to actually save this figure and so
now when we close out of this let's
bring up that figure here it is now you
can see that it actually saves you know
our figure and you can you know send it
to somebody or whatever you wanted to do
with it so it's pretty cool so like I
was saying there's you know pretty much
an endless amount of things that you can
do as far as like customization is
concerned you can change every font
every color we can make this a
candlestick chart I probably probably
the next video we will cover turning
this into a candlestick chart since
that's how everyone seems to like to
view their stock prices so I think we'll
do that the other things that we're
going to be doing in future videos is
moving averages for sure we'll probably
throw in some RS science and MACD into
this you know put those on this as well
and generate a figure with that stuff so
anyway it's gonna be pretty interesting
I think the only thing it might be a
little bit till I put those out
candlestick charts probably come pretty
quick but the other ones mind 9 the only
thing I would like to change immediately
I think I'll just add that to the end of
this video is like all this text is just
way too big in my opinion like when you
go to render the the image so there's a
quick way to make all this text nice and
small so let's go ahead and change the
font size of this and then we'll
conclude this video close out of here
and minimize this come back and go to
the very very top of your file right
underneath import and what we're gonna
want to do is we're gonna change the
parameters of matplotlib there's like a
whole parameters file you can go in
there by hand and edit it or you can do
like momentary edits which is probably
the better solution so the way that
we're gonna do this is matplotlib dot
our C capital P params dot update and
then parentheses and then a little curly
braces and inside the curly braces font
period sighs close the quotes : and you
can specify the font size I happen to
prefer more of a nine and one last thing
that you can do is if you come down here
you can do plot show and then instead of
like having to actually click on save
the figure or whatever you can just do
fig which corresponds to this figure we
set up like way up here long ago fig dot
save like it's a camel to use savefig
and then in here you can specify where
you want to save it so here I'll just
say example died PNG and I'm not sure
why that just got thrown I really know
if you ever see this error how a my
goodness I hate windows shake so much
anyway if you if you ever see this error
you'll hit okay and then it'll tell you
like Python crash - yeah usually like if
you're working with graphing stuff with
matplotlib and you like screw up and you
throw an error like while you're doing
some plotting you'll always get this
error again sometimes it takes a while
to come up but that's all it is it's
nothing to worry about if you see it if
you deal with matplotlib enough and you
have I don't know maybe it's just my
operating system or something but don't
worry about it you'll get used to seeing
the heck out of that thing
so let's do this one last time till we
may apply okay it's an import matplotlib
I guess right before even though we did
all that but anyway okay so up comes the
graphing and I realized that if when
you're looking at it maybe now they they
might look too small to you but when you
close out of this it'll automatically do
the saved figure so you didn't have to
do that and then when we come over here
and we open up example I don't know I
just I think that size and I don't even
think it's full yeah like that wasn't
even a full size I can't even fit the
full size it's a little bigger in like
it comes out a little bigger than that
like the sample that it gives you
through Python but anyway yeah I mean
this is a in my opinion 9 if you're
gonna save it to an image a font size of
9 is preferable anyway that's that the
only thing I might change about this
graph here is maybe adding more ticks to
it you know you but you can do all that
stuff that you want so anyway I think
that's going to conclude this video next
video like I said I will be doing
pricing candlestick in the next one then
later on the RSI MACD and all that so
hopefully you guys have been enjoying
this series hopefully I've taught y'all
some good skills that you can start
doing your own analysis instead of
relying on someone else's program as
always thank you for watching thank you
for your all your support your
subscriptions and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>