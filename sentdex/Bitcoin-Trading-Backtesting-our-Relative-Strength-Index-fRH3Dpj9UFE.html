<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Bitcoin Trading: Back-testing our Relative Strength Index | Coder Coacher - Coaching Coders</title><meta content="Bitcoin Trading: Back-testing our Relative Strength Index - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Bitcoin Trading: Back-testing our Relative Strength Index</b></h2><h5 class="post__date">2013-12-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fRH3Dpj9UFE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on guys welcome to the
sixth I think Bitcoin trading video in
this video we're actually gonna back
test a very simple trading strategy I'm
not gonna give you guys you know an epic
trading strategy or anything by all
means but actually the RSI plays out
pretty well in theory so it's actually
pretty neat and not many people are
using training strategies around this
time so there's a lot of trading
formulas and technical analysis
indicators they're actually working very
well with Bitcoin right now just simply
because not many people are using them
and once a lot of people start using
them you'll find that the markets
volatility will decrease and the actual
results of using the indicators will
also decrease but for now there's
actually a lot of indicators that work
very well with this market so now that
we've you know seen the data we're not
actually you know gonna look at it any
more so I'm gonna make another function
and I'm gonna get rid of testing data
for now and just I'm just come down here
and add another function basically and
this one we're gonna call back testing
so now we're gonna make a function that
back tests and tells us the results of
our trading strategy against the actual
historical data so we can know how well
our trading strategy would have played
out in the past and we can kind of make
it you know educated ich guess how well
it'll play out in the future generally
you'll want to compare it to similar
market conditions so really you'd only
want to back test this against maybe the
last month or maybe two months but
anything but back further won't
necessarily be the most accurate it
could be depending on what kind of
strategy you're using if you're using
like machine learning or something like
that to figure out the best trading
strategy then you would want to back
test it across all data because you're
really back testing your machine
learning capability not a single formula
because machine learning is gonna make a
dynamic
so anyway let's go ahead and back test
so we're gonna say try and accept it's
just like the usual exception II prey
failed main back test try and then
stringy whatever that failure was now
we're gonna want to say and actually
shoot we might as well just take all of
this because we really need all that
data populated anyways so under testing
data take everything in that first row
you know from the beginning of that
function all the way down to the
exception and literally paste and that
should be good we'll just get rid of
this try here cool and I guess we'll get
rid of this except anyway so now we're
all set there and that's gonna populate
our data and now we want to do is come
down here and it kind of makes sense to
smooth out the data so there's a couple
of ways that you can actually smooth out
the data and you can do this in real
time but the data is no doubt very
volatile data so so now that might make
sense to smooth it out so I'm gonna also
show you guys how we can go about
smoothing out that data so let me drag
over a cent Dex tab again since that's
what we're gonna get the stuff just as a
side note we do have the sentiment for
Bitcoin right now it's pretty weak but
it is going up let's I'm just wanna
refresh see what we're looking at now so
it is going up a little bit so hopefully
we'll maybe see some more increase and a
little bit right now it's kind of
lagging down anyway so then go to cent
XCOM under the about tab you're gonna
want to click on the tutorials scroll
down to the programming stock click on
that go back to that sample code that we
were looking at before and this time
we're going to steal the
exponential moving average function so
copy that come over to our script and
just paste that function in we're gonna
use that in a second so now we'll come
down here to the testing data make sure
you're not programming and not testing
data I'm sorry make sure you're not
programming and testing data make sure
your programming and back testing it's
gonna be really easy to accidentally
code in the wrong function because it
looks very similar so come down here
under the accept and what you're gonna
want to do is say e ma crisis equals e
XP moving average and we want to apply
this to BTC price array and let's give
it a 50 moving average because we have a
lot of data so we might as well give it
a law of or a large exponential moving
average now we're going to define the
RSI so we're gonna say RSI line equals
the RSI function and we're gonna say EMA
prices and then N equals some large
number let's use 1500 now we're gonna
run through our data and how far back is
still in effect so that's good so now we
actually want to do is we want to run
through everything so we're gonna make a
counter so we're gonna do start x equals
0
and then we're gonna say stance equals
none because we're basically gonna back
test this and act like as if we had
traded so we're gonna say stance is none
because we don't have one going in then
we're gonna say last bought for just
currently we haven't bought anything so
we'll just leave that at 0 and then
total profit starts at 0 because well
we've made no profit now the next thing
that we want to do is we're gonna say we
want to know kind of like how much time
we've actually traded right so it just
kind of makes it easy to know like how
much profit did we make a next time so
we're gonna say print starting time and
this is gonna be kind of a long
operation but it's going
string version of date time dot date
time dot from time stamp then we float B
TC date R and date array you want the
zero with date array since we use that
how far back kind of thing going on
there right so date array and then
outside of you know two parentheses
we've got some more typing to do so dot
s TR f t IM e and then we didn't know
what kind of timestamp we want it to
give us so we're just gonna say percent
y dash percent lower case M dash percent
lower case D space percent capital H
colon capital M cult loops Capital
percent in : and then percent capital s
and I said m % dude % M's make sure it
looks just like mine do as I do not as I
say next that should print out the
timestamp now what we're gonna do is Wow
X is less than the length of our si line
so however long our si line actually is
we're gonna say you know you can either
have two stances you can have you can
have either you know some Bitcoin you
can be holding something or not
so if stance is none so you let's say
you didn't have a stance and then what
would we be looking for but we're
looking for a certain buy point on the
RSI so I'm gonna say if RSI line X is
actually less than if it's less than 40
we're gonna say hey that's oversold
let's buy so we're gonna say stance
equals holding because we bought also we
want to know what we're buying for us so
print buying BTC ax and then we want to
know how much do we pay for this BTC so
we're gonna say BTC price array
so that's how much we bought it for now
we're gonna say last bought 4 equals BTC
price array X so that's gonna save to
this last bought 4 variable how much we
paid for it and that's it
next we're gonna want to come down here
and if stance isn't none will call the
Elif statement Elif stance equals
holding what do we want to do you could
probably just say L if but whatever if
our si line X is greater than 60 we're
gonna say hey that's overbought we need
to sell stance B equals naught then we
actually need to go ahead and sell so
let's say print selling BTC at the ATC
hmm BTC price beret X whatever that is
then we're gonna go ahead and calculate
fees so since we're using BTC exchange
the fees are point 2 percent each way so
0.4 percent total if you were on Mount
God's the percent or the fee is 0.6
percent so 1.2 percent for a whole
transaction now keep in mind however
mount GOx
is highly volatile the volatility amount
gas is just massive
in theory mount GOx should have three
times the volatility of btc-e because
they have three times the feet that's
not the case mount cox is more like 30
times the volatility so it could make
more sense to trade on mount GOx just
gonna throw that out there so keep that
in mind
but anyway here the fees are point to
both ways but we're gonna say fees
equals you're gonna pay point
0:02 times that's you know 0.2%
times what was the basically paying 2%
on the Buy and the sell so you just add
them
together to get the exact fee that you
would have paid so BTC price array X
wherever we are plus last bot oops this
is camp case last bought four so we add
those together and that will give us
whatever the fee was and then we're
gonna go ahead and say print fee for
this was an fees and then we're gonna
say pre profit on this trade : and that
profit is gonna be BTC price are a X
minus last baht for minus whatever the
fees were so what did we finally sell it
at - how much did we pay - the fee so
that will give us a negative if we lost
money it'll give us a positive if we
made money next we're gonna do total
profit plus equals and we really just
want two plus equals this so I'm just
gonna highlight it copy it and paste it
right in here so that will be you know
how much did we actually make or lose
once all of that is done outside of the
L if while in this while loop we're
gonna do X plus equals one and that's it
now we're gonna actually back test this
trading strategy so now I just need to
actually call the function back test and
actually do a back test so paste that in
save and we'll go ahead and run this
so hit run we have an invalid syntax
right here forgot the CONOPS
save and run okay so let's drag this
over so we went back oh you know what we
ought to do is we have profit let's see
total profit on this trade so then we
actually want to go ahead and outside of
the entire thing so outside of the while
loop
we want a print a total profit of and
then we want to have a total profit okay
and again this time let's see I think we
only went back like 30k or something I
don't know moving back 50k anyway let me
close this and let's rerun it drag this
over it's printing as I did it okay so
the starting time was last night
basically this looks like it was let me
think about a eight hours ago or so for
me so from all the trades we bought at
8:06 we sold at 8:25 then we fee was
three we made fifteen then we bought at
851 we sold 864 paid our fee made some
profit then we bought at 866 sold at 874
paid our fee profit we bought at 864 we
never finished the trade and so here we
are so we made $30 on our 800 ish dollar
investment so really that comes to
basically 3.7 percent overnight it's
actually not not that bad and you did
better than the market uh-huh
well I suppose if you had bought and
held at 800 you would be more so at
atleast right now you'd be at 850 or so
so you might have actually made more
money if you had bought in held but I
don't think it's too fair to compare to
the buy and hold strategy simply because
buy and hold is a lot riskier than
buying and holding in the stock market
so if you really wanted to compare and
like be like is this worth my time and
energy compare it to like the profit
from buying and holding in the stock
market and that's a more fair comparison
and 3.75 percent overnight it's pretty
good for a fairly low risk trading
strategy I would say this is pretty low
risk you're not going to lose like a
thousand dollars instantly by mistake as
soon as it becomes oversold you're good
to go
oh not too much to worry about there so
anyway now let's let's go ahead and link
lengthen this out and like let's say we
trade not 50,000 let's do 500,000 so
let's save that run that I'm gonna drag
it over quick enough get some trade
action going on there we go so did we
make money we made 81 dollars with this
trading strategy so you know 10% profit
probably from starting point about
actually we actually started training on
the fifth so four days ago for me and
what's neat about this trading strategy
and why you would much rather do this
than buy and hold a Bitcoin is as you
can see if in this trading strategy if
you were comparing this to the buy and
hold strategy
it started at 973 Bitcoin did and it
ends one hundred over a hundred dollars
cheaper at 864 yet including fees and
everything you made eighty one dollars
so you profited even though the price of
Bitcoin went down so you made money
while Bitcoin was dropping and so I
would say that's a pretty nice strategy
so anyways that's the basics of back
testing a simple trust structure the a
simple trading strategy with Bitcoin now
there's obviously a lot of things you
can do you can adjust a lot of variables
here and you obviously you could go back
even further we've got like this was
five hundred thousand we can go back
five million lines and see how much
money we made but anyway I'll let you
guys kind of play with it you can decide
what you really want to do so anyways I
hope you guys enjoyed hopefully you
learn something new hopefully you're
enjoying your time with playing with
Bitcoin if I helped you add enough I do
have a donation link with Bitcoin in the
description so check that out if you
liked what I was doing here for you
otherwise as always thanks for watching
thanks for all the support in the
subscriptions until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>