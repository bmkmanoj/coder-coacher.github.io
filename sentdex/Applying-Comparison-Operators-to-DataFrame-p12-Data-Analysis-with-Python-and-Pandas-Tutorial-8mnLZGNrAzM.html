<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Applying Comparison Operators to DataFrame - p.12 Data Analysis with Python and Pandas Tutorial | Coder Coacher - Coaching Coders</title><meta content="Applying Comparison Operators to DataFrame - p.12 Data Analysis with Python and Pandas Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Applying Comparison Operators to DataFrame - p.12 Data Analysis with Python and Pandas Tutorial</b></h2><h5 class="post__date">2015-10-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8mnLZGNrAzM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome to
part 12 of our data analysis with Python
and pandas tutorial series in this part
what we're going to be covering is using
comparative operators on our comparison
operators on a data frame to either
redefine it or generate a new data frame
so what I mean by that is using the
comparison operators like greater than
last angrier than or equal to and all
that kind off and so the idea here is
that you know maybe you want to find all
the data in a data frame where one of
the columns has data that's greater than
I don't know 50 okay so this is that's
what we're going to be covering here is
how you can do that now the same time as
we're doing that we're also going to
talk about how you can use a method like
this to handle erroneous data so before
we just start getting rid of all data
that you know goes to this sort of
methodology that we're about to use
let's talk about just real briefly about
what you know what when do we have the
right to get rid of data so all the
times scientists get themselves in
trouble because they have a hypothesis
and all the data fits the hypothesis
except for maybe one data point and then
so it's kind of you know tempting to
just used to erase that data point well
that's not what we're talking about here
we're talking about getting rid of data
that is clearly an outlying erroneous
data point so here we're going to use an
example of where we are 100% certain
that it's an erroneous data point now
this is just an example
another realistic scenario where I've
had to do this is with stock prices
where maybe the price was momentarily
reported as being zero dollars or
something like that that's erroneous
data you need to be able to handle that
that data obviously that never actually
occurred in this case we're going to use
a scenario where you've got a bridge and
you know with with as bridge ages the
integrity of the structure week ends and
then as it's under load it you know
moves a little bit more let's say down
when you've got let's say you've got 15
semi trucks going over the bridge that
kind of weighs down the bridge a little
bit so it's going to move so we're going
to use
I just just kind of an example let me
pull up this lovely picture I drew in
the way that we were going to do this is
assuming that we're doing you know using
like a distance sensors you've got this
distance sensor under this lovely bridge
here and what a distance sensor does
well there's many types but let's say
we're using an ultrasonic distance
sensor it shoots sound waves up bounces
off the bridge comes back and comes back
into the receiver so it shoots out this
trigger into the receiver and what it
does is it measures the amount of time
that has passed okay the speed of sound
is a constant okay that never changes so
at least here in this example so that's
never going to change so then given the
amount of time that's passed by we can
say that dis that that time with the
speed of sound now we know exactly how
much distance was traveled in entirely
we divide that by two and bam we've got
the distance between the distance sensor
in the bridge okay so that's what we're
gonna say that's our example so then in
our data let's say I'm trying to think
what I want to do you want to keep this
this script you know keep it around
don't just get rid of it but for this
tutorial we're not actually going to use
it we're going to start writing our own
information so you can do what you want
but I'm going to get rid of this code
you can go ahead and just leave the
imports up there though so we'll be
using that plot live and stuff we don't
really need pickle anymore though
actually I'm just gonna leave in it
anyway coming on head to the link in
description again or you could try to
copy and paste this really quick we're
just this is some sample data that we're
going to populate in here the idea here
is and for anyone who doesn't understand
the link for this tutorial the
text-based versions in the description
click on that and at the very very top
there's some text scroll down and you
should find the sample code here so we
got bridge height and this is just a
quick dictionary basically we're
measuring the bridge height so we're
just collecting measurements 10.26 10 by
3 ones so on then all of a sudden we
have this random you know 6212 so and
then after the 6212 we're back to 10 and
so on so in this case
with this bridge we could you know did
the bridge maybe get abducted by aliens
or something momentarily maybe who knows
but we could go back and look physically
at the bridge and see opal the bridge is
still there this must therefore be bad
data
okay the maybe what happened is like
with an ultrasonic sensor maybe a leaf
was falling down and the sound wave hit
that leaf and advances all around until
finally Benton saw the bridge back to
the receiver in the distance troubled
for that sound wave really was that that
much times too so anyway this would be
erroneous data and given that we know
the bridge hasn't collapsed hasn't
disappeared and we've continued getting
regular data we can very logically say
this is just erroneous data right this
wasn't a data point that occurred and
doesn't you know just simply doesn't
conform to our hypothesis it's literally
bad data okay so how might we discover
this bad data because I mean we can
visually look at this with our eyes
they're like 10 10 10 6,000 you know
that's all outrageous right and we we
make that claim and it's outrageous
first of all because it's much larger
than all the other numbers but also the
distance from this number to this number
and just kind of we do a quick little
average in our own heads and we just we
automatically detect that as an outlier
so what we can do is first of all we can
say DF DF equals PD data brain and
burning convert Bridge height to that
data frame for us and then we can just
do a simple VF dot quiet and then a DFS
show whoops
PLT tup show that's going to give us an
heir yeah yeah yeah I know
PLT duck show okay
so right and obviously we can't saw that
one coming that it would be outrageous
so what caused this out so now the next
question is how might we automatically
detect this well the first thing that we
can do is use standard deviation okay
because that's how we're kind of
detecting it on our own is we're finding
this to be way out of line both in just
the typical scale right but also in
standard deviation none of these other
numbers are deviating as much as this
one
not even close so what we can do is we
can say DF will create a new column for
STD that is we're going to say equal to
P dot rolling underscore STD and we're
going to do the STD of DF meters and you
can't really do a 1 so we'll do a 2 and
then what we can do is print yeah we
don't really need to plot it at this
point that's okay so anyway this is our
standard deviation so clearly we're
picking it up we're picking up double
standard deviation here but that's okay
so obviously we've got you know not a
number because it's not a valid standard
deviation or that you can't do it one
for that first value then we got very
small very small very small gigantic and
then back to the regular is another
gigantic and this small small on one so
what we can do is we can come down here
and what we can say is first of all what
we you know we can see that visually the
standard deviation is too big but then
how do we decide beforehand because
basically what we're going to do is is
we're gonna say okay if you know we're
going to redefine this data frame using
comparison operator saying hey if the
standard deviation is greater than you
know X get rid of whatever points have
that standard deviation well first we
have to figure out X so how will we
actually derive X so what we'll do is
you would you would take basically the
average standard deviation for the
entire data frame okay so you could do
something like this you could say DF
under sport STD equals D F dot describe
we'll just do that first let's print D F
underscore s TV and this will give us a
bunch of stats not just the STD but
you'll see why I did that in a moment so
you have this value STD and the average
for the entire set is twenty sixty seven
so that is less than you know three
times the standard D Oh actually took
two times the standard deviation further
for those points right forty three
eighty five so we can close this out and
what we want to do next is so DF STD is
not just DF described it's DF described
and then not only that but let me run
that one more time actually this over
the average we're looking for you could
use the average STD since we do have an
STD column but we're actually looking
for the meters specifically so we would
say that describe meters column row STD
okay so we close everything and we would
say write meters and then STD okay so
that gives us that value now and there
it is twenty sixty seven so then what we
can do now that we have that DF STD is
we can redefine the data frame we can
say DF equals DF where okay this is kind
of gets a little clunky but this is how
it works
yep where the DF s we'll see did we kept
a camera I can't remember yeah it is
capitalized STD is less than the DF STD
now you might want to say you know you
might want to allow for something higher
than generally the average STD but if
you do have an outlier obviously we have
our outliers so it displaced the average
STD significantly but our most
circumstances you probably have
something like that or maybe like that
something along those lines maybe or you
might even use the 75% standard
deviation that you could get with the
standard deviation column that we got
but this is just a really quick example
of how you might go about doing this
and so now you can do that and then we
can print the DF so we can see the new
data frame and we're still plotting the
center deviation so we can get rid of
that in a moment here but you can
already tell there's no giant jump there
so then so DF dot plot we can DF meters
dot plot and there you have it obviously
there's still kind of jump here but if
we look at the values not really these
are like very small numbers so anyway
that's an example of how you know you
might get rid of erroneous data but also
more importantly is this line here where
we use a you know a comparison operator
to redefine the data frame of course you
don't have to redefine it you could have
said DF 2 and then DF 2 meters quad or
something like that but this you can
basically select only columns that meet
certain criteria and get that returned
back to you so it's kind of nifty way of
using comparison operators and applying
logic to the data frame and you know
what you want returned back to you
anyway that's it for applying comparison
operators and finding erroneous data if
you guys have any questions comments
concerns whatever as always for even
below otherwise as always thanks for
watching things for all the support of
subscriptions until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>