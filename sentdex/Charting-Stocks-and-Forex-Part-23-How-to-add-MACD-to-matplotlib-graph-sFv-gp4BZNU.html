<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Charting Stocks and Forex Part 23 - How to add MACD to matplotlib graph | Coder Coacher - Coaching Coders</title><meta content="Charting Stocks and Forex Part 23 - How to add MACD to matplotlib graph - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Charting Stocks and Forex Part 23 - How to add MACD to matplotlib graph</b></h2><h5 class="post__date">2013-09-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sFv-gp4BZNU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the 23rd financial
charting tutorial with Python and
matplotlib
where we left off we were creating this
chart we made the function for an
exponential moving average and we also
made the function for MACD using that
exponential moving average function we
made some space we got rid of the dates
here we fixed the dates down here we'll
fix this in a little bit and we'll fix
these colors and a little bit as well
but we're gonna do now is approach the
moment of truth and see if our
exponential moving average and Magdi
function actually work so let's close
out of this and close this and let's
begin so what we'll do is you x2 us
first of all make some space so we can
actually breathe here let's lower this a
little bit and let's begin here so just
so we can edit it later we'll go ahead
and do n for period slow equals the
point six then we use in fast equals 12
and the EMA period for that histogram is
going to be at nine then what we'll do
is ma slow ma fast and Mac D equals
compute MACD and then again we use the
close price to do that then finally we
do a ma 9 equals the exp moving
of what MACD and that period of nine
then next thing that we want to do I
think is plot this stuff I'm just scared
to plot it but gotta approach it at some
point so x2 the plot and we want to plot
its date MACD and I guess we'll just do
that before we start adding any other
variables let's make sure it works and
then finally also we want to ax to the
flight date EMA 9 and the next thing we
want to do is the final part and that is
going to be an X 2 dot fill between and
date MACD oh shoot let's see this will
be at MACD - EMA 9 and we feel between
anything zero basically alpha will say
is 0.5 face color equals and really we
should we should define a fill color so
let's do that real quick fill color
equals let's take this right here same
color is volume and a little bit we'll
have a little fix our chart to look at
least a little better maybe you guys are
better with colors than mean but I can
think of a few ways that we can fix the
chart at least so anyway give it that
fill color so face color equals bill
color and then edge
they're also equal fill color then let's
let's go ahead and clip that upper and
so real quick I'm just going to do a
ctrl F for prune I think we do have one
now yes so we'll just take this copy it
come back down to X
here where are we here paste we want to
do it to the y-axes so that's good prune
and we actually want to prune the upper
I think that'll work out for us and I
think that's everything we want to do
for now we could title it I guess
yep we'll add the title so PLT dot y
label
color equals white and I think what I'll
do is move this I try to like group
everything together write it like the
plotting of the data you know goes up
here you define the variables right at
the top make data if you need to plot
the data and then adjust the data you
know colors and all that kind of stuff
so I try to group all that stuff
together so that's why I want to move
that okay let's plot it run it and here
is our one so a couple things obviously
right off the bat it looks really good
so our Mac need line work but you know
we're not too happy with the default
colors that it shows but we will deal
with that in a minute also we need to
add that minus SP to it but otherwise
just visually looking at it you should
be able to tell that okay that that did
indeed work so hopefully yours looks
something like mine if you're using eBay
anyways but you should kind of know
right away right like the the histogram
should be the lowest the lowest one it
should probably react before everything
else then you've got like the short EMA
that should react and probably go higher
and lower than the next one which is you
know like the kind of long term one so
it should be a little more team so you
should be able to like just visually
look at your data and know whether or
not that was correct or not but it sure
enough does look correct you could also
probably find some sort of website that
will chart the same thing for you and
the values that we're using are pretty
typical so you should have no problem
making sure that the calculation is
correct but looks good to me so yeah
let's add the minus SP to this copy that
let me close this sure it doesn't keep
bothering us and come down and beginning
here date and MACD - SP - SP same thing
here - P - P and the fill between needs
all three to have it and it needs to be
on both of these variables don't don't
forget that okay so let's try this again
okay cool
bring it over and you should see that
okay sure yeah it is indeed all lined up
now so cool so I think what we'll do now
is in the next tutorial we'll kind of
fix this graph up you know we did I
thought we trimmed the upper do we not
trim the process that's where we have a
thing that's turning the upper I'll look
at that when that close this but anyway
in the next tutorial I think what we'll
do is we'll at least fix you know this
area here did not be a problem
we're going to change up the colors a
little bit we'll fix we'll do some stuff
to this RSI line I think we're going to
change the red and green here a little
big we'll just change up some of the
colors hopefully make this chart look a
little bit a little bit better than
constant right now it looks pretty good
but it looks kind of goofy like oh we're
just all over the place with colors so
so now I our chart is pretty much done I
believe the share axis does indeed work
let's test that real quick yeah so the
functionality chart is done so the only
thing that we have left to really do is
kind of like fix it visually a little
bit so if that sounds of interest to you
then continue on to the next video
otherwise thanks for watching thanks for
support in your subscriptions and until
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>