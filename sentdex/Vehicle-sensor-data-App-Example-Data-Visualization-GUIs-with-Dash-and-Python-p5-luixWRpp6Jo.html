<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Vehicle sensor data App Example - Data Visualization GUIs with Dash and Python p.5 | Coder Coacher - Coaching Coders</title><meta content="Vehicle sensor data App Example - Data Visualization GUIs with Dash and Python p.5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Vehicle sensor data App Example - Data Visualization GUIs with Dash and Python p.5</b></h2><h5 class="post__date">2018-02-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/luixWRpp6Jo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody and welcome to
part five of the data visualization apps
with python and - tutorial series in
this tutorial what I want to do is kind
of take the live graphs that we learned
about in the previous videos and some of
the other stuff and combine it all to
create the vehicle sensor data
application that I showed initially in
the series so the idea here is that we
want to have some sort of application
where we can pick things like from
either drop-down or maybe a radio dial
or something like that where we can say
hey I want to visualize you know these
things and then maybe add or remove
things as we want so maybe not all the
time do we care what the I don't know
the oil temperatures of the car are but
then maybe sometimes we do so we want to
be able to dynamically add or remove
charts we'd like those charts to be
sized appropriately given whatever the
dimensions of the screen are as well as
how many data points were trying or has
a how many I guess sensor data sets that
were attempting to graph at a time and
then obviously we also want this data to
be graphed live so you won't need any
you know actual obd sensor or anything
like that we're going to just use the
dummy dated like just like we created
before so everybody should be able to
follow along also we're not going to
type this out line by line that's kind
of silly everything that we're going to
cover we've are everything that we're
going to use here I've already covered
at least once in this series so I just
still want to waste everybody's time on
that there's really only going to be I
think one truly new thing new concept
and that's going to be bringing in
outside scripts but everything else is
something we've seen before so what I'm
going to do is just I'll put a link in
the description to the text-based
version of this tutorial if it's not
there or whatever you can always go to
Python programming net maybe there we go
and then just search for - and here's
everything at least for me up to part
five and this is national tour tutorial
series here but if we go ahead and click
on part five that's where we are there
is no video because I'm filming it right
now whoa crazy but anyways here is all
the
code that we're gonna just be running
through so you can copy and paste that
or whatever I just want to explain
what's going on so with that let's go
ahead and get started so the imports
that we're going to need are just I'm
pretty sure we've seen all of these
someone told me that this is Dec not
stay queue so thank you so we'll try to
call that Dec from now on then we've got
obviously the graph objects random all
that I'm pretty sure all this is what
we've seen historically except for maybe
the and actually we don't need the data
reader reading it data I should remove
that from the tutorial then what we're
gonna go ahead and do is we're gonna
define our app and then some starting
information clips so this should be
totally familiar to you and then this
data dict here what this is going to be
is basically this is just gonna contain
a string to you know list dictionary
keys and values so basically what we'll
do is when we have like we're I'm just
going to do a drop-down menu on the app
so the drop-down menu people will choose
something called this but then we
actually want it to map to the actual
list itself when we do the graphs so I'm
going to use a dict for that so in the
drop down we're just gonna iterate over
all the keys in this dictionary and then
to find the values to actually graph
them we just do a look up by that key
now what we need to do is go ahead and
add in some of the the actual data here
so I'm just gonna put it here I actually
think we might get away with defining
the dict first like that and then doing
this cuz these might come as a nun I'm
actually not sure but probably they
actually should be up here so we're
gonna say the max length is 50 for
everything that we're gonna graph just
for the purpose of the tutorial I think
I'm gonna change that to 20 just so we
can see it shifting over time but 50
probably makes more sense for this type
of an application but anyway enough on
that now we want to go ahead and do is
we need something that's going to modify
so something that's going to just kind
of act like the sensor so something
that's gonna just read values from a
sensor we're just gonna sim simulator
that so the code for that is just update
obd values so i'm just going to paste
that one in and basically it just takes
in the x oil temps intake temps coolant
RPM speed throttle position and that's
it and then basically all its gonna do
is just add to those lists so we're just
gonna continue and if it's the first
value just picks a random thing
otherwise we just do a random variance
like we've seen before you don't really
need to spend too much time looking up
how this function works because you know
you're gonna be great like probably very
few like there's really no reason to
have this function other than to create
dummy data so don't don't spend too much
time worrying about how that function
works do you're probably gonna be
reading a database or something like
that and hope maybe in the future we'll
do i really wasn't expecting that much
interest in as much interest as i've
been getting on - so they'll definitely
like this was pretty much the end of the
series that i had planned but since
there's so much interest in it i think
we'll pick up some other stuff so we
probably will actually interface with
the data a real database at some point
but anyways the show must go on let's
begin with our layout so there will be a
couple new things in the layout itself
but I'll talk about them so the layout
is messed up why are we I want to make
the text a little smaller now let's just
go with 12 so we can fit it on the
screen why would I just come thank you
so our layout as always starts off as a
div it can get kind of funky but you
know these are the contents of that main
div so just know that you know the class
name container and then the styles here
that's corresponding to the top-level
the main div so what we're saying here
is the main div needs to be a width of
98 percent we're going to give a 10
pixel margin on the left a 10 on the
right and then I'm just setting max
width to 55
and there's there's probably a more
elegant way to do this maybe you could
say max with the equals a hundred
percent I'm not really sure I think that
has to be a pixel value but I don't know
anyway there's probably a more elegant
way but without this for some reason
there's like a default max width in I
think - which is kind of silly I wish
they didn't do that but it does tend to
make things look prettier if you've got
margins on the side but I'm specifically
developing this for a very small screen
like it's a five inch screen and we want
all of the screen utilized so so that's
why I'm trying to override that on your
computer you probably it looks fine with
or without that to be honest but anyways
yeah so let's see if there's anything
else I'm trying to think so we are
adding in some basic styling here just
for the title of the the app itself
we're just gonna float that left then we
have the drop-down of choices note the
the ID name because this becomes this is
the input for our data the options again
it's just label and values so basically
it's just going to be s you know it's
just the key for the data that's in our
data dict that's it
so then we come down here and these are
just if you want you can have you know
default values so by default three
charts will come up when we run this app
but we could we can remove any of these
and then we can add more and then if you
wanted if you only want a coolant temp
as the only thing to pop up you could do
that as well and then multi equals true
just means there could be multiple
choices in this drop-down menu then we
have the graphs div this is going to
contain all of our graphs and then
you'll note class name that's the first
time you're probably seeing class name
unless I'm forgetting that we did it
before but I don't think we did that is
the replacement of class in any HTML
element we obviously can't do class
because that would conflict with pythons
class so that just gets replaced with
class name and we're calling that we're
giving that the class of row and the
reason I'm doing that is I'm actually
bringing in
he realized CSS which is just
materialized yet come on materialized
CSS calm I linked to in the tech space
tutorial as well but it's just a great
material design CSS framework that I'm
familiar with that's what I use for
Python programming dotnet and all that
and it has things that just - doesn't
have for you - is really just there to
give you the bare bones of what you
might need to build one of these apps
but chances are if you're really gonna
build something out you're going to be
using an actual CSS framework besides
whatever they make available to you but
anyways so we will be bringing that in
we have not yet brought that in that's
gonna be one thing that you've probably
not seen yet but it's coming don't worry
so that's graphs that's what we're gonna
update with all of the charts not just
one chart this will be all of the graphs
will be inside this div this basically
div with the class name of row but ID of
graphs then we've got the interval we've
got graph updates so not only do we want
to accept user input that is gonna pick
the charts that we want to show we also
want those charts to be updating live
with or without you
without user input so the user can't
update those charts manually they can
only pick which charts are showing and
all that okay so once we've got that
we're ready to actually create the the
wrapper and the function that will
update everything and we can actually do
all this even though we have like two
forms of input slash events we can
actually do all of this within one
function and this one unlike the other
ones this is going to be taking input
it'll be producing output and it also
will take in events so so we're gonna
have something for everything in this
decorator which is the following so the
output we output two graphs where we
outputting it in graphs to the children
then we've got the input which is
vehicle data name and we're looking for
the value what was the value of that
input and then finally with vents we are
looking for basically that interval and
that's just going to update
update the graphs so depending on
whether or not whether we've got an
event or an input basically our response
is always going to be the same we're
gonna graph whatever the user apparently
wants to graph and we're gonna update
that basically we're gonna do that every
second so now with the actual function
itself let me just copy that over paste
this is just the actual start this
doesn't have any of the data I just I
feel like this one makes a little more
sense than the entire code so I'm just
gonna post this one first so basically
what this function is going to do is
return a list of graphs so a list of
these plotly graphs the way that we're
going to do that is for data and data
names which is going to be passed to
update graph via our input it's going to
pass a list of those values so those are
the data names that are getting passed
here so we're going to iterate through
those so for data name in data names for
each of the values we're gonna say data
equals and then the X will always be
whatever wherever we are in the x and
then the data name is going to be
whatever that data dict with data name
is the key so the value is the actual
list itself which is getting updated
every time we run this update OBD values
that's going to get updated we're not
running that yet in this function just
for the sake of clarity we're gonna add
that in just a moment I just I feel like
I said I feel like this is a little
easier to follow maybe not we'll see
anyways name we're just calling it
scatter we did I think the graphs look
cool with like a fill underneath them so
this is one of the fill options and then
you can pick a color to fill so it's
just from the from the bottom up it just
gets filled you'll see what I mean in a
minute it won't just be like a single
line if you don't know what a fill is
then once we've created the data which
is pretty simple it's just your typical
scatter plot with a fill we're gonna
append two graphs which is this list of
just graph elements and then we're gonna
build that DCC graph element itself and
we're going to encompass that graph
element inside of a div now this did
is what's going to have class name
equals class choice which is what's
going to dictate how much space it takes
up so now what I want to do is give you
the full function which has code for
those two things so let me just copy and
paste that in you see there we go
so for updating the lists we are again
going to use Global's
I would strongly suggest you use I don't
know a flat file or you could use a
database depending on kind of what
you're trying to do and if you're trying
to log historically or not but anyways
this is the way that we're doing it so
every time this function gets hit either
it will be hit through an event or it
could be hit by adding or removing
things we're gonna update the values in
this list of things that we're tracking
so we are tracking time oil temps intake
coolant rpm speeds and throttle position
we're not necessarily going to always
graph those things but if we chose to
we'd like to be able to immediately then
if the length of data names is greater
than two which means we want to graph
three or more things on this graph this
is the class choice that we want and
this has to do with the grid system of
again materialized CSS so when you have
a div that is rows you can have you can
make use of their grid system and their
grid system gives you twelve total
columns that you can deal with and those
columns are dictated by the screen size
where you can manipulate those how much
something how much can we column
something takes up by the screen size so
if the screen is small and we have more
than three three graphs that we want to
graph let's say if the screen is small
we want them to take up each graph will
take up twelve columns so it will
actually fill the screen if the screen
is medium-sized like so this would be
like a cell phone size if the screen is
medium-sized like a tablet or something
like that we're going to give it six so
that means we could have two graphs per
row and then otherwise if the screen is
large we're going to give it four
Speight four grid positions or four
columns out of twelve so that would mean
three graphs could
if we only have two data names then
still on a smallest want to be 12 but on
a medium screen it'd be six on a large
screen six so you wouldn't want to just
always say large four because then you'd
have a bunch of extra space like if you
only want to graph two things let's use
as much space as we can again because
I'm gonna be using a very small screen
so I wanted to be able to utilize all
the space possible now if we if we only
have one type one thing that we're
trying to graph and we want it to go
ahead and take a ball to twelve columns
so we'll do that so done now what I
would like to do is basically everything
else stays the same actually so we're
not really changing changing anything
else the other thing I'm modifying in
the actual go layout itself in the graph
layout that graph objects
we're doing the x and y axes changing
those dynamically you've already seen
that before
the only thing that's really changed
here is that we're using the dicta to
get those values but it's the same
concept then we can modify the margins
here
I did that just to make things as tight
as possible again I'm trying to get as
much on screen as possible I don't want
a bunch of useless spacing on a big
screen spacing looks nice it's we like
that whitespace is really cool these
days
so anyways but this was meant for a
small screen so I wanted to set those
margins small so this is just how many
how much margin on the left right top
bottom and the reason why we have so
much margin on the left and on the top
is because the top we have titles so we
have some title text that's gonna
explain what this chart is as you'll see
where did I put title oh right under
here it so anyways we want to show that
title text so title text these margins
are just for the chart they don't
include the text that describes the axes
or the title which again kind of silly
but okay so and then left is for the
axes labels for like the y axes we want
to be able to read those so that's why
that's there I don't really care that
much about the timestamps because it
should be updating live so those are
actually getting chopped off
because of these margins anyway other
than that anime it's true I don't think
there's really anything else here that
you wouldn't be familiar with but if I'm
skipping over something please do feel
free to ask in the in the comments below
ok now what we need to do is we need to
bring in external CSS and JavaScript so
if you're familiar with coding in HTML
or well yeah if you're familiar with you
know building front-end stuff you
frequently you know include JavaScript
or CSS files that you know beyond what
you know the the CSS that you just enter
in you know strictly into the HTML so
the way that you can do that with dash
is actually pretty darn simple so let me
just paste that in so with extra you
just specify some lists if you if you
want there's a few ways you could do
this but I think this makes the most
sense
so for external stylesheets you'll just
throw them in this list here and then
you'll iterate through them and then you
just append them to your app and it'll
handle actually putting it in your app
for you and then the same thing is true
with any external javascript so with
materialized you know to move things
around as you dynamically resize or
whatever you also want to have their
JavaScript so you can bring that in as
well
finally to run the app it's just if name
equals main run the server the the last
thing I want to bring up we should I
should probably run this first before we
I bring it up so everyone probably just
wants to run it and if there's some
error people are not going to be happy
so let's just run this real quick one
two seven it's open it up it says
loading can we bring it over sure can
okay cool so as you can see it's chose 3
but if you were to like squish this up a
little bit you'll see that the the other
one kind of popped down here and if we
continue to squish it it'll just be one
right and then we can full-size that
again and then what if we actually get
rid of like intake temps you'll see ok
they they go and fill the screen again
if we get rid of oil temperature boom
coolant temp fills the screen again and
that's all thanks to materialized CSS
and then we can actually add stuff in
and again the same thing starts to
happen again
interestingly enough I did find a little
bit of a bug with this whole thing so
like the titles of these charts can get
kind of finicky so let's see if I can
get away with this showing you guys live
so if rather than having three things
let's say we only have one chart so
let's just just do coolant temp let me
save that let's see if this updates
sometimes it'll do this for me we'll see
no I didn't want to do it darn it
well I bet if i refresh though yeah okay
so now we're starting with just one
chart now watch the title so I'll add
speed so you'll see speed speeds title
is perfectly in the middle right but
coolant temp is messed up and then we
can continue adding stuff like intake
temperature and all that so that's one
bug I've found with this whole thing and
I don't know if that's because we've got
some CSS conflicts going on or what
someone can figure that out I'd love to
know the other interesting thing is if I
X out of coolant temp everyone
disappears and you can see - is like
really flipping out right here but I can
add something oh
usually I could been the pest I've been
able to do that but if I guess if I
clear it out maybe okay now I add
something and it's back sort of working
but yeah for some reason that just
really screws up - so that's still a
couple of bugs I'm trying to figure out
what what causes that but again the same
thing happens as you go through you
actually wait what I'm finding you have
to do is if you want to get rid of stuff
you have to like start at the end which
is kind of screwy I'm sure I'm just
doing something wrong in my code so yeah
if someone knows what's going on there
feel free to let me know the last thing
I want to leave you guys with before I
break here is the plotly documentation
so actually two things one is the -
documentation then one is plotly so one
thing you definitely want to look at is
the core components four - make sure you
you go through this so this is something
that you would use a lot from a CSS
framework but you'd always want to check
to see if it exists already in - like
the drop downs so drop downs are things
you'd commonly see in other frameworks
but - has them built in in
very special way so so you'd want to use
their dropdowns because they give you
much more functionality than if you were
to create your own so for example yes
the drop downs and then they've got some
examples they've also got sliders
they've got a range slider where you
could pick different things on both
sides obviously the input which we've
already seen before a text area which we
haven't checked out checkboxes which we
also haven't checked out or really used
radio options they've got buttons which
obviously could get more and more and
more interesting data picker so like
this is just a calendar for example data
picker with a range so certain end
calendar and then they've also got
markdown examples then they've got
things like interactive tables and then
an upload which is a pretty commonly
used thing especially in data analysis
so if you create an app or something
that reads CSV is you want to be able to
upload them into your app really quickly
and easily that's going to be super
useful tabs again this is something
super common in CSS frameworks it's here
for you same thing with the tables and
obviously crafts anyway so go through
that and just make sure you look at the
updates from time to time just to see if
they've added anything and then the
other thing finally I want to bring that
bring your attention to is just the
plotly documentation because everything
here is plotly so things like I'm trying
to go down here let's see connecting to
databases for example reading from CSV
files reading from MySQL reading from
bigquery Salesforce all this stuff it
they've got that for you already make
sure you're not just repeating something
they've already done also report
generations so creating PDF reports you
can also do HTML reports and all that
anyway that's all for now
I like I said I'm trying to think of
another may be a larger application to
build people I know we're looking for
something to know how well does plotter
does - scale
with more and more data and all that so
I'm planning to kind of look more deeply
into that also integrating it into an
existing website making multiple page
apps either with - or with flask with -
embedded and all that so I'm still going
to keep poking around and stuff like
that I'm not sure when that will come
out or anything like that like I said I
was kind of caught by surprise by how
popular this series was I just didn't
think people were gonna care as much as
I cared about - but it is pretty cool
anyways if you have questions comments
concerns whatever feel free to leave
them below otherwise I will see you in
another tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>