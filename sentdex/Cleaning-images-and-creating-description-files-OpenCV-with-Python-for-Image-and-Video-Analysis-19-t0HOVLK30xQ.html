<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cleaning images and creating description files - OpenCV with Python for Image and Video Analysis 19 | Coder Coacher - Coaching Coders</title><meta content="Cleaning images and creating description files - OpenCV with Python for Image and Video Analysis 19 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cleaning images and creating description files - OpenCV with Python for Image and Video Analysis 19</b></h2><h5 class="post__date">2016-01-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/t0HOVLK30xQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to yet
another open CV with Python tutorial
this tutorial can be building off the
last couple tutorials all working
together for us to create our very own
hora cascades for object detection of
literally any object so what we did in
last tutorial is we downloaded a bunch
of these negative images again you
should have downloaded from the first
link changed pic Nami to be whatever
that number after that first link was
change that the link in here pull the
new link run that again and you should
have a large ish file of negative images
mine has currently 1968 files and so you
should be somewhere around there and you
should probably note that you have
images that look like this so this is
from Flickr and what I was bringing up
before it's just this stupid little
image that they give you when the image
doesn't exist anymore I think it's just
so like if someone embeds an image on a
website it doesn't like show a broken
image link it'll just show this stupid
image and so we end up with that image
now these are negatives so I mean in
theory it doesn't matter right this is
an image not of our object so I mean
that's ok I suppose but we're going to
go ahead and talk about how to get rid
of these images because while these are
negatives what if what if you did go to
pull positive images and you got this
junk ok so getting rid of these actually
isn't too bad so just find one of them
copy it so ctrl C or right click copy or
whatever come to your main directory and
I'm going to make a new directory and
call it uglies go into it and paste that
image note the size make sure the
dimensions are identical so if you
pulled 50 by 50 positive images you'll
need a 50 by 50 version of this picture
too or something like that but just take
that in consideration so that really is
the only one there's another one that
you might see but that's the only one I
saw right now so anyways times might
change in that you know it might look
different or you might get other ones
so we'll go back to our script here
well comment out the running of this
function and we'll make a new function
and this one is going to be called find
ugly so define fine to underscore uglies
and what we're going to say is for file
tight in for now the list will just be
negative but if you had positives you
could put pause in there as well um then
we're going to say for image in OS got
list Durer file type so this is going to
start iterating through all the images
in that negative directory
whereas my mouse there it is so it's
going to start going through all of
those then we're gonna say for ugly in
OS dot list
Durer uglies now of course again like I
said you might have like a pause version
of uglies and neg version of uglies but
you know you're going to have maybe four
total ugly images so iterating through
them is not going to matter you're going
to go through this super fast so for
ugly in those uglies what do we want to
do we want to try and then accept
exceptions
II just in case we're going to try we're
going to say the current image path that
we're working with is equal to the
string of the file type so this will be
so the file type is the directory path
right so string file type plus slash
plus string image so this is like the
image name so that gets the current
image then we're going to load in that
ugly so ugly equals CV to M read and
we're reading in the path of uglies
slash plus the string of the ugly name
which we're getting from here so that's
our current image path and this is our
current ugly image but we don't have the
current image yet so now what we're
going to do is we're going to call this
questions our question image is CV to
Emory and then we're just going to read
in that current image path and then
we're going to ask are these two images
same image gosh if only we were doing
something that we knew how to do that
oh right OpenCV so if ugly dot shape is
the same as question shape so basically
are these images the exact same
dimensions cool and not and then we're
going to say n P dot bitwise underscore
X or I just found out I lied to you guys
and a few few videos ago and I'll
explain why X or ugly question and then
dot any so if this is the case these are
identical images I will explain that
line in just a moment print damn girl
you ugly look you gully you owe them now
we're going to oh s dot remove that
current image path and let's go ahead
and print the image path just just like
so if it starts deleting like all the
images we can we can hopefully stop that
from occurring okay so what's happening
here this you should understand it's
just part of the dementia are these the
same size image easy enough now
originally I told you guys about these
bitwise operations I said you know
there's bitwise not and or and XOR and I
told you or and and not are just like
pythons or and not now X or is a special
type where it is either one or the other
not both so in Python if we say if one
or two or if x equals 1 or x equals two
X could equal 1 and equal to it should
have used a different methods that's
false but let's say let's say X is you
know 15 and then we said if X is greater
than 10 or X is greater than 5 do
something that would be that what that
statement would bring true and we would
run but with X or that would not run
because X or is one or the other not
both so in this case we're asking that
it is not the case that these two images
like basically an XOR operation it's one
or the other that's just simply not
rooo everything is identical in these
images therefore this is going to run
and we're going to remove that image I
told you guys we probably would never
use XOR in this tutorial but here we are
so sorry guys anyway so we remove that
image we find the Uglies cool so let's
run this function real quick and
hopefully delete some uglies whoops
try to move it over there it is so it
deleted them awesome so now that we're
hopefully hydrated now that we're
hopefully we've got all of the images
that are decent images what we now need
to do is actually create the the
description files now if you're using
the create samples where you just need
like one positive image and then we're
going to use open CV to create all our
images if you're just doing that that
create samples function is actually
going to create your positive images
description file which is very kind of
them because that's the most annoying
one to create but it does not create
your negative images file I wish it did
but it does not so we need to create
something of a script that is going to
do that for us so let's go ahead and do
that we'll make some space we'll come up
here and now we're going to define
create pose and neg and then basically
we're gonna say for file underscore type
in and for now we're going to say we're
just going to use mega ghin but you can
append pause to that and have a field
day for that we're going to say for
image in OS list Durer file type if file
underscore type equals neglecting with
we're going to say the line equals a
file type plus slash plus image plus a
new line so in the negative file that's
all we have and then we just need to
write that so we're going to with open
with open BG text with the intention to
a pen as f we're going to f dot write
that line and that's that so with the
with a negative image you know file it's
just literally the paths of these
negative images so when we run it with
open CV open CV just knows where to find
the negative images but then just in
case I'm going to put the positive one
in here I'm just going to copy it from
the text-based version though we're not
going to write it out but you'll see the
difference here so we probably put Elif
here and Elif file type equals positive
the line in this case would be the file
types of positive slash the image path
and then space how many objects are in
that image and then the rectangle
location of the object in our case where
we would hope that all objects were
let's say 50 by 50 and so they took up
the entire image so this would say hi
it's the whole image and then we make a
new line and do the next one but again
we're not actually going to be using
this this one anyways because we're
going to use create samples and like I
said before you might even be better off
taking just multiple pictures of the
same object that you want to track and
then use create samples that way and so
you might have like five starting images
you end up with 10,000 testing images
but if you wanted to detect like all
watches like we're only going to be able
to detect my watch so if you want to
detect all watches you have to pull
bunch of watches from image at hand say
where they're located and all that mean
it would be a pain in the Dukas or you
could pull them prop them like I said
before OpenCV can find circles so you
find them and do crazy stuff like that
and find all watches I suppose anyway
moving along that's what you would do
but we're just doing the negatives
anyway so let's run this function copy
that paste create puzan egg make sure
the other one is running still cool so
we'll run that and we should wind up
with the file sure enough we do BG text
let's click on that and here we have
just it just runs through all the files
not necessarily in perfect order but
that really does not matter so we'll
close this
and close out of there now
what we need to do is we need to upload
our negative images in BG text this file
and this file needs to be uploaded to
our server so let me go into OpenCV
workspace and i already have two up
there we don't want those two we want
these two up there so just go ahead and
take these the ones that you just
created and upload them and just make
sure it's in your open CV workspace once
they're up there you'll be ready to
carry on in the next tutorial so in the
next tutorial we'll be talking about
creating the samples creating the
Cascade training the Cascade and then
actually using the Cascade and seeing if
it actually worked so anyway that's what
we'll be doing the next tutorial just
click and drag these up to your server
copy and paste those it'll probably take
I don't know ten minutes or something to
move them to your server and then you'll
be ready to carry on in the next
tutorial if you have questions comments
whatever leave them below otherwise as
always thanks for watching these for
others for subscriptions until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>