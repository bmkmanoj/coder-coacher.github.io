<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Scikit Learn Machine Learning Tutorial for investing with Python p. 17 | Coder Coacher - Coaching Coders</title><meta content="Scikit Learn Machine Learning Tutorial for investing with Python p. 17 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Scikit Learn Machine Learning Tutorial for investing with Python p. 17</b></h2><h5 class="post__date">2015-01-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oRwPwTbrNuk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to
these 17th machine learning with Python
and scikit-learn tutorial video and this
video we're just gonna be continuing
along here so in the last video I showed
you guys how to use quantal to get data
and in this video we're going to
actually compile a very large well not
very large but large-ish this set of our
stocks their prices and all that so we
can use that with our data and our
algorithm and get a little more useful
results from it so anyways we go ahead
and just comment this stuff well at
least these two lines out so alt 3 for
anyone who's conspiracy and then also
alt for will uncomment if you want so
now we're gonna do is we're going to I'm
gonna specify my path again just because
you and I might have different paths so
minor in my x-files slash backup slash
intra quarter like that so that's the
path to my inter quarter data data set
there
so anyways now define key stats and
we're say the DF equals PD dot data
frame because we right here what we're
doing basically is we're gonna pull out
just the stock information so really
this isn't even key stat so we should
probably call this like I don't know
stock prices it really does not matter
what you call this we're only gonna use
this once so anyway now we're gonna say
stats path so this is kind of similar to
what we had before about we're just
gonna do path plus
the stats and then we're gonna say the
stock list equals and that same kind of
thing before so the zeroth element of X
for X in OS walk stats path okay so
that's our stock list and then we're
gonna I guess we'll use ticker list we
might actually need the ticker list
I don't really sure we need ticker list
in this script so anyways now we'll do
for each dirt in stock list 1 : what do
we want to do well what we've earned I
want to do is we're gonna use this
ticker thing just because I want to have
it printing out as its as it's working
so ticker equals each derp dot split and
we're gonna split by those doubles
actually sorry it's a double backslash
so someone brought up as well I know
this is a bit late but someone brought
up that you know if you're doing this on
a Mac for example you might not have
those double slashes the reason why I
have those double slash is because
Windows likes to use back slashes in its
paths and a backslash is an escape
character so what we have to do is
escape the escape character to actually
be a slash so keep that in mind so
because if we do a back slash of quotes
you can see what's happened we're still
in quotation so keep that in mind back
slashes escape things so we do backslash
backslash anyways Easter does split and
then it's the first development there so
then we're going to go ahead and just
print out the ticker and now we're gonna
say the name and this will be like the
name that we use with quando so the name
is gonna be if you recall capital wiki
slash and then plus the ticker upper up
upper there we go so that will be the
actual name so for example is Apple will
be wiki slash capital a APL then we're
gonna say what our data is so data is
going to equal quand old die
and what do we want to get will we want
to get the name right because it we're
basically copying this line here so get
the name then we're going to add a trim
underscore and actually let's just let's
just copy all this I don't see any point
for me to rewrite all this some name
paste and then I'll just do this okay so
the start 2000 and 2014 good
so that gets our data then we're going
to say the data and then ticker dots
upper that equals so what we're
basically we're doing is we're creating
a new column to this data set so we're
seeing saying this data frame and then
we're creating a new column in that data
frame and we're labeling that column
ticker dot upper because if you remember
the output here it was just open high
low close adjusted open adjust high at
just a low adjusted closed volume
adjusted volume so if you take that in
consideration we can't just like store
the vault the prices because we'd have
no idea what company those were those
prices were in relation to so we're
making a new column giving it the title
of the ticker and then we're saying that
that column is identical to the data
column of tickers upper I'm sorry you
can take us to the data column of a DG a
period closed so that just makes it the
adjusted closed column period and it's
labeling it as the stocks ticker then
we're gonna say the data frame equals
and we're gonna can catch this pre-made
data frame that we like made up here and
we're gonna in catenate which is just
adding to it and but what it's doing is
if you remember append added to the end
where a concatenate will allow us to add
new columns to that data frame so we're
gonna say DF equals PT concat and we're
gonna concatenate afraid and then the
next or the first columns
and the next will be data and then a
ticker dot upper so it'll just be
whatever that new column was basically
and then comma and then axes equals one
and so what that's going to do is is
each time we get the stock we get the
adjusted clothes and we're going to take
that and just continuously concatenate
to the I guess you know concatenate
columns basically to our data frames so
I guess what we'll go ahead and do is
we'll call a try here I'll do this and
then we'll call an exception so accept
exception as E and then print the string
version of E and actually let's go ahead
and print it will do a string version E
but now that this website went down on
me normally it's been really reliable so
I'm a little worried but maybe what you
might want to do is like this so we can
just like copy this print the string E
and then maybe just run it one more time
try accept exception as e me and my
exceptions is logic I love it you hate
it that's fine tab that over and then
again will print string e so this will
at least run through two times and in
fact let's go ahead and add a time dot
sleep ten seconds so for whatever reason
that pull fails wait ten seconds and try
again now G Harrison why not just put it
on an infinite loop and every time it
fails it tries again that way don't have
to do this well the problem is some of
these stocks first of all may not be
available in the data set also they
might not just might not exist or there
might be some other error that we're not
accounting for us so we're gonna try
twice if that fails forget it so we've
got stock prices we try it twice at the
end of the day we have this data frame
so now what we do is we come down here
and then we just do a DF to underscore
CSV
and we're gonna call this CSV stock
prices dot CSV now I already have one so
let me go and save a quick backup before
I run this feel free to run it it's a
long operation probably so you can run
yours hopefully in and it'll probably
take a few minutes maybe even up to like
ten minutes I forget how long it took me
to do it okay so let me go ahead and
save this run it we're just printing
ticker or not printing anything else
absurd I don't think alright okay
did it just finish this how would I just
saw hopefully not I have it is it run
usually if you see two lines that's bad
news
okay I know uh okay so we got a call the
function in the run so stock rises let's
try that again
you I don't think I still don't think I
ran
it's we're getting empty here for our
stock list what you doing is okay fine
let me let's look up a whoops I mean to
do that let's look real quickly at
throwing that interesting so this is one
of our previous scripts I just want to
see if I wrote the code somewhat
differently or something hmm
yeah so now apparently it's it's running
what is the friggin difference oh my
goodness I'm gonna die here okay so yeah
so in in this first one we didn't have
this slash that was the problem okay
there we go
save that let's come to our script it's
running here so we've got a AAA Apple AB
V whatever ABC is okay so that's running
I guess we'll just leave it running for
now I'm not gonna make everyone sit
through this one looks like we're at
least not hitting errors yet if there
happens to be some sort of other error
ie the the stocks underscore CSV file
does not work for whatever reason
well we'll address that in the next
video so if you guys have any questions
or comments on this video please feel
free to leave them below otherwise as
always thanks for watching thanks for
all the subscriptions in the donations
and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>