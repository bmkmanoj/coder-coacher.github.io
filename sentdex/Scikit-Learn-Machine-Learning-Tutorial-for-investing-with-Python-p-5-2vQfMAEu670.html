<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Scikit Learn Machine Learning Tutorial for investing with Python p. 5 | Coder Coacher - Coaching Coders</title><meta content="Scikit Learn Machine Learning Tutorial for investing with Python p. 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Scikit Learn Machine Learning Tutorial for investing with Python p. 5</b></h2><h5 class="post__date">2014-12-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2vQfMAEu670" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on everybody welcome to the
fifth video in our Python for machine
learning using scikit-learn tutorial
series in the last video we were talking
about pulling some necessary information
from our data file and in this video
we're going to talk about how to
actually to actually acquire the value
that we're interested in for us the
value that we're interested in is this
total debt to equity ratio again as we
move forward we will add many more
features to the company I don't think
that this is going to give us anything
too useful at least until we separate
companies by their sector then maybe
this number might get useful but for now
we want to keep it simple so we can
actually visualize the out output and
then we'll start making it more complex
and likely a little more interesting so
first of all we've got the date in the
unix time and now we actually need to
acquire the data so when it comes to
parsing the websites again we're not
actually parsing website in this example
but we are what did I do
with the but what we have is a bunch of
HTML files that Beit is identical to
what you would have gotten if you had
parsed yahoo finance so for example here
I have the stock ticker a for Agilent
Technologies and if we scroll down we
can see here is the total debt to equity
ratio to start which is point four zero
seven now if we generally I mean you can
use like a module called the
beautifulsoup to do web parsing and my
honest opinion beautifulsoup is almost
never necessary unless you're doing some
really complex parsing so I'm going to
show you how simple it is to parse
pretty much anything but anyway what I
tend to do is this is that I want this
this right here I want to eventually
find this number I'm just going to keep
in my mind that
number is 0.40 7 I'm copying the element
right before that number and then if
you're on a website we're on an HTML
page so we literally can do control you
if you're in Chrome or you can do right
click view page source and then control
F and what we're looking for is total
debt equity mrq which takes us here and
then we see here is the actual value
that we were interested in 0.4 to 0-7 we
can't actually search for 0.40 7 because
that number is going to change obviously
given the document so we don't want to
do we need to print the date time in the
unix time we'll keep the sleep there for
now and now what we want to do is figure
out how we can pull this data now again
you could use something like
beautifulsoup
and you know user like table reading
functionality or you can just do the
following so we have the information
there for the date time now what we want
to do is we currently have no way of
opening the full file yet so we need to
specify how to build the entire path so
currently we have this path then we have
the stats path added to it and then from
there we haven't done anything so we
want to open up the file
so basically path plus stats path plus
file equals huh what we want so what
we'll do is we're gonna say the file so
we'll say full underscore file
underscore path equals each underscore
Durer plus a slash plus file so that
gives us the file path because you have
to understand we're currently whereas
each Durer easter here in stock list so
this would give us the actual path to
our file now we want to go ahead and do
is the following so first let's go ahead
and print this right here so we'll just
take this copy paste and now we want the
source so where do they say this
source for the source code source coast
he comes open normally you would this
would be like a URL Lib open tasks with
the dot read at the end but since we're
not actually parsing from the website
we're opening a file instead open full
underscore path oops let's just copy and
paste copy paste open that Wittington
jittery and then dot read and now let's
go ahead and print the source just to
see if we're on the right track cool
save f5 to run might take a second yeah
okay so here is the entire source code
so we got all of that so cool we are
indeed on our own right track
let's comment out the printing of source
before we get in trouble and now we
actually want to pull the value that
we're looking for and it turns out that
yahoo very rarely changes much but to
get this you'll have you see we have the
actual thing that we're trying to gather
then we've got basically a colon and
this before the actual value okay so
that's easy enough so what we'll do is
you'll have something like that so we'll
say value equals source dot split and we
want to split by gather so then so
whatever we're trying to gather because
that's going to be this so we want to
split and this is how you split like a
big block of string data you can split
it up by a value and we're gonna say the
value we want to split it by this orange
right here is an in fact let me zoom in
fancy stuff here the orange right here
see if I'm getting bigger sometimes it's
really difficult whenever I uh that's
too big I look at this sometimes
afterwards I'm like yeah that was pretty
impossible to read since I'm filming the
1080 anyway total debt to equity the
orange is the gather and then we want to
add this bit to it so we'll literally
just highlight that we can hit copy come
over here gather Plus does it have any
quotes in it yeah it's got double quotes
so we'll use single quotes paste so
these double quotes here as long as you
encase them in a different form of
quotes you're totally fine
so anyway or you can also escape
character but we'll just this will be
fine so Scott splits by that and then
when we when we have split it by that on
what side of this split is the element
we're interested in well it's on the
right side so we would not use element
zero we use element one which is
basically this and then everything after
right so let's get back to where we were
so we want the first if element there
and then what do we do well we do one
more dot split and this splits a little
easier basically we want everything like
since we have all this what would be the
most sane thing to split by well pretty
much like this right just the closing
table data tag that's it so copy that
come over here split by the closing
table data tag and then we want the 0th
element there done
we have parsed this table with one line
of code basically so we read the source
and we used one line of code to get the
data we needed and this over the course
of a decade just simply as far as I've
seen thus far has not changed on Yahoo
Finance okay so now let's say we want to
print the ticker and then the debt to
equity ratio so first what we want to do
is we need to define the ticker that
were using right now and so the ticker
which is like the stock ticker equals
each juror die split by and basically
want to split by a backslash so we do
backslash backslash and then the element
is going to be on the right hand side so
that will give us the actual
ticker then what we can do is we come
down here and we can do basically print
ticker and then plus : comma value this
will give us the ticker and the price to
equity or I mean the debt to equity
ratio and then what we'll do is we'll
just tab over the sleep so this will
give us the ticker and the debt to
equity ratio for that company for the
decade right so we'll save and run that
and I forgot what we were printing out
the directory every time we'll fix that
in a second
but anyway you can see here it is here
it is here it is here it is they went to
0 for a little bit awesome here it is
here it is here it is all the way down
to now I mean this company is in massive
debt oh wait oh I'm sorry we went to a
it's stopped it so really this company
yes see at the end this company is in a
large amount of debt since my time here
it'll be interesting to see
we'll have to graph debt tech yeah debt
to equity for like all of the companies
will have to graph that it'll be 500
elements x a bow probably 20 years 10
but it should be okay to plot up on on
matplotlib I'd be really interested I
think all the companies I've seen so far
have increasingly take on taking on a
lot of leverage and debt over the years
especially very recently which is really
worrying and if you ask me all of the
companies are in massive debt and it's
in a market that's in theory in massive
debt from QE right now and it's just
insane so anyway that's interesting
so oh now we've got the ticker and the
value so we've parsed the data that we
want and now we need to store it and
structure it in such a way that we can
use it right so we've acquired the data
right but now we have to save it so we
can later on later access that data but
we want to save it with all of the
companies so we'll go through all the
companies and save these values for them
and then maybe eventually we'll go
through and save them by sector or
something like that but then you
ehh that's it for this video in the next
video we're going to be actually using
pandas to structure our data and then
output it to CSV so later we can access
it with pandas and be very efficient so
that's it for this video if you have any
questions or comments feel free to leave
them below otherwise as always thanks
for watching these for all the spoiling
subscriptions until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>