<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Exchange choice change - Tkinter tutorial Python 3.4 part 20 | Coder Coacher - Coaching Coders</title><meta content="Exchange choice change - Tkinter tutorial Python 3.4 part 20 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Exchange choice change - Tkinter tutorial Python 3.4 part 20</b></h2><h5 class="post__date">2014-12-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0hrrycamKPM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome to
the 20th tkinter tutorial video in our
ticket omega series so to speak here
where we are making an actual program so
what are we left off we've got you know
a nice baseline and we've got all of our
options and stuff that we want in our
program but we haven't actually tied any
back end operation to do them so for
example we hit SMA and it doesn't really
do anything it does set it right it we
do set that that parameter but we're not
actually doing anything so in this video
in the coming videos we're going to
start actually applying you know some
function in some code to those
operations so the first thing we need to
do is is we're in order to do this we're
going to be using non tick data and to
display non tick data we're going to be
using Candlestick charts as well as plot
we want to be able to plot with dates
and that sort of thing and modify the
ticker via the actual axis labels so
we're gonna be importing a few more
matplotlib things generally it's a good
idea to go ahead and just kind of group
group some things together that are like
from the exact same module so I'm gonna
go ahead and move this from matplotlib
import ply plot just right up here and
now we're gonna import two more things
we're gonna say import Matt plot Lib
dates as M dates and then we're also
gonna go ahead and import Matt plot live
dot ticker as M ticker so this will
allow us to kind of modify the dates an
as well as modify our ticker information
now scrolling down a little bit right
underneath re sample size let's go ahead
and add in data pace which we start off
with say tick data eventually we're
going to go ahead and change that but
for now oh whoops
database right there Harrison you're
blind anyway just edit in tick instead
of one day because that's is what we're
starting off with okay so now what we
want to go ahead and do is we're going
to come down into our animate function
and now we need to go ahead and add in
where are you animate okay so right now
the only thing our animation function is
even capable of doing is animating tick
data whereas really we only want to
animate tick data when that's the user's
choice so now we need to go ahead and
program this block of code or really
this function to support various forms
of whether you know it's data frames
basically or data time frames so we're
gonna go ahead and global the refresh
rate and we're gonna global dat counter
and not really sure you know we don't
really have a refresh rate up here yet
but that's okay
we'll leave that there for now but we'll
have to add that in so coming back down
to anime so that just for the record
that's not really a syntax error but we
don't actually have anything
corresponding to refresh rate but we'll
deal with that later so the questions
that get asked here are first of all in
order to animate we need a few things to
happen first of all we we if you recall
we are offering the the choice to either
pause or resume the graph from running
so the first question that we should ask
in this entire function is if chart load
okay so if chart load is true then go
ahead and continue on if it's not true
we don't need to do anything else
okay now I'm gonna make some some more
space so we're gonna have a lot of
statements here the next question we're
going to ask here is about pain count we
haven't really talked about that the
idea is eventually we can add multiple
pains and have you know comparison
charts stuff like that for now we're
just kind of putting it
for the future possibility but it's not
really doing anything at the moment so
anyway if pain count equals one and then
the next thing we're gonna do is if data
pace equals tick so this is basically
where all of this code needs to go of
course the only problem is this is only
btc-e tick data so we not only do we
need to put this block of code under
there we need to put the code necessary
to do all of the other exchanges and as
you'll see they're each a little
different luckily it's besides just tick
data we're gonna be pulling all the data
from sea of BTC so that basically
normalizes all the data so that'll be a
lot of use here to handle and deal with
so anyway if data pace equals tick great
we're gonna run a try and we're
basically going to try this block of
code right so so we'll take this and now
we need to tab this over to fit
underneath the try so 1 2 3 4 tabs were
required bring this up like that and
then the next thing that we're gonna do
is let's come down here and we need to
throw in an exception so we're gonna say
try and then it does that and then we
say accept exception as e-print failed
because of comma e if you are on winter
Python 2.7 accept exception comma E
naught as you moving on so now that
should work let's see if we got any
issues we do pain count is not defined
rates so let's go ahead and just define
pain count at the top here as equals 1
don't have pit no I guess not
okay pen count equals 1 run it again
agree cool
so that's all fine and dandy uh the only
issue at this point is not only do we
get tick data from or at least price
data from ticks or price data in the
tick data that's what I'm looking for
not only do we get pricing data we also
get volume data so it's kind of useful
to know what volume was involved in
these prices so it's kind of silly not
to put it up there so let's go ahead and
talk about how we're going to put that
up there so coming down to animate let
me just do I'm just going to do control
F it's popped up in a different window
but here we go
and it may brings me down here and now
we're ready to change up a few things
first of all let's go ahead and we're
gonna define two subplots so we're gonna
have a equals something and then eight
two equals something a is going to equal
PLT dot sub plot to rid if you're not
familiar with so plot to grid it's a
little different than the typical one
where you basically say the sub plot
equals like it's in a two by one and
this is number two something like that
some plots of grid works a little bit
different you basically say what the
full grid sizes and then you say the
starting point and then you say you know
the dimensions so for example here
subplot two grid the full grid is a six
by four so that's the first parameter
notice that that's a tuple as a
parameter the starting point of this
plot or subplot rather is going to be
zero zero so the top left corner and
then we're gonna say the row span so
this is how many like roses are gonna
span crazy and then colspan
this is how many columns it will span so
this is gonna span five rows that leaves
one row remaining and the columns it's a
full width okay
that's why we're talking about pane
count because later on we could say this
is part of a twelve by four or something
like that and it can take up less space
and then we can put more stuff on there
so this way it really lets you customize
very nicely so with some forward
thinking here that's how we're going to
do it next we're gonna say a two is
basically the same thing
so I'm gonna go ahead and copy this
paste it the only difference is it
doesn't start in the same spot and it
does not span five rows it only spans
one row finally there's one more
parameter we're gonna add here and this
one is going to share X and that's gonna
be a and what this means is it shares
the x-axis with a so as you zoom in to
one of the subplots the other subplot is
affected it will be zoomed in to the
exact same degree and if you move around
that kind of stuff it will be identical
so they'll always be aligned since we're
dealing with date data it's really
important but really a lot of times
that's really important so anyway if you
want to learn more about the
customization definitely check out the
map plot because to maizing matplotlib
series I have although we're gonna be
doing a fair amount of customization
here so the next thing that we want to
do is going to change let's see I'm
gonna go ahead and because we're gonna
have to plot a little different so I
come down here I guess and we're gonna
say we're gonna say data date stamp and
that's gonna equal NP for numpy it's
gonna be an umpire array of the data
time stamp which is a UNIX timestamp and
then we're gonna say dot as type so this
kind of converts it for us and we're
gonna convert it to the numb PI's date
times 64's okay so pretty much the same
thing that we did down here or just
we're basically adding this instead so
we've done that now what we want to do
is we're gonna say yeah we didn't do
that either so all dates all dates
equals data date oops we need to have
this date stamp and then dot two lists
because we're not able to pass a numpy
array through I suppose it would be a
series anyway we've done that now we're
gonna go ahead and talk to byes here we
don't
this anymore and we don't need this
anymore so comment out these lines
that's wasted processing next we like I
said we get volume data so now we want
to add in the calculation of volume or
the basically attribution alone volume D
equals data amount so it's just part of
the data JSON that we're getting right
it's it's in that JSON already so and
it's just under the label of amount
that's how much the volume is so then we
run an a dot clear totally fine now
we've got by date cell dates that's fine
the only thing that we're gonna add now
is let's go before the legend will say
a2 dot fill underscore between and this
will be all dates because this is volume
data then you specify when you do fill
between you it fills okay so you have to
specify what the minimum point of that
fill is gonna be in our case that's
going to be a zero you can do really
cool stuff with fill between by the way
this is obviously not a variable but
there are ways you can pass variables
through there and you can make some
really cool graphs but maybe more on
that way later the data that we're
plotting now is volume and then we're
gonna set the face color equal to we'll
use this this color here so let's just
copy paste boom
so that fills it between that's why we
needed to set all dates because we
already we got the buy and sell dates
but volume is basically every data point
is volumes so that's why we needed to do
that so um now the next thing that we
want to do is add let's see we don't
really we need to add the axes layer or
the conversion now so the next thing we
need to do is a dot X
AXYZ dot set underscore major underscore
locator and we're gonna do em ticker dot
max n locator and then v and what this
does is it sets them the maximum amount
of like actual marks right so we're
displaying full dates here so obviously
if we displayed like 50 of them we
wouldn't be able to see them anymore and
so there are some ways that you can have
many so the default is to display them
horizontally but you can actually set
write some code to like make it display
like diagonally so you can have diagonal
dates and you get a more marks in it
like it's a better way to so they don't
run over each other because if if you
program it and you allow it to it will
they will text will just run over itself
it's really ugly so we've done that now
we want to set the formatter and then
we'll do one more thing but I'll show
you why in a moment so we'll do it a
x-axes dot set underscore major
underscore formatter
and here we're gonna format how the date
actually looks and we're gonna use em
dates dot date formatter and then here
you put the actual date code okay so for
a full year you do % capital y then we
want to just superimpose a dash in there
and then a month is lowercase M that
will be a numerical month you could also
do an uppercase M for the written out
month I believe and then %
day for the number as opposed to the D
for the written out day space and then
we want the hours : minutes we it is
tick data so I suppose we could have
seconds as well that wouldn't really
hurt let's leave it this way so we've
done that and now finally let's go ahead
and run that and see how we're looking
at the moment what
it was an issue we didn't get any reason
for that issue data pays tick we are
running hopefully tick I believe up here
oh we did get might do it we don't have
any like major air and try should show
up let me just write a simple print
statement here
so it's getting through all of the code
not really sure it's not and we're also
not getting our two panes there okay
well we have Fri okay so we probably
we've done probably some stupid stuff
here so first let's go to the top here
and we have F equals figure that's fine
we're gonna comment out a there and then
let's go back down and to animate here
I've got like some of this old code
basically so we've got a and a two a dot
plot is fine a dot a - that should be
fine little confused why that wouldn't
maybe like won't replace its own
subplots I'm not too sure that's even a
bigger mess okay hold on
let's close out of this okay the problem
is there's basically two forms of figure
okay so you've got just figure that
we've imported and been we've been using
format from matplotlib dot figure and
then you've got PLT dot figure so what
we're gonna go ahead and do is first of
all we need to comment out this we're
not gonna use that form anymore and then
come down here and we're you have F
equals figure F now equals PLT dot
figure so save and run that and
hopefully we should have a superior
graph yes okay so here we go we've got
the volume data here and then obviously
tick data this is pretty boring looking
data mostly because you've got you know
spikes of volume that are pretty much
overshadowing the other trades most
trades are pretty small so there's just
really not much volume to see there but
obviously some of these like have some
pretty large volume to them anyway so
that's it for this video
we've got basically the tick set up and
in the next video we'll add some of the
other exchanges so we can view tick data
from the other exchanges and then we'll
start adding in the time frames and all
that so anyways uh hope you guys have
been enjoying if you have any questions
or comments please feel free to leave
them below otherwise as always thanks
for watching thanks for all the support
subscriptions and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>