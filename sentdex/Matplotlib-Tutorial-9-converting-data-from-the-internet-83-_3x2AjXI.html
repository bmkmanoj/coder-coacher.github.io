<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Matplotlib Tutorial 9 - converting data from the internet | Coder Coacher - Coaching Coders</title><meta content="Matplotlib Tutorial 9 - converting data from the internet - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Matplotlib Tutorial 9 - converting data from the internet</b></h2><h5 class="post__date">2015-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/83-_3x2AjXI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on everybody welcome to
the 9th data visualization with Python
and matplotlib tutorial video where we
left off we were basically pulling data
from the internet we were we got the
data we've separated it and we can even
unpack it into these variables here but
the problem is the date stamp here is a
little problematic for us because it's
not like a legible date ok so so to us
we understand like ok we can see ok this
is 2010 this is June 29th so we can kind
of understand that but we have to be
very explicit to our programs what that
date is now a lot of programs use what's
called unix time in unix time is just
the number of seconds after January 1st
1970 map I'll live however doesn't use
unix time ok it has its own little
conversion thing I don't know I don't
even know what the what the conversion
is but it usually corresponds to numbers
like 70,000 or so so anyways that's that
moving along so we need to convert this
and to start converting data we have to
understand that if the data comes
through as like a byte string it's not
even a string so we have to convert it
now
usually just dot two code will work but
to convert it to a true date stamp in
string form for whatever reason dot the
code is not enough we have to do our own
kind of decoding as well so in this
tutorial we're going to write that this
decoding function here because it
doesn't exist yet we'll write that and
then we'll actually pull the data and
we'll graph it if the stars align so
let's clean this function up a little
bit those no reason to have all these
white spaces all right so we're going to
make this function so let's copy that
come up to the top and now we're going
to define and we're going to say byte
state to num and then we basically the
first thing that gets passed here we're
going to say is FM T that's short for
format so format is this data right here
it's the format of that date stamp now
the next thing that we're going to do
here
is um basically we've got format and
then we're going to actually have one
more thing we're going to be the
encoding and the encoding is utf-8
that's okay that's what we need for the
internet data so now we build this
function we're going to say STR
converter and that's going to be equal
to M dates dot STRP date to numb so this
is strip date to number based on what
based on the format okay now just for
the record if you don't understand this
kind of decoding stuff that's okay
that's not what this tutorials supposed
to be over back in Python 2 this was not
necessary this function already kind of
existed for you you didn't need to know
how it worked but since it doesn't work
in Python 3 for some reason we have to
write our own okay and this is hopefully
you can understand feel free to ask
about it if you want but don't be like
frustrated if you don't understand it
so anyway string converter that's going
to be equal to M date strip date to
number based on the format and again
this is basically that that's going to
strip it for the matplotlib date number
that 70,000 number whatever that means
then we're going to define the bytes
converter and it's it converts B as in
bytes and it returns the S which is a
string and that's B dot de code based on
the N coding which is utf-8 then it
returns the string converter converter
the string converter of that new element
s return return and then at the end of
this function we return the bytes
converter okay so uh yeah
so now returned by Zoomer yeah ok so
we've got that that will return
basically this answer and that should be
good we should have the conversion if
something goes wrong we'll revisit that
so now everything should be unpacked
I'm saying this as if like the program
is like running live I'm just kind of
running through the program in my head
so we've unpacked everything with that
function we have now converted
everything and now we're actually ready
to plot this stuff so we should be able
to get rid of just like calling PLT dot
plot and clothes and stuff so let's try
that and see what we do so we'll say PLT
quixote plot and then the X will be a
date and instead of just plot let's
actually call plot underscore date this
notifies Python the a we're plotting
dates and then so we plot dates and then
date and then we'll plot the clothes P
for clothes price and that should be
fine the X label now is not X its date y
label is not y its price and that should
be good let's let's run that and see see
what happens
um labels so for some reason we're
passing we got this labels line which we
shouldn't have gotten interesting one
two three four
so this labels is in there as well for
some reason so if so let's go back up to
this if values not in line and let's
just add if values not on line and
labels not in line some reason that was
there I don't really recall ever seeing
that one so if that's all true let's run
this one more time okay we got a price
awesome so this is when we use plot date
for some reason the default is like more
of a scatter I'm not sure why but we'll
fix that right now so we go plot date
and then just do a comma and then add
the argument of just like this - so
that's like you know your minus sign run
that one more time and then now we've
got just the price now we're getting
this error about no label that's because
we didn't label the price so we can do
we'll just do keyword here label
actually let's do here keyword arguments
should come last label equals um price
okay good enough all right so now we've
got we're plotting you notice here we've
got the dates down here at the bottom
and what's kind of nifty is if we pull
this like this and like if we zoom in to
a specific spot you'll see that they've
expanded like originally they were just
the years but if we zoom in we get the
month in the year now we can keep
zooming in now we've got the month day
in the year okay so depending on your
zoom that that date stamp is going to
vary a little bit
now what happens though if we zoom in
all the way and we make this like the
original size that it was we've got a
little bit of overlap there on the dates
or like if we do this right so one
little nifty thing to do is to like
rotate the dates and stuff and so we
talked about rotating the day it's kind
of cleaning up this chart a little bit
in the next tutorial but at least for
now you should be able to have this you
know Priceline at least plotted up that
we grabbed from Yahoo so if you have any
questions comments concerns whatever
reason if your graph is not popped up
please feel free to post below otherwise
as always thanks for watching thanks for
all the support subscriptions and until
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>