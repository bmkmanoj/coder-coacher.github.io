<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Drawing and Writing on Image - OpenCV with Python for Image and Video Analysis 3 | Coder Coacher - Coaching Coders</title><meta content="Drawing and Writing on Image - OpenCV with Python for Image and Video Analysis 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Drawing and Writing on Image - OpenCV with Python for Image and Video Analysis 3</b></h2><h5 class="post__date">2015-12-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/U6uIrq2eh_o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everybody what is going on welcome to
part three of our open CV with Python
tutorial video series in this part we're
going to be talking about is drawing on
images so up to this point you've been
shown how to load images how to load
videos and you give them and showed how
to load images into save matplotlib and
you can plot and create lines and stuff
like that but it turns out that open CV
actually has some drawing functionality
built in for you it's actually gonna be
a lot more efficient than using
matplotlib so that's we're going to be
covering here most the time when people
want to like create a rectangle around
face let's say they're going to be using
open CV not drawing in matplotlib so
first of all as usual we're an import
numpy as NP import CV - and ready to
rumble we need a sample image or just
something to load you can use that watch
jpg or use your own image does not
matter so image is equal to cv - Emily
and what is the image that we're going
to read it's a watch jpg and we're going
to read it in as a color now what we're
going to go ahead and do is let's just
start by drawing a line we're going to
say CV to dot line and then where do we
want to draw the line on the image where
does the line start we'll say zero zero
where does the line end we'll say 150
150 now of course depending on the size
of your image you may or may not you
know you can use different numbers there
and then what is the color of the line
well we want a white line so the way
that colors work in computers is they
work by light okay so in the world and
the physical realm light or a colors
like negative okay so if you the more
like I say you've got a green paintbrush
more green that you paint you paint some
green you paint some more green you
paints more green gets darker in the
world of computers and positive the more
green that you add actually the brighter
the green gets so the same is true here
so normally
in computers it's RGB okay but with
OpenCV we work with BGR which is blue
green red so for blue if you wanted
something to be totally blue you would
do to 5500 if you wanted something to be
so this is B G R so if you want to green
it would be to 5500 now if you want it
to be red it'd be 0 0 255 and then you
can mix in between so if you want white
it would be 255 255 255 if you want it
black it would be zero zero zero and
eventually when we get into like
threshold and stuff like that we're
going to basically convert everything to
things like zero or 255 and so on so
anyways we'll keep it a white line for
now and then you've got an optional line
width so we'll save 15 pixels or if that
was loud through the microphone now
we're going to go see v2 dot M show and
we drew on the image and we'll just call
it image and the image that we want to
show is oops image and then we're just
going to see v2 dot weight key this just
waits for any key to happen and then CB
to destroy all windows
save and run it and we have C v2 is no
attributes didn't capitalize the K and
key so let me fix that try again sir
there we go okay so we've got the image
and we've got a little this actually not
very little line at all in the for the
image but anyways got the line they're
good to go press a key it's gone okay
turns out we can actually draw more than
lines I know you didn't see that coming
I bet you can draw a rectangle arguably
probably the most common thing you're
going to draw so how do we draw a
rectangle we can say C v2 dot rectangle
where do we want to draw it image when
do we want it now then we have okay so
this will be the image then you've got
the top left coordinate so let's say
1525 and then you've got the bottom
right
ordinate so 200 150 again if you um it
depending on the size ear image you
might use different coordinates there
and then finally um you the width will
do five okay and oh we're forgetting
color so then we pass a color before the
line went so it's a lot like the line
here right so the line where to start
where's it end and arguably this is
where as the the rectangle start and end
if you were like drawing it with your
mouse and then color let's give it a
green color so zero 255 0 okay that
should be good enough let's go ahead and
run that bad boy look at us so with the
line then Square and notably obviously
the line was drawn first therefore the
square goes literally over that line
because it was drawn second how about a
circle so as you might be able to
surmise it would be C v2 dot circle
where do we want the circle image and
then here this is where is the center of
the circle will say 163 and then what is
the radius of the circle we'll say 55
what is the color of the circle let's
say 0 0 255 so that will be red and then
here you can have a line width but I'm
going to show you something else
negative 1 that is going to actually
fill in the circle right so a negative
line width will just fill it right in
it's cool so close that and now we're
going to talk about polygons so the last
shape so for polygons you've got
basically the the way a polygon is going
to work is you got points okay and with
polygons it's going to connect all those
dots and optionally close the polygon so
first we're going to have a list of
points you know you could in theory
throw this list of points in the polygon
function basically from cb2 but it would
make the function like really long
so we're going to say pts equals NP or a
so it's just a numpy array of a bunch of
points okay so the points here I'm just
going to use ten and five will do twenty
thirty seven seventy twenty fifty ten
and that'll be nothing and then we're
going to say the data type here will
numpy int 32 now if you peruse the
opencv documentation they suggest that
you convert the shape here so points
equals points dot reshape negative 1 1 &amp;amp;
2 so this reshapes the array to one by
two however that is basically already
the case so I don't see the need for
that okay it was in the documentation so
I'll just leave it there just in case
ain't anything breaks for anyone else
but I don't believe that's necessary and
then vergis a CV to dot polylines where
we want the polylines image one of the
points to those polylines they are not
pots their points and true their and the
true here is whether or not we want to
connect the final point to the first
point okay so you could have polylines
and like make like a rainbow and or even
have polygons lines actually finish the
job and make a real polygon
what is the color we're going to say 0
to be divided 255 and then the line
width will be a three let's see what
happens only two non key words accepted
what happened are we going to have to
convert this to an umpire I'm pretty
sure I never had to do that I'm gonna be
pretty angry if I might have to eat no
okay hold on what's happening
uh what okay I see what's happening okay
at least I'll have to eat my words okay
so numb hi ray Oh for real this time a
two by one okay now try again we all
right there is our polygon you can see
up in the upper left corner now um I'm
curious
I never tested this so I'm not sure
what's going to happen but what if okay
so for example we two negative one here
that should fill in our polygon oh I
guess it won't darn I was really hoping
uh the goal out or the the test I was
going to do was going to be if you
filled in the polygon but didn't close
the polygon I wanted to know what would
happen there but I don't get to find out
because it won't let me so cool okay so
so we know how to draw all kinds of
shapes now the final thing that's useful
to be able to do is to write so let's go
ahead and cover how to write so first of
all we have to have kind of two things
when we write we need a font type so
generally you just specify the font
first and we'll say CV - there are a few
fonts but we reuse the Hershey simplex
it's not so awfully close to another
type of simplex with an H moving along c
v2 dot puts text and we're going to say
where do we want to put that text right
on the image what does that text say
open CV Tut's and then um where are we
starting that text zero one thirty
what is the font that we're going to use
we're using font for our font what is
the size I am not quite sure how these
sizes translate in general because
they're actually quite large compared to
their number I don't know I'll show you
you'll see what I'm saying in a minute
and we'll give it some color this would
be spacing I believe between the letters
and then cb2 dot line
a give it some attempted anti-aliasing
good enough all right let's go ahead and
run that see how we did
Oh more Aires suplex I can't type today
y'all I'm sorry
simplex alrighty so there we have OpenCV
Tut's beautiful nicely done nicely done
that's size one okay so so what happens
when we say I don't know size five um
it's huge it's like off the screen I'm
sorry actually I think I also miss told
you guys something this would be the
thickness I believe not the spacing so
like five and five right so that's like
the thickness which kind of makes sense
but the thickness or the size of the
text makes no sense to me I'm not sure
how it translates in OpenCV that that's
size one but anyway uh let me see I'm
sorry I'm doing so much developments and
research here you can't use decimals so
that's good okay maybe it's like some
ratio of the image or something I don't
know
okay so that's drawing writing and
creating polygons and defying OpenCV
documentation
fight the power y'all okay so anyway
that's it there if you have any
questions comments concerns leaving
below in the next tutorial we're gonna
be talking about basic image operations
that we can do so stay tuned for that
otherwise thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>