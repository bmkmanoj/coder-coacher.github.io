<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Saving Tweets: How to use the Twitter API v1.1 with Python to stream tweets | Coder Coacher - Coaching Coders</title><meta content="Saving Tweets: How to use the Twitter API v1.1 with Python to stream tweets - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Saving Tweets: How to use the Twitter API v1.1 with Python to stream tweets</b></h2><h5 class="post__date">2013-10-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/d-Et9uD463A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to the second Twitter API
version 1.1 tutorial video got a request
to show how to actually save the data so
chances are if you're streaming the data
you might actually want to save it
surely you're going to want to save it
at least to a variable maybe for
displaying purposes but a lot of people
are probably wanting to actually save
this either in a database or into a file
of some sort I'm going to show how to
save it to a CSV if you're familiar with
databases then really the principles the
same you would just save it to a
variable and save it to the database and
then also show you guys how to trim the
trim the actual information so as you'll
see the information that you get or at
least that you probably seen through the
stream is you get a lot of information
and so especially as you're streaming it
you're probably streaming at least eight
times the data that you might actually
even be interested in so so you'll want
to trim the data too so anyway that's
I'm going to show you at least how to
save it in this video and probably in
another video I'll show you guys how to
actually trim the data down so to start
what we're going to do is the data
itself is is basically already in a
variable so here we're just printing the
data but you can also obviously save
that data so to save that data all you
really need to do is you you don't
really even need the file to exist
already so we could just say save file
equals open and you can just say we'll
call this twit DB dot CSV and you want
to open it with the intention to append
not write otherwise it would clear it
every time the next thing that you want
to do is we would go save file dot write
data and you can either say you could
make a variable in a pen like data plus
newline or you can just do something as
simple as save file dot write and write
in a new line like that although when
you save the data like this as you'll
see there's actually blank lines
but when you go to trim the data which
you're definitely going to want to do
you'll want that new line in there and
finally the last thing you want to do is
save file dot close now one more thing
that I'll add on to what we did last
time is as you can see right here
there's first of all there's no no room
for error here so if this script fails
in any way it's just going to close out
and stop running so you should also in
case this in a try and accept loop but
so we'll say try here but in most of my
videos I show you guys you want to just
do try except exception in this case we
actually want to do try accept base
exception give that E and the reason for
this is it's actually a base exception
that will be thrown like so for example
the two reasons you might get an error
one would be if you get rate limited or
you get like a 404 or something like
that or if your internet drops you'll
you'll get just cleared out so sometimes
you know if you've got spotty internet
or maybe you're on wireless internet I
don't know why you're going to stream
Twitter on wireless Internet but let's
say you are every now and then your
internet might go out and it comes right
back but it doesn't matter if it fails
once the whole thing would close so you
want to do that throughout the base
exception and then just say print failed
on data and then we'll just say a string
e whatever the error is and hopefully it
only throws that maybe once or twice and
then continues back and the other thing
just just just so you're not like
constant like if you are being rate
limited you would want to throw some
sort of sleep in there otherwise you'd
be like constantly reconnecting so if
you are being rate limited this would
only piss them off more so uh and also
with time that sleep we don't have any
we have an imported time so make sure
you go to the top of your script and
import time so let me do that real quick
anyway so I'm kind of hiding the access
token and all that kind of stuff you
should have your own if you don't know
how to get them obviously you can watch
the previous tutorial on that but I just
don't have to worry about someone taking
my access tokens yeah so that's why I'm
doing this anyway so make sure you
import time at the top and then we'll
scroll back down
and now that we've done the try/except
based exception you really want to throw
this around a try and basic ception as
well are just regular exception even but
base exceptions basically like any
exception so that's good
so now that we've done that we're good
to go so we can actually save and
hopefully run this without any issue
looks all good to me even though we're
saving it as a comma separated variable
but there's no variables being separated
anyway because it comes out as a JSON
but anyway so let's hit f5 and run this
and sure enough we are streaming a lot
of stuff for car so let me open it up
see where are we and here's our Twitter
DB it is growing at a pretty rapid rate
this is what I was talking about if you
you know most people are just really
interested in the tweets but as you can
see we have a created date we've got ID
ID string and then you've got the actual
text itself otherwise known as a tweet
then you've got source you've got
keishon if they give it to you you've
got URLs and their descriptions and
they've got more stuff and more stuff
and more stuff and more stuff more stuff
oh my gosh
to have all kinds of stuff and some of
the stuff is interesting like how many
followers they have how many people
they're following etc but a lot of this
stuff you don't want it's just a huge
waste right so we'll probably yet we're
already out over a megabyte now so as
you can imagine if you run this thing
for very long pretty quickly you have a
massive database that is really wasting
or at least very wasteful so that's
going to conclude how to save it to a
file and in the next video I'm going to
show you guys how you can trim it into
your databases and growing so rapidly so
anyways that's gonna be the next video
hopefully you enjoyed this video as
always thanks for watching thanks for
the support in the subscriptions and
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>