<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python 3 Programming Tutorial - Threaded port scanner | Coder Coacher - Coaching Coders</title><meta content="Python 3 Programming Tutorial - Threaded port scanner - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python 3 Programming Tutorial - Threaded port scanner</b></h2><h5 class="post__date">2014-08-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/icE6PR19C0Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everybody welcome tune in their sockets
you toriel video this videos gonna be
kind of building on the last video that
we were covering and that was a port
scanner and actually I want to show you
guys the combination of socket and the
threading module which we've already
covered the threading module show you
another example of threading in action
so if you don't remember this was our
threading a tutorial here and the actual
job that was being run was actually just
timed out sleep 0.5 so it was just an
operation of sleep but as you can see
this is very simple we have a function
that's example job period so in theory
we should be able to just throw a port
scanner right into example job and that
would be it right so let me move that
aside now and we're going to go ahead I
think what we'll do is we'll we'll
rewrite most of this just so we can go
over everything one more time and really
rehash what we've got going on so
obviously we're going to import socket
we're also going to import threading and
then we're going to say from cue import
cue and then I really think we need to
import time for any reason so we're not
going to import time like we did before
and now we're ready to go we're going to
use a print lock again so we'll say
print lock equals threading dot capital
lock and then we're going to say our
target equals again Python programming
net and now we're ready to get started
so just like before we need our port
scanner so I'm going to define port scan
and the parameters will have port then
we're going to say s equals socket
socket and then parentheses here socket
dot AF underscore I net and then socket
dot sock stream so again nothing new so
far with sockets we've already covered
that line means and now we want to
engage in a try and accept like we had
before and so we're going to say try con
for connection equals s dot connect and
then we want to connect to target comma
port and the nice tuple here and so
we're going to try to do that and then
if that gets successful we're going to
run this with statement and we're gonna
say with print lock print port port is
open okay so we do that and then once
we're done with that we're going to say
conduct close and because we want to
close that connection once we're finally
done and then accepts and then pass so
if it doesn't work we're just going to
pass we're not going to print out like
oh this is not open or whatever extent
we're just wasting our print statements
with this print lock so that's it for
our port scanner it should look almost
identical to the port scanner that we
built in the previous video so now we're
going to define our threader which
really is going to be an exact copy of
the previous threader that we had before
so that's going to be Wow true and it'll
be worker equals Q get and then port
scan worker so I'm not told identical I
suppose because this was like example
job um port scan worker
and then finally Q dot task underscore
done just as a rehash this is going to
get the worker from the Q this is going
to run the example job with the worker
passing through as the port numbers so
when we specify a range of numbers as
workers so we can also specify them as
ports why not and then when we're all
done we say Q dot tasks done to end
q awesome so then we'll come down here
and we had better define Q so Q equals Q
u EU e empty parms and now we're ready
to create our workers so to speaker how
many threads are we going to run so for
now we're going to say we're going to
have we'll save about 30 30 different
workers so for X in range of 30 so we've
got 30 workers we're going to say T
equals reading dot thread target equals
oops Rutter
so what's happening here threading dot
thread so we're creating a thread and
then our target for that thread is
threader which does this gets a workers
from the queue so we're using queue and
threading and we'll set them to work on
port scanning which is here which we've
read in again all this stuff was covered
in its own right so far we're just
combining those two things so we do what
we did already cover a specific
threading tutorial and we've already
covered the port scanner so sorry if
we're moving too fast if we aren't check
out the previous videos uh next T dot
daemon equals true because we wanted to
be a demon so it will die when the main
thread dies an T dot start which has to
be called after demon ah now um we don't
really need to be logging like we did
before so we're not going to use the
logging time now we're going to assign
the amount of jobs and so you can think
of the amount of jobs as in the amount
of ports right so we'll say for worker
in range and this time instead of just
30 or 100 or whatever we need to specify
a starting point which will be 1 and
then we'll say 1 to 101 so we'll test
the first 100 ports and the reason why
we're doing we have to say 1 is because
port 0 is an invalid port we can't scan
port 0 so anyway moving on for worker
and range 1 to 100 basically I don't
why it worked so finicky like that but
basically it means it will scan port 1
up to 101 so it really means port 1 to
100 anyway moving along queued up put
worker so we're putting that worker to
work ok and then what we want to do is
queue join so that will wait so the
thread terminates and that really should
be it so hopefully if you walked through
the threading tutorial with me you can
see how we've basically written the same
script as we did with our initial
threading tutorial where the job was
just to sleep we basically replace that
with port scan and that's about it
so we just kind of mesh those together
so that's kind of why I wanted to
organize the threading tutorial in the
way that I did because you just replace
the function pretty much with whatever
you need to replace it with so yeah so
anyway let's go ahead and save save and
run this see if I made any errors here
or if it worked out for us save run it's
been popping up here yep
s stream so let's fix that bound to
make some errors let's try again and
immediately we see port 22 is opens
anybody remember how long it took to get
port 22 to show that it was open it took
a very long time so that was actually
very quick compared to before we
actually showed port 22 in port 80 well
in advance probably wouldn't even seen
it with our original port scanner yet so
anyway that was pretty quick umm then we
could continue we could say hey we want
to do 10,000 jobs and we want to have
100 threads let's say so we can save and
run that and you can see 22 and 80 we're
okay we knew about there they're being
open immediately and we're going to
continue running through ports adventure
to guess they're probably a few more
ports that are open how far do we go
10,000 maybe some in the 9,000 s will be
open
I'm not quite sure really not sure what
number we're on even right now but we'll
see anyway so now we're actually you
know we're using 100 threads to port
scan so as you can see we can we could
use this to our advantage
threading and B port scanning you know a
lot of ports at any one time as compared
to the really slow port scan before but
anyway um if this pops happens to pop up
with some more ports great otherwise I'm
going to start concluding this video so
that's it with this video in the next
video we're going to be moving away from
port scanning I just wanted to show you
some people port scanning is kind of a
pretty popular topic and it involves
sockets it's very basic so it's really
easy to show plus I could mesh it with
sockets and threading so I made a really
great example for threading so just
wanted to cover those things the next
ones that we'll be talking about will be
back to more networking purposes sending
and receiving data using you know
encoding and decoding that data so it
works properly so stay tuned for that if
you guys have any questions or comments
on this differently than below as always
thank you for watching thanks for all
the support and subscriptions in the
next time no more ports are open</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>