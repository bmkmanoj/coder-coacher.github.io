<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>UPDATE and DELETE - SQLite3 with Python 3 part 5 | Coder Coacher - Coaching Coders</title><meta content="UPDATE and DELETE - SQLite3 with Python 3 part 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>UPDATE and DELETE - SQLite3 with Python 3 part 5</b></h2><h5 class="post__date">2016-01-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AtBZC9F-MjI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on guys and girls welcome
to part 5 of our SQLite mini series as
well as another Python 3 basics tutorial
in this tutorial we're going to talking
about the point of no return so we're
going to talk about deletes and updates
to your SQLite and really SQL in general
databases so both changing values and
updating that earth-changing is update
so the query to change of value is
update but updating and deleting values
in SQL is a permanent job when you've
done it there are no undos so it's
really important that you don't screw up
into something you don't want to do
because there is no ctrl Z there is no
edit undo what you've done is permanent
so really keep that in mind so now we're
going to go ahead and do luckily this is
a simple database we're not too worried
about screwing anything up so don't
worry about that but keep in mind there
are no one do's so especially like web
servers or just anything in general
where you have a database it's just a
good idea to always do automatic backups
it's just just do it you will never
regret it I have done automatic backups
I usually pay hosts to like I use Linode
and digitalocean all that I pay the
extra money to just have them do the
automated backups because it's just
worth it I've never regretted it just
make sure you always backing things up
when you have databases anyway really
any time but with databases especially
so anyways define del and update here we
go
so first of all um let's select the data
that we're working with sources AC dot
execute and then we're just going to do
a simple select all thrown stuff to plot
and then we haven't really covered
one-liners I'm probably after this ish
we're going to talk about one-liner for
loops but here's a quick introduction so
if you just want to like do one line for
loops you can do stuff like this you can
say well for example you would do like
nevermind I'm not gonna explain it we'll
wait till we get there but basically
what we're going to do is
going to print row for row for row you
can see dot fetch all okay so it's just
going to print out every row for every
row in C dot fetch all a nice simple
one-line for loop and then we're going
to del an update we're not going to
graph data anymore so this just selects
we're not actually deleting or updating
anything so here's our information okay
we apparently have a lot of two's a
lotta eights probably eight is what we
have a lot of souls use eight so so it's
the information that we currently have
now what we can do is we can start
changing values so first what we could
do is we could say see execute and what
we can say is we can update and then you
update a table so you update stuff to
plot and then you update and when you
update you set something we're going to
say set value equal to you could make
this a variable so you could do
something like this at value equal to
plush mark if you wanted that to be a
variable but for now we'll just hard
code it 99 where value equals again you
could make this variable if you wanted
or in that's SQLite variable you can
make it a variable in my sequel with
that where value equals three no eight
okay so where the value is equal to 8
we're going to change it to a 99 now
that changes something right so you've
opened a file you've changed some data
what do you need to do you need to save
it so we need to run Conn commit that
we'll save it and then when we're all
done committing we'll just copy that two
lines up there paste and see our changes
in action so save and run that and sure
enough here we are we got a bunch of
these 99s now of course we didn't really
space anything out but somewhere between
here and here we have our new data so
now we have a bunch of 99 okay
so we'll close that and we don't let's
see so so okay so that was how you can
update some stuff so I'm going to get
rid of
um we'll do is we'll just comment this
out so alt three again if you're an idol
so now our database currently that
change is permanent right so ninety nine
is what eights are replaced with and now
let's say we want to get rid of every
row that has a ninety nine how do we do
that well you can do something like this
you could say C dot execute execute and
what we're going to do is delete from
stuff to plot where value equals ninety
nine now in my sequel just so you know
you can limit queries like you could say
I want to limit this query to the
maximum that you delete is fifty
unfortunately an SQLite it doesn't exist
so you're just screwed if you enter the
wrong thing because for example if you
do this delete from stuff to plot you've
cleared your database or your table
rather done mine now delete from stuff
to plot where value equals ninety nine
con connection commits and let's print
out what we have now and in fact let's
go ahead and print twenty time actually
let's do 50 times the pound sign that
just prints out fifty pound signs so we
can see the separation all right so the
new new separation happens here so as
you can see this one contains a bunch of
ninety nine values after that separation
we have no 99 s they have all been
eradicated again there is no undo
unfortunately now one thing that you can
do is first of all in MySQL you can
limit delete so for example let's say
you've got database with 1 million rows
and you're about to run a an update or a
delete and you expect that you will only
be deleting or updating a thousand rows
in MySQL you would just you know you
would limit
you know 1,050 right and if you effect
exactly a thousand and fifty rows you
know that something went maybe awry but
you can limit it just in case but
generally you limit after you've done
something else and that would be a
simple select so for example before you
run a delete query probably what you
need to do is instead you could do
something like this like let's look at
our database really quick so we can see
okay we've got a bunch of two's so let's
let's say our we're going to run an
update or delete on the twos and we have
in our mind how many rows that should
affect I don't know maybe 10 well we
entered it really should affect maybe
like three to five but we'll see anyway
I forget how many times I ran that but
anyways that assigned what you would do
first is instead of just running a
delete like let's say the query that you
want to write is basically let's get rid
of that excess not valid so you're going
to run the following query you're going
to delete from stuff to plot where value
equals to so before you go deleting why
not replace delete from and actually why
don't you just replace delete with
select all okay so you select all so you
can see what you're about to delete and
you can either print it out or another
thing you can do is simply print
oops print let her print Lynn c-- dot
fetch all and you know you can both
print out everything and apparently see
how fetch all is empty why would that be
empty when seat fetch all what would
that be empty some explain that one to
me
data equals Rho let's see it data equals
row for row in C dot fetch also that
just makes a list out of that print out
it expected that to work wise yeah what
what data what am I doing wrong here
maybe maybe what's happening is every
time you feet
yeah probably when you fetch all that's
that and there's no more data there so
you might actually have to run the SQL
statement twice so you would say this in
am print Len C dot fetch all hopeless
worse there we go
okay so seven so keep that in mind I
guess I that's some news to me I didn't
know you couldn't reference a fetch all
twice but I usually what I'll do is I'll
say like data equals C dot fetch all
that way data stays populated and C dot
fetch all can do other things and
populate other things so that would that
would save you from having that issue
that I just had but interesting I did
not know that as soon as you referenced
fetch all once that emptied out the
cursor always learning
so anyways um that's one example of how
you could see first of all you can see
where the columns are equal to two so
you can see exactly what you're about to
delete or you could get the amount of
data that you're about to delete so it
with with SQLite that's as good as it
gets
but with if you were using MySQL you
would see okay we have seven rows so you
would delete from stuff to plot where
value equals two and then in MySQL you
would limit that query to seven okay and
then that would keep you as safe as
possible
all right so anyways that's SQLite
SQLite is again just a really light
version of SQL that pretty much covers
the major things you would do with
SQLite but of course there are plenty of
other things you could you could
conceivably do with SQLite but if you
need to be have more options and more
configurations and you want
little more efficiency you would
probably jump into something more like
MySQL but SQLite is more than capable of
running even large databases the real
problem with SQLite is because it's it's
not a server it is a single file the
main kind of choke point for SQLite is
when you have multiple simultaneous
input/output operations happening at any
one time so if you're running a forum
and you've got it like you know 50 users
on it any one time and they are doing
things simultaneously
they may have to wait a little bit
longer to get that information that
their query so they click on my like say
a thread at the same time someone else
clicks on a different thread it's going
to be a little slower to return the
values to that user with something like
SQLite but again even in that case with
like let's say you only have 50 users
online SQLite is more than enough it's
really SQLite doesn't scale to like
millions of users okay so anyways that's
that that's SQLite if you guys have any
questions comments whatever up to this
point feel free to leave them below
otherwise as always thanks for watching
thanks for all the support subscriptions
and until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>