<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cleaning up Tweets: How to use the Twitter API v1.1 with Python to stream tweets | Coder Coacher - Coaching Coders</title><meta content="Cleaning up Tweets: How to use the Twitter API v1.1 with Python to stream tweets - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cleaning up Tweets: How to use the Twitter API v1.1 with Python to stream tweets</b></h2><h5 class="post__date">2013-10-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AtqqVXZ365g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the third Twitter
API version 1.1 tutorial video where we
left off I was showing you guys how to
save the information to either a text
file or the same principles can be used
to a database and but we saw how much
data Twitter actually gives us based on
each tweet so we ran it for I don't even
know maybe a maybe a minute I don't know
how long we ran it for but not very long
in it it was already 1.5 megabytes so as
you can imagine that kind of database
would grow very fast now of course we
could put it in some sort of database
and maybe use some compression or
something like that but really the best
thing that we can do is trim away
unnecessary data so a lot of this data
we don't even need so let's say you know
you might be interested in a lot of
other things but let's just say all you
really want is a date stamp and the
tweets right maybe that's all you really
care about so I'm going to show you guys
at least how you could how you should
trim that kind of data down and
hopefully save you some space in your
database so so now the first thing that
we're going to do is we get the data and
really what we want to do is split up
that data a little bit so that data is
basically the string of that full JSON
now we don't obviously want all that so
what I'm going to do is say tweet equals
data dot split and what we want to split
it by is if we come down here and we see
here we have the created at Bugaboo and
then right here right text and then you
have the actual tweet itself so what
we're going to do is we're just going to
say data dot split and what it will be
split by is a comma and then it's a
double quotes to call this variable text
in the JSON format and then it's a colon
and then it begins again with an open
quotes double quotes and you can do this
because we're encasing it in single
quotes and so that's where it begins so
we can say split by that and then give
us the first element right in that air
like the first element so not though not
give us the left side but give us the
right side of this split subsequently if
we continue hacia let's find where that
text over here and let's see if we can't
get there smoothly okay so the end of
this tweet occurs at a closing quote oh
no I just lost it let's go back maybe I
lost again there's like so much data
here though okay right so the end of it
the tweet is a double quote comma double
quote source in double quotes so we can
use that as a pretty safe splitter now
just as a quick aside the reason why we
wouldn't want to do just like a single
comma and then pick that element is the
actual tweet itself can contain a
comment right that's a form of
punctuation that people will use and
again we'll use that in a little bit
here with our quote unquote CSV will be
kind of silly to save it with commas so
anyway um we'll get there in a second
but then so again we're going to split
now the other side is split by a double
quote comma double quotes source oops
well let's spell it right otherwise that
won't split very well and then we'll
just close that off and then we want
really the left side of that so the zero
with element so now we've got the full
tweet in that variable so the next thing
gets situated here the next thing that
we want to do is instead of print data
let's just print the tweet
since the data there's just so much
there we don't really want that massive
thing right let's just print tweet now
the next thing that we're going to want
to do is we want to save it just like we
had been but instead we want to save
tweet but generally really want like
something else besides just the tweet
right so we might want like a timestamp
and you could put like the
hold date stamp in there but UNIX
timestamp is probably better in my
opinion so anyway we'll say save this
equals string time got time so that just
gives you a UNIX stamp right and then
what we're going to do is plus and then
here I'm going to make our separator a
colon colon like double double colons
right and the idea here is again you
wouldn't want to make it a comma because
it's highly likely that someone is going
to include a comma in their tweet and
you wouldn't even want a single :
because really like when someone does
like at and someone's name it's followed
by a colon a lot so double colon
probably the safest way to handle this
and if you really wanted to be safe like
quadruple colons or something but double
colon is good enough plus I will do
tweet so plus the actual tweet and so
that's the string basically that we were
going to want to save now save file
still going to be open to it well
actually make it twit DB too so it's a
brand new one and now we want to save
our what we want to write is actually
save save this right then a new line and
then we want it to close and that'll be
the loop that we're going to run through
so let's go ahead and save what we got
and let's run it and see if you got any
errors first of all looks like we're
just printing out tweets now oh it's so
much better than what we were doing and
let me pull it up bring this over and as
we can see it's growing at a much slower
rate that's very nice so we can open
this up edit it with notepad and now not
only have we seen now we don't have like
those extra rows just very nice and
clean it's just the tweet we have done
very good so obviously you might want to
you know separate it by other things too
you might want to get the followers
following uh you might want to get there
some of them will have a geo location a
very few accounts are geo enable that
will just warn you but you can get that
too
can get all kinds of stuff obviously you
saw how much data Twitter gives you in
that little stream so you can use that
you can print out the stream figure out
exactly what you want but this is how
you can split it save some space on your
database size and at the time and then
also the double colon is a decent way to
split it up of course if you're saving
to an actual database you don't have to
worry about that either so hopefully
that was helpful to some of you guys as
always thanks for watching thanks for
the support in the subscriptions and
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>