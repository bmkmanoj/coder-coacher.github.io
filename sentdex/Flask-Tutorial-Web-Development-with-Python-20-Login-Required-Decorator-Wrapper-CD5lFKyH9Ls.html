<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Flask Tutorial Web Development with Python 20 - Login Required Decorator Wrapper | Coder Coacher - Coaching Coders</title><meta content="Flask Tutorial Web Development with Python 20 - Login Required Decorator Wrapper - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/sentdex/">sentdex</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Flask Tutorial Web Development with Python 20 - Login Required Decorator Wrapper</b></h2><h5 class="post__date">2015-04-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CD5lFKyH9Ls" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everybody and welcome to part 20 of our
practical Flast tutorial video series in
this video we're going to be talking
about the log-in required decorator so
the first page then might require a
login is a logout page how can you log
out if you are not logged in so that's
what we're going to cover here so first
of all how what is that and how do we
actually even make let's say a login
required decorator what is a decorator
okay so a decorator is basically this
like this @ sign is what notifies python
about or yeah python about a decorator
okay now what is a decorator now a
decorator is a wrapper around a function
generally so what's a wrapper okay well
a wrapper is like like you have Python
wrappers around C and Python wrappers
around Java applications it's basically
something that it's really hard to
describe I suppose but it's a lot like
including a function in a function so
for example let's make our login
required okay so we're going to define
login required and it will inherit from
or the parameter rather is going to be F
4 and F is just for function and then
it's going to add wraps whatever is F
okay so what we'll do now is we'll come
down and we'll define a wrap and wrap
will have args and kwargs and that's
final in our line you add too much to
that and then basically we ask the
question if
if logged in in session return F along
with the args and possible cards and
then else we want to flash you need to
log in first and then since we're this
page requires the user to be logged in
first we'll go ahead and return uh the
read direct for the URL for the login
page ok so what's happening is this is
going to be a wrapper
what's it going to wrap it's going to
wrap the F of the function that it
follows after it then we're going to
define the wrap that's actually
occurring
what is that wrap it is basically going
to ask if logged in so if the user is
logged in so if logged in in session
means if the user is logged in what do
we want to do we want to return F along
with all the args and kwargs
so that's arguments and keyboard
arguments below return F what is F it's
the function we're wrapping so if we are
logged so this is basically it's a it's
a log-in required decorator so what it's
going to do is it will run it wraps the
function the decorator will run first
and if going to ask if logged in we're
going to return whatever the function is
that we're wrapping otherwise you need
to log in first now of course in the LAN
login page you could have an if
statement and you could just ask if
logged in do something else
whoops else return this flash you know
you need to login first but you're going
to see this login required decorator and
it's best you know how it works so now
we have this log-in required decorator
it exists great now what we need to do
is actually
have a page that needs it so we're going
to have a new page now that is going to
be log out so it'll be at epcot root the
root will be log out again this is a
wrapper as well these are wrappers
around the function okay so you can
almost see it as like the extends
template right or we have a header and
the thing that extends okay the wrapper
just goes around it
so anyways at app root is the root is
going to be log out we don't really need
any other parameters define log out log
out we'll have session dot pop and
actually we can just probably get away
with session clear flash you have been
logged out and then whoops and then
we'll run GC collect and then we'll
return the will return redirect and then
the URL for and on this one if the user
logs out let's send them to the main
page side trying to find it where is our
main page home page so we are going to
redirect them to home page when they log
out now to log out you should have a
login required decorator to it so first
let's just test the log out and test all
this other stuff then we'll add that to
it make sure everything else is working
so at least the website works we don't
have a path to log out so we'll just
hand tight blog log out enter and it did
at least log out we didn't get a flash
but we might actually not be passing the
flash to this page I can't remember if
we actually are passing flash to it
anyways so let's see login required log
you should be there though let's do
redirect for the dashboard though just
test so many of these opened my goodness
yeah so the flash was just never
displayed I actually didn't even need to
go to dashboard to find that one out so
anyways we are logged out and now so now
that we're logged out we need to have a
login decorator to read or we don't want
to be able to really log out that
doesn't make any sense so now to add a
login required you can do at login
required okay and then now what that's
going to do is basically stop it from
stopped you from being able to use it if
you're not logged in so and you'll get
the flash message that we sent so let's
go refresh this okay so that okay the
rap ok so this rapper needs to come
first because it's a path so this cannot
wrap around this okay what actually
needs to happen is because there's
basically no path to logout
but anyway so app dot root logout then
login required then the function for
logout that is probably our air strike
again nope still getting an error to
dashboard let's go ahead and I thumb in
a dot pi wraps not defined so we need
wraps and that's going to come from funk
tools I believe yes so let's go up to
the very top uh we're going to from funk
tools we're going to import wraps
yourself a impugn if in point five let's
come back here at login required I see
okay what we forgot here is okay so
define login required F we define the
function of rap but we're not actually
doing anything we've just defined it so
now we need to go ahead and return rap
let's save that let's restart Apache
let's pull up this okay now let's try to
visit logout and it says sure enough
we're not logged in yet it says you need
to login first let's go ahead and login
to anything if you if you don't remember
any login just like register real quick
and then try that anyway so now we're
logged in I don't need to save this
password and then now if I head to
logout that works I'm sent back to the
dashboard after having logged out
normally I would send to the main page
but apparently we're not displaying
flashes there and that's it so now we
can have a logout and also showing you
guys this login required decorator now
of course you don't actually have to
have it be a login at all right you
could also say admin required and then
we need to find your rapper it would be
if admin in session
and then otherwise you know return
whatever now I will just say you might
want to be careful as far as modify or
you know using session too much you
might want to actually incorporate your
own encryption with session probably
won't get into that now but you want to
make sure someone can't just come in and
modify their own session especially if
you've got either really sensitive data
for user accounts basically every time
someone like accesses say some user in
for likes like a security page there
should always be a log
second login like you know even if they
were already logged in if they want to
say change their password you should
require them to enter their old password
first and then like if for changing any
account information same thing or you
any sensitive information same thing
because people can cuz sessions just a
cookie people can fake cookies and all
that kind of stuff and again just like
I'm not an expert in encryption I'm not
an expert in cookies or anything like
that so just keep that in mind that
while this works for basic stuff you
actually might not want to use it for
like an admin or something like that or
if you did you would want to have
something a little more advanced than
just plain text admin in there but
anyways um that's that that's log and
required as far as just requiring the
user to just be logged in this is secure
enough because all we're doing all we
care about is if the user is logged in
we're not really asking if they're an
admin or even a subscriber for that
matter but that is how you could use
wrappers to protect views on in flask so
anyways that's that if you have any
questions or comments please feel free
to leave them below otherwise that as
always thanks for watching things for
all the support and subscriptions until
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>