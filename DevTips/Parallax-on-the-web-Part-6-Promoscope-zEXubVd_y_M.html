<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Parallax on the web Part 6 – Promoscope!! | Coder Coacher - Coaching Coders</title><meta content="Parallax on the web Part 6 – Promoscope!! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DevTips/">DevTips</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Parallax on the web Part 6 – Promoscope!!</b></h2><h5 class="post__date">2015-05-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zEXubVd_y_M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey welcome back you bunch of weirdoes
this video series has just been a
buttload of fun for me thank you for
responding so well to it my name is
Travis Nielsen this is relax on the web
ah
today we're going to revisit an element
that we made a few weeks ago the one
that called periscope we're going to add
a subtle effect to it first we're going
to increase the rate I wish the parallax
occurs why well because mostly I wanted
to see if I could animate the background
position and secondly I thought wouldn't
it be nice to turn this periscope into a
really cool call-to-action in other
words we're going to make it a clickable
link so we're going to create this
effect where as the user Scrolls a
promotional message will appear over the
periscope in this case we're promoting
our follow line of suits they're very
nice and starting at only $99 that's a
good deal
really notice that the fading of the
overlay is not triggered by an event but
it's continuously controlled by the user
scrolling I like that let's get into it
we're going to go down to the periscope
and we are going to fix it up something
nice the first thing we want to do is
accelerate the the movement in the
background right now it's just fixed to
the window right and the circle is
moving up and down over the fixed image
but I want to start sliding the image in
in opposition of this the opening of the
circle itself so firstly let's look at
the markup and see what is contributing
to this to the circle going over this
face guy right here and we scroll all
the way down in the bottom of our index
Jade we can see that this is all just
one div and it may seem like there's a
lot of things going on there but as you
saw in the previous video it's really
simple there's just one did with a
background of attachment fixed and it's
just sliding up and up and down against
this background the background is
attached to the window right and that's
important to note so let's look at the
layout CSS or sass to see how that works
we have a high of 640 and a width of
6:40 as well on this window I'm calling
it a window it's a div that the
border-radius at 50% this right this
purple bit right here is attachment
fixed that's the magic that is how this
is working and what I want to be doing
right now is I want to be moving this so
right here we have position Center and
that's the left and right or at least
the the x axis and 0 pixel for the y
axis it means it's anchored to the top
you could very well just be top right
here but we have 0 pixels and that's
that's good because I want to take the 0
pixels being at being an integer I can
you know add to it which will cause the
appearance of the background shifting
behind the large window and we're going
to do that almost completely with with
JavaScript so let me show you what's up
we're inside of the the scroll function
here and we're going to put a new
conditional statement we're going to say
if W scroll W scroll is defined up here
as basically the scroll position you're
at how far have you scrolled down on the
page so if scroll position is bigger
than the next thing which is going to be
the position of large window so I'll use
a jQuery objective here of large -
window and want to say dot offset dot
top actually offset parenthesis top so
we can see we say if the scroll is
further down than the large window
offset top which means is that basically
is the window interview what will happen
if the scroll position is equal to the
large window offset top well let's uh
let's write a console blog
yo and what we're going to be looking
for here is when a budget yo start
showing up in the console and you see
that it hasn't happened yet even though
the scroll window is present on the
screen it's going to happen when the
scroll window hits the top see that yo
happens and that's a little too late for
what we want to do we want the whole
background position to be happening this
whole time here so this is a little late
so we want to add to this say we want to
take the number of the large window
offset from the top and just remove a
certain other number from it and that
will be basically the height of the
window itself so I'll say window -
height or dot height so now it'll be the
offset top minus the height of the
window so it should be window when the
was this thing called this window what
is this thing called large window oh I'm
getting confused cuz the window is the
document window and also like called the
sting a window okay so our EOS
should start happening when the window
the large window enters the viewport not
when it's at the top of the part
viewport let's scroll down and just
validate that and here there it is okay
it starts yoing right about there
that's exactly right okay so this is the
right position that we wanted to target
what's going to happen when when we
scroll to this position well the first
thing we want to do is again select that
large window and we want to start off
setting its CSS position of CSS property
of background position so all I'll use
jQuery CSS and inside of it I'll say
background position and comma and then
the value of that so remember our CSS
here we said there are our background
position value is center
zero pixels so let's just start with
that Center zero pixels oh I've got an
error here it's not it's not a comma it
supposed to be a colon or yeah
is that better okay now it's happy go
back to my console okay so let's see
when when REO hits or well actually not
one of yo hits when our window hits the
viewport we should have a inline element
or an inline style of zero pixels okay
so that's that's actually doing the
right thing but now we want to take this
where were we here now we but now we
want to take this zero pixels and target
it as something that can be a variable
that while we're scrolling it's going to
start moving so let's remove the put it
in quotes and then put some pluses
around it so that we can input some
variables W scroll is going to be our
active ingredient that's going to be the
thing that we're going to base all of
the action on because that's the thing
that's going to be changing for a
moment-to-moment you know when you're
scrolling so I'll say that the native of
pixels here so I'll say that it's going
to be Center and then W scroll pixels so
however many pixels you scroll down is
however high that's going to be oh and
that's almost exactly what I want that's
almost exactly what I want the problem
here though is that you know I'm looking
at his abdomen when I should be looking
at his face right about right about this
position here and that's because the the
the top of the image is way up there at
the top of the scroll page so if I want
to look at his face when the window is
scrolled to the top of the viewport I
need to reset the W scroll to be equal
to what the the offset top of the large
window is right let me show you what I
mean so I'll remove this many pixels
from the W scroll which is equal to
basically this right here a large window
offset top
so I'll copy that and paste that right
there and save now that's what I wanted
I wanted his face to be like kind of
front and center win and when these when
this periscope gets to the top of the
viewport oh do I have a and let's put
that in parentheses and save okay now
when I scroll this periscope is going to
be at the top of of the viewport and I'm
going to be looking at this gentleman's
face not his abdomen and that's because
I offset the the vertical position of
the background the element and by how
far the the periscope is from the top of
the document right I hope that's not too
complicated but that gives me just the
effect that I wanted let's take this one
step further and I want to add a little
bit more excitement to this periscope by
you know when you scroll into it I want
a promotional message to appear so let's
go back to the markup and we will look
at what the promotional message should
be and I'll nest a div in there called
promo text and we'll say I don't know if
all suits because it's fall Siam fall
right now anyway from $99 it's a good
price
it looks good let's see how that works
out okay so we have the text up here at
the top let's put these all inside of a
large window window tint let's put this
all in like a like a darker background
okay cool so let's head let's head over
to our styles and talk about our window
tint it's going to have a background
color
of like rgba of black and like I don't
know point five opacity and it'll be a
position:absolute top:0 left:0 right:0
bottom zero so what I'm doing there is
I'm stretching I'm just stretching this
window to its parent and because it's
position:absolute Oh actually I need to
set this as position:relative what would
happen if this was not positioned
relative let me show you I don't know oh
there it is it's covering a hundred
percent of the viewport so if I put
relative on on the large window then
that screen that dark tint will be on
top of the the periscope so window tint
and then we have also promo text promo
text I want your color to be white or
white text on black background let's go
back to the window text and it needs to
be needs to be border radius fifty
percent because it's like it was like
making a square on top of my circle
alright I want this text to be kind of
like moved to the center of the
periscope so I'll say display flex I'll
say justify content center and aligned
items Center here we are centered easy
and let's go down to promo color or
promo text and let's change up the font
a little bit let's say font weight is
like 100 nice and slim and
the font size can be big like 50 pixels
or something 50 oh that looks cool I
like how that bold like the from 99 is
bold I like it
so let's go that strong that's inside
there and I actually want it to be on
it's on a new line so I'll say
display:block so it goes down onto its
own line like that and I'll change the
font size so it's less dramatic than the
title of fall suit so font size maybe 30
good good on from to be special
I want it to be less less strong so I'll
put a span around it so I can target it
and strong spin and what do I want from
you to let's say you've font let's take
your weight back down to normal 300 and
your size Thank You smaller so be like
from 99 so the size can be like I don't
know 18 pixels and the style let's put
you italic ooh from any night I like
that that's good let's change your color
to be a little bit less weighty as well
and we can do that by doing RGB a 255
255 that's 295 s5 0.5 0.6 now you're a
transparent white good good good I
really like that I think that all suits
from 99 I think the line height is a
little strong
here we go
that's good and is that what I want to
say Oh should have like a call to action
let's go back to the markup and put an
anchor with a ref this will lead to like
an internal page that will be the fall
suits sale page and I call this like the
window CTA and then I'll have a message
like shop now because it's a CTA shop
now that's a huge link okay so let's go
to here and we'll say let's talk about
this window
CTA well I want it to be like a sexy
little button so let's style a button
font size something like 20 yeah good
and let's get rid of this underline with
text-decoration:none and change the
color from blue of course to that whites
that we linked and let's put a let's see
what it looks like right now cool let's
put a border around it to make it look
like a button border 1 pixel solid white
obvi and then if you're going to put a
border around buttons of course you need
them to have padding so padding maybe
like 5 pixels on the top and bottom and
10 on the left and right that's okay it
could be a little bit more grand though
let's say 10 over 100 to 10 in 20 yeah
like that looks good and then when we
hover over that button which is the call
to action let's have a hover effect and
just something simple so say aunt hover
turn the background to white and make
the color of the text black so basically
basically just reverse it that looks
good but it's a little harsh
little change so we want to say trans
Travis Tran muscle memory a transition
all and it will ease it in about 0.3
seconds and we'll use a ease of ease in
out cool alright let's test it out
alright that's what we want it to look
like this looks good the fall suits
periscope like the overlay that the
promo promo scope the promo scope
overlay is there all the time though so
I can use again our JavaScript to hook
in there and just kind of fade it in as
we scroll and let the user control the
fade because they're going because
they're controlling their finger which
is scrolling so let's go over to
functions and we're going to look how to
do that let's go into this if because
this is going to control this if
statements going to control all the
things that are going to go on to a
large window alright so what we want to
do is use jQuery to select the window
actually the window tint
that's the black container that holds
the the CTA and the promo right there
holds the window tint and CSS and then
really simply because we want to do so
this fading in and out so we're going to
control the property of opacity and its
value will be set by our scroll but
let's say we'll set the value right now
to be 0.3 whatever so now whenever I
scroll it should be 0.3 and that will be
set in line right there so 0.3 right
there perfect
so I want 0.3 to be an integer that's
set as a derivative of the scroll
so let's work out what that will be if
you have our opacity is equal to this
and and this is going to be the then
actually the opacity here alright so now
let's figure out what that opacity is
going to be we know we want it to be we
want to use the active element of the W
scroll and then we have to kind of rein
that in right so basically what we want
to do is is take this wild number of W
scroll and make it a number that's
between 0 and 1 that's our big goal
right now so how are we going to do that
we'll take w scroll and we'll minus it
from minus it from well we'll we'll
remove from it the the window offset so
and do that again this basically this
right here large window offset top and
and then we'll divide it by itself W
scroll we have to put these in parens
one the the subtraction to happen first
before it's divided okay good so what's
happening here is is basically when it
enters it's at negative zero point let's
see okay so what I'm getting is when our
peril periscope hits the top of the
window it's basically at zero and then
as it Scrolls past that it starts
getting a little bit more opaque so we
want to we want to set that to happen
earlier right and we'll do that by
saying like we'll say the offset top
plus like 400 pixels so move that move
that down okay
so that's happening sooner and that's
good we wanted to happen 400 pixels from
the top that's reasonable but it's not
fading in fast enough so let's take this
this number here W scroll and kind of
divide it by something like two to make
it multiply faster it comes in it's not
fast enough let's move it to about five
I like that
alright so it's it's a when it's at the
bottom here it's not showing up at all
and then when it Scrolls up to the top
it becomes opaque and clickable yeah
that'll that that periscope though yeah
what was in that tutorial awesome I felt
like I was getting a back rub from a
magical genie wearing hot pink spandex
singing the theme song for Three's
Company I'm just saying it felt good if
you're enjoying this series I encourage
you to subscribe to this channel that
way you can be notified when the next
video is released
speaking of released videos these people
will receive the videos a full three
days early these are my patrons they
make it possible for me to make all
these videos for free for you guys to
learn more about becoming a patron visit
patreon.com slash dev tips I will see
you next week and until then keep on
hacking</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>