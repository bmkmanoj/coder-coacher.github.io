<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Dynamic text filtering on the client - #11 React JS prototyping | Coder Coacher - Coaching Coders</title><meta content="Dynamic text filtering on the client - #11 React JS prototyping - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DevTips/">DevTips</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Dynamic text filtering on the client - #11 React JS prototyping</b></h2><h5 class="post__date">2018-01-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XZScIWYIkNw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we are going to implement
filtering using autocomplete your
watching
dem tips with guest holes mpj and David
in the last episode we connected our
fate server data to the playlist
components and we map them out here in
our app here now I think it's time for
us to head on to the filter because we
have the filter here here and it would
be really cool to actually make it work
because when I write discover here to
filter out and only say the discover
weekly nothing happens
yep that's fixed exactly that's what
we're gonna do today so the first thing
that hits me is how will this filter
component interact with all these
playlists components like this is a
separate component and these are just
repeated other components I don't see a
connection here do we have to bundle
them up into one big component or is
this some other way to make them talk to
each other yeah they are already bundled
together in one big component which is
the the app component ah yeah yeah we we
have an app component this is the app
component one that contains all our
stuff then we have our filter component
and we have our our playlist components
so now we need a way for these two to
communicate and the trick here is that
we things get very very messy if this
component starts knowing things about
its outside world that's just that's
just a way of introducing way too much
complexity and mess even in a small
application like this so we really
really don't want to do that we want to
keep this component unaware of its
surroundings and we also don't want a
filter component to know anything about
its parents either so what we are going
to do is that we are going to introduce
a filter string state and that is going
to live in the app so the the filter
component it's not gonna have any state
of its own it's just going to
communicate that whenever
we type something inside of this it's
going to dispatch that hey I'm being
typed and and the purse the user is
typing this and that is being
broadcasted up to the app it still
doesn't know anything about that but
just screams it's like a filter tells
the app now this is what the users
written and then it doesn't do anything
else exactly then based on this filter
we are going to change the the playlists
that we are passing into this component
this way the app is doing the actual
filtering and the filter filtering
component is going to be completely
unaware of its surroundings and this is
also going to be completely unaware that
any filtering has happened whatsoever
it's just getting new playlists all
right so should we start with the filter
component actually no I think we're
gonna start with just the the the filter
string State okay so do I do with that
here yeah and I think the keyboard broke
those batteries were okay alright so we
should add that here yep precise to the
object object pre exactly what you call
to filter string filter string that's
yeah empty string start with that yeah
let's do that
and then in the same way that we are
faking the the server data mm-hmm let's
also fake something being typed here in
the step time should I do another yeah
let's do another step time what that
happens a little bit after the fake
server data so after two 32 seconds
yeah let's update the filter string and
let's pretend I wrote weekly yeah that's
good
cool so now when we do that nothing
happens
yes because we have to tell the filter
component to actually output the fifth
string we don't have to tell the the
filter component is not involved yet at
all we are just right now we are faking
what the filter component will
eventually do oh yeah but this so this
the set timeout here that is kind of
that is kind of what is going to happen
when you start typing in the filter box
so this is what happens after that okay
so this is just to say that to automate
that we have it have some kind of state
sets exactly so now we in the we turn
our eyes to the render function on the
app yeah and here we're going to start
filtering the playlists here yeah so
this is the point where we start
introducing another array method filter
instead of map no we add it to like from
the like this exactly but I I'm thinking
before for yeah yeah because we don't
want to render this and then filter out
exactly first we filter this and Shayn
the map onto that precisely so filter is
very similar to map in the sense that it
also accepts one argument which is a
which is a not which is a function so it
will accept except a function that
accepts one argument which is the
playlist mm-hmm so it looks exactly like
map but the difference is that filter
expects this this function this it's
often referred to this function here the
playlist the function that you just
created it's often referred to as the
predicate or the the callback function I
like callback function because it calls
back so do I write some kind of logic
here that if something's true then it's
okay it passes through yes precisely
with just an if or how would
right that you can use the the ternary
operator let's let's actually do the
logic first I think it like if you have
the playlist it has a bit like the
playlist name yeah yeah what what how do
we check for this string if the string
is there sort of like contains I think
that's right yeah does it have it
contains I think we have a contain see
new versions of Java scan like Google a
contains yes includes all includes yeah
okay yep collude and it says there is a
search string yep yeah so it's just it
takes this string and checks if the
search string which is the state yes
stay precisely filter string yep and if
this is true what does it return return
value true if it's found false if it's
not found yeah okay so will this field
to just return this is that everything
it needs the filter only needs to know
true or false yep so we have everything
that we need here actually that was very
easy if it works let's check that out
okay so now the app loads and after two
seconds we pretend that we entered
something ha all right yeah so let's try
with a capital W yeah to see if it finds
it boom yes let's actually fix that so
that you transform the name to lowercase
before you check the filter because it
seems like to lowercase we only look for
the search string that is lowercase does
that mean alright let's save it and see
if it works it won't work no it doesn't
work
this is that like we yeah it's this it's
a it's a filter spring we want both to
be lower case yeah I think so let's just
say that everything each playlist name
should be turned lower case yeah and
then whatever we entered should also be
turned lower case yep say that so first
it loads everything and then it types
weekly with lower case and still it
matches this yeah can you had a line
break there because it's hurting my soul
oh thank you the filter works yeah that
it yeah yeah it's that is it for the the
filtering itself I think no well not
quite because if if you lo if you
refresh yeah if no way it no it is oh
yeah but you have to make connect it to
if I write this the thing is that I
expected it to actually show nothing in
the beginning because the filter is an
empty string but I guess that it any
playlist name technically contains an
empty string oh okay so what you're
saying is that what I mean yeah why does
it show everything first yes exactly I
expected it to do not do that because
but I guess that the we were asking the
F is does the playlist name include the
empty and empty string I need I guess it
does in some way of interpreting that
question hmm should have some kind of
because it would break if you change
this to like a space we have spaces in
all of them oh that's true but let's
just make if you if you do two spaces
then you wouldn't yeah but just like
make a playlist that doesn't have a
space yes then that would be filter out
there alright uh but either way that was
just me anticipating a failure that
didn't happen so but if we haven't
entered a filter string is empty
yeah this is the expectation nothing
should happen because we haven't because
if we start filtering out here and these
will start to disappear yep we would
expect to just clear this and see
everything yes and this is what happens
now
so now let's add so that the filter
understands and updates the app state
yep I think what we're going to do is to
create an an event handler on the filter
on the filter yes
so type something I create a new
property on on filter you can actually
has typed it in the inside the app
component said the F component yeah I
just type filter on filter change or
something yeah on text change yeah
that's fine and this is going to accept
function yeah so I guess that the
argument we can I just call the
arguments it doesn't really matter
text and then you are going to just make
that an arrow function and then you just
call this dot set States and update the
filter string just like you did in the
set timeouts on line 114 like this yes
but that should it should assign that is
next to the filter string so you get
what is happening now yeah we have
created something that doesn't exist
yeah yes this doesn't exist yet and when
I don't understand why this when this
will run but that is know that we are we
are yet to define that yeah but when
that is wrong it will do with this
exactly okay I get it yep so now we have
to create this on the filter component
yeah that's likely so yes to repeat this
is that we are now just like we are
passing in playlist here we are passing
in the data object
and this is a bit different this is the
same but it's different here we are
setting the UM text change property to
this dysfunction here so that's a bit of
a difference now that we are passing in
this aunt exchange function into filter
let's go into filter and actually take
care of that function make use of it
where is it where is here's the filter
okay here we're in the filter component
okay
so again remember that this works
exactly like the playlist props the
difference is that instead of data it's
a function yeah but it should react to
the events being triggered here right
yes somehow yeah so if you have done any
kind of dominate just like Dom
manipulation this would not be a
surprise to you that the input has this
event called unchanged or on key down
hmm I don't remember what it's called so
let's let's begin with that on
I hate w3schools yeah let's lick it
let's do MDNA keyboard events key down
on key down web api's event time yeah
this sounds right all right and this
since we're using react here we can
actually pass an object here okay and we
can pass in an function here
another function a new function that we
create which accepts an event just any
other function yeah it's just an just an
arrow function here mm-hm like that yep
and that I think that the argument is an
event yeah so basically what we're
telling the input tell with now is that
when a key is pressed down we want you
to do this that is what we're doing so
passing a function to on key down and on
kid at the input element will then run
that function
whenever our keys is pressed down and it
will pass an event object to that
function which describes the key input
event that is what's happening so I
think that the the text itself I don't
remember where that is I think it's in
event target let's Google that actually
just throwing something in there how to
get ID yeah no it's I think it is
invaluable air you get input value have
to keep perfect blah blah blah blah Oh
Jake we don't want Jack we're just
instead of a target value we will you
see I get value yeah that's perfect
cool so it returns now it just returns
this it returns and then that is not
particularly useful yeah what we want it
now is to forward this to the the
function that we passed into the filter
oh they're on precisely the whatever
it's called on I gave it a really good
name that I forgot um it was a good name
change exactly like that yeah save it
what happens here now boom won't
exchange is not defined no because it
doesn't it needs to be it doesn't know
where to find that it has to find it
like above it's in the component above
it right yeah exactly we're pressing it
in but it's not just magically gonna
know what um text change it we're
passing it in whenever we do a thing
like a thing like we did with playlists
if we scroll down to something that we
did before how look at how we pass in
the playlist to the hours counter for
instance this state server data user pin
is exactly and look at the attribute
that playlists equal and keep that in
mind mind and look at the
go inside the hours counter and look
what that looks like so here it's
accessible to us to the desktop props
yes that's where it is so that's how we
access things that we pass in to other
components oh so yeah we yeah and
because we added if we wanted to do
something with this function so it's on
the props of the filter component
exactly mm-hmm so we passing functions
around here a bit and that is a very
common pattern in JavaScript so it's
it's a it's a bit mind-boggling at first
but once you get used to it it's very
very very useful okay so it hasn't broke
and yeah this work we think I think it
well-favored no it didn't
perhaps um keydown it's wrong event how
can we see if it's the correct event
perhaps we can just let's go inside of
it let's write a console log or
something inside of on text change do
this so now David here is adding two
curly brackets around the text functions
because I want to do it on several lines
precisely so dot log text and then I
open the console oh we have a lot of
errors no something I did wrong yeah uh
oh you need another curly bracket you
see why oh yeah get it got it let's open
the console
warnings that's just oh hang on let's
reload here yeah I think it actually
gives us a clue here unknown event
handler on Kieran did you mean on key
down I think that this might be one of
the slight differences between react and
and so it wants on key down perhaps
exactly because it's now used because
it's the reason why this is different is
that HTML has one way of specifying
monkey down and JavaScript has is the
same with the class vs. class name they
need to do this is only for to react
whereas they couldn't use the class name
because that's already used in HTML
exactly so this is this is this becomes
ambiguous if you it has how the warnings
here we haven't looked at this should we
know it's just warnings in a real
application developed like if this was
production code you would definitely
care about warning us it's very
important but for a prototype a high
fidelity prototype going after every
single warning and every styling thing
is it's very overkill you're trying to
prove a concept again you're not trying
to build a production up oh it works
yes and but it doesn't work when I
remove it
Oh interesting why not works when I
update with new text so you yes I don't
know why why doesn't it do anything when
you have and this playlist works yes but
if I have a character that doesn't exist
perhaps backspace doesn't count there's
a key don't know do you know what key
down perhaps is a dum dum event that's
success because it hasn't changed yet
what if you change your own key up
Oh does that once I release the key it
should do this stuff exactly because the
that means that you always get like
whatever it was before the typing does
that work
yes Wow weak it works yes it works okay
so a side note here is like you might
notice that we are doing this filtering
completely on on the client in in
client-side JavaScript in a production
application filtering the list might be
very very long so you don't want to push
that to the client all the time and the
filtering might be complicated so
usually filtering is done on the server
in a production application but again we
are building prototype here and then
it's very nice to not be able to not
have to spin up a back-end server and go
into all that mess you can just
prototype it up on the client and that
is fine would you like to do something
some cleaning up here or should we just
commit this stuff we can remove the
consoles yes let's remove that and
perhaps we don't need this filter a
string will mess things up
sorry yeah I should remove yeah we don't
think that cool I think that's it yeah
let's have a look at yet good to get
desktop yeah we changed here to just try
a playlist with mountain space how does
this work if I add up space yeah yeah it
gives me the ones that has there ones
that have space that's technically right
and this one doesn't have it's it's a
bit weird but it's it's not wrong it's
not wrong yeah and we added the on key
up event that calls the on text change
with the target value the actual text
that was inputted yep and we added the
filled string data to the state and here
is all the stuff that we started out
with yeah it seems fine
added filter functionality to the
playlist list
yes commit Bill Frist origin
and now for fun let's just push this to
our production and thats true that's
true
let's do that open the terminal' oh yeah
terminal trick you can just press the up
arrow key to go through your history
oh come on said you have written up up
there they will have it git push Heroku
master yes this is a very special kind
of laziness because often it's the now
it was like right there but often it's
quite far down your history so you just
go like press up up up up up up up up up
up up up up up up up up like to point
where it was a really bad laziness yeah
because I depress your keys - yep
through the history of them actually
typing their command yes and sometimes
also consuming more time than actually
looking it up it's way faster than last
time it is it is still not particularly
fast to be honest but yeah deployments
are usually not fastened let's be honest
they don't particularly need to be all
that fast you should do deployments
every 5 seconds and it's some kind of
magic happening here there are servers
being booted up booted up and I couldn't
do this myself
yes I don't care it doesn't matter I
don't mind and it also comes down to the
prototyping thing in in a production
application where you that you deploy to
a lot and you you have this thing at
work perhaps it's like core to your
business then it makes sense to spend a
lot of time to optimizing the release
process to make sure that you BAM it's
fast but in this case we we don't know
if this application is gonna stick
around there like for like this we this
afternoon
so let's check this out cool now this is
the cashed old app I think and if we're
for sync sorry fresh I don't think it is
I think this is zap I only think I just
think that you have different zoom
levels that is why I don't maybe let's
check this out playlist yes pretty cool
you know one thing I'd like to do what
to update these when we filter here oh
that would be the most awesome thing for
our stakeholder to see that these are
actually being updated all right let's
let me just do that let's do that so
it's also in in these counters we should
also oh no no it's here before we pass
that in right exactly so we just pass
pass in if we just do the filtering at a
higher level and pass the because all of
these are both the playlist counter the
hours counter and our playlist list they
all get just a list of playlists and
then they figure it out based on that
list of playlists or which you could
remove all these and this check and put
it here before yes let's do that so let
playlists yes be a variable yep and it
can start as an empty array I think
because then we can check here or
doesn't matter perhaps no I think we can
just do what you like grab that thing
that you have there the playlist that
know if the filtered playlist the this
thing yeah exactly
this yeah and if we just create a new
variable no sorry I just
rename that playlist variable to
something like playlist to render
yep yep and then you just do that thing
yeah but you and filter the playlist
from the server data yeah yeah yeah
exactly
yeah why did I say that it doesn't we
want and then if we have the serve date
then we just really use that replace all
these yes and remove the filter that's
it these will be placed yes and this
doesn't need the filters who will just
map out exactly that part precisely
all right so go back to the sea
look what our local app because you're
now looking at the oh yeah sorry
no no we are running it like because the
first run hmm the other date that hasn't
been set because it hasn't been loaded
yeah it hasn't been loaded yet so how
would we do that I think that we could
use the ternary operator here actually
and return an empty list of playlists so
we check if the user is set yep if it is
we will do all this stuff yes
um if it's not set yep just return an
empty correct and I'm sure ray that's me
okay see oh oh that's this is magic I
like this yes weakly its but it's
actually not magic it just it's just
very simple we built a very simple
application structure we made sure that
the all the components use the same
contract they all accept like just a
bunch of playlists yeah and that way we
just kept the filtering in one place and
that meant that filtering worked in
every other place because no other part
of the application was concerned with
filtering they were just concerned with
rendering playlists and that is
why that was so simple to do that's cool
so let's commit this change filter also
applies to all that data's yes let's
just push it cool nice I like that
addition I really like that addition any
like how like it demonstrated how how
easy this is to do once you set it up
right okay I just wanted to check what
it did I really like this addition
because it demonstrated the demonstrated
wine rack is very nice to work I think
the reactivity here we don't we don't we
aren't missing much with Dom elements at
all we are changing how the data flows
and the application just an update in
the next video we will add oh off with a
Spotify API yes basically we are adding
Spotify login to our app so that the we
can access the actual Spotify data from
your actual Spotify account join us in
the episode</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>