<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Populating components with data - #9 React JS prototyping | Coder Coacher - Coaching Coders</title><meta content="Populating components with data - #9 React JS prototyping - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DevTips/">DevTips</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Populating components with data - #9 React JS prototyping</b></h2><h5 class="post__date">2017-12-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AYM14nAW5oI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in today's video we're gonna populate
our react.js components with real data
well this is deb tips with yes hosts
David and NP J so in the code we have
these components we have some aggregate
components a filter component and some
playlist components so what I'd like to
do now is that we should do something
with a title we haven't created that
into a component but I would like to add
something here it should be like David's
playlists yeah so you want something
that is more like real data rather than
the hard-coded bits of text that you
have in the HTML so I would like this to
be user named playlist yeah so can I
just do that and we have to just think
one step ahead or somehow like where
would I put that variable yeah so I I
think my recommendation here is that we
just keep a big big object literal that
just represents the data that we get
from the server with like we don't have
a server yet but we we will in before
this the series ends but we just gonna
make like some mock data in that all
right and then when we get to that point
we will replace that with the with the
real deal and hopefully every everything
will work yeah so I can just do
something here data words yeah sure yeah
exactly
let's let's call it that we could call
it just fake data oh yeah
well or perhaps call it fake server data
because data is a problematic name
because everything ever data and perhaps
it has a user yeah and the user has a
name yeah that seems sensible David in
this case yep
let's start that yeah with that so fake
server data that has a field user that
has a name yep and now we ran here and I
said that something is incorrect and I
know what it is fake server data dot
user dot name can I write like that you
can however this is a global object and
it won't really represent the reacts
dialog yeah exactly
in react everything is based around this
thing called State so components have
State and the nice part about react is
that whenever you set the state the
application immediately updates hmm
we're gonna kind of sort of fake
fetching data we look in the react
documentation I look for react lifecycle
or something like that a component
lifecycle let's go with component did
mount okay so just like we were calling
render we will call it a component did
mount exactly so these methods on the
component class render is called
whenever the the component needs
surrender and a component did mount is
called the first time the component is
is loaded and rendered to the Dom okay
so I just type component it mount here
yep cool
see if that just save and see if it
breaks do them right now okay cool
call set state on the component so you
call this which represents the component
and the assets state and here set state
expects an object literal mm-hmm and
that is going to represent the things
that we want to set on the state so in
this state we want to set the server
data
property let's invent that precisely but
an object literal you mean like this yes
and set the server data property of that
to the effects over data super fixer huh
yeah exactly save that looks fine yes
now you go to render and you instead of
accessing the fake server data directly
can we get a line break here it's super
knowing that you want to access the
state so you go this dot state dots
every data and then username exactly why
not
Carol Audrey yeah okay this makes sense
because server data does not exist
before the component has mounted oh yeah
so the state is at the point when it so
it does a render and then it will run
the component did mount but and set the
state but that's too late for us so this
is this is an important important thing
about development this said Google
things a lot youyou don't even though
I've done this a hundred times you just
don't keep this thing these things fresh
in your mind at all points oh you do it
in the constructor the constructor sets
the state okay so we should add a
constructor yep and this start stage yep
like empty object or what is I yeah
let's let's do that actually yeah that
make sense this is not allowed before
super oh yeah
in constructors you have to call super
the first thing you do yeah yeah this is
an object-oriented programming thingy
don't worry too much about it it's just
something that you need to do
yeah and now it basically says that it
had has no name attribute yeah exactly
because the server data is this empty
object and there it's trying to access
the name property of the user but there
is no there's no user object does react
have some cool shorthand for just
checking if that is existing or not
existing again like this is the thing
you tend to think here like Oh react has
something special this is again just
javascript in HTML so you can just write
JavaScript here yeah so in this case you
would just use the + + operator to just
go this state dot server data and and
and then you write this state to server
data again precisely and this is
expecting that when we get so this is
basically checking like does there it's
there's some server data and then if
there is server data fetch the user and
they precise then we can't have the
empty which would it should have just
knodel here or undefined because
otherwise it would say that this exists
because it's all that's true we yeah so
if we save it will still fail right
because server data does exist yeah it's
an empty object but it's still an object
precisely yeah it's it's not it's the
user existence that we want to check for
like that yes and then we should have to
set the user no we don't that is what
this first part yeah of course so you
have to walk through this it it becomes
a bit more obvious if you do a line
break after
ampersands so what the m percents does
is that it takes what's on the left side
of it and if that is true it checks if
what's on the right side of it is also
true or true the-- if it exists so what
happens here is that in the case where
we have a user which is the second time
this it renders it will move move to the
second part of the statement and valuate
that but in the first render it will
find that the first part of the of the
statement which is which is this one
this is full see it's undefined it does
not exist so it stops it never never
passes this one and that is what what
the double ampersand does this is called
if you want to Google this if this
confuses you it's called the boolean
boolean and operator I think now I would
like to do something similar them with
these components how do I do that
all right so because I want to have them
to this should be some kind of number
but we haven't really decided what kind
of number so we should like mock up some
fake server data here as well yes
basically I have if I'm looking at the
detailed spec this says that lists a
number of playlists 54 places so let's
do that let's first create some fake
playlists so are they on the user yeah
you're probably right
I mean we're gonna construct this data
anyway but yeah so here's an array
that's like a bunch of items after each
other
and we're gonna have four items yeah
and each playlist has a name yep so it's
like my favorites
and it has some top songs yeah she's
also a list yep and spec' said top
artists we can just go with songs it
doesn't matter yeah sure
we're changing this as we these
aggregate numbers are they in any way
connected to this yeah they are so we
should add something here as well or do
we need that we don't I to be honest we
don't actually at this point we just
this is just gonna count number of
playlists so we don't actually need any
data in them yet there we go let's go
down and to the application component we
wanted the aggregate aggregate right so
let's pass in we want to invent a
property here except the playlist
attribute here exactly playlists and
then pass in the playlists here
yeah exactly yeah in the same way I did
here I guess yes
how would you indent this like this I
would probably that seems fine it's it's
a matter of taste
so what will happen now is that this
will make the playlist available inside
of the aggregate as a props yeah so if
you go to the aggregate here and you
just change the number here to variable
instead and you just go this top props
about playlist just like did you say on
this user no place yeah because we are
passing this is now the property that
this is gonna break I think because we
are passed we will be like in the first
render on hmm we will be passing in a
something okay yeah n NT playlists so we
do the double ampersand as well we can
do that so if there is a playlists yeah
exactly
then the length is yeah for you know
what to make this double rendering thing
that we have going to make that more
obvious we should use a set timeout to
fake the loading can we do that in the
did component update our
sorry the component the advant so you
wrap this in a set timeout
wrap this in a set time yeah ten seconds
that's a okay cool that's very long five
seconds yeah just I will just run it
yeah but you need to make it a function
set timeouts first argument needs to be
a function like that yeah exactly
all right so it's gonna be five four BAM
yeah because this is not this functions
this yes okay so now we're getting into
some weird javascript quirks here so set
timeout is a handy function in
JavaScript that takes one argument the
second one we can talk about that first
which is a time in milliseconds in this
case we are specifying is specifying
five thousand milliseconds that's five
seconds and once those five seconds have
executed they will execute a function
that they have been passed say timeout
has been passed so here we are passing
it a function that is what we will what
we want to have happen once those five
seconds have passed so after these five
seconds we want this to run precisely
the problem is that while we are outside
of the set timeout this will refer to
the component however when set timeout
is actually executed this is going to
refer to something completely different
because this function is detached from
the component however there is a new
kind of function in in modern JavaScript
that is called the Aral function and the
arrow function if you use it will at the
top
I'm you define the error function it
will lock the did this to be whatever it
was at the time of defining the the
function it works just to say it looks
kind of like normal functions but it
doesn't use the function keyword and
instead just does an arrow like that
exactly and now if I save and run this
it should work
yes for waiting five seconds boom this
is how react works it just automatically
updates you notice here that we just
changed the data we didn't really we
didn't change add and I knew all add
change this Dom element when the data is
updated we just updated the data and
because we have had have done the data
binding stuff that means that it just
automatically rear Enders let's make
that that time a little bit shorter just
one second yeah that's enough for to see
that something will happen these
components here it's not super nice that
they they look kind of weird when the
data is not loaded yeah so perhaps we
should only show them when we actually
have the data yeah so we can do that
with the header first in the aggregate
component no no in the header the
David's playlists here yeah exactly
but wrap that entire thing in JavaScript
what all of this stuff yeah exactly what
do you mean by wrapping it in Java the
curly brackets things alright and then
we just do the move that this state
server data thing if the user exists
check
and then we move place that before the
h1 and you also did the and and
precisely Oh will this work yes
so you mean that this will first run
this JavaScript yep and if there is a
user then it will run the h1 tag
precisely are you sure I am
ah cool I'm gonna try to show you a
simple example of how the boolean and
operator works this is a very basic
programming concept it goes back to C
and it works pretty much the same in all
C based programming languages such as
JavaScript and Java and like a lot of
them let's say that we have a variable
called dog and it's gonna say woof and
let's say that we have a variable called
nothing which we set to null and we are
going to also have a variable called cat
and I'm going to define a new variable
called result and I'm going to show you
what that result is so right now result
is undefined if I set result 2 to dog
it's going to say woof
if I say it set they do cat it's going
to say cat sorry it should say meow
that's better
if I do and and
cat and dog it's going to say woof
because it's going to first see that
okay
cat that exists and then it's going to
continue past the boolean and and it's
gonna move on to dog it will work the
other way as well dog and and
it's gone same yeah if I however say
nothing and capped its going to stop
here it comes it's gonna see that okay
there's nothing in this variable I'm not
gonna proceed here the same thing will
happen if I say let's say that I do cat
and and dog it's gonna say woof but it's
if I do another ampersand because you
can chain these infinitely you and I do
nothing it's actually going to return
nothing because it this is like it
continues after dog since its I've
chained this on here and moves on to
nothing and it will this will stop there
even if I define something else here so
I do cat dot nothing and dog it's still
gonna get stuck on this this nothing so
it's a it's a way of going from left to
right until you like hit something that
is fall see does that make sense
yeah so what is cool here is that we use
this concept that we first check if the
server data has a user and only then do
we print out the h1 tags precisely which
has the user name and the playlist cool
and now we can apply this to the
playlist as well to the aggregates so we
I do like like this if we have the user
yep
we have the user then we can run these
two aggregates yeah will this work that
we will run both I'm pretty sure no wait
here's the thing with react like it has
to be only one tag that it returns so
you can wrap these in a in a dip and it
will work ah cool one cool side benefit
of what we just did is that right now
the aggregate component is checking for
if like it it has a check inside of it
to check if the playlists are no but now
that since we are now checking it before
we are rendering the aggregate component
that case can no longer or happen but
basically here because everything here
is depending on whether we have
playlists or not we should just wrap
everything in this div oh that's a good
idea
so we will just take this part move it
here and take this part and move it here
and in dentist so it makes more sense
so nothing and then after a while
everything pops up which feels more like
I'll like that you're waiting for for
some data to load yeah we can actually
do a loading dialogue now mm-hmm
if you change the double ampersand this
yep to a question mark and then after
the div you do a colon and then I can
output some text I think you can can I
hurt loading yeah
and this could be like an h1 tag or
something like this could be something
else exactly precisely so what happens
here with the but what do you remember
what the question mark operator called
no no I know I know it's called a
ternary operator so often you use it
this I've done before that if we would
put we use here so here we would say
perhaps in this context if there's a cat
yeah we'll say that my favorite cat
otherwise we say something else yeah so
this is like a small it checks if this
exists or if you run the first part
otherwise run this part yeah so if you
change cat to be no I mean the cat
variable change me out to be null yeah
then it's checks for cat cat is nothing
so it's like uh uh go for something else
and we use the ternary operator a lot
react and then because I like it nice
and clean I will just put up this style
thing with that did it wait yeah I will
just I want to have it the default yeah
you can that that will actually work but
why would I do that I just wanted it to
be white yeah exactly
it's like now so I could just yes you
don't need those because you're not not
extending it so yeah cool all right so
let's continue with this yep and should
make the same for the next aggregate it
said 240 hours it will have some kind of
other data but is still related to the
playlists and thus their songs so we
should just add that but how will we
make this one be different from that one
we should this text yeah right or
shouldn't be it shouldn't be one comment
now we can just use a property for that
right yeah but how should you figure out
that you shouldn't say show the number
of playlists first and then the number
of hours all that's true that's true you
know what since it now has logic inside
of it I think that we should make one it
doesn't seem right that these two are
the same type of component yeah they
just look the same but they have
completely different logic so we call
this playlist counter yeah like that yep
and then call this hours yeah counter
should this also get this data through
here I think so I think so because it's
it will be using the same data it will
it will cool and we should call that
latest there
yep just save so that we get like really
get an error because you called
something else wrong yeah ours counter
is not defined we need to create an
hours counter for our
cool because it's doing the length yeah
it's using the length but we will when
we start adding things up because we
don't have all the data everything in
the data here we fix that but we can
actually do that now it's not too
complicated we just just right now songs
or Springs yeah
but yes let's change them to be object
literals with a name property and a
duration property this will be seconds
yeah okay cool
and the hours
should we do where would we do with the
math here in the renderer or somewhere
else I think we can do it in the render
okay so we basically we could remove
this thing the yeah for the like let's
remove these playlists check because the
playlist is actually guaranteed to be to
be true here like it's guaranteed to
exist
we don't render the playlist counter or
the hours counter without it existing so
this has this but we could put another
put another variable here yeah yeah so I
think we need to create a new variable
we need to create a sum of total
duration yeah precisely let's total
duration be something yeah I'm thinking
that we do reduce exactly this is
definitely a good example of reduce
right now there is like every playlist
has a list of songs so it seems it's
gonna be easier if you first create a
list of all the songs let's just create
a new variable first called all songs
and let's call playlists of this props
playlists and then we're gonna reduce
that alright so here now you're gonna
learn an advanced functional programming
concept called reduce what reduce does
is that it reduces something to a single
value so in this case we want to reduce
the playlists to a list of songs okay it
takes two arguments the first argument
that it's let's define the second
argument first actually it's not parents
and the it's gonna be like the initial
state of the reduce and empty lists
precisely so we're gonna start with an
empty list and then we're as we go
through the playlist we're
gonna take all of those items and throw
them into this this this array the new
array of songs that we are creating and
then finally return it and that will end
up in the old songs variable it takes a
function should I write the arrow stuff
or should I just it doesn't matter in
this case but let's continue with the
arrow functions yeah so the first
argument to reduce is the it's the array
that we are the the object that that we
are reducing to the
I don't know what's hard it array or I'm
not sure what exactly to call it
sometimes you just the in examples you
tend to just call it refer to it as the
accumulator
which is it like a very general term
okay the thing that we're building
approach really yeah perhaps we just
call it songs songs yeah and then the
second second argument is like each
playlist because this function that we
are creating here it's it's going to run
for every playlist so here we are going
we want the reduce operation to return
the the modified songs after this level
iteration that's right return yeah
so something from each playlist
precisely the songs from each place
precisely and now we want to combine
that with the way the songs array that
we are building oh yeah so I don't
remember that come on I think it's clone
cat so song start con cat
like that I think so so we have this
array songs that starts out as nothing
yep and then we add each playlist songs
to that so first it will be their first
three songs yeah first three songs and
then we'll add these three songs and
then to add these three songs yes cetera
and that should that should be it
I think so so let's just see if we for
it to check all songs dot length which
just see how many songs are that sure
and this one we can so it says 12 hours
but it's actually 12 songs yes we are
not done yet but we have figured out
that how to get all the songs in one
list yeah and the total duration will be
we'll do the same thing but with the
duration right yeah if you feel like
this we're gonna do one more reduce if
you don't if you feel like after this
reduce thing that you still haven't
grasped it and that's okay you can
actually I have a video on reduce that
you can check out by clicking here on my
on my other channel which might make it
easier for you this time the first
argument is actually the Sun the Sun
yeah and its each song yeah and we also
start out at zero yes so and then we
will return the sum yeah and to that we
will add the current the each songs
duration yep and let's just make sure
that it's and it's numbers yep and then
I added that to the total duration hours
yep because some now it would be in
seconds yep no it's gonna be some very
long number yep can I just divide it
here by 16 you can to make it into hours
oh and I will use this math dot floor
around
yeah to just round it off and remove all
the decimals I don't really care about
yeah man that's that lot of music yeah
exactly
in just four playlists yep yep let's
commit this to get how starter and added
data added fake server date to title and
aggregate counters cool and then we
commit that part yeah and then we just
push it to github yes and it's pushed
yeah so now you can perhaps you can show
how you get access to this again yeah go
to github.com /tj better playlists drive
bomb and if we click the commits there
lower this the commits yeah here we see
that we added this right yeah and it fix
every data to tackle on aggregate
counters then you can see that change
right there it's all the time all the
stuff and damn that we changed from
aggregate hours counter all this stuff
in the next episode we will continue
filling out the playlist data and attach
it to the playlist components I can do
that I can go here click here continue
do it now</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>