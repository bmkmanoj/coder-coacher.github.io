<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Login Script (19) | Coder Coacher - Coaching Coders</title><meta content="PHP Login Script (19) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Login Script (19)</b></h2><h5 class="post__date">2011-03-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5X8E7XfYMJ8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up guys and or ladies we're
gonna do a log and script here and first
thing I'm at my website dream.com slash
lab and go to the open source area and
you're gonna download website template
and you can do whatever you want with
this it's just so we can save time and
make your life easier okay and I have
mine right here okay and I'm just gonna
pop this on my desktop and we're gonna
use PHP for login script so we need to
go to our working directory like on our
hard drive where we have WAMP setup or
whatever and I think I'll put mine in
sandbox okay and I'm just gonna drag
this over here and f2 and I'm gonna just
go and call this login okay and inside
of here we have just some simple stuff
I'm gonna rename this to dot PHP save
okay and make sure it works I'm going to
go to sandbox login okay and this is
just a template so let's get started in
index dot PHP we got a bunch of stuff
here what we can do is kind of clean
some of this up I'm just gonna leave the
form example there and I guess I'll just
delete the rest okay so I just have this
I'll refresh their field so this one's
going to be the login and this one's
going to be the password and we want to
give our forms a name so that we can
call them from the post you'll see what
I mean
so name equals logon
and this for the password I'm gonna type
equals password and what that does is it
hides two letters you're typing and for
the name I'll do password okay and
refresh and we have login and password
we need to give this form an action and
action action will be login dot PHP so
when they hit submit it's gonna go to
login dot PHP okay and the method is
going to be post we're going to post
these input fields into login dot PHP
okay and I'll refresh submit and there's
no login.php yet so I'm gonna create a
new file and first I'm going to post
login I'll call this login equals post
login and password equals post password
that might confuse you this is how you
type it on linux pa sswd
okay I'll save this as login dot PHP
this is pretty much all procedural code
very easy we don't need to get to object
oriented crazy and what we need to do is
talk to the database for a login and
password what I'm gonna do is use a
library I'll just go back to my site
dream.com lab and open source and I'm
gonna get the MySQL Ike last it's just
really easy to use copy all that stuff
and I'll make a new file and paste that
in there and lastly I'm gonna save it
and I like to separate my libraries from
the regular client-side pages so I'm
gonna make a new folder and I'll just
call this libs short for library and
I'll call this my sqli class PHP you can
call it whatever you want because this
is a reusable object and yeah that looks
good I'll close that so what we need to
do is require libs slash my sqli dot
class dot PHP okay and we need to have a
way to connect over and over so what
we're probably gonna want to do is
create a config file and you'll see what
why I'm doing this in a minute so this
is going to be the config file okay and
I'll save this as config dot PHP let me
open up my sqli class off one second
okay and down here I gave you some
sample usages so I'm just copying that
and pasting this into config select all
this hold shift and press tab okay and
my hosts will be local host user routes
and the table I'll just call it logon
okay
and basically what we're doing is on
every page we want to be able to
configure an array and this just holds
your database info and yes we have to
create a database but now that we have
this config file what we'll do is
instead of having to reinstate the
database every time like if you want to
connect to the database here and then
another page we can just use the DB
variable okay and by doing that we just
do require config dot PHP okay and in
config dot PHP don't forget to include
the database object okay so back here we
now have our database object and we're
just going to do a query and what I'm
going to do is say select I'll just do
it real simple first I'll just say
select ID from users where login equals
login and password equals password and
I'm gonna type this out so it's easier
to read I really like tabbing this
because it's nice sort of skim through
oops users where login oops my dogs
outside barking Oh be quiet
all right and we have to put little
quotes around these quote and quote
quote okay looks good so we have to
create a database and remember I called
mine loggin so I'll just go up here and
I'll go to local host PHP myadmin
if you don't have PHP myadmin you can do
this through the console if you want I'm
just doing this because probably most
people are familiar with it and we call
this login okay and we're gonna create a
table called users and I'm gonna give
them five fields for the first field I'm
gonna give this an ID with an integer
value of 11 and this is the primary key
if you don't know a lot about SQL I got
a lot of tutorials on these and I'm just
gonna tab over and the index primary AI
means auto increment so every time we
insert it's going to go count up so that
the ID for each user is unique you might
say oh I don't want an ID can I just put
in a name you could but then if the user
ever changed their name then it could
mess up a whole lot of things in your
application so let's make a login field
this will be a VAR character and I only
want this to be like up to 20 long and
for the password field also of our
character I'm gonna do 40 the reason I'm
doing 40 is because we're going to do
sha-1 encryption meaning if someone were
to hack your database you know it's
possible they won't be able to just read
all these passwords and you yourself
won't be able to hack your own users if
you wanted to for some reason it's just
good to do and we can put one end called
email like maybe if you wanted to do
that at some point and 50 those can get
kind of long lastly how about created
and date/time
and I'll save that okay
ID login password email created we're
pretty much gonna mess with these three
and we're gonna want to insert a guy so
login I'll do Jessie and for the
password
this has to be sha-1 okay so if you go
to your PHP let's just say index dot PHP
okay and this is it right here
and we're just going to put in some
little PHP tags PHP and let's say
password equals Jesse okay that's what
I'll use for my password
and I'm gonna do the sha-1 function
password and I'll echo that out so
refresh and I get this which is 40
characters long okay if you didn't
understand this go back all you have to
do you could even just do this type in
the password like that and we'll get the
same thing the reason to do this is
because we're setting up the first user
so it's kind of necessary and I'll press
go out of range column probably doesn't
matter just nothing for the date okay
so now we have our login and our
password and let's go back to login and
we're selecting the ID but what I want
to do is select how many users there are
that match to these conditions how many
users have this exact login and this
exact password
okay and what I'm going to do is select
count
I D as total again I have my skill
tutorials if you want to learn some of
this and we're just counting the how
many IDs there are of this there really
should only be one and what we're gonna
do is DB get total and will echo that
out to see how many they are okay and
one thing you're gonna notice is that
we're not passing in the encrypted
password okay so let me refresh an
algaecide test test and select star from
someplace there's a problem did this not
save login dot PHP problem with SQL
select star from someplace what did I do
here I can go ahead and erase that I'll
log in that PHP login dot PHP these are
both in the sandbox that's odd
select count IDs total from users I'm
gonna pause the video one second okay I
accidentally left a query in the config
file okay and right here we can get rid
of that save close and let's go back and
try that again the test test undefined
variable DB oops let's go back and see
what we had config oh I did a lowercase
D be sorry so DB D be a little
embarrassing no big deal and refresh and
we'll get zero meaning there's no
matches and look I was saying I like all
the password that I typed you see I
typed in test but that's not safe data
so we want to do sha-1 on password
so we'll do sha-1 and save and I'll
refresh let me go back I forgot to echo
that out so I'll do test and test and
here's the sha-1 it's a different sha-1
krypton hash but you see it's gonna have
to match up with this security is
important so this all looks good so far
let's try Jessie Jessie login and sorry
I'm echoing that out but the last number
is a 1 meaning there's a match so I'll
get rid of this refresh that once more
and it means there's a match so when
there's a match we want the user to log
in and what I'm gonna do is say result
equals DB yet total and if result equals
1 log them in else back to entrance ok
and now on my database I already have
some stuff that MySQL escapes the
strings but you may want to sanitize
this stuff you know there's a lot of
other tutorials I got that you could
watch about sanitize filtering and all
that we won't get into that is it just
so you understand how to log in so if
the result is good we want them to go
someplace where they're logged in so
let's make a new page and I'm gonna copy
this index page K and I'm gonna save
this as
logged in dot PHP
welcome logged in ok and we have a
logged in page and we want to protect
this page from being accessed from the
outside so what I would do is put some
PHP at the top and we're going to check
a session ok and you always have to
start with session start and you might
say well well you might not realize this
but we're gonna put sessions start in
config so I'll open config and I will do
sessions start ok just so we have a
session to work with and we'll say
session user logon the session is logged
you don't have to do these exactly the
same but we're just checking that the
user logon is set in the session and
that their they are logged and we're
gonna post these in the login ok so if
the result is good the user login is
going to equal his log is going to be
one and the user login will actually be
the account ID is total and we also want
to select the login
DB get logon I hope that works I'm gonna
try to echo that out echo refresh it
looks like I can't do that with the same
one so I'll just do a get and this will
look a little bit different so result
zero total let me make sure this works
okay we'll get one okay we're just
getting a multi-dimensional array and if
you really want to see what that looks
like you could do print our results or
refresh and you see we have a main array
and then we have a sub array and we're
doing array 0 and then the name of it
okay that might look confusing but hey
that's life man so I'll just replace
this here okay so if the result total is
1 and we're gonna set the session and
we're also going to get the username and
I'll call this logon you see we're
selecting the total and the login name
okay and then we're going to do a header
location - logged in PHP and we're going
to do exit so that nothing else happens
just in case you never know and for this
if they fail we're going to send them
back to the index page index dot PHP
okay
and so these are being set so how about
we go up here and we say if is not set
session user login and is not set
session is logged then we'll do header
location index dot PHP and exit so that
should be good
parse error on login 9 and 18
oops semicolon refresh ok and you see if
we fail it keeps taking us back here and
if I do Jessie or let's try to go to
logged in PHP and it won't let me it
takes me back here and what if I do
Jessie Jessie submit and that should
have worked if result total equals one
header location logged in session if is
not set if is not set is our J esse well
I guess I'm gonna have to die and see
what's happening
print our result echo free so let's see
okay so we have total and login that
looks correct and that is correct
we set the session good and the header
location goes to logged in dot PHP user
login and is logged oh we forgot to
include the config oh that's so
embarrassing so there's no session being
start here we just got to require config
dot PHP oops
what did I do oops this is so
embarrassing
logged in and include that okay so
refresh and logged in welcome let's
create a logout script if we're logged
in if we're just going to make a link
and we'll do question mark logout okay
and this is going to go on to logged in
question logout page so it's gonna look
like this like that and we want that to
do something to log us out so I'll say
if is that well we could do get get
logout
then we're going to do session destroy'
and I think that might be good you can
sometimes unset your session stuff if we
really wanted to we could say session is
logged equals zero and the other one
unset maybe we just want to unset these
okay and refresh and we're gonna want to
go to the index page but that's gonna do
it automatically for us because when we
unset this we're not supposed to be here
but this should be before the checking
of the header here so and the reason is
when we click logout it's going to
destroy the session and then it's gonna
check if the sessions there okay so
let's go ahead and click log out log out
and it didn't do it as desirable as we
wanted so I'll just do a header location
once again and sorry for the long
tutorial Jessie Jessie logout looks good
and that's a very basic way to log in
and log out and I think that will
suffice for now I'll just call this
login script and I'll put this up on my
website if you guys don't want to fill
it all out and try to learn from some of
the code thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>