<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP: OOP / OOD (28) | Necessary Composition | Coder Coacher - Coaching Coders</title><meta content="PHP: OOP / OOD (28) | Necessary Composition - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP: OOP / OOD (28) | Necessary Composition</b></h2><h5 class="post__date">2010-12-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xTodw8m7OUY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey youtubers in this tutorial I've
called this necessary composition okay
in our last tutorial I talked about
composition and decoupling but sometimes
it's necessary to create a object within
an object and that's what I'm going to
show you in this example just disregard
all this stuff down here for right now
I'll go over that in a minute
and it's also said that you should
favour composition over inheritance
which means you can usually get a better
result when you create a new object
within an object rather than extending
it because when you extend something it
can get a large hierarchy so anyways I
just have a folder here and I have a
player class the index page or the
client area which is right here and the
action class which doesn't do anything
right now so if I have my player class
here what I just did was when we
construct that we're gonna say the
player was created and if our player had
a bunch of actions he could do you might
run into this where you get a bunch of
if statements or it could even be a
switch and when you have something like
this it's sometimes a good indication
that you need to create a dedicated
class to that and you know I wouldn't
create a class for attack defend dodge
I'd create a class for action and what I
did here was the type would be you know
what they're doing and string to lower
that just in case they had like a
capital A in the client area and the
damage we typecast this to an integer so
over in the index file I've just
included these and let's go ahead and
create a new player so player equals new
player ok and I've already run the
action Dodge of 50
I can do another one and say player
action attack whoops of 500 and I'll do
one more that doesn't exist action barf
200 okay and over here I'll refresh and
you see we have player created and then
the action we did the Dodge so said
attempting to dodge and then it also
said attacking for 500 from the attack
right here and also an unknown action
call so the point in this is you know it
probably be a good idea to take in this
case and create a separate actions class
which I did and I've created an action
to function and I'm just going to delete
all this okay and what it's doing is
it's going to create the new action
object right here okay
and then it's going to go into the
action and it's going to load a method
of the type we declare and we have to
define this first so one thing that
you're going to want to do and this is
very important is in the construct type
player and assign a variable to the
player object this means that the action
can only be constructed from within the
player okay so that if you include this
someplace else at any time you don't use
it for something you're not supposed to
so this forces it in there and let's do
some functions so I'll say public
function attack and the damage and I'll
just say echo actually we're going to
return it return you attack for dmg okay
and I'll create a couple of these
now these would have their own actual
formulism so defend flee and dodge okay
so you you dodge for damage divided by
five you escaped and took some damage
okay flee it's up to you what you would
do with the variable and what would
happen because you know in a game
there'd be a lot of things that could
happen so you defended no it's not not
perfectly realistic okay and lastly we
would want to do a call function and
I'll show you one moment so let's go
back to our index client area our action
we do a type in damage it goes into
action and we pass this into it which is
this player object okay because it has
to be constructed with player object and
we're not really using the P you just
have to define that and then we run the
action the type and up here in this case
that would be Dodge and then the damage
would be 50 so it calls a function and
then in the function it puts damage you
have to put these curly brackets around
it so let's go ahead and do that
let's hit refresh all right so we got a
couple of them player created action
called from player and actually called
from player that just means that the
class was successfully constructed I'm
gonna actually echo some BR so that this
is easier to read
boom okay
refresh so created our player in our
index file and we called the action
which actually creates the action object
and then we run the action through the
player but it's really going through the
action and you can see all this stuff so
with the undefined function I do a magic
method called call it's a public
function call and say method and I'll
just put Arg and for this I'd prior just
throw new exception invalid method
method just something like that
so I'll refresh and there's a new
exception good and realistically we
might want to do it like this where we
do try
whoopsy daisies I'm try and then we
would catch exception II and we would
echo II get message okay and refresh and
it'll say invalid method okay and that
just ties them a little bit of exception
catching in our class so you see this is
a lot cleaner and easier to work with
than a bunch of if and switch statements
because if we had a bunch of logic that
calculated the damage they take and
what's going to happen it's going to get
really messy in all those little ifs so
now I will note you could also put
attack defend and all those functions in
here but that that's not very
intelligent because a player should be
able to do more than that like rather
than just all these actions he should be
able to change his account settings
stuff like that show his profile so if
you can imagine these would have a lot
more calculations in them and everything
so in our index file this is actually
fairly intelligent if I went to the ood
folder what I would do so that I knew
action was dependent on player I would
either make a new folder and call this
player and I put action inside of it
okay like that so player has a folder
and anything player uses is going to be
in here alternatively oh how did I let
me get that back all right alternatively
I call it player underscore action now I
haven't talked about namespaces really
but if we did it like this and we're
going to create a new
player action and we're going to include
a player action with a simple thing like
this it's logical so that we know action
is always with player so I hope this
tutorial helped
and try to make sense of it thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>