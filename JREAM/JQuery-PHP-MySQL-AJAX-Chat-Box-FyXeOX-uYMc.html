<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JQuery + PHP + MySQL- AJAX Chat Box | Coder Coacher - Coaching Coders</title><meta content="JQuery + PHP + MySQL- AJAX Chat Box - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JQuery + PHP + MySQL- AJAX Chat Box</b></h2><h5 class="post__date">2010-12-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FyXeOX-uYMc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm ready hey guys it's 3:00 a.m. and
I'm going to try to make a tutorial this
one would be PHP Ajax in MySQL and we're
going to start from scratch so I'm just
going to make a new folder or actually I
have to do it in my host directory so
I'll just do it in workspace and I'm
going to make a new folder and I'll call
this chat we're gonna make a little chat
program so go in here let's make a new
index dot PHP and I'm just going to copy
paste this and I'm going to call this
Ajax post PHP and you're going to want
to grab a copy of jQuery I already have
one right here just go to jQuery calm
and pop it into your folder we're not
going to be too picky about certain
stuff right now and I'm going to open
heidi SQL you can open PHP myadmin if
you want and we're going to create a
database in PHP myadmin you would click
the SQL tab and we're going to create a
table and the database so create
database um I'll call it messages and
execute good
and let me press f5 to refresh okay and
then let's do use messages and create
table messages that's kind of confusing
all right no big deal
and we'll do ID and 11 Auto increment
let's do not null not null and this will
just say message of var character 255
and not null and primary key will be ID
and execute and refresh make sure that
looks good okay cool you might be saying
well why are you typing this out the
query and that's because it's good
practice and it'd be good for you to do
so let's open up index.php and in this
I'm going to make my HTML stuff
embody
okay and we're going to make a little
form for Ajax messages so the first
thing I'm going to do is - div ID equals
messages and this is where they're going
to display I'll put a comment here and
down here is where they're going to be
posting it now this isn't like a super
detailed one but it's going to give you
the idea of how you can do it and I'm
going to make a little form and say
message labels and input type equals
text max length equals 255 and the name
will be whatever we named our field and
I believe that was message was it
messages the table name messages okay
and up at the top you can pop in a title
if you want I'll just call my chat and
then let's include jQuery and do script
SRC equals jQuery GA s and then we'll do
some script tags and the document dot
ready if I'm going too fast I'm sorry I
have a lot of tutorials on how to do all
kinds of these categories
the function alert one alright so we're
kind of decently started here I'm going
to open up Google Chrome and go to
workspace okay that's not it I put mine
under a folder called chat there it is
okay cool so the first thing we're going
to want to do is load the messages I'm
going to put a couple sample ones in
here I'm just going to do insert into
messages IDs automatic and then message
values let's just say yeah
I'll just put into messages and execute
make sure that's good
refresh it okay so first what we want to
do is load our messages into this a div
container so I'm going to say messages
dot load and the URL is going to be a
Jack's load PHP and I'll go ahead and
create that so we have one for posting
and loading I'll just copy paste this
and call this Ajax load okay
and I'm going to make this a form by the
way just call this form ID equals on
both and I'm a little pickier there we
go
and we're also going to have one for the
post submit so we'll say post dot submit
function and we want to return false
because when they click the form we
don't want it to actually do anything oh
sorry I need a submit button all right
get rid of this and submit and value
equals postmessage okay and go ahead and
refresh and doesn't do anything now if
you remove the return false I'll comment
it out refresh it will you see it
refreshes the page and passes that URL
value we don't want that because we're
trying to do it through Ajax and with it
on when you click it it doesn't do that
if I get rid of this see so in um let's
see Ajax load will open this up and
we're going to do some PHP and what we
need to do is connect to MySQL now to
make things easier I already have a
class that I use time-to-time dream.com
and lab and go to open source and i'm
just going to use this my sqli class
because it's just real easy saves me a
lot of time and i'm just going to create
a new text document with it and call it
mysql i dot class
all right so this is looking a little
busy that's all right you know you can
organize that how you want I just want
to get this done so I'll paste this in
here good and in my little config here
you can just copy this paste it there
and copy this paste it here and host my
host is all this stuff no password and
our table was messages table this should
actually be called database I believe
now it appears
it's correct but I kind of messed up on
the naming so I'm just going to do
select star from messages okay
this is just a simple database query DB
ket and let's see if we get anything
refresh class DB could not be found we
need to include and all right
refresh good we get an array so with the
get what we're going to do is echo out
the results of it so let's just call it
data and I'm going to print our data so
I can see what we're working with
all right it's kind of hard to read so
I'm gonna echo pre there we go
so we're dealing with an array with a
numeric value and I just want to get the
message pretty much so I'm going to do a
for each loop through the data so I'll
say for each data as key value
and I'm going to echo key-value see what
we get
0 or a 1 so we want to work with value
and message there we go I'm going to do
a dot BR okay so here's the Ajax loaded
stuff and for the message we're going to
kind of do the same thing
however this really shouldn't be inside
of the Ajax load we should have a
configuration file so we don't have to
load the database in two different
places so I'll make a new text document
just call this config dot PHP and we can
close this the actual class I'm just
going to take all of these and pop it
into here ok and then we'll have this
little database variable to work with
and we are going to actually copy this
also so we just paste it there or
something and instead of including this
will just include config and refresh
make sure it works
good and that when we go to the Ajax
post we also just include config now you
might be saying why aren't you really
doing much kooky or you know whatever
you know this is a very small example
application it's it's okay to do
procedural code just so you know it
doesn't always have to be
object-oriented anyways let's work on
the post so when they submit what we
want to do is a dot post
and we're going to post the Heidi of
post kind of confusing and what I want
to do is serialize the message easier to
pick now let's just pass it in okay so
in these little brackets less type bomb
message is
actually serializing will be a lot
easier than doing this serialized post
and we'll do a callback function
okay now this I'm sorry this looks
really confusing how we have a post ID
let me rename this sorry I'll call this
user area because it might confuse you
with the other Ajax stuff okay and I'm
going to alert data
now this isn't undoing thing yet because
we have to go to the post that it's
posting in but I am really tired we have
to post it to Ajax post PHP and let's do
print our of post we enclose a config
and we can close Ajax load so we're
including the configured Ajax post looks
good
and we're a post here serialized this
data alert data let's see what happens
oh shoot we must have an error in our
thing well this is embarrassing I did
this serialize Ron I'm thinking in PHP
and jQuery we have to do first we have
to grab the user area and then do
serialize I think that looks right
refresh and let's see what we get
all right cool and we're only posting
messages so over in here I'm going to do
post messages
and let's just make sure we're getting a
result refresh and there's the message
all right looks good so this will be the
message equals post message and we're
going to insert this into the database
so remember we have the DB thing
available from the config file and I'm
going to do DB query of insert into
messages boy I guess message wait a
second
I don't make any sense today values of
message let me pause the video and check
this a second I'm really sleepy okay
yeah I think this is right I'm just
really confusing myself by naming the
table and the column messages let me
just test this puppy out
problem with query insert into messages
messages let me go back to the database
so oh it's not plural so the table name
is messages and this is called message
the hope man should have thought that
out better
okay I'll refresh this and
problem with insert into messages
message let's check the MySQL class real
quick okay we have real escape on and I
suppose I might just have to add some
quotes okay okay so I'm assuming that
might be good
there it is shows up on the list cool
and we can take the alert off and what
we want to do with the data is pop it
into this field so let's see we have div
ID messages and let's see how they're
being listed again view page source
whoops
view page source and all their dynamic
it's not going to show in the view
source how embarrassing all right let's
see over in the messages area how's the
Ajax load that's what we're looking for
okay I guess I'll just wrap this in a
div tag so I'll echo div
dot value and div whoops got it and that
div and just for fun I'm going to add a
style equals on border left of one pixel
solid green you say why just so I can
see the box there we go so I know that
it's actually there for whatever reason
so with the data we're working what they
did so we go to the messages so I'll say
messages dot append and I want to append
what we're doing in to load section like
this now obviously it's a stupid idea to
really have this here you probably use a
class so I'm just going to copy this put
it in the appendicular uses pluses
instead of that and we'll say data + div
and get rid of that okay and it has to
echo the thing that posted so we want to
do echo message
let me save this refresh oops
what did I do Tess I broke something let
me just check messages that offend give
I'll comments I'll just make sure it
works okay it works but I type something
wrong here
messages dot append I guess I'll just
try data
okay that's working it's something to do
with the way I wrote it
I want to append div plus data and then
end the div tag okay
well that works and you know obviously
you're going to want to do a little more
security on the post maybe so they can't
be spammed you know give it a little
timeout or something real quick I'll
make one to delete it as well and to do
that
remember these are being loaded through
Ajax so it's not going to appear on the
view source and where it's displayed
what I'm going to do is just add a
little thing and cause a ID equals
delete or how about a class equals
delete
say delete let's refresh that okay so we
have a anchor refresh that okay and it
doesn't do anything yet so we need to
pass the ID and because when we delete
in MySQL we do it we say um delete from
messages where ID equals whatever it is
so we're going to grab the value of
message and I'm just going to give this
a RAL our AL rel equals
i d-- and i'll refresh that now thing is
that you're going to notice it's tricky
if you put the audio Michalek jQuery
code in the index file it's not going to
apply to this you'll see what I mean
I'll go ahead and do what do we call
that delete dot delete click function
and let's just try to do an alert
refresh and you see it doesn't work
because this is a dynamically loaded
file so we actually have to put this
inside of the load area and to do that
I'll just do it up here well I might as
well just copy the stuff here script
there and I will paste it here and I can
dump all this stuff here and oh did I
delete it there we go sorry about the
mess out of this video starting to get a
little long let's refresh and delete
there we go so we have to work with
jQuery within the loaded element and
what I'm also going to do is get the
arielle attribute so we'll say this dot
attribute route
I'm going to call that a and alert a
let's see four three cool
next we're just going to post and use
that to delete so go ahead and do post
to Ajax delete dot PHP now I just want
to say you could combine all these Ajax
files into one organized thing have
mercy on me guys just have mercy
okay I'm a little slow today so I'm
going to make a copy of this and call it
a jacks
um delete okay and I'll just delete all
this crap in here just have mercy guys
I'll delete this too
okay Ajax delete and we will do Oh what
is it I D is going to be a well we could
call this ID there if we put var in
front of that might make you happier
okay and then we'll do a callback
function
and we just want to alert the data but
don't forget to put data in there okay
so refresh and we need to actually make
it delete something so we're going to
post the ID as you can see the ID right
here it's going to give us the actual
value in there and now we're going to
delete from messages where ID equals ID
and I'll back to close
delete from messages what do we have in
posts
I think it's messages okay refresh let's
see what happens
delete undefined variable message oh
that is so embarrassing okay we're going
to assume it's good but you could do a
status check of if this query was
successful let me see if I have that in
this very basic class yeah I didn't set
up a result thing in here or did I or an
error check and so I'm just going to
leave it like this for now but normally
you'd say if you know this DB query is
good then we'll do something however I'm
just going to assume it's good because
it's a very simple delete command and
what we're going to do is actually
remove an item from the loaded element
so what I'll say is um
well I'm going to have to get this
delete so I'm going to say call this
this dot parent let's see
VAR of item okay and let me just alert
item make sure that is legit okay and
refresh okay and let's try to hide the
item so we'll do item dot hide I hope
that works
delete there we go and refresh it
deletes okay so putting some sample data
okay okay refresh it looks like the
delete items are showing up beforehand
so you can go ahead and add this in if
you wanted yeah but I think you guys get
the idea and thanks a lot for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>