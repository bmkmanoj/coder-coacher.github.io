<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Igniter Quick Series 6 - Roles for Admin and User | Coder Coacher - Coaching Coders</title><meta content="Code Igniter Quick Series 6 - Roles for Admin and User - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Igniter Quick Series 6 - Roles for Admin and User</b></h2><h5 class="post__date">2012-12-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DrgYEYgM56A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back in this part we're
going to do part six and we're going to
actually build a login for the admin to
do this I also want to create a new
folder and I want to call this admin
because admins like its own area I want
to dedicate that to the administrator
with that changed we're going to have to
change a couple of things in the admin
controller so instead we have to load
admin slash admin and I'm just going to
include the regular header and footer
front huh
you could create a folder if you wanted
for the general pages for now I'm going
to leave it alone so what I'll do is go
to the admin page ok and it loads the
view good what I want to do differently
now is copy this login and paste it
under admin so admin will have its own
login so this will be an admin login
submit' with an email and password and
for the main page let's first make a
function called dashboard public
function dashboard and this is where
they're going to go when they're logged
in so I can cut all this stuff and paste
it in here for the index page I'm just
going to cut all this copy it into admin
plugin and I can get rid of this guy
okay
so if i refresh the page I'm presented
with a form here and what I need to do
is basically replicate what we did in
the user controller so I'll go to user
control the home controller start and
I'll just
copy this and I'll throw them down here
so it's going to be pretty much the same
thing we will load the view one thing I
don't like I think I'm going to redirect
this page to the log and actually just
because of the names I don't like the
names so this is admin / admin what I'm
going to do is this I'm going to do a
redirect to site URL admin login so just
let's refresh okay cool admin log in
there and this has actually be login
okay so we're going to load the user
model and try to log them in let's go
ahead and do something with the views
the admin needs to stand out I think
we'll just make a different header and
footer so I'll do a new folder called
Inc a new file called header a new file
called footer and for now I'll just I
could have just copied pasted these over
but I did it the lazy man's way or the
hard way
basically if you're wondering why I did
real quick I just put the contents here
inside admin so it has its own header
I'm just going to say h1 admin panel and
in this header I'll say h1 public area
okay so I'm going to refresh admin login
public area so we're including the wrong
file so I'll go to my admin and this
will be now admin include header and
boom boom ok go ahead and refresh this
bad boy so let's try to log in remember
the last guy you created mine which is
JJ calm I'll press J and we do login
data here we have a problem though we
shouldn't let users log in as the admin
and the solution to that is to go into
the database and we're going to modify
it and I think my second thing right
after user ID will be the type ok and
let me move him up on this is going to
be an enumerated item ignore it and the
options will be user or admin ok so
there can only be one of two and I want
to set a default value to user ok save
so anytime it's almost created they
should be a user by default because
admins are special so let's just go to
admin dashboard
we'll put protection on all this
eventually so I'm just going to put some
junk in here to confirm that the type is
a user when we create a guy cool so now
let's create a real admin user I suppose
we'll just go back to the dashboard I'm
going to do mine admin and admin comm
the password will be admin submit ok
refresh the page
and now in my database I'm going to
manually change my admin user to an
admin ok what we're going to do is check
the type one thing that bothers me I'm
just going to change this to ID zero
just because that bothers me I want I
want my main admin to be at the top so
we need to when we log in we're going to
check the type as well so when you close
all these out so I don't get flustered
and confused so let's start with the
admin so we have a user class that
shares login for regular users and we
want it to do it for admin users and we
want to be smart about it and not
duplicate code ok so let's go to the
models the user model and for the login
my first argument will be the type okay
and I'll put here so we're going to
match the criteria of the type ok and we
better put this down in a comment this
should be a strength admin or user it
should be a string string not encrypt
and the return type um those returns an
array
I like to type comments as I code
they'll hook you down the road instead I
feel like you have a big task of having
to write them all
so you remember our first argument was
tight so first of all in our admin
controller we need to pass a type where
we're logging in so here I know I'm in
the admin class so I'm going to type in
has to be an admin only a person with
the admin record can log in there then
in the home class we log in has to be a
user ok let's go ahead and try that I'm
going to try j8j dot whoops back to the
login page
try login as JJ calm nothing excellent
I'm going to our login as admin admin
comm with the password of admin and
that's good now back to the home login
which sadly looks very similar I'll try
to admin admin admin ok
nothing works and JJ calm and we log in
cool so now we have two separate roles
an admin and a regular user</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>