<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Soundcloud API PHP SDK Tutorial | Coder Coacher - Coaching Coders</title><meta content="Soundcloud API PHP SDK Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Soundcloud API PHP SDK Tutorial</b></h2><h5 class="post__date">2011-10-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dJ1WXLrzXmQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up guys someone requested a
tutorial to do SoundCloud and use the
API to authenticate and a little bit of
data so that's what I'm going to do
right now I'm at developer
soundcloud.com
and the first thing I would do is
register your app and you'll probably
need an account for this I've created
one in here and I just call the dream
testing and you want a live site to run
this because oo auth requires it to go
back to a live site and this uses OAuth
2 so what I have here is just my site
that I'm going to use and I'm using
NetBeans and that's what I'm going to be
uploading to I have a remote connection
setup with just SoundCloud and an index
page with nothing so I can move this
down so it's not in the way to get
started we need the PHP SDK and the SDK
makes it a lot more pleasant to do stuff
with so go ahead and grab that from
github and I'm just going to go straight
to the code and I'll just grab the zip
file and click
and in here we want services want these
two folders inside of this folder just
has two files that are included in this
base file so I'm just going to drag that
to my desktop alright once that's done
I'm going to drag these into SoundCloud
and that's just uploading it for me so
the first thing to look at is you could
go back a step and it has a nice getting
started page and it gives you some good
examples on how to do a lot of this
stuff and we're going to make I'm going
to try to make this very simple the
example that they give you of a demo
application is in code ignitor and I
didn't think that was the best example
so first what we're going to do is
require SoundCloud PHP and let me open
this and you see in here it requires the
files inside of here and you can look
through this function list and there's a
lot of stuff to it but it won't be too
terrible
so let's authenticate first we have to
instantiate our class so SoundCloud
equals new and what is it called notice
the names not actually just SoundCloud
it's called services so new services and
in here we have to pass our keys so over
in our application thing these are our
keys now don't use my keys I'm going to
delete those after I'm done with this
just because
you know don't want to have any trouble
so our client ID and our client secret
go here and the last parameter is our
redirect URL let me move this over so
you can read it I could just hit enter
and do like that and then the third
parameter would be our URL which will be
this okay so we have that and what we
need to do is get the authorization URL
so I'll just call it off
URL equals SoundCloud get there's our
type int authorize URL and this will
just this just gives us a link to the
site to authenticate with our parameters
it just builds it all for us so I could
say echo a HR f equals off URL and
connect to SoundCloud
and there so I'll go to my page here and
hit refresh and when I click this link
if you look down you probably can't see
it very good in my Google Chrome I got
that long
scary URL and that will take us to the
SoundCloud connect
okay so I'll go back after we connect we
need to authenticate the tokens and this
is done with a try-catch statement let
me just do tri-c tab there we go and the
exception they have a custom exception
class I'm just going to copy and paste
from my notes a lot of this is in the
example that I showed you which would be
the getting started page right here you
could actually just copy this just boom
okay so umm if there is a code that
comes back after they log in that's
going to give us our access token and to
see that we can say print our access
token and just for fun I'm going to echo
a pre up here whoops okay so I'm just
going to close now leave that open
refresh by the way if you get this here
it means one of two things the user is
not logged in first of all and for omit
one means that your permissions were
denied and when we'll go through this if
you keep getting this error you might
want to sign up for the sandbox account
and
what's that called sandbox SoundCloud
it's somewhere in here
SoundCloud sandbox they have a site for
a sandbox and sometimes your things
trying to connect to the sandbox and
what we've signed up for is the real
site so if I go to here and I'll just
say connect it'll take me back to my URL
and you see this question code that's
our little authentication access token
that we can use and that comes from
there so this is the token we use to
make calls to the system of Sound Cloud
and it has an expiration time so you
might have to you know set up something
to check this and all that what I'm
going to do is set a parameter from the
class so that we make sure we're using
the live version and if I go down here
this set development and it's a boolean
so I just want to make sure that's off
which I'll say SoundCloud set
development to false just to be extra
safe so we have that and in the example
files they also have an example of
getting your user data which I'll just
copy here so I'll paste that and this
right here is making the call
SoundCloud get and I'll go over that in
a moment so I'll save that and refresh
and you see this is what happens is even
though we have a code here and we did
authenticate our server isn't keeping
track of the token the access token and
we have to do that ourselves because if
I went here to connect
and connect everything works we should
get an error that said uh let me print R
of me let me do that once more connect
and I have all this stuff here now if i
refresh it's gone because we're not
keeping track of the access token to do
that you could put it in a database or
memcache or even a session which I'll do
here because it's going to be the
easiest to do and I'm also going to do a
session destroy' so that I could test
this a couple times and what we want to
check is well what we want to set is the
access token so if I go back here let me
connect connect and here we have this
array and this is what we want here the
access token and we want to put this in
a session so I'll create a conditional
if is set
oops session and I'll just call this
token whoops
I missed a parentheses then we're going
to say session token equals and we want
that to equal this here so I could put
this in there
and it equals access token and it was an
array of access underscore token okay
and I can get rid of this here I only
want to check for an access token if the
sessions not set so I'll paste him there
and else mmm set access stuff otherwise
we're going to set the access token
which we can do in the API if you see we
have get X's token we want to set access
token
this makes the class remember use the
token to roll the whole thing so I'll
say sound Club set access token and I'm
going to use the thing straight up from
my session okay and then by doing that
our calls should be good from here on
out so if I were to comment this out we
attempt to get the session from the
token attempt to get the token from the
session first set the token boy I don't
make much sense today okay
so we have that token now and it's
stored in our session for this let me
save it and if i refresh okay it's not
validated let me try to reconnect and
connect okay and let me refresh again
and it's stored in our session just
making the same calls so what can we do
with this with it validated now you're
probably going to have to dink around a
little bit of when to call stuff and how
to handle your errors but it's pretty
straightforward right here if you're
familiar with sessions let's try a
different call we have Sound Cloud get
right what does get mean
if I go to the docs API you can look at
these resources k and we can use a get
command with any of these in our example
we have me being called so if you look
here we have get me and what get me gave
us is just my profile stuff I guess I
had already uploaded a track so I'll go
to tracks and ooh I want my tracks you
okay so I just recorded a track of me
talking to test this out hey test one
two three ABC okay and if I want to get
my tracks let's go to the API show you
how to use it we'd go to slash tracks
and I'm going to do this wrong first
just so that you can get the feel for it
so we just would call slash tracks okay
so I will do tracks and if i refresh I
get this massive giant thing and you
remember I only had two tracks so what
we would do is pass in some parameters
if I look at the SoundCloud API of the
get method right here the first argument
is the path which is tracks and second
one is parameters and parameters are
what we want to pass
so back in SoundCloud
the parameter I want to pass is the user
ID and it's an associative array
so what I'll say is comma array and user
ID and I don't know my user ID but I can
get that from the call we made of the
meet the print R of me looks like I'm
going to have to go back and redo that
so I'll just duplicate this well I could
just actually copy this and put it all
in one try statement and I'll just get
me OK and print R of me by the way the
data that comes back by default is
Jayceon and this will be called tracks
okay save that by the way when I save in
NetBeans I have it automatically
uploading so I'll go ahead and refresh
okay so here's my ID here I'll copy that
and pop this into my user ID here and
with that
we can refresh and now my list isn't
that long
you see description of just just testing
my voice audio recording on a Saturday
afternoon and here's my tracks right
here
and you could get users from various
places if you wanted it has pictures and
everything so if you wanted to provide a
download link you know you could
traverse through the array to do this
what else do they have playlists groups
I don't use this this is my first time
using it so I don't know a lot about it
but it just kind of looks like this is
pretty much what you do get groups and
comments and playlists you pretty much
follow the same thing that I just showed
you with the get now I'm not a hundred
percent certain if you can upload I'm
guessing you can I check the API maybe
for some kind of put there it is put so
it looks like we could put a file from
our server to theirs and upload an mp3
I'm not going to do that because you
know it'll take a little while
there's post I guess you'd use this to
post a comment and we use that in the
same way where yes I'll put it right
here
let's try to make a comment instead of
get we'll do post and the path a comment
so what we pass in here will be
interesting because I do not know just
yet
creating a new comment okay so let's see
in this creating a new common example
they're doing a post under tracks and
then the ID in the comments they have a
body and a timestamp so perhaps I'll
attempt to do that post of tracks and
I'll pass in my parameters alright and
just I'm just putting it on another line
so it's more readable so body this is a
test now I need to post this to say a
certain track number and I'd have to say
looks like they do it by track ID so
over here my track ID down here it looks
like it'd be this number and track ID
let's come up
and I'm gonna echo out comment I don't
know what that gives me but I'll try it
out refresh and it looks like something
died that might have caused a problem
click here
okay I'm going to pause the video and
figure this out real quick okay we're
back guys I figured it out is a little
tricky
let me retype that outside there's some
debug code common equals SoundCloud post
and I didn't notice we don't want to
pass any curl options and we had a true
statement after that so looking at the
documentation let me just show you we're
doing the same thing posting two tracks
our track ID in comments and so I could
paste that right here um you can't have
a slash before it or after it okay so it
seems anyways and then get the idea of a
song so let me try this again I'll get
this ID here and we also want to make
sure comment above is true it will be by
default and then paste that in there and
what I was slipped up on is I was doing
an array sorry yeah it's an array I was
doing an associative array and I thought
you do body kind of like that but they
have it so you actually put in like a
fake array I had to look at their code
ignitor code on how they did that if you
go to here where it says comment body
you actually insert this as a string
itself so instead we'd have our regular
array but we'd have comment body like
that
and I'm posting from dream whoops
okay so I'll upload that and let me try
that out refresh and go down and nothing
there but if i refresh the page here we
have i'm posting from dream cool they so
post works like that that's something to
keep in mind let's see what else they
got in here tracks
I believe you can upload tracks with the
slash tracks command if you scroll all
the way down here uploading a new track
it looks like they this actually looks
kind of easy let me let me get a mp3
real quick from my computer okay so I
just recorded at mp3 real quick and I'll
pop it in the same folder I'm going to
comment that out and track equals
SoundCloud post two tracks and we're
going to post whatever they said post in
here looks like this stuff
so let's paste that in there I'm not
sure if this is going to work just yet
but I might as well try it while I got
this thing going so the asset data would
actually be called test dot mp3 and the
title just testing and I'll just make it
public
okay so I'll upload that to tracks let
me make sure I called the right thing
tracks okay and I'll refresh that HTTP
code zero okay that's embarrassing
the problem was I didn't upload my test
mp3 file to my server and it didn't have
anything to do so I'll just try it again
once more and I'll call this
dippity-doo and by the way the ampersand
sends the binary data of the file
through curl because you know obviously
you can't just send a I don't know I
don't know man
so refresh and it'll take a little
longer to load if your files bigger and
although ahead and refresh this and
here's the dippity-do it's still
transcoding here's the one I did a
minute ago I can play it see there's a
ye one two three ABC yep cool and that
about sums it up and I think you guys
will be able to take o test one two
three ABC my voice that's annoying
alright hopefully that helps you guys
and let me know if you have any
questions and join the forums if you'd
like thanks for watching peace</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>