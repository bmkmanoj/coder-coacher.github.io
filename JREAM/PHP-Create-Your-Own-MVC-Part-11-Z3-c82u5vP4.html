<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP: Create Your Own MVC (Part 11) | Coder Coacher - Coaching Coders</title><meta content="PHP: Create Your Own MVC (Part 11) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP: Create Your Own MVC (Part 11)</b></h2><h5 class="post__date">2013-05-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Z3-c82u5vP4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so the first thing is someone brought to
my attention in the previous video is if
I go to a fake URL I get the error page
displaying twice and that's an easy fix
but I want to show you how I fixed it we
know that the error is being called so
I'll check all error being called and if
i refresh the page it's only being
called once but why is this getting
called twice so if I open up my error
controller the only thing happening the
displays of view is the index so what if
I echo out index loaded and above in the
construct I'll echo out construct all
right it's typed wrong but that's fine
so refresh and we have air being called
construct index loaded and index loaded
so this leads me to believe the index
method is being hit twice okay so I'll
go ahead and ctrl e to delete those
lines and back to the bootstrap if we go
up all the way to here this is the init
function so when we load an existing
controller let's step through it I'll
just right-click takes me to the method
and if the path exists it'll load it
otherwise it loads the error okay and
this is where we get stuck because once
it loads the error will jump down to
this method we include the error
controller we load it we go here we
return false
yeah that's not stopping the execution
of the program so if we go back up what
happens after we load that error
controller we call a controller method
so I'll right-click and jump to this and
if I scroll down a ways if there's a
slash parameter we see if we load those
and by default it loads index
so that's why it's getting called twice
so all we have to do here instead of
return false
we'll put exit because there's no reason
to go on with the script at this point
and now we have a proper error script so
let's take a look at the dashboard
controller and if I look at the index
I'm doing dashboard index is the view
that I'm rendering so if I go to views
dashboard index okay let's see what's
happening if I can remember my login and
password I think I had one called
admin admin nope what was it Jesse Jesse
there it is okay so here's the old xhr
stuff we wrote there it is what I want
to do is put titles in the top of my
page because it looks kind of stupid if
it just says test so let's investigate I
haven't been in this code for a while so
had mercy the first thing I would think
of is to look where the include is so
here's a header and a footer so bust
open my header and we have a test thing
there and just a bunch of links and if I
go to my dashboard once more let's take
a look we're under dashboard index then
there's the view j/s up here and let's
look in the parent controller oops
and we load a new view so sadly I'm not
quickly detecting how I have rendered my
headers and footers that means I coded
this pretty bad to the fact if I can't
detect that right away it's not good
enough in my opinion so view render
let's look at the view
render I see the reason is because it's
hard-coded in the libs to me that's not
very good practice if I can be honest
with you because in the dashboard what
if we wanted a different header and
footer like totally different from the
login page so you go back on your old
code and you realize your mistakes
that's how it goes
so regardless of that let's work on
putting the titles and so for this I'll
say if is set whoops this title
let's do the question equal to echo it
out so I'll do the shorthand version of
this Turner so question equals is set
this title will echo out the title
otherwise will echo out let's just say
MVC okay
so first I'll refresh to make sure I
don't get an error and it says MVC okay
and if I go to my dashboard the index
page I'll say this view title equals
dashboard just like that refresh and it
says dashboard at the top beautiful
that's exactly what we want if we go to
let's just look do this on each one on
the error page I'll just throw this I'll
just say 404 error make sure you copy
paste this so that you can just fly
through it the user page just say users
and anywhere else there's a view being
loaded edit user because we're doing a
view render so the users are done about
the notes
notes and here's a view render of note
edit will say edit note and looks like
just there's almost only two per section
and we'll say login boom
what's this index page this will be I'll
just call it home and whatever this is
details I don't know what that is I'm
going to delete it okay the help page
will just say help and back to the
dashboard I think that probably all of
it so if I click notes it should have a
title
users yep and let's see edit users just
click it each link and make sure that it
works
okay then I'll log out and help okay
good just care about those little titles
up there you know it's important to SEO
I log back in is Jesse Jesse now if I
view the page source and you're
concerned about stuff like meta tags and
all that junk all you have to do is edit
your header you could do you know
basically what we did here if is set
this meta like this then we'll say for
each this meta as meta echo the meta
tags but in my opinion meta tags aren't
really that important these days so why
bother it's more about making good
content and cool stuff so we have our
titles all good we could probably change
around the names of this because xhr
insert is a terrible name in my opinion
let's see what we deal with a note so we
did we didn't use Ajax on this one and
we didn't use Ajax on this one we just
did for the notes I suppose we could
leave it I guess my question is what are
you guys trying to do further than this
because really it's up to your
creativity
I guess we'll change the headers around
if I go on into this view we have a
render no include equals false so
if we're rendering the views of the
header and footer I think we should
always manually do this so this just
renders the view in the name and this
will break our sight so let's see there
okay
and what we want to do is just above
each one of our renders just duplicate
it and I'll say header and footer
refresh so there it is
and we're going to have to put those
around each one of our things so I'll go
to my user make sure you change it to
footer you say well this adds more code
and that's true but looking back if I
can't find out what I'm doing fast
enough it means I'm writing not that
well okay and we want our code to be
readable and the best test is that when
you come back to it you're like oh yeah
that's what I'm doing so we're just
doing a couple adjustments and notice
that I'm changing the footer down here
okay um create edit
anyplace you see the render happening
we're just going to add in the header
and the footer okay
help
and this other page we can get rid of
now because it's not needed error boom
boom okay and make sure we got our
dashboard bases covered and you can just
do another click through make sure you
got them all edit notes edit dashboard
logout and I'll say Jessie whoops let's
check this I don't know why that's being
funny with my htaccess right now and
I'll just say Jessie Jessie everything
looks to be running smoothly okay now
with this done this way we could
actually create a subfolder inside of
the dashboard and have a different
header or footer I'll do it for the
error page just to make it interesting
I'll create a subfolder called Inc a new
file called header obviously you could
put this all in one file in this case
but if you had a dashboard with a bunch
of different sections that wanted to use
the same header and footer that were
different than the global header and
footer this would be ideal so let's
check this out let's do a
let me copy from the other guy
boom-boom-boom and this whole header
here we can get rid of it don't care
about the session or the JavaScript so
we'll just have a content box right and
I'll close that out open up our global
footer and in our error footer I'll just
paste this in and don't really need
anything in there so from our controller
we're going to load these for the error
so now I would say air include air
include and let's make sure that works
by going to a false URL and there we go
obviously it doesn't look that cool but
we're not here to design it too much but
that's how you could make use of a
different header footer situation if you
guys have any requests or parts you'd
like to see fleshed out more post them
in the comments and if you guys thumb up
the ones that you agree with and you
want to be done I'll do those ones to
get the most thumbs up because I'm not
really sure where you want to take this
series okay thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>