<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP: Create Your Own MVC (Part 2) | Coder Coacher - Coaching Coders</title><meta content="PHP: Create Your Own MVC (Part 2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP: Create Your Own MVC (Part 2)</b></h2><h5 class="post__date">2011-05-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bQxvYs9yO7Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up this will be the
model-view-controller tutorial part 2
and this will be my third time trying to
redo it because it's tough to explain
this so that it's not too confusing and
do it at the same time so I'll try to
slow down right now we have undefined
index and the reason is because there's
no URL up here if I go to index we want
index to be our default page so if there
is no URL typed in we just want to be
MVC and really goes to the index page so
there's a couple things we need to take
care of its first this undefined index
of URL and that's happening because this
get there is no thing being passed so
we're going to do a ternary operator and
say is that so if I get URL is that
we're going to get the URL otherwise
it's just null and I'll uncomment the
print our of URL refresh and here we
have an error because there's no page to
find if you see we're not getting
anything here so what I need to do is
check if this is empty and if it's empty
we're going to load the index controller
so if you are l0
empty will say require control our /
index.php and controller equals new
index and what we want to do is return
false the reason we do that is so that
all this other stuff doesn't execute
save refresh and we're inside the index
controller which should be the same as
that page cool so with the index or
without it's just index cool that's
taken care of and we can go ahead and
close this little bootstrap after we
uncomment that so it looks good what
we're going to do a little bit of is
mess with the view if we go to views
remember we have a header file and
already put some stuff in here and what
we have is a style sheet and I always
type this wrong
I always put SRC but this is supposed to
be hrf link rel equals I don't know why
I never remember this off the top of my
head
anyways I may I need to make a folder
for public CSS default dot CSS and
remember this is just a header file that
will be included on every page so if i
refresh view page source that's not what
i want so it looks like i need to first
create a view for the page we're on so
in the index one i'm going to create a
new PHP file and call this index in the
last tutorial we did this for air
remember error was our default thing
and I'm going to do the same thing here
views header and footer for this one so
we're going to include a header this
file and a footer let me create a footer
new PHP file call it footer and end the
div body HTML so what's happening is
when we compile a file we have a header
which is this file and it gives us this
block of code and then our content from
PHP will be all in here for the most
part and at the end of our file where
the footer is we close everything off
and I might want to do a div id equals
footer just so ok and I can close these
up and that looks right index type PHP
now the problem is if I am just right
here it's not really doing anything yet
we have to tell the index controller to
render the default view and we've
already set up a command for that if you
remember in lives of view we have a
public function to render a page so what
I'll do is go to index and get rid of
this echo and I got rid of the comments
in a couple other ones I just commented
this out if you remember from the last
tutorial so back in the index controller
what I'm going to say is this view
render index index
refresh and now we have this undefined
property view message I can get rid of
this there we go
this is the main page welcome or if we
go to this page still good cool and what
we got to do is make our little CSS
files and if we view the source it was
under public CSS default so I'm going to
make a new folder called public and a
new folder under public called CSS and a
new CSS file and I'll call this just
default you can delete everything and
I'll just put in some simple color so
your background will be silver the
header will say that's padding off 20
pics little background the old content
will have a background of white
and I kind of let that padding 20 pixels
and then there was a footer let's make
the background green okay save that up
doesn't need to be too fancy make sure I
can click that and get to it looks good
and refresh and now we have a CMS coming
together that looks neat so I'm going to
make a couple new folders one called j/s
another called images and for the J s
I'm going to include jQuery and to do
that I'll go to jQuery download
download download download it's actually
easier to download on the main page
there we go so here's all this jQuery
junk and I'm going to create a new
javascript file and call this jQuery
copy all this paste all this I hit enter
and who this is a big file just make
sure that there's like not any errors
because sometimes your computer won't
copy all of this if you select it and
you'll have some problems so what I'm
also going to do in the header is
include jQuery so script type equals
text or sorry script SRC equals
public j/s jQuery j/s
I think that'll work so let's test it
out with a that boy function of alert
one make sure it works this is just
jQuery this is optional if you don't
want to do it you don't have to refresh
it's not working function the script SRC
I guess maybe you still have to do type
equals text JavaScript refresh nope
public j/s jQuery j/s okay let me just
make sure I'm not having 20 problems I'm
going to create another file and just
call this custom j/s and new javascript
file custom and i'll do it the old way
document dot ready function
okay and alert one see if that works
there we go so much they had an error in
my JavaScript code or something I'm not
paying attention to
so there's jQuery and here's our header
what we could do is create a couple
controllers and in our header we could
create a navigation so I could say a HR
f equals they have our index page what
else could we have I guess about login
login about refresh and we'll have a
couple of links that go to these pages
index about logon and we have our index
page oh yeah help page let's change this
to help oops
save refresh help good and the login
page new PHP file called login I'm just
going to copy all this junk here paste
it in here differences I want to
loaded a log in the next page for
whatever reason a new folder and the
view and let's call this login oops I
did something around the folder blog the
file logon are oh it's right here that
was weird
and then a new PHP file in here called
index and then the login index file I'll
just copy what I have like say here
plug-in page login will say we need to
change the controller name to login
refresh logon there we go help help is
missing the goods so I'll create a new
folder called help keep getting an error
in NetBeans I'm not sure why I'll make
another file call index for help and say
this is the help and inside the help
controller open this up I can get rid of
this I can say this view render help
index okay
refresh help login okay now we have some
pages to work with cool now what if we
go to help slash other
we lose our our view it kind of lets see
view page source and this is trying to
link to this page but I can't find it
because it thinks it's in there so we
have to go a directory down to get to it
oops that's all wrong too
I'm not going to focus on this right now
so I'll go ahead and go back but we have
to look at is we have some code
duplication let me close everything make
it a little cleaner if we look at index
file or including the header and the
footer all the time really what we'd
want to do is probably just have this
included maybe when we call the render
command or you know give it an option so
in my views in the library this here
what I could do is say require view
slash header.php and footer.php
and if I go back to index I could get
rid of this and it looks like it's
included it twice so I could get rid of
all these it'll get rid of a lot of that
code duplication
let's see help error index has to get
rid of it log in so clean all those up
close all documents refresh and there we
have it that looks good and if we wanted
the option to render something else what
you could really do is in your views
object we could pass a parameter and say
I get on and on no include equals false
boy can't type very well today so we'll
check if no include equals true
we'll only require this else will
require the goods so basically what this
does is by default it's going to require
the header in the footer
unless we say not to so it's going to do
the same thing if we refresh but if I
was in my index controller and I did a
comma one refresh and it just doesn't
include stuff that could be an option if
you want it for whatever reason you know
there's a lot you could do here and this
isn't like sudden stoned
this is just giving you a general idea
of how to structure something together
so obviously this isn't a final product
you should really go through and figure
out you know ways to make not everything
so concrete for example if you were to
rename header or footer you'd have to
always change your view file what I'm
going to do is create a directory called
config new folder called config and in
the config I've got to make a new one
I'm going to call this one database
there's a new PHP file by the way I'm
going to create a new file I'll just
call this paths
and I think I'll call this URL this is
going to be how we're going to get the
working area of where we are in the okay
that didn't make any sense what I'm
trying to do is remember how we want to
help slash other and if I view the
source
I need the absolute path to this sorry
that relative or the full path whatever
you want to call it and to do that I'm
going to make it constant to say define
URL of and then where our we're working
I'm working in workspace slash MVC good
and paths and database good and what I'm
going to do is in my index file I'm
going to require config slash path stop
PHP require a config slash database dot
PHP and then down in my main header file
of my views I can use the constant that
I created
remember in paths of URL so on header
I'm going to say PHP echo URL and don't
put a slash there because remember we
have one on there and I could put one
here in here refresh and we have that
working now because it's giving us the
absolute path see that the only thing is
you'll have to change that if you change
where your thing is located or you could
automatically detect it but I'm not
going to mess with that okay so we have
a nice little layout now we can clean up
some of the help file help and require
help model I can get rid of this and
what we're going to do is assign some
stuff to the help view so we have a help
model here what we doing here help model
let's say for example function blah and
return 10 plus 10 so if I wanted to call
the blah in the help model C this is
some very serious business logic I'll
say model block and I could say this
view bla equals model blah and inside of
help
this is rendering what
refresh we have a problem because the
construct is rendering all the time the
same thing so we have to do is have a
custom controller for the main page so
I'm going to call that function index so
that the constructor will not interfere
with the default page we're going to
call so I'll go to error and there will
be an index page instead or index method
to handle this stuff index page brats
okay and lastly was our little login
page boom boom boom now stuff ain't
gonna work just yet
so if i refresh let me go to help just
nothing here what I got to do is change
my bootstraps so the default method of
loads if none is called is the index so
I'll go ahead and do that so libs
bootstrap controller equals new index
and controller call the index method and
let's try it with nothing okay that
works and we have to do this for when we
call our little thingy down here so if
it's a URL what if we go to help where
are we we include the file if it exists
we call that let's see if let me just
see what where I am echo 1
no echo to where I am I
oh yeah if URLs to if not controller URL
1 I wonder why that's not doing anything
refresh oh where should I put this else
so I want to call the index method if
there is no URL - ok I see this code is
a little messy basically what I want to
say is controller index and it is I'm
going to return false so we don't call
two methods there refresh there we go
help other great I broke other view page
source what have I done the site URL on
what happened if I did that okay I've
I've done some serious damage here help
login index and with none okay that
looks like it's working
the only issue I have is that this might
be getting called every time so I'm
going to close everything but the
bootstrap let me open up the index
controller and let me say let go inside
index next refresh index okay and if I
had another function inside here called
details this is just a test something
out okay the problem is that that index
this is always being called because my
bootstrap isn't right down here I'm just
going to do an else statement and I am
not liking the way these I really get
bothered by this but I'm trying to hurry
through these tutorials index and what
if I went to details there we go and
that works well index help
neck's so one thing is these links they
keep building up if I were at details
and if I want to go back to index if you
look down right in this area when I
hover over the link it takes me to index
slash index and that's not good we need
to clean up these because now it's going
to take me to a page that doesn't exist
so we need to go to the views header and
bust out our little URL here boom boom
boom
back refresh
and index let me try it again details
help
there we go that fixes the links so one
issue we had that you might not have
seen a minute ago if I went to login
slash test we have this fatal error and
what we want to do is make this go to an
error controller and to do that in our
bootstrap what I would do is check if
the function or the method exists and to
do that we're going to do that in the
calling methods area and there's one
called if method exists inside
controller and the name will be URL one
else or refresh so that don't work
exactly like I wanted this area is kind
of a sloppy mess and I should break this
apart maybe into a couple functions and
I don't want to waste too much time
doing this I'll fix it for the download
code though and I hope this tutorial
helped you so far thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>