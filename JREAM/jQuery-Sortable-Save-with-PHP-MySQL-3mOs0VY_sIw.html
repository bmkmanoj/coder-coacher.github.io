<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>jQuery Sortable Save with PHP MySQL | Coder Coacher - Coaching Coders</title><meta content="jQuery Sortable Save with PHP MySQL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>jQuery Sortable Save with PHP MySQL</b></h2><h5 class="post__date">2011-11-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3mOs0VY_sIw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up youtubers I was at the
dentist today and it felt like making a
video and I don't know what that has to
do with anything so we're up in jQuery
UI right and we want to create a
sortable list and we want to remember it
state as in if I were to sort that to
one and refresh I would want one to stay
where I had put it and to accomplish
this we're going to save it to a my
sequel database and what I have over
here is what we're going to be using
just a blank template which you can
download from my site otherwise you can
just write this from scratch and all you
have to do is include jQuery jQuery UI
and all that and obviously you're going
to need a PHP in MySQL so if you went to
dream.com slash lab open source you
could scroll down to the website
template and we're using this one with
jQuery not the prototype one and you can
use that if you like
so I set this up already in NetBeans and
here's all the goodies I opened my index
file and I deleted everything inside
because I provided some sample data and
we just have a div id wrap and I'll just
close that a second all right testing
here that's what we're working with just
something there so what I'm going to do
is first create a list and if you go to
the jQuery UI site they give you a
source example and they did an unordered
list now you don't have to do an
unordered list you could use a div and
in fact that's what we'll do just to
make it a little more exciting sorry I
just ate Chinese and had some coke I
don't know if that's going down too well
so div ID equals um let's call it sort
me
and there and div and I'll call this
test one and I'll just duplicate these
tests to 2 test 3 test 4 test 5 ok and
in my CSS I had previously done this I
just added a sort me so that the main
container will have a border and that
the children inside of it will have lose
look a little decent you know what I
mean so I'll go ahead and refresh this
and that's what we have right now and
you know it's not draggable at the
moment again if you're not using my
template view the page source all you
need to include are the jQuery files and
all that stuff and I'm going to be
writing the JavaScript and it's custom
J's file so in custom j/s it's under J s
custom J s we have our document ready
and I'm just going to do sort knee that
sortable pretty easy and since we're
going to pass some parameters I'll
prepare an object inside of it like that
and refresh and let's see look at that I
like how simple jQuery is it's just so
simple and what you're going to need is
probably Firebug I have that in chrome
now it's Firebug light it's not as good
as Firefox is real fire bugs but it
works so it doesn't do anything right
now what we're going to do is serialize
the data you're probably not what the
heck does that mean basically in order
to keep track of the order of this we
just want like a list of the names of
the elements so let's say I'm up in here
I have to give these IDs in order to
serialize them and to serialize we're
going to only serialize I think it's
unchanged so if I look at this and go to
events create start sort change I think
change is what we want looks like update
okay this event is trigger when the user
stops sorting in the positions changed
that's what we want so we pass in this
okay I'll copy that and right in here
notice that we do have an object already
inside of there okay so only update what
I want to do is serialize the items so
I'll say this which refers to I believe
this event or just the sortable object
and this dots sortable I want to call
serialize you say how'd you figure that
out well I read the documents under
methods and right there sortable
serialize and that's just all I'm doing
and you're not going to see anything
happen just yet
so we want to console.log this so we can
see the data what's going on so I'll
save our post data equals that and I'll
do console dot log post data and I
purposely left the IDs empty in these
children so I can show you so I slide
this down and it's empty because what it
does is it serializes the IDS so we
might want to call this ID equals test
one or how about item one
boom-boom-boom so now you're going to
want to name these correctly there one
two three four five and back at our
little template I just drag and boom so
we have item two item 1 3 let's see if 5
will go first so this is changing the
order now this is one mean-looking ugly
thing and we're going to use PHP to
clean it up first what we need to do is
actually post to PHP through jQuery and
we're going to do that right here and I
have a bunch tutorials about posting and
all this and hopefully you know how to
do this already I'm going to post to
save dot PHP and what I'm going to post
is post data however I'm going to first
give it a name for this post data and
this function is our callback and I'm
going to return it as jason just because
it's a habit so what is this what does
this mean you're may be asking what that
means is in PHP I can say post list and
it will equal the post data that's what
this is really doing ok I'm going to do
a console dot log oh now you see this
function if you don't know yet that's
just our callback after it saves this is
what we're going to do okay so I can oh
we need a save PHP page first so let me
just source files new PHP file I'll call
it save and inside a save we'll do a
post of list
I'll call this let's take this post list
and echo list now this isn't like
checking a bunch of security or anything
I'm going to leave that up to you
however you want to do it this is just
to get the bare bones working so now we
have our this available in our PHP cool
so what I want to do is I want to parse
the string because this is really ugly
to insert into the database and I'm
going to have to loop through this data
and I want it to be easy to loop through
so the PHP has a function called parse
string that Chinese to not go down to
well
harsh string of lists so I'll say let's
equals parse tree and list and let's see
what that does
I'm actually not sure what it's going to
do nothing
so that's wrong I got a PHP documents
open on my other screen let me take a
gander at it I shall just slide it over
here boom so we see we have this ugly
looking string dated parsed string of
the string oh I see it made it into an
actual variable name I want mine into an
array like this
because that's easier to work with in my
opinion so I will do an array output and
I'll make output equals array and
actually outputs an array so print are
okay let's try doing it again
save and cool I have this
now this is one confusing looking thing
if I drag this it's like or are these
numbers here basically these in the
brackets if you know PHP these are just
the keys of the array you can disregard
them for this what we're interested in
this this order see how it's 1 4 3 2 5
and it changes to whoops
you know 5 1 4 3 2 so now for the saving
part you're going to have to open up
your my sequel whatever you use to
create stuff in and I've already created
a database called sortable and I'm going
to create a table called lists with two
fields first one's going to be ID the
second one is going to be called data
the ID will be an integer data will be
text because we never know how long this
could get and for the ID I just put 11
in there and make sure you make the ID
the primary key because that's important
and auto increment save well we have a
list
I don't like Latin Swedish collation I
usually use utf-8 general Unicode or
sorry utf-8 whatever ok so we got to
connect to my sequel and put stuff in
there we could use class I wrote already
to do this I kind of prefer it so I'm
going to download it real quick slow me
hit up dream.com slash lab
open source and I'm just gonna get the
mice SQL I class you say well I don't
want to do it this way well you don't
have to but it I just I don't know man
so lids I'm going to make a folder
called libs new PHP file I'll just call
it my sqli cuz I'm lazy and there it is
okay so we want to include a require Lib
/ - Qi dot PHP and if you look at the
name it was called DB actually class DB
I have a some examples in here that you
can use and we'll just do that to save a
bunch of time so first we create an
array with some parameters I'm on
localhost password group table will be
sortable the table we created and we
instantiate our database object and
we're safe I'm going to refresh just to
make sure I have no errors so boom boom
okay no errors good and we're going to
do an insert of these into there and
what I want to do is I think I want to
do a comma separated list and to do that
I want to boy I always get these two
confused it's implode or explode join
array elements with a string no I want
to explode see why I like NetBeans look
at how nice this is I didn't even have
to look at the PHP documents so I want
to explode with commas but I actually
didn't look right did it
oh well I'll try it anyways I think I
got it wrong
output so I'll save that I think I have
this ROM though parameter to to be a
string yet I'm trying to implement that
right okay move that up and scroll down
right to string conversion on line 9 let
me see that again
wait just a second glue I want to be
comma pieces array um that doesn't make
sense I'm going to pause the video oh
okay we're back let me tell you how
ignorant I I kept missing the output was
a associative array with an array in it
you see we have our array and then we
have our associative value which
contains all our stuff here
so what I had to do was implode the
output item so I can delete all this
stuff and good and item is really just
the name of this right here okay so I'll
go ahead and refresh and drag and the
save does one two three five four boom
and I want to save this to the database
and to do that we would either have to
do an update or an insert I'm going to
insert this to start with because I
don't want to have to write a whole
bunch of code right now so I'll say
insert I'll just let the ID be itself on
say one two three four or five
because we have five items and brows so
there's our data actually let me change
this input 5 to 4 1 so that we can sort
this one the page loads ok and to sort
this one the page loads we can do a get
or we could just do it through PHP down
here and I think I'll do it through PHP
and we're going to have to write a my
sequel query and I'm going to need all
this code here really it's about time to
make a new config file and in the config
file I'll just put all that stuff in
there like this there and then we'll
have a date the variable DB just to use
in other pages so I'll do a require
config dot PHP and on index I'll require
config dot PHP I'm going to say DB let
me see is a query select all select data
from sortable or sorry list
and what I call that DB get when I call
I get okay so if I go to the site
template refresh we get an array good
and I will do a order equals DB get and
print our order
refresh and we get our thing here so I
don't like how this is oh well for this
example I'm just going to do it with how
it is and not get too picky
I prefer PDO and return things as
objects and only one data type instead
of the enumerated and the associative so
I'll just say order 0 was that called
order no it's called data order data
and refresh array zero of data that's
weird
did I just really do that
refresh okay there it is that's pretty
embarrassing I'm not programming good
today a Chinese is making me sweat it
had something in it so I'm going to now
turn this into an array so I'm going to
do explode so I'll say explode that and
I'll print our of order so that we can
loop through it and feel good about it
explode order based on comma sorry there
refresh oh I gave it two parameters I
put that in the print R ha ha okay
oh look that doesn't look right I think
I put it in the wrong order that soy
sauce is poison
all right there there we go
so with these values I'm just going to
do a for each loop and I'll say for each
order as key value echo
this is really the question because the
content in here
do I want to all to be in PHP I suppose
for this so that this video doesn't get
too long we'll just do it this way so
I'll put the div up here right for the
sortable thing
let me tab this over and right in here
really what we could do is define these
in PHP beforehand and maybe we want to
do that I'll just do it because you
might actually have this problem so I'll
say item 1 equals that 2 3 4 5 -
actually we couldn't just make this an
array
so item equals array and I'll cut all
those up paste those in here and got a
single pull these up and hook them up
with a comma
okay so first let me echo the value out
down here
and I'm going to get rid of this order
they're refreshing I'll get five two
three four one good and what we want to
do is echo out the items now the problem
we're going to have is that you see
there's no zero value and arrays start
with a zero so perhaps we should start
with a zero so let me modify this record
and change this to four three two one
zero
go and refresh see it's still five
records we just started at zero because
it'll be more consistent so this would
be zero one Doh doh-doh doh-doh so what
we're going to do is echo the item and
the number and refresh and we get five
four three two one
let me change these numbers so it's less
confusing so I'll say zero one two three
four and we're obviously going to have
to change these for our post
okay now refresh and there we go so if I
move these around we're not officially
saving yet but if i refresh it goes in
the same order that's in the database
okay so we can wrap this up shortly let
me
save it
yeah safe so to save I'm going to do a
DB I don't know if I made an insert
command in here no I'll say query update
list set usually what I have is
something to automatically builds a
query we know that this is a string
though so it'll be pretty easy so I'll
say set data equals a I change these two
double strings now you might be saying
why is your variable named a because I
was just not thinking about it so I'll
call this save save save okay and I'm
going to assume this is okay you might
want to do some error checking in your
database so I'll move that four three
two one zero let's see if I put zero at
the top so our database should be that
let's see if it worked
Brow's 0 4 3 2 1
good so if i refresh it now saves in the
order so 102 4 3 refresh same order
let's put 4 &amp;amp; 3 at the top refresh same
order and our record is updating so I
feel like this tutorial whatever it is
it's kind of all over the place what I'm
going to do is zip up all this code for
you friends of mine and I'm going to pop
it in the forums at dream.com sign forms
and I looks for um not plural and I'm
going to put that
in the JavaScript area so if you want to
download the code go ahead and thanks
for watching guys see ya</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>