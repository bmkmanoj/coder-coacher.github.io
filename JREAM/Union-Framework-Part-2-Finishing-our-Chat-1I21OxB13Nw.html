<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Union Framework - Part 2 - Finishing our Chat | Coder Coacher - Coaching Coders</title><meta content="Union Framework - Part 2 - Finishing our Chat - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Union Framework - Part 2 - Finishing our Chat</b></h2><h5 class="post__date">2012-12-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1I21OxB13Nw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey whats up guys here's part two to the
basic introduction of the Union
framework with JavaScript and what we're
going to do is first of all I'm going to
wrap this in a function this right here
so i'll say function in it and I can tab
all this over and I want in it to happen
when the body's loaded so i'll say
onload equals in it I'll just refresh
the page to make sure we have no
problems and boom there we go so for
these event listeners let's create some
custom function so it's a function ready
listener and then we'll have another
function called flips clothes listener
ok so instead of this here i'll just put
ready listener close listener and what
these do is they pass an event so ii ii
and for fun will say console log e ok
and the clothes listener if that is to
happen ok so and it gets called when the
page loads we instantiate orbiter we're
just using 04 short-handed and we add
some events when orbiter signals off
that it's ready we load the ready
listener if its signals that it closes
we signal the clothes listener so I'll
refresh and look we got this this thing
that looks very foreign so we're going
to make a little chat and we'll make it
pretty simple just like in their
examples so let us make a chat pane div
ID equals chat I just like to put a note
in here the stuff is dynamic
okay and I'll do it input type equals
text ID equals on message and also do
one for submit idea will be submit their
simple project okay and I'm actually
going to put the chat box below it there
so let me refresh and see how that looks
ok cool so the first thing we have to do
is when the thing connects you want to
say hey we're connected and we're going
to join a room the first thing we have
to realize is if we go to the at the
Union admin the rooms there are no rooms
so we have to deploy a room and to do so
right in here I will say orbiter dot and
it's like okay where do I start let me
quickly look through the docs and we
want to do with a room okay and if I
look at some of the functions in room it
looks like it has to do with joining
leaving all that stuff but where's
create we have a manager so sometimes
that's a little tricky I got confused
quite a bit so we want to get the room
manager so orbiter dot whoops we're
using the odot for orbiter orbiter get
was that called room manager
and we're going to just chain on that
new create room because if you go to the
manager it has create room here and you
can pass in a string for the room ID you
can pass in room settings and this has
to be a room settings class so i'll say
create room of chatter box don't worry
we're getting to the good stuff so we
create the room and let's give it a
variable called chat and i'll say we
need to add event listeners so add event
listener chat add event listener and
we're going to add one for a when
someone joins and i think a message yes
so i'll say i got to get this long
namespace so this room looks room event
dot something
okay and we want to handle this with if
we look at the room event
am I in the right place room event
where's the constants they're all there
but here we go join leave when someone
leaves a room there's a lot of things we
can do so we want to do one for join
I'll do join listener and will create a
new function called function join
listener join ok and for this one what
the I don't know what I'm put in here
I'm just going to leave those empty and
then i'll do a chat add message listener
will do this is a constant so chat
message and I'll do chat listener ok
I'll say function chat listener
okay so let's refresh the page see what
happens I'm caught references Oh is not
defined I thought we would have that
error it looks like i need to do VAR o
outside of this so i'll say far oh i'll
say 0 equals in connection refresh okay
there we go there we go and let's go to
our admin and here's our room chatter
box and we have yet to join the room so
let's go ahead and join I could trim
some of this fat here get rid of this
guy to join the room i'll say chat join
okay and let's try that again refresh
joined so I'll go to my rooms and
there's user 13 it's just a random user
because we haven't logged in as anybody
and now to handle the message when
someone chats so to make this look like
a real chat room let's do document get
element by ID of a mess wait chat we'll
grab that guy
and I believe we can just I'm not used
to using this without Jake word document
great element p save our message and
message dot a pen child document dot
great text node of welcome to the chat
okay and then we want to pop that guy in
there so i'll say pen child message
that's some scary stuff you might want
to pause the video here to get that
typed out refresh and unexpected token
VAR did it happen unexpected token
workspace 27 looks like i'm missing a
parenthesis where is it right here try
refreshing now we got a pent child it's
append this would be a lot easier if I
just would include a jquery sorry i find
jquery very easy to use not found why
was that not find a pen child okay this
has to be a variable and then idea of
chat okay they will go welcome to the
chat and next let's handle the chat
listener and this has two arguments it's
the client and the message we're going
to want to function for when they submit
this button here so on click equals
submit so I'll say functions submit and
i'll say i commend i get element by ID
of message dot i think its value so
alert let me make sure that works
nothing something ok so to submit this
thing over and for the chat with a
sinner we're just going to basically do
this all over again so boom create a new
message in a paragraph and this time
we're just going to pass in the message
that they pass in from here to here and
we're going to put it in the chat and
the child a little kit and we're going
to want the client um so I'll say client
dot i believe it's get client ID I think
like you have that we did it Plus this
give a little spacing in there so when
they submit we need to send a message to
the chat listener I feel like I've been
talking and kind of losing track of
giving instruction I'm going to provide
this in a get document so you can look
at it I will say you can include jquery
to make your handling your dime elements
a lot easier and I wish I would have
done it but we ready 12 minutes in and
we're almost done so we want to do this
to the chat room it's called chat so
chat dot send message and we're going to
call it a chat message well you have to
call it this and you just pass in some
parameters here well I quickly wrap up
know and i'll call this message ok so
this chat message when we call chat send
message it's going to send it to the
chat and this is the listener that grabs
it it grabs the client and then the
message and then we're going to put that
into this chat box here so one thing
that I think is wrong as the chat needs
to be declared outside of this because
we're using it in another function down
here so I'll do our chat refresh test
looks like we have a serious error no
method go get client ID yeah I was wrong
about that one where was it client get
client ID get
client ID camel case may be test tests
on user 19 and let me open up another
browser and I open this with a little
private guy's face there okay so I'll
say hey submit and it appears down there
how is life submit and you're able to
tell that in the room chatter box we
have two users now it's a little
difficult for me to explain this and I
apologize for that but this is just the
basic thing to do if you just want to
get a straight up thing running and have
a live chat and I hope this tutorial
helped you feel like this is something
cool to use thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>