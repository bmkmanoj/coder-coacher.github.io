<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Active Record Tutorial | Coder Coacher - Coaching Coders</title><meta content="PHP Active Record Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Active Record Tutorial</b></h2><h5 class="post__date">2012-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6qma_lgTI0g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up today I'm going to
show you about the PHP active record
class and this is known thing you've
probably heard of doctrine used inside
of Zend framework and propel which i
think is used in symphony and this is
just another active record library it's
PHP active record org and I've played
with it for a few weeks and it's pretty
good so it's not too hard to use and it
makes connecting to your database pretty
easy so we're going to try it out I
would grab the nightly build because if
you look on the dates of these this one
looks you know two years old
so if I get the nightly build and how do
I know this is actually up-to-date and
not just like it's never been updated
well I would look at their github
account and I see this guy's been
working on it you know 13 days ago on
the library 13 days ago it's been worked
on so I'll go ahead and just download
the zip and I've already got went ahead
and created a NetBeans project so I have
a net based project I just called it a
are short for active record I have an
index.php file that's empty and I have
the library a library folder with the
PHP active record the reason I put it in
a library folders because I might have
another thing like other library and I
don't want a big mess so what we're
going to do is first create a database
I've been using heidi SQL a lot and I
really like it so I just created a
database called AR you can do this in
PHP myadmin too if you prefer
and what we're going to do is create two
tables so I'll go ahead and create a new
table and call it user and I'll give it
a user ID and check those and I'll say
log in is a bar character of 50 and
password looks good and I want to auto
increment the user ID and make it a
primary key
I've not assumed you guys watching this
already know how to create database
tables because what's the point of using
an active record if you don't know how
so I'll have a data table also call the
data ID and I'll make a content field
I'll just say 50 what I'm going to do to
make things also a little more
interesting you'll notice I'm not
calling my IDs ID and I'll tell you why
soon I'll make will call date added and
make that a date/time and I'll create
one called date modified and we're going
to have our records automatically mess
with those so I'm going to make the data
ID auto increment and make it the
primary key save that guy up okay and
just for let's see user okay what we'll
do is we'll create a record through the
active record size first so to say this
time we can just go to the active record
site and you'll see on the download page
of its menu at the top and then they
have Doc's and this is a lot
busier than what the main site has so if
I actually go back to the main site and
just look at the guides these will help
you get started real quick I'm just
going to hit up the QuickStart and copy
the first chunk in instantiating our bad
boy boom-boom-boom guide us and I like
to fix my tabs
I don't like spaces they simply click
there ok and we require once that active
record library and you know I made a
subfolder so I have to put the word
library in front of it ok and active
record runs off of models so that we
have a class that contains the database
information so you could rename this if
you wanted I'm going to leave - models
so I'll make a new folder and call it
models and that's where we're going to
place our active record models we have
asset connections they have a couple of
options like production development and
all that I'm just going to leave mine in
development so my my sequel user is
route I have no password if you delete
that don't forget D at localhost
accidentally erase that and the database
name I just called my an AR
so that's how we set it up what I always
do is I go to my page so I don't get too
far and have an error there's no error
okay looks good
and then it shows us how to create a
class and it's super easy so let's get
busy first I'm going to create a new PHP
file called user you can capitalize that
if you want I think I will - follow the
good convention and I'll make another
file called data and what these do is
they represent our database tables here
in here so data and user and I'll start
with the user class so I'll say class
user extends active record in NetBeans
you see how it's giving me these hints
this little brown thing looks like a
package
it's a namespace so I'm going to go into
active record namespace model okay and
that's all we have to do okay oops so
I'll do the same thing for the data now
the reason I made the ID is different
like data ID and user ID by default
active record will use ID like that this
active record will but I don't want that
so we want to set those custom so what
we'll do is a public static
primary key equals data-id okay and it's
same for the user but we'll change it to
user ID if for some reason you were you
had a user class in your table was
differently named you could do public
static table name equals user something
else I personally like to leave the
table name in there I don't know why
just makes me feel important okay you do
not have to specify this because it will
automatically assume that your table
name is the exact same name as your
class name I just put it in there
because I don't know I might forget or
change something stupid okay so we have
our models and back at our index page to
use these it's really easy let's create
a user so I do a user and I do a static
function I'll do create and it says
attributes and the attributes is an
associative array so I'll create an
array inside of it and inside of our
user table let's take a look we have a
login and a password so I'll say login
and password
these are great and I'll go ahead and
refresh that three times go to the data
and there he is there
John I can do a whole bunch of these if
I wanted Jeff
and refresh and back here I have all
those guys okay so creating is a piece
of pie I'll comment this out what I'm
going to do is create one of the data
I'll do data create and alright and this
one's going to be a little bit more
customized so we have content and date
added so I'll say content equals some
sample stuff okay so this will work
refresh refresh and there it is now if I
want the date added and date modified to
be automatically added to the record I
don't have to do that forever create
what I can do is this I'll create a
function in here it's a public function
before grade and I'll say this date
added equals and I'm going to make a
date and I'll do the my sequel date/time
stamp which is why M D H is and I'll
just rain
- time now okay and I can also do that
for before update but I want to change
the pool
I got a typo here lookit it's got to be
date added and date modified and this
one will be before update okay so on
creation we had a date added on updates
we do a modified okay so for fun let's
refresh and refresh there's my date
added and that's we're going to do an
update and in order to do an update on a
record we first have to have a record to
work with so we have to begin with
selecting something so I'll comment this
guy out and selecting is pretty easy I
can just say data find they give us a
couple options here I'll just do find um
by ID I'll say one
I'll be print are of data data equals
that guy so refresh and unknown column
ID that's right because defined by data
ID refresh and here's this bad boy right
here and the data ID is one so what I
can do is mean I call it a pre tag so
it's easier to read so I'll say echo
data ID refresh and again I made that
mistake its data ID sorry I qual content
and refresh and you see up here at the
top I can echo out this stuff inside of
this guy so if I want to let's say fetch
a whole bunch of them let's just try
that I'm going to comment this out and
do a user fetch there find I'll say all
I'll call this user and if I do a print
R of the user let's see what we get so
right here what we have is a data object
a single object but if I find all of
them we now have an array of objects so
I would have to loop through these guys
and it's not very hard I'll just say for
each user as you echo you login like
that and I'll comment him out so refresh
and here's all my users really easy so
that's how we can do a find you can also
do a find by SQL so if I want to find by
SQL I could say select star from user
refresh and I get the same results
however when you do it this way it does
not use what do you call it bound up
parameters so it's usually best if
possible to avoid using find by SQL I
think they had a option where you can
pass in values here yep so if you wanted
you could pass in values like this and
I'd be the smarter way to do it if you
are passing in values if you had to do
that and what I mean is this if you want
select star from
user where user ID equals question and
an array of I don't know - so let's see
what Dad does now we get one guy okay so
this binds to the parameter in order to
the question marks if you choose to do
that so what we're going to do is now
update a guy so I'm going to update a
user and find in order to update a
single user I'm just going to find by
import ID or user ID and I'll find my
user ID of - and I got to assign him a
variable so I'll say um user login
equals Ted Jenkins okay I'll make up a
name I'm going to print R of user so you
can see what's going on okay so let's go
back refresh and when I look at the
object I have a user ID login and
there's a thing called dirty okay and
dirty means that something has changed
and what's changed the login okay the
value isn't one the value is actually
what it is up here but it will only
create an update SQL statement if
something has changed so it's not like
wasting and updating average in a row
which is cool so to update that it's
really easy let me change the password
too
I'll call it fish nuts and I'll say user
save refresh let's see what happened
inside the user table
I have Ted Jenkins and fish nets and
lastly let's just go back to our data
record you might be saying dude you're
kind of repeating yourself well it's
good to redo something over and over to
get it memorized that's how I see it so
this is the exact same thing we just did
with the user k right here and I'm going
to save it the reason I'm doing it with
data is because you remember we added
those custom functions here before
update and before create so go ahead and
refresh and let's see what happened data
and it looks like it modified the date
added but we want to modify the date
modified so find by data ID I'm a double
check one and date modified is what we
want to change okay
data-id content I'm not even changing
anything
you see if I look at this there's
nothing dirty in here so it's not
actually going to update anything I
forgot to set that so I'll just change
content to the cat's cradle and refresh
and you see that guy there and there it
is date modified and that's a basic
start for using this active record class
it's pretty cool and there's a lot more
that you can do this is just a basic
introduction to it if you choose to use
it and hopefully this was helpful thanks
a lot for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>