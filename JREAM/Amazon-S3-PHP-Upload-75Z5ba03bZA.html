<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Amazon S3 PHP Upload | Coder Coacher - Coaching Coders</title><meta content="Amazon S3 PHP Upload - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Amazon S3 PHP Upload</b></h2><h5 class="post__date">2013-04-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/75Z5ba03bZA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up youtubers I'm going to
show you how to upload to Amazon s3
using PHP and it's actually really easy
because some people do all the hard work
for us by making a wrapper class and
just to briefly go over s3 it's pretty
pretty good I've been using it for a
couple years now and it costs Oh point
zero nine five cents per gigabyte so I
honestly don't even know if I use a
gigabyte that's nine cents that's really
cheap and this is the uptime for
standard storage is like 99.99999 and
reduced redundancy is 99.99% guaranteed
uptime and if you ask me 99.99 is pretty
good especially with the amount of money
you'll save it's 76 per gigabyte 7.6
cents versus 9.5 cents if you store a
ton of stuff it'd be super cheap and
this is a new service they have called
glacier service this is for backing up
stuff basically all your files and stuff
that is just going to chill there but
we're not going to be using that I'm
just kind of in the mindset that you're
going to be using this to host images
and so on so the first thing is you'd
obviously need an s3 account which I got
right here and here's our little control
panel you'd head over to s3 and this
would take you to your management
console and ever to created a bucket and
I call the test - Jesse now these
buckets are shared system-wide so you
might not be able to get like the exact
bucket name you want but it's really not
a big deal
because if you decide to use CDN you can
mask it to your domain name and it's
really just for distributing stuff so we
have this and what I did was I went on
Google and look for let me go back a few
steps
I looked for typos Amazon s3 and it was
this class right here
on github and what we can do is just
click s3 this is the class we'll use by
Donovan Scott nicht not sure how to say
your name sorry and this class is pretty
nice so I'll just go wrong and I'll copy
all this stuff I've already created a
working folder in my workspace called s3
and this is just an empty index file so
here's my handy text editor and what
I'll do is make a new file paste all
this in there
and I'll save that s3 dot PHP you can
see that I already was working in here
playing around I'll go ahead and delete
this so that you're not off track
there's s3 yes ok so I can close that
out and the first thing we'll do is our
PHP tags and we'll do require s3 dot PHP
one thing you're going to need are your
security credentials and you get those
by going to your name security
credentials and you'll be able to see
mine when I paste them in here but I'm
going to remove them after I do this
video because I don't want people in my
in my buckets okay so back up here we
require s3 then I'll say new s3 and I
need my key and my private key ok and
I'm going to copy those from somewhere
else
let me grab it right here there's my key
and my private key
okay how to say s3 equals new s3 this
just instantiates the class with our
credentials and we're going to put an
object in there so let's say let's
create a new file and call it this is a
fake file the reason I'm putting content
in here is so that the file is not 0
bytes and we know that it's working so
I'll just call this upload me dot txt
okay and next we use a static method and
we do s3 put object now this guy has a
quite a few arguments and hopefully this
doesn't throw you off course well I'm
just going to copy this put object and
I'm going to look for in the s3 class to
look at the arguments and go through
them with you that's not it that's not
it that's it all these arguments so I'll
just copy all these guys and this is
just for my reference since I'm not
using an IDE which I normally would so
the first argument is the input and we
know that is upload me txt the second
argument is the bucket name remember I
called mine test Jesse the URI is what
we're uploading so if I wanted to rename
upload meat as something else I could do
that I'll say string two time txt or
I'll just do time like that so it'll be
the a timestamp of the txt file and the
next one let's see ACL private we want
to change this to public now if I copy
this and look in the class let's see
it's all over the place there we go our
constants are right at the top we want
public read most the time so that
someone can just read our content and
see it private they won't be allowed to
see it
unless you get into creating a special
permissions thing with an expiring key
so we'll say s3 ACL public Reed
let me do this new name I don't like how
that looks
I'll just say new name there we go
insert into s3 okay
so we want it publicly readable so we're
here meta headers and requests headers I
don't need to pass anything for these
for what we're doing and the reason I
could skip all these and just leave the
empty like this but I want to use reduce
redundancy storage because it saves
money and back in the s3 header file we
have right here storage class our RS by
default it uses standard so I'll say s3
boom and those are just the class
constants we're using okay so I'll go
back and refresh the page and I have a
parse error because I didn't delete that
code there we go and refresh it looks
like nothing happened but I'll go back
to s3 and refresh and here's this file
I'll refresh a couple more times and
then refresh on s3 and I got a bunch of
files and you can tell that it's
actually being uploaded not just some
bad file or anything because of the bite
size and I'll right-click him and I'll
go to open and it's open this file and
it's upload me txt and it says this is a
fake file so it looks like um the
contents of the file weren't saved it
looks like I put it in there the reason
is because this is just a string and I
need to do s3 input file upload me dot
txt pulse and if I go to input file
inside the s3 class
md5sum if you want to use md5 hash I'm
actually not sure what that does and I
don't want to use that so that sets the
input file I'll try again whoops and
refresh go back refresh and this one's
20 bytes and I'll open him up and says
this is a fake file that's exactly what
we want and if we look at the details of
this if we right click and go to
properties we have a URL for it because
it's public our permissions everyone
who's allowed to mess with it I don't
know who that is
and there's reduce redundancy storage
and then this would be the length that I
could give to people if I wanted to use
it but other than that if you go back he
actually had some pretty good examples
if you scroll down a little ways right
here is what I picked up from his notes
you can use it statically so let's see
he instantiated this statically right
here if you want to do s3 set off really
doesn't matter to me
but I haven't instantiated that way to
use input file and just to take a gander
input file is static so we really could
do s3 set off and s3 input file and that
should work and I'm going to copy/paste
this to make the file size larger let's
see what happens here
refresh
refresh 176 bytes open cool
so statically or instantiating it is
fine I hope this video helped you guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>