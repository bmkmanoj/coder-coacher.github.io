<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Igniter DBForge Setup Script | 2 | Coder Coacher - Coaching Coders</title><meta content="Code Igniter DBForge Setup Script | 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Igniter DBForge Setup Script | 2</b></h2><h5 class="post__date">2012-03-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ULVInaTgAVY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up youtubers today we're
gonna part 2 part 2 of codeigniter and
what we're gonna do today is set up a
database and we're going to eventually
build a user authentication system so I
always had the little coated nighter
site where my user guide is because
we'll be looking at this quite a bit and
what we're gonna do is go to table of
contents and the database class now it
might look a little intimidating at
first so don't worry about that all
we're gonna do first is create a
database schema for with dbForge the
reason we want to do this is because if
you are installing software or setting
it up like selling a package you would
want an install script so we'll make it
easy and it's this one right here
database manipulation with database
forge so in red we'll see in order to
initialize the forge class your database
driver must already be running since the
forged class relies on it and that's
what we'll begin with so in our code
ignite our application we're gonna bust
open config and first I'm going to go to
database and I'll scroll all the way
down and I'm working locally so I can
just pop in my username as root I have
no password and database I'm gonna call
it CI tutorial ok and there's a bunch of
other settings that you probably don't
have to mess with this one I will change
just because it's something that I do
you don't have to do this at all
but I like my opponent to be Unicode
okay so I'll save that now my settings
are good but it's not going to do
anything just yet because we want to
either load or auto load the database
and in my opinion you usually just want
to auto load it so inside the auto load
file I'm going to scroll
to the libraries and poppin database
okay and I can go to my application on
their CI tutorial and we have a database
database error occurred because there is
no database called that yet that's good
news so you could either open PHP
myadmin
or something like heidi SQL which i'll
be even today and it looks like I made a
database over here but that's not up to
date I thought I deleted that okay and
it was all right click create new
database and I'll call this CI tutorial
and I always like my stuff in utf-8 and
Unicode okay and again you don't have to
do that so I've got a nice empty
database just chilling here and what we
will do is refresh our page that had to
air and now it's there so that's good
news so let's go ahead and make a new
controller and we're gonna call this
setup I'll call it setup and really what
you'd want to do is maybe delete it
after you set up your thing or maybe
we'll get into that I'm not sure I'm
going to close out these two guys and
with the home controller all this copy
the contents in here and basically if
what this thing of etat means is if
someone knew the exact path to your
application folder than your model name
it doesn't allow them to just access
this page by itself because you know the
system runs through a bunch of stuff
okay and we got to rename our controller
to set up and for index all this echo
one and I'll try going here to setup
good so if you're familiar with MVC
which you should be remember that the
motto of the controller is like the
middleman who talks to the model gets
all the information he wants comes back
and then he talks to the view and gives
it to the view so we're gonna use a
model to mess with our database so I'm
gonna create a new PHP file I'm going to
call this setup underscore model and you
should generally follow that naming
convention and CodeIgniter okay and we
create a class setup model and we always
have to extend the CodeIgniter model c i
underscore okay now one thing I will
note is your model name should always
start with a capital letter and then the
rest all has to be lowercase and that's
because code of Nayer tells you to do
that okay so I'm going to do a public
function constructor just because it's a
habit and they'll do another public
function and create database schema
okay and in here just to see if it works
I'm gonna say echo function just a magic
function okay and inside the index what
we have to do to access a model is we
have to load it
now you can auto load models in your
auto loader however I'm not gonna even
get into that so I'll do this load model
okay
so we're telling this low loader class
that we want to load a model we just
type in the name of it and hours a set
up model the name has to match the class
so I'll say this model and I'll go ahead
over here and refresh and here we have
our function name that means the models
being called good and I will tell you
that you can put a comma here and you
could say you just change that to setup
and then it would create your object
inside of here like that if you wanted
to rename them I personally like them
how they are because it's just easiest
to follow and I guess that'll be all up
to you so time to do the database Forge
what I'm gonna do is on this page when I
hit the index page you might want to
button this as hey do you want to set
this up you could say yeah but just to
keep it simple I'm going to have it so
once they load the page it's gonna
install stuff so in the setup model
we're going to do is use the dbForge and
you'll see that to load it we have to
copy this and load the dbForge and
minimize and what we're going to do is
create a database or I mean a schema so
if you look in my database here CI
tutorial what we want is a table and
we're gonna make a user login system
with codeigniter
so this is what we'll do so we have this
loaded and if you look at the documents
it kind of gives you a bunch of examples
it's not that hard to follow but I'll go
ahead and go through it so that you know
so I could have this DB Forge create
table I'll call that user now this is
the last command you run when you're
gonna create a table so we want to
create an array of fields so hopefully
you're familiar with my sequel so I'll
say this AB field an ad field you can
add one fields or many fields or a
string and it's easier just to do a big
little string and I'll call this fields
equals array and what we're gonna start
with is an ID and password
and what's cool is it in PHP 5.4 you can
actually create arrays with just the
little brackets like that that'll be
rows that's available okay so I think
that would be good and basically what
we're doing these are gonna be the names
of our rows and we just put in some
parameters in here so for ID the type
will be int the constraint will be 12
meaning I'll let it be up to 12 digits
I'll do the lemon actually increment
will be true and I want this to be
unsigned I don't want negative values
so you can only have one auto increment
per table there sorry one primary key
actually I'm not sure about how do I
come into the office so for logging
we'll do a type of bar character and
we'll give it a length and I'll say 30
hop someone here and here
email I'll set that to 50 because it can
be longer and for password this has to
do with really up to you how you want to
encode it I have been starting to like
sha-256 and that is 64 characters so 64
I'll just write that and you know this
is similar to you know sha-1 md5 all
that good stuff and we are going to add
field of fields and this is going to
create all the logic for our sequel
insert command and lastly we want a
primary key so I'll say this dbForge and
key and it looks like I forgot it right
here DB Forge add key and for the key I
want it to be ID
and let me look at the docs real quick
when we add a key
the second parameter will be the primary
key if we put true add key true and I
want ID to be the primary key okay so
once i refresh it's gonna give us all
the goods for this so we should get a
table inside of here so I'll go ahead
and refresh and it looks like nothing
happened and I'll refresh here and now
we have a user table so I'll double
click this and here we have ID int of 11
like we set Auto increment and it's the
primary key if you see the key by it a
login password and email cool so that's
a basic setup script you could create a
view for if you really wanted to maybe
public function install inside the
controller and here I'll cut this out
paste it inside the install and inside
of views we could create a new folder
called setup now you don't have to do
your views like this by the way I just
preferred doing this way and I'll call
my setup one default the only thing
about calling your files default like in
a subfolder is you see how I had this
open it's kind of hard to tell where I
am unless I hover my mouse over it it's
just not quick enough so maybe I might
eventually change like the main page
inside of a folder to the name of it the
reason I create folders is because you
might have subsections to it and I think
it makes it a little easier and I'll
make a new PHP file and I will call this
install
so inside of default we're just going to
do an h1 and say ready to install and
we'll just make a link of the echo base
URL and we want to go to setup slash
install actually we could use the anchor
tag in this situation and I'll show you
that let's see if we have that helper
enabled so table of contents and we'll
go to a helper and we are looking for
let me find it one second okay it's the
URL helper which we should have model
loaded so if I scroll down anchor there
it is and that'll just create a easy
link for us and you see we can we
provide the URL what we want to appear
and any attributes it's not like the
most amazing thing but it comes in handy
so let's do PHP echo anchor and I'll do
setup slash install and I'll say yes and
that's the text little appear okay so
I'll go ahead here and refresh whoops we
didn't assign the view in the controller
so inside the controller I'll say this
view or let's just go to the home we'll
just copy this
so we load the header I'll say setup and
set up a slash default and in here can
do setup slash installs okay so back
here I'll go ahead and refresh and ready
to install
yes and that will take us to the install
portion and I want to see the output of
the database forge and we are doing
create a table and in Keith's create
table okay they don't seem to tell us
what happens here's a good thing to know
actually we can do an if not exists
you'd probably want that in an
installation for by setting the second
parameter to true so I'll go ahead and
do that so back to the setup model I'll
go down and it's only going to create
this guy if it's true and I'm not sure
what this returns but I'm gonna try
anyways and hopefully it returns a
result so I'll go back to my setup and
and I'm gonna create a result result
there's all people so here's what's
happening the model runs this and we
return what happens with the create
table and inside the function here it
goes to the result variable now we're
passing that into the view and in the
install view we can go ahead and echo
the result so I could say HP echo result
results so let's go ahead and give that
a whirl ready to install yes and it
looks like it's a 1 which means it's
good I'll go ahead and delete the table
drop I'll go back ready to install yes
okay I don't know if that's always gonna
give us the one or not
let's see 0 rows okay there's our
columns ok so back here that'll create a
little database thing that we'll be able
to reuse over and over if we wanted to
break this up so that it's more usable
we could create a facade pattern and
create like
this database user this database pages
and what we would do is we would cut
this out public function so we should go
to private function great database user
pace that guy in there and this way
we'll have a result of multiple things
will go there table private function
that's not gonna do anything right now
but it'll be good to have there for the
heck of it and since this really isn't
doing anything I'll just put that and to
get a cumulative result what I could do
is a result
plus equals that and we'll start the
result is 0 and from here we will return
a result so hopefully that's not too
confusing on what I just did if we were
to have multiple ones of the who say a
result plus equals this
and we just add those up and return the
total successful results on tables
created you could also have something
like desired results but I won't get
into that don't want to get too carried
away so one thing is since dbForge is
only in this function what I want to do
is just load him up here and you see
remember we're in the model context so
we're in this load TV for Saudi before
it should be available in this the model
so just for safe measure I'm going to go
back and test it I'll go ahead and drop
that table and yes and my result is 1
refresh and there he is just want to
make sure all my little girls there are
created ok and that looks good
so to spice things up before we end this
I'm also going to create a new PHP file
in the controllers and I'm gonna call
this admin and I'm going to just close
the other ones I'm actually just gonna
copy from the home controller again in
the admin right before I'll say Kevin
right now I'm not gonna do a password or
anything just gonna change this stuff to
our admin with our views and I'll create
a new folder call this admin and I'll
make a new file called default and
inside default PHP we're going to create
a form but we're not gonna finish it in
this series it's just to get your brain
thinking hopefully so if I go to admin
there she is and what we have we can
open a form helper table of contents
form helper and we can load it here or
we could do it manually what I want to
do it's just Auto load it because you
usually use a lot of forms on something
so I'll go to config auto load and this
way it's always available helpers I'll
do form ok and actually have to look at
the documents because I don't have this
all memorized
ok so PHP
and what we're gonna do is create
something so first we're going create
user oops it's freezing up on me don't
crash NetBeans please not sure what's
going on with NetBeans I installed 7.1.1
and I installed everything on it
and I mean it's it's the big kahuna
right there alright so maybe if I close
it I don't know what's going on
okay I just reloaded that bad boy I have
no idea what happened so we were in our
admin controller and our admin view and
I'll go ahead and say h1 great user and
PHP echo form oh shoot what was it I'll
just do the inputs right now so because
we're gonna do input forms and I want to
do login and I want it to appear will be
empty password and email and let's do a
form submit
and we need the closures for the forum
and okay that's form open forum open
okay and what we're going to post too I
suppose it will be admin / create user
and an admin dot PHP we best make sure
we have a public function create user
and lead for part three because this
video is getting really long so let me
refresh this page and here's what we
have I'll view the page source and let's
see input type text loggin input type
text password input type text email and
a submit button so make sure it does
something okay good and that's a quick
and easy way to create a form and I
think we'll start stop here and continue
the series a little later and thanks a
lot for watching guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>