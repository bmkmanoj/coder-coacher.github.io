<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Union Framework - Realtime Chat | Coder Coacher - Coaching Coders</title><meta content="Union Framework - Realtime Chat - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/JREAM/">JREAM</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Union Framework - Realtime Chat</b></h2><h5 class="post__date">2012-12-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UxcNhLsdeg8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up youtubers today I'm going
to talk about the Union platform I got
the privilege of working on this at work
and I'm going I'm not going to lie it is
awesome and it's not too scary that you
need to run away it is built in Java so
it runs on your server in Java you don't
need like a tomcat database or any of
that stuff and it's a real time system
so you could make real-time games
real-time chat and basically it connects
through a socket and Java support some
multi-threading so this is a perfect
platform to use for something of the
scope now there is a by page and it does
support up to 1,000 simultaneous
connections at a time for free if you
were going to get some enterprise thing
with more than that it's quite pricey
but with the quality of this product if
I actually had something that I had to
make with more than that I would
definitely be interested in it because
this does a lot so to get started we
want to get the union server and you
just download the server and this is
extremely easy to use you just download
this guy whether using Mac or Linux and
once you're done I just extracted it
into a folder called Union and I put it
right here called Union and we have all
these files you won't have this admin
file here and these four files are what
are going to run in stock your server so
in order to do that I was over here and
i'll redo it again so looks like see why
what's eyg win acted a little funny on
me so i'll go to cdc drive workspace
Union list up the files and i'm just
going to dot slash start server bat just
for safety measure i was playing with
this before I did this video I'm going
to stop the server and there we go so
now I'll do start server
now if you're on Linux or Mac you will
do the SH instead of dot bat well I my
window salt and dot bat okay so now it's
running it just has this big chunk of
text and there it is they're just Chuck
java jar files and it's pretty easy to
get going so the next thing you'd want
to do is go to union server again go to
admin and then download the admin and
you just get the latest one and in there
is your swf file and where I put that it
doesn't really matter but i just put
mine in the same Union folder you can
just drag that swf onto your computer
and since we have our server running my
port is 9 110 and my password is
password and you might be like well how
do I find that out there's a union xml
file that you can edit here's your port
here's your password and you can change
those if you want I'm just going to
leave them as they are so since we have
our application running inside our
console I can go ahead and log into this
boom and this is very sweet it shows us
our server status our rooms rooms can be
made for games for chat rooms people can
join those rooms and people can just
observe those rooms rooms also have some
attributes like when they close or
disappear or how long they can stay
alive we have clients user accounts yeah
you can make user accounts in here
there's UPC messages and this is how it
communicates what we're going to do is
use the JavaScript framework to lay over
the web sockets so it's less confusing
and you don't have to write out these
XML messages so I like to leave this
going while I work on it so I'll go back
on the Union page and they have some
pretty good examples of the client
frameworks
a flash client JavaScript client what
I'm going to use is just the JavaScript
client here called orbiter orbit are
microbes probably if you're more
advanced and familiar with Union where
you would pass in the actual constant
names of values so I'll go to the
download orbiter now is download the
latest i downloaded this guy and i put
it inside of a je s folder inside here I
just renamed the main download to
orbiter and here's all my orbiter files
that you'll see in your zip file so
pretty easy and in my index file I have
right here this is where we're going to
run it what I did was I just included it
the j s orbiter release minimum and what
we can do is go ahead and get started
with that they have some pretty good
examples on their site but i want to
walk you through it so it makes sense so
step one is we got to instantiate
orbiter i'm just going to call it oh
because i always make a typo with the
word orbiter so save our 0 equals new
and we have to type in this long name
space so net one flips net user one da
orbiter dot orbiter like so okay and as
I'm going along out to refresh the page
to make sure I'm not getting any errors
this means orbit there has been found it
just gives you some details about your
connection manager you can change all
this stuff if you want like the
connection monitor we can do that if we
want and it will show you in just a
moment let me first get you into the
help files so the JavaScript client api
reference and we can view the reference
however it's not as in depth in fully
detailed as the flash one and flashes
echamos script just like JavaScript so
they're almost identical the only
difference is you change the word react
or with orbiter you can do everything in
the JavaScript framework as you can in
this one here
so you have all this stuff the thing I
did bring up was about the connection
manager so here it is right here and
they give you nice examples here one
thing about this is it uses a newer
version of ECMO script so it doesn't use
this colon to declare the type if that
doesn't make sense just disregard it and
to follow along when I code it'll be a
little bit easier and in order to get
this the connection manager we do
something like this I'll say Oh which
represents orbiter get and then the name
of the class connection manager okay
it's just like a function so we have the
connection manager and to make it easy
we'll just chain things along and in the
connection manager there's a bunch of
stuff we can set has all these methods
and let's see set ready timeout global
affinity looking for a set auto
reconnect
well I know there's one function I just
don't see it auto reconnect limit is set
to none so if we want to change this
value let's try it dot set auto
reconnect frequency and let's set it to
15 seconds refresh auto reconnect nope
it was not found strange isn't it gay
connection manager set auto reconnect
frequency sorry this is supposed to be
monitor refresh connection timeout auto
reconnect attempt limit I'm not sure
what it I must have the wrong thing in
here connection monitor oh I'm
connection manager there's so many
classes it gets a little tricky so let's
see set auto reconnect frequency right
there like dad looks like I typed it
right ok so I'll refresh and let's see
connection auto reconnect attempt limit
set to none I do not know what the
problem is let's move on we're going to
connect with 0 dot connect and we want
to connect to the host Ron I'm on my
local hole so i'll just say 127 or what
I hold out one remember the port was 9
110 let's see what happens okay check it
out when you refresh orbiter is now
connected and ready and over in the
Union admin we have a new client
connection there let's see if i refresh
there we go the lifetime connections
goes up so you'll know it's working if
you refresh a couple times and this
lifetime connection moves up okay so the
next thing we'll do is when it's
connected we want some ready listeners
to do so i'll say orbiter dot add event
listener
and we're going to add two of those and
we're going to grab this big ol
namespace here whoops looks like I
didn't add that double that one up like
this net1 now orbiter and let's go over
to the docks now remember i told you to
replace the word reactor with orbiter
and these documents are exactly the same
so i'll go to reactor event okay and you
add event listeners to the events you
don't actually get these classes you
just listen on what they do is they and
callbacks and stuff it's a little
different so we want a dot ready and the
dot closed again this is in the examples
but I'm kind of going through it so it
makes sense to you so I'll save orbiter
dot orbiter orbiter event dot ready
function and for this one I'll do close
so when they disconnect so when it's
ready let's see if alert one works i'll
go ahead and refresh alert one it's
connected so next we're going to create
a little live chat room</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>