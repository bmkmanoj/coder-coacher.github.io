<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Setting up a MEAN4+ App (MongoDB, Express.js, Nodejs, Angular) | Coder Coacher - Coaching Coders</title><meta content="Setting up a MEAN4+ App (MongoDB, Express.js, Nodejs, Angular) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DesignCourse/">DesignCourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Setting up a MEAN4+ App (MongoDB, Express.js, Nodejs, Angular)</b></h2><h5 class="post__date">2017-08-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Tw-rskOmcMM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone Gary Simon of course
scepter Oh calm it's late at night
people are sleeping so I'm not going to
be too loud today but anyhow to develop
more robust angular apps sometimes it's
necessary to integrate angular which is
front-end with an actual back-end so one
such popular stack for achieving this is
the mean stack which is an acronym from
the acronym for MongoDB express GS
angular and node.js now all four of
these technologies will allow you to
create powerful apps so the angular team
pushes a lot of updates so with in 2017
angular both gone from version 2 to 4
and ultimately 5 here in December and
because of this it's been difficult for
developers to find reliable mean
configurations and tutorials that will
work with the latest versions of angular
so fortunately I'm going to be doing a
new right now tutorial that will provide
you with a working mean for in soon mean
5 stack and I mean 4 or 5 as an angular
4 and 5 so let's get started so the very
first thing we need to do is to install
node J s o but real quick before we
begin make sure you check out my site
course cetera comm where you're going to
find a bunch of courses on modern design
and development a lot are free and
others you can access for the cost of
buying me like expect each month that
did now also it probably wouldn't hurt
to subscribe here on YouTube and be sure
to make sure the notifications are
turned on alright let's get back to it
so one thing you need to do you may have
installed already maybe you know
something you haven't used in a while
either way open up your console your
command line and type in node - V so for
me it's giving me a virgin number which
means I do have it now if it goes
unrecognized you're going to need to
visit nodejs org and visit downloads and
depending on your OS go ahead and
install the appropriate installation
package and once it's done finished
installing which will give you access to
the node package manager which we're
going to use momentarily reload your
contour command-line and just run node
v8 and it should be all set up and so
that's how you install no
or ya know DJ s so in mean the very last
letter n acronym is for node and that's
all you have to do with that so now we
need to install angular so we're going
to use the angular CLI or command-line
interface to create our angular app so
let's install it at the command line
through NPM so NPM install an angular
CLI - g4 global so really I have to do
this once so I already did this so I'm
not going to run the command but go
ahead and run it if you haven't or if
it's been a while so then we're going to
use it and the way we do this through ng
new as in a new project and then knit
the actual name of the project so mean
alright so it takes a little bit of time
I'm just going to go ahead and pause
alright and once that is finished we're
going to hop into it so CD mean alright
and now once we're in the new project
folder we're going to run a command with
the angular CLI that will create a build
of our project now we need to do this
because our Express server is going to
look for a dist or distribution folder
to serve the file so it's just something
we want to do now to get out of the way
even though we just have the starter
template setup from the CLI so ng build
and I'll take maybe just a few seconds
to do this come on come on come on there
we go alright so now I we have you know
the node J s and the angular part or the
N and the a of mean pretty much ready to
go and setup so now the next step is to
set up Express J s so while we're still
inside of the project folder here we're
going to run NPM install Express and
also body - parser and we're going to
save to our package JSON file as a
dependency all right so it's going to
need to install the Express
package and body parser which is a
middleware for parsing incoming requests
and bodies and you'll see how that works
in a little bit alright so now once that
is complete we're going to hop into our
code editor for the first time and mine
happens to be Visual Studio code alright
so here we are in our new mean folder
and we want to create a new file called
server dot Jas ok so first we're going
to declare a few constants and while I
do this I'm not going to be typing
everything character by character
because that will take quite a while but
I will do just very very very basic
explanation as in terms of what's
happening and also just for your
reference
you can visit I if you're watching this
in YouTube the link in the description
what will take you to the written
tutorial that has all this codes and all
the examples so that you don't have to
sit there and type this as well so the
very first thing I is to define some
constants here and let me increase the
font size just a tad bit so we have
Express we're importing which we you
know you used NPM to install as well as
body parser and then we also have path
in HTTP which were also installed when
we installed these two up here and then
we're creating our constant app which
binds it to our Express server alright
so the next section is I we're going to
have an API file for interacting with
MongoDB and that is this line right here
on line 8 next we have parsers then this
is where body parser comes in we can see
was defined up here and then next we
have I the dist folder location which is
generated when we run ng build which we
already did so we're saying basically
look for the path of dist right here we
also have the API location which is
going to be forward slash API and we
pass an API up here this doesn't yet
exist this file in these folder
structure
which will momentarily after we're done
with this we're going to send all the
other requests to the angular app which
is indexed to the HTML then we're going
to send oops sorry and then we're going
to set the port right here sorry about
that
copy and paste the wrong thing there we
go set the port right here and then we
create a constant of server and then
server
listen down here which will and the
console running we're learning on
localhost and the port of course is set
to 3000 and that's all so let's go ahead
and save this and we're going to now set
up the MongoDB and now you have two
options here for setting up MongoDB you
can either use like a database as a
service something like from M lab comm
or you can set up your own MongoDB
locally on the production and on the
production server so we're going to set
one up locally on the dev environment
which means you need to visit the
MongoDB downloads page alright so that
page is right here I'm on Windows so I'm
just going to select this one and hit
download I've already done this though
so depending on you know your OS make
sure you download the right package
installation package and download it and
then install it it's pretty
straightforward alright so once you're
done with the installation process then
you need to visit the MongoDB
installation page and so I'm just going
to copy this paste this right up here
this is also in the written tutorial
it's going to show you how to install on
Linux OSX and on Windows so on Windows
for instance that will tell you you know
interactive installation let me come
down here right here this is the line
that we're concerned with we need to
start MongoDB so once you install it you
have to start it and you do this at the
command prompt so I'm going to go back
to our thing right here I'm going to
create I'm going to right click at the
bottom I'm using a take onto a console
emulator called commander and it allows
you right-click new console star
and then I'm going to run this right
here okay and don't just ignore all this
stuff
nothing really troublesome in there and
then we're going to create yet another
command proper console and we're going
to run Mongo Exe literally the only
thing that's changing the two eye
commands that we just ran is what the
first one was mah gahd and this one's
Mongo txe so whatever happens when we
run it it opens up the shell so this is
how we access the shell and we control
our database so once we're in there
we're going to run this command to
create a database it's simply use and
then the name of the database so if I
type and use mean it says switch to DB
mean all right now we're not done yet we
need to insert at least one record
inside of a collection so we're going to
put in DB and then the name of our
collection in this case we'll just say
users and then insert and we put it in
as an object and we'll make the first
property here name take the next one
John Doe and hit enter and I'll say a
write result and now it's ready to go so
we can now run show DBS alright you see
one ahead there before when I was just
you know testing and preparing for the
story called mean free and then also our
mean now let's go back to the original
command line in a project folder and
we're going to use NPM to install Mongo
DB and save it as a dependency and then
once we're finished with that I'll just
let that run we go back to our code
editor and we're going to come back and
we're going to create a server folder
inside of there we're going to create
another folder called routes and inside
of this folder routes folder right there
we're going to need
name another one called API Jes all
right so if we go back real quick - yeah
we can see it's ready to go alright so
inside of API Jes we're going to have a
few different imports or constants
rather alright so the first one here we
are importing Express once again our
router from Express router the Mongo
client and an object ID this is useful
for when we're inserting or creating a
data inside of our database so the first
thing we want to do is connect so to do
that we have this line or the series of
line from 7 to 13 right here and all
it's doing is connecting to this
location right here notice that we have
forward slash mean that is the name of
the database that we want to connect to
we're also going to have error handling
and also response handling right here
and then we're going to define our first
endpoint we're going to call it users so
the way we do this this will be for
instance for getting all of the users
and like displaying them all right so
when it comes to create read update for
a crud app this would be read so router
get forward slash users so in the
browser we can access this by going to
momentarily when we run the server
localhost 3004 slash api and that's
defined right here and then forward
slash or whatever it says here users so
then we have the collection we have DVD
collection in users and this is defined
when we ran that DB users insert command
and then we're using dot find - array
and then we take the response of users
and set the response data users and
response and JSON format from the
response so this is successful and this
is if there's an error alright and then
one last final line is module exports
router we're doing this because we're
importing it from our server jes file
all right and then we'll save now let's
give this a go we're going to go back to
here and read node server all right
should say look running a locos 3,000
will go back to here all right and
localhost 3000 for slash API forward
slash users all right so for me it's
showing more than just one result and
that's simply because I ran this before
when I was testing so I had John Doe -
John Doe 3 or whatever so if you wanted
to go back for instance to right here
and then just run Divi users insert John
Doe let me change this to Jane and we'll
go back refresh we can see there is Jane
Doe right here okay so now that's how
you set up you know and get all all four
of those technologies running but how
exactly do we communicate this data that
we're expecting from MongoDB to the
front end of angular well let's go ahead
and create a service file for doing just
that
so let me go back here I'm going to well
let's create a fourth new console CD
code mean and we're going to run ng
which is angular command-line interface
and gg4 generate the type of service and
the name we'll just call it data alright
let's go back to our code editor control
B go to the side here or an app and then
we can see our data
servus TS file okay so to get this
working correctly we have to add a
couple of imports at the top so we're
going to be importing HTTP headers
request options and also our XJS map
operator you'll see how these two things
come into play momentarily we're also
going to define a property of result
type any and then through dependency
injection we have to create an instance
of our HTTP and then we're going to
create a method so we're going to say
get users and we're going to return this
dot HTTP GET and then that API endpoint
that we visited in the browser so API
users and then we use the map operator
we take the response as a result to do
this that result equals result dot jason
dot we only want the data field because
if we go back to our API we'll see that
we have left response equals status data
a message we only want this guy right
here
so we'll say dot data save it then
before we can import this and use it in
any component we're going to go to our
app module file and we have to import
that along with the HTTP I module so to
do that I'm going to import both of
those I'm going to copy this off-screen
so we have our HTTP module here and our
data service there data service goes in
our providers array and HTTP model goes
into the import array we'll save that
and then we go to our app component TS
file which is the one that starts and
loads by default so once again we're
going to import our data service and
we're going to use dependency injection
get an instance of the data service
through their constructor
all right get rid of this title right
here we're going to say users of array
any and then this is where we access the
data services get users method that we
define so this dot data service and then
we can see get users right there and
then we subscribe to it the response of
being this dot users equals response and
there we go now we're going to visit the
template which is app component HTML
just gut everything here put in h1 our
MongoDB is working and then we'll create
an unordered list one will use the ng
for directive let user of users to
iterate through each of these and then
user and then the property we gave it
was name and then save it so we're going
to go back to the console now we're
going to run ng build
all right that's finished come over here
I'm not sure if we made a change to the
server but just in case we did let's
rerun it and then let's go back and now
we can just go to localhost 3000 and
there we go out I set out should be our
but yeah our MongoDB is working and
here's all of the entries and we can see
Jane Doe there was the last all right so
just to talk about you know going
further because obviously when you
create an app you're going to want you
know to do more than just reading you
know you're going to want to do the
other crud operations like creating
updating deleting so I'm not going to go
over that here but the general rule of
thumb you know in terms of what you know
it takes to do that you know might be
easiest if I just bring this over here
and just go along with you about going
further I'm going to increase this just
a bit
so basically oops um in the
troubleshooting my computer's lagging
all right so to handle creation updating
deleting the steps usually are as
follows
we want to modify the server routes API
GS file to include a new endpoint rather
creating updating or deleting depending
what we want to do so that going back to
that real quick to this file right here
so you know this is forget users we
might have another one for updating and
the syntax is all pretty similar with
just some slight differences based on
what you want to do so I'm not going to
go over those but you know you can use
Google just to find out figure out how
to write this code and you would do a
search term like I angular MongoDB
updating in nodejs or something like
that you'll find examples it's it's easy
to get started and then the next step
would be to come to the data service and
then create a method to return and using
this HTTP GET
API users and then map it and then you
go to whichever component you want you
reference it through the data service
and do whatever you want and set up the
template however you want based on what
you're doing and so that's basically it
you will probably run into
troubleshooting problems because there's
a lot happening here usually you know
that's the case you start with your API
file and you head on over to your
browser in the localhost 3000 /ik API
forward slash you know at the endpoint
just to see and make sure that you're
actually getting the correct response
that you want if you're not the problem
is probably somewhere in here you have a
typo whatever if you do but there's
still a problem and you're not getting
you know the results you want there
might be an issue in your data service
file I would take a look there if this
is correct and then you want to check
out your component and what you did to
pay lement you know that given method
and then if it's fine here finally check
out your your template file to make sure
he's using correct property names and
all of that all right so I'm Gary Simon
of course at zero calm and I'll talk to
you guys later</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>