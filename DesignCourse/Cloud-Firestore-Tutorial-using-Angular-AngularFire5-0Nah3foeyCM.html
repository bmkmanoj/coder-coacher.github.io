<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cloud Firestore Tutorial using Angular (AngularFire5) | Coder Coacher - Coaching Coders</title><meta content="Cloud Firestore Tutorial using Angular (AngularFire5) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/DesignCourse/">DesignCourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cloud Firestore Tutorial using Angular (AngularFire5)</b></h2><h5 class="post__date">2017-10-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0Nah3foeyCM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone here is diamond here of
course tetro calm and today is excited
because google recently within the past
few weeks released what's called
wildfire store so google had fire base
which is a real-time database and there
were some obvious shortcomings now
fortunately they released this new
database called clawed fire store so
fire store is real time as well but it
offers several key advantages over the
fire based real time database such as
structure so the fire base real time DB
returned a large Jason tree fire store
stores your data in objects called
documents and these are grouped into
collections so within each collections
you can have sub-collections up to
hundred levels deep and then also
querying this is the best part of fire
store you can query for documents
without having to retrieve all the other
data in the other sub collections so
this means you receive a faster response
there are also some other benefits like
scaling better improved pricing model
and fetching data just one time is also
easier alright so in this tutorial we're
going to focus on creating a simple
angular app using the angular fire 5
library to read and write from cloud
fire store so let's get started
oh but real quick before we begin make
sure you check out my site course cetera
comm where you're gonna find a bunch of
courses on modern design and development
a lot are free and others you can access
for the cost of buying me like a six
pack each month that's it now also it
probably wouldn't hurt to subscribe here
on YouTube and be sure to make sure the
notifications are turned on alright
let's get back to it so I'm gonna go
back to my console here and the
prerequisites of course as always we
need nodejs with NPM to check whether or
not you have it and then if neither of
these or either of these give you an
unrecognized command just go to note
JSTOR download the suitable installer
install the default options reload your
console your command line and then
you'll be able to run these and you have
it and you're ready to go we also
want to make sure we have the angular
CLI or command line interface installed
and this helps us start the angular
project quickly so I the command for
that is npm install an angular ford
slash CLI at latest and then - g for
global that means you only have to
install it once on your machine and then
hit enter i've already installed it so
i'm not gonna do that now let's start
the actual project so i'm going to put
in ng that's how we reference the CLI
new and i'm going to call this project
fire story name yours whatever you want
all right I'm going to a CD into that
fire storage directory and we're going
to install the two required packages
which is angular fire to and firebase so
NPM install angular fire to firebase and
save it as a dependency in our package
JSON file alright once that's done ng
serve which will compile the project
serve it up in our browser just visit
right here localhost to 4200 once it's
done and it will have a project ready to
go with live reloading and all that cool
stuff like that ok so now this next part
we're gonna focus on starting a new
cloud fires to where project now being
that I've already done this and I don't
really feel like having to edit the
video edit the credentials out I'm just
going to focus on the written tutorial
that shows screenshots and describe the
process I just did this yesterday took
all these screenshots from the actual
interface yesterday so visit the
firebase page and by the way you can
find this link it's on YouTube and the
top line in the description and then you
click on get started here that will show
you this once you obviously make sure
you're logged into your Google account
and then you just click add project and
then right here you want to give it a
project name so I just named nine
firestore it'll give you a unique ID of
sorts hit create project and then you
want to click on add firebase to your
web app button and call
the following properties and values and
then save them in a text document for
later use so there's like a little
button right around here behind here
that says add it to your your web
project or your web app you click on and
then this screen shows up now of course
you're probably gonna have to pause me
while you're going through this but
that's okay and then there's some
credentials right here in the middle of
this object called config you're going
to copy these and then paste them in
like notepad or something like that for
later use then you click on this
database menu right here and then you'll
see the real time database this is the
old one that we've all been using or
some of us aleast
and then over here we have this cloud
fire store so try fire store beta that's
what you want to click on after that
we're going to choose test mode so it
says start in locked mode we don't want
to do that we're going to start in test
mode this allows us to start right away
without any type of eye security rules
that are enabled so then click enable
after you choose test mode next we're
going to click on add collection and
this will show up on the I it's actually
a button right behind this module right
here or this little panel you click Add
collection you'll see it's very easy
this screen right here shows up so you
have a collection name that's relevant
to what you want to do we're just going
to assume you know our project is psych
just consists of posts of some sort that
could be blog posts or whatever so we
name a post and click Next
after that this screen shows up called
add data now this simply allows you to
just add some initial data if you want
so one field that we're going to include
is title of type string and you can just
give it a value my awesome title
whatever and then also content like this
would be you know I could blog content
or whatever so again string and then my
amazing content whatever hit save and
then this is what it'll look like
roughly so you have your cook your
collection here posts and then you have
your first document right here and this
is auto-generated ID and we'll get into
how you can create one
one for yourself I'm using angularfire
and then here's the actual data
associated with this document content
and title alright and that's all there
is from that point and by the way this
the flow of this video tutorial would
just be following the flow of this
written tutorial just for your reference
okay so now what we want to do is
integrate firestore into the angular
project so we need to get up our code
editor alright and here's mine I have
the firestore project that we installed
and I'm gonna go to source app and the
app module TS file it always seems to be
the very first file that you start
working in with any angular project and
so what we need to do is import a couple
libraries and add them to the import
section up top alright so those two are
the ones that we used NPM to install and
so here the two lines so we're importing
angularfire module from angularfire 2
and then angularfire store module from
angularfire 2 forward slash fire store
after that we're going to have our
firebase config right here so remember
the credentials I told you to copy and
paste somewhere this is where you paste
them right here these are the same
properties that you know you got from
the the fire store interface so I'm
gonna leave mine out for obvious reasons
but these should all be filled out based
on what you pasted here and then finally
we also just have two imports and that
goes in the import section down below
and that is it right here
so just these two lines so you have
angular fire store module or angular
fire module rather and then angular fire
store module all right I'm gonna save
this oh and before we I continue one
thing I wanted to do change up from the
tutorial just a bit is we're already in
this module file we're going to import
the forms module and the reason we'll be
doing that
which is right here this line is because
one second we're just add this to the
imports as well just beneath here is
because we're gonna have a very brief
form for adding to our fire store and
we're gonna need to use form modules I
and just just for that to work correctly
when it comes to two-way data-binding
all right okay so I just put in my real
credentials and hit the file we won't be
working in there anymore and next what
we want to do is head on to over to the
app component type script file right
here alright so the next process is to
import just I three different things
from the angular fire - fire store
library and that is right here so we'll
see import fire store fire store
collection and fire store document so
these will allow us to interact with
both collections and retrieve specific
documents and so this is the full line
of code right there you want to make
sure that's imported and then also - I
interact with these map into observables
and also we want to use rxjs
the map operator so import those as well
alright and further down we have our
class and let's get our constructor here
and dependency injection we will create
an instance of the angular fire store
call AFS and angular fire store and then
also for now just put our ng on an it
lifecycle hook which anything inside of
here will execute when the component
loads okay so let's start talking about
actual fire store and how to retrieve a
collection of data and really is a
collection of documents so the way we're
gonna do this I is you know obviously
you recalled we imported angular fire
store collection up the top at the top
here and so that's what we're going to
use all right so we're first going to
define what's called an interface which
helps us define the structure of the
data that's associated with our
hosts collection we can do this up here
interface post and what did we have well
we add a title and it's a type string
and content which was type string as
well all right
and then next in our just at the very
top of our class we're going to put post
call or you could just put post
collection and call it whatever you want
and we bind this to an angular firestore
collection and it's a post next we're
going to put in posts and this is going
to be an observable of post array so
you'll see how these two work once we
make the next two calls here so this is
this dot posts call equals and then we
reference our instance of angular fire
store which is AFS so this two AFS
collection so this is a method for
collection and then we simply pass in
the name of our collections and if you
recall we named it posts and then we
bind this top posts to this posts call
dot value changes and we're gonna be
changing this up and using a different
method in the future just you'll see
exactly how that works so let's save
that and we'll head on over to our
component I hit ctrl B by the way for
the sidebar I come up with our template
rather let's get rid of everything here
and we're just getting to situate our
results in an unordered list for now so
UL n g4 we're gonna say left post of
posts and async inside of here we put a
list element of strong interpolation on
the post title property and then
next let's put a br here and post
content and then save now if you go back
to your browser you should see something
similar to this now this of course I
added three different documents so
they're minor so on three years at this
point welp I just have one based on the
title and out of the content that you
chose and that is it extremely simple
stuff now well no this is real time
because on the right I actually have the
the firestore interface up with my three
different documents that are showing up
on the left so the way we know it's real
time is if I just adjust one of these
like let's say this one here this is
that that's the one in the middle just
take a look at that when I click on it
one second and change it whatever update
there we go pretty much instantaneous
all right so next let's talk about how
to add a document so obviously if we
want to list them out we want to know
how to add them as well so while we're
in this template right here let's just
add a form some form elements so input
type equals text and we're going to put
do two-way data binding of ng model and
we'll bind it to a property called title
which doesn't yet exist when we'll
define that momentarily and then also a
text area to hold our content just gonna
copy this paste that in there this is
going to be content again will create
that property in the class as well
and then it's also put placeholder
alright and then finally we'll put an
input type of submit value is at a post
and click so on our click event once
somebody clicks on it will call an add
post method now normally I you would
probably want to use angular's reactive
forms for something like this but it's a
bit more of a setup so you can check out
a reactive forms tutorial through my
site course echelon to learn how to use
that and set all of that up you can just
go ahead and a search bar and just type
in reactive and it'll show up
okay so right now I let's go ahead and
go back to our app component to define
those two properties that we just
referenced so the first one was a title
that'll be a type string and then
content of type string now let's go
ahead and add the add post method
alright so again we reference our
instance of angularfire store and we
also reference the collection called
posts then we use the add method and we
pass in basically an object so title and
this will be this dot title which is
some reference up to here and because
we're using two-way data-binding
whatever is in the title input will be
bound to this property right here and
then also content
and that is it so now if we go back to
our project momentarily we'll see this
really ugly form up here mole fixed is
momentarily I will put in how is it
going all right man thanks click add
post and there it goes
so how's it going all right man thanks
there goes so very very easy I so right
now because I hate how ugly this looks
I want to real quickly add just paste in
some CSS you can find this CSS at the
written tutorial and I'm just gonna
scroll down in this tutorial because I
have that as like a last step so let me
just do that real quick so if you go to
the written tutorial right here copy
just this body right here and we put
this in source style.css save it and
then also there's a few a fair amount of
CSS for the next part and that will be
in their app component CSS so we'll save
make sure both of those are saved and
there we go
looks just a bit better now when you use
the add method right here to the add a
document it auto generates an ID for you
notice that obviously there are some
times or in some cases where you want to
generate your own unique ID in that case
you just change this very slightly so
I'm gonna take this control shift or
shift all and down rather to replicate
it we're going to comment out this line
at the top and we're going to change
just a couple things so we're gonna add
first dot doc and we set the custom ID
here so obviously you would want some
way to make sure this is a unique ID but
we're just going to hard code this in
here after that we change this from add
to set so we'll save it now and that's
the only change we really need to make
and we'll put in here my custom ID
I hope it works alright no I just had to
pause because I realized the data that
was adding was not persisting in the
fire store so if I refreshed it it was
not adding so I went ahead and recreated
a or not recreated but creating an
entirely new fire store database hoping
that would work still wouldn't work and
then out of the blue it started adding
my post so I'm not sure if there was an
issue with firebase itself with
persisting the data either way you can
see my custom ID did work with the doc
and set methods and then I also switched
back just to the add method and that
worked as well so hopefully you guys
want to ran into that issue okay
so let's also move on and let's talk
about retrieving a single document so
sometimes you need access to a specific
document so for instance like in the
case of a blog post like if this were to
be a title or something like a preview a
blog post you retrieve the collection as
we've done here on like a home page and
then when the user clicks on a title
they're taken to the full actual post
now we're not going to do exactly that
but we will demonstrate the basic
concept to show you how to retrieve a
single document no unfortunately our
current posts property that this returns
does not contain the ID if you were to
console.log this the only two properties
it includes are the title and content no
ID so there's no way to really reference
it in order to get it specifically so in
order to return the metadata that's
associated with this which includes the
ID and a bunch of other stuff we have to
make some changes to our code so let's
go back to our component and just
underneath here our interface at the top
we're going to add a new one called
interface post ID extends post and we'll
say ID of type string next we're going
to change our posts property from
observable observable rather to any and
then we have to make a decent amount of
changes here I'm gonna calm at this line
out
at the top and actually this one I did
the wrong one let's just back up here
for a second
it needs to be this one here so this dot
posts is what we need to adjust so
instead of using value changes we're
going to use one called
snapshot changes and what that does it
differs from the previous method of
value changes in that it provides you
with additional document data otherwise
known as metadata and this includes the
ID that we need so it seems like a lot
of work just to get it because we have
to change just a few things right here
so what we do is we use our rxjs map
operator and we'll say actions we're
going to return actions dot map and this
will give us access to the objects or
properties rather so we'll say a
constant of data equals a dot payload so
if you were to for instance i
console.log that actions up there you
would see this entire response that
we're referencing right here so stock
data as post and then cost ID we get the
ID through a dot payload dot dot dot ID
and you would see this all in the
console log so it seems part potentially
confusing but if you can't log it you
would see this exact structure right
here and that's where it contains all
the information so then we return the ID
and data as an object here and that is
it so it seems like a lot of work just
to get the DM ID I wish they included a
way to just include the ID with the
value changes method but you just have
to use snapshot our snapshot changes all
right so let's save that and we're going
to go ahead and go back to our template
real quick because we have to make some
adjustments here so we're gonna add a
click event on the LI so click
equals get post and the post ID because
now we have access to the post ID if you
were to do this without change in that
component class right there before it
wouldn't work so we also have to change
the structure of this this is data dot
title and this is data dot content all
right so let's save that and we're going
to put just underneath this in each one
of a specific post and then we'll put an
h3 of we'll put it in parentheses here
single post now this is a property that
will define here async title change this
to a paragraph this would be for the
content alright so we have to reference
this get post method or create it rather
so let's go over the head and do that
and we just taken the post ID that we
passed as a parameter we'll say this dot
post doc equals this ifs our instance
here doc and then we get post posts
rather forward slash the post ID and
then this dot post equals by the way we
have to define that both of these
properties momentarily this dot post doc
dot value changes all right so let's
define those two real quick
so you want to create from line 27:28
just post-doc and give the firestore
document of type post and then post up
as or observable post really did that up
here previously all right can I just
realize their reference the wrong
property right here it's actually post
all right then save it now if we go back
here and we click on one of these there
we go awesome let's also talk about
deleting a document so let's add a
delete button just to show you how
that's done and it's very easy so just
with our strong we're going to add maybe
a parenthesis and then in a href with a
click event bound to delete post and
once again we'll pass in the post ID and
let's see here and this will be delete
well in that parentheses there then in
our component class delete post post ID
just ifs doc can we get the posts with
the post ID and then simply use the
delete method save it and we'll click
delete there we go
super super super simple all right so
let's also talk about where clauses so
let's say for instance that we want to
return documents in a collection that
meets some sort of criteria so to do
this let's go back here and we'll say
this line right here on 35 this posts
call is a FS collection post this simply
gets everything by default but we can
extend this and the way we do this is
put a comma here after this first
argument and we'll put in ref equals ref
where
and then we open it up in parentheses to
accept I a operator some sort of source
of some sort so we'll say first title
and we'll say equals and then we'll say
some I've got some string value like
score set row so this means it's only
going to return the collection or the
yet the actual documents that have a
title property that is equal to corset
row so if we save this you're gonna see
nothing shows up we can write in
something other than corset row add post
we'll see it is not there however if we
look in firebase or a friar store rather
we'll see it is here but it's not being
returned because it does not meet that
title equal corset row
so if we add course set row instead
there we go very simple so there are
some limitations to this for instance if
we try changing this to not equals that
won't work
I however you can still use operators
like greater than less than or greater
to or greater than and equal to
for instance or less than equal to on
number of values it will work as well
I'm just going to get rid of this here
now aside from where you can also use
other query options like order by you
can limit the results you can start at
and start after end at and then before
and this all helps of course for a
pagination okay so I would say if you
want to learn more about those
specifically you can check out the
official documentation and that is it so
hopefully you know you're able to learn
quite a bit here
you know just using what you've learned
already you could probably build a
pretty robust app in the sense of just
working with firestore and angular so
make sure you check out corset row comm
and I will see you soon with new
tutorials</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>