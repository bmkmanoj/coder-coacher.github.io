<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>3G Managed Modems - WiFi Pineapple Mark V - Pineapple University | Coder Coacher - Coaching Coders</title><meta content="3G Managed Modems - WiFi Pineapple Mark V - Pineapple University - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>3G Managed Modems - WiFi Pineapple Mark V - Pineapple University</b></h2><h5 class="post__date">2014-05-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/LcD9i49kAio" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">3G modems continued this time on
pineapple University final universities
brought to you by hack five and you so
thank you for supporting us directly at
hae shop comm hello and welcome back to
pineapple University as we continue our
series on 3G and 4G modems LTE UMTS GSM
EVDO lots of awesome acronyms basically
Mobile Broadband getting some intertubes
up into your Wi-Fi pineapple without
needing an Ethernet cable or to do
client mode to a nearby access point so
great for so many remote deployments I'm
a huge fan of it I have several modems
on my desk here today we're going to be
playing around with and you know I
figured before we even dive too much
further into those I know that last week
I talked about this modem here this
samsung from t-mobile the assembling LTE
mobile hotspot pro love the folks over
at t-mobile because you can literally
walk into a store and buy a SIM card by
writing your name down on a post-it note
so that's good stuff
gotta love cash for that and this modem
is fantastic for one simple reason and
that is it is a managed modem I'm that's
the label I'm applying to these I'm
talking about modems that handle all of
the connection details themselves so
when I say that well I guess really I'm
pretty much putting two different
classifications of modems into that
managed camp as opposed to what we're
more used to which would be say for
example this guy here this is a this is
a novotel MC 760 it's a very popular
modem here just USB and what happens
with this guy is it just shows up after
you USB mode switch it as a serial
device and that's fine there's nothing
wrong with that and the core of the
pineapple can speak to the serial
devices no problem however there is
overhead in maintaining a connection
quality so you have to manually do those
redials and there's keepalive scripts
for this particular thing and i'm
saying in my experience I have had
fantastic results with managed modems
it's very similar to in fact what you
would do if you just grabbed where are
they haha
burner Android phone and plugged it in
and checked that special box that says
enable USB tethering because you would
automatically get an internet-enabled
interface on your pineapple and there's
two different ways that that can happen
the first is where for instance if you
did that with a burner Android phone or
even this
you know Samsung LTE hotspot pro thing
you will get a interface called USB 0
that's what we showed off last week and
USB 0 is actually what the operating
system brings up which is known as our
NDIS host now our NDIS stands for remote
network device interface specification
and it's actually a proprietary
Microsoft specification it is documented
however there seem to be some other
parts of the protocol that aren't
exactly documented and so while it is
supported by Linux and embedded
operating systems such as the vine
apples I would say that you know it's
actually really good it is there's
nothing wrong with the specification as
far as I can tell because I have
anecdotally at least just you know weeks
of uptime no problems whatsoever with
these connections and I and I like it
because what happens is you plug the
modem in and in the case of this
t-mobile hotspot guy as long as you go
to the web interface and check the box
for USB tethering very similar to what
you would do with an Android phone
checking the box for USB tethering then
USB zero comes up DHCP does it's magic
the pineapple gets an IP address and
it's online that's simple I'm going to
be talking today however about another
kind of managed technology called CDC
ether now CDC ether sans for USB
communications device class and ether is
that device class and that is just
Ethernet right and this is another
have standard this is actually an open
standard from the USB consortium people
and it is a really fantastic alternative
to this Microsoft our NDIS stuff the
semantics those are all semantics the
end-all-be-all is either of these modems
work out of the gate so beautifully with
Wi-Fi pineapple that you don't have to
really think about it aside from say
plugging in your APN and the username
password on your account so we're going
to go ahead and do that right now with a
CVC ether based managed USB modem and
this one like the form factor on this
one a lot more let's take a look here
this is a huawei we're actually looking
at a huawei III five five and look at
that guy is pretty slick I come over
here and you can see basically the top
pops out of off of this guy and it
reveals that you have a place for your
SIM card to go and as well as a little
door here door mechanism for you to pop
in a micro SD card if you so desire
because in addition to this showing up
as ac/dc ether device if you have the
card in there you'll go ahead and be
able to actually use this as mass
storage so you can't go wrong with that
it's kind of awesome otherwise a very
simple device to get set up and so let's
go ahead and do that now I have a SIM
card in here I've got my favorite
t-mobile burner SIM cards in there and
the setup couldn't be easier so what I'm
going to do is actually just pop this
into a USB port that's ok USB port which
means you're going to get it right on
the third try there we go
as I drop the top off okay alright and I
get a couple of blinky blinky x' on that
essentially you got some blinky lights
on this modem and actually right now I
only have it plugged into USB power I've
got two plugged into just a regular
outlet guy one of these we're not even
plugging it into a pineapple yet because
there's one piece of setup process very
similar in fact to the other
here and that is to actually come over
here and connect to it so I'm on I'm on
let's see I'm on my Windows box actually
so I'm switching back and forth between
Windows and Linux real simply here and
I'm going to go ahead and connect to T
Mobile Broadband 10 is what it's called
so I get my connection going there and
it automatically DHCP gives you an IP
address in 192 168 range great and there
we go we get our little connection
status and I can actually go in and do
my setup process
go to settings of course the password is
admin and you'll probably want to change
this and so you can actually go through
the setup wizard I'll just show you
where you set this up essentially you
set up a profile this is kind of cool
because you can actually have multiple
profiles depending on what SIM card you
pop in the guy right now I've got a
t-mobile SIM card in there which is why
I'm using this APN the EPC t-mobile com
usernames internet password is Internet
and pretty much that's all the setup
that's involved as soon as you do that
we'll go ahead and connect there may be
faster APN Studios I'm not sure but this
is working for me great so far and now
we can unplug it there's there's
literally no more setup involved now as
you've probably figured out from that
this is also a wireless ask access point
which is really convenient I think it's
like up to five rate connections or
something like that we're not actually
going to be using the wireless access
point part of it so you can probably
turn that off or let's disable it for
the most part what we're going to be
doing however is plugging it into the
pineapple and using the USB to tether to
it and so for that what I'm using here
is I've got my port pilot plugged into
my Wi-Fi pineapple with this extension
cable and you can actually see that it's
reading as a host PC and so far let's
see data is allowed and it's really not
using any voltage let me go ahead and
plug in this Huawei
and immediately you can see it's only
using somewhere in the 70s milliamp
hours so so far so good 160 oh hey saw
how it jumped up there 160 million
powers 178 so all around pretty good
um I haven't really seen it go much over
200 settling down a bit but what was all
of that about well let's take a look
because I actually have my pineapple set
up here on in the interface and if I go
to network you'll notice something that
is I have a new interface
I have ETH one how did that happen right
ok so back over to the terminal and an
SSH over to this guy and let's just go
ahead and get config tak a you'll see in
addition to eth0 now eth0 were used to
on the Wi-Fi pineapple that is in fact
the built-in Ethernet that I currently
have a cable plugged into but what about
this ETH one guy that is actually but
take a look at my logs
that's my wall a modem so if I do a log
read you'll notice that I have a whole
bunch of debug stuff that I put in here
about finding a new modem but when it
gets plugged in kernel info we have a
new device it's CBC ether that is a CDC
ethernet device and then here we'll
actually see it show up as ETH one so I
just go ahead and say ping google.com or
something like that there we go we're
online there was 0 0 of configuration on
this modem and I'll show you why we're
actually baking this into the official
firmware here soon but for right now
I've just pretty much put together a hot
plug script so let's go ahead and take a
look at that back in my terminal if I go
to slash at C / hot plug D and I think
it's under USB yes I've added a new file
here called 40 - III 55 so let's let's
go ahead and Pat that file
let's nano that file okay so essentially
all we're saying here is we're looking
at and actually there's a debug stuff so
I can probably comment this out but
essentially we're looking for a product
that meets this ID this is actually the
vendor ID and Product ID and if you're
used to mode switching a modem the
traditional way as a serial device will
be used to this and basically every USB
product on the internet every on the
world has unique identifier to its
vendor and to what product it is
and so all we're doing in this instance
is doing a quick if the product is that
then well let's go ahead if the product
was added then and I actually used to
have it as a script file but we're
running these commands that's it all we
have to do is bring up the interface and
I do it with a static IP address of
192.168.0.0 as our default gateway as
190 168 1.1 on that ETH one interface
that just came up and then the rest of
this is just IP tables foo that is just
going to have an able all of the clients
that are connected to the pineapple to
pass through this device as its internet
connection and this very similar to when
we go ahead and remove this I'll come
down here here's the else and so here's
when we remove the device all we're
doing is using a TAC D to delete those
rules and go ahead and restart the
network so if I actually leave this and
we tell we're all on line because I can
get some ping requests and all that
going on if I just go ahead and unplug
this modem and mind you this here I'll
I'll come back here and actually use the
modem so go ahead and I don't we'll just
get a constant pain just a little bit of
network traffic to show because I am so
astound this is one of the reasons why
I'm super impressed with this modem
because look at that that is running at
while in use about 120 milli amps so the
reason that's cool is because I can now
confidently
do a battery budget where I say hey I've
got so many thousand milliamp hours or
whatever it is in my battery pack and I
know that the pineapple is going to take
X and I know that this is going to take
Y and I can actually come up with a
realistic idea of what my potential
uptime will be if I go ahead and deploy
this in a flower pot or something like
that that's pretty cool alright so now
actually I'll just go ahead and leave
those pings running and
as so this is still going and then all I
have to do is unplug this there's no
other configuration necessary come back
over to here and take a look at and
obviously networks unreachable right try
that ping again and we are not on line
all of that happened automatically and
it just shows up as a eth device because
it doesn't know any better it thinks it
has Ethernet it's amazing and no more do
you have to micromanage those modems I
love it this is the huawei III five five
it is on the official supported list I
think it is my new favorite just because
of the simplicity of the setup that you
know zero configuration required the
cost it's actually pretty damn cheap in
fact we may get this in the hack shop
because as an HSPA+ modem plenty of
throughput and just the simplicity alone
so I'm very excited about that and I
will continue to look at the rest of the
modems on my desk we've got some more
wall ways get some nova tells and other
stuff like that but I'm a big fan right
now of these managed mobile broadband
modems so give that a shot take a look
at what's supported at Wi-Fi pineapple
comm slash modems and you know while
you're there just hang out at uni dot
Wi-Fi pineapple comm and then join us
over on the forums we're really friendly
bunch can answer a lot of your questions
so check out some more of the videos
leave some comments let us know what you
would like to see in the future and I'll
keep doing some pineapple videos so
until next time Cheers oh and then I'm
supposed to roll this</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>