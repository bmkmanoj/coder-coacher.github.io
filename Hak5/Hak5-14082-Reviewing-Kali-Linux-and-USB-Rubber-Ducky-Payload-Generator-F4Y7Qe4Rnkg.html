<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hak5 1408.2, Reviewing Kali Linux and USB Rubber Ducky Payload Generator | Coder Coacher - Coaching Coders</title><meta content="Hak5 1408.2, Reviewing Kali Linux and USB Rubber Ducky Payload Generator - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hak5 1408.2, Reviewing Kali Linux and USB Rubber Ducky Payload Generator</b></h2><h5 class="post__date">2013-04-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/F4Y7Qe4Rnkg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this segment of hak5 is brought to you
by domain.com as you can see there's
also compatibility with both windows
vista / 7 as well as newer windows 8
stuff but my host here is running
Windows 7
I do have UAC and I would like it to be
persistent so let's go ahead and choose
number 1 and this is really nice all I
have to do is go ahead and answer a few
simple questions like who is going to be
the admin for this account that we're
creating we're basically adding a
backdoor that we're always going to have
access to so let's call it something
innocuous something the user wouldn't
notice being out of place on their
system and call it evil admin yeah that
sounds about right
and then we can give it a password oh
yeah there we go
nobody would ever guess that and then
it's going to ask where we're going to
send that persistent shell so let's go
over to a new command prompt doing if
config and I see here my IP address is
1070 331 140 so that's where we want to
send it
and then what port we're going to use I
don't know let's use 8080 that one gets
used for everything let's use 8080 one
that'll be even more fun and then again
with what's the IP address of our web
server so the web server is actually
going to be running is going to be
hosting the application that is going to
be downloaded from the W get or sorry
from the PowerShell and executed so in
this case it's the same machine and
what's really nice about this script is
with Kali Linux already having Apache
setup already having netcat and already
having Metasploit and all of those other
things that you need pretty much does
all of this for you which is so cool so
in this case I'm just going to enter in
10 73 31 140 again and we'll ask how
long we would like to delay and the
purpose of that is that different
operating systems will like a different
delay depending on the speed of the
computer things of that nature you know
if it's Linux box vs. windows box
windows takes a little bit longer to
recognizing human interface device so in
this case I'm going to give it a 2,000
millisecond or a two-second delay and
then it says hey if you're using Kali
would you like me to go ahead and move
all this stuff over for you and it's
like yeah let's do that and then we have
the option here of choosing our keyboard
mapping if we're not using English we
can go ahead and use French or
Portuguese or any of these other ones
here I'll use us and it creates our
mother ducking ducky script which is
awesome it'll even offer right here to
set up a listener so literally all I've
done is like enter a few keys in in this
menu boom I now have a listener on 8081
and it pops up this folder and you can
see already we have our inject been so
I'm going to copy that inject up in over
to my host operating system over to a
microSD card that I'm going to put in
the little quacker and while we do that
let's also take a look at this payload
and kind of see what it's going to do
what kind of nefarious stuff to this
machine so continue there
and I have an old inject I've been on
there let me remove that okay
as you can see I've plugged that into my
host operating system not the guest so
we're gonna get to that in just second
but this inject up in file we just need
to put it on the SD card but I want to
take a look at payload txt this is what
we're actually doing here we're going to
do that delay mm to hang out for two
seconds and then we're going to escape
to get out of anything that we may be
and we will do a control escape to bring
up the Start menu a CMD menu and then
string a which I love because that just
does bypasses you AC with a little left
arrow and enter action we disable the
firewall using net SSH we can add the
admin user or evil admin with the net
user command and then after that it's
all just a matter of adding some
registry keys which we can use reg add
to do and these just throw themselves
into the Windows registry to allow us to
get in and we start actually doing our
copying of the netcat VBS then this is a
little VBS that's gonna run this guy in
the background we've got another one
batch file which we'll call it and then
we set everything up with a C script and
then add everything to all users Start
menu programs and start up so that every
single time this computer boots we're
now going to run persistent stop bat and
that will make sure that everything is
all happy so pretty simply and what I
really love is how you know this has
already set up my listener on 8081 it's
really just a matter of copying over our
inject bin file that we just generated
over to the root of our micro sd card so
let's do that
you can see it there on my windows host
and if I come over to my encoder now to
make things super easy on myself I know
I know I'm kind of doing a cheap hack
here but it's fun because I get to use a
tool that we haven't since talked about
since the first season when Moe bik's
came down and that's HFS HTTP file
server there's an awesome little you
know utility for Windows it's a portable
app that basically allows you to run a
web server and then map directories and
whatnot and I've done that for my flash
drive here I can see my IP address is
ends in dot 169 and I'll come over in my
VM and go to ten dot 73 and there we go
and you can see D colon backslash
there's my USB drive and there's nothing
on it and they upload browse choose
myself that inject op bin come down here
and hit upload files and there we go
I know a bit of a cheap hack but hey
that's the way that I'm going to copy my
files from my VM to my hosts in virtual
or VMware I'm used to VirtualBox and
setting up those shared folders but
whatever in fact go ahead and let me
know like what's the kind of crazy ways
that you've just to get a file back and
forth anyway so with all of that I can
go ahead and close this and come over to
Explorer and see that I have that inject
op in there I'll safely remove my disk
and with my listener open and my cursor
in my host operating system I should
just be able to take the SD card out
throw it into my USB rubber ducky and
start injection hid attacking my machine
when we bypassed UAC we're now in the
command prompt getting a little net Sh
on to get rid of that added the user and
now we're adding our keys
everything seems successful so far throw
in that little net cat love PowerShell
to download it and there we go
and in just a moment right over here on
our box hey hey look at that I'm in
windows system32
and I am these are on this machine so
there we go I mean isn't that awesome
so now every time I restart my machine
it's going to go ahead and try to make a
connection to my virtual machine which
doesn't make any sense because anyway
this is because it's in a lab demo
situation but if you are actually
setting this up you dab it on like some
virtual private server or some ec2
instance but every time this machine
boots up its gonna hit that and as long
as netcat is listening on that port
number you're gonna go ahead and have a
shell how awesome is that and how
awesome is this tool I got to give mad
props to Skye's ploy because this is
really fantastic for making you know
ducky script ease of use kind of like
hey these are the scripts that really
work really work well they're so
powerful just answer a couple of
questions get your inject up in toss
that on an SD card couldn't be easier
and I love the integration with Kali
Linux and how everything just kind of
comes together and I'm only scratching
the surface on here so I encourage you
guys all to check it out at the ducky
forums as well as the code of Google
page because if you've got stuff to add
it's really just a matter of tweaking
some config files and then you can add
payloads which is pretty freakin sweet
so with all of that I encourage you to
go over to hack 5 dorg find the show
notes for this and find all the places
you can download and let us know in the
comments what you think take care
budding entrepreneurs startups and
innovators are all turning their ideas
into realities backed by the strength of
a dotnet domain that Nets are globally
understood they're one of the most
popular domain extensions in the world
and a dotnet domain will inject your
business with instant credibility
entrepreneurs and startups are
immediately discovering the advantages
of building their web presence on a
dotnet domain and consider this if you
have a calm while protect your brand by
getting the dotnet as well or if the
dot-com you ones already taken you don't
want to register a 20 character long com
consider getting a dotnet it's the
perfect alternative and you can find
your new dotnet domain at domain.com I
love these guys because they're
affordable Nets are only $8.99 a year
the reliable they're easy to use they're
totally active on social media like
Twitter you can tweet them at domain.com
great customer service makes it
we fun place to do business and the guys
at domain.com want to hook you up
they're huge fans of the show which
means a huge fans of yours so you get
15% off their already affordable domain
names and web hosting all you have to do
is they use that coupon code it's hak5
at domain.com is checkout and you're
gonna get that big time savings so don't
forget use coupon code hak5 and when you
think domain names think domain.com it's
time once again to check port 110
actually know I used to say that when it
was all about feedback a hack five dot
org but it's more so because we have an
excellent community over at Google Plus
and up in our YouTube's action so let's
get into the comments we're gonna start
bringing in some comments from all of
those different places the first of
which comes from Clem um he wrote you
should let people name your guyses van
make it a competition that would be so
cool yeah I totally agree so what do you
think we should call it well the best
I've seen so far somebody actually
mentioned Universal hacker bus yeah
that's pretty good stuff yeah so you've
got an idea you should share it with us
use the hash tag pound hack across
America yeah if you're on twitter i'm at
snubz you can pound hack across america
to me and throw us some ideas yeah how
long do this license plate name yeah
something for the winner we'll come on
good all right next up is Keith W he
said I don't think you mentioned it in
your video but why not hook up your
charge controller to the van electrics
so that while the engine is running the
battery pack is being charged uses a bit
of power hence fuel but if you're
driving it's very very small
that's absolutely right in fact one of
the things with these bigger vehicles is
that you can upgrade to like a bigger
alternator there's a massive one I
thought I could put in this and that is
an option that I may explore later right
now I just want to stick with like baby
steps everything very simple and
incremental and I love the idea that I'm
not really using diesel for energy but
yeah that's not easily that's totally
something I mean in fact when we used to
have like hurricanes on in Virginia and
we'd have like massive blackouts and
stuff my buddy
Jamie and I would always like you know
rock altered or not alternators rock
inverters in our car so yeah rather than
get like a Honda generator or something
we just run an extension cord into the
apartment and have our car sitting out
there running go figure I don't know
that's a fuel efficient but you're
basically driving around in John
generator so our next three comments are
they kind of tie into each other so I'll
just take them all at once so first off
it's Aaron K he said you need to put a
big antenna on the roof for grabbing
Wi-Fi something like a three-foot yagi
or an area for Yogi's of Yogi's also
moon fest - said I hope you're going to
extol external Wi-Fi antennas for CB ham
setup that would be super cool and Jakob
D said you can post all the Wi-Fi
networks that you crack along the way
completely for educational purposes
though and no actual passwords posted ya
know I don't know I don't know about the
cracking part but I have some really
great ideas for ways to make this very
collaborative if you're not going to be
at one of the places where there are
meetups you can still like we've got
live streaming stuff going on we're
going to have a bunch of different Wi-Fi
pineapple and Wi-Fi pineapple like gear
up in there we've got tons of ting 4G
modems keeping this thing online for the
entire trip so that's going to be
exciting and I think one of the things
I'm thinking Wi-Fi wise is I have these
these huge panels that we've got them in
the hack shop these these massive
they're not Yogi's they're not
parabolics but just panel antennas a
directional I want to put one in each
ports or no directions yeah yeah so one
in each four cardinal directions tied to
a box with four alpha radios all
connected to the Internet through a
modem other people can SSH in my kit I
wanna kind of I wouldn't need to talk to
drag Horn of kismet and see what we can
come up with to have telemetry of kind
of like how the Google van picks up you
know dude that would be awesome
yeah so if you've got some ideas of ways
that we can actually use that for more
than just posting to wiggle you guys are
familiar with wiggle dotnet it's where
you can post all of your wardriving Wow
this is gonna be a very long war Drive
yeah so you know tweet those to us get
up on the Google+ community let us know
any way you possibly can we're all over
the Internet's yay now before we get to
the
techno west photo of the week oh we have
a gift from a fan oh we do why don't you
grab that box rings all right yeah maybe
this can be for the winner of maybe we
can but this is from Nathan he sent us
this which has the note quick get your
phones out but we did this one already
yeah he cut it out this is amazing okay
well I'm going to assume that doesn't
say something profane so thank you what
is it oh dude hang on that's not just
it's not just a Thrustmaster you could
install it it's Russ master with a game
port mind you it is a Top Gun
Thrustmaster it's a Top Gun I'm gonna
have to find some way to integrate this
I'll need a game port two USB but you
know what I'm thinking though I could
use this while I'm on the highway you
could the highway to the danger zone oh
my god thank you so much this is awesome
I love flight simulators and I can't
wait to put this to some use the address
is at the bottom if you want to send in
yes especially Jason Applebaum is
looking for some older Nokia feature
phones that are GSM unlocked because
we're doing really fun GS I'm hacking
here in just a bit
and it's one of those things that were
adding to the van so we're going to have
our own private GSM network wherever we
go and there should be a lot of fun good
time I imagine good stuff coming of that
so just putting an APB out there for
that if you happen to have one that you
get that you were going to recycle
anyway otherwise I'm sure we could just
troll liba and find something soon but
I'm really excited to get into some GSM
hacking all right now it's time for the
titleist photo of the week this one
comes from Luke which is not quite a
walk but it's close he sends us photos
of his own tablet with a P and his
antenna wall and he asks how many
antennas does he actually have there and
I think I counted five more in Tennyson
better yeah the more antennas the better
of course and of course if you guys have
photos that you want to share with us
send them over to feedback at hack
or Gwent the subject line techni less or
you could just you know send them to our
Google+ community whatevs also that's a
four-footed alright so trivia this time
yes so did you do trivia last week no I
forgot - all right I didn't think you
would have so I went ahead and skip to
last week's and put it into this week's
last week's question was or two weeks
ago was what is the preferred
communications method used with systems
on a botnet and the answer is the IRC of
course oh yeah although more recently
did you see Evernote was used as command
and control yes there you go about that
I mean pretty much anything a pastebin
could be used anything where you can put
stuff in fact Krios was set up by our
good friend Robin wood uses Twitter hi
there last this week's question is what
does the program elite rap do exactly
you can answer that over at hack five
dot org slash trivia for your chance to
win some hack five swag oh I know I know
Shh don't tell the Internet's they got a
Google it themselves oh I was gonna say
dual core and Dale chase know what Elite
wraps are all about well of course they
do anyway yes but hey if you're like
nerdcore if you like hack 5 if you like
to join the community that we're just so
thrilled to be yeah awesome I went in
the Google+ community and I was like hey
I'm doing a demo of Kali Linux what do
you guys want to do her and they were
just like why should I use this as
opposed backtrack and I'm like because
it's new that's why and and this is also
you know you get it on the the Twitter's
and the Google pluses and whatnot then
you'll find out when we're streaming
live and in come in here and join the
hack wall and it's really fun and
exciting so we just encourage you guys
seek that out and as usual you can email
us feedback at hack 5 org let us know
what you want us to cover if you aren't
on the social network so you can always
email us yep and also remember that you
can support the show directly if you
love what we do Sarah works tirelessly
over there getting all of the goodies
from the hack shop and Sarah we've got
some specials going on this week
hey Shannon and Zarin I'm working hard
back here but I do want to take the time
to tell you about our special we have
going on
it's duckies for eight dollars off so
use the coupon code
ducky pants and go to hock shop calm and
order them awesome duckies yay I love
ducky pants well with all of that said
i'm darren kitchen from also the other
show throughout where org yes you can't
go keep n then pants pants that where
duckies ducky paying out the other way
around that's adorable
yeah yeah okay so with all that said
yeah I'm Shannon Morse
I'm Gary kitchen but I trust your
technical thing I can make it David
thing alright thanks bye bye bye Oh
honestly now it's coming back down how
low can it go
hello can you guess that's me not
knowing at in segment except the size of
season 13 because that that one part
with the thing yeah it was shocking yeah
the cannon yep and then the strippers
the strippers I thought that they were
gonna do really well on YouTube nope
when I get my jazz let me get jazzed up
why do I look purple like ha I'm gonna
use something sneaky Paul won't even
know oh wait</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>