<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Eternal Blue Attack - Metasploit Minute | Coder Coacher - Coaching Coders</title><meta content="Eternal Blue Attack - Metasploit Minute - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Eternal Blue Attack - Metasploit Minute</b></h2><h5 class="post__date">2018-04-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_NBDn-0D4MQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">eternal blue this time on Metasploit
minute Metasploit minute is brought to
you by viewers like you
if you get value from the show and can
spare just a dollar please consider
contributing it Metasploit minute calm
hello and welcome to Metasploit minute
the breakdown on breaking in
I'm your host Rob fuller but you can
call me Moving's today we're gonna be
talking about eternal blue or ms70 no 10
now a lot of you have probably heard
about MSO 8 o 67 that's in 2008 a bug
that was pretty widely known pretty
quickly it's very stable it's a
wonderful exploit that have been has
been around and pretty much every
Metasploit video on the planet has been
used to demo that's particular exploit
now we're gonna be talking about
basically it's its younger cousin and
it's a 1710 and this came out from the
equation group discovered and the let's
just look at it there's a lot of
information about it one of the
particular things about this exploit is
that it tells you when it wins so
winning
however unlike MSO a 267 it's at a
kernel level versus a user level so if
something goes wrong you are blue
screening the box so let's try this out
and hopefully it doesn't blue screen
while I try and do this demo all right
the very first thing is we just search
for eternal blue we have an auxilary
scanner and an exploit so let's just go
with the auxiliary scanner set our armed
host
now the our hosts for us is already set
to the 192 one second like two to three
dot 133 this is our Metasploit able
three box so if you've built Metasploit
of all three as our last two videos have
shown you have something that's
vulnerable to MS 17 no 10 or 0 1 0 the
reason for that is because out of the
gate windows 2008
64-bit is what's built by Metasploit
oval 3 so
let's see if this rings true so go ahead
and run it host is likely vulnerable
with an exclamation point
that's me that means it's probably
vulnerable that exclamation port you
know is important all right
so time to exploit things let's go back
up
scroll up scroll down let's take that
exploit copy it out use options verify
architecture this is important now
Metasploit both two or three is a is a
Windows Server 2008 r2 64-bit this
module is set up for Windows 7 or Server
2008 medicine for 64-bit now eternal
blue itself the MS 10 RMS 17 10 is
actually exploitable from Windows 10 all
the way down to some say XP or 2000 so
however the Metasploit module itself
only handles Server 2008 r2 and and
Windows 7 so if you feel froggy and want
to do some exploit development you can
probably add more targets to this so
let's try this all right we just looked
through all of the groom deltas and
allocations are correct info we can look
through this yep such as a blue screen
of death or reboot can cause instability
so get permission first
alright options set payload payload
windows notice that it selects the
64-bit payload right off the gate this
is a 64-bit exploit so you will have to
if you have a handler running on the
same port with a different architecture
x86 by default then you're gonna have to
either pick a different port or set up
your handler somewhere else so let's do
a Terp retur
and let's do your TCP the reason I'm
picking TCP is only because the
stability of TCP in this particular
instance is better HTTP and HTTPS can
sometimes crash just on itself or are
too big for these types of exploits so
and most of the time when you're
exploiting something like this over SMB
you're not going for a shell to come
back over HTTP so stability in this case
particularly for this kernel based
exploit is important so L port to 888 or
whatever you wish something other than
four four four four make sure our
options are correct again again notice
that I'm taking extra care in this
particular exploit because it is a
kernel level exploit that can crash the
Machine it's a server luckily this is
Metasploit well three so we know that
we're not really worried about it but if
this is a server for a customer you
better make sure that you are okay with
what you're doing and you're definitely
exploitable and whatever crashes can
come back up have your point of contact
on speed-dial all right sending all the
malformed packets this is very verbose
as you can see we have our meterpreter
session winning there we go we're good
we have a show get UID because this is
the kernel level exploit this is
definitely gonna be system no matter
what you do this is this is exploiting
how SMB works in the back end of it and
we got a shell we're done that's how
things are gonna operate on this level
so that's eternal blue and some of the
caveats to running it let me know what
you think email me msf at hack $5 and
stay tuned to Metasploit minute for more
shows like these and a huge thanks to
everyone for supporting the show if you
want to support the show directly go to
patreon.com/scishow stored making the
show even better just for you I'm very
grateful for your support until next
time I'm new Vixen I'll be hacking til
the cows come</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>