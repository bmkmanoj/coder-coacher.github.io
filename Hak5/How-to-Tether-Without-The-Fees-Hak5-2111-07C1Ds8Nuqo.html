<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Tether Without The Fees - Hak5 2111 | Coder Coacher - Coaching Coders</title><meta content="How to Tether Without The Fees - Hak5 2111 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Tether Without The Fees - Hak5 2111</b></h2><h5 class="post__date">2016-11-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/07C1Ds8Nuqo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">turning a burner phone into an open wrt
or Wi-Fi pineapple LTE modem this time
on hack five hello welcome to hack five
my name is Gerren kitchen my name is
Shannon Morse
it's your weekly dose of techno welcome
to the show this is a fun one why cuz
I'm getting really geeky about home
routers and stuff in other words I know
why you're doing this segment because my
ducky segment failed cuz I need to bone
up on some PowerShell but instead I'm
gonna show you guys what I do at home
for the with ease
PowerShell it's gonna be fun it's gonna
get is a really good one so basically we
are going to be turning a burner phone
into a modem for a Wi-Fi pineapple or I
need a there open wrt based thingy
thingy yeah so in this case we are using
a Wi-Fi pineapple however if you use any
other open wrt based wireless router at
home this is a really great option
especially if your cable or dsl modem
ever goes down or for example for some
reason they no longer work for you I
don't know why that would happen or
you're you're like Darren maybe you
don't feel like paying Comcast for both
internet at your home and at your office
yeah is that why we're doing this
segment Darren hey you know what mine
might like inability to pay Comcast
twice has brought on some really good
segments I mean you may recall that it
was it was a couple of seasons back that
we created a point-to-point
long-distance link and that was between
the old firehouse studio and an
apartment that I had gone gotten like a
block away yeah and and we created that
because I literally do not want to pay
for the internet twice when I had it
already here really fast but I fully
understand so why don't we get right
into it I think we should absolutely so
base or turn off you're saying I did I
did so over the years when it comes to
say remote deployments Wi-Fi pineapples
I have tested a plethora of modems here
here oh my gosh I got I got some modems
for you oh look at all the a modem
really good one here's here's a Vodafone
well this one's a freedom pop your nose
oh yeah freedom pop you need to be
mobile the rocket oh my I would still
say that of all of these modems the
that's that's a fun one this is still no
that's version this one this one is
still my favorite deal what is that one
it is a Huawei there's a huawei III 55
alright this is a really good modem
because it shows up a CDC ether or our
NDIS which are acronyms that basically
mean that you plug it in and it shows up
as an Ethernet connection because it's
basically a USB Ethernet adapter to a
managed modem and that takes all of the
trumpet out so you just pop a sim card
in and Bob's your uncle
okay well that said I have found these
to be incredibly annoying are you
creating a little stack it's like a jig
it's it's Jenga okay that's not gonna
last long
um I have found that these are nice but
they're like complicated and expensive
and yeah you can literally today go out
and get for $20 and burn our Android
phone 20 bucks this is this photo right
here is 20 bucks
that's so let's turn it into a modem
okay cuz if not this one we got other
plans for that but you know another one
right just throw in all the tech around
today that's just that's just how we're
rolling today okay so I just figured
let's let's dive into this let's get
this is my my Wi-Fi pineapple tetra that
I use at home for my internet connection
okay and I do so tethering with an old
burner phone
right this is a phablet from Sony that I
don't use anymore button right I've got
a grandfathered prepaid SIM blah blah
blah in there and I get really good LTE
so let's share you're not actually using
your Wi-Fi pineapple for any kind of pen
testing today no but it's the same idea
whether this is whether you're using a
open wrt based Wi-Fi router at em or a
Wi-Fi pineapple for penetration testing
same exact idea here and basically we're
gonna we're gonna get our tubes going
okay gonna connect we're going to
connect our Wi-Fi pineapple to the
Internet through an Android phone so you
have shown all of us
for how easy it is to tether an Android
phone to a Wi-Fi pineapple I mean you
literally just checkbox so it's really
easy so how are we supposed to make this
into like a 20-minute segment oh yeah
there says yes you yeah you know watch
20 minute episodes yeah right in fact
let me let me see if I have where is
that on my computer is it down here yes
there it is
you're right tethering is just a matter
of hitting mobile tethering and then
checking that box for USB tether that's
literally all you have to do we see how
is verifying the account oh no it's so
sad and stuff yeah well actually it's
that that kill advisor but the point of
that is that whole tethering verifying
your account that's no fun yeah cuz the
ISP wants to charge differently for data
that is over USB tethering from the
phone itself alright that's not fun so
what's the solution for this kind of
thing the solution in this case is easy
tether so check this out this is an app
right now that you can grab called easy
tether Pro it cost 10 bucks there's a
version that doesn't have you know the
$10 thing that just doesn't do SSL but
otherwise it's a really awesome tool and
it makes it super simple to setup on an
Android phone and get yourself a
persistent connection to that device so
how do we set up easy tether pros at
just checking a box
it literally is this is it you just
check this box here that says USB under
internet connection sharing settings and
that's basically it the only other real
thing that you might need to do is
enable under developer options USB
debugging Oh
once you have that we can now plug this
into our Wi-Fi pineapple once my
software installed on it and get it set
up so that it will always use that as
its internet connection which means that
those packets make it look like they're
coming straight from the phone so how do
we make the pineapple talk to it there's
a little bit of software we have to
install yay let's get that going okay
let me get this guy plugged in alright
so I've got my Ethernet USB cable as
well as my UART cable there and it's
powered up and this is a brand new one
out of the box ready to go so what that
means is I can now
a shell on it over cereal and I should
probably actually go through the setup
process yeah so here we go to do that
setup getting started okay and then I
press the button and we'll give it a
password really bad one for right now
and we'll call it something like tetra
sure and then accept those and complete
the setup the rest of that is just like
any other wife a pineapple setup
depending on your deployment scenario
and what exactly you're trying to do but
at this point we just want to make sure
that it can get on the internet through
through the fountain our phone so I
guess the next step is to take the phone
that we already have just set up by
installing easy tether and checking a
box that was easy and just plug it into
the USB port so there's that great now
let's go ahead and get connected to the
wife and pineapple I set up the software
so that software you will be able to
find over on the downloads page at
mobile - stream comm these are the get
folks that make easy tether and easy
tether is kind of awesome because it
makes it easy you just want to grab the
latest open wrt version and I'm grabbing
the no crypto version so let me copy
that URL copy link address head back
over to my shell I'll just SSH into it
and I get this error because I have
another pineapple and this is my first
time setting this one up so I'll just go
ahead and run that command which sets
everything up for me and there we go now
I'm on the pineapple you know obviously
the pineapple doesn't have an internet
connection I can test that by you know
pinging something and it's not going
anywhere so let me go ahead and real
quick just get the Wi-Fi pineapple
online so to do that I'm just going to
be lazy and set up a Wi-Fi tethering
under networking scan and I'm just going
to connect it to our guest Network
and refresh and there we go I have an IP
I'll come back over to my shell I'll
ping again great now I just needed to
get it online because I need to W get
that file that I had put in my clipboard
and I'm grabbing easy tether USB know
crypto version yadda yadda for open wrt
easy so why aren't you using the open
SSL version of easy tether why no crypto
ok so basically what this is going to do
is it's going to create a tap interface
between the Wi-Fi pineapple and the
burner phone
that's literally over a USB cable so
you're not even using Wi-Fi or anything
no you're just going through the cable
obviously you don't need encryption I
don't think it's that important if
honestly if you want to get that variant
go ahead it just means that you have one
other dependency to install which is
open SSL big deal but this just prevents
you from having one more dependency and
I just don't think that it's that
important especially considering the way
that we're going to set this up is
similar to how we configure our Wi-Fi
pineapple from previous episodes with
VPN I don't want my ISP knowing what I'm
you know doing you're putting on a VPN
anyway so there you go you don't need to
double up the encryption all right so
now are we going to be installing the EZ
tether app basically Lantana that's it
there's that and then some configuration
stuff and that's some special sauce but
let's go ahead and get it installed
basically now that I've got that zip
file there need to go ahead and unzip
that unzip isn't found by default
because not typically necessary so we'll
just need to install that so do an Opie
kg update which is kind of similar to
apt-get update so it grabs latest
packages and then using opkg I'll
install unzip now though I can't find
unzip because I didn't spell it right
you have to spell it right yep
no unzips unzips unzip now I can unzip
that file and what was it called easy
tab complete for me there we go
easy tug completely yeah it extracted
all the good stuff so of ALS I'll now
see I have a directory CD to 15.0 5 and
you'll see that you have all of these
different CPU architectures and so I
know right basically all of these are
the different CPU architectures that are
by open wrt and so the one that we're
using in the Wi-Fi pineapple happens to
be in a thorough 71 XX which is why I'm
going to CD into a our 71 xx now yours
maybe you're a Broadcom you might have
to go in here if you're using a Sun X I
you might have to go into there if
you're on x86 there you go right so that
that's kind of something cool to realize
ok so then we go into generic and
there's our IP K file ok and an IP K is
kind of similar to like a Deb of you're
used to Debian it's just it's a package
and so we use opkg install and then that
package there we go and it's configured
ok so at this point we can literally
just run it and it will set up the
tethering for us yeah so let's just take
a look at that so if i just run easy
tether tab complete you see it's there
now i'm going to do which easy tether
and you see it's installed to USR slash
bin right so I'll just run easy tether
tactic help so you can see some of the
options and there's really not much to
it you you literally just want it and
there we go and it's waiting for ADB
authorization and then over on the phone
all I'll have to do is the very first
time you ever do this it will pop up
this thing saying do you want to trust
this key fingerprint and you'll get that
little pop-up you've probably seen it
before it's like hey if you just do
trust this particular device check the
box that says don't ask me again yeah
hit OK
and now everybody is happy and come back
over to the computer and it says that it
is now connected and it's what you do
background cool we that's easy yeah ok
it was easy tethering so what happens
now
you probably want to set up some
configurations right yeah so it is our
new Wham and we're going to actually
have to edit our network configuration
file to make that always our Wham
so let's go ahead and do that so if I go
and nano slash slash config slash
network
I'll see these are all of the different
network interfaces we have we've got the
land we've got USB we've got LAN
we've got WN I'm going to go ahead and
actually comment out this existing man
that's basically what this is is this is
our wide area network and it's using
eth0 which in the case of the wife of
panel tetra is your rj45 Ethernet jack
akavit right so instead of using that as
our primary internet connection we're
going to use the new interface for our
easy tether so I'm just commenting that
out it's typically looking for DHCP and
actually these values I'm going to go
ahead and use those because they're
pretty much what I'm going to want so
let me uncomment those and it's still
going to be called wanne because that
way I don't have to setup any new
firewall rules the firewall rules are
already configured for a win interface
okay the name of it is easy tether - -
tap I believe lamia
does it have to be easy tether - - tap
no it doesn't have to be if you actually
go through easy tether tak-tek health
you'll have the option to name it
something else if you really want oh but
if I do an if config you'll see what it
does is it creates a new interface
actually it's if config tech a because I
want to show all of them and it's
actually tap - easy tether so let me go
ahead and copy that
alright and so let's go ahead and nano
that at sea config network again and
change that from easy tether - tap - tap
- tap - easy tether all right and
actually the reason why I had to do and
just save - that the reason I had to do
it if config - a is because you see that
this tap easy tether does not have an IP
address it's not online and that's
because we didn't have those network
settings now that we do we're saying
every time you every time you set this
up go ahead and assign that tap easy
tether to the win interface and use DHCP
to get an IP address and set up that
interface how so at this point I could
actually restart the networking so Etsy
and knit D slash network restart or I
could just reboot the pineapple either
way it's now going to pick that up and
use that interface as its new wide area
network connection okay so how do we
test it then well basically just like
any other
interface is really no different than if
this were an Ethernet cable it just so
happens to be that it's over us being
over us your phone do a phone so let's
go ahead and take a look so basically if
I now run if config now that I've
restarted that networking you'll see
that tap easy tether has an IP address
of 172 16 or sorry
119 161 17.2 and that's what it got from
my phone so if I were to say ping dot 1
which I'm just going to assume is the
phone
there we go that's me hanging the phone
and now that ping 8888 I'm well come on
would have been connected except I
messed up my routes when I went ahead
and uh when I was doing the USB when I
was doing the Wi-Fi tethering just
because I was like being cheap and
didn't want to SCP a file over so I'm
just gonna reboot the plan up which is
gonna make this like stupid simple to
fix because I don't feel like going
through a bunch of IP tables and there
you go that's that's for me to you all
that worry you know what though it gives
me an opportunity to to show you what
how you can fix a hung a ssh session oh
because now that I'm rebooting my
pineapple and I'm actually having to
unplug not just the regular power cord
but also the u.s. because that right
because it can power over USB yeah so
now it's now it's turned off right I'm
going to go ahead and boot it back up
trigger and get my serial and my
Ethernet plugged back in as well okay
now I have a hung session I'm hitting
Enter nothing's happening
here's the trick if you hit tilde then
period then enter it's going to go ahead
and kill your SSH session try that any
SSH session maybe I really don't want to
but for a hung 1 tilde enter boom
connection - it's closed and everything
is happy now because now I can just SSH
back into it and actually you know what
well that's well that's waiting
going to show you the other way to get
into it which is over a cereal so
mini-com is an awesome cereal program
you'll probably have to you know install
that it's it's not included in most
distributions but it's an amazing
program
so mini-com tak a sh s for setup and
this is specific to the Tetra because it
is cute
USB serial built-in yeah it is so we
just setup the serial port on this cute
little configuration that's what that
dash S was and you want to just go ahead
and point it to slash dev slash TTY USB
0 mm-hmm it might be or USB one of your
special right if your spell if you have
like another USB serial device already
installed and then what you'll want is
11
v 200 for your baud rate and a 10-1 and
I go ahead and disable both hardware and
software flow control so those settings
right there what you're going to want
okay and you can actually save those as
your default by hitting that and that
way every time you open mini comment
we'll use those so you would do it
without the - schools are setup and it's
a cute little serial terminal if you hit
enter you get okay planet login yeah and
there we are and that's that's over
serial right which is which is funny
that's really good yeah I think it's a
super nicety yeah might as well right
okay and the so nothing so moving on
okay one last thing about mini-com it to
exit it you'll notice down at the bottom
left control a Z for help control la and
then Z you're going to get this nice
little menu and that's where you're
going to be able to you know say run
Kermit or any of the other old old
serial stuff okay so you rebooted the
Wi-Fi pineapple but is it still
connected to the easy tether app or are
you're going to have to reconnect it no
it is not so you actually have to run
the easy tether program to initialize
that link and if we take a look here
basically if I I don't know if everyone
if config you'll see that it's not
listed so what I need to do is go ahead
and just run easy to tether USB again
and then it goes ahead and creates that
connection and now I can you know I can
if config and I'll see that it's up if I
do a for instance route
I'll see you that it is my default
and if I wanted to I could W get
example.com and that would just go ahead
and download index.html from example.com
my favorite web page in the world where
I can now cat that file and say oh look
it's HTML from the example domain yay RM
exemple index dot HTML otherwise let me
go ahead and ssh into it is well and
there now I have two shells one over
serial and one over SSH okay so now that
the Wi-Fi pineapple and all of its
clients are online through the phone
we're done right I wish I could say that
no we're gonna make it better we're
gonna make more resilient and we're
gonna mask our traffic and go through a
VPN so all right yeah doesn't know what
we're doing that would be a good thing
today right um
yeah in fact this is where you should
reference a hack five episode 2013 and
2018 yes which is nine twenty seventeen
and eighteen those are episodes because
we do seasons because we're weird like
yeah we do but if you follow along with
those you'll end up with a client Dovie
PN file which is a single login file for
your Open VPN connection so that you can
connect to your Open VPN server up in
the cloud which is awesome right so
let's go ahead and do that alright so on
my pineapple here I will need to opkg
and update and opkg install Open VPN and
it's not just it via VPN there's like
something else I forget what it's called
opkg list grep for Open VPN and it's
there we go it's open SSL so opkg
install Open VPN - open SSL great now I
just need that connection file so I'm
going to go ahead from another terminal
and I have it right here I can LS client
dot o VPN and I'm going to SCP that over
so SCP client a VPN says you're going to
copy this file over
CP which is over SSH - root at 172 1642
dot one I'm going to put it in slash
root now we come back over here to my
pineapples terminal and PWD I'm in /
root ILS and now I have my client to VPN
which means I can now connect to my Open
VPN server very simply by just doing
Open VPN and then pass it that client
ovp and file but actually to make this
even better we're going to make a
connection script okay because this is a
task that we're going to repeat and
there's a couple iptables rules if you
remember from that episode that are
going to make this a lot easier so I'm
gonna go ahead and we're going to write
some code let's write some code yay
let's speed it up hah well there we go
see I'm awesome at typing very fast or I
was editing magic it saw me so oK we've
gotten all this setup now how do we know
that the traffic is going through the
VPN well currently it isn't because we
haven't actually dialed it but let me
show you a fun little tip and this is
what I typically do and let me know well
what your method is but let's come back
over here and we're going to write a
little script that we're going to put on
a web server so let me save this file
and I'm just going to go ahead again
into another terminal like this one and
ssh into an ssh into the server and CD -
daran kitchen this is a web server that
I run which is an awesome website and
everybody should go and check out during
that kitchen guest domain name ever and
I'm going to cat this file IP dot PHP it
is a very simple script it's literally
just this one line of PHP uh-huh Wow
all it does is it echoes back this
environment variable or I guess not an
environment variable it's a server
variable from PHP which gives you back
your remote address so what that means
is for instance if I were to W get that
file well in this case I'm running it on
the server that it's running on so now
why would that work here let's do it on
the Wi-Fi pineapples so from the Wi-Fi
pineapple is W get Darrin dot kitchen
slash IP dot PHP and I'll do this
without the tak Q keys you'll see
basically the tag Q says hey don't show
me all this stuff because I really
care and it creates a new file called IP
PHP right here if I cat that I'm not
going to get PHP code I'm going to get
the output of it which in this case is
an IP address and that IP address is
from the modem yeah so that's the actual
IP address of this cell phone registered
with whatever tower right yeah yeah of
course not the Open VPN so keep that in
mind the one that we're looking at right
now ends in dot one one one cool IP
address bro let's now go ahead and chmod
plus x that VPN connect Sh that we just
created and when we run VPN connect that
Sh
there we go setting up our VPN server
connecting up in the cloud
this is where you reference season 20
episode 19 and 18 and initialization
sequence is complete yeah means yay
it is now our default route is over tun
0 going through our VPN connection cool
and again we can test that by running
again that W get and actually let me let
me delete it because there's currently
cat IP dot PHP right and end up one one
one so now let's remove IP dot PHP and
rerun that W get right here and this
time with the tack queue and now when we
cat I P dot PHP you'll see that it is
not one seven two five eight VPN cuz of
the VPN yeah so we're done right I feel
like we're not no Shannon I have to make
it better okay right I mean how do you
make it better
uh let's do a keepalive because as we
might this is really annoying as I I
discovered this because t-mobile likes
to throttle bandwidth if it's streaming
video so you'd be watching like YouTube
or Amazon or Netflix or whatever trying
to chill and yet you're getting for ATP
which is no love you need to click right
there if you're watching on the youtubes
and then you want to click the 1080p cuz
that's the good stuff
so I noticed that um that if I run
everything through a VPN then they don't
track they don't shape my traffic cuz
they don't know what you're doing is
they're know what I'm doing and it's
none of their business anyway yes why we
set up the VPN but
you can dies then suddenly your Netflix
session turns into buffering and no
one's chilling and having any fun
yeah you got a Netflix and chill me
that's what we're gonna do okay right
we're going to call it chilled Sh chill
right so let's go ahead and touch chill
Sh that's awkward why not there are a
lot of awkward commands in Linux that
one's not installed right now anyway
point is what we're going to do is we're
going to go ahead and I'm gonna use Nano
to to take a look at this and what we're
going to do is write a little script
that's just going to be a very simple
while loop so we'll do like of course
start it out with a shebang bin bash and
that yay
let's do while true so basically always
do done okay so everything that's in
between this is just going to continue
to do its later it's gonna do a thing it
is going to do until it tells it not to
do and we're going to have it sleep for
10 seconds so basically all this does is
if I do echo hi and then change this to
a sleep one yeah keep on saying hi yep
hi hi hi hi yeah I was annoyed bash
script ever let's make it better okay
let's replace that with a nice little
remember that W get yeah let's go ahead
and do that W get again but this time
we'll put in an if statement so if you
whatever you put in bash in side of
dollar sign paren paren is similar to
what you may have seen with back ticks
in the past yeah this is the old style
you don't want to do this that'll break
a lot of code this is the new style so
basically we're going to say if whatever
this is in this command is going to be W
get tack Q Darren kitchen don't use my
server use your own IP dot PHP I'm going
to rename that file later and then after
we're done with that we're going to also
cat IP dot PHP and then once we're done
with that we're also going to remove IP
dot PHP right ah okay all this is doing
is it's an
and saying hey do this right and we're
going to check the output of that and
say if it is equal to what did I say
it's one 38.1 server I'm using this week
that's 16.1 right and then n bun
brackets boom semicolon yes yeah my
colons my colon semicolon thank you so
this is happening then else Phi so
that's that's how you do an if statement
in bash right so we're going to say if
it does this then out an echo cool Rho
and then else echo not cool bro right
right right and that and then it's going
to sleep for like at ten seconds I don't
want to like hammer my server save that
exit remember that and then remove that
IP dot PHP that's already there and now
let's run that chilled and it's going to
say cool bro and then in a few seconds
that's funny
yeah cool bro kÃ¼bra you're still cool
are you still cool yeah okay let's move
back let's make the script smarter and
then okay cool bro cuz that is just it's
still going oh that's so stupid I know I
am the master of terrible shell scripts
uh let's make it do something more
interesting so what this is saying is if
our VPNs what this is doing is this your
name Diane is working and the IP address
matches this one then everything must be
cool
yeah Anne is up so somehow you want to
make it tell you that it's cool yeah
yeah let's actually umm echo with a TAC
end so it doesn't do a carriage return a
period I don't know because we're weird
got into / temp / VPN log so now we have
a nice little log file set every time
it's up it'll write a period into it
okay and when it if else right so if
it's not if the VPN is down then we'll
do a plus or an asterisk or a or ampere
that carrot I don't know we'll go with
something that looks different than a
period so you know if like the app
crashed for example yep then you would
that it would have had to restart
exactly got it so now when I cat slash
temp slash VPN log
I'll see I just have a single period and
if I change that sleep to sleep one and
run that guy again and leave it going
for just a couple of seconds you'll see
that when I cat slash temp slash VPN dot
log
yay so if I come back it's working I'm
wondering like what's going on with with
a VPN I'll see when it went down and
when it came back up yeah that's awesome
yay okay so let's actually have it bring
the VPN back up if it in fact dies oh
yeah right
because if it dies you don't you don't
want it to just sit there yeah we're
going to say VPN is down not cool bro
and in this case we're going to log it
to the thing and we'll do a kill all -
nine Open VPN which kills that process
and then we're literally just going to
rerun /root slash VPN Connect that Sh
with an ampersand and call it a day and
change that to a ten so every ten
seconds it runs this so every 10 seconds
is going to check the IP address it's
coming from if it's not coming from that
IP address then it's going to run this
that's it alright so let's go ahead and
now run chilled is H and everything is
chilling yay mmm yeah that's really cool
we're done are we done no no okay well
of course there's a few little
configurations obviously of course like
I've just been testing with this this
isn't ready for deployment so is this
gonna happen every single time to boot
now no oh we've just been doing this
interactively yeah make things happen
every time we boot we need to put it in
our RC local file let's take a look at
that ah okay like kill the chill I'm a
kill chip I'm a chill killer right I'm
going to Kat / XE / RC local this is a
file where you can put commands above
this line and they will run every time
you boot so the commands that we will
want to run are obviously our VPN
Connect and remember it's just easy to
either USB is the actual command
that we want to add into there I would
typically just like if I were to add
this into a file I would just echo that
and with a Wacka Wacka 2 @ c or c dot
local yeah so there you have VPN connect
is H yes and so we'd want to echo
I don't know / root / VPN connect Sh
with an ampersand and we would want to
put that in exerc local okay okay and
when we cat that file again you're going
to notice there's an obvious problem
with this which is that on first line
yeah an RC local has to end with x0 I
could use said or something else to fix
that or we could just use nano because
we're awesome and I'm just going to cut
that and then paste it okay so I'm being
lazy and there we go okay right so now
every time we boot up that VPN connect
Sh will run awesome as well as our USB
tethering or easy tether okay that's
very cool yeah and then are we probably
want the chill script to also run on
boot so let me go ahead and have that
yes okay so finally everything is set up
we have the Wi-Fi pineapple tethering to
the phone we have the VPN going and
restarting if it ever dies so now I can
go get some food right no by the way
like when we're recording it's like 2:30
in the afternoon she still hasn't eaten
she's really frustrated really I'm gonna
wrap this up as soon as possible because
she might like attack but we have to
make it very Shannon hungry you angry
that's a hangry snubs hangry um okay so
what do we do now you know that we have
to make it better obviously I mean we
haven't you make it working but let's
fix it because it's not broken no it
would be really nice to be able to
utilize the LEDs on the front of the
Wi-Fi pineapple to be able to tell the
state of the VPN cuz that's a fun
example of talking about GPIO and LEDs
oh okay yeah like that segment I did a
while back there you go lady right yeah
okay well let's take a look at how it
works when we're talking about the
pineapple instead of like discrete
logics and get this we're going to make
our shell script better if we CD over to
sis slash devices slash platform and in
there we're going to see a bunch of
stuff we're going to
gpio to LED GPIO and then in here we're
going to go into leads and in here
you're going to see that we've mapped
them to tetra blue and you know you know
I like red we're going to do a CD to
attach for red ok great
so from here you'll notice that there's
a couple of different files let's cat
that max brightness file and you'll see
that the maximum brightness it can
possibly be 5 yeah yes and if I cat
brightness right now it's set to 0 so
it's off its off ok we take a look there
if you see an LED a red LED here then I
must be crazy no there's no red LED
there so to turn that red let's go ahead
and echo 255 and then just pipe that
into brightness and I'll just turn on
I'll switch to my camera when I hit
enter Boop
oh yeah and I didn't have it oh I see it
here I'll echo 0 into brightness Boop
and then echo 255 back end and there you
go hate the idea so you're gonna add
that to the script so any time it dies
the LEDs will change color yes ok every
10 seconds children SH is like are we
connected to the VPN yeah it's cool
we're connected to the VPN know so it's
like restarting it but I'd like to know
without instead of just being like why
is Netflix buffering is because my VPN
is downs you just want to look at your
router and be like oh red light is off
religiously it's restarting and you know
what I do have the red lights off wait
10 seconds you feed chill I chill out
the Netflix oh well anyway let's let's
see all right so let me get this file
it's due to do I'm just going to copy
this into my clipboard and it's
brightness is the name of the file so
let me come back over to my root right
and I'm going to edit chill once more
and all we're going to do is we're going
to say if you know we're going to be
superfluous this this doesn't
necessarily need to be exactly like this
but whatever into slash brightness right
so that is going to make it read every
10 seconds even though it most likely
will always be and if it's not then up
here we're going to
ahead and make that zero boom and pretty
that up and save that file great so now
when we were on Chile's H is you doo doo
doo doo
it's gonna be red it is you guess it's
connected yay
and I do want to mention too if you're
working with these kind of GPIO LEDs
anything over 0 is going to be on so if
you make it like a go one or something
like that it's also going to be on it
doesn't vary in brightness no not
necessarily just on your column yeah and
this particular platform but certain
other platforms you can change it to
like blink really fast or change vanes
and pulse you have like one of those
laptops where there's like a piece of
fruit on the back of it that like lights
up in white and lets everyone at the
coming-up know that you paid a lot of
money for your laptop you could do that
you can do so many cool things because
we're messing around with Bosch and
having fun and chillin and that was a
lot of fun that is cool it took a little
while to set up but I love the fact that
you can totally make it look like you're
not tough hurry well what I love about
this for me is that now it is tethered
but if it reboots it's going to
reconnect yeah if the VPN dies is gonna
reconnect like there's nothing there's
no more setup involved right you don't
have to you just do that once and you're
good to go right so I know it's been a
half-hour segments or whatever but it
does but you do the work and then you do
it once and then boom you don't have to
worry about it again to mess with it all
right well we're gonna take a quick
break but afterwards we've got a
technology Auto of the week and more and
more do you have brilliant ideas for
phone tethering pineappley apps of your
own where you should bring them to the
interwebs and the best place to do that
is over at domain.com because that's
where you can get yourself a nice domain
name and you know what
squares shannon and i go whenever we
have brilliant ideas and it's because
they have this awesome domain discovery
system that makes it super simple to
find the perfect domain name just for
you and then their checkout process
which is super streamlined and easy
means your website's going to be up and
online in no time flat and best of all
domain comm huge fans of hack 5 huge
fans of yours so they have a coupon code
just for you it's spells hack 5 it's
hak5 and it saves you 20%
check out it domain.com how awesome is
that these guys have been supporting
hak5 for years and years and we love
them so you know even if you're not
getting a domain name today you should
tweet them at domain.com and say dudes
you guys are awesome
for supporting hack 5 and next time you
need a domain name think domain.com
we're back and it's now time for a
technology of the week every single week
we are asking what tickles your tech no
less and you can send us your favorite
pictures over twitter facebook or
instagram even if you want to use the
hashtag hak5 that's hashtag hack 5 so
that you can be entered into the
giveaway so this week ours comes from
Alex
hey Alex alright now putting a hack 5
Wi-Fi dongle to use this is a little
nano dongle that we use and it looks
like you yeah it looks like he has it
plugged in so he can get Wi-Fi from a PI
zero and the PI zero is set up as I
think that's a moisture sensor is bad so
he's got it plugged into his his plant
as a moisture sensor and I'm assuming
that he picks up data through the
wireless adapter I would love to hear
cool more about the project details you
should tweet at us I would love to hear
that and actually you'll need to tweet
at Shannon anyway so when you again your
address and that we can send you a wife
a pineapple tetra that we've been using
on the show today as well as the book
and that should be a lot of fun very
cool and make sure everybody else use
hashtag hack 5 keep sending over your
photos you don't have to at reply us or
anything we'll see anything under that
hashtag so I love checking out your
hacks it's very inspiring and it's
really cool and also I did want to
mention too if you guys have a charity
or if you have a hacker
or a hackerspace or a convention
something that you want us to share on
the show you can send your stickers over
to hak5 org slash
address that's where you'll find our
address where you can send us stickers
yes awesome good stuff thank you guys
for sending those in and I hope
everybody has an awesome November as
things are starting to get all holiday
like holidays Starbucks cups are
becoming green oh they are yeah it's
gonna be playing a look back at this in
ten years and be like were Chatterbox
cups for anyway hi-5 dot org is where
you can find all the information on what
kind of events we'll be going to in the
near future and it's also where you can
find all of our other podcasts as well
as youtube.com slash hak5 right
Metasploit minute tech thing threat wire
act tip all just a ton of awesome shows
waiting for you right now
HHA 5.0 RG if you're looking for what to
do now right now stop watching this show
and watch another one and lastly if you
want to support us as well you can go
over to h EK shop calm that is where you
can find the Wi-Fi pineapple the new
brand new Wi-Fi pineapple ebook which
darin wrote himself
I edited it's awesome so yeah hockshop
calm for all of your pen testing needs
yes and closed also it was on blacklist
oh yeah that was what or no it was the
ducky that was on thought that was the
weirdest thing we'll talk about that
next week and you know what will because
I have a fun ducky script that will
hopefully go along with that because I
love dissecting what like Hollywood does
to try to make things real an awesome
man let's use the reverse shell anyway
um do you know what that means it's
gotten a lot better it's really bad it's
kinda it's gotten slightly better it has
we're no longer flying this is case for
scripts from the actual people that make
the things so that's good that's good
it's a step in the right direction
um and I'm harkening back to the hackers
now we need to get a sub garbage files
we're gonna go find the garbage file
she's gonna get some lunch I'm gonna
thank you for supporting hack 5 all
these years a check a shop.com if you
want to get some cool swag in each rag
and with that oh let me know in the
comments if you have a better tutting
option always always if there's a better
way to do it any of my bash script could
be made
better make it better in the comments
I'm sure it's already turned into three
lines of C with that i'm darren kitchen
I'm Shannon Morse
trust your deck analyst maybe they'll do
it in Perl I mean it would be like 20
lines of Python but you know three lines
Perl would be like actually it'd be like
a single line with a bunch of anyway</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>