<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>LDAP Domain Dump - Metasploit Minute | Coder Coacher - Coaching Coders</title><meta content="LDAP Domain Dump - Metasploit Minute - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>LDAP Domain Dump - Metasploit Minute</b></h2><h5 class="post__date">2018-04-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TTmcFKI6sS4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">held up the main dump this time on
Metasploit minute Metasploit minute is
brought to you by viewers like you
if you get value from the show and can
spare just a dollar please consider
contributing at Metasploit minutes comm
hello and welcome to Metasploit minute
the breakdown on breaking in
I'm your host Rob fuller but you can
call me mu Bix today we're going to be
doing another outside of Metasploit
episode we're going to talk about LDAP
domain dump now this is a Python library
that you can very easily install with
pip so let's do install it hit install
LDAP domain dump yes it's that easy now
I've already got it installed but you
can see what it would install if I
didn't have it installed it's that easy
now you can send this over Metasploit
just like I talked about in other
episodes with routes or or port forwards
or the Sox five are Sox for a proxy but
we're gonna talk about doing it just
directly on the console you can add
proxy change to this and they'll work
just fine so let's see what we get
just by using this thing LDAP to me
domain dump so we got a look at the help
alright so it wants a username with a
domain or anonymous with a password okay
so let's do LDAP domain dump with a
youth with a user of sitting duck not an
admin password of easy stuff and then
just the IP address of the domain
controller on that to 168 80 10
connecting the host binding the host
starting domain dump now this is a small
domain this will take a little bit
longer
especially over I'm interpreter session
or stuff like that but not that much
longer let's look what we got this is
pretty awesome
that's a lot of stuff so it's grep
bubble HTML and JSON format
of the domain computers the domain
policy throwing trusts the domain users
and domain users by group domain
computers by OS so let's look at some of
them so Firefox that's pretty amazing so
you can now tell oh that's a Windows XP
box or oh that's a Windows 2003 box
probably vulnerable the last time it
logged on wow this was pretty recent so
it was created 2015 the SID the
description and you have all these files
it's not like you have to query them
again let's look at let's look at domain
policy now this is the the password
policy for the entire domain so I'm in
an impasse word age max password age the
password complexity turned on or not
minimum password length this will give
you good information about how to crack
the passwords once you have them this
can be done as a standard at our user so
again another tool that you can do as a
standard user together all kinds of
information pull it down look at it
offline don't have to worry about doing
this again so let's look at something
else
let's look at and I should just use an
an for this kind of thing let's look at
domain users by group so why do you
think domain users by group would be
important since you can't answer through
the internet what's this show there's
the administrators you can click on
domain admins it clicks you down to
domain admins you get to look at domain
admins look it's all the domain I'm a
domain admin created 8 change date last
logon any flags that they have don't
expire password this is great
password last set time and their sid
their SIDS actually pretty important
that's one of the things that you don't
get normally by just looking up the
information about a user if you want to
create a golden ticket or a silver
ticket or any other Kerberos ticket that
Sid is going to be important now that
you
everyone SID you don't have to look it
up anymore you just have it with you and
of course I didn't hit and to do any of
that so let's look at one more thing one
of my favorites is the domain trusts so
domain trusts now I don't think there's
gonna be any domain trust oh yeah there
is so I had this domain trust it's the
research domain inside of my test domain
it is in down bi-directional outbound
with enforced that means it's a
parent-child relationship that means I
can actually go from one domain to
another that's I think we've covered
that if not what could have to cover the
Kerberos tickets that allow you to add
Sid history that allows you to get to
another domain if not look it up
ad Security org is a great place for
that information as well sub t + @ su bt
e e on twitter as well as harm joy and
every other person that matt graver
everyone that's doing all this awesome
research around Active Directory
security although too many people don't
list I'm sorry if I didn't list you as
well but this is awesome tool so domain
LDAP domain dumps a great utility to use
whenever you want to just pull as much
information as you can down then you can
grab HTML JSON through it and look at it
later so let me know what you think do
you like these out of sight outside of
Metasploit episodes email me msf at hack
5 org and stay tuned to Metasploit
minute comm for more shows like these
and a huge thanks to everyone who
supports the show if you'd like to
support the show and directly go over to
patreon calm for seismics every dollar
goes towards making this show even
better just for you I'm very grateful
for everyone's support so until next
time I'll mix and I'll be hack until the
cows come home</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>