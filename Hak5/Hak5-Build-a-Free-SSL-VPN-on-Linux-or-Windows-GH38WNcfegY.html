<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hak5 - Build a Free SSL VPN on Linux or Windows | Coder Coacher - Coaching Coders</title><meta content="Hak5 - Build a Free SSL VPN on Linux or Windows - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hak5 - Build a Free SSL VPN on Linux or Windows</b></h2><h5 class="post__date">2009-09-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GH38WNcfegY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this time on the show bypassing
restrictive firewalls with free and open
source virtual private network servers
for Windows and Linux that will have you
connecting back to the home or office
network with just a web browser
this episode of hack 5 is brought to you
by goto assist Express Squarespace and
the united states air force
thanks air force for sponsoring this
show hello welcome to hack 5 my name is
darren kitchen and this probably isn't
what you were expecting to see i'm
actually flying solo today and after
last week's interview with that with
Ryder and you know lurking on motovlog
comm I kind of figured I'd give this a
shot
fun way to open the show so this show
I'm going to be talking about SSL VPN
which are excellent for when you need to
get remote access but you're behind some
you know school corporate whatever
firewalls that prohibit PPTP or IPSec
traffic so see if you can get to a bank
site SSL you know 443 and it should be
all good
Matt unfortunately sick this episode or
this week during the shoot so he'll be
back next week and Shannon had some
awesome stuff with the Kindle but even
having massive problems with that almost
bricked it a couple of times and I think
we got it working out now though with
the help of Judy Franklin and Jason
Applebaum helping with the itsy bitsy
soldering that we had to do so yeah
anyway so I'm flying solo today but hope
you guys enjoy the show so let's take a
look after a quick word from one of our
awesome sponsors
so thus far in our VPN series we've only
been talking about PPTP or
point-to-point tunneling protocol VPNs
and while PPTP is a great and secure
technology in my experience it does have
a few gotchas and namely it's traversing
firewalls and I'll just let you know
from my experience you guys know I'm
assistant min by day you know this is a
fun beer money hobby but you know I got
to support a whole bunch of users and
while we do use PPTP primarily will you
have some employees that go to client
sites that are maybe secure government
facilities and they have some problems
actually getting a VPN tunnel back
through those firewalls so in in that
instance it's it just led me to talking
about SSL VPN and Matt could speak about
this in great detail he also supports an
SSL VPN but one that was pointed out
from the well that we talked about a few
episodes ago and then was pointed out
from the community a lot of emails about
is this SSL Explorer and I thought that
maybe we could you know talk about this
and the evolution of this product and
show you how to set it up both on
Windows and on Linux and show you guys
some basic usage now SSL Explorer has a
lot of people have pointed out as
actually well as Matt pointed out SSL
Explorer was an open source SSL VPN
technology that was then acquired by
Barracuda and basically stopped being
maintained but there was a source fork
over to the name edite and they
continued to maintain it until of May of
this year it was actually brought in
under the wing of Open VPN you guys
remember open VPN from a prior VPN
segment where we actually put together
an open VPN access server well now this
product is being called Open VPN ALS or
application layer software and it's
basically going to complement the suite
of Open VPN technologies along with the
access server and there are other
network layer stuff and it's not really
going to be rolled into from what I
understand reading you know the CEO of
open VPNs comments when this you know
when this merge happened it's not really
going to merge into it's not going to be
brought into the opens
VPN access server product but it is
going to complement it and it's really
good to see them supporting those and
you know getting extra developers on
hand because it is a very cool piece of
software it isn't nearly as as well
documented as it could be but it is so
powerful so let's go ahead and you know
if if you're not really grokking this so
far I thought I kind of came up with a
perfect analogy for what the difference
is between what we were doing before
with point-to-point tunneling protocol
or even IPSec if you will and how we're
going to be implementing an SSL based
VPN and the difference is that you know
in SSL VPN you're just using your web
browser you using you know the
certificates that are already built into
your browser to go ahead and make this
secure connection and you can kind of
think of it as the difference between
using say pop3 or IMAP and a standalone
client like Outlook or Thunderbird to
connect your email and you know do that
securely with the you know with the
authentication and and the and the
tunneling or the security and whatnot an
encryption or you could just use Gmail
Yahoo mail whatever and just do the
HTTPS and from any web browser get
access to those resources so you know
that's kind of the idea here is if you
were able to say at your workplace at
your school wherever get to an HTTPS
site so if you can do want that the long
short of it is if you can do online
banking most likely you're going to be
able to use an SSL VPN because all in
the browser and the only thing required
is Java and in some cases not even that
so let's go ahead and talk about how to
set this up on Windows XP so setting up
an Open VPN a LS server on Windows can
be kind of difficult honestly but it's
not impossible and it can be set up on
you know your Windows XP clients or
Windows Server 2003 2008 or whatever
it's actually made made a lot easier by
Lars Warner we actually put together an
NSIS installer
right here and it makes setting this up
so much easier all we need to do is make
sure that we actually have the Java
Runtime environment
and we're gonna go ahead and do this
here on one of our XP VMs and I'm gonna
walk you through it it's really dead
simple and then after this we'll have
fun in Linux but but seriously it's just
a next I agree next install and once it
starts to service we can actually
connect to the web interface and go
ahead and configure our certificate now
this is going to be the same on
basically Linux and Windows but I'll go
ahead and show you this half of it here
so here we are in our ghetto browser of
choice and we'll go ahead and create a
new certificate and come up with a
passphrase for that certificate nothing
fancy here and we'll give it some
information so this hostname yeah local
lists will do for right now and we get
the option to use either Active
Directory or its built-in authentication
and if we were using the Linux version
we would actually have the option to do
radius over the time being let's just
focus on the built in and we'll
configure our super user and I'm going
to be lame and use admin as the super
user because I I don't feel like coming
up with anything creative right now and
we're going to go ahead and with the
default but you'll notice here that our
port is 443 so if you've got an internet
server service provider you've got like
a residence with cable mode and DSL
something like that that actually blocks
443 incoming you might want to make sure
ahead of time and change the ports
accordingly but we're just going to go
with the defaults to make things easy
for clients so they don't have to hit
colon whatever after the address and
just go with that standard HTTP address
no proxies needed here and let's go
ahead and finish it out and click finish
and now that that's done we can exit the
Installer and in just a few seconds here
it will actually tell this installation
process that we have completed and we
will tell it to install as a service so
we can actually use this just like we
would any other Windows service using
service MSC
which is great because we can then
control it with you know fire demon or
daemon or whatever we've talked about
ways to have fun with windows services
before in the past
there we go that's completed press Enter
key we click finish and it's all pretty
much set up for us we just come in to
add Ito and there we go we can restart
the service we can you know find all
sorts information go to the web
interface now as far as configuring the
system that is nearly identical on Linux
or Windows so this is the point where
we're going to stop with the windows
install and take a quick break and when
we get back we will go through the Linux
install and then find out some
information about basic usage and
actually configuring this that we can
get at our local resources remotely you
probably already know that go to assist
Express by Citrix is the easiest way to
provide instant remote support to
clients anywhere in the world let's see
it in action from my computer I launch
go to assist Express and send the
support URL to the client and then click
the link click run and click yes to join
the session back on my computer I'm
greeted by their screen and can control
their computers mouse and keyboard best
of all in just one click I have a
thorough PC Diagnostics that I can
troubleshoot that PC firm or in two
clicks I can reboot their PC in a safe
mode without ever losing connection and
let's face it that beats the heck out of
driving or flying any day sign up for
your free go to assist Express trial at
GoToAssist comm slash act 5
so now let's go ahead and set this up on
a Linux server my love we are going to
be using Ubuntu actually 8.04 in this
instance and it's the 32-bit edition and
to save some time I've already set up a
VM here with it configured as an open
SSH server and a lamp server so you know
the Linux installers make that super
simple whatever your favorite distro is
just go ahead and get that much setup
and let's go ahead and dive into the
rest so I'm here in bash and it's really
just a matter of getting a couple of
dependencies namely we need Java we need
to get Sun Java 6 and the JDK so I'll
just go ahead and buy in here and do a
little apt-get love I only need to make
sure that we get the JDK and not the and
not the JRE and just as I said last
episode sudo bang bang I'm always
forgetting the sudo I need to just burn
this root but then I'm just gonna Bork
everything I don't know now once we've
gone ahead and downloaded Java and
agreed to the license and installed that
we do need to make sure that we set up
the home correctly so for that will run
export and in our case it's user Lib JVM
Java 6 Sun but that may differ depending
on what your distribution is and I'm
gonna go ahead and also put that in the
path with the slash bin and finally
we'll go ahead and verify the version of
Java that we are running by issuing Java
attack version and we can see there that
we are using one point six there's
another dependency that we're going to
need and that is ant
now ant is kind of like make but for
Java so let's go ahead and get that real
quick so we have our dependencies let's
go ahead and download a detail or
OpenVPN ALS if you will and set that up
so we're going to do that in /opt and
i'll just go ahead and w get it over
from SourceForge
and now we'll untie it now before we go
ahead and install this we do need to
know our IP address because that's how
we are going to configure the
certificate so real quick let's run
ifconfig I'm at 10 1001 97 so I'll keep
that in mind and run sudo ant install
now at this point we are instructed to
go ahead and point our browser over to
this IP on port 28 0 8 0 and that's
where we can go ahead and set up the
certificate much like we did in the
Windows version of this install so let's
go ahead over to our Windows client here
and launch our ghetto browser and we're
greeted by the edite installation wizard
and much like we did in the Windows
version we'll fly right through this
creating our passphrase and setting up
our certificate and we'll go ahead and
use the built in and set up a lame super
user and the rest are defaults now exit
the install and in just a few seconds
this will complete the installation over
here on the Linux side and there we go
now we do want to make sure that this is
installed as a server so it will run
every time that this server is booted so
for that we run sudo ant install service
and we'll start that and now we can
actually start and stop this just like
we you at any other service by running
slash etc' slash in it D slash you know
in this case it's a detail even though
it has changed its name officially to
Open VPN ALS but with a start reached
out or whatever so now let's take a look
at some basic usage and how we'll
actually use this as a client so now
that we have our Linux server setup
let's go ahead and actually configure it
and connect to it as a client and I'm
gonna let you know right off the bat
that this is such a large piece of
software with so many intricacies that
there's no way that we're gonna cover
them all but I'll just go ahead and show
you some basics here and leave the rest
of you guys to explore now to go ahead
and configure this we do just connect to
like we said we can as set it up on port
443 so in this case it's just HTTP the
IP address and in our ghetto browser we
are presented with this warning about
this or
server certificate because we are
actually using a self-signed certificate
rather than actually going ahead and
purchasing one from an authority but you
know let's go ahead and continue and we
set up our user admin with a pretty lame
password and from here we can configure
the users and the other resources that
those users will then have access to so
like I said we are using the built-in
authentication into this we're not using
radius LDAP anything like that
so let's go ahead and create some
accounts so under access controls we'll
click accounts and under actions on the
right we'll click create account and
we're gonna make Bob and that's his
username and his full name cuz his
mother didn't love him and let's make
him Bob at hak5 org and we haven't
actually set up any security grips but
that's fine for the time being give him
a password we're not gonna force him to
change his password and there we go
we've set up Bob now let's actually let
Bob have access to some resources so
what kind of resources would you need if
you're connecting back to your home or
small office land remotely well you know
administrators would probably one access
to some of the you know services the
servers that will tunnel in to
administer it does what our users
probably care about their files and care
about getting to some website maybe
we've got some accounting system set up
using Apache Tomcat and I don't know so
let's go ahead and give them access to
those so under resources here you'll see
that we have just web boards hang on why
do we only have oh my god I can't see
the rest of it because my resolution is
too small give me a second I got a bump
up this VM here wow that was pretty lame
so let's take a look at the resources
that we can give you our users
first off SSL tunnels we've actually
talked about SSL tunneling long ago in
act 5 I think maybe even season 4 most
recently and this makes it super simple
to go ahead and create those which is
under actions create
like create tunnel and we'll give it a
name this in this case it's our actually
our router we're going to create an SSL
tunnel over to our router and the
interface for the person connecting is
actually going to be their local host in
this case it is port 2 2 2 and on this
land that they're connecting to it's 10
1001 on port 2 2 2 we're going to say
that everyone has access to that and
finish and in just a minute when we
connect over as the client you'll see
how we can actually access that but
let's go ahead and set up two other
resources so I'm going to exit this
wizard and choose Network place say
basically a Windows Samba share so we're
going to go under network places under
resources and click create Network place
and we're going to call this raid 1 yes
we will add that to favorites and the
path to this and this is a Windows
network share the host will be 10.10 to
205
the path is r1 we don't in this instance
this is our home raid and we actually
don't need to really worry about the
authentication here so we'll leave that
blank
select next we're going to choose
everyone once again so that everybody
can have access to that even though it's
just Bob and finish exit that wizard and
we're also going to give Bob here access
to our Apache Tomcat server so let's see
if I can actually pull that up here
which one of you is running Tomcat you
may remember this from a few episodes
back just need to get his IP here 10
1000 137 excellent we're going to create
a web forward to that now what that
means is once Bob connects to the VPN
here he can actually connect to that
Apache Tomcat server that's you know
behind the firewall protected and
encrypted with this SSL VPN and there's
a few different types of web forwarding
that we can do here
the one that we're going to focus on
today
is actually called a web replacement
proxy and what that essentially does is
makes the our-our SSL VPN server here
actually handle the connection it's
going to make the connection on behalf
of Bob and then feed it back to Bob
through its connection it's it's kind of
like squid kind of that it does cache it
I'll show you here so let's go ahead and
create this and we'll call it Tomcat add
that to favorites and in this case it's
10 1000 131
pretty sure 137
Oh HTTP colon slash slash 10/10 no 137
on port 8080 and we're just gonna select
everyone and finish out this wizard okay
and there was one thing I forgot to do
here and that was when I set up the SSL
tunnel I did not make it a favor and
you'll see why that's important in a
minute so I've gotta had it edit it set
it as a favorite and save it there we go
so that's all we need to do to get
access to those internal resources on
the management side so let's actually
take a look at what this experience is
going to be like for the client so we
will actually use the same VM here this
Windows VM and I'm going to log out here
and we're gonna pretend we are Bob and
what we'll do is just head over to http
ten 1001 97 presented with her you know
login prompt here and we're gonna give
us Bob and that lame password that we
gave them your account has been disabled
hang on
I have to check enabled under account
see I'm flying right through this and
then I missed the stupid stuff all right
so let's login his Bob and his dumb
password and this is what the user is
greeted with and they can see just you
know their favorites they can change
their password and just really simple
stuff here we have access to the raid so
let's take a look at that so if I click
raid and yes we do want to allow pop-ups
we get a pop-up window here in our
browser and we can actually see all of
the different you know folders and files
that are set up on our raid here at the
hack house so you know let's I don't
know 504 and hey look it's a wallpaper
from episode 5 over 4
you know suffice it to say we can you
know we can edit our files we can upload
we can delete we can you know whatever
we need to do we've got access to our
files here through this web interface
and that's the nice thing about is there
was nothing that we had to install we
just went to this web page it made it
that easy well what about that SSH
tunnel we set that up so that you know
as an administrator we can go ahead and
get access to our servers that way let's
go ahead and connect to that so from our
favorites I'm going to click router and
we're gonna get our Java on so yes we
are going to accept this Java and we now
have access to that router we can
actually pull up putty here and point it
at our local host on port 2 to 2 as we
set up looks and there we go we can log
in it's uh and they where this is
actually our smooth wall that is running
our internet connection here at the hack
house and let's take a look at one other
thing and that would be actually
accessing that Tomcat server now all we
have to do is click Tomcat from our
favorites here we'll get a new window
and there we are and tick and keep in
mind you'll see here we're connected to
10.10 2.1 97 and we're using the
replacement proxy engine and if you keep
going along the address you like
see that we're connected to that
internal server that Apache Tomcat
server so you know it's it's kind of an
interesting way to do web redirection
and there are a few other ways that it
can handle this as well that are outside
of the scope of this segment but I
implore you to go ahead and play with
this it is such a powerful tool and I
look forward to hearing what kind of
feedback you guys have on this oh one
other thing I really want to show you
this is so cool so the argument between
SSL and you know your typical PPTP or
IPSec VPN is that for the clients I mean
you can see how dead-simple this is all
they have to do is open up their browser
go to a web page log in and they've got
access right through their web browser
to those resources and in a lot of
instances they don't even need Java the
only thing that I needed job before was
to initiate that that tunnel so that I
could you know tunnel to my localhost
actually get to SSH on one of my servers
which SSH is secure but anyway now we're
only open and we're only we're opening a
lot less in this instance but then some
people may say well I really would like
a dedicated client and there actually is
one and this is so nifty this is from
I'm not even going to try to pronounce
this web page but you can grab this here
and this is actually a standalone java
based agent that you can use to connect
to this and I think I probably need to
log out of the web based one first
and yes putty we understand your
disconnected but I can go ahead and log
in as Bob using the standalone agent
here
on HTTPS
so there you have it I'm logged in and
this kind of gives you an idea of how
versatile this is if you've won a web
client you got that if you want a
stand-alone agent you've got that it's a
very powerful piece of software and I
hope this really gives you guys some
ideas of how you can use this in tricky
circumstances where you've got firewalls
that are a little prohibitive about what
you can access out as I'm saying if
you've got access to online banking if
you can get to any HTTP site like I
don't even Gmail in most instances
you'll probably be able to get access to
this and everything just goes through
there makes it super simple set up so I
mean just for the web forwarding alone I
think it's an awesome awesome tool to
use so I'm looking forward to hearing
you guys feedback if you have questions
you have suggestions be sure to hit me
up Darren at hack 5 org and for show
notes and the rest of the details about
this segment and any other segments on
the show go ahead and head over to our
site hack 5 org Squarespace is a
publishing system for anyone looking to
build a blog portfolio or any kind of
website their unique drag-and-drop
design tool makes it easy for anyone to
build a beautiful-looking website
without any programming required their
hosting is fully managed so you don't
have to think about servers or patches
Squarespace just launched a new site
importing tool that makes it easier than
ever to move your existing website over
there tool crawls your site preserving
all of your media on there s3 powered
backend if you use a personal domain
your URL structure is maintained meaning
your links won't break in your SEO won't
take a dive so if you're already on
blogger TypePad movable-type or any
platform the transition will be a piece
of cake try out Squarespace free for two
weeks and use code hak5 to get 10% off
the life of your service
not just about wraps up this episode of
hack 5 thank you guys for watching as
always we encourage your feedback so if
you'd like to shoot us a letter go ahead
and do so feedback at hack 5 org what if
you're doing the twitter thing that's at
hack 5 or you can find us on facebook
just you know let us know what you think
what you'd like to see want to let you
know about a new show on revision3 it's
called bike jacker and it is a show that
covers the best of indie video games so
you know stuff downloadable for the xbox
or the WiiWare or the iPhone if that's
your sort of thing you're gonna love
this show it airs Thursdays at
revision3.com
slashed by jacker and we have some
excellent stuff coming up soon here next
week on the show we're gonna be talking
to a ham radio operator about some
packet radio stuff that's gonna be a lot
of fun and and what else oh we've got
some hardware mods coming up with some
you know LCD displays and touch screens
and and Matt's got some ridiculous stuff
that includes fire that I think you guys
will enjoy so so yeah stick around we
will see you guys Wednesdays as always
and you know this is if you guys think
this is kind of neat I think I might
just go ahead and pick this up so darren
kitchen calm for that but anyway until
next time on behalf of matt shannon and
i we're reminding you to trust your
Technol us
so after getting hit by a car I donate
to this organization called the moto
angels I hope you know the riders need
and stuff and I got this cool pin that I
attach to my tank bag you know in fact
that point I really just stick it right
here at 135 where I you know shouldn't
be going it's kind of a reminder but on
a recent trip hello what happened to it
but all of a sudden head came off so I
now have a headless moto angel I think
it works just as good as a charm now
right wanted to let you know about a new
show on revision3 that light is green go
ahead no that light is green that light
is Mun it's green it's green there you
go New Jersey</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>