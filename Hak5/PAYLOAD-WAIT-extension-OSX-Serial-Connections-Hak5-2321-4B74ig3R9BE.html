<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[PAYLOAD] WAIT extension &amp; OSX Serial Connections - Hak5 2321 | Coder Coacher - Coaching Coders</title><meta content="[PAYLOAD] WAIT extension &amp; OSX Serial Connections - Hak5 2321 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[PAYLOAD] WAIT extension &amp; OSX Serial Connections - Hak5 2321</b></h2><h5 class="post__date">2018-01-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4B74ig3R9BE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to act 5 my name is Gerren
kitchen it's your weekly dose of techno
lesson today I have two quick tips for
you when you're building bash money pay
loads or really if you're just doing
anything cool with bash and I'm going to
start out with a cool bash script
provided from the community and I'm
gonna show you here on this guy I know
I'm rockin a Mac today so I'm gonna just
excuse my poor OSX abilities upfront but
let's just go ahead and jump in to the
terminal because I want to show off this
pretty cool script now I've saved it
here as bunny connect SH and if I cat
that you'll see that this comes courtesy
of Nightstalker and what it is is a Mac
serial connector let me see if I can
haha its command shift plus by the way
that essentially makes it really easy to
connect to your bash money over cereal
because in arming mode it is a serial
device which means you can get to its
bash console and typically on Windows
I'd use putty or other programs of those
nature's but on Windows sorry on Linux
and Mac I use the utilities screen or
mini-com but basically screen is an
awesome tool for opening various screens
and it can be used to connect to serial
devices you literally just specify
screen the device the baud rate and in
this case the baud rate is 11 5 200 the
device is going to well depend on your
operating system so on Linux boxes it's
typically going to be slash dev slash
tty USB 0 or possibly tty ACM 0 on a Mac
however it comes out to be a USB modem
okay why not but doesn't matter because
this script makes that super simple for
you so let's go ahead and run it and see
what it does basically you just run dot
slash bunny connect here and it
identifies the device you say yes I'll
go ahead and login Bob's your uncle
there we go
not bad huh ok cool so here's the other
part of this episode which is that hey
hey what no good
this this thing has been driving me
crazy by the way if I look like I
haven't slept it's because this thing is
2 months old so this episode is called
wait which is very appropriate
considering our new friend here by the
way this is peach princess peach so
while working on a payload for the
Nintendo switch I needed the ability to
tell a payload to cool jets until I've
done some input in this case some input
on the screen and as it turns out the
hidden Jackson there's some interesting
possibility for fun that isn't just
games here and I needed the ability to
touch some elements on the screen before
the rest of the payload inject some
keystrokes so I need to tell my payload
to wait but I don't want it to be a
specific amount I don't want it to be
like 10 seconds and then I have to get
it done in 10 seconds or else oh no and
so I wanted to actually say wait until I
give you some input so am I gonna give
the batch bunny some input switches so
let's just go ahead and write a quick
little example of a wait snippet and
then we'll turn it into an extension so
everybody can use it really quick and
easy and fun so I have my bash bunny
here loaded on my Mac here in arming
mode and if I go into my payloads
directory under switch - I'm working
there let's take a look at this payload
ok so there's not much to it yet let me
clean that up
basically let's just pretend that
there's two parts to my payload this
part here where the LED is green and
this part here where the LED is red and
in between there I want to say hey don't
do anything don't continue going from
green to red until I've told you in
which case turns out quick and easy way
to do that is with the switch position
now I know we can get the switch
position using the get extension so
we'll do get a space which underscore
position and basically that gets
whichever position the switch is in so
it'll report back switch one switch to
switch 3 great well now I want to store
that into a variable now typically this
is already stored for us in a variable
called dollar sign switch position and
we're going to store that into a test
variable that Robo reference later so
we'll say test equals dollar sign switch
underscore position
and then we're gonna do a little
infinite loop here so while true done
okay so everything in-between inside of
this wild loop is going to happen until
we somehow break out of it how are we
going to do that well we will begin by
saying do what are we gonna do well do
get switch position well we've already
gotten it right okay but this time we're
getting it over and over and over and
what we're gonna do is see if it has
changed okay so how do we do that simple
if statement if dollar sign a switch
underscore position which is what we
just found out from right here we're
gonna say if that is not equal to dollar
sign test which we've set up here before
we got into our loop then what we're
gonna do is whatever we want we'll say
then break which says get out of this
infinite loop and then we just end it
with Phi great so simple if statement
then we'll just sleep one so that we're
not just like killing CP you don't
necessarily need to be doing it a
million times a second and then done so
this little snippet here is going to
cause the bash bunny to see basically
wait for that switch position to move
before it continues on to green let's go
ahead and test it so we'll go ahead and
save and I will now safely eject the
bash bunny in fact at this point I don't
necessarily even need it to be plugged
into a computer because we're not doing
any attack modes or anything like that
so I'm just gonna grab a battery pack
here and put it into that switch
position now has booted up and it's
sitting there waiting and all I have to
do flip that switch and a second later
nothing happens cuz I got my code wrong
by the way the thing that broke it is
this lack of a space right there in my
if statement so I'm gonna go ahead and
save that eject it and do it again okay
we have a green light and what happens
is we flip the switch turns red now of
course to make this even prettier we can
go ahead and make an extension out of
this which looks like this right here
basically this is wait and now I've got
a function called weight it does exactly
what we had done before
and this I'm gonna do an LED special at
the beginning of it the rest of it is
pretty much what we had just coated and
then we export that as weight like this
which means as long as this guy is
sitting here inside of my extensions
folder then in my payload I can actually
say switch to payload instead of all of
that I'll do LED and G for green weight
LED R for red save that guy simple as
pie well that's just about it for this
week's episode of hack 5 but of course I
would love to hear your feedback please
leave some comments below as well as
heading over to hack 5 dot org slash
payload if you have a payload that you
want to feature or just a cool connect
script and until then Princess Peach and
I say to tuck the rest
seriously I don't I don't know how to
operate one of these any more than I do
a Mac either the next extension I write
is gonna be rollover domain.com has all
your website needs from command dotnet
domains to intuitive website builders so
you can take that first step in creating
an online identity let me tell you
there's no domain extension like a.com
or.net or if you want to brand yourself
domain com has over 300 domain
extensions like dock club and dot space
these guys are huge fans of hack 5
they're affordable reliable we've been
using them for years they've got all the
tools you need to share your ideas with
the world and because they're such big
fans they are hooking you up with 15%
off they're already affordable prices
so get domain names and web hosting and
email and just be sure to use that
coupon code hak5 so when you think
domain names think domain.com</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>