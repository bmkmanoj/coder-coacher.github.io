<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MOSH: High Latency Alternative to SSH - Hak5 2103 | Coder Coacher - Coaching Coders</title><meta content="MOSH: High Latency Alternative to SSH - Hak5 2103 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MOSH: High Latency Alternative to SSH - Hak5 2103</b></h2><h5 class="post__date">2016-09-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mh7oTjV73fI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">high-latency alternatives to ssh and
your USB rubber ducky tips all that in
more this time on hack five hello Logan
hack five my name is Darren kitchen
my name is shannon moory is your weekly
dose of techno list I like how you just
like wah thank you hey I get my Def Con
21 well sure all right very cool yes so
we have some exciting stuff happening
right we do by the time this airs I will
be somewhere in the Middle East doing
fun stuff for a Kurd documentary stuff
that's about it but so more on that
later one that when we can and I guess
that's going to mean interesting
internet connections so I'm looking
forward to it and it's what brought up
this segment of the day which is about
high latency alternatives to ssh
obviously i still need access to all of
my stuff back home of course my ssh
sometimes kind of will kick you off if
you don't have good internet right yeah
i mean i've had problems in the past
especially like hack across america
doing some stuff with like satellite
modems and such yeah so this is a really
fun one i can't believe we haven't
talked about this you know a on hack 5
but it's an awesome utility but first
before I get into mosh notice you have
some goodies over there you do yes I'll
go ahead and read the letter and I'll
give these stickers over to you thank
you so what do we have
pretty cool stickers oh wow okay so this
is from David David says here are a few
stickers from my place to work the lunar
and planetary Institute enjoy your pass
them along that is just about the 747
I've ever seen been enjoying it learning
from it for years that's so cool he even
sent us is like PGP key so don't worry
nice written form nice did you send the
private one or the public one needs to
go right about here yeah awesome
perfect thanks so much I like this one
too and I wanted to mention it because I
figure out what that was so this one is
a boot print on the moon and on the back
it has a little fact that says boot
prints on the moon last millions of
years oh well there you go see we need
to send up some like street sweepers and
start going to like clean the place up
you know right leaving a mess people I
kind of like that it's needs
you know it's like leaving your
handprint in cement when it I mean not
suggesting that you should do that but
this stuff definitely saw wet cement at
the mall recently f5 to a 4d 6a in it
right I'm not telling it okay maybe you
didn't Easter Egg there you go all right
so the program that we are talking about
today is called mosh and you can find
information on that over at mosh org
this is the website for it so basically
what exactly is mosh it's actually an
alternative to SSH that's better at high
latency and intermittent internet
connections which is perfect for you
since you will be traveling there we go
the Middle East and why you would want
to use it is because it will it's much
more reliable at those like high latency
connections and connections that will
drop up and pop back in and it has a
like a lot of really cool features that
you won't find an SSH like the ability
to roam and so what that means is that
your session is actually going to stay
persistent across different connections
so for example so is that including
things like if you're going from land to
Wi-Fi to a different Wi-Fi connection
exactly right you know that's one of
those things is I would always use
screen screen as an amazing utility
checkout screen but the problem would
happen where you start a session say a
hotel and then you move to the client
site and then on Wi-Fi and then you go
to the next place and each time have to
reconnect you have to reconnect which is
why I would use something like screen to
maintain those sessions so again re
login which is no not that bad since you
set up public private key pairs so your
login is a lot easier on SSH
but pamaj allows you to roam so that
connection is going to maintain even
though you have different internet
connections so how does it work well it
works very similar to that we're talking
about in terms of like it's a it gets
you a terminal on a computer it gets you
a remote access to the shell so very
similar to telnet or SSH in forget those
don't use Dom it so it's easier to hack
a printer once well that's fantastic the
printer so you sit on that but but a
similar to secure shell ssh in that it
provides you with that shell but unlike
ssh you're not just relying on say like
a bytes
dream of data coming from the server and
having your client interpret that I mean
in the case of SSH your client is
basically interpreting what it's being
sent and it has to do its best to
remember where the text is on the screen
but if there's like an error
well the server may not know how you're
rendering that and so it's really up to
your client to maintain that kind of
stuff then something goes amiss
it could fall out of sync right you want
to know as a client yes and that's the
big thing about maash that's how it
works differently mosh is all about
maintaining States so basically it's
thick the snapshots of like okay so it's
like you and I we both have you know
like doodles and I'm like okay my doodle
looks like this and then you're like
well okay now my doodle looks like this
and I'm putting a mustache on him and
then I'm like okay cool I got the
mustache right there and we're
maintaining that state to make sure that
our mustaches don't go awry our
mustaches look very different you think
well though I did just shave mine so
that would make sense you guys have no
idea what I have to work with
so anyways snapshots are all about
maintaining that state between the
server and the client and to do that
they use SSP or the state
synchronization protocol basically each
Datagram is indexed the index always
grows so increments number by number
which allows for the roaming and so
basically you get seamless connections
and there's also like a heartbeat every
three seconds so for instance unlike SSH
where your connection drops and you
don't even realize until you starts
typing and then it's like ah broken pipe
basically you get this heartbeat every
three seconds and if there is you know a
disconnect and then your client will be
like dude we've ran into trouble which
is kind of Awesome and we were talking
about the authentication and how I like
to use screen in conjunction with public
key private key pairs when I do SSH so
that I don't have to like type in a
complex password every single time yes
of course goes like that and three
handshakes hey handshake so as long as
there's no man in the middle then all is
good and if there is a minimal it's
gonna break because you know public is
anyway shaking correctly exactly
so like this like it's like this awkward
No enough so so what will so what's
really nice though about mosh is it
actually uses SSH for the authentication
so it's like not trying to reinvent the
wheel we already have great and stuff on
that side so it's an option it's gonna
be as good as SSH it's gonna give it
there you go
yes so let's do a demo alright so let's
take a look at this this box over here
so I have maash installed if you don't
have to get install maash or whatever
you know your particular district
happens to be in fact on the mosh
website they list all of the different
ways to get it installed for the various
platforms OS 10 all every building from
source from source of course but if you
go up you'll see you know Android Chrome
OS Windows cygwin and apparently they
are working on an iOS platform as well
for this so for UI or iOS users out
there you won't be included at the
moment but you will in the future and
what's nice about that is for systems
administrators it means that across
platform all my devices I can have
constant access to my servers so I can
be running this on my phone always have
access to the exchange server or
whatever whatever it is that I you know
need to manage yeah and I know that like
it's always going to be there great so
it's gonna be maintaining that state yay
so installing as you would on anything
you do need to install Masch on both the
server and the client so I'm gonna go
ahead and save the same install it is so
for instance I've got this Debian server
up in the cloud I'm gonna just SSH in as
root because I'm a terrible person and
it's all SSH in and on this machine
twist Avenue I just apt-get install Maj
just like I did on my client I already
have it installed great so let me exit
out of this so you saw for me to connect
it over SSH it was well SSH root
whatever yeah okay you just replace SSH
with Masch really yep against mo ten
occation same authentication and it's
through SSH and boom now we have right
except the difference is and this is
hard to simulate here in you know
in the studio but what's gonna happen is
and it's just much more responsive so
that's highly right easy-peasy
and then you can use it just like you
use it SSH correct exactly yeah so it's
a nice alternative to and in fact if you
have like esoteric SSH commands that you
need to put in addition to this it's - -
SSH so for instance if you have like a
non-standard pour if you've got
necessary server listening on port - - -
- it would be tak tak SSH and then you
would put in SSH tak P just like you
would say 2 - 2 - so you can pass the
SSH parameters with that - - SSA passing
it from SSH over tomash exactly somach
is just using SSH to do that n ocation
and then and then after that it's all
udp-based
somewhere between sixty four sixty
thousand and four sixty one thousand so
yes maj dot org check it out MIT project
really cool and let us know if you guys
have questions about it because there's
lots of really cool gymnastics that you
can do with both mosh and ssh so would
love to hear your feedback and we're
gonna be right back after the break with
a bunch of USB rubber ducky tips from
you guys from a previous episode about
two weeks ago so stay tuned when you've
got that great idea like owning a
computer in fifteen seconds or less you
know that you need to bring it to the
interweb and share it with the world
so please do what Shannon and I do and
that's head over to domain.com these
guys have an awesome domain discovery
system that'll help you choose the right
domain and they're easy checkout process
will have your website up and online in
no time flat and get this the guys over
at domain.com huge fans of hack 5 and
you guys so we have a special coupon
code just for you
it's hak5 that's how it's hack 5 and
it'll also save you 20% at checkout so
check that out isn't that awesome guys
at domain.com are huge fans and we want
to show them support so even if you
don't need a domain this exact moment
you should tweet them at domain.com and
say hey thanks for supporting hack 5 all
these years and when you think domain
names think domain.com we're now back
with a bunch of USB rubber ducky tips
and the first one is from curio stage
who writes just a small notice
PowerShell does keep your run history
and you can get it by three ways number
one is running get -
three number two is checking the file
console host history txt and number
three is simply pressing the up arrow
the first option you have nothing to
worry about since it will be cleared
once you close the PowerShell window the
second one the console host history text
is kept under the Windows PowerShell
history text file and folder and then
you can check where your system keeps
this file by using the following command
Darren do you want to go ahead yeah so
check this out this is actually really
cool and I can actually just pull this
up a notepad and you'll see the console
host history text right there and you
can see a bunch of stuff that I've done
in PowerShell and I write and then the
other way is if I just open PowerShell
and then I go ahead and run that command
and that goes ahead and prints out where
that text file is and he also mentions
to prevent PowerShell from logging any
command you can also use a specific
command which is the set read line
option daran I'll go ahead and let you
type that one in since you're running
that cool so it's the save nothing hey
that is an awesome tip thank you for
sharing that with me I'm going to be
incorporating this into all of my future
USB rubber ducky payloads that use
PowerShell to hide your tracks I like
that yes nice I love awesome YouTube
comments like that our next one is from
Jack crow who writes all this presumes
the computer has internet access a very
good point it does which is why we
showed a twin duck payload version of it
that basically enumerates the USB rubber
ducky is both a keyboard and a mass
storage device and then saves the text
file back to the mass storage never
needing an internet connection and you
can go check out how to do that on ak5
season 15 episode 3 season 15 episode 3
our next one is from Sandy Starchild who
says Nano is the best text editor yes
it is square root says to obfuscate your
command even more you could go and press
down alt space down enter arrow down 1
million times and move the window out of
the viewing area it will move it
underneath the taskbar and then you are
still able to type but see legit nothing
yeah just like pretending it's a mouse
and moving it down it's a really fun
obfuscation technique so I'll show you
right here base
sickly I've got my command window open
if I hold down alt and hit space you get
this little context menu and you'll get
that in any window now you notice that
there's an underline under M s and for
minimize X for maximize so for example I
can hit X right now and it'll you know
make it maximized if I hit alt space
again welcome to windows 101 right or
it'll restore okay well the point of
that though is if I halt space and then
M I'm now in this move where I can use
the arrow keys to move it around okay
well why is that useful well if I do dir
you'll see you've got a bunch of files
here if I do see LS it'll clear the
screen great so I've got a cleared
screen so if I do alt space M hit down
arrow all the way down and then hit
enter you'll notice I can't actually see
the command prompt it's behind the
windows taskbar if I'd now type dir and
hit enter you see nothing on the screen
it's not until ultime see M bring it
back up to the top you'll know that it's
not cleared anymore I actually showed
what I typed it's amazing yeah yeah
corpse devil writes color a and CMD or
command to be a hacker elite hacker
indeed color space a and now a hacker
it's that easy folks in fact if you do
color space star you'll see all of the
different ones you'll see blood do
capital D ok so you want purple yes ok
do color D there you go Shannon yes in
fact you can mix and match these between
the background and foreground so for
example if you wanted bright yellow with
fuchsia F D oh it's terrible wow that
looks like a geocities website for D oh
that's oh so worse console ever
don't ask sabot yes good stuff thanks
for sending those awesome comments and
you guys keep this show fun by leaving
awesome comments like that that's right
I do now I'm looking forward to all the
comments about how actually to them
that's the best text editor but whatever
I like them looking forward to those
well now I like them now that I know how
to use it it's kind of complicated but
what else all right so it's now time for
the technology of the week every single
week we are going to ask you what
tickles your Technol us so you can tweet
us you can Instagram
you can face blur get with the hashtag
hashtag hack five for your chance to win
some awesome gear from the hack shop and
today what did we give an away during
kitchen
yes we're giving away the wat pineapple
nano very exciting we got the studio so
go with it as well as the new book Wi-Fi
pineapple in all these awesome God's
getting your Wi-Fi pineapple anon she
edited it and it's a fun book it helps
you make these two things go together
all I'm sorry I haven't slept in a while
Darren's twelve so my choice this week
is from dork feast at dork feast team a
set dark at dork feast team on Twitter
and he sends this picture awesome
picture of a Raspberry Pi mod with a
couple of Nintendo controllers and a
Nintendo a box for his Raspberry Pi if I
click on this you can also see a little
mini Pikachu in the background because a
Pokemon go get small right I love it I
love the mod I think it's really cool
and I really like that the controller
lights up - that's right legit love that
is so cool I want to know is that a 3d
printed case because I've seen a couple
of these and I love it it's hard to tell
the high resolution enough to see but I
mean why not and you know we were
talking about that amazing arcade
platform that we've just put on this box
here I should lock up so I'm wondering
it was running Locka because it's
fantastic emulator and so I just want to
give another shout out to that yes
because it'll run on Raspberry Pi that's
all your cannulating goodness
so dork feast we're gonna send you some
cool gear from our hack shop I'll be
sending you a demon for that info yeah
maybe you would like to grab yourself
awesome gear from the hack shop you can
do so by visiting a check a shop calm
it's what some port AK five directly we
very much value all of the support that
you guys do we enable is us to make
really cool penetration testing even a
Belarus you're enabling the happening of
the Gibson's I really haven't slept in a
while hok shop calm thank you
you can also visit hack 5 org that's
hak5 org for all of the news and all of
the infos about what we are doing what
events we're going to be attending
and also our shows so you can stay
updated on all of the different shows on
the hak5
right Network five threat wired
Metasploit minute tag thing hack tip
really good stuff as well as you'll find
all our contact info if you want to get
in on the social stuff there and the
details on when we're gonna be at Derby
con or torque on or deep second Vienna
and all of the other fun things that are
coming up checking out a check a five
org a whole 11 year backlog of episodes
so you've got a lot of catching up to do
and if you've seen them all Wow with all
over the I'm gonna get some sleep and
sleep on the plane
I am i hi i'm darren kitchen oh my gosh
okay with all that said I'm Shannon
Morse
press your technology your daring
kitchen trust your techno license bye
are you okay I ran out of thanks I used
them all you ran out of all your thanks
no more thanks if I knock on your head
is it Hollow yeah it's totally Hollow
team snobs</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>