<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Advanced Netcat and TCP Fun - Hak5 1922 | Coder Coacher - Coaching Coders</title><meta content="Advanced Netcat and TCP Fun - Hak5 1922 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Advanced Netcat and TCP Fun - Hak5 1922</b></h2><h5 class="post__date">2016-01-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0JFM3PRZH-k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">would you like to watch an episode about
TCP utilities yes I would like to watch
an episode about TCP utilities okay I
will show you an episode about TCP
utilities this time on hack five hello
and welcome to hack five my name is
Gerren kitchen hi everybody my name is
Shannon Morse it's your weekly dose of
Technol off some very excited to be back
in the studio I am too it's been a while
I missed you guys just got back from Las
Vegas I can't wait to tell you guys
about the big surprise but it's gonna
take nine months I'll give you a hint
ah yes Jenny and I went to Las Vegas and
you'll find out 9 months the big
surprise it's not that yeah I'm sorry
should we start over this is pretty
terrible today's episode we're going to
be covering some awesome utilities that
you can use in Linux we're doing all
sorts of fun magic with TCP kind of
building on some of the stuff that we've
been doing with netcat while back also
by the way if you totally reckon Brooke
and I star three-way handshake for the
cold-open good job yeah so we did a
whole bunch of episodes about netcat on
hack tip I did an entire tutorial and
you can see the entire thing over on
youtube.com slash hack 5 go over to the
hack tips series and there's an entire
playlist of those episodes I'm very
proud of them yes detective Cho's are
pretty excellent place to start Jen does
a great job with that series I hope to
see more of it there's all sorts of cool
like bash 101 and things like that so
what we're going to be doing is cool
things that you can do building on that
kind of stuff as you guys know there's a
lot of cool stuff you can do with netcat
we're going to take it to the next level
as you know for example we can use it to
execute programs and typically we've
done this in the past to do things like
reverse shells which yes you know is a
lot of fun if what you're trying to do
is create like reverse you know how a
connection so you can always execute
commands and get a shell and run
programs and stuff so I don't know let's
just do a brief example here I'm just
gonna do actually need to figure out my
IP address for you for this yes okay I'm
on Windows because I hate myself what I
know right well you can do all of this
and we'll follow up next week with some
of the other way
is to make this more cross-platform love
but we will be focusing on Linux and
Chinon will be the client this time
around
aha so I'm going to run some servers I
am 10.7 3.3 1.1 39 so remember that
it'll come up a few times so if I wanted
to give Shannon access to my computer I
can use netcat to listen on port
I don't know 1 337 because we're leet
today and the tacky will execute any
command and if you're running Linux you
probably have bash it's a slash bin
slash bash and that's what I'm in right
now my command interpreter and so now
I'm just listening for a connection
looks pretty fantastic because now you
can connect to me and then you can like
issue commands and stuff so for this
over on my Windows machine I simply had
to install nmap for Windows and it comes
with NCAT which is the netcat version
for Windows so I just went over to that
directory and then I type in and see 1
to 7.1 is it and 73 to 31 dot 139 139
and port 1 3 3 7 oops 1 3 3 7 and now I
don't know you can issue whatever
command you want but you're on my Linux
machine so if you do like LS I don't
know tak la /ls tunnels okay so I got a
tunnel directory in there but you can do
like LS / I want to go into your tunnels
director you're good let's see LS / ah
yes give me all the things right and
there we go I mean it's a very basic
example not only can we execute programs
but we can also you know execute scripts
and things of that nature and I thought
that would be fun to kind of build on
some of this stuff so let's make a real
quick script here I'm going to cancel
out of netcat for a moment and do let's
see so you see there's nothing in here
but a tunnels directory let me cat EOF
to test sh this is a really fun one if
you haven't already done this so it's
kind of like copy con in Windows or dos
for that matter so she bangs slash bin
slash bash that'll be the interpreter
for this script and
just like you would do in like C
backslash R and backslash n we'll do
some carat returns for us and we'll say
what is your name and then we'll read a
variable called name so it'll actually
ask you for input I don't know we'll use
echo in this case and again we'll give
little carriage returns and say hello
dollar sign name and then the next line
if I do a Oh F here that's going to go
ahead and save that file so right now
file and a file we have test SH like hat
test SH you can see there it is do you
need to modify it um you're right I
actually do I need to make it executable
sorry thanks for reminding me of that
because this would have totally failed
if I not so what do I need to do then is
chmod plus x test Sh execute there we go
so now it's executable so let's go ahead
and share that on the network so that
Shannon can use it so I'm going to again
listen on port 1 through 37 just like
before but in this case instead of bin
bash
I'm just going to do test SH oh so now
if Shannon goes ahead and connects she
will actually get this program script
whatever happens grip this is awesome
okay so I'll I'm still in my end map
folder I'm going to go to and see and
this is ten dot 70 3.31 dot who-ville
one and three nine and then I'll put it
in port 1 3 3 7 just like last time so
this time it's running the script so
it's going to give me what is your name
which he had in quotes so I'll see you
some nerves she nerves and then it says
hello oh it doesn't say some herbs no
and there's there's actually reasons for
that we're going to get into some of the
other idiosyncrasies of this and it has
to do with all sorts of fun things like
flushing stuff and it's more fun than we
need together right now unfortunately
though what I actually want to really
demonstrate here is the concurrency
issue that we have with netcat I mean
this is works great in this little
demonstration where I just want you to
be able to get access to the script but
only one person at a time can get access
to the script because netcat only makes
that one connection between two machines
for example I'll run this again and if
you go ahead and just connect but don't
type in your name and hit enter just go
ahead and can
right so now you're connected if I come
back over to my machine and do netcat
127.0.0.1 which is to localhost I will
get connection refused and that's
because it's already serving you up yeah
you're right which is no good because
you know it wouldn't be more fun if we
could both enjoy this epic buggy text
adventure written in bash I I quite
agree right so we need to do well what
we need to do is look at a few other
solutions one of which may be to use TCP
server you can find this from crypto or
CR why pto it is part of a suite of all
of these different tools and it's a
pretty feature-rich program I have to
say you've got things like you know
it'll allow banners so typically you
know what you'd find in like telnet or
FTP or pick a protocol you connect and
there will be a banner so we can say
like welcome to my computer I've got fun
stuff here we can do logging so we can
tell like what's going on how many
people connected when they did we can do
filters we have like specific rules so
we can say like you know ban these IP
addresses or things of that nature there
are a plethora of advanced features
specifically in this case what I'm
interested in is the fact that it'll do
multiple concurrent connections and it's
a lot of times used in conjunction with
queue mail which is an SMTP service it's
kind of outside the scope of this
particular one but I do want to bring
this up because it's it's not too
difficult to get up and going with it
there's a great write-up that we'll have
in the show notes over at bite reef org
but essentially and I should probably
just breeze through this so you grab
basically you grab yourself the UC SPI
TCP it's version 0.8 e8 you grab that
and you're also going to need this patch
file you you know unter until we're into
this folder here and apply the patch
there's a little sad thing that you need
to do to you know fix a line in a in
compost file but otherwise it's pretty
simple after that point you just do a
make make install and care look good
so installation notwithstanding we can
actually go ahead and
using this with TCP what is it TCP
server so the usage all right so let's
go ahead and actually build on our
previous file here I'm going to close
out this netcat and I don't know we'll
do some more cat EOF into that test file
right there and we'll say what is your
quest and letter no will read quest and
and that looks pretty good
yo F great so let's now use this in
conjunction with the TCP server so TCP
server tack V for verbose tech capital R
capital H lowercase L and a 0 then 0 and
then port number and in this case test
SH ok so what is this doing first of all
we're running a TCP server which we just
installed we're using the verbose option
because we want a lot of output and you
know telling us all the nitty-gritty
stuff our hl0 is actually going to tell
it not to perform remote info not to do
any sort of dns or local look-up on it
the 0 specifies the interface if I tell
it 0 it's going to specify all the
interfaces for example if I do an if
config ah if I reduce my font size or
just maximize this because that just
looks terrible you see I have at the
zero and W and zero so I could specify
if I wanted it only to be on one
interface or the other but if I say zero
it will go to all available interfaces
the port is 1 3 3 7 and then just like
the tacky option in netcat we can now
run tests SH yes so now you could for
instance connect to it
ok go in fact this is a you know just
hit up and enter right yes that's true
most terminals support that what is your
name nerves hello what is your quest
yeah there you go
and if I look at my screen over here I
can actually see that I have a
connection and you know I get a process
ID I see who initiated it what port it's
on things that Nick yeah but what I
really like is we've got 0 out of 41 out
of for you so you were 1 out of 40 so
what this means
both of us could be connected
concurrently yeah which is pretty cool
that's awesome that's the number one
thing that I like this program for and
you know you don't even have to write a
script right so you could pretty much
pass anything - if I wanted to I could
do so we could chat back and forth right
we hit chat we could use it to chat back
and forth I'll talk about another
program that's better at that but if I
wanted to I could say date so I'll just
run the date command date command pretty
much just that goes out the date right
so now if if Shannon connects it'll just
spit out the date but it means that I
can support 40 concurrent connections of
people who will grab the date from me
that's really cool yeah just any command
or any stringing commands okay uh so TCP
server is now serving up the output of
the date command and it will handle say
oh you know what if I wanted to add two
taxi 100 and I could support 100
connections instead of the default 40
connections so if you're looking for
something a little simpler though
because I will say TCP server has some
idiosyncrasies to it and it may be a
little bit more complicated than what
you need to be just looking for the
ceremony type type thing I recommend end
cap which is kind of like a beefed-up
version of netcat and for that let's go
ahead and once again extend the script
so I'm going to cancel out of this and I
don't know once again echo EOF into test
SH and say yeah I don't know what is
your favorite color okay yeah and then
read color and you have that there we go
so mcat it works basically like netcat
it takes a lot of the same flags but in
addition it has a few flags namely tack
em for the maximum number of concurrent
connections and then tack K which keeps
the connection open so let's go ahead
and do a little demo here with that
script that we just made I'm going to
now do n cat tack l for listing tack P
for the port 1 3 3 7 again and then in
this case multiple current connections I
don't live at 40 tech K to keep that
alive and now tacky just like we did
with net cat and in this case test at Sh
and so if I run that and Shannon goes
ahead and attempts to connect what's
your name nerves
what's your quest dinosaurs okay and
then what's good and that's it yes I
didn't ask me what my color was though
no it didn't why did it not actually
that's a good question
let's find out okay okay cat tested sh
no it didn't hang on aha I typed echo
instead of cat is cat by the way if
you've got a long command like this you
can hit ctrl a to get to the beginning
of it and ctrl e to get to the end of it
so now run that again alright and once
again listen with net cat and now you
can connect to it from your machine and
have it ask you three most important
questions that have nothing to do with
swallows okay yes yay hey um another
problem eating smaller side way Africa
near you
never mind another fun thing that you
can do with n cat is actually to do a
very rudimentary kind of chat like IRC
thing it's kind of fun that this is just
built-in so I thought I would show it
off it's pretty neat basically insist
mention though that like anybody on your
network and pretty much see what you're
chatting back oh man no none of this is
this is not using SSL or anything
there's no TLS there's no encryption in
any of this stuff I highly don't
recommend using it over the Internet but
it's still fun and it'll cool again then
again you know what I think this is a
very important point because this is one
of the major differences between net cat
and MCAT wasn't really in the in what we
were going to talk about but check this
out if I do tack help oops
you know the thing about large font size
there we go hack SSL all of those
options right there mean that I could
actually give it a PEM file and I can
actually use proper SSL so that's pretty
cool you know you could do a self-signed
or you could go and buy one or soon
it'll be free with let's encrypt which
is pretty cool that's topic for another
time but yeah so the fact that this
supports us is held so there is actually
kind of no reason why you couldn't run a
text adventure out of a
script with SSL over the Internet and
hope that there's I don't do that so
anyway on to the neck anyway on to what
I was actually getting at here which was
we can use this to do a very rudimentary
chat and in that case it's MCAT tech
again we're going to listen on port 1
through 37 and we're gonna have maximum
connection of I don't know like 40
people we're going to say k4 keep alive
and they just do tack tack chat right
oops not cat see I can't type today chat
okay so I'm going to let that run over
there and in my right window I'm going
to connect to it with netcat 127.0.0.1
one through three seven and if you do
the same so you can see here I am using
your dot 139 right so it same thing so
I'm connected to my local host instance
chin is now connecting and we can see
that we now have a new user and I can
say ah I snobs and I see the heist NURBS
yeah it totally works hater and now you
can see us chatting back and forth with
each other
wunderbar it is the internet and ESL
really what is this 1995 speaking of is
this AOL Instant Messenger yeah might be
what is okay so with all of that we're
gonna take a quick break and then we get
lacking in a few some fun other things
that you can do with the internet where
men are men women are men and teenage
girls are FBI agents we're gonna take a
quick break we're back if you've been
watching hash v for a while you know how
much we love domain.com and you know
what hey guys
somebody and they're affordable but
faster reliable they're easy to use Jen
and I use them all the time there are a
go-to place when we want to bring our
ideas to the Internet they've got a
domain discovery system that makes it
easy to take your mind and put it into
the Internet and then your websites up
and running in no time at all and you
know what's best of all that they are
huge fans of hak5 they've been
supporting us for years and they've got
the hook up for you that's right you've
used the coupon code hak5 you get an
extra 15% off when you checkout at
domain.com so when you think domain
names think domain.com so this is all
fun and games and everything but I kind
of want to do this with no tools no
netcat no nuttin okay or netcat no
endcap will do that will you do that
because I'm running Linux and I can show
you fun way to do that and you're gonna
have to just like what does the
PowerShell know their time actually we
connect to the chat server because this
is gonna be fun okay so just up and
enter I've got it running again here and
what I will do is you guys you just keep
chatting and I'm going to show you a fun
way that you can do this in Linux just
using file descriptors and some of the
just devices built in so here let's take
a look basically I'm going to set up a
new file descriptor number three to go
in and out of slash dev slash TCP so
you've got a TCP device on your system
okay
and I'll use localhost but basically
this could be any address on the
Internet in fact it could be DNS it's
tough to I could say you know WWE
example.com slash 80 and that would
connect to the web server on port 80
that's running on this domain on the
Internet
likewise I can just do my local host
because I'm running that chat server on
port 1 3 3 7 so that's pretty cool all
right so basically I've set up a you
know I've set up a connection using the
three file descriptor now but but now
what well here's the beautiful thing
since everything is a file in Linux yeah
you can just like and this is really
beautiful cuz you can build on top of it
with pipes and redirection and we're
gonna do some redirection because I can
echo into it or I can cat out of it just
as if it was a regular text file oh so
cool this is pretty easy if I just do it
echo tacky
hello snobs Oh get your name right this
time okay and then a backslash R and a
backslash n to do some carriage returns
and new lines and I'm going to go ahead
and redirect that into ampersand three
for our third file descriptor Berber
there we go and now if you take a look
on your chat you should see
hello snubz sup bruh okay cool so Shin
can reply and go ahead and keep typing
so how do I now see that again it's just
a file so how cool is it that I can
actually just go ahead and do cat and in
this case since we've already set it up
on that descriptor we can just do book
number three and hey hey look at that
it's almost like tailing okay thanks
thanks Janet you're so late
okay Shannon you know maybe it's the ASL
thing she's stuck in the 90s with her
memes right now but it's okay
oh that's just some of the fun stuff
that I wanted to share you with you this
has been coming up lately because I'm
working on fun stuff for DEFCON yes as
we watch DEFCON okay fake DEFCON stuff
is happening before real DEFCON and I
want real DEFCON stuff to go along with
not licking your hand Shannon there's a
story behind it I swear to share the
story with you um with that we're gonna
wrap up here in just a sec but we got
awesome gift from a fan super food about
this because it's going on my side of
set you guys know you can send us
stickers right the addresses right here
we got a message from Dan on November 27
2015 see riously what do you ever check
your mail I know this is from November
yeah I know he's took now I'm gonna get
better
that's my new year's resolution is to
check my mail you know people send you
bills in the mail right it's kind of
important to check her mail what a noob
alright so he says I cut vinyl stickers
from my pineapple I thought you may want
one oh thank you Shh
check oh wait I should hold it like this
which oh look at that that's really
awesome that's awesome yeah thank you
Dan it's like all shiny and everything
that's so cool I'm gonna put it it's
like my nail polish you know I don't
want to mess this up so I want to do it
camera but I'm gonna put it over here oh
love me some pineapple vandals I want to
make this this is so rad thank you Dan
yeah and you guys can send us stickers
as well if you'd like to be on the walls
good stuff um hey you know what you
could succumb and see the walls in
person
yeah yeah and so we're going to be
having another pen test with hak5 and
you can find out all the information
about that at pen test with hack
five.com I was like is that the right
website pen test will tack five calm and
it's from March 11 through 13 we do
training here at the hack 5 warehouse
with darren kitchen sebastian and mu
bik's they teach you everything from the
Wi-Fi pineapple to the land turtle USB
ducky Metasploit all sorts of things and
you get hands-on training with the
developers of our products so it's it's
it's awesome it's one of those things
that really does well the other thing is
it's not just like you get hands-on with
the tools and with developers but it's
also ridiculously fun because there's
nothing like any other InfoSec training
yeah there's a story line there's story
lines like absurd missions it's very
hands-on you get out in the field you we
run any sort
there's LARPing involved just know there
was here though yes check it out a pen
test with hak5 comm we hope you can make
it and if you run in a hackerspace or
you're a member of the hacker space that
might potentially want to host pen test
with hack 5 get in touch with us it's um
it's training at hack 5 org we're
noodling on some stuff for you know the
summer season doing maybe a hack across
America hacker space tour and test pack
5 kind of we'll see we'll see where it
goes
but yeah you can let us know you know
what you think as well feedback at hack
5 org or leave a comment below we love
to see those also I also wanted to
mention real quick too
we just did a little bit of revamping
with threat wire well we're still doing
support with that through patreon over
at patreon.com slash threat wire but
Darren's going to be coming on once a
month for an early access video just for
patrons about security tutorials and
stuff so if you have friends or family
that might be interested in that
definitely recommend it for for them as
well as a great spot for you guys
learn more about what's happening with
Internet freedom and security so so it's
a good stuff you can find the rest of
the shows too including Shannon's show
with Patrick tech thing over at our
youtube channel youtube.com slash hak5
if you want to get involved in some of
the forums stuff there's an awesome
forum thank you guys for posing and
keeping that alive it's been like over
10 years of running this forum so much
fun
so forms a hack dot org IRC - - org as
well awesome you know just to like hang
out in their awesome community yes we
really do really appreciate you guys
hanging with us it's been so much fun
I've been having a lot of fun doing
vlogs as well I know that you are - so
I'm / follow is where you can find us on
social media and all that jazz and with
that oh and then a check a shop calm
that's that actually is they like
support shows me like 99.9% so
appreciate that um with all of that i'm
darren kitchen i'm sure dress you techno
lust stop Newberg's
do you wanna watch i v watch i v with me
hello welcome to the rip wow if we got
what that wasn't even a second into the
show do you want to watch act 5 we will
study tcp/ip this is just getting worse
and worse shannon we can't do this we
can't do this hello own deville coming
out of hack 5 no I can't do it actually
welcoming zoom hack 5 okay we're always
five reels optional just like pants but
don't go no go la vaca desk I am I do
not work oh sorry
talking local heat Dora I will heat your
house next on learning languages with
hack 5 C++ I'm a bird that's nerves a
bird
girls brooms I love those</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>