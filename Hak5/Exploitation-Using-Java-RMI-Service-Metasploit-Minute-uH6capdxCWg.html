<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Exploitation Using Java RMI Service - Metasploit Minute | Coder Coacher - Coaching Coders</title><meta content="Exploitation Using Java RMI Service - Metasploit Minute - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Exploitation Using Java RMI Service - Metasploit Minute</b></h2><h5 class="post__date">2014-03-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uH6capdxCWg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">exploitation this time on Metasploit
minute this Metasploit minute is brought
to you by hack five and viewers like you
support us directly HHH all calm
welcome to Metasploit minute the
breakdown on breaking in I'm your host
Rob fuller but you can call me mo Bix as
you may recall last time we were this
close to exploit in a system we did
enumeration in Discovery other targets
on our virtual corporation the evil
empire
today we're continuing the attack with
the exploitation of the Java RMI service
so last time if you recall we searched
for Java RMI and we got back a few
things we have the scanner we have the
exploitation and we have this other
browser exploit so the first thing we're
going to do is use this scanner to see
if we can exploit the service so use
let's paste
oh let's see if note that won't work
so show options set our our host to 1070
331 151 that's our target run it ooh
class loader and abled yay
like I didn't know it already but you
know for your edification it's there so
we do our exploit because we are ready
use so options set our our hosts 10 71
or 70 3.31 151 set our URI path real
quick it is very important to know how
exploits work before you run them info
will help you with this and one of the
things that it says in this information
is that the URI path in the options is
because what's happening is Java RMI
when you tell it to load a class it has
to go get that class from somewhere so
the only way this this exploit works is
if that machine can actually get out to
your machine or
or wherever you're hosting this from and
the URI path that it wants to get it
from so it's actually making an HTTP
request so that serve port is very
important because if if you specify a
DAT and that host on the DMZ isn't
allowed to get out on a DAT then you're
not going to get anything so let's put
it put it as a tea and let's set our
your eye path slash and then we specify
a payload so before we do that we can
see that the exploit target is Java
payload we show targets show optional
targets and we can specify all these
different targets but we're pretty sure
since its metal Abel that it's Linux so
let's just go with a Java payload so we
set set payload - since it's already the
target is already defaulted to zero we
can actually tab and shows us what
payloads are available for that specific
target type
I wouldn't recommend doing that on
Windows because there are so many
payload options so Java interpreter
reverse let's go with TCP for now see if
it works if it doesn't when we specify a
bad port or something where we're going
to just have to work with that so our El
host el host set our el port I wish you
guys were in front of me so I could ask
you what you thought what a good out
port is but we're going to go with 1099
let's we're going to assume that since
we can talk on 1099 it might be allowed
in and out don't know we're going to see
how that works out it's a good
assumption and if we specified serve
port as a DAT we might want to just do
maybe a T as the L port you make
assumptions based on the the defaults
that most enterprises go with so we're
going to go with 1099 and see how it
works we hit exploit and our meterpreter
session 1 is opened yay we win oh that's
funny our session says it's opened and
then after it it says it might be
exploitable good job man exploit I think
I think it's actually exploitable so
we're here we're in
sigh the session so get uid is one of
the things that we do first just to find
out who we are we can actually
background this session and show that we
are on a Java meterpreter inside of
Metasploit able so we sessions back into
the surf session this is where I take a
step back because most of the time when
you get your first shell no matter if
you've been doing pen testing and red
teaming for 40 years or or it's your
first time if it's your first shell on
an organization usually that that rush
starts and you rarely stop to think okay
what do I have and what I call that is
presence so presence is looking around
the host and finding what you already
have instead of trying to get off the
host or persistence first you really
want to just take a breath you have that
you have access to those than even root
even so look around the host and get
everything you can first now
this is sometimes trumped by persistence
when you're doing a fishing exercise or
something like that where the their
chance of of you losing that shell is
great but since this is a remotely
exploitable web or internet facing code
execution I think that we're safe for
now and we have a chance to look around
remember always the rule is two is one
one is none on shell so always have an
extra shell this time we're not going to
we're just going to go in and look
around
so PS gives us a process list LS get why
didn't L s work that's weird because
we're in route no I don't know why LS
doesn't work when it should so these are
all of the possible commands just
question mark just like we did with MSF
console that you can run now the core
commands are always loaded standard API
is another extension that gets loaded by
default but it's not it doesn't have to
be there and then for that I think
that's all that gets loaded with Java
meterpreter so we could type shell
that should give us a root shell there
we go we can do it LS there and we're
good to go for that we start looking
around so let's let's look at far dub
dub dub so there's the tikki wiki
there's TK wiki there's all of the cool
stuff there that we saw on the host so
we know that's a that's a exploitable
web app now we're going to table
presents for a little bit because you
can go on and on about how to look about
different things on a system and we're
going to come back to that and have a
whole segment on presence but what we're
doing here is we're going to set it up
so that next week we're going to focus
on pivoting and moving around the
network as you can see if we do an if
config we're actually on another network
that we didn't know about before so
we're definitely in a DMZ of some kind
next week we'll be pivoting around the
DMZ so stay tuned until then let me know
what you think hit me up at MSF at hack
5 org or stay tuned the Metasploit
minute comm for more shows like these
thank you again for supporting the show
if you want to support us even more go
to H ake a shop comm and enter coupon
code move X for some free Metasploit
minute stickers until then I am move X
and now I'll be hacking to the cows come
home
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>