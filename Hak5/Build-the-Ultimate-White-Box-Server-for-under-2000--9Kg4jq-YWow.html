<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build the Ultimate White Box Server for under $2000 ... | Coder Coacher - Coaching Coders</title><meta content="Build the Ultimate White Box Server for under $2000 ... - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build the Ultimate White Box Server for under $2000 ...</b></h2><h5 class="post__date">2009-06-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9Kg4jq-YWow" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">coming up on the show building the
ultimate $2,000 East sexy white box
server from start to finish all that and
more on this episode of hat 5
this episode of pack five is brought to
you by go daddy
Squarespace Gamefly and viewers like you
everybody welcome this week's episode of
hack 5 I met less na i'm darren kitchen
and I'm Shannon Morse and we have the
show that a lot of you have been asking
about recently since we started the SX
series and that being building a purpose
machine purpose-built machine
specifically for ESXi now we know that
we can actually take some hardware that
we have laying around mm-hmm and install
the ESXi on that we've done that before
but you have a need for some some
hardware so that's what we're doing
today I do I do well okay remember how
like a while ago I talked about how
basically there are two different types
of admin's there's you with your boss
that just goes here's the AMEX have fun
and then you know there's me that's more
of a maintenance hasn't been because we
don't have a whole lot of money and then
you know cuz I'm with a small company
and then what do I really got to make it
stretch especially you know in these
tough economic times take a shot I gotta
you know make this stuff stretch so yeah
I mean it's it's it's to the point where
you know your infrastructure is aging
much quicker than you know it had been
so while everything was good now things
are approaching you know level of
criticality that it's like hmm don't you
spare a little bit of money on this yeah
so so that's what we're doing we've got
a server here now talking about you know
purpose-built yeah so your goal was to
get the most that you possibly could out
of two thousand dollars that was the
budget was $2,000 so we it was like 1950
shipped so you know probably should have
thrown in some more thumb drives from my
happy fundus but anyway the point being
is that what I need these to do are
basically run you know domain controller
you know a couple of windows boxes and
need them to you know just set up the ad
the VPN the RRAS the now a couple of
little doodads here and they're mainly
like accounting systems and a couple
other of those you know hosted web
application pools and an AI is all of
your servers in the office now
are they all Isis they can and used for
some purpose or another so you don't
have anything you need to play with
that's the thing is everything is
physical right so I mean I can play all
I want in my like little test lab
upstairs with you know junk Hardware
that I've got laying around it's one
thing to play with that and learn and
experiment be like wow I could really
like you know totally replace this
network with a single machine but I'm
not about to take a spare AMD that I got
laying around and actually like deploy
that and expected to you know run and I
wouldn't call it like I'm nobody's gonna
die if the web server is down for 10
minutes the web the server is that
anyway awesome um but yeah so so it's
nice to have you know cuz everyday it's
just like four or five servers that are
physical machines you know - from like -
web you never run that wasn't an average
of what five to ten percent CPU
utilization it's pretty pathetic but you
know anyway so we got some money we're
gonna play with some fun stuff and so
that's what we're getting at here is
building a general-purpose ESXi server
for your enterprise this isn't
specifically for like oh we need you
know the best database server you can
get for two grand right or best
application server this is basically
your best general server but anyway so
this is not that purpose we don't have
15,000 rpm drives we don't have you know
a dual xeon run and you know that that
kind of stuff but very akin to like if
you're a viewer of Patrick's show tag
Azula you'll know that you know the five
hundred dollar gaming rig can exist and
I'm saying the two thousand dollar
you know rackmount happy server to
replace for aging pieces of crap is
doable as well yeah exactly
get into it let's uh yeah cuz I'm I'm
waiting for you to hurt yourself it
won't that - oh I did want to mention
that one of the other reasons why I'm
going this route is because I mean we're
adults op okay so and there's nothing
wrong with that there's nothing wrong
with being an HP shop yep especially
when you got the gold support right I
mean because that's what I had until the
sudden you know cash crunch so so
support was never an option anyway right
I'm the support and I'm fine with that
right and and you know tax we
get the call in the middle night and
then we make it happen it's all good but
what is trying to say was I suspect out
this similar rig over at Dell and it's
like $4,500 and I wasn't even to the
gold support yeah and I you know it's
like yeah to do like a twenty nine fifty
as I think the service and thank you
yeah yeah something like that it's
either the twenty out of the nineteen
anyway like you start you get to the the
the two grand level or whatever and then
you got like two ideographs and it's
like I don't need to 80 gig cards
you know we've got a lot of cool stuff
that we're actually you know that it's
first time that we've actually bought it
you know we've been building machines
for ourselves personally for a long time
but you know this thing this is just a
box full of Awesomeness yeah cool well
let's get into the boxes full of
awesomeness but first let's check in
with Shannon and seeing what's going on
this week in trivia this says land party
is next you're new right this month land
party is counter-strike source and we
are gonna be playing over at CSS hack
five org on Saturday June 27th which is
this Saturday make sure to sign up and
vote for future games over at hack by
Lance squarespace.com thank you
Squarespace as you know Squarespace is
the quick and easy way to build a
beautiful blog or website without ever
messing with any code and over the last
six months Squarespace has grown over a
hundred percent they attribute much of
that growth to fans like you as a
special thanks to revision3 fans
Squarespace will be giving away an
iPhone a day for the next 30 days to
lucky fans all you have to do is include
pound Squarespace into a tweet to be
entered into the drawing a winner will
be chosen at the end of each day and
announced on squarespace.com and
twitter.com slash Squarespace let's take
a break and then we're gonna get into
that hardware and Darren's probably
going to hurt himself
yeah
all right guys so as you can see we are
just about ready to start our
construction project and if you don't
know how to work a screwdriver learn how
learn how it's basically a turn it yeah
we're gonna move kind of fast and only
pop up when we need to but first we're
gonna give you a little overview on what
we've actually got right here we've got
a three bay incorpo sure what know it in
your it's five and a quarter run it it
yeah three five and a quarter inch bay
that holds four hard drives that are hot
swappable and it's a Scot kind of
connectors on the back that you connect
directly in they slide in all pretty and
stuff and Darren's gonna do that and
hopefully doesn't break the Western tear
Western Digital one terabyte black
additions that we got see he broke it
already did it early probably okay well
you know it's just a terabyte oh yeah
you broke it no no so I tried it anyway
I just didn't want to just do a little
force it anyway
yeah like that that's unbelievable
anyway so I put it upside down there's
the connector right there
anyway so they just slide it in and then
you know when the light turns green the
family side down that's why oh there's a
right side up anyway so we've got 12
gigs of Corsair RAM here now this is
ddr3 because we're using a desktop board
we're not using ECC we're not using ACC
which is sometimes what you'll have on
you know Xeon boards you're gonna need
to use ECC some of them require it but
desktop board doesn't require it and
that's how this is coming in under two
grand is yeah cuz this is you know
basically just a very beefy workstation
but for all intents and purposes it's a
server so so that the brings up the core
i7 920 amazing bang for the buck
I think the processor is what like 240
it's all it's all down to something like
the price but the the price of
performance ratio of this chip we're not
going to overclock it even though with
this beast of a board this is a two
hundred and sixty dollar board last
night checks p6t deluxe p2 we
is an absolute feat of Engineering it's
a shame that most of the stuff that's
actually on the board isn't supported by
ESXi which is why we had to get full
other things but regardless you want I
want to sit solid board that didn't have
any problems yeah and that's supposedly
what the what the p60 is so you know and
I've had good success with the Asus
boards in the past so we've got a MSI
8400 GT something like that some cheapo
just video out
yeah we've got a 650 watt power supply
it just so happened to be a Corsair it
probably could have been just about
anyone else but you know I just didn't
skimp on it I wouldn't go with like it I
mean if it's gonna be a server I
wouldn't go with like a rose will or a
yeah hi tai chi or something I wouldn't
even go with the PAL max I and it's
pretty much yeah thermaltake or a
Corsair or master cooler master yeah and
the last component vertical component
we've got is the three where RAID
controller that's the MSI so lots of
happy hard drives and this is I mean
pretty much of this and the other PCI
component are the big deal when it comes
to the difference between the onboard
stuff that we would typically be using
if this were in fact our you know just
like you know pulling out from our
closet or under a bed computer versus
you know this purpose-built one is that
you know we've got dedicated cards to
rather than just using what's on here I
mean they're dual NIC on here we've got
dual Marvell gigabit NICs but we've got
a dedicated for that and same thing with
the raid so tell me about this three
where because you are crazy about them
and that's why I went with them well I
like 3-way or simply because they offer
you know obviously you're not going to
be using the the raid 6 because you want
more storage
however raid 6 is raid 5 bumped up a
notch it's n minus 2 so it's dual parity
and the reason that I like opposed to
drives and still keep going yes that's
nice but beyond that this supports raid
50 which I'm a big proponent of if
you're running you know eight or more
drive right um thing like that
and then also you know you've you're a
single disc in your j-bot action but the
nice thing is if you're looking to spend
a little bit of money actually a lot of
money yeah they have a single card that
will do sixteen drives on a single card
right that's that's pretty hot yes yeah
and that might be something that you
know I'll consider later the the other
you know kind of cool thing about this
particular case which is a rose will but
it you know I trust their case not the
power supply is the forebay action I'm
sorry the three Bay five and a quarter
action both here and here this one's got
a fan in it at the moment but later on
what that means is I could pop another
one of these guys and and go from four
drive to eight drive of course then I
would need to rethink my raid because
that is using my single PCI with the
small connected even can talk a lot of
small ones in the big ones that's
exciting well in that case array for
small ones into big ones man there's a
lot about that one so without getting
too much more ahead of herself I think
the only other component was the neck
but it's just your standard intel 1000g
yeah t something like that anyway which
is on the supported list if you head
over to VM VM - help help
yeah that's the place the the 3 CX arm
set down through said that the three
where card is supported by e sexy but
it's not on the official VMware
supported list so we're going to have to
make a modification to ESX okay and the
so the the other difference there is and
I asked you about this is do we install
ESX on the data store on our nice little
three terabyte raid we'll have here or
do we pop it on some other drive I'm a
big fan of separation mm-hmm so we've
got a four gig Patriot XT flash drive
that we're gonna actually throw it on to
they do make headers for you to plug
like a USB key right into the board but
we've actually got break up like oh yeah
yeah so I'm sure it's in this box oh
yeah
and without further ado I want to build
some alright cool well let's start
turning some screwdrivers so they're
first now we're going to install the
processor lovin I like to do everything
external of the case so because it makes
it easier angry
we just went with the Box cooler because
we're not gonna be overclocking it so
this isn't a hot rod yeah and the
difference between the like the Z on
here versus the i7 version of the
Nehalem chip is basically we're not
gonna be able to go cool process earlier
right and that's kind of a shame but if
we were building you know like the
$2,000 ultimate application server maybe
our money would have been better spent
in the horsepower arena but I think a
single quad core is going to run a
couple of VMS just fine yeah
so as we explained we are not installing
the actual ESX server on the on the raid
there what we'll be doing is installing
it on this nice little USB Drive and you
just make sure that the cleaning lady or
nobody stupid at the office unplugs our
server what we're gonna do is matt said
that there's you know the headers have
been plugged right onto the motherboard
to get internal USB we didn't spring for
that and just took the internal header
that would normally go on a pci
backplane Deeley here on the back of the
computer and we're gonna plug in our USB
and then we'll find some way to just
kind of like screw it in somewhere
inside the computer it'll be fine
so our operating system
all right so we are just about ready to
wrap this sucker up and actually get
installing some software but first we're
going to take it over to Shannon for
this week's trivia last week's trivia
question was what two German researchers
discovered in 2008 a flaw and WPA TK IP
that can decrypt short packets such as
artful messages that was correctly
answered by some kid
congratulations some kid he answered
with Eric twos and Martin Beck sunken
we're going to be sending you some sweet
swag from the hack shop next up I'm
gonna tell you about this week's contest
but first let me thank our sponsor
GoDaddy
if you want to make an impact online
godaddy.com has what you need calm names
as low as a dollar 99 plus world class
hosting fast and easy website builders
and much more plus you can go over to
revision three.com slash go daddy to
find all of hack 5 sweet coupon codes
next up let me tell you about our
contest this week this week we want you
to spec out your own two thousand dollar
white box server specifically we want to
know why you chose it and what parts you
chose and we want you to tell us about
that over in the episode 519 release
thread at hack 5 org slash forums we'll
pick our favorite entry and we'll send
you some rad hack 5 swag along with it's
the very last hack 5 shot glass next up
the guys are going to build the e sexy
software and first we're going to take a
break
I want to let everybody know that
Gamefly is an amazing service they are
the largest online video game rental
service and offer a choice of over 6000
new and classic titles across all
consoles and handhelds with plans
starting at fifteen ninety-five a month
Gamefly members can rent one to four
games at a time and keep them for as
long as they like you can also purchase
a game if you fall in love with it
they'll send you the box and the manual
for a nominal fee head on over to
gamefly.com slash hak5 to get two week
free trial membership gamefly.com slash
hack alright guys so the hardware is all
assembled we haven't plugged in the hard
drives yet from the data stores but
first we need to install the software
simply because we have that patch that
we need to complete that's true so what
we're gonna do now is we are gonna start
it up and we have unplugged some of the
giant bitching fans just because you
know with the mics and everything so
they were a little loud yeah just a bit
like most servers aren't that cd-rom
drives
yeah the cd-rom tries it's crying out of
control in a second now I mean for
example your your server ok is what a
$22,000 server 128 gigs of ram yep has
how many fans
how many redundant pins well it has fans
that that blow and then it has fans that
suck so it's like kind of thing I'm
having to Wayne's World flashback it's
all awesome so um that thing must really
sound like it's taken off well I mean
when you first started yeah they're
always at you know a hundred percent and
apparently I missed the boot partition
yeah oh hey you have to change in the
BIOS things were though yeah
shitty so let's go into the BIOS and
change the boot priority yeah I like
that idea all right there we go after a
little bit of troubleshooting
we found that we actually disabled the
storage controller and that the tapi
cd-rom is not the same as IDE pioneers
alright whatever I mean you know play
with the BIOS to your heart's content
what are we doing here so we are loading
the esxi 4.0 thin Staller which is
gonna be a little bit more intensive
than the 3.5 version that we installed
on the little charade pewter remember
4.0 64-bit 3.5 which you could still
download and get keys for 32-bit nice
yeah and then we're gonna be oh that's
right we don't have to hack one of the
OEM deg Z's although if you do have some
we are gonna have to pull up the
instructions for it okay that's fine
yeah yeah good time so let's take a look
at this dotted lines and speed up and
post yes alright so basically we didn't
have our datastore drives installed
right I just configure them on the raid
controller yet I have we plugged in the
molex so now yeah so the only thing
that's actually a storage controller
right now is this little blinky blue
light and this is what's actually yes
the blinky blue light is a four gig hard
drive and and we're actually installing
ESXi to this because ESXi has native USB
device storage controller kind of thing
because that's when you buy one from
Dell IBM or HP in ESXi server they just
stick one on the board and that's
exciting that's showing me a little
little widget that actually goes on the
motherboard yeah to turn one of those
connectors for an internal USB into an
internal USB so you can just pop out
drive in there yep
that's hot so it's good to know that
we're installing to the right place
because it's the only place it could be
going right exactly
unless it's made out of voodoo alright
so now we're not gonna go through the
raid configuration per se just because
it is different from card to card yeah
but it is important to note that with
this particular white box there are
going to speed some compromises and
sacrifices whatnot some interesting
scotch it's a little coarse right but I
mean you know we're also saving a couple
brand here so the point being this
beautiful little three wear card here
the RAID controller that's hooking up
the raid 5 on the four one terabyte
drives in there is is super sexy and
sweet n is supported by ESX I directly
from three where that's the difference
though is it is not built into the it's
built into VMware so it's akin to saying
you know oh I got that cool graphics
you graphics are like it's like
installing windows and it doesn't
recognize your network card right away
so you got insolvent rot right because
you decided to get a food giant not card
instead of Intel Intel there you go
that's a good one so what are we gonna
do to get this thing working okay so
this is nice because three where has a
beautiful little knowledge base with all
the step by step so basically all we
have to do is come in here to our and I
think I actually have to be logged into
vSphere first so let me go ahead and do
that down here okay
and as you can see I'm going to pull up
vSphere client login all right so we're
loaded up here into vSphere client and
what's cool though is to install these
drivers what we actually need to do is
use the vSphere CL I client I had
actually never used this this will be my
first time I'm excited puppet area on
that so what are the steps do we need to
put in a maintenance mode first right
and you could probably speak to that
better than I could but basically we
need to bring the server into a special
mode so that we can so that we can mess
with it so we just go into our client
here under inventory and I think it's
under administrators right-click on the
host oh right right click here voila and
yes we want to go into maintenance mode
sweet okay so in maintance mode he's
chillin he's just doing this thing ready
to get worked on little love and pass
them some goodness reboot him cross our
fingers if the other Lords loved us
tonight then we will go and get some
buffalo wings if not we will I still
just go get some buffalo wings and
finish this tomorrow so oh here we are
this is the command-line interface
basically it's just a bunch of Perl
scripts we have already gone into the
bin folder here and we're going to
execute the VI host update Perl script
here and specify our server our root
user our marvellous password here and
and basically this offline attack bundle
does zip that we've popped in our root
is the is the bundle that we downloaded
from 3 where that's our drivers for ESXi
and it's going to go ahead with the
techno signature just like you would on
nan when your key well drivers amardas
yeah yeah and then
press ENTER and see what happens and as
you can see here in the background what
we got gun is we can see that we've got
a stall in progress hooray
give that some time let it work its mojo
so and it's installed all we got to do
is kick the server so let's go ahead and
take it out of maintenance mode yeah
there we go
exit maintenance hooray
and right click and say good bye
reboot yes yeah reason install great
goodness he actually writes it down you
know you know and you like shut then
windows like face your reenter like
reboot windows and it's like yeah Server
2003 and so I was like why did I shut
down yep like cuz you're stupid think so
we could see all right load the one so
the good news is after the reboot we
actually have the card recognized by
ESXi flawlessly booted off our USB and
it could see our hard drives now if we
actually go over to the storage adapter
list right so we're back here in the
vSphere client and we can actually take
a look here that we have our raid yep
9650 se SATA to raid and there we go so
we can go ahead and start creating
volumes as you've shown before and I
know that we breathe through I mean
didn't even really touch too much on the
ESXi installation but you can reference
prior episodes after that but it's
exciting to put together new hardware
and I think this is a testament to you
know how far you can take this when you
actually do a little bit of research on
what white box hardware is compatible
and for that we got a you know give
shoutouts to ultimately white box calm
as well as VM attack help calm great
places also if you're like me a shop on
Newegg for stuff just hit that feedback
stuff check out the comments and search
within the comments were just ESX and
like you know see what works yeah I mean
the new eggs a great place to go and
just you know the VMware community
forums and like you said pretty much
there's there's a bunch of different
places that you could go but probably
somebody's done it before so you just
got to figure out who and how they did
it and if it worked on a percent but I
mean yeah we have a fully functional
quad-core running on an Intel i7 920
with 12 gigs of RAM and a badass
RAID controller I love it and look we're
only at 43 megahertz being used so we've
got a ton of megahertz to go ahead and
throw it all those fun accounting
servers and other excellent Active
Directory and iis and all that crap that
I need to run
so anyway I'm definitely gonna put this
to good use I'm stoked to finally have I
mean like it even combined it's like
four times the hardware is like oh yeah
you know that I was probably a little
more yeah so we do want to remind you
guys that we guys that you guys it's
just it's just one of you or now that we
love your feedback especially on an
experimental crazy shows like this one
and go ahead and hit us up feedback at
hack find Oren post in the comments hit
up the forums and that is of course
where you can also spec out well you
guys would have your dream server here I
mean we could have dream game gaming
rigs all day long we want to hear what
you would do with two grand for your
infrastructure and whatnot so let us
know and we will be doing the contest
thing that's premature did you have
anything else uh no I think that's
pretty much it store feedback you know
it definitely support the show I mean if
you like what you're seeing and want us
to continue we you know get a lot of
love out of that you know we love your
support with the source a hack five dot
org slash hat shop is where you can get
insurance
and stuff like that yeah all right cool
I want to let you guys know to stick
around at the end of the show after the
credits you can watch highlights for
HP's insight of the expert video series
and with all of that said and with each
sexy burden reminding you
congratulations Darren you know man my
servers got like a badass graphics card
we're gonna like bench you know we're on
PC mark 3d mark I got the scores man you
should see my server running quick three
playing hold on cowboy
but open if you did a test burn
somebody's getting some come on yeah see
you just have to give it a little love
and then BAM you could suffocate in here
then just fade to black</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>