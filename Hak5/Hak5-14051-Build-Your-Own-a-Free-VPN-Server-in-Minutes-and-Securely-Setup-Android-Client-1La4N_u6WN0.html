<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hak5 1405.1, Build Your Own a Free VPN Server in Minutes and Securely Setup Android Client | Coder Coacher - Coaching Coders</title><meta content="Hak5 1405.1, Build Your Own a Free VPN Server in Minutes and Securely Setup Android Client - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hak5 1405.1, Build Your Own a Free VPN Server in Minutes and Securely Setup Android Client</b></h2><h5 class="post__date">2013-03-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1La4N_u6WN0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">setting up an open VPN server with
Android clients and connecting to
pre-configured Wi-Fi channels on your
Android device all that and more this
time on hack 5 the segment of hack 5 is
brought to you by the Ben Heck show
hello welcome to hack 5 my name is
darren kitchen and it's your weekly dose
of technolo sandy here we are back in
studio I'm hanging out with Greg how you
doing Greg and shins gonna be joining us
a little later in the program but first
and foremost I wanted to thank everybody
that emailed me and supported me through
hack across Europe that was so much fun
and one of the things that I talked
about during hack across here part of
you know best practices of hacker travel
really you know your encrypted laptop to
your encrypted phone your you know VPNs
and SSH tunnels and all of those things
you should just be actually doing anyway
whether or not you're going to yeah
crazy borders the I got so much feedback
about this and I can't believe it we
touched on oh my gosh this is like going
back to season 1 7 years ago we set up a
point-to-point tunneling protocol VPN
using gosh Windows XP and at the time it
was mschap one was totally broken so use
mschap v2 the authentication protocol
that makes PPTP so easy to use and why
used a virtual private server to do a
little pop-top action and get a VPN set
up very quick and easily which is great
because then you can do your encrypted
tunnel traffic over your phone I mostly
like PPTP for its simplicity and
ubiquity basically any device Under the
Sun is going to support point-to-point
tunneling protocol however it's not
without its caveats thank you to Micah
and everybody else that emailed me I
can't believe I missed this at Def Con
20 probably just for the reason that we
were just running around like crazy at
DEFCON 20 I don't know how I missed this
one but Moxie you guys know Moxie as
well as David Holton both demonstrated a
awesome kick-ass addition to
they're cloud cracking service check
this out the the cloud cracker brought
blog talking about cracking mschap
version two with a hundred percent
success rate and this is really awesome
because David Hilton you're not familiar
with his company he does a bunch of like
FPGA stuff and using his pickup
computing project basically able to
crack a mschap v2 handshake in you know
no time at all in fact they've published
the open-source chap crack application
it's over here on github on Moxie's
github so you can go ahead and start
using that today or it's even integrated
with cloud cracker if you haven't played
around cloud cracker com
basically you can upload a hash and have
it broken here it supports ntlm WPA sha
md5 and now mschap version to the exact
authentication mechanism that I was
using on my phone's VPN wonderful I feel
horrible for not having been aware of
this and for even recommending such a
thing although it was very easy to setup
I can't recommend it now because it's
broken
obviously and one of the reasons in fact
the only reason really that I even
prefer to use something as simple as
PPTP was well simply the fact that it's
ubiquitous it's you can find it on iOS
devices on Android devices hell you
could probably set it up on a blackberry
and that's nice
previously I know that we've talked
about setting up VPNs with one of my
favorites it's Open VPN because it's
open source and the only caveat there is
at the time there was no real easy way
to set it up on a mobile phone on like
an Android device without routing it
and while routing is awesome don't get
me wrong roms are cool and all of that
I'm not always necessarily keen on
installing a bin file from Bob's ROM
farm I don't know who Bob is nor do I
new cyanogen then again I'm sure he's a
great guy at some point you have to
trust your vendor and in this case I'm
using Samsung however I was looking for
something where I wouldn't have to root
and turns out times have changed
especially since
for point one of Android and now you can
do an Open VPN without needing routes so
that is what we're going to do we're
going to set it up today we're going to
be putting together open VPN which is an
awesome awesome project and we've talked
about ways to do it with a detail before
but now what we're going to do is set
one up with untangle and so here's the
thing
untangle is awesome software one it's
made in the Bay Area so represent two
they're sponsoring hack five with open
source so just going to throw that out
there right now however if you go back
to season seven before they ever new
hack five existed you'll know that we
were setting up homebrew servers with
their software so I'm one stoked that
they're supporting hack five now and two
stoked that I can use this in a way that
is just in perfect context with the kind
of stuff that we're doing right now
focusing on you know making sure we're
secure when crossing borders or even if
you're not doing crazy international
travel you should be setting this up so
I run a untangle server at home as my
gateway pretty much and we're going to
follow through how to set this up
because it's a breeze and I'm doing it
all in a virtual machine because that
actually it did this as well like we'll
get into this later but using like tails
virtual machine and then different
virtual machines to create an internal
network on your own machine awesome
awesome
well we're going to do it now in
VirtualBox because you guys know I love
VirtualBox and yes yes I know I'm in
Windows I'm using my Sony again because
I'm doing some artwork and such with the
photo shops and the illustrators and
stuff so anyway it the same thing will
be Windows Mac or Linux because we're
just using open source stuff here it's
awesome it's Oracle's VirtualBox and
basically I've already got a untangle
server set up here but it's just like
creating any other server you know you
click new and choose the ISO and all of
that but the one thing that you're going
to want to make sure that you set up
when you install untangle as a virtual
machine is that you're going to need to
network cards I mean obviously you know
for any router you're going to need you
know your network card for the internal
and the external interface and so
typically when you set up a VirtualBox
machine
going to have one of those Knicks we are
going to set up a second and that's
going to allow us to have fun traffic
rowdy action on an internal virtual
network how cool is that so just head
over to settings and then under network
your adapter one is already in there and
I've left it at bridged which means it's
going to go ahead and use my wireless
card here and get an IP address from the
network that I'm currently on and that
will be our external network an adapter
to is internet or internal network and
what you want to do is make sure you're
mindful here of the MAC addresses I've
already opened up advanced is where you
can find the MAC address here and this
one ends in two see that's my internal
whereas the other one ends in c0 so
that's my external so all of that is
already set up so let's go ahead and
start the install now I've already gone
ahead and plugged in the mounted the
cd-rom the ISO file here and put it on
the hard disk it's a next next finished
kind of thing but this is the setup it's
really simple we're just going to go
next we're going to give it a password
something horrible and temporary
and we just need to make sure that we
have the proper network card selected so
the external it wants to be the MAC
address ending in c0 I can come back
into settings and make sure that's my
bridged LAN Network and c0 so yes it is
the correct one just that's the only
real tricky part but as you see easy
enough to just look at the Mac and know
which one is which you can swap them if
you need to and we'll go next
and it's just going to go ahead and
figure out the internet connection in
this case I'm using DHCP because it's
really the the internet connection that
it's getting is just what my laptop has
my laptop sticks connected to the
wireless here at the hak5 studio but it
would probably be the same if you were
say you know connecting it straight up
to a cable modem or DSL modem or
whatever have you and that's how its set
up at my house and now we get to choose
what kind of network we're running as
this is what I run at home is just as a
router but you can also set it up as a
transparent bridge if you'd like if you
already have a router and things of that
nature you can just kind of pop this box
in the middle and have it do its thing
and finally we can specify how we want
to do upgrades I'm going to tell this
not to automatically update for right
now I normally would but I just want to
do this as a quick demo so we're not
going to end apply any updates
and we're welcomed
tangle and we can actually if we'd like
to install some recommended applications
get ourselves a package not as
interested in that right now because I
just want a demo one of the free
applications but they do have those
packages there I'm going to go under oh
and under configure you can change all
of the settings that you might already
imagine as far as your networking and
administration of your router you know
we can set up or forwards here and set
up our interfaces and if we are running
a DNS server and host names and things
of that nature pretty basic stuff that
you would find on just about any router
but what makes untangle really powerful
is just the ability to have applications
and very much like you know your Android
and iOS and whatnot we have an app store
so I'm going to head over to that
scroll down here to the VPN you'll see
that there is an IPSec VPN but what I
would like to do is install the Open VPN
and this is a free app so I just click
download free app and I already have an
account here
now is this installs I should point out
that we've talked
setting up OpenVPN in the past we've
used a detail we've used different
distributions of it what I really like
here about untangle is if you're already
going to use it as a router or as a
bridge it's really nice to have it just
right there in your stack they do a
really great job of setting up the
clients and the distribution so I'll
show you that now so what happens now
that I've got this application is it
just shows up here in my more like like
a DJ rack or something like a like a
19-inch rack mount gears kind of stuff
and I just go into settings and by
default everything is is pretty easy to
configure basically we set it up as a
VPN server here not a client but we
could set it up as a client to go from
you know one branch office to another
office or something like that and we set
up our certificates and in this case we
just give it things like the
organization where we are I'm going to
say California San Francisco
and we can choose which network we're
going to give ourselves access to and we
can set up really cool routes if we'd
like to but basically what this is going
to do is give me access to the internal
network and that's most of the time what
you want when you're setting up a VPN so
next and finish so that's it as far as
setup is concerned you can go through
these tabs and see you've got a
connection event log of you know what's
common gone you can go through and
choose different networks that you want
to actually export to those hosts and
see the status of it who's connected and
things of that nature but we just want
to go ahead and add our first client
under the clients tab click Add
and give it a name and I'm just going to
say Darren or I'm going to be more
official and Sadie kitchen that'll be
fun and the default address pool which
we've already seen there we go so the
only thing left to do here is to
distribute this client so we'll click
apply and now we can distribute the
client
and here you can see we can download the
installer for Windows or we can
configure it for other OSS and see this
is the really nice thing about Open VPN
as opposed to like PPTP or IPSec is that
there are clients for you know Windows
Mac Linux Linux now in this case Android
I'm sure there's one for iOS somewhere
and is really nice to be able to just
take this file which has all of the
certificates and everything you know
we've talked about public key encryption
before with SSH same kind of principle
we take these files we just put it on
that device now and we can connect and
it's not you know as simple as PPTP is
with a username and password so I'm
going to go ahead and click download the
configuration for all os's and I'm going
to save this file okay you're also going
to notice here if you'd like you could
email this as a link to somebody I could
enter in Darren at hack 5 org and send
the email over to myself but what I'd
like to do is very securely send myself
all of this this package basically to my
phone so here's what we're going to do
now and I come over to my phone and set
up an ssh server so i just picked the
first ssh server i found on the
marketplace
I've seen some others like drop bare so
your mileage may vary but basically any
ssh server will do and i've already set
this one up just named it test to run on
port 4 4 4 4 and it's pretty cool i
forget the name of this one but there's
if you if you just check out the Google
Play Store for SSH server you're going
to find a ton of these but this was a
free one that allows me to do a shell
SFTP and SCP so that's where this is
going to come into play and I've created
a user and as you can see it mounts as
the SD card so such storage / SD card 0
so with my server setup all I have to do
is hit start and yes now I have an ssh
server going if i hit info you'll see my
Wi-Fi IP address is 1070 331 187 so
here's what's really cool now about
untangle see I'm in this untangle
interface join modding wizard Ben Heck
and Friends as they build and modify a
host of amazing community inspired
creations be sure to watch new episodes
of the Ben Heck show each week right
here at revision3.com / t BHS in the
latest episode of the Ben Heck show ben
continues his work on the ultimate
gaming system combining a ps3 xbox 360
and a wii u into one amazing machine
don't forget to go to element14.com / t
BHS to find out how you can enter to win
Ben's ultimate gaming system as well as
other builds from the show
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>