<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>IRB Interactive Ruby Shell - Metasploit Minute | Coder Coacher - Coaching Coders</title><meta content="IRB Interactive Ruby Shell - Metasploit Minute - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>IRB Interactive Ruby Shell - Metasploit Minute</b></h2><h5 class="post__date">2015-02-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_VUkElLmLXo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I army this time on Metasploit minute
Metasploit minute is brought to you by
viewers like you
if you get value from this show and can
spare even a dollar please consider
contributing at Metasploit minute calm
welcome to Metasploit minute the
breakdown on breaking in
I'm your host Rob fuller but you can
call me Moo bik's today we're gonna be
going over IRB or interactive Ruby show
it's a repple or a read eval print loop
language show and the cool thing about
IRB particularly inside of Metasploit is
that all of the the functions and
objects as as a IRB as an
object-oriented language are available
to you directly from the Metasploit
console so if I type an IRB directly in
the MSF console I have all the features
and functionalities that I have if I was
just directly scripting things so if I
wanted to say a equals 1 B equals yeah
that's equals to a plus B I have olive
Ruby just sitting there for me now
that's pretty basic but we can get it
into much much more deeper things inside
of IRB directly for Metasploit so stuff
so framework is the base object and you
have just calling framework as the
object you have the framework it tells
you how many sessions job the progress
database is their jobs and plugins are
active but we need to type in framework
DB and all of this can actually be
looked at into the API documentation
that we generated on a few segments ago
when we generated yard Docs so DB Fame
earth dart DB is is one thing we can go
into and the cool thing about Ruby is it
lets you list methods so type in methods
and they'll give you all of these tons
of methods that you can perform on on
the database and I probably shouldn't
have done directly
the database object because it's so huge
it can do so many things but if we do a
- class dot methods it'll actually which
is still huge it'll actually remove some
of the class object methods that aren't
as you know important to us and then
what we can do from there is is put
parentheses around it and just do a dot
sort and now it's all in sorted format
so we can see how this goes
so let's say oh there's import I P list
file so we can say framework DV dot
import dot IP underscore list oops
no no dot list underscore file it's
going to tell me that it can't convert
Milla string and that's because I it's
probably requiring some kind of argument
so let's make a IP list right now Nano
one I - oops now no IP this text when I
to that one six eight one dot one
hundred that's it so we go back here and
say root IP list dot text unknown
regular expression so you look in the
the docs for this and it'll tell you how
if you use this it's probably a regex
because it doesn't see it as a string
with the four slash let's try it with
quotes and I didn't end the parentheses
there we go and it still can't convert
simple to integer well you get how you
can do this and this is the cool thing
about IRB is that lets you try all these
things out and then she figure out what
you want to do in it you can actually
create a meterpreter script out of it so
let's go into something a little bit
more useful let's go into meterpreter
sessions - one into our march over and
tie Barbie again now inside of mature /
you have the client object you still
have all of the overarching objects
available to you like framework and the
framework database but you also have
this new one called client so if we type
client we see all the variables for the
actual session we're on and we can type
FS for file system and then let's do a
methods on this one - - class dot
methods so it has other things
let's try FS doctor so the directory
which showed up over here just so you
guys know FS - der ER and we want
methods for this that's a lot of methods
so we can do the - class dot methods
again and this is now very short so if
we do entries we can see that now this
one line pulls all of the entries for
the current working directory that that
matter per session is running under
great now you can actually do a lot more
things so what we'll do now is we will
open a new file save it as inside of our
root directory Metasploit inside of
scripts interpreter we're gonna save it
as Metasploit minute dot RB and we're
going to type it's like client let's
let's put it into a variable let's say
dur list equals client FS dirt entries
and we're gonna put print status now the
print status is unique to inside of the
Metasploit so just to show you what this
is is print status underscore hello and
you can see that it has the Metasploit
like starting and it does auto
formatting a little bit
there's also print error which does the
minus in red and print good and I
believe there is print debug nope okay
oops wrong nope but there's also V print
so V print only prints when there's a
verbose and that aired out because I
mean in the IV shell that isn't a post
module or different doesn't have V print
available to it so V print does only
verbose mode but we're just going to
stick to print so let's just print
status
Derleth one
and let's make it two since that will be
something so we save that file save then
we get out of here
and we run Metasploit minute
now it should auto find it yep it did
so we have our Metasploit minute script
we've run it and drumroll it prints out
the second accusers dot dot dot or
alright so ii mean if your top if you're
starting from zero zero one two it's put
puts out the exe file dot exe so then we
could change this and you know maybe PWD
and that's no longer that's no longer
gonna be an array save run Metasploit
minute runs on the remote host and
hopefully and there's our directory
listing cool so now this is what what
what is nice about IRB is you can just
drop to IRB and then try out as much as
you want see how it works and then put
it into a script and then just you know
use it as a notepad really if you and
this one is when you start using like
for loops and stuff
once you get a concept of what you want
it to do so look at the documentation
the yard dock that we showed a previous
episode figure out what what is
available to you what's in the FS
library what's for the client stuff
what's in the what's in the framework
object all these different things that
you can do and if you need to find them
use the class my are - class methods
show thing that we showed earlier so
what do you think email MSF at hack five
org and stay tuned to Metasploit minute
comm for more shows like these and a
huge huge huge thank you to everyone who
supported the show so far and direct
directly and indirectly you can find
ways to donate or get awesome Metasploit
minute swag at Metasploit minute comm
every dollar goes towards making this
show just for you and for that I am
deeply grateful so until next time
Rubik's and I'll be here hacking too
cows come home
the thrashing thrashing cheedo writes
hey there
yeah you thanks for watching all the way
to the end I really appreciate all the
awesome feedback and support we've
received from viewers exactly like you
well not as cool but you get the gist if
we haven't already checked it out you
could really help if you go over to our
patreon and support the show directly if
you can't that's cool simple like or
subscribe goes a long way to either way
thanks for watching and we'll talk later
man take it easy</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>