<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Open Source 2-Factor Auth and Duck Encoders, Hak5 1716 | Coder Coacher - Coaching Coders</title><meta content="Open Source 2-Factor Auth and Duck Encoders, Hak5 1716 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Open Source 2-Factor Auth and Duck Encoders, Hak5 1716</b></h2><h5 class="post__date">2014-12-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TefDgrmz6BM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this episode of hack 5 is brought to you
by domain.com hello welcome to act 5 my
name is Gerren kitchen
she's Shannon Morse I'm sorry we're very
excited she's a little lag right now I
think she's still using a DSL it's okay
we're gonna get the the Comcast line
soon 600 megabits did you say 600
megabits we're going to have to I think
we're any way we'll get into that later
but I think there may be a lot of
servers at the hak5 warehouse come the
time where we get all of the hella bits
that we don't know hey we're having a
party this weekend oh you should all be
there let's not bury the lede hak5 dot
o-r-g
is where you can always find us and you
put a trailing slash brunch then you'll
find out all the details on how you can
join us yes it's like a roundhouse kick
to the face but it's actually just next
to shift so we have some interesting
segments for you all today y'all I am
very excited I am showing off some
open-source goodness from the community
because Trey built cool awesomeness that
involves USB rubber duckies and Ruby on
Rails Thank You allowing you to make
your phone do the thing wait what yes
we'll get into that and what what are
you talking about we do um are you
familiar with google authenticator yes I
am you better be I use both Google
Authenticator and the ubi key u2f thingy
me too yes so I found another
Authenticator that runs off the same API
and this is code offi so I'll be
checking that out today
rock on Paul can we get some logo on it
so if you're not familiar with USB
rubber ducky it's a very simple device
it's something that we have very close
to our hearts and it's basically a
keystroke injection tool you can write a
payload and save that little guy on a
micro SD card to load it into this
little guy when you plug it into a
computer it enumerates as a human
interface device you've probably seen a
bunch of stories recently about things
like bad USB this is that before that
was a thing and we built it out
specifically to do this and since I'd a
cute little case so that it looks like
an innocuous little thumb drive very
popular amongst the penetration testers
right now and it's a fantastic way to
get all sorts of crazy payloads on to a
unsuspecting device say a Windows
machine like somebody walks away from it
for a moment they didn't do Windows key
L to lock their machine or something and
you know if you can get physical access
to it even for like 10 seconds you can
have it do like a one-line run command
thing that enables a PowerShell reversed
shell back to your you know Metasploit
you get a meterpreter shell in like one
line with these guys it's using rickroll
people and i am aware that bad USB is
kind of different than the USB rubber
ducky we should mention that yeah well
you're right you're right it takes
advantage of a whole bunch of other
things in addition to just emulating
keyboards with heads and they also did
some really fantastic research as far as
finding unlocked bootloaders on things
like webcams and things of that nature
so it is pretty cool but I'm just here
talking today about the human interface
device kind of keystroke injection side
of things yeah and with the help of tray
a awesome hak5 viewer and some open
source code he's written in Ruby on
Rails that's the one our own duct
encoder server wait what yeah so check
this out if you sure you can go to USB
rubber ducky comm and then under you can
find out all about the awesome scripting
language and head over to the forums
oops and under resources there is an
awesome Java doc encoder that we've done
there's a bunch of
their community ones like ducky decode
which has a whole amazing amount of
firmware and encoders that allow you to
change your product ID and vendor ID and
support multiple languages and I have to
give props here to a friend that put
together the online ducky script encoder
because this guy right here is fantastic
it allows you to create payloads right
from a generator we can just check some
boxes like I want USB information and I
want you to disable the firewall and all
of those little things just by checking
boxes and hitting next next finish which
is really great and it also has an
online encoder so you can just go ahead
and type you type e your string hello
world and that would create a ducky
script that types hello world it's that
simple like the script is like five
commands you know it's easier than basic
and then you know from there you can
choose you know your different languages
like here the United States generate
script but and try brought up an
interesting point and that is you know
as a penetration tester you get you have
like I don't know you you just basically
get a free pass when it comes to the
tinfoil hat which is like hell yes and
why not roll your own so you don't even
have to send your payload I mean I can
totally understand if you're say doing a
penetration test for Wells Fargo or some
you know big bank that they might not
want you to be putting in a ducky script
and generating a VIN file from an online
resource run by hackers so why not hack
one together and that is exactly what
trade did and you can find it over at
his github here yeah and so I will go
ahead and walk you through the setup
process because if you haven't used Ruby
on Rails before it can be a bit much I'm
doing this all in the latest version of
Ubuntu 14.04 because I like TLS for the
win and there's a really simple way to
get Ruby on Rails installed just using
curl and then you know you set your
source using our VM okay once you've
done that it's really just a matter of
cloning the git repository and I've
already gone ahead and done that but
some things that I'm gonna throw out
here that have learned in
process that weren't as intuitive as you
might imagine or that you're going to
need to get turbolinks so hurry
dependencies simple enough gem install -
bro turbolinks
tak V and then I'm using two point five
point two you also need to do a gem
install on this thing called exec je s
and basically what that allows you to do
is execute JavaScript within a Ruby on
Rails environment which is pretty cool I
also and this is where things got
interesting that didn't solve the
dependency issue with having a
JavaScript interpreter so I also
installed the ruby racer using the same
gem install that's based on the google
chrome v8 engine which is a really fast
javascript engine again that did not
solve everything so you know what did
though I hate dependencies apt-get
install node.js I have no idea why that
was necessary for my particular
environment so if you're running over to
1404 it's all in the show notes so you
can pretty much copy and paste that if
you're running the same distro I am and
it should boom
you know Bob's your uncle after that
then you can use bundle which is a
fantastic program to make all of this
easy just run bundle install and then
everything will be all set up and
executing this is really just a matter
of coming over to where you've installed
your your duck encoder and this is where
I've cloned it from the get and I've
gone ahead and installed everything I
will point out you will also need come
on you will also need a recent version
of duck encoder I'm using the community
edition from to do to do from ducky
decode at code.google.com/speed slash
ducky dica this is an awesome resource
here and so that's what's in the duck
encoder underscore 2 6 3 folder right
and so this is important because what I
will need to do one little configuration
bit is to go into duct encoder go into
config and edit the config dot yml file
and you just need to give it the
directory to your particular duct
encoder ok
once it has that
running it is simply a matter of doing
rails s tack P and then choose a port
number like 8,000 you can choose port 80
if you do it with sudo otherwise
anything over 1024 will work so now that
server is running and what's so cool
about this is I can actually do this
from any device with a web browser so
here we go
so you can do it from your phone - I can
do it for my phone and so what I do is I
go over to the in this case that's
running on the land so it's on our
internal IP address and I pull it up on
port 8000 and I have to give props for
the interface I love the little ninja
dock
that's what's up guys and so you simply
hit choose a file and in Android or you
know whatever your OS is it's gonna pop
up its default you know HTML choose a
file thingy and I just choose documents
and this is so great with the latest
Android as far as like being able to
either go into my personal favorite
astro file manager I use one of those
little notepad guys on Android no side
rant here about there not being one
built in or Dropbox you find your ducky
script and when you're done you just hit
create inject op bin and it will go
ahead and download that and all of that
was run on your own local server and
I've gone ahead and done that and you
know it's great you know how we include
with the USB rubber ducky a micro SD
card reader we also include the OTG
adapter and this is basically like an
Android phones yeah it's it's just like
an OTG cable except it's got a female
end on one side and it's an adapter form
instead of a cable which is really
convenient for when you plug your ducky
into your micro OTG adapter because now
I can go you know I can go into the
phone and straight like that we've
demonstrated how to for instance brute
force pin codes using one of these but
the same applies to the reader and this
is so great because basically off my SD
card in here plug it into my phone so
I'm on that website I pop it I can start
working on my ducky script right there
save it to a file run it through the
encoder and I'm gonna get my inject up
in I'll just save it you know
this is math storage so then you go just
so it in the root of your micro SD card
and stick back in your ducky and you're
good to go there you go is inject up in
and if I go ahead and whoops plug this
into my computer now you'll see the
duckies bounce ducky duckies do you
bounce and hello world I know it's a
very exciting fact yes and you can
likewise do the same thing just by going
to no place like home
one two seven two oh two one your
localhost or 8000 in my case and there
we go
you know I can browse I can find my
ducky scripts then I can hit generate
and boom I get a little link to generate
this and I can save the file and Bob's
your uncle
that's awesome and I just thought that
was the coolest thing so Trey thank you
for sending that by I think we're going
to set this up on USB rubber ducky comm
or a link to it so that people can you
know more easily do this or roll your
own if you'd like to and that's the
coolest thing about this being open
source and stuff everybody can get in
and collaborate yeah and I wasn't
expecting to have time to do this so
it's fantastic that like many hands make
for simple work I love that yeah open
community is super open fun yes speaking
of super awesome fun I would like to
tell you about our super fun sponsor and
we'll be back here in just a bit
it doesn't matter whether you like to
put websites together with Ruby on Rails
or cgi-bin straight to bin Bosch that's
gonna be fun when you have that killer
idea you need to snag yourself a domain
name and you know web hosting pretty
quickly and you can do that over at
domain.com they've got this awesome
domain discovery system and their easy
checkout process is super fast it's
gonna have your website up and running
in no time and I've told you guys how
much I love domain comm mainly because
they're affordable they're reliable
they're easy to use but also because
they're super active on social media and
you can tweet them at domain.com and see
why they are just a fun place to do
business and not only that but the guys
over there in Portland that they're huge
fans of hack 5 they want to hook you up
so if you use the coupon code hak5 at
checkout you're gonna get an extra 15%
off so when you think domain names think
domain.com it is time for the trivia
question of the week last week's trivia
question was what electronic device must
be factory calibrated to the Earth's
magnetosphere and the answer is CRT
monitors because we all still have those
right right this week's trivia question
is which computer programming language
is an educational programming language
designed in 1967 and modeled on the Lisp
programming language you can answer that
at H a k5 org slash trivia for your
chance to win some awesome hacks v
goodies
we're all pretty familiar with the
Google Authenticator application that
you use for pretty much all of your
two-factor authentication but I actually
found a different application that you
can also use which works pretty much the
same way and this one is called authy so
you can check it out over at coffee comm
the reason why I wanted to bring up this
one is because it's open source it's
also available for a bunch of different
platforms so you have you know your
usual platforms like blackberry and iOS
and you have Android on here but you
also have OS X Windows and Linux it's
kind of weird right for two-factor
authentication this is pretty cool I've
got like a REST API you can just see
this with a whatever you're building so
it's kind of interesting because you can
pretty much add this to any website that
you want to since it is open it's
totally available all of their code is
on their github Wow they've got
libraries for PHP Ruby bringing it back
to that Python node Java that's I think
covers all the bases so I wanted to give
you a brief brief explanation of how to
set this up on your phone so when you
actually open it up it'll just ask you
to verify via your cell phone number and
your email address so to verify via a
phone call or a text message depending
on which one new one and then I'll just
text you a pin code or I'll call you and
say this is your pin code please type
this in and then you can start adding
all your different accounts and when you
first start adding accounts it's not
going to give you a nice little pin code
it'll first ask you if you want to store
an encrypted copy of your accounts so
when you upgrade your phone or if you
lose it you can always go back and
restore them from there you simply start
adding all your different accounts and
that allow codes to actually be created
from those different websites so
Facebook is included in here I believe
Gmail is in here there's also Dropbox
and several several there's SSH I'm
sorry I'm just looking at this amazing
so the offi app it comes with secure
cloud backups you can use it on multiple
devices so you can use this on your iPad
as well as your phone as as well USO can
use it on many different sites like I
said Facebook and Dropbox are on their
Amazon Gmail
can also protect your bitcoins on here -
hmm so that's pretty handy it does
support 256-bit keys h.o.t P&amp;amp;H Mac RFC I
think it's called for four to six and
you can also do blue tooth logins if
your computer supports bluetooth logins
from your phone to so kind of an
interesting thing there so the nice
thing about this is it does look just
like the Google Authenticator app you
know they're both free so it just kind
of depends on which one you prefer
whenever you set up a bunch of different
applications they all show up down here
in a row and you just click on whichever
one you want to use so right now I have
Facebook set up with my little pin code
and it changes every 20 seconds or so
but the interesting thing about this is
there's also a Chrome extension so you
might be thinking why would you want a
Chrome extension if you want to do
two-factor authentication because it's
supposed to be something you know and
something you have so something I have
would be my cell phone right mm-hmm
the second Authenticator so the thing
with the Chrome extension is you still
need your phone to actually set up your
account through the extension because
you have to get your pin code from your
phone and you still have to know a
separate login password for the
Authenticator application on the
extension itself so if I pull it up on
my computer and you just get it from the
Google site like you normally would
I'll pull it up over here authy Chrome
extension so first it asks you for
passwords so this would be the first
something you know it'll load and then
you have access to whatever accounts
you've set up so here's my facebook and
then it's gonna ask me if if you appear
on a website that it doesn't recognize
as Facebook it'll give you a phishing
alert so this is kind of interesting you
attempted to use the Facebook token but
Facebook is not open so that's kind of
interesting if I pull up Facebook though
and I'll just do it in a separate tab
and incognito window so it'll actually
login it won't automatically log in so I
hit login and then I'll need to enter a
code so I'll go to my off the extension
show token and it'll give me my new
token so it's still need
to have your login for facebook which
you normally would need even if you
didn't used to FA and you also need to
have your password for off the as in the
extension and then you put in your code
like normal and you can log in to your
site so under here under account you
also have access to your cell phone
number your email your master password
for the authy extension the avi account
then you can go to your external
accounts and find your Facebook one your
backup password for face up Facebook in
case you lose your phone or something
like that and then you can also have
access to your devices so if I lost my
phone I could remove it straight from
this application as well and once you're
through you just have all of your
applications set up right there so it's
very very easy to set up I think it's
just one more very easy access way for
people to get using two-factor
authentication it's just like the key
based thing last week it doesn't
necessarily require you to like be an
ultra geek to be able to use your sure
but it helps you understand how to use
public and private keys a little bit
better I think one of the differences
though is that key base is open source
in the sense that you could just go
ahead and clone their get repository and
roll your own key base not key based at
i/o but wherever you want to yeah run
that and have your own like within your
organization like a private version of
that whereas authy and while you know
kudos to them because it looks like
they've done a really great job
especially here with the SSH lockdown
like this 32nd install seems pretty
simple to get you know something that
we've we've done in the past with say
Yubikey for example you know quite a
hacker e and timely process they've made
that really simple and they've got the
you know browse around their um their
github and so they do have all of those
libraries which makes it easy but it's
not open source in the sense that you
can run your own server right and so
that that's fine though if you're just
looking to get something spun up you
know quickly and if you can if you trust
them as your authority in this manner it
does like a pricing seems you know I
just did like an estimate to see like
what it cost like hack five to have like
you know with the five of us here and
it's like a buck 25 a month further
premium stuff so that's cool I guess it
just matters that you
trust them you still have to trust them
but considering the way that two-factor
worse is not like if they get hacked
it's all over anyway so we should
probably just point that out but no
otherwise it seems really cool and I
wonder what everybody else thinks
yeah I want to know what your thoughts
thoughts are and if there's another she
does if there's another two-factor
authentication with the only to have
used so far Aussie and then the Google
one so I would like to know if there's
other ones out there that'll dotnet or
whatever it's gone I don't want to use
that one I like a lot anyway yes good
good stuff okay well with all of that
with all of that we've reached we've
reached the end we've made it we made it
all the way there you go max I know
right well yeah now that were mostly
moved in mostly I've actually had a
chance to define I don't know spin up
the new boot image actually I'm very
excited to revisit this guy he's
spinning up as our virtualization server
again for another project that I have
for next week that I'll be playing with
over the holidays and that one's going
to allow us to do like hangouts
internally okay don't use external
bandwidth it's gonna be pretty cool and
then when we do get the bandwidth reveal
invite people in and I think it'll be
act as a backbone of our robots the
telepresence robots I want to buy bread
boards row boats for those bread boards
and resistors I'm afraid that if you get
a breadboard you can do what you do with
every piece of electronics and that is
put in your mouth and try to bite into
it she just does that it just seemed apt
that it is a breadboard in this case so
maybe a little paprika and some cinnamon
yeah Simon poster boards at the hack
coming right up
with that we do want to again remind you
about the brunch that is this weekend
everybody's when you're in the steering
which is December the 6th so go to hack
5h aka the number 5 dot o-r-g
and go ahead and plunk in at the details
hack 5 better work slash brunch also ooh
hey you know how this is totally tangent
but you remember how last week we were
talking about like how you can
always find hak5 over at hak5 org you
can also and it turns out it doesn't
matter how you google it this is kind of
a new feature I just wanted to point out
I just googled hack 5 and isn't that the
coolest thing it actually says you know
TV show first episode aired August 5th
2005 I'm not even logged in in this
instance it recommends threat wire and
pure homage and hack tip and tekzilla is
that a wikipedia oh wait no this is this
is actually like built into Google now
and so I maybe maybe you want to hit
feedback and give general feedback and
just say that this is awesome and less
than three you know I don't know I think
that's a really cool feature because now
when we tell people like oh hack federic
turns out you can spell it incorrectly H
ACK five same thing ah that's great
yes that works yes let us know what you
think feedback at hack 5 org you can
also find all the way is to follow us
over a hack 5 dot org slash follow get
on all the socials and tweet at us and
all of those things and you can always
support us over at Haq shop.com that's
what makes this keep going that the
wheels go round kind of thing so thank
you for everybody that is supported that
and of course you know it's dollar day
season so there's all sorts of good
stuff going on over at hack shop sales
right yes yes okay with all of that i'm
darren kitchen I'm Shannon Morse
trust you techno us
do the Tang gonna do the Tang do the
time make it to the Tang we're going to
do the Tang there to do the time run
another time and next week's question is
or this week's question is damn it you
ruin you messed it up I had my hacks or
flakes for breakfast Paul I'm ready to
rocks or hey Billy
yeah so you're saying that something
made at an idle sale Lloyd say you load
whatever that stuff is is rotating
around like physical media there's
actual like turning mechanical Nissen
volved in this why don't you fire on the
SSD Paul doesn't it doesn't sound as
good as roll the tape roll the tape
yes you what you know what if you or
stuffed animal I think you would be
you'd be sideways monkey like this video
if you know it's a grease monkey</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>