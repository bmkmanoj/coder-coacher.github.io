<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hak5 - Linux Motion Detecting Lock Screens and Android NFC Hacking with Arduino, Hak5 1209.1 | Coder Coacher - Coaching Coders</title><meta content="Hak5 - Linux Motion Detecting Lock Screens and Android NFC Hacking with Arduino, Hak5 1209.1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hak5 - Linux Motion Detecting Lock Screens and Android NFC Hacking with Arduino, Hak5 1209.1</b></h2><h5 class="post__date">2012-10-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-nqN9YaRKB4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this time on the show motion detecting
lock screens for Linux using motion and
pagekite NFC hacking on Android with an
Arduino and how secure is that eighty
character password really all that and
more this time on hack five this segment
of hack five is brought to you by the
Ford Focus Electric hello welcome to
hack 5 my name is darren kitchen and my
name is Shannon Morris and this is your
weekly dose of Technol us this is this
is gonna be a fun one yes it will so
Paul is gone mm-hm
bye-bye oh speaking of ha happy birthday
oh yeah that's right Tobias
welcome back Paul turns into the house
you know about that one celebrating his
birthday and this is he West Florida
history too because we had talked last
week about how when you were setting up
the ps3 controller to go ahead and work
with the Nexus 7 for gaming you can well
maybe we can use this to Bluetooth with
the cameras and get him to switch well
obviously we're not doing that right now
that was the idea actually for this show
we kind of honor our coworkers yeah so
hey that's pretty cool
and anyway we're probably gonna get Paul
next week to come in and show us how he
did that because it was a pretty sweet
hat I just want to have to do it and
this and all the things oh yeah I don't
think I could trust you doing all that
you probably forget one thing or another
yeah I've been known to multiplex just a
bit but I usually do time division
multiplexing I'm not so much with the
code division that's yeah yeah alright
well what's going on this week I had
this idea okay so remember how we've
been talking lately about some people
writing in saying like hey I'd like to
know if like a laptop has left my
building you know we're like oh a script
to check your Wi-Fi and if your Wi-Fi
has gone lock the screen yeah well one
of the things that
thought about was I kind of want like a
proximity check so if I do leave my PC
if I leave my laptop unattended I want
to know of anybody's come up mess with
my car has that oh no way it starts
beeping when somebody comes close to it
mmm yeah I don't maybe we can actually
make it beep and I'm sure with a little
bit more script to don't tell me that
well the idea was you know remember the
cold boot attack right you'd come up and
like freezer Ram and stuff I don't have
the next seller ometer in here so I
don't know if it's been shaken but I can
use the webcam that's cool so check this
out I've got this tool here called
motion a sudo apt-get install motion if
you're on Debian and quite simply I'm
gonna run it TAC end so it's not daemon
you'll see what it does is activates my
webcam okay and it starts a streaming
webcam server on port 8081 here ah give
just second to come up and as I move you
see as I'm moving it's creating those
JPEG files oh oh dude okay let me close
that and pull up Nautilus hair and go
into motion folder and as you can see
there there is nice there are photos how
many photos of the person that haha I
guess you could do this
virtually right from like another
machine somewhere yeah I guess I could
turn this on remotely I mean the idea is
that motion this program motion is
really versatile and what you can do
with it you can have it like you know do
events when certain things happen so you
can have like email your phone with like
a photo if this then that basically you
could have it like some people have it
send all of its photos to Dropbox as you
can see right here I'm having it send
all of my photos to just you know an
ocean directory okay but I wanted to tie
this in with a tool that we had talked
about last week pagekite and use that to
kind of create a temporary web server
like this already has its built-in web
server of images and here I'll fire that
up again and let's go over to the web
browser and go to localhost port 8081
and there you go so it's got a built-in
web server that's going to show the in
and so I figured why don't we take
advantage of that on port 8081 and take
advantage of the pagekite stuff that we
were talking about last week and then
tie all of that in with a script that
allow us to lock our machine and every
time we do it just temporarily throws up
pagekite throws up motion and then locks
the screen so I guess I should probably
dive into how to get to started with
motion like I said sudo apt-get install
motion if you haven't already and once
you have motion setup you need to go in
and create yourself a motion comm file
okay you'll notice that if you go to /
Etsy slash motion there are already
there is a default comp file in there
you want a CP that motion Kampf over to
like your home directory so tilde here
I've already done that so let me see D
to tilde you're also going to have to CH
own your username in this case DK motion
Kampf you know just because when you
copy it from that Etsy motion folder
it's going to not have the permissions
of your user and you need it out yeah
yeah so let's dive into actually
modifying the the conf here to our
liking so I'll use nano motion conf and
there's a couple of basic things that we
want to to touch on here first of all it
needs a you can see the first thing you
want to do is it's by default a date add
the Dame is set to OFF
I want the daemon to be on meaning when
I start the program don't be interactive
just kind of run in the background okay
the next thing is there's a pin file and
this is just a process ID file you need
to make sure that you touch this file
you create it so for example you could
say oh touch motion dot pid' if you
could type right and then you would have
a file called motion kid and then you
can say hey you know point that right
here and so what it's going to do is
it's going to use that file to say
here's my process ID the other things
that you're going to need to do
basically a lot of the stuff right out
of the bat is going to be set up you
know things like by default it wants to
use slash dev slash video zero on
Linux it's you know dev video zero for
your first webcam video one video two
just like you had a th and w land yeah
so if it also has the ability to use TV
tuner cards so if you're doing like a
desktop PC you might have a capture card
in which case it's slash dev slash tuner
zero and we just you know remove this
semicolon and that becomes your option
okay and then there's a couple other
things here for ntsc and other things
that we don't need to change as far as
the tuner is concerned the width and
height 320 by 240 so quarter vga nothing
really high res but we don't need a
whole lot of resolution to see motion
can you change it if you want to take it
up it to whatever your webcam supports
and nowadays I think most webcams that
come with laptops are like 1.3 megapixel
whoo
what else is have some highlighted here
that we need to change there's a bunch
of brightness things that you might want
to change depending on your particular
environment and your webcam I leave
everything default and everything's been
good so far and then we actually get to
our motion detection settings the
threshold is 1500 what that means is
1500 pixels have to have changed for it
to think that motion has occurred okay
so this is one that you might need to
tweak depending on where you are you
know if you've got like a big
today we're once again sponsored by our
fine friends over at Ford and we've been
talking about extending your Wi-Fi range
but now how about extending the range of
the Ford Focus Electric I got three tips
for you
first off utilize the brake coach it's a
feature that helps you optimize the
car's regenerative brakes and a look
graph on the instrument cluster actually
shows you the amount of energy captured
each time you stop then be sure to check
out the budget consumption gauge it's
this little white line that you want to
keep in the blue Cup by gradually
accelerating
coasting down hills and using the
regenerative brakes and you're rewarded
with little blue butterflies finally
check out the Eco route option when
using the my Ford touch navigation it'll
let you choose from three routes the
fastest the shortest and the most
fuel-efficient of course similar to a
conventional gasoline engine car doing
things like turning off the air
conditioner in the heater are going to
help maximize your range now those are
just some of the awesome tech features
found in the Ford Focus Electric and we
want to say thank you once again to Ford
for sponsoring this episode of hack 5
and showing their commitment to
technology
this is one that you might need to tweak
depending on where you are you know if
you've got like a big fish tank behind
your computer with fish swimming all
over then that would set it all if you
have your like your cats running around
home or something there's nothing that's
gonna stop the cat from setting this off
that's just gonna be good fun the Ignite
should change the noise level if like
you're in a low light environment
there's a lot of possibility that you'll
have grainy image especially if you have
a like you know a VGA webcam so 32 by
default I haven't had to tweak it too
much and there's also a D speckling
filter in here which is really cool it
actually uses ffmpeg as a dependency to
do filtering to the images and so it
automatically D speckles so that's gonna
get rid of a lot of film grain builtlean
they get off the cheap camera these look
great
ya see I used to say in season 1 that
don't worry about wearing makeup or
anything because xvid will take care of
that makeup and then I met the action
though now Paul is gonna yell at me
because it's probably goober bright on
my forehead but but then I met the guy
that that made xvid and I told him that
and anyway oh and it was awesome umm
here we go so here we can actually
specify you know the text that we're
gonna put overlaying on the image you
might want to do a date stamp our time
stamp it has a whole bunch of different
like percent y means a the Year percent
M the month the day things of that
nature you can put it in the bottom left
the bottom right there it is the live
web server this is where it really gets
fun so by default it wants to put the
webcam port on port 8081
the quality is 50 that's not great but
whatever webcam motion on and the thing
that you have to change is by default
this is set to only broadcast a local
host and we want to set that to off
meaning we want it to be accessible from
more than just this machine okay yeah so
you can access the images from my phone
hopefully that's the idea and then
there's some other tcp stuff so
basically there is another web server or
there's a is listening on another port
on 8080 and if you enable this you can
actually control some of the
parameters of the webcam over front of
motion from your phone or from whatever
device it is that you're connecting to
this so a little bit of remote
administration so I like to turn the
localhost off there so I can get to that
and futz with it if I need to the rest
of this is all pretty self-explanatory
in here I haven't really had to tweak
much more that you can get really
in-depth with like sequel you can tie it
to databases and stuff like that but for
the most part those are the tweaks that
are needed to do to get it set up to my
liking so I'm going to quit and not Save
Changes and need to update anything
there okay so with that all set I
figured why don't we tie it together
with a script so that using pagekite and
mo-chica motion I can then see with
what's going on when I lock my computer
so I've gone ahead and created a file
here called motion lock SH and you can
see it's just a bash script so we begin
with a she bang and then I just say hey
motion and then oops supposed to say
motion - you see for the config file
that config and then we use no hop no
hop is going to fork this process so
that this process is done in the
background kind of like as a daemon and
it's not going to hold our script and
it's going to issue pagekite whoops it's
going to issue page cut here and tell
pagekite to forward port 8081 to again
hack v darren that page guide me okay
and then finally we're gonna issue nome
screen saver command tack tack lock and
that screen didn't gnome at least I
don't know what the equivalent is for
KDE I'm not that cool
there's also xfce and all the other fun
windows managers so you know you choose
something different there I'll save that
and then if you haven't had done this
before this is something that like one
of the first things I do with any new
Ubuntu or whatever Linux I I go into
keyboards and under shortcuts
custom shortcuts and I always add some
for like you know G edit calculator and
Nautilus things like that so I can
quickly navigate I love it's it's
because of the ctrl alt T like if I have
to click an icon to do something I jars
him crazy
I'm gonna click icons in Ubuntu anymore
yeah that's what's up Wow kind of gross
all about the terminal you know right
and so I'm gonna go ahead and name this
command motion lock I'm gonna make the
command slash home slash DK slash motion
lock SH my script that I just created
apply that and normally it's ctrl L to
log out in fact I could come here under
wherever navigation or system or one of
these yeah lock screen control L oh yeah
right like I'll make this ctrl alt shift
L and then I'll make mine so I don't
have to remember to use a different
shortcut on this machine control all out
okay so now whenever I do this it's
going to run that command and I'll close
this and I'm gonna pull up my phone here
there we go alright and so as you can
see there it's just saying that it is
temporarily unavailable so won't wha
however I hit control all l fact you can
see here the webcam light just came on
scoot that over lights on the screens
locked if I move it it requires my
password saying hey dude
ah and if i refresh this page huh there
is my mug and it'll keep updating as I
move around so now I can lock my screen
with ease the webcam automatically turns
on I can walk off and know that I can
see if anybody comes up and tries to
like ducky attack my machine or brute
force it or cold boot the RAM how funny
that that is so cool I love it it's it
kind of reminds me of pray that I used
on an old Windows machine oh yeah this
is even more funner yes I'd be the only
thing that I haven't like really tidied
up is when you log back in you have to
remember to run stop-motion it's a hero
cat this
it's a script here that basically just
does a kill pit of motion and kill
the head of a pagekite I used to get it
from a PS ox but regardless I'm sure I
could find a way to have it so that I'm
in ER if I'm interactively with it maybe
every 30 seconds to check to see if the
running if not you tell them I don't
know maybe the if you guys know of a way
to very easily on unlocking the screen
run a script that would be awesome
but I'm gonna start using this because
how fun is that that's a really good
idea for like when you leave your laptop
at home or something like that yeah you
don't know if somebody's breaking in you
don't know what Starbucks just do it I
don't know what they start Starbucks you
could be looking at what they learn
you mean kittens on the Internet kitten
porn oh yeah yeah not cool no I know I
know what you're up to Starbuck and the
other one Luna Luna yeah bad kittens
Kirby's off chasing mice actually she
caught one the other day oh nice did she
bring it inside for you would you like
real gift yes and I was like oh thank
you I'm honored let's just put this over
here good kitty yeah there's a good job
okay well anyway I hope that you guys
like that if you have some ideas on how
we can improve upon it again this is
just kind of proof of concept fun stuff
I've been working on feedback I had five
org and we have an awesome segment
coming up here from Derby con talking
about NFC hacking and bringing that
capability to older phones
so stay tuned for that but first we're
gonna take a quick break</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>