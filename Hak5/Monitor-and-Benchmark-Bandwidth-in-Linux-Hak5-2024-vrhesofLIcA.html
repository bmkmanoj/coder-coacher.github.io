<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Monitor and Benchmark Bandwidth in Linux - Hak5 2024 | Coder Coacher - Coaching Coders</title><meta content="Monitor and Benchmark Bandwidth in Linux - Hak5 2024 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Monitor and Benchmark Bandwidth in Linux - Hak5 2024</b></h2><h5 class="post__date">2016-08-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vrhesofLIcA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">monitoring network traffic and open wrt
and benchmarking throughput from the
linux command line this time on hack 5
hello welcome back 5 my name is Darren
kitchen my name is your weekly dose of
technologists numbs by the way otherwise
nice NURBS alter-ego yes yes what you're
not wearing anymore
you mean this right ok it's really
freaking hot in this studio but look at
this amazing art we're pineappley I love
it both pineappley Darren made this art
himself he's our illustrator for like
all of our stuff stuff including that
time of year it's that time of year
again I love I gotta tell you guys like
half the reason I got into this stuff
was to flex illustrator and Photoshop
and Premiere but that notwithstanding I
love this time of the year cuz we're
going to Def Con which means that it's
gotta be crazy pants now in the studio
no we're in the future right now we're
in the future right that's actually what
we're doing is we're pre recording in
lieu of Def Con coming and so we just
need to get ahead which also means that
is the perfect opportunity for me to
share with you Shannon some of the
questions that have been having about
using my Wi-Fi pineapple as my home this
is my home wireless internet connection
oh and it's also set up with my OpenVPN
if you've been following along which
means that my cellular service provider
that I use as my primary internet
connection at homes through my wife cuz
I have the limited data right right
cannot see the fact that I'm just
streaming lots of Netflix and does not
then throttle the connection it's
fantastic it's so smart but in figuring
this out I've also come to get familiar
with some various ways to monitor
traffic to monitor bandwidth usage to
test bandwidth in Linux and in
particular open wrt which is the the
embedded Linux operating system base of
the Wi-Fi pineapples so I thought I
would share this with you guys because
if you're using an open wrt based router
at home or if you have Wi-Fi pineapple
or if you're using Linux and you just
want to know how to test bandwidth
without having to go to speedtest.net or
something similar on your computer's
browser this is the segment for you well
this is gonna be incredible
easy for a lot of people but first I
think we should also mention pen test
with hak5 absolutely
a pen test with hak5 for our September
class that is 16th September 16th
through the 18th that weekend that's
going to be happening and you can find
all the information over at pen test
with hak5 comm we're super super excited
about it this is gonna be a really great
course for anybody who's interested in
learning about the Wi-Fi pineapple the
USB rubber ducky the land turtle and
Metasploit as well because we have three
expert instructors yes it is and it's
really immersive it's like InfoSec
dinner theater there's no other way to
describe it really you'll have to just
be here and find out because it gets
crazy so you can get your seats over at
Penn test with hak5 believe there's
still some available because this is
airing after DEFCON trip but we're gonna
continue doing these and we're very
excited to welcome you into our
warehouse and and and hack all the
things listen I have been this entire
time referring to bandwidth in
incorrectly I really mean throughput or
you know data rate but now that I have
said that we can continue using the
wrong terminology and I'll say bandwidth
through the rest of the show okay so we
all know that we can find out what kind
of speeds were getting from like sites
like speedtest.net fast comm speed of
dot me there we covered pretty much all
the ways on the web yeah mass comm it's
pretty cool yes one more can I mention
it
oh right right apparently if you google
internet speed test it will give you a
speed test right in Google in that
crazy-cool I thought that is because I
run speed test hey thanks Google check
that out pretty sweet oh yeah I actually
like speed of dot me yeah because it's
html5 based however I find that their
servers don't respond as fast as say the
servers from over at speedtest.net which
seems to be kind of your de facto um but
we're gonna be talking about doing this
in the command line yay fun when you can
drop into the console right love
learning new things for my consult okay
so first one that I want to talk to you
guys about is actually a command-line
interface for its
being test net and it's called speed
test - CLI check this out you can find
it over on github right and it is Python
based so if you just go ahead and
install that you can install it from pip
you can install it from easy install you
can do it from git or W get you know i
i'm actually using kali on this machine
right now so like a pip install it's
already built in so i could just run
that and i've actually already done this
so it's gonna say like yo dog you
already got that but that's all you need
to do if you have pip installed
otherwise it's easy install or any of
these other installations i mean this is
kind of ridiculous so simple because all
you're doing is you're grabbing a python
script so i should mention this python
script has a couple of dependencies
right it is going to well obviously
require python but here's what it looks
like when you run it so if we just do
speed test - CLI you can see you know
you have the option to set things in I
actually prefer bites you can you know
get a share URL by doing tactic share
which will give you the actual like you
know PNG file that you can share with
everybody on the Internet you can
specify your servers you can actually do
a list so I can say tactic list and
it'll actually say hey here's all of the
different servers that I can test
against I can test against Dublin how
cool is that
but I basically just want to run this
with either simple - suppressive verbose
output or I can set my source I'm just
going to go ahead and run it as is with
tech tech bytes because I prefer those
and you'll see it just does a little
test right there and it comes back and
says that I got 15 down and 5 up that
honestly wasn't the greatest but it
shows so the next one that I want to
mention is actually speed test SH which
you can find over here it is s H stands
for Shannon yes
I'm gonna let her sit uncomfortably with
that one for a little bit you can just
comment below what you think it stands
for speed test the speed test SH you can
pilot say it's actually curl based it's
pretty cool it uses curl it uses B C
which is the Bosch calculator if you
don't have that
I don't know what version of Linux you
have but BC you can do like two plus two
whoops not two equals two obviously two
equals two but there you go yeah as well
as time so it's all with bash which is
pretty cool but it does require curl so
I've already gone ahead and downloaded
that here so you can just run speed test
SH and you'll see it just goes ahead and
it starts doing a speed test cool
there's really not much to it nice thing
is that it doesn't require python it's
just in plain old bash that's nice so
check that one out
it does require curl and BC in time a
time is another cool command you run
time right and then the command you want
and then it tells you how long it took
the command to proceed I've seen that
one yes what's another one so hang on
I'm getting you know man
four megabits a second yeah that's
pretty bad yeah it is we're in
California we should be getting better
than that oh well and then of course
there's another I'd like to show you
it's called net speed SH and you can
find that over here and it's on github
links to all of these in the show notes
and it is just a very simple using W get
a bash script here and I have that
downloaded so I'll just run net speed SH
and as you can see it's just using W get
so it's grabbing it from Linode and you
can actually see the speed and then boom
at the end it just goes ahead and gives
you some output and says hey there you
go is 15 megabits per second it's not as
pretty but definitely it works not as
pretty it gets the job done finally all
it really is is a front-end yeah pretty
up w get so I should just mention you
can do the same thing with W yet
one way to do that in fact I have that
in my history if I do a history grep for
W get yeah this last one right here so
all this is is it's a W get command to
download a 500 mega test file from
SoftLayer so I'll go ahead and do that
and there goes it's downloading too cool
it's saving it to Devon also it's not
actually it's taking up any disk space
but this 500 Meg file and I can actually
see this is my current speed it's not
the greatest
we're actually that's that's how much
it's downloaded this is my current speed
this is pretty bad at the same time sub
is here doing Wi-Fi pineapple e stuff so
the well yeah we're lame it on sub
there's some interesting frames
happening right now but we'll leave it
at that that's pretty cool though yes so
I want to throw those out there in just
a moment when we get back we're gonna
talk about bandwidth monitoring tools to
see live traffic analysis of what's
going on on your network after this
quick break say you've got a great idea
like an internet spirit guide how would
you bring that to the web well I'll tell
you what we do a hack 5 we head over to
domain.com it is the most fantastic
place because their domain discovery
system simplifies the checkout process
and helps you get your idea to the web
in no time flat and get this the guys
over domain comm huge fans of hack 5 and
so they have a coupon code just for us
that we can share with you it's called
AK 5 and it spells hak5 when you use it
at checkout at domain.com
you will save 20% and guess what even if
you don't need a domain name this exact
moment in this exact moment you can
pause the video and tweet at domain.com
and say thanks first important those
crazy kids over at domain.com and hack 5
for all those years fun time to you yes
when you have a great idea think
domain.com we are back and it's now time
to talk and bandwidth monitoring tools I
am ready for this are you ready sir I am
super excited as you guys know I use a
Wi-Fi pineapple at my apartment as my
primary Internet connection I'm wearing
one fashionably right here some so
members know it's a cool shine anyway uh
let's ssh into this guy over here one
seven two sixteen forty two one and
we're gonna go in as root there we go
and alright so all of these are going to
be packages that you'll be able to
install with opkg in fact many of these
also exist for many different operating
systems so while I'm using a open wrt
based Wi-Fi pineapple here as my example
if you are for per se like if you have
like a debian box that you're using or
something like that in your home network
you may be able to do an apt-get install
of many of these same packages okay so I
just want to throw that out there and
these are some of my favorite and I use
these whenever I'm trying to
troubleshoot or see what kind of like
throughput I'm getting on my network
which is kind of because this is alright
in the command line it's all on the
command line I prefer it that way but
you know they're there alternatives if
you want pretty you know graphs and a
web GUI but you know the first one I
want to talk about is actually the
smallest it's bwm ng so check this out
you do an opkg on on open wrt otherwise
like if you're and moon 2 for instance
in my bait like apt-get install bit opkg
install and the first package is called
b w/m tac ng now I already have this
installed so I'll just go ahead and run
it and show you
BW M Tech ng right and we'll do a tack
tack help and you'll see really doesn't
give you in much of anything you just
run it though what it'll do is it checks
all of these different interfaces and
then gives you real-time reports so
everything is in progress and you can
just there it is that's it this is this
is it all the radios right and so the
one in particular since this is a Wi-Fi
pineapple using a third radio to be land
to here as a client mode interface
that's kind of where all the internet
traffic is going through I can go ahead
and control C out of that one that is
really basic and simple okay the next
one is a little bit more elaborate I
really like this one it's called Biman
so let me show you some fun mimom be
mine yeah with tech help you can see
lots of options here but if you just run
it as is and this does like a curses
interface right isn't that nice so you
get your Rx and TX for the different
ones arrow keys to scroll through
obviously like I said WLAN to being my
internet interface and you can see you
know in kilobits I can do that but
whatever it's an SI unit but what's
really cool about this is you know in
addition to it you know what let me see
if I can reduce my font size so that you
can see how it can get really it can get
really nice-looking if you have the
extra room there we go we reduce that
once more so it's it's really cool
because you can get these real-time
graphs and actually if you I'm really
gonna have to reduce this we have to
shoot in 1080p here on hack 5
so there we go that's looking at WLAN
too but you'll notice if I could go left
and right it changes from school receive
of bytes per second versus if I hit to
the right I can actually see the packets
per second and I can keep going to the
right and I can see aborts and retries
and carrier and collisions and so it
really shows a lot of data in fact if we
hit D for the detailed information yeah
this would be super helpful in
troubleshooting like if you're getting a
lot of dropped packets or collisions or
things of that nature you can see here
I've only dropped five that's not bad so
and then you just up and down through
the different interfaces that's really
cool
and that we run right there is Biman
that's my favorite you can hit I and get
even more details but if you hit Q we'll
go ahead and quit and talk about the
next one which you've covered top
haven't you top yes I have top is a
fantastic command for seeing what
processes are running I'll just go ahead
and run that here and you can see yeh
top and obviously I'm using like no CPU
right now so I'll go ahead and quit out
of that and now let's do if top now if
top is interface top it's very similar
the only difference is we're gonna need
to specify an interface so let me do
tactic help and show you a couple of
options here that I like to perform
first of all I like to set it to
actually show me bandwidth in bytes I'm
a I'm a bytes kind of guy I don't want
those kilobits so I'll do this back or
case B exactly and then we have to
specify the interface now Takei now in
this case I'm actually really interested
in BR tackle and that's the bridge
interface on this open wrt based device
that will allow me to see what's going
through Internet traffic wise and look
at that so you'll actually see the
different destination so like Twitter
right so the host machine behind us you
know a connection to Amazon Google
hosted so if for instance I was doing a
lot if I was streaming from Netflix yeah
I would see Netflix is CDN in there and
it would be taking up the majority of
the bandwidth or if your friend is
playing counter-strike
you know I'm saying like if you have
roommates that are torrenting you can
easily catch them
using all the bandwidth right this is
the tool for that that's really mean I
like that one yeah I like how you see
the source investigation
yeah it really is in this one and curses
interface very much the same way you can
get really elaborate with it but I just
wanted to point this out it's one of my
favorites and then finally if you're
looking to get like some kind of
historic information on what goes on on
your network this next one might be for
you so let me quit out of this with
queue and talk about VN stat now VN stat
isn't gonna do much for me right now
because it hasn't been running very long
at all I can show you it's live stuff VN
stat tach L for live actually I'll just
do a help so you can see right so what
this is meant to do is run as a daemon
and collect stats so you could do it by
the hour by the day by the month by the
week see the top 10 and and basically
it'll give you stats on your kind of
network usage I'll just do a live view
here to see what's going on in a moment
tak L and okay actually that's
monitoring eth0 that's not the interface
I want any attack I for be art a clan
there okay so now it's monitoring that
interface and you know we can see we're
actually not doing that much traffic
right now but what will happen is you
run this for a bit and then when you're
done you hit control C to stop so I'll
do a control C and you get kind of a
breakdown in what actually happened
packets versus bytes now I show you that
let me actually switch over to my host
machine here because I can actually show
you so this is the V end stat home page
and they've got a great example of what
this would look like if you had this
running for a long time
so this would be an hourly report right
and this would be a daily report where
you could actually see the RX the T X
and then your average bitrate so that's
really neat so this is really something
nice where have you've been running this
for a while you can see kind of like
what your usage has been especially if
you're on a throttled or metered action
really
I only just discovered vmstat in
preparation for this segment and I'm
kind of digging this so I can't wait to
set it up on my Wi-Fi pineapple that is
my home network at home and see you know
what kind of usage like
for instance when my cat sitter stares
at my house and yes is ten gigabytes in
an evening oh my god my LTE modem oh
that's okay still friends all right
anyway oh wow yes Netflix she's exactly
well games yeah you know what it could
have been Kirby oh it could have been
Kirby could have been she might be
watching lots of Netflix hey what do you
guys think that is my wrap-up of my
favorite tools for monitoring bandwidth
you know the network usage stuff I'd
love to hear what you guys use of course
you know you can email us feedback a
hack five org will let us know in the
comments
yay and now and this is new but it's
super fun it is time for the technology
of the week so every single week we are
asking you guys what tickles your techni
less you can tweet us you could
Instagram us or you can face blerg us
that's a facebook for darren talk with
the hash tag pound hack 5 for your
chance to win some awesome gear from the
hack shop so for this week today we are
giving away a Wi-Fi pineapple nano
complete with our brand new pack of
stickers these are so cool yes you did a
great job on this Thank You Aaron so
who's our WinRAR Oh
our winrar there's there's been so many
great ones today but I really wanted to
you know it did it k3p NYX really stole
my heart with this VoIP set up he's
setting up radio repeater for those
tricky areas and this is fantastic
because what we're looking at here I
don't know if you can see that but
that's a lineman's handset so and I see
I see a toner and everything so my my
inner phone freak yeah that's that's the
way to my heart so k3 we're sending that
over to you so thanks for yes you know
sharing with us your technology pleading
out your hashtag hack five pictures
we're gonna keep this going yes let's
keep giving away some of our awesome
gear and if you're interested in our
awesome here you can find it over at
hack shop com that's a che Kay shop comm
that's how you can support us directly
and find out more about our fun stuff
like the land turtle of the USB rubber
ducky
and don't forget again about pen test
with hack 5 you can find out all the
details over at pen test
hak5 calm we're super excited about our
September dates that's 16th through the
18th where you can learn all about the
different products that we sell in our
hack shop as well as Metasploit with no
fix right
I love how we also bring them all
together because you know it's an
integral part of all of them they all
work together it's really beautiful and
it's story driven and we save the
internet from an apocalypse but that's
all I can say don't want to give
anything away it's a very themed
experience I'm yes feedback a hackathon
org is how you can let us know of what
else is in your heart with that i'm
darren kitchen I'm Shannon Morse
trust your techno lust hello look new
that's gonna stay in one of these open
the kitty fingers with her be reference
and you get cats oh yeah my laser cut
wait what are those oh no that was a
different shirt</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>