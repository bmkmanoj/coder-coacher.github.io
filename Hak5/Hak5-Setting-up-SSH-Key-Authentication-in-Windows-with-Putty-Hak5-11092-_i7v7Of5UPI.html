<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hak5 - Setting up SSH Key Authentication in Windows with Putty, Hak5 1109.2 | Coder Coacher - Coaching Coders</title><meta content="Hak5 - Setting up SSH Key Authentication in Windows with Putty, Hak5 1109.2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hak5 - Setting up SSH Key Authentication in Windows with Putty, Hak5 1109.2</b></h2><h5 class="post__date">2012-04-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_i7v7Of5UPI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this segment of hak5 is brought to you
by ting that's the whole idea here and
so you know this is really the basis for
a lot of different protocols that we
know and love and use all of the time
like for example you know it as HTTP but
it's called TLS you know used to be
called SSL as well as like PGP or the
open-source implementation GPG as well
as that's the thing you use in Gmail so
whenever somebody somebody sending me
one of those garbled messages it's
actually some kind of key right actually
here's the beautiful thing about this in
this scenario where I keep my private
key to myself yeah and I give you the
public key you can now encrypt a message
to with it send it to me and I can
decrypt it with this private key but
let's reverse the tables say I give you
this key right and now I publish
something with this you can actually you
know like say I put a signature string
using this you can make sure that I am
who I say I am with whatever I receive
that yes it's from you yeah we're gonna
get into that when we start talking yeah
total tangent yeah I know that's totally
a tangent but you know maybe it's
foreshadowing how's that it's actually
also used for bitcoins oh really
yeah I wish we could accept those in a
hack shop like there's no payment
processor that has touched it yeah I
know but you know it's used in a ton of
protocols and it's good stuff and SSH to
supports at least two different methods
of doing this public key authentication
what is well like I said I mean this is
the basic idea of how it works but
there's a couple of different
implementations as there always is and
so like HD DVD and blu-ray actually I'm
joking that way to represent this but
you know one of which is very popular
and it's known as RSA yes and RSA is
named after their creators and back in
1978 this hit the scene and it's by
Rivest Sameer and Edelman and I hope
that it did not butcher those but they
came up with this algorithm based on
basically the difficulty of factoring
large integers and you
this case and this is the math bit
that's very hard and we're going to be
like back in the napkin angus thing the
public key in this case is devised by
the product of two really large two
large tracts of prime numbers as well as
auxilary games and so when you create
that public key using that method the
private key is inherently derived from
those prime factors used to create the
private key so what it is is it's
computationally difficult in the case
that you only have the public keys here
you know the feds or whatever and you
sniff this off the wire whatever you get
the public key yeah right it is
computationally damn-near well I won't
take impossible but it's gonna take you
a little not impossible but it'll take
forever
okay got it and so that's the idea with
RSA but there's also another
implementation called DSA that's very
popular and SSH version 2 is going to is
going to support at least these two
there are a couple other ones if it's
like X stuff 502 or something yeah
they're always others kind of like the
gssapi okay but these are the two main
ones just like password and public key
crypto is the what's methods what's the
difference well DSA is another you know
algorithm to come up with these key
pairs and it's called digital signature
algorithm and it's actually an F F IPC
standard stands like more federal
information processing standard okay and
so this is a standard that the
government uses like DNS I and everybody
else okay so it's a good standard yes
yes anybody no I'm being serious both of
these are great standards you know and
you know some people would argue you
know of course just like anything else
there may be a flame or and some some
people say that you know DSA is the best
and other people say that dude what are
you smoking it's all about RSA but you
know whichever way you want to go I mean
the thing with DSA is it was patented by
David Kravitz
he's a former NSA employee and the cool
thing about this is it is freely
available for anyone in the world to use
oh that's just like RSA yeah okay
so whenever I am setting up my public
and private key for my SSH server
I can't mix and match I have to use one
or the other okay you can't create a
public key with RSA okay and then a
private key with us annex figured yeah
that's not they can't speak to each
other basically okay cool
no but that's ten and this is really
beautiful because it's this is the
underpinning of so many different
technologies and we're gonna be coming
back to this and then you know later we
can get way more in depth into this big
question mark which is math but for
right now practically speaking this is
the way that it works and why we'll have
these things and why we can have a
symmetric key crypto tap that's got it
all right okay so now stay tuned because
just a bit Shannon is going to be
setting up Windows to do G based
authentication with Cuddy but first
we're gonna take a quick break you guys
know as well as I do that the mobile
phone experience includes a lot of
headache a lot of confusion and
powerlessness when the plans are just
littered with hidden fees and steep
penalties stupid rules
unnecessary premiums and you know the
bottom line is as a consumer you're
either overpaying or being underserved
now ting is a new service brought to you
by some cool geeks up in Canada that
bring us clarity usability and big
savings to mobile phone users and
they've built a service based on the
Sprint network so they've offering 4G
Android phones to create a customer
experience like no other and the support
folks are smart passionate and will
actually empower you to solve problems
you know not some automated phone tree
who loves those most importantly ting
has one simple plan that offers fair and
honest pricing get this megabytes
minutes and text messages each of them
billed separately if you use less than
you anticipated it's no big deal they're
going to credit you the difference
the end of the month they've used more
they're simply going to bump you up to
the next appropriate plan without any
premiums or hidden penalties just head
over to tang comm slash hack five and
check out their online savings
calculator and you'll see why I really
don't leave home without my Tang modem
you know how I feel about Wi-Fi but
seriously this stuff is awesome for that
and they're going to hook you up with up
to seventy-five dollars off your first
month if you sign up at ting comm slash
hack five
it's time for some practical uses of the
private and public key pairing okay so
I'm going to do this in Windows which
I'm assuming you can also do in Linux is
we'll talk about that next week but yes
right okay so this is going to be the
private and public key generating that
I'm going to do in putty so what you
need first of all is to download this
putty key generator and you can just
google it come key right where do you
have to get it separately I spent a
while since I've done SSH in Windows you
know I had to install putty separately I
already had the putty keygen on my
computer from like way back in the day
so I'm assuming they're separate okay
but not completely sure on that anyway
so this is going to create your key pair
and it's an authorization to log on to
the server
so what you need to do is generate a
public/private key pair you click
generate and it asks you to move your
mouse around so it's kind of like
TrueCrypt yeah at the beginning of
creating turn trip you're going on oh
yeah okay so once you've created it it
gives you your public key for pasting
into OpenSSH authorized keys so I want
to save this save my public key and I'm
just going to save it on the desktop for
now so it's easy to find and I'll call
it public and then I also want to save
my private key and it asks me are you
sure we want to save this key without a
passphrase to protect it so you probably
want to give it a passphrase so up here
you choose your key passphrase and I'm
gonna let's say it's a long good yeah
something with a bunch of ones and
zeroes and exclamation points oh yeah
all that good stuff so that's where you
put in your key passphrase and then you
save it onto your desktop and of course
you would want to save this somewhere
secure right so if I wasn't doing a
segment on this I would probably just
you know encrypt it inside of a nice
TrueCrypt volume and then hide that
somewhere in the back ends of my
computer put that on a USB Drive and
then put like make a backup copy so if
you ever lose that safety deposit box
awful deniability true cry
good stuff all right delicious things
encrypt all the things I just keep going
okay so now that I have both of those
generated and saved on my computer
hopefully in a nice TrueCrypt volume
somewhere I need to actually get back
into the server and this is what I did
last week I actually created the DD K
dot hack five dot works that's the host
yeah so I created that host on my
machine that I could connect to so I
click load and go to open and so you
already have it set for the host as
snubs e at the host name so it already
knows your username you don't have to
type that in right so which if you
didn't you would have to add that at the
beginning of it so if you don't already
have a user already created you need to
go and do that with the add user come in
and that's just a DD you SE are in
center yeah and then you're also gonna
have to set a password for that user
using passwd space - username we'll get
into more that on the server side right
the idea here is well first and foremost
and I'll talk about this on the server
side in a minute you're not going to do
this as route put that out there no yeah
okay so now that I'm logged on I need to
make a new directory called dot SSH and
this is going to be let's see MK dir
thank it is SSH Center really should be
there is there and I can click what is
it LS to check if it's there okay so
there it is and thanks do LS with attack
la that'll give you a list of all of the
things there so there's not SSH right
and so the next thing that unit because
I need to do is change the mode of this
file okay and you're going to do ask age
mod 700 to it and I'll probably just
take this moment to explain that in the
UNIX world there are three levels of
permissions for files and directories
you know there's the owner in this case
you there are groups like any group that
say we could have a hak5 group you were
part of and Paul and myself were part of
and then there's the world ok everyone I
like to think of it as the overworld
like now yeah so I'm like the admin
there you go you're the admin of that
file and so you get to choose
who has permissions for those you know
to actually work with that file or these
are the motes and those are the modes
okay got it so you did an LS tech la and
you see the UH the dot SSH one is
currently here are the different modes
that it is so it's dr w XR for the user
XR for the group and x for the world yes
so there are ten characters for the
files attributes now the first character
represents what type of file it is say
in this one sub D for directory for
directory if it's a dash then it's just
normal file there are also a couple
others if it's like a symbolic link or a
few other weird ones there the next nine
characters are going to specify the read
or are right or W and execute or X
permissions for the owners the groups in
the world so three three and three yeah
that okay that totally makes sense I
mean that you wouldn't have the world be
able to do everything would you know
about your keys you know okay so seven
hundred mm-hmm
dot SSH press Enter
okay so now do that list again okay so
now I'm set
oh ok so now I still have my settings
alright sorry engage your your change
mode in this case change a design it
lets you easily change the permissions
of a directory or a file and a change
mode will actually accept an octal
representation of those modes and we're
not going to get into the nitty-gritty
of what all of that means but basically
in this case seven hundred represents
readable writable and executable for the
owner in this case Shannon and nothing
for anyone else cool all right
yes awesome I get it okay so now that I
have that set up I've changed the
directory so I'm the only person that
can do pretty much anything to it I need
to change my directory over to the SSH
folder so now I'm in dot SSH and what is
that Tilley right there is that hole
yeah till doze home so he does Weezy and
hit enter you're gonna go back home nope
okay yeah but oh it works the same as in
Linux dog okay no you're not
that's a beautiful thing you're on that
org is Linux virtual private server
domain calm so now I'm creating a file
yeah awesome so now I need to create a
file called authorized keys to with the
public key on one line saved in this
nice pretty file and then I have to add
SSH tack RSA at the beginning of that
public key okay so that basically means
I can just upload my little notepad
right that's what that means yeah all
right so let's see well you just need to
open this first
nope not notepad in notepad yeah well
it's not gonna let you because it
doesn't have an extension
I can't anyone yeah all that's on one
line awesome it's all on one line sweet
I awesome public key like everybody
here's my public key and then at the
beginning of this right here I need to
add SSH Tech RSA because that's what
kind of key is is do I need a space race
okay let's out of space this all the way
up into the equal sign I yeah we don't
care about the end public key that's
just for our knowledge so I copied that
into my clipboard and now I need to
actually make the file in here so I like
to use nano you can also use vibe in
your not go it into there if you do nano
space tack W for word wrap alright and I
that this is the thing is this all has
to be on one line so you're gonna need
it to be that would I do talk W yep and
then authorized keys to this is one way
to do it and it opens up nano yeah it
was like a text editor so now you can
just go ahead and paste that by
right-clicking awesome and then make
sure all of that's on one line now I
can't use my little clicky mouse oh that
wasn't on one line
hi I'm glad we're checking this would be
a pain in the butt after saving it
okay so now it's all on one line hooray
guessing that line above it doesn't
matter is there a line above it it's not
going up for me on the function home up
yeah that's the top line sweet okay so
we're good with that then I need to save
it so I hit ctrl C oh right out which
makes no sense to me
yeah that's our ace keys to wrote one
line awesome and then ctrl let's see
what's X X to exit wait
cool and so like if you do an LS you'll
see that it's there and if you cat it
you'll see that it's got your file your
your story I have my new file it's all
ready to go okay so the public key is
officially on the server now all right
awesome
so now we need to set up the private key
right yes so how do you do that in
Windows we need to open up a program
called pageant which is included with
putty
you mean the putty agent oh is that what
it says I don't know I thought the
paging well it's spelled just like like
a you know beauty pageant or something
well maybe it's a private key pageant
maybe they'll all go parading around
with their little bows what whatever
mean okay so here's my little pageant so
I right click on that go to add key
private open and it asks me for my key
your passphrase yes my passphrase and so
now your private key is I want a summary
with you oh yeah it's theirs
awesome sweet and so you've already used
your passphrase to unlock this it's in
memory yes if you reboot it's not gonna
be there you're gonna have to open this
again do it again I have to reconnect
now yes
exit this so last time you used a
password but now you should be able to
open up putty reload and you can see
you've got this is where I actually had
to put snub Z at at this point or else
it wasn't gonna work right yes so I open
not authenticating from agent ah and
there you go you're logged oh that is so
cool yeah that'll be saved in your putti
profile all of the stuff
dynamic tunnel yeah to do that again yes
dude this is great I mean this is
perfect I don't have to put in my
password that's so much more slowly
you're hunting it totally graze to
unlock your private key and put that
into memory and so lonely with every end
of that again yeah well potentially you
could use the same key pair for a lot of
different sugar servers you won't have
to type in that password a whole lot
totally doing this for conventions now
well you know it's beautiful if I can
get on the internet had a big desk on
but without link with plink we could
make this a batch file and anyway we
really oughta move up well we'll talk
about that when we get into persistence
okay cool okay well what do you guys
think I think that was awesome
I'm so excited yay I'm learning so much
this week do you guys can email us over
at feedback at hack 5 org and you can
comment below about all the awesomeness
that is included in private in public
use and stay tuned because in just a bit
we're going to be talking about setting
up sshd in linux and some some things
that you should know about when it comes
to that some best practices oh yeah stay
tuned we'll be right back</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>