<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hak5 - School firewall evasion, secure traffic tunneling, and ... | Coder Coacher - Coaching Coders</title><meta content="Hak5 - School firewall evasion, secure traffic tunneling, and ... - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hak5 - School firewall evasion, secure traffic tunneling, and ...</b></h2><h5 class="post__date">2009-11-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ISaqY83Y5RM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this time on the show secure tunneling
bypassing school firewalls virtual
appliances tracking VPN hashes and more
i'm darren kitchen
you're watching hack 5
this episode of hack 5 is brought to you
by goto assist Express dim dim easy free
web conferencing and domain.com got a
great idea it all starts with a great
domain at domain.com alright so here I
am at my favorite Wi-Fi spot in downtown
Williamsburg am a little bit of fun here
and yeah I'm in backtrack 4 but this
time I'm actually not doing any evil
hacker stuff I'm actually going to show
you guys how to use some SSH tunneling
to secure yourselves from potential
man-in-the-middle as you know maybe
there's a pineapple or something hanging
out your way and you want to actually be
a little bit smart about the way that
you're you know connecting to the
internet so I thought that it would be a
great time to talk about a little bit of
ssh foo got a lot of questions about it
recently I've gotten a lot of comments
with some some interesting Jepson I
thought I'd share those with you and I'm
going to be doing all of this using a
VPS that was so graciously provided to
me by our friends at domain.com so thank
you guys over at domain.com for hooking
me up so i can show you guys some cool
things that you could do with with a you
know service like that so let's just go
ahead and begin with you know SSH
tunneling in or just using SSH in it's
very basic form I mean it's a it's a
secure shell that we just use to connect
to our Linux box and that's exactly what
we have living in our cloud here is is
our Linux VPS running SSH so I can
actually take a look at my services and
manage and see that I actually have
those have SSH running here so let's go
ahead and connect to our machine so for
that just SSH and I'm going to do root
at the IP address here 66 11 227 124 and
I'm just prompted for the root password
so go ahead and pop that in and I'm
greeted with the shell exactly as I
would expect to be and I can you know
have fun as much fun as I could in you
know bash on my my remote Linux box but
I want to use my remote Linux box to
actually tunnel all of my web traffic
through and then later do the same thing
with just about any arbitrary port so
let's create a new session here and I'm
going to issue I'm just going to put a
variation on that SSH command here so
we're going to SSH to root at 66 11 227
124 but this time we're going to put
tack capital D 8080 and what that does
is it creates a dynamic as socks5 proxy
that we can use to send any of our web
traffic that supports a socks5 proxy
through so if I actually launch Firefox
here and go into edit and preferences
and then on the Advanced tab click
networking settings and then tell it to
use a manual proxy configuration an
under socks host I'm just going to tell
it local the one two seven zero to 0.1
on port 8080 because that's what we
specified click OK click close and now I
can browse the web and everything is
going to be going through that socks5
proxy and I can tell this by just taking
a look at what my IP address is so I can
go to any of these sites that's going to
tell me what my IP address is here and I
can see that my IP address is in fact
the IP of the server that I am you know
routing all of my traffic through the
6611
227 124 and everything in between is
through a secure SSH connection so if
anybody were sniffing in between me and
my VPS on the cloud they're not gonna
get anything but garbage so that's the
fun thing there and I know we've talked
a little bit about this before I can
actually buy disconnect from this proxy
you can see that rather than that IP I
have in my other IP so there we go those
are the two different you know and
that's with and without the proxy there
but we can do more than just setting up
dynamic you know socks5 proxies to
tunnel with socks5 compliant application
like firefox with most mail clients
instead say like i want to connect to
IRC but i want to do it securely here on
the Wi-Fi and I mean sure I could pull
up X chat and I could do well let's see
we'll connect to a server slash server
IRC dot revision3.com
there we go and I'm connected great but
I'm connected from
my IP here at the coffee shop everything
that's going in between my computer here
and that IRC server anybody here at the
coffee shop could totally see that
traffic if they were using right you
know doing a little man-in-the-middle
hack so what we're gonna do is go ahead
and tunnel it just like we did before
but this application isn't gonna support
sonic cyprox it the way I'd want so what
we're going to do is arbitrarily just go
ahead and tell it to map an IP address
out on the Internet in this example
we're going to be using IRC at
revision3.com which in this case is 72
21:17 dot 129 and with IRC we're
connecting to port 669 and we're going
to go ahead and map that IP address and
that server and that port is something
local to us so that when we connect
locally on that port we're going through
that SSH tunnel and to that server so
very similar with the taxi option ssh to
route at our IP address of our server
once again and we can actually combine
all of these so i can put in the TAC d
space 8080 so that you can you know use
it as a socks5 proxy as well as entering
the TAC l and we'll just pick another
port I don't know 80 81 and we're going
to do 80 81 colons because that's 80 81
is the local port that will be using :
the IP address of the server that we
want to connect to now this could be a
server that is local you know if this
were on our homeland rather than on the
VPS it could be you know our Apple TV
which it can connect to over NFS or
something like that but I'd actually
like to use this to connect to than
something else on you know because i
there's not a whole lot available to me
as far as other computers it's just a
single VPS so I actually want to bounce
from that VPS over to the internet so
that's why we're going to use the IP of
IRC at revision3.com so pop in the 80 81
: the 72 2017 129 for you know the IP
address of the IRC server and then on
port 6 6 6 9 go ahead and issue that
login as root excellent and now if I
open my IRC server once again
disconnect because that is you know I'm
connected in plain text that's no fun so
now we're going to do a slash server to
127.0.0.1 space 8081 and now we're
connected to that same IRC server yeah
we're going through our secure shell so
again anybody in the middle isn't going
to see anything all that exciting now
one of the other questions that I got
that's kind of similar to this this
isn't going to help you with your with
encrypting your traffic in any way but
it might be useful for anybody that has
a corporate firewall or a school
firewall that's rather restrictive you
know they don't want you to get to
Facebook MySpace or whatever you want to
do while you're at school or work we can
actually use you know since domain.com
provided me with this VPS I'm going to
do something very similar with a proxy
that's all based on the web see in this
case we're using SSH port 22 a lot of
times we're not going to be able to you
know use this to bypass a restrictive
firewall at our school or our work but
if you can get to a website any website
then we can set up our own website on
our VPS here that we can then I guess
you could say totally your traffic
through but it's not in any shape or
form encrypted now what I'm going to be
using for this is an open source tool
called poxy it's it's a PHP web proxy so
let's go ahead and SCP all of those up
to our server so I first need to create
a directory for that so I'll go ahead
and in that first instance where SSH
Dover to our VPS here so I just need to
change directories okay so I'm in slash
user slash local slash Apache slash
htdocs I'm going to make a new folder
called proxy and I'm going to SCP all of
the files that we need for epoxy over to
the server we just need three files to
index.php and include and you know the
style sheet so SCP all those
and now and that's it there's no like
setup involved all we have to do is pull
up our browser
and rather than going to like forums to
hack five org which on a lot of
universities and schools and workplaces
is actually blocked Wow and and we'll
actually just go to the IP address of
our server so HTTP 66 11 227 124 and I
will see slash proxy and there we go
we're actually greeted with the pH poxy
or PHP proxy what however you want to
say it and I can go ahead and just enter
in a web address here I've got options
about how I want to encode it if I want
to do rot13 again this isn't encryption
in any way shape or form so if you are
doing that here at like a public Wi-Fi
access point it's not going to help you
with any eavesdropping but will happy to
help you bypass there's firewalls and
I'll go ahead and enter in forums hak5
org and voila there we go I'm browsing
the hack five forms I've got a you know
this little address bar that it puts
right there in the webpage on top of the
content where I can you know remove
scripts except cookies so the images
toggle on and off a bunch of different
features and this is you know as long if
you've got your own server especially if
you got like a VPS home server whatever
what-have-you
this is a real simple thing just in PHP
they can throw up on a server and go
ahead and bypass those firewalls so
again if you have any questions or
comments about this here go ahead and
hit me up Darren at hack 5 org and in
just a minute we're going to get into
some feedback but first I do want to
thank the sponsor of this segment and
that is domain comm now you've heard how
domain comm has domain names on the
cheap like coms for under ten dollars a
year we're hosting for under six bucks a
month and that you can get 15% off your
order when you check out with coupon
code hak5 but did you know that they
also have killer VPS plans so if you're
looking for a hardcore server with like
root access or a master reseller plan
with dedicated resources then check out
domain.com cPanel VPN hosting plans
Linux servers Windows Server the uptime
maintenance you don't have to worry
about that you got plus you got cPanel
to makes it so simple and you can check
out with coupon code hak5 to save an
additional 15% off your order got a
great idea it all starts with a great
domain at domain.com
so we got some great feedback from
episode 612 you'll remember we were
doing VPN cracking on PPT PS and
cracking the mschap v2 hash and I ran
into a little bit of problem I thought
it was the encoding and I was totally
right because scoob's came to my you
know rescue and actually had some
awesome feedback with some code that he
wrote in my favorite language PHP that
totally fixes the little issue that I
was having and it was that the the hex
string that I was getting from from
Wireshark actually needed to be parsed
in a certain manner and he actually
provided this code and you take a look
at here what we're actually doing is
we're taking the hex string and and
converting it and we're combining it
with the with the challenge and the
response and the username because all of
those go into creating the string that
we need and he went ahead and well
documented this so I highly recommend
you to hit up the show notes and check
it out because the you know once you
read that like the documentation along
with the code totally makes sense now
and if he made the program or you know
PHP scripts so simple that all you have
to do is fill in those three fields and
then it actually generates the string
that you would then pass to a sleep or a
sleep or whatever and and there we go if
I actually run that now with one of the
dumps that I did from my Rd or on the
show and I there we go and it actually
brought my word list goes ahead and
cracks that to ntlm hash and we can see
what the password would have been so
thank you scoob's for you know that
awesome feedback and for your code so
you know of course like that's what this
show is all about to sharing it's
awesome stuff anyway I want to thank our
awesome sponsor go to assist see if I
had go to assist Express then scoob's
could just remotely connect to my
computer bada-bing but boom let me up
like a noob show me how it's done
and you can do that too you can support
smarter you can support easily we go to
assist Express you can easily control a
PC online and quickly resolve
technical issues way faster than you can
let's start and go to settings that
settings map yet what you know so you
don't want to walk them through you want
to just quickly pop on their computer
and it's easy to use for you it's easy
to use for them so go ahead and try go
to assist Express free for 30-days
when you head over to go to assist comm
slash hack five in order to take
advantage of this free offer though you
do have to go to go to assist Express
comm /h aka the number five for 30 days
free so rounding out this episode I
thought we would talk a little bit about
virtual appliances and we've been
talking a lot about virtualization here
on this show but virtual appliances are
one of those things that just speak to
virtualizations biggest strengths and
that is convenience and I can't tell you
how convenient it is over the
alternative to just download a virtual
appliance run it with its own operating
system already configured the way that
you know the developer intended it to
rather than downloading packages and
trying to find dependencies and setting
up configurations wouldn't be great if
you know you could just package your
application with the operating system to
support it all in a little you know like
a VMDK for vmware or what have you and
that's exactly what virtual appliances
are and I'm actually going to be setting
one up here in VirtualBox you can find
virtual appliances a lot of different
places in fact VMware does a very good
job of having like a virtual appliance
marketplace and typically they come in
your VMDK or basically your virtual hard
drive format but there's also open
standards for virtual appliances the one
that I'm going to be using as an example
is actually dim dim are awesome sponsor
of this segment in a really cool web
conferencing system they are built on
open source so they actually have an
open source edition and not only do they
provide their software as you know it's
like a download that you can install and
whatever your favorite Linux machine may
be but they provide the virtual
appliance so we're going to go ahead and
set that up now I'm saying when you set
this up and open our in VirtualBox even
though it's actually a VMDK for vmware
if you want to get the preview my player
or whatever you'll make not happy but
he's not here so we're gonna do it my
way with open source cool
so in VirtualBox but we're going to need
to do is go to file and virtual media
manager and from there we can actually
add the VM
Ek that we've downloaded from dimdim now
we create a new VM we're gonna specify
that it's Linux other and we will select
from our drop down that VMDK we don't
have to go through a lot of tweaking or
anything we don't have to use QA mu and
convert it to a bin or anything because
the new versions our VirtualBox just go
ahead and support that VMDK anyway so
that's nice
we'll also need to edit our networking
and release I do whenever I create one
so I'm gonna go into networking and I'm
gonna set it to bridge and then let's go
ahead and start our virtual machine so
here we go and we'll login as root and
the password is dim dim now if I issue
an ifconfig at the zero I can see that I
actually don't have an address I would
have hoped that I'd get a DHCP but it
could be our network could be the VMDK
either way we're gonna specify this as a
static IP anyway this is going to this
this open source version of dimdim this
you know VMDK this virtual plant here is
gonna let us run our own instance of
dimdim on our own server so you know we
could do this at home we could do this
at work whatever and be able to you know
host it the way we want to and of course
if that's the case with any server we're
gonna give it a static IP address so
just to get things going let me just
DHIA
at the zero see if I can get an IP great
okay so I do have an IP and I'll go
ahead and edit the configuration scripts
so that I have this IP every single time
so I'll just go ahead and use vim and in
slash Etsy sis config network scripts
and if' CFG tak f0 so in real quick just
gonna specify what the device is at zero
what did protocol is gonna be obviously
static till our broadcast our IP address
the net mask what the network is and
tell it on boot yes we also need to go
ahead and edit / Etsy / this config
slash network until it yes networking
what our hostname is and what our
gateway is and we're just doing this
real simple on our land we're not going
to worry about you know setting it up
with the domain
and doing all the port forwarding and
putting it out there on the net with its
own host and everything but but for now
this will do and we'll just go ahead and
once we've edited those files go ahead
and issue a service network restart and
once that comes back up there's just a
few scripts that we need to run to
configure dim dim so we CD to slash user
slash local and in slash dim dim but
we've see we actually have a couple of
Perl scripts here that make
configuration pretty easy the configure
IP address the script is actually going
to allow us to configure this say if we
actually opened up the ports on the
firewall and we're hosting this you know
for our external clients to connect to
it would have an internal IP and then an
external internet IP and we could use
this tool to actually tell the dim dim
virtual appliance what those two are so
that you know it doesn't go confuse or
lose any clients or anything like that
since we're just doing this on our own
land though all I have to do is specify
LAN IP address here and the port which
is going to be 80 so it goes ahead and
configures dimdim for those settings and
then we're just going to restart dimdim
so we're gonna do a dub slash stop dim
dim and now we'll do dot slash start dim
dim and you'll see once everything has
started up that's it I mean you know as
far as configuration is concerned we've
gone ahead and taken a piece of software
with a zone operating system and put it
into well you could say a development
environment but you know with just a
little bit more we could probably put
this into production
so let's go ahead and take a look at
what it would look like for our clients
and actually to manage this I'll pull up
our browser and just as we specified
with that static IP we're going to head
over to their HTTP and slash dim dim and
there you go now we can host meetings
join meetings do anything that you you
know might be able to do with like
hosted dim dim but they're on our own
computer with the open-source version
and it was so simple because of that
virtual appliance and there's so many
more virtual appliances that make
deployment of stuff like this easier and
you know with VirtualBox it's really
easy to go ahead and import those as
well because you know it's the superior
virtualization technology don't listen
to Matt anyway I know you guys are going
to have a lot of questions and go
send your flames my way as well if for
some reason you like Microsoft's Virtual
PC I know I heard a couple of those
recently and anyway so that's it for
virtual appliances and I do want to
thank our sponsor for this segment take
a wild guess it's dim dim dim dim is
easy free web conferencing it's easy to
use it's built on open source and it's
100% browser-based you can start a
meeting and I am or tweet or email the
dim dim URL and the clients connect
instantly to your meeting they can share
your whiteboard your PowerPoint
presentation or other documents your PC
screen even your webcam and your audio
it's great for training so go ahead and
host attend or even record meetings with
no download required when you sign up
for free / dim dim com / hack 5 so why
pay for conferencing when dimdim is free
so sign up for free at dim dim calm /
hack 5 and in just 15 seconds you'll be
ready to go joining the more than three
million people who already love dimdim
well that just about wraps up this
episode of hack 5 of course if you have
any questions or comments be sure to
check out our show notes a hack 5 org or
email us feedback a hack 5 org and if
you're doing the twitter thing you can
follow us twitter comm slash hack 5 you
can join our facebook group at
facebook.com slash techno list and with
all that i'm reminding you guys once
again to trust your techno list that's
the film riot guys we're here i'd
totally jump off this in post not going
to though
Oh
I'm Darren kitchen you're watching hak5
in an ice cave in Alaska look at this
moron
writing the Declaration of Independence
this is way more con I'm like
instinctively winning the class but they
don't have to look at Wi-Fi alright
ready now I'm not and this is why I ride
a Honda</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>