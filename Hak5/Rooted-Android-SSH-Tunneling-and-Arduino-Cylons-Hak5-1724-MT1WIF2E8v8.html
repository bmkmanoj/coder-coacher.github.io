<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Rooted Android SSH Tunneling and Arduino Cylons! Hak5 1724 | Coder Coacher - Coaching Coders</title><meta content="Rooted Android SSH Tunneling and Arduino Cylons! Hak5 1724 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Rooted Android SSH Tunneling and Arduino Cylons! Hak5 1724</b></h2><h5 class="post__date">2015-01-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MT1WIF2E8v8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">coming up today on hak5 we've got
Arduino Cylons ssh tunneling on android
and linux video editing who'da thought
all that and more this time on hak5 this
episode of hak5 is brought to you by
domain.com hello welcome to hack 5 my
name is darren kitchen and i'm shannon
moore it's your weekly dose of techno
lust welcome friends and family members
yeah Cylons coming and then you're going
to secure your Android phone using some
root magic with ssh tunnels it's gonna
be very exciting but first I'm taking
over the warehouse are you really with
my son oh no I knew that this day would
happen in fact evil server have you know
cameo he's been kind of chilling on the
be set just what with that said keeps on
giving me the stink eye last week I made
a huge faux pas in that I said that
there was no good video editors for
Linux right I've tried the entirety of
the internet actually told you Thank You
internet because it has been a while
since I tried all of them but i do
remember right before going on the first
hack across America just being like this
is abysmal and it kind of was then but a
lot has changed in the last four years
and actually okay so i must say open
shot cute doesn't really support all the
file formats i need really kind of I
don't know it just feels like so watered
down I think that it's a good
alternative to say windows movie maker
but not to premiere perhaps p'tee V also
same kind of idea lack of development
however everyone everyone mentioned
kdenlive with a big cap okay because
it's for KDE I'm running gnome but it
still works just great and it is
actually the first video editor for
linux I've ever seen that's like I would
say full-featured real and it feels just
so natural like Here I am scrubbing
through the timeline got a little drone
footage here and then I make my cut and
then I make my next cut and then like we
can see the Doge here that it's all on
the quadcopter and you know I mean aside
from setting a couple of keyboard
shortcuts there's a lot of awesome
niceties that even premier doesn't have
like Paul check this out right hot
corner
top left drag it in I got my fade oh
look at that yeah Paul's just freaking
out now I can do the same thing with the
audio I can do it with like effects if I
do from the bottom up there's there's
like different transitions and so now
I've got a transition here and I can put
it between there and you know to
dissolve but I can like make it multiply
or any other and you can make terrible
effects yeah it's like doing your first
power point it's gonna be fantastic no
no I'm gonna try this I I think between
this and I kreta and maybe inkscape I'm
crossing my fingers here but I'm
thinking since I am you know I'm only
taking this machine yeah um I gave up on
the whole idea of just bringing the
crumble it's just no no no I just can't
with an arm can't do what you do yeah I
need to be able to do the creative stuff
and not through the cloud either huh
funnily enough anyway hahaha point being
I love the comment on last week's
episode urging Adobe not to port
creative cloud over to linux because it
would just get a bunch of people like me
who are just so used to there you know
there are tools at their disposal to
just continue using those and actually
turns out this is not half bad so I'm
gonna dive in I'm gonna learn a lot more
about it and so I hope that the videos
that you see coming from hack across
Europe will have been done through Kate
in life because at the very least it
does support all the file formats have
thrown at it so no showstoppers so far
well that's good yes well I didn't have
any problems building this little
monstrosity mm-hmm I feel like it needs
like a scar going across it right scar
on the side maybe some Cylon sound
effects coming out of it mmm that one
there we go hmm uh and tell me so last
time we spoke that your Arduino led
stuff you were making push buttons to
fading yeah i was i was doing fading so
that was really easy and i was doing it
interactive so you can press a button
and it'll fade from you know 0 to 255
which is pretty normal but i was only
using one LED so i wanted to grow off of
that and be able to put multiple LEDs on
one breadboard and try to figure out how
to do that and make the code work for
all of them to build it into a Cylon or
a Knight Rider depending on which TV no
it's definitely a cycle they were both
written by the same person so oh that
explains the bread for real you learn
something new every day if you learned
one thing from hak5 this week that was
it yep that was it so I stuck it inside
of a toaster but I might as well just go
ahead and take it out of here so you can
actually see what's going on here I have
a breadboard of course and then I have
multiple LEDs on the front and all of
those are going to be lighting up I have
220 k there we go 220 k ohm resistors
and a bunch of white wires that are
going from the line items for each of
the LEDs down to the pin numbers that
are going to be on the Arduino Uno I
also have this green ground wire going
from ground or negative on the
breadboard over to ground on my arduino
uno and then i have this weird thing
down here yeah what's up with the
potentiometer so this is called a
potentiometer so it looks kind of weird
but if you if you take off a plastic
dial off the front of like a volume
thing on your radio or on like an old TV
or something like that this turnstile we
usually change the volume and in my case
it changes the speed of the LED lights
so if I turn it down low they go really
really slow and then I turn it up all
the way high they go faster and faster
and faster and eventually they just all
light up about medium I don't know if
you can see that very well yeah you can
see it so I'll turn it back to you about
Cylons nice so do you want to take a
look at the code yeah I would in fact I
can only imagine already that you've got
a loop that's basically a new breeding
through what is this pins 11 through or
a notes and cheese through 12 okay to
through 12 and then they go from to all
the way up to 12 into the beam yeah well
they're not fading but they're doing a
loop from brightening one after the
other and then go all the way up to 12
and then i do the same loop but
backwards that would be the next step i
guess is since these are just like a
fawn and off you like nice like like
how'd it leave a trail ah like uh like
what is it Mouse do that bro
is on so i'll put the link in the show
notes to where i found an example of
this code and then i'll also post a
picture a close-up of my actual build so
you can see exactly where I put all my
pins and all my leds and everything it's
kind of thing about Arduino is that I
mean it's close enough to see that
you're learning see and to get started
you don't have to read circuit diagrams
especially when you're working at a
breadboard which i think is funny enough
that you just put a breadboard in it
fortunately like all the examples of
Cylon code that I found online they all
had just schematics they didn't have any
really good pictures of their own bread
board so I kind of had to figure this
out on my own but you know I used a lot
of what I've learned already to build
this myself and then I found an awesome
example code and I built on top of that
to take a look at the code alright so
first off up here we are explaining
exactly what each thing is going to be
called so start starting off at the top
we have an int called LED pins and this
is an array from to all the way up to 12
so this is just naming off each of the
pins that our LEDs are going to be
connected to the pin count is going to
be 11 oh I see where that's important
yeah pin count is 11 and then the timer
is going to be 10 so that means that
there's a 10 millisecond delay but the
tumor is what's gonna become a variable
through the potentiometer and how is
what's going to say where to light up
the LEDs plus and minus one there you go
ok already figured yeah ok so first off
over here we have this little for loop
that we're getting set up this puts all
the LEDs into an elit into an array
called LED pins this pin and that's
going to be our output and it starts
from to all the way up to 12 so this pin
equals 0 and then plus plus each one so
to look at 0 it won't find anything then
it goes up to one goes up to 2 all the
way up to 12 scrolling down a lit a
little bit this is our first loop so we
have two loops the first one is
increasing and then the second loop is
decreasing so this first loop is going
to be increasing from to all the way up
to 12 so we start off with this for loop
we start off this pin equals 0 so that
this is setting this pin 20 and then
it'll go up in a plus count + + so 10
equals pin plus 1 so here's our timer so
this analog read a's
zero this a 0 is because I have one of
my attention ometer pins plugged into a
zero which is a pin on the Arduino Uno
now that pin goes into the center and
that is the one that changes the volume
or changes the LED speed whenever you
turn the wheel on there so it's exactly
what you would find on a volume nozzle I
like it is that's basically a resistor
that's variable it is so so yeah
potentiometer they explained it as a
three terminal resistor that creates a
adjustable voltage divider that you can
turn with your fingers and you can use
these on volume controls you can use
them for LEDs radios etc it's used to
vary the speed of the lighting of the
LEDs and a voltage divider will take the
power that's being input into it and
divide it into a fraction that is less
so in this case I'm dividing by two
surprise so the speed it all depends on
that a zero potentiometer divided by two
and that's how you get your delay and
next up we go down here we're going to
tell the current pin to be on and then
we tell the next pin so plus one to be
on and then plus two to be on oh I see
so it's always itself plus two ahead of
it i'm sure you're headed be itself plus
1 a 1 behind it one ahead it but either
way you get realities so if you took
that out you would just have one LED
going just one-fourth yeah or if so yeah
it could easily just delete both of
those lines and then I would just have
one pin going back and forth which that
can be cool too but I wanted it to look
like a Cylon hmm ok so next up down here
we have the division by 2 that reads the
potentiometers value to get your delay
ah and this is where we set the timer
based on what the potentiometer saying
right and of course we don't have we
don't want them to stay on the LED so we
have to turn them off too so down here
we have low which is off for pin 1 and
then plus 1 so pin 2 plus 2 soap in 3 so
that turns each of them off and then
down below that we have our second floor
loop and this is going to do the so it's
just identical be going minus a plus
minus 1 so this will start at 12 and
then it goes down all the way to number
two LED pin number two and that'll just
turn them all on and then off all the
way down
is so rad really really cool the code is
a little bit more confusing but once you
figure out how to do it increasing it's
really easy to do it decreasing to write
but it's awesome right i love this on my
github so i'd love to see this coupled
with what you were doing last week with
making them fade and we should probably
also point out and there was a lot of
great comments about how i made it
footpaws saying that it's varying the
voltage obviously it's not very voltage
it's an LED set to whatever it is 3.7
volts or whatever have you it's varying
the but there's some really good
tutorials that we will link to because
it is beyond the scope of what I can
explain right now but it's saying
essentially it's like flickering it on
and on off really fast so that's how the
LED fading work so fast that you can't
seriously we got a really great email
with a video from a student that did a
project on just this yeah we really
fantastic cool so we'll assume you guys
some links on that kind of stuff and
then bring this back up when it's a more
relative to the segment but I just
thought that that was kind of cool and
then that kind of eat is fine brings up
the whole difference between animal yeah
a deer and our digital ones yes so that
was interesting to I was like why can't
I just plug him into the analog side but
it totally makes sense once you actually
pluck it some LEDs also if you screw up
and put one of the wires into the wrong
line so if it's not lined up with one of
your LEDs for example if I took one of
these white wires out right now I'm not
going to do that since it's on but it
just ended up making one of my leds turn
on and it wouldn't turn off and I was
like why is it doing that so I had to
change my wire over it I laid out
correctly dander troubleshooting oye
troubleshooting fun yeah well let us
know what you guys think of course you
can find shins code up on her github and
you'll find the links to all of the
other resources we can learn more about
this stuff in the description the show
notes whatever have you and on pitocin
we are looking yeah if you've got some
ideas for some toaster mods leave them
in the comments finishing us an email
feedback at hak5 org with that we're
going to take a quick break and when we
get back with a rooted android phone
we're gonna secure all of your internet
connections
mrs. H tunnels oh it doesn't matter
you've got rude access or your user your
essay or guest when you have that killer
idea you need to stand yourself a domain
name and web hosting fast and get this
you can do that over at domain com
they've got a quick domain discovery
system an easy checkout process all it
really means is you're gonna have your
domain name your website up and running
in no time I love the guys over at
domain com mainly because they're
affordable reliable and easy to use but
mostly because they are a huge like fun
place to do business they're awesome on
social media you can tweet them at
domain com and see what I'm talking
about and why it just makes it like a
great place to hang out and do business
and the guys over to my comm they're so
cool they want to hook you guys up there
huge fans of hak5 so they've got this
coupon code hak5 that you can use a
check out and a gate to an extra fifteen
percent off so when you think domain
names think domain.com
it is time for the trivia question of
the week last week's trivia question was
what science fiction writer wrote The
Three Laws of Robotics and the answer is
Isaac Asimov now this week's trivia
question is to whom was the first patent
for a technical invention awarded you
can answer that at hak5 org slash trivia
for your chance to win some awesome hak5
goodies good luck so last week we talked
about ssh tunneling with your android
phone without using root and it was i'm
not gonna lie little convoluted you have
to use connectbot or some other similar
ssh tunneling program that allow you to
do a dynamic socks proxy just like you
would with the TAC d option on your
linux computer and then of course you
just have to use any application that
supports socks proxies and unfortunately
on android that's not really everything
and it's also kind of a hassle because
you have to configure it every time so
just for web browsing without root it's
still pretty good as far as you know you
can just fire up firefox and you know
use that as your secure browser and we
all know that we've done it at some
point in time I'd like the insecure
browser and the secure browser and
forget that that's not the way to do it
the way to do it properly is obviously
to root your device because that's what
you're going to need in order to play
around with iptables because once you've
got that then you can use this awesome
program here called SSH tunnel now SSH
tunnel is an Android app that makes it
really easy to just like it says on the
tin set up SSH unnels and what's so
important about this one is that it's
actually going to allow you to set it up
as a global SSH tunnel for all of your
applications or even just select
applications on your phone and also its
really user intuitive like you know you
can set it to auto startup and auto
reconnect and you're kind of one of
those set and forget' kind of things so
let's dive right in when you pop up the
application it pretty much just brings
you right into settings because you
don't need a little big gooey with a
bunch of stuff when really it's the
services either on or it's off so to set
it up we will notice that we have a
couple of different profiles I'm going
to use the default profile but it is
nice to know that you can add different
SSH servers for instance here and then
of course the first thing is going to
need to know the IP address of our host
and in this case I'm going to use that
throwaway VPS once more
at 162 dot 220 dot one sixty dot 217
okay great the port is going to be 22
that's your default now we just set up
our username so in this case i'm not
using i'm using DK because it's a short
username and it's a regular user account
i know i know you really shouldn't use
your root account for that kind of stuff
that is a throwaway server now i will
mention that as far as the password is
concerned here you can go ahead and set
your passphrase or you can actually set
up keys SSH keys now in order to do this
you will have to set up your ssh key
pair your public and private key on
another machine right and then of course
you have to transfer over the key to the
you know dot it's in dot / ssh /
authorized underscore keys just like you
normally would on any other SSH tunnel
that you would do on say a desktop
whether it's Windows Mac or Linux
however you then have to take that
private key and transfer it over to your
phone if you do that you'll find under
the big menu thingy over here that you
can go into key file manager and it's
actually going to bring up a file
manager where you can then find on say
your SD card or wherever you've stored
it on your phone that private key now
you can just go ahead and it depends on
you know if you have a private key that
records password or not you can leave
that password field blank I kind of
prefer not to do this just in case I do
lose my phone I don't want my private
key in the wild I mean granted you could
you know as soon as you notice that
you've lost your phone go in and revoke
that key and that's good but if your
phone is your only connection to the
internet when you're traveling then it
could be problematic so for the moment
I'm just going to leave it with password
authentication and I should also mention
that this is only on the server side so
if you want to do you know only key
based authentication you have to set
that up in your ssh daemon configuration
on your you know whatever's whatever it
is if it's a no computer in the basement
of your house who are you know VPS up in
the cloud either way you just need to
set that on the server side if you want
to
make it strict so it only uses that so
that's the only like difficult part and
now honestly it's not difficult to be
just going to use password which is what
i'm going to do so i'm going to go ahead
and give it my lame password there we go
and now we're going to we're going to
check the box for use socks proxy there
we go that's going to make local port
1984 haha nice little amaj there cute
cute anything over 1024 obviously I
guess it really doesn't matter
considering your route but probably
better if you stay over 1024 so we'll
use the socks proxy will scroll down
here and check the box for auto
reconnect I'm not going to set the auto
connect feature I want to manage that
myself we're also going to check the box
here for global proxy now what this is
going to do and this is what requires
root it's going to use IP tables rules
to ensure that all of the traffic that
is destined to the Internet whether it's
through Wi-Fi or your cellular provider
all of those applications when they
connect to the internet they're going to
connect through port 1984 locally which
is then going to go through that ssh
tunnel that's very important this means
that you're not going to have stuff
leaking out from other applications and
that is generally a good thing now if
you don't want everything to go through
this you can uncheck that global proxy
box and you can actually hit this
individual proxy button and what this
will do is show you a list of your
applications and I can check the box i
want browser to go through it and I want
the let's see I don't really have many
applications on here i want gmail to go
through it and you know if you have
whatever i really don't have any apps on
this it's pretty fresh cyanogenmod phone
but you can choose on an application
basis if you want them to go through
that proxy which is kind of cool but i
think that the real power really is
having the global proxy so i'm going to
go ahead and check that and of course we
want to ensure that all dns queries go
through a proxy otherwise again we're
leaking information not necessarily of
what the contents of our message are but
where our messages are going so in this
case we will enable DNS proxy so that
means every time it resolves the name
whether it
you know fubar com or zombocom or
zombocom which is the best website on
the internet that's not going to go like
out in the wild that's going to go
through the ssh tunnel and that's good
stuff so with all of that we're going to
go ahead and I guess we should you know
let's check this box here for tunneling
we're going to get asked if we want to
allow to use root i'm going to say i'm
going to say remember this choice for 10
minutes and hit allow first time you do
this it will pop up a warning and saying
hey is this the key fingerprint you're
expecting make sure that is of course
the key fingerprint for your server so
you're not going men and middled and if
it all looks good yes and you're golden
it's going to remember that if you keep
fingerprint changes well then
something's wrong you're going to get
warning so with that we can now test to
see that all of our traffic is going
through here if I say pop-up browser and
let's see here I'm going to yeah google
what is my IP and it comes back as the
same IP address that we entered in
before that 1622 2162 17 we can also say
go to IP chicken com that's always a fun
one it's got a cute chicken on it and
there we go and the chicken tells us
that is that IP if we were to uncheck
this proxy and do it again without that
it would come up saying our regular
public IP which in this case would be
whatever I have through my cell modem so
I'll go ahead and go back to ssh tunnel
and uncheck that so now we're
disconnected and i'll come back to IP
chicken and instead of this one 62 220
something i'll go ahead and refresh and
i get 20 854 whatever its its that's the
one assigned to me from my isp in this
case t-mobile so that right there in a
nutshell is the basics of getting
started with ssh tunnel it does require
root but it is epic in that it just
works i love this there's other ways to
do this with say connectbot and proxy
droid but i find this the simplest way
to go highly recommend it i know i
be using it on the road when I'm hacking
across Europe and I'm looking forward to
hearing your guys feedback so hit us up
feedback at hak5 org with that we're
going to take a quick break but first
let's check in with Patrick and see
what's going on on tech thing padded
Norton here i have the pleasure of
hosting shannon's others showtek thing
we got some cool stuff coming up for you
this time I swear the drone roundup
Shannon's going to show you how to use
hardware for two factor authentication
and last pass and why this may be the
entire pc tool kit you need go check it
out people tech thing com or youtube.com
slash C slash tech thing thanks that
just about wraps up this week's episode
of hak5 but before we get going a couple
of quick announcements you are really
toaster happy over there well yes it has
my toaster well what if we would have we
made it fly then maybe then maybe are we
gonna make this into it i don't know i
think that would be fun anyway let us
say what you think show feedback at hak5
org what you'd like to see and of course
you can follow us hack five dot org
slash follow to find all of the links
and of course you can support us
directly at H AK shop com that's where
you can you know get yourself some cool
that's right we've got land taps and
Wi-Fi pineapples and USB rubber ducks
it's all sorts of goodies James Bond
stuff its fins yes fun things yes also
tune in to UM to tech thing my show
right yeah yeah that is on Thursdays
hak5 dot org and tech thing accom stuff
I should also point out to anybody in
the greater European Union area that
hack across Europe is starting on
februari 8th we're going to be going I
think the eights are the food oh my gosh
like that and so if you haven't already
signed up if you're in the area if
you're at a hackerspace if you want to
show us around a hackerspace or if you
just want to come out to one of the
various meetups I do know that we're
going to be doing Munich Berlin probably
Amsterdam probably London most
definitely Dublin and who knows you know
it could be your hacker space just sign
up at hacc across Europe calm and stay
tuned to the video blogs and all sorts
of fun stuff for things on the way
because I'm bringing from
drones to the euro really mm hmm hmm hmm
that sounds fun yes don't get stuck at
the airport no don't fly drones in the
airport that's within five nautical mile
yes technically that's bad except for
the oh I can't wait to show you the
little never mind I want to spoil
anything but there's on Micro Micro like
a nano tangent franchise uh you can find
the rest of the tangents at hak5 org and
with that i'm darren kitchen I'm Shannon
Morse fresco techno lust
today on hak5 we have Arduino Cylons ssh
tunneling on Android and Linux video
editing coming up now I know that was
tough have you heard my dolphin please
no favorite I've got recommended to me
on amazon like a couple weeks ago and i
was like it was like go home amazon
you're drunk</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>