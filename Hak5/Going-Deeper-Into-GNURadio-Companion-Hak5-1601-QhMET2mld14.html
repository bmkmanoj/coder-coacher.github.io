<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Going Deeper Into GNURadio Companion, Hak5 1601 | Coder Coacher - Coaching Coders</title><meta content="Going Deeper Into GNURadio Companion, Hak5 1601 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hak5/">Hak5</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Going Deeper Into GNURadio Companion, Hak5 1601</b></h2><h5 class="post__date">2014-02-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QhMET2mld14" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this time on the show building an FM
receiver with a new radio companion and
so so much more this episode of hack 5
is brought to you by domain.com hello
welcome to hack 5 my name is darren
kitchen i'm shannon blue
it's your weekly dose of technolo
welcome everyone to our humble abode I
am and our burlesque show already know
I'm go dear it whoo yeah I'm
representing our fallen hero to flappy
bird Oh get it all in the hero ha oh my
god all right that's so bad so bad it
was good dude ha I'm playing it on my
phone look at this is ridiculous okay
yes oh you'd have to any bird I know
yeah Lina towards this oh yeah they'll
be able yeah good luck with that Paul
b-roll time Oh didn't even get one I
know you suck what oh oh yeah nope so
what are we doing today we are
continuing with our series on
software-defined radio with a diving
into a new radiator pinyons yeah you
made this thing work
I learned a lot of things and we will we
will now dispense that knowledge to you
in audio-visual form so please follow
along at home grab your SDR dongles and
whip out your copy of pen too because
it's time to get new radio on yay okay
so seriously though picking up from last
week we we went through the rtl-sdr yes
a package that allows you to do cool
things with these little dumb Glee guys
here $20 dongles woo and we can know
which are back in the hock shop by the
time this airs that's good that's good
and which a little because I'm glad that
everybody's following along it's fun and
so we've gone ahead and tested to make
sure that the new radio or that the
realtek dongle works we've done the RTL
test we've done a little stuff with like
the RTL FM stuff and now let's go ahead
and actually do it by hand and build
ourselves an FM radio
a receiver in canoe radio yay I was
really excited to do this so we can
actually see kind of a back end idea of
where we're going to input all this
information right I mean new radio
companion is really sick because it
takes together it puts together all of
these different modules that essentially
would be big pieces of hardware yeah and
allows you to do it on your computer for
like nothing it's amazing and also I
like that they include descriptions for
each of the different modules that you
get so that it kind of helps you
understand everything that's included
whenever you want to try to get this
radio on right and I know that you know
right now our goal is to kind of
introduce you to new radio companion and
kind of like blocks interface kind of
thing to quickly and easily build a
program without writing any Python or C
even though it's going to make it in
Python or C on the back end anyway for
you and I know already that we're going
to have to just create this would be a
four hour show we try to explain
everything when it comes to like what
what is a quadrature and all of those
things so we're going to just kind of
gloss over some of the signal theory
stuff which I love but maybe we'll have
a several whole series on that because
when it comes to modulation I am like
modulating so anyway with that let's
just go ahead and dive into the program
here yeah so this is the file that we
had last time the last time a bill that
we had and had a couple of different
modules already set up yeah you got your
module workspace in kind of the center
there and then you've got all of your
blocks over on the right and you can
kind of drill down into any of those and
you know see what's underneath and then
at the bottom you kind of get your like
output it kind of seems familiar if
you're ever used to like well pretty
much any Cody yeah exactly it's it's
like whatever assimilate if you're used
to eclipse or Visual Studio even AutoCAD
looks this way or at least it used to
back when I ran it this is what visual
studio looks like I know that hahaha
there we go so let's go ahead and make
this program a little bit more complex
so right now what you're looking at are
you have two blocks your source and your
destination so your source in this case
as we laid out last week is the SDR our
real tech SVR source and if you double
click onto that we can open the proper
use of it and the only value that we've
changed here is our frequency and in
this case it's 93 0.66 now e6 is just
six zeros so it's it's 93 point six
million or 93 point six million Hertz
okay three pens to the ninety six point
three and that'd be right here yes
again megahertz as in you know we're
tuning in on on the FM dial so that's
good stuff and we're piping the output
of that very much like we do with you
know Bosch or Linux or whatever programs
we're using the pipe we can take the
output of one program and put it as the
input to another and the same kinds of
things here where you draw those lines
and actually we're able to T things
where we can actually take the output of
something and send it to two places
we're about to do that let's take a look
at where we're going with this okay
currently it's going into this thing
called a WX GUI FFT sync and we don't
need to get into what FFT sync is but
it's basically a nice little way to
visualize the spectrum ah and this is
just using the default so let's go ahead
and build this the shortcut key is f6 by
the way which one things a lot quicker
got it
and it's compiling at the bottom okay so
we have this and there we go and you can
see it and if you actually click on that
check box in the top right where it says
peak hold in fact you probably don't
even need to do that to notice it over
there on the right you'll notice there's
like a little bump yeah and that right
there is a radio station that's a
broadcast FM station cool and we're
going to go ahead and build a program
now we're going to expand this out so
that we can in fact tune to that and
listen to it
that's know we could later like record
it and other fun stuff like that but
this is going to require adding some
resampling adding some filters as well
as demodulating it I mean FM stands for
frequency modulation we're going to get
into what the difference between clam
and AM and FM are here soon
but but just staying with something that
people are probably already familiar
with but not as intimately as this let's
go ahead and start by I think we should
probably do every sample first then kind
of explain why we need to do such so
actually why don't we why don't we
replace that FFT
a sync with something a little bit more
visually interesting go ahead and delete
that just delete just delete on the
keyboard and go ahead and under
instrumentation and then WX you'll see
there's a WX gooey waterfall
don't go chase what mmm
truly Shannon can do the entire rap yes
true it's true yeah Timmy nice enough da
nope but not attended to her YouTube
chances on rainbow yesterday sorry Hey
so the waterfall is really nice in fact
you should be familiar with this up from
SDR sharp but it's a really beautiful
way to kind of like see rather than just
a bump but you can see it beautifully
over yes grab look at those two guys
it's really simple it connects you just
see what the own yep got it and f6 to
run it f6 and it runs tada ooh look at
that see this totally reminds me of like
being on a boat and then seeing this
owner oh it's so fun so is that the same
channel that we saw earlier that is the
bump except now we're seeing it over
time cool which is gonna really help
when we you know go to tune into it and
this is nice because if we were at like
a lower frequency and there was a bunch
of other fun things we could see more of
these and select them and it's just I
don't know
pretty cool we need to resample this so
that our computer can more easily decode
all of it because okay
it is turns out a ton of data yeah we're
getting just the raw samples right off
that chip and it's going into her CPU
and it is going to get overloaded by
trying to process all that information
so we're gonna throw 2/3 of it away oh
okay it's okay I'm still gonna be able
to listen to it and we're just gonna
have to do that we're just gonna have to
do I'm sorry what we're gonna need to do
so let's go ahead and add ourselves
what's called a rational resampler okay
okay
changing the sample size here and so you
would think that the rational resampler
would be under resampler x' and you'll
actually find something called a
rational resampler there but it's
actually a rational resampler base and
that is that is not the same so
we want it's under filters filter is
okay and it's called rational there it
is
drag and drop okay alright and so go
ahead and take the output of your RTL
source and put it into the input of your
rational resampler and what we want to
do is go ahead and set your decimation
to four and your interpolation to one
four tribulation one set it yep
oversimplification is we're getting
about a quarter of this and now we're
going to we're going to add a low-pass
filter we can will later be able to show
like what the difference is with and
without it but essentially what this is
going to allow us to do is clean up the
signal a little bit make it sound better
to our human ears
okay so grab that it's under filters ah
another one under filters there we go
and it's called low-pass filter this yes
okay and you can see the defaults are
already good except those red ones need
to be defined and we can actually get a
lot more complex in the gooeys and how
to you know make these more user
accessible but for right now let's just
go ahead and set some hard-coded values
here for our cutoff frequency let's make
that 100k so that would be one hundred
thousand one hundred okay thousand there
you go
and our cutoff or I'm sorry our
transition width is actually going to be
1 million so that's one eise Ickx ye6
and go and now we just connect those
guys together okay and here comes the
fun part
let's actually demodulate some of that
information that we're getting in here
so okay in this case what you'll want to
do is look under modulation and actually
you can if you go to the very top scroll
all the way up and click on blocks it'll
sort them alphabetically which is oh
that makes life so much easier
okay where am I going modulation
modulators okay and we want a WB FM w p
FM receive this one this is received yep
cool and then toss that guy in the
output of low-pass filter into him the
pass into you
BAM alright and we're gonna go ahead and
set his quadrature rate
to 500,000 and the audio decimation to
one wise we do want audio out of this
hit okay okay fantastic and now we need
to resample this again and we're going
to come back to the something changed
here so go ahead and grab filters and
another resampler yes what was it that
one rationally sampling yet there we go
okay all right and connect those
together the output of that one into the
input of this one okay oh my ear is red
yes and there's a reason for that you
notice that the output is actually
highlighted in orange while the input is
highlighted in blue now those orange and
blue have to do with what type of a
number this is or example if this were a
float or if it was complex and so if you
don't make sure those are all the same
then you'll actually get an i/o size
mismatch and that's no fun
so here's the part that's going to save
you a lot of time that isn't really
mentioned in a lot of documentation go
ahead and click on your receiver there
there resampler your sampler okay and
press the up arrow key up I'm sorry not
go into it but okay yeah just up arrow
key oh now they're orange hit it again
now they're both blue a bit blue so you
want them orange what comes out of WB FM
is complex and we need to make sure that
we stay with that the entire time okay
so now go ahead and double click on that
and we need to give it some values our
did we set the values for the WB FM ah
yes I believe so
okay and one okay well in that case this
is going to be 500 is what we're
bringing in so decimation is 500 okay
and the interpolation is what we're
going to turn this into so 500 thousand
you know I guess you could think of it
as like Hertz we're going to now need to
give that to well ultimately it's going
to go to our sound card and our sound
card doesn't operate at 500 thousand
Hertz nor do our ears so give it
something like 48 48 it would be good
okay
all right and hit OK okay
and now we can just go ahead and send
that to a sync to the audio sync so that
it's under audio not understand and the
cool thing about audio sync if you
double-click on that there you want to
go ahead and it's by default the sample
rate hit that drop down there those are
some really good presets forty-four
point one kilohertz for example is what
you would find with a CD audio player
while 48 kilohertz is what you would
find with like like a blu-ray 22050 is
another good example of like tape and 11
Oh 11 o 25 for that's cool I didn't know
that
yeah so which one do I wanted you you
want 48 cuz that's what we just down
sampled this to okay and also where it
says device name this is where you could
actually say if on your system is like
slash dev slash DSP we're talking about
Linux systems here so if you're on
Windows or Mac it's probably already the
default for you you don't have to worry
about it but if you're using also or
pulseaudio you may need to actually
specify the name of the device which
operates your sound card I thankfully
with pet - we don't have to do much cool
leave it blank okay but just to note
there if you're not hearing any sound
check what device you're using oh okay
well yeah that makes sense alright and
so go ahead and hit OK okay and let's
run this oh so I got oh yeah absolutely
all do you think all right I'll put
there now I have a question yes should
this be running to both the waterfall
sync and the rational sure um well if
you wanted to we could disable the
waterfall sync and we wouldn't be able
to see anything and you would actually
get a pop up for the audio sync however
the audio sync doesn't actually have
anything any GUI elements in it so it'd
be the teeny tiniest little window and
you wouldn't really be able to do much
with it okay so it's probably best to
have something coming out and also it's
really a nice verification because if
you're not hearing any sound yeah you're
like well is the radio seeing anything
and might be like debugging with a
program where you may do like a printf
for an echo at various stages of say
you're different ifs and loops and
statements like that you'd like might
you know while you're programming it
have some debug messaging where you're
like I got here or still stuck in the
loop and things like that you can do
kind of similar things with that these
WX GUI
items I like the waterfall best but they
all have their you know strengths and
weaknesses and similar to like how we
have right here we've just got it coming
right out of the source into our
waterfall you can move where that
waterfall goes so you could share it
with like hey what does the waterfall
look like after I do the resampling what
does it look like after I do the
low-pass filter in our case we're
looking at the raw signal right off of
the device but we could we could have
split it right after that last rational
resampler and see what they both look
like okay
all right I get it alright ready to run
fired up okay so f6 hopefully it works
okay we have a waterfall haha it works
that's cool yeah I don't know what
channel this is not super super loud
I've got the same thing over here I'm
gonna do with mine whoops oh hang on I
actually need to tune mine properly
you're a 96.3 there we go oh wow so you
notice that there's a little delay in
there yeah this is because we're
actually using our computers to process
this oh that's too funny well that makes
sense cuz yours has a better processor
than mine does right but it's not that
the it's not that we received the radio
signal any different a radio signal
we're both receiving the same things and
it's attenuating down this little guy
and going into our dongles but touch
copal okay if you just close that
waterfall it'll go ahead and stop the
program stop yes okay so there you go
that's a very basic FM howling and you
know it's a lot more advanced than the
one that we showed last week it is and
like I said we could really go pretty
far down the rabbit hole as far as
actual signal theory and what all of
these different guys are doing but
what's really I just want everybody to
get familiar with this to go in and
start playing with this I mean as we are
as well and learning and think of it
like programming because it really is
it's just that you're using Lego blocks
in this case I see why you like it so
because everything is awesome Oh what
else what else there was something else
to this and that was oh we want to make
this variable right so you've now
written a hard coded radio to 96.3 or
ninety three point six forget which one
it is
well that's great but what do you wanted
to mix what do you wanted to listen to a
different radio station then I would
have to go back in here and change it
out let's add a dial so this is really
cool we can actually create programs
here like that wxq is really cool
because you know with the waterfall we
get those really pretty you know we can
see over time and it's it's got a couple
of built-in functions but we can
actually add our own well widget
elements if you will
alicante you can actually like say Oh
beat up drop downs and sliders yeah
enter in a number field and things like
that so we can build appropriate and
stuff so we could have ones for like
gain and you know sample rate and things
like that so let's go ahead and add one
for the frequency this one's actually
pretty simple all you basically need to
do is you see over on the left how you
have that box for a variable we have a
variable called samp underscore rate and
it's set to two million and that's how
if you double-click on rtl-sdr source
that same Sam prey is actually how it
gets it sample rate and in this case if
we change that ninety three point six D
six to F req for frequency and hit OK
okay now we just have to create a
variable called F req oh okay
so go ahead and grab variables at the
bottom there and just a basic variable
drag that guy in and yeah wherever you
want to put them and give it a value of
freak cool OOP actually we need to
change the ID to freaks are e Q and the
the value of the ID in this case would
be ninety three point six okay okay uh
three or six
going to include the millions on there
yes okay okay and so now if we run the
program again f6 running that's again
tuned into that radio station yeah
that's cool okay close this alright
alright and so now we can add a slider
element that allows to actually change
that variable
so if you look under WX GUI elements I
believe it is over on the right WX
gooeys I'm all the way down
let's see I'll see WX and gooeys it's
like widgets GUI widgets GUI widgets not
under WX you're gonna find a WX GUI
slider slider okay alright got it
putting that guy in okay and
double-click on him and go ahead and
change the minimum to I don't know a te
686 okay and change the maximum 200 120
626 sure yeah looks pretty good and then
hit OK Oh copy see where says ID
variable underscore slider underscore
zero we're not going to be very creative
let's just copy that okay I hit OK
alright and now when you go over to your
variable f req yeah go ahead and into
the properties there and instead of the
value ninety three point six whatever
change this to this later boom that's it
oh I get it okay yep and let me just
make sure your slider has a as a default
value right does it default value fifty
let's make that one hundred e six 106
okay there we go
that makes more sense great cuz it's
between 80 and 120 well so now anymore
go ahead and run it okay this is fun all
right
huzzah Nikki not seeing a whole lot here
are we now but notice that we have a
slider at the bottom Oh says 100 point
one point one oh one point six
now this is where you say notice as you
move that slider you're seeing the
waterfall change right yeah so right now
stop moving for just a moment
okay we'll actually be able to see can
we see - next side-by-side no a moment
ago I thought you had - maybe to the
left I think there's two years yeah
there you go
you can actually see it the two
different yep that's awesome
and now you can actually scan for them
that's cool
now we're listening to 11.6 where I'm
gonna do it all sorts of crazy style
let's see one oh no no seven I had
better results down at the bottom like
in the 93 94 I'm gonna find one
and want one oh there you ha ha oh wait
isn't that the same one we were on
earlier it's coming in really well I
mean what can I say that's cool airwaves
just tuned to him
so can I do the same thing for a.m. as
well that's what I was kind of getting
at is the beauty of this these little
building blocks here is now that you
know how to do this and add the sliders
boom Bob's your uncle you can just go
ahead and change all the variables to be
things that you can slide around and and
enter it and you don't have to do FM
modulation you could do you know a.m.
you don't have to go to the audio output
you can go to a wav file or a hard drive
right and in the future we're actually
going to be able to do some IQ stuff
where we actually take out bits and say
for example data you go son lost it uh
we have some fun we have I have some fun
toys on nine hundred and fifteen
megahertz that we'll be able to decode
and do replay attacks on to take over my
favorite thing to take over what drones
oh yeah those yeah that's awesome oh
okay so that's a whole lot of stuff we
should take a quick break but when we
get back we're gonna have the technology
of the week doesn't matter whether you
use a sample rate megahertz or gigahertz
will you get that killer idea you need
to snag yourself a domain name and web
hosting fast and with domain coms quick
discovery system an easy checkout
process you can have your website up and
running in no time I love the guys over
at domain comm they're so affordable
reliable easy to use I have set up
websites in moments with them and their
social media presence is second to none
you can tweet them at domain.com and see
why it's such a fun place to do business
and the guys over at domain comms are
huge fans of Shannon and I and hak5 and
they want to hook you up so use the
coupon code hak5 at checkout and get
yourself an extra 15% off when you think
domain names think domain.com
and now it's time for the trivia
question of the week last week's trivia
question was what was the first
well-known encryption machine and the
answer was the enigma this week's
question is which tech company derives
its name from mythical creature
you can answer that at hak5 org slash
trivia for your chance to win some hack
five swag and it is now time for the
technolo Spoto of the week and this
photo is from silver moonshine he said
when watching last week's episode of
hack 5 and the trivia question was asked
I was at work I entered the contest on
the site but I decided to send a picture
too and this was about USB what does
that stand for yeah so his girlfriend is
a tattooist and gave him a USB tattoo
though ok I absolutely love it so you
can share your pictures if you want over
at email feedback at hack 5 org and make
sure to use the subject line technology
so that we can find them real nice and
easy I love that picture
yeah tattoos awesome awesome stuff hey
are you into playing Walter play a
notepad you can just want to mention
that over at IRC hack 5 Gorga been
hanging out there a lot lately I would
love to see you I love her I know come
on by hey we were talking about in the
last segment about how this can be
expanded on to do all sorts of different
things we picked up a new toy recently
another one yes oh wait a drone of
course it's that drone what do you think
I would be picking up I mean come on you
know me by now oh no man oh it's ok he
landed right up but check out we started
uh Wow using around the spectrum how do
you get here yeah so we're up at 911
megahertz we can see so I'm assuming
this is the frequency that is coming in
on it's like pointing to thee given the
fact that on the bottom of the device it
actually says FCC AI D and it says
frequency 915 megahertz that's awesome
yeah so anyway I was wrong to respond
expand expand I would love to respond
upon this series and find a way to go
ahead and you know demodulate that into
whatever it is
knocking FSK whatever the thing may be
and actually figure out what the bunt
the binding protocol is and then
takeover drones and say you know we
should do a feedback episode just about
like SDR because I've been getting a lot
of really good one back ton so yes join
us on hak5 forums so good hak5 org and
join us in the forums we've been doing a
fun SDR stuff there and yeah just get
involved in the community and you know
like us on the face tube yeah absolutely
I went through like 700 emails this week
feedback at hak5 org is our email and
then we are also on YouTube like you
said youtube.com slash PAC 5 that'd be
the one okay that's gonna guess in there
but anyway
yeah really uh thank you guys for
supporting us that way if you want to
continue supporting us further feel free
to head over to hae shop comm it's the
place where you can find sorts of cool
hackery gadgets including the SDRs and
so we really appreciate your support
over there and then hak5 dot org slash
follow that's where at hack five Darren
and at snubs and at he never uses the
Twitterverse and Google Plus is Google
Plus whole yeah that's where you can
find all of our links
yeah great community on Google+ too so
anyway with all of that really looking
forward to hearing your feedback on this
one I can't wait to get into the next
chapter with SDR stuff so let us know
what you think and with that I'm going
to remind you once again that i'm darren
kitchen I'm Shannon Morse
trust your technolo
oops oh there goes it was an expensive
one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>